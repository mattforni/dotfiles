"use strict";var On=Object.create;var U=Object.defineProperty;var An=Object.getOwnPropertyDescriptor;var Pn=Object.getOwnPropertyNames;var Rn=Object.getPrototypeOf,Dn=Object.prototype.hasOwnProperty;var u=(t,e)=>U(t,"name",{value:e,configurable:!0});var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zn=(t,e)=>{for(var n in e)U(t,n,{get:e[n],enumerable:!0})},Fe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Pn(e))!Dn.call(t,o)&&o!==n&&U(t,o,{get:()=>e[o],enumerable:!(r=An(e,o))||r.enumerable});return t};var Be=(t,e,n)=>(n=t!=null?On(Rn(t)):{},Fe(e||!t||!t.__esModule?U(n,"default",{value:t,enumerable:!0}):n,t)),Fn=t=>Fe(U({},"__esModule",{value:!0}),t);var Ke=w(pe=>{var Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");pe.encode=function(t){if(0<=t&&t<Qe.length)return Qe[t];throw new TypeError("Must be between 0 and 63: "+t)};pe.decode=function(t){var e=65,n=90,r=97,o=122,i=48,s=57,a=43,l=47,c=26,f=52;return e<=t&&t<=n?t-e:r<=t&&t<=o?t-r+c:i<=t&&t<=s?t-i+f:t==a?62:t==l?63:-1}});var me=w(ge=>{var He=Ke(),he=5,Xe=1<<he,Ye=Xe-1,Ze=Xe;function it(t){return t<0?(-t<<1)+1:(t<<1)+0}u(it,"toVLQSigned");function st(t){var e=(t&1)===1,n=t>>1;return e?-n:n}u(st,"fromVLQSigned");ge.encode=u(function(e){var n="",r,o=it(e);do r=o&Ye,o>>>=he,o>0&&(r|=Ze),n+=He.encode(r);while(o>0);return n},"base64VLQ_encode");ge.decode=u(function(e,n,r){var o=e.length,i=0,s=0,a,l;do{if(n>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(l=He.decode(e.charCodeAt(n++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));a=!!(l&Ze),l&=Ye,i=i+(l<<s),s+=he}while(a);r.value=st(i),r.rest=n},"base64VLQ_decode")});var W=w(y=>{function ut(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}u(ut,"getArg");y.getArg=ut;var en=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,at=/^data:.+\,.+$/;function q(t){var e=t.match(en);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}u(q,"urlParse");y.urlParse=q;function F(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}u(F,"urlGenerate");y.urlGenerate=F;function ve(t){var e=t,n=q(t);if(n){if(!n.path)return t;e=n.path}for(var r=y.isAbsolute(e),o=e.split(/\/+/),i,s=0,a=o.length-1;a>=0;a--)i=o[a],i==="."?o.splice(a,1):i===".."?s++:s>0&&(i===""?(o.splice(a+1,s),s=0):(o.splice(a,2),s--));return e=o.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,F(n)):e}u(ve,"normalize");y.normalize=ve;function nn(t,e){t===""&&(t="."),e===""&&(e=".");var n=q(e),r=q(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),F(n);if(n||e.match(at))return e;if(r&&!r.host&&!r.path)return r.host=e,F(r);var o=e.charAt(0)==="/"?e:ve(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=o,F(r)):o}u(nn,"join");y.join=nn;y.isAbsolute=function(t){return t.charAt(0)==="/"||en.test(t)};function lt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}u(lt,"relative");y.relative=lt;var tn=function(){var t=Object.create(null);return!("__proto__"in t)}();function rn(t){return t}u(rn,"identity");function ct(t){return on(t)?"$"+t:t}u(ct,"toSetString");y.toSetString=tn?rn:ct;function ft(t){return on(t)?t.slice(1):t}u(ft,"fromSetString");y.fromSetString=tn?rn:ft;function on(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}u(on,"isProtoString");function dt(t,e,n){var r=B(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:B(t.name,e.name)}u(dt,"compareByOriginalPositions");y.compareByOriginalPositions=dt;function pt(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=B(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:B(t.name,e.name)}u(pt,"compareByGeneratedPositionsDeflated");y.compareByGeneratedPositionsDeflated=pt;function B(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}u(B,"strcmp");function ht(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=B(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:B(t.name,e.name)}u(ht,"compareByGeneratedPositionsInflated");y.compareByGeneratedPositionsInflated=ht;function gt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}u(gt,"parseSourceMapInput");y.parseSourceMapInput=gt;function mt(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=q(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var o=r.path.lastIndexOf("/");o>=0&&(r.path=r.path.substring(0,o+1))}e=nn(F(r),e)}return ve(e)}u(mt,"computeSourceURL");y.computeSourceURL=mt});var Le=w(sn=>{var be=W(),Se=Object.prototype.hasOwnProperty,O=typeof Map<"u";function M(){this._array=[],this._set=O?new Map:Object.create(null)}u(M,"ArraySet");M.fromArray=u(function(e,n){for(var r=new M,o=0,i=e.length;o<i;o++)r.add(e[o],n);return r},"ArraySet_fromArray");M.prototype.size=u(function(){return O?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");M.prototype.add=u(function(e,n){var r=O?e:be.toSetString(e),o=O?this.has(e):Se.call(this._set,r),i=this._array.length;(!o||n)&&this._array.push(e),o||(O?this._set.set(e,i):this._set[r]=i)},"ArraySet_add");M.prototype.has=u(function(e){if(O)return this._set.has(e);var n=be.toSetString(e);return Se.call(this._set,n)},"ArraySet_has");M.prototype.indexOf=u(function(e){if(O){var n=this._set.get(e);if(n>=0)return n}else{var r=be.toSetString(e);if(Se.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");M.prototype.at=u(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");M.prototype.toArray=u(function(){return this._array.slice()},"ArraySet_toArray");sn.ArraySet=M});var ln=w(an=>{var un=W();function vt(t,e){var n=t.generatedLine,r=e.generatedLine,o=t.generatedColumn,i=e.generatedColumn;return r>n||r==n&&i>=o||un.compareByGeneratedPositionsInflated(t,e)<=0}u(vt,"generatedPositionAfter");function ne(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}u(ne,"MappingList");ne.prototype.unsortedForEach=u(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");ne.prototype.add=u(function(e){vt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");ne.prototype.toArray=u(function(){return this._sorted||(this._array.sort(un.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");an.MappingList=ne});var _e=w(cn=>{var V=me(),b=W(),te=Le().ArraySet,bt=ln().MappingList;function k(t){t||(t={}),this._file=b.getArg(t,"file",null),this._sourceRoot=b.getArg(t,"sourceRoot",null),this._skipValidation=b.getArg(t,"skipValidation",!1),this._sources=new te,this._names=new te,this._mappings=new bt,this._sourcesContents=null}u(k,"SourceMapGenerator");k.prototype._version=3;k.fromSourceMap=u(function(e){var n=e.sourceRoot,r=new k({file:e.file,sourceRoot:n});return e.eachMapping(function(o){var i={generated:{line:o.generatedLine,column:o.generatedColumn}};o.source!=null&&(i.source=o.source,n!=null&&(i.source=b.relative(n,i.source)),i.original={line:o.originalLine,column:o.originalColumn},o.name!=null&&(i.name=o.name)),r.addMapping(i)}),e.sources.forEach(function(o){var i=o;n!==null&&(i=b.relative(n,o)),r._sources.has(i)||r._sources.add(i);var s=e.sourceContentFor(o);s!=null&&r.setSourceContent(o,s)}),r},"SourceMapGenerator_fromSourceMap");k.prototype.addMapping=u(function(e){var n=b.getArg(e,"generated"),r=b.getArg(e,"original",null),o=b.getArg(e,"source",null),i=b.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,o,i),o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:o,name:i})},"SourceMapGenerator_addMapping");k.prototype.setSourceContent=u(function(e,n){var r=e;this._sourceRoot!=null&&(r=b.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[b.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[b.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");k.prototype.applySourceMap=u(function(e,n,r){var o=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var i=this._sourceRoot;i!=null&&(o=b.relative(i,o));var s=new te,a=new te;this._mappings.unsortedForEach(function(l){if(l.source===o&&l.originalLine!=null){var c=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});c.source!=null&&(l.source=c.source,r!=null&&(l.source=b.join(r,l.source)),i!=null&&(l.source=b.relative(i,l.source)),l.originalLine=c.line,l.originalColumn=c.column,c.name!=null&&(l.name=c.name))}var f=l.source;f!=null&&!s.has(f)&&s.add(f);var h=l.name;h!=null&&!a.has(h)&&a.add(h)},this),this._sources=s,this._names=a,e.sources.forEach(function(l){var c=e.sourceContentFor(l);c!=null&&(r!=null&&(l=b.join(r,l)),i!=null&&(l=b.relative(i,l)),this.setSourceContent(l,c))},this)},"SourceMapGenerator_applySourceMap");k.prototype._validateMapping=u(function(e,n,r,o){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!o)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:o}))}},"SourceMapGenerator_validateMapping");k.prototype._serializeMappings=u(function(){for(var e=0,n=1,r=0,o=0,i=0,s=0,a="",l,c,f,h,p=this._mappings.toArray(),g=0,v=p.length;g<v;g++){if(c=p[g],l="",c.generatedLine!==n)for(e=0;c.generatedLine!==n;)l+=";",n++;else if(g>0){if(!b.compareByGeneratedPositionsInflated(c,p[g-1]))continue;l+=","}l+=V.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(h=this._sources.indexOf(c.source),l+=V.encode(h-s),s=h,l+=V.encode(c.originalLine-1-o),o=c.originalLine-1,l+=V.encode(c.originalColumn-r),r=c.originalColumn,c.name!=null&&(f=this._names.indexOf(c.name),l+=V.encode(f-i),i=f)),a+=l}return a},"SourceMapGenerator_serializeMappings");k.prototype._generateSourcesContent=u(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=b.relative(n,r));var o=b.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)},"SourceMapGenerator_generateSourcesContent");k.prototype.toJSON=u(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");k.prototype.toString=u(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");cn.SourceMapGenerator=k});var fn=w(A=>{A.GREATEST_LOWER_BOUND=1;A.LEAST_UPPER_BOUND=2;function ye(t,e,n,r,o,i){var s=Math.floor((e-t)/2)+t,a=o(n,r[s],!0);return a===0?s:a>0?e-s>1?ye(s,e,n,r,o,i):i==A.LEAST_UPPER_BOUND?e<r.length?e:-1:s:s-t>1?ye(t,s,n,r,o,i):i==A.LEAST_UPPER_BOUND?s:t<0?-1:t}u(ye,"recursiveSearch");A.search=u(function(e,n,r,o){if(n.length===0)return-1;var i=ye(-1,n.length,e,n,r,o||A.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&r(n[i],n[i-1],!0)===0;)--i;return i},"search")});var pn=w(dn=>{function we(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}u(we,"swap");function St(t,e){return Math.round(t+Math.random()*(e-t))}u(St,"randomIntInRange");function Ce(t,e,n,r){if(n<r){var o=St(n,r),i=n-1;we(t,o,r);for(var s=t[r],a=n;a<r;a++)e(t[a],s)<=0&&(i+=1,we(t,i,a));we(t,i+1,a);var l=i+1;Ce(t,e,n,l-1),Ce(t,e,l+1,r)}}u(Ce,"doQuickSort");dn.quickSort=function(t,e){Ce(t,e,0,t.length-1)}});var gn=w(re=>{var d=W(),ke=fn(),j=Le().ArraySet,Lt=me(),$=pn().quickSort;function m(t,e){var n=t;return typeof t=="string"&&(n=d.parseSourceMapInput(t)),n.sections!=null?new x(n,e):new S(n,e)}u(m,"SourceMapConsumer");m.fromSourceMap=function(t,e){return S.fromSourceMap(t,e)};m.prototype._version=3;m.prototype.__generatedMappings=null;Object.defineProperty(m.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});m.prototype.__originalMappings=null;Object.defineProperty(m.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});m.prototype._charIsMappingSeparator=u(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");m.prototype._parseMappings=u(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");m.GENERATED_ORDER=1;m.ORIGINAL_ORDER=2;m.GREATEST_LOWER_BOUND=1;m.LEAST_UPPER_BOUND=2;m.prototype.eachMapping=u(function(e,n,r){var o=n||null,i=r||m.GENERATED_ORDER,s;switch(i){case m.GENERATED_ORDER:s=this._generatedMappings;break;case m.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(l){var c=l.source===null?null:this._sources.at(l.source);return c=d.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,o)},"SourceMapConsumer_eachMapping");m.prototype.allGeneratedPositionsFor=u(function(e){var n=d.getArg(e,"line"),r={source:d.getArg(e,"source"),originalLine:n,originalColumn:d.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var o=[],i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",d.compareByOriginalPositions,ke.LEAST_UPPER_BOUND);if(i>=0){var s=this._originalMappings[i];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)o.push({line:d.getArg(s,"generatedLine",null),column:d.getArg(s,"generatedColumn",null),lastColumn:d.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i];else for(var l=s.originalColumn;s&&s.originalLine===n&&s.originalColumn==l;)o.push({line:d.getArg(s,"generatedLine",null),column:d.getArg(s,"generatedColumn",null),lastColumn:d.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i]}return o},"SourceMapConsumer_allGeneratedPositionsFor");re.SourceMapConsumer=m;function S(t,e){var n=t;typeof t=="string"&&(n=d.parseSourceMapInput(t));var r=d.getArg(n,"version"),o=d.getArg(n,"sources"),i=d.getArg(n,"names",[]),s=d.getArg(n,"sourceRoot",null),a=d.getArg(n,"sourcesContent",null),l=d.getArg(n,"mappings"),c=d.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);s&&(s=d.normalize(s)),o=o.map(String).map(d.normalize).map(function(f){return s&&d.isAbsolute(s)&&d.isAbsolute(f)?d.relative(s,f):f}),this._names=j.fromArray(i.map(String),!0),this._sources=j.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(f){return d.computeSourceURL(s,f,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=l,this._sourceMapURL=e,this.file=c}u(S,"BasicSourceMapConsumer");S.prototype=Object.create(m.prototype);S.prototype.consumer=m;S.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=d.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};S.fromSourceMap=u(function(e,n){var r=Object.create(S.prototype),o=r._names=j.fromArray(e._names.toArray(),!0),i=r._sources=j.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(g){return d.computeSourceURL(r.sourceRoot,g,n)});for(var s=e._mappings.toArray().slice(),a=r.__generatedMappings=[],l=r.__originalMappings=[],c=0,f=s.length;c<f;c++){var h=s[c],p=new hn;p.generatedLine=h.generatedLine,p.generatedColumn=h.generatedColumn,h.source&&(p.source=i.indexOf(h.source),p.originalLine=h.originalLine,p.originalColumn=h.originalColumn,h.name&&(p.name=o.indexOf(h.name)),l.push(p)),a.push(p)}return $(r.__originalMappings,d.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");S.prototype._version=3;Object.defineProperty(S.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function hn(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}u(hn,"Mapping");S.prototype._parseMappings=u(function(e,n){for(var r=1,o=0,i=0,s=0,a=0,l=0,c=e.length,f=0,h={},p={},g=[],v=[],L,H,_,D,ze;f<c;)if(e.charAt(f)===";")r++,f++,o=0;else if(e.charAt(f)===",")f++;else{for(L=new hn,L.generatedLine=r,D=f;D<c&&!this._charIsMappingSeparator(e,D);D++);if(H=e.slice(f,D),_=h[H],_)f+=H.length;else{for(_=[];f<D;)Lt.decode(e,f,p),ze=p.value,f=p.rest,_.push(ze);if(_.length===2)throw new Error("Found a source, but no line and column");if(_.length===3)throw new Error("Found a source and line, but no column");h[H]=_}L.generatedColumn=o+_[0],o=L.generatedColumn,_.length>1&&(L.source=a+_[1],a+=_[1],L.originalLine=i+_[2],i=L.originalLine,L.originalLine+=1,L.originalColumn=s+_[3],s=L.originalColumn,_.length>4&&(L.name=l+_[4],l+=_[4])),v.push(L),typeof L.originalLine=="number"&&g.push(L)}$(v,d.compareByGeneratedPositionsDeflated),this.__generatedMappings=v,$(g,d.compareByOriginalPositions),this.__originalMappings=g},"SourceMapConsumer_parseMappings");S.prototype._findMapping=u(function(e,n,r,o,i,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return ke.search(e,n,i,s)},"SourceMapConsumer_findMapping");S.prototype.computeColumnSpans=u(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");S.prototype.originalPositionFor=u(function(e){var n={generatedLine:d.getArg(e,"line"),generatedColumn:d.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",d.compareByGeneratedPositionsDeflated,d.getArg(e,"bias",m.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===n.generatedLine){var i=d.getArg(o,"source",null);i!==null&&(i=this._sources.at(i),i=d.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var s=d.getArg(o,"name",null);return s!==null&&(s=this._names.at(s)),{source:i,line:d.getArg(o,"originalLine",null),column:d.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");S.prototype.hasContentsOfAllSources=u(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");S.prototype.sourceContentFor=u(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var o=e;this.sourceRoot!=null&&(o=d.relative(this.sourceRoot,o));var i;if(this.sourceRoot!=null&&(i=d.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||i.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(n)return null;throw new Error('"'+o+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");S.prototype.generatedPositionFor=u(function(e){var n=d.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:d.getArg(e,"line"),originalColumn:d.getArg(e,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",d.compareByOriginalPositions,d.getArg(e,"bias",m.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:d.getArg(i,"generatedLine",null),column:d.getArg(i,"generatedColumn",null),lastColumn:d.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");re.BasicSourceMapConsumer=S;function x(t,e){var n=t;typeof t=="string"&&(n=d.parseSourceMapInput(t));var r=d.getArg(n,"version"),o=d.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new j,this._names=new j;var i={line:-1,column:0};this._sections=o.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=d.getArg(s,"offset"),l=d.getArg(a,"line"),c=d.getArg(a,"column");if(l<i.line||l===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:l+1,generatedColumn:c+1},consumer:new m(d.getArg(s,"map"),e)}})}u(x,"IndexedSourceMapConsumer");x.prototype=Object.create(m.prototype);x.prototype.constructor=m;x.prototype._version=3;Object.defineProperty(x.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}});x.prototype.originalPositionFor=u(function(e){var n={generatedLine:d.getArg(e,"line"),generatedColumn:d.getArg(e,"column")},r=ke.search(n,this._sections,function(i,s){var a=i.generatedLine-s.generatedOffset.generatedLine;return a||i.generatedColumn-s.generatedOffset.generatedColumn}),o=this._sections[r];return o?o.consumer.originalPositionFor({line:n.generatedLine-(o.generatedOffset.generatedLine-1),column:n.generatedColumn-(o.generatedOffset.generatedLine===n.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");x.prototype.hasContentsOfAllSources=u(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");x.prototype.sourceContentFor=u(function(e,n){for(var r=0;r<this._sections.length;r++){var o=this._sections[r],i=o.consumer.sourceContentFor(e,!0);if(i)return i}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");x.prototype.generatedPositionFor=u(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(d.getArg(e,"source"))!==-1){var o=r.consumer.generatedPositionFor(e);if(o){var i={line:o.line+(r.generatedOffset.generatedLine-1),column:o.column+(r.generatedOffset.generatedLine===o.line?r.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");x.prototype._parseMappings=u(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var o=this._sections[r],i=o.consumer._generatedMappings,s=0;s<i.length;s++){var a=i[s],l=o.consumer._sources.at(a.source);l=d.computeSourceURL(o.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;a.name&&(c=o.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var f={source:l,generatedLine:a.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(o.generatedOffset.generatedLine===a.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}$(this.__generatedMappings,d.compareByGeneratedPositionsDeflated),$(this.__originalMappings,d.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");re.IndexedSourceMapConsumer=x});var vn=w(mn=>{var _t=_e().SourceMapGenerator,oe=W(),yt=/(\r?\n)/,wt=10,G="$$$isSourceNode$$$";function C(t,e,n,r,o){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=o??null,this[G]=!0,r!=null&&this.add(r)}u(C,"SourceNode");C.fromStringWithSourceMap=u(function(e,n,r){var o=new C,i=e.split(yt),s=0,a=u(function(){var p=v(),g=v()||"";return p+g;function v(){return s<i.length?i[s++]:void 0}},"shiftNextLine"),l=1,c=0,f=null;return n.eachMapping(function(p){if(f!==null)if(l<p.generatedLine)h(f,a()),l++,c=0;else{var g=i[s]||"",v=g.substr(0,p.generatedColumn-c);i[s]=g.substr(p.generatedColumn-c),c=p.generatedColumn,h(f,v),f=p;return}for(;l<p.generatedLine;)o.add(a()),l++;if(c<p.generatedColumn){var g=i[s]||"";o.add(g.substr(0,p.generatedColumn)),i[s]=g.substr(p.generatedColumn),c=p.generatedColumn}f=p},this),s<i.length&&(f&&h(f,a()),o.add(i.splice(s).join(""))),n.sources.forEach(function(p){var g=n.sourceContentFor(p);g!=null&&(r!=null&&(p=oe.join(r,p)),o.setSourceContent(p,g))}),o;function h(p,g){if(p===null||p.source===void 0)o.add(g);else{var v=r?oe.join(r,p.source):p.source;o.add(new C(p.originalLine,p.originalColumn,v,g,p.name))}}u(h,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");C.prototype.add=u(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[G]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");C.prototype.prepend=u(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[G]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");C.prototype.walk=u(function(e){for(var n,r=0,o=this.children.length;r<o;r++)n=this.children[r],n[G]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");C.prototype.join=u(function(e){var n,r,o=this.children.length;if(o>0){for(n=[],r=0;r<o-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");C.prototype.replaceRight=u(function(e,n){var r=this.children[this.children.length-1];return r[G]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");C.prototype.setSourceContent=u(function(e,n){this.sourceContents[oe.toSetString(e)]=n},"SourceNode_setSourceContent");C.prototype.walkSourceContents=u(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][G]&&this.children[n].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),n=0,r=o.length;n<r;n++)e(oe.fromSetString(o[n]),this.sourceContents[o[n]])},"SourceNode_walkSourceContents");C.prototype.toString=u(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");C.prototype.toStringWithSourceMap=u(function(e){var n={code:"",line:1,column:0},r=new _t(e),o=!1,i=null,s=null,a=null,l=null;return this.walk(function(c,f){n.code+=c,f.source!==null&&f.line!==null&&f.column!==null?((i!==f.source||s!==f.line||a!==f.column||l!==f.name)&&r.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:n.line,column:n.column},name:f.name}),i=f.source,s=f.line,a=f.column,l=f.name,o=!0):o&&(r.addMapping({generated:{line:n.line,column:n.column}}),i=null,o=!1);for(var h=0,p=c.length;h<p;h++)c.charCodeAt(h)===wt?(n.line++,n.column=0,h+1===p?(i=null,o=!1):o&&r.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:n.line,column:n.column},name:f.name})):n.column++}),this.walkSourceContents(function(c,f){r.setSourceContent(c,f)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");mn.SourceNode=C});var bn=w(ie=>{ie.SourceMapGenerator=_e().SourceMapGenerator;ie.SourceMapConsumer=gn().SourceMapConsumer;ie.SourceNode=vn().SourceNode});var Ln=w((_o,Sn)=>{var Ct=Object.prototype.toString,xe=typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function kt(t){return Ct.call(t).slice(8,-1)==="ArrayBuffer"}u(kt,"isArrayBuffer");function xt(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return xe?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}u(xt,"fromArrayBuffer");function Tt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return xe?Buffer.from(t,e):new Buffer(t,e)}u(Tt,"fromString");function Et(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return kt(t)?xt(t,e,n):typeof t=="string"?Tt(t,e):xe?Buffer.from(t):new Buffer(t)}u(Et,"bufferFrom");Sn.exports=Et});var En=w((R,Ie)=>{var Mt=bn().SourceMapConsumer,Te=require("path"),T;try{T=require("fs"),(!T.existsSync||!T.readFileSync)&&(T=null)}catch{}var It=Ln();function _n(t,e){return t.require(e)}u(_n,"dynamicRequire");var yn=!1,wn=!1,Ee=!1,J="auto",P={},Q={},Nt=/^data:application\/json[^,]+base64,/,I=[],N=[];function Ne(){return J==="browser"?!0:J==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}u(Ne,"isInBrowser");function Ot(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}u(Ot,"hasGlobalProcessEventEmitter");function At(){return typeof process=="object"&&process!==null?process.version:""}u(At,"globalProcessVersion");function Pt(){if(typeof process=="object"&&process!==null)return process.stderr}u(Pt,"globalProcessStderr");function Rt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}u(Rt,"globalProcessExit");function se(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}u(se,"handlerExec");var Oe=se(I);I.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,o){return o?"":"/"})),t in P)return P[t];var e="";try{if(T)T.existsSync(t)&&(e=T.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return P[t]=e});function Me(t,e){if(!t)return e;var n=Te.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),o=r?r[0]:"",i=n.slice(o.length);return o&&/^\/\w\:/.test(i)?(o+="/",o+Te.resolve(n.slice(o.length),e).replace(/\\/g,"/")):o+Te.resolve(n.slice(o.length),e)}u(Me,"supportRelativeURL");function Dt(t){var e;if(Ne())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=Oe(t);for(var o=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,i,s;s=o.exec(e);)i=s;return i?i[1]:null}u(Dt,"retrieveSourceMapURL");var Ae=se(N);N.push(function(t){var e=Dt(t);if(!e)return null;var n;if(Nt.test(e)){var r=e.slice(e.indexOf(",")+1);n=It(r,"base64").toString(),e=t}else e=Me(t,e),n=Oe(e);return n?{url:e,map:n}:null});function Pe(t){var e=Q[t.source];if(!e){var n=Ae(t.source);n?(e=Q[t.source]={url:n.url,map:new Mt(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(o,i){var s=e.map.sourcesContent[i];if(s){var a=Me(e.url,o);P[a]=s}})):e=Q[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=Me(e.url,r.source),r}return t}u(Pe,"mapSourcePosition");function kn(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=Pe({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+kn(e[2])+")":t}u(kn,"mapEvalOrigin");function zt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var o="",i=this.getFunctionName(),s=!0,a=this.isConstructor(),l=!(this.isToplevel()||a);if(l){var c=this.getTypeName();c==="[object Object]"&&(c="null");var f=this.getMethodName();i?(c&&i.indexOf(c)!=0&&(o+=c+"."),o+=i,f&&i.indexOf("."+f)!=i.length-f.length-1&&(o+=" [as "+f+"]")):o+=c+"."+(f||"<anonymous>")}else a?o+="new "+(i||"<anonymous>"):i?o+=i:(o+=e,s=!1);return s&&(o+=" ("+e+")"),o}u(zt,"CallSiteToString");function Cn(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=zt,e}u(Cn,"cloneCallSite");function xn(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),o=t.getColumnNumber()-1,i=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=i.test(At())?0:62;r===1&&o>s&&!Ne()&&!t.isEval()&&(o-=s);var a=Pe({source:n,line:r,column:o});e.curPosition=a,t=Cn(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=kn(c),t=Cn(t),t.getEvalOrigin=function(){return c}),t}u(xn,"wrapCallSite");function Ft(t,e){Ee&&(P={},Q={});for(var n=t.name||"Error",r=t.message||"",o=n+": "+r,i={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+xn(e[a],i)),i.nextPosition=i.curPosition;return i.curPosition=i.nextPosition=null,o+s.reverse().join("")}u(Ft,"prepareStackTrace");function Tn(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],o=+e[3],i=P[n];if(!i&&T&&T.existsSync(n))try{i=T.readFileSync(n,"utf8")}catch{i=""}if(i){var s=i.split(/(?:\r\n|\r|\n)/)[r-1];if(s)return n+":"+r+`
`+s+`
`+new Array(o).join(" ")+"^"}}return null}u(Tn,"getErrorSource");function Bt(t){var e=Tn(t),n=Pt();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),Rt(1)}u(Bt,"printErrorAndExit");function Wt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return Bt(arguments[1])}return t.apply(this,arguments)}}u(Wt,"shimEmitUncaughtException");var jt=I.slice(0),Gt=N.slice(0);R.wrapCallSite=xn;R.getErrorSource=Tn;R.mapSourcePosition=Pe;R.retrieveSourceMap=Ae;R.install=function(t){if(t=t||{},t.environment&&(J=t.environment,["node","browser","auto"].indexOf(J)===-1))throw new Error("environment "+J+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(I.length=0),I.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(N.length=0),N.unshift(t.retrieveSourceMap)),t.hookRequire&&!Ne()){var e=_n(Ie,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(i,s){return P[s]=i,Q[s]=void 0,n.call(this,i,s)},e.prototype._compile.__sourceMapSupport=!0)}if(Ee||(Ee="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),yn||(yn=!0,Error.prepareStackTrace=Ft),!wn){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var o=_n(Ie,"worker_threads");o.isMainThread===!1&&(r=!1)}catch{}r&&Ot()&&(wn=!0,Wt())}};R.resetRetrieveHandlers=function(){I.length=0,N.length=0,I=jt.slice(0),N=Gt.slice(0),Ae=se(N),Oe=se(I)}});var Mn=w(()=>{En().install()});var qt={};zn(qt,{WorkerProxy:()=>K,reset:()=>Ut,sleep:()=>Nn,workerFns:()=>Re,workerProxy:()=>De});module.exports=Fn(qt);var In=require("path"),E=require("worker_threads");var ue=Be(require("fs")),ae=Be(require("path")),Y=require("util");var X=u((t,e)=>Array.from(Array(e).keys()).slice(t),"range"),z=u(t=>t.charCodeAt(0),"ord"),Bn=u(t=>String.fromCharCode(t),"chr"),Wn=new Y.TextDecoder("utf-8"),We=u(t=>Wn.decode(new Uint8Array(t)),"decodeStr"),jn=u((t,e)=>{let n=new Map;return t.forEach((r,o)=>{n.set(t[o],e[o])}),n},"dictZip");function Gn(t){let e=X(z("!"),z("~")+1).concat(X(z("\xA1"),z("\xAC")+1),X(z("\xAE"),z("\xFF")+1)),n=e.slice(),r=0;for(let i=0;i<2**8;i++)e.includes(i)||(e.push(i),n.push(2**8+r),r=r+1);let o=n.map(i=>Bn(i));for(let i=0;i<e.length;i++)t.set(e[i],o[i])}u(Gn,"bytes_to_unicode");function je(t){let e=new Set,n=t[0];for(let r=1;r<t.length;r++){let o=t[r];e.add([n,o]),n=o}return e}u(je,"get_char_pairs");var Ge=new Map;function Ue(t="cl100k"){let e=Ge.get(t);return e!==void 0||(t==="mock"?e=new ce:e=new le(t),Ge.set(t,e)),e}u(Ue,"getTokenizer");var le=class{constructor(e="cl100k"){this.decoder=new Map;this.byte_encoder=new Map;this.byte_decoder=new Map;this.cache=new Map;this.textEncoder=new Y.TextEncoder;this.encodeStr=e=>Array.from(this.textEncoder.encode(e));let n="",r="";if(e==="cl100k")n="vocab_cushman002.bpe",r="tokenizer_cushman002.json",this.pat=/'s|'t|'re|'ve|'m|'ll|'d|[^\r\n\p{L}\p{N}]?\p{L}+|\p{N}{1,3}| ?[^\s\p{L}\p{N}]+[\r\n]*|\s*[\r\n]+|\s+(?!\S)|\s+/giu;else throw new Error(`Unknown tokenizer name: ${e}`);let o,i;try{let a=ue.readFileSync(ae.resolve(__dirname,"resources",e,r));o=JSON.parse(a.toString()),i=ue.readFileSync(ae.resolve(__dirname,"resources",e,n),"utf-8")}catch(a){if((a.code==="ENOENT"||a.code==="EIO"||a.code==="EACCES"||a.code==="EPERM")&&a instanceof Error||a instanceof SyntaxError){let l=new Error(`Could not load tokenizer: ${e}`);throw l.code="CopilotPromptLoadFailure",l}throw a}this.encoder=new Map(Object.entries(o));for(let[a,l]of this.encoder)this.decoder.set(l,a);let s=i.split(`
`).slice(1).filter(a=>a.trim().length>0);this.bpe_ranks=jn(s,X(0,s.length)),Gn(this.byte_encoder),this.byte_encoder.forEach((a,l,c)=>{this.byte_decoder.set(a,l)})}static{u(this,"BPETokenizer")}byteEncodeStr(e){return this.encodeStr(e).map(n=>this.byte_encoder.get(n))}mutatingConcat(e,n){for(let r=0;r<n.length;r++)e.push(n[r]);return e}bpe(e){if(this.cache.has(e))return this.cache.get(e);let n=this.byteEncodeStr(e),r=je(n);if(!r)return n.map(i=>this.encoder.get(i));for(;;){let i=new Map;r.forEach(p=>{let g=p.join(" "),v=this.bpe_ranks.get(g);i.set(v===void 0||isNaN(v)?1e11:v,p)});let s=Array.from(i.keys()).map(p=>Number(p)),a=i.get(Math.min(...s));if(!a||!this.bpe_ranks.has(a.join(" ")))break;let l=a[0],c=a[1],f=[],h=0;for(;h<n.length;){let p=n.indexOf(l,h);if(p===-1){this.mutatingConcat(f,n.slice(h));break}this.mutatingConcat(f,n.slice(h,p)),h=p,n[h]===l&&h<n.length-1&&n[h+1]===c?(f.push(l+c),h=h+2):(f.push(n[h]),h=h+1)}if(n=f,n.length===1)break;r=je(n)}let o=n.map(i=>this.encoder.get(i));return this.cache.set(e,o),o}tokenize(e){let n=[],r=Array.from(e.matchAll(this.pat)).map(o=>o[0]);for(let o of r){let i=this.bpe(o);this.mutatingConcat(n,i)}return n}tokenLength(e){return this.tokenize(e).length}takeLastTokens(e,n){if(n<=0)return"";let r=4,o=1,i=Math.min(e.length,n*r),s=e.slice(-i),a=this.tokenize(s);for(;a.length<n+2&&i<e.length;)i=Math.min(e.length,i+n*o),s=e.slice(-i),a=this.tokenize(s);return a.length<n?e:(a=a.slice(-n),this.detokenize(a))}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,o=1,i=Math.min(e.length,n*r),s=e.slice(0,i),a=this.tokenize(s);for(;a.length<n+2&&i<e.length;)i=Math.min(e.length,i+n*o),s=e.slice(0,i),a=this.tokenize(s);return a.length<n?{text:e,tokens:a}:(a=a.slice(0,n),{text:this.detokenize(a),tokens:a})}takeLastLinesTokens(e,n){let r=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}detokenize(e){let n=e.map(r=>this.decoder.get(r)).join("");return n=We(n.split("").map(r=>this.byte_decoder.get(r))),n}tokenizeStrings(e){return this.tokenize(e).map(r=>We(this.decoder.get(r).split("").map(o=>this.byte_decoder.get(o))))}},ce=class{constructor(){this.hash=e=>{let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);n=(n<<5)-n+o,n&=n&65535}return n}}static{u(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){return this.tokenizeStrings(e).slice(-n).join("")}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let r=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let o=r.indexOf(`
`);return r.substring(o+1)}};var Un={tokenizerName:"cl100k"};function qn(t){return{...Un,...t}}u(qn,"cursorContextOptions");function qe(t,e={}){let n=qn(e),r=Ue(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let o=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(o=o.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(o=r.takeLastLinesTokens(o,n.maxTokenLength)),{context:o,lineCount:o.split(`
`).length,tokenLength:r.tokenLength(o),tokenizerName:n.tokenizerName}}u(qe,"getCursorContext");var fe=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{u(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}};var de=class{static{u(this,"Tokenizer")}constructor(e){this.stopsForLanguage=Qn.get(e.languageId)??Jn}tokenize(e){return new Set(Vn(e).filter(n=>!this.stopsForLanguage.has(n)))}},Ve=new fe(20),Z=class{static{u(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new de(e)}get referenceTokens(){return this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,o)=>r.score>o.score?1:-1):n=="descending"?e.sort((r,o)=>r.score>o.score?-1:1):e}retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||this.referenceTokens.size===0)return r;let o=e.source.split(`
`),i=this.id()+":"+e.source,s=Ve.get(i)??[],a=s.length==0,l=a?o.map(this.tokenizer.tokenize,this.tokenizer):[];for(let[c,[f,h]]of this.getWindowsDelineations(o).entries()){if(a){let v=new Set;l.slice(f,h).forEach(L=>L.forEach(v.add,v)),s.push(v)}let p=s[c],g=this.similarityScore(p,this.referenceTokens);r.push({score:g,startLine:f,endLine:h})}return a&&Ve.put(i,s),this.sortScoredSnippets(r,n)}async findMatches(e){let n=await this.findBestMatch(e);return n?[n]:[]}async findBestMatch(e){if(e.source.length===0||this.referenceTokens.size===0)return;let n=e.source.split(`
`),r=this.retrieveAllSnippets(e,"descending");return r.length===0||r[0].score===0?void 0:{snippet:n.slice(r[0].startLine,r[0].endLine).join(`
`),semantics:"snippet",provider:"neighboring-tabs",...r[0]}}};function Vn(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}u(Vn,"splitIntoWords");var $n=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Jn=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...$n]),Qn=new Map([]);function Yn(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=u(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}u(Yn,"buildLabelRules");var Zn={opener:/^[\[({]/,closer:/^[\])}]/},Dr=Yn(Zn);function $e(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let o=0;o<r-t+1;o++)n.push([o,o+t]);return n}u($e,"getBasicWindowDelineations");var ee=class t extends Z{constructor(n,r){super(n);this.windowLength=r}static{u(this,"FixedWindowSizeJaccardMatcher")}static{this.FACTORY=n=>({to:r=>new t(r,n)})}id(){return"fixed:"+this.windowLength}getWindowsDelineations(n){return $e(this.windowLength,n)}_getCursorContextInfo(n){return qe(n,{maxLineCount:this.windowLength})}similarityScore(n,r){return et(n,r)}};function et(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}u(et,"computeScore");var nt={none:{snippetLength:1,threshold:-1,numberOfSnippets:0},conservative:{snippetLength:10,threshold:.3,numberOfSnippets:1},medium:{snippetLength:20,threshold:.1,numberOfSnippets:2},eager:{snippetLength:60,threshold:0,numberOfSnippets:4},eagerButLittle:{snippetLength:10,threshold:0,numberOfSnippets:1},eagerButMedium:{snippetLength:20,threshold:0,numberOfSnippets:4},eagerButMuch:{snippetLength:60,threshold:0,numberOfSnippets:6},retrievalComparable:{snippetLength:30,threshold:0,numberOfSnippets:4}},tt=1e4,rt=20;function ot(t,e){return ee.FACTORY(e.snippetLength).to(t)}u(ot,"getMatcher");async function Je(t,e,n){let r={...nt[n]},o=ot(t,r);return r.numberOfSnippets===0?[]:(await e.filter(s=>s.source.length<tt&&s.source.length>0).slice(0,rt).reduce(async(s,a)=>(await s).concat((await o.findMatches(a)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(s=>s.score&&s.snippet&&s.score>r.threshold).sort((s,a)=>s.score-a.score).slice(-r.numberOfSnippets)}u(Je,"getNeighborSnippets");function Nn(t){return new Promise(e=>{setTimeout(()=>e(`delay: ${t}`),t)})}u(Nn,"sleep");var Re=["getNeighborSnippets","sleep"],K=class{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getNeighborSnippets=Je;this.sleep=Nn;!E.isMainThread&&E.workerData?.port&&(Mn(),process.cwd=()=>E.workerData.cwd,this.configureWorkerResponse(E.workerData.port))}static{u(this,"WorkerProxy")}initWorker(){let{port1:e,port2:n}=new E.MessageChannel;this.port=e,this.worker=new E.Worker((0,In.resolve)(__dirname,"..","dist","workerProxy.js"),{workerData:{port:n,cwd:process.cwd()},transferList:[n]}),this.port.on("message",r=>this.handleMessage(r)),this.port.on("error",r=>this.handleError(r))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of Re)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of Re){let n=this.fns.get(e);if(n)this[e]=n;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",async({id:n,fn:r,args:o})=>{let i=this[r];if(!i)throw new Error(`Function not found: ${r}`);try{let s=await i.apply(this,o);this.port.postMessage({id:n,res:s})}catch(s){if(!(s instanceof Error))throw s;typeof s.code=="string"?this.port.postMessage({id:n,err:s,code:s.code}):this.port.postMessage({id:n,err:s})}})}handleMessage({id:e,err:n,code:r,res:o}){let i=this.handlers.get(e);i&&(this.handlers.delete(e),n?(n.code=r,i.reject(n)):i.resolve(o))}handleError(e){console.log(e);let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith("workerProxy.js'")&&(n=new Error("Failed to load workerProxy.js"),n.code="CopilotPromptLoadFailure");let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e?.name==="ExitStatus"&&typeof e.status=="number"?(n=new Error(`workerProxy.js exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${e}`);for(let r of this.handlers.values())r.reject(n);throw n}proxy(e){this[e]=function(...n){let r=this.nextHandlerId++;return new Promise((o,i)=>{this.handlers.set(r,{resolve:o,reject:i}),this.port?.postMessage({id:r,fn:e,args:n})})}}},De=new K,Ut=u(()=>{De.stopThreading(),De=new K},"reset");0&&(module.exports={WorkerProxy,reset,sleep,workerFns,workerProxy});
//# sourceMappingURL=workerProxy.js.map
