"use strict";var Yr=Object.create;var Ee=Object.defineProperty;var Qr=Object.getOwnPropertyDescriptor;var eo=Object.getOwnPropertyNames;var to=Object.getPrototypeOf,no=Object.prototype.hasOwnProperty;var u=(r,e)=>Ee(r,"name",{value:e,configurable:!0});var L=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ro=(r,e)=>{for(var t in e)Ee(r,t,{get:e[t],enumerable:!0})},kn=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of eo(e))!no.call(r,s)&&s!==t&&Ee(r,s,{get:()=>e[s],enumerable:!(i=Qr(e,s))||i.enumerable});return r};var Ue=(r,e,t)=>(t=r!=null?Yr(to(r)):{},kn(e||!r||!r.__esModule?Ee(t,"default",{value:r,enumerable:!0}):t,r)),oo=r=>kn(Ee({},"__esModule",{value:!0}),r);var Nn=L(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.bytePairEncode=H.BinaryMap=H.binaryMapKey=void 0;var io=u((r,e,t)=>{let i=t-e,s=16777215>>>Math.max(0,(3-i)*8),l=(r[e+0]|r[e+1]<<8|r[e+2]<<16)&s,n=16777215>>>Math.min(31,Math.max(0,(6-i)*8)),o=(r[e+3]|r[e+4]<<8|r[e+5]<<16)&n;return l+16777216*o},"binaryMapKey");H.binaryMapKey=io;var Se=class Se{constructor(){this.nested=new Map,this.final=new Map}get(e,t=0,i=e.length){var n;let s=i<6+t,l=(0,H.binaryMapKey)(e,t,i);return s?this.final.get(l):(n=this.nested.get(l))==null?void 0:n.get(e,6+t,i)}set(e,t){let i=(0,H.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(i,t);return}let l=this.nested.get(i);if(l instanceof Se)l.set(e.subarray(6),t);else{let n=new Se;n.set(e.subarray(6),t),this.nested.set(i,n)}}};u(Se,"BinaryMap");var gt=Se;H.BinaryMap=gt;var j=new Int32Array(128),R=new Int32Array(128);function so(r,e,t){var a;if(t===1)return[e.get(r)];let i=2147483647,s=-1;for(;j.length<t*2;)R=new Int32Array(R.length*2),j=new Int32Array(j.length*2);for(let c=0;c<t-1;c++){let d=(a=e.get(r,c,c+2))!=null?a:2147483647;d<i&&(i=d,s=c),R[c]=c,j[c]=d}R[t-1]=t-1,j[t-1]=2147483647,R[t]=t,j[t]=2147483647;let l=t+1;function n(c,d=0){if(c+d+2<l){let _=e.get(r,R[c],R[c+d+2]);if(_!==void 0)return _}return 2147483647}for(u(n,"getRank");i!==2147483647;){j[R[s]]=n(s,1),s>0&&(j[R[s-1]]=n(s-1,1));for(let c=s+1;c<l-1;c++)R[c]=R[c+1];l--,s=-1,i=2147483647;for(let c=0;c<l-1;c++){let d=j[R[c]];j[R[c]]<i&&(i=d,s=c)}}let o=[];for(let c=0;c<l-1;c++)o.push(e.get(r,R[c],R[c+1]));return o}u(so,"bytePairEncode");H.bytePairEncode=so});var Pn=L(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.makeTextEncoder=void 0;var wt=class wt{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let t=this.encoder.encode(e);return this.length=t.length,t}};u(wt,"UniversalTextEncoder");var bt=wt,vt=class vt{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}};u(vt,"NodeTextEncoder");var yt=vt,ao=u(()=>typeof Buffer<"u"?new yt:new bt,"makeTextEncoder");We.makeTextEncoder=ao});var Cn=L(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.LRUCache=void 0;var Tt=class Tt{constructor(e){this.size=e,this.nodes=new Map}get(e){let t=this.nodes.get(e);if(t)return this.moveToHead(t),t.value}set(e,t){let i=this.nodes.get(e);if(i)i.value=t,this.moveToHead(i);else{let s=new St(e,t);this.nodes.set(e,s),this.addNode(s),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};u(Tt,"LRUCache");var Et=Tt;ze.LRUCache=Et;var xt=class xt{constructor(e,t){this.key=e,this.value=t}};u(xt,"Node");var St=xt});var Lt=L(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.TikTokenizer=void 0;var lo=require("fs"),uo=require("util"),je=Nn(),co=Pn(),_o=Cn();function fo(r){let e=new Map;try{let i=lo.readFileSync(r,"utf-8");return t(i),e}catch(i){throw new Error(`Failed to load from BPE encoder file stream: ${i}`)}function t(i){for(let s of i.split(/[\r\n]+/)){if(s.trim()==="")continue;let l=s.split(" ");if(l.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let n=new Uint8Array(Buffer.from(l[0],"base64")),o=parseInt(l[1]);if(!isNaN(o))e.set(n,o);else throw new Error(`Can't parse ${l[1]} to integer`)}}u(t,"processBpeRanks")}u(fo,"loadTikTokenBpe");function po(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}u(po,"escapeRegExp");var It=class It{constructor(e,t,i,s=8192){this.textEncoder=(0,co.makeTextEncoder)(),this.textDecoder=new uo.TextDecoder("utf-8"),this.cache=new _o.LRUCache(s);let l=typeof e=="string"?fo(e):e;this.init(l,t,i)}init(e,t,i){this.encoder=new je.BinaryMap;for(let[s,l]of e)this.encoder.set(s,l);this.regex=new RegExp(i,"gu"),this.specialTokensRegex=new RegExp(Array.from(t.keys()).map(s=>po(s)).join("|")),this.specialTokensEncoder=t,this.decoder=new Map;for(let[s,l]of e)this.decoder.set(l,s);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[s,l]of t)this.specialTokensDecoder.set(l,s)}findNextSpecialToken(e,t,i){let s=t,l=null;if(i&&this.specialTokensRegex)for(;l=e.slice(s).match(this.specialTokensRegex),!(!l||i&&i.includes(l[0]));)s+=l.index+1;let n=l?s+l.index:e.length;return[l,n]}encode(e,t){let i=[],s=0;for(;;){let l,n;if([l,n]=this.findNextSpecialToken(e,s,t),n>s&&this.encodeByIndex(e,i,s,n),l){if(s=s+this.encodeSpecialToken(i,l),s>=e.length)break}else break}return i}encodeSpecialToken(e,t){var s;let i=(s=this.specialTokensEncoder)==null?void 0:s.get(t[0]);return e.push(i),t.index+t[0].length}encodeByIndex(e,t,i,s){let l,n=e.substring(i,s);for(this.regex.lastIndex=0;l=this.regex.exec(n);){let o=this.cache.get(l[0]);if(o)for(let a of o)t.push(a);else{let a=this.textEncoder.encode(l[0]),c=this.encoder.get(a,0,this.textEncoder.length);if(c!==void 0)t.push(c),this.cache.set(l[0],[c]);else{let d=(0,je.bytePairEncode)(a,this.encoder,this.textEncoder.length);for(let _ of d)t.push(_);this.cache.set(l[0],d)}}}}encodeTrimSuffixByIndex(e,t,i,s,l,n,o){let a,c=e.substring(i,s);for(this.regex.lastIndex=0;a=this.regex.exec(c);){let d=a[0],_=this.cache.get(d);if(_)if(n+_.length<=l)n+=_.length,o+=d.length,t.push(..._);else{let f=l-n;n+=f,o+=d.length,t.push(..._.slice(0,f));break}else{let f=this.textEncoder.encode(d),p=this.encoder.get(f,0,f.length);if(p!==void 0)if(this.cache.set(d,[p]),n+1<=l)n++,o+=d.length,t.push(p);else break;else{let m=(0,je.bytePairEncode)(f,this.encoder,this.textEncoder.length);if(this.cache.set(d,m),n+m.length<=l){n+=m.length,o+=d.length;for(let h of m)t.push(h)}else{let h=l-n;n+=h,o+=d.length;for(let b=0;b<h;b++)t.push(m[b]);break}}}if(n>=l)break}return{tokenCount:n,encodeLength:o}}encodeTrimSuffix(e,t,i){let s=[],l=0,n=0,o=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(e,l,i),d>l){let{tokenCount:_,encodeLength:f}=this.encodeTrimSuffixByIndex(e,s,l,d,t,n,o);if(n=_,o=f,n>=t)break}if(c!==null){if(n++,n<=t&&(l=l+this.encodeSpecialToken(s,c),o+=c[0].length,l>=e.length)||n>=t)break}else break}let a=o===e.length?e:e.slice(0,o);return{tokenIds:s,text:a}}encodeTrimPrefix(e,t,i){let s=[],l=0,n=0,o=0,a=new Map;for(a.set(n,o);;){let f,p;if([f,p]=this.findNextSpecialToken(e,l,i),p>l){let m,h=e.substring(l,p);for(this.regex.lastIndex=0;m=this.regex.exec(h);){let b=m[0],g=this.cache.get(b);if(g)n+=g.length,o+=b.length,s.push(...g),a.set(n,o);else{let T=this.textEncoder.encode(b),v=this.encoder.get(T);if(v!==void 0)this.cache.set(b,[v]),n++,o+=b.length,s.push(v),a.set(n,o);else{let S=(0,je.bytePairEncode)(T,this.encoder,this.textEncoder.length);this.cache.set(b,S),n+=S.length,o+=b.length;for(let E of S)s.push(E);a.set(n,o)}}}}if(f!==null){if(l=l+this.encodeSpecialToken(s,f),n++,o+=f[0].length,a.set(n,o),l>=e.length)break}else break}if(n<=t)return{tokenIds:s,text:e};let c=n-t,d=0,_=0;for(let[f,p]of a)if(f>=c){d=f,_=p;break}if(d>t){let f=this.encode(e,i),p=f.slice(f.length-t);return{tokenIds:p,text:this.decode(p)}}return{tokenIds:s.slice(d),text:e.slice(_)}}decode(e){var i,s;let t=[];for(let l of e){let n=[],o=(i=this.decoder)==null?void 0:i.get(l);if(o!==void 0)n=Array.from(o);else{let a=(s=this.specialTokensDecoder)==null?void 0:s.get(l);if(a!==void 0){let c=this.textEncoder.encode(a);n=Array.from(c.subarray(0,this.textEncoder.length))}}t.push(...n)}return this.textDecoder.decode(new Uint8Array(t))}};u(It,"TikTokenizer");var Mt=It;He.TikTokenizer=Mt});var jn=L(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.createTokenizer=N.createByEncoderName=N.createByModelName=N.getRegexByModel=N.getRegexByEncoder=N.getSpecialTokensByModel=N.getSpecialTokensByEncoder=N.MODEL_TO_ENCODING=void 0;var qe=require("fs"),kt=require("path"),mo=Lt(),ho=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);N.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var Ve="<|endoftext|>",An="<|fim_prefix|>",Fn="<|fim_middle|>",On="<|fim_suffix|>",Rn="<|endofprompt|>",Te="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Dn="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",go=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Bn=go.join("|");function Nt(r){let e="";if(N.MODEL_TO_ENCODING.has(r))e=N.MODEL_TO_ENCODING.get(r);else for(let[t,i]of ho)if(r.startsWith(t)){e=i;break}return e}u(Nt,"getEncoderFromModelName");async function bo(r,e){let t=await fetch(r);if(!t.ok)throw new Error(`Failed to fetch file from ${r}. Status code: ${t.status}`);let i=await t.text();qe.writeFileSync(e,i)}u(bo,"fetchAndSaveFile");function Pt(r){let e=new Map([[Ve,50256]]);switch(r){case"o200k_base":e=new Map([[Ve,199999],[Rn,200018]]);break;case"cl100k_base":e=new Map([[Ve,100257],[An,100258],[Fn,100259],[On,100260],[Rn,100276]]);break;case"p50k_edit":e=new Map([[Ve,50256],[An,50281],[Fn,50282],[On,50283]]);break;default:break}return e}u(Pt,"getSpecialTokensByEncoder");N.getSpecialTokensByEncoder=Pt;function yo(r){let e=Nt(r);return Pt(e)}u(yo,"getSpecialTokensByModel");N.getSpecialTokensByModel=yo;function Un(r){switch(r){case"o200k_base":return Bn;case"cl100k_base":return Dn;default:break}return Te}u(Un,"getRegexByEncoder");N.getRegexByEncoder=Un;function wo(r){let e=Nt(r);return Un(e)}u(wo,"getRegexByModel");N.getRegexByModel=wo;async function vo(r,e=null){return Wn(Nt(r),e)}u(vo,"createByModelName");N.createByModelName=vo;async function Wn(r,e=null){let t,i,s=Pt(r);switch(r){case"o200k_base":t=Bn,i="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":t=Dn,i="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":t=Te,i="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":t=Te,i="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":t=Te,i="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":t=Te,i="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${r}]`)}e!==null&&(s=new Map([...s,...e]));let l=kt.basename(i),n=kt.resolve(__dirname,"..","model");qe.existsSync(n)||qe.mkdirSync(n,{recursive:!0});let o=kt.resolve(n,l);return qe.existsSync(o)||(console.log(`Downloading file from ${i}`),await bo(i,o),console.log(`Saved file to ${o}`)),zn(o,s,t)}u(Wn,"createByEncoderName");N.createByEncoderName=Wn;function zn(r,e,t,i=8192){return new mo.TikTokenizer(r,e,t,i)}u(zn,"createTokenizer");N.createTokenizer=zn});var Hn=L(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.createTokenizer=P.createByEncoderName=P.createByModelName=P.getSpecialTokensByModel=P.getSpecialTokensByEncoder=P.getRegexByModel=P.getRegexByEncoder=P.MODEL_TO_ENCODING=P.TikTokenizer=void 0;var Eo=Lt();Object.defineProperty(P,"TikTokenizer",{enumerable:!0,get:u(function(){return Eo.TikTokenizer},"get")});var J=jn();Object.defineProperty(P,"MODEL_TO_ENCODING",{enumerable:!0,get:u(function(){return J.MODEL_TO_ENCODING},"get")});Object.defineProperty(P,"getRegexByEncoder",{enumerable:!0,get:u(function(){return J.getRegexByEncoder},"get")});Object.defineProperty(P,"getRegexByModel",{enumerable:!0,get:u(function(){return J.getRegexByModel},"get")});Object.defineProperty(P,"getSpecialTokensByEncoder",{enumerable:!0,get:u(function(){return J.getSpecialTokensByEncoder},"get")});Object.defineProperty(P,"getSpecialTokensByModel",{enumerable:!0,get:u(function(){return J.getSpecialTokensByModel},"get")});Object.defineProperty(P,"createByModelName",{enumerable:!0,get:u(function(){return J.createByModelName},"get")});Object.defineProperty(P,"createByEncoderName",{enumerable:!0,get:u(function(){return J.createByEncoderName},"get")});Object.defineProperty(P,"createTokenizer",{enumerable:!0,get:u(function(){return J.createTokenizer},"get")})});var ir=L((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;let _Parser=class _Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=u((n,o)=>{throw o},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(n){return Module.locateFile?Module.locateFile(n,scriptDirectory):scriptDirectory+n}u(locateFile,"locateFile");function logExceptionOnExit(n){n instanceof ExitStatus||err("exiting due to exception: "+n)}if(u(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=u((n,o)=>(n=isFileURI(n)?new URL(n):nodePath.normalize(n),fs.readFileSync(n,o?void 0:"utf8")),"read_"),readBinary=u(n=>{var o=read_(n,!0);return o.buffer||(o=new Uint8Array(o)),o},"readBinary"),readAsync=u((n,o,a)=>{n=isFileURI(n)?new URL(n):nodePath.normalize(n),fs.readFile(n,function(c,d){c?a(c):o(d.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=u((n,o)=>{if(keepRuntimeAlive())throw process.exitCode=n,o;logExceptionOnExit(o),process.exit(n)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=u(n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.send(null),o.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=u(n=>{var o=new XMLHttpRequest;return o.open("GET",n,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)},"readBinary")),readAsync=u((n,o,a)=>{var c=new XMLHttpRequest;c.open("GET",n,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):a()},c.onerror=a,c.send(null)},"readAsync"),setWindowTitle=u(n=>document.title=n,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(n,o,a){for(var c=o+a,d=o;n[d]&&!(d>=c);)++d;if(d-o>16&&n.buffer&&UTF8Decoder)return UTF8Decoder.decode(n.subarray(o,d));for(var _="";o<d;){var f=n[o++];if(128&f){var p=63&n[o++];if((224&f)!=192){var m=63&n[o++];if((f=(240&f)==224?(15&f)<<12|p<<6|m:(7&f)<<18|p<<12|m<<6|63&n[o++])<65536)_+=String.fromCharCode(f);else{var h=f-65536;_+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else _+=String.fromCharCode((31&f)<<6|p)}else _+=String.fromCharCode(f)}return _}u(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(n,o){return n?UTF8ArrayToString(HEAPU8,n,o):""}u(UTF8ToString,"UTF8ToString");function stringToUTF8Array(n,o,a,c){if(!(c>0))return 0;for(var d=a,_=a+c-1,f=0;f<n.length;++f){var p=n.charCodeAt(f);if(p>=55296&&p<=57343&&(p=65536+((1023&p)<<10)|1023&n.charCodeAt(++f)),p<=127){if(a>=_)break;o[a++]=p}else if(p<=2047){if(a+1>=_)break;o[a++]=192|p>>6,o[a++]=128|63&p}else if(p<=65535){if(a+2>=_)break;o[a++]=224|p>>12,o[a++]=128|p>>6&63,o[a++]=128|63&p}else{if(a+3>=_)break;o[a++]=240|p>>18,o[a++]=128|p>>12&63,o[a++]=128|p>>6&63,o[a++]=128|63&p}}return o[a]=0,a-d}u(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(n,o,a){return stringToUTF8Array(n,HEAPU8,o,a)}u(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(n){for(var o=0,a=0;a<n.length;++a){var c=n.charCodeAt(a);c<=127?o++:c<=2047?o+=2:c>=55296&&c<=57343?(o+=4,++a):o+=3}return o}u(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(n){buffer=n,Module.HEAP8=HEAP8=new Int8Array(n),Module.HEAP16=HEAP16=new Int16Array(n),Module.HEAP32=HEAP32=new Int32Array(n),Module.HEAPU8=HEAPU8=new Uint8Array(n),Module.HEAPU16=HEAPU16=new Uint16Array(n),Module.HEAPU32=HEAPU32=new Uint32Array(n),Module.HEAPF32=HEAPF32=new Float32Array(n),Module.HEAPF64=HEAPF64=new Float64Array(n)}u(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}u(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}u(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}u(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}u(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}u(postRun,"postRun");function addOnPreRun(n){__ATPRERUN__.unshift(n)}u(addOnPreRun,"addOnPreRun");function addOnInit(n){__ATINIT__.unshift(n)}u(addOnInit,"addOnInit");function addOnPostRun(n){__ATPOSTRUN__.unshift(n)}u(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(n){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}u(addRunDependency,"addRunDependency");function removeRunDependency(n){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var o=dependenciesFulfilled;dependenciesFulfilled=null,o()}}u(removeRunDependency,"removeRunDependency");function abort(n){throw Module.onAbort&&Module.onAbort(n),err(n="Aborted("+n+")"),ABORT=!0,EXITSTATUS=1,n+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(n)}u(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(n){return n.startsWith(dataURIPrefix)}u(isDataURI,"isDataURI");function isFileURI(n){return n.startsWith("file://")}u(isFileURI,"isFileURI");function getBinary(n){try{if(n==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(n);throw"both async and sync fetching of the wasm failed"}catch(o){abort(o)}}u(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return n.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(n,o){readAsync(wasmBinaryFile,function(a){n(new Uint8Array(a))},o)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}u(getBinaryPromise,"getBinaryPromise");function createWasm(){var n={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function o(d,_){var f=d.exports;f=relocateExports(f,1024);var p=getDylinkMetadata(_);p.neededDynlibs&&(dynamicLibraries=p.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(f,"main"),Module.asm=f,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}u(o,"t");function a(d){o(d.instance,d.module)}u(a,"r");function c(d){return getBinaryPromise().then(function(_){return WebAssembly.instantiate(_,n)}).then(function(_){return _}).then(d,function(_){err("failed to asynchronously prepare wasm: "+_),abort(_)})}if(u(c,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(n,o)}catch(d){return err("Module.instantiateWasm callback failed with error: "+d),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?c(a):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(d){return WebAssembly.instantiateStreaming(d,n).then(a,function(_){return err("wasm streaming compile failed: "+_),err("falling back to ArrayBuffer instantiation"),c(a)})}),{}}u(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}u(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:u(function(n,o){var a=GOT[o];return a||(a=GOT[o]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(o)||(a.required=!0),a},"get")};function callRuntimeCallbacks(n){for(;n.length>0;)n.shift()(Module)}u(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(n){var o=0,a=0;function c(){for(var M=0,w=1;;){var k=n[o++];if(M+=(127&k)*w,w*=128,!(128&k))break}return M}u(c,"_");function d(){var M=c();return UTF8ArrayToString(n,(o+=M)-M,M)}u(d,"n");function _(M,w){if(M)throw new Error(w)}u(_,"s");var f="dylink.0";if(n instanceof WebAssembly.Module){var p=WebAssembly.Module.customSections(n,f);p.length===0&&(f="dylink",p=WebAssembly.Module.customSections(n,f)),_(p.length===0,"need dylink section"),a=(n=new Uint8Array(p[0])).length}else{_(new Uint32Array(new Uint8Array(n.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),_(n[8]!==0,"need the dylink section to be first"),o=9;var m=c();a=o+m,f=d()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(f=="dylink"){h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();for(var b=c(),g=0;g<b;++g){var T=d();h.neededDynlibs.push(T)}}else for(_(f!=="dylink.0");o<a;){var v=n[o++],S=c();if(v===1)h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();else if(v===2)for(b=c(),g=0;g<b;++g)T=d(),h.neededDynlibs.push(T);else if(v===3)for(var E=c();E--;){var x=d();256&c()&&h.tlsExports.add(x)}else if(v===4)for(E=c();E--;)d(),x=d(),(3&c())==1&&h.weakImports.add(x);else o+=S}return h}u(getDylinkMetadata,"getDylinkMetadata");function getValue(n,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":case"i8":return HEAP8[n>>0];case"i16":return HEAP16[n>>1];case"i32":case"i64":return HEAP32[n>>2];case"float":return HEAPF32[n>>2];case"double":return HEAPF64[n>>3];case"*":return HEAPU32[n>>2];default:abort("invalid type for getValue: "+o)}return null}u(getValue,"getValue");function asmjsMangle(n){return n.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(n)?n:"_"+n}u(asmjsMangle,"asmjsMangle");function mergeLibSymbols(n,o){for(var a in n)if(n.hasOwnProperty(a)){asmLibraryArg.hasOwnProperty(a)||(asmLibraryArg[a]=n[a]);var c=asmjsMangle(a);Module.hasOwnProperty(c)||(Module[c]=n[a]),a=="__main_argc_argv"&&(Module._main=n[a])}}u(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(n,o,a){var c=Module["dynCall_"+n];return a&&a.length?c.apply(null,[o].concat(a)):c.call(null,o)}u(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(n){var o=wasmTableMirror[n];return o||(n>=wasmTableMirror.length&&(wasmTableMirror.length=n+1),wasmTableMirror[n]=o=wasmTable.get(n)),o}u(getWasmTableEntry,"getWasmTableEntry");function dynCall(n,o,a){return n.includes("j")?dynCallLegacy(n,o,a):getWasmTableEntry(o).apply(null,a)}u(dynCall,"dynCall");function createInvokeFunction(n){return function(){var o=stackSave();try{return dynCall(n,arguments[0],Array.prototype.slice.call(arguments,1))}catch(a){if(stackRestore(o),a!==a+0)throw a;_setThrew(1,0)}}}u(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(n,o){return HEAPU8.fill(0,n,n+o),n}u(zeroMemory,"zeroMemory");function getMemory(n){if(runtimeInitialized)return zeroMemory(_malloc(n),n);var o=___heap_base,a=o+n+15&-16;return ___heap_base=a,GOT.__heap_base.value=a,o}u(getMemory,"getMemory");function isInternalSym(n){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(n)}u(isInternalSym,"isInternalSym");function uleb128Encode(n,o){n<128?o.push(n):o.push(n%128|128,n>>7)}u(uleb128Encode,"uleb128Encode");function sigToWasmTypes(n){for(var o={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},a={parameters:[],results:n[0]=="v"?[]:[o[n[0]]]},c=1;c<n.length;++c)a.parameters.push(o[n[c]]),n[c]==="j"&&a.parameters.push("i32");return a}u(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(n,o){var a=n.slice(0,1),c=n.slice(1),d={i:127,p:127,j:126,f:125,d:124};o.push(96),uleb128Encode(c.length,o);for(var _=0;_<c.length;++_)o.push(d[c[_]]);a=="v"?o.push(0):o.push(1,d[a])}u(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(n,o){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(o),n);var a=[1];generateFuncType(o,a);var c=[0,97,115,109,1,0,0,0,1];uleb128Encode(a.length,c),c.push.apply(c,a),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var d=new WebAssembly.Module(new Uint8Array(c));return new WebAssembly.Instance(d,{e:{f:n}}).exports.f}u(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(n,o){if(functionsInTableMap)for(var a=n;a<n+o;a++){var c=getWasmTableEntry(a);c&&functionsInTableMap.set(c,a)}}u(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(n){throw n instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":n}return wasmTable.length-1}u(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(n,o){wasmTable.set(n,o),wasmTableMirror[n]=wasmTable.get(n)}u(setWasmTableEntry,"setWasmTableEntry");function addFunction(n,o){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(n))return functionsInTableMap.get(n);var a=getEmptyTableSlot();try{setWasmTableEntry(a,n)}catch(c){if(!(c instanceof TypeError))throw c;setWasmTableEntry(a,convertJsFunctionToWasm(n,o))}return functionsInTableMap.set(n,a),a}u(addFunction,"addFunction");function updateGOT(n,o){for(var a in n)if(!isInternalSym(a)){var c=n[a];a.startsWith("orig$")&&(a=a.split("$")[1],o=!0),GOT[a]||(GOT[a]=new WebAssembly.Global({value:"i32",mutable:!0})),(o||GOT[a].value==0)&&(typeof c=="function"?GOT[a].value=addFunction(c):typeof c=="number"?GOT[a].value=c:err("unhandled export type for `"+a+"`: "+typeof c))}}u(updateGOT,"updateGOT");function relocateExports(n,o,a){var c={};for(var d in n){var _=n[d];typeof _=="object"&&(_=_.value),typeof _=="number"&&(_+=o),c[d]=_}return updateGOT(c,a),c}u(relocateExports,"relocateExports");function resolveGlobalSymbol(n,o){var a;return o&&(a=asmLibraryArg["orig$"+n]),a||(a=asmLibraryArg[n])&&a.stub&&(a=void 0),a||(a=Module[asmjsMangle(n)]),!a&&n.startsWith("invoke_")&&(a=createInvokeFunction(n.split("_")[1])),a}u(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(n,o){return Math.ceil(n/o)*o}u(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(n){var o=resolveGlobalSymbol(n,!1);return o||(o=moduleExports[n]),o}u(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:u(function(n,o){switch(o){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(o in asmLibraryArg)return asmLibraryArg[o];var a;return o in n||(n[o]=function(){return a||(a=resolveSymbol(o)),a.apply(null,arguments)}),n[o]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(u(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(u(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(n){return postInstantiation(n.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return u(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(n,o){return n.then(function(){return loadDynamicLibrary(o,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(n){loadDynamicLibrary(n,flags)}),loadModule())}u(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(n,o,a){o=o||{global:!0,nodelete:!0};var c=LDSO.loadedLibsByName[n];if(c)return o.global&&!c.global&&(c.global=!0,c.module!=="loading"&&mergeLibSymbols(c.module,n)),o.nodelete&&c.refcount!==1/0&&(c.refcount=1/0),c.refcount++,a&&(LDSO.loadedLibsByHandle[a]=c),!o.loadAsync||Promise.resolve(!0);function d(p){if(o.fs&&o.fs.findObject(p)){var m=o.fs.readFile(p,{encoding:"binary"});return m instanceof Uint8Array||(m=new Uint8Array(m)),o.loadAsync?Promise.resolve(m):m}if(p=locateFile(p),o.loadAsync)return new Promise(function(h,b){readAsync(p,g=>h(new Uint8Array(g)),b)});if(!readBinary)throw new Error(p+": file not found, and synchronous loading of external files is not available");return readBinary(p)}u(d,"n");function _(){if(typeof preloadedWasm<"u"&&preloadedWasm[n]){var p=preloadedWasm[n];return o.loadAsync?Promise.resolve(p):p}return o.loadAsync?d(n).then(function(m){return loadWebAssemblyModule(m,o,a)}):loadWebAssemblyModule(d(n),o,a)}u(_,"s");function f(p){c.global&&mergeLibSymbols(p,n),c.module=p}return u(f,"a"),c={refcount:o.nodelete?1/0:1,name:n,module:"loading",global:o.global},LDSO.loadedLibsByName[n]=c,a&&(LDSO.loadedLibsByHandle[a]=c),o.loadAsync?_().then(function(p){return f(p),!0}):(f(_()),!0)}u(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var n in GOT)if(GOT[n].value==0){var o=resolveGlobalSymbol(n,!0);if(!o&&!GOT[n].required)continue;if(typeof o=="function")GOT[n].value=addFunction(o,o.sig);else{if(typeof o!="number")throw new Error("bad export type for `"+n+"`: "+typeof o);GOT[n].value=o}}}u(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(n,o){return n.then(function(){return loadDynamicLibrary(o,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}u(preloadDylibs,"preloadDylibs");function setValue(n,o,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":case"i8":HEAP8[n>>0]=o;break;case"i16":HEAP16[n>>1]=o;break;case"i32":HEAP32[n>>2]=o;break;case"i64":tempI64=[o>>>0,(tempDouble=o,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n>>2]=tempI64[0],HEAP32[n+4>>2]=tempI64[1];break;case"float":HEAPF32[n>>2]=o;break;case"double":HEAPF64[n>>3]=o;break;case"*":HEAPU32[n>>2]=o;break;default:abort("invalid type for setValue: "+a)}}u(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}u(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}u(_abort,"_abort");function _emscripten_date_now(){return Date.now()}u(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(n,o,a){HEAPU8.copyWithin(n,o,o+a)}u(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}u(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(n){try{return wasmMemory.grow(n-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}u(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(n){var o=HEAPU8.length;n>>>=0;var a=getHeapMax();if(n>a)return!1;for(var c=1;c<=4;c*=2){var d=o*(1+.2/c);if(d=Math.min(d,n+100663296),emscripten_realloc_buffer(Math.min(a,(_=Math.max(n,d))+((f=65536)-_%f)%f)))return!0}var _,f;return!1}u(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:u(function(n,o,a){if(PATH.isAbs(o))return o;var c;if(n===-100?c=FS.cwd():c=SYSCALLS.getStreamFromFD(n).path,o.length==0){if(!a)throw new FS.ErrnoError(44);return c}return PATH.join2(c,o)},"calculateAt"),doStat:u(function(n,o,a){try{var c=n(o)}catch(p){if(p&&p.node&&PATH.normalize(o)!==PATH.normalize(FS.getPath(p.node)))return-54;throw p}HEAP32[a>>2]=c.dev,HEAP32[a+8>>2]=c.ino,HEAP32[a+12>>2]=c.mode,HEAPU32[a+16>>2]=c.nlink,HEAP32[a+20>>2]=c.uid,HEAP32[a+24>>2]=c.gid,HEAP32[a+28>>2]=c.rdev,tempI64=[c.size>>>0,(tempDouble=c.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+40>>2]=tempI64[0],HEAP32[a+44>>2]=tempI64[1],HEAP32[a+48>>2]=4096,HEAP32[a+52>>2]=c.blocks;var d=c.atime.getTime(),_=c.mtime.getTime(),f=c.ctime.getTime();return tempI64=[Math.floor(d/1e3)>>>0,(tempDouble=Math.floor(d/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+56>>2]=tempI64[0],HEAP32[a+60>>2]=tempI64[1],HEAPU32[a+64>>2]=d%1e3*1e3,tempI64=[Math.floor(_/1e3)>>>0,(tempDouble=Math.floor(_/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+72>>2]=tempI64[0],HEAP32[a+76>>2]=tempI64[1],HEAPU32[a+80>>2]=_%1e3*1e3,tempI64=[Math.floor(f/1e3)>>>0,(tempDouble=Math.floor(f/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+88>>2]=tempI64[0],HEAP32[a+92>>2]=tempI64[1],HEAPU32[a+96>>2]=f%1e3*1e3,tempI64=[c.ino>>>0,(tempDouble=c.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a+104>>2]=tempI64[0],HEAP32[a+108>>2]=tempI64[1],0},"doStat"),doMsync:u(function(n,o,a,c,d){if(!FS.isFile(o.node.mode))throw new FS.ErrnoError(43);if(2&c)return 0;var _=HEAPU8.slice(n,n+a);FS.msync(o,_,d,a,c)},"doMsync"),varargs:void 0,get:u(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:u(function(n){return UTF8ToString(n)},"getStr"),getStreamFromFD:u(function(n){var o=FS.getStream(n);if(!o)throw new FS.ErrnoError(8);return o},"getStreamFromFD")};function _proc_exit(n){EXITSTATUS=n,keepRuntimeAlive()||(Module.onExit&&Module.onExit(n),ABORT=!0),quit_(n,new ExitStatus(n))}u(_proc_exit,"_proc_exit");function exitJS(n,o){EXITSTATUS=n,_proc_exit(n)}u(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(n){try{var o=SYSCALLS.getStreamFromFD(n);return FS.close(o),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}u(_fd_close,"_fd_close");function convertI32PairToI53Checked(n,o){return o+2097152>>>0<4194305-!!n?(n>>>0)+4294967296*o:NaN}u(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(n,o,a,c,d){try{var _=convertI32PairToI53Checked(o,a);if(isNaN(_))return 61;var f=SYSCALLS.getStreamFromFD(n);return FS.llseek(f,_,c),tempI64=[f.position>>>0,(tempDouble=f.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[d>>2]=tempI64[0],HEAP32[d+4>>2]=tempI64[1],f.getdents&&_===0&&c===0&&(f.getdents=null),0}catch(p){if(typeof FS>"u"||!(p instanceof FS.ErrnoError))throw p;return p.errno}}u(_fd_seek,"_fd_seek");function doWritev(n,o,a,c){for(var d=0,_=0;_<a;_++){var f=HEAPU32[o>>2],p=HEAPU32[o+4>>2];o+=8;var m=FS.write(n,HEAP8,f,p,c);if(m<0)return-1;d+=m,c!==void 0&&(c+=m)}return d}u(doWritev,"doWritev");function _fd_write(n,o,a,c){try{var d=doWritev(SYSCALLS.getStreamFromFD(n),o,a);return HEAPU32[c>>2]=d,0}catch(_){if(typeof FS>"u"||!(_ instanceof FS.ErrnoError))throw _;return _.errno}}u(_fd_write,"_fd_write");function _tree_sitter_log_callback(n,o){if(currentLogCallback){let a=UTF8ToString(o);currentLogCallback(a,n!==0)}}u(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(n,o,a,c,d){var _=currentParseCallback(o,{row:a,column:c});typeof _=="string"?(setValue(d,_.length,"i32"),stringToUTF16(_,n,10240)):setValue(d,0,"i32")}u(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(n){if(n instanceof ExitStatus||n=="unwind")return EXITSTATUS;quit_(1,n)}u(handleException,"handleException");function allocateUTF8OnStack(n){var o=lengthBytesUTF8(n)+1,a=stackAlloc(o);return stringToUTF8Array(n,HEAP8,a,o),a}u(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(n,o,a){if(a===void 0&&(a=2147483647),a<2)return 0;for(var c=o,d=(a-=2)<2*n.length?a/2:n.length,_=0;_<d;++_){var f=n.charCodeAt(_);HEAP16[o>>1]=f,o+=2}return HEAP16[o>>1]=0,o-c}u(stringToUTF16,"stringToUTF16");function AsciiToString(n){for(var o="";;){var a=HEAPU8[n++>>0];if(!a)return o;o+=String.fromCharCode(a)}}u(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(n){var o=Module._main;if(o){(n=n||[]).unshift(thisProgram);var a=n.length,c=stackAlloc(4*(a+1)),d=c>>2;n.forEach(f=>{HEAP32[d++]=allocateUTF8OnStack(f)}),HEAP32[d]=0;try{var _=o(a,c);return exitJS(_,!0),_}catch(f){return handleException(f)}}}u(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=u(function n(){calledRun||run(),calledRun||(dependenciesFulfilled=n)},"e");var dylibsLoaded=!1;function run(n){function o(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(n),postRun()))}u(o,"t"),n=n||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),o()},1)):o()))}if(u(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;let r=class r{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(o){let a;if(o){if(o.constructor!==Language)throw new Error("Argument must be a Language");{a=o[0];let c=C._ts_language_version(a);if(c<MIN_COMPATIBLE_VERSION||VERSION<c)throw new Error(`Incompatible language version ${c}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else a=0,o=null;return this.language=o,C._ts_parser_set_language(this[0],a),this}getLanguage(){return this.language}parse(o,a,c){if(typeof o=="string")currentParseCallback=u((m,h,b)=>o.slice(m,b),"currentParseCallback");else{if(typeof o!="function")throw new Error("Argument must be a string or a function");currentParseCallback=o}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let d=0,_=0;if(c&&c.includedRanges){d=c.includedRanges.length,_=C._calloc(d,SIZE_OF_RANGE);let m=_;for(let h=0;h<d;h++)marshalRange(m,c.includedRanges[h]),m+=SIZE_OF_RANGE}let f=C._ts_parser_parse_wasm(this[0],this[1],a?a[0]:0,_,d);if(!f)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let p=new Tree(INTERNAL,f,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,p}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(o){C._ts_parser_set_timeout_micros(this[0],o)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(o){if(o){if(typeof o!="function")throw new Error("Logger callback must be a function")}else o=null;return this.logCallback=o,this}getLogger(){return this.logCallback}};u(r,"ParserImpl");let ParserImpl=r,e=class e{constructor(o,a,c,d){assertInternal(o),this[0]=a,this.language=c,this.textCallback=d}copy(){let o=C._ts_tree_copy(this[0]);return new e(INTERNAL,o,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(o){marshalEdit(o),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(o){if(o.constructor!==e)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],o[0]);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(a);if(a>0){let _=c;for(let f=0;f<a;f++)d[f]=unmarshalRange(_),_+=SIZE_OF_RANGE;C._free(c)}return d}};u(e,"Tree");let Tree=e,t=class t{constructor(o,a){assertInternal(o),this.tree=a}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(o){return this.id===o.id}child(o){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],o),unmarshalNode(this.tree)}namedChild(o){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],o),unmarshalNode(this.tree)}childForFieldId(o){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],o),unmarshalNode(this.tree)}childForFieldName(o){let a=this.tree.language.fields.indexOf(o);if(a!==-1)return this.childForFieldId(a)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let o=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(o),o>0){let c=a;for(let d=0;d<o;d++)this._children[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(a)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let o=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(o),o>0){let c=a;for(let d=0;d<o;d++)this._namedChildren[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(a)}}return this._namedChildren}descendantsOfType(o,a,c){Array.isArray(o)||(o=[o]),a||(a=ZERO_POINT),c||(c=ZERO_POINT);let d=[],_=this.tree.language.types;for(let b=0,g=_.length;b<g;b++)o.includes(_[b])&&d.push(b);let f=C._malloc(SIZE_OF_INT*d.length);for(let b=0,g=d.length;b<g;b++)setValue(f+b*SIZE_OF_INT,d[b],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],f,d.length,a.row,a.column,c.row,c.column);let p=getValue(TRANSFER_BUFFER,"i32"),m=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),h=new Array(p);if(p>0){let b=m;for(let g=0;g<p;g++)h[g]=unmarshalNode(this.tree,b),b+=SIZE_OF_NODE}return C._free(m),C._free(f),h}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(o,a=o){if(typeof o!="number"||typeof a!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,o,"i32"),setValue(c+SIZE_OF_INT,a,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(o,a=o){if(typeof o!="number"||typeof a!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,o,"i32"),setValue(c+SIZE_OF_INT,a,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(o,a=o){if(!isPoint(o)||!isPoint(a))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,o),marshalPoint(c+SIZE_OF_POINT,a),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(o,a=o){if(!isPoint(o)||!isPoint(a))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,o),marshalPoint(c+SIZE_OF_POINT,a),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let o=C._ts_node_to_string_wasm(this.tree[0]),a=AsciiToString(o);return C._free(o),a}};u(t,"Node");let Node=t,i=class i{constructor(o,a){assertInternal(o),this.tree=a,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(o){marshalNode(o),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let o=C._ts_tree_cursor_start_index_wasm(this.tree[0]),a=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,o,a)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let o=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),o===1}gotoNextSibling(){marshalTreeCursor(this);let o=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),o===1}gotoParent(){marshalTreeCursor(this);let o=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),o===1}};u(i,"TreeCursor");let TreeCursor=i,s=class s{constructor(o,a){assertInternal(o),this[0]=a,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let c=0,d=this.types.length;c<d;c++)C._ts_language_symbol_type(this[0],c)<2&&(this.types[c]=UTF8ToString(C._ts_language_symbol_name(this[0],c)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let c=0,d=this.fields.length;c<d;c++){let _=C._ts_language_field_name_for_id(this[0],c);this.fields[c]=_!==0?UTF8ToString(_):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(o){let a=this.fields.indexOf(o);return a!==-1?a:null}fieldNameForId(o){return this.fields[o]||null}idForNodeType(o,a){let c=lengthBytesUTF8(o),d=C._malloc(c+1);stringToUTF8(o,d,c+1);let _=C._ts_language_symbol_for_name(this[0],d,c,a);return C._free(d),_||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(o){let a=C._ts_language_symbol_name(this[0],o);return a?UTF8ToString(a):null}nodeTypeIsNamed(o){return!!C._ts_language_type_is_named_wasm(this[0],o)}nodeTypeIsVisible(o){return!!C._ts_language_type_is_visible_wasm(this[0],o)}query(o){let a=lengthBytesUTF8(o),c=C._malloc(a+1);stringToUTF8(o,c,a+1);let d=C._ts_query_new(this[0],c,a,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!d){let E=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),x=UTF8ToString(c,getValue(TRANSFER_BUFFER,"i32")).length,M=o.substr(x,100).split(`
`)[0],w,k=M.match(QUERY_WORD_REGEX)[0];switch(E){case 2:w=new RangeError(`Bad node name '${k}'`);break;case 3:w=new RangeError(`Bad field name '${k}'`);break;case 4:w=new RangeError(`Bad capture name @${k}`);break;case 5:w=new TypeError(`Bad pattern structure at offset ${x}: '${M}'...`),k="";break;default:w=new SyntaxError(`Bad syntax at offset ${x}: '${M}'...`),k=""}throw w.index=x,w.length=k.length,C._free(c),w}let _=C._ts_query_string_count(d),f=C._ts_query_capture_count(d),p=C._ts_query_pattern_count(d),m=new Array(f),h=new Array(_);for(let E=0;E<f;E++){let x=C._ts_query_capture_name_for_id(d,E,TRANSFER_BUFFER),M=getValue(TRANSFER_BUFFER,"i32");m[E]=UTF8ToString(x,M)}for(let E=0;E<_;E++){let x=C._ts_query_string_value_for_id(d,E,TRANSFER_BUFFER),M=getValue(TRANSFER_BUFFER,"i32");h[E]=UTF8ToString(x,M)}let b=new Array(p),g=new Array(p),T=new Array(p),v=new Array(p),S=new Array(p);for(let E=0;E<p;E++){let x=C._ts_query_predicates_for_pattern(d,E,TRANSFER_BUFFER),M=getValue(TRANSFER_BUFFER,"i32");v[E]=[],S[E]=[];let w=[],k=x;for(let ye=0;ye<M;ye++){let In=getValue(k,"i32");k+=SIZE_OF_INT;let Ln=getValue(k,"i32");if(k+=SIZE_OF_INT,In===PREDICATE_STEP_TYPE_CAPTURE)w.push({type:"capture",name:m[Ln]});else if(In===PREDICATE_STEP_TYPE_STRING)w.push({type:"string",value:h[Ln]});else if(w.length>0){if(w[0].type!=="string")throw new Error("Predicates must begin with a literal value");let we=w[0].value,ve=!0;switch(we){case"not-eq?":ve=!1;case"eq?":if(w.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(w.length-1));if(w[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${w[1].value}"`);if(w[2].type==="capture"){let $=w[1].name,se=w[2].name;S[E].push(function(mt){let ae,ht;for(let Be of mt)Be.name===$&&(ae=Be.node),Be.name===se&&(ht=Be.node);return ae===void 0||ht===void 0||ae.text===ht.text===ve})}else{let $=w[1].name,se=w[2].value;S[E].push(function(mt){for(let ae of mt)if(ae.name===$)return ae.node.text===se===ve;return!0})}break;case"not-match?":ve=!1;case"match?":if(w.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${w.length-1}.`);if(w[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${w[1].value}".`);if(w[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${w[2].value}.`);let Jr=w[1].name,Xr=new RegExp(w[2].value);S[E].push(function($){for(let se of $)if(se.name===Jr)return Xr.test(se.node.text)===ve;return!0});break;case"set!":if(w.length<2||w.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${w.length-1}.`);if(w.some($=>$.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');b[E]||(b[E]={}),b[E][w[1].value]=w[2]?w[2].value:null;break;case"is?":case"is-not?":if(w.length<2||w.length>3)throw new Error(`Wrong number of arguments to \`#${we}\` predicate. Expected 1 or 2. Got ${w.length-1}.`);if(w.some($=>$.type!=="string"))throw new Error(`Arguments to \`#${we}\` predicate must be a strings.".`);let pt=we==="is?"?g:T;pt[E]||(pt[E]={}),pt[E][w[1].value]=w[2]?w[2].value:null;break;default:v[E].push({operator:we,operands:w.slice(1)})}w.length=0}}Object.freeze(b[E]),Object.freeze(g[E]),Object.freeze(T[E])}return C._free(c),new Query(INTERNAL,d,m,S,v,Object.freeze(b),Object.freeze(g),Object.freeze(T))}static load(o){let a;if(o instanceof Uint8Array)a=Promise.resolve(o);else{let d=o;if(typeof process<"u"&&process.versions&&process.versions.node){let _=require("fs");a=Promise.resolve(_.readFileSync(d))}else a=fetch(d).then(_=>_.arrayBuffer().then(f=>{if(_.ok)return new Uint8Array(f);{let p=new TextDecoder("utf-8").decode(f);throw new Error(`Language.load failed with status ${_.status}.

${p}`)}}))}let c=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return a.then(d=>c(d,{loadAsync:!0})).then(d=>{let _=Object.keys(d),f=_.find(m=>LANGUAGE_FUNCTION_REGEX.test(m)&&!m.includes("external_scanner_"));f||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(_,null,2)}`);let p=d[f]();return new s(INTERNAL,p)})}};u(s,"Language");let Language=s,l=class l{constructor(o,a,c,d,_,f,p,m){assertInternal(o),this[0]=a,this.captureNames=c,this.textPredicates=d,this.predicates=_,this.setProperties=f,this.assertedProperties=p,this.refutedProperties=m,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(o,a,c,d){a||(a=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let _=d.matchLimit;if(_===void 0)_=0;else if(typeof _!="number")throw new Error("Arguments must be numbers");marshalNode(o),C._ts_query_matches_wasm(this[0],o.tree[0],a.row,a.column,c.row,c.column,_);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),m=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=new Array(f);this.exceededMatchLimit=!!m;let b=0,g=p;for(let T=0;T<f;T++){let v=getValue(g,"i32");g+=SIZE_OF_INT;let S=getValue(g,"i32");g+=SIZE_OF_INT;let E=new Array(S);if(g=unmarshalCaptures(this,o.tree,g,E),this.textPredicates[v].every(x=>x(E))){h[b++]={pattern:v,captures:E};let x=this.setProperties[v];x&&(h[T].setProperties=x);let M=this.assertedProperties[v];M&&(h[T].assertedProperties=M);let w=this.refutedProperties[v];w&&(h[T].refutedProperties=w)}}return h.length=b,C._free(p),h}captures(o,a,c,d){a||(a=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let _=d.matchLimit;if(_===void 0)_=0;else if(typeof _!="number")throw new Error("Arguments must be numbers");marshalNode(o),C._ts_query_captures_wasm(this[0],o.tree[0],a.row,a.column,c.row,c.column,_);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),m=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=[];this.exceededMatchLimit=!!m;let b=[],g=p;for(let T=0;T<f;T++){let v=getValue(g,"i32");g+=SIZE_OF_INT;let S=getValue(g,"i32");g+=SIZE_OF_INT;let E=getValue(g,"i32");if(g+=SIZE_OF_INT,b.length=S,g=unmarshalCaptures(this,o.tree,g,b),this.textPredicates[v].every(x=>x(b))){let x=b[E],M=this.setProperties[v];M&&(x.setProperties=M);let w=this.assertedProperties[v];w&&(x.assertedProperties=w);let k=this.refutedProperties[v];k&&(x.refutedProperties=k),h.push(x)}}return C._free(p),h}predicatesForPattern(o){return this.predicates[o]}didExceedMatchLimit(){return this.exceededMatchLimit}};u(l,"Query");let Query=l;function getText(n,o,a){let c=a-o,d=n.textCallback(o,null,a);for(o+=d.length;o<a;){let _=n.textCallback(o,null,a);if(!(_&&_.length>0))break;o+=_.length,d+=_}return o>a&&(d=d.slice(0,c)),d}u(getText,"getText");function unmarshalCaptures(n,o,a,c){for(let d=0,_=c.length;d<_;d++){let f=getValue(a,"i32"),p=unmarshalNode(o,a+=SIZE_OF_INT);a+=SIZE_OF_NODE,c[d]={name:n.captureNames[f],node:p}}return a}u(unmarshalCaptures,"unmarshalCaptures");function assertInternal(n){if(n!==INTERNAL)throw new Error("Illegal constructor")}u(assertInternal,"assertInternal");function isPoint(n){return n&&typeof n.row=="number"&&typeof n.column=="number"}u(isPoint,"isPoint");function marshalNode(n){let o=TRANSFER_BUFFER;setValue(o,n.id,"i32"),o+=SIZE_OF_INT,setValue(o,n.startIndex,"i32"),o+=SIZE_OF_INT,setValue(o,n.startPosition.row,"i32"),o+=SIZE_OF_INT,setValue(o,n.startPosition.column,"i32"),o+=SIZE_OF_INT,setValue(o,n[0],"i32")}u(marshalNode,"marshalNode");function unmarshalNode(n,o=TRANSFER_BUFFER){let a=getValue(o,"i32");if(a===0)return null;let c=getValue(o+=SIZE_OF_INT,"i32"),d=getValue(o+=SIZE_OF_INT,"i32"),_=getValue(o+=SIZE_OF_INT,"i32"),f=getValue(o+=SIZE_OF_INT,"i32"),p=new Node(INTERNAL,n);return p.id=a,p.startIndex=c,p.startPosition={row:d,column:_},p[0]=f,p}u(unmarshalNode,"unmarshalNode");function marshalTreeCursor(n,o=TRANSFER_BUFFER){setValue(o+0*SIZE_OF_INT,n[0],"i32"),setValue(o+1*SIZE_OF_INT,n[1],"i32"),setValue(o+2*SIZE_OF_INT,n[2],"i32")}u(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(n){n[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),n[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),n[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}u(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(n,o){setValue(n,o.row,"i32"),setValue(n+SIZE_OF_INT,o.column,"i32")}u(marshalPoint,"marshalPoint");function unmarshalPoint(n){return{row:getValue(n,"i32"),column:getValue(n+SIZE_OF_INT,"i32")}}u(unmarshalPoint,"unmarshalPoint");function marshalRange(n,o){marshalPoint(n,o.startPosition),marshalPoint(n+=SIZE_OF_POINT,o.endPosition),setValue(n+=SIZE_OF_POINT,o.startIndex,"i32"),setValue(n+=SIZE_OF_INT,o.endIndex,"i32"),n+=SIZE_OF_INT}u(marshalRange,"marshalRange");function unmarshalRange(n){let o={};return o.startPosition=unmarshalPoint(n),n+=SIZE_OF_POINT,o.endPosition=unmarshalPoint(n),n+=SIZE_OF_POINT,o.startIndex=getValue(n,"i32"),n+=SIZE_OF_INT,o.endIndex=getValue(n,"i32"),o}u(unmarshalRange,"unmarshalRange");function marshalEdit(n){let o=TRANSFER_BUFFER;marshalPoint(o,n.startPosition),o+=SIZE_OF_POINT,marshalPoint(o,n.oldEndPosition),o+=SIZE_OF_POINT,marshalPoint(o,n.newEndPosition),o+=SIZE_OF_POINT,setValue(o,n.startIndex,"i32"),o+=SIZE_OF_INT,setValue(o,n.oldEndIndex,"i32"),o+=SIZE_OF_INT,setValue(o,n.newEndIndex,"i32"),o+=SIZE_OF_INT}u(marshalEdit,"marshalEdit");for(let n of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(_Parser.prototype,n,{value:ParserImpl.prototype[n],enumerable:!1,writable:!1});_Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}};u(_Parser,"Parser");let Parser=_Parser;return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var mr=L(nn=>{var pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");nn.encode=function(r){if(0<=r&&r<pr.length)return pr[r];throw new TypeError("Must be between 0 and 63: "+r)};nn.decode=function(r){var e=65,t=90,i=97,s=122,l=48,n=57,o=43,a=47,c=26,d=52;return e<=r&&r<=t?r-e:i<=r&&r<=s?r-i+c:l<=r&&r<=n?r-l+d:r==o?62:r==a?63:-1}});var sn=L(on=>{var hr=mr(),rn=5,gr=1<<rn,br=gr-1,yr=gr;function ii(r){return r<0?(-r<<1)+1:(r<<1)+0}u(ii,"toVLQSigned");function si(r){var e=(r&1)===1,t=r>>1;return e?-t:t}u(si,"fromVLQSigned");on.encode=u(function(e){var t="",i,s=ii(e);do i=s&br,s>>>=rn,s>0&&(i|=yr),t+=hr.encode(i);while(s>0);return t},"base64VLQ_encode");on.decode=u(function(e,t,i){var s=e.length,l=0,n=0,o,a;do{if(t>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(a=hr.decode(e.charCodeAt(t++)),a===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(a&yr),a&=br,l=l+(a<<n),n+=rn}while(o);i.value=si(l),i.rest=t},"base64VLQ_decode")});var he=L(O=>{function ai(r,e,t){if(e in r)return r[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}u(ai,"getArg");O.getArg=ai;var wr=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,li=/^data:.+\,.+$/;function Ce(r){var e=r.match(wr);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}u(Ce,"urlParse");O.urlParse=Ce;function pe(r){var e="";return r.scheme&&(e+=r.scheme+":"),e+="//",r.auth&&(e+=r.auth+"@"),r.host&&(e+=r.host),r.port&&(e+=":"+r.port),r.path&&(e+=r.path),e}u(pe,"urlGenerate");O.urlGenerate=pe;function an(r){var e=r,t=Ce(r);if(t){if(!t.path)return r;e=t.path}for(var i=O.isAbsolute(e),s=e.split(/\/+/),l,n=0,o=s.length-1;o>=0;o--)l=s[o],l==="."?s.splice(o,1):l===".."?n++:n>0&&(l===""?(s.splice(o+1,n),n=0):(s.splice(o,2),n--));return e=s.join("/"),e===""&&(e=i?"/":"."),t?(t.path=e,pe(t)):e}u(an,"normalize");O.normalize=an;function vr(r,e){r===""&&(r="."),e===""&&(e=".");var t=Ce(e),i=Ce(r);if(i&&(r=i.path||"/"),t&&!t.scheme)return i&&(t.scheme=i.scheme),pe(t);if(t||e.match(li))return e;if(i&&!i.host&&!i.path)return i.host=e,pe(i);var s=e.charAt(0)==="/"?e:an(r.replace(/\/+$/,"")+"/"+e);return i?(i.path=s,pe(i)):s}u(vr,"join");O.join=vr;O.isAbsolute=function(r){return r.charAt(0)==="/"||wr.test(r)};function ui(r,e){r===""&&(r="."),r=r.replace(/\/$/,"");for(var t=0;e.indexOf(r+"/")!==0;){var i=r.lastIndexOf("/");if(i<0||(r=r.slice(0,i),r.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(r.length+1)}u(ui,"relative");O.relative=ui;var Er=function(){var r=Object.create(null);return!("__proto__"in r)}();function Sr(r){return r}u(Sr,"identity");function ci(r){return Tr(r)?"$"+r:r}u(ci,"toSetString");O.toSetString=Er?Sr:ci;function di(r){return Tr(r)?r.slice(1):r}u(di,"fromSetString");O.fromSetString=Er?Sr:di;function Tr(r){if(!r)return!1;var e=r.length;if(e<9||r.charCodeAt(e-1)!==95||r.charCodeAt(e-2)!==95||r.charCodeAt(e-3)!==111||r.charCodeAt(e-4)!==116||r.charCodeAt(e-5)!==111||r.charCodeAt(e-6)!==114||r.charCodeAt(e-7)!==112||r.charCodeAt(e-8)!==95||r.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(r.charCodeAt(t)!==36)return!1;return!0}u(Tr,"isProtoString");function _i(r,e,t){var i=me(r.source,e.source);return i!==0||(i=r.originalLine-e.originalLine,i!==0)||(i=r.originalColumn-e.originalColumn,i!==0||t)||(i=r.generatedColumn-e.generatedColumn,i!==0)||(i=r.generatedLine-e.generatedLine,i!==0)?i:me(r.name,e.name)}u(_i,"compareByOriginalPositions");O.compareByOriginalPositions=_i;function fi(r,e,t){var i=r.generatedLine-e.generatedLine;return i!==0||(i=r.generatedColumn-e.generatedColumn,i!==0||t)||(i=me(r.source,e.source),i!==0)||(i=r.originalLine-e.originalLine,i!==0)||(i=r.originalColumn-e.originalColumn,i!==0)?i:me(r.name,e.name)}u(fi,"compareByGeneratedPositionsDeflated");O.compareByGeneratedPositionsDeflated=fi;function me(r,e){return r===e?0:r===null?1:e===null?-1:r>e?1:-1}u(me,"strcmp");function pi(r,e){var t=r.generatedLine-e.generatedLine;return t!==0||(t=r.generatedColumn-e.generatedColumn,t!==0)||(t=me(r.source,e.source),t!==0)||(t=r.originalLine-e.originalLine,t!==0)||(t=r.originalColumn-e.originalColumn,t!==0)?t:me(r.name,e.name)}u(pi,"compareByGeneratedPositionsInflated");O.compareByGeneratedPositionsInflated=pi;function mi(r){return JSON.parse(r.replace(/^\)]}'[^\n]*\n/,""))}u(mi,"parseSourceMapInput");O.parseSourceMapInput=mi;function hi(r,e,t){if(e=e||"",r&&(r[r.length-1]!=="/"&&e[0]!=="/"&&(r+="/"),e=r+e),t){var i=Ce(t);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var s=i.path.lastIndexOf("/");s>=0&&(i.path=i.path.substring(0,s+1))}e=vr(pe(i),e)}return an(e)}u(hi,"computeSourceURL");O.computeSourceURL=hi});var cn=L(xr=>{var ln=he(),un=Object.prototype.hasOwnProperty,ne=typeof Map<"u";function K(){this._array=[],this._set=ne?new Map:Object.create(null)}u(K,"ArraySet");K.fromArray=u(function(e,t){for(var i=new K,s=0,l=e.length;s<l;s++)i.add(e[s],t);return i},"ArraySet_fromArray");K.prototype.size=u(function(){return ne?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");K.prototype.add=u(function(e,t){var i=ne?e:ln.toSetString(e),s=ne?this.has(e):un.call(this._set,i),l=this._array.length;(!s||t)&&this._array.push(e),s||(ne?this._set.set(e,l):this._set[i]=l)},"ArraySet_add");K.prototype.has=u(function(e){if(ne)return this._set.has(e);var t=ln.toSetString(e);return un.call(this._set,t)},"ArraySet_has");K.prototype.indexOf=u(function(e){if(ne){var t=this._set.get(e);if(t>=0)return t}else{var i=ln.toSetString(e);if(un.call(this._set,i))return this._set[i]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");K.prototype.at=u(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");K.prototype.toArray=u(function(){return this._array.slice()},"ArraySet_toArray");xr.ArraySet=K});var Lr=L(Ir=>{var Mr=he();function gi(r,e){var t=r.generatedLine,i=e.generatedLine,s=r.generatedColumn,l=e.generatedColumn;return i>t||i==t&&l>=s||Mr.compareByGeneratedPositionsInflated(r,e)<=0}u(gi,"generatedPositionAfter");function at(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}u(at,"MappingList");at.prototype.unsortedForEach=u(function(e,t){this._array.forEach(e,t)},"MappingList_forEach");at.prototype.add=u(function(e){gi(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");at.prototype.toArray=u(function(){return this._sorted||(this._array.sort(Mr.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Ir.MappingList=at});var dn=L(kr=>{var Ae=sn(),A=he(),lt=cn().ArraySet,bi=Lr().MappingList;function U(r){r||(r={}),this._file=A.getArg(r,"file",null),this._sourceRoot=A.getArg(r,"sourceRoot",null),this._skipValidation=A.getArg(r,"skipValidation",!1),this._sources=new lt,this._names=new lt,this._mappings=new bi,this._sourcesContents=null}u(U,"SourceMapGenerator");U.prototype._version=3;U.fromSourceMap=u(function(e){var t=e.sourceRoot,i=new U({file:e.file,sourceRoot:t});return e.eachMapping(function(s){var l={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(l.source=s.source,t!=null&&(l.source=A.relative(t,l.source)),l.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(l.name=s.name)),i.addMapping(l)}),e.sources.forEach(function(s){var l=s;t!==null&&(l=A.relative(t,s)),i._sources.has(l)||i._sources.add(l);var n=e.sourceContentFor(s);n!=null&&i.setSourceContent(s,n)}),i},"SourceMapGenerator_fromSourceMap");U.prototype.addMapping=u(function(e){var t=A.getArg(e,"generated"),i=A.getArg(e,"original",null),s=A.getArg(e,"source",null),l=A.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,i,s,l),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),l!=null&&(l=String(l),this._names.has(l)||this._names.add(l)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:s,name:l})},"SourceMapGenerator_addMapping");U.prototype.setSourceContent=u(function(e,t){var i=e;this._sourceRoot!=null&&(i=A.relative(this._sourceRoot,i)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[A.toSetString(i)]=t):this._sourcesContents&&(delete this._sourcesContents[A.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");U.prototype.applySourceMap=u(function(e,t,i){var s=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var l=this._sourceRoot;l!=null&&(s=A.relative(l,s));var n=new lt,o=new lt;this._mappings.unsortedForEach(function(a){if(a.source===s&&a.originalLine!=null){var c=e.originalPositionFor({line:a.originalLine,column:a.originalColumn});c.source!=null&&(a.source=c.source,i!=null&&(a.source=A.join(i,a.source)),l!=null&&(a.source=A.relative(l,a.source)),a.originalLine=c.line,a.originalColumn=c.column,c.name!=null&&(a.name=c.name))}var d=a.source;d!=null&&!n.has(d)&&n.add(d);var _=a.name;_!=null&&!o.has(_)&&o.add(_)},this),this._sources=n,this._names=o,e.sources.forEach(function(a){var c=e.sourceContentFor(a);c!=null&&(i!=null&&(a=A.join(i,a)),l!=null&&(a=A.relative(l,a)),this.setSourceContent(a,c))},this)},"SourceMapGenerator_applySourceMap");U.prototype._validateMapping=u(function(e,t,i,s){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!i&&!s)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&i)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:t,name:s}))}},"SourceMapGenerator_validateMapping");U.prototype._serializeMappings=u(function(){for(var e=0,t=1,i=0,s=0,l=0,n=0,o="",a,c,d,_,f=this._mappings.toArray(),p=0,m=f.length;p<m;p++){if(c=f[p],a="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)a+=";",t++;else if(p>0){if(!A.compareByGeneratedPositionsInflated(c,f[p-1]))continue;a+=","}a+=Ae.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(_=this._sources.indexOf(c.source),a+=Ae.encode(_-n),n=_,a+=Ae.encode(c.originalLine-1-s),s=c.originalLine-1,a+=Ae.encode(c.originalColumn-i),i=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),a+=Ae.encode(d-l),l=d)),o+=a}return o},"SourceMapGenerator_serializeMappings");U.prototype._generateSourcesContent=u(function(e,t){return e.map(function(i){if(!this._sourcesContents)return null;t!=null&&(i=A.relative(t,i));var s=A.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)},"SourceMapGenerator_generateSourcesContent");U.prototype.toJSON=u(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");U.prototype.toString=u(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");kr.SourceMapGenerator=U});var Nr=L(re=>{re.GREATEST_LOWER_BOUND=1;re.LEAST_UPPER_BOUND=2;function _n(r,e,t,i,s,l){var n=Math.floor((e-r)/2)+r,o=s(t,i[n],!0);return o===0?n:o>0?e-n>1?_n(n,e,t,i,s,l):l==re.LEAST_UPPER_BOUND?e<i.length?e:-1:n:n-r>1?_n(r,n,t,i,s,l):l==re.LEAST_UPPER_BOUND?n:r<0?-1:r}u(_n,"recursiveSearch");re.search=u(function(e,t,i,s){if(t.length===0)return-1;var l=_n(-1,t.length,e,t,i,s||re.GREATEST_LOWER_BOUND);if(l<0)return-1;for(;l-1>=0&&i(t[l],t[l-1],!0)===0;)--l;return l},"search")});var Cr=L(Pr=>{function fn(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}u(fn,"swap");function yi(r,e){return Math.round(r+Math.random()*(e-r))}u(yi,"randomIntInRange");function pn(r,e,t,i){if(t<i){var s=yi(t,i),l=t-1;fn(r,s,i);for(var n=r[i],o=t;o<i;o++)e(r[o],n)<=0&&(l+=1,fn(r,l,o));fn(r,l+1,o);var a=l+1;pn(r,e,t,a-1),pn(r,e,a+1,i)}}u(pn,"doQuickSort");Pr.quickSort=function(r,e){pn(r,e,0,r.length-1)}});var Fr=L(ut=>{var y=he(),mn=Nr(),ge=cn().ArraySet,wi=sn(),Fe=Cr().quickSort;function I(r,e){var t=r;return typeof r=="string"&&(t=y.parseSourceMapInput(r)),t.sections!=null?new z(t,e):new F(t,e)}u(I,"SourceMapConsumer");I.fromSourceMap=function(r,e){return F.fromSourceMap(r,e)};I.prototype._version=3;I.prototype.__generatedMappings=null;Object.defineProperty(I.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:u(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});I.prototype.__originalMappings=null;Object.defineProperty(I.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:u(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});I.prototype._charIsMappingSeparator=u(function(e,t){var i=e.charAt(t);return i===";"||i===","},"SourceMapConsumer_charIsMappingSeparator");I.prototype._parseMappings=u(function(e,t){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");I.GENERATED_ORDER=1;I.ORIGINAL_ORDER=2;I.GREATEST_LOWER_BOUND=1;I.LEAST_UPPER_BOUND=2;I.prototype.eachMapping=u(function(e,t,i){var s=t||null,l=i||I.GENERATED_ORDER,n;switch(l){case I.GENERATED_ORDER:n=this._generatedMappings;break;case I.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;n.map(function(a){var c=a.source===null?null:this._sources.at(a.source);return c=y.computeSourceURL(o,c,this._sourceMapURL),{source:c,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name===null?null:this._names.at(a.name)}},this).forEach(e,s)},"SourceMapConsumer_eachMapping");I.prototype.allGeneratedPositionsFor=u(function(e){var t=y.getArg(e,"line"),i={source:y.getArg(e,"source"),originalLine:t,originalColumn:y.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var s=[],l=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,mn.LEAST_UPPER_BOUND);if(l>=0){var n=this._originalMappings[l];if(e.column===void 0)for(var o=n.originalLine;n&&n.originalLine===o;)s.push({line:y.getArg(n,"generatedLine",null),column:y.getArg(n,"generatedColumn",null),lastColumn:y.getArg(n,"lastGeneratedColumn",null)}),n=this._originalMappings[++l];else for(var a=n.originalColumn;n&&n.originalLine===t&&n.originalColumn==a;)s.push({line:y.getArg(n,"generatedLine",null),column:y.getArg(n,"generatedColumn",null),lastColumn:y.getArg(n,"lastGeneratedColumn",null)}),n=this._originalMappings[++l]}return s},"SourceMapConsumer_allGeneratedPositionsFor");ut.SourceMapConsumer=I;function F(r,e){var t=r;typeof r=="string"&&(t=y.parseSourceMapInput(r));var i=y.getArg(t,"version"),s=y.getArg(t,"sources"),l=y.getArg(t,"names",[]),n=y.getArg(t,"sourceRoot",null),o=y.getArg(t,"sourcesContent",null),a=y.getArg(t,"mappings"),c=y.getArg(t,"file",null);if(i!=this._version)throw new Error("Unsupported version: "+i);n&&(n=y.normalize(n)),s=s.map(String).map(y.normalize).map(function(d){return n&&y.isAbsolute(n)&&y.isAbsolute(d)?y.relative(n,d):d}),this._names=ge.fromArray(l.map(String),!0),this._sources=ge.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(d){return y.computeSourceURL(n,d,e)}),this.sourceRoot=n,this.sourcesContent=o,this._mappings=a,this._sourceMapURL=e,this.file=c}u(F,"BasicSourceMapConsumer");F.prototype=Object.create(I.prototype);F.prototype.consumer=I;F.prototype._findSourceIndex=function(r){var e=r;if(this.sourceRoot!=null&&(e=y.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==r)return t;return-1};F.fromSourceMap=u(function(e,t){var i=Object.create(F.prototype),s=i._names=ge.fromArray(e._names.toArray(),!0),l=i._sources=ge.fromArray(e._sources.toArray(),!0);i.sourceRoot=e._sourceRoot,i.sourcesContent=e._generateSourcesContent(i._sources.toArray(),i.sourceRoot),i.file=e._file,i._sourceMapURL=t,i._absoluteSources=i._sources.toArray().map(function(p){return y.computeSourceURL(i.sourceRoot,p,t)});for(var n=e._mappings.toArray().slice(),o=i.__generatedMappings=[],a=i.__originalMappings=[],c=0,d=n.length;c<d;c++){var _=n[c],f=new Ar;f.generatedLine=_.generatedLine,f.generatedColumn=_.generatedColumn,_.source&&(f.source=l.indexOf(_.source),f.originalLine=_.originalLine,f.originalColumn=_.originalColumn,_.name&&(f.name=s.indexOf(_.name)),a.push(f)),o.push(f)}return Fe(i.__originalMappings,y.compareByOriginalPositions),i},"SourceMapConsumer_fromSourceMap");F.prototype._version=3;Object.defineProperty(F.prototype,"sources",{get:u(function(){return this._absoluteSources.slice()},"get")});function Ar(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}u(Ar,"Mapping");F.prototype._parseMappings=u(function(e,t){for(var i=1,s=0,l=0,n=0,o=0,a=0,c=e.length,d=0,_={},f={},p=[],m=[],h,b,g,T,v;d<c;)if(e.charAt(d)===";")i++,d++,s=0;else if(e.charAt(d)===",")d++;else{for(h=new Ar,h.generatedLine=i,T=d;T<c&&!this._charIsMappingSeparator(e,T);T++);if(b=e.slice(d,T),g=_[b],g)d+=b.length;else{for(g=[];d<T;)wi.decode(e,d,f),v=f.value,d=f.rest,g.push(v);if(g.length===2)throw new Error("Found a source, but no line and column");if(g.length===3)throw new Error("Found a source and line, but no column");_[b]=g}h.generatedColumn=s+g[0],s=h.generatedColumn,g.length>1&&(h.source=o+g[1],o+=g[1],h.originalLine=l+g[2],l=h.originalLine,h.originalLine+=1,h.originalColumn=n+g[3],n=h.originalColumn,g.length>4&&(h.name=a+g[4],a+=g[4])),m.push(h),typeof h.originalLine=="number"&&p.push(h)}Fe(m,y.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,Fe(p,y.compareByOriginalPositions),this.__originalMappings=p},"SourceMapConsumer_parseMappings");F.prototype._findMapping=u(function(e,t,i,s,l,n){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return mn.search(e,t,l,n)},"SourceMapConsumer_findMapping");F.prototype.computeColumnSpans=u(function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var i=this._generatedMappings[e+1];if(t.generatedLine===i.generatedLine){t.lastGeneratedColumn=i.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");F.prototype.originalPositionFor=u(function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},i=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",y.compareByGeneratedPositionsDeflated,y.getArg(e,"bias",I.GREATEST_LOWER_BOUND));if(i>=0){var s=this._generatedMappings[i];if(s.generatedLine===t.generatedLine){var l=y.getArg(s,"source",null);l!==null&&(l=this._sources.at(l),l=y.computeSourceURL(this.sourceRoot,l,this._sourceMapURL));var n=y.getArg(s,"name",null);return n!==null&&(n=this._names.at(n)),{source:l,line:y.getArg(s,"originalLine",null),column:y.getArg(s,"originalColumn",null),name:n}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");F.prototype.hasContentsOfAllSources=u(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");F.prototype.sourceContentFor=u(function(e,t){if(!this.sourcesContent)return null;var i=this._findSourceIndex(e);if(i>=0)return this.sourcesContent[i];var s=e;this.sourceRoot!=null&&(s=y.relative(this.sourceRoot,s));var l;if(this.sourceRoot!=null&&(l=y.urlParse(this.sourceRoot))){var n=s.replace(/^file:\/\//,"");if(l.scheme=="file"&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!l.path||l.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(t)return null;throw new Error('"'+s+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");F.prototype.generatedPositionFor=u(function(e){var t=y.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var i={source:t,originalLine:y.getArg(e,"line"),originalColumn:y.getArg(e,"column")},s=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,y.getArg(e,"bias",I.GREATEST_LOWER_BOUND));if(s>=0){var l=this._originalMappings[s];if(l.source===i.source)return{line:y.getArg(l,"generatedLine",null),column:y.getArg(l,"generatedColumn",null),lastColumn:y.getArg(l,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");ut.BasicSourceMapConsumer=F;function z(r,e){var t=r;typeof r=="string"&&(t=y.parseSourceMapInput(r));var i=y.getArg(t,"version"),s=y.getArg(t,"sections");if(i!=this._version)throw new Error("Unsupported version: "+i);this._sources=new ge,this._names=new ge;var l={line:-1,column:0};this._sections=s.map(function(n){if(n.url)throw new Error("Support for url field in sections not implemented.");var o=y.getArg(n,"offset"),a=y.getArg(o,"line"),c=y.getArg(o,"column");if(a<l.line||a===l.line&&c<l.column)throw new Error("Section offsets must be ordered and non-overlapping.");return l=o,{generatedOffset:{generatedLine:a+1,generatedColumn:c+1},consumer:new I(y.getArg(n,"map"),e)}})}u(z,"IndexedSourceMapConsumer");z.prototype=Object.create(I.prototype);z.prototype.constructor=I;z.prototype._version=3;Object.defineProperty(z.prototype,"sources",{get:u(function(){for(var r=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)r.push(this._sections[e].consumer.sources[t]);return r},"get")});z.prototype.originalPositionFor=u(function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},i=mn.search(t,this._sections,function(l,n){var o=l.generatedLine-n.generatedOffset.generatedLine;return o||l.generatedColumn-n.generatedOffset.generatedColumn}),s=this._sections[i];return s?s.consumer.originalPositionFor({line:t.generatedLine-(s.generatedOffset.generatedLine-1),column:t.generatedColumn-(s.generatedOffset.generatedLine===t.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");z.prototype.hasContentsOfAllSources=u(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");z.prototype.sourceContentFor=u(function(e,t){for(var i=0;i<this._sections.length;i++){var s=this._sections[i],l=s.consumer.sourceContentFor(e,!0);if(l)return l}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");z.prototype.generatedPositionFor=u(function(e){for(var t=0;t<this._sections.length;t++){var i=this._sections[t];if(i.consumer._findSourceIndex(y.getArg(e,"source"))!==-1){var s=i.consumer.generatedPositionFor(e);if(s){var l={line:s.line+(i.generatedOffset.generatedLine-1),column:s.column+(i.generatedOffset.generatedLine===s.line?i.generatedOffset.generatedColumn-1:0)};return l}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");z.prototype._parseMappings=u(function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var s=this._sections[i],l=s.consumer._generatedMappings,n=0;n<l.length;n++){var o=l[n],a=s.consumer._sources.at(o.source);a=y.computeSourceURL(s.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var c=null;o.name&&(c=s.consumer._names.at(o.name),this._names.add(c),c=this._names.indexOf(c));var d={source:a,generatedLine:o.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:o.generatedColumn+(s.generatedOffset.generatedLine===o.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:o.originalLine,originalColumn:o.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}Fe(this.__generatedMappings,y.compareByGeneratedPositionsDeflated),Fe(this.__originalMappings,y.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");ut.IndexedSourceMapConsumer=z});var Rr=L(Or=>{var vi=dn().SourceMapGenerator,ct=he(),Ei=/(\r?\n)/,Si=10,be="$$$isSourceNode$$$";function B(r,e,t,i,s){this.children=[],this.sourceContents={},this.line=r==null?null:r,this.column=e==null?null:e,this.source=t==null?null:t,this.name=s==null?null:s,this[be]=!0,i!=null&&this.add(i)}u(B,"SourceNode");B.fromStringWithSourceMap=u(function(e,t,i){var s=new B,l=e.split(Ei),n=0,o=u(function(){var f=m(),p=m()||"";return f+p;function m(){return n<l.length?l[n++]:void 0}},"shiftNextLine"),a=1,c=0,d=null;return t.eachMapping(function(f){if(d!==null)if(a<f.generatedLine)_(d,o()),a++,c=0;else{var p=l[n]||"",m=p.substr(0,f.generatedColumn-c);l[n]=p.substr(f.generatedColumn-c),c=f.generatedColumn,_(d,m),d=f;return}for(;a<f.generatedLine;)s.add(o()),a++;if(c<f.generatedColumn){var p=l[n]||"";s.add(p.substr(0,f.generatedColumn)),l[n]=p.substr(f.generatedColumn),c=f.generatedColumn}d=f},this),n<l.length&&(d&&_(d,o()),s.add(l.splice(n).join(""))),t.sources.forEach(function(f){var p=t.sourceContentFor(f);p!=null&&(i!=null&&(f=ct.join(i,f)),s.setSourceContent(f,p))}),s;function _(f,p){if(f===null||f.source===void 0)s.add(p);else{var m=i?ct.join(i,f.source):f.source;s.add(new B(f.originalLine,f.originalColumn,m,p,f.name))}}u(_,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");B.prototype.add=u(function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[be]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");B.prototype.prepend=u(function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[be]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");B.prototype.walk=u(function(e){for(var t,i=0,s=this.children.length;i<s;i++)t=this.children[i],t[be]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");B.prototype.join=u(function(e){var t,i,s=this.children.length;if(s>0){for(t=[],i=0;i<s-1;i++)t.push(this.children[i]),t.push(e);t.push(this.children[i]),this.children=t}return this},"SourceNode_join");B.prototype.replaceRight=u(function(e,t){var i=this.children[this.children.length-1];return i[be]?i.replaceRight(e,t):typeof i=="string"?this.children[this.children.length-1]=i.replace(e,t):this.children.push("".replace(e,t)),this},"SourceNode_replaceRight");B.prototype.setSourceContent=u(function(e,t){this.sourceContents[ct.toSetString(e)]=t},"SourceNode_setSourceContent");B.prototype.walkSourceContents=u(function(e){for(var t=0,i=this.children.length;t<i;t++)this.children[t][be]&&this.children[t].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),t=0,i=s.length;t<i;t++)e(ct.fromSetString(s[t]),this.sourceContents[s[t]])},"SourceNode_walkSourceContents");B.prototype.toString=u(function(){var e="";return this.walk(function(t){e+=t}),e},"SourceNode_toString");B.prototype.toStringWithSourceMap=u(function(e){var t={code:"",line:1,column:0},i=new vi(e),s=!1,l=null,n=null,o=null,a=null;return this.walk(function(c,d){t.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((l!==d.source||n!==d.line||o!==d.column||a!==d.name)&&i.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name}),l=d.source,n=d.line,o=d.column,a=d.name,s=!0):s&&(i.addMapping({generated:{line:t.line,column:t.column}}),l=null,s=!1);for(var _=0,f=c.length;_<f;_++)c.charCodeAt(_)===Si?(t.line++,t.column=0,_+1===f?(l=null,s=!1):s&&i.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name})):t.column++}),this.walkSourceContents(function(c,d){i.setSourceContent(c,d)}),{code:t.code,map:i}},"SourceNode_toStringWithSourceMap");Or.SourceNode=B});var Dr=L(dt=>{dt.SourceMapGenerator=dn().SourceMapGenerator;dt.SourceMapConsumer=Fr().SourceMapConsumer;dt.SourceNode=Rr().SourceNode});var Ur=L((Cd,Br)=>{var Ti=Object.prototype.toString,hn=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function xi(r){return Ti.call(r).slice(8,-1)==="ArrayBuffer"}u(xi,"isArrayBuffer");function Mi(r,e,t){e>>>=0;var i=r.byteLength-e;if(i<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=i;else if(t>>>=0,t>i)throw new RangeError("'length' is out of bounds");return hn?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}u(Mi,"fromArrayBuffer");function Ii(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return hn?Buffer.from(r,e):new Buffer(r,e)}u(Ii,"fromString");function Li(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return xi(r)?Mi(r,e,t):typeof r=="string"?Ii(r,e):hn?Buffer.from(r):new Buffer(r)}u(Li,"bufferFrom");Br.exports=Li});var $r=L((ie,wn)=>{var ki=Dr().SourceMapConsumer,gn=require("path"),q;try{q=require("fs"),(!q.existsSync||!q.readFileSync)&&(q=null)}catch{}var Ni=Ur();function Wr(r,e){return r.require(e)}u(Wr,"dynamicRequire");var zr=!1,jr=!1,bn=!1,Oe="auto",oe={},Re={},Pi=/^data:application\/json[^,]+base64,/,Y=[],Q=[];function vn(){return Oe==="browser"?!0:Oe==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}u(vn,"isInBrowser");function Ci(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}u(Ci,"hasGlobalProcessEventEmitter");function Ai(){return typeof process=="object"&&process!==null?process.version:""}u(Ai,"globalProcessVersion");function Fi(){if(typeof process=="object"&&process!==null)return process.stderr}u(Fi,"globalProcessStderr");function Oi(r){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(r)}u(Oi,"globalProcessExit");function _t(r){return function(e){for(var t=0;t<r.length;t++){var i=r[t](e);if(i)return i}return null}}u(_t,"handlerExec");var En=_t(Y);Y.push(function(r){if(r=r.trim(),/^file:/.test(r)&&(r=r.replace(/file:\/\/\/(\w:)?/,function(i,s){return s?"":"/"})),r in oe)return oe[r];var e="";try{if(q)q.existsSync(r)&&(e=q.readFileSync(r,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return oe[r]=e});function yn(r,e){if(!r)return e;var t=gn.dirname(r),i=/^\w+:\/\/[^\/]*/.exec(t),s=i?i[0]:"",l=t.slice(s.length);return s&&/^\/\w\:/.test(l)?(s+="/",s+gn.resolve(t.slice(s.length),e).replace(/\\/g,"/")):s+gn.resolve(t.slice(s.length),e)}u(yn,"supportRelativeURL");function Ri(r){var e;if(vn())try{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),e=t.readyState===4?t.responseText:null;var i=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(i)return i}catch{}e=En(r);for(var s=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,l,n;n=s.exec(e);)l=n;return l?l[1]:null}u(Ri,"retrieveSourceMapURL");var Sn=_t(Q);Q.push(function(r){var e=Ri(r);if(!e)return null;var t;if(Pi.test(e)){var i=e.slice(e.indexOf(",")+1);t=Ni(i,"base64").toString(),e=r}else e=yn(r,e),t=En(e);return t?{url:e,map:t}:null});function Tn(r){var e=Re[r.source];if(!e){var t=Sn(r.source);t?(e=Re[r.source]={url:t.url,map:new ki(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(s,l){var n=e.map.sourcesContent[l];if(n){var o=yn(e.url,s);oe[o]=n}})):e=Re[r.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var i=e.map.originalPositionFor(r);if(i.source!==null)return i.source=yn(e.url,i.source),i}return r}u(Tn,"mapSourcePosition");function Vr(r){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(r);if(e){var t=Tn({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(r),e?"eval at "+e[1]+" ("+Vr(e[2])+")":r}u(Vr,"mapEvalOrigin");function Di(){var r,e="";if(this.isNative())e="native";else{r=this.getScriptNameOrSourceURL(),!r&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),r?e+=r:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var i=this.getColumnNumber();i&&(e+=":"+i)}}var s="",l=this.getFunctionName(),n=!0,o=this.isConstructor(),a=!(this.isToplevel()||o);if(a){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();l?(c&&l.indexOf(c)!=0&&(s+=c+"."),s+=l,d&&l.indexOf("."+d)!=l.length-d.length-1&&(s+=" [as "+d+"]")):s+=c+"."+(d||"<anonymous>")}else o?s+="new "+(l||"<anonymous>"):l?s+=l:(s+=e,n=!1);return n&&(s+=" ("+e+")"),s}u(Di,"CallSiteToString");function Hr(r){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return r[t].call(r)}:r[t]}),e.toString=Di,e}u(Hr,"cloneCallSite");function qr(r,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),r.isNative())return e.curPosition=null,r;var t=r.getFileName()||r.getScriptNameOrSourceURL();if(t){var i=r.getLineNumber(),s=r.getColumnNumber()-1,l=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,n=l.test(Ai())?0:62;i===1&&s>n&&!vn()&&!r.isEval()&&(s-=n);var o=Tn({source:t,line:i,column:s});e.curPosition=o,r=Hr(r);var a=r.getFunctionName;return r.getFunctionName=function(){return e.nextPosition==null?a():e.nextPosition.name||a()},r.getFileName=function(){return o.source},r.getLineNumber=function(){return o.line},r.getColumnNumber=function(){return o.column+1},r.getScriptNameOrSourceURL=function(){return o.source},r}var c=r.isEval()&&r.getEvalOrigin();return c&&(c=Vr(c),r=Hr(r),r.getEvalOrigin=function(){return c}),r}u(qr,"wrapCallSite");function Bi(r,e){bn&&(oe={},Re={});for(var t=r.name||"Error",i=r.message||"",s=t+": "+i,l={nextPosition:null,curPosition:null},n=[],o=e.length-1;o>=0;o--)n.push(`
    at `+qr(e[o],l)),l.nextPosition=l.curPosition;return l.curPosition=l.nextPosition=null,s+n.reverse().join("")}u(Bi,"prepareStackTrace");function Zr(r){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(r.stack);if(e){var t=e[1],i=+e[2],s=+e[3],l=oe[t];if(!l&&q&&q.existsSync(t))try{l=q.readFileSync(t,"utf8")}catch{l=""}if(l){var n=l.split(/(?:\r\n|\r|\n)/)[i-1];if(n)return t+":"+i+`
`+n+`
`+new Array(s).join(" ")+"^"}}return null}u(Zr,"getErrorSource");function Ui(r){var e=Zr(r),t=Fi();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(r.stack),Oi(1)}u(Ui,"printErrorAndExit");function Wi(){var r=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,i=this.listeners(e).length>0;if(t&&!i)return Ui(arguments[1])}return r.apply(this,arguments)}}u(Wi,"shimEmitUncaughtException");var zi=Y.slice(0),ji=Q.slice(0);ie.wrapCallSite=qr;ie.getErrorSource=Zr;ie.mapSourcePosition=Tn;ie.retrieveSourceMap=Sn;ie.install=function(r){if(r=r||{},r.environment&&(Oe=r.environment,["node","browser","auto"].indexOf(Oe)===-1))throw new Error("environment "+Oe+" was unknown. Available options are {auto, browser, node}");if(r.retrieveFile&&(r.overrideRetrieveFile&&(Y.length=0),Y.unshift(r.retrieveFile)),r.retrieveSourceMap&&(r.overrideRetrieveSourceMap&&(Q.length=0),Q.unshift(r.retrieveSourceMap)),r.hookRequire&&!vn()){var e=Wr(wn,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(l,n){return oe[n]=l,Re[n]=void 0,t.call(this,l,n)},e.prototype._compile.__sourceMapSupport=!0)}if(bn||(bn="emptyCacheBetweenOperations"in r?r.emptyCacheBetweenOperations:!1),zr||(zr=!0,Error.prepareStackTrace=Bi),!jr){var i="handleUncaughtExceptions"in r?r.handleUncaughtExceptions:!0;try{var s=Wr(wn,"worker_threads");s.isMainThread===!1&&(i=!1)}catch{}i&&Ci()&&(jr=!0,Wi())}};ie.resetRetrieveHandlers=function(){Y.length=0,Q.length=0,Y=zi.slice(0),Q=ji.slice(0),Sn=_t(Q),En=_t(Y)}});var Gr=L(()=>{$r().install()});var Vi={};ro(Vi,{WorkerProxy:()=>De,reset:()=>Hi,sleep:()=>Kr,workerFns:()=>xn,workerProxy:()=>Qe});module.exports=oo(Vi);var ft=Ue(require("path")),Z=require("worker_threads");var le=Ue(Hn()),qn=require("fs"),Zn=require("path");var Vn=new Map;function xe(r="cl100k_base"){let e=Vn.get(r);return e!==void 0||(r==="mock"?e=new At:e=new Ct(r),Vn.set(r,e)),e}u(xe,"getTokenizer");function So(r){if(!r.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=(0,qn.readFileSync)(r,"utf-8"),t=new Map;for(let i of e.split(`
`)){if(!i)continue;let s=Buffer.from(i,"base64");t.set(s,t.size)}return t}u(So,"parseTikTokenNoIndex");var Ft=class Ft{constructor(e){try{this._tokenizer=(0,le.createTokenizer)(So((0,Zn.join)(__dirname,`./resources/${e}.tiktoken.noindex`)),(0,le.getSpecialTokensByEncoder)(e),(0,le.getRegexByEncoder)(e),32768)}catch(t){if(t instanceof Error){let i=new Error("Could not load tokenizer");throw i.code="CopilotPromptLoadFailure",i.cause=t,i}throw t}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(i=>this.detokenize([i]))}takeLastTokens(e,t){if(t<=0)return"";let i=4,s=1,l=Math.min(e.length,t*i),n=e.slice(-l),o=this.tokenize(n);for(;o.length<t+2&&l<e.length;)l=Math.min(e.length,l+t*s),n=e.slice(-l),o=this.tokenize(n);return o.length<t?e:(o=o.slice(-t),this.detokenize(o))}takeFirstTokens(e,t){if(t<=0)return{text:"",tokens:[]};let i=4,s=1,l=Math.min(e.length,t*i),n=e.slice(0,l),o=this.tokenize(n);for(;o.length<t+2&&l<e.length;)l=Math.min(e.length,l+t*s),n=e.slice(0,l),o=this.tokenize(n);return o.length<t?{text:e,tokens:o}:(o=o.slice(0,t),{text:this.detokenize(o),tokens:o})}takeLastLinesTokens(e,t){let i=this.takeLastTokens(e,t);if(i.length===e.length||e[e.length-i.length-1]===`
`)return i;let s=i.indexOf(`
`);return i.substring(s+1)}};u(Ft,"TTokenizer");var Ct=Ft,Ot=class Ot{constructor(){this.hash=u(e=>{let t=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);t=(t<<5)-t+s,t&=t&65535}return t},"hash")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(t=>t.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,t){return this.tokenizeStrings(e).slice(-t).join("")}takeFirstTokens(e,t){let i=this.tokenizeStrings(e).slice(0,t);return{text:i.join(""),tokens:i.map(this.hash)}}takeLastLinesTokens(e,t){let i=this.takeLastTokens(e,t);if(i.length===e.length||e[e.length-i.length-1]===`
`)return i;let s=i.indexOf(`
`);return i.substring(s+1)}};u(Ot,"MockTokenizer");var At=Ot;var xo={tokenizerName:"cl100k_base"};function Mo(r){return{...xo,...r}}u(Mo,"cursorContextOptions");function ue(r,e={}){let t=Mo(e),i=xe(t.tokenizerName);if(t.maxLineCount!==void 0&&t.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(t.maxTokenLength!==void 0&&t.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(t.maxLineCount===0||t.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:t.tokenizerName};let s=r.source.slice(0,r.offset);return t.maxLineCount!==void 0&&(s=s.split(`
`).slice(-t.maxLineCount).join(`
`)),t.maxTokenLength!==void 0&&(s=i.takeLastLinesTokens(s,t.maxTokenLength)),{context:s,lineCount:s.split(`
`).length,tokenLength:i.tokenLength(s),tokenizerName:t.tokenizerName}}u(ue,"getCursorContext");function Rt(r,e,t){return{type:"virtual",indentation:r,subs:e,label:t}}u(Rt,"virtualNode");function Dt(r){return{type:"top",indentation:-1,subs:r!=null?r:[]}}u(Dt,"topNode");function D(r){return r.type==="blank"}u(D,"isBlank");function ce(r){return r.type==="line"}u(ce,"isLine");function ee(r){return r.type==="virtual"}u(ee,"isVirtual");function $n(r,e){return V(r,t=>{t.label=t.label?e(t.label)?void 0:t.label:void 0},"bottomUp"),r}u($n,"clearLabelsIf");function V(r,e,t){function i(s){t==="topDown"&&e(s),s.subs.forEach(l=>{i(l)}),t==="bottomUp"&&e(s)}u(i,"_visit"),i(r)}u(V,"visitTree");function Ze(r,e,t){let i=u(l=>{if(t!==void 0&&t(l))return l;{let n=l.subs.map(i).filter(o=>o!==void 0);return l.subs=n,e(l)}},"rebuild"),s=i(r);return s!==void 0?s:Dt()}u(Ze,"rebuildTree");function $e(r,e){function t(i){if(ce(i)){let s=e.find(l=>l.matches(i.sourceLine));s&&(i.label=s.label)}}u(t,"visitor"),V(r,t,"bottomUp")}u($e,"labelLines");function Ge(r){function e(t){if(ee(t)&&t.label===void 0){let i=t.subs.filter(s=>!D(s));i.length===1&&(t.label=i[0].label)}}u(e,"visitor"),V(r,e,"bottomUp")}u(Ge,"labelVirtualInherited");function Me(r){return Object.keys(r).map(e=>{let t;return r[e].test?t=u(i=>r[e].test(i),"matches"):t=r[e],{matches:t,label:e}})}u(Me,"buildLabelRules");function Gn(r){let t=Ze(r,u(function(i){if(i.subs.length===0||i.subs.findIndex(n=>n.label==="closer"||n.label==="opener")===-1)return i;let s=[],l;for(let n=0;n<i.subs.length;n++){let o=i.subs[n],a=i.subs[n-1];if(o.label==="opener"&&a!==void 0&&ce(a))a.subs.push(o),o.subs.forEach(c=>a.subs.push(c)),o.subs=[];else if(o.label==="closer"&&l!==void 0&&(ce(o)||ee(o))&&o.indentation>=l.indentation){let c=s.length-1;for(;c>0&&D(s[c]);)c-=1;if(l.subs.push(...s.splice(c+1)),o.subs.length>0){let d=l.subs.findIndex(m=>m.label!=="newVirtual"),_=l.subs.slice(0,d),f=l.subs.slice(d),p=f.length>0?[Rt(o.indentation,f,"newVirtual")]:[];l.subs=[..._,...p,o]}else l.subs.push(o)}else s.push(o),D(o)||(l=o)}return i.subs=s,i},"rebuilder"));return $n(r,i=>i==="newVirtual"),t}u(Gn,"combineClosersAndOpeners");function Kn(r,e=D,t){return Ze(r,u(function(s){if(s.subs.length<=1)return s;let l=[],n=[],o,a=!1;function c(d=!1){if(o!==void 0&&(l.length>0||!d)){let _=Rt(o,n,t);l.push(_)}else n.forEach(_=>l.push(_))}u(c,"flushBlockIntoNewSubs");for(let d=0;d<s.subs.length;d++){let _=s.subs[d],f=e(_);!f&&a&&(c(),n=[]),a=f,n.push(_),D(_)||(o=o!=null?o:_.indentation)}return c(!0),s.subs=l,s},"rebuilder"))}u(Kn,"groupBlocks");function de(r){return Ze(r,u(function(t){return ee(t)&&t.label===void 0&&t.subs.length<=1?t.subs.length===0?void 0:t.subs[0]:(t.subs.length===1&&ee(t.subs[0])&&t.subs[0].label===void 0&&(t.subs=t.subs[0].subs),t)},"rebuilder"))}u(de,"flattenVirtual");var Lo={opener:/^[\[({]/,closer:/^[\])}]/},As=Me(Lo),ko={};function Bt(r,e){ko[r]=e}u(Bt,"registerLanguageSpecificParser");var No={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[\[({]/,closer:/^[\])}]/},Po=Me(No);function Jn(r){let e=r;return $e(e,Po),e=Gn(e),e=de(e),Ge(e),V(e,t=>{if(t.label==="class"||t.label==="interface")for(let i of t.subs)!D(i)&&(i.label===void 0||i.label==="annotation")&&(i.label="member")},"bottomUp"),e}u(Jn,"processJava");var Co={heading:/^# /,subheading:/^## /,subsubheading:/### /},Ao=Me(Co);function Xn(r){let e=r;if($e(e,Ao),D(e))return e;function t(l){if(l.label==="heading")return 1;if(l.label==="subheading")return 2;if(l.label==="subsubheading")return 3}u(t,"headingLevel");let i=[e],s=[...e.subs];e.subs=[];for(let l of s){let n=t(l);if(n===void 0||D(l))i[i.length-1].subs.push(l);else{for(;i.length<n;)i.push(i[i.length-1]);for(i[n-1].subs.push(l),i[n]=l;i.length>n+1;)i.pop()}}return e=Kn(e),e=de(e),Ge(e),e}u(Xn,"processMarkdown");Bt("markdown",Xn);Bt("java",Jn);function W(){}u(W,"Diff");W.prototype={diff:u(function(e,t){var i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=s.callback;typeof s=="function"&&(l=s,s={});var n=this;function o(S){return S=n.postProcess(S,s),l?(setTimeout(function(){l(S)},0),!0):S}u(o,"done"),e=this.castInput(e,s),t=this.castInput(t,s),e=this.removeEmpty(this.tokenize(e,s)),t=this.removeEmpty(this.tokenize(t,s));var a=t.length,c=e.length,d=1,_=a+c;s.maxEditLength!=null&&(_=Math.min(_,s.maxEditLength));var f=(i=s.timeout)!==null&&i!==void 0?i:1/0,p=Date.now()+f,m=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(m[0],t,e,0,s);if(m[0].oldPos+1>=c&&h+1>=a)return o(er(n,m[0].lastComponent,t,e,n.useLongestToken));var b=-1/0,g=1/0;function T(){for(var S=Math.max(b,-d);S<=Math.min(g,d);S+=2){var E=void 0,x=m[S-1],M=m[S+1];x&&(m[S-1]=void 0);var w=!1;if(M){var k=M.oldPos-S;w=M&&0<=k&&k<a}var ye=x&&x.oldPos+1<c;if(!w&&!ye){m[S]=void 0;continue}if(!ye||w&&x.oldPos<M.oldPos?E=n.addToPath(M,!0,!1,0,s):E=n.addToPath(x,!1,!0,1,s),h=n.extractCommon(E,t,e,S,s),E.oldPos+1>=c&&h+1>=a)return o(er(n,E.lastComponent,t,e,n.useLongestToken));m[S]=E,E.oldPos+1>=c&&(g=Math.min(g,S-1)),h+1>=a&&(b=Math.max(b,S+1))}d++}if(u(T,"execEditLength"),l)u(function S(){setTimeout(function(){if(d>_||Date.now()>p)return l();T()||S()},0)},"exec")();else for(;d<=_&&Date.now()<=p;){var v=T();if(v)return v}},"diff"),addToPath:u(function(e,t,i,s,l){var n=e.lastComponent;return n&&!l.oneChangePerToken&&n.added===t&&n.removed===i?{oldPos:e.oldPos+s,lastComponent:{count:n.count+1,added:t,removed:i,previousComponent:n.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:t,removed:i,previousComponent:n}}},"addToPath"),extractCommon:u(function(e,t,i,s,l){for(var n=t.length,o=i.length,a=e.oldPos,c=a-s,d=0;c+1<n&&a+1<o&&this.equals(i[a+1],t[c+1],l);)c++,a++,d++,l.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!l.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,c},"extractCommon"),equals:u(function(e,t,i){return i.comparator?i.comparator(e,t):e===t||i.ignoreCase&&e.toLowerCase()===t.toLowerCase()},"equals"),removeEmpty:u(function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},"removeEmpty"),castInput:u(function(e){return e},"castInput"),tokenize:u(function(e){return Array.from(e)},"tokenize"),join:u(function(e){return e.join("")},"join"),postProcess:u(function(e){return e},"postProcess")};function er(r,e,t,i,s){for(var l=[],n;e;)l.push(e),n=e.previousComponent,delete e.previousComponent,e=n;l.reverse();for(var o=0,a=l.length,c=0,d=0;o<a;o++){var _=l[o];if(_.removed)_.value=r.join(i.slice(d,d+_.count)),d+=_.count;else{if(!_.added&&s){var f=t.slice(c,c+_.count);f=f.map(function(p,m){var h=i[d+m];return h.length>p.length?h:p}),_.value=r.join(f)}else _.value=r.join(t.slice(c,c+_.count));c+=_.count,_.added||(d+=_.count)}}return l}u(er,"buildValues");var Fa=new W;function tr(r,e){var t;for(t=0;t<r.length&&t<e.length;t++)if(r[t]!=e[t])return r.slice(0,t);return r.slice(0,t)}u(tr,"longestCommonPrefix");function nr(r,e){var t;if(!r||!e||r[r.length-1]!=e[e.length-1])return"";for(t=0;t<r.length&&t<e.length;t++)if(r[r.length-(t+1)]!=e[e.length-(t+1)])return r.slice(-t);return r.slice(-t)}u(nr,"longestCommonSuffix");function Ut(r,e,t){if(r.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+r.slice(e.length)}u(Ut,"replacePrefix");function Wt(r,e,t){if(!e)return r+t;if(r.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return r.slice(0,-e.length)+t}u(Wt,"replaceSuffix");function Ie(r,e){return Ut(r,e,"")}u(Ie,"removePrefix");function Ke(r,e){return Wt(r,e,"")}u(Ke,"removeSuffix");function rr(r,e){return e.slice(0,Ro(r,e))}u(rr,"maximumOverlap");function Ro(r,e){var t=0;r.length>e.length&&(t=r.length-e.length);var i=e.length;r.length<e.length&&(i=r.length);var s=Array(i),l=0;s[0]=0;for(var n=1;n<i;n++){for(e[n]==e[l]?s[n]=s[l]:s[n]=l;l>0&&e[n]!=e[l];)l=s[l];e[n]==e[l]&&l++}l=0;for(var o=t;o<r.length;o++){for(;l>0&&r[o]!=e[l];)l=s[l];r[o]==e[l]&&l++}return l}u(Ro,"overlapCount");var Je="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Do=new RegExp("[".concat(Je,"]+|\\s+|[^").concat(Je,"]"),"ug"),Xe=new W;Xe.equals=function(r,e,t){return t.ignoreCase&&(r=r.toLowerCase(),e=e.toLowerCase()),r.trim()===e.trim()};Xe.tokenize=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(r),function(l){return l.segment})}else t=r.match(Do)||[];var i=[],s=null;return t.forEach(function(l){/\s/.test(l)?s==null?i.push(l):i.push(i.pop()+l):/\s/.test(s)?i[i.length-1]==s?i.push(i.pop()+l):i.push(s+l):i.push(l),s=l}),i};Xe.join=function(r){return r.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};Xe.postProcess=function(r,e){if(!r||e.oneChangePerToken)return r;var t=null,i=null,s=null;return r.forEach(function(l){l.added?i=l:l.removed?s=l:((i||s)&&or(t,s,i,l),t=l,i=null,s=null)}),(i||s)&&or(t,s,i,null),r};function or(r,e,t,i){if(e&&t){var s=e.value.match(/^\s*/)[0],l=e.value.match(/\s*$/)[0],n=t.value.match(/^\s*/)[0],o=t.value.match(/\s*$/)[0];if(r){var a=tr(s,n);r.value=Wt(r.value,n,a),e.value=Ie(e.value,a),t.value=Ie(t.value,a)}if(i){var c=nr(l,o);i.value=Ut(i.value,o,c),e.value=Ke(e.value,c),t.value=Ke(t.value,c)}}else if(t)r&&(t.value=t.value.replace(/^\s*/,"")),i&&(i.value=i.value.replace(/^\s*/,""));else if(r&&i){var d=i.value.match(/^\s*/)[0],_=e.value.match(/^\s*/)[0],f=e.value.match(/\s*$/)[0],p=tr(d,_);e.value=Ie(e.value,p);var m=nr(Ie(d,p),f);e.value=Ke(e.value,m),i.value=Ut(i.value,d,m),r.value=Wt(r.value,d,d.slice(0,d.length-m.length))}else if(i){var h=i.value.match(/^\s*/)[0],b=e.value.match(/\s*$/)[0],g=rr(b,h);e.value=Ke(e.value,g)}else if(r){var T=r.value.match(/\s*$/)[0],v=e.value.match(/^\s*/)[0],S=rr(T,v);e.value=Ie(e.value,S)}}u(or,"dedupeWhitespaceInChangeObjects");var Bo=new W;Bo.tokenize=function(r){var e=new RegExp("(\\r?\\n)|[".concat(Je,"]+|[^\\S\\n\\r]+|[^").concat(Je,"]"),"ug");return r.match(e)||[]};var Vt=new W;Vt.tokenize=function(r,e){e.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var t=[],i=r.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(var s=0;s<i.length;s++){var l=i[s];s%2&&!e.newlineIsToken?t[t.length-1]+=l:t.push(l)}return t};Vt.equals=function(r,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),W.prototype.equals.call(this,r,e,t)};var Uo=new W;Uo.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var Wo=new W;Wo.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function zt(r){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(r)}u(zt,"_typeof");var Le=new W;Le.useLongestToken=!0;Le.tokenize=Vt.tokenize;Le.castInput=function(r,e){var t=e.undefinedReplacement,i=e.stringifyReplacer,s=i===void 0?function(l,n){return typeof n>"u"?t:n}:i;return typeof r=="string"?r:JSON.stringify(jt(r,null,null,s),s,"  ")};Le.equals=function(r,e,t){return W.prototype.equals.call(Le,r.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function jt(r,e,t,i,s){e=e||[],t=t||[],i&&(r=i(s,r));var l;for(l=0;l<e.length;l+=1)if(e[l]===r)return t[l];var n;if(Object.prototype.toString.call(r)==="[object Array]"){for(e.push(r),n=new Array(r.length),t.push(n),l=0;l<r.length;l+=1)n[l]=jt(r[l],e,t,i,s);return e.pop(),t.pop(),n}if(r&&r.toJSON&&(r=r.toJSON()),zt(r)==="object"&&r!==null){e.push(r),n={},t.push(n);var o=[],a;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.push(a);for(o.sort(),l=0;l<o.length;l+=1)a=o[l],n[a]=jt(r[a],e,t,i,a);e.pop(),t.pop()}else n=r;return n}u(jt,"canonicalize");var Ht=new W;Ht.tokenize=function(r){return r.slice()};Ht.join=Ht.removeEmpty=function(r){return r};var Ho=500,Ll=8192-Ho;var ar=require("fs"),et=Ue(require("path")),tt=Ue(ir());var sr={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp"};function lr(r){if(!(r in sr))throw new Error(`Unrecognized language: ${r}`);return sr[r]}u(lr,"languageIdToWasmLanguage");var $t=new Map;async function Zo(r){let e,t=et.default.resolve(et.default.extname(__filename)!==".ts"?__dirname:et.default.resolve(__dirname,"../../dist"),`tree-sitter-${r}.wasm`);try{e=await ar.promises.readFile(t)}catch(i){if(typeof i.code=="string"&&i instanceof Error&&i.name==="Error"){let s=new Error(`Could not load tree-sitter-${r}.wasm`);throw s.code="CopilotPromptLoadFailure",s.cause=i,s}throw i}return tt.default.Language.load(e)}u(Zo,"loadWasmLanguage");function $o(r){let e=lr(r);if(!$t.has(e)){let t=Zo(e);$t.set(e,t)}return $t.get(e)}u($o,"getLanguage");async function Ne(r,e){await tt.default.init();let t;try{t=new tt.default}catch(l){let n=l.message;if(n&&n.includes("table index is out of bounds")){let o=new Error(`Could not init Parse for language <${r}>`);throw o.cause=l,o}throw l}let i=await $o(r);t.setLanguage(i);let s=t.parse(e);return t.delete(),s}u(Ne,"parseTreeSitter");function Go(r,e){let t=[];for(let i of r){if(!i[1]){let s=e.tree.getLanguage();i[1]=s.query(i[0])}t.push(...i[1].matches(e))}return t}u(Go,"innerQuery");var Ko=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function ur(r){return Go([Ko],r).length==1}u(ur,"queryPythonIsDocstring");var Gt=class Gt{constructor(e,t,i){this.languageId=e;this.nodeMatch=t;this.nodeTypesWithBlockOrStmtChild=i}async getNodeMatchAtPosition(e,t,i){let s=await Ne(this.languageId,e);try{let n=s.rootNode.descendantForIndex(t);for(;n;){let o=this.nodeMatch[n.type];if(o){if(!this.nodeTypesWithBlockOrStmtChild.has(n.type))break;let a=this.nodeTypesWithBlockOrStmtChild.get(n.type),c=a==""?n.namedChildren[0]:n.childForFieldName(a);if((c==null?void 0:c.type)==o)break}n=n.parent}return n?i(n):void 0}finally{s.delete()}}getNextBlockAtPosition(e,t,i){return this.getNodeMatchAtPosition(e,t,s=>{let l=s.children.reverse().find(n=>n.type==this.nodeMatch[s.type]);if(l){if(this.languageId=="python"&&l.parent){let n=l.parent.type==":"?l.parent.parent:l.parent,o=n==null?void 0:n.nextSibling;for(;o&&o.type=="comment";){let a=o.startPosition.row==l.endPosition.row&&o.startPosition.column>=l.endPosition.column,c=o.startPosition.row>n.endPosition.row&&o.startPosition.column>n.startPosition.column;if(a||c)l=o,o=o.nextSibling;else break}}if(!(l.endIndex>=l.tree.rootNode.endIndex-1&&(l.hasError()||l.parent.hasError())))return i(l)}})}async isBlockBodyFinished(e,t,i){let s=(e+t).trimEnd(),l=await this.getNextBlockAtPosition(s,i,n=>n.endIndex);if(l!==void 0&&l<s.length){let n=l-e.length;return n>0?n:void 0}}getNodeStart(e,t){let i=e.trimEnd();return this.getNodeMatchAtPosition(i,t,s=>s.startIndex)}};u(Gt,"BaseBlockParser");var nt=Gt,Kt=class Kt extends nt{constructor(t,i,s,l,n){super(t,l,n);this.blockEmptyMatch=i;this.lineMatch=s}isBlockStart(t){return this.lineMatch.test(t.trimStart())}async isBlockBodyEmpty(t,i){let s=await this.getNextBlockAtPosition(t,i,l=>{l.startIndex<i&&(i=l.startIndex);let n=t.substring(i,l.endIndex).trim();return n==""||n.replace(/\s/g,"")==this.blockEmptyMatch});return s===void 0||s}async isEmptyBlockStart(t,i){return i=dr(t,i),this.isBlockStart(Jo(t,i))&&this.isBlockBodyEmpty(t,i)}};u(Kt,"RegexBasedBlockParser");var rt=Kt;function Jo(r,e){let t=r.lastIndexOf(`
`,e-1),i=r.indexOf(`
`,e);return i<0&&(i=r.length),r.slice(t+1,i)}u(Jo,"getLineAtOffset");function dr(r,e){let t=e;for(;t>0&&/\s/.test(r.charAt(t-1));)t--;return t}u(dr,"rewindToNearestNonWs");function cr(r,e){let t=r.startIndex,i=r.startIndex-r.startPosition.column,s=e.substring(i,t);if(/^\s*$/.test(s))return s}u(cr,"indent");function Xo(r,e,t){if(e.startPosition.row<=r.startPosition.row)return!1;let i=cr(r,t),s=cr(e,t);return i!==void 0&&s!==void 0&&i.startsWith(s)}u(Xo,"outdented");var Jt=class Jt extends nt{constructor(t,i,s,l,n,o,a){super(t,i,s);this.startKeywords=l;this.blockNodeType=n;this.emptyStatementType=o;this.curlyBraceLanguage=a}isBlockEmpty(t,i){var l,n;let s=t.text.trim();return this.curlyBraceLanguage&&(s.startsWith("{")&&(s=s.slice(1)),s.endsWith("}")&&(s=s.slice(0,-1)),s=s.trim()),!!(s.length==0||this.languageId=="python"&&(((l=t.parent)==null?void 0:l.type)=="class_definition"||((n=t.parent)==null?void 0:n.type)=="function_definition")&&t.children.length==1&&ur(t.parent))}async isEmptyBlockStart(t,i){var l,n,o,a;if(i>t.length)throw new RangeError("Invalid offset");for(let c=i;c<t.length&&t.charAt(c)!=`
`;c++)if(/\S/.test(t.charAt(c)))return!1;i=dr(t,i);let s=await Ne(this.languageId,t);try{let c=s.rootNode.descendantForIndex(i-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let m=c;for(;m.parent;){if(m.type=="function_signature"||m.type=="method_signature"){let h=c.nextSibling;return h&&m.hasError()&&Xo(m,h,t)?!0:!m.children.find(g=>g.type==";")&&m.endIndex<=i}m=m.parent}}let d=null,_=null,f=null,p=c;for(;p!=null;){if(p.type==this.blockNodeType){_=p;break}if(this.nodeMatch[p.type]){f=p;break}if(p.type=="ERROR"){d=p;break}p=p.parent}if(_!=null){if(!_.parent||!this.nodeMatch[_.parent.type])return!1;if(this.languageId=="python"){let m=_.previousSibling;if(m!=null&&m.hasError()&&(m.text.startsWith('"""')||m.text.startsWith("'''")))return!0}return this.isBlockEmpty(_,i)}if(d!=null){if(((l=d.previousSibling)==null?void 0:l.type)=="module"||((n=d.previousSibling)==null?void 0:n.type)=="internal_module"||((o=d.previousSibling)==null?void 0:o.type)=="def")return!0;let m=[...d.children].reverse(),h=m.find(g=>this.startKeywords.includes(g.type)),b=m.find(g=>g.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(b=(a=m.find(v=>v.hasError()))==null?void 0:a.children.find(v=>v.type=="block"));let g,T=0;for(let v of d.children){if(v.type==":"&&T==0){g=v;break}v.type=="("&&(T+=1),v.type==")"&&(T-=1)}if(g&&h.endIndex<=g.startIndex&&g.nextSibling){if(h.type=="def"){let v=g.nextSibling;if(v.type=='"'||v.type=="'"||v.type=="ERROR"&&(v.text=='"""'||v.text=="'''"))return!0}return!1}break}case"javascript":{let g=m.find(S=>S.type=="formal_parameters");if(h.type=="class"&&g)return!0;let T=m.find(S=>S.type=="{");if(T&&T.startIndex>h.endIndex&&T.nextSibling!=null||m.find(S=>S.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let g=m.find(v=>v.type=="{");if(g&&g.startIndex>h.endIndex&&g.nextSibling!=null||m.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return b&&b.startIndex>h.endIndex?this.isBlockEmpty(b,i):!0}}if(f!=null){let m=this.nodeMatch[f.type],h=f.children.slice().reverse().find(b=>b.type==m);if(h)return this.isBlockEmpty(h,i);if(this.nodeTypesWithBlockOrStmtChild.has(f.type)){let b=this.nodeTypesWithBlockOrStmtChild.get(f.type),g=b==""?f.children[0]:f.childForFieldName(b);if(g&&g.type!=this.blockNodeType&&g.type!=this.emptyStatementType)return!1}return!0}return!1}finally{s.delete()}}};u(Jt,"TreeSitterBasedBlockParser");var te=Jt,Zu={python:new te("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new te("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new te("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new te("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new rt("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new rt("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new te("csharp",{},new Map([]),[],"block",null,!0)};var Qt=class Qt{constructor(e){this.keys=[];this.cache={};this.size=e}put(e,t){var i;if(this.cache[e]=t,this.keys.length>this.size){this.keys.push(e);let s=(i=this.keys.shift())!=null?i:"";delete this.cache[s]}}get(e){return this.cache[e]}};u(Qt,"FifoCache");var Xt=Qt;var en=class en{constructor(e){var t;this.stopsForLanguage=(t=ti.get(e.languageId))!=null?t:ei}tokenize(e){return new Set(Yo(e).filter(t=>!this.stopsForLanguage.has(t)))}};u(en,"Tokenizer");var Yt=en,_r=new Xt(20),tn=class tn{constructor(e){this.referenceDoc=e,this.tokenizer=new Yt(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){var e;return(e=this.referenceTokensCache)!=null?e:this.referenceTokensCache=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,t="descending"){return t=="ascending"?e.sort((i,s)=>i.score>s.score?1:-1):t=="descending"?e.sort((i,s)=>i.score>s.score?-1:1):e}async retrieveAllSnippets(e,t="descending"){var c;let i=[];if(e.source.length===0||(await this.referenceTokens).size===0)return i;let s=e.source.split(`
`),l=this.id()+":"+e.source,n=(c=_r.get(l))!=null?c:[],o=n.length==0,a=o?s.map(this.tokenizer.tokenize,this.tokenizer):[];for(let[d,[_,f]]of this.getWindowsDelineations(s).entries()){if(o){let h=new Set;a.slice(_,f).forEach(b=>b.forEach(h.add,h)),n.push(h)}let p=n[d],m=this.similarityScore(p,await this.referenceTokens);if(i.length&&_>0&&i[i.length-1].endLine>_){i[i.length-1].score<m&&(i[i.length-1].score=m,i[i.length-1].startLine=_,i[i.length-1].endLine=f);continue}i.push({score:m,startLine:_,endLine:f})}return o&&_r.put(l,n),this.sortScoredSnippets(i,t)}findMatches(e,t){return this.findBestMatch(e,t)}async findBestMatch(e,t){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let i=e.source.split(`
`),s=await this.retrieveAllSnippets(e,"descending");if(s.length===0)return[];let l=[];for(let n=0;n<s.length&&n<t;n++)if(s[n].score!==0){let o=i.slice(s[n].startLine,s[n].endLine).join(`
`);l.push({snippet:o,semantics:"snippet",provider:"similar-files",...s[n]})}return l}};u(tn,"WindowedMatcher");var fe=tn;function Yo(r){return r.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}u(Yo,"splitIntoWords");var Qo=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),ei=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Qo]),ti=new Map([]);function ot(r,e){let t=[],i=e.length;if(i==0)return[];if(i<r)return[[0,i]];for(let s=0;s<i-r+1;s++)t.push([s,s+r]);return t}u(ot,"getBasicWindowDelineations");var Pe=class Pe extends fe{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return ot(this.windowLength,e)}_getCursorContextInfo(e){return ue(e,{maxLineCount:this.windowLength})}similarityScore(e,t){return ni(e,t)}};u(Pe,"FixedWindowSizeJaccardMatcher"),Pe.FACTORY=u(e=>({to:u(t=>new Pe(t,e),"to")}),"FACTORY");var it=Pe;function ni(r,e){let t=new Set;return r.forEach(i=>{e.has(i)&&t.add(i)}),t.size/(r.size+e.size-t.size)}u(ni,"computeScore");var X=class X extends fe{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return ot(this.windowLength,e)}_getCursorContextInfo(e){return ue(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=X.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){var s;let e=(s=await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))==null?void 0:s.startIndex,t=this.referenceDoc.offset,i=e?this.referenceDoc.source.slice(e,t):ue(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(i)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,t){return ri(e,t)}async getEnclosingMemberStart(e,t){var s;let i;try{i=await Ne(this.referenceDoc.languageId,e);let l=i.rootNode.namedDescendantForIndex(t);for(;l&&!(X.isMember(l)||X.isBlock(l));)l=(s=l.parent)!=null?s:void 0;return l}finally{i==null||i.delete()}}static isMember(e){switch(e==null?void 0:e.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e==null?void 0:e.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};u(X,"BlockTokenSubsetMatcher"),X.FACTORY=u(e=>({to:u(t=>new X(t,e),"to")}),"FACTORY");var st=X;function ri(r,e){let t=new Set;return e.forEach(i=>{r.has(i)&&t.add(i)}),t.size}u(ri,"computeScore");function oi(r,e){return(e.useSubsetMatching?st.FACTORY(e.snippetLength):it.FACTORY(e.snippetLength)).to(r)}u(oi,"getMatcher");async function fr(r,e,t){let i=oi(r,t);return t.maxTopSnippets===0?[]:(await e.filter(l=>l.source.length<t.maxCharPerFile&&l.source.length>0).slice(0,t.maxNumberOfFiles).reduce(async(l,n)=>(await l).concat((await i.findMatches(n,t.maxSnippetsPerFile)).map(o=>({relativePath:n.relativePath,...o}))),Promise.resolve([]))).filter(l=>l.score&&l.snippet&&l.score>t.threshold).sort((l,n)=>l.score-n.score).slice(-t.maxTopSnippets)}u(fr,"getSimilarSnippets");function Kr(r){return new Promise(e=>{setTimeout(()=>e(`delay: ${r}`),r)})}u(Kr,"sleep");var xn=["getSimilarSnippets","sleep"],Mn=class Mn{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=fr;this.sleep=Kr;var e;!Z.isMainThread&&((e=Z.workerData)!=null&&e.port)&&(Gr(),process.cwd=()=>Z.workerData.cwd,this.configureWorkerResponse(Z.workerData.port))}initWorker(){let{port1:e,port2:t}=new Z.MessageChannel;this.port=e,this.worker=new Z.Worker(ft.default.resolve(ft.default.extname(__filename)!==".ts"?__dirname:ft.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:t,cwd:process.cwd()},transferList:[t]}),this.port.on("message",i=>this.handleMessage(i)),this.port.on("error",i=>this.handleError(i))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of xn)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of xn){let t=this.fns.get(e);if(t)this[e]=t;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",async({id:t,fn:i,args:s})=>{let l=this[i];if(!l)throw new Error(`Function not found: ${i}`);try{let n=await l.apply(this,s);this.port.postMessage({id:t,res:n})}catch(n){if(!(n instanceof Error))throw n;typeof n.code=="string"?this.port.postMessage({id:t,err:n,code:n.code}):this.port.postMessage({id:t,err:n})}})}handleMessage({id:e,err:t,code:i,res:s}){let l=this.handlers.get(e);l&&(this.handlers.delete(e),t?(t.code=i,l.reject(t)):l.resolve(s))}handleError(e){var i;console.log(e);let t;if(e instanceof Error){t=e,t.code==="MODULE_NOT_FOUND"&&((i=t.message)!=null&&i.endsWith("workerProxy.js'"))&&(t=new Error("Failed to load workerProxy.js"),t.code="CopilotPromptLoadFailure");let s=new Error().stack;t.stack&&(s!=null&&s.match(/^Error\n/))&&(t.stack+=s.replace(/^Error/,""))}else(e==null?void 0:e.name)==="ExitStatus"&&typeof e.status=="number"?(t=new Error(`workerProxy.js exited with status ${e.status}`),t.code=`CopilotPromptWorkerExit${e.status}`):t=new Error(`Non-error thrown: ${e}`);for(let s of this.handlers.values())s.reject(t);throw t}proxy(e){this[e]=function(...t){let i=this.nextHandlerId++;return new Promise((s,l)=>{var n;this.handlers.set(i,{resolve:s,reject:l}),(n=this.port)==null||n.postMessage({id:i,fn:e,args:t})})}}};u(Mn,"WorkerProxy");var De=Mn,Qe=new De,Hi=u(()=>{Qe.stopThreading(),Qe=new De},"reset");0&&(module.exports={WorkerProxy,reset,sleep,workerFns,workerProxy});
//# sourceMappingURL=workerProxy.js.map
