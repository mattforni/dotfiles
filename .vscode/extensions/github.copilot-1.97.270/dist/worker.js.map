{"version":3,"file":"worker.js","mappings":"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C/B4nB,EAAW5pB,KAAKqgC,oBAAoBC,EAAWE,EAAYC,YAEjE,OAAwB,IAApB7W,EAAStsB,QAGa,IAAtBssB,EAAS,GAAG4U,MAFL,GAOJ,CACH,CACI3D,QAHY1yB,EAAM3J,MAAMorB,EAAS,GAAGmX,UAAWnX,EAAS,GAAGoX,SAASljC,KAAK,MAIzE+jC,UAAW,EAAApd,iBAAiBqd,QAC5BrY,SAAU,EAAAjF,oBAAoBod,mBAC3BhY,EAAS,I,CAKxB,MAAMA,EAAsC,GAC5C,IAAK,IAAI2c,KAAQL,EAAe,CAC5B,MAAMrL,EAAU76B,KAAK+lC,iBAAiBQ,GACtC3c,EAASnsB,KAAK,CACVokC,UAAW,EAAApd,iBAAiB+hB,SAC5B/c,SAAU,EAAAjF,oBAAoBod,mBAC3B/G,G,CAGX,OAAOjR,CACX,GAMJ,mBAIA,MAAM6c,EAAgB,IAAIhyB,IAAI,CAE1B,KACA,MACA,MACA,KACA,MACA,OACA,OACA,QACA,OACA,OACA,QACA,QAEA,KACA,MACA,MACA,OACA,KACA,OACA,QACA,OACA,MACA,MACA,SACA,KACA,OACA,MACA,QACA,MACA,MACA,IACA,IACA,OACA,QACA,SAEA,OACA,QACA,MACA,OACA,QACA,MACA,MAEA,IACA,KACA,MAEA,MACA,KACA,MACA,KACA,MACA,UACA,KACA,QACA,QACA,UACA,OACA,OACA,OACA,QACA,MACA,MACA,OACA,OACA,MACA,OACA,OACA,QACA,OACA,OACA,QACA,QACA,KACA,SACA,SACA,QACA,KACA,KACA,KACA,QACA,UACA,OACA,UACA,OACA,KACA,OACA,KACA,MACA,KACA,MACA,OACA,QACA,OACA,MACA,OACA,KACA,OACA,MACA,OACA,OACA,QAMEmxB,EAAgB,IAAInxB,IAAI,CAE1B,KACA,OACA,OACA,MACA,QACA,OACA,MACA,WACA,SACA,OACA,SACA,MACA,QACA,QACA,UACA,SACA,SACA,OACA,QACA,SACA,WACA,QACA,QACA,QACA,OACA,SACA,SACA,MACA,QACA,OACA,SAEGgyB,IAODd,EAA2C,IAAI9f,IAAI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","sources":[".././node_modules/diff/lib/convert/dmp.js",".././node_modules/diff/lib/convert/xml.js",".././node_modules/diff/lib/diff/array.js",".././node_modules/diff/lib/diff/base.js",".././node_modules/diff/lib/diff/character.js",".././node_modules/diff/lib/diff/css.js",".././node_modules/diff/lib/diff/json.js",".././node_modules/diff/lib/diff/line.js",".././node_modules/diff/lib/diff/sentence.js",".././node_modules/diff/lib/diff/word.js",".././node_modules/diff/lib/index.js",".././node_modules/diff/lib/patch/apply.js",".././node_modules/diff/lib/patch/create.js",".././node_modules/diff/lib/patch/merge.js",".././node_modules/diff/lib/patch/parse.js",".././node_modules/diff/lib/util/array.js",".././node_modules/diff/lib/util/distance-iterator.js",".././node_modules/diff/lib/util/params.js",".././src/elidableText/elidableText.ts",".././src/elidableText/fromDiff.ts",".././src/elidableText/fromIndentationTrees.ts",".././src/elidableText/fromSourceCode.ts",".././src/elidableText/index.ts",".././src/elidableText/lineWithValueAndCost.ts",".././src/fileSystem.ts",".././src/indentation/classes.ts",".././src/indentation/description.ts",".././src/indentation/index.ts",".././src/indentation/java.ts",".././src/indentation/manipulation.ts",".././src/indentation/markdown.ts",".././src/indentation/parsing.ts",".././src/languageMarker.ts",".././src/lib.ts",".././src/localImportContext.ts",".././src/orchestrator.ts",".././src/parse.ts",".././src/parseBlock.ts",".././src/prompt.ts",".././src/siblingFunctions.ts",".././src/snippetInclusion/cursorContext.ts",".././src/snippetInclusion/cursorMatching.ts",".././src/snippetInclusion/jaccardMatching.ts",".././src/snippetInclusion/neighboringFiles.ts",".././src/snippetInclusion/selectRelevance.ts",".././src/snippetInclusion/snippets.ts",".././src/snippetInclusion/windowDelineations.ts",".././src/snippetProviders/language.ts",".././src/snippetProviders/path.ts",".././src/snippetProviders/snippetProvider.ts",".././src/suffixMatchCriteria.ts",".././src/tokenization/index.ts",".././src/tokenization/tokenizer.ts",".././src/wishlist.ts",".././node_modules/web-tree-sitter/tree-sitter.js","../external node-commonjs \"assert\"","../external node-commonjs \"fs\"","../external node-commonjs \"path\"","../external node-commonjs \"util\"","../external node-commonjs \"worker_threads\"","../webpack/bootstrap",".././src/worker.js"],"sourcesContent":["/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.convertChangesToDMP = convertChangesToDMP;\n\n/*istanbul ignore end*/\n// See: http://code.google.com/p/google-diff-match-patch/wiki/API\nfunction convertChangesToDMP(changes) {\n  var ret = [],\n      change,\n      operation;\n\n  for (var i = 0; i < changes.length; i++) {\n    change = changes[i];\n\n    if (change.added) {\n      operation = 1;\n    } else if (change.removed) {\n      operation = -1;\n    } else {\n      operation = 0;\n    }\n\n    ret.push([operation, change.value]);\n  }\n\n  return ret;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb252ZXJ0L2RtcC5qcyJdLCJuYW1lcyI6WyJjb252ZXJ0Q2hhbmdlc1RvRE1QIiwiY2hhbmdlcyIsInJldCIsImNoYW5nZSIsIm9wZXJhdGlvbiIsImkiLCJsZW5ndGgiLCJhZGRlZCIsInJlbW92ZWQiLCJwdXNoIiwidmFsdWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ08sU0FBU0EsbUJBQVQsQ0FBNkJDLE9BQTdCLEVBQXNDO0FBQzNDLE1BQUlDLEdBQUcsR0FBRyxFQUFWO0FBQUEsTUFDSUMsTUFESjtBQUFBLE1BRUlDLFNBRko7O0FBR0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSixPQUFPLENBQUNLLE1BQTVCLEVBQW9DRCxDQUFDLEVBQXJDLEVBQXlDO0FBQ3ZDRixJQUFBQSxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0ksQ0FBRCxDQUFoQjs7QUFDQSxRQUFJRixNQUFNLENBQUNJLEtBQVgsRUFBa0I7QUFDaEJILE1BQUFBLFNBQVMsR0FBRyxDQUFaO0FBQ0QsS0FGRCxNQUVPLElBQUlELE1BQU0sQ0FBQ0ssT0FBWCxFQUFvQjtBQUN6QkosTUFBQUEsU0FBUyxHQUFHLENBQUMsQ0FBYjtBQUNELEtBRk0sTUFFQTtBQUNMQSxNQUFBQSxTQUFTLEdBQUcsQ0FBWjtBQUNEOztBQUVERixJQUFBQSxHQUFHLENBQUNPLElBQUosQ0FBUyxDQUFDTCxTQUFELEVBQVlELE1BQU0sQ0FBQ08sS0FBbkIsQ0FBVDtBQUNEOztBQUNELFNBQU9SLEdBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNlZTogaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2dvb2dsZS1kaWZmLW1hdGNoLXBhdGNoL3dpa2kvQVBJXG5leHBvcnQgZnVuY3Rpb24gY29udmVydENoYW5nZXNUb0RNUChjaGFuZ2VzKSB7XG4gIGxldCByZXQgPSBbXSxcbiAgICAgIGNoYW5nZSxcbiAgICAgIG9wZXJhdGlvbjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgY2hhbmdlID0gY2hhbmdlc1tpXTtcbiAgICBpZiAoY2hhbmdlLmFkZGVkKSB7XG4gICAgICBvcGVyYXRpb24gPSAxO1xuICAgIH0gZWxzZSBpZiAoY2hhbmdlLnJlbW92ZWQpIHtcbiAgICAgIG9wZXJhdGlvbiA9IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcGVyYXRpb24gPSAwO1xuICAgIH1cblxuICAgIHJldC5wdXNoKFtvcGVyYXRpb24sIGNoYW5nZS52YWx1ZV0pO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG4iXX0=\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.convertChangesToXML = convertChangesToXML;\n\n/*istanbul ignore end*/\nfunction convertChangesToXML(changes) {\n  var ret = [];\n\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n\n    ret.push(escapeHTML(change.value));\n\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n\n  return ret.join('');\n}\n\nfunction escapeHTML(s) {\n  var n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n  return n;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb252ZXJ0L3htbC5qcyJdLCJuYW1lcyI6WyJjb252ZXJ0Q2hhbmdlc1RvWE1MIiwiY2hhbmdlcyIsInJldCIsImkiLCJsZW5ndGgiLCJjaGFuZ2UiLCJhZGRlZCIsInB1c2giLCJyZW1vdmVkIiwiZXNjYXBlSFRNTCIsInZhbHVlIiwiam9pbiIsInMiLCJuIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQU8sU0FBU0EsbUJBQVQsQ0FBNkJDLE9BQTdCLEVBQXNDO0FBQzNDLE1BQUlDLEdBQUcsR0FBRyxFQUFWOztBQUNBLE9BQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0YsT0FBTyxDQUFDRyxNQUE1QixFQUFvQ0QsQ0FBQyxFQUFyQyxFQUF5QztBQUN2QyxRQUFJRSxNQUFNLEdBQUdKLE9BQU8sQ0FBQ0UsQ0FBRCxDQUFwQjs7QUFDQSxRQUFJRSxNQUFNLENBQUNDLEtBQVgsRUFBa0I7QUFDaEJKLE1BQUFBLEdBQUcsQ0FBQ0ssSUFBSixDQUFTLE9BQVQ7QUFDRCxLQUZELE1BRU8sSUFBSUYsTUFBTSxDQUFDRyxPQUFYLEVBQW9CO0FBQ3pCTixNQUFBQSxHQUFHLENBQUNLLElBQUosQ0FBUyxPQUFUO0FBQ0Q7O0FBRURMLElBQUFBLEdBQUcsQ0FBQ0ssSUFBSixDQUFTRSxVQUFVLENBQUNKLE1BQU0sQ0FBQ0ssS0FBUixDQUFuQjs7QUFFQSxRQUFJTCxNQUFNLENBQUNDLEtBQVgsRUFBa0I7QUFDaEJKLE1BQUFBLEdBQUcsQ0FBQ0ssSUFBSixDQUFTLFFBQVQ7QUFDRCxLQUZELE1BRU8sSUFBSUYsTUFBTSxDQUFDRyxPQUFYLEVBQW9CO0FBQ3pCTixNQUFBQSxHQUFHLENBQUNLLElBQUosQ0FBUyxRQUFUO0FBQ0Q7QUFDRjs7QUFDRCxTQUFPTCxHQUFHLENBQUNTLElBQUosQ0FBUyxFQUFULENBQVA7QUFDRDs7QUFFRCxTQUFTRixVQUFULENBQW9CRyxDQUFwQixFQUF1QjtBQUNyQixNQUFJQyxDQUFDLEdBQUdELENBQVI7QUFDQUMsRUFBQUEsQ0FBQyxHQUFHQSxDQUFDLENBQUNDLE9BQUYsQ0FBVSxJQUFWLEVBQWdCLE9BQWhCLENBQUo7QUFDQUQsRUFBQUEsQ0FBQyxHQUFHQSxDQUFDLENBQUNDLE9BQUYsQ0FBVSxJQUFWLEVBQWdCLE1BQWhCLENBQUo7QUFDQUQsRUFBQUEsQ0FBQyxHQUFHQSxDQUFDLENBQUNDLE9BQUYsQ0FBVSxJQUFWLEVBQWdCLE1BQWhCLENBQUo7QUFDQUQsRUFBQUEsQ0FBQyxHQUFHQSxDQUFDLENBQUNDLE9BQUYsQ0FBVSxJQUFWLEVBQWdCLFFBQWhCLENBQUo7QUFFQSxTQUFPRCxDQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gY29udmVydENoYW5nZXNUb1hNTChjaGFuZ2VzKSB7XG4gIGxldCByZXQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGNoYW5nZSA9IGNoYW5nZXNbaV07XG4gICAgaWYgKGNoYW5nZS5hZGRlZCkge1xuICAgICAgcmV0LnB1c2goJzxpbnM+Jyk7XG4gICAgfSBlbHNlIGlmIChjaGFuZ2UucmVtb3ZlZCkge1xuICAgICAgcmV0LnB1c2goJzxkZWw+Jyk7XG4gICAgfVxuXG4gICAgcmV0LnB1c2goZXNjYXBlSFRNTChjaGFuZ2UudmFsdWUpKTtcblxuICAgIGlmIChjaGFuZ2UuYWRkZWQpIHtcbiAgICAgIHJldC5wdXNoKCc8L2lucz4nKTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZS5yZW1vdmVkKSB7XG4gICAgICByZXQucHVzaCgnPC9kZWw+Jyk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZUhUTUwocykge1xuICBsZXQgbiA9IHM7XG4gIG4gPSBuLnJlcGxhY2UoLyYvZywgJyZhbXA7Jyk7XG4gIG4gPSBuLnJlcGxhY2UoLzwvZywgJyZsdDsnKTtcbiAgbiA9IG4ucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuICBuID0gbi5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XG5cbiAgcmV0dXJuIG47XG59XG4iXX0=\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffArrays = diffArrays;\nexports.arrayDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\nvar arrayDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n]();\n\n/*istanbul ignore start*/\nexports.arrayDiff = arrayDiff;\n\n/*istanbul ignore end*/\narrayDiff.tokenize = function (value) {\n  return value.slice();\n};\n\narrayDiff.join = arrayDiff.removeEmpty = function (value) {\n  return value;\n};\n\nfunction diffArrays(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2FycmF5LmpzIl0sIm5hbWVzIjpbImFycmF5RGlmZiIsIkRpZmYiLCJ0b2tlbml6ZSIsInZhbHVlIiwic2xpY2UiLCJqb2luIiwicmVtb3ZlRW1wdHkiLCJkaWZmQXJyYXlzIiwib2xkQXJyIiwibmV3QXJyIiwiY2FsbGJhY2siLCJkaWZmIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFFTyxJQUFNQSxTQUFTLEdBQUc7QUFBSUM7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUEsQ0FBSixFQUFsQjs7Ozs7O0FBQ1BELFNBQVMsQ0FBQ0UsUUFBVixHQUFxQixVQUFTQyxLQUFULEVBQWdCO0FBQ25DLFNBQU9BLEtBQUssQ0FBQ0MsS0FBTixFQUFQO0FBQ0QsQ0FGRDs7QUFHQUosU0FBUyxDQUFDSyxJQUFWLEdBQWlCTCxTQUFTLENBQUNNLFdBQVYsR0FBd0IsVUFBU0gsS0FBVCxFQUFnQjtBQUN2RCxTQUFPQSxLQUFQO0FBQ0QsQ0FGRDs7QUFJTyxTQUFTSSxVQUFULENBQW9CQyxNQUFwQixFQUE0QkMsTUFBNUIsRUFBb0NDLFFBQXBDLEVBQThDO0FBQUUsU0FBT1YsU0FBUyxDQUFDVyxJQUFWLENBQWVILE1BQWYsRUFBdUJDLE1BQXZCLEVBQStCQyxRQUEvQixDQUFQO0FBQWtEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGNvbnN0IGFycmF5RGlmZiA9IG5ldyBEaWZmKCk7XG5hcnJheURpZmYudG9rZW5pemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUuc2xpY2UoKTtcbn07XG5hcnJheURpZmYuam9pbiA9IGFycmF5RGlmZi5yZW1vdmVFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmQXJyYXlzKG9sZEFyciwgbmV3QXJyLCBjYWxsYmFjaykgeyByZXR1cm4gYXJyYXlEaWZmLmRpZmYob2xkQXJyLCBuZXdBcnIsIGNhbGxiYWNrKTsgfVxuIl19\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = Diff;\n\n/*istanbul ignore end*/\nfunction Diff() {}\n\nDiff.prototype = {\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  diff: function diff(oldString, newString) {\n    /*istanbul ignore start*/\n    var\n    /*istanbul ignore end*/\n    options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var callback = options.callback;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.options = options;\n    var self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function () {\n          callback(undefined, value);\n        }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    } // Allow subclasses to massage the input prior to running\n\n\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n    var newLen = newString.length,\n        oldLen = oldString.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n\n    if (options.maxEditLength) {\n      maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n    }\n\n    var bestPath = [{\n      newPos: -1,\n      components: []\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{\n        value: this.join(newString),\n        count: newString.length\n      }]);\n    } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n    function execEditLength() {\n      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        var basePath =\n        /*istanbul ignore start*/\n        void 0\n        /*istanbul ignore end*/\n        ;\n\n        var addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n\n\n        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath); // If we have hit the end of both strings, then we are done\n\n        if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced, or until the edit length exceeds options.maxEditLength (if given),\n    // in which case it will return undefined.\n\n\n    if (callback) {\n      (function exec() {\n        setTimeout(function () {\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      })();\n    } else {\n      while (editLength <= maxEditLength) {\n        var ret = execEditLength();\n\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  pushComponent: function pushComponent(components, added, removed) {\n    var last = components[components.length - 1];\n\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {\n        count: last.count + 1,\n        added: added,\n        removed: removed\n      };\n    } else {\n      components.push({\n        count: 1,\n        added: added,\n        removed: removed\n      });\n    }\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n    var newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n        commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({\n        count: commonCount\n      });\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  equals: function equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n    }\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  removeEmpty: function removeEmpty(array) {\n    var ret = [];\n\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n\n    return ret;\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  castInput: function castInput(value) {\n    return value;\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  tokenize: function tokenize(value) {\n    return value.split('');\n  },\n\n  /*istanbul ignore start*/\n\n  /*istanbul ignore end*/\n  join: function join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  var componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        var value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function (value, i) {\n          var oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n\n      if (componentPos && components[componentPos - 1].added) {\n        var tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  } // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n\n\n  var lastComponent = components[componentLen - 1];\n\n  if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2Jhc2UuanMiXSwibmFtZXMiOlsiRGlmZiIsInByb3RvdHlwZSIsImRpZmYiLCJvbGRTdHJpbmciLCJuZXdTdHJpbmciLCJvcHRpb25zIiwiY2FsbGJhY2siLCJzZWxmIiwiZG9uZSIsInZhbHVlIiwic2V0VGltZW91dCIsInVuZGVmaW5lZCIsImNhc3RJbnB1dCIsInJlbW92ZUVtcHR5IiwidG9rZW5pemUiLCJuZXdMZW4iLCJsZW5ndGgiLCJvbGRMZW4iLCJlZGl0TGVuZ3RoIiwibWF4RWRpdExlbmd0aCIsIk1hdGgiLCJtaW4iLCJiZXN0UGF0aCIsIm5ld1BvcyIsImNvbXBvbmVudHMiLCJvbGRQb3MiLCJleHRyYWN0Q29tbW9uIiwiam9pbiIsImNvdW50IiwiZXhlY0VkaXRMZW5ndGgiLCJkaWFnb25hbFBhdGgiLCJiYXNlUGF0aCIsImFkZFBhdGgiLCJyZW1vdmVQYXRoIiwiY2FuQWRkIiwiY2FuUmVtb3ZlIiwiY2xvbmVQYXRoIiwicHVzaENvbXBvbmVudCIsImJ1aWxkVmFsdWVzIiwidXNlTG9uZ2VzdFRva2VuIiwiZXhlYyIsInJldCIsImFkZGVkIiwicmVtb3ZlZCIsImxhc3QiLCJwdXNoIiwiY29tbW9uQ291bnQiLCJlcXVhbHMiLCJsZWZ0IiwicmlnaHQiLCJjb21wYXJhdG9yIiwiaWdub3JlQ2FzZSIsInRvTG93ZXJDYXNlIiwiYXJyYXkiLCJpIiwic3BsaXQiLCJjaGFycyIsImNvbXBvbmVudFBvcyIsImNvbXBvbmVudExlbiIsImNvbXBvbmVudCIsInNsaWNlIiwibWFwIiwib2xkVmFsdWUiLCJ0bXAiLCJsYXN0Q29tcG9uZW50IiwicG9wIiwicGF0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWUsU0FBU0EsSUFBVCxHQUFnQixDQUFFOztBQUVqQ0EsSUFBSSxDQUFDQyxTQUFMLEdBQWlCO0FBQUE7O0FBQUE7QUFDZkMsRUFBQUEsSUFEZSxnQkFDVkMsU0FEVSxFQUNDQyxTQURELEVBQzBCO0FBQUE7QUFB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R0FBMkJNLEdBQTNCO0FBQ0Q7QUFDRjtBQUNGLEdBdkMyRSxDQXlDNUU7QUFDQTtBQUNBOzs7QUFDQSxNQUFJQyxhQUFhLEdBQUd4QyxVQUFVLENBQUNrQyxZQUFZLEdBQUcsQ0FBaEIsQ0FBOUI7O0FBQ0EsTUFBSUEsWUFBWSxHQUFHLENBQWYsSUFDRyxPQUFPTSxhQUFhLENBQUN2RCxLQUFyQixLQUErQixRQURsQyxLQUVJdUQsYUFBYSxDQUFDdEIsS0FBZCxJQUF1QnNCLGFBQWEsQ0FBQ3JCLE9BRnpDLEtBR0d6QyxJQUFJLENBQUM2QyxNQUFMLENBQVksRUFBWixFQUFnQmlCLGFBQWEsQ0FBQ3ZELEtBQTlCLENBSFAsRUFHNkM7QUFDM0NlLElBQUFBLFVBQVUsQ0FBQ2tDLFlBQVksR0FBRyxDQUFoQixDQUFWLENBQTZCakQsS0FBN0IsSUFBc0N1RCxhQUFhLENBQUN2RCxLQUFwRDtBQUNBZSxJQUFBQSxVQUFVLENBQUN5QyxHQUFYO0FBQ0Q7O0FBRUQsU0FBT3pDLFVBQVA7QUFDRDs7QUFFRCxTQUFTWSxTQUFULENBQW1COEIsSUFBbkIsRUFBeUI7QUFDdkIsU0FBTztBQUFFM0MsSUFBQUEsTUFBTSxFQUFFMkMsSUFBSSxDQUFDM0MsTUFBZjtBQUF1QkMsSUFBQUEsVUFBVSxFQUFFMEMsSUFBSSxDQUFDMUMsVUFBTCxDQUFnQm9DLEtBQWhCLENBQXNCLENBQXRCO0FBQW5DLEdBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERpZmYoKSB7fVxuXG5EaWZmLnByb3RvdHlwZSA9IHtcbiAgZGlmZihvbGRTdHJpbmcsIG5ld1N0cmluZywgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjaztcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIGRvbmUodmFsdWUpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayh1bmRlZmluZWQsIHZhbHVlKTsgfSwgMCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFsbG93IHN1YmNsYXNzZXMgdG8gbWFzc2FnZSB0aGUgaW5wdXQgcHJpb3IgdG8gcnVubmluZ1xuICAgIG9sZFN0cmluZyA9IHRoaXMuY2FzdElucHV0KG9sZFN0cmluZyk7XG4gICAgbmV3U3RyaW5nID0gdGhpcy5jYXN0SW5wdXQobmV3U3RyaW5nKTtcblxuICAgIG9sZFN0cmluZyA9IHRoaXMucmVtb3ZlRW1wdHkodGhpcy50b2tlbml6ZShvbGRTdHJpbmcpKTtcbiAgICBuZXdTdHJpbmcgPSB0aGlzLnJlbW92ZUVtcHR5KHRoaXMudG9rZW5pemUobmV3U3RyaW5nKSk7XG5cbiAgICBsZXQgbmV3TGVuID0gbmV3U3RyaW5nLmxlbmd0aCwgb2xkTGVuID0gb2xkU3RyaW5nLmxlbmd0aDtcbiAgICBsZXQgZWRpdExlbmd0aCA9IDE7XG4gICAgbGV0IG1heEVkaXRMZW5ndGggPSBuZXdMZW4gKyBvbGRMZW47XG4gICAgaWYob3B0aW9ucy5tYXhFZGl0TGVuZ3RoKSB7XG4gICAgICBtYXhFZGl0TGVuZ3RoID0gTWF0aC5taW4obWF4RWRpdExlbmd0aCwgb3B0aW9ucy5tYXhFZGl0TGVuZ3RoKTtcbiAgICB9XG5cbiAgICBsZXQgYmVzdFBhdGggPSBbeyBuZXdQb3M6IC0xLCBjb21wb25lbnRzOiBbXSB9XTtcblxuICAgIC8vIFNlZWQgZWRpdExlbmd0aCA9IDAsIGkuZS4gdGhlIGNvbnRlbnQgc3RhcnRzIHdpdGggdGhlIHNhbWUgdmFsdWVzXG4gICAgbGV0IG9sZFBvcyA9IHRoaXMuZXh0cmFjdENvbW1vbihiZXN0UGF0aFswXSwgbmV3U3RyaW5nLCBvbGRTdHJpbmcsIDApO1xuICAgIGlmIChiZXN0UGF0aFswXS5uZXdQb3MgKyAxID49IG5ld0xlbiAmJiBvbGRQb3MgKyAxID49IG9sZExlbikge1xuICAgICAgLy8gSWRlbnRpdHkgcGVyIHRoZSBlcXVhbGl0eSBhbmQgdG9rZW5pemVyXG4gICAgICByZXR1cm4gZG9uZShbe3ZhbHVlOiB0aGlzLmpvaW4obmV3U3RyaW5nKSwgY291bnQ6IG5ld1N0cmluZy5sZW5ndGh9XSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiB3b3JrZXIgbWV0aG9kLiBjaGVja3MgYWxsIHBlcm11dGF0aW9ucyBvZiBhIGdpdmVuIGVkaXQgbGVuZ3RoIGZvciBhY2NlcHRhbmNlLlxuICAgIGZ1bmN0aW9uIGV4ZWNFZGl0TGVuZ3RoKCkge1xuICAgICAgZm9yIChsZXQgZGlhZ29uYWxQYXRoID0gLTEgKiBlZGl0TGVuZ3RoOyBkaWFnb25hbFBhdGggPD0gZWRpdExlbmd0aDsgZGlhZ29uYWxQYXRoICs9IDIpIHtcbiAgICAgICAgbGV0IGJhc2VQYXRoO1xuICAgICAgICBsZXQgYWRkUGF0aCA9IGJlc3RQYXRoW2RpYWdvbmFsUGF0aCAtIDFdLFxuICAgICAgICAgICAgcmVtb3ZlUGF0aCA9IGJlc3RQYXRoW2RpYWdvbmFsUGF0aCArIDFdLFxuICAgICAgICAgICAgb2xkUG9zID0gKHJlbW92ZVBhdGggPyByZW1vdmVQYXRoLm5ld1BvcyA6IDApIC0gZGlhZ29uYWxQYXRoO1xuICAgICAgICBpZiAoYWRkUGF0aCkge1xuICAgICAgICAgIC8vIE5vIG9uZSBlbHNlIGlzIGdvaW5nIHRvIGF0dGVtcHQgdG8gdXNlIHRoaXMgdmFsdWUsIGNsZWFyIGl0XG4gICAgICAgICAgYmVzdFBhdGhbZGlhZ29uYWxQYXRoIC0gMV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2FuQWRkID0gYWRkUGF0aCAmJiBhZGRQYXRoLm5ld1BvcyArIDEgPCBuZXdMZW4sXG4gICAgICAgICAgICBjYW5SZW1vdmUgPSByZW1vdmVQYXRoICYmIDAgPD0gb2xkUG9zICYmIG9sZFBvcyA8IG9sZExlbjtcbiAgICAgICAgaWYgKCFjYW5BZGQgJiYgIWNhblJlbW92ZSkge1xuICAgICAgICAgIC8vIElmIHRoaXMgcGF0aCBpcyBhIHRlcm1pbmFsIHRoZW4gcHJ1bmVcbiAgICAgICAgICBiZXN0UGF0aFtkaWFnb25hbFBhdGhdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VsZWN0IHRoZSBkaWFnb25hbCB0aGF0IHdlIHdhbnQgdG8gYnJhbmNoIGZyb20uIFdlIHNlbGVjdCB0aGUgcHJpb3JcbiAgICAgICAgLy8gcGF0aCB3aG9zZSBwb3NpdGlvbiBpbiB0aGUgbmV3IHN0cmluZyBpcyB0aGUgZmFydGhlc3QgZnJvbSB0aGUgb3JpZ2luXG4gICAgICAgIC8vIGFuZCBkb2VzIG5vdCBwYXNzIHRoZSBib3VuZHMgb2YgdGhlIGRpZmYgZ3JhcGhcbiAgICAgICAgaWYgKCFjYW5BZGQgfHwgKGNhblJlbW92ZSAmJiBhZGRQYXRoLm5ld1BvcyA8IHJlbW92ZVBhdGgubmV3UG9zKSkge1xuICAgICAgICAgIGJhc2VQYXRoID0gY2xvbmVQYXRoKHJlbW92ZVBhdGgpO1xuICAgICAgICAgIHNlbGYucHVzaENvbXBvbmVudChiYXNlUGF0aC5jb21wb25lbnRzLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJhc2VQYXRoID0gYWRkUGF0aDsgLy8gTm8gbmVlZCB0byBjbG9uZSwgd2UndmUgcHVsbGVkIGl0IGZyb20gdGhlIGxpc3RcbiAgICAgICAgICBiYXNlUGF0aC5uZXdQb3MrKztcbiAgICAgICAgICBzZWxmLnB1c2hDb21wb25lbnQoYmFzZVBhdGguY29tcG9uZW50cywgdHJ1ZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9sZFBvcyA9IHNlbGYuZXh0cmFjdENvbW1vbihiYXNlUGF0aCwgbmV3U3RyaW5nLCBvbGRTdHJpbmcsIGRpYWdvbmFsUGF0aCk7XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBoaXQgdGhlIGVuZCBvZiBib3RoIHN0cmluZ3MsIHRoZW4gd2UgYXJlIGRvbmVcbiAgICAgICAgaWYgKGJhc2VQYXRoLm5ld1BvcyArIDEgPj0gbmV3TGVuICYmIG9sZFBvcyArIDEgPj0gb2xkTGVuKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUoYnVpbGRWYWx1ZXMoc2VsZiwgYmFzZVBhdGguY29tcG9uZW50cywgbmV3U3RyaW5nLCBvbGRTdHJpbmcsIHNlbGYudXNlTG9uZ2VzdFRva2VuKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIHRyYWNrIHRoaXMgcGF0aCBhcyBhIHBvdGVudGlhbCBjYW5kaWRhdGUgYW5kIGNvbnRpbnVlLlxuICAgICAgICAgIGJlc3RQYXRoW2RpYWdvbmFsUGF0aF0gPSBiYXNlUGF0aDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBlZGl0TGVuZ3RoKys7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybXMgdGhlIGxlbmd0aCBvZiBlZGl0IGl0ZXJhdGlvbi4gSXMgYSBiaXQgZnVnbHkgYXMgdGhpcyBoYXMgdG8gc3VwcG9ydCB0aGVcbiAgICAvLyBzeW5jIGFuZCBhc3luYyBtb2RlIHdoaWNoIGlzIG5ldmVyIGZ1bi4gTG9vcHMgb3ZlciBleGVjRWRpdExlbmd0aCB1bnRpbCBhIHZhbHVlXG4gICAgLy8gaXMgcHJvZHVjZWQsIG9yIHVudGlsIHRoZSBlZGl0IGxlbmd0aCBleGNlZWRzIG9wdGlvbnMubWF4RWRpdExlbmd0aCAoaWYgZ2l2ZW4pLFxuICAgIC8vIGluIHdoaWNoIGNhc2UgaXQgd2lsbCByZXR1cm4gdW5kZWZpbmVkLlxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgKGZ1bmN0aW9uIGV4ZWMoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGVkaXRMZW5ndGggPiBtYXhFZGl0TGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWV4ZWNFZGl0TGVuZ3RoKCkpIHtcbiAgICAgICAgICAgIGV4ZWMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgfSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKGVkaXRMZW5ndGggPD0gbWF4RWRpdExlbmd0aCkge1xuICAgICAgICBsZXQgcmV0ID0gZXhlY0VkaXRMZW5ndGgoKTtcbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgcHVzaENvbXBvbmVudChjb21wb25lbnRzLCBhZGRlZCwgcmVtb3ZlZCkge1xuICAgIGxldCBsYXN0ID0gY29tcG9uZW50c1tjb21wb25lbnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChsYXN0ICYmIGxhc3QuYWRkZWQgPT09IGFkZGVkICYmIGxhc3QucmVtb3ZlZCA9PT0gcmVtb3ZlZCkge1xuICAgICAgLy8gV2UgbmVlZCB0byBjbG9uZSBoZXJlIGFzIHRoZSBjb21wb25lbnQgY2xvbmUgb3BlcmF0aW9uIGlzIGp1c3RcbiAgICAgIC8vIGFzIHNoYWxsb3cgYXJyYXkgY2xvbmVcbiAgICAgIGNvbXBvbmVudHNbY29tcG9uZW50cy5sZW5ndGggLSAxXSA9IHtjb3VudDogbGFzdC5jb3VudCArIDEsIGFkZGVkOiBhZGRlZCwgcmVtb3ZlZDogcmVtb3ZlZCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21wb25lbnRzLnB1c2goe2NvdW50OiAxLCBhZGRlZDogYWRkZWQsIHJlbW92ZWQ6IHJlbW92ZWQgfSk7XG4gICAgfVxuICB9LFxuICBleHRyYWN0Q29tbW9uKGJhc2VQYXRoLCBuZXdTdHJpbmcsIG9sZFN0cmluZywgZGlhZ29uYWxQYXRoKSB7XG4gICAgbGV0IG5ld0xlbiA9IG5ld1N0cmluZy5sZW5ndGgsXG4gICAgICAgIG9sZExlbiA9IG9sZFN0cmluZy5sZW5ndGgsXG4gICAgICAgIG5ld1BvcyA9IGJhc2VQYXRoLm5ld1BvcyxcbiAgICAgICAgb2xkUG9zID0gbmV3UG9zIC0gZGlhZ29uYWxQYXRoLFxuXG4gICAgICAgIGNvbW1vbkNvdW50ID0gMDtcbiAgICB3aGlsZSAobmV3UG9zICsgMSA8IG5ld0xlbiAmJiBvbGRQb3MgKyAxIDwgb2xkTGVuICYmIHRoaXMuZXF1YWxzKG5ld1N0cmluZ1tuZXdQb3MgKyAxXSwgb2xkU3RyaW5nW29sZFBvcyArIDFdKSkge1xuICAgICAgbmV3UG9zKys7XG4gICAgICBvbGRQb3MrKztcbiAgICAgIGNvbW1vbkNvdW50Kys7XG4gICAgfVxuXG4gICAgaWYgKGNvbW1vbkNvdW50KSB7XG4gICAgICBiYXNlUGF0aC5jb21wb25lbnRzLnB1c2goe2NvdW50OiBjb21tb25Db3VudH0pO1xuICAgIH1cblxuICAgIGJhc2VQYXRoLm5ld1BvcyA9IG5ld1BvcztcbiAgICByZXR1cm4gb2xkUG9zO1xuICB9LFxuXG4gIGVxdWFscyhsZWZ0LCByaWdodCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGFyYXRvcikge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jb21wYXJhdG9yKGxlZnQsIHJpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxlZnQgPT09IHJpZ2h0XG4gICAgICAgIHx8ICh0aGlzLm9wdGlvbnMuaWdub3JlQ2FzZSAmJiBsZWZ0LnRvTG93ZXJDYXNlKCkgPT09IHJpZ2h0LnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlRW1wdHkoYXJyYXkpIHtcbiAgICBsZXQgcmV0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFycmF5W2ldKSB7XG4gICAgICAgIHJldC5wdXNoKGFycmF5W2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbiAgY2FzdElucHV0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICB0b2tlbml6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5zcGxpdCgnJyk7XG4gIH0sXG4gIGpvaW4oY2hhcnMpIHtcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGJ1aWxkVmFsdWVzKGRpZmYsIGNvbXBvbmVudHMsIG5ld1N0cmluZywgb2xkU3RyaW5nLCB1c2VMb25nZXN0VG9rZW4pIHtcbiAgbGV0IGNvbXBvbmVudFBvcyA9IDAsXG4gICAgICBjb21wb25lbnRMZW4gPSBjb21wb25lbnRzLmxlbmd0aCxcbiAgICAgIG5ld1BvcyA9IDAsXG4gICAgICBvbGRQb3MgPSAwO1xuXG4gIGZvciAoOyBjb21wb25lbnRQb3MgPCBjb21wb25lbnRMZW47IGNvbXBvbmVudFBvcysrKSB7XG4gICAgbGV0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbY29tcG9uZW50UG9zXTtcbiAgICBpZiAoIWNvbXBvbmVudC5yZW1vdmVkKSB7XG4gICAgICBpZiAoIWNvbXBvbmVudC5hZGRlZCAmJiB1c2VMb25nZXN0VG9rZW4pIHtcbiAgICAgICAgbGV0IHZhbHVlID0gbmV3U3RyaW5nLnNsaWNlKG5ld1BvcywgbmV3UG9zICsgY29tcG9uZW50LmNvdW50KTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAoZnVuY3Rpb24odmFsdWUsIGkpIHtcbiAgICAgICAgICBsZXQgb2xkVmFsdWUgPSBvbGRTdHJpbmdbb2xkUG9zICsgaV07XG4gICAgICAgICAgcmV0dXJuIG9sZFZhbHVlLmxlbmd0aCA+IHZhbHVlLmxlbmd0aCA/IG9sZFZhbHVlIDogdmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbXBvbmVudC52YWx1ZSA9IGRpZmYuam9pbih2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wb25lbnQudmFsdWUgPSBkaWZmLmpvaW4obmV3U3RyaW5nLnNsaWNlKG5ld1BvcywgbmV3UG9zICsgY29tcG9uZW50LmNvdW50KSk7XG4gICAgICB9XG4gICAgICBuZXdQb3MgKz0gY29tcG9uZW50LmNvdW50O1xuXG4gICAgICAvLyBDb21tb24gY2FzZVxuICAgICAgaWYgKCFjb21wb25lbnQuYWRkZWQpIHtcbiAgICAgICAgb2xkUG9zICs9IGNvbXBvbmVudC5jb3VudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29tcG9uZW50LnZhbHVlID0gZGlmZi5qb2luKG9sZFN0cmluZy5zbGljZShvbGRQb3MsIG9sZFBvcyArIGNvbXBvbmVudC5jb3VudCkpO1xuICAgICAgb2xkUG9zICs9IGNvbXBvbmVudC5jb3VudDtcblxuICAgICAgLy8gUmV2ZXJzZSBhZGQgYW5kIHJlbW92ZSBzbyByZW1vdmVzIGFyZSBvdXRwdXQgZmlyc3QgdG8gbWF0Y2ggY29tbW9uIGNvbnZlbnRpb25cbiAgICAgIC8vIFRoZSBkaWZmaW5nIGFsZ29yaXRobSBpcyB0aWVkIHRvIGFkZCB0aGVuIHJlbW92ZSBvdXRwdXQgYW5kIHRoaXMgaXMgdGhlIHNpbXBsZXN0XG4gICAgICAvLyByb3V0ZSB0byBnZXQgdGhlIGRlc2lyZWQgb3V0cHV0IHdpdGggbWluaW1hbCBvdmVyaGVhZC5cbiAgICAgIGlmIChjb21wb25lbnRQb3MgJiYgY29tcG9uZW50c1tjb21wb25lbnRQb3MgLSAxXS5hZGRlZCkge1xuICAgICAgICBsZXQgdG1wID0gY29tcG9uZW50c1tjb21wb25lbnRQb3MgLSAxXTtcbiAgICAgICAgY29tcG9uZW50c1tjb21wb25lbnRQb3MgLSAxXSA9IGNvbXBvbmVudHNbY29tcG9uZW50UG9zXTtcbiAgICAgICAgY29tcG9uZW50c1tjb21wb25lbnRQb3NdID0gdG1wO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFNwZWNpYWwgY2FzZSBoYW5kbGUgZm9yIHdoZW4gb25lIHRlcm1pbmFsIGlzIGlnbm9yZWQgKGkuZS4gd2hpdGVzcGFjZSkuXG4gIC8vIEZvciB0aGlzIGNhc2Ugd2UgbWVyZ2UgdGhlIHRlcm1pbmFsIGludG8gdGhlIHByaW9yIHN0cmluZyBhbmQgZHJvcCB0aGUgY2hhbmdlLlxuICAvLyBUaGlzIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBzdHJpbmcgbW9kZS5cbiAgbGV0IGxhc3RDb21wb25lbnQgPSBjb21wb25lbnRzW2NvbXBvbmVudExlbiAtIDFdO1xuICBpZiAoY29tcG9uZW50TGVuID4gMVxuICAgICAgJiYgdHlwZW9mIGxhc3RDb21wb25lbnQudmFsdWUgPT09ICdzdHJpbmcnXG4gICAgICAmJiAobGFzdENvbXBvbmVudC5hZGRlZCB8fCBsYXN0Q29tcG9uZW50LnJlbW92ZWQpXG4gICAgICAmJiBkaWZmLmVxdWFscygnJywgbGFzdENvbXBvbmVudC52YWx1ZSkpIHtcbiAgICBjb21wb25lbnRzW2NvbXBvbmVudExlbiAtIDJdLnZhbHVlICs9IGxhc3RDb21wb25lbnQudmFsdWU7XG4gICAgY29tcG9uZW50cy5wb3AoKTtcbiAgfVxuXG4gIHJldHVybiBjb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBjbG9uZVBhdGgocGF0aCkge1xuICByZXR1cm4geyBuZXdQb3M6IHBhdGgubmV3UG9zLCBjb21wb25lbnRzOiBwYXRoLmNvbXBvbmVudHMuc2xpY2UoMCkgfTtcbn1cbiJdfQ==\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffChars = diffChars;\nexports.characterDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\nvar characterDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n]();\n\n/*istanbul ignore start*/\nexports.characterDiff = characterDiff;\n\n/*istanbul ignore end*/\nfunction diffChars(oldStr, newStr, options) {\n  return characterDiff.diff(oldStr, newStr, options);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2NoYXJhY3Rlci5qcyJdLCJuYW1lcyI6WyJjaGFyYWN0ZXJEaWZmIiwiRGlmZiIsImRpZmZDaGFycyIsIm9sZFN0ciIsIm5ld1N0ciIsIm9wdGlvbnMiLCJkaWZmIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFFTyxJQUFNQSxhQUFhLEdBQUc7QUFBSUM7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUEsQ0FBSixFQUF0Qjs7Ozs7O0FBQ0EsU0FBU0MsU0FBVCxDQUFtQkMsTUFBbkIsRUFBMkJDLE1BQTNCLEVBQW1DQyxPQUFuQyxFQUE0QztBQUFFLFNBQU9MLGFBQWEsQ0FBQ00sSUFBZCxDQUFtQkgsTUFBbkIsRUFBMkJDLE1BQTNCLEVBQW1DQyxPQUFuQyxDQUFQO0FBQXFEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGNvbnN0IGNoYXJhY3RlckRpZmYgPSBuZXcgRGlmZigpO1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZDaGFycyhvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucykgeyByZXR1cm4gY2hhcmFjdGVyRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTsgfVxuIl19\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffCss = diffCss;\nexports.cssDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\nvar cssDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n]();\n\n/*istanbul ignore start*/\nexports.cssDiff = cssDiff;\n\n/*istanbul ignore end*/\ncssDiff.tokenize = function (value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\n\nfunction diffCss(oldStr, newStr, callback) {\n  return cssDiff.diff(oldStr, newStr, callback);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2Nzcy5qcyJdLCJuYW1lcyI6WyJjc3NEaWZmIiwiRGlmZiIsInRva2VuaXplIiwidmFsdWUiLCJzcGxpdCIsImRpZmZDc3MiLCJvbGRTdHIiLCJuZXdTdHIiLCJjYWxsYmFjayIsImRpZmYiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBQUVPLElBQU1BLE9BQU8sR0FBRztBQUFJQztBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQSxDQUFKLEVBQWhCOzs7Ozs7QUFDUEQsT0FBTyxDQUFDRSxRQUFSLEdBQW1CLFVBQVNDLEtBQVQsRUFBZ0I7QUFDakMsU0FBT0EsS0FBSyxDQUFDQyxLQUFOLENBQVksZUFBWixDQUFQO0FBQ0QsQ0FGRDs7QUFJTyxTQUFTQyxPQUFULENBQWlCQyxNQUFqQixFQUF5QkMsTUFBekIsRUFBaUNDLFFBQWpDLEVBQTJDO0FBQUUsU0FBT1IsT0FBTyxDQUFDUyxJQUFSLENBQWFILE1BQWIsRUFBcUJDLE1BQXJCLEVBQTZCQyxRQUE3QixDQUFQO0FBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGNvbnN0IGNzc0RpZmYgPSBuZXcgRGlmZigpO1xuY3NzRGlmZi50b2tlbml6ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5zcGxpdCgvKFt7fTo7LF18XFxzKykvKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmQ3NzKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjaykgeyByZXR1cm4gY3NzRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjayk7IH1cbiJdfQ==\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffJson = diffJson;\nexports.canonicalize = canonicalize;\nexports.jsonDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_line = require(\"./line\")\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*istanbul ignore end*/\nvar objectPrototypeToString = Object.prototype.toString;\nvar jsonDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n](); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\n/*istanbul ignore start*/\nexports.jsonDiff = jsonDiff;\n\n/*istanbul ignore end*/\njsonDiff.useLongestToken = true;\njsonDiff.tokenize =\n/*istanbul ignore start*/\n_line\n/*istanbul ignore end*/\n.\n/*istanbul ignore start*/\nlineDiff\n/*istanbul ignore end*/\n.tokenize;\n\njsonDiff.castInput = function (value) {\n  /*istanbul ignore start*/\n  var _this$options =\n  /*istanbul ignore end*/\n  this.options,\n      undefinedReplacement = _this$options.undefinedReplacement,\n      _this$options$stringi = _this$options.stringifyReplacer,\n      stringifyReplacer = _this$options$stringi === void 0 ? function (k, v)\n  /*istanbul ignore start*/\n  {\n    return (\n      /*istanbul ignore end*/\n      typeof v === 'undefined' ? undefinedReplacement : v\n    );\n  } : _this$options$stringi;\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\n\njsonDiff.equals = function (left, right) {\n  return (\n    /*istanbul ignore start*/\n    _base\n    /*istanbul ignore end*/\n    [\n    /*istanbul ignore start*/\n    \"default\"\n    /*istanbul ignore end*/\n    ].prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'))\n  );\n};\n\nfunction diffJson(oldObj, newObj, options) {\n  return jsonDiff.diff(oldObj, newObj, options);\n} // This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\n\nfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n\n  var i;\n\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n\n  var canonicalizedObj;\n\n  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n\n  if (\n  /*istanbul ignore start*/\n  _typeof(\n  /*istanbul ignore end*/\n  obj) === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n\n    var sortedKeys = [],\n        _key;\n\n    for (_key in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(_key)) {\n        sortedKeys.push(_key);\n      }\n    }\n\n    sortedKeys.sort();\n\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      _key = sortedKeys[i];\n      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n\n  return canonicalizedObj;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2pzb24uanMiXSwibmFtZXMiOlsib2JqZWN0UHJvdG90eXBlVG9TdHJpbmciLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImpzb25EaWZmIiwiRGlmZiIsInVzZUxvbmdlc3RUb2tlbiIsInRva2VuaXplIiwibGluZURpZmYiLCJjYXN0SW5wdXQiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJ1bmRlZmluZWRSZXBsYWNlbWVudCIsInN0cmluZ2lmeVJlcGxhY2VyIiwiayIsInYiLCJKU09OIiwic3RyaW5naWZ5IiwiY2Fub25pY2FsaXplIiwiZXF1YWxzIiwibGVmdCIsInJpZ2h0IiwiY2FsbCIsInJlcGxhY2UiLCJkaWZmSnNvbiIsIm9sZE9iaiIsIm5ld09iaiIsImRpZmYiLCJvYmoiLCJzdGFjayIsInJlcGxhY2VtZW50U3RhY2siLCJyZXBsYWNlciIsImtleSIsImkiLCJsZW5ndGgiLCJjYW5vbmljYWxpemVkT2JqIiwicHVzaCIsIkFycmF5IiwicG9wIiwidG9KU09OIiwic29ydGVkS2V5cyIsImhhc093blByb3BlcnR5Iiwic29ydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7QUFFQSxJQUFNQSx1QkFBdUIsR0FBR0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxRQUFqRDtBQUdPLElBQU1DLFFBQVEsR0FBRztBQUFJQztBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQTtBQUFBQSxDQUFKLEVBQWpCLEMsQ0FDUDtBQUNBOzs7Ozs7QUFDQUQsUUFBUSxDQUFDRSxlQUFULEdBQTJCLElBQTNCO0FBRUFGLFFBQVEsQ0FBQ0csUUFBVDtBQUFvQkM7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQTtBQUFBLENBQVNELFFBQTdCOztBQUNBSCxRQUFRLENBQUNLLFNBQVQsR0FBcUIsVUFBU0MsS0FB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Z0IsR0FBR1AsR0FBbkI7QUFDRDs7QUFDRCxTQUFPTyxnQkFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7bGluZURpZmZ9IGZyb20gJy4vbGluZSc7XG5cbmNvbnN0IG9iamVjdFByb3RvdHlwZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuXG5leHBvcnQgY29uc3QganNvbkRpZmYgPSBuZXcgRGlmZigpO1xuLy8gRGlzY3JpbWluYXRlIGJldHdlZW4gdHdvIGxpbmVzIG9mIHByZXR0eS1wcmludGVkLCBzZXJpYWxpemVkIEpTT04gd2hlcmUgb25lIG9mIHRoZW0gaGFzIGFcbi8vIGRhbmdsaW5nIGNvbW1hIGFuZCB0aGUgb3RoZXIgZG9lc24ndC4gVHVybnMgb3V0IGluY2x1ZGluZyB0aGUgZGFuZ2xpbmcgY29tbWEgeWllbGRzIHRoZSBuaWNlc3Qgb3V0cHV0OlxuanNvbkRpZmYudXNlTG9uZ2VzdFRva2VuID0gdHJ1ZTtcblxuanNvbkRpZmYudG9rZW5pemUgPSBsaW5lRGlmZi50b2tlbml6ZTtcbmpzb25EaWZmLmNhc3RJbnB1dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGNvbnN0IHt1bmRlZmluZWRSZXBsYWNlbWVudCwgc3RyaW5naWZ5UmVwbGFjZXIgPSAoaywgdikgPT4gdHlwZW9mIHYgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkUmVwbGFjZW1lbnQgOiB2fSA9IHRoaXMub3B0aW9ucztcblxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkoY2Fub25pY2FsaXplKHZhbHVlLCBudWxsLCBudWxsLCBzdHJpbmdpZnlSZXBsYWNlciksIHN0cmluZ2lmeVJlcGxhY2VyLCAnICAnKTtcbn07XG5qc29uRGlmZi5lcXVhbHMgPSBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICByZXR1cm4gRGlmZi5wcm90b3R5cGUuZXF1YWxzLmNhbGwoanNvbkRpZmYsIGxlZnQucmVwbGFjZSgvLChbXFxyXFxuXSkvZywgJyQxJyksIHJpZ2h0LnJlcGxhY2UoLywoW1xcclxcbl0pL2csICckMScpKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmSnNvbihvbGRPYmosIG5ld09iaiwgb3B0aW9ucykgeyByZXR1cm4ganNvbkRpZmYuZGlmZihvbGRPYmosIG5ld09iaiwgb3B0aW9ucyk7IH1cblxuLy8gVGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBwcmVzZW5jZSBvZiBjaXJjdWxhciByZWZlcmVuY2VzIGJ5IGJhaWxpbmcgb3V0IHdoZW4gZW5jb3VudGVyaW5nIGFuXG4vLyBvYmplY3QgdGhhdCBpcyBhbHJlYWR5IG9uIHRoZSBcInN0YWNrXCIgb2YgaXRlbXMgYmVpbmcgcHJvY2Vzc2VkLiBBY2NlcHRzIGFuIG9wdGlvbmFsIHJlcGxhY2VyXG5leHBvcnQgZnVuY3Rpb24gY2Fub25pY2FsaXplKG9iaiwgc3RhY2ssIHJlcGxhY2VtZW50U3RhY2ssIHJlcGxhY2VyLCBrZXkpIHtcbiAgc3RhY2sgPSBzdGFjayB8fCBbXTtcbiAgcmVwbGFjZW1lbnRTdGFjayA9IHJlcGxhY2VtZW50U3RhY2sgfHwgW107XG5cbiAgaWYgKHJlcGxhY2VyKSB7XG4gICAgb2JqID0gcmVwbGFjZXIoa2V5LCBvYmopO1xuICB9XG5cbiAgbGV0IGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHN0YWNrW2ldID09PSBvYmopIHtcbiAgICAgIHJldHVybiByZXBsYWNlbWVudFN0YWNrW2ldO1xuICAgIH1cbiAgfVxuXG4gIGxldCBjYW5vbmljYWxpemVkT2JqO1xuXG4gIGlmICgnW29iamVjdCBBcnJheV0nID09PSBvYmplY3RQcm90b3R5cGVUb1N0cmluZy5jYWxsKG9iaikpIHtcbiAgICBzdGFjay5wdXNoKG9iaik7XG4gICAgY2Fub25pY2FsaXplZE9iaiA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcbiAgICByZXBsYWNlbWVudFN0YWNrLnB1c2goY2Fub25pY2FsaXplZE9iaik7XG4gICAgZm9yIChpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY2Fub25pY2FsaXplZE9ialtpXSA9IGNhbm9uaWNhbGl6ZShvYmpbaV0sIHN0YWNrLCByZXBsYWNlbWVudFN0YWNrLCByZXBsYWNlciwga2V5KTtcbiAgICB9XG4gICAgc3RhY2sucG9wKCk7XG4gICAgcmVwbGFjZW1lbnRTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gY2Fub25pY2FsaXplZE9iajtcbiAgfVxuXG4gIGlmIChvYmogJiYgb2JqLnRvSlNPTikge1xuICAgIG9iaiA9IG9iai50b0pTT04oKTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpIHtcbiAgICBzdGFjay5wdXNoKG9iaik7XG4gICAgY2Fub25pY2FsaXplZE9iaiA9IHt9O1xuICAgIHJlcGxhY2VtZW50U3RhY2sucHVzaChjYW5vbmljYWxpemVkT2JqKTtcbiAgICBsZXQgc29ydGVkS2V5cyA9IFtdLFxuICAgICAgICBrZXk7XG4gICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHNvcnRlZEtleXMucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3J0ZWRLZXlzLnNvcnQoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc29ydGVkS2V5cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAga2V5ID0gc29ydGVkS2V5c1tpXTtcbiAgICAgIGNhbm9uaWNhbGl6ZWRPYmpba2V5XSA9IGNhbm9uaWNhbGl6ZShvYmpba2V5XSwgc3RhY2ssIHJlcGxhY2VtZW50U3RhY2ssIHJlcGxhY2VyLCBrZXkpO1xuICAgIH1cbiAgICBzdGFjay5wb3AoKTtcbiAgICByZXBsYWNlbWVudFN0YWNrLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIGNhbm9uaWNhbGl6ZWRPYmogPSBvYmo7XG4gIH1cbiAgcmV0dXJuIGNhbm9uaWNhbGl6ZWRPYmo7XG59XG4iXX0=\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffLines = diffLines;\nexports.diffTrimmedLines = diffTrimmedLines;\nexports.lineDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_params = require(\"../util/params\")\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\nvar lineDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n]();\n\n/*istanbul ignore start*/\nexports.lineDiff = lineDiff;\n\n/*istanbul ignore end*/\nlineDiff.tokenize = function (value) {\n  var retLines = [],\n      linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  } // Merge the content and line separators into single tokens\n\n\n  for (var i = 0; i < linesAndNewlines.length; i++) {\n    var line = linesAndNewlines[i];\n\n    if (i % 2 && !this.options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      if (this.options.ignoreWhitespace) {\n        line = line.trim();\n      }\n\n      retLines.push(line);\n    }\n  }\n\n  return retLines;\n};\n\nfunction diffLines(oldStr, newStr, callback) {\n  return lineDiff.diff(oldStr, newStr, callback);\n}\n\nfunction diffTrimmedLines(oldStr, newStr, callback) {\n  var options =\n  /*istanbul ignore start*/\n  (0,\n  /*istanbul ignore end*/\n\n  /*istanbul ignore start*/\n  _params\n  /*istanbul ignore end*/\n  .\n  /*istanbul ignore start*/\n  generateOptions)\n  /*istanbul ignore end*/\n  (callback, {\n    ignoreWhitespace: true\n  });\n  return lineDiff.diff(oldStr, newStr, options);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL2xpbmUuanMiXSwibmFtZXMiOlsibGluZURpZmYiLCJEaWZmIiwidG9rZW5pemUiLCJ2YWx1ZSIsInJldExpbmVzIiwibGluZXNBbmROZXdsaW5lcyIsInNwbGl0IiwibGVuZ3RoIiwicG9wIiwiaSIsImxpbmUiLCJvcHRpb25zIiwibmV3bGluZUlzVG9rZW4iLCJpZ25vcmVXaGl0ZXNwYWNlIiwidHJpbSIsInB1c2giLCJkaWZmTGluZXMiLCJvbGRTdHIiLCJuZXdTdHIiLCJjYWxsYmFjayIsImRpZmYiLCJkaWZmVHJpbW1lZExpbmVzIiwiZ2VuZXJhdGVPcHRpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFFTyxJQUFNQSxRQUFRLEdBQUc7QUFBSUM7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUEsQ0FBSixFQUFqQjs7Ozs7O0FBQ1BELFFBQVEsQ0FBQ0UsUUFBVCxHQUFvQixVQUFTQyxLQUFULEVBQWdCO0FBQ2xDLE1BQUlDLFFBQVEsR0FBRyxFQUFmO0FBQUEsTUFDSUMsZ0JBQWdCLEdBQUdGLEtBQUssQ0FBQ0csS0FBTixDQUFZLFdBQVosQ0FEdkIsQ0FEa0MsQ0FJbEM7O0FBQ0EsTUFBSSxDQUFDRCxnQkFBZ0IsQ0FBQ0EsZ0JBQWdCLENBQUNFLE1BQWpCLEdBQTBCLENBQTNCLENBQXJCLEVBQW9EO0FBQ2xERixJQUFBQSxnQkFBZ0IsQ0FBQ0csR0FBakI7QUFDRCxHQVBpQyxDQVNsQzs7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSixnQkFBZ0IsQ0FBQ0UsTUFBckMsRUFBNkNFLENBQUMsRUFBOUMsRUFBa0Q7QUFDaEQsUUFBSUMsSUFBSSxHQUFHTCxnQkFBZ0IsQ0FBQ0ksQ0FBRCxDQUEzQjs7QUFFQSxRQUFJQSxDQUFDLEdBQUcsQ0FBSixJQUFTLENBQUMsS0FBS0UsT0FBTCxDQUFhQyxjQUEzQixFQUEyQztBQUN6Q1IsTUFBQUEsUUFBUSxDQUFDQSxRQUFRLENBQUNHLE1BQVQsR0FBa0IsQ0FBbkIsQ0FBUixJQUFpQ0csSUFBakM7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJLEtBQUtDLE9BQUwsQ0FBYUUsZ0JBQWpCLEVBQW1DO0FBQ2pDSCxRQUFBQSxJQUFJLEdBQUdBLElBQUksQ0FBQ0ksSUFBTCxFQUFQO0FBQ0Q7O0FBQ0RWLE1BQUFBLFFBQVEsQ0FBQ1csSUFBVCxDQUFjTCxJQUFkO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPTixRQUFQO0FBQ0QsQ0F4QkQ7O0FBMEJPLFNBQVNZLFNBQVQsQ0FBbUJDLE1BQW5CLEVBQTJCQyxNQUEzQixFQUFtQ0MsUUFBbkMsRUFBNkM7QUFBRSxTQUFPbkIsUUFBUSxDQUFDb0IsSUFBVCxDQUFjSCxNQUFkLEVBQXNCQyxNQUF0QixFQUE4QkMsUUFBOUIsQ0FBUDtBQUFpRDs7QUFDaEcsU0FBU0UsZ0JBQVQsQ0FBMEJKLE1BQTFCLEVBQWtDQyxNQUFsQyxFQUEwQ0MsUUFBMUMsRUFBb0Q7QUFDekQsTUFBSVIsT0FBTztBQUFHO0FBQUE7QUFBQTs7QUFBQVc7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQTtBQUFBLEdBQWdCSCxRQUFoQixFQUEwQjtBQUFDTixJQUFBQSxnQkFBZ0IsRUFBRTtBQUFuQixHQUExQixDQUFkO0FBQ0EsU0FBT2IsUUFBUSxDQUFDb0IsSUFBVCxDQUFjSCxNQUFkLEVBQXNCQyxNQUF0QixFQUE4QlAsT0FBOUIsQ0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7Z2VuZXJhdGVPcHRpb25zfSBmcm9tICcuLi91dGlsL3BhcmFtcyc7XG5cbmV4cG9ydCBjb25zdCBsaW5lRGlmZiA9IG5ldyBEaWZmKCk7XG5saW5lRGlmZi50b2tlbml6ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGxldCByZXRMaW5lcyA9IFtdLFxuICAgICAgbGluZXNBbmROZXdsaW5lcyA9IHZhbHVlLnNwbGl0KC8oXFxufFxcclxcbikvKTtcblxuICAvLyBJZ25vcmUgdGhlIGZpbmFsIGVtcHR5IHRva2VuIHRoYXQgb2NjdXJzIGlmIHRoZSBzdHJpbmcgZW5kcyB3aXRoIGEgbmV3IGxpbmVcbiAgaWYgKCFsaW5lc0FuZE5ld2xpbmVzW2xpbmVzQW5kTmV3bGluZXMubGVuZ3RoIC0gMV0pIHtcbiAgICBsaW5lc0FuZE5ld2xpbmVzLnBvcCgpO1xuICB9XG5cbiAgLy8gTWVyZ2UgdGhlIGNvbnRlbnQgYW5kIGxpbmUgc2VwYXJhdG9ycyBpbnRvIHNpbmdsZSB0b2tlbnNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lc0FuZE5ld2xpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGxpbmUgPSBsaW5lc0FuZE5ld2xpbmVzW2ldO1xuXG4gICAgaWYgKGkgJSAyICYmICF0aGlzLm9wdGlvbnMubmV3bGluZUlzVG9rZW4pIHtcbiAgICAgIHJldExpbmVzW3JldExpbmVzLmxlbmd0aCAtIDFdICs9IGxpbmU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaWdub3JlV2hpdGVzcGFjZSkge1xuICAgICAgICBsaW5lID0gbGluZS50cmltKCk7XG4gICAgICB9XG4gICAgICByZXRMaW5lcy5wdXNoKGxpbmUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXRMaW5lcztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmTGluZXMob2xkU3RyLCBuZXdTdHIsIGNhbGxiYWNrKSB7IHJldHVybiBsaW5lRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjayk7IH1cbmV4cG9ydCBmdW5jdGlvbiBkaWZmVHJpbW1lZExpbmVzKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjaykge1xuICBsZXQgb3B0aW9ucyA9IGdlbmVyYXRlT3B0aW9ucyhjYWxsYmFjaywge2lnbm9yZVdoaXRlc3BhY2U6IHRydWV9KTtcbiAgcmV0dXJuIGxpbmVEaWZmLmRpZmYob2xkU3RyLCBuZXdTdHIsIG9wdGlvbnMpO1xufVxuIl19\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffSentences = diffSentences;\nexports.sentenceDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\nvar sentenceDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n]();\n\n/*istanbul ignore start*/\nexports.sentenceDiff = sentenceDiff;\n\n/*istanbul ignore end*/\nsentenceDiff.tokenize = function (value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\n\nfunction diffSentences(oldStr, newStr, callback) {\n  return sentenceDiff.diff(oldStr, newStr, callback);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL3NlbnRlbmNlLmpzIl0sIm5hbWVzIjpbInNlbnRlbmNlRGlmZiIsIkRpZmYiLCJ0b2tlbml6ZSIsInZhbHVlIiwic3BsaXQiLCJkaWZmU2VudGVuY2VzIiwib2xkU3RyIiwibmV3U3RyIiwiY2FsbGJhY2siLCJkaWZmIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFHTyxJQUFNQSxZQUFZLEdBQUc7QUFBSUM7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUE7QUFBQUEsQ0FBSixFQUFyQjs7Ozs7O0FBQ1BELFlBQVksQ0FBQ0UsUUFBYixHQUF3QixVQUFTQyxLQUFULEVBQWdCO0FBQ3RDLFNBQU9BLEtBQUssQ0FBQ0MsS0FBTixDQUFZLHVCQUFaLENBQVA7QUFDRCxDQUZEOztBQUlPLFNBQVNDLGFBQVQsQ0FBdUJDLE1BQXZCLEVBQStCQyxNQUEvQixFQUF1Q0MsUUFBdkMsRUFBaUQ7QUFBRSxTQUFPUixZQUFZLENBQUNTLElBQWIsQ0FBa0JILE1BQWxCLEVBQTBCQyxNQUExQixFQUFrQ0MsUUFBbEMsQ0FBUDtBQUFxRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEaWZmIGZyb20gJy4vYmFzZSc7XG5cblxuZXhwb3J0IGNvbnN0IHNlbnRlbmNlRGlmZiA9IG5ldyBEaWZmKCk7XG5zZW50ZW5jZURpZmYudG9rZW5pemUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUuc3BsaXQoLyhcXFMuKz9bLiE/XSkoPz1cXHMrfCQpLyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGlmZlNlbnRlbmNlcyhvbGRTdHIsIG5ld1N0ciwgY2FsbGJhY2spIHsgcmV0dXJuIHNlbnRlbmNlRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBjYWxsYmFjayk7IH1cbiJdfQ==\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffWords = diffWords;\nexports.diffWordsWithSpace = diffWordsWithSpace;\nexports.wordDiff = void 0;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./base\"))\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_params = require(\"../util/params\")\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\n// Based on https://en.wikipedia.org/wiki/Latin_script_in_Unicode\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 0080–00FF\n//  - U+00D7  × Multiplication sign\n//  - U+00F7  ÷ Division sign\n// Latin Extended-A, 0100–017F\n// Latin Extended-B, 0180–024F\n// IPA Extensions, 0250–02AF\n// Spacing Modifier Letters, 02B0–02FF\n//  - U+02C7  ˇ &#711;  Caron\n//  - U+02D8  ˘ &#728;  Breve\n//  - U+02D9  ˙ &#729;  Dot Above\n//  - U+02DA  ˚ &#730;  Ring Above\n//  - U+02DB  ˛ &#731;  Ogonek\n//  - U+02DC  ˜ &#732;  Small Tilde\n//  - U+02DD  ˝ &#733;  Double Acute Accent\n// Latin Extended Additional, 1E00–1EFF\nvar extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\nvar reWhitespace = /\\S/;\nvar wordDiff = new\n/*istanbul ignore start*/\n_base\n/*istanbul ignore end*/\n[\n/*istanbul ignore start*/\n\"default\"\n/*istanbul ignore end*/\n]();\n\n/*istanbul ignore start*/\nexports.wordDiff = wordDiff;\n\n/*istanbul ignore end*/\nwordDiff.equals = function (left, right) {\n  if (this.options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n\n  return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n};\n\nwordDiff.tokenize = function (value) {\n  // All whitespace symbols except newline group into one token, each newline - in separate token\n  var tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n  for (var i = 0; i < tokens.length - 1; i++) {\n    // If we have an empty string in the next field and we have only word chars before and after, merge\n    if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n      tokens[i] += tokens[i + 2];\n      tokens.splice(i + 1, 2);\n      i--;\n    }\n  }\n\n  return tokens;\n};\n\nfunction diffWords(oldStr, newStr, options) {\n  options =\n  /*istanbul ignore start*/\n  (0,\n  /*istanbul ignore end*/\n\n  /*istanbul ignore start*/\n  _params\n  /*istanbul ignore end*/\n  .\n  /*istanbul ignore start*/\n  generateOptions)\n  /*istanbul ignore end*/\n  (options, {\n    ignoreWhitespace: true\n  });\n  return wordDiff.diff(oldStr, newStr, options);\n}\n\nfunction diffWordsWithSpace(oldStr, newStr, options) {\n  return wordDiff.diff(oldStr, newStr, options);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaWZmL3dvcmQuanMiXSwibmFtZXMiOlsiZXh0ZW5kZWRXb3JkQ2hhcnMiLCJyZVdoaXRlc3BhY2UiLCJ3b3JkRGlmZiIsIkRpZmYiLCJlcXVhbHMiLCJsZWZ0IiwicmlnaHQiLCJvcHRpb25zIiwiaWdub3JlQ2FzZSIsInRvTG93ZXJDYXNlIiwiaWdub3JlV2hpdGVzcGFjZSIsInRlc3QiLCJ0b2tlbml6ZSIsInZhbHVlIiwidG9rZW5zIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwic3BsaWNlIiwiZGlmZldvcmRzIiwib2xkU3RyIiwibmV3U3RyIiwiZ2VuZXJhdGVPcHRpb25zIiwiZGlmZiIsImRpZmZXb3Jkc1dpdGhTcGFjZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBTUEsaUJBQWlCLEdBQUcsK0RBQTFCO0FBRUEsSUFBTUMsWUFBWSxHQUFHLElBQXJCO0FBRU8sSUFBTUMsUUFBUSxHQUFHO0FBQUlDO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBLENBQUosRUFBakI7Ozs7OztBQUNQRCxRQUFRLENBQUNFLE1BQVQsR0FBa0IsVUFBU0MsSUFBVCxFQUFlQyxLQUFmLEVBQXNCO0FBQ3RDLE1BQUksS0FBS0MsT0FBTCxDQUFhQyxVQUFqQixFQUE2QjtBQUMzQkgsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNJLFdBQUwsRUFBUDtBQUNBSCxJQUFBQSxLQUFLLEdBQUdBLEtBQUssQ0FBQ0csV0FBTixFQUFSO0FBQ0Q7O0FBQ0QsU0FBT0osSUFBSSxLQUFLQyxLQUFULElBQW1CLEtBQUtDLE9BQUwsQ0FBYUcsZ0JBQWIsSUFBaUMsQ0FBQ1QsWUFBWSxDQUFDVSxJQUFiLENBQWtCTixJQUFsQixDQUFsQyxJQUE2RCxDQUFDSixZQUFZLENBQUNVLElBQWIsQ0FBa0JMLEtBQWxCLENBQXhGO0FBQ0QsQ0FORDs7QUFPQUosUUFBUSxDQUFDVSxRQUFULEdBQW9CLFVBQVNDLEtBQVQsRUFBZ0I7QUFDbEM7QUFDQSxNQUFJQyxNQUFNLEdBQUdELEtBQUssQ0FBQ0UsS0FBTixDQUFZLGlDQUFaLENBQWIsQ0FGa0MsQ0FJbEM7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixNQUFNLENBQUNHLE1BQVAsR0FBZ0IsQ0FBcEMsRUFBdUNELENBQUMsRUFBeEMsRUFBNEM7QUFDMUM7QUFDQSxRQUFJLENBQUNGLE1BQU0sQ0FBQ0UsQ0FBQyxHQUFHLENBQUwsQ0FBUCxJQUFrQkYsTUFBTSxDQUFDRSxDQUFDLEdBQUcsQ0FBTCxDQUF4QixJQUNLaEIsaUJBQWlCLENBQUNXLElBQWxCLENBQXVCRyxNQUFNLENBQUNFLENBQUQsQ0FBN0IsQ0FETCxJQUVLaEIsaUJBQWlCLENBQUNXLElBQWxCLENBQXVCRyxNQUFNLENBQUNFLENBQUMsR0FBRyxDQUFMLENBQTdCLENBRlQsRUFFZ0Q7QUFDOUNGLE1BQUFBLE1BQU0sQ0FBQ0UsQ0FBRCxDQUFOLElBQWFGLE1BQU0sQ0FBQ0UsQ0FBQyxHQUFHLENBQUwsQ0FBbkI7QUFDQUYsTUFBQUEsTUFBTSxDQUFDSSxNQUFQLENBQWNGLENBQUMsR0FBRyxDQUFsQixFQUFxQixDQUFyQjtBQUNBQSxNQUFBQSxDQUFDO0FBQ0Y7QUFDRjs7QUFFRCxTQUFPRixNQUFQO0FBQ0QsQ0FqQkQ7O0FBbUJPLFNBQVNLLFNBQVQsQ0FBbUJDLE1BQW5CLEVBQTJCQyxNQUEzQixFQUFtQ2QsT0FBbkMsRUFBNEM7QUFDakRBLEVBQUFBLE9BQU87QUFBRztBQUFBO0FBQUE7O0FBQUFlO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUE7QUFBQSxHQUFnQmYsT0FBaEIsRUFBeUI7QUFBQ0csSUFBQUEsZ0JBQWdCLEVBQUU7QUFBbkIsR0FBekIsQ0FBVjtBQUNBLFNBQU9SLFFBQVEsQ0FBQ3FCLElBQVQsQ0FBY0gsTUFBZCxFQUFzQkMsTUFBdEIsRUFBOEJkLE9BQTlCLENBQVA7QUFDRDs7QUFFTSxTQUFTaUIsa0JBQVQsQ0FBNEJKLE1BQTVCLEVBQW9DQyxNQUFwQyxFQUE0Q2QsT0FBNUMsRUFBcUQ7QUFDMUQsU0FBT0wsUUFBUSxDQUFDcUIsSUFBVCxDQUFjSCxNQUFkLEVBQXNCQyxNQUF0QixFQUE4QmQsT0FBOUIsQ0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpZmYgZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7Z2VuZXJhdGVPcHRpb25zfSBmcm9tICcuLi91dGlsL3BhcmFtcyc7XG5cbi8vIEJhc2VkIG9uIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xhdGluX3NjcmlwdF9pbl9Vbmljb2RlXG4vL1xuLy8gUmFuZ2VzIGFuZCBleGNlcHRpb25zOlxuLy8gTGF0aW4tMSBTdXBwbGVtZW50LCAwMDgw4oCTMDBGRlxuLy8gIC0gVSswMEQ3ICDDlyBNdWx0aXBsaWNhdGlvbiBzaWduXG4vLyAgLSBVKzAwRjcgIMO3IERpdmlzaW9uIHNpZ25cbi8vIExhdGluIEV4dGVuZGVkLUEsIDAxMDDigJMwMTdGXG4vLyBMYXRpbiBFeHRlbmRlZC1CLCAwMTgw4oCTMDI0RlxuLy8gSVBBIEV4dGVuc2lvbnMsIDAyNTDigJMwMkFGXG4vLyBTcGFjaW5nIE1vZGlmaWVyIExldHRlcnMsIDAyQjDigJMwMkZGXG4vLyAgLSBVKzAyQzcgIMuHICYjNzExOyAgQ2Fyb25cbi8vICAtIFUrMDJEOCAgy5ggJiM3Mjg7ICBCcmV2ZVxuLy8gIC0gVSswMkQ5ICDLmSAmIzcyOTsgIERvdCBBYm92ZVxuLy8gIC0gVSswMkRBICDLmiAmIzczMDsgIFJpbmcgQWJvdmVcbi8vICAtIFUrMDJEQiAgy5sgJiM3MzE7ICBPZ29uZWtcbi8vICAtIFUrMDJEQyAgy5wgJiM3MzI7ICBTbWFsbCBUaWxkZVxuLy8gIC0gVSswMkREICDLnSAmIzczMzsgIERvdWJsZSBBY3V0ZSBBY2NlbnRcbi8vIExhdGluIEV4dGVuZGVkIEFkZGl0aW9uYWwsIDFFMDDigJMxRUZGXG5jb25zdCBleHRlbmRlZFdvcmRDaGFycyA9IC9eW2EtekEtWlxcdXtDMH0tXFx1e0ZGfVxcdXtEOH0tXFx1e0Y2fVxcdXtGOH0tXFx1ezJDNn1cXHV7MkM4fS1cXHV7MkQ3fVxcdXsyREV9LVxcdXsyRkZ9XFx1ezFFMDB9LVxcdXsxRUZGfV0rJC91O1xuXG5jb25zdCByZVdoaXRlc3BhY2UgPSAvXFxTLztcblxuZXhwb3J0IGNvbnN0IHdvcmREaWZmID0gbmV3IERpZmYoKTtcbndvcmREaWZmLmVxdWFscyA9IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gIGlmICh0aGlzLm9wdGlvbnMuaWdub3JlQ2FzZSkge1xuICAgIGxlZnQgPSBsZWZ0LnRvTG93ZXJDYXNlKCk7XG4gICAgcmlnaHQgPSByaWdodC50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIHJldHVybiBsZWZ0ID09PSByaWdodCB8fCAodGhpcy5vcHRpb25zLmlnbm9yZVdoaXRlc3BhY2UgJiYgIXJlV2hpdGVzcGFjZS50ZXN0KGxlZnQpICYmICFyZVdoaXRlc3BhY2UudGVzdChyaWdodCkpO1xufTtcbndvcmREaWZmLnRva2VuaXplID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gQWxsIHdoaXRlc3BhY2Ugc3ltYm9scyBleGNlcHQgbmV3bGluZSBncm91cCBpbnRvIG9uZSB0b2tlbiwgZWFjaCBuZXdsaW5lIC0gaW4gc2VwYXJhdGUgdG9rZW5cbiAgbGV0IHRva2VucyA9IHZhbHVlLnNwbGl0KC8oW15cXFNcXHJcXG5dK3xbKClbXFxde30nXCJcXHJcXG5dfFxcYikvKTtcblxuICAvLyBKb2luIHRoZSBib3VuZGFyeSBzcGxpdHMgdGhhdCB3ZSBkbyBub3QgY29uc2lkZXIgdG8gYmUgYm91bmRhcmllcy4gVGhpcyBpcyBwcmltYXJpbHkgdGhlIGV4dGVuZGVkIExhdGluIGNoYXJhY3RlciBzZXQuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIC8vIElmIHdlIGhhdmUgYW4gZW1wdHkgc3RyaW5nIGluIHRoZSBuZXh0IGZpZWxkIGFuZCB3ZSBoYXZlIG9ubHkgd29yZCBjaGFycyBiZWZvcmUgYW5kIGFmdGVyLCBtZXJnZVxuICAgIGlmICghdG9rZW5zW2kgKyAxXSAmJiB0b2tlbnNbaSArIDJdXG4gICAgICAgICAgJiYgZXh0ZW5kZWRXb3JkQ2hhcnMudGVzdCh0b2tlbnNbaV0pXG4gICAgICAgICAgJiYgZXh0ZW5kZWRXb3JkQ2hhcnMudGVzdCh0b2tlbnNbaSArIDJdKSkge1xuICAgICAgdG9rZW5zW2ldICs9IHRva2Vuc1tpICsgMl07XG4gICAgICB0b2tlbnMuc3BsaWNlKGkgKyAxLCAyKTtcbiAgICAgIGktLTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZXb3JkcyhvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucykge1xuICBvcHRpb25zID0gZ2VuZXJhdGVPcHRpb25zKG9wdGlvbnMsIHtpZ25vcmVXaGl0ZXNwYWNlOiB0cnVlfSk7XG4gIHJldHVybiB3b3JkRGlmZi5kaWZmKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZXb3Jkc1dpdGhTcGFjZShvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucykge1xuICByZXR1cm4gd29yZERpZmYuZGlmZihvbGRTdHIsIG5ld1N0ciwgb3B0aW9ucyk7XG59XG4iXX0=\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Diff\", {\n  enumerable: true,\n  get: function get() {\n    return _base[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"diffChars\", {\n  enumerable: true,\n  get: function get() {\n    return _character.diffChars;\n  }\n});\nObject.defineProperty(exports, \"diffWords\", {\n  enumerable: true,\n  get: function get() {\n    return _word.diffWords;\n  }\n});\nObject.defineProperty(exports, \"diffWordsWithSpace\", {\n  enumerable: true,\n  get: function get() {\n    return _word.diffWordsWithSpace;\n  }\n});\nObject.defineProperty(exports, \"diffLines\", {\n  enumerable: true,\n  get: function get() {\n    return _line.diffLines;\n  }\n});\nObject.defineProperty(exports, \"diffTrimmedLines\", {\n  enumerable: true,\n  get: function get() {\n    return _line.diffTrimmedLines;\n  }\n});\nObject.defineProperty(exports, \"diffSentences\", {\n  enumerable: true,\n  get: function get() {\n    return _sentence.diffSentences;\n  }\n});\nObject.defineProperty(exports, \"diffCss\", {\n  enumerable: true,\n  get: function get() {\n    return _css.diffCss;\n  }\n});\nObject.defineProperty(exports, \"diffJson\", {\n  enumerable: true,\n  get: function get() {\n    return _json.diffJson;\n  }\n});\nObject.defineProperty(exports, \"canonicalize\", {\n  enumerable: true,\n  get: function get() {\n    return _json.canonicalize;\n  }\n});\nObject.defineProperty(exports, \"diffArrays\", {\n  enumerable: true,\n  get: function get() {\n    return _array.diffArrays;\n  }\n});\nObject.defineProperty(exports, \"applyPatch\", {\n  enumerable: true,\n  get: function get() {\n    return _apply.applyPatch;\n  }\n});\nObject.defineProperty(exports, \"applyPatches\", {\n  enumerable: true,\n  get: function get() {\n    return _apply.applyPatches;\n  }\n});\nObject.defineProperty(exports, \"parsePatch\", {\n  enumerable: true,\n  get: function get() {\n    return _parse.parsePatch;\n  }\n});\nObject.defineProperty(exports, \"merge\", {\n  enumerable: true,\n  get: function get() {\n    return _merge.merge;\n  }\n});\nObject.defineProperty(exports, \"structuredPatch\", {\n  enumerable: true,\n  get: function get() {\n    return _create.structuredPatch;\n  }\n});\nObject.defineProperty(exports, \"createTwoFilesPatch\", {\n  enumerable: true,\n  get: function get() {\n    return _create.createTwoFilesPatch;\n  }\n});\nObject.defineProperty(exports, \"createPatch\", {\n  enumerable: true,\n  get: function get() {\n    return _create.createPatch;\n  }\n});\nObject.defineProperty(exports, \"convertChangesToDMP\", {\n  enumerable: true,\n  get: function get() {\n    return _dmp.convertChangesToDMP;\n  }\n});\nObject.defineProperty(exports, \"convertChangesToXML\", {\n  enumerable: true,\n  get: function get() {\n    return _xml.convertChangesToXML;\n  }\n});\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_base = _interopRequireDefault(require(\"./diff/base\"))\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_character = require(\"./diff/character\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_word = require(\"./diff/word\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_line = require(\"./diff/line\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_sentence = require(\"./diff/sentence\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_css = require(\"./diff/css\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_json = require(\"./diff/json\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_array = require(\"./diff/array\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_apply = require(\"./patch/apply\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_parse = require(\"./patch/parse\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_merge = require(\"./patch/merge\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_create = require(\"./patch/create\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_dmp = require(\"./convert/dmp\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_xml = require(\"./convert/xml\")\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBTZWUgTElDRU5TRSBmaWxlIGZvciB0ZXJtcyBvZiB1c2UgKi9cblxuLypcbiAqIFRleHQgZGlmZiBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBUaGlzIGxpYnJhcnkgc3VwcG9ydHMgdGhlIGZvbGxvd2luZyBBUElTOlxuICogSnNEaWZmLmRpZmZDaGFyczogQ2hhcmFjdGVyIGJ5IGNoYXJhY3RlciBkaWZmXG4gKiBKc0RpZmYuZGlmZldvcmRzOiBXb3JkIChhcyBkZWZpbmVkIGJ5IFxcYiByZWdleCkgZGlmZiB3aGljaCBpZ25vcmVzIHdoaXRlc3BhY2VcbiAqIEpzRGlmZi5kaWZmTGluZXM6IExpbmUgYmFzZWQgZGlmZlxuICpcbiAqIEpzRGlmZi5kaWZmQ3NzOiBEaWZmIHRhcmdldGVkIGF0IENTUyBjb250ZW50XG4gKlxuICogVGhlc2UgbWV0aG9kcyBhcmUgYmFzZWQgb24gdGhlIGltcGxlbWVudGF0aW9uIHByb3Bvc2VkIGluXG4gKiBcIkFuIE8oTkQpIERpZmZlcmVuY2UgQWxnb3JpdGhtIGFuZCBpdHMgVmFyaWF0aW9uc1wiIChNeWVycywgMTk4NikuXG4gKiBodHRwOi8vY2l0ZXNlZXJ4LmlzdC5wc3UuZWR1L3ZpZXdkb2Mvc3VtbWFyeT9kb2k9MTAuMS4xLjQuNjkyN1xuICovXG5pbXBvcnQgRGlmZiBmcm9tICcuL2RpZmYvYmFzZSc7XG5pbXBvcnQge2RpZmZDaGFyc30gZnJvbSAnLi9kaWZmL2NoYXJhY3Rlcic7XG5pbXBvcnQge2RpZmZXb3JkcywgZGlmZldvcmRzV2l0aFNwYWNlfSBmcm9tICcuL2RpZmYvd29yZCc7XG5pbXBvcnQge2RpZmZMaW5lcywgZGlmZlRyaW1tZWRMaW5lc30gZnJvbSAnLi9kaWZmL2xpbmUnO1xuaW1wb3J0IHtkaWZmU2VudGVuY2VzfSBmcm9tICcuL2RpZmYvc2VudGVuY2UnO1xuXG5pbXBvcnQge2RpZmZDc3N9IGZyb20gJy4vZGlmZi9jc3MnO1xuaW1wb3J0IHtkaWZmSnNvbiwgY2Fub25pY2FsaXplfSBmcm9tICcuL2RpZmYvanNvbic7XG5cbmltcG9ydCB7ZGlmZkFycmF5c30gZnJvbSAnLi9kaWZmL2FycmF5JztcblxuaW1wb3J0IHthcHBseVBhdGNoLCBhcHBseVBhdGNoZXN9IGZyb20gJy4vcGF0Y2gvYXBwbHknO1xuaW1wb3J0IHtwYXJzZVBhdGNofSBmcm9tICcuL3BhdGNoL3BhcnNlJztcbmltcG9ydCB7bWVyZ2V9IGZyb20gJy4vcGF0Y2gvbWVyZ2UnO1xuaW1wb3J0IHtzdHJ1Y3R1cmVkUGF0Y2gsIGNyZWF0ZVR3b0ZpbGVzUGF0Y2gsIGNyZWF0ZVBhdGNofSBmcm9tICcuL3BhdGNoL2NyZWF0ZSc7XG5cbmltcG9ydCB7Y29udmVydENoYW5nZXNUb0RNUH0gZnJvbSAnLi9jb252ZXJ0L2RtcCc7XG5pbXBvcnQge2NvbnZlcnRDaGFuZ2VzVG9YTUx9IGZyb20gJy4vY29udmVydC94bWwnO1xuXG5leHBvcnQge1xuICBEaWZmLFxuXG4gIGRpZmZDaGFycyxcbiAgZGlmZldvcmRzLFxuICBkaWZmV29yZHNXaXRoU3BhY2UsXG4gIGRpZmZMaW5lcyxcbiAgZGlmZlRyaW1tZWRMaW5lcyxcbiAgZGlmZlNlbnRlbmNlcyxcblxuICBkaWZmQ3NzLFxuICBkaWZmSnNvbixcblxuICBkaWZmQXJyYXlzLFxuXG4gIHN0cnVjdHVyZWRQYXRjaCxcbiAgY3JlYXRlVHdvRmlsZXNQYXRjaCxcbiAgY3JlYXRlUGF0Y2gsXG4gIGFwcGx5UGF0Y2gsXG4gIGFwcGx5UGF0Y2hlcyxcbiAgcGFyc2VQYXRjaCxcbiAgbWVyZ2UsXG4gIGNvbnZlcnRDaGFuZ2VzVG9ETVAsXG4gIGNvbnZlcnRDaGFuZ2VzVG9YTUwsXG4gIGNhbm9uaWNhbGl6ZVxufTtcbiJdfQ==\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.applyPatch = applyPatch;\nexports.applyPatches = applyPatches;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_parse = require(\"./parse\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_distanceIterator = _interopRequireDefault(require(\"../util/distance-iterator\"))\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*istanbul ignore end*/\nfunction applyPatch(source, uniDiff) {\n  /*istanbul ignore start*/\n  var\n  /*istanbul ignore end*/\n  options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (typeof uniDiff === 'string') {\n    uniDiff =\n    /*istanbul ignore start*/\n    (0,\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    _parse\n    /*istanbul ignore end*/\n    .\n    /*istanbul ignore start*/\n    parsePatch)\n    /*istanbul ignore end*/\n    (uniDiff);\n  }\n\n  if (Array.isArray(uniDiff)) {\n    if (uniDiff.length > 1) {\n      throw new Error('applyPatch only works with a single input.');\n    }\n\n    uniDiff = uniDiff[0];\n  } // Apply the diff to the input\n\n\n  var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      hunks = uniDiff.hunks,\n      compareLine = options.compareLine || function (lineNumber, line, operation, patchContent)\n  /*istanbul ignore start*/\n  {\n    return (\n      /*istanbul ignore end*/\n      line === patchContent\n    );\n  },\n      errorCount = 0,\n      fuzzFactor = options.fuzzFactor || 0,\n      minLine = 0,\n      offset = 0,\n      removeEOFNL,\n      addEOFNL;\n  /**\n   * Checks if the hunk exactly fits on the provided location\n   */\n\n\n  function hunkFits(hunk, toPos) {\n    for (var j = 0; j < hunk.lines.length; j++) {\n      var line = hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line;\n\n      if (operation === ' ' || operation === '-') {\n        // Context sanity check\n        if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n          errorCount++;\n\n          if (errorCount > fuzzFactor) {\n            return false;\n          }\n        }\n\n        toPos++;\n      }\n    }\n\n    return true;\n  } // Search best fit offsets for each hunk based on the previous ones\n\n\n  for (var i = 0; i < hunks.length; i++) {\n    var hunk = hunks[i],\n        maxLine = lines.length - hunk.oldLines,\n        localOffset = 0,\n        toPos = offset + hunk.oldStart - 1;\n    var iterator =\n    /*istanbul ignore start*/\n    (0,\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    _distanceIterator\n    /*istanbul ignore end*/\n    [\n    /*istanbul ignore start*/\n    \"default\"\n    /*istanbul ignore end*/\n    ])(toPos, minLine, maxLine);\n\n    for (; localOffset !== undefined; localOffset = iterator()) {\n      if (hunkFits(hunk, toPos + localOffset)) {\n        hunk.offset = offset += localOffset;\n        break;\n      }\n    }\n\n    if (localOffset === undefined) {\n      return false;\n    } // Set lower text limit to end of the current hunk, so next ones don't try\n    // to fit over already patched text\n\n\n    minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n  } // Apply patch hunks\n\n\n  var diffOffset = 0;\n\n  for (var _i = 0; _i < hunks.length; _i++) {\n    var _hunk = hunks[_i],\n        _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\n    diffOffset += _hunk.newLines - _hunk.oldLines;\n\n    for (var j = 0; j < _hunk.lines.length; j++) {\n      var line = _hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line,\n          delimiter = _hunk.linedelimiters[j];\n\n      if (operation === ' ') {\n        _toPos++;\n      } else if (operation === '-') {\n        lines.splice(_toPos, 1);\n        delimiters.splice(_toPos, 1);\n        /* istanbul ignore else */\n      } else if (operation === '+') {\n        lines.splice(_toPos, 0, content);\n        delimiters.splice(_toPos, 0, delimiter);\n        _toPos++;\n      } else if (operation === '\\\\') {\n        var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\n        if (previousOperation === '+') {\n          removeEOFNL = true;\n        } else if (previousOperation === '-') {\n          addEOFNL = true;\n        }\n      }\n    }\n  } // Handle EOFNL insertion/removal\n\n\n  if (removeEOFNL) {\n    while (!lines[lines.length - 1]) {\n      lines.pop();\n      delimiters.pop();\n    }\n  } else if (addEOFNL) {\n    lines.push('');\n    delimiters.push('\\n');\n  }\n\n  for (var _k = 0; _k < lines.length - 1; _k++) {\n    lines[_k] = lines[_k] + delimiters[_k];\n  }\n\n  return lines.join('');\n} // Wrapper that supports multiple file patches via callbacks.\n\n\nfunction applyPatches(uniDiff, options) {\n  if (typeof uniDiff === 'string') {\n    uniDiff =\n    /*istanbul ignore start*/\n    (0,\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    _parse\n    /*istanbul ignore end*/\n    .\n    /*istanbul ignore start*/\n    parsePatch)\n    /*istanbul ignore end*/\n    (uniDiff);\n  }\n\n  var currentIndex = 0;\n\n  function processIndex() {\n    var index = uniDiff[currentIndex++];\n\n    if (!index) {\n      return options.complete();\n    }\n\n    options.loadFile(index, function (err, data) {\n      if (err) {\n        return options.complete(err);\n      }\n\n      var updatedContent = applyPatch(data, index, options);\n      options.patched(index, updatedContent, function (err) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        processIndex();\n      });\n    });\n  }\n\n  processIndex();\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9hcHBseS5qcyJdLCJuYW1lcyI6WyJhcHBseVBhdGNoIiwic291cmNlIiwidW5pRGlmZiIsIm9wdGlvbnMiLCJwYXJzZVBhdGNoIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiRXJyb3IiLCJsaW5lcyIsInNwbGl0IiwiZGVsaW1pdGVycyIsIm1hdGNoIiwiaHVua3MiLCJjb21wYXJlTGluZSIsImxpbmVOdW1iZXIiLCJsaW5lIiwib3BlcmF0aW9uIiwicGF0Y2hDb250ZW50IiwiZXJyb3JDb3VudCIsImZ1enpGYWN0b3IiLCJtaW5MaW5lIiwib2Zmc2V0IiwicmVtb3ZlRU9GTkwiLCJhZGRFT0ZOTCIsImh1bmtGaXRzIiwiaHVuayIsInRvUG9zIiwiaiIsImNvbnRlbnQiLCJzdWJzdHIiLCJpIiwibWF4TGluZSIsIm9sZExpbmVzIiwibG9jYWxPZmZzZXQiLCJvbGRTdGFydCIsIml0ZXJhdG9yIiwiZGlzdGFuY2VJdGVyYXRvciIsInVuZGVmaW5lZCIsImRpZmZPZmZzZXQiLCJuZXdMaW5lcyIsImRlbGltaXRlciIsImxpbmVkZWxpbWl0ZXJzIiwic3BsaWNlIiwicHJldmlvdXNPcGVyYXRpb24iLCJwb3AiLCJwdXNoIiwiX2siLCJqb2luIiwiYXBwbHlQYXRjaGVzIiwiY3VycmVudEluZGV4IiwicHJvY2Vzc0luZGV4IiwiaW5kZXgiLCJjb21wbGV0ZSIsImxvYWRGaWxlIiwiZXJyIiwiZGF0YSIsInVwZGF0ZWRDb250ZW50IiwicGF0Y2hlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFFTyxTQUFTQSxVQUFULENBQW9CQyxNQUFwQixFQUE0QkMsT0FBNUIsRUFBbUQ7QUFBQTtBQUFBO0FBQUE7QUFBZEMsRUFBQUEsT0FBYyx1RUFBSixFQUFJOztBQUN4RCxNQUFJLE9BQU9ELE9BQVAsS0FBbUIsUUFBdkIsRUFBaUM7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QUNEOztBQUVELE1BQUlnRCxZQUFZLEdBQUcsQ0FBbkI7O0FBQ0EsV0FBU0MsWUFBVCxHQUF3QjtBQUN0QixRQUFJQyxLQUFLLEdBQUdsRCxPQUFPLENBQUNnRCxZQUFZLEVBQWIsQ0FBbkI7O0FBQ0EsUUFBSSxDQUFDRSxLQUFMLEVBQVk7QUFDVixhQUFPakQsT0FBTyxDQUFDa0QsUUFBUixFQUFQO0FBQ0Q7O0FBRURsRCxJQUFBQSxPQUFPLENBQUNtRCxRQUFSLENBQWlCRixLQUFqQixFQUF3QixVQUFTRyxHQUFULEVBQWNDLElBQWQsRUFBb0I7QUFDMUMsVUFBSUQsR0FBSixFQUFTO0FBQ1AsZUFBT3BELE9BQU8sQ0FBQ2tELFFBQVIsQ0FBaUJFLEdBQWpCLENBQVA7QUFDRDs7QUFFRCxVQUFJRSxjQUFjLEdBQUd6RCxVQUFVLENBQUN3RCxJQUFELEVBQU9KLEtBQVAsRUFBY2pELE9BQWQsQ0FBL0I7QUFDQUEsTUFBQUEsT0FBTyxDQUFDdUQsT0FBUixDQUFnQk4sS0FBaEIsRUFBdUJLLGNBQXZCLEVBQXVDLFVBQVNGLEdBQVQsRUFBYztBQUNuRCxZQUFJQSxHQUFKLEVBQVM7QUFDUCxpQkFBT3BELE9BQU8sQ0FBQ2tELFFBQVIsQ0FBaUJFLEdBQWpCLENBQVA7QUFDRDs7QUFFREosUUFBQUEsWUFBWTtBQUNiLE9BTkQ7QUFPRCxLQWJEO0FBY0Q7O0FBQ0RBLEVBQUFBLFlBQVk7QUFDYiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cGFyc2VQYXRjaH0gZnJvbSAnLi9wYXJzZSc7XG5pbXBvcnQgZGlzdGFuY2VJdGVyYXRvciBmcm9tICcuLi91dGlsL2Rpc3RhbmNlLWl0ZXJhdG9yJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2goc291cmNlLCB1bmlEaWZmLCBvcHRpb25zID0ge30pIHtcbiAgaWYgKHR5cGVvZiB1bmlEaWZmID09PSAnc3RyaW5nJykge1xuICAgIHVuaURpZmYgPSBwYXJzZVBhdGNoKHVuaURpZmYpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodW5pRGlmZikpIHtcbiAgICBpZiAodW5pRGlmZi5sZW5ndGggPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FwcGx5UGF0Y2ggb25seSB3b3JrcyB3aXRoIGEgc2luZ2xlIGlucHV0LicpO1xuICAgIH1cblxuICAgIHVuaURpZmYgPSB1bmlEaWZmWzBdO1xuICB9XG5cbiAgLy8gQXBwbHkgdGhlIGRpZmYgdG8gdGhlIGlucHV0XG4gIGxldCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvXFxyXFxufFtcXG5cXHZcXGZcXHJcXHg4NV0vKSxcbiAgICAgIGRlbGltaXRlcnMgPSBzb3VyY2UubWF0Y2goL1xcclxcbnxbXFxuXFx2XFxmXFxyXFx4ODVdL2cpIHx8IFtdLFxuICAgICAgaHVua3MgPSB1bmlEaWZmLmh1bmtzLFxuXG4gICAgICBjb21wYXJlTGluZSA9IG9wdGlvbnMuY29tcGFyZUxpbmUgfHwgKChsaW5lTnVtYmVyLCBsaW5lLCBvcGVyYXRpb24sIHBhdGNoQ29udGVudCkgPT4gbGluZSA9PT0gcGF0Y2hDb250ZW50KSxcbiAgICAgIGVycm9yQ291bnQgPSAwLFxuICAgICAgZnV6ekZhY3RvciA9IG9wdGlvbnMuZnV6ekZhY3RvciB8fCAwLFxuICAgICAgbWluTGluZSA9IDAsXG4gICAgICBvZmZzZXQgPSAwLFxuXG4gICAgICByZW1vdmVFT0ZOTCxcbiAgICAgIGFkZEVPRk5MO1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGh1bmsgZXhhY3RseSBmaXRzIG9uIHRoZSBwcm92aWRlZCBsb2NhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gaHVua0ZpdHMoaHVuaywgdG9Qb3MpIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGh1bmsubGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxldCBsaW5lID0gaHVuay5saW5lc1tqXSxcbiAgICAgICAgICBvcGVyYXRpb24gPSAobGluZS5sZW5ndGggPiAwID8gbGluZVswXSA6ICcgJyksXG4gICAgICAgICAgY29udGVudCA9IChsaW5lLmxlbmd0aCA+IDAgPyBsaW5lLnN1YnN0cigxKSA6IGxpbmUpO1xuXG4gICAgICBpZiAob3BlcmF0aW9uID09PSAnICcgfHwgb3BlcmF0aW9uID09PSAnLScpIHtcbiAgICAgICAgLy8gQ29udGV4dCBzYW5pdHkgY2hlY2tcbiAgICAgICAgaWYgKCFjb21wYXJlTGluZSh0b1BvcyArIDEsIGxpbmVzW3RvUG9zXSwgb3BlcmF0aW9uLCBjb250ZW50KSkge1xuICAgICAgICAgIGVycm9yQ291bnQrKztcblxuICAgICAgICAgIGlmIChlcnJvckNvdW50ID4gZnV6ekZhY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0b1BvcysrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gU2VhcmNoIGJlc3QgZml0IG9mZnNldHMgZm9yIGVhY2ggaHVuayBiYXNlZCBvbiB0aGUgcHJldmlvdXMgb25lc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGh1bmsgPSBodW5rc1tpXSxcbiAgICAgICAgbWF4TGluZSA9IGxpbmVzLmxlbmd0aCAtIGh1bmsub2xkTGluZXMsXG4gICAgICAgIGxvY2FsT2Zmc2V0ID0gMCxcbiAgICAgICAgdG9Qb3MgPSBvZmZzZXQgKyBodW5rLm9sZFN0YXJ0IC0gMTtcblxuICAgIGxldCBpdGVyYXRvciA9IGRpc3RhbmNlSXRlcmF0b3IodG9Qb3MsIG1pbkxpbmUsIG1heExpbmUpO1xuXG4gICAgZm9yICg7IGxvY2FsT2Zmc2V0ICE9PSB1bmRlZmluZWQ7IGxvY2FsT2Zmc2V0ID0gaXRlcmF0b3IoKSkge1xuICAgICAgaWYgKGh1bmtGaXRzKGh1bmssIHRvUG9zICsgbG9jYWxPZmZzZXQpKSB7XG4gICAgICAgIGh1bmsub2Zmc2V0ID0gb2Zmc2V0ICs9IGxvY2FsT2Zmc2V0O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobG9jYWxPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFNldCBsb3dlciB0ZXh0IGxpbWl0IHRvIGVuZCBvZiB0aGUgY3VycmVudCBodW5rLCBzbyBuZXh0IG9uZXMgZG9uJ3QgdHJ5XG4gICAgLy8gdG8gZml0IG92ZXIgYWxyZWFkeSBwYXRjaGVkIHRleHRcbiAgICBtaW5MaW5lID0gaHVuay5vZmZzZXQgKyBodW5rLm9sZFN0YXJ0ICsgaHVuay5vbGRMaW5lcztcbiAgfVxuXG4gIC8vIEFwcGx5IHBhdGNoIGh1bmtzXG4gIGxldCBkaWZmT2Zmc2V0ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBodW5rcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBodW5rID0gaHVua3NbaV0sXG4gICAgICAgIHRvUG9zID0gaHVuay5vbGRTdGFydCArIGh1bmsub2Zmc2V0ICsgZGlmZk9mZnNldCAtIDE7XG4gICAgZGlmZk9mZnNldCArPSBodW5rLm5ld0xpbmVzIC0gaHVuay5vbGRMaW5lcztcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgaHVuay5saW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgbGV0IGxpbmUgPSBodW5rLmxpbmVzW2pdLFxuICAgICAgICAgIG9wZXJhdGlvbiA9IChsaW5lLmxlbmd0aCA+IDAgPyBsaW5lWzBdIDogJyAnKSxcbiAgICAgICAgICBjb250ZW50ID0gKGxpbmUubGVuZ3RoID4gMCA/IGxpbmUuc3Vic3RyKDEpIDogbGluZSksXG4gICAgICAgICAgZGVsaW1pdGVyID0gaHVuay5saW5lZGVsaW1pdGVyc1tqXTtcblxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJyAnKSB7XG4gICAgICAgIHRvUG9zKys7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgIGxpbmVzLnNwbGljZSh0b1BvcywgMSk7XG4gICAgICAgIGRlbGltaXRlcnMuc3BsaWNlKHRvUG9zLCAxKTtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJysnKSB7XG4gICAgICAgIGxpbmVzLnNwbGljZSh0b1BvcywgMCwgY29udGVudCk7XG4gICAgICAgIGRlbGltaXRlcnMuc3BsaWNlKHRvUG9zLCAwLCBkZWxpbWl0ZXIpO1xuICAgICAgICB0b1BvcysrO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb24gPT09ICdcXFxcJykge1xuICAgICAgICBsZXQgcHJldmlvdXNPcGVyYXRpb24gPSBodW5rLmxpbmVzW2ogLSAxXSA/IGh1bmsubGluZXNbaiAtIDFdWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKHByZXZpb3VzT3BlcmF0aW9uID09PSAnKycpIHtcbiAgICAgICAgICByZW1vdmVFT0ZOTCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNPcGVyYXRpb24gPT09ICctJykge1xuICAgICAgICAgIGFkZEVPRk5MID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBFT0ZOTCBpbnNlcnRpb24vcmVtb3ZhbFxuICBpZiAocmVtb3ZlRU9GTkwpIHtcbiAgICB3aGlsZSAoIWxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdKSB7XG4gICAgICBsaW5lcy5wb3AoKTtcbiAgICAgIGRlbGltaXRlcnMucG9wKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGFkZEVPRk5MKSB7XG4gICAgbGluZXMucHVzaCgnJyk7XG4gICAgZGVsaW1pdGVycy5wdXNoKCdcXG4nKTtcbiAgfVxuICBmb3IgKGxldCBfayA9IDA7IF9rIDwgbGluZXMubGVuZ3RoIC0gMTsgX2srKykge1xuICAgIGxpbmVzW19rXSA9IGxpbmVzW19rXSArIGRlbGltaXRlcnNbX2tdO1xuICB9XG4gIHJldHVybiBsaW5lcy5qb2luKCcnKTtcbn1cblxuLy8gV3JhcHBlciB0aGF0IHN1cHBvcnRzIG11bHRpcGxlIGZpbGUgcGF0Y2hlcyB2aWEgY2FsbGJhY2tzLlxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2hlcyh1bmlEaWZmLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgdW5pRGlmZiA9PT0gJ3N0cmluZycpIHtcbiAgICB1bmlEaWZmID0gcGFyc2VQYXRjaCh1bmlEaWZmKTtcbiAgfVxuXG4gIGxldCBjdXJyZW50SW5kZXggPSAwO1xuICBmdW5jdGlvbiBwcm9jZXNzSW5kZXgoKSB7XG4gICAgbGV0IGluZGV4ID0gdW5pRGlmZltjdXJyZW50SW5kZXgrK107XG4gICAgaWYgKCFpbmRleCkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuY29tcGxldGUoKTtcbiAgICB9XG5cbiAgICBvcHRpb25zLmxvYWRGaWxlKGluZGV4LCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuY29tcGxldGUoZXJyKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHVwZGF0ZWRDb250ZW50ID0gYXBwbHlQYXRjaChkYXRhLCBpbmRleCwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLnBhdGNoZWQoaW5kZXgsIHVwZGF0ZWRDb250ZW50LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvbXBsZXRlKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9jZXNzSW5kZXgoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHByb2Nlc3NJbmRleCgpO1xufVxuIl19\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.structuredPatch = structuredPatch;\nexports.formatPatch = formatPatch;\nexports.createTwoFilesPatch = createTwoFilesPatch;\nexports.createPatch = createPatch;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_line = require(\"../diff/line\")\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*istanbul ignore end*/\nfunction structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (typeof options.context === 'undefined') {\n    options.context = 4;\n  }\n\n  var diff =\n  /*istanbul ignore start*/\n  (0,\n  /*istanbul ignore end*/\n\n  /*istanbul ignore start*/\n  _line\n  /*istanbul ignore end*/\n  .\n  /*istanbul ignore start*/\n  diffLines)\n  /*istanbul ignore end*/\n  (oldStr, newStr, options);\n\n  if (!diff) {\n    return;\n  }\n\n  diff.push({\n    value: '',\n    lines: []\n  }); // Append an empty value to make cleanup easier\n\n  function contextLines(lines) {\n    return lines.map(function (entry) {\n      return ' ' + entry;\n    });\n  }\n\n  var hunks = [];\n  var oldRangeStart = 0,\n      newRangeStart = 0,\n      curRange = [],\n      oldLine = 1,\n      newLine = 1;\n\n  /*istanbul ignore start*/\n  var _loop = function _loop(\n  /*istanbul ignore end*/\n  i) {\n    var current = diff[i],\n        lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n    current.lines = lines;\n\n    if (current.added || current.removed) {\n      /*istanbul ignore start*/\n      var _curRange;\n\n      /*istanbul ignore end*/\n      // If we have previous context, start with that\n      if (!oldRangeStart) {\n        var prev = diff[i - 1];\n        oldRangeStart = oldLine;\n        newRangeStart = newLine;\n\n        if (prev) {\n          curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n          oldRangeStart -= curRange.length;\n          newRangeStart -= curRange.length;\n        }\n      } // Output our changes\n\n\n      /*istanbul ignore start*/\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n      (_curRange =\n      /*istanbul ignore end*/\n      curRange).push.apply(\n      /*istanbul ignore start*/\n      _curRange\n      /*istanbul ignore end*/\n      ,\n      /*istanbul ignore start*/\n      _toConsumableArray(\n      /*istanbul ignore end*/\n      lines.map(function (entry) {\n        return (current.added ? '+' : '-') + entry;\n      }))); // Track the updated file position\n\n\n      if (current.added) {\n        newLine += lines.length;\n      } else {\n        oldLine += lines.length;\n      }\n    } else {\n      // Identical context lines. Track line changes\n      if (oldRangeStart) {\n        // Close out any changes that have been output (or join overlapping)\n        if (lines.length <= options.context * 2 && i < diff.length - 2) {\n          /*istanbul ignore start*/\n          var _curRange2;\n\n          /*istanbul ignore end*/\n          // Overlapping\n\n          /*istanbul ignore start*/\n\n          /*istanbul ignore end*/\n\n          /*istanbul ignore start*/\n          (_curRange2 =\n          /*istanbul ignore end*/\n          curRange).push.apply(\n          /*istanbul ignore start*/\n          _curRange2\n          /*istanbul ignore end*/\n          ,\n          /*istanbul ignore start*/\n          _toConsumableArray(\n          /*istanbul ignore end*/\n          contextLines(lines)));\n        } else {\n          /*istanbul ignore start*/\n          var _curRange3;\n\n          /*istanbul ignore end*/\n          // end the range and output\n          var contextSize = Math.min(lines.length, options.context);\n\n          /*istanbul ignore start*/\n\n          /*istanbul ignore end*/\n\n          /*istanbul ignore start*/\n          (_curRange3 =\n          /*istanbul ignore end*/\n          curRange).push.apply(\n          /*istanbul ignore start*/\n          _curRange3\n          /*istanbul ignore end*/\n          ,\n          /*istanbul ignore start*/\n          _toConsumableArray(\n          /*istanbul ignore end*/\n          contextLines(lines.slice(0, contextSize))));\n\n          var hunk = {\n            oldStart: oldRangeStart,\n            oldLines: oldLine - oldRangeStart + contextSize,\n            newStart: newRangeStart,\n            newLines: newLine - newRangeStart + contextSize,\n            lines: curRange\n          };\n\n          if (i >= diff.length - 2 && lines.length <= options.context) {\n            // EOF is inside this hunk\n            var oldEOFNewline = /\\n$/.test(oldStr);\n            var newEOFNewline = /\\n$/.test(newStr);\n            var noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n\n            if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n              // special case: old has no eol and no trailing context; no-nl can end up before adds\n              // however, if the old file is empty, do not output the no-nl line\n              curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n            }\n\n            if (!oldEOFNewline && !noNlBeforeAdds || !newEOFNewline) {\n              curRange.push('\\\\ No newline at end of file');\n            }\n          }\n\n          hunks.push(hunk);\n          oldRangeStart = 0;\n          newRangeStart = 0;\n          curRange = [];\n        }\n      }\n\n      oldLine += lines.length;\n      newLine += lines.length;\n    }\n  };\n\n  for (var i = 0; i < diff.length; i++) {\n    /*istanbul ignore start*/\n    _loop(\n    /*istanbul ignore end*/\n    i);\n  }\n\n  return {\n    oldFileName: oldFileName,\n    newFileName: newFileName,\n    oldHeader: oldHeader,\n    newHeader: newHeader,\n    hunks: hunks\n  };\n}\n\nfunction formatPatch(diff) {\n  var ret = [];\n\n  if (diff.oldFileName == diff.newFileName) {\n    ret.push('Index: ' + diff.oldFileName);\n  }\n\n  ret.push('===================================================================');\n  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n  for (var i = 0; i < diff.hunks.length; i++) {\n    var hunk = diff.hunks[i]; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart -= 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart -= 1;\n    }\n\n    ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n    ret.push.apply(ret, hunk.lines);\n  }\n\n  return ret.join('\\n') + '\\n';\n}\n\nfunction createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n}\n\nfunction createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9jcmVhdGUuanMiXSwibmFtZXMiOlsic3RydWN0dXJlZFBhdGNoIiwib2xkRmlsZU5hbWUiLCJuZXdGaWxlTmFtZSIsIm9sZFN0ciIsIm5ld1N0ciIsIm9sZEhlYWRlciIsIm5ld0hlYWRlciIsIm9wdGlvbnMiLCJjb250ZXh0IiwiZGlmZiIsImRpZmZMaW5lcyIsInB1c2giLCJ2YWx1ZSIsImxpbmVzIiwiY29udGV4dExpbmVzIiwibWFwIiwiZW50cnkiLCJodW5rcyIsIm9sZFJhbmdlU3RhcnQiLCJuZXdSYW5nZVN0YXJ0IiwiY3VyUmFuZ2UiLCJvbGRMaW5lIiwibmV3TGluZSIsImkiLCJjdXJyZW50IiwicmVwbGFjZSIsInNwbGl0IiwiYWRkZWQiLCJyZW1vdmVkIiwicHJldiIsInNsaWNlIiwibGVuZ3RoIiwiY29udGV4dFNpemUiLCJNYXRoIiwibWluIiwiaHVuayIsIm9sZFN0YXJ0Iiwib2xkTGluZXMiLCJuZXdTdGFydCIsIm5ld0xpbmVzIiwib2xkRU9GTmV3bGluZSIsInRlc3QiLCJuZXdFT0ZOZXdsaW5lIiwibm9ObEJlZm9yZUFkZHMiLCJzcGxpY2UiLCJmb3JtYXRQYXRjaCIsInJldCIsImFwcGx5Iiwiam9pbiIsImNyZWF0ZVR3b0ZpbGVzUGF0Y2giLCJjcmVhdGVQYXRjaCIsImZpbGVOYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUFFTyxTQUFTQSxlQUFULENBQXlCQyxXQUF6QixFQUFzQ0MsV0FBdEMsRUFBbURDLE1BQW5ELEVBQTJEQyxNQUEzRCxFQUFtRUMsU0FBbkUsRUFBOEVDLFNBQTlFLEVBQXlGQyxPQUF6RixFQUFrRztBQUN2RyxNQUFJLENBQUNBLE9BQUwsRUFBYztBQUNaQSxJQUFBQSxPQUFPLEdBQUcsRUFBVjtBQUNEOztBQUNELE1BQUksT0FBT0EsT0FBTyxDQUFDQyxPQUFmLEtBQTJCLFdBQS9CLEVBQTRDO0FB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IHtkaWZmTGluZXN9IGZyb20gJy4uL2RpZmYvbGluZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJ1Y3R1cmVkUGF0Y2gob2xkRmlsZU5hbWUsIG5ld0ZpbGVOYW1lLCBvbGRTdHIsIG5ld1N0ciwgb2xkSGVhZGVyLCBuZXdIZWFkZXIsIG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAndW5kZWZpbmVkJykge1xuICAgIG9wdGlvbnMuY29udGV4dCA9IDQ7XG4gIH1cblxuICBjb25zdCBkaWZmID0gZGlmZkxpbmVzKG9sZFN0ciwgbmV3U3RyLCBvcHRpb25zKTtcbiAgaWYoIWRpZmYpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkaWZmLnB1c2goe3ZhbHVlOiAnJywgbGluZXM6IFtdfSk7IC8vIEFwcGVuZCBhbiBlbXB0eSB2YWx1ZSB0byBtYWtlIGNsZWFudXAgZWFzaWVyXG5cbiAgZnVuY3Rpb24gY29udGV4dExpbmVzKGxpbmVzKSB7XG4gICAgcmV0dXJuIGxpbmVzLm1hcChmdW5jdGlvbihlbnRyeSkgeyByZXR1cm4gJyAnICsgZW50cnk7IH0pO1xuICB9XG5cbiAgbGV0IGh1bmtzID0gW107XG4gIGxldCBvbGRSYW5nZVN0YXJ0ID0gMCwgbmV3UmFuZ2VTdGFydCA9IDAsIGN1clJhbmdlID0gW10sXG4gICAgICBvbGRMaW5lID0gMSwgbmV3TGluZSA9IDE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBkaWZmW2ldLFxuICAgICAgICAgIGxpbmVzID0gY3VycmVudC5saW5lcyB8fCBjdXJyZW50LnZhbHVlLnJlcGxhY2UoL1xcbiQvLCAnJykuc3BsaXQoJ1xcbicpO1xuICAgIGN1cnJlbnQubGluZXMgPSBsaW5lcztcblxuICAgIGlmIChjdXJyZW50LmFkZGVkIHx8IGN1cnJlbnQucmVtb3ZlZCkge1xuICAgICAgLy8gSWYgd2UgaGF2ZSBwcmV2aW91cyBjb250ZXh0LCBzdGFydCB3aXRoIHRoYXRcbiAgICAgIGlmICghb2xkUmFuZ2VTdGFydCkge1xuICAgICAgICBjb25zdCBwcmV2ID0gZGlmZltpIC0gMV07XG4gICAgICAgIG9sZFJhbmdlU3RhcnQgPSBvbGRMaW5lO1xuICAgICAgICBuZXdSYW5nZVN0YXJ0ID0gbmV3TGluZTtcblxuICAgICAgICBpZiAocHJldikge1xuICAgICAgICAgIGN1clJhbmdlID0gb3B0aW9ucy5jb250ZXh0ID4gMCA/IGNvbnRleHRMaW5lcyhwcmV2LmxpbmVzLnNsaWNlKC1vcHRpb25zLmNvbnRleHQpKSA6IFtdO1xuICAgICAgICAgIG9sZFJhbmdlU3RhcnQgLT0gY3VyUmFuZ2UubGVuZ3RoO1xuICAgICAgICAgIG5ld1JhbmdlU3RhcnQgLT0gY3VyUmFuZ2UubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE91dHB1dCBvdXIgY2hhbmdlc1xuICAgICAgY3VyUmFuZ2UucHVzaCguLi4gbGluZXMubWFwKGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICAgIHJldHVybiAoY3VycmVudC5hZGRlZCA/ICcrJyA6ICctJykgKyBlbnRyeTtcbiAgICAgIH0pKTtcblxuICAgICAgLy8gVHJhY2sgdGhlIHVwZGF0ZWQgZmlsZSBwb3NpdGlvblxuICAgICAgaWYgKGN1cnJlbnQuYWRkZWQpIHtcbiAgICAgICAgbmV3TGluZSArPSBsaW5lcy5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbGRMaW5lICs9IGxpbmVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWRlbnRpY2FsIGNvbnRleHQgbGluZXMuIFRyYWNrIGxpbmUgY2hhbmdlc1xuICAgICAgaWYgKG9sZFJhbmdlU3RhcnQpIHtcbiAgICAgICAgLy8gQ2xvc2Ugb3V0IGFueSBjaGFuZ2VzIHRoYXQgaGF2ZSBiZWVuIG91dHB1dCAob3Igam9pbiBvdmVybGFwcGluZylcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA8PSBvcHRpb25zLmNvbnRleHQgKiAyICYmIGkgPCBkaWZmLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAvLyBPdmVybGFwcGluZ1xuICAgICAgICAgIGN1clJhbmdlLnB1c2goLi4uIGNvbnRleHRMaW5lcyhsaW5lcykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVuZCB0aGUgcmFuZ2UgYW5kIG91dHB1dFxuICAgICAgICAgIGxldCBjb250ZXh0U2l6ZSA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgb3B0aW9ucy5jb250ZXh0KTtcbiAgICAgICAgICBjdXJSYW5nZS5wdXNoKC4uLiBjb250ZXh0TGluZXMobGluZXMuc2xpY2UoMCwgY29udGV4dFNpemUpKSk7XG5cbiAgICAgICAgICBsZXQgaHVuayA9IHtcbiAgICAgICAgICAgIG9sZFN0YXJ0OiBvbGRSYW5nZVN0YXJ0LFxuICAgICAgICAgICAgb2xkTGluZXM6IChvbGRMaW5lIC0gb2xkUmFuZ2VTdGFydCArIGNvbnRleHRTaXplKSxcbiAgICAgICAgICAgIG5ld1N0YXJ0OiBuZXdSYW5nZVN0YXJ0LFxuICAgICAgICAgICAgbmV3TGluZXM6IChuZXdMaW5lIC0gbmV3UmFuZ2VTdGFydCArIGNvbnRleHRTaXplKSxcbiAgICAgICAgICAgIGxpbmVzOiBjdXJSYW5nZVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKGkgPj0gZGlmZi5sZW5ndGggLSAyICYmIGxpbmVzLmxlbmd0aCA8PSBvcHRpb25zLmNvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIEVPRiBpcyBpbnNpZGUgdGhpcyBodW5rXG4gICAgICAgICAgICBsZXQgb2xkRU9GTmV3bGluZSA9ICgoL1xcbiQvKS50ZXN0KG9sZFN0cikpO1xuICAgICAgICAgICAgbGV0IG5ld0VPRk5ld2xpbmUgPSAoKC9cXG4kLykudGVzdChuZXdTdHIpKTtcbiAgICAgICAgICAgIGxldCBub05sQmVmb3JlQWRkcyA9IGxpbmVzLmxlbmd0aCA9PSAwICYmIGN1clJhbmdlLmxlbmd0aCA+IGh1bmsub2xkTGluZXM7XG4gICAgICAgICAgICBpZiAoIW9sZEVPRk5ld2xpbmUgJiYgbm9ObEJlZm9yZUFkZHMgJiYgb2xkU3RyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlOiBvbGQgaGFzIG5vIGVvbCBhbmQgbm8gdHJhaWxpbmcgY29udGV4dDsgbm8tbmwgY2FuIGVuZCB1cCBiZWZvcmUgYWRkc1xuICAgICAgICAgICAgICAvLyBob3dldmVyLCBpZiB0aGUgb2xkIGZpbGUgaXMgZW1wdHksIGRvIG5vdCBvdXRwdXQgdGhlIG5vLW5sIGxpbmVcbiAgICAgICAgICAgICAgY3VyUmFuZ2Uuc3BsaWNlKGh1bmsub2xkTGluZXMsIDAsICdcXFxcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoIW9sZEVPRk5ld2xpbmUgJiYgIW5vTmxCZWZvcmVBZGRzKSB8fCAhbmV3RU9GTmV3bGluZSkge1xuICAgICAgICAgICAgICBjdXJSYW5nZS5wdXNoKCdcXFxcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaHVua3MucHVzaChodW5rKTtcblxuICAgICAgICAgIG9sZFJhbmdlU3RhcnQgPSAwO1xuICAgICAgICAgIG5ld1JhbmdlU3RhcnQgPSAwO1xuICAgICAgICAgIGN1clJhbmdlID0gW107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9sZExpbmUgKz0gbGluZXMubGVuZ3RoO1xuICAgICAgbmV3TGluZSArPSBsaW5lcy5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvbGRGaWxlTmFtZTogb2xkRmlsZU5hbWUsIG5ld0ZpbGVOYW1lOiBuZXdGaWxlTmFtZSxcbiAgICBvbGRIZWFkZXI6IG9sZEhlYWRlciwgbmV3SGVhZGVyOiBuZXdIZWFkZXIsXG4gICAgaHVua3M6IGh1bmtzXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQYXRjaChkaWZmKSB7XG4gIGNvbnN0IHJldCA9IFtdO1xuICBpZiAoZGlmZi5vbGRGaWxlTmFtZSA9PSBkaWZmLm5ld0ZpbGVOYW1lKSB7XG4gICAgcmV0LnB1c2goJ0luZGV4OiAnICsgZGlmZi5vbGRGaWxlTmFtZSk7XG4gIH1cbiAgcmV0LnB1c2goJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgcmV0LnB1c2goJy0tLSAnICsgZGlmZi5vbGRGaWxlTmFtZSArICh0eXBlb2YgZGlmZi5vbGRIZWFkZXIgPT09ICd1bmRlZmluZWQnID8gJycgOiAnXFx0JyArIGRpZmYub2xkSGVhZGVyKSk7XG4gIHJldC5wdXNoKCcrKysgJyArIGRpZmYubmV3RmlsZU5hbWUgKyAodHlwZW9mIGRpZmYubmV3SGVhZGVyID09PSAndW5kZWZpbmVkJyA/ICcnIDogJ1xcdCcgKyBkaWZmLm5ld0hlYWRlcikpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZi5odW5rcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGh1bmsgPSBkaWZmLmh1bmtzW2ldO1xuICAgIC8vIFVuaWZpZWQgRGlmZiBGb3JtYXQgcXVpcms6IElmIHRoZSBjaHVuayBzaXplIGlzIDAsXG4gICAgLy8gdGhlIGZpcnN0IG51bWJlciBpcyBvbmUgbG93ZXIgdGhhbiBvbmUgd291bGQgZXhwZWN0LlxuICAgIC8vIGh0dHBzOi8vd3d3LmFydGltYS5jb20vd2VibG9ncy92aWV3cG9zdC5qc3A/dGhyZWFkPTE2NDI5M1xuICAgIGlmIChodW5rLm9sZExpbmVzID09PSAwKSB7XG4gICAgICBodW5rLm9sZFN0YXJ0IC09IDE7XG4gICAgfVxuICAgIGlmIChodW5rLm5ld0xpbmVzID09PSAwKSB7XG4gICAgICBodW5rLm5ld1N0YXJ0IC09IDE7XG4gICAgfVxuICAgIHJldC5wdXNoKFxuICAgICAgJ0BAIC0nICsgaHVuay5vbGRTdGFydCArICcsJyArIGh1bmsub2xkTGluZXNcbiAgICAgICsgJyArJyArIGh1bmsubmV3U3RhcnQgKyAnLCcgKyBodW5rLm5ld0xpbmVzXG4gICAgICArICcgQEAnXG4gICAgKTtcbiAgICByZXQucHVzaC5hcHBseShyZXQsIGh1bmsubGluZXMpO1xuICB9XG5cbiAgcmV0dXJuIHJldC5qb2luKCdcXG4nKSArICdcXG4nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHdvRmlsZXNQYXRjaChvbGRGaWxlTmFtZSwgbmV3RmlsZU5hbWUsIG9sZFN0ciwgbmV3U3RyLCBvbGRIZWFkZXIsIG5ld0hlYWRlciwgb3B0aW9ucykge1xuICByZXR1cm4gZm9ybWF0UGF0Y2goc3RydWN0dXJlZFBhdGNoKG9sZEZpbGVOYW1lLCBuZXdGaWxlTmFtZSwgb2xkU3RyLCBuZXdTdHIsIG9sZEhlYWRlciwgbmV3SGVhZGVyLCBvcHRpb25zKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQYXRjaChmaWxlTmFtZSwgb2xkU3RyLCBuZXdTdHIsIG9sZEhlYWRlciwgbmV3SGVhZGVyLCBvcHRpb25zKSB7XG4gIHJldHVybiBjcmVhdGVUd29GaWxlc1BhdGNoKGZpbGVOYW1lLCBmaWxlTmFtZSwgb2xkU3RyLCBuZXdTdHIsIG9sZEhlYWRlciwgbmV3SGVhZGVyLCBvcHRpb25zKTtcbn1cbiJdfQ==\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcLineCount = calcLineCount;\nexports.merge = merge;\n\n/*istanbul ignore end*/\nvar\n/*istanbul ignore start*/\n_create = require(\"./create\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_parse = require(\"./parse\")\n/*istanbul ignore end*/\n;\n\nvar\n/*istanbul ignore start*/\n_array = require(\"../util/array\")\n/*istanbul ignore end*/\n;\n\n/*istanbul ignore start*/ function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*istanbul ignore end*/\nfunction calcLineCount(hunk) {\n  /*istanbul ignore start*/\n  var _calcOldNewLineCount =\n  /*istanbul ignore end*/\n  calcOldNewLineCount(hunk.lines),\n      oldLines = _calcOldNewLineCount.oldLines,\n      newLines = _calcOldNewLineCount.newLines;\n\n  if (oldLines !== undefined) {\n    hunk.oldLines = oldLines;\n  } else {\n    delete hunk.oldLines;\n  }\n\n  if (newLines !== undefined) {\n    hunk.newLines = newLines;\n  } else {\n    delete hunk.newLines;\n  }\n}\n\nfunction merge(mine, theirs, base) {\n  mine = loadPatch(mine, base);\n  theirs = loadPatch(theirs, base);\n  var ret = {}; // For index we just let it pass through as it doesn't have any necessary meaning.\n  // Leaving sanity checks on this to the API consumer that may know more about the\n  // meaning in their own context.\n\n  if (mine.index || theirs.index) {\n    ret.index = mine.index || theirs.index;\n  }\n\n  if (mine.newFileName || theirs.newFileName) {\n    if (!fileNameChanged(mine)) {\n      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n      ret.newFileName = theirs.newFileName || mine.newFileName;\n      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n      ret.newHeader = theirs.newHeader || mine.newHeader;\n    } else if (!fileNameChanged(theirs)) {\n      // No header or no change in theirs, use ours\n      ret.oldFileName = mine.oldFileName;\n      ret.newFileName = mine.newFileName;\n      ret.oldHeader = mine.oldHeader;\n      ret.newHeader = mine.newHeader;\n    } else {\n      // Both changed... figure it out\n      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n    }\n  }\n\n  ret.hunks = [];\n  var mineIndex = 0,\n      theirsIndex = 0,\n      mineOffset = 0,\n      theirsOffset = 0;\n\n  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n    var mineCurrent = mine.hunks[mineIndex] || {\n      oldStart: Infinity\n    },\n        theirsCurrent = theirs.hunks[theirsIndex] || {\n      oldStart: Infinity\n    };\n\n    if (hunkBefore(mineCurrent, theirsCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n      mineIndex++;\n      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n      theirsIndex++;\n      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n    } else {\n      // Overlap, merge as best we can\n      var mergedHunk = {\n        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n        oldLines: 0,\n        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n        newLines: 0,\n        lines: []\n      };\n      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n      theirsIndex++;\n      mineIndex++;\n      ret.hunks.push(mergedHunk);\n    }\n  }\n\n  return ret;\n}\n\nfunction loadPatch(param, base) {\n  if (typeof param === 'string') {\n    if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n      return (\n        /*istanbul ignore start*/\n        (0,\n        /*istanbul ignore end*/\n\n        /*istanbul ignore start*/\n        _parse\n        /*istanbul ignore end*/\n        .\n        /*istanbul ignore start*/\n        parsePatch)\n        /*istanbul ignore end*/\n        (param)[0]\n      );\n    }\n\n    if (!base) {\n      throw new Error('Must provide a base reference or pass in a patch');\n    }\n\n    return (\n      /*istanbul ignore start*/\n      (0,\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n      _create\n      /*istanbul ignore end*/\n      .\n      /*istanbul ignore start*/\n      structuredPatch)\n      /*istanbul ignore end*/\n      (undefined, undefined, base, param)\n    );\n  }\n\n  return param;\n}\n\nfunction fileNameChanged(patch) {\n  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n}\n\nfunction selectField(index, mine, theirs) {\n  if (mine === theirs) {\n    return mine;\n  } else {\n    index.conflict = true;\n    return {\n      mine: mine,\n      theirs: theirs\n    };\n  }\n}\n\nfunction hunkBefore(test, check) {\n  return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n}\n\nfunction cloneHunk(hunk, offset) {\n  return {\n    oldStart: hunk.oldStart,\n    oldLines: hunk.oldLines,\n    newStart: hunk.newStart + offset,\n    newLines: hunk.newLines,\n    lines: hunk.lines\n  };\n}\n\nfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n  // This will generally result in a conflicted hunk, but there are cases where the context\n  // is the only overlap where we can successfully merge the content here.\n  var mine = {\n    offset: mineOffset,\n    lines: mineLines,\n    index: 0\n  },\n      their = {\n    offset: theirOffset,\n    lines: theirLines,\n    index: 0\n  }; // Handle any leading content\n\n  insertLeading(hunk, mine, their);\n  insertLeading(hunk, their, mine); // Now in the overlap content. Scan through and select the best changes from each.\n\n  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n    var mineCurrent = mine.lines[mine.index],\n        theirCurrent = their.lines[their.index];\n\n    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n      // Both modified ...\n      mutualChange(hunk, mine, their);\n    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n      /*istanbul ignore start*/\n      var _hunk$lines;\n\n      /*istanbul ignore end*/\n      // Mine inserted\n\n      /*istanbul ignore start*/\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n      (_hunk$lines =\n      /*istanbul ignore end*/\n      hunk.lines).push.apply(\n      /*istanbul ignore start*/\n      _hunk$lines\n      /*istanbul ignore end*/\n      ,\n      /*istanbul ignore start*/\n      _toConsumableArray(\n      /*istanbul ignore end*/\n      collectChange(mine)));\n    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n      /*istanbul ignore start*/\n      var _hunk$lines2;\n\n      /*istanbul ignore end*/\n      // Theirs inserted\n\n      /*istanbul ignore start*/\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n      (_hunk$lines2 =\n      /*istanbul ignore end*/\n      hunk.lines).push.apply(\n      /*istanbul ignore start*/\n      _hunk$lines2\n      /*istanbul ignore end*/\n      ,\n      /*istanbul ignore start*/\n      _toConsumableArray(\n      /*istanbul ignore end*/\n      collectChange(their)));\n    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n      // Mine removed or edited\n      removal(hunk, mine, their);\n    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n      // Their removed or edited\n      removal(hunk, their, mine, true);\n    } else if (mineCurrent === theirCurrent) {\n      // Context identity\n      hunk.lines.push(mineCurrent);\n      mine.index++;\n      their.index++;\n    } else {\n      // Context mismatch\n      conflict(hunk, collectChange(mine), collectChange(their));\n    }\n  } // Now push anything that may be remaining\n\n\n  insertTrailing(hunk, mine);\n  insertTrailing(hunk, their);\n  calcLineCount(hunk);\n}\n\nfunction mutualChange(hunk, mine, their) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectChange(their);\n\n  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n    // Special case for remove changes that are supersets of one another\n    if (\n    /*istanbul ignore start*/\n    (0,\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    _array\n    /*istanbul ignore end*/\n    .\n    /*istanbul ignore start*/\n    arrayStartsWith)\n    /*istanbul ignore end*/\n    (myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n      /*istanbul ignore start*/\n      var _hunk$lines3;\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n      (_hunk$lines3 =\n      /*istanbul ignore end*/\n      hunk.lines).push.apply(\n      /*istanbul ignore start*/\n      _hunk$lines3\n      /*istanbul ignore end*/\n      ,\n      /*istanbul ignore start*/\n      _toConsumableArray(\n      /*istanbul ignore end*/\n      myChanges));\n\n      return;\n    } else if (\n    /*istanbul ignore start*/\n    (0,\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    _array\n    /*istanbul ignore end*/\n    .\n    /*istanbul ignore start*/\n    arrayStartsWith)\n    /*istanbul ignore end*/\n    (theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n      /*istanbul ignore start*/\n      var _hunk$lines4;\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n\n      /*istanbul ignore end*/\n\n      /*istanbul ignore start*/\n      (_hunk$lines4 =\n      /*istanbul ignore end*/\n      hunk.lines).push.apply(\n      /*istanbul ignore start*/\n      _hunk$lines4\n      /*istanbul ignore end*/\n      ,\n      /*istanbul ignore start*/\n      _toConsumableArray(\n      /*istanbul ignore end*/\n      theirChanges));\n\n      return;\n    }\n  } else if (\n  /*istanbul ignore start*/\n  (0,\n  /*istanbul ignore end*/\n\n  /*istanbul ignore start*/\n  _array\n  /*istanbul ignore end*/\n  .\n  /*istanbul ignore start*/\n  arrayEqual)\n  /*istanbul ignore end*/\n  (myChanges, theirChanges)) {\n    /*istanbul ignore start*/\n    var _hunk$lines5;\n\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    (_hunk$lines5 =\n    /*istanbul ignore end*/\n    hunk.lines).push.apply(\n    /*istanbul ignore start*/\n    _hunk$lines5\n    /*istanbul ignore end*/\n    ,\n    /*istanbul ignore start*/\n    _toConsumableArray(\n    /*istanbul ignore end*/\n    myChanges));\n\n    return;\n  }\n\n  conflict(hunk, myChanges, theirChanges);\n}\n\nfunction removal(hunk, mine, their, swap) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectContext(their, myChanges);\n\n  if (theirChanges.merged) {\n    /*istanbul ignore start*/\n    var _hunk$lines6;\n\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n\n    /*istanbul ignore end*/\n\n    /*istanbul ignore start*/\n    (_hunk$lines6 =\n    /*istanbul ignore end*/\n    hunk.lines).push.apply(\n    /*istanbul ignore start*/\n    _hunk$lines6\n    /*istanbul ignore end*/\n    ,\n    /*istanbul ignore start*/\n    _toConsumableArray(\n    /*istanbul ignore end*/\n    theirChanges.merged));\n  } else {\n    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n  }\n}\n\nfunction conflict(hunk, mine, their) {\n  hunk.conflict = true;\n  hunk.lines.push({\n    conflict: true,\n    mine: mine,\n    theirs: their\n  });\n}\n\nfunction insertLeading(hunk, insert, their) {\n  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n    insert.offset++;\n  }\n}\n\nfunction insertTrailing(hunk, insert) {\n  while (insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n  }\n}\n\nfunction collectChange(state) {\n  var ret = [],\n      operation = state.lines[state.index][0];\n\n  while (state.index < state.lines.length) {\n    var line = state.lines[state.index]; // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\n    if (operation === '-' && line[0] === '+') {\n      operation = '+';\n    }\n\n    if (operation === line[0]) {\n      ret.push(line);\n      state.index++;\n    } else {\n      break;\n    }\n  }\n\n  return ret;\n}\n\nfunction collectContext(state, matchChanges) {\n  var changes = [],\n      merged = [],\n      matchIndex = 0,\n      contextChanges = false,\n      conflicted = false;\n\n  while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n    var change = state.lines[state.index],\n        match = matchChanges[matchIndex]; // Once we've hit our add, then we are done\n\n    if (match[0] === '+') {\n      break;\n    }\n\n    contextChanges = contextChanges || change[0] !== ' ';\n    merged.push(match);\n    matchIndex++; // Consume any additions in the other block as a conflict to attempt\n    // to pull in the remaining context after this\n\n    if (change[0] === '+') {\n      conflicted = true;\n\n      while (change[0] === '+') {\n        changes.push(change);\n        change = state.lines[++state.index];\n      }\n    }\n\n    if (match.substr(1) === change.substr(1)) {\n      changes.push(change);\n      state.index++;\n    } else {\n      conflicted = true;\n    }\n  }\n\n  if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n    conflicted = true;\n  }\n\n  if (conflicted) {\n    return changes;\n  }\n\n  while (matchIndex < matchChanges.length) {\n    merged.push(matchChanges[matchIndex++]);\n  }\n\n  return {\n    merged: merged,\n    changes: changes\n  };\n}\n\nfunction allRemoves(changes) {\n  return changes.reduce(function (prev, change) {\n    return prev && change[0] === '-';\n  }, true);\n}\n\nfunction skipRemoveSuperset(state, removeChanges, delta) {\n  for (var i = 0; i < delta; i++) {\n    var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\n    if (state.lines[state.index + i] !== ' ' + changeContent) {\n      return false;\n    }\n  }\n\n  state.index += delta;\n  return true;\n}\n\nfunction calcOldNewLineCount(lines) {\n  var oldLines = 0;\n  var newLines = 0;\n  lines.forEach(function (line) {\n    if (typeof line !== 'string') {\n      var myCount = calcOldNewLineCount(line.mine);\n      var theirCount = calcOldNewLineCount(line.theirs);\n\n      if (oldLines !== undefined) {\n        if (myCount.oldLines === theirCount.oldLines) {\n          oldLines += myCount.oldLines;\n        } else {\n          oldLines = undefined;\n        }\n      }\n\n      if (newLines !== undefined) {\n        if (myCount.newLines === theirCount.newLines) {\n          newLines += myCount.newLines;\n        } else {\n          newLines = undefined;\n        }\n      }\n    } else {\n      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n        newLines++;\n      }\n\n      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n        oldLines++;\n      }\n    }\n  });\n  return {\n    oldLines: oldLines,\n    newLines: newLines\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9tZXJnZS5qcyJdLCJuYW1lcyI6WyJjYWxjTGluZUNvdW50IiwiaHVuayIsImNhbGNPbGROZXdMaW5lQ291bnQiLCJsaW5lcyIsIm9sZExpbmVzIiwibmV3TGluZXMiLCJ1bmRlZmluZWQiLCJtZXJnZSIsIm1pbmUiLCJ0aGVpcnMiLCJiYXNlIiwibG9hZFBhdGNoIiwicmV0IiwiaW5kZXgiLCJuZXdGaWxlTmFtZSIsImZpbGVOYW1lQ2hhbmdlZCIsIm9sZEZpbGVOYW1lIiwib2xkSGVhZGVyIiwibmV3SGVhZGVyIiwic2VsZWN0RmllbGQiLCJodW5rcyIsIm1pbmVJbmRleCIsInRoZWlyc0luZGV4IiwibWluZU9mZnNldCIsInRoZWlyc09mZnNldCIsImxlbmd0aCIsIm1pbmVDdXJyZW50Iiwib2xkU3RhcnQiLCJJbmZpbml0eSIsInRoZWlyc0N1cnJlbnQiLCJodW5rQmVmb3JlIiwicHVzaCIsImNsb25lSHVuayIsIm1lcmdlZEh1bmsiLCJNYXRoIiwibWluIiwibmV3U3RhcnQiLCJtZXJnZUxpbmVzIiwicGFyYW0iLCJ0ZXN0IiwicGFyc2VQYXRjaCIsIkVycm9yIiwic3RydWN0dXJlZFBhdGNoIiwicGF0Y2giLCJjb25mbGljdCIsImNoZWNrIiwib2Zmc2V0IiwibWluZUxpbmVzIiwidGhlaXJPZmZzZXQiLCJ0aGVpckxpbmVzIiwidGhlaXIiLCJpbnNlcnRMZWFkaW5nIiwidGhlaXJDdXJyZW50IiwibXV0dWFsQ2hhbmdlIiwiY29sbGVjdENoYW5nZSIsInJlbW92YWwiLCJpbnNlcnRUcmFpbGluZyIsIm15Q2hhbmdlcyIsInRoZWlyQ2hhbmdlcyIsImFsbFJlbW92ZXMiLCJhcnJheVN0YXJ0c1dpdGgiLCJza2lwUmVtb3ZlU3VwZXJzZXQiLCJhcnJheUVxdWFsIiwic3dhcCIsImNvbGxlY3RDb250ZXh0IiwibWVyZ2VkIiwiaW5zZXJ0IiwibGluZSIsInN0YXRlIiwib3BlcmF0aW9uIiwibWF0Y2hDaGFuZ2VzIiwiY2hhbmdlcyIsIm1hdGNoSW5kZXgiLCJjb250ZXh0Q2hhbmdlcyIsImNvbmZsaWN0ZWQiLCJjaGFuZ2UiLCJtYXRjaCIsInN1YnN0ciIsInJlZHVjZSIsInByZXYiLCJyZW1vdmVDaGFuZ2VzIiwiZGVsdGEiLCJpIiwiY2hhbmdlQ29udGVudCIsImZvckVhY2giLCJteUNvdW50IiwidGhlaXJDb3VudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUFFTyxTQUFTQSxhQUFULENBQXVCQyxJQUF2QixFQUE2QjtBQUFBO0FBQUE7QUFBQTtBQUNMQyxFQUFBQSxtQkFBbUIsQ0FBQ0QsSUFBSSxDQUFDRSxLQUFOLENBRGQ7QUFBQSxNQUMzQkMsUUFEMkIsd0JBQzNCQSxRQUQyQjtBQUFBLE1BQ2pCQyxRQURpQix3QkFDakJBLFFBRGlCOztBQUdsQyxNQUFJRCxRQUFRLEtBQUtFLFNBQWpCLEVBQTRCO0FBQzFCTCxJQUFBQSxJQUFJLENBQUNHLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsV0FBT0gsSUFBSSxDQUFDRyxRQUFaO0FBQ0Q7O0FBRUQsTUFBSUMsUUFBUSxLQUFLQyxTQUFqQixFQUE0QjtBQUMxQkwsSUFBQUEsSUFBSSxDQUFDSSxRQUFMLEdBQWdCQSxRQUFoQjtBQUNELEdBRkQsTUFFTztBQUNMLFdBQU9KLElBQUksQ0FBQ0ksUUFBWjtBQUNEO0FBQ0Y7O0FBRU0sU0FBU0UsS0FBVCxDQUFlQyxJQUFmLEVBQXFCQyxNQUFyQixFQUE2QkMsSUFBN0IsRUFBbUM7QUFDeENGLEVBQUFBLElBQUksR0FBR0csU0FBUyxDQUFDSCxJQUFELEVBQU9FLElBQVAsQ0FBaEI7QUFDQUQsRUFBQUEsTUFBTSxHQUFHRSxTQUFTLENBQUNGLE1BQUQsRUFBU0MsSUFBVCxDQUFsQjtBQUVBLE1BQUlFLEdBQUcsR0FBRyxFQUFWLENBSndD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QUFKLEVBQW9FO0FBQ2xFL0QsUUFBQUEsUUFBUTtBQUNUO0FBQ0Y7QUFDRixHQTVCRDtBQThCQSxTQUFPO0FBQUNBLElBQUFBLFFBQVEsRUFBUkEsUUFBRDtBQUFXQyxJQUFBQSxRQUFRLEVBQVJBO0FBQVgsR0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtzdHJ1Y3R1cmVkUGF0Y2h9IGZyb20gJy4vY3JlYXRlJztcbmltcG9ydCB7cGFyc2VQYXRjaH0gZnJvbSAnLi9wYXJzZSc7XG5cbmltcG9ydCB7YXJyYXlFcXVhbCwgYXJyYXlTdGFydHNXaXRofSBmcm9tICcuLi91dGlsL2FycmF5JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNMaW5lQ291bnQoaHVuaykge1xuICBjb25zdCB7b2xkTGluZXMsIG5ld0xpbmVzfSA9IGNhbGNPbGROZXdMaW5lQ291bnQoaHVuay5saW5lcyk7XG5cbiAgaWYgKG9sZExpbmVzICE9PSB1bmRlZmluZWQpIHtcbiAgICBodW5rLm9sZExpbmVzID0gb2xkTGluZXM7XG4gIH0gZWxzZSB7XG4gICAgZGVsZXRlIGh1bmsub2xkTGluZXM7XG4gIH1cblxuICBpZiAobmV3TGluZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGh1bmsubmV3TGluZXMgPSBuZXdMaW5lcztcbiAgfSBlbHNlIHtcbiAgICBkZWxldGUgaHVuay5uZXdMaW5lcztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UobWluZSwgdGhlaXJzLCBiYXNlKSB7XG4gIG1pbmUgPSBsb2FkUGF0Y2gobWluZSwgYmFzZSk7XG4gIHRoZWlycyA9IGxvYWRQYXRjaCh0aGVpcnMsIGJhc2UpO1xuXG4gIGxldCByZXQgPSB7fTtcblxuICAvLyBGb3IgaW5kZXggd2UganVzdCBsZXQgaXQgcGFzcyB0aHJvdWdoIGFzIGl0IGRvZXNuJ3QgaGF2ZSBhbnkgbmVjZXNzYXJ5IG1lYW5pbmcuXG4gIC8vIExlYXZpbmcgc2FuaXR5IGNoZWNrcyBvbiB0aGlzIHRvIHRoZSBBUEkgY29uc3VtZXIgdGhhdCBtYXkga25vdyBtb3JlIGFib3V0IHRoZVxuICAvLyBtZWFuaW5nIGluIHRoZWlyIG93biBjb250ZXh0LlxuICBpZiAobWluZS5pbmRleCB8fCB0aGVpcnMuaW5kZXgpIHtcbiAgICByZXQuaW5kZXggPSBtaW5lLmluZGV4IHx8IHRoZWlycy5pbmRleDtcbiAgfVxuXG4gIGlmIChtaW5lLm5ld0ZpbGVOYW1lIHx8IHRoZWlycy5uZXdGaWxlTmFtZSkge1xuICAgIGlmICghZmlsZU5hbWVDaGFuZ2VkKG1pbmUpKSB7XG4gICAgICAvLyBObyBoZWFkZXIgb3Igbm8gY2hhbmdlIGluIG91cnMsIHVzZSB0aGVpcnMgKGFuZCBvdXJzIGlmIHRoZWlycyBkb2VzIG5vdCBleGlzdClcbiAgICAgIHJldC5vbGRGaWxlTmFtZSA9IHRoZWlycy5vbGRGaWxlTmFtZSB8fCBtaW5lLm9sZEZpbGVOYW1lO1xuICAgICAgcmV0Lm5ld0ZpbGVOYW1lID0gdGhlaXJzLm5ld0ZpbGVOYW1lIHx8IG1pbmUubmV3RmlsZU5hbWU7XG4gICAgICByZXQub2xkSGVhZGVyID0gdGhlaXJzLm9sZEhlYWRlciB8fCBtaW5lLm9sZEhlYWRlcjtcbiAgICAgIHJldC5uZXdIZWFkZXIgPSB0aGVpcnMubmV3SGVhZGVyIHx8IG1pbmUubmV3SGVhZGVyO1xuICAgIH0gZWxzZSBpZiAoIWZpbGVOYW1lQ2hhbmdlZCh0aGVpcnMpKSB7XG4gICAgICAvLyBObyBoZWFkZXIgb3Igbm8gY2hhbmdlIGluIHRoZWlycywgdXNlIG91cnNcbiAgICAgIHJldC5vbGRGaWxlTmFtZSA9IG1pbmUub2xkRmlsZU5hbWU7XG4gICAgICByZXQubmV3RmlsZU5hbWUgPSBtaW5lLm5ld0ZpbGVOYW1lO1xuICAgICAgcmV0Lm9sZEhlYWRlciA9IG1pbmUub2xkSGVhZGVyO1xuICAgICAgcmV0Lm5ld0hlYWRlciA9IG1pbmUubmV3SGVhZGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBCb3RoIGNoYW5nZWQuLi4gZmlndXJlIGl0IG91dFxuICAgICAgcmV0Lm9sZEZpbGVOYW1lID0gc2VsZWN0RmllbGQocmV0LCBtaW5lLm9sZEZpbGVOYW1lLCB0aGVpcnMub2xkRmlsZU5hbWUpO1xuICAgICAgcmV0Lm5ld0ZpbGVOYW1lID0gc2VsZWN0RmllbGQocmV0LCBtaW5lLm5ld0ZpbGVOYW1lLCB0aGVpcnMubmV3RmlsZU5hbWUpO1xuICAgICAgcmV0Lm9sZEhlYWRlciA9IHNlbGVjdEZpZWxkKHJldCwgbWluZS5vbGRIZWFkZXIsIHRoZWlycy5vbGRIZWFkZXIpO1xuICAgICAgcmV0Lm5ld0hlYWRlciA9IHNlbGVjdEZpZWxkKHJldCwgbWluZS5uZXdIZWFkZXIsIHRoZWlycy5uZXdIZWFkZXIpO1xuICAgIH1cbiAgfVxuXG4gIHJldC5odW5rcyA9IFtdO1xuXG4gIGxldCBtaW5lSW5kZXggPSAwLFxuICAgICAgdGhlaXJzSW5kZXggPSAwLFxuICAgICAgbWluZU9mZnNldCA9IDAsXG4gICAgICB0aGVpcnNPZmZzZXQgPSAwO1xuXG4gIHdoaWxlIChtaW5lSW5kZXggPCBtaW5lLmh1bmtzLmxlbmd0aCB8fCB0aGVpcnNJbmRleCA8IHRoZWlycy5odW5rcy5sZW5ndGgpIHtcbiAgICBsZXQgbWluZUN1cnJlbnQgPSBtaW5lLmh1bmtzW21pbmVJbmRleF0gfHwge29sZFN0YXJ0OiBJbmZpbml0eX0sXG4gICAgICAgIHRoZWlyc0N1cnJlbnQgPSB0aGVpcnMuaHVua3NbdGhlaXJzSW5kZXhdIHx8IHtvbGRTdGFydDogSW5maW5pdHl9O1xuXG4gICAgaWYgKGh1bmtCZWZvcmUobWluZUN1cnJlbnQsIHRoZWlyc0N1cnJlbnQpKSB7XG4gICAgICAvLyBUaGlzIHBhdGNoIGRvZXMgbm90IG92ZXJsYXAgd2l0aCBhbnkgb2YgdGhlIG90aGVycywgeWF5LlxuICAgICAgcmV0Lmh1bmtzLnB1c2goY2xvbmVIdW5rKG1pbmVDdXJyZW50LCBtaW5lT2Zmc2V0KSk7XG4gICAgICBtaW5lSW5kZXgrKztcbiAgICAgIHRoZWlyc09mZnNldCArPSBtaW5lQ3VycmVudC5uZXdMaW5lcyAtIG1pbmVDdXJyZW50Lm9sZExpbmVzO1xuICAgIH0gZWxzZSBpZiAoaHVua0JlZm9yZSh0aGVpcnNDdXJyZW50LCBtaW5lQ3VycmVudCkpIHtcbiAgICAgIC8vIFRoaXMgcGF0Y2ggZG9lcyBub3Qgb3ZlcmxhcCB3aXRoIGFueSBvZiB0aGUgb3RoZXJzLCB5YXkuXG4gICAgICByZXQuaHVua3MucHVzaChjbG9uZUh1bmsodGhlaXJzQ3VycmVudCwgdGhlaXJzT2Zmc2V0KSk7XG4gICAgICB0aGVpcnNJbmRleCsrO1xuICAgICAgbWluZU9mZnNldCArPSB0aGVpcnNDdXJyZW50Lm5ld0xpbmVzIC0gdGhlaXJzQ3VycmVudC5vbGRMaW5lcztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3ZlcmxhcCwgbWVyZ2UgYXMgYmVzdCB3ZSBjYW5cbiAgICAgIGxldCBtZXJnZWRIdW5rID0ge1xuICAgICAgICBvbGRTdGFydDogTWF0aC5taW4obWluZUN1cnJlbnQub2xkU3RhcnQsIHRoZWlyc0N1cnJlbnQub2xkU3RhcnQpLFxuICAgICAgICBvbGRMaW5lczogMCxcbiAgICAgICAgbmV3U3RhcnQ6IE1hdGgubWluKG1pbmVDdXJyZW50Lm5ld1N0YXJ0ICsgbWluZU9mZnNldCwgdGhlaXJzQ3VycmVudC5vbGRTdGFydCArIHRoZWlyc09mZnNldCksXG4gICAgICAgIG5ld0xpbmVzOiAwLFxuICAgICAgICBsaW5lczogW11cbiAgICAgIH07XG4gICAgICBtZXJnZUxpbmVzKG1lcmdlZEh1bmssIG1pbmVDdXJyZW50Lm9sZFN0YXJ0LCBtaW5lQ3VycmVudC5saW5lcywgdGhlaXJzQ3VycmVudC5vbGRTdGFydCwgdGhlaXJzQ3VycmVudC5saW5lcyk7XG4gICAgICB0aGVpcnNJbmRleCsrO1xuICAgICAgbWluZUluZGV4Kys7XG5cbiAgICAgIHJldC5odW5rcy5wdXNoKG1lcmdlZEh1bmspO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGxvYWRQYXRjaChwYXJhbSwgYmFzZSkge1xuICBpZiAodHlwZW9mIHBhcmFtID09PSAnc3RyaW5nJykge1xuICAgIGlmICgoL15AQC9tKS50ZXN0KHBhcmFtKSB8fCAoKC9eSW5kZXg6L20pLnRlc3QocGFyYW0pKSkge1xuICAgICAgcmV0dXJuIHBhcnNlUGF0Y2gocGFyYW0pWzBdO1xuICAgIH1cblxuICAgIGlmICghYmFzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgYSBiYXNlIHJlZmVyZW5jZSBvciBwYXNzIGluIGEgcGF0Y2gnKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cnVjdHVyZWRQYXRjaCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgYmFzZSwgcGFyYW0pO1xuICB9XG5cbiAgcmV0dXJuIHBhcmFtO1xufVxuXG5mdW5jdGlvbiBmaWxlTmFtZUNoYW5nZWQocGF0Y2gpIHtcbiAgcmV0dXJuIHBhdGNoLm5ld0ZpbGVOYW1lICYmIHBhdGNoLm5ld0ZpbGVOYW1lICE9PSBwYXRjaC5vbGRGaWxlTmFtZTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0RmllbGQoaW5kZXgsIG1pbmUsIHRoZWlycykge1xuICBpZiAobWluZSA9PT0gdGhlaXJzKSB7XG4gICAgcmV0dXJuIG1pbmU7XG4gIH0gZWxzZSB7XG4gICAgaW5kZXguY29uZmxpY3QgPSB0cnVlO1xuICAgIHJldHVybiB7bWluZSwgdGhlaXJzfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBodW5rQmVmb3JlKHRlc3QsIGNoZWNrKSB7XG4gIHJldHVybiB0ZXN0Lm9sZFN0YXJ0IDwgY2hlY2sub2xkU3RhcnRcbiAgICAmJiAodGVzdC5vbGRTdGFydCArIHRlc3Qub2xkTGluZXMpIDwgY2hlY2sub2xkU3RhcnQ7XG59XG5cbmZ1bmN0aW9uIGNsb25lSHVuayhodW5rLCBvZmZzZXQpIHtcbiAgcmV0dXJuIHtcbiAgICBvbGRTdGFydDogaHVuay5vbGRTdGFydCwgb2xkTGluZXM6IGh1bmsub2xkTGluZXMsXG4gICAgbmV3U3RhcnQ6IGh1bmsubmV3U3RhcnQgKyBvZmZzZXQsIG5ld0xpbmVzOiBodW5rLm5ld0xpbmVzLFxuICAgIGxpbmVzOiBodW5rLmxpbmVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIG1lcmdlTGluZXMoaHVuaywgbWluZU9mZnNldCwgbWluZUxpbmVzLCB0aGVpck9mZnNldCwgdGhlaXJMaW5lcykge1xuICAvLyBUaGlzIHdpbGwgZ2VuZXJhbGx5IHJlc3VsdCBpbiBhIGNvbmZsaWN0ZWQgaHVuaywgYnV0IHRoZXJlIGFyZSBjYXNlcyB3aGVyZSB0aGUgY29udGV4dFxuICAvLyBpcyB0aGUgb25seSBvdmVybGFwIHdoZXJlIHdlIGNhbiBzdWNjZXNzZnVsbHkgbWVyZ2UgdGhlIGNvbnRlbnQgaGVyZS5cbiAgbGV0IG1pbmUgPSB7b2Zmc2V0OiBtaW5lT2Zmc2V0LCBsaW5lczogbWluZUxpbmVzLCBpbmRleDogMH0sXG4gICAgICB0aGVpciA9IHtvZmZzZXQ6IHRoZWlyT2Zmc2V0LCBsaW5lczogdGhlaXJMaW5lcywgaW5kZXg6IDB9O1xuXG4gIC8vIEhhbmRsZSBhbnkgbGVhZGluZyBjb250ZW50XG4gIGluc2VydExlYWRpbmcoaHVuaywgbWluZSwgdGhlaXIpO1xuICBpbnNlcnRMZWFkaW5nKGh1bmssIHRoZWlyLCBtaW5lKTtcblxuICAvLyBOb3cgaW4gdGhlIG92ZXJsYXAgY29udGVudC4gU2NhbiB0aHJvdWdoIGFuZCBzZWxlY3QgdGhlIGJlc3QgY2hhbmdlcyBmcm9tIGVhY2guXG4gIHdoaWxlIChtaW5lLmluZGV4IDwgbWluZS5saW5lcy5sZW5ndGggJiYgdGhlaXIuaW5kZXggPCB0aGVpci5saW5lcy5sZW5ndGgpIHtcbiAgICBsZXQgbWluZUN1cnJlbnQgPSBtaW5lLmxpbmVzW21pbmUuaW5kZXhdLFxuICAgICAgICB0aGVpckN1cnJlbnQgPSB0aGVpci5saW5lc1t0aGVpci5pbmRleF07XG5cbiAgICBpZiAoKG1pbmVDdXJyZW50WzBdID09PSAnLScgfHwgbWluZUN1cnJlbnRbMF0gPT09ICcrJylcbiAgICAgICAgJiYgKHRoZWlyQ3VycmVudFswXSA9PT0gJy0nIHx8IHRoZWlyQ3VycmVudFswXSA9PT0gJysnKSkge1xuICAgICAgLy8gQm90aCBtb2RpZmllZCAuLi5cbiAgICAgIG11dHVhbENoYW5nZShodW5rLCBtaW5lLCB0aGVpcik7XG4gICAgfSBlbHNlIGlmIChtaW5lQ3VycmVudFswXSA9PT0gJysnICYmIHRoZWlyQ3VycmVudFswXSA9PT0gJyAnKSB7XG4gICAgICAvLyBNaW5lIGluc2VydGVkXG4gICAgICBodW5rLmxpbmVzLnB1c2goLi4uIGNvbGxlY3RDaGFuZ2UobWluZSkpO1xuICAgIH0gZWxzZSBpZiAodGhlaXJDdXJyZW50WzBdID09PSAnKycgJiYgbWluZUN1cnJlbnRbMF0gPT09ICcgJykge1xuICAgICAgLy8gVGhlaXJzIGluc2VydGVkXG4gICAgICBodW5rLmxpbmVzLnB1c2goLi4uIGNvbGxlY3RDaGFuZ2UodGhlaXIpKTtcbiAgICB9IGVsc2UgaWYgKG1pbmVDdXJyZW50WzBdID09PSAnLScgJiYgdGhlaXJDdXJyZW50WzBdID09PSAnICcpIHtcbiAgICAgIC8vIE1pbmUgcmVtb3ZlZCBvciBlZGl0ZWRcbiAgICAgIHJlbW92YWwoaHVuaywgbWluZSwgdGhlaXIpO1xuICAgIH0gZWxzZSBpZiAodGhlaXJDdXJyZW50WzBdID09PSAnLScgJiYgbWluZUN1cnJlbnRbMF0gPT09ICcgJykge1xuICAgICAgLy8gVGhlaXIgcmVtb3ZlZCBvciBlZGl0ZWRcbiAgICAgIHJlbW92YWwoaHVuaywgdGhlaXIsIG1pbmUsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAobWluZUN1cnJlbnQgPT09IHRoZWlyQ3VycmVudCkge1xuICAgICAgLy8gQ29udGV4dCBpZGVudGl0eVxuICAgICAgaHVuay5saW5lcy5wdXNoKG1pbmVDdXJyZW50KTtcbiAgICAgIG1pbmUuaW5kZXgrKztcbiAgICAgIHRoZWlyLmluZGV4Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENvbnRleHQgbWlzbWF0Y2hcbiAgICAgIGNvbmZsaWN0KGh1bmssIGNvbGxlY3RDaGFuZ2UobWluZSksIGNvbGxlY3RDaGFuZ2UodGhlaXIpKTtcbiAgICB9XG4gIH1cblxuICAvLyBOb3cgcHVzaCBhbnl0aGluZyB0aGF0IG1heSBiZSByZW1haW5pbmdcbiAgaW5zZXJ0VHJhaWxpbmcoaHVuaywgbWluZSk7XG4gIGluc2VydFRyYWlsaW5nKGh1bmssIHRoZWlyKTtcblxuICBjYWxjTGluZUNvdW50KGh1bmspO1xufVxuXG5mdW5jdGlvbiBtdXR1YWxDaGFuZ2UoaHVuaywgbWluZSwgdGhlaXIpIHtcbiAgbGV0IG15Q2hhbmdlcyA9IGNvbGxlY3RDaGFuZ2UobWluZSksXG4gICAgICB0aGVpckNoYW5nZXMgPSBjb2xsZWN0Q2hhbmdlKHRoZWlyKTtcblxuICBpZiAoYWxsUmVtb3ZlcyhteUNoYW5nZXMpICYmIGFsbFJlbW92ZXModGhlaXJDaGFuZ2VzKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgcmVtb3ZlIGNoYW5nZXMgdGhhdCBhcmUgc3VwZXJzZXRzIG9mIG9uZSBhbm90aGVyXG4gICAgaWYgKGFycmF5U3RhcnRzV2l0aChteUNoYW5nZXMsIHRoZWlyQ2hhbmdlcylcbiAgICAgICAgJiYgc2tpcFJlbW92ZVN1cGVyc2V0KHRoZWlyLCBteUNoYW5nZXMsIG15Q2hhbmdlcy5sZW5ndGggLSB0aGVpckNoYW5nZXMubGVuZ3RoKSkge1xuICAgICAgaHVuay5saW5lcy5wdXNoKC4uLiBteUNoYW5nZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoYXJyYXlTdGFydHNXaXRoKHRoZWlyQ2hhbmdlcywgbXlDaGFuZ2VzKVxuICAgICAgICAmJiBza2lwUmVtb3ZlU3VwZXJzZXQobWluZSwgdGhlaXJDaGFuZ2VzLCB0aGVpckNoYW5nZXMubGVuZ3RoIC0gbXlDaGFuZ2VzLmxlbmd0aCkpIHtcbiAgICAgIGh1bmsubGluZXMucHVzaCguLi4gdGhlaXJDaGFuZ2VzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYXJyYXlFcXVhbChteUNoYW5nZXMsIHRoZWlyQ2hhbmdlcykpIHtcbiAgICBodW5rLmxpbmVzLnB1c2goLi4uIG15Q2hhbmdlcyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uZmxpY3QoaHVuaywgbXlDaGFuZ2VzLCB0aGVpckNoYW5nZXMpO1xufVxuXG5mdW5jdGlvbiByZW1vdmFsKGh1bmssIG1pbmUsIHRoZWlyLCBzd2FwKSB7XG4gIGxldCBteUNoYW5nZXMgPSBjb2xsZWN0Q2hhbmdlKG1pbmUpLFxuICAgICAgdGhlaXJDaGFuZ2VzID0gY29sbGVjdENvbnRleHQodGhlaXIsIG15Q2hhbmdlcyk7XG4gIGlmICh0aGVpckNoYW5nZXMubWVyZ2VkKSB7XG4gICAgaHVuay5saW5lcy5wdXNoKC4uLiB0aGVpckNoYW5nZXMubWVyZ2VkKTtcbiAgfSBlbHNlIHtcbiAgICBjb25mbGljdChodW5rLCBzd2FwID8gdGhlaXJDaGFuZ2VzIDogbXlDaGFuZ2VzLCBzd2FwID8gbXlDaGFuZ2VzIDogdGhlaXJDaGFuZ2VzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25mbGljdChodW5rLCBtaW5lLCB0aGVpcikge1xuICBodW5rLmNvbmZsaWN0ID0gdHJ1ZTtcbiAgaHVuay5saW5lcy5wdXNoKHtcbiAgICBjb25mbGljdDogdHJ1ZSxcbiAgICBtaW5lOiBtaW5lLFxuICAgIHRoZWlyczogdGhlaXJcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluc2VydExlYWRpbmcoaHVuaywgaW5zZXJ0LCB0aGVpcikge1xuICB3aGlsZSAoaW5zZXJ0Lm9mZnNldCA8IHRoZWlyLm9mZnNldCAmJiBpbnNlcnQuaW5kZXggPCBpbnNlcnQubGluZXMubGVuZ3RoKSB7XG4gICAgbGV0IGxpbmUgPSBpbnNlcnQubGluZXNbaW5zZXJ0LmluZGV4KytdO1xuICAgIGh1bmsubGluZXMucHVzaChsaW5lKTtcbiAgICBpbnNlcnQub2Zmc2V0Kys7XG4gIH1cbn1cbmZ1bmN0aW9uIGluc2VydFRyYWlsaW5nKGh1bmssIGluc2VydCkge1xuICB3aGlsZSAoaW5zZXJ0LmluZGV4IDwgaW5zZXJ0LmxpbmVzLmxlbmd0aCkge1xuICAgIGxldCBsaW5lID0gaW5zZXJ0LmxpbmVzW2luc2VydC5pbmRleCsrXTtcbiAgICBodW5rLmxpbmVzLnB1c2gobGluZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29sbGVjdENoYW5nZShzdGF0ZSkge1xuICBsZXQgcmV0ID0gW10sXG4gICAgICBvcGVyYXRpb24gPSBzdGF0ZS5saW5lc1tzdGF0ZS5pbmRleF1bMF07XG4gIHdoaWxlIChzdGF0ZS5pbmRleCA8IHN0YXRlLmxpbmVzLmxlbmd0aCkge1xuICAgIGxldCBsaW5lID0gc3RhdGUubGluZXNbc3RhdGUuaW5kZXhdO1xuXG4gICAgLy8gR3JvdXAgYWRkaXRpb25zIHRoYXQgYXJlIGltbWVkaWF0ZWx5IGFmdGVyIHN1YnRyYWN0aW9ucyBhbmQgdHJlYXQgdGhlbSBhcyBvbmUgXCJhdG9taWNcIiBtb2RpZnkgY2hhbmdlLlxuICAgIGlmIChvcGVyYXRpb24gPT09ICctJyAmJiBsaW5lWzBdID09PSAnKycpIHtcbiAgICAgIG9wZXJhdGlvbiA9ICcrJztcbiAgICB9XG5cbiAgICBpZiAob3BlcmF0aW9uID09PSBsaW5lWzBdKSB7XG4gICAgICByZXQucHVzaChsaW5lKTtcbiAgICAgIHN0YXRlLmluZGV4Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBjb2xsZWN0Q29udGV4dChzdGF0ZSwgbWF0Y2hDaGFuZ2VzKSB7XG4gIGxldCBjaGFuZ2VzID0gW10sXG4gICAgICBtZXJnZWQgPSBbXSxcbiAgICAgIG1hdGNoSW5kZXggPSAwLFxuICAgICAgY29udGV4dENoYW5nZXMgPSBmYWxzZSxcbiAgICAgIGNvbmZsaWN0ZWQgPSBmYWxzZTtcbiAgd2hpbGUgKG1hdGNoSW5kZXggPCBtYXRjaENoYW5nZXMubGVuZ3RoXG4gICAgICAgICYmIHN0YXRlLmluZGV4IDwgc3RhdGUubGluZXMubGVuZ3RoKSB7XG4gICAgbGV0IGNoYW5nZSA9IHN0YXRlLmxpbmVzW3N0YXRlLmluZGV4XSxcbiAgICAgICAgbWF0Y2ggPSBtYXRjaENoYW5nZXNbbWF0Y2hJbmRleF07XG5cbiAgICAvLyBPbmNlIHdlJ3ZlIGhpdCBvdXIgYWRkLCB0aGVuIHdlIGFyZSBkb25lXG4gICAgaWYgKG1hdGNoWzBdID09PSAnKycpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnRleHRDaGFuZ2VzID0gY29udGV4dENoYW5nZXMgfHwgY2hhbmdlWzBdICE9PSAnICc7XG5cbiAgICBtZXJnZWQucHVzaChtYXRjaCk7XG4gICAgbWF0Y2hJbmRleCsrO1xuXG4gICAgLy8gQ29uc3VtZSBhbnkgYWRkaXRpb25zIGluIHRoZSBvdGhlciBibG9jayBhcyBhIGNvbmZsaWN0IHRvIGF0dGVtcHRcbiAgICAvLyB0byBwdWxsIGluIHRoZSByZW1haW5pbmcgY29udGV4dCBhZnRlciB0aGlzXG4gICAgaWYgKGNoYW5nZVswXSA9PT0gJysnKSB7XG4gICAgICBjb25mbGljdGVkID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKGNoYW5nZVswXSA9PT0gJysnKSB7XG4gICAgICAgIGNoYW5nZXMucHVzaChjaGFuZ2UpO1xuICAgICAgICBjaGFuZ2UgPSBzdGF0ZS5saW5lc1srK3N0YXRlLmluZGV4XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF0Y2guc3Vic3RyKDEpID09PSBjaGFuZ2Uuc3Vic3RyKDEpKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgIHN0YXRlLmluZGV4Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZsaWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICgobWF0Y2hDaGFuZ2VzW21hdGNoSW5kZXhdIHx8ICcnKVswXSA9PT0gJysnXG4gICAgICAmJiBjb250ZXh0Q2hhbmdlcykge1xuICAgIGNvbmZsaWN0ZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNvbmZsaWN0ZWQpIHtcbiAgICByZXR1cm4gY2hhbmdlcztcbiAgfVxuXG4gIHdoaWxlIChtYXRjaEluZGV4IDwgbWF0Y2hDaGFuZ2VzLmxlbmd0aCkge1xuICAgIG1lcmdlZC5wdXNoKG1hdGNoQ2hhbmdlc1ttYXRjaEluZGV4KytdKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbWVyZ2VkLFxuICAgIGNoYW5nZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gYWxsUmVtb3ZlcyhjaGFuZ2VzKSB7XG4gIHJldHVybiBjaGFuZ2VzLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjaGFuZ2UpIHtcbiAgICByZXR1cm4gcHJldiAmJiBjaGFuZ2VbMF0gPT09ICctJztcbiAgfSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBza2lwUmVtb3ZlU3VwZXJzZXQoc3RhdGUsIHJlbW92ZUNoYW5nZXMsIGRlbHRhKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGVsdGE7IGkrKykge1xuICAgIGxldCBjaGFuZ2VDb250ZW50ID0gcmVtb3ZlQ2hhbmdlc1tyZW1vdmVDaGFuZ2VzLmxlbmd0aCAtIGRlbHRhICsgaV0uc3Vic3RyKDEpO1xuICAgIGlmIChzdGF0ZS5saW5lc1tzdGF0ZS5pbmRleCArIGldICE9PSAnICcgKyBjaGFuZ2VDb250ZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUuaW5kZXggKz0gZGVsdGE7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjYWxjT2xkTmV3TGluZUNvdW50KGxpbmVzKSB7XG4gIGxldCBvbGRMaW5lcyA9IDA7XG4gIGxldCBuZXdMaW5lcyA9IDA7XG5cbiAgbGluZXMuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgaWYgKHR5cGVvZiBsaW5lICE9PSAnc3RyaW5nJykge1xuICAgICAgbGV0IG15Q291bnQgPSBjYWxjT2xkTmV3TGluZUNvdW50KGxpbmUubWluZSk7XG4gICAgICBsZXQgdGhlaXJDb3VudCA9IGNhbGNPbGROZXdMaW5lQ291bnQobGluZS50aGVpcnMpO1xuXG4gICAgICBpZiAob2xkTGluZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAobXlDb3VudC5vbGRMaW5lcyA9PT0gdGhlaXJDb3VudC5vbGRMaW5lcykge1xuICAgICAgICAgIG9sZExpbmVzICs9IG15Q291bnQub2xkTGluZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2xkTGluZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG5ld0xpbmVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG15Q291bnQubmV3TGluZXMgPT09IHRoZWlyQ291bnQubmV3TGluZXMpIHtcbiAgICAgICAgICBuZXdMaW5lcyArPSBteUNvdW50Lm5ld0xpbmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0xpbmVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChuZXdMaW5lcyAhPT0gdW5kZWZpbmVkICYmIChsaW5lWzBdID09PSAnKycgfHwgbGluZVswXSA9PT0gJyAnKSkge1xuICAgICAgICBuZXdMaW5lcysrO1xuICAgICAgfVxuICAgICAgaWYgKG9sZExpbmVzICE9PSB1bmRlZmluZWQgJiYgKGxpbmVbMF0gPT09ICctJyB8fCBsaW5lWzBdID09PSAnICcpKSB7XG4gICAgICAgIG9sZExpbmVzKys7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge29sZExpbmVzLCBuZXdMaW5lc307XG59XG4iXX0=\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parsePatch = parsePatch;\n\n/*istanbul ignore end*/\nfunction parsePatch(uniDiff) {\n  /*istanbul ignore start*/\n  var\n  /*istanbul ignore end*/\n  options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      list = [],\n      i = 0;\n\n  function parseIndex() {\n    var index = {};\n    list.push(index); // Parse diff metadata\n\n    while (i < diffstr.length) {\n      var line = diffstr[i]; // File header found, end parsing diff metadata\n\n      if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n        break;\n      } // Diff index\n\n\n      var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\n      if (header) {\n        index.index = header[1];\n      }\n\n      i++;\n    } // Parse file headers if they are defined. Unified diff requires them, but\n    // there's no technical issues to have an isolated hunk without file header\n\n\n    parseFileHeader(index);\n    parseFileHeader(index); // Parse hunks\n\n    index.hunks = [];\n\n    while (i < diffstr.length) {\n      var _line = diffstr[i];\n\n      if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n        break;\n      } else if (/^@@/.test(_line)) {\n        index.hunks.push(parseHunk());\n      } else if (_line && options.strict) {\n        // Ignore unexpected content unless in strict mode\n        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n      } else {\n        i++;\n      }\n    }\n  } // Parses the --- and +++ headers, if none are found, no lines\n  // are consumed.\n\n\n  function parseFileHeader(index) {\n    var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\n    if (fileHeader) {\n      var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n      var data = fileHeader[2].split('\\t', 2);\n      var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\n      if (/^\".*\"$/.test(fileName)) {\n        fileName = fileName.substr(1, fileName.length - 2);\n      }\n\n      index[keyPrefix + 'FileName'] = fileName;\n      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n      i++;\n    }\n  } // Parses a hunk\n  // This assumes that we are at the start of a hunk.\n\n\n  function parseHunk() {\n    var chunkHeaderIndex = i,\n        chunkHeaderLine = diffstr[i++],\n        chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n    var hunk = {\n      oldStart: +chunkHeader[1],\n      oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n      newStart: +chunkHeader[3],\n      newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n      lines: [],\n      linedelimiters: []\n    }; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart += 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart += 1;\n    }\n\n    var addCount = 0,\n        removeCount = 0;\n\n    for (; i < diffstr.length; i++) {\n      // Lines starting with '---' could be mistaken for the \"remove line\" operation\n      // But they could be the header for the next file. Therefore prune such cases out.\n      if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n        break;\n      }\n\n      var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n        hunk.lines.push(diffstr[i]);\n        hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n        if (operation === '+') {\n          addCount++;\n        } else if (operation === '-') {\n          removeCount++;\n        } else if (operation === ' ') {\n          addCount++;\n          removeCount++;\n        }\n      } else {\n        break;\n      }\n    } // Handle the empty block count case\n\n\n    if (!addCount && hunk.newLines === 1) {\n      hunk.newLines = 0;\n    }\n\n    if (!removeCount && hunk.oldLines === 1) {\n      hunk.oldLines = 0;\n    } // Perform optional sanity checking\n\n\n    if (options.strict) {\n      if (addCount !== hunk.newLines) {\n        throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n\n      if (removeCount !== hunk.oldLines) {\n        throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n    }\n\n    return hunk;\n  }\n\n  while (i < diffstr.length) {\n    parseIndex();\n  }\n\n  return list;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXRjaC9wYXJzZS5qcyJdLCJuYW1lcyI6WyJwYXJzZVBhdGNoIiwidW5pRGlmZiIsIm9wdGlvbnMiLCJkaWZmc3RyIiwic3BsaXQiLCJkZWxpbWl0ZXJzIiwibWF0Y2giLCJsaXN0IiwiaSIsInBhcnNlSW5kZXgiLCJpbmRleCIsInB1c2giLCJsZW5ndGgiLCJsaW5lIiwidGVzdCIsImhlYWRlciIsImV4ZWMiLCJwYXJzZUZpbGVIZWFkZXIiLCJodW5rcyIsInBhcnNlSHVuayIsInN0cmljdCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbGVIZWFkZXIiLCJrZXlQcmVmaXgiLCJkYXRhIiwiZmlsZU5hbWUiLCJyZXBsYWNlIiwic3Vic3RyIiwidHJpbSIsImNodW5rSGVhZGVySW5kZXgiLCJjaHVua0hlYWRlckxpbmUiLCJjaHVua0hlYWRlciIsImh1bmsiLCJvbGRTdGFydCIsIm9sZExpbmVzIiwibmV3U3RhcnQiLCJuZXdMaW5lcyIsImxpbmVzIiwibGluZWRlbGltaXRlcnMiLCJhZGRDb3VudCIsInJlbW92ZUNvdW50IiwiaW5kZXhPZiIsIm9wZXJhdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQU8sU0FBU0EsVUFBVCxDQUFvQkMsT0FBcEIsRUFBMkM7QUFBQTtBQUFBO0FBQUE7QUFBZEMsRUFBQUEsT0FBYyx1RUFBSixFQUFJO0FBQ2hELE1BQUlDLE9BQU8sR0FBR0YsT0FBTyxDQUFDRyxLQUFSLENBQWMscUJBQWQsQ0FBZDtBQUFBLE1BQ0lDLFVBQVUsR0FBR0osT0FBTyxDQUFDSyxLQUFSLENBQWMsc0JBQWQsS0FBeUMsRUFEMUQ7QUFBQSxNQUVJQyxJQUFJLEdBQUcsRUFGWDtBQUFBLE1BR0lDLENBQUMsR0FBRyxDQUhSOztBQUtBLFdBQVNDLFVBQVQsR0FBc0I7QUFDcEIsUUFBSUMsS0FBSyxHQUFHLEVBQVo7QUFDQUgsSUFBQUEsSUFBSSxDQUFDSSxJQUFMLENBQVVELEtBQVYsRUFGb0IsQ0FJcEI7O0FB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QUwsS0FBa0IsQ0FBbkMsRUFBc0M7QUFDcENKLE1BQUFBLElBQUksQ0FBQ0ksUUFBTCxHQUFnQixDQUFoQjtBQUNEOztBQUNELFFBQUksQ0FBQ0ksV0FBRCxJQUFnQlIsSUFBSSxDQUFDRSxRQUFMLEtBQWtCLENBQXRDLEVBQXlDO0FBQ3ZDRixNQUFBQSxJQUFJLENBQUNFLFFBQUwsR0FBZ0IsQ0FBaEI7QUFDRCxLQTVEa0IsQ0E4RG5COzs7QUFDQSxRQUFJbEMsT0FBTyxDQUFDa0IsTUFBWixFQUFvQjtBQUNsQixVQUFJcUIsUUFBUSxLQUFLUCxJQUFJLENBQUNJLFFBQXRCLEVBQWdDO0FBQzlCLGNBQU0sSUFBSWpCLEtBQUosQ0FBVSxzREFBc0RVLGdCQUFnQixHQUFHLENBQXpFLENBQVYsQ0FBTjtBQUNEOztBQUNELFVBQUlXLFdBQVcsS0FBS1IsSUFBSSxDQUFDRSxRQUF6QixFQUFtQztBQUNqQyxjQUFNLElBQUlmLEtBQUosQ0FBVSx3REFBd0RVLGdCQUFnQixHQUFHLENBQTNFLENBQVYsQ0FBTjtBQUNEO0FBQ0Y7O0FBRUQsV0FBT0csSUFBUDtBQUNEOztBQUVELFNBQU8xQixDQUFDLEdBQUdMLE9BQU8sQ0FBQ1MsTUFBbkIsRUFBMkI7QUFDekJILElBQUFBLFVBQVU7QUFDWDs7QUFFRCxTQUFPRixJQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcGFyc2VQYXRjaCh1bmlEaWZmLCBvcHRpb25zID0ge30pIHtcbiAgbGV0IGRpZmZzdHIgPSB1bmlEaWZmLnNwbGl0KC9cXHJcXG58W1xcblxcdlxcZlxcclxceDg1XS8pLFxuICAgICAgZGVsaW1pdGVycyA9IHVuaURpZmYubWF0Y2goL1xcclxcbnxbXFxuXFx2XFxmXFxyXFx4ODVdL2cpIHx8IFtdLFxuICAgICAgbGlzdCA9IFtdLFxuICAgICAgaSA9IDA7XG5cbiAgZnVuY3Rpb24gcGFyc2VJbmRleCgpIHtcbiAgICBsZXQgaW5kZXggPSB7fTtcbiAgICBsaXN0LnB1c2goaW5kZXgpO1xuXG4gICAgLy8gUGFyc2UgZGlmZiBtZXRhZGF0YVxuICAgIHdoaWxlIChpIDwgZGlmZnN0ci5sZW5ndGgpIHtcbiAgICAgIGxldCBsaW5lID0gZGlmZnN0cltpXTtcblxuICAgICAgLy8gRmlsZSBoZWFkZXIgZm91bmQsIGVuZCBwYXJzaW5nIGRpZmYgbWV0YWRhdGFcbiAgICAgIGlmICgoL14oXFwtXFwtXFwtfFxcK1xcK1xcK3xAQClcXHMvKS50ZXN0KGxpbmUpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBEaWZmIGluZGV4XG4gICAgICBsZXQgaGVhZGVyID0gKC9eKD86SW5kZXg6fGRpZmYoPzogLXIgXFx3KykrKVxccysoLis/KVxccyokLykuZXhlYyhsaW5lKTtcbiAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgaW5kZXguaW5kZXggPSBoZWFkZXJbMV07XG4gICAgICB9XG5cbiAgICAgIGkrKztcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBmaWxlIGhlYWRlcnMgaWYgdGhleSBhcmUgZGVmaW5lZC4gVW5pZmllZCBkaWZmIHJlcXVpcmVzIHRoZW0sIGJ1dFxuICAgIC8vIHRoZXJlJ3Mgbm8gdGVjaG5pY2FsIGlzc3VlcyB0byBoYXZlIGFuIGlzb2xhdGVkIGh1bmsgd2l0aG91dCBmaWxlIGhlYWRlclxuICAgIHBhcnNlRmlsZUhlYWRlcihpbmRleCk7XG4gICAgcGFyc2VGaWxlSGVhZGVyKGluZGV4KTtcblxuICAgIC8vIFBhcnNlIGh1bmtzXG4gICAgaW5kZXguaHVua3MgPSBbXTtcblxuICAgIHdoaWxlIChpIDwgZGlmZnN0ci5sZW5ndGgpIHtcbiAgICAgIGxldCBsaW5lID0gZGlmZnN0cltpXTtcblxuICAgICAgaWYgKCgvXihJbmRleDp8ZGlmZnxcXC1cXC1cXC18XFwrXFwrXFwrKVxccy8pLnRlc3QobGluZSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKCgvXkBALykudGVzdChsaW5lKSkge1xuICAgICAgICBpbmRleC5odW5rcy5wdXNoKHBhcnNlSHVuaygpKTtcbiAgICAgIH0gZWxzZSBpZiAobGluZSAmJiBvcHRpb25zLnN0cmljdCkge1xuICAgICAgICAvLyBJZ25vcmUgdW5leHBlY3RlZCBjb250ZW50IHVubGVzcyBpbiBzdHJpY3QgbW9kZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbGluZSAnICsgKGkgKyAxKSArICcgJyArIEpTT04uc3RyaW5naWZ5KGxpbmUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZXMgdGhlIC0tLSBhbmQgKysrIGhlYWRlcnMsIGlmIG5vbmUgYXJlIGZvdW5kLCBubyBsaW5lc1xuICAvLyBhcmUgY29uc3VtZWQuXG4gIGZ1bmN0aW9uIHBhcnNlRmlsZUhlYWRlcihpbmRleCkge1xuICAgIGNvbnN0IGZpbGVIZWFkZXIgPSAoL14oLS0tfFxcK1xcK1xcKylcXHMrKC4qKSQvKS5leGVjKGRpZmZzdHJbaV0pO1xuICAgIGlmIChmaWxlSGVhZGVyKSB7XG4gICAgICBsZXQga2V5UHJlZml4ID0gZmlsZUhlYWRlclsxXSA9PT0gJy0tLScgPyAnb2xkJyA6ICduZXcnO1xuICAgICAgY29uc3QgZGF0YSA9IGZpbGVIZWFkZXJbMl0uc3BsaXQoJ1xcdCcsIDIpO1xuICAgICAgbGV0IGZpbGVOYW1lID0gZGF0YVswXS5yZXBsYWNlKC9cXFxcXFxcXC9nLCAnXFxcXCcpO1xuICAgICAgaWYgKCgvXlwiLipcIiQvKS50ZXN0KGZpbGVOYW1lKSkge1xuICAgICAgICBmaWxlTmFtZSA9IGZpbGVOYW1lLnN1YnN0cigxLCBmaWxlTmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIH1cbiAgICAgIGluZGV4W2tleVByZWZpeCArICdGaWxlTmFtZSddID0gZmlsZU5hbWU7XG4gICAgICBpbmRleFtrZXlQcmVmaXggKyAnSGVhZGVyJ10gPSAoZGF0YVsxXSB8fCAnJykudHJpbSgpO1xuXG4gICAgICBpKys7XG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2VzIGEgaHVua1xuICAvLyBUaGlzIGFzc3VtZXMgdGhhdCB3ZSBhcmUgYXQgdGhlIHN0YXJ0IG9mIGEgaHVuay5cbiAgZnVuY3Rpb24gcGFyc2VIdW5rKCkge1xuICAgIGxldCBjaHVua0hlYWRlckluZGV4ID0gaSxcbiAgICAgICAgY2h1bmtIZWFkZXJMaW5lID0gZGlmZnN0cltpKytdLFxuICAgICAgICBjaHVua0hlYWRlciA9IGNodW5rSGVhZGVyTGluZS5zcGxpdCgvQEAgLShcXGQrKSg/OiwoXFxkKykpPyBcXCsoXFxkKykoPzosKFxcZCspKT8gQEAvKTtcblxuICAgIGxldCBodW5rID0ge1xuICAgICAgb2xkU3RhcnQ6ICtjaHVua0hlYWRlclsxXSxcbiAgICAgIG9sZExpbmVzOiB0eXBlb2YgY2h1bmtIZWFkZXJbMl0gPT09ICd1bmRlZmluZWQnID8gMSA6ICtjaHVua0hlYWRlclsyXSxcbiAgICAgIG5ld1N0YXJ0OiArY2h1bmtIZWFkZXJbM10sXG4gICAgICBuZXdMaW5lczogdHlwZW9mIGNodW5rSGVhZGVyWzRdID09PSAndW5kZWZpbmVkJyA/IDEgOiArY2h1bmtIZWFkZXJbNF0sXG4gICAgICBsaW5lczogW10sXG4gICAgICBsaW5lZGVsaW1pdGVyczogW11cbiAgICB9O1xuXG4gICAgLy8gVW5pZmllZCBEaWZmIEZvcm1hdCBxdWlyazogSWYgdGhlIGNodW5rIHNpemUgaXMgMCxcbiAgICAvLyB0aGUgZmlyc3QgbnVtYmVyIGlzIG9uZSBsb3dlciB0aGFuIG9uZSB3b3VsZCBleHBlY3QuXG4gICAgLy8gaHR0cHM6Ly93d3cuYXJ0aW1hLmNvbS93ZWJsb2dzL3ZpZXdwb3N0LmpzcD90aHJlYWQ9MTY0MjkzXG4gICAgaWYgKGh1bmsub2xkTGluZXMgPT09IDApIHtcbiAgICAgIGh1bmsub2xkU3RhcnQgKz0gMTtcbiAgICB9XG4gICAgaWYgKGh1bmsubmV3TGluZXMgPT09IDApIHtcbiAgICAgIGh1bmsubmV3U3RhcnQgKz0gMTtcbiAgICB9XG5cbiAgICBsZXQgYWRkQ291bnQgPSAwLFxuICAgICAgICByZW1vdmVDb3VudCA9IDA7XG4gICAgZm9yICg7IGkgPCBkaWZmc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBMaW5lcyBzdGFydGluZyB3aXRoICctLS0nIGNvdWxkIGJlIG1pc3Rha2VuIGZvciB0aGUgXCJyZW1vdmUgbGluZVwiIG9wZXJhdGlvblxuICAgICAgLy8gQnV0IHRoZXkgY291bGQgYmUgdGhlIGhlYWRlciBmb3IgdGhlIG5leHQgZmlsZS4gVGhlcmVmb3JlIHBydW5lIHN1Y2ggY2FzZXMgb3V0LlxuICAgICAgaWYgKGRpZmZzdHJbaV0uaW5kZXhPZignLS0tICcpID09PSAwXG4gICAgICAgICAgICAmJiAoaSArIDIgPCBkaWZmc3RyLmxlbmd0aClcbiAgICAgICAgICAgICYmIGRpZmZzdHJbaSArIDFdLmluZGV4T2YoJysrKyAnKSA9PT0gMFxuICAgICAgICAgICAgJiYgZGlmZnN0cltpICsgMl0uaW5kZXhPZignQEAnKSA9PT0gMCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGV0IG9wZXJhdGlvbiA9IChkaWZmc3RyW2ldLmxlbmd0aCA9PSAwICYmIGkgIT0gKGRpZmZzdHIubGVuZ3RoIC0gMSkpID8gJyAnIDogZGlmZnN0cltpXVswXTtcblxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJysnIHx8IG9wZXJhdGlvbiA9PT0gJy0nIHx8IG9wZXJhdGlvbiA9PT0gJyAnIHx8IG9wZXJhdGlvbiA9PT0gJ1xcXFwnKSB7XG4gICAgICAgIGh1bmsubGluZXMucHVzaChkaWZmc3RyW2ldKTtcbiAgICAgICAgaHVuay5saW5lZGVsaW1pdGVycy5wdXNoKGRlbGltaXRlcnNbaV0gfHwgJ1xcbicpO1xuXG4gICAgICAgIGlmIChvcGVyYXRpb24gPT09ICcrJykge1xuICAgICAgICAgIGFkZENvdW50Kys7XG4gICAgICAgIH0gZWxzZSBpZiAob3BlcmF0aW9uID09PSAnLScpIHtcbiAgICAgICAgICByZW1vdmVDb3VudCsrO1xuICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJyAnKSB7XG4gICAgICAgICAgYWRkQ291bnQrKztcbiAgICAgICAgICByZW1vdmVDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgdGhlIGVtcHR5IGJsb2NrIGNvdW50IGNhc2VcbiAgICBpZiAoIWFkZENvdW50ICYmIGh1bmsubmV3TGluZXMgPT09IDEpIHtcbiAgICAgIGh1bmsubmV3TGluZXMgPSAwO1xuICAgIH1cbiAgICBpZiAoIXJlbW92ZUNvdW50ICYmIGh1bmsub2xkTGluZXMgPT09IDEpIHtcbiAgICAgIGh1bmsub2xkTGluZXMgPSAwO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm0gb3B0aW9uYWwgc2FuaXR5IGNoZWNraW5nXG4gICAgaWYgKG9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICBpZiAoYWRkQ291bnQgIT09IGh1bmsubmV3TGluZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBZGRlZCBsaW5lIGNvdW50IGRpZCBub3QgbWF0Y2ggZm9yIGh1bmsgYXQgbGluZSAnICsgKGNodW5rSGVhZGVySW5kZXggKyAxKSk7XG4gICAgICB9XG4gICAgICBpZiAocmVtb3ZlQ291bnQgIT09IGh1bmsub2xkTGluZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZW1vdmVkIGxpbmUgY291bnQgZGlkIG5vdCBtYXRjaCBmb3IgaHVuayBhdCBsaW5lICcgKyAoY2h1bmtIZWFkZXJJbmRleCArIDEpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaHVuaztcbiAgfVxuXG4gIHdoaWxlIChpIDwgZGlmZnN0ci5sZW5ndGgpIHtcbiAgICBwYXJzZUluZGV4KCk7XG4gIH1cblxuICByZXR1cm4gbGlzdDtcbn1cbiJdfQ==\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.arrayEqual = arrayEqual;\nexports.arrayStartsWith = arrayStartsWith;\n\n/*istanbul ignore end*/\nfunction arrayEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  return arrayStartsWith(a, b);\n}\n\nfunction arrayStartsWith(array, start) {\n  if (start.length > array.length) {\n    return false;\n  }\n\n  for (var i = 0; i < start.length; i++) {\n    if (start[i] !== array[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2FycmF5LmpzIl0sIm5hbWVzIjpbImFycmF5RXF1YWwiLCJhIiwiYiIsImxlbmd0aCIsImFycmF5U3RhcnRzV2l0aCIsImFycmF5Iiwic3RhcnQiLCJpIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQU8sU0FBU0EsVUFBVCxDQUFvQkMsQ0FBcEIsRUFBdUJDLENBQXZCLEVBQTBCO0FBQy9CLE1BQUlELENBQUMsQ0FBQ0UsTUFBRixLQUFhRCxDQUFDLENBQUNDLE1BQW5CLEVBQTJCO0FBQ3pCLFdBQU8sS0FBUDtBQUNEOztBQUVELFNBQU9DLGVBQWUsQ0FBQ0gsQ0FBRCxFQUFJQyxDQUFKLENBQXRCO0FBQ0Q7O0FBRU0sU0FBU0UsZUFBVCxDQUF5QkMsS0FBekIsRUFBZ0NDLEtBQWhDLEVBQXVDO0FBQzVDLE1BQUlBLEtBQUssQ0FBQ0gsTUFBTixHQUFlRSxLQUFLLENBQUNGLE1BQXpCLEVBQWlDO0FBQy9CLFdBQU8sS0FBUDtBQUNEOztBQUVELE9BQUssSUFBSUksQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0QsS0FBSyxDQUFDSCxNQUExQixFQUFrQ0ksQ0FBQyxFQUFuQyxFQUF1QztBQUNyQyxRQUFJRCxLQUFLLENBQUNDLENBQUQsQ0FBTCxLQUFhRixLQUFLLENBQUNFLENBQUQsQ0FBdEIsRUFBMkI7QUFDekIsYUFBTyxLQUFQO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPLElBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBhcnJheUVxdWFsKGEsIGIpIHtcbiAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBhcnJheVN0YXJ0c1dpdGgoYSwgYik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheVN0YXJ0c1dpdGgoYXJyYXksIHN0YXJ0KSB7XG4gIGlmIChzdGFydC5sZW5ndGggPiBhcnJheS5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0YXJ0W2ldICE9PSBhcnJheVtpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIl19\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\n/*istanbul ignore end*/\n// Iterator that traverses in the range of [min, max], stepping\n// by distance from a given start position. I.e. for [0, 4], with\n// start of 2, this will iterate 2, 3, 1, 4, 0.\nfunction\n/*istanbul ignore start*/\n_default\n/*istanbul ignore end*/\n(start, minLine, maxLine) {\n  var wantForward = true,\n      backwardExhausted = false,\n      forwardExhausted = false,\n      localOffset = 1;\n  return function iterator() {\n    if (wantForward && !forwardExhausted) {\n      if (backwardExhausted) {\n        localOffset++;\n      } else {\n        wantForward = false;\n      } // Check if trying to fit beyond text length, and if not, check it fits\n      // after offset location (or desired location on first iteration)\n\n\n      if (start + localOffset <= maxLine) {\n        return localOffset;\n      }\n\n      forwardExhausted = true;\n    }\n\n    if (!backwardExhausted) {\n      if (!forwardExhausted) {\n        wantForward = true;\n      } // Check if trying to fit before text beginning, and if not, check it fits\n      // before offset location\n\n\n      if (minLine <= start - localOffset) {\n        return -localOffset++;\n      }\n\n      backwardExhausted = true;\n      return iterator();\n    } // We tried to fit hunk before text beginning and beyond text length, then\n    // hunk can't fit on the text. Return undefined\n\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2Rpc3RhbmNlLWl0ZXJhdG9yLmpzIl0sIm5hbWVzIjpbInN0YXJ0IiwibWluTGluZSIsIm1heExpbmUiLCJ3YW50Rm9yd2FyZCIsImJhY2t3YXJkRXhoYXVzdGVkIiwiZm9yd2FyZEV4aGF1c3RlZCIsImxvY2FsT2Zmc2V0IiwiaXRlcmF0b3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNlO0FBQUE7QUFBQTtBQUFBO0FBQUEsQ0FBU0EsS0FBVCxFQUFnQkMsT0FBaEIsRUFBeUJDLE9BQXpCLEVBQWtDO0FBQy9DLE1BQUlDLFdBQVcsR0FBRyxJQUFsQjtBQUFBLE1BQ0lDLGlCQUFpQixHQUFHLEtBRHhCO0FBQUEsTUFFSUMsZ0JBQWdCLEdBQUcsS0FGdkI7QUFBQSxNQUdJQyxXQUFXLEdBQUcsQ0FIbEI7QUFLQSxTQUFPLFNBQVNDLFFBQVQsR0FBb0I7QUFDekIsUUFBSUosV0FBVyxJQUFJLENBQUNFLGdCQUFwQixFQUFzQztBQUNwQyxVQUFJRCxpQkFBSixFQUF1QjtBQUNyQkUsUUFBQUEsV0FBVztBQUNaLE9BRkQsTUFFTztBQUNMSCxRQUFBQSxXQUFXLEdBQUcsS0FBZDtBQUNELE9BTG1DLENBT3BDO0FBQ0E7OztBQUNBLFVBQUlILEtBQUssR0FBR00sV0FBUixJQUF1QkosT0FBM0IsRUFBb0M7QUFDbEMsZUFBT0ksV0FBUDtBQUNEOztBQUVERCxNQUFBQSxnQkFBZ0IsR0FBRyxJQUFuQjtBQUNEOztBQUVELFFBQUksQ0FBQ0QsaUJBQUwsRUFBd0I7QUFDdEIsVUFBSSxDQUFDQyxnQkFBTCxFQUF1QjtBQUNyQkYsUUFBQUEsV0FBVyxHQUFHLElBQWQ7QUFDRCxPQUhxQixDQUt0QjtBQUNBOzs7QUFDQSxVQUFJRixPQUFPLElBQUlELEtBQUssR0FBR00sV0FBdkIsRUFBb0M7QUFDbEMsZUFBTyxDQUFDQSxXQUFXLEVBQW5CO0FBQ0Q7O0FBRURGLE1BQUFBLGlCQUFpQixHQUFHLElBQXBCO0FBQ0EsYUFBT0csUUFBUSxFQUFmO0FBQ0QsS0E5QndCLENBZ0N6QjtBQUNBOztBQUNELEdBbENEO0FBbUNEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSXRlcmF0b3IgdGhhdCB0cmF2ZXJzZXMgaW4gdGhlIHJhbmdlIG9mIFttaW4sIG1heF0sIHN0ZXBwaW5nXG4vLyBieSBkaXN0YW5jZSBmcm9tIGEgZ2l2ZW4gc3RhcnQgcG9zaXRpb24uIEkuZS4gZm9yIFswLCA0XSwgd2l0aFxuLy8gc3RhcnQgb2YgMiwgdGhpcyB3aWxsIGl0ZXJhdGUgMiwgMywgMSwgNCwgMC5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0YXJ0LCBtaW5MaW5lLCBtYXhMaW5lKSB7XG4gIGxldCB3YW50Rm9yd2FyZCA9IHRydWUsXG4gICAgICBiYWNrd2FyZEV4aGF1c3RlZCA9IGZhbHNlLFxuICAgICAgZm9yd2FyZEV4aGF1c3RlZCA9IGZhbHNlLFxuICAgICAgbG9jYWxPZmZzZXQgPSAxO1xuXG4gIHJldHVybiBmdW5jdGlvbiBpdGVyYXRvcigpIHtcbiAgICBpZiAod2FudEZvcndhcmQgJiYgIWZvcndhcmRFeGhhdXN0ZWQpIHtcbiAgICAgIGlmIChiYWNrd2FyZEV4aGF1c3RlZCkge1xuICAgICAgICBsb2NhbE9mZnNldCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FudEZvcndhcmQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdHJ5aW5nIHRvIGZpdCBiZXlvbmQgdGV4dCBsZW5ndGgsIGFuZCBpZiBub3QsIGNoZWNrIGl0IGZpdHNcbiAgICAgIC8vIGFmdGVyIG9mZnNldCBsb2NhdGlvbiAob3IgZGVzaXJlZCBsb2NhdGlvbiBvbiBmaXJzdCBpdGVyYXRpb24pXG4gICAgICBpZiAoc3RhcnQgKyBsb2NhbE9mZnNldCA8PSBtYXhMaW5lKSB7XG4gICAgICAgIHJldHVybiBsb2NhbE9mZnNldDtcbiAgICAgIH1cblxuICAgICAgZm9yd2FyZEV4aGF1c3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFiYWNrd2FyZEV4aGF1c3RlZCkge1xuICAgICAgaWYgKCFmb3J3YXJkRXhoYXVzdGVkKSB7XG4gICAgICAgIHdhbnRGb3J3YXJkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdHJ5aW5nIHRvIGZpdCBiZWZvcmUgdGV4dCBiZWdpbm5pbmcsIGFuZCBpZiBub3QsIGNoZWNrIGl0IGZpdHNcbiAgICAgIC8vIGJlZm9yZSBvZmZzZXQgbG9jYXRpb25cbiAgICAgIGlmIChtaW5MaW5lIDw9IHN0YXJ0IC0gbG9jYWxPZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIC1sb2NhbE9mZnNldCsrO1xuICAgICAgfVxuXG4gICAgICBiYWNrd2FyZEV4aGF1c3RlZCA9IHRydWU7XG4gICAgICByZXR1cm4gaXRlcmF0b3IoKTtcbiAgICB9XG5cbiAgICAvLyBXZSB0cmllZCB0byBmaXQgaHVuayBiZWZvcmUgdGV4dCBiZWdpbm5pbmcgYW5kIGJleW9uZCB0ZXh0IGxlbmd0aCwgdGhlblxuICAgIC8vIGh1bmsgY2FuJ3QgZml0IG9uIHRoZSB0ZXh0LiBSZXR1cm4gdW5kZWZpbmVkXG4gIH07XG59XG4iXX0=\n","/*istanbul ignore start*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateOptions = generateOptions;\n\n/*istanbul ignore end*/\nfunction generateOptions(options, defaults) {\n  if (typeof options === 'function') {\n    defaults.callback = options;\n  } else if (options) {\n    for (var name in options) {\n      /* istanbul ignore else */\n      if (options.hasOwnProperty(name)) {\n        defaults[name] = options[name];\n      }\n    }\n  }\n\n  return defaults;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3BhcmFtcy5qcyJdLCJuYW1lcyI6WyJnZW5lcmF0ZU9wdGlvbnMiLCJvcHRpb25zIiwiZGVmYXVsdHMiLCJjYWxsYmFjayIsIm5hbWUiLCJoYXNPd25Qcm9wZXJ0eSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQU8sU0FBU0EsZUFBVCxDQUF5QkMsT0FBekIsRUFBa0NDLFFBQWxDLEVBQTRDO0FBQ2pELE1BQUksT0FBT0QsT0FBUCxLQUFtQixVQUF2QixFQUFtQztBQUNqQ0MsSUFBQUEsUUFBUSxDQUFDQyxRQUFULEdBQW9CRixPQUFwQjtBQUNELEdBRkQsTUFFTyxJQUFJQSxPQUFKLEVBQWE7QUFDbEIsU0FBSyxJQUFJRyxJQUFULElBQWlCSCxPQUFqQixFQUEwQjtBQUN4QjtBQUNBLFVBQUlBLE9BQU8sQ0FBQ0ksY0FBUixDQUF1QkQsSUFBdkIsQ0FBSixFQUFrQztBQUNoQ0YsUUFBQUEsUUFBUSxDQUFDRSxJQUFELENBQVIsR0FBaUJILE9BQU8sQ0FBQ0csSUFBRCxDQUF4QjtBQUNEO0FBQ0Y7QUFDRjs7QUFDRCxTQUFPRixRQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRzKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGRlZmF1bHRzLmNhbGxiYWNrID0gb3B0aW9ucztcbiAgfSBlbHNlIGlmIChvcHRpb25zKSB7XG4gICAgZm9yIChsZXQgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZGVmYXVsdHNbbmFtZV0gPSBvcHRpb25zW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZGVmYXVsdHM7XG59XG4iXX0=\n","/**\n * @fileoverview\n * This is the main class for using Elidable Texts,\n * a way to represent a larger, possibly multimodal document\n * to be used as prompt to an LLM.\n *\n * That document will need to be shortened to fit into a token budget.\n * Elidable Texts shorten it by dropping the least relevant lines,\n * and replacing them by ellipses (`[...]`).\n *\n * A typical way of using this class is to\n * - create an ElidableText from a some inputs,\n * - then call `makePrompt` to get a prompt that fits into a token budget.\n *\n * Like this:\n * ```\n * const question = new ElidableText(\n *   [`Could you look over Albert's PR and check whether we need to add tests for that one file?`, 0.5],\n *   [`They made the following changes to file ${this.filename} (in git diff format):`, 0.9],\n *   [this.diff, 0.7], // this.diff is an already constructed ElidableText\n *   [`The file now looks like this:`, 0.95],\n *   [documentWithLanguage, 0.8],\n *   [`Should I write tests for that?`, 1],\n * );\n * const prompt = question.makePrompt(1000); // makes sure no more than 1000 tokens\n * ```\n */\n\nimport {DocumentInfo} from '../prompt';\nimport {getTokenizer} from '../tokenization';\nimport {elidableTextForSourceCode} from './fromSourceCode';\nimport {LineWithValueAndCost} from './lineWithValueAndCost';\n\ntype InterpretableAsElidableText = string | ElidableText | DocumentInfo;\n\nexport class ElidableText {\n    lines: LineWithValueAndCost[] = [];\n\n    /**\n     * Create a text from a list of chunks, which can be strings or ElidableTexts.\n     * Supplying a number to the chunk corresponds to a priority.\n     * If the chunk is already elidable, the priorities are multiplied.\n     *\n     * If x is an ElidableText, then ElidableText(x) is the same as x.\n     * @param chunks\n     */\n    constructor(...chunks: (InterpretableAsElidableText | [InterpretableAsElidableText, number])[]) {\n        const lines: LineWithValueAndCost[] = [];\n        for (const chunk of chunks) {\n            // if array, take the second element as priority\n            const value = Array.isArray(chunk) ? chunk[1] : 1;\n            const input = Array.isArray(chunk) ? chunk[0] : chunk;\n            if (typeof input === 'string') {\n                input.split('\\n').forEach(line => lines.push(new LineWithValueAndCost(line, value)));\n            } else if (input instanceof ElidableText) {\n                lines.push(...input.lines.map(line => line.copy().adjustValue(value)));\n            } else if ('source' in input && 'languageId' in input) {\n                lines.push(...elidableTextForSourceCode(input).lines.map(line => line.copy().adjustValue(value)));\n            }\n        }\n        this.lines = lines;\n    }\n\n    adjust(multiplier: number): void {\n        this.lines.forEach(line => line.adjustValue(multiplier));\n    }\n\n    /** Change the cost of lines according to a specified function; e.g. to take into account different tokenziers */\n    recost(coster = (x: string) => getTokenizer().tokenLength(x + '\\n')): void {\n        this.lines.forEach(line => line.recost(coster));\n    }\n\n    /**\n     * Elides lines to make the prompt fit into a token budget.\n     * This is done by dropping the least desirable lines.\n     * @param maxTokens The maximum number of tokens to allow.\n     * @param ellipsis The string to use for ellipses.\n     * @param indentEllipses If true, indents ellipses with the minimum indentation of the elided lines.\n     * - only guarantees ellipses' indentation if there are sufficient tokens for it.\n     * - does not currently work well for tab-indented lines (will insert spaces instead of tabs)\n     * @param strategy \"removeLeastDesirable\" will greedily remove undesirable lines,\n     * \"removeLeastBangForBuck\" will remove the line that has the lowest value/cost ratio.\n     * The former is more likely to elide continguous blocks and thus often feels more natural.\n     * The latter can be more frugal by being less tempted to elide things like single whitespace lines.\n     * @param tokenizer The tokenizer to use for tokenizing the prompt.\n     */\n    makePrompt(\n        maxTokens: number,\n        ellipsis = '[...]',\n        indentEllipses = true,\n        strategy: 'removeLeastDesirable' | 'removeLeastBangForBuck' = 'removeLeastDesirable',\n        tokenizer = getTokenizer()\n    ): string {\n        // the function is factored out so that we can be sure that this.lines is not mutated\n        const lines = this.lines.map(line => line.copy());\n        return makePrompt(lines, maxTokens, ellipsis, indentEllipses, strategy, tokenizer);\n    }\n}\n\n/**\n * Worker function for {@link ElidableText.makePrompt}.\n * All params are the same except\n * @param lines The lines desired to be in the prompt -- will be mutated.\n */\nfunction makePrompt(\n    lines: LineWithValueAndCost[],\n    maxTokens: number,\n    ellipsis: string,\n    indentEllipses: boolean,\n    strategy: 'removeLeastDesirable' | 'removeLeastBangForBuck',\n    tokenizer: ReturnType<typeof getTokenizer>\n) {\n    if (tokenizer.tokenLength(ellipsis + '\\n') > maxTokens) {\n        throw new Error('maxTokens must be larger than the ellipsis length');\n    }\n    if (strategy === 'removeLeastBangForBuck') {\n        // adjust all line's values by dividing by their cost\n        lines.forEach(line => line.adjustValue(1 / line.cost));\n    }\n    // infiniteWorth is 1 bigger than the most desirable line\n    const infiniteWorth = lines.reduce((a, b) => Math.max(a, b.value), 0) + 1;\n    // indentationInfinity is longer than the longest line.text\n    const infiniteIndentation = lines.reduce((a, b) => Math.max(a, b.text.length), 0) + 1;\n    // the test of equality to possibly indented ellipses is whether it's identical to the trimmed ellipsis\n    const trimmedEllipsis = ellipsis.trim();\n\n    let totalCost = lines.reduce((sum, line) => sum + line.cost, 0);\n    let defensiveCounter = lines.length + 1;\n    while (totalCost > maxTokens && defensiveCounter-- >= -1) {\n        // find the least desirable line\n        const leastDesirable = lines.reduce((least, line) => {\n            if (line.value < least.value) {\n                return line;\n            } else {\n                return least;\n            }\n        });\n        // drop it, but replace with ellipsis if it's between two non-ellipsis lines\n        const index = lines.indexOf(leastDesirable);\n        // the right indentation is the indentation of the line (if not blank) or the most recent non-blank line\n        const mostRecentNonBlankLine = lines\n            .slice(0, index + 1)\n            .reverse()\n            .find(line => line.text.trim() !== '') ?? {text: ''};\n        const indentation = indentEllipses\n            ? Math.min(\n                  // the smallest one of: the index indentation, and the before and after indentation _should they be ellipses_\n                  // note that whitespace lines do not count\n                  mostRecentNonBlankLine.text.match(/^\\s*/)?.[0].length ?? 0,\n                  lines[index - 1]?.text.trim() === trimmedEllipsis\n                      ? lines[index - 1]?.text.match(/^\\s*/)?.[0].length ?? 0\n                      : infiniteIndentation,\n                  lines[index + 1]?.text.trim() === trimmedEllipsis\n                      ? lines[index + 1]?.text.match(/^\\s*/)?.[0].length ?? 0\n                      : infiniteIndentation\n              )\n            : 0;\n\n        // Known limitation: indentation will be off for tab-indented lines\n        const insert = ' '.repeat(indentation) + ellipsis;\n        const newEllipis = new LineWithValueAndCost(\n            insert,\n            infiniteWorth,\n            tokenizer.tokenLength(insert + '\\n'),\n            // validate only loosely -- infiniteWorth may be > 1, and that's ok here\n            'loose'\n        );\n\n        // now replace this line by the new ellipsis\n        lines.splice(index, 1, newEllipis);\n        // then delete the lines before and after if they are ellipses\n        if (lines[index + 1]?.text.trim() === trimmedEllipsis) {\n            lines.splice(index + 1, 1);\n        }\n        if (lines[index - 1]?.text.trim() === trimmedEllipsis) {\n            lines.splice(index - 1, 1);\n        }\n\n        const newTotalCost = lines.reduce((sum, line) => sum + line.cost, 0);\n        // if we don't make progress _and_ it's all ellipses, we've reached the case where we need to forgo indentation\n        if (newTotalCost >= totalCost && lines.every(line => line.value === infiniteWorth)) {\n            indentEllipses = false;\n        }\n        totalCost = newTotalCost;\n    }\n    if (defensiveCounter < 0) {\n        // this should not have happened, throw an error\n        throw new Error(\n            `Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text:\\n ${lines\n                .map(line => line.text)\n                .join('\\n')}`\n        );\n    }\n    return lines.map(line => line.text).join('\\n');\n}\n","import * as diff from 'diff';\nimport {flattenVirtual, mapLabels, parseTree, visitTree} from '../indentation';\nimport {DocumentInfo} from '../prompt';\nimport {ElidableText} from './elidableText';\nimport {fromTreeWithFocussedLines} from './fromIndentationTrees';\n\n/**\n * Returns two {@link ElidableText} objects, one for each of the two contents.\n * Lines that changed are focussed on.\n * @param oldContent\n * @param newContent\n * @returns\n */\nexport function elidableTextForDiff(\n    oldContent: string | DocumentInfo,\n    newContent: string | DocumentInfo\n): [ElidableText, ElidableText] {\n    // languageId is: if one of the contents is a DocumentInfo, use its, otherwise only if both are equal\n    const languageId =\n        typeof oldContent === 'string'\n            ? typeof newContent === 'string'\n                ? undefined\n                : newContent.languageId\n            : typeof newContent === 'string'\n            ? oldContent.languageId\n            : oldContent.languageId === newContent.languageId\n            ? oldContent.languageId\n            : undefined;\n    oldContent = typeof oldContent === 'string' ? oldContent : oldContent.source;\n    newContent = typeof newContent === 'string' ? newContent : newContent.source;\n\n    // collect lines that changed\n    const patch = diff.structuredPatch('', '', oldContent, newContent);\n    const changedLinesOld = new Set<number>();\n    const changedLinesNew = new Set<number>();\n    for (const hunk of patch.hunks) {\n        for (let i = hunk.oldStart; i < hunk.oldStart + hunk.oldLines; i++) {\n            changedLinesOld.add(i);\n        }\n        for (let i = hunk.newStart; i < hunk.newStart + hunk.newLines; i++) {\n            changedLinesNew.add(i);\n        }\n    }\n\n    // build indentation trees\n    const oldTree = mapLabels(flattenVirtual(parseTree(oldContent, languageId)), () => false);\n    const newTree = mapLabels(flattenVirtual(parseTree(newContent, languageId)), () => false);\n\n    // mark changed lines\n    visitTree(\n        oldTree,\n        node => {\n            if (node.type === 'line' || node.type === 'blank') {\n                if (changedLinesOld.has(node.lineNumber)) {\n                    node.label = true;\n                }\n            }\n        },\n        'topDown'\n    );\n    visitTree(\n        newTree,\n        node => {\n            if (node.type === 'line' || node.type === 'blank') {\n                if (changedLinesNew.has(node.lineNumber)) {\n                    node.label = true;\n                }\n            }\n        },\n        'topDown'\n    );\n\n    return [fromTreeWithFocussedLines(oldTree), fromTreeWithFocussedLines(newTree)];\n}\n","/**\n * @fileoverview Utility functions for creating elidable texts from indentation trees.\n */\n\nimport {IndentationTree, deparseLine, foldTree, isBlank, mapLabels, visitTree} from '../indentation';\nimport {ElidableText} from './elidableText';\n\n/** All these costs are multiplicative, i.e. should be between 0 and 1 */\nexport type TreeTraversalConfig = {worthUp: number; worthSibling: number; worthDown: number};\nexport const DEFAULT_TREE_TRAVERSAL_CONFIG: TreeTraversalConfig = {\n    worthUp: 0.9,\n    worthSibling: 0.88,\n    worthDown: 0.8,\n};\n\n/**\n * Take some nodes of an indentation tree and make an elidable text from it,\n * valuing nodes closer to nodes labeled \"true\" more highly.\n * @param tree\n */\nexport function fromTreeWithFocussedLines(\n    tree: IndentationTree<boolean>,\n    config: TreeTraversalConfig = DEFAULT_TREE_TRAVERSAL_CONFIG\n): ElidableText {\n    // go through the tree and relabel the nodes with their distance from the nearest \"true\" node\n    const treeWithDistances = mapLabels(tree, (x: boolean) => (x ? (1 as number) : undefined));\n    // traverse the tree bottomUp to add config.costUp to the labels of the parents\n    visitTree(\n        treeWithDistances,\n        node => {\n            if (isBlank(node)) return;\n            const maxChildLabel = Math.max(...node.subs.map(child => child.label ?? 0));\n            node.label = Math.max(node.label ?? 0, maxChildLabel * config.worthUp);\n        },\n        'bottomUp'\n    );\n    // traverse the tree topDown and for all children, add config.costDown and config.costSibling\n    visitTree(\n        treeWithDistances,\n        node => {\n            if (isBlank(node)) {\n                return;\n            }\n            const values = node.subs.map(sub => sub.label ?? 0);\n            let new_values = [...values];\n            for (let i = 0; i < values.length; i++) {\n                if (values[i] === 0) {\n                    continue;\n                } else {\n                    new_values = new_values.map((v, j) =>\n                        Math.max(v, Math.pow(config.worthSibling, Math.abs(i - j)) * values[i])\n                    );\n                }\n            }\n            // add config.costDown\n            const nodeLabel = node.label;\n            if (nodeLabel !== undefined) {\n                new_values = new_values.map(v => Math.max(v, config.worthDown * nodeLabel));\n            }\n            node.subs.forEach((sub, i) => (sub.label = new_values[i]));\n        },\n        'topDown'\n    );\n    return fromTreeWithValuedLines(treeWithDistances);\n}\n\nexport function fromTreeWithValuedLines(tree: IndentationTree<number>): ElidableText {\n    const valuedLines = foldTree(\n        tree,\n        [] as [string, number][],\n        (node, acc) => {\n            if (node.type === 'line' || node.type === 'blank') {\n                acc.push(node.type === 'line' ? [deparseLine(node).trimEnd(), node.label ?? 0] : ['', node.label ?? 0]);\n            }\n            return acc;\n        },\n        'topDown'\n    );\n    return new ElidableText(...valuedLines);\n}\n","import {flattenVirtual, isBlank, isLine, mapLabels, parseTree, visitTree} from '../indentation';\nimport {DocumentInfo} from '../prompt';\nimport {ElidableText} from './elidableText';\nimport {fromTreeWithFocussedLines} from './fromIndentationTrees';\n\n/**\n * Construct an {@link ElidableText} from a piece of source code, focussing on\n * the first line and last leaf that is not a closer.\n */\nexport function elidableTextForSourceCode(\n    contents: string | DocumentInfo,\n    focusOnLastLeaf = true,\n    focusOnFirstLine = true\n): ElidableText {\n    // if contents is a DocumentInfo, it has source and languageId, and we want to pass both to parseTree\n    const tree = typeof contents === 'string' ? parseTree(contents) : parseTree(contents.source, contents.languageId);\n    flattenVirtual(tree);\n    // we may want to include the last leaf that is not a closer, seeing the end as informative e.g. for appending\n    const treeWithFocussedLines = mapLabels<string, boolean>(tree, label => focusOnLastLeaf && label !== 'closer');\n    // if the label was closer, it's false now, but if there was no label, there still is no label\n    // let's make it explicit that a node is true iff it's not a closer and we do want to focusOnLastLeaf\n    visitTree(\n        treeWithFocussedLines,\n        node => {\n            if (node.label === undefined) {\n                node.label = focusOnLastLeaf && node.label !== false;\n            }\n        },\n        'topDown'\n    );\n    if (focusOnLastLeaf) {\n        visitTree(\n            treeWithFocussedLines,\n            node => {\n                if (node.label) {\n                    let foundLastTrue = false;\n                    for (const subnode of [...node.subs].reverse()) {\n                        if (subnode.label && !foundLastTrue) {\n                            foundLastTrue = true;\n                        } else {\n                            subnode.label = false;\n                        }\n                    }\n                } else {\n                    // all subs get label false\n                    for (const subnode of node.subs) {\n                        subnode.label = false;\n                    }\n                }\n                // we want to find the last _leaf_, so if there are subs, this is not it\n                if (node.subs.length > 0) {\n                    node.label = false;\n                }\n            },\n            'topDown'\n        );\n    }\n    // we may want to focus on the first lines, seeing the beginning as informative e.g. for the setup\n    if (focusOnFirstLine) {\n        visitTree(\n            treeWithFocussedLines,\n            node => {\n                node.label ||= (isLine(node) || isBlank(node)) && node.lineNumber == 0;\n            },\n            'topDown'\n        );\n    }\n\n    return fromTreeWithFocussedLines(treeWithFocussedLines);\n}\n","export * from './elidableText';\nexport * from './fromDiff';\nexport * from './fromIndentationTrees';\nexport * from './fromSourceCode';\nexport * from './lineWithValueAndCost';\n","import {getTokenizer} from '../tokenization';\n\n/**\n * A line of text together with:\n * * a value >= 0 representing how desirable it is (the higher the better)\n * * a cost >= 0 representing how costly it is to insert it, e.g. in tokens.\n * The text is expected to contain no \"\\n\" character.\n */\nexport class LineWithValueAndCost {\n    /**\n     * Create a line of text with a value and a cost.\n     * @param text The line of text without the `\\n` character.\n     * @param value The value, expressed from 0 (worthless) to 1 (essential). Values are expected to be combined multiplicatively.\n     * @param cost How costly it is to insert this line, e.g. in tokens. Costs are expected to be combined additively.\n     * @param validate Whether to validate the input. In some cases, it can make sense to extend the value to above 1 in very rare cases, but these must be deliberately allowed.\n     */\n    public constructor(\n        public readonly text: string,\n        private _value: number,\n        private _cost = getTokenizer().tokenLength(text + '\\n'),\n        validate: 'strict' | 'loose' | 'none' = 'strict'\n    ) {\n        // check that the text does not contain newlines\n        if (text.includes('\\n') && validate !== 'none') {\n            throw new Error('LineWithValueAndCost: text contains newline');\n        }\n        if (_value < 0 && validate !== 'none') {\n            throw new Error('LineWithValueAndCost: value is negative');\n        }\n        if (_cost < 0 && validate !== 'none') {\n            throw new Error('LineWithValueAndCost: cost is negative');\n        }\n        if (validate == 'strict' && _value > 1) {\n            throw new Error(\n                'Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error'\n            );\n        }\n    }\n\n    public get value() {\n        return this._value;\n    }\n    public get cost() {\n        return this._cost;\n    }\n\n    /** Multiply the value with a multiplier, typically between 0 and 1 */\n    public adjustValue(multiplier: number): this {\n        this._value *= multiplier;\n        return this;\n    }\n\n    /** Change the cost of lines according to a specified function; e.g. to take into account different tokenizers */\n    public recost(coster = (x: string) => getTokenizer().tokenLength(x + '\\n')): this {\n        this._cost = coster(this.text);\n        return this;\n    }\n\n    public copy(): LineWithValueAndCost {\n        return new LineWithValueAndCost(this.text, this.value, this.cost, 'none');\n    }\n}\n","import {promises as fsp} from 'fs';\n\n/**\n * The `FileStat`-type represents metadata about a file\n */\nexport interface FileStat {\n    /**\n     * The creation timestamp in milliseconds elapsed since January 1, 1970 00:00:00 UTC.\n     */\n    ctime: number;\n\n    /**\n     * The modification timestamp in milliseconds elapsed since January 1, 1970 00:00:00 UTC.\n     *\n     * *Note:* If the file changed, it is important to provide an updated `mtime` that advanced\n     * from the previous value. Otherwise there may be optimizations in place that will not show\n     * the updated file contents in an editor for example.\n     */\n\n    mtime: number;\n    /**\n     * The size in bytes.\n     *\n     * *Note:* If the file changed, it is important to provide an updated `size`. Otherwise there\n     * may be optimizations in place that will not show the updated file contents in an editor for\n     * example.\n     */\n    size: number;\n}\n\n/**\n * A basic file-system interface for reading files and checking their mtime.\n */\nexport abstract class FileSystem {\n    /**\n     * Read the entire contents of the given file.\n     *\n     * cf https://nodejs.org/api/fs.html#fs_fspromises_readfile_path_options\n     */\n    abstract readFile(uri: string): Promise<Uint8Array>;\n\n    /**\n     * Get the mtime in milliseconds of the given file.\n     *\n     * cf https://nodejs.org/api/fs.html#fs_stats_mtimems\n     */\n    abstract mtime(uri: string): Promise<number>;\n\n    abstract stat(uri: string): Promise<FileStat>;\n}\n\nexport const defaultFileSystem: FileSystem = {\n    readFile(uri: string) {\n        return fsp.readFile(uri);\n    },\n\n    async mtime(uri: string) {\n        let stat = await fsp.stat(uri);\n        return stat.mtimeMs;\n    },\n\n    async stat(uri: string): Promise<FileStat> {\n        const stat = await fsp.stat(uri);\n        return {\n            ctime: stat.ctimeMs,\n            mtime: stat.mtimeMs,\n            size: stat.size,\n        };\n    },\n};\n","export type IndentationTree<L> = TopNode<L> | VirtualNode<L> | LineNode<L> | BlankNode<L>;\nexport type IndentationSubTree<L> = Exclude<IndentationTree<L>, TopNode<L>>;\n\ninterface NodeBase<L> {\n    label?: L;\n    subs: IndentationSubTree<L>[];\n}\n\n/**\n * Virtual nodes represent groupings are not directly visible in indentation.\n **/\nexport interface VirtualNode<L> extends NodeBase<L> {\n    type: 'virtual';\n    indentation: number;\n}\n\nexport interface TopNode<L> extends NodeBase<L> {\n    type: 'top';\n    indentation: -1;\n}\n\n/**\n * A line of source code and its sub-nodes\n * */\nexport interface LineNode<L> extends NodeBase<L> {\n    type: 'line';\n    indentation: number;\n    lineNumber: number;\n    sourceLine: string;\n}\n\n/**\n * A blank line\n */\nexport interface BlankNode<L> extends NodeBase<L> {\n    type: 'blank';\n    lineNumber: number;\n    subs: never[]; // Type trick to make it easier to code\n}\n\n/** Construct a virtual node */\nexport function virtualNode<L>(indentation: number, subs: IndentationSubTree<L>[], label?: L): VirtualNode<L> {\n    return {type: 'virtual', indentation, subs, label};\n}\n\n/** Construct a line node */\nexport function lineNode<L>(\n    indentation: number,\n    lineNumber: number,\n    sourceLine: string,\n    subs: IndentationSubTree<L>[],\n    label?: L\n): LineNode<L> {\n    if (sourceLine === '') {\n        throw new Error('Cannot create a line node with an empty source line');\n    }\n    return {type: 'line', indentation, lineNumber, sourceLine, subs, label};\n}\n\n/** Return a blank node */\nexport function blankNode(line: number): BlankNode<never> {\n    return {type: 'blank', lineNumber: line, subs: []};\n}\n\n/** Return a node representing the top node */\nexport function topNode<L>(subs?: IndentationSubTree<L>[]): TopNode<L> {\n    return {\n        type: 'top',\n        indentation: -1,\n        subs: subs ?? [],\n    };\n}\n\nexport function isBlank<L>(tree: IndentationTree<L>): tree is BlankNode<L> {\n    return tree.type === 'blank';\n}\n\nexport function isLine<L>(tree: IndentationTree<L>): tree is LineNode<L> {\n    return tree.type === 'line';\n}\n\nexport function isVirtual<L>(tree: IndentationTree<L>): tree is VirtualNode<L> {\n    return tree.type === 'virtual';\n}\n\nexport function isTop<L>(tree: IndentationTree<L>): tree is TopNode<L> {\n    return tree.type === 'top';\n}\n\n/**\n * Return the tree which consists of everything up to the line node with the\n * given number. All later siblings of that line node, recursively, are removed.\n *\n * This function does not assume the line numbers appear contiguously, but will\n * return anything before the numbered line, whether its line number is greater\n * or not.\n *\n * This is destructive and modifies the tree.\n */\nexport function cutTreeAfterLine(tree: IndentationTree<any>, lineNumber: number) {\n    function cut(tree: IndentationTree<any>): boolean {\n        if (!isVirtual(tree) && !isTop(tree) && tree.lineNumber === lineNumber) {\n            tree.subs = [];\n            return true;\n        }\n        for (let i = 0; i < tree.subs.length; i++) {\n            if (cut(tree.subs[i])) {\n                tree.subs = tree.subs.slice(0, i + 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    cut(tree);\n}\n\n/**\n * A type expressing that JSON.parse(JSON.stringify(x)) === x.\n */\nexport type JsonStable = string | number | JsonStable[] | {[key: string]: JsonStable};\n\n/**\n * Return a deep duplicate of the tree -- this will only work if the labels can be stringified to parseable JSON.\n */\nexport function duplicateTree<L extends JsonStable>(tree: IndentationTree<L>): IndentationTree<L> {\n    return JSON.parse(JSON.stringify(tree));\n}\n","import {IndentationTree, isBlank, isLine, isTop, isVirtual, JsonStable, LineNode} from './classes';\nimport {foldTree} from './manipulation';\n\n/**\n * Format only the given line node, and *NOT* its subnodes.\n * This essentially comprise indentation and a trailing newline.\n */\nexport function deparseLine(node: LineNode<any>): string {\n    return ' '.repeat(node.indentation) + node.sourceLine + '\\n';\n}\n\n/**\n * Return a flat string representation of the indentation tree.\n */\nexport function deparseTree<L>(tree: IndentationTree<L>): string {\n    function accumulator(tree: IndentationTree<L>, accum: string): string {\n        let str = '';\n        if (isLine(tree)) {\n            str = deparseLine(tree);\n        } else if (isBlank(tree)) {\n            str = '\\n';\n        }\n        return accum + str;\n    }\n    return foldTree(tree, '', accumulator, 'topDown');\n}\n\n/**\n * Return a list of flat strings whose concatenation equals `deparseTree`.\n * The source is cut at the lines whose labels appear in `cutAt`. In other\n * words, if a node has a labelled `A` that appears in `cutAt`, then there will\n * be at least three strings in the result: the concatenation of lines before\n * the node `A`, the lines covered by node `A`, and lines after the node `A`.\n *\n * FIXME: The cuts are *not* applied recursively: If e.g. node `A` has a\n * sub-node labelled `B` which is also in `cutAt`, then the result will still\n * contain only a single string for node `A`.\n *\n */\nexport function deparseAndCutTree<L>(tree: IndentationTree<L>, cutAt: L[]): {label: L | undefined; source: string}[] {\n    const cutAtSet = new Set(cutAt);\n    const cuts: {label: L | undefined; source: string}[] = [];\n    let curUndef = '';\n    // Reimplement visitTree to avoid descending into cut nodes.\n    function visit(tree: IndentationTree<L>) {\n        if (tree.label !== undefined && cutAtSet.has(tree.label)) {\n            if (curUndef !== '') {\n                cuts.push({label: undefined, source: curUndef});\n            }\n            cuts.push({\n                label: tree.label,\n                source: deparseTree(tree),\n            });\n            curUndef = '';\n        } else {\n            if (isLine(tree)) {\n                curUndef += deparseLine(tree);\n            }\n            tree.subs.forEach(visit);\n        }\n    }\n    visit(tree);\n    if (curUndef !== '') {\n        cuts.push({label: undefined, source: curUndef});\n    }\n    return cuts;\n}\n\n/**\n * Return a readable string representation of the tree.\n *\n * The output is closely related to building trees using the helper functions in\n * `indentation.test.ts`.\n */\nexport function describeTree(tree: IndentationTree<any>, indent = 0): string {\n    const ind = ' '.repeat(indent);\n    if (tree === undefined) {\n        return 'UNDEFINED NODE';\n    }\n    let children: string;\n    if (tree.subs === undefined) {\n        children = 'UNDEFINED SUBS';\n    } else {\n        children = tree.subs\n            .map((child: IndentationTree<any>) => {\n                return describeTree(child, indent + 2);\n            })\n            .join(',\\n');\n    }\n    if (children === '') {\n        children = '[]';\n    } else {\n        children = `[\\n${children}\\n      ${ind}]`;\n    }\n    const prefix = (isVirtual(tree) || isTop(tree) ? '   ' : String(tree.lineNumber).padStart(3, ' ')) + `:  ${ind}`;\n    const labelString = tree.label === undefined ? '' : JSON.stringify(tree.label);\n    if (isVirtual(tree) || isTop(tree)) {\n        return `${prefix}vnode(${tree.indentation}, ${labelString}, ${children})`;\n    } else if (isBlank(tree)) {\n        return `${prefix}blank(${labelString ?? ''})`;\n    } else {\n        return `${prefix}lnode(${tree.indentation}, ${labelString}, ${JSON.stringify(tree.sourceLine)}, ${children})`;\n    }\n}\n\n/**\n * Return a string that mimics the call that would construct the tree\n * This is less readable than describeTree, but useful to write code.\n */\nexport function encodeTree<T extends JsonStable>(tree: IndentationTree<T>, indent = ''): string {\n    const labelString = tree.label === undefined ? '' : `, ${JSON.stringify(tree.label)}`;\n\n    const subString =\n        !isBlank(tree) && tree.subs.length > 0\n            ? `[\\n${tree.subs.map(node => encodeTree(node, indent + '  ')).join(', \\n')}\\n${indent}]`\n            : '[]';\n\n    switch (tree.type) {\n        case 'blank':\n            return `${indent}blankNode(${tree.lineNumber}${labelString})`;\n        case 'top':\n            return `topNode(${subString}${labelString})`;\n        case 'virtual':\n            return `${indent}virtualNode(${tree.indentation}, ${subString}${labelString})`;\n        case 'line':\n            return `${indent}lineNode(${tree.indentation}, ${tree.lineNumber}, \"${tree.sourceLine}\", ${subString}${labelString})`;\n    }\n}\n\n/**\n * Return the first line number of the given tree.\n */\nexport function firstLineOf(tree: IndentationTree<any>): number | undefined {\n    if (isLine(tree) || isBlank(tree)) {\n        return tree.lineNumber;\n    }\n    for (const sub of tree.subs) {\n        const firstLine = firstLineOf(sub);\n        if (firstLine !== undefined) {\n            return firstLine;\n        }\n    }\n    return undefined;\n}\n\n/**\n * Return the last line number of the given tree.\n */\nexport function lastLineOf(tree: IndentationTree<any>): number | undefined {\n    let lastLine: number | undefined = undefined;\n    let i = tree.subs.length - 1;\n    while (i >= 0 && lastLine === undefined) {\n        lastLine = lastLineOf(tree.subs[i]);\n        i--;\n    }\n    if (lastLine === undefined && !isVirtual(tree) && !isTop(tree)) {\n        return tree.lineNumber;\n    } else {\n        return lastLine;\n    }\n}\n","import {processJava} from './java';\nimport {processMarkdown} from './markdown';\nimport {registerLanguageSpecificParser} from './parsing';\n\nregisterLanguageSpecificParser('markdown', processMarkdown);\nregisterLanguageSpecificParser('java', processJava);\n\nexport * from './classes';\nexport * from './description';\nexport * from './manipulation';\nexport * from './parsing';\n","import {IndentationTree, isBlank} from './classes';\nimport {visitTree} from './manipulation';\nimport {\n    LabelRule,\n    buildLabelRules,\n    combineClosersAndOpeners,\n    flattenVirtual,\n    labelLines,\n    labelVirtualInherited,\n} from './parsing';\n\n/**\n * Java labels.\n *\n *  * package: A package declaration;\n *  * import: An import stament\n *  * comment_single: Single-line comments starting with //\n *  * comment_multi: Multi-line comments starting with /*, or a vnode of\n *    multiple single-line comments.\n *  * annotation: A line starting with \"@\". Note that fields are habitually\n *    declared on one line, even if they have an annotation. In this case, the\n *    field will have the label \"annotation\" rather than \"member\".\n *  * closeBrace: A closing brace alone on a line.\n *  * member: Anything inside a class or interface that does not have a more\n *    specific label.\n */\nconst _javaLabelRules = {\n    package: /^package /,\n    import: /^import /,\n    class: /\\bclass /,\n    interface: /\\binterface /,\n    javadoc: /^\\/\\*\\*/,\n    comment_multi: /^\\/\\*[^*]/,\n    comment_single: /^\\/\\//,\n    annotation: /^@/,\n    opener: /^[\\[({]/,\n    closer: /^[\\])}]/,\n} as const;\nconst javaLabelRules: LabelRule<string>[] = buildLabelRules(_javaLabelRules);\n\n/**\n * processJava(parseRaw(text)) is supposed to serve as superior alternative to alternative parseTree(text, \"generic\")\n */\nexport function processJava<L>(originalTree: IndentationTree<L>): IndentationTree<L | string> {\n    let tree = originalTree as IndentationTree<L | string>;\n    labelLines(tree, javaLabelRules);\n    tree = combineClosersAndOpeners(tree);\n    tree = flattenVirtual(tree);\n    labelVirtualInherited(tree);\n    // Label all non-labelled subs of class and interface as member.\n    // We also relabel annotations that are direct subs of class or interface as\n    // member.\n    visitTree(\n        tree,\n        (tree: IndentationTree<L | string>) => {\n            if (tree.label === 'class' || tree.label === 'interface') {\n                for (const sub of tree.subs) {\n                    if (!isBlank(sub) && (sub.label === undefined || sub.label === 'annotation')) {\n                        sub.label = 'member';\n                    }\n                }\n            }\n        },\n        'bottomUp'\n    );\n    return tree;\n}\n","import {IndentationSubTree, IndentationTree, TopNode, isTop, isVirtual, topNode} from './classes';\n\n/**\n * Clear all labels (and their types) from the tree.\n * This will modify the tree in place, or return a retyped tree.\n */\nexport function clearLabels(tree: IndentationTree<any>): IndentationTree<never> {\n    visitTree(\n        tree,\n        (tree: IndentationTree<any>) => {\n            tree.label = undefined;\n        },\n        'bottomUp'\n    );\n    return tree;\n}\n\n/** clear labels if condition is true */\nexport function clearLabelsIf<L, S>(\n    tree: IndentationTree<L | S>,\n    condition: (arg: L | S) => arg is S\n): IndentationTree<L> {\n    visitTree(\n        tree,\n        (tree: IndentationTree<L | S>) => {\n            tree.label = tree.label ? (condition(tree.label) ? undefined : tree.label) : undefined;\n        },\n        'bottomUp'\n    );\n    return tree as IndentationTree<L>;\n}\n\nexport function mapLabels<L1, L2>(\n    tree: IndentationSubTree<L1>,\n    map: (arg: L1) => L2 | undefined\n): IndentationSubTree<L2>;\nexport function mapLabels<L1, L2>(tree: TopNode<L1>, map: (arg: L1) => L2 | undefined): TopNode<L2>;\nexport function mapLabels<L1, L2>(tree: IndentationTree<L1>, map: (arg: L1) => L2 | undefined): IndentationTree<L2>;\n/**\n * Apply a type changing function to all labels.\n * This will return a new, retyped tree.\n * (For applying a type keeping function to a tree\n * that modifies it in place, use `visitTree`.)\n */\nexport function mapLabels<L1, L2>(tree: IndentationTree<L1>, map: (arg: L1) => L2 | undefined): IndentationTree<L2> {\n    switch (tree.type) {\n        case 'line':\n        case 'virtual':\n            const newSubs = tree.subs.map(sub => mapLabels(sub, map));\n            return {...tree, subs: newSubs, label: tree.label ? map(tree.label) : undefined};\n        case 'blank':\n            return {...tree, label: tree.label ? map(tree.label) : undefined};\n        case 'top':\n            return {\n                ...tree,\n                subs: tree.subs.map(sub => mapLabels(sub, map)),\n                label: tree.label ? map(tree.label) : undefined,\n            };\n    }\n}\n\n/**\n * Renumber the line numbers of the tree contiguously from 0 and up.\n */\nexport function resetLineNumbers(tree: IndentationTree<any>): void {\n    let lineNumber = 0;\n    function visitor(tree: IndentationTree<any>) {\n        if (!isVirtual(tree) && !isTop(tree)) {\n            tree.lineNumber = lineNumber;\n            lineNumber++;\n        }\n    }\n    visitTree(tree, visitor, 'topDown');\n}\n\n/**\n * Visit the tree with a function that is called on each node.\n *\n * If direction is topDown, then parents are visited before their children.\n * If direction is bottomUp, children are visited in order before their parents,\n * so that leaf nodes are visited first.\n */\nexport function visitTree<L>(\n    tree: IndentationTree<L>,\n    visitor: (tree: IndentationTree<L>) => void,\n    direction: 'topDown' | 'bottomUp'\n): void {\n    function _visit(tree: IndentationTree<L>) {\n        if (direction === 'topDown') {\n            visitor(tree);\n        }\n        tree.subs.forEach(subtree => {\n            _visit(subtree);\n        });\n        if (direction === 'bottomUp') {\n            visitor(tree);\n        }\n    }\n    _visit(tree);\n}\n\n/**\n * Visit the tree with a function that is called on each node --\n * if it returns false, children are not visited (in case of topDown),\n * or the parent is not visited anymore (in case of bottomUp).\n *\n * If direction is topDown, then parents are visited before their children.\n * If direction is bottomUp, children are visited in order before their parents,\n * so that leaf nodes are visited first.\n */\nexport function visitTreeConditionally<L>(\n    tree: IndentationTree<L>,\n    visitor: (tree: IndentationTree<L>) => boolean,\n    direction: 'topDown' | 'bottomUp'\n): void {\n    // IDEA: rewrite visitTree to reuse this code\n    function _visit(tree: IndentationTree<L>): boolean {\n        if (direction === 'topDown') {\n            if (!visitor(tree)) {\n                return false;\n            }\n        }\n        let shouldContinue = true;\n        tree.subs.forEach(subtree => {\n            shouldContinue = shouldContinue && _visit(subtree);\n        });\n        if (direction === 'bottomUp') {\n            shouldContinue = shouldContinue && visitor(tree);\n        }\n        return shouldContinue;\n    }\n    _visit(tree);\n}\n\n/**\n * Fold an accumulator function over the tree.\n *\n * If direction is topDown, then parents are visited before their children.\n * If direction is bottomUp, children are visited in order before their parents,\n * so that leaf nodes are visited first.\n */\nexport function foldTree<T, L>(\n    tree: IndentationTree<L>,\n    init: T,\n    accumulator: (tree: IndentationTree<L>, acc: T) => T,\n    direction: 'topDown' | 'bottomUp'\n): T {\n    let acc = init;\n    function visitor(tree: IndentationTree<L>) {\n        acc = accumulator(tree, acc);\n    }\n    visitTree(tree, visitor, direction);\n    return acc;\n}\n\nexport type Rebuilder<L> = (tree: IndentationTree<L>) => IndentationTree<L> | undefined;\n/**\n * Rebuild the tree from the bottom up by applying a function to each node.\n * The visitor function takes a node whose children have already been rebuilt,\n * and returns a new node to replace it (or undefined if it should be deleted).\n * Optionally, a function can be provided to skip nodes that should just be kept\n * without visiting them or their sub-nodes.\n */\nexport function rebuildTree<L>(\n    tree: IndentationTree<L>,\n    visitor: Rebuilder<L>,\n    skip?: (tree: IndentationTree<L>) => boolean\n): IndentationTree<L> {\n    const rebuild: Rebuilder<L> = (tree: IndentationTree<L>) => {\n        if (skip !== undefined && skip(tree)) {\n            return tree;\n        } else {\n            const newSubs = tree.subs.map(rebuild).filter(sub => sub !== undefined) as IndentationSubTree<L>[];\n            tree.subs = newSubs;\n            return visitor(tree);\n        }\n    };\n    const rebuilt = rebuild(tree);\n    if (rebuilt !== undefined) {\n        return rebuilt;\n    } else {\n        return topNode();\n    }\n}\n","import {IndentationTree, isBlank, LineNode, TopNode, VirtualNode} from './classes';\nimport {buildLabelRules, flattenVirtual, groupBlocks, labelLines, LabelRule, labelVirtualInherited} from './parsing';\n\n/**\n\n */\nconst _MarkdownLabelRules = {\n    heading: /^# /,\n    subheading: /^## /,\n    subsubheading: /### /,\n} as const;\nconst MarkdownLabelRules: LabelRule<string>[] = buildLabelRules(_MarkdownLabelRules);\n\n/**\n * processMarkdown(parseRaw(text)) is supposed to serve as a superior alternative to parseTree(text, \"generic\")\n */\nexport function processMarkdown<L>(originalTree: IndentationTree<L>): IndentationTree<L | string> {\n    let tree = originalTree as IndentationTree<L | string>;\n    labelLines(tree, MarkdownLabelRules);\n\n    // We'll want to refer to the tree's subs, so let the type checker know it won't be blank\n    if (isBlank(tree)) {\n        return tree;\n    }\n\n    // the top level is ordered according to headings / subheadings / subsubheadings\n    function headingLevel(sub: IndentationTree<L | string>): number | undefined {\n        // 0 is the tree itself, so we start at 1\n        if (sub.label === 'heading') return 1;\n        if (sub.label === 'subheading') return 2;\n        if (sub.label === 'subsubheading') return 3;\n        return undefined;\n    }\n    let currentHierarchy: (TopNode<L | string> | LineNode<L | string> | VirtualNode<L | string>)[] = [tree];\n    let oldTreeSubs = [...tree.subs];\n    tree.subs = [];\n    for (const sub of oldTreeSubs) {\n        const level = headingLevel(sub);\n        if (level === undefined || isBlank(sub)) {\n            currentHierarchy[currentHierarchy.length - 1].subs.push(sub);\n        } else {\n            // take care of \"dangling\" levels, e.g. if we have a subsubheading after a heading\n            while (currentHierarchy.length < level) {\n                currentHierarchy.push(currentHierarchy[currentHierarchy.length - 1]);\n            }\n            // add this to the parent\n            currentHierarchy[level - 1].subs.push(sub);\n            // make this the tip of the hierarchy\n            currentHierarchy[level] = sub;\n            // delete all higher levels\n            while (currentHierarchy.length > level + 1) {\n                currentHierarchy.pop();\n            }\n        }\n    }\n\n    // now group paragraphs\n    tree = groupBlocks(tree);\n    tree = flattenVirtual(tree);\n    labelVirtualInherited(tree);\n\n    return tree;\n}\n","import {\n    blankNode,\n    IndentationSubTree,\n    IndentationTree,\n    isBlank,\n    isLine,\n    isVirtual,\n    lineNode,\n    LineNode,\n    TopNode,\n    topNode,\n    virtualNode,\n    VirtualNode,\n} from './classes';\nimport {clearLabelsIf, Rebuilder, rebuildTree, visitTree} from './manipulation';\n\n/**\n * Perform a raw indentation-tree parse of a string. This is completely\n * language-agnostic and the returned tree is unlabeled.\n *\n *  - Blank lines pertain to the top-most node that they may, as restricted\n *    by next non-blank line. So e.g.\n *\n *         E\n *           e1\n *             e2\n *\n *           e3\n *\n *     Then e1.subs = [e2], and E.subs = [ e1, blank, e3 ].\n *\n */\nexport function parseRaw(source: string): IndentationTree<never> {\n    const rawLines = source.split('\\n');\n    // TODO: How to handle mix of tabs and spaces?\n    const indentations = rawLines.map(line => line.match(/^\\s*/)![0].length);\n    const lines = rawLines.map(line => line.trimLeft());\n    function parseNode(line: number): [LineNode<never>, number] {\n        const [subs, nextLine] = parseSubs(line + 1, indentations[line]);\n        const node: LineNode<never> = lineNode(indentations[line], line, lines[line], subs);\n        return [node, nextLine];\n    }\n    function parseSubs(initialLine: number, parentIndentation: number): [IndentationSubTree<never>[], number] {\n        let sub: IndentationTree<never> | undefined;\n        const subs: IndentationSubTree<never>[] = [];\n        let line = initialLine;\n        let lastBlank: number | undefined = undefined;\n        while (line < lines.length && (lines[line] === '' || indentations[line] > parentIndentation)) {\n            if (lines[line] === '') {\n                if (lastBlank === undefined) {\n                    lastBlank = line;\n                }\n                line += 1;\n            } else {\n                if (lastBlank !== undefined) {\n                    for (let i = lastBlank; i < line; i++) {\n                        subs.push(blankNode(i));\n                    }\n                    lastBlank = undefined;\n                }\n                [sub, line] = parseNode(line);\n                subs.push(sub);\n            }\n        }\n        // Trailing blanks are left for the grandparent\n        if (lastBlank !== undefined) {\n            line = lastBlank;\n        }\n        return [subs, line];\n    }\n    const [subs, parsedLine] = parseSubs(0, -1);\n    let line = parsedLine;\n    // Special case: trailing blank lines at end of file\n    while (line < lines.length && lines[line] === '') {\n        subs.push(blankNode(line));\n        line += 1;\n    }\n    if (line < lines.length) {\n        throw new Error(`Parsing did not go to end of file. Ended at ${line} out of ${lines.length}`);\n    }\n    return topNode(subs);\n}\n\ntype LineMatcher = (sourceLine: string) => boolean;\nexport interface LabelRule<L> {\n    matches: LineMatcher;\n    label: L | undefined;\n}\n\n/** Labels the line elements of the tree in-place according to rules */\nexport function labelLines<L>(tree: IndentationTree<L>, labelRules: LabelRule<L>[]): void {\n    function visitor(tree: IndentationTree<L>): void {\n        if (isLine(tree)) {\n            const rule = labelRules.find(rule => rule.matches(tree.sourceLine));\n            if (rule) {\n                tree.label = rule.label;\n            }\n        }\n    }\n    visitTree(tree, visitor, 'bottomUp');\n}\n\n/**\n * For each virtual node, if the node has only one non-blank sub, then label\n * the virtual node as that sub.\n */\nexport function labelVirtualInherited(tree: IndentationTree<any>): void {\n    function visitor(tree: IndentationTree<any>): void {\n        if (isVirtual(tree) && tree.label === undefined) {\n            const subs = tree.subs.filter(sub => !isBlank(sub));\n            if (subs.length === 1) {\n                tree.label = subs[0].label;\n            }\n        }\n    }\n    visitTree(tree, visitor, 'bottomUp');\n}\n\n/**\n * Function to convert a mapped object to a list of rules.\n * This allows some type magic for extracting a label type from a mapping of rules.\n */\nexport function buildLabelRules<L extends {[key: string]: RegExp | LineMatcher}>(ruleMap: L): LabelRule<keyof L>[] {\n    return (Object.keys(ruleMap) as (keyof L)[]).map(key => {\n        let matches: (sourceLine: string) => boolean;\n        if ((ruleMap[key] as RegExp).test) {\n            matches = sourceLine => (ruleMap[key] as RegExp).test(sourceLine);\n        } else {\n            matches = ruleMap[key] as LineMatcher;\n        }\n        return {\n            matches,\n            label: key,\n        };\n    });\n}\n\n/**\n * Fills the opener and closer indentation spec of\n * https://docs.google.com/document/d/1WxjTDzx8Qbf4Bklrp9KwiQsB4-kTOloAR5h86np3_OM/edit#heading=h.y5nobcviainb\n * 1. Openers alone in a line whose older sibling is a line are moved to be the first of that sibling's children,\n *    and their children integrated as subsequent children of their new parent.\n * 2. Closers following an older sibling (maybe with blanks in between) are moved to be the last of that sibling.\n * 3. If the closer in 2 has children themselves, their older siblings are wrapped in a virtual node\n */\nexport function combineClosersAndOpeners<L>(\n    tree: IndentationTree<L | 'opener' | 'closer'>\n): IndentationTree<L | 'opener' | 'closer'> {\n    // We'll make new virtual nodes, which comprise older siblings of a closer and get a temporary label\n    type S = L | 'opener' | 'closer' | 'newVirtual';\n    const rebuilder: Rebuilder<S> = function (tree: IndentationTree<S>) {\n        if (\n            tree.subs.length === 0 ||\n            tree.subs.findIndex(sub => sub.label === 'closer' || sub.label === 'opener') === -1\n        ) {\n            return tree;\n        }\n        const newSubs: IndentationSubTree<S>[] = [];\n        let lastNew: TopNode<S> | VirtualNode<S> | LineNode<S> | undefined;\n        for (let i = 0; i < tree.subs.length; i++) {\n            const sub = tree.subs[i];\n            const directOlderSibling = tree.subs[i - 1];\n            // 1. if opener whose older sibling is a line, move to first of that sibling's children\n            if (sub.label === 'opener' && directOlderSibling !== undefined && isLine(directOlderSibling)) {\n                // Move the bracket to be the last child of it\n                directOlderSibling.subs.push(sub);\n                sub.subs.forEach(sub => directOlderSibling.subs.push(sub));\n                sub.subs = [];\n            }\n            // 2. if a closer following an older sibling\n            else if (\n                sub.label === 'closer' &&\n                lastNew !== undefined &&\n                (isLine(sub) || isVirtual(sub)) &&\n                sub.indentation >= lastNew.indentation\n            ) {\n                // Move intervening blanks from newSubs to lastNew.subs\n                let j = newSubs.length - 1;\n                while (j > 0 && isBlank(newSubs[j])) {\n                    j -= 1;\n                }\n                lastNew.subs.push(...newSubs.splice(j + 1));\n\n                // 3.if the closer in 2 has children themselves, their older siblings are wrapped in a virtual node to distinguish them\n                // Except for leading blocks of virtual nodes which have already been wrapped that way\n                // i.e. take the longest initial subsequence of lastNew.subs that are all labeled 'virtual' and don't wrap those again\n                if (sub.subs.length > 0) {\n                    const firstNonVirtual = lastNew.subs.findIndex(sub => sub.label !== 'newVirtual');\n                    const subsToKeep = lastNew.subs.slice(0, firstNonVirtual);\n                    const subsToWrap = lastNew.subs.slice(firstNonVirtual);\n                    const wrappedSubs =\n                        subsToWrap.length > 0 ? [virtualNode(sub.indentation, subsToWrap, 'newVirtual')] : [];\n                    lastNew.subs = [...subsToKeep, ...wrappedSubs, sub];\n                } else {\n                    lastNew.subs.push(sub);\n                }\n            } else {\n                // nothing to do here, just add it normally\n                newSubs.push(sub);\n                if (!isBlank(sub)) {\n                    lastNew = sub;\n                }\n            }\n        }\n        tree.subs = newSubs;\n        return tree;\n    };\n    const returnTree = rebuildTree(tree, rebuilder);\n    clearLabelsIf<S, 'newVirtual'>(tree, (arg: S): arg is 'newVirtual' => arg === 'newVirtual');\n    // now returnTree does not have the helper label 'newVirtual' anymore\n    return returnTree as IndentationTree<L | 'opener' | 'closer'>;\n}\n\n/**\n * If there are more than 1 consecutive sibling separated from others by delimiters,\n * combine them into a virtual node.\n * The possibly several consecutive delimiters will be put with the preceding siblings into the virtual node.\n * Note that offside groupings should be done before this.\n */\nexport function groupBlocks<L>(\n    tree: IndentationTree<L>,\n    isDelimiter: (node: IndentationTree<L>) => boolean = isBlank,\n    label?: L\n): IndentationTree<L> {\n    const rebuilder: Rebuilder<L> = function (tree: IndentationTree<L>) {\n        if (tree.subs.length <= 1) {\n            return tree;\n        }\n        const newSubs: IndentationSubTree<L>[] = [];\n        let nodesSinceLastFlush: IndentationSubTree<L>[] = [];\n        let currentBlockIndentation: number | undefined;\n        let lastNodeWasDelimiter = false;\n\n        // we write to nodesSinceLastDelimiter as cache\n        // if we have a non-delimiter after a delimiter, we flush\n        // to a new virtual node appended to the newSubs array\n\n        function flushBlockIntoNewSubs(\n            final: boolean = false // if final, only wrap in virtual if there are newSubs already\n        ): void {\n            if (currentBlockIndentation !== undefined && (newSubs.length > 0 || !final)) {\n                const virtual = virtualNode(currentBlockIndentation, nodesSinceLastFlush, label);\n                newSubs.push(virtual);\n            } else {\n                nodesSinceLastFlush.forEach(node => newSubs.push(node));\n            }\n        }\n\n        for (let i = 0; i < tree.subs.length; i++) {\n            const sub = tree.subs[i];\n            const subIsDelimiter = isDelimiter(sub);\n            if (!subIsDelimiter && lastNodeWasDelimiter) {\n                flushBlockIntoNewSubs();\n                nodesSinceLastFlush = [];\n            }\n            lastNodeWasDelimiter = subIsDelimiter;\n            nodesSinceLastFlush.push(sub);\n            if (!isBlank(sub)) {\n                currentBlockIndentation = currentBlockIndentation ?? sub.indentation;\n            }\n        }\n\n        // treat the end of node like a block end, and make the virtual block if it wouldn't be a singleton\n        flushBlockIntoNewSubs(true);\n        tree.subs = newSubs;\n        return tree;\n    };\n    return rebuildTree(tree, rebuilder);\n}\n\n/**\n * Remove unlabeled virtual nodes which either:\n *  - Have one or no children\n *  - Are the only child of their parent\n * In either case, it is replaced by their children.\n */\nexport function flattenVirtual<L>(tree: IndentationTree<L>): IndentationTree<L> {\n    const rebuilder: Rebuilder<L> = function (tree) {\n        if (isVirtual(tree) && tree.label === undefined && tree.subs.length <= 1) {\n            if (tree.subs.length === 0) {\n                return undefined;\n            } else {\n                //tree.subs.length === 1\n                return tree.subs[0];\n            }\n        } else if (tree.subs.length === 1 && isVirtual(tree.subs[0]) && tree.subs[0].label === undefined) {\n            tree.subs = tree.subs[0].subs;\n        }\n        return tree;\n    };\n    return rebuildTree(tree, rebuilder);\n}\n\n/**\n * Generic labels.\n *\n *  * opener: A line starting with an opening parens, square bracket, or curly brace\n *  * closer: A line starting with a closing parens, square bracket, or curly brace\n */\nconst _genericLabelRules = {\n    opener: /^[\\[({]/,\n    closer: /^[\\])}]/,\n} as const;\nconst genericLabelRules: LabelRule<'opener' | 'closer'>[] = buildLabelRules(_genericLabelRules);\n\nconst LANGUAGE_SPECIFIC_PARSERS: {[key: string]: (raw: IndentationTree<never>) => IndentationTree<string>} = {};\n/**\n * Register a language-specific parser for a language.\n * This should normally be called in index.ts.\n */\nexport function registerLanguageSpecificParser(\n    language: string,\n    parser: (raw: IndentationTree<never>) => IndentationTree<string>\n): void {\n    LANGUAGE_SPECIFIC_PARSERS[language] = parser;\n}\n\nexport function parseTree(source: string, languageId?: string): IndentationTree<string> {\n    const raw = parseRaw(source);\n    const languageSpecificParser = LANGUAGE_SPECIFIC_PARSERS[languageId ?? ''];\n    if (languageSpecificParser) {\n        return languageSpecificParser(raw);\n    } else {\n        labelLines(raw, genericLabelRules);\n        const processedTree = combineClosersAndOpeners(raw);\n        return processedTree;\n    }\n}\n","import {DocumentInfo} from './prompt';\n\n/**\n * Interface for writing single-line comments in a given language.\n * Does not include the terminal new-line character (i.e. for many languages,\n * `end` will just be the empty string).\n */\ninterface CommentMarker {\n    start: string;\n    end: string;\n}\n\n// Language files in VSCode:\n// https://code.visualstudio.com/docs/languages/identifiers#_known-language-identifiers\n//\n// Missing below from this list are:\n// Diff diff\n// Git\tgit-commit and git-rebase\n// JSON\tjson\n// ShaderLab\tshaderlab\n// Additional to that list are:\n// Erlang\n// Haskell\n// Kotlin\n// QL\n// Scala\n// Verilog\nexport const languageCommentMarkers: {[language: string]: CommentMarker} = {\n    abap: {start: '\"', end: ''},\n    bat: {start: 'REM', end: ''},\n    bibtex: {start: '%', end: ''},\n    blade: {start: '#', end: ''},\n    c: {start: '//', end: ''},\n    clojure: {start: ';', end: ''},\n    coffeescript: {start: '//', end: ''},\n    cpp: {start: '//', end: ''},\n    csharp: {start: '//', end: ''},\n    css: {start: '/*', end: '*/'},\n    dart: {start: '//', end: ''},\n    dockerfile: {start: '#', end: ''},\n    elixir: {start: '#', end: ''},\n    erb: {start: '<%#', end: '%>'},\n    erlang: {start: '%', end: ''},\n    fsharp: {start: '//', end: ''},\n    go: {start: '//', end: ''},\n    groovy: {start: '//', end: ''},\n    haml: {start: '-#', end: ''},\n    handlebars: {start: '{{!', end: '}}'},\n    haskell: {start: '--', end: ''},\n    html: {start: '<!--', end: '-->'},\n    ini: {start: ';', end: ''},\n    java: {start: '//', end: ''},\n    javascript: {start: '//', end: ''},\n    javascriptreact: {start: '//', end: ''},\n    jsonc: {start: '//', end: ''},\n    jsx: {start: '//', end: ''},\n    julia: {start: '#', end: ''},\n    kotlin: {start: '//', end: ''},\n    latex: {start: '%', end: ''},\n    less: {start: '//', end: ''},\n    lua: {start: '--', end: ''},\n    makefile: {start: '#', end: ''},\n    markdown: {start: '[]: #', end: ''},\n    'objective-c': {start: '//', end: ''},\n    'objective-cpp': {start: '//', end: ''},\n    perl: {start: '#', end: ''},\n    php: {start: '//', end: ''},\n    powershell: {start: '#', end: ''},\n    pug: {start: '//', end: ''},\n    python: {start: '#', end: ''},\n    ql: {start: '//', end: ''}, // QL is a query language for CodeQL\n    r: {start: '#', end: ''},\n    razor: {start: '<!--', end: '-->'},\n    ruby: {start: '#', end: ''},\n    rust: {start: '//', end: ''},\n    sass: {start: '//', end: ''},\n    scala: {start: '//', end: ''},\n    scss: {start: '//', end: ''},\n    shellscript: {start: '#', end: ''},\n    slim: {start: '/', end: ''},\n    solidity: {start: '//', end: ''},\n    sql: {start: '--', end: ''},\n    stylus: {start: '//', end: ''},\n    svelte: {start: '<!--', end: '-->'},\n    swift: {start: '//', end: ''},\n    terraform: {start: '#', end: ''},\n    tex: {start: '%', end: ''},\n    typescript: {start: '//', end: ''},\n    typescriptreact: {start: '//', end: ''},\n    vb: {start: \"'\", end: ''},\n    verilog: {start: '//', end: ''},\n    'vue-html': {start: '<!--', end: '-->'},\n    vue: {start: '//', end: ''},\n    xml: {start: '<!--', end: '-->'},\n    xsl: {start: '<!--', end: '-->'},\n    yaml: {start: '#', end: ''},\n};\n\nconst dontAddLanguageMarker: string[] = [\n    'php', // We don't know if the file starts with `<?php` or not\n    'plaintext', // Doesn't admit comments\n];\n\n// prettier-ignore\nconst shebangLines: { [language: string]: string } = {\n    \"html\":          \"<!DOCTYPE html>\",\n    \"python\":        \"#\\!/usr/bin/env python3\",\n    \"ruby\":          \"#\\!/usr/bin/env ruby\",\n    \"shellscript\":   \"#\\!/bin/sh\",\n    \"yaml\":          \"# YAML data\"\n}\n\n/**\n * Best-effort determining whether the top of the source already contains a\n * discernible language marker, in particular a shebang line\n * @param languageId The string name of the language\n * @returns True iff we determined a recognisable language marker\n */\n// prettier-ignore\nexport function hasLanguageMarker({ source } : DocumentInfo): boolean {\n    return source.startsWith(\"#\\!\") || source.startsWith(\"<!DOCTYPE\");\n}\n\n/**\n * Comment a single line of text in a given language.\n * E.g. for python, turn \"hello there\" into \"# hello there\"\n *\n * Note: This will not behave as you expect if `text` has multiple lines. In\n * that case, use {@link commentBlockAsSingles} instead.\n */\nexport function comment(text: string, languageId: string) {\n    const markers = languageCommentMarkers[languageId];\n    if (markers) {\n        const end = markers.end == '' ? '' : ' ' + markers.end;\n        return `${markers.start} ${text}${end}`;\n    }\n    return '';\n}\n\n/**\n * Comment a block of text using single-line comments.\n *\n * The returned comment block will have a trailing newline exactly when the\n * input does.\n */\nexport function commentBlockAsSingles(text: string, languageId: string) {\n    if (!languageCommentMarkers[languageId] || text === '') {\n        // Avoid spewing out a long list of blank lines\n        return '';\n    }\n    const trailingNewline = text.endsWith('\\n');\n    const lines = (trailingNewline ? text.slice(0, -1) : text).split('\\n');\n    const commented = lines.map(line => comment(line, languageId)).join('\\n');\n    return trailingNewline ? commented + '\\n' : commented;\n}\n\n/**\n * Return a one-line comment or text which describes the language of a\n * document, e.g. a shebang line or a comment.\n *\n * @param doc The document we want the marker for.\n * @returns A one-line string that describes the language.\n */\nexport function getLanguageMarker(doc: DocumentInfo): string {\n    const {languageId} = doc;\n    if (dontAddLanguageMarker.indexOf(languageId) === -1 && !hasLanguageMarker(doc)) {\n        if (languageId in shebangLines) {\n            return shebangLines[languageId];\n        } else {\n            return comment(`Language: ${languageId}`, languageId);\n        }\n    }\n    return '';\n}\n\n/**\n * Return a one-line comment containing the relative path of the document, if known.\n *\n * @param doc The document we want the marker for.\n * @returns A one-line comment that contains the relative path of the document.\n */\nexport function getPathMarker(doc: DocumentInfo): string {\n    if (doc.relativePath) {\n        return comment(`Path: ${doc.relativePath}`, doc.languageId);\n    }\n    return '';\n}\n\n/**\n * Appends a new line to a string if it does not already end with one.\n *\n * @param str String to append\n *\n * @returns A string with a new line escape character at the end.\n */\nexport function newLineEnded(str: string): string {\n    return str === '' || str.endsWith('\\n') ? str : str + '\\n';\n}\n","import {resolve} from 'path';\nimport {Worker} from 'worker_threads';\n\nexport * from './elidableText';\nexport {FileStat, FileSystem} from './fileSystem';\nexport * from './indentation';\nexport {comment, commentBlockAsSingles, languageCommentMarkers} from './languageMarker';\nexport {SnippetOrchestrator} from './orchestrator';\nexport * from './parse';\nexport * from './parseBlock';\nexport * from './prompt';\nexport {CursorContextInfo, CursorContextOptions, getCursorContext} from './snippetInclusion/cursorContext';\nexport * from './snippetInclusion/cursorMatching';\nexport {NeighboringSnippetType, NeighboringTabsOption} from './snippetInclusion/neighboringFiles';\nexport {ScoredSnippet} from './snippetInclusion/selectRelevance';\nexport {SnippetProviderType, SnippetSemantics, SnippetWithProviderInfo} from './snippetInclusion/snippets';\nexport * from './tokenization';\n\n/**\n * Create a worker that can be used to invoke promptlib functions on a separate thread.\n *\n * The worker accepts messages of the form `{ id, fn, args }`, where `id` can be freely chosen by\n * the client, `fn` is the name of a function exported by the promptlib, and `args` is an array\n * of arguments to pass to the function.\n *\n * The worker will run the function named `fn` on a worker thread. If the function returns normally,\n * the worker sends a message `{ id, res }`, where `id` is the same as in the incoming message and\n * `res` is the result of the function. If the function throws an exception, the worker sends a\n * message `{ id, err }`, where `err` is the thrown exception.\n *\n * Note that arguments and results of functions invoked this way must be serializable as described\n * [in the Node.js documentation](https://nodejs.org/api/worker_threads.html#worker_threads_port_postmessage_value_transferlist).\n */\nexport function createWorker() {\n    return new Worker(resolve(__dirname, '..', 'dist', 'worker.js'));\n}\n","import {dirname, extname, join} from 'path';\nimport {SyntaxNode} from 'web-tree-sitter';\nimport {FileSystem} from './fileSystem';\nimport {getFirstPrecedingComment, parseTreeSitter, queryExports} from './parse';\nimport {DocumentInfoWithOffset} from './prompt';\n\n/**\n * Resolve the import `imp`, which is a TypeScript `import` statement appearing in a module whose\n * path is `importerPath`, using `fs`.\n *\n * If the import is not a local import (i.e., the import path does not start with `.`), or the file\n * it imports has an extension other than `.ts`, return `null`.\n */\nfunction resolveLocalTypeScriptImport(importerPath: string, imp: SyntaxNode): string | null {\n    let src = imp.namedChild(1)?.text.slice(1, -1);\n    if (!src || !src.startsWith('.')) return null;\n\n    if (extname(src) === '') {\n        src = src + '.ts';\n    } else if (extname(src) !== '.ts') {\n        return null;\n    }\n\n    return join(dirname(importerPath), src);\n}\n\n/**\n * Get a list of all names imported by `imp` (possibly with renaming), where\n * `imp` must be a TypeScript `import` statement.\n */\nfunction getTypescriptImportedNames(imp: SyntaxNode): {name: string; alias: string | undefined}[] {\n    let names = [];\n    if (imp.namedChild(0)?.type === 'import_clause') {\n        let importClause = imp.namedChild(0);\n        if (importClause?.namedChild(0)?.type === 'named_imports') {\n            let namedImports = importClause.namedChild(0);\n            for (let namedImport of namedImports?.namedChildren ?? []) {\n                if (namedImport.type === 'import_specifier') {\n                    const name = namedImport.childForFieldName('name')?.text;\n                    if (name) {\n                        const alias = namedImport.childForFieldName('alias')?.text;\n                        names.push({name, alias});\n                    }\n                }\n            }\n        }\n    }\n    return names;\n}\n\n/**\n * Module exports are modelled as a mapping from names to lists of declarations.\n *\n * The same name can map to multiple declarations for function signature exports.\n */\ntype Exports = Map<string, string[]>;\n\nconst exportsCache = new Map<string, {mtime: number; exports: Exports}>();\n\nconst EXPORTS_CACHE_LOW_WATER_MARK = 1000;\nconst EXPORTS_CACHE_HIGH_WATER_MARK = 2000;\n\n/**\n * Given a definition of a function or type, return its name and a corresponding\n * TypeScript declaration that only contains types but no code.\n *\n * For ambient declarations, we recursively process the wrapped declaration.\n *\n * For interfaces, enums, and type aliases, they are returned as-is.\n *\n * For function signatures and declarations, we turn them into signatures as\n * explained in the documentation for `extractTypeScriptFunctionDeclaration` below.\n *\n * Classes are turned into ambient declarations, using `extractTypeScriptMemberDeclaration`\n * to recursively process their members.\n */\nfunction extractTypeScriptDeclaration(srcString: string, defn: SyntaxNode | null): {name: string; decl: string} {\n    let name = defn?.childForFieldName('name')?.text ?? '';\n\n    switch (defn?.type) {\n        case 'ambient_declaration':\n            return extractTypeScriptDeclaration(srcString, defn.namedChild(0));\n        case 'interface_declaration':\n        case 'enum_declaration':\n        case 'type_alias_declaration':\n            return {name, decl: defn.text};\n        case 'function_declaration':\n        case 'function_signature':\n            return {name, decl: extractTypeScriptFunctionDeclaration(srcString, defn)};\n        case 'class_declaration': {\n            let memberDecls = extractTypeScriptBodyDecls(srcString, defn);\n            let decl = '';\n            if (memberDecls) {\n                let body = defn.childForFieldName('body')!;\n                // first, we take everything up to and including the start of the body\n                decl = `declare ${srcString.substring(defn.startIndex, body.startIndex + 1)}`;\n\n                // then we add the member declarations\n                decl += memberDecls.map(d => '\\n' + d).join('');\n\n                // finally, we add the closing brace\n                decl += `\\n}`;\n            }\n            return {name, decl};\n        }\n    }\n\n    return {name, decl: ''};\n}\n\n/**\n * Given a definition or a signature of a TypeScript function or method, return\n * a corresponding TypeScript declaration that only contains types but no code.\n *\n * We do this by taking the prefix up to and including the return type\n * annotation if present, or the parameter list otherwise. This does not always\n * yield a valid signature, for example in the presence of default parameters\n * and parameter properties, but it's good enough for the purposes of prompt\n * crafting.\n *\n * For functions (but nor for methods) we additionally prepend the `declare` keyword\n * to turn it into an ambient declaration.\n */\nfunction extractTypeScriptFunctionDeclaration(srcString: string, defn: SyntaxNode): string {\n    const endIndex = defn.childForFieldName('return_type')?.endIndex ?? defn.childForFieldName('parameters')?.endIndex;\n    if (endIndex !== undefined) {\n        let signature = srcString.substring(defn.startIndex, endIndex) + ';';\n        if (defn.type === 'function_declaration' || defn.type === 'function_signature') {\n            return 'declare ' + signature;\n        } else {\n            return signature;\n        }\n    }\n    return '';\n}\n\n/**\n * Get the indentation of `node`, that is, the shortest string of spaces and\n * tabs that starts at the beginning of a line and ends at the beginning of\n * `node`. If no such string exists, return `undefined`.\n */\nfunction getIndentation(srcString: string, node: SyntaxNode): string | undefined {\n    // skip backwards over tabs and spaces\n    let i = node.startIndex - 1;\n    while (i >= 0 && (srcString[i] === ' ' || srcString[i] === '\\t')) {\n        i--;\n    }\n    // if we're at the beginning of the file or at a newline, we've found our indentation\n    if (i < 0 || srcString[i] === '\\n') {\n        return srcString.substring(i + 1, node.startIndex);\n    }\n    // otherwise something more complicated is going on, so we'll return undefined\n    return undefined;\n}\n\n/**\n * Get the doc comment attached to `node`.\n *\n * This is defined as all text between the start of the first comment in the\n * longest unbroken run of comments preceding `node` and the start of `node`,\n * or the empty string if no such run exists.\n *\n * In particular, the \"doc comment\" will include leading whitespace of the\n * node, but not of the first comment in the run.\n */\nexport function getDocComment(srcString: string, node: SyntaxNode): string {\n    const docCommentNode = getFirstPrecedingComment(node);\n    return docCommentNode ? srcString.substring(docCommentNode.startIndex, node.startIndex) : '';\n}\n\n/**\n * Given a definition of a (non-private) class member, return a corresponding\n * TypeScript declaration that only contains types but no code.\n *\n * For ambient members, we recursively process the wrapped declaration.\n *\n * For method definitions and signatures we use `extractTypeScriptFunctionDeclaration` above.\n *\n * For fields, we chop off the initializer if present.\n */\nfunction extractTypeScriptMemberDeclaration(srcString: string, defn: SyntaxNode): string {\n    // filter out private members\n    if (defn?.firstChild?.type === 'accessibility_modifier' && defn.firstChild.text === 'private') {\n        return '';\n    }\n\n    const commentNode = getFirstPrecedingComment(defn);\n    const indentation = getIndentation(srcString, commentNode ?? defn) ?? '  ';\n    const docComment = getDocComment(srcString, defn);\n\n    switch (defn.type) {\n        case 'ambient_declaration':\n            const inner = defn.namedChild(0);\n            if (!inner) {\n                return '';\n            }\n            return indentation + docComment + extractTypeScriptMemberDeclaration(srcString, inner);\n        case 'method_definition':\n        case 'method_signature':\n            return indentation + docComment + extractTypeScriptFunctionDeclaration(srcString, defn);\n        case 'public_field_definition': {\n            // chop off initialiser if any\n            let endIndex = defn.childForFieldName('type')?.endIndex ?? defn.childForFieldName('name')?.endIndex;\n            if (endIndex !== undefined) {\n                return indentation + docComment + srcString.substring(defn.startIndex, endIndex) + ';';\n            }\n        }\n    }\n    return '';\n}\n\n/**\n * Given a definition of a class or interface, return a list of TypeScript declarations of\n * its members.\n *\n * @param srcString the source code of the file containing the class or interface\n * @param defn the class or interface definition\n */\nfunction extractTypeScriptBodyDecls(srcString: string, defn: SyntaxNode): string[] | undefined {\n    let body = defn.childForFieldName('body');\n    if (!body) {\n        return;\n    }\n\n    let memberDecls = body.namedChildren.map(member => extractTypeScriptMemberDeclaration(srcString, member));\n    // filter out members for which we could not extract a declaration\n    return memberDecls.filter(decl => decl);\n}\n\n/**\n * Construct a map representing declarations exported by the file at the given `uri`, which is\n * written in language `lang`.\n *\n * For TypeScript, this map associates exported types and functions with the (string representation of)\n * their declarations/signatures.\n *\n * For other languages, declaration extraction is not currently supported, so we always return an\n * empty map.\n */\nasync function getExportedDeclarations(uri: string, lang: string, fs: FileSystem): Promise<Exports> {\n    let exports = new Map<string, string[]>();\n\n    let mtime = -1;\n    try {\n        mtime = await fs.mtime(uri);\n    } catch {\n        // if anything wet wrong getting the mtime, simply report no exports\n        return exports;\n    }\n\n    let entry = exportsCache.get(uri);\n    if (entry && entry.mtime === mtime) return entry.exports;\n\n    if (lang === 'typescript') {\n        let tree = null;\n        try {\n            let srcBytes = await fs.readFile(uri);\n            let srcString = srcBytes.toString();\n            tree = await parseTreeSitter(lang, srcString);\n\n            for (let em of queryExports(lang, tree.rootNode)) {\n                for (let ec of em.captures) {\n                    let exp = ec.node;\n                    if (exp.type === 'export_statement') {\n                        let decl = exp.childForFieldName('declaration');\n\n                        // skip declarations with syntax errors\n                        if (decl?.hasError()) {\n                            continue;\n                        }\n\n                        let {name, decl: exportedDecl} = extractTypeScriptDeclaration(srcString, decl);\n\n                        if (name) {\n                            exportedDecl = getDocComment(srcString, exp) + exportedDecl;\n                            let exportedDecls = exports.get(name);\n                            if (!exportedDecls) {\n                                exportedDecls = [];\n                                exports.set(name, exportedDecls);\n                            }\n                            exportedDecls.push(exportedDecl);\n                        }\n                    }\n                }\n            }\n        } catch {\n            // if anything went wrong during reading or parsing the file, simply report no exports\n        } finally {\n            if (tree) tree.delete();\n        }\n    }\n\n    // if cache has more than EXPORTS_CACHE_HIGH_WATER_MARK entries, remove the oldest entries\n    // to bring its size down to EXPORTS_CACHE_LOW_WATER_MARK\n    if (exportsCache.size > EXPORTS_CACHE_HIGH_WATER_MARK) {\n        for (let key of exportsCache.keys()) {\n            exportsCache.delete(key);\n            if (exports.size <= EXPORTS_CACHE_LOW_WATER_MARK) {\n                break;\n            }\n        }\n    }\n\n    exportsCache.set(uri, {mtime, exports});\n    return exports;\n}\n\n/**\n * Find all import statements in the given subtree.\n */\nfunction getTypeScriptImports(root: SyntaxNode) {\n    let imports = [];\n    // note that import statements can only appear at the toplevel, so we can simply iterate over\n    // the root's children\n    for (let toplevelStmt of root.namedChildren) {\n        if (toplevelStmt.type === 'import_statement') {\n            imports.push(toplevelStmt);\n        }\n    }\n    return imports;\n}\n\n/** Regex to match a TypeScript import statement. */\nconst localImportRegex = /^\\s*import\\s*(type|)\\s*\\{[^}]*\\}\\s*from\\s*['\"]\\./gm;\n\n/**\n * Return the offset of the newline character after the last local import\n * statement in the given string.\n * Returns -1 if the source has no import statements.\n */\nfunction lastTypeScriptLocalImportOffset(source: string): number {\n    let lastImport = -1;\n    localImportRegex.lastIndex = -1; // restart the regex from the beginning\n    let m: RegExpExecArray | null;\n    do {\n        m = localImportRegex.exec(source);\n        if (m) {\n            lastImport = localImportRegex.lastIndex + m.length;\n        }\n    } while (m);\n\n    if (lastImport === -1) {\n        return -1;\n    }\n\n    const newlineAfterLastImport = source.indexOf('\\n', lastImport);\n    return newlineAfterLastImport !== -1 ? newlineAfterLastImport : source.length;\n}\n\n/**\n * Extract context information from local TypeScript imports.\n */\nasync function extractTypeScriptLocalImportContext(source: string, uri: string, fs: FileSystem): Promise<string[]> {\n    let languageId = 'typescript';\n    let localImportContext: string[] = [];\n\n    // Only parse up to and including the last line containing an import statement\n    const lastImportOffset = lastTypeScriptLocalImportOffset(source);\n    if (lastImportOffset === -1) {\n        return localImportContext;\n    }\n    source = source.substring(0, lastImportOffset);\n\n    let tree = await parseTreeSitter(languageId, source);\n    try {\n        for (let imp of getTypeScriptImports(tree.rootNode)) {\n            let srcUri = resolveLocalTypeScriptImport(uri, imp);\n            if (!srcUri) continue;\n\n            let importedNames = getTypescriptImportedNames(imp);\n            if (importedNames.length === 0) continue;\n\n            let exports = await getExportedDeclarations(srcUri, languageId, fs);\n            for (let importedName of importedNames)\n                if (exports.has(importedName.name)) {\n                    localImportContext.push(...exports.get(importedName.name)!);\n                    // if the import came through an alias, we could simulate this by adding an alias\n                    // declaration, but the model seems to figure this out by itself, so we don't\n                }\n        }\n    } finally {\n        tree.delete();\n    }\n    return localImportContext;\n}\n\n/**\n * Extract context information from local imports.\n */\nexport async function extractLocalImportContext(doc: DocumentInfoWithOffset, fs?: FileSystem): Promise<string[]> {\n    let {source, uri, languageId} = doc;\n    if (fs) if (languageId === 'typescript') return extractTypeScriptLocalImportContext(source, uri, fs);\n    return [];\n}\n","import {DocumentInfoWithOffset} from './prompt';\nimport {SnippetWithProviderInfo} from './snippetInclusion/snippets';\nimport {LanguageSnippetProvider} from './snippetProviders/language';\nimport {PathSnippetProvider} from './snippetProviders/path';\nimport {SnippetProvider} from './snippetProviders/snippetProvider';\n\nexport type SnippetProviderContext = {\n    currentFile: DocumentInfoWithOffset;\n};\n\nconst OrchestratorTimeout = 250;\nconst SnippetProviders = [LanguageSnippetProvider, PathSnippetProvider];\n\nexport class SnippetOrchestrator {\n    private providers: SnippetProvider[];\n\n    constructor() {\n        this.providers = SnippetProviders.map(provider => new provider());\n    }\n\n    public async getSnippets(context: SnippetProviderContext): Promise<SnippetWithProviderInfo[]> {\n        // Get snippets from each provider\n\n        return new Promise(async (resolve, reject) => {\n            const snippets: SnippetWithProviderInfo[] = [];\n            // Set a timeout to resolve what has returned when we hit a timeout\n            const timeout = setTimeout(() => {\n                resolve(snippets);\n            }, OrchestratorTimeout);\n\n            snippets.push(\n                ...(\n                    await Promise.all(\n                        this.providers.map(provider => {\n                            return provider.getSnippets(context);\n                        })\n                    )\n                ).flat()\n            );\n\n            clearTimeout(timeout);\n            resolve(snippets);\n        });\n    }\n}\n","import {resolve} from 'path';\nimport * as Parser from 'web-tree-sitter';\nimport {Language, Query, QueryMatch, SyntaxNode, Tree} from 'web-tree-sitter';\nimport {DocumentInfoWithOffset} from './prompt';\n\nexport enum WASMLanguage {\n    Python = 'python',\n    JavaScript = 'javascript',\n    TypeScript = 'typescript',\n    TSX = 'tsx',\n    Go = 'go',\n    Ruby = 'ruby',\n}\n\n/**\n * A position of a syntax-tree node, specified by a zero-based start offset and a zero-based,\n * exclusive end offset.\n */\nexport interface NodePosition {\n    startIndex: number;\n    endIndex: number;\n}\n\nconst languageIdToWasmLanguageMapping: {[language: string]: WASMLanguage} = {\n    python: WASMLanguage.Python,\n    javascript: WASMLanguage.JavaScript,\n    javascriptreact: WASMLanguage.JavaScript,\n    jsx: WASMLanguage.JavaScript,\n    typescript: WASMLanguage.TypeScript,\n    typescriptreact: WASMLanguage.TSX,\n    go: WASMLanguage.Go,\n    ruby: WASMLanguage.Ruby,\n};\n\nexport function isSupportedLanguageId(languageId: string): boolean {\n    return languageId in languageIdToWasmLanguageMapping;\n}\n\nexport function languageIdToWasmLanguage(languageId: string): WASMLanguage {\n    if (!(languageId in languageIdToWasmLanguageMapping)) {\n        throw new Error(`Unrecognized language: ${languageId}`);\n    }\n    return languageIdToWasmLanguageMapping[languageId];\n}\n\n// function patterns defined in javascript grammar:\n// https://github.com/tree-sitter/tree-sitter-javascript/blob/3d9fe9786ee74fa5067577f138e1a7129f80fb41/grammar.js#L595-L629\n// same for typescript:\n// https://github.com/tree-sitter/tree-sitter-typescript/blob/2d1c7d5c10c33cb444d1781fa76f2936810afec4/common/define-grammar.js\nconst jsFunctionQuery = `[\n    (function body: (statement_block) @body)\n    (function_declaration body: (statement_block) @body)\n    (generator_function body: (statement_block) @body)\n    (generator_function_declaration body: (statement_block) @body)\n    (method_definition body: (statement_block) @body)\n    (arrow_function body: (statement_block) @body)\n  ] @function`;\n\n/*\nList of queries to run per language to find functions, as well as a cache\nfor parsed Query objects for each query.\n\nWe define named captures to be used by callers in a language-agnostic way:\n- @function: entire function signature and body\n- @docstring: optional docstring\n- @body: optional function body\n\nNOTE: use a [] match across function types to ensure we always match the\n      outermost function in case of nested functions.\n*/\nconst functionQuery: {[wasmLanguage in WASMLanguage]: [string, Query?][]} = {\n    python: [\n        // `(function_definition)` is defined in python grammar:\n        // https://github.com/tree-sitter/tree-sitter-python/blob/c4282ba411d990d313c5f8e7850bcaaf46fbf7da/grammar.js#L325-L338\n        // docstring is represented in grammar as an optional `(initial expression_statement (string))`\n        // at the start of the body block\n        [\n            `(function_definition body: (block\n             (expression_statement (string))? @docstring) @body) @function`,\n        ],\n        // handle malformed defs - no trailing semicolon or no body\n        [`(ERROR (\"def\" (identifier) (parameters))) @function`],\n    ],\n    javascript: [[jsFunctionQuery]],\n    typescript: [[jsFunctionQuery]],\n    tsx: [[jsFunctionQuery]],\n    go: [\n        // function patterns defined in go grammer:\n        // https://github.com/tree-sitter/tree-sitter-go/blob/b0c78230146705e867034e49a5ece20245b33490/grammar.js#L194-L209\n        [\n            `[\n            (function_declaration body: (block) @body)\n            (method_declaration body: (block) @body)\n          ] @function`,\n        ],\n    ],\n    ruby: [\n        // function patterns defined in ruby grammer:\n        // https://github.com/tree-sitter/tree-sitter-ruby/blob/master/grammar.js\n        // NOTE: Use a @params label for optional parameters to avoid capturing as\n        //       part of @body if parameters are present.\n        [\n            `[\n            (method name: (_) parameters: (method_parameters)? @params [(_)+ \"end\"] @body)\n            (singleton_method name: (_) parameters: (method_parameters)? @params [(_)+ \"end\"] @body)\n          ] @function`,\n        ],\n    ],\n};\n\n/** A call of the form `require(...)`. */\nconst requireCall = `(call_expression function: ((identifier) @req (#eq? @req \"require\")))`;\n\n/** A call of the form `require(...)` appearing in a variable declarator. */\nconst declaratorWithRequire = `(variable_declarator value: ${requireCall})`;\n\n/**\n * A CommonJS-style `require` import.\n *\n * Note that a declaration containing multiple `require`s is considered a single import.\n */\nconst commonJsImport = `\n    (lexical_declaration ${declaratorWithRequire}+)\n    (variable_declaration ${declaratorWithRequire}+)\n`;\n\nconst tsImportQueries: [string, Query?][] = [\n    // Since we only care about top level imports, we enforce that the parent node is \"program\"\n    [`(program [ ${commonJsImport} ] @import)`],\n    ['(program [ (import_statement) (import_alias) ] @import)'],\n];\n\nconst importsQuery: {[wasmLanguage in WASMLanguage]: [string, Query?][]} = {\n    python: [\n        // Since we only care about top level imports, we enforce that the parent node is \"module\"\n        [`(module (future_import_statement) @import)`],\n        [`(module (import_statement) @import)`],\n        [`(module (import_from_statement) @import)`],\n    ],\n    javascript: [\n        // Since we only care about top level imports, we enforce that the parent node is \"program\"\n        [`(program [ ${commonJsImport} ] @import)`],\n        ['(program [ (import_statement) ] @import)'],\n    ],\n    typescript: tsImportQueries,\n    tsx: tsImportQueries,\n    go: [\n        // TODO: handle import statements in go\n    ],\n    ruby: [\n        // TODO: handle import statements in ruby\n    ],\n};\n\nconst jsExportQueries: [string, Query?][] = [[`(program (export_statement) @export)`]];\n\nconst exportsQuery: {[wasmLanguage in WASMLanguage]: [string, Query?][]} = {\n    python: [\n        // TODO: handle exports in python\n    ],\n    javascript: jsExportQueries,\n    typescript: jsExportQueries,\n    tsx: jsExportQueries,\n    go: [\n        // TODO: handle exports in go\n    ],\n    ruby: [\n        // TODO: handle exports in ruby\n    ],\n};\n\nconst globalVarsQuery: {[wasmLanguage in WASMLanguage]: [string, Query?][]} = {\n    python: [\n        // Since we only care about top level global vars, we enforce that the parent node is \"module\"\n        [`(module (global_statement) @globalVar)`],\n        [`(module (expression_statement) @globalVar)`],\n    ],\n    javascript: [\n        // TODO: handle global vars in javascript\n    ],\n    typescript: [\n        // TODO: handle global vars in typescript\n    ],\n    tsx: [\n        // TODO: handle global vars in tsx\n    ],\n    go: [\n        // TODO: handle global vars in go\n    ],\n    ruby: [\n        // TODO: handle global vars in ruby\n    ],\n};\n\nconst jsFunctionTypes = [\n    'function',\n    'function_declaration',\n    'generator_function',\n    'generator_function_declaration',\n    'method_definition',\n    'arrow_function',\n];\n\n/**\n * TreeSitter node types corresponding to functions for the given language.\n */\nconst functionTypes: {[wasmLanguage in WASMLanguage]: Set<string>} = {\n    python: new Set(['function_definition']),\n    javascript: new Set(jsFunctionTypes),\n    typescript: new Set(jsFunctionTypes),\n    tsx: new Set(jsFunctionTypes),\n    go: new Set(['function_declaration', 'method_declaration']),\n    ruby: new Set(['method', 'singleton_method']),\n};\n\n/**\n * TreeSitter node types corresponding to syntactic constructs that can have function declarations\n * as their immediate children.\n */\nconst isFunctionParent: {[wasmLanguage in WASMLanguage]: (nd: SyntaxNode) => boolean} = {\n    python: nd => nd.type === 'module' || (nd.type === 'block' && nd.parent?.type === 'class_definition'),\n    javascript: nd => nd.type === 'program' || nd.type === 'class_body',\n    typescript: nd => nd.type === 'program' || nd.type === 'class_body',\n    tsx: nd => nd.type === 'program' || nd.type === 'class_body',\n    go: nd => nd.type === 'source_file',\n    ruby: nd => nd.type === 'program' || nd.type === 'class',\n};\n\nconst loadedLanguages = new Map<WASMLanguage, Language>();\n\nasync function loadWasmLanguage(language: WASMLanguage): Promise<Language> {\n    await Parser.init();\n    // construct a path that works both for the TypeScript source, which lives under `/src`, and for\n    // the transpiled JavaScript, which lives under `/dist`\n    const wasmFile = resolve(__dirname, '..', 'dist', `tree-sitter-${language}.wasm`);\n    return Language.load(wasmFile);\n}\n\nexport async function getLanguage(language: string): Promise<Language> {\n    const wasmLanguage = languageIdToWasmLanguage(language);\n    if (!loadedLanguages.has(wasmLanguage)) {\n        const loadedLang = await loadWasmLanguage(wasmLanguage);\n        loadedLanguages.set(wasmLanguage, loadedLang);\n    }\n    return loadedLanguages.get(wasmLanguage)!;\n}\n\n// This method returns a tree that the user needs to call `.delete()` before going out of scope.\nexport async function parseTreeSitter(language: string, source: string): Promise<Tree> {\n    // `getLanguage` calls `Parser.init`, which needs to be called before `new Parser()` below\n    let treeSitterLanguage = await getLanguage(language);\n    const parser = new Parser();\n    parser.setLanguage(treeSitterLanguage);\n    const parsedTree = parser.parse(source);\n\n    // Need to delete parser objects directly\n    parser.delete();\n    return parsedTree;\n}\n\nexport async function parsesWithoutError(language: string, source: string): Promise<boolean> {\n    const tree = await parseTreeSitter(language, source);\n    const result = !tree.rootNode.hasError();\n    tree.delete();\n    return result;\n}\n\nexport function getBlockCloseToken(language: string): string | null {\n    const wasmLanguage = languageIdToWasmLanguage(language);\n    switch (wasmLanguage) {\n        case WASMLanguage.Python:\n            return null;\n        case WASMLanguage.JavaScript:\n        case WASMLanguage.TypeScript:\n        case WASMLanguage.TSX:\n        case WASMLanguage.Go:\n            return '}';\n        case WASMLanguage.Ruby:\n            return 'end';\n    }\n}\n\nfunction innerQuery(queries: [string, Query?][], root: SyntaxNode): QueryMatch[] {\n    const matches = [];\n    for (const query of queries) {\n        // parse and cache query if this is the first time we've used it\n        if (!query[1]) {\n            const lang = root.tree.getLanguage() as Language;\n            // cache parsed query object\n            query[1] = lang.query(query[0]);\n        }\n        matches.push(...query[1].matches(root));\n    }\n    return matches;\n}\n\nexport function queryFunctions(language: string, root: SyntaxNode): QueryMatch[] {\n    const queries = functionQuery[languageIdToWasmLanguage(language)];\n    return innerQuery(queries, root);\n}\n\n/**\n * A list of all top-level imports in the given tree.\n *\n * Note that imports are _not_ guaranteed to be in the same order as the source code.\n */\nexport function queryImports(language: string, root: SyntaxNode): QueryMatch[] {\n    const queries = importsQuery[languageIdToWasmLanguage(language)];\n    return innerQuery(queries, root);\n}\n\nexport function queryExports(language: string, root: SyntaxNode): QueryMatch[] {\n    const queries = exportsQuery[languageIdToWasmLanguage(language)];\n    return innerQuery(queries, root);\n}\n\nexport function queryGlobalVars(language: string, root: SyntaxNode): QueryMatch[] {\n    const queries = globalVarsQuery[languageIdToWasmLanguage(language)];\n    return innerQuery(queries, root);\n}\n\nconst docstringQuery: [string, Query?] = [\n    `[\n    (class_definition (block (expression_statement (string))))\n    (function_definition (block (expression_statement (string))))\n]`,\n];\n\nexport function queryPythonIsDocstring(blockNode: SyntaxNode): boolean {\n    return innerQuery([docstringQuery], blockNode).length == 1;\n}\n\n/**\n * Find the closest ancestor node of `nd` that may have function declarations as sibling nodes.\n */\nexport function getAncestorWithSiblingFunctions(language: string, nd: SyntaxNode): SyntaxNode | null {\n    const check = isFunctionParent[languageIdToWasmLanguage(language)];\n    while (nd.parent) {\n        if (check(nd.parent)) return nd;\n        nd = nd.parent;\n    }\n    return nd.parent ? nd : null;\n}\n\n/**\n * Check if `nd` is a function.\n *\n * Note that for a JavaScript declaration like\n *\n * ```js\n * var f = function g() {}\n * ```\n *\n * only the node corresponding to the function expression `function g() {}` is considered to be\n * a function, not the entire declaration.\n *\n * Conversely, the declaration is considered a function definition (see below), but the function\n * expression is not.\n */\nexport function isFunction(language: string, nd: SyntaxNode): boolean {\n    return functionTypes[languageIdToWasmLanguage(language)].has(nd.type);\n}\n\n/**\n * Check if `nd` is a function definition.\n *\n * For languages other than JavaScript, this is the same as checking whether `nd` is a function.\n * For JavaScript, function expressions are _not_ considered function definitions, but declarations\n * and assignments assigning a function expression to a variable are.\n */\nexport function isFunctionDefinition(language: string, nd: SyntaxNode): boolean {\n    switch (languageIdToWasmLanguage(language)) {\n        case WASMLanguage.Python:\n        case WASMLanguage.Go:\n        case WASMLanguage.Ruby:\n            return isFunction(language, nd);\n        case WASMLanguage.JavaScript:\n        case WASMLanguage.TypeScript:\n        case WASMLanguage.TSX:\n            // either it is a stand-alone function declaration\n            if (\n                nd.type === 'function_declaration' ||\n                nd.type === 'generator_function_declaration' ||\n                nd.type === 'method_definition'\n            )\n                return true;\n\n            // or a declaration of a function-valued variable\n            if (nd.type === 'lexical_declaration' || nd.type === 'variable_declaration') {\n                // declarations with multiple declarators (`var x = ..., y = ...`) are unlikely to\n                // involve functions in practice, so we make our lives easier and short-circuit\n                if (nd.namedChildCount > 1) return false;\n                let declarator = nd.namedChild(0);\n                // this should never be null, but we check anyway to be safe\n                if (declarator == null) return false;\n                let init = declarator.namedChild(1);\n                return init !== null && isFunction(language, init);\n            }\n\n            // or an assignment to a function-valued variable\n            if (nd.type === 'expression_statement') {\n                let expr = nd.namedChild(0);\n                if (expr?.type === 'assignment_expression') {\n                    let rhs = expr.namedChild(1);\n                    return rhs !== null && isFunction(language, rhs);\n                }\n            }\n\n            return false;\n    }\n}\n\n/**\n * Get the first comment in a run of comments preceding `nd`, if any.\n *\n * That is, if `nd` is preceded by a single comment, return that comment. If it is\n * preceded by a sequence of more than one comments (without any intervening non-comment\n * nodes or blank lines), return the first comments in that sequence. Otherwise return `null`.\n *\n * Note that all comments are treated equally; in particular, for JavaScript, no distinction\n * is made between block comments and line comments.\n */\nexport function getFirstPrecedingComment(nd: SyntaxNode): SyntaxNode | null {\n    // starting from `nd`, walk backwards until we find a node that is not preceded by a comment\n    let cur = nd;\n    while (cur.previousSibling?.type === 'comment') {\n        let prev = cur.previousSibling;\n        // stop if there is an intervening blank line\n        if (prev.endPosition.row < cur.startPosition.row - 1) break;\n        cur = prev;\n    }\n\n    // if that node is itself a comment, it is the first one in a run of comments preceding `nd`\n    if (cur?.type === 'comment') return cur;\n    // otherwise it must be `nd`, so there aren't any comments preceding `nd`\n    return null;\n}\n\n/**\n * Get the positions of all function nodes in the given piece of source code.\n */\nexport async function getFunctionPositions(language: string, source: string): Promise<NodePosition[]> {\n    const tree = await parseTreeSitter(language, source);\n    const results = queryFunctions(language, tree.rootNode);\n    const positions = results.map(res => {\n        const fn = res.captures.find(c => c.name === 'function')!.node;\n        return {\n            startIndex: fn.startIndex,\n            endIndex: fn.endIndex,\n        };\n    });\n    tree.delete();\n    return positions;\n}\n\n/**\n * Very simple type that echo `vscode.Position` (which we cannot use directly in promptlib)\n */\nexport type IPosition = {\n    line: number;\n    character: number;\n};\n\n/*\nList of queries to run per language to find call sites.\ni.e. if the cursor is inside of the arg list of a function call, get the function name and the offset.\n*/\nconst callSiteQuery: {[language in WASMLanguage]: [string, Query?][]} = {\n    python: [\n        [\n            `(call\n            function:  [\n                (identifier) @caller\n                (attribute attribute:(identifier) @caller)\n            ]\n            arguments: (argument_list) @args\n        )`,\n        ],\n    ],\n    javascript: [],\n    tsx: [],\n    typescript: [],\n    go: [],\n    ruby: [],\n};\n\n/**\n * If the cursor is inside of the arg list of a function call, get the function name and the offset.\n *\n * For instance `x = foo(\"aasdf\", \"qwer\", bar(1,2,│));` If the cursor is at the position of the `│` then\n * getCallSites returns the name and position of both `foo` and `bar` in that order.\n */\nexport async function getCallSites(docInfo: DocumentInfoWithOffset): Promise<{name: string; position: IPosition}[]> {\n    // It is possible that non-WASM languages will get passed to `getCallSite` from `getSymbolDefSnippets`\n    // so we need to fail gracefully if that happens.\n    if (!(docInfo.languageId in callSiteQuery)) return [];\n\n    // TODO consider getting the source only up until the offset (e.g. the offset argument is not needed) and\n    // then adding a bunch of parens to the end of the source to make sure that the tree is complete\n    // otherwise we won't collect callers that don't have a closing parens\n    let offset = docInfo.offset;\n    let source = docInfo.source.substring(0, offset);\n    // guard against time-consuming parses of very large files\n    // TODO & WARNING pre-truncating long files has only been tested (poorly) against python and might not work well for all languages - test each!\n    const pretruncateOffset = Math.max(source.length - 5000, 0); // I picked this value arbitrarily - 5000 chars takes ~25ms to parse\n    const linesBeforeTruncation = source.substring(0, pretruncateOffset).split('\\n').length - 1;\n    offset -= pretruncateOffset;\n    source = source.substring(pretruncateOffset);\n    // artificially close all open parens, this is because tree-sitter will see `foo(bar(), a` and not consider `foo` a function\n    // but if we add a bunch of closing parens then this `foo(bar(), a)` will be interpreted as a function.\n    source = source + ')))))';\n    let callers: [string, IPosition][] = [];\n\n    // Parse the source code just before the cursor position, extract every function call and its arguments\n    const tree = await parseTreeSitter(docInfo.languageId, source);\n    const queries = callSiteQuery[languageIdToWasmLanguageMapping[docInfo.languageId]];\n    const results = innerQuery(queries, tree.rootNode);\n    results.forEach((res, resIndex) => {\n        let callerName = '';\n        let callerLineNo = 0;\n        let callerStartChar = 0;\n        let argsStartIndex = 0;\n        let argsEndIndex = 0;\n        // Then, for each function and arg list, get the name and position of the function and the start and end offset of the arg list\n        res.captures.forEach((cap, capIndex) => {\n            const node = cap.node;\n            if (cap.name == 'caller') {\n                callerName = source.substring(node.startIndex, node.endIndex);\n                callerLineNo = node.startPosition.row + linesBeforeTruncation;\n                callerStartChar = node.startPosition.column;\n            } else if (cap.name == 'args') {\n                argsStartIndex = node.startIndex;\n                argsEndIndex = node.endIndex;\n            }\n        });\n        // If the cursor is within the arg list of the function, then add the function name and position to the list of callers\n        if (offset >= argsStartIndex && offset <= argsEndIndex) {\n            // TODO check at endpoints\n            const callerLineCol: IPosition = {line: callerLineNo, character: callerStartChar};\n            callers.push([callerName, callerLineCol]); // These are outer first\n        }\n    });\n    tree.delete();\n    return callers.map(([name, position]) => ({name, position}));\n}\n","import * as Parser from 'web-tree-sitter';\nimport {\n    WASMLanguage,\n    isSupportedLanguageId,\n    languageIdToWasmLanguage,\n    parseTreeSitter,\n    queryPythonIsDocstring,\n} from './parse';\n\nexport interface Position {\n    line: number; // 0-indexed\n    character: number; // 0-indexed\n}\n\nexport interface BlockParser {\n    isEmptyBlockStart: (text: string, offset: number) => Promise<boolean>;\n\n    /**\n     * Given a document prefix, offset, and a proposed completion, determines how much of the\n     * completion to keep in order to \"finish\" the following block when the completion is appended\n     * to the document prefix.\n     *\n     * If there is no such block, or the completion doesn't close the block, returns undefined.\n     */\n    isBlockBodyFinished: (prefix: string, completion: string, offset: number) => Promise<number | undefined>;\n\n    /**\n     * Given a document text and offset, determines the beginning of current matching node.\n     *\n     * If there is no such block, returns undefined.\n     */\n    getNodeStart: (text: string, offset: number) => Promise<number | undefined>;\n}\n\nabstract class BaseBlockParser implements BlockParser {\n    abstract isEmptyBlockStart(text: string, offset: number): Promise<boolean>;\n\n    constructor(\n        protected readonly languageId: string,\n        protected readonly nodeMatch: {[parent: string]: string},\n        /**\n         * A map from node types that have a block or an statement as a child\n         * to the field label of the child node that is a block or statement.\n         * For example, an if statement in a braced language.\n         */\n        protected readonly nodeTypesWithBlockOrStmtChild: Map<string, string>\n    ) {}\n\n    protected async getNodeMatchAtPosition<T>(\n        text: string,\n        offset: number,\n        cb: (nd: Parser.SyntaxNode) => T\n    ): Promise<T | undefined> {\n        const tree = await parseTreeSitter(this.languageId, text);\n        try {\n            // TODO:(hponde) It seems that we have an issue if it's at the end of the block:\n            // https://github.com/tree-sitter/tree-sitter/issues/407\n            const nodeAtPos = tree.rootNode.descendantForIndex(offset);\n\n            let nodeToComplete: Parser.SyntaxNode | null = nodeAtPos;\n\n            // find target element by looking at parent of cursor node\n            // don't stop at node types that may have a block child, but don't actually in this\n            // parse tree\n            while (nodeToComplete) {\n                const blockNodeType = this.nodeMatch[nodeToComplete.type];\n                if (blockNodeType) {\n                    if (!this.nodeTypesWithBlockOrStmtChild.has(nodeToComplete.type)) {\n                        break;\n                    }\n\n                    const fieldLabel = this.nodeTypesWithBlockOrStmtChild.get(nodeToComplete.type)!;\n                    const childToCheck =\n                        fieldLabel == ''\n                            ? nodeToComplete.namedChildren[0]\n                            : nodeToComplete.childForFieldName(fieldLabel);\n                    if (childToCheck?.type == blockNodeType) {\n                        break;\n                    }\n                }\n\n                nodeToComplete = nodeToComplete.parent;\n            }\n            if (!nodeToComplete) {\n                // No nodes we're interested in\n                return;\n            }\n            return cb(nodeToComplete);\n        } finally {\n            tree.delete();\n        }\n    }\n\n    protected getNextBlockAtPosition<T>(\n        text: string,\n        offset: number,\n        cb: (nd: Parser.SyntaxNode) => T\n    ): Promise<T | undefined> {\n        return this.getNodeMatchAtPosition(text, offset, nodeToComplete => {\n            // FIXME: childForFieldName always returns null\n            //   const block = nodeToComplete.childForFieldName(fieldToComplete);\n            // Instead, find child nodes of the langauge's nodeMatch type for\n            // nodeToComplete.\n            // Look in reverse order, in case of nodes with multiple blocks defined,\n            // such as try/catch/finally.\n            let block = nodeToComplete.children.reverse().find(x => x.type == this.nodeMatch[nodeToComplete.type]);\n            if (!block) {\n                // child of matching type isn't defined yet\n                return;\n            }\n\n            if (this.languageId == 'python' && block.parent) {\n                // handle empty block's parent being the colon (!)\n                const parent = block.parent.type == ':' ? block.parent.parent : block.parent;\n\n                // tree-sitter handles comments in a weird way, so we need to\n                // consume them.\n                let nextComment = parent?.nextSibling;\n\n                while (nextComment && nextComment.type == 'comment') {\n                    // next comment is inline at the end of the block\n                    // see issue: https://github.com/tree-sitter/tree-sitter-python/issues/113\n                    const commentInline =\n                        nextComment.startPosition.row == block.endPosition.row &&\n                        nextComment.startPosition.column >= block.endPosition.column;\n\n                    // next comment is on subsequent line and indented > parent's indentation\n                    // see issue: https://github.com/tree-sitter/tree-sitter-python/issues/112\n                    const commentAtEnd =\n                        nextComment.startPosition.row > parent!.endPosition.row &&\n                        nextComment.startPosition.column > parent!.startPosition.column;\n\n                    if (commentInline || commentAtEnd) {\n                        block = nextComment;\n                        nextComment = nextComment.nextSibling;\n                    } else {\n                        break;\n                    }\n                }\n            }\n\n            if (block.endIndex >= block.tree.rootNode.endIndex - 1 && (block.hasError() || block.parent!.hasError())) {\n                // TODO:(hponde) improve this logic\n                // block is the whole document, and has errors, most likely doc has\n                // preceding errors.\n                return;\n            }\n\n            // Return first block if not empty\n            return cb(block);\n        });\n    }\n\n    async isBlockBodyFinished(prefix: string, completion: string, offset: number): Promise<number | undefined> {\n        const solution = (prefix + completion).trimEnd();\n        const endIndex = await this.getNextBlockAtPosition(solution, offset, block => block.endIndex);\n        if (endIndex === undefined) {\n            // no block, not finished yet\n            return;\n        }\n        if (endIndex < solution.length) {\n            // descendant block is finished, stop at end of block\n            const lengthOfBlock = endIndex - prefix.length;\n            return lengthOfBlock > 0 ? lengthOfBlock : undefined;\n        }\n    }\n\n    getNodeStart(text: string, offset: number): Promise<number | undefined> {\n        const solution = text.trimEnd();\n        return this.getNodeMatchAtPosition(solution, offset, block => block.startIndex);\n    }\n}\n\nclass RegexBasedBlockParser extends BaseBlockParser {\n    constructor(\n        languageId: string,\n        protected readonly blockEmptyMatch: string,\n        private readonly lineMatch: RegExp,\n        nodeMatch: {[parent: string]: string},\n        nodeTypesWithBlockOrStmtChild: Map<string, string>\n    ) {\n        super(languageId, nodeMatch, nodeTypesWithBlockOrStmtChild);\n    }\n\n    private isBlockStart(line: string): boolean {\n        return this.lineMatch.test(line.trimStart());\n    }\n\n    private async isBlockBodyEmpty(text: string, offset: number): Promise<boolean> {\n        const res = await this.getNextBlockAtPosition(text, offset, block => {\n            // strip whitespace and compare with language-defined empty block\n            // Note that for Ruby, `block` is the closing `end` token, while for other\n            // languages it is the whole block, so we consider the text from the earlier of\n            // block.startIndex and offset, all the way up to block.endIndex.\n            if (block.startIndex < offset) offset = block.startIndex;\n            let blockText = text.substring(offset, block.endIndex).trim();\n            if (blockText == '' || blockText.replace(/\\s/g, '') == this.blockEmptyMatch) {\n                // block is empty\n                return true;\n            }\n            return false;\n        });\n        return res === undefined || res;\n    }\n\n    async isEmptyBlockStart(text: string, offset: number): Promise<boolean> {\n        offset = rewindToNearestNonWs(text, offset);\n        return this.isBlockStart(getLineAtOffset(text, offset)) && this.isBlockBodyEmpty(text, offset);\n    }\n}\n\nfunction getLineAtOffset(text: string, offset: number): string {\n    const prevNewline = text.lastIndexOf('\\n', offset - 1);\n    let nextNewline = text.indexOf('\\n', offset);\n    if (nextNewline < 0) {\n        nextNewline = text.length;\n    }\n    return text.slice(prevNewline + 1, nextNewline);\n}\n\n/**\n * Returns the cursor position immediately after the nearest non-whitespace\n * character.  If every character before offset is whitespace, returns 0.\n */\nfunction rewindToNearestNonWs(text: string, offset: number): number {\n    let result = offset;\n    while (result > 0 && /\\s/.test(text.charAt(result - 1))) {\n        result--;\n    }\n    return result;\n}\n\n/**\n * If `nd` is only preceded by whitespace on the line where it starts, return that whitespace;\n * otherwise, return undefined. The parameter `source` is the source text from which `nd` was\n * parsed.\n */\nfunction indent(nd: Parser.SyntaxNode, source: string): string | undefined {\n    const startIndex = nd.startIndex;\n    const lineStart = nd.startIndex - nd.startPosition.column;\n    const prefix = source.substring(lineStart, startIndex);\n    if (/^\\s*$/.test(prefix)) {\n        return prefix;\n    }\n    return undefined;\n}\n\n/**\n * Check if `snd` is \"outdented\" with respect to `fst`, that is, it starts on a later line, and\n * its indentation is no greater than that of `fst`.\n */\nfunction outdented(fst: Parser.SyntaxNode, snd: Parser.SyntaxNode, source: string): boolean {\n    if (snd.startPosition.row <= fst.startPosition.row) {\n        return false;\n    }\n    const fstIndent = indent(fst, source);\n    const sndIndent = indent(snd, source);\n    return fstIndent !== undefined && sndIndent !== undefined && fstIndent.startsWith(sndIndent);\n}\n\nclass TreeSitterBasedBlockParser extends BaseBlockParser {\n    constructor(\n        languageId: string,\n        nodeMatch: {[parent: string]: string},\n        nodeTypesWithBlockOrStmtChild: Map<string, string>,\n        private readonly startKeywords: string[],\n        private readonly blockNodeType: string,\n        /**\n         * The langauge-specific node type of an empty statement, that is,\n         * a statement with no text except possibly the statement terminator.\n         * For example, `;` is an empty statement in a braced language, but\n         * `pass` is not in Python.\n         */\n        private readonly emptyStatementType: string | null,\n        private readonly curlyBraceLanguage: boolean\n    ) {\n        super(languageId, nodeMatch, nodeTypesWithBlockOrStmtChild);\n    }\n\n    private isBlockEmpty(block: Parser.SyntaxNode, offset: number): boolean {\n        let trimmed = block.text.trim();\n\n        if (this.curlyBraceLanguage) {\n            if (trimmed.startsWith('{')) {\n                trimmed = trimmed.slice(1);\n            }\n            if (trimmed.endsWith('}')) {\n                trimmed = trimmed.slice(0, -1);\n            }\n            trimmed = trimmed.trim();\n        }\n\n        if (trimmed.length == 0) {\n            return true;\n        }\n\n        // Python: Consider a block that contains only a docstring empty.\n        if (\n            this.languageId == 'python' &&\n            (block.parent?.type == 'class_definition' || block.parent?.type == 'function_definition') &&\n            block.children.length == 1 &&\n            queryPythonIsDocstring(block.parent)\n        ) {\n            return true;\n        }\n\n        return false;\n    }\n\n    async isEmptyBlockStart(text: string, offset: number): Promise<boolean> {\n        if (offset > text.length) {\n            throw new RangeError('Invalid offset');\n        }\n\n        // Ensure that the cursor is at the end of a line, ignoring trailing whitespace.\n        for (let i = offset; i < text.length; i++) {\n            if (text.charAt(i) == '\\n') {\n                break;\n            } else if (/\\S/.test(text.charAt(i))) {\n                return false;\n            }\n        }\n\n        // This lets e.g. \"def foo():\\n█\" give a multiline suggestion.\n        offset = rewindToNearestNonWs(text, offset);\n\n        const tree = await parseTreeSitter(this.languageId, text);\n        try {\n            // offset here is the cursor position immediately after a whitespace\n            // character, but tree-sitter expects the index of the node to search for.\n            // Therefore we adjust the offset when we call into tree-sitter.\n            const nodeAtPos = tree.rootNode.descendantForIndex(offset - 1);\n            if (nodeAtPos == null) {\n                return false;\n            }\n\n            // Because of rewinding to the previous non-whitespace character, nodeAtPos may be\n            // \"}\".  That's not a good place to show multline ghost text.\n            if (this.curlyBraceLanguage && nodeAtPos.type == '}') {\n                return false;\n            }\n\n            // JS/TS: half open, empty blocks are sometimes parsed as objects\n            if (\n                (this.languageId == 'javascript' || this.languageId == 'typescript') &&\n                nodeAtPos.parent &&\n                nodeAtPos.parent.type == 'object' &&\n                nodeAtPos.parent.text.trim() == '{'\n            ) {\n                return true;\n            }\n\n            // TS: a function_signature/method_signature is a prefix of a\n            // function_declaration/method_declaration, so if nodeAtPos is a descendant of one of\n            // those node types and the signature looks incomplete, return true\n            if (this.languageId == 'typescript') {\n                let currNode = nodeAtPos;\n                while (currNode.parent) {\n                    if (currNode.type == 'function_signature' || currNode.type == 'method_signature') {\n                        // if the next node is outdented, the signature is probably incomplete and\n                        // TreeSitter may just have done some fanciful error correction, so we'll\n                        // assume that this is really meant to be an incomplete function\n                        const next = nodeAtPos.nextSibling;\n                        if (next && currNode.hasError() && outdented(currNode, next, text)) {\n                            return true;\n                        }\n\n                        // if, on the other hand, there is a semicolon, then the signature is\n                        // probably complete, and we should not show a multiline suggestion\n                        const semicolon = currNode.children.find(c => c.type == ';');\n                        return !semicolon && currNode.endIndex <= offset;\n                    }\n                    currNode = currNode.parent;\n                }\n            }\n\n            // Ignoring special cases, there are three situations when we want to return true:\n            //\n            // 1. nodeAtPos is in a block or a descendant of a block, the parent of the block is one of the node types\n            //    in this.nodeMatch, and the block is empty.\n            // 2. nodeAtPos is somewhere below an ERROR node, and that ERROR node has an anonymous child\n            //    matching one of the keywords we care about.  If that ERROR node also has a block child, the\n            //    block must be empty.\n            // 3. nodeAtPos is somewhere below a node type that we know can contain a block, and the block is either\n            //    not present or empty.\n\n            let errorNode = null;\n            let blockNode = null;\n            let blockParentNode = null;\n            let currNode: Parser.SyntaxNode | null = nodeAtPos;\n            while (currNode != null) {\n                if (currNode.type == this.blockNodeType) {\n                    blockNode = currNode;\n                    break;\n                }\n                if (this.nodeMatch[currNode.type]) {\n                    blockParentNode = currNode;\n                    break;\n                }\n                if (currNode.type == 'ERROR') {\n                    errorNode = currNode;\n                    break;\n                }\n                currNode = currNode.parent;\n            }\n            if (blockNode != null) {\n                if (!blockNode.parent || !this.nodeMatch[blockNode.parent.type]) {\n                    return false;\n                }\n\n                // Python: hack for unclosed docstrings.  There's no rhyme or reason to how the actual\n                // docstring comments are parsed, but overall the parse tree looks like:\n                // function_definition\n                //   - def\n                //   - identifier\n                //   - parameters\n                //   - :\n                //   - ERROR with text that starts with \"\"\" or '''\n                //   - block\n                //     - junk\n                //\n                // We do best effort here to detect that we're in an unclosed docstring and return true.\n                // Note that this won't work (we won't give a multline suggestion) if the docstring uses single\n                // quotes, which is allowed by the language standard but not idiomatic (see PEP 257,\n                // Docstring Conventions).\n                if (this.languageId == 'python') {\n                    const prevSibling = blockNode.previousSibling;\n                    if (\n                        prevSibling != null &&\n                        prevSibling.hasError() &&\n                        (prevSibling.text.startsWith('\"\"\"') || prevSibling.text.startsWith(\"'''\"))\n                    ) {\n                        return true;\n                    }\n                }\n\n                return this.isBlockEmpty(blockNode, offset);\n            }\n            if (errorNode != null) {\n                // TS: In a module such as \"module 'foo' {\" or internal_module such as \"namespace 'foo' {\"\n                // the open brace is parsed as an error node, like so:\n                // - expression_statement\n                //   - [internal_]module\n                //     - string\n                //   - ERROR\n                if (\n                    errorNode.previousSibling?.type == 'module' ||\n                    errorNode.previousSibling?.type == 'internal_module' ||\n                    errorNode.previousSibling?.type == 'def'\n                ) {\n                    return true;\n                }\n\n                // Search in reverse order so we get the latest block or keyword node.\n                const children = [...errorNode.children].reverse();\n                const keyword = children.find(child => this.startKeywords.includes(child.type));\n                let block = children.find(child => child.type == this.blockNodeType);\n\n                if (keyword) {\n                    switch (this.languageId) {\n                        case 'python': {\n                            // Python: try-except-finally\n                            // If the cursor is in either \"except\" or \"finally,\" but the try-except-finally isn't finished,\n                            // nodeAtPos will be parsed as an identifier.  If > 4 characters of \"except\" or \"finally\" have been\n                            // typed, it will be parsed as:\n                            // ERROR\n                            //   - try\n                            //   - :\n                            //   - ERROR\n                            //     - block\n                            //   - expression_statement\n                            //     - identifier\n                            //\n                            // In this case, we have to special-case finding the right block to check whether it's empty.\n                            if (keyword.type == 'try' && nodeAtPos.type == 'identifier' && nodeAtPos.text.length > 4) {\n                                block = children\n                                    .find(child => child.hasError())\n                                    ?.children.find(child => child.type == 'block');\n                            }\n\n                            // Python: sometimes nodes that are morally part of a block are parsed as statements\n                            // that are all children of an ERROR node.  Detect this by looking for \":\" and inspecting\n                            // its nextSibling.  Skip over \":\" inside parentheses because those could be part of a\n                            // typed parameter.\n                            let colonNode;\n                            let parenCount = 0;\n                            for (const child of errorNode.children) {\n                                if (child.type == ':' && parenCount == 0) {\n                                    colonNode = child;\n                                    break;\n                                }\n                                if (child.type == '(') {\n                                    parenCount += 1;\n                                }\n                                if (child.type == ')') {\n                                    parenCount -= 1;\n                                }\n                            }\n                            if (colonNode && keyword.endIndex <= colonNode.startIndex && colonNode.nextSibling) {\n                                // horrible hack to handle unfinished docstrings :(\n                                if (keyword.type == 'def') {\n                                    const sibling = colonNode.nextSibling;\n                                    if (sibling.type == '\"' || sibling.type == \"'\") {\n                                        return true;\n                                    }\n                                    if (sibling.type == 'ERROR' && (sibling.text == '\"\"\"' || sibling.text == \"'''\")) {\n                                        return true;\n                                    }\n                                }\n                                return false;\n                            }\n\n                            break;\n                        }\n                        case 'javascript': {\n                            // JS: method definition within a class, e.g. \"class C { foo()\"\n                            const formalParameters = children.find(child => child.type == 'formal_parameters');\n                            if (keyword.type == 'class' && formalParameters) {\n                                return true;\n                            }\n\n                            // JS: Don't mistake a half-open curly brace after a keyword under an error node for an empty\n                            // block.  If it has a nextSibling, then it's not empty. e.g. in \"do {\\n\\t;█\", the \";\" is an\n                            // empty_statement and the nextSibling of the \"{\".\n                            const leftCurlyBrace = children.find(child => child.type == '{');\n                            if (\n                                leftCurlyBrace &&\n                                leftCurlyBrace.startIndex > keyword.endIndex &&\n                                leftCurlyBrace.nextSibling != null\n                            ) {\n                                return false;\n                            }\n\n                            // JS: do-while: don't give a multline suggestion after the \"while\" keyword\n                            const doNode = children.find(child => child.type == 'do');\n                            if (doNode && keyword.type == 'while') {\n                                return false;\n                            }\n\n                            // JS: In an arrow function, if there is a next sibling of the arrow and it's not an open brace, we're not in a\n                            // block context and we should return false.\n                            if (keyword.type == '=>' && keyword.nextSibling && keyword.nextSibling.type != '{') {\n                                return false;\n                            }\n\n                            break;\n                        }\n                        case 'typescript': {\n                            // TS: Don't mistake a half-open curly brace after a keyword under an error node for an empty\n                            // block.  If it has a nextSibling, then it's not empty. e.g. in \"do {\\n\\t;█\", the \";\" is an\n                            // empty_statement and the nextSibling of the \"{\".\n                            const leftCurlyBrace = children.find(child => child.type == '{');\n                            if (\n                                leftCurlyBrace &&\n                                leftCurlyBrace.startIndex > keyword.endIndex &&\n                                leftCurlyBrace.nextSibling != null\n                            ) {\n                                return false;\n                            }\n\n                            // TS: do-while: don't give a multline suggestion after the \"while\" keyword\n                            const doNode = children.find(child => child.type == 'do');\n                            if (doNode && keyword.type == 'while') {\n                                return false;\n                            }\n\n                            // TS: In an arrow function, if there is a next sibling of the arrow and it's not an open brace, we're not in a\n                            // block context and we should return false.\n                            if (keyword.type == '=>' && keyword.nextSibling && keyword.nextSibling.type != '{') {\n                                return false;\n                            }\n\n                            break;\n                        }\n                    }\n\n                    if (block && block.startIndex > keyword.endIndex) {\n                        return this.isBlockEmpty(block, offset);\n                    }\n                    return true;\n                }\n            }\n            if (blockParentNode != null) {\n                const expectedType = this.nodeMatch[blockParentNode.type];\n                const block = blockParentNode.children\n                    .slice()\n                    .reverse()\n                    .find(x => x.type == expectedType);\n                if (!block) {\n                    // Some node types have a child that is either a block or a statement, e.g. \"if (foo)\".\n                    // If the user has started typing a non-block statement, then this is not the start of an\n                    // empty block.\n                    if (this.nodeTypesWithBlockOrStmtChild.has(blockParentNode.type)) {\n                        const fieldLabel = this.nodeTypesWithBlockOrStmtChild.get(blockParentNode.type)!;\n                        const child =\n                            fieldLabel == ''\n                                ? blockParentNode.children[0]\n                                : blockParentNode.childForFieldName(fieldLabel);\n                        if (child && child.type != this.blockNodeType && child.type != this.emptyStatementType) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                } else {\n                    return this.isBlockEmpty(block, offset);\n                }\n            }\n\n            return false;\n        } finally {\n            tree.delete();\n        }\n    }\n}\n\nconst wasmLanguageToBlockParser: {[languageId in WASMLanguage]: BlockParser} = {\n    python: new TreeSitterBasedBlockParser(\n        /* languageId */ 'python',\n        /* nodeMatch */ {\n            // Generated with script/tree-sitter-super-types tree-sitter-python block\n            class_definition: 'block',\n            elif_clause: 'block',\n            else_clause: 'block',\n            except_clause: 'block',\n            finally_clause: 'block',\n            for_statement: 'block',\n            function_definition: 'block',\n            if_statement: 'block',\n            try_statement: 'block',\n            while_statement: 'block',\n            with_statement: 'block',\n        },\n        /* nodeTypesWithBlockOrStmtChild */ new Map(),\n        /* startKeywords */ ['def', 'class', 'if', 'elif', 'else', 'for', 'while', 'try', 'except', 'finally', 'with'],\n        /* blockNodeType */ 'block',\n        /* emptyStatementType */ null,\n        /* curlyBraceLanguage */ false\n    ),\n    javascript: new TreeSitterBasedBlockParser(\n        /* languageId */ 'javascript',\n        /* nodeMatch */ {\n            // Generated with script/tree-sitter-super-types tree-sitter-javascript statement_block\n            arrow_function: 'statement_block',\n            catch_clause: 'statement_block',\n            do_statement: 'statement_block',\n            else_clause: 'statement_block',\n            finally_clause: 'statement_block',\n            for_in_statement: 'statement_block',\n            for_statement: 'statement_block',\n            function: 'statement_block',\n            function_declaration: 'statement_block',\n            generator_function: 'statement_block',\n            generator_function_declaration: 'statement_block',\n            if_statement: 'statement_block',\n            method_definition: 'statement_block',\n            try_statement: 'statement_block',\n            while_statement: 'statement_block',\n            with_statement: 'statement_block',\n            // Generated with script/tree-sitter-super-types tree-sitter-javascript class_body\n            class: 'class_body',\n            class_declaration: 'class_body',\n        },\n        /* nodeTypesWithBlockOrStmtChild */ new Map([\n            ['arrow_function', 'body'],\n            ['do_statement', 'body'],\n            ['else_clause', ''],\n            ['for_in_statement', 'body'],\n            ['for_statement', 'body'],\n            ['if_statement', 'consequence'],\n            ['while_statement', 'body'],\n            ['with_statement', 'body'],\n        ]),\n        /* startKeywords */ [\n            '=>',\n            'try',\n            'catch',\n            'finally',\n            'do',\n            'for',\n            'if',\n            'else',\n            'while',\n            'with',\n            'function',\n            'function*',\n            'class',\n        ],\n        /* blockNodeType */ 'statement_block',\n        /* emptyStatementType */ 'empty_statement',\n        /* curlyBraceLanguage */ true\n    ),\n    typescript: new TreeSitterBasedBlockParser(\n        /* languageId */ 'typescript',\n        /* nodeMatch */ {\n            // Generated with script/tree-sitter-super-types tree-sitter-typescript/typescript statement_block\n            ambient_declaration: 'statement_block',\n            arrow_function: 'statement_block',\n            catch_clause: 'statement_block',\n            do_statement: 'statement_block',\n            else_clause: 'statement_block',\n            finally_clause: 'statement_block',\n            for_in_statement: 'statement_block',\n            for_statement: 'statement_block',\n            function: 'statement_block',\n            function_declaration: 'statement_block',\n            generator_function: 'statement_block',\n            generator_function_declaration: 'statement_block',\n            if_statement: 'statement_block',\n            internal_module: 'statement_block',\n            method_definition: 'statement_block',\n            module: 'statement_block',\n            try_statement: 'statement_block',\n            while_statement: 'statement_block',\n            // Generated with script/tree-sitter-super-types tree-sitter-typescript/typescript class_body\n            abstract_class_declaration: 'class_body',\n            class: 'class_body',\n            class_declaration: 'class_body',\n        },\n        /* nodeTypesWithBlockOrStmtChild */ new Map([\n            ['arrow_function', 'body'],\n            ['do_statement', 'body'],\n            ['else_clause', ''],\n            ['for_in_statement', 'body'],\n            ['for_statement', 'body'],\n            ['if_statement', 'consequence'],\n            ['while_statement', 'body'],\n            ['with_statement', 'body'],\n        ]),\n        /* startKeywords */ [\n            'declare',\n            '=>',\n            'try',\n            'catch',\n            'finally',\n            'do',\n            'for',\n            'if',\n            'else',\n            'while',\n            'with',\n            'function',\n            'function*',\n            'class',\n        ],\n        /* blockNodeType */ 'statement_block',\n        /* emptyStatementType */ 'empty_statement',\n        /* curlyBraceLanguage */ true\n    ),\n    tsx: new TreeSitterBasedBlockParser(\n        /* languageId */ 'typescriptreact',\n        /* nodeMatch */ {\n            // Generated with script/tree-sitter-super-types tree-sitter-typescript/typescript statement_block\n            ambient_declaration: 'statement_block',\n            arrow_function: 'statement_block',\n            catch_clause: 'statement_block',\n            do_statement: 'statement_block',\n            else_clause: 'statement_block',\n            finally_clause: 'statement_block',\n            for_in_statement: 'statement_block',\n            for_statement: 'statement_block',\n            function: 'statement_block',\n            function_declaration: 'statement_block',\n            generator_function: 'statement_block',\n            generator_function_declaration: 'statement_block',\n            if_statement: 'statement_block',\n            internal_module: 'statement_block',\n            method_definition: 'statement_block',\n            module: 'statement_block',\n            try_statement: 'statement_block',\n            while_statement: 'statement_block',\n            // Generated with script/tree-sitter-super-types tree-sitter-typescript/typescript class_body\n            abstract_class_declaration: 'class_body',\n            class: 'class_body',\n            class_declaration: 'class_body',\n        },\n        /* nodeTypesWithBlockOrStmtChild */ new Map([\n            ['arrow_function', 'body'],\n            ['do_statement', 'body'],\n            ['else_clause', ''],\n            ['for_in_statement', 'body'],\n            ['for_statement', 'body'],\n            ['if_statement', 'consequence'],\n            ['while_statement', 'body'],\n            ['with_statement', 'body'],\n        ]),\n        /* startKeywords */ [\n            'declare',\n            '=>',\n            'try',\n            'catch',\n            'finally',\n            'do',\n            'for',\n            'if',\n            'else',\n            'while',\n            'with',\n            'function',\n            'function*',\n            'class',\n        ],\n        /* blockNodeType */ 'statement_block',\n        /* emptyStatementType */ 'empty_statement',\n        /* curlyBraceLanguage */ true\n    ),\n    go: new RegexBasedBlockParser(\n        /* languageId */ 'go',\n        /* blockEmptyMatch */ '{}',\n        /* lineMatch */ /\\b(func|if|else|for)\\b/,\n        /* nodeMatch */ {\n            // Generated with script/tree-sitter-super-types tree-sitter-go block\n            communication_case: 'block',\n            default_case: 'block',\n            expression_case: 'block',\n            for_statement: 'block',\n            func_literal: 'block',\n            function_declaration: 'block',\n            if_statement: 'block',\n            labeled_statement: 'block',\n            method_declaration: 'block',\n            type_case: 'block',\n        },\n        /* nodeTypesWithBlockOrStmtChild */ new Map() // Go always requires braces\n    ),\n    ruby: new RegexBasedBlockParser(\n        /* languageId */ 'ruby',\n        /* blockEmptyMatch */ 'end',\n        // Regex \\b matches word boundaries - `->{}` has no word boundary.\n        /* lineMatch */ /\\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\\b|->/,\n        /* nodeMatch */ {\n            // Ruby works differently from other languages because there is no\n            // block-level node, instead we use the literal 'end' node to\n            // represent the end of a block.\n            begin_block: '}',\n            block: '}',\n            end_block: '}',\n            lambda: 'block',\n            for: 'do',\n            until: 'do',\n            while: 'do',\n            case: 'end',\n            do: 'end',\n            if: 'end',\n            method: 'end',\n            module: 'end',\n            unless: 'end',\n            do_block: 'end',\n        },\n        // TODO(eaftan): Scour Ruby grammar for these\n        /* nodeTypesWithBlockOrStmtChild */ new Map()\n    ),\n};\n\nexport function getBlockParser(languageId: string): BlockParser {\n    return wasmLanguageToBlockParser[languageIdToWasmLanguage(languageId)];\n}\n\nexport async function isEmptyBlockStart(languageId: string, text: string, offset: number) {\n    if (!isSupportedLanguageId(languageId)) {\n        return false;\n    }\n    return getBlockParser(languageId).isEmptyBlockStart(text, offset);\n}\n\nexport async function isBlockBodyFinished(languageId: string, prefix: string, completion: string, offset: number) {\n    if (!isSupportedLanguageId(languageId)) {\n        return undefined;\n    }\n    return getBlockParser(languageId).isBlockBodyFinished(prefix, completion, offset);\n}\n\nexport async function getNodeStart(languageId: string, text: string, offset: number) {\n    if (!isSupportedLanguageId(languageId)) {\n        return;\n    }\n    return getBlockParser(languageId).getNodeStart(text, offset);\n}\n","import {FileSystem} from './fileSystem';\nimport {newLineEnded} from './languageMarker';\nimport {extractLocalImportContext} from './localImportContext';\nimport {getSiblingFunctionStart} from './siblingFunctions';\nimport {CursorSnippetsPickingStrategy} from './snippetInclusion/cursorMatching';\nimport {NeighboringSnippetType, NeighboringTabsOption, getNeighborSnippets} from './snippetInclusion/neighboringFiles';\nimport {\n    SingleSnippetProviderOptions,\n    SnippetProviderOptions,\n    SnippetProviderType,\n    SnippetWithProviderInfo,\n    processSnippetsForWishlist,\n} from './snippetInclusion/snippets';\nimport {findEditDistanceScore} from './suffixMatchCriteria';\nimport {TokenizerName, getTokenizer} from './tokenization';\nimport {\n    Priorities,\n    PromptBackground,\n    PromptChoices,\n    PromptElementKind,\n    PromptElementRanges,\n    PromptWishlist,\n} from './wishlist';\n/** The 1-entry cache for the suffix */\nlet cachedSuffix: {text: string; tokens: number[]} = {text: '', tokens: []};\n\n/**\n * Re. cached suffix, see the discussion in the PR: https://github.com/github/copilot-client/pull/2171\n * In an earlier version of the PR, we had declared variables cacheReusedCount,cacheReusablePromptTooLong\n * to track how often\n * (a) the cache is reused (cacheReusedCount) and\n * (b) when reusable, does the cache with the new prompt become too\n * long to be usable? (cacheReusablePromptTooLong)\n *\n * These are relevant to track in telemetry, and we will\n * implement the telemetry logs for these variables in a later iteration.\n * We have removed these variables in the PR since we were console.log'ging\n * it earlier, and that is not the preferred route.\n */\n\n/** The maximum number of tokens in a prompt. */\nexport const MAX_PROMPT_LENGTH = 1500;\n\n/** The maximum number of tokens that is used for calculate edit distance. */\nexport const MAX_EDIT_DISTANCE_LENGTH = 50;\n\n/**\n * The number of tokens to reserve for prefix + suffix encoding.\n * This value comes from hponde.\n */\nexport const TOKENS_RESERVED_FOR_SUFFIX_ENCODING = 5;\n\n/**\n * The maximal number of the final snippets to return.\n */\nexport const DEFAULT_NUM_OF_SNIPPETS: number = 4;\n\n/**\n * Information about a document, not including the offset.\n */\nexport interface DocumentInfo {\n    /** The file path of the document relative to its containing project or folder, if known. */\n    relativePath?: string;\n    /** The URI of the document. We can't pass URI class instances directly due to limitations of passing objects to the worker thread. */\n    uri: string;\n    /** The source text of the document. */\n    source: string;\n    /** The language identifier of the document. */\n    languageId: string;\n}\n\n/**\n * Information about a document, including an offset corresponding to\n * the cursor position.\n */\nexport interface DocumentInfoWithOffset extends DocumentInfo {\n    /** The offset in the document where we want the completion (0-indexed, between characters). */\n    offset: number;\n}\n\nexport enum LanguageMarkerOption {\n    NoMarker = 'nomarker',\n    Top = 'top', // Emulate that the first line of document is the language marker\n    Always = 'always', // Always visible\n}\n\nexport enum PathMarkerOption {\n    NoMarker = 'nomarker',\n    Top = 'top',\n    Always = 'always',\n}\n\nexport enum SnippetPositionOption {\n    /** Include neighbors towards the beginning of the file */\n    TopOfText = 'top',\n    /** Include neighbors directly above the line where the cursor is */\n    DirectlyAboveCursor = 'aboveCursor',\n    /**\n     * Include neighbors directly after the siblig insertion point\n     * for languages that have one (above cursor otherwise)\n     */\n    AfterSiblings = 'afterSiblings',\n}\n\nexport enum SnippetSelectionOption {\n    /** Select the closest match.*/\n    BestMatch = 'bestMatch',\n    /** Select K closest match. */\n    TopK = 'topK',\n}\n\nexport enum LocalImportContextOption {\n    /** Don't pull in any context for local imports. */\n    NoContext = 'nocontext',\n    /** Pull in declarations referenced by local imports. */\n    Declarations = 'declarations',\n}\n\nexport enum LineEndingOptions {\n    ConvertToUnix = 'unix', // convert \"\\r\\n\" and \"\\r\" line endings to the more token-efficient \\n\n    KeepOriginal = 'keep', // keep the original line endings (whether \\r\\n or \\n)\n}\n\nexport enum SuffixOption {\n    /** Do not include a suffix in the prompt. */\n    None = 'none',\n    /** Allocate 15% of the available tokens to the suffix. */\n    FifteenPercent = 'fifteenPercent',\n}\n\nexport enum SuffixMatchOption {\n    /** The method to use to compare suffix against cached suffix */\n    /** The suffix and cached suffix are to be equal */\n    Equal = 'equal',\n    /** Use Edit distance */\n    Levenshtein = 'levenshteineditdistance',\n}\n\nexport enum SuffixStartMode {\n    /** start from cursor by default */\n    Cursor = 'cursor',\n    /** start from cursor and trim start */\n    CursorTrimStart = 'cursortrimstart',\n    /** start from the first sibling function block */\n    SiblingBlock = 'siblingblock',\n    /** start from the first sibling function block and trim the leading whitespaces */\n    SiblingBlockTrimStart = 'siblingblocktrimstart',\n}\n\nexport class PromptOptions {\n    /** The maximum prompt length in tokens */\n    readonly maxPromptLength: number = MAX_PROMPT_LENGTH;\n    /** Whether to include a language marker in the prompt */\n    readonly languageMarker: LanguageMarkerOption = LanguageMarkerOption.Top;\n    /** Whether to include a path marker in the prompt */\n    readonly pathMarker: PathMarkerOption = PathMarkerOption.Top;\n    /** Whether to pull in context for local imports */\n    readonly localImportContext: LocalImportContextOption = LocalImportContextOption.Declarations;\n    /** Where to include the neighboring tabs info */\n    readonly snippetPosition: SnippetPositionOption = SnippetPositionOption.TopOfText;\n    /** The number of snippets to include */\n    readonly numberOfSnippets: number = DEFAULT_NUM_OF_SNIPPETS;\n    /** Options for each snippet provider */\n    readonly snippetProviderOptions: SnippetProviderOptions = {\n        // This normalization ensures that neighboring tabs is always scored\n        // above retrieved snippets:\n        //   - neighboring tabs get positive scores, higher is better\n        //   - retrieved snippets become negative scores, less negative is better\n        'neighboring-tabs': {\n            normalizationFunction: 'affine',\n            normalizationParams: [1.0, 0.0], // identity\n        },\n        retrieval: {\n            normalizationFunction: 'affine',\n            normalizationParams: [-1.0, 0.0],\n        },\n        'symbol-def': {\n            normalizationFunction: 'affine',\n            normalizationParams: [1.0, 0.0],\n            reservedSnippetCount: 2, // They are quite short, get two most outer caller functions\n        },\n        // Unused currently\n        language: {\n            normalizationFunction: 'affine',\n            normalizationParams: [1.0, 0.0],\n        },\n        path: {\n            normalizationFunction: 'affine',\n            normalizationParams: [1.0, 0.0],\n        },\n    };\n    /** Whether to include content from neighboring tabs in the prompt */\n    readonly neighboringTabs: NeighboringTabsOption = NeighboringTabsOption.Eager;\n    /** The type of snippets that neighboring tabs should extract */\n    readonly neighboringSnippetTypes: NeighboringSnippetType = NeighboringSnippetType.NeighboringSnippets;\n    /** Minimum length for matching snippet in neighboring tabs (only used for IndentationMatcher) */\n    readonly indentationMinLength?: number;\n    /** Maximum length for matching snippet in neighboring tabs (only used for IndentationMatcher) */\n    readonly indentationMaxLength?: number;\n    /** Whether to normalize line endings in the prompt */\n    readonly lineEnding: LineEndingOptions = LineEndingOptions.ConvertToUnix;\n    /** The percent of `maxPromptLength` to reserve for the suffix */\n    readonly suffixPercent: number = 0;\n    /** The percent of `maxPromptLength` to reserve for snippets */\n    readonly snippetPercent: number = 0;\n    /** The start mode to get suffix */\n    readonly suffixStartMode: SuffixStartMode = SuffixStartMode.Cursor;\n    /** TokenizerName used for prompt generation */\n    readonly tokenizerName: TokenizerName = TokenizerName.cushman001;\n    /** The threshold (in percent) for declaring match of new suffix with existing suffix */\n    readonly suffixMatchThreshold: number = 0;\n    /** The criteria to use for matching suffix with cachedSuffix, this is the percentage number*/\n    readonly suffixMatchCriteria: SuffixMatchOption = SuffixMatchOption.Levenshtein;\n    /** Selection options    */\n    readonly snippetSelection?: SnippetSelectionOption;\n    /** The number of snippets to select */\n    readonly snippetSelectionK?: number;\n    /** The threshold (as int) of length of the suffix only beyond which we will construct FIM requests */\n    readonly fimSuffixLengthThreshold: number = 0;\n    /** Whether the fix for getCursorContext is active. */\n    readonly cursorContextFix: boolean = false;\n    /** How to pick snippets for CursorHistoryMatcher */\n    readonly cursorSnippetsPickingStrategy: CursorSnippetsPickingStrategy = CursorSnippetsPickingStrategy.CursorJaccard;\n\n    constructor(readonly fs: FileSystem, options?: PartialPromptOptions) {\n        if (options) {\n            const selectionValue = options?.snippetSelection;\n            if (selectionValue && !Object.values(SnippetSelectionOption).includes(selectionValue)) {\n                throw new Error(`Invalid value for snippetSelection: ${selectionValue}`);\n            }\n            for (const key in options) {\n                if (key !== 'snippetProviderOptions') {\n                    // Note: this should really be improved so that the type\n                    // system can statically prove that this won't blow up in\n                    // run time (it will only do so if somewhat abused, right\n                    // now, to be fair). For now, we have a @ts-ignore.\n                    // @ts-ignore\n                    this[key] = options[key];\n                } else {\n                    // key === 'snippetProviderOptions'\n                    // For each provider, merge the options\n                    const newOptions = options.snippetProviderOptions || {};\n                    let provider: SnippetProviderType;\n                    for (provider in newOptions) {\n                        const providerOptions = newOptions[provider];\n                        if (providerOptions) {\n                            this.snippetProviderOptions[provider] = {\n                                ...this.snippetProviderOptions[provider],\n                                ...providerOptions,\n                            };\n                        }\n                    }\n                }\n            }\n        }\n\n        if (this.suffixPercent < 0 || this.suffixPercent > 100) {\n            throw new Error(`suffixPercent must be between 0 and 100, but was ${this.suffixPercent}`);\n        }\n\n        if (this.snippetPercent < 0 || this.snippetPercent > 100) {\n            throw new Error(`snippetPercent must be between 0 and 100, but was ${this.snippetPercent}`);\n        }\n\n        if (this.suffixMatchThreshold < 0 || this.suffixMatchThreshold > 100) {\n            throw new Error(`suffixMatchThreshold must be at between 0 and 100, but was ${this.suffixMatchThreshold}`);\n        }\n\n        // the threshold being -1 indicates we are not using this thresholding for the suffixes.\n        if (this.fimSuffixLengthThreshold < -1) {\n            throw new Error(`fimSuffixLengthThreshold must be at least -1, but was ${this.fimSuffixLengthThreshold}`);\n        }\n\n        if (this.indentationMinLength !== undefined && this.indentationMaxLength !== undefined) {\n            if (this.indentationMinLength > this.indentationMaxLength) {\n                throw new Error(\n                    `indentationMinLength must be less than or equal to indentationMaxLength, but was ${this.indentationMinLength} and ${this.indentationMaxLength}`\n                );\n            }\n            if (this.indentationMinLength < 0) {\n                throw new Error(\n                    `indentationMinLength must be greater than or equal to zero but was ${this.indentationMinLength}`\n                );\n            }\n        }\n\n        if (this.snippetSelection === SnippetSelectionOption.TopK && this.snippetSelectionK === undefined) {\n            throw new Error('snippetSelectionK must be defined.');\n        }\n\n        if (\n            this.snippetSelection === SnippetSelectionOption.TopK &&\n            this.snippetSelectionK &&\n            this.snippetSelectionK <= 0\n        ) {\n            throw new Error(`snippetSelectionK must be greater than 0, but was ${this.snippetSelectionK}`);\n        }\n    }\n}\n\n/**\n * This type is used to represent options that may be set by the caller, and\n * which will be completed to a {@link PromptOptions} object by filling with the\n * default options.\n *\n * The invocation is complicated by snippet provider options which should be\n * allowed to only set some of the options on some of the providers.\n */\nexport type PartialPromptOptions = Partial<Omit<PromptOptions, 'snippetProviderOptions'>> & {\n    snippetProviderOptions?: Partial<Record<SnippetProviderType, Partial<SingleSnippetProviderOptions>>>;\n};\n\nexport interface PromptInfo {\n    prefix: string; // The prefix text\n    suffix: string; // The suffix text\n    prefixLength: number; // The length of the prefix in tokens\n    suffixLength: number; // The length of the suffix in tokens\n    promptChoices: PromptChoices; // Which choices were made when constructing the prompt\n    promptBackground: PromptBackground; // All the prompt elements information when constructing the prompt\n    promptElementRanges: PromptElementRanges; // Character ranges of prompt elements in the prompt\n}\n\n/**\n * A map that normalises common aliases of languageIds.\n */\nconst languageNormalizationMap: {[language: string]: string} = {\n    javascriptreact: 'javascript',\n    jsx: 'javascript',\n    typescriptreact: 'typescript',\n    jade: 'pug',\n    cshtml: 'razor',\n};\n\n/**\n * Return a normalized form of a language id, by lower casing and combining\n * certain languageId's that are not considered distinct by promptlib.\n */\nexport function normalizeLanguageId(languageId: string): string {\n    languageId = languageId.toLowerCase();\n    return languageNormalizationMap[languageId] ?? languageId;\n}\n\n/**\n * Constructs a prompt to pass to the OpenAI API.\n *\n * @remarks\n * The current implementation does the simplest thing possible: It estimates the number of\n * characters that will fit within the maximum length of a prompt in tokens, then returns a\n * substring of doc that starts at some reasonable index and ends at offset, such that\n * (end - start) <= estimated_length.\n *\n * This will change in the future.\n *\n * @param doc - A DocumentInfoWithOffset\n * @param options - A PromptOptions which controls the prompt crafting behaviour.\n * @param neighbors - A list of neighboring documents, e.g., documents open in other\n *                    editor tabs.\n * @param snippets - A list of snippets with scores and provider information\n *                   to (potentially) include in the prompt.\n * @param lineCursorHistory - A The first key is the file name, and the second key\n *                            is the line number, the value is the number of cursor\n *                            focused.\n *\n * @returns A dictionary containing the prompt to pass to the OpenAI API and the\n * resulting prompt length in tokens.\n */\nexport async function getPrompt(\n    fileSystem: FileSystem,\n    doc: DocumentInfoWithOffset,\n    options: PartialPromptOptions = {},\n    neighbors: DocumentInfo[] = [],\n    snippets: SnippetWithProviderInfo[] = [],\n    lineCursorHistory?: Map<string, Map<number, number>>\n): Promise<PromptInfo> {\n    const completeOptions = new PromptOptions(fileSystem, options);\n\n    const tokenizer = getTokenizer(completeOptions.tokenizerName);\n\n    let useCachedSuffix = false;\n\n    const {source, offset} = doc;\n    if (offset < 0 || offset > source.length) {\n        throw new Error(`Offset ${offset} is out of range.`);\n    }\n    doc.languageId = normalizeLanguageId(doc.languageId);\n\n    // Make explicit the priorities implied by the different options\n    const priorities = new Priorities();\n    const directContextPriority = priorities.justBelow(Priorities.TOP);\n    const languageMarkerPriority =\n        completeOptions.languageMarker === LanguageMarkerOption.Always\n            ? priorities.justBelow(Priorities.TOP)\n            : priorities.justBelow(directContextPriority);\n    const pathMarkerPriority =\n        completeOptions.pathMarker === PathMarkerOption.Always\n            ? priorities.justBelow(Priorities.TOP)\n            : priorities.justBelow(directContextPriority);\n    const localImportContextPriority = priorities.justBelow(directContextPriority);\n    // There are two priorities for snippets: one for snippets that are\n    // within the token budget defined by `snippetPercent` and one that are\n    // outside of the token budget. The former are given a higher priority\n    // when assembling the prompt, but the lower priority ones are still\n    // included if there is space.\n    const lowSnippetPriority = priorities.justBelow(localImportContextPriority);\n    const highSnippetPriority = priorities.justAbove(directContextPriority);\n\n    // The wishlist keeps track of what we would like to include in the prompt\n    const promptWishlist = new PromptWishlist(tokenizer, completeOptions.lineEnding);\n\n    // Language Snippet\n    let languageSnippet = snippets.find(s => s.provider === SnippetProviderType.Language);\n    let languageMarkerLine: number | undefined;\n    if (completeOptions.languageMarker !== LanguageMarkerOption.NoMarker) {\n        if (languageSnippet) {\n            languageMarkerLine = promptWishlist.append(\n                languageSnippet.snippet,\n                PromptElementKind.LanguageMarker,\n                languageMarkerPriority\n            );\n        }\n    }\n\n    // Path Snippet\n    let pathSnippet = snippets.find(s => s.provider === SnippetProviderType.Path);\n    let pathMarkerLine: number | undefined;\n    if (completeOptions.pathMarker !== PathMarkerOption.NoMarker && pathSnippet !== undefined) {\n        // not just newline\n        if (pathSnippet.snippet.length > 0) {\n            pathMarkerLine = promptWishlist.append(\n                pathSnippet.snippet,\n                PromptElementKind.PathMarker,\n                pathMarkerPriority\n            );\n        }\n    }\n\n    // imports get inserted after the language / path markers, but before anything from the file itself\n    if (completeOptions.localImportContext !== LocalImportContextOption.NoContext) {\n        for (const localImportContext of await extractLocalImportContext(doc, completeOptions.fs)) {\n            promptWishlist.append(\n                newLineEnded(localImportContext),\n                PromptElementKind.ImportedFile,\n                localImportContextPriority\n            );\n        }\n    }\n\n    // Get neighbor snippets and combine with externally provided snippets.\n    const neighborSnippets =\n        completeOptions.neighboringTabs === NeighboringTabsOption.None\n            ? []\n            : neighbors.length === 0\n            ? []\n            : await getNeighborSnippets(\n                  doc,\n                  neighbors,\n                  completeOptions.neighboringSnippetTypes,\n                  completeOptions.neighboringTabs,\n                  completeOptions.cursorContextFix,\n                  completeOptions.indentationMinLength,\n                  completeOptions.indentationMaxLength,\n                  completeOptions.snippetSelection,\n                  completeOptions.snippetSelectionK,\n                  lineCursorHistory,\n                  completeOptions.cursorSnippetsPickingStrategy\n              );\n\n    // Remove language & path snippets from the list of snippets prior to wishlist fulfillment\n    // Because they have already been included above\n    snippets = snippets.filter(\n        s => s.provider !== SnippetProviderType.Language && s.provider !== SnippetProviderType.Path\n    );\n\n    const allSnippets = [...snippets, ...neighborSnippets];\n\n    /** Deferred function to add the prepared snippets to the wishlist at\n     * the location at that points\n     */\n    function addSnippetsNow(): void {\n        // assign priorities based on budget\n        const budget = Math.round((completeOptions.snippetPercent / 100.0) * completeOptions.maxPromptLength);\n        const processedSnippets = processSnippetsForWishlist(\n            allSnippets,\n            doc.languageId,\n            tokenizer,\n            completeOptions.snippetProviderOptions,\n            {priorities, low: lowSnippetPriority, high: highSnippetPriority},\n            completeOptions.numberOfSnippets,\n            budget\n        );\n        // add to wishlist\n        processedSnippets.forEach(snippet => {\n            // TODO: this should be cleaned up https://github.com/github/copilot-client/issues/3303\n            let kind = PromptElementKind.SimilarFile;\n            if (snippet.provider === SnippetProviderType.Retrieval) {\n                kind = PromptElementKind.RetrievalSnippet;\n            } else if (snippet.provider == SnippetProviderType.SymbolDef) {\n                kind = PromptElementKind.SymbolDefinition;\n            }\n            promptWishlist.append(\n                snippet.announcedSnippet,\n                kind,\n                snippet.priority,\n                snippet.tokens,\n                snippet.normalizedScore\n            );\n        });\n    }\n\n    if (completeOptions.snippetPosition === SnippetPositionOption.TopOfText) {\n        addSnippetsNow();\n    }\n\n    /** The ids of lines of BeforeCursor elements in the promptlib */\n    const source_lines: number[] = [];\n    let directContext: string | undefined;\n    directContext = source.substring(0, offset);\n\n    if (completeOptions.snippetPosition === SnippetPositionOption.DirectlyAboveCursor) {\n        // first add all lines from directContext except the current partial one (if there is one)\n        const lastLineStart = directContext.lastIndexOf('\\n') + 1; // 0 if no newline\n        const directContextBeforePartialLastLine = directContext.substring(0, lastLineStart);\n        const partialLastLine = directContext.substring(lastLineStart); // may be \"\" if none\n        promptWishlist\n            .appendLineForLine(\n                directContextBeforePartialLastLine,\n                PromptElementKind.BeforeCursor,\n                directContextPriority\n            )\n            .forEach(id => source_lines.push(id));\n        addSnippetsNow();\n        // then add the partial last line, if it's not empty\n        if (partialLastLine.length > 0) {\n            source_lines.push(\n                promptWishlist.append(partialLastLine, PromptElementKind.AfterCursor, directContextPriority)\n            );\n            // note that the second-to-last line requires the last line, or it makes no sense\n            if (source_lines.length > 1) {\n                promptWishlist.require(source_lines[source_lines.length - 2], source_lines[source_lines.length - 1]);\n            }\n        }\n    } else {\n        promptWishlist\n            .appendLineForLine(directContext, PromptElementKind.BeforeCursor, directContextPriority)\n            .forEach(id => source_lines.push(id));\n    }\n\n    // the marker options `Top` intend to simulate the file beginning with the markers\n    // so the markers should depend on the first line of source code --\n    // if that is missing, so should they be\n    if (\n        LanguageMarkerOption.Top === completeOptions.languageMarker &&\n        source_lines.length > 0 &&\n        languageMarkerLine !== undefined\n    ) {\n        promptWishlist.require(languageMarkerLine, source_lines[0]);\n    }\n    if (\n        PathMarkerOption.Top === completeOptions.pathMarker &&\n        source_lines.length > 0 &&\n        pathMarkerLine !== undefined\n    ) {\n        languageMarkerLine\n            ? promptWishlist.require(pathMarkerLine, languageMarkerLine)\n            : promptWishlist.require(pathMarkerLine, source_lines[0]);\n    }\n\n    // Language markers are not necessary if the pathmarker already indicates extension\n    if (languageMarkerLine !== undefined && pathMarkerLine !== undefined) {\n        promptWishlist.exclude(pathMarkerLine, languageMarkerLine);\n    }\n\n    let actualSuffix = source.slice(offset);\n\n    if (completeOptions.suffixPercent === 0 || actualSuffix.length <= completeOptions.fimSuffixLengthThreshold) {\n        return promptWishlist.fulfill(completeOptions.maxPromptLength);\n    } else {\n        let offset = doc.offset;\n        if (\n            completeOptions.suffixStartMode !== SuffixStartMode.Cursor &&\n            completeOptions.suffixStartMode !== SuffixStartMode.CursorTrimStart\n        ) {\n            offset = await getSiblingFunctionStart(doc);\n        }\n\n        // First, construct prefix using the wishlist.\n        const availableTokens = completeOptions.maxPromptLength - TOKENS_RESERVED_FOR_SUFFIX_ENCODING;\n        let prefixTargetTokens = Math.floor((availableTokens * (100 - completeOptions.suffixPercent)) / 100);\n        let promptInfo = promptWishlist.fulfill(prefixTargetTokens);\n\n        // Then construct suffix using the remaining tokens.  The prefix/wishlist computation usually\n        // does not consume all the available tokens, so we reallocate any remaining to the suffix.\n        const suffixTargetTokens = availableTokens - promptInfo.prefixLength;\n        let suffixText = source.slice(offset);\n        if (\n            completeOptions.suffixStartMode === SuffixStartMode.SiblingBlockTrimStart ||\n            completeOptions.suffixStartMode === SuffixStartMode.CursorTrimStart\n        ) {\n            suffixText = suffixText.trimStart();\n        }\n\n        const suffix = tokenizer.takeFirstTokens(suffixText, suffixTargetTokens);\n\n        // If there is not enough text to fill the suffix, allocate the extra tokens to\n        // the prefix and recompute it.\n        if (suffix.tokens.length <= suffixTargetTokens - 3) {\n            // only recompute prefix if we can increase its length by >= 3 tokens\n            prefixTargetTokens = availableTokens - suffix.tokens.length;\n            promptInfo = promptWishlist.fulfill(prefixTargetTokens);\n        }\n\n        if (completeOptions.suffixMatchCriteria === SuffixMatchOption.Equal) {\n            if (\n                suffix.tokens.length === cachedSuffix.tokens.length &&\n                suffix.tokens.every((v, i) => v === cachedSuffix.tokens[i])\n            ) {\n                useCachedSuffix = true;\n            }\n        } else if (completeOptions.suffixMatchCriteria === SuffixMatchOption.Levenshtein) {\n            // if the current suffix is an empty string, then do not add the cachedSuffix\n            if (suffix.tokens.length > 0 && completeOptions.suffixMatchThreshold > 0) {\n                // only compare the first MAX_EDIT_DISTANCE_LENGTH tokens to speed up.\n                const dist = findEditDistanceScore(\n                    suffix.tokens.slice(0, MAX_EDIT_DISTANCE_LENGTH),\n                    cachedSuffix.tokens.slice(0, MAX_EDIT_DISTANCE_LENGTH)\n                )?.score;\n                if (\n                    100 * dist <\n                    completeOptions.suffixMatchThreshold * Math.min(MAX_EDIT_DISTANCE_LENGTH, suffix.tokens.length)\n                ) {\n                    useCachedSuffix = true;\n                }\n            }\n        }\n\n        if (useCachedSuffix === true && cachedSuffix.tokens.length <= suffixTargetTokens) {\n            // Similar to codeblock above for actual suffix, if there is not enough text to fill the suffix, allocate extra\n            // tokens to the prefix and recompute it.\n            if (cachedSuffix.tokens.length <= suffixTargetTokens - 3) {\n                // only recompute prefix if we can increase its length by >= 3 tokens\n                prefixTargetTokens = availableTokens - cachedSuffix.tokens.length;\n                promptInfo = promptWishlist.fulfill(prefixTargetTokens);\n            }\n            promptInfo.suffix = cachedSuffix.text;\n            promptInfo.suffixLength = cachedSuffix.tokens.length;\n        } else {\n            // EITHER suffix is not close to cachedSuffix OR cachedSuffix is too long. In either case, we devolve to actual suffix.\n            // Note: when cachedSuffix is too long, we have the option of truncating the cachedSuffix using takeFirstTokens but that\n            // would already invalidate the cache property that we want (in SPM mode).\n            promptInfo.suffix = suffix.text;\n            promptInfo.suffixLength = suffix.tokens.length;\n\n            // log current count, reset the suffix and counts\n            // TODO:\n            // About 0.1% of the time log the cachedReusedCount and the suffix used\n            // to telemetry. Discussion ongoing on Slack.\n            // Right now, console.logging cacheReusedCount so as to make the project.\n            cachedSuffix = suffix;\n        }\n\n        return promptInfo;\n    }\n}\n","import {\n    getAncestorWithSiblingFunctions,\n    getFirstPrecedingComment,\n    isFunctionDefinition,\n    isSupportedLanguageId,\n    parseTreeSitter,\n} from './parse';\nimport {DocumentInfoWithOffset} from './prompt';\n\n/**\n * Find the sibling function start index to the given offset in the source code.\n *\n * @param documentInfo The document description\n *         (of which source text, offset and language will be used)\n * @returns start index of the first sibling block\n */\nexport async function getSiblingFunctionStart({source, offset, languageId}: DocumentInfoWithOffset) {\n    if (isSupportedLanguageId(languageId)) {\n        const tree = await parseTreeSitter(languageId, source);\n        try {\n            // find syntax-tree node we are on or right after\n            let startingOffset = offset;\n            while (startingOffset >= 0 && /\\s/.test(source[startingOffset])) startingOffset--;\n            const nd = tree.rootNode.descendantForIndex(startingOffset);\n\n            // find the closest ancestor that may have sibling functions\n            const anc = getAncestorWithSiblingFunctions(languageId, nd);\n            if (anc) {\n                // find sibling functions and include them all\n                for (let sibling = anc.nextSibling; sibling; sibling = sibling.nextSibling) {\n                    if (isFunctionDefinition(languageId, sibling)) {\n                        // take `sibling`, as well as any comments immediately preceding it, but not if\n                        // it precedes or spans `offset`\n                        const docComment = getFirstPrecedingComment(sibling);\n                        const startIndex = docComment?.startIndex ?? sibling.startIndex;\n                        if (startIndex < offset) {\n                            continue;\n                        }\n\n                        return startIndex;\n                    }\n                }\n\n                if (anc.endIndex >= offset) {\n                    return anc.endIndex;\n                }\n            }\n        } finally {\n            tree.delete();\n        }\n    }\n\n    return offset;\n}\n","/**\n * Cursor contexts used by snippet providers, e.g. retrieval and neighboring tabs.\n *\n * A 'cursor context' is quite similar to a prompt, but it is meant as a more\n * basic, lightweight and ultimately myopic look at what the user is currently doing.\n */\n\nimport {DocumentInfoWithOffset} from '../prompt';\nimport {getTokenizer, TokenizerName} from '../tokenization';\n\n/**\n * Options for cursor context generation.\n */\nexport type CursorContextOptions = {\n    /** The maximum cursor context length in tokens */\n    maxTokenLength?: number;\n\n    /** The maximum number of lines in a cursor context */\n    maxLineCount?: number;\n\n    /** TokenizerName for the tokenization */\n    tokenizerName: TokenizerName;\n\n    cursorContextFix?: boolean;\n};\n\nconst defaultCursorContextOptions: CursorContextOptions = {\n    tokenizerName: TokenizerName.cushman002,\n};\n\nfunction cursorContextOptions(options?: Partial<CursorContextOptions>): CursorContextOptions {\n    return {...defaultCursorContextOptions, ...options};\n}\n\nexport interface CursorContextInfo {\n    /** The compiled context as a string */\n    context: string;\n    /** The number of tokens in the context */\n    tokenLength: number;\n    /** The number of lines in the context */\n    lineCount: number;\n    /** TokenizerName for the tokenization */\n    tokenizerName: TokenizerName;\n}\n\n/**\n * Return a cursor context corresponding to this document info.\n * This is essentially a trimmed-down version of a prompt.\n * Tokenizer, if not provided as an option, currently defaults to cushman002\n *\n * If maxLineCount or maxTokenLength are 0, an empty context is returned\n * If exactly one of `maxLineCount` or `maxTokenLength` is defined, the limit is applied for that one only\n * If both are defined, we apply both conditions so end up using the shorter of the two constraints\n * If both are undefined, the entire document up to the cursor is returned\n */\nexport function getCursorContext(\n    doc: DocumentInfoWithOffset,\n    options: Partial<CursorContextOptions> = {}\n): CursorContextInfo {\n    const completeOptions = cursorContextOptions(options);\n    const tokenizer = getTokenizer(completeOptions.tokenizerName);\n\n    if (completeOptions.cursorContextFix) {\n        if (completeOptions.maxLineCount !== undefined && completeOptions.maxLineCount < 0) {\n            throw new Error('maxLineCount must be non-negative if defined');\n        }\n        if (completeOptions.maxTokenLength !== undefined && completeOptions.maxTokenLength < 0) {\n            throw new Error('maxTokenLength must be non-negative if defined');\n        }\n\n        if (completeOptions.maxLineCount === 0 || completeOptions.maxTokenLength === 0) {\n            return {\n                context: '',\n                lineCount: 0,\n                tokenLength: 0,\n                tokenizerName: completeOptions.tokenizerName,\n            };\n        }\n\n        let context = doc.source.slice(0, doc.offset); // Trim to cursor location, offset is a character location\n        if (completeOptions.maxLineCount !== undefined) {\n            context = context.split('\\n').slice(-completeOptions.maxLineCount).join('\\n');\n        }\n        if (completeOptions.maxTokenLength !== undefined) {\n            context = tokenizer.takeLastLinesTokens(context, completeOptions.maxTokenLength);\n        }\n        return {\n            context,\n            lineCount: context.split('\\n').length,\n            tokenLength: tokenizer.tokenLength(context),\n            tokenizerName: completeOptions.tokenizerName,\n        };\n    } else {\n        // Default implementation\n        if (completeOptions.maxTokenLength === undefined && completeOptions.maxLineCount !== undefined) {\n            const contextLines = doc.source.slice(0, doc.offset).split('\\n').slice(-completeOptions.maxLineCount);\n            const context = contextLines.join('\\n');\n            return {\n                context,\n                lineCount: contextLines.length,\n                tokenLength: tokenizer.tokenLength(context),\n                tokenizerName: completeOptions.tokenizerName,\n            };\n        } else if (completeOptions.maxTokenLength !== undefined && completeOptions.maxLineCount === undefined) {\n            const context = tokenizer.takeLastLinesTokens(\n                doc.source.slice(0, doc.offset),\n                completeOptions.maxTokenLength\n            );\n            return {\n                context,\n                lineCount: context.split('\\n').length,\n                tokenLength: tokenizer.tokenLength(context),\n                tokenizerName: completeOptions.tokenizerName,\n            };\n        } else if (completeOptions.maxTokenLength !== undefined && completeOptions.maxLineCount !== undefined) {\n            const byLines = getCursorContext(doc, {...options, maxTokenLength: undefined});\n            if (byLines.tokenLength > completeOptions.maxTokenLength) {\n                return getCursorContext(doc, {...options, maxLineCount: undefined});\n            } else {\n                return byLines;\n            }\n        } else {\n            throw new Error('Either maxTokenLength or maxLineCount must be defined');\n        }\n    }\n}\n","import {DocumentInfo, DocumentInfoWithOffset, SnippetSelectionOption} from '../prompt';\nimport {CursorContextInfo, getCursorContext} from './cursorContext';\nimport {computeScore} from './jaccardMatching';\nimport {ScoredSnippetMarker, SortOptions, WindowedMatcher} from './selectRelevance';\nimport {SnippetProviderType, SnippetSemantics, SnippetWithProviderInfo} from './snippets';\nimport {getBasicWindowDelineations} from './windowDelineations';\n\n/**\n * 3 different strategies to pick up snippets by cursor history.\n * CursorOnly:\n *      Pick up the most clicked snippets.\n * CursorJaccard:\n *      Pick up the most clicked snippets, and re-sort them by Jaccard similarity.\n * JaccardCursor:\n *      Pick up the most similar snippet by Jaccard similarity, and re-sort them by the number of clicked.\n */\nexport enum CursorSnippetsPickingStrategy {\n    CursorOnly = 'cursoronly',\n    CursorJaccard = 'cursorjaccard',\n    JaccardCursor = 'jaccardcursor',\n}\n\nclass FifoCache<T> {\n    private keys: string[] = [];\n    private cache: {[key: string]: T} = {};\n    private size: number;\n    constructor(size: number) {\n        this.size = size;\n    }\n    put(key: string, value: T) {\n        this.cache[key] = value;\n        if (this.keys.length > this.size) {\n            this.keys.push(key);\n            const leavingKey = this.keys.shift() ?? '';\n            delete this.cache[leavingKey];\n        }\n    }\n    get(key: string): T | undefined {\n        return this.cache[key];\n    }\n}\n\n/**\n * For a number of documents (the neighboring tabs),\n * associate to each document and its kind of window computation (as key)\n * the sequence b_1, ..., b_n, where\n * b_i is the set of tokens in the ith window --\n * e.g. for window length 10,\n * WINDOWED_TOKEN_SET_CACHE(doc)[0]\n * holds the tokens in the first 10 lines of the document.\n */\nconst WINDOWED_TOKEN_SET_CACHE = new FifoCache<Set<string>[]>(20);\n\nclass CustomizedFixedWindowSizeJaccardMatcher extends WindowedMatcher {\n    private windowLength: number;\n    private cursorContextFix: boolean;\n\n    public constructor(referenceDoc: DocumentInfoWithOffset, windowLength: number, cursorContextFix: boolean) {\n        super(referenceDoc, cursorContextFix);\n        this.windowLength = windowLength;\n        this.cursorContextFix = cursorContextFix;\n    }\n\n    protected id(): string {\n        return 'CustomizedFixedWindowSizeJaccardMatcher:' + this.windowLength;\n    }\n\n    protected getWindowsDelineations(lines: string[]): [number, number][] {\n        return getBasicWindowDelineations(this.windowLength, lines);\n    }\n\n    protected trimDocument(doc: DocumentInfoWithOffset): string {\n        return doc.source.slice(0, doc.offset).split('\\n').slice(-this.windowLength).join('\\n');\n    }\n\n    protected _getCursorContextInfo(referenceDoc: DocumentInfoWithOffset): CursorContextInfo {\n        return getCursorContext(referenceDoc, {\n            maxLineCount: this.windowLength,\n            cursorContextFix: this.cursorContextFix,\n        });\n    }\n\n    protected similarityScore(a: Set<string>, b: Set<string>): number {\n        return computeScore(a, b);\n    }\n\n    /**\n     * Returns all snippet markers with their scores.\n     * @param objectDoc\n     * @param candidates This is a Map from start line to end line. This funciton only returns the snippets that the start line and end line are in the map.\n     *                   We need it because we want to ignore the code snippets that are not clicked. See the references in CursorHistoryMatcher.\n     *\n     */\n    override retrieveAllSnippets(\n        objectDoc: DocumentInfo,\n        sortOption = SortOptions.Descending,\n        candidates?: Map<number, number>\n    ): ScoredSnippetMarker[] {\n        const snippets: ScoredSnippetMarker[] = [];\n\n        if (objectDoc.source.length === 0 || this.referenceTokens.size === 0) {\n            return snippets;\n        }\n\n        const lines = objectDoc.source.split('\\n');\n        const key = this.id() + ':' + objectDoc.source;\n        const tokensInWindows = WINDOWED_TOKEN_SET_CACHE.get(key) ?? [];\n        // if the tokens are not cached, we need to compute them\n        const needToComputeTokens = tokensInWindows.length == 0;\n        const tokenizedLines = needToComputeTokens ? lines.map(this.tokenizer.tokenize, this.tokenizer) : [];\n\n        // Compute the windows with the score\n        for (const [index, [startLine, endLine]] of this.getWindowsDelineations(lines).entries()) {\n            if (needToComputeTokens) {\n                const tokensInWindow = new Set<string>();\n                tokenizedLines.slice(startLine, endLine).forEach(x => x.forEach(tokensInWindow.add, tokensInWindow));\n                tokensInWindows.push(tokensInWindow);\n            }\n\n            if (candidates !== undefined && candidates.get(startLine) !== endLine) {\n                continue;\n            }\n\n            // Now tokensInWindows[index] contains the tokens in the window, whether we just computed them or not\n            const tokensInWindow = tokensInWindows[index];\n            const score = this.similarityScore(tokensInWindow, this.referenceTokens);\n            snippets.push({\n                score,\n                startLine,\n                endLine,\n            });\n        }\n\n        // If we didn't get the token sets from the cache, time to put them there!\n        if (needToComputeTokens) {\n            WINDOWED_TOKEN_SET_CACHE.put(key, tokensInWindows);\n        }\n\n        return this.sortScoredSnippets(snippets, sortOption);\n    }\n}\n\n/**\n * Find the best matches from a neighbor file by cursor history information.\n */\nexport class CursorHistoryMatcher {\n    private windowLength: number;\n    private lineCursorHistory: Map<string, Map<number, number>>;\n    private jaccardMatcher: CustomizedFixedWindowSizeJaccardMatcher;\n    private strategy: CursorSnippetsPickingStrategy;\n\n    private constructor(\n        referenceDoc: DocumentInfoWithOffset,\n        windowLength: number,\n        lineCursorHistory: Map<string, Map<number, number>>,\n        strategy: CursorSnippetsPickingStrategy,\n        cursorContextFix: boolean\n    ) {\n        this.windowLength = windowLength;\n        this.lineCursorHistory = lineCursorHistory;\n        this.jaccardMatcher = new CustomizedFixedWindowSizeJaccardMatcher(referenceDoc, windowLength, cursorContextFix);\n        this.strategy = strategy;\n    }\n\n    static FACTORY = (\n        windowLength: number,\n        lineCursorHistory: Map<string, Map<number, number>>,\n        strategy: CursorSnippetsPickingStrategy,\n        cursorContextFix: boolean\n    ) => {\n        return {\n            to: (referenceDoc: DocumentInfoWithOffset) =>\n                new CursorHistoryMatcher(referenceDoc, windowLength, lineCursorHistory, strategy, cursorContextFix),\n        };\n    };\n\n    /**\n     * Returns a sorted array of snippets with their scores according to the sort option.\n     * @param snippets ScoredSnippetMarker[]\n     *\n     */\n    private sortScoredSnippets(\n        snippets: ScoredSnippetMarker[],\n        sortOption = SortOptions.Descending\n    ): ScoredSnippetMarker[] {\n        return sortOption == SortOptions.Ascending\n            ? snippets.sort((snippetA, snippetB) => (snippetA.score > snippetB.score ? 1 : -1))\n            : sortOption == SortOptions.Descending\n            ? snippets.sort((snippetA, snippetB) => (snippetA.score > snippetB.score ? -1 : 1))\n            : snippets;\n    }\n\n    private markerToSnippet(nonOverlappingSnippets: ScoredSnippetMarker[], lines: string[]): SnippetWithProviderInfo[] {\n        return nonOverlappingSnippets.map(snippetMarker => ({\n            snippet: lines.slice(snippetMarker.startLine, snippetMarker.endLine).join('\\n'),\n            provider: SnippetProviderType.NeighboringTabs,\n            semantics: SnippetSemantics.Snippet,\n            ...snippetMarker,\n        }));\n    }\n\n    public async findMatches(\n        objectDoc: DocumentInfo,\n        snippetSelectionOption = SnippetSelectionOption.BestMatch,\n        snippetSelectionK?: number\n    ): Promise<SnippetWithProviderInfo[]> {\n        if (snippetSelectionOption == SnippetSelectionOption.BestMatch) {\n            const bestMatch = await this.findBestMatch(objectDoc);\n            if (bestMatch === undefined) {\n                return [];\n            } else {\n                return [bestMatch];\n            }\n        }\n\n        if (snippetSelectionOption == SnippetSelectionOption.TopK) {\n            return (await this.findTopKMatches(objectDoc, snippetSelectionK)) || [];\n        }\n\n        return [];\n    }\n\n    /**\n     * Returns the snippet from the object document that is most similar to the reference Document.\n     * - The returned score\n     *   - For CursorOnly, the returned score is the number clicks.\n     *   - For CursorJaccard and JaccardCursor, The returned score is the sum of the number of clicks and the Jaccard similarity.\n     *     The number of clicks is always a integer, and the Jaccard similarity is always a float less than 1.\n     *     So we can assume that the code snippet will be sorted by the number of clicks first, and then by the Jaccard similarity.\n     * - Algorithm\n     *   - CursorOnly\n     *     Pick up the most clicked snippets. If there are multiply snippets with the same number of clicks,\n     *     it will return the middle one in the file.\n     *   - CursorJaccard\n     *     Pick up the most clicked snippets, and re-sort them by Jaccard similarity.\n     *   - JaccardCursor\n     *     It is equivalent to FixedWindowSizeJaccardMatcher.findBestMatch, because we just pick the most similar one snippet.\n     * @param objectDoc\n     */\n    public async findBestMatch(objectDoc: DocumentInfo): Promise<SnippetWithProviderInfo | undefined> {\n        if (objectDoc.source.length === 0) {\n            return undefined;\n        }\n\n        if (this.strategy === CursorSnippetsPickingStrategy.CursorOnly) {\n            let snippetsByCursor = this.retrieveCursorSnippets(objectDoc);\n            snippetsByCursor = this.sortScoredSnippets(snippetsByCursor, SortOptions.Descending);\n            if (snippetsByCursor.length === 0) {\n                return undefined;\n            }\n\n            const bestCursorScore = Math.max(...snippetsByCursor.map(s => s.score));\n            const bestSnippets = snippetsByCursor.filter(s => s.score === bestCursorScore);\n            const bestInMiddle = bestSnippets.sort((a, b) => a.startLine - b.startLine)[\n                Math.floor(bestSnippets.length / 2)\n            ];\n\n            const lines = objectDoc.source.split('\\n');\n            return {\n                snippet: lines.slice(bestInMiddle.startLine, bestInMiddle.endLine).join('\\n'),\n                provider: SnippetProviderType.NeighboringTabs,\n                semantics: SnippetSemantics.Snippet,\n                ...bestInMiddle,\n            };\n        } else if (this.strategy === CursorSnippetsPickingStrategy.CursorJaccard) {\n            let snippetsByCursor = this.retrieveCursorSnippets(objectDoc);\n            snippetsByCursor = this.sortScoredSnippets(snippetsByCursor, SortOptions.Descending);\n            if (snippetsByCursor.length === 0) {\n                return undefined;\n            }\n\n            const bestCursorScore = Math.max(...snippetsByCursor.map(s => s.score));\n            const bestSnippetsByCursor = [];\n            const bestSnippetsBoundaryByCursor = new Map<number, number>();\n            for (const snippet of snippetsByCursor) {\n                if (snippet.score === bestCursorScore) {\n                    bestSnippetsByCursor.push(snippet);\n                    bestSnippetsBoundaryByCursor.set(snippet.startLine, snippet.endLine);\n                }\n            }\n\n            const bestSnippets = this.jaccardMatcher.retrieveAllSnippets(\n                objectDoc,\n                SortOptions.Descending,\n                bestSnippetsBoundaryByCursor\n            );\n\n            if (bestSnippets.length === 0) {\n                return undefined;\n            }\n\n            const bestSnippet = bestSnippets[0];\n            for (const snippet of snippetsByCursor) {\n                if (snippet.startLine === bestSnippet.startLine && snippet.endLine === bestSnippet.endLine) {\n                    bestSnippet.score += snippet.score;\n                    break;\n                }\n            }\n\n            const lines = objectDoc.source.split('\\n');\n            return {\n                snippet: lines.slice(bestSnippet.startLine, bestSnippet.endLine).join('\\n'),\n                provider: SnippetProviderType.NeighboringTabs,\n                semantics: SnippetSemantics.Snippet,\n                ...bestSnippet,\n            };\n        } else if (this.strategy === CursorSnippetsPickingStrategy.JaccardCursor) {\n            const bestSnippet = await this.jaccardMatcher.findBestMatch(objectDoc);\n            if (bestSnippet === undefined) {\n                return undefined;\n            }\n\n            let snippetsByCursor = this.retrieveCursorSnippets(objectDoc);\n            snippetsByCursor = this.sortScoredSnippets(snippetsByCursor, SortOptions.Descending);\n            if (snippetsByCursor.length === 0) {\n                return undefined;\n            }\n\n            for (const snippet of snippetsByCursor) {\n                if (snippet.startLine === bestSnippet.startLine && snippet.endLine === bestSnippet.endLine) {\n                    bestSnippet.score += snippet.score;\n                    break;\n                }\n            }\n\n            return bestSnippet;\n        }\n    }\n\n    /**\n     * Returns the snippets from the object document that are most similar to the reference Document.\n     * - The returned score\n     *   - For CursorOnly, the returned score is the number clicks.\n     *   - For CursorJaccard and JaccardCursor, The returned score is the sum of the number of clicks and the Jaccard similarity.\n     *     The number of clicks is always a integer, and the Jaccard similarity is always a float less than 1.\n     *     So we can assume that the code snippet will be sorted by the number of clicks first, and then by the Jaccard similarity.\n     * - Algorithm\n     *   - CursorOnly\n     *     Pick up the top K clicked snippets.\n     *   - CursorJaccard\n     *     Generate all the snippet that was clicked more than 1 time.\n     *     Calculate the Jaccard similarity between the snippet and the object document.\n     *     Re-sort them by the number of clicks as the first key and Jaccard similarity as the second key.\n     *     Pick up the top K snippets.\n     *   - JaccardCursor\n     *     Get the top K snippets by Jaccard similarity.\n     *     Calculate the number of clicks for each snippet, and re-sort them.\n     * @param objectDoc\n     * @param snippetSelectionK\n     * @returns\n     */\n    private async findTopKMatches(\n        objectDoc: DocumentInfo,\n        snippetSelectionK = 1\n    ): Promise<SnippetWithProviderInfo[] | undefined> {\n        if (objectDoc.source.length === 0 || snippetSelectionK < 1) {\n            return undefined;\n        }\n\n        const lines = objectDoc.source.split('\\n');\n        let snippetsByCursor = this.retrieveCursorSnippets(objectDoc);\n        if (snippetsByCursor.length === 0) {\n            return undefined;\n        }\n\n        if (this.strategy === CursorSnippetsPickingStrategy.CursorOnly) {\n            snippetsByCursor = this.sortScoredSnippets(snippetsByCursor, SortOptions.Descending);\n            let nonOverlappingSnippets: ScoredSnippetMarker[] = this.gatherNonOverlappingSnippets(\n                snippetsByCursor,\n                snippetSelectionK\n            );\n            return this.markerToSnippet(nonOverlappingSnippets, lines);\n        } else if (this.strategy === CursorSnippetsPickingStrategy.CursorJaccard) {\n            snippetsByCursor = this.sortScoredSnippets(snippetsByCursor, SortOptions.Descending);\n            const snippetCandidates = new Map<number, number>(snippetsByCursor.map(s => [s.startLine, s.endLine]));\n            const allSnippetsSortedByJaccard = this.jaccardMatcher.retrieveAllSnippets(\n                objectDoc,\n                SortOptions.Descending,\n                snippetCandidates\n            );\n            const jaccardMap = allSnippetsSortedByJaccard.reduce(\n                (m, s) => m.set([s.startLine, s.endLine].join(','), s.score),\n                new Map<string, number>()\n            );\n\n            // Sort the code snippet by 2 keys, the number of clicks is the primary key, and the second one is the jaccard similarity.\n            // And I don't want to change the type of score. So I add them together and sort them.\n            // We ignore the corner case where a jaccard similarity of 1 will behave like an additional click for the ordering\n            snippetsByCursor.forEach(v => (v.score += jaccardMap.get([v.startLine, v.endLine].join(',')) ?? 0));\n            snippetsByCursor = this.sortScoredSnippets(snippetsByCursor, SortOptions.Descending);\n            let nonOverlappingSnippets: ScoredSnippetMarker[] = this.gatherNonOverlappingSnippets(\n                snippetsByCursor,\n                snippetSelectionK\n            );\n            return this.markerToSnippet(nonOverlappingSnippets, lines);\n        } else if (this.strategy === CursorSnippetsPickingStrategy.JaccardCursor) {\n            const topKByJaccard = await this.jaccardMatcher.findTopKMatches(objectDoc, snippetSelectionK);\n            if (topKByJaccard === undefined) {\n                return undefined;\n            }\n\n            const cursorMap = snippetsByCursor.reduce(\n                (m, s) => m.set([s.startLine, s.endLine].join(','), s.score),\n                new Map<string, number>()\n            );\n            topKByJaccard.forEach(v => (v.score += cursorMap.get([v.startLine, v.endLine].join(',')) ?? 0));\n            const resortedTopKByJaccard = this.sortScoredSnippets(topKByJaccard, SortOptions.Descending);\n            return this.markerToSnippet(resortedTopKByJaccard, lines);\n        }\n    }\n\n    private gatherNonOverlappingSnippets(snippetsByCursor: ScoredSnippetMarker[], snippetSelectionK: number) {\n        let nonOverlappingSnippets: ScoredSnippetMarker[] = [snippetsByCursor[0]];\n\n        // step forward into snippets until finding a snippet that has no overlap with any snippet in nonOverlappingSnippets\n        for (\n            let currentIndex = 1;\n            currentIndex < snippetsByCursor.length && nonOverlappingSnippets.length < snippetSelectionK;\n            currentIndex++\n        ) {\n            if (\n                nonOverlappingSnippets.findIndex(\n                    snippet =>\n                        snippetsByCursor[currentIndex].startLine < snippet.endLine &&\n                        snippetsByCursor[currentIndex].endLine > snippet.startLine\n                ) == -1\n            ) {\n                nonOverlappingSnippets.push(snippetsByCursor[currentIndex]);\n            }\n        }\n        return nonOverlappingSnippets;\n    }\n\n    /**\n     * Retrieve the snippets containing at least 1 cursor click. If there are less lines than the fixed size, we will get 1 snippet if it contains at least 1 click.\n     */\n    private retrieveCursorSnippets(objectDoc: DocumentInfo): ScoredSnippetMarker[] {\n        const snippets: ScoredSnippetMarker[] = [];\n\n        if (objectDoc.source.length === 0) {\n            return snippets;\n        }\n\n        const cursors = this.lineCursorHistory.get(objectDoc.uri);\n        if (cursors === undefined) {\n            return snippets;\n        }\n\n        const lines = objectDoc.source.split('\\n');\n\n        enum pointType {\n            leftBoundary,\n            rightBoundary,\n        }\n\n        let sparsePoints: [number, pointType, number][] = [];\n        for (const [line, num] of cursors.entries()) {\n            if (line >= lines.length) {\n                continue;\n            }\n\n            sparsePoints.push([Math.max(0, line - this.windowLength + 1), pointType.leftBoundary, num]);\n            sparsePoints.push([line + 1, pointType.rightBoundary, num]);\n        }\n\n        sparsePoints.push([lines.length, pointType.leftBoundary, 0]);\n        sparsePoints = sparsePoints.sort((a, b) => a[0] - b[0]);\n\n        let numCursors = 0;\n        let previousLine = 0;\n        for (const [line, type, num] of sparsePoints) {\n            if (numCursors > 0) {\n                for (\n                    let index = previousLine;\n                    index < line && (index == 0 || index + this.windowLength <= lines.length);\n                    index++\n                ) {\n                    snippets.push({\n                        score: numCursors,\n                        startLine: index,\n                        endLine: Math.min(lines.length, index + this.windowLength),\n                    });\n                }\n            }\n\n            if (type === pointType.leftBoundary) {\n                numCursors += num;\n            } else {\n                numCursors -= num;\n            }\n\n            previousLine = line;\n        }\n\n        return snippets;\n    }\n}\n","import {DocumentInfoWithOffset} from '../prompt';\nimport {CursorContextInfo, getCursorContext} from './cursorContext';\nimport {FunctionalMatcher, WindowedMatcher} from './selectRelevance';\nimport {getBasicWindowDelineations, getIndentationWindowsDelineations} from './windowDelineations';\n\nexport class FixedWindowSizeJaccardMatcher extends WindowedMatcher {\n    private windowLength: number;\n    private cursorContextFix: boolean;\n\n    private constructor(referenceDoc: DocumentInfoWithOffset, windowLength: number, cursorContextFix: boolean) {\n        super(referenceDoc, cursorContextFix);\n        this.windowLength = windowLength;\n        this.cursorContextFix = cursorContextFix;\n    }\n\n    static FACTORY = (windowLength: number, cursorContextFix: boolean) => {\n        return {\n            to: (referenceDoc: DocumentInfoWithOffset) =>\n                new FixedWindowSizeJaccardMatcher(referenceDoc, windowLength, cursorContextFix),\n        };\n    };\n\n    protected id(): string {\n        return 'fixed:' + this.windowLength;\n    }\n\n    protected getWindowsDelineations(lines: string[]): [number, number][] {\n        return getBasicWindowDelineations(this.windowLength, lines);\n    }\n\n    protected trimDocument(doc: DocumentInfoWithOffset): string {\n        return doc.source.slice(0, doc.offset).split('\\n').slice(-this.windowLength).join('\\n');\n    }\n\n    protected _getCursorContextInfo(referenceDoc: DocumentInfoWithOffset): CursorContextInfo {\n        return getCursorContext(referenceDoc, {\n            maxLineCount: this.windowLength,\n            cursorContextFix: this.cursorContextFix,\n        });\n    }\n\n    protected similarityScore(a: Set<string>, b: Set<string>): number {\n        return computeScore(a, b);\n    }\n}\n\n/**\n * A matcher that tries to find a maximal coherent snippet\n * of length between min and max number of lines\n * in the object document.\n * A snippet is coherent if:\n * * it is a contiguous sequence of lines\n * * for each two nodes a, b, there are respective ancestors that are both included and siblings to each other\n */\nexport class IndentationBasedJaccardMatcher extends WindowedMatcher {\n    private indentationMinLength: number;\n    private indentationMaxLength: number;\n    private languageId: string;\n    private cursorContextFix: boolean;\n\n    private constructor(\n        referenceDoc: DocumentInfoWithOffset,\n        indentationMinLength: number,\n        indentationMaxLength: number,\n        cursorContextFix: boolean\n    ) {\n        super(referenceDoc, cursorContextFix);\n        this.indentationMinLength = indentationMinLength;\n        this.indentationMaxLength = indentationMaxLength;\n        this.languageId = referenceDoc.languageId;\n        this.cursorContextFix = cursorContextFix;\n    }\n\n    static FACTORY = (indentationMinLength: number, indentationMaxLength: number, cursorContextFix: boolean) => {\n        return {\n            to: (referenceDoc: DocumentInfoWithOffset) =>\n                new IndentationBasedJaccardMatcher(\n                    referenceDoc,\n                    indentationMinLength,\n                    indentationMaxLength,\n                    cursorContextFix\n                ),\n        };\n    };\n\n    protected id(): string {\n        return `indent:${this.indentationMinLength}:${this.indentationMaxLength}:${this.languageId}`;\n    }\n\n    protected getWindowsDelineations(lines: string[]): [number, number][] {\n        const windows: [number, number][] = getIndentationWindowsDelineations(\n            lines,\n            this.languageId,\n            this.indentationMinLength,\n            this.indentationMaxLength\n        );\n        if (windows.length > 0) {\n            return windows;\n        } else if (lines.length < this.indentationMinLength) {\n            // Return the entire file if the indentation matcher returns nothing and the file is short enough\n            return [[0, lines.length]];\n        } else {\n            return [];\n        }\n    }\n\n    protected trimDocument(doc: DocumentInfoWithOffset): string {\n        return doc.source.slice(0, doc.offset).split('\\n').slice(-this.indentationMaxLength).join('\\n');\n    }\n\n    protected _getCursorContextInfo(referenceDoc: DocumentInfoWithOffset): CursorContextInfo {\n        return getCursorContext(referenceDoc, {\n            maxLineCount: this.indentationMaxLength,\n            cursorContextFix: this.cursorContextFix,\n        });\n    }\n\n    protected similarityScore(a: Set<string>, b: Set<string>): number {\n        return computeScore(a, b);\n    }\n}\n\nexport class FunctionJaccardMatcher extends FunctionalMatcher {\n    private indentationMinLength: number | undefined;\n    private indentationMaxLength: number | undefined;\n    private languageId: string;\n    private cursorContextFix: boolean;\n\n    protected id(): string {\n        return 'function:' + this.windowLength;\n    }\n    protected getWindowsDelineations(lines: string[]): [number, number][] {\n        if (this.indentationMaxLength !== undefined && this.indentationMinLength !== undefined) {\n            return getIndentationWindowsDelineations(\n                lines,\n                this.languageId,\n                this.indentationMinLength,\n                this.indentationMaxLength\n            );\n        }\n        return getBasicWindowDelineations(this.windowLength, lines);\n    }\n    private windowLength: number;\n\n    private constructor(\n        referenceDoc: DocumentInfoWithOffset,\n        windowLength: number,\n        cursorContextFix: boolean,\n        indentationMinLength: number | undefined,\n        indentationMaxLength: number | undefined\n    ) {\n        super(referenceDoc, cursorContextFix);\n        this.windowLength = windowLength;\n        this.indentationMinLength = indentationMinLength;\n        this.indentationMaxLength = indentationMaxLength;\n        this.languageId = referenceDoc.languageId;\n        this.cursorContextFix = cursorContextFix;\n    }\n\n    static FACTORY = (\n        windowLength: number,\n        cursorContextFix: boolean,\n        indentationMinLength?: number,\n        indentationMaxLength?: number\n    ) => {\n        return {\n            to: (referenceDoc: DocumentInfoWithOffset) =>\n                new FunctionJaccardMatcher(\n                    referenceDoc,\n                    windowLength,\n                    cursorContextFix,\n                    indentationMinLength,\n                    indentationMaxLength\n                ),\n        };\n    };\n\n    protected trimDocument(doc: DocumentInfoWithOffset): string {\n        return doc.source.slice(0, doc.offset).split('\\n').slice(-this.windowLength).join('\\n');\n    }\n\n    protected _getCursorContextInfo(referenceDoc: DocumentInfoWithOffset): CursorContextInfo {\n        return getCursorContext(referenceDoc, {\n            maxLineCount: this.windowLength,\n            cursorContextFix: this.cursorContextFix,\n        });\n    }\n\n    protected similarityScore(a: Set<string>, b: Set<string>): number {\n        return computeScore(a, b);\n    }\n}\n\n/**\n * Compute the Jaccard metric of number of elements in the intersection\n * divided by number of elements in the union\n */\nexport function computeScore(a: Set<string>, b: Set<string>) {\n    const intersection = new Set();\n    a.forEach(x => {\n        if (b.has(x)) {\n            intersection.add(x);\n        }\n    });\n    return intersection.size / (a.size + b.size - intersection.size);\n}\n","import {ok} from 'assert';\nimport {DocumentInfo, DocumentInfoWithOffset, SnippetSelectionOption} from '../prompt';\nimport {CursorHistoryMatcher, CursorSnippetsPickingStrategy} from './cursorMatching';\nimport {FixedWindowSizeJaccardMatcher, FunctionJaccardMatcher, IndentationBasedJaccardMatcher} from './jaccardMatching';\nimport {SnippetWithProviderInfo} from './snippets';\n\nexport enum NeighboringTabsOption {\n    None = 'none',\n    Conservative = 'conservative', // set jaccard threshold 0.3\n    Medium = 'medium', // set jaccard threshold 0.1\n    Eager = 'eager', // set jaccard threshold 0.0\n    EagerButLittle = 'eagerButLittle',\n    EagerButMedium = 'eagerButMedium',\n    EagerButMuch = 'eagerButMuch',\n    RetrievalComparable = 'retrievalComparable',\n}\n\nexport enum NeighboringSnippetType {\n    NeighboringFunctions = 'neighboringFunction',\n    NeighboringSnippets = 'neighboringSnippet',\n    CursorHistoryMatcher = 'cursorhistorymatcher',\n}\n\ninterface NeighborSelection {\n    snippetLength: number;\n    threshold: number;\n    numberOfSnippets: number;\n}\n\nexport const neighborOptionToSelection: Record<NeighboringTabsOption | string, NeighborSelection> = {\n    none: {\n        snippetLength: 1,\n        threshold: -1,\n        numberOfSnippets: 0,\n    },\n    conservative: {\n        snippetLength: 10,\n        threshold: 0.3,\n        numberOfSnippets: 1,\n    },\n    medium: {\n        snippetLength: 20,\n        threshold: 0.1,\n        numberOfSnippets: 2,\n    },\n    eager: {\n        snippetLength: 60,\n        threshold: 0,\n        numberOfSnippets: 4,\n    },\n    eagerButLittle: {\n        snippetLength: 10,\n        threshold: 0,\n        numberOfSnippets: 1,\n    },\n    eagerButMedium: {\n        snippetLength: 20,\n        threshold: 0,\n        numberOfSnippets: 4,\n    },\n    eagerButMuch: {\n        snippetLength: 60,\n        threshold: 0,\n        numberOfSnippets: 6,\n    },\n    retrievalComparable: {\n        snippetLength: 30,\n        threshold: 0,\n        numberOfSnippets: 4,\n    },\n};\n\n// Sanity thresholds on the number of neighbors to consider\nconst MAX_CHARACTERS_PER_FILE = 10000;\nconst MAX_NUMBER_OF_FILES = 20;\n\nfunction getMatcher(\n    doc: DocumentInfoWithOffset,\n    neighboringSnippetTypes: NeighboringSnippetType,\n    selection: NeighborSelection,\n    cursorContextFix: boolean,\n    indentationMinLength?: number,\n    indentationMaxLength?: number,\n    lineCursorHistory?: Map<string, Map<number, number>>,\n    cursorSnippetsPickingStrategy: CursorSnippetsPickingStrategy = CursorSnippetsPickingStrategy.CursorJaccard\n) {\n    let matcherFactory;\n    if (neighboringSnippetTypes === NeighboringSnippetType.NeighboringSnippets) {\n        if (indentationMinLength !== undefined && indentationMaxLength !== undefined) {\n            matcherFactory = IndentationBasedJaccardMatcher.FACTORY(\n                indentationMinLength,\n                indentationMaxLength,\n                cursorContextFix\n            );\n        } else {\n            matcherFactory = FixedWindowSizeJaccardMatcher.FACTORY(selection.snippetLength, cursorContextFix);\n        }\n    } else if (neighboringSnippetTypes === NeighboringSnippetType.NeighboringFunctions) {\n        matcherFactory = FunctionJaccardMatcher.FACTORY(\n            selection.snippetLength,\n            cursorContextFix,\n            indentationMinLength,\n            indentationMaxLength\n        );\n    } else {\n        ok(lineCursorHistory !== undefined, 'lineCursorHistory should not be undefined');\n        matcherFactory = CursorHistoryMatcher.FACTORY(\n            selection.snippetLength,\n            lineCursorHistory,\n            cursorSnippetsPickingStrategy,\n            cursorContextFix\n        );\n    }\n    return matcherFactory.to(doc);\n}\n\n/**\n * @returns A SnippetWithProviderInfo describing the best matches from neighbors.\n */\nexport async function getNeighborSnippets(\n    doc: DocumentInfoWithOffset,\n    neighbors: DocumentInfo[],\n    neighboringSnippetTypes: NeighboringSnippetType,\n    options: NeighboringTabsOption | string,\n    cursorContextFix: boolean,\n    indentationMinLength?: number,\n    indentationMaxLength?: number,\n    snippetSelectionOption?: SnippetSelectionOption,\n    snippetSelectionK?: number,\n    lineCursorHistory?: Map<string, Map<number, number>>,\n    cursorSnippetsPickingStrategy?: CursorSnippetsPickingStrategy\n): Promise<SnippetWithProviderInfo[]> {\n    const selection = {...neighborOptionToSelection[options]};\n    const matcher = getMatcher(\n        doc,\n        neighboringSnippetTypes,\n        selection,\n        cursorContextFix,\n        indentationMinLength,\n        indentationMaxLength,\n        lineCursorHistory,\n        cursorSnippetsPickingStrategy\n    );\n\n    if (selection.numberOfSnippets === 0) {\n        return [];\n    }\n\n    const snippets = (\n        await neighbors\n            // filter out absurdly long or absurdly many open files\n            .filter(neighbor => neighbor.source.length < MAX_CHARACTERS_PER_FILE && neighbor.source.length > 0)\n            // slice(0) duplicates an array\n            .slice(0, MAX_NUMBER_OF_FILES)\n            .reduce(\n                async (\n                    acc,\n                    neighbor // accumulator of all snippets from all neighbors\n                ) =>\n                    (\n                        await acc\n                    ).concat(\n                        (\n                            await matcher.findMatches(neighbor, snippetSelectionOption, snippetSelectionK)\n                        ).map(snippet => ({relativePath: neighbor.relativePath, ...snippet}))\n                    ),\n                Promise.resolve([] as SnippetWithProviderInfo[])\n            )\n    )\n        .filter(\n            neighbor =>\n                // remove files that had no match at all\n                neighbor.score &&\n                neighbor.snippet &&\n                // remove files that had a low score\n                neighbor.score > selection.threshold\n        )\n        // order them with best (highest scores) last\n        .sort((a, b) => a.score - b.score)\n        // take the best options from the end\n        .slice(-selection.numberOfSnippets);\n    return snippets;\n}\n","import {getFunctionPositions, isSupportedLanguageId} from '../parse';\nimport {DocumentInfo, DocumentInfoWithOffset, SnippetSelectionOption} from '../prompt';\nimport {CursorContextInfo} from './cursorContext';\nimport {SnippetProviderType, SnippetSemantics, SnippetWithProviderInfo} from './snippets';\n\nclass FifoCache<T> {\n    private keys: string[] = [];\n    private cache: {[key: string]: T} = {};\n    private size: number;\n    constructor(size: number) {\n        this.size = size;\n    }\n    put(key: string, value: T) {\n        this.cache[key] = value;\n        if (this.keys.length > this.size) {\n            this.keys.push(key);\n            const leavingKey = this.keys.shift() ?? '';\n            delete this.cache[leavingKey];\n        }\n    }\n    get(key: string): T | undefined {\n        return this.cache[key];\n    }\n}\n\n/**\n * A snippet of code together with a relevance score\n */\nexport interface ScoredSnippetMarker {\n    score: number;\n    startLine: number;\n    endLine: number;\n}\n\nexport interface ScoredSnippet extends ScoredSnippetMarker {\n    snippet: string;\n    relativePath?: string;\n}\n\nexport enum SortOptions {\n    Ascending = 'ascending',\n    Descending = 'descending',\n    None = 'none',\n}\n\nclass Tokenizer {\n    private readonly stopsForLanguage: Set<string>;\n    constructor(doc: DocumentInfo) {\n        this.stopsForLanguage = SPECIFIC_STOPS.get(doc.languageId) ?? GENERIC_STOPS;\n    }\n    tokenize(a: string): Set<string> {\n        return new Set<string>(splitIntoWords(a).filter(x => !this.stopsForLanguage.has(x)));\n    }\n}\n\n/**\n * For a number of documents (the neighboring tabs),\n * associate to each document and its kind of window computation (as key)\n * the sequence b_1, ..., b_n, where\n * b_i is the set of tokens in the ith window --\n * e.g. for window length 10,\n * WINDOWED_TOKEN_SET_CACHE(doc)[0]\n * holds the tokens in the first 10 lines of the document.\n */\nconst WINDOWED_TOKEN_SET_CACHE = new FifoCache<Set<string>[]>(20);\n\n/**\n * A matcher factory should be able to produce one matcher\n * for each document to which matches are to be found.\n * I.e. MatcherFactory.to(doc) is a matcher that matches against doc.\n */\nexport interface MatcherFactory {\n    to(doc: DocumentInfoWithOffset): {\n        findBestMatch(objectDoc: DocumentInfo): Promise<ScoredSnippet | undefined>;\n        findMatches(\n            objectDoc: DocumentInfo,\n            snippetSelectionOption: SnippetSelectionOption | undefined,\n            snippetSelectionK?: number\n        ): Promise<ScoredSnippet[]>;\n    };\n}\n\n/**\n * For a given document, extracts the best matching snippets from other documents\n * by comparing all of a set of windows in the object doc.\n */\nexport abstract class WindowedMatcher {\n    protected referenceDoc: DocumentInfoWithOffset;\n    protected tokenizer: Tokenizer;\n    private _referenceTokens: Set<string> | undefined;\n\n    protected abstract id(): string;\n    protected abstract similarityScore(a: Set<string>, b: Set<string>): number;\n    /**\n     * Given an array of lines, returns an array of pairs <startLine, endLine> of indices,\n     * such that each pair is a window of lines to consider adding.\n     * startLine is inclusive, endLine is exclusive.\n     * @param lines Lines of a source text, in order\n     */\n    protected abstract getWindowsDelineations(lines: string[]): [number, number][];\n\n    protected abstract trimDocument(doc: DocumentInfoWithOffset): string;\n\n    /**\n     * Subclasses should implement this method to return the desired context info for tokenization\n     * from the reference document. Will only be called after constructor is finished.\n     * The tokenizer used in WindowedMatcher is a simple tokenizer for Jaccard similarity, NOT an\n     * OpenAI model tokenizer.\n     */\n    protected abstract _getCursorContextInfo(referenceDoc: DocumentInfoWithOffset): CursorContextInfo;\n\n    protected constructor(referenceDoc: DocumentInfoWithOffset, cursorContextFix: boolean) {\n        this.referenceDoc = referenceDoc;\n        this.tokenizer = new Tokenizer(referenceDoc); // Just uses language info from referenceDoc\n\n        if (!cursorContextFix) {\n            // If cursorContextFix is false, default to setting the reference tokens\n            // in the constructor\n            this._referenceTokens = this.tokenizer.tokenize(this.trimDocument(referenceDoc));\n        }\n    }\n\n    /**\n     * Lazy getter for referenceTokens since it relies on properties\n     * that are not initialized in the constructor of WindowedMatcher\n     * but in the constructor of its subclasses.\n     */\n    get referenceTokens(): Set<string> {\n        // If cursorContextFix is active, _referenceTokens is not set in the constructor\n        // (hence undefined) and _getCursorContextInfo is used instead.\n        if (this._referenceTokens === undefined) {\n            this._referenceTokens = this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context);\n        }\n        return this._referenceTokens;\n    }\n\n    /**\n     * Returns a sorted array of snippets with their scores according to the sort option.\n     * @param snippets ScoredSnippet[]\n     *\n     */\n    sortScoredSnippets(snippets: ScoredSnippetMarker[], sortOption = SortOptions.Descending): ScoredSnippetMarker[] {\n        return sortOption == SortOptions.Ascending\n            ? snippets.sort((snippetA, snippetB) => (snippetA.score > snippetB.score ? 1 : -1))\n            : sortOption == SortOptions.Descending\n            ? snippets.sort((snippetA, snippetB) => (snippetA.score > snippetB.score ? -1 : 1))\n            : snippets;\n    }\n    /**\n     * Returns all snippet markers with their scores.\n     * @param objectDoc\n     *\n     */\n    retrieveAllSnippets(objectDoc: DocumentInfo, sortOption = SortOptions.Descending): ScoredSnippetMarker[] {\n        const snippets: ScoredSnippetMarker[] = [];\n\n        if (objectDoc.source.length === 0 || this.referenceTokens.size === 0) {\n            return snippets;\n        }\n\n        const lines = objectDoc.source.split('\\n');\n        const key = this.id() + ':' + objectDoc.source;\n        const tokensInWindows = WINDOWED_TOKEN_SET_CACHE.get(key) ?? [];\n        // if the tokens are not cached, we need to compute them\n        const needToComputeTokens = tokensInWindows.length == 0;\n        const tokenizedLines = needToComputeTokens ? lines.map(this.tokenizer.tokenize, this.tokenizer) : [];\n\n        // Compute the windows with the score\n        for (const [index, [startLine, endLine]] of this.getWindowsDelineations(lines).entries()) {\n            if (needToComputeTokens) {\n                const tokensInWindow = new Set<string>();\n                tokenizedLines.slice(startLine, endLine).forEach(x => x.forEach(tokensInWindow.add, tokensInWindow));\n                tokensInWindows.push(tokensInWindow);\n            }\n            // Now tokensInWindows[index] contains the tokens in the window, whether we just computed them or not\n            const tokensInWindow = tokensInWindows[index];\n            const score = this.similarityScore(tokensInWindow, this.referenceTokens);\n            snippets.push({\n                score,\n                startLine,\n                endLine,\n            });\n        }\n\n        // If we didn't get the token sets from the cache, time to put them there!\n        if (needToComputeTokens) {\n            WINDOWED_TOKEN_SET_CACHE.put(key, tokensInWindows);\n        }\n\n        return this.sortScoredSnippets(snippets, sortOption);\n    }\n\n    async findMatches(\n        objectDoc: DocumentInfo,\n        snippetSelectionOption = SnippetSelectionOption.BestMatch,\n        snippetSelectionK?: number\n    ): Promise<SnippetWithProviderInfo[]> {\n        if (snippetSelectionOption == SnippetSelectionOption.BestMatch) {\n            const snippet = await this.findBestMatch(objectDoc);\n            return snippet ? [snippet] : [];\n        }\n\n        if (snippetSelectionOption == SnippetSelectionOption.TopK) {\n            return (await this.findTopKMatches(objectDoc, snippetSelectionK)) || [];\n        }\n\n        return [];\n    }\n\n    /**\n     * Returns the snippet from the object document\n     * that is most similar to the reference Document\n     * together with its Jaccard score\n     *\n     * @param objectDoc\n     */\n    async findBestMatch(objectDoc: DocumentInfo): Promise<SnippetWithProviderInfo | undefined> {\n        if (objectDoc.source.length === 0 || this.referenceTokens.size === 0) {\n            return undefined;\n        }\n        const lines = objectDoc.source.split('\\n');\n        const snippets = this.retrieveAllSnippets(objectDoc, SortOptions.Descending);\n\n        // safe guard against empty lists\n        if (snippets.length === 0) {\n            return undefined;\n        }\n        if (snippets[0].score === 0) {\n            return undefined;\n        }\n\n        // Compute the window with the best match\n        const snippetCode = lines.slice(snippets[0].startLine, snippets[0].endLine).join('\\n');\n        return {\n            snippet: snippetCode,\n            semantics: SnippetSemantics.Snippet,\n            provider: SnippetProviderType.NeighboringTabs,\n            ...snippets[0],\n        };\n    }\n\n    /**\n     * Returns the snippet from the object document\n     * that is most similar to the reference Document\n     * together with its Jaccard score\n     *\n     * @param objectDoc\n     */\n    async findTopKMatches(\n        objectDoc: DocumentInfo,\n        snippetSelectionK = 1\n    ): Promise<SnippetWithProviderInfo[] | undefined> {\n        if (objectDoc.source.length === 0 || this.referenceTokens.size === 0 || snippetSelectionK < 1) {\n            return undefined;\n        }\n\n        const lines = objectDoc.source.split('\\n');\n\n        const snippets = this.retrieveAllSnippets(objectDoc, SortOptions.Descending);\n        if (snippets.length === 0 || snippets[0].score === 0) {\n            return undefined;\n        }\n\n        const nonOverlappingSnippets: ScoredSnippetMarker[] = [snippets[0]];\n\n        // step forward into snippets until finding a snippet that has no overlap with any snippet in nonOverlappingSnippets\n        for (\n            let currentIndex = 1;\n            currentIndex < snippets.length && nonOverlappingSnippets.length < snippetSelectionK;\n            currentIndex++\n        ) {\n            if (\n                nonOverlappingSnippets.findIndex(\n                    snippet =>\n                        snippets[currentIndex].startLine < snippet.endLine &&\n                        snippets[currentIndex].endLine > snippet.startLine\n                ) == -1\n            ) {\n                nonOverlappingSnippets.push(snippets[currentIndex]);\n            }\n        }\n        return nonOverlappingSnippets.map(snippetMarker => ({\n            snippet: lines.slice(snippetMarker.startLine, snippetMarker.endLine).join('\\n'),\n            semantics: SnippetSemantics.Snippet,\n            provider: SnippetProviderType.NeighboringTabs,\n            ...snippetMarker,\n        }));\n    }\n}\n\nasync function getNeighboringFunctions(neighbor: DocumentInfo) {\n    let neighborFuncs: DocumentInfo[] = [];\n    if (isSupportedLanguageId(neighbor.languageId)) {\n        const funcPositions = await getFunctionPositions(neighbor.languageId, neighbor.source);\n        for (let i = 0; i < funcPositions.length; i++) {\n            let {startIndex, endIndex} = funcPositions[i];\n            let func_source = neighbor.source.substring(startIndex, endIndex);\n            neighborFuncs.push({\n                source: func_source,\n                relativePath: neighbor.relativePath,\n                languageId: neighbor.languageId,\n                uri: neighbor.uri,\n            });\n        }\n    }\n    return neighborFuncs;\n}\n\nexport abstract class FunctionalMatcher extends WindowedMatcher {\n    protected constructor(referenceDoc: DocumentInfoWithOffset, cursorContextFix: boolean) {\n        super(referenceDoc, cursorContextFix);\n    }\n\n    getMatchingScore(neighborDoc: DocumentInfo): ScoredSnippet {\n        const neighborDocTokens = this.tokenizer.tokenize(neighborDoc.source);\n        const score = this.similarityScore(neighborDocTokens, this.referenceTokens);\n\n        return {\n            snippet: neighborDoc.source,\n            score: score,\n            startLine: 0,\n            endLine: 0,\n        };\n    }\n\n    override async findBestMatch(objectDoc: DocumentInfo): Promise<SnippetWithProviderInfo | undefined> {\n        const snippets = await this.findMatches(objectDoc);\n        // safe guard against empty lists\n        if (snippets.length === 0) {\n            return undefined;\n        }\n        if (snippets[0].score === 0) {\n            return undefined;\n        }\n        return snippets[0];\n    }\n\n    override async findMatches(\n        objectDoc: DocumentInfo,\n        snippetSelectionOption?: SnippetSelectionOption,\n        snippetSelectionK?: number\n    ): Promise<SnippetWithProviderInfo[]> {\n        if (objectDoc.source.length === 0 || this.referenceTokens.size === 0) {\n            return [];\n        }\n        const neighborFuncs = await getNeighboringFunctions(objectDoc);\n\n        if (neighborFuncs.length == 0) {\n            // if no function was extracted, return default code snippets.\n            const lines = objectDoc.source.split('\\n');\n            const snippets = this.retrieveAllSnippets(objectDoc, SortOptions.Descending);\n            // safe guard against empty lists\n            if (snippets.length === 0) {\n                return [];\n            }\n            if (snippets[0].score === 0) {\n                return [];\n            }\n            // Compute the window with the best match\n            const snippetCode = lines.slice(snippets[0].startLine, snippets[0].endLine).join('\\n');\n            return [\n                {\n                    snippet: snippetCode,\n                    semantics: SnippetSemantics.Snippet,\n                    provider: SnippetProviderType.NeighboringTabs,\n                    ...snippets[0],\n                },\n            ];\n        }\n\n        const snippets: SnippetWithProviderInfo[] = [];\n        for (let func of neighborFuncs) {\n            const snippet = this.getMatchingScore(func);\n            snippets.push({\n                semantics: SnippetSemantics.Function,\n                provider: SnippetProviderType.NeighboringTabs,\n                ...snippet,\n            });\n        }\n        return snippets;\n    }\n}\n\n/**\n * Split by non-alphanumeric characters\n */\nexport function splitIntoWords(a: string): string[] {\n    return a.split(/[^a-zA-Z0-9]/).filter(x => x.length > 0);\n}\n\nconst ENGLISH_STOPS = new Set([\n    // - pronouns\n    'we',\n    'our',\n    'you',\n    'it',\n    'its',\n    'they',\n    'them',\n    'their',\n    'this',\n    'that',\n    'these',\n    'those',\n    // - verbs\n    'is',\n    'are',\n    'was',\n    'were',\n    'be',\n    'been',\n    'being',\n    'have',\n    'has',\n    'had',\n    'having',\n    'do',\n    'does',\n    'did',\n    'doing',\n    'can',\n    'don',\n    't',\n    's',\n    'will',\n    'would',\n    'should',\n    // - wh-words\n    'what',\n    'which',\n    'who',\n    'when',\n    'where',\n    'why',\n    'how',\n    // - articles\n    'a',\n    'an',\n    'the',\n    // - prepositions\n    'and',\n    'or',\n    'not',\n    'no',\n    'but',\n    'because',\n    'as',\n    'until',\n    'again',\n    'further',\n    'then',\n    'once',\n    'here',\n    'there',\n    'all',\n    'any',\n    'both',\n    'each',\n    'few',\n    'more',\n    'most',\n    'other',\n    'some',\n    'such',\n    'above',\n    'below',\n    'to',\n    'during',\n    'before',\n    'after',\n    'of',\n    'at',\n    'by',\n    'about',\n    'between',\n    'into',\n    'through',\n    'from',\n    'up',\n    'down',\n    'in',\n    'out',\n    'on',\n    'off',\n    'over',\n    'under',\n    'only',\n    'own',\n    'same',\n    'so',\n    'than',\n    'too',\n    'very',\n    'just',\n    'now',\n]);\n\n/**\n * A generic set of stops for any programming language\n */\nconst GENERIC_STOPS = new Set([\n    // words that are common in programming languages\n    'if',\n    'then',\n    'else',\n    'for',\n    'while',\n    'with',\n    'def',\n    'function',\n    'return',\n    'TODO',\n    'import',\n    'try',\n    'catch',\n    'raise',\n    'finally',\n    'repeat',\n    'switch',\n    'case',\n    'match',\n    'assert',\n    'continue',\n    'break',\n    'const',\n    'class',\n    'enum',\n    'struct',\n    'static',\n    'new',\n    'super',\n    'this',\n    'var',\n    // words that are common in English comments:\n    ...ENGLISH_STOPS,\n]);\n\n/**\n * Specific stops for certain languages\n * Note that ENGLISH_STOPS need to be added to this set if they are to be included\n */\nconst SPECIFIC_STOPS: Map<string, Set<string>> = new Map([\n    // none yet\n]);\n","import {commentBlockAsSingles} from '../languageMarker';\nimport {Tokenizer} from '../tokenization';\nimport {Priorities} from '../wishlist';\nimport {ScoredSnippet} from './selectRelevance';\n\n/** Indicates what provider produced a given snippet. */\nexport enum SnippetProviderType {\n    NeighboringTabs = 'neighboring-tabs',\n    Retrieval = 'retrieval',\n    SymbolDef = 'symbol-def',\n    Language = 'language',\n    Path = 'path',\n}\n\n/**\n * The semantics of a snippet. For example, some providers\n * might always produce a snippet that is a complete function\n * whereas others might produce a snippet that are inherhently\n * partial.\n */\nexport enum SnippetSemantics {\n    /** The contents of the snippet is a function. */\n    Function = 'function',\n    /** The contents of the snippet is an unspecified snippet. */\n    Snippet = 'snippet',\n    /** The following are from hover text */\n    Variable = 'variable',\n    Parameter = 'parameter',\n    Method = 'method',\n    Class = 'class',\n    Module = 'module',\n    Alias = 'alias',\n    Enum = 'enum member',\n    Interface = 'interface',\n}\n\n/** Extends a ScoredSnippet with information about its provider. */\nexport interface SnippetWithProviderInfo extends ScoredSnippet {\n    /** The provider that created this snippet. */\n    provider: SnippetProviderType;\n    /** The semantical meaning of the snippet's contents. */\n    semantics: SnippetSemantics;\n}\n\nexport interface SingleSnippetProviderOptions {\n    /** Which function to apply for score normalization */\n    normalizationFunction: 'affine';\n    /** The parameters/coefficients for the score normalization function */\n    normalizationParams: number[];\n    /**\n     * Number of snippets reserved to this provider, disregarding whether other\n     * providers have higher-scoring snippets.\n     */\n    reservedSnippetCount?: number;\n}\n\n/**\n * The options for all snippet providers.\n */\nexport type SnippetProviderOptions = Record<SnippetProviderType, SingleSnippetProviderOptions>;\n\n/**\n * A snippet with a normalized score\n */\nexport interface SnippetWithNormalizedScore extends Omit<SnippetWithProviderInfo, 'score'> {\n    providerScore: number;\n    normalizedScore: number;\n}\n\n/**\n * The most processed form of a snippet that contains fully rendered and\n * prioritized snippets, including their token count. Can be used directly\n * with the wishlist. The priority is a wishlist priority, not a score.\n */\nexport interface ProcessedSnippet {\n    /** The announced (i.e. formatted) snippet */\n    announcedSnippet: string;\n    /** Wishlish priority */\n    priority: number;\n    /** The score of the snippet as given directly by the provider */\n    providerScore: number;\n    /** The normalized score */\n    normalizedScore: number;\n    /** The number of tokens in the (announced) snippet */\n    tokens: number;\n    /** The provider */\n    provider: SnippetProviderType;\n    /** Relative path */\n    relativePath?: string;\n}\n\n/**\n * A map from semantics enum to a human / LLM-readable label that we\n * include when announcing a snippet.\n */\nconst snippetSemanticsToString: {[key in SnippetSemantics]: string} = {\n    [SnippetSemantics.Function]: 'function',\n    [SnippetSemantics.Snippet]: 'snippet',\n    [SnippetSemantics.Variable]: 'variable',\n    [SnippetSemantics.Parameter]: 'parameter',\n    [SnippetSemantics.Method]: 'method',\n    [SnippetSemantics.Class]: 'class',\n    [SnippetSemantics.Module]: 'module',\n    [SnippetSemantics.Alias]: 'alias',\n    [SnippetSemantics.Enum]: 'enum member',\n    [SnippetSemantics.Interface]: 'interface',\n};\n\n/**\n * Formats a snippet for inclusion in the prompt.\n *\n * This does three things:\n * 1. Adds an announcement headline.\n * 2. Formats each line as a single-line comment in the language of the target doc.\n * 3. Adds a trailing newline if one was not already there.\n */\nexport function announceSnippet(snippet: Omit<SnippetWithProviderInfo, 'score'>, targetDocLanguageId: string): string {\n    const semantics = snippetSemanticsToString[snippet.semantics];\n    const headline = snippet.relativePath\n        ? `Compare this ${semantics} from ${snippet.relativePath}:`\n        : `Compare this ${semantics}:`;\n    let headlinedSnippet = headline + '\\n' + snippet.snippet;\n    if (!headlinedSnippet.endsWith('\\n')) {\n        headlinedSnippet += '\\n';\n    }\n    return commentBlockAsSingles(headlinedSnippet, targetDocLanguageId);\n}\n\nexport function normalizeSnippetScore<S extends {provider: SnippetProviderType; score: number}>(\n    snippet: S,\n    providerOptions: SnippetProviderOptions\n): Omit<S, 'score'> & {providerScore: number; normalizedScore: number} {\n    const options = providerOptions[snippet.provider];\n    if (!options) {\n        throw new Error('Unknown snippet provider: ' + snippet.provider);\n    }\n    const {score: providerScore, ...snippetRem} = snippet;\n    let normalizedScore = providerScore;\n    if (options.normalizationFunction === 'affine') {\n        const [a, b] = options.normalizationParams;\n        normalizedScore = a * providerScore + b;\n    } else {\n        throw new Error(\n            `Unknown normalization function ${options.normalizationFunction} for snippet provider ${snippet.provider}`\n        );\n    }\n    return {\n        ...snippetRem, // Remove score\n        providerScore,\n        normalizedScore,\n    };\n}\n\n/**\n * Sorts snippets in-place in descending order by their normalized score.\n */\nfunction sortSnippetsDescending<S extends {normalizedScore: number}>(snippets: S[]): void {\n    snippets.sort((a, b) => b.normalizedScore - a.normalizedScore);\n}\n\n/**\n * Selects `numberOfSnippets` simultanously adhering to two principles:\n *   1. Select the best `reservedSnippetCount` snippets from each provider,\n *      according to their normalized score.\n *   2. Select the best snippets according to normalized score across all\n *      providers, until `numberOfSnippets` have been selected in total.\n *\n * NOTE: If the total number of `reservedSnippetCount` exceeds\n * `numberOfSnippets`, then this method throws an exception.\n *\n * The returned snippets are returned in order of decreasing normalized score,\n * i.e. the best snippets are first in each list.\n */\nexport function selectSnippets(\n    snippets: SnippetWithProviderInfo[],\n    numberOfSnippets: number,\n    providerOptions: SnippetProviderOptions\n): {reserved: SnippetWithNormalizedScore[]; candidates: SnippetWithNormalizedScore[]} {\n    if (numberOfSnippets == 0) {\n        return {reserved: [], candidates: []};\n    }\n    // Compute all the normalized scores\n    const normalizedSnippets: SnippetWithNormalizedScore[] = snippets.map(snippet =>\n        normalizeSnippetScore(snippet, providerOptions)\n    );\n    // Split snippets by provider\n    const snippetsByProvider = new Map<SnippetProviderType, SnippetWithNormalizedScore[]>();\n    let provider: SnippetProviderType;\n    for (provider in providerOptions) {\n        snippetsByProvider.set(provider, []);\n    }\n    for (const snippet of normalizedSnippets) {\n        let snippets = snippetsByProvider.get(snippet.provider);\n        if (!snippets) {\n            throw new Error('Unknown snippet provider: ' + snippet.provider);\n        }\n        snippets.push(snippet);\n    }\n    for (const [_provider, snippets] of snippetsByProvider) {\n        sortSnippetsDescending(snippets);\n    }\n    // Pick all reserved snippets\n    let reserved: SnippetWithNormalizedScore[] = [];\n    for (provider in providerOptions) {\n        const options = providerOptions[provider];\n        const count = options.reservedSnippetCount || 0;\n        if (count > 0) {\n            const snippets = snippetsByProvider.get(provider) || [];\n            reserved = reserved.concat(snippets.slice(0, count));\n            snippetsByProvider.set(provider, snippets.slice(count));\n        }\n    }\n    sortSnippetsDescending(reserved);\n    let candidates: SnippetWithNormalizedScore[] = [];\n    if (reserved.length > numberOfSnippets) {\n        throw new Error('Reserved snippet count exceeds number of snippets');\n    }\n    if (reserved.length < numberOfSnippets) {\n        // Flatten and resort all remaining snippets\n        const remaining = Array.from(snippetsByProvider.values()).flat();\n        sortSnippetsDescending(remaining);\n        // Pick the best remaining snippets\n        candidates = remaining.slice(0, numberOfSnippets - reserved.length);\n    }\n    return {reserved, candidates};\n}\n\n/**\n * \"Processes\" a list of snippets and assigns priorities.\n *\n * The snippets will get their scores normalized, will be announced, and will be\n * selected according to best-normalized score while adhering to any\n * reservations stipulated in `providerOptions`. See {@link selectSnippets} for\n * details.\n *\n * The returned snippets will then be assigned priorites descendingly from\n * `priorities.high` respectively `priorities.low`, or not included at all,\n * according to two parameters `totalPrioritized` and `highPriorityBudget`.\n *\n * The snippets are also returned by increasing normalized score. If they are\n * enqueued in this order in the wishlist, then the highest-scoring snippets\n * will appear closest to the cursor.\n *\n * By definition, a reserved snippet may be selected with higher priority than a\n * non-reserved candidate snippet with better normalized score. The reserved\n * snippet is then guaranteed to be selected in the wishlist before the\n * non-reserved snippet, but if both are ultimately selected, the non-reserved\n * one will appear last in the prompt.\n *\n * @param snippets The snippets to process.\n * @param providerOptions The options for each snippet provider.\n * @param priorities Priorities to assign to snippets: high priority is assigned\n * to the first `highPriorityBudget` tokens, low priority to the remaining\n * `totalPrioritized` snippets.\n * @param totalPrioritized The maximal number of snippets to return, i.e. if\n * more snippets are passed in, we remove the least desirable.\n * @param highPriorityBudget The number of tokens to use for high priority\n * snippets\n */\nexport function processSnippetsForWishlist(\n    snippets: SnippetWithProviderInfo[],\n    targetDocLanguageId: string,\n    tokenizer: Tokenizer,\n    providerOptions: SnippetProviderOptions,\n    priorities: {priorities: Priorities; low: number; high: number},\n    totalPrioritized: number,\n    highPriorityBudget: number\n): ProcessedSnippet[] {\n    // selectSnippets returns in order of decreasing normalized score, i.e. best\n    // first in each list.\n    const {reserved, candidates} = selectSnippets(snippets, totalPrioritized, providerOptions);\n    let usedBudget = 0;\n    let processedSnippets: ProcessedSnippet[] = [];\n    let nextHighPriority = priorities.high;\n    let nextLowPriority = priorities.low;\n    function process(snippet: SnippetWithNormalizedScore, usedBudget: number): number {\n        const announced = announceSnippet(snippet, targetDocLanguageId);\n        const tokens = tokenizer.tokenLength(announced);\n        let priority: number;\n        if (usedBudget + tokens <= highPriorityBudget) {\n            priority = nextHighPriority;\n            nextHighPriority = priorities.priorities.justBelow(priority);\n        } else {\n            priority = nextLowPriority;\n            nextLowPriority = priorities.priorities.justBelow(priority);\n        }\n        processedSnippets.push({\n            announcedSnippet: announced,\n            provider: snippet.provider,\n            providerScore: snippet.providerScore,\n            normalizedScore: snippet.normalizedScore,\n            priority,\n            tokens,\n            relativePath: snippet.relativePath,\n        });\n        return usedBudget + tokens;\n    }\n    // We first assign priorities to the reserved snippets.\n    // Then to the remaining candidates.\n    for (const snippet of [...reserved, ...candidates]) {\n        if (processedSnippets.length >= totalPrioritized) {\n            break;\n        }\n        usedBudget = process(snippet, usedBudget);\n    }\n    // Re-sort the list by increasing normalized score\n    sortSnippetsDescending(processedSnippets);\n    processedSnippets.reverse();\n    return processedSnippets;\n}\n","import {IndentationTree} from '../indentation/classes';\nimport {clearLabels, visitTree} from '../indentation/manipulation';\nimport {parseTree} from '../indentation/parsing';\n\n/**\n * Returns a list of (startline, endline) pairs representing fixed size windows\n *\n * @param windowLength length of fixed size window\n * @param lines lines to extract fixed size windows from\n * @returns list of (startline, endline) pairs\n */\nexport function getBasicWindowDelineations(windowLength: number, lines: string[]): [number, number][] {\n    const windows: [number, number][] = [];\n    const length = lines.length;\n    if (length == 0) {\n        return [];\n    }\n    if (length < windowLength) {\n        // if not long enough to reach a single window length, return full document\n        return [[0, length]];\n    }\n    for (let startLine = 0; startLine < length - windowLength + 1; startLine++) {\n        windows.push([startLine, startLine + windowLength]);\n    }\n    return windows;\n}\n\n/**\n * Calculate all windows like with the following properties:\n * - they are all of length <= maxLength\n * - they are all of length >= minLength\n *   - except if they are followed by enough blank lines to reach length >= minLength\n * - they are a contiguous subsequence from [parentline, child1, child2, ..., childn]\n * - which neither starts nor ends with a blank line\n * Note that windows of the form \"parent with all its children\" could\n * appear in different ways with that definition,\n * e.g. as \"childi\" of its parent, and as \"parent, child1, ..., childn\" where the parent is itself.\n * Nevertheless, it will only be listed once.\n * @param lines\n */\nexport function getIndentationWindowsDelineations(\n    lines: string[],\n    languageId: string,\n    minLength: number,\n    maxLength: number\n): [number, number][] {\n    // Deal with degenerate cases\n    if (lines.length < minLength || maxLength == 0) {\n        return [];\n    }\n\n    const windows: [number, number][] = [];\n    // For each node, keep track of how long its children extend, or whether it can't be included in a window anyhow\n    type TreeLabel = {totalLength: number; firstLineAfter: number};\n    // Todo: add groupBlocks here as well\n    const labeledTree = clearLabels(parseTree(lines.join('\\n'), languageId)) as IndentationTree<TreeLabel>;\n    visitTree(\n        labeledTree,\n        node => {\n            if (node.type === 'blank') {\n                node.label = {totalLength: 1, firstLineAfter: node.lineNumber + 1};\n                return;\n            }\n            // Statistics to gather on the way, to be consumed by parents\n            let totalLength = node.type === 'line' ? 1 : 0;\n            let firstLineAfter = node.type === 'line' ? node.lineNumber + 1 : NaN;\n            // we consider intervals [a, b] which correspond to including children number a (-1 means parent) through b exclusive.\n            // the window start and end lines are computed here, such that startLine (inclusive) to endLine (exclusive) covers the window\n            function getStartLine(a: number) {\n                return a == -1\n                    ? firstLineAfter - totalLength\n                    : node.subs[a].label!.firstLineAfter - node.subs[a].label!.totalLength;\n            }\n            function getEndLine(b: number, startLine: number) {\n                return b == 0 ? startLine + 1 : node.subs[b - 1].label!.firstLineAfter;\n            }\n            // iteratively go through candidates for [a, b[:\n            // if from a to including b would be too long, add the window a to b exclusive and increase a as far as necessary, otherwise increase b\n            // a = -1 will mean: include the parent\n            let a = node.type === 'line' ? -1 : 0; // if the parent is a line, consider using it\n            let lengthFromAToBInclusive = node.type === 'line' ? 1 : 0; // if so, the length is 1, otherwise 0\n            let lastBThatWasntABlank = 0;\n            for (let b = 0; b < node.subs.length; b++) {\n                // don't let the window start with blank lines\n                while (a >= 0 && a < node.subs.length && node.subs[a].type === 'blank') {\n                    lengthFromAToBInclusive -= node.subs[a].label!.totalLength;\n                    a++;\n                }\n                if (node.subs[b].type !== 'blank') {\n                    lastBThatWasntABlank = b;\n                }\n                // add subs[b] to the window\n                firstLineAfter = node.subs[b].label!.firstLineAfter;\n                totalLength += node.subs[b].label!.totalLength;\n                lengthFromAToBInclusive += node.subs[b].label!.totalLength;\n                if (lengthFromAToBInclusive > maxLength) {\n                    const startLine = getStartLine(a);\n                    const endLine = getEndLine(b, startLine);\n                    const endLineTrimmedForBlanks =\n                        lastBThatWasntABlank == b ? endLine : getEndLine(lastBThatWasntABlank, startLine);\n                    // for the test, note that blanks count for getting us over the minLength:\n                    if (minLength <= endLine - startLine) {\n                        windows.push([startLine, endLineTrimmedForBlanks]);\n                    }\n                    while (lengthFromAToBInclusive > maxLength) {\n                        // remove subs[a] from the window\n                        lengthFromAToBInclusive -=\n                            a == -1\n                                ? node.type == 'line'\n                                    ? 1\n                                    : // this cannot happen: if not a line, we start with a = 0 unless it's a line\n                                      0\n                                : node.subs[a].label!.totalLength;\n                        a++;\n                    }\n                }\n            }\n            // if there's anything left to add (a < b), do it\n            if (a < node.subs.length) {\n                const startLine = getStartLine(a);\n                const endLine = firstLineAfter;\n                const endLineTrimmedForBlanks =\n                    a == -1 ? endLine : node.subs[lastBThatWasntABlank].label!.firstLineAfter;\n                // note: even if fillUpWindowWithPartOfNextNeighbor is true,\n                // there is no next neighbor here, so nothing to extend the window to\n                if (minLength <= endLine - startLine) {\n                    windows.push([startLine, endLineTrimmedForBlanks]);\n                }\n                // Set the node's label\n            }\n            node.label = {totalLength, firstLineAfter};\n        },\n        'bottomUp'\n    );\n    // windows is an array of [start, end] pairs,\n    // but some may appear twice, and should be removed\n    return windows\n        .sort((a, b) => a[0] - b[0] || a[1] - b[1])\n        .filter((a, i, arr) => i == 0 || a[0] != arr[i - 1][0] || a[1] != arr[i - 1][1]);\n}\n","import {getLanguageMarker, newLineEnded} from '../languageMarker';\nimport {SnippetProviderContext} from '../orchestrator';\nimport {normalizeLanguageId} from '../prompt';\nimport {SnippetProviderType, SnippetSemantics, SnippetWithProviderInfo} from '../snippetInclusion/snippets';\nimport {SnippetProvider} from './snippetProvider';\n\nexport class LanguageSnippetProvider extends SnippetProvider {\n    public async buildSnippets(context: SnippetProviderContext): Promise<SnippetWithProviderInfo[]> {\n        const {currentFile} = context;\n        currentFile.languageId = normalizeLanguageId(currentFile.languageId);\n        return [\n            {\n                provider: SnippetProviderType.Language,\n                semantics: SnippetSemantics.Snippet,\n                snippet: newLineEnded(getLanguageMarker(currentFile)),\n                relativePath: currentFile.relativePath,\n                startLine: 0,\n                endLine: 0,\n                score: 0,\n            },\n        ];\n    }\n}\n","import {getPathMarker, newLineEnded} from '../languageMarker';\nimport {SnippetProviderContext} from '../orchestrator';\nimport {normalizeLanguageId} from '../prompt';\nimport {SnippetProviderType, SnippetSemantics, SnippetWithProviderInfo} from '../snippetInclusion/snippets';\nimport {SnippetProvider} from './snippetProvider';\n\nexport class PathSnippetProvider extends SnippetProvider {\n    public async buildSnippets(context: SnippetProviderContext): Promise<SnippetWithProviderInfo[]> {\n        const {currentFile} = context;\n        currentFile.languageId = normalizeLanguageId(currentFile.languageId);\n        return [\n            {\n                provider: SnippetProviderType.Path,\n                semantics: SnippetSemantics.Snippet,\n                snippet: newLineEnded(getPathMarker(currentFile)),\n                relativePath: currentFile.relativePath,\n                startLine: 0,\n                endLine: 0,\n                score: 0,\n            },\n        ];\n    }\n}\n","import {SnippetProviderContext} from '../orchestrator';\nimport {SnippetWithProviderInfo} from '../snippetInclusion/snippets';\n\nexport abstract class SnippetProvider {\n    protected abstract buildSnippets(context: SnippetProviderContext): Promise<SnippetWithProviderInfo[]>;\n\n    public getSnippets(context: SnippetProviderContext): Promise<SnippetWithProviderInfo[]> {\n        return new Promise(async (resolve, reject) => {\n            resolve(this.buildSnippets(context));\n        });\n    }\n}\n","export interface ScoredSuffix {\n    score: number;\n}\n\nexport function findEditDistanceScore(a: number[], b: number[]): ScoredSuffix {\n    if (a.length === 0 || b.length === 0) {\n        return {score: a.length + b.length};\n    }\n\n    const matrix = Array.from({length: a.length}).map(() => Array.from({length: b.length}).map(() => 0));\n    for (let i = 0; i < a.length; i++) {\n        matrix[i][0] = i;\n    }\n\n    for (let i = 0; i < b.length; i++) {\n        matrix[0][i] = i;\n    }\n\n    for (let j = 0; j < b.length; j++) {\n        for (let i = 0; i < a.length; i++) {\n            matrix[i][j] = Math.min(\n                (i == 0 ? j : matrix[i - 1][j]) + 1,\n                (j == 0 ? i : matrix[i][j - 1]) + 1,\n                (i == 0 || j == 0 ? Math.max(i, j) : matrix[i - 1][j - 1]) + (a[i] == b[j] ? 0 : 1)\n            );\n        }\n    }\n\n    return {score: matrix[a.length - 1][b.length - 1]};\n}\n","export * from './tokenizer';\n","// This file is based on\n//    https://github.com/latitudegames/GPT-3-Encoder\n//    by AIDungeon\n// which is released under the MIT License:\n//\n// MIT License\n//\n// Copyright (c) 2020 AIDungeon\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\n// The original from https://github.com/latitudegames/GPT-3-Encoder\n// includes code which was modified from https://github.com/openai/gpt-2\n//\n// Important invariants about tokenization:\n// - Tokenization works by a first pass that splits the text into chunks using\n//   the regular expression `pat`.\n// - Each chunk is then split into tokens.\n// - All chunks' tokens are then concatenated to form the complete tokenization.\n// - Newlines appear in only three tokens: \"\\n\", \"\\n\\n\", \"\\n\"+nonbreaking space\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport {TextDecoder, TextEncoder} from 'util';\n\n/////\n// Helper functions\n/////\n\nconst range = (x: number, y: number) => {\n    const res = Array.from(Array(y).keys()).slice(x);\n    return res;\n};\n\nconst ord = (x: string) => {\n    return x.charCodeAt(0);\n};\n\nconst chr = (x: number) => {\n    return String.fromCharCode(x);\n};\n\nconst textDecoder = new TextDecoder('utf-8');\nconst decodeStr = (arr: number[]) => {\n    return textDecoder.decode(new Uint8Array(arr));\n};\n\nconst dictZip = (x: string[], y: number[]) => {\n    const result = new Map<string, number>();\n    x.forEach((_, i) => {\n        result.set(x[i], y[i]);\n    });\n    return result;\n};\n\nfunction bytes_to_unicode(map: Map<number, string>) {\n    const bs = range(ord('!'), ord('~') + 1).concat(range(ord('¡'), ord('¬') + 1), range(ord('®'), ord('ÿ') + 1));\n\n    let cs = bs.slice();\n    let n = 0;\n    for (let b = 0; b < 2 ** 8; b++) {\n        if (!bs.includes(b)) {\n            bs.push(b);\n            cs.push(2 ** 8 + n);\n            n = n + 1;\n        }\n    }\n\n    const cs_ = cs.map(x => chr(x));\n    for (let i = 0; i < bs.length; i++) {\n        map.set(bs[i], cs_[i]);\n    }\n}\n\nfunction get_char_pairs(word: string[]): Set<[string, string]> {\n    const pairs = new Set<[string, string]>();\n    let prev_char = word[0];\n    for (let i = 1; i < word.length; i++) {\n        const char = word[i];\n        pairs.add([prev_char, char]);\n        prev_char = char;\n    }\n    return pairs;\n}\n\nconst pat = /'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+/gu;\n\nexport interface Tokenizer {\n    /**\n     * Returns the tokenization of the input string as a list of integers\n     * representing tokens.\n     */\n    tokenize(text: string): Array<number>;\n\n    /**\n     * Returns the string representation of the tokens in `tokens`, given in integer\n     * representation.\n     *\n     * This is the functional inverse of `tokenize`.\n     */\n    detokenize(tokens: number[]): string;\n\n    /**\n     * Returns the tokenization of the input string as a list of strings.\n     *\n     * The concatenation of the output of this function is equal to the input.\n     */\n    tokenizeStrings(text: string): string[];\n\n    /**\n     * Return the length of `text` in number of tokens.\n     *\n     * @param {str} text - The input text\n     * @returns {number}\n     */\n    tokenLength(text: string): number;\n\n    /**\n     * Return a suffix of `text` which is `n` tokens long.\n     * If `text` is at most `n` tokens, return `text`.\n     *\n     * Note: This implementation does not attempt to return\n     * the longest possible suffix, only *some* suffix of at\n     * most `n` tokens.\n     *\n     * @param {string} text - The text from which to take\n     * @param {number} n - How many tokens to take\n     * @returns A suffix of `text`, as a `string`.\n     */\n    takeLastTokens(text: string, n: number): string;\n\n    /**\n     * Return a prefix of `text` which is `n` tokens long.\n     * If `text` is at most `n` tokens, return `text`.\n     *\n     * Note: This implementation does not attempt to return\n     * the longest possible prefix, only *some* prefix of at\n     * most `n` tokens.\n     *\n     * @param {string} text - The text from which to take\n     * @param {number} n - How many tokens to take\n     * @returns A prefix of `text`, as a `{ text: string, tokens: number[] }`.\n     */\n    takeFirstTokens(text: string, n: number): {text: string; tokens: number[]};\n\n    /**\n     * Return the longest suffix of `text` of complete lines and is at most\n     * `n` tokens long.\n     * @param {string} text - The text from which to take\n     * @param {number} n - How many tokens to take\n     */\n    takeLastLinesTokens(text: string, n: number): string;\n}\n\nexport enum TokenizerName {\n    cushman001 = 'cushman001',\n    cushman002 = 'cushman002',\n    mock = 'mock',\n}\n\nconst tokenizers = new Map<TokenizerName, Tokenizer>();\n\nexport function getTokenizer(name: TokenizerName = TokenizerName.cushman002): Tokenizer {\n    let tokenizer = tokenizers.get(name);\n    if (tokenizer !== undefined) {\n        return tokenizer;\n    }\n\n    if (name === TokenizerName.mock) {\n        tokenizer = new MockTokenizer();\n    } else {\n        tokenizer = new BPETokenizer(name);\n    }\n    tokenizers.set(name, tokenizer);\n    return tokenizer;\n}\n\nclass BPETokenizer implements Tokenizer {\n    private decoder = new Map<number, string>();\n    private encoder: Map<string, number>;\n    private bpe_ranks: Map<string, number>;\n    private byte_encoder = new Map<number, string>();\n    private byte_decoder = new Map<string, number>();\n    private cache = new Map();\n\n    private textEncoder = new TextEncoder();\n\n    constructor(name: Exclude<TokenizerName, TokenizerName.mock> = TokenizerName.cushman002) {\n        let VOCAB = '';\n        let ENCODER = '';\n        if (name === TokenizerName.cushman001) {\n            VOCAB = 'vocab_cushman001.bpe';\n            ENCODER = 'tokenizer_cushman001.json';\n        } else if (name === TokenizerName.cushman002) {\n            VOCAB = 'vocab_cushman002.bpe';\n            ENCODER = 'tokenizer_cushman002.json';\n        } else {\n            throw new Error(`Unknown tokenizer name: ${name}`);\n        }\n        const encoder_path = fs.readFileSync(path.resolve(__dirname, 'resources', name, ENCODER));\n        const encoder_json = JSON.parse(encoder_path.toString());\n        this.encoder = new Map(Object.entries(encoder_json));\n        for (let [key, value] of this.encoder) {\n            this.decoder.set(value, key);\n        }\n\n        const bpe_file = fs.readFileSync(path.resolve(__dirname, 'resources', name, VOCAB), 'utf-8');\n        const bpe_merges = bpe_file\n            .split('\\n')\n            .slice(1)\n            .filter(l => l.trim().length > 0);\n        this.bpe_ranks = dictZip(bpe_merges, range(0, bpe_merges.length));\n\n        bytes_to_unicode(this.byte_encoder);\n        this.byte_encoder.forEach((value, key, _) => {\n            this.byte_decoder.set(value, key);\n        });\n    }\n\n    private encodeStr = (str: string): number[] => {\n        return Array.from(this.textEncoder.encode(str));\n    };\n\n    private byteEncodeStr(s: string) {\n        return this.encodeStr(s).map(x => this.byte_encoder.get(x)!);\n    }\n\n    private bpe(chunk: string): number[] {\n        if (this.cache.has(chunk)) {\n            return this.cache.get(chunk);\n        }\n        let bytes = this.byteEncodeStr(chunk);\n        let pairs = get_char_pairs(bytes);\n        if (!pairs) {\n            return bytes.map(x => this.encoder.get(x)!);\n        }\n\n        while (true) {\n            const minPairs = new Map<Number, [string, string]>();\n            pairs.forEach(pair => {\n                const joined_pair = pair.join(' ');\n                const rank = this.bpe_ranks.get(joined_pair);\n                minPairs.set(rank === undefined || isNaN(rank) ? 10e10 : rank, pair);\n            });\n\n            const minPairsKeys = Array.from(minPairs.keys()).map(x => Number(x));\n\n            const bigram = minPairs.get(Math.min(...minPairsKeys));\n\n            if (!bigram || !this.bpe_ranks.has(bigram.join(' '))) {\n                break;\n            }\n\n            const first = bigram[0];\n            const second = bigram[1];\n            let new_bytes = [];\n            let i = 0;\n\n            while (i < bytes.length) {\n                const j = bytes.indexOf(first, i);\n                if (j === -1) {\n                    Array.prototype.push.apply(new_bytes, bytes.slice(i));\n                    break;\n                }\n                Array.prototype.push.apply(new_bytes, bytes.slice(i, j));\n                i = j;\n\n                if (bytes[i] === first && i < bytes.length - 1 && bytes[i + 1] === second) {\n                    new_bytes.push(first + second);\n                    i = i + 2;\n                } else {\n                    new_bytes.push(bytes[i]);\n                    i = i + 1;\n                }\n            }\n\n            bytes = new_bytes;\n            if (bytes.length === 1) {\n                break;\n            } else {\n                pairs = get_char_pairs(bytes);\n            }\n        }\n\n        const tokens = bytes.map(x => this.encoder.get(x)!);\n        this.cache.set(chunk, tokens);\n        return tokens;\n    }\n\n    tokenize(text: string): number[] {\n        let tokens: number[] = [];\n        const matches = Array.from(text.matchAll(pat)).map(x => x[0]);\n        for (let chunk of matches) {\n            const chunk_tokens = this.bpe(chunk);\n            Array.prototype.push.apply(tokens, chunk_tokens);\n        }\n        return tokens;\n    }\n\n    tokenLength(text: string): number {\n        return this.tokenize(text).length;\n    }\n\n    takeLastTokens(text: string, n: number): string {\n        if (n <= 0) return '';\n\n        // Find long enough suffix of text that has >= n + 2 tokens\n        // We add the 2 extra tokens to avoid the edge case where\n        // we cut at exactly n tokens and may get an odd tokenization.\n        const CHARS_PER_TOKENS_START = 4;\n        const CHARS_PER_TOKENS_ADD = 1;\n        let chars = Math.min(text.length, n * CHARS_PER_TOKENS_START); //First guess\n        let suffix = text.slice(-chars);\n        let suffixT = this.tokenize(suffix);\n        while (suffixT.length < n + 2 && chars < text.length) {\n            chars = Math.min(text.length, chars + n * CHARS_PER_TOKENS_ADD);\n            suffix = text.slice(-chars);\n            suffixT = this.tokenize(suffix);\n        }\n        if (suffixT.length < n) {\n            // text must be <= n tokens long\n            return text;\n        }\n        // Return last n tokens\n        suffixT = suffixT.slice(-n);\n        return this.detokenize(suffixT);\n    }\n\n    takeFirstTokens(text: string, n: number): {text: string; tokens: number[]} {\n        if (n <= 0) return {text: '', tokens: []};\n\n        // Find long enough suffix of text that has >= n + 2 tokens\n        // We add the 2 extra tokens to avoid the edge case where\n        // we cut at exactly n tokens and may get an odd tokenization.\n        const CHARS_PER_TOKENS_START = 4;\n        const CHARS_PER_TOKENS_ADD = 1;\n        let chars = Math.min(text.length, n * CHARS_PER_TOKENS_START); //First guess\n        let prefix = text.slice(0, chars);\n        let prefix_t = this.tokenize(prefix);\n        while (prefix_t.length < n + 2 && chars < text.length) {\n            chars = Math.min(text.length, chars + n * CHARS_PER_TOKENS_ADD);\n            prefix = text.slice(0, chars);\n            prefix_t = this.tokenize(prefix);\n        }\n        if (prefix_t.length < n) {\n            // text must be <= n tokens long\n            return {\n                text: text,\n                tokens: prefix_t,\n            };\n        }\n        // Return first n tokens\n        prefix_t = prefix_t.slice(0, n);\n        return {\n            text: this.detokenize(prefix_t),\n            tokens: prefix_t,\n        };\n    }\n\n    takeLastLinesTokens(text: string, n: number): string {\n        const suffix = this.takeLastTokens(text, n);\n        if (suffix.length === text.length || text[text.length - suffix.length - 1] === '\\n') {\n            // Edge case: We already took whole lines\n            return suffix;\n        }\n        let newline = suffix.indexOf('\\n');\n        return suffix.substring(newline + 1);\n    }\n\n    detokenize(tokens: number[]): string {\n        let text = tokens.map(x => this.decoder.get(x)).join('');\n        text = decodeStr(text.split('').map(x => this.byte_decoder.get(x)!));\n        return text;\n    }\n\n    tokenizeStrings(text: string): string[] {\n        const tokens = this.tokenize(text);\n        return tokens.map(token =>\n            decodeStr(\n                this.decoder\n                    .get(token)!\n                    .split('')\n                    .map(char => this.byte_decoder.get(char)!)\n            )\n        );\n    }\n}\n\nclass MockTokenizer implements Tokenizer {\n    private hash = (str: string) => {\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            const char = str.charCodeAt(i);\n            hash = (hash << 5) - hash + char;\n            hash &= hash & 0xffff;\n        }\n        return hash;\n    };\n\n    tokenize(text: string): number[] {\n        return this.tokenizeStrings(text).map(this.hash);\n    }\n    detokenize(tokens: number[]): string {\n        return tokens.map(token => token.toString()).join(' ');\n    }\n    tokenizeStrings(text: string): string[] {\n        return text.split(/\\b/);\n    }\n    tokenLength(text: string): number {\n        return this.tokenizeStrings(text).length;\n    }\n    takeLastTokens(text: string, n: number): string {\n        return this.tokenizeStrings(text).slice(-n).join('');\n    }\n    takeFirstTokens(text: string, n: number): {text: string; tokens: number[]} {\n        const tokens = this.tokenizeStrings(text).slice(0, n);\n        return {text: tokens.join(''), tokens: tokens.map(this.hash)};\n    }\n    takeLastLinesTokens(text: string, n: number): string {\n        const suffix = this.takeLastTokens(text, n);\n        if (suffix.length === text.length || text[text.length - suffix.length - 1] === '\\n') {\n            // Edge case: We already took whole lines\n            return suffix;\n        }\n        let newline = suffix.indexOf('\\n');\n        return suffix.substring(newline + 1);\n    }\n}\n","import {LineEndingOptions, PromptInfo} from './prompt';\nimport {Tokenizer} from './tokenization';\n\nexport enum PromptElementKind {\n    BeforeCursor = 'BeforeCursor',\n    AfterCursor = 'AfterCursor',\n    SimilarFile = 'SimilarFile',\n    RetrievalSnippet = 'RetrievalSnippet',\n    SymbolDefinition = 'SymbolDefinition',\n    ImportedFile = 'ImportedFile',\n    LanguageMarker = 'LanguageMarker',\n    PathMarker = 'PathMarker',\n}\n\ninterface PromptElement {\n    id: number;\n    kind: PromptElementKind;\n    priority: number;\n    text: string;\n    tokens: number;\n    requires: PromptElement[]; // Elements that must have been selected before this one\n    excludes: PromptElement[]; // Elements that will be skipped if this one is already selected\n    score: number; // score of the element if exist else set to -1\n}\n\n/**\n * Helper: given a list of indexed items and a target index, return an\n * item of the list with the smallest index that is greater than the target.\n */\nfunction getMinimalGreater<T extends {index: number}>(items: T[], targetIndex: number): T | undefined {\n    let bestIndex: number = Infinity;\n    let best: T | undefined = undefined;\n    for (const elem of items) {\n        if (elem.index > targetIndex && elem.index < bestIndex) {\n            best = elem;\n            bestIndex = elem.index;\n        }\n    }\n    return best;\n}\n\ninterface PromptBackgroundElement {\n    score: string;\n    length: number;\n}\n\nexport class PromptBackground {\n    used: Map<number, PromptBackgroundElement> = new Map<number, PromptBackgroundElement>();\n    unused: Map<number, PromptBackgroundElement> = new Map<number, PromptBackgroundElement>();\n\n    /**\n     * Register the decision to use a certain element in the prompt\n     * @param element The element\n     */\n    markUsed(element: PromptElement): void {\n        if (this.IsSnippet(element)) {\n            this.used.set(element.id, this.convert(element));\n        }\n    }\n\n    /**\n     * Undo the registration\n     * @param element The element\n     */\n    undoMarkUsed(element: PromptElement) {\n        if (this.IsSnippet(element)) {\n            this.used.delete(element.id);\n        }\n    }\n\n    /**\n     * Register the decision against using a certain element in the prompt\n     * @param element The element\n     */\n    markUnused(element: PromptElement): void {\n        if (this.IsSnippet(element)) {\n            this.unused.set(element.id, this.convert(element));\n        }\n    }\n\n    private convert(element: PromptElement): PromptBackgroundElement {\n        return {\n            score: element.score.toFixed(4),\n            length: element.text.length,\n        };\n    }\n\n    private IsSnippet(element: PromptElement): boolean {\n        return element.kind == PromptElementKind.SimilarFile || element.kind == PromptElementKind.RetrievalSnippet;\n    }\n}\n\nexport class PromptChoices {\n    used: Map<PromptElementKind, number> = new Map<PromptElementKind, number>();\n    unused: Map<PromptElementKind, number> = new Map<PromptElementKind, number>();\n\n    /**\n     * Counts how many elements of PromptElementKind were included.\n     * Useful for telemetry.\n     */\n    usedCounts: Map<PromptElementKind, number> = new Map<PromptElementKind, number>();\n    unusedCounts: Map<PromptElementKind, number> = new Map<PromptElementKind, number>();\n\n    /**\n     * Register the decision to use a certain element in the prompt\n     * @param element The element\n     */\n    markUsed(element: PromptElement): void {\n        this.used.set(element.kind, (this.used.get(element.kind) || 0) + element.tokens);\n        this.usedCounts.set(element.kind, (this.usedCounts.get(element.kind) || 0) + 1);\n    }\n\n    /**\n     * Undo the registration\n     * @param element The element\n     */\n    undoMarkUsed(element: PromptElement) {\n        this.used.set(element.kind, (this.used.get(element.kind) || 0) - element.tokens);\n        this.usedCounts.set(element.kind, (this.usedCounts.get(element.kind) || 0) - 1);\n    }\n\n    /**\n     * Register the decision against using a certain element in the prompt\n     * @param element The element\n     */\n    markUnused(element: PromptElement): void {\n        this.unused.set(element.kind, (this.unused.get(element.kind) || 0) + element.tokens);\n        this.unusedCounts.set(element.kind, (this.unusedCounts.get(element.kind) || 0) + 1);\n    }\n}\n\ninterface PromptElementRange {\n    kind: PromptElementKind;\n    start: number;\n    end: number;\n}\n\nexport class PromptElementRanges {\n    ranges = new Array<PromptElementRange>();\n\n    constructor(usedElements: {element: PromptElement; index: number}[]) {\n        /**\n         * Update ranges to reflect character indices of elements used in the prompt\n         */\n        let nextRangeStart: number = 0;\n        let previousKind: PromptElementKind | undefined = undefined;\n\n        for (const {element} of usedElements) {\n            if (element.text.length === 0) {\n                continue;\n            }\n            // We want to merge adjacent elements from BeforeCursor because each line is a separate element\n            if (previousKind === PromptElementKind.BeforeCursor && element.kind === PromptElementKind.BeforeCursor) {\n                this.ranges[this.ranges.length - 1].end += element.text.length;\n            } else {\n                this.ranges.push({\n                    kind: element.kind,\n                    start: nextRangeStart,\n                    end: nextRangeStart + element.text.length,\n                });\n            }\n\n            previousKind = element.kind;\n            nextRangeStart += element.text.length;\n        }\n    }\n}\n\nexport class PromptWishlist {\n    private content: PromptElement[] = [];\n    lineEndingOption: LineEndingOptions;\n\n    /**\n     * An object to keep track of a list of desired prompt elements,\n     * and assemble the prompt text from them.\n     * @param lineEndingOption The line ending option to use\n     */\n    constructor(private readonly tokenizer: Tokenizer, lineEndingOption: LineEndingOptions) {\n        this.tokenizer = tokenizer;\n        this.lineEndingOption = lineEndingOption;\n    }\n\n    getContent(): PromptElement[] {\n        return [...this.content];\n    }\n\n    private convertLineEndings(text: string) {\n        if (this.lineEndingOption === LineEndingOptions.ConvertToUnix) {\n            text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n        }\n        return text;\n    }\n\n    /**\n     * Create a new {@link PromptElement} and add it to the wishlist\n     * @param text The content of the element\n     * @param kind The {@link PromptElementKind} each line will have.\n     * @param priority A number representing the priority (larger means higher).\n     * Priorities can be managed with a {@link Priorities} object.\n     * @param tokens The number of tokens used by the element if tokenzied standalone;\n     * will be computed if not supplied.\n     * @param score The score of the prompt element, default to -1 if not supplied\n     */\n    append(\n        text: string,\n        kind: PromptElementKind,\n        priority: number,\n        tokens: number = this.tokenizer.tokenLength(text),\n        score: number = NaN\n    ): number {\n        text = this.convertLineEndings(text);\n        // make new id\n        const id = this.content.length;\n        this.content.push({id, text, kind, priority, tokens, requires: [], excludes: [], score: score});\n        return id;\n    }\n\n    /**\n     * Append each line of the text as {@link PromptElement} to the wishlist,\n     * such that earlier lines depend on later ones.\n     * @param text The content of the text\n     * @param kind The {@link PromptElementKind} each line will have.\n     * @param priority A number representing the priority (larger means higher) all lines will have.\n     * Since equal priorities are tiebreaked by the order of the lines,\n     * later lines will have a better chance to get into the prompt.\n     * Priorities can be managed with a {@link Priorities} object.\n     */\n    appendLineForLine(text: string, kind: PromptElementKind, priority: number): number[] {\n        text = this.convertLineEndings(text);\n        const rawLines = text.split('\\n');\n        // make sure the lines are \"\\n\"-ended\n        for (let i = 0; i < rawLines.length - 1; i++) {\n            rawLines[i] += '\\n';\n        }\n        const lines: string[] = [];\n        rawLines.forEach((line, i) => {\n            if (line === '\\n' && lines.length > 0 && !lines[lines.length - 1].endsWith('\\n\\n')) {\n                lines[lines.length - 1] += '\\n';\n            } else {\n                lines.push(line);\n            }\n        });\n        const returns: number[] = [];\n        lines.forEach((line, i) => {\n            if (line !== '') {\n                // note that is always true for i < lines.length - 1\n                returns.push(this.append(line, kind, priority));\n                // let earlier lines depend on later ones\n                if (i > 0) {\n                    this.content[this.content.length - 2].requires = [this.content[this.content.length - 1]];\n                }\n            }\n        });\n        return returns;\n    }\n\n    /**\n     * Adds a dependency of the first to the second element,\n     * addressed by ID\n     */\n    require(dependentId: number, dependeeId: number) {\n        const dependent = this.content.find(e => e.id === dependentId);\n        const dependee = this.content.find(e => e.id === dependeeId);\n        if (dependent && dependee) {\n            dependent.requires.push(dependee);\n        }\n    }\n\n    /**\n     * Adds an exclusion:\n     * if the first element is present, the second element won't be added anymore\n     * addressed by ID\n     */\n    exclude(excludingId: number, excludedId: number) {\n        const excluding = this.content.find(e => e.id === excludingId);\n        const excluded = this.content.find(e => e.id === excludedId);\n        if (excluding && excluded) {\n            excluding.excludes.push(excluded);\n        }\n    }\n\n    /**\n     * Return a PromptInfo describing the prompt which _fulfills_ the wishlist:\n     *\n     * That means it has the following properties:\n     * 1. the token length does not exceed maxPromptLength\n     * 2. the order of the elements is as described in the wishlist\n     * 3. pairs of elements such that the higher priority one excludes the lower will not both be selected\n     * 4. elements that depend on another element will only be selected if the other one has higher priority and is selected\n     *\n     * Under all such subsets of the wishlist, it is maximal in the ordering where\n     * set A < set B if there is an element e such that\n     * * e in B and not in A\n     * * B and A do not differ in elements of higher priority than e\n     * * B and A do not differ in elements of equal priority but later position in the wishlist than e\n     *\n     * Implementation note: the condition in 4 that the dependee has higher priority is owing\n     * to the algorithm implementing the wish fulfillment and may either be changed, or\n     * we might remove the possibility to depend on a lower priority element altogether.\n     *\n     * @param maxPromptLength The maximum allowed prompt length in tokens\n     * @returns A {@link PromptInfo} describing the prompt arrived at following the rules given above\n     */\n    fulfill(maxPromptLength: number): PromptInfo {\n        // keep a tally of the choices made\n        const tallyOfChoices = new PromptChoices();\n        const promptBackground = new PromptBackground();\n        // to avoid ties, move the priority of tied elements\n\n        // want to add the highest priorities first,\n        // but the final text should be in the order of the array\n        // to keep track of that, add an index to each element of content\n        const indexedContent = this.content.map((e, i) => {\n            return {element: e, index: i};\n        });\n\n        // sorted by priority -- highest first, in case of a tie: latest first\n        indexedContent.sort((a, b) => {\n            if (a.element.priority === b.element.priority) {\n                return b.index - a.index;\n            }\n            return b.element.priority - a.element.priority;\n        });\n\n        const idsThatHaveAlreadyBeenAdded: Set<number> = new Set<number>();\n        const idsConflictingWithAlreadyAddedIds: Set<number> = new Set<number>();\n        let budgetBreakingElement: {element: PromptElement; index: number} | undefined; // use this to include the first element that breaks the budget\n        const remainingContent: {element: PromptElement; index: number}[] = [];\n        let remainingBudget = maxPromptLength;\n        indexedContent.forEach(e => {\n            const element = e.element;\n            const index = e.index;\n            // we need to have budget, meet the requirements and have not\n            // excluded the element\n            if (\n                remainingBudget >= 0 &&\n                (remainingBudget > 0 || budgetBreakingElement === undefined) &&\n                element.requires.every(r => idsThatHaveAlreadyBeenAdded.has(r.id)) &&\n                !idsConflictingWithAlreadyAddedIds.has(element.id)\n            ) {\n                let budgetUse = element.tokens;\n                // taking care of a bizarre edge case: double new line is a single token\n                // _except_ if the following line starts with non-whitespace\n                const probableNextElem = getMinimalGreater(remainingContent, index)?.element;\n                if (element.text.endsWith('\\n\\n') && probableNextElem && !probableNextElem.text.match(/^\\s/)) {\n                    budgetUse++;\n                }\n                if (remainingBudget >= budgetUse) {\n                    remainingBudget -= budgetUse;\n                    idsThatHaveAlreadyBeenAdded.add(element.id);\n                    element.excludes.forEach(e => idsConflictingWithAlreadyAddedIds.add(e.id));\n                    tallyOfChoices.markUsed(element);\n                    promptBackground.markUsed(element);\n                    remainingContent.push(e);\n                } else {\n                    // remember the element that broke the budget -- we may try whether it can still be included\n                    if (budgetBreakingElement === undefined) {\n                        budgetBreakingElement = e;\n                    } else {\n                        tallyOfChoices.markUnused(e.element);\n                        promptBackground.markUnused(e.element);\n                    }\n                }\n            } else {\n                tallyOfChoices.markUnused(element);\n                promptBackground.markUnused(element);\n            }\n        });\n\n        // The budgeting logic for indexedContent is an approximation that can be\n        // off slightly if the wishlist's order is very different from its priorities.\n        // This may be due to:\n        // * partial lines added together\n        // * double new lines being a single token iff the next line does not start with whitespace\n        //\n        // We need to make sure that on no account can the prompt be too long.\n        // Also, we want to test whether one more element would still fit.\n\n        // Check that we do not go over:\n        remainingContent.sort((a, b) => a.index - b.index);\n        let prompt = remainingContent.reduce((a, b) => a + b.element.text, '');\n        let promptLength = this.tokenizer.tokenLength(prompt);\n        while (promptLength > maxPromptLength) {\n            // take the least priority element and remove it after all\n            remainingContent.sort((a, b) => {\n                // Sort by least priority last, then by lowest index last\n                if (b.element.priority === a.element.priority) {\n                    return b.index - a.index;\n                } else {\n                    return b.element.priority - a.element.priority;\n                }\n            });\n            const removeAfterAll = remainingContent.pop();\n            if (removeAfterAll) {\n                tallyOfChoices.undoMarkUsed(removeAfterAll.element);\n                tallyOfChoices.markUnused(removeAfterAll.element);\n                promptBackground.undoMarkUsed(removeAfterAll.element);\n                promptBackground.markUnused(removeAfterAll.element);\n                // Do not want the headaches that come with removing something\n                // and adding it back again\n                if (budgetBreakingElement !== undefined) {\n                    // We haven't yet marked the budget breaking element as unused\n                    tallyOfChoices.markUnused(budgetBreakingElement.element);\n                    promptBackground.markUnused(budgetBreakingElement.element);\n                }\n                budgetBreakingElement = undefined;\n            }\n            remainingContent.sort((a, b) => a.index - b.index);\n            prompt = remainingContent.reduce((a, b) => a + b.element.text, '');\n            promptLength = this.tokenizer.tokenLength(prompt);\n        }\n\n        // Conversely, check whether we can get in more content\n        // copy the remainingContent:\n        const extendedContent = [...remainingContent];\n        if (budgetBreakingElement !== undefined) {\n            extendedContent.push(budgetBreakingElement);\n            extendedContent.sort((a, b) => a.index - b.index);\n            const prompt = extendedContent.reduce((a, b) => a + b.element.text, '');\n            const promptLength = this.tokenizer.tokenLength(prompt);\n            if (promptLength <= maxPromptLength) {\n                // we can fit more content\n                tallyOfChoices.markUsed(budgetBreakingElement.element);\n                promptBackground.markUsed(budgetBreakingElement.element);\n\n                const promptElementRanges = new PromptElementRanges(extendedContent);\n                return {\n                    prefix: prompt,\n                    suffix: '',\n                    prefixLength: promptLength,\n                    suffixLength: 0,\n                    promptChoices: tallyOfChoices,\n                    promptBackground: promptBackground,\n                    promptElementRanges: promptElementRanges,\n                };\n            } else {\n                // we can't use it\n                tallyOfChoices.markUnused(budgetBreakingElement.element);\n                promptBackground.markUnused(budgetBreakingElement.element);\n            }\n        }\n\n        const promptElementRanges = new PromptElementRanges(remainingContent);\n        return {\n            prefix: prompt,\n            suffix: '',\n            prefixLength: promptLength,\n            suffixLength: 0,\n            promptChoices: tallyOfChoices,\n            promptBackground: promptBackground,\n            promptElementRanges: promptElementRanges,\n        };\n    }\n}\n\n/**\n * A class to keep track of the choices made in a prompt\n * Implementation note:\n * This is fine for now, but repeated calls to justAbove, justBelow, etc.\n * will run into precision problems for >4000 or so priorities.\n */\nexport class Priorities {\n    registeredPriorities = [0, 1];\n    static TOP = 1;\n    static BOTTOM = 0;\n    /**\n     * Register a new priority\n     * @param priority The numerical value\n     * @returns\n     */\n    register(priority: number) {\n        if (priority > Priorities.TOP || priority < Priorities.BOTTOM) {\n            throw new Error('Priority must be between 0 and 1');\n        }\n        this.registeredPriorities.push(priority);\n        return priority;\n    }\n\n    /**\n     * Registers a new priority above the given priorities,\n     * but not above any other registered priority\n     * @param priorities\n     * @returns\n     */\n    justAbove(...priorities: number[]): number {\n        const priority = Math.max(...priorities);\n        const nearestNeighbor = Math.min(...this.registeredPriorities.filter(p => p > priority));\n        return this.register((nearestNeighbor + priority) / 2);\n    }\n\n    /**\n     * Registers a new priority below the given priorities,\n     * but not below any other registered priority\n     * @param priorities\n     * @returns\n     */\n    justBelow(...priorities: number[]): number {\n        const priority = Math.min(...priorities);\n        const nearestNeighbor = Math.max(...this.registeredPriorities.filter(p => p < priority));\n        return this.register((nearestNeighbor + priority) / 2);\n    }\n\n    /**\n     * Verifies that the two priorities are adjacent in the list of priorities,\n     * and returns one in the middle.\n     */\n    between(lower: number, higher: number): number {\n        if (\n            this.registeredPriorities.some(p => p > lower && p < higher) ||\n            !(this.registeredPriorities.includes(lower) && this.registeredPriorities.includes(higher))\n        ) {\n            throw new Error('Priorities must be adjacent in the list of priorities');\n        }\n        return this.register((lower + higher) / 2);\n    }\n}\n","var Module=void 0!==Module?Module:{},TreeSitter=function(){var initPromise,document=\"object\"==typeof window?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error(\"cannot construct a Parser before calling `init()`\")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise((resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram=\"./this.program\",quit_=(e,t)=>{throw t},ENVIRONMENT_IS_WEB=\"object\"==typeof window,ENVIRONMENT_IS_WORKER=\"function\"==typeof importScripts,ENVIRONMENT_IS_NODE=\"object\"==typeof process&&\"object\"==typeof process.versions&&\"string\"==typeof process.versions.node,scriptDirectory=\"\",read_,readAsync,readBinary,setWindowTitle;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}function logExceptionOnExit(e){if(e instanceof ExitStatus)return;err(\"exiting due to exception: \"+e)}if(ENVIRONMENT_IS_NODE){var fs=require(\"fs\"),nodePath=require(\"path\");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+\"/\":__dirname+\"/\",read_=(e,t)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFileSync(e,t?void 0:\"utf8\")),readBinary=e=>{var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),t},readAsync=(e,t,r)=>{e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFile(e,(function(e,_){e?r(e):t(_.buffer)}))},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\\\/g,\"/\")),arguments_=process.argv.slice(2),\"undefined\"!=typeof module&&(module.exports=Module),quit_=(e,t)=>{if(keepRuntimeAlive())throw process.exitCode=e,t;logExceptionOnExit(t),process.exit(e)},Module.inspect=function(){return\"[Emscripten Module object]\"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:void 0!==document&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf(\"blob:\")?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1):\"\",read_=e=>{var t=new XMLHttpRequest;return t.open(\"GET\",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open(\"GET\",e,!1),t.responseType=\"arraybuffer\",t.send(null),new Uint8Array(t.response)}),readAsync=(e,t,r)=>{var _=new XMLHttpRequest;_.open(\"GET\",e,!0),_.responseType=\"arraybuffer\",_.onload=()=>{200==_.status||0==_.status&&_.response?t(_.response):r()},_.onerror=r,_.send(null)},setWindowTitle=e=>document.title=e);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;\"object\"!=typeof WebAssembly&&abort(\"no native wasm support detected\");var ABORT=!1,EXITSTATUS,UTF8Decoder=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf8\"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(e,t,r){for(var _=t+r,n=t;e[n]&&!(n>=_);)++n;if(n-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,n));for(var s=\"\";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192!=(224&a)){var i=63&e[t++];if((a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])<65536)s+=String.fromCharCode(a);else{var l=a-65536;s+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else s+=String.fromCharCode((31&a)<<6|o)}else s+=String.fromCharCode(a)}return s}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):\"\"}function stringToUTF8Array(e,t,r,_){if(!(_>0))return 0;for(var n=r,s=r+_-1,a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a);if(o<=127){if(r>=s)break;t[r++]=o}else if(o<=2047){if(r+1>=s)break;t[r++]=192|o>>6,t[r++]=128|63&o}else if(o<=65535){if(r+2>=s)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|63&o}else{if(r+3>=s)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}}return t[r]=0,r-n}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var _=e.charCodeAt(r);_<=127?t++:_<=2047?t+=2:_>=55296&&_<=57343?(t+=4,++r):t+=3}return t}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:\"anyfunc\"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(\"function\"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(\"function\"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort&&Module.onAbort(e),err(e=\"Aborted(\"+e+\")\"),ABORT=!0,EXITSTATUS=1,e+=\". Build with -sASSERTIONS for more info.\",new WebAssembly.RuntimeError(e)}var dataURIPrefix=\"data:application/octet-stream;base64,\",wasmBinaryFile,tempDouble,tempI64;function isDataURI(e){return e.startsWith(dataURIPrefix)}function isFileURI(e){return e.startsWith(\"file://\")}function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw\"both async and sync fetching of the wasm failed\"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(\"function\"==typeof fetch&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then((function(e){if(!e.ok)throw\"failed to load wasm binary file at '\"+wasmBinaryFile+\"'\";return e.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}));if(readAsync)return new Promise((function(e,t){readAsync(wasmBinaryFile,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var e={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,\"GOT.mem\":new Proxy(asmLibraryArg,GOTHandler),\"GOT.func\":new Proxy(asmLibraryArg,GOTHandler)};function t(e,t){var r=e.exports;r=relocateExports(r,1024);var _=getDylinkMetadata(t);_.neededDynlibs&&(dynamicLibraries=_.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(r,\"main\"),Module.asm=r,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency(\"wasm-instantiate\")}function r(e){t(e.instance,e.module)}function _(t){return getBinaryPromise().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){err(\"failed to asynchronously prepare wasm: \"+e),abort(e)}))}if(addRunDependency(\"wasm-instantiate\"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err(\"Module.instantiateWasm callback failed with error: \"+e),!1}return wasmBinary||\"function\"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||\"function\"!=typeof fetch?_(r):fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return err(\"wasm streaming compile failed: \"+e),err(\"falling back to ArrayBuffer instantiation\"),_(r)}))})),{}}wasmBinaryFile=\"tree-sitter.wasm\",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(e){this.name=\"ExitStatus\",this.message=\"Program terminated with exit(\"+e+\")\",this.status=e}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(e,t){var r=GOT[t];return r||(r=GOT[t]=new WebAssembly.Global({value:\"i32\",mutable:!0})),CurrentModuleWeakSymbols.has(t)||(r.required=!0),r}};function callRuntimeCallbacks(e){for(;e.length>0;)e.shift()(Module)}function getDylinkMetadata(e){var t=0,r=0;function _(){for(var r=0,_=1;;){var n=e[t++];if(r+=(127&n)*_,_*=128,!(128&n))break}return r}function n(){var r=_();return UTF8ArrayToString(e,(t+=r)-r,r)}function s(e,t){if(e)throw new Error(t)}var a=\"dylink.0\";if(e instanceof WebAssembly.Module){var o=WebAssembly.Module.customSections(e,a);0===o.length&&(a=\"dylink\",o=WebAssembly.Module.customSections(e,a)),s(0===o.length,\"need dylink section\"),r=(e=new Uint8Array(o[0])).length}else{s(!(1836278016==new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]),\"need to see wasm magic number\"),s(0!==e[8],\"need the dylink section to be first\"),t=9;var i=_();r=t+i,a=n()}var l={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(\"dylink\"==a){l.memorySize=_(),l.memoryAlign=_(),l.tableSize=_(),l.tableAlign=_();for(var u=_(),d=0;d<u;++d){var c=n();l.neededDynlibs.push(c)}}else{s(\"dylink.0\"!==a);for(;t<r;){var m=e[t++],p=_();if(1===m)l.memorySize=_(),l.memoryAlign=_(),l.tableSize=_(),l.tableAlign=_();else if(2===m)for(u=_(),d=0;d<u;++d)c=n(),l.neededDynlibs.push(c);else if(3===m)for(var f=_();f--;){var h=n();256&_()&&l.tlsExports.add(h)}else if(4===m)for(f=_();f--;){n(),h=n();1==(3&_())&&l.weakImports.add(h)}else t+=p}}return l}function getValue(e,t=\"i8\"){switch(t.endsWith(\"*\")&&(t=\"*\"),t){case\"i1\":case\"i8\":return HEAP8[e>>0];case\"i16\":return HEAP16[e>>1];case\"i32\":case\"i64\":return HEAP32[e>>2];case\"float\":return HEAPF32[e>>2];case\"double\":return HEAPF64[e>>3];case\"*\":return HEAPU32[e>>2];default:abort(\"invalid type for getValue: \"+t)}return null}function asmjsMangle(e){return 0==e.indexOf(\"dynCall_\")||[\"stackAlloc\",\"stackSave\",\"stackRestore\",\"getTempRet0\",\"setTempRet0\"].includes(e)?e:\"_\"+e}function mergeLibSymbols(e,t){for(var r in e)if(e.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=e[r]);var _=asmjsMangle(r);Module.hasOwnProperty(_)||(Module[_]=e[r]),\"__main_argc_argv\"==r&&(Module._main=e[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(e,t,r){var _=Module[\"dynCall_\"+e];return r&&r.length?_.apply(null,[t].concat(r)):_.call(null,t)}var wasmTableMirror=[];function getWasmTableEntry(e){var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t}function dynCall(e,t,r){return e.includes(\"j\")?dynCallLegacy(e,t,r):getWasmTableEntry(t).apply(null,r)}function createInvokeFunction(e){return function(){var t=stackSave();try{return dynCall(e,arguments[0],Array.prototype.slice.call(arguments,1))}catch(e){if(stackRestore(t),e!==e+0)throw e;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(e,t){return HEAPU8.fill(0,e,e+t),e}function getMemory(e){if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,r=t+e+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,t}function isInternalSym(e){return[\"__cpp_exception\",\"__c_longjmp\",\"__wasm_apply_data_relocs\",\"__dso_handle\",\"__tls_size\",\"__tls_align\",\"__set_stack_limits\",\"_emscripten_tls_init\",\"__wasm_init_tls\",\"__wasm_call_ctors\",\"__start_em_asm\",\"__stop_em_asm\"].includes(e)}function uleb128Encode(e,t){e<128?t.push(e):t.push(e%128|128,e>>7)}function sigToWasmTypes(e){for(var t={i:\"i32\",j:\"i32\",f:\"f32\",d:\"f64\",p:\"i32\"},r={parameters:[],results:\"v\"==e[0]?[]:[t[e[0]]]},_=1;_<e.length;++_)r.parameters.push(t[e[_]]),\"j\"===e[_]&&r.parameters.push(\"i32\");return r}function generateFuncType(e,t){var r=e.slice(0,1),_=e.slice(1),n={i:127,p:127,j:126,f:125,d:124};t.push(96),uleb128Encode(_.length,t);for(var s=0;s<_.length;++s)t.push(n[_[s]]);\"v\"==r?t.push(0):t.push(1,n[r])}function convertJsFunctionToWasm(e,t){if(\"function\"==typeof WebAssembly.Function)return new WebAssembly.Function(sigToWasmTypes(t),e);var r=[1];generateFuncType(t,r);var _=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,_),_.push.apply(_,r),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var n=new WebAssembly.Module(new Uint8Array(_));return new WebAssembly.Instance(n,{e:{f:e}}).exports.f}function updateTableMap(e,t){if(functionsInTableMap)for(var r=e;r<e+t;r++){var _=getWasmTableEntry(r);_&&functionsInTableMap.set(_,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\"}return wasmTable.length-1}function setWasmTableEntry(e,t){wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e)}function addFunction(e,t){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(e))return functionsInTableMap.get(e);var r=getEmptyTableSlot();try{setWasmTableEntry(r,e)}catch(_){if(!(_ instanceof TypeError))throw _;setWasmTableEntry(r,convertJsFunctionToWasm(e,t))}return functionsInTableMap.set(e,r),r}function updateGOT(e,t){for(var r in e)if(!isInternalSym(r)){var _=e[r];r.startsWith(\"orig$\")&&(r=r.split(\"$\")[1],t=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:\"i32\",mutable:!0})),(t||0==GOT[r].value)&&(\"function\"==typeof _?GOT[r].value=addFunction(_):\"number\"==typeof _?GOT[r].value=_:err(\"unhandled export type for `\"+r+\"`: \"+typeof _))}}function relocateExports(e,t,r){var _={};for(var n in e){var s=e[n];\"object\"==typeof s&&(s=s.value),\"number\"==typeof s&&(s+=t),_[n]=s}return updateGOT(_,r),_}function resolveGlobalSymbol(e,t){var r;return t&&(r=asmLibraryArg[\"orig$\"+e]),r||(r=asmLibraryArg[e])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(e)]),!r&&e.startsWith(\"invoke_\")&&(r=createInvokeFunction(e.split(\"_\")[1])),r}function alignMemory(e,t){return Math.ceil(e/t)*t}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e,!1);return t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(e,t){switch(t){case\"__memory_base\":return memoryBase;case\"__table_base\":return tableBase}if(t in asmLibraryArg)return asmLibraryArg[t];var r;t in e||(e[t]=function(){return r||(r=resolveSymbol(t)),r.apply(null,arguments)});return e[t]}},proxy=new Proxy({},proxyHandler),info={\"GOT.mem\":new Proxy({},GOTHandler),\"GOT.func\":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&-1!=body.indexOf(\"$\"+arity);arity++)args.push(\"$\"+arity);args=args.join(\",\");var func=\"(\"+args+\" ) => { \"+body+\"};\";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),\"__start_em_asm\"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then((function(e){return postInstantiation(e.instance)}))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce((function(e,t){return e.then((function(){return loadDynamicLibrary(t,flags)}))}),Promise.resolve()).then((function(){return loadModule()})):(metadata.neededDynlibs.forEach((function(e){loadDynamicLibrary(e,flags)})),loadModule())}function loadDynamicLibrary(e,t,r){t=t||{global:!0,nodelete:!0};var _=LDSO.loadedLibsByName[e];if(_)return t.global&&!_.global&&(_.global=!0,\"loading\"!==_.module&&mergeLibSymbols(_.module,e)),t.nodelete&&_.refcount!==1/0&&(_.refcount=1/0),_.refcount++,r&&(LDSO.loadedLibsByHandle[r]=_),!t.loadAsync||Promise.resolve(!0);function n(e){if(t.fs&&t.fs.findObject(e)){var r=t.fs.readFile(e,{encoding:\"binary\"});return r instanceof Uint8Array||(r=new Uint8Array(r)),t.loadAsync?Promise.resolve(r):r}if(e=locateFile(e),t.loadAsync)return new Promise((function(t,r){readAsync(e,(e=>t(new Uint8Array(e))),r)}));if(!readBinary)throw new Error(e+\": file not found, and synchronous loading of external files is not available\");return readBinary(e)}function s(){if(\"undefined\"!=typeof preloadedWasm&&preloadedWasm[e]){var _=preloadedWasm[e];return t.loadAsync?Promise.resolve(_):_}return t.loadAsync?n(e).then((function(e){return loadWebAssemblyModule(e,t,r)})):loadWebAssemblyModule(n(e),t,r)}function a(t){_.global&&mergeLibSymbols(t,e),_.module=t}return _={refcount:t.nodelete?1/0:1,name:e,module:\"loading\",global:t.global},LDSO.loadedLibsByName[e]=_,r&&(LDSO.loadedLibsByHandle[r]=_),t.loadAsync?s().then((function(e){return a(e),!0})):(a(s()),!0)}function reportUndefinedSymbols(){for(var e in GOT)if(0==GOT[e].value){var t=resolveGlobalSymbol(e,!0);if(!t&&!GOT[e].required)continue;if(\"function\"==typeof t)GOT[e].value=addFunction(t,t.sig);else{if(\"number\"!=typeof t)throw new Error(\"bad export type for `\"+e+\"`: \"+typeof t);GOT[e].value=t}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency(\"preloadDylibs\"),dynamicLibraries.reduce((function(e,t){return e.then((function(){return loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})}))}),Promise.resolve()).then((function(){reportUndefinedSymbols(),removeRunDependency(\"preloadDylibs\")}))):reportUndefinedSymbols()}function setValue(e,t,r=\"i8\"){switch(r.endsWith(\"*\")&&(r=\"*\"),r){case\"i1\":case\"i8\":HEAP8[e>>0]=t;break;case\"i16\":HEAP16[e>>1]=t;break;case\"i32\":HEAP32[e>>2]=t;break;case\"i64\":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case\"float\":HEAPF32[e>>2]=t;break;case\"double\":HEAPF64[e>>3]=t;break;case\"*\":HEAPU32[e>>2]=t;break;default:abort(\"invalid type for setValue: \"+r)}}var ___memory_base=new WebAssembly.Global({value:\"i32\",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:\"i32\",mutable:!0},78144),___table_base=new WebAssembly.Global({value:\"i32\",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort(\"\")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(e,t,r){HEAPU8.copyWithin(e,t,t+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){var t=HEAPU8.length;e>>>=0;var r=getHeapMax();if(e>r)return!1;for(var _=1;_<=4;_*=2){var n=t*(1+.2/_);if(n=Math.min(n,e+100663296),emscripten_realloc_buffer(Math.min(r,(s=Math.max(e,n))+((a=65536)-s%a)%a)))return!0}var s,a;return!1}__emscripten_get_now_is_monotonic.sig=\"i\",Module._abort=_abort,_abort.sig=\"v\",_emscripten_date_now.sig=\"d\",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig=\"d\",_emscripten_memcpy_big.sig=\"vppp\",_emscripten_resize_heap.sig=\"ip\";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(PATH.isAbs(t))return t;var _;-100===e?_=FS.cwd():_=SYSCALLS.getStreamFromFD(e).path;if(0==t.length){if(!r)throw new FS.ErrnoError(44);return _}return PATH.join2(_,t)},doStat:function(e,t,r){try{var _=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}HEAP32[r>>2]=_.dev,HEAP32[r+8>>2]=_.ino,HEAP32[r+12>>2]=_.mode,HEAPU32[r+16>>2]=_.nlink,HEAP32[r+20>>2]=_.uid,HEAP32[r+24>>2]=_.gid,HEAP32[r+28>>2]=_.rdev,tempI64=[_.size>>>0,(tempDouble=_.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=_.blocks;var n=_.atime.getTime(),s=_.mtime.getTime(),a=_.ctime.getTime();return tempI64=[Math.floor(n/1e3)>>>0,(tempDouble=Math.floor(n/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=n%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=s%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[_.ino>>>0,(tempDouble=_.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(e,t,r,_,n){if(!FS.isFile(t.node.mode))throw new FS.ErrnoError(43);if(2&_)return 0;var s=HEAPU8.slice(e,e+r);FS.msync(t,s,n,r,_)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t}};function _proc_exit(e){EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e))}function exitJS(e,t){EXITSTATUS=e,_proc_exit(e)}_proc_exit.sig=\"vi\";var _exit=exitJS;function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){if(\"undefined\"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function convertI32PairToI53Checked(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN}function _fd_seek(e,t,r,_,n){try{var s=convertI32PairToI53Checked(t,r);if(isNaN(s))return 61;var a=SYSCALLS.getStreamFromFD(e);return FS.llseek(a,s,_),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n>>2]=tempI64[0],HEAP32[n+4>>2]=tempI64[1],a.getdents&&0===s&&0===_&&(a.getdents=null),0}catch(e){if(\"undefined\"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function doWritev(e,t,r,_){for(var n=0,s=0;s<r;s++){var a=HEAPU32[t>>2],o=HEAPU32[t+4>>2];t+=8;var i=FS.write(e,HEAP8,a,o,_);if(i<0)return-1;n+=i,void 0!==_&&(_+=i)}return n}function _fd_write(e,t,r,_){try{var n=doWritev(SYSCALLS.getStreamFromFD(e),t,r);return HEAPU32[_>>2]=n,0}catch(e){if(\"undefined\"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function _tree_sitter_log_callback(e,t){if(currentLogCallback){const r=UTF8ToString(t);currentLogCallback(r,0!==e)}}function _tree_sitter_parse_callback(e,t,r,_,n){var s=currentParseCallback(t,{row:r,column:_});\"string\"==typeof s?(setValue(n,s.length,\"i32\"),stringToUTF16(s,e,10240)):setValue(n,0,\"i32\")}function handleException(e){if(e instanceof ExitStatus||\"unwind\"==e)return EXITSTATUS;quit_(1,e)}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,r=stackAlloc(t);return stringToUTF8Array(e,HEAP8,r,t),r}function stringToUTF16(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var _=t,n=(r-=2)<2*e.length?r/2:e.length,s=0;s<n;++s){var a=e.charCodeAt(s);HEAP16[t>>1]=a,t+=2}return HEAP16[t>>1]=0,t-_}function AsciiToString(e){for(var t=\"\";;){var r=HEAPU8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}_exit.sig=\"vi\",_fd_close.sig=\"ii\",_fd_seek.sig=\"iijip\",_fd_write.sig=\"iippp\";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(e){var t=Module._main;if(t){(e=e||[]).unshift(thisProgram);var r=e.length,_=stackAlloc(4*(r+1)),n=_>>2;e.forEach((e=>{HEAP32[n++]=allocateUTF8OnStack(e)})),HEAP32[n]=0;try{var s=t(r,_);return exitJS(s,!0),s}catch(e){return handleException(e)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)};var dylibsLoaded=!1;function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()))}e=e||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus(\"Running...\"),setTimeout((function(){setTimeout((function(){Module.setStatus(\"\")}),1),t()}),1)):t()))}if(Module.preInit)for(\"function\"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();const C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,\"i32\"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,\"i32\"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let t;if(e){if(e.constructor!==Language)throw new Error(\"Argument must be a Language\");{t=e[0];const r=C._ts_language_version(t);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else t=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],t),this}getLanguage(){return this.language}parse(e,t,r){if(\"string\"==typeof e)currentParseCallback=(t,r,_)=>e.slice(t,_);else{if(\"function\"!=typeof e)throw new Error(\"Argument must be a string or a function\");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let _=0,n=0;if(r&&r.includedRanges){_=r.includedRanges.length,n=C._calloc(_,SIZE_OF_RANGE);let e=n;for(let t=0;t<_;t++)marshalRange(e,r.includedRanges[t]),e+=SIZE_OF_RANGE}const s=C._ts_parser_parse_wasm(this[0],this[1],t?t[0]:0,n,_);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error(\"Parsing failed\");const a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(\"function\"!=typeof e)throw new Error(\"Logger callback must be a function\")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,t,r,_){assertInternal(e),this[0]=t,this.language=r,this.textCallback=_}copy(){const e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError(\"Argument must be a Tree\");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);const t=getValue(TRANSFER_BUFFER,\"i32\"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\"),_=new Array(t);if(t>0){let e=r;for(let r=0;r<t;r++)_[r]=unmarshalRange(e),e+=SIZE_OF_RANGE;C._free(r)}return _}}class Node{constructor(e,t){assertInternal(e),this.tree=t}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||\"ERROR\"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),1===C._ts_node_is_named_wasm(this.tree[0])}hasError(){return marshalNode(this),1===C._ts_node_has_error_wasm(this.tree[0])}hasChanges(){return marshalNode(this),1===C._ts_node_has_changes_wasm(this.tree[0])}isMissing(){return marshalNode(this),1===C._ts_node_is_missing_wasm(this.tree[0])}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){const t=this.tree.language.fields.indexOf(e);if(-1!==t)return this.childForFieldId(t)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,\"i32\"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\");if(this._children=new Array(e),e>0){let r=t;for(let t=0;t<e;t++)this._children[t]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(t)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,\"i32\"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\");if(this._namedChildren=new Array(e),e>0){let r=t;for(let t=0;t<e;t++)this._namedChildren[t]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(t)}}return this._namedChildren}descendantsOfType(e,t,r){Array.isArray(e)||(e=[e]),t||(t=ZERO_POINT),r||(r=ZERO_POINT);const _=[],n=this.tree.language.types;for(let t=0,r=n.length;t<r;t++)e.includes(n[t])&&_.push(t);const s=C._malloc(SIZE_OF_INT*_.length);for(let e=0,t=_.length;e<t;e++)setValue(s+e*SIZE_OF_INT,_[e],\"i32\");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,_.length,t.row,t.column,r.row,r.column);const a=getValue(TRANSFER_BUFFER,\"i32\"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\"),i=new Array(a);if(a>0){let e=o;for(let t=0;t<a;t++)i[t]=unmarshalNode(this.tree,e),e+=SIZE_OF_NODE}return C._free(o),C._free(s),i}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,t=e){if(\"number\"!=typeof e||\"number\"!=typeof t)throw new Error(\"Arguments must be numbers\");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,\"i32\"),setValue(r+SIZE_OF_INT,t,\"i32\"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,t=e){if(\"number\"!=typeof e||\"number\"!=typeof t)throw new Error(\"Arguments must be numbers\");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,\"i32\"),setValue(r+SIZE_OF_INT,t,\"i32\"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error(\"Arguments must be {row, column} objects\");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,t),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error(\"Arguments must be {row, column} objects\");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,t),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);const e=C._ts_node_to_string_wasm(this.tree[0]),t=AsciiToString(e);return C._free(e),t}}class TreeCursor{constructor(e,t){assertInternal(e),this.tree=t,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||\"ERROR\"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])}get nodeIsMissing(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])}get nodeText(){marshalTreeCursor(this);const e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),t=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,t)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoNextSibling(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoParent(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}}class Language{constructor(e,t){assertInternal(e),this[0]=t,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let e=0,t=this.types.length;e<t;e++)C._ts_language_symbol_type(this[0],e)<2&&(this.types[e]=UTF8ToString(C._ts_language_symbol_name(this[0],e)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let e=0,t=this.fields.length;e<t;e++){const t=C._ts_language_field_name_for_id(this[0],e);this.fields[e]=0!==t?UTF8ToString(t):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){const t=this.fields.indexOf(e);return-1!==t?t:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,t){const r=lengthBytesUTF8(e),_=C._malloc(r+1);stringToUTF8(e,_,r+1);const n=C._ts_language_symbol_for_name(this[0],_,r,t);return C._free(_),n||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){const t=C._ts_language_symbol_name(this[0],e);return t?UTF8ToString(t):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){const t=lengthBytesUTF8(e),r=C._malloc(t+1);stringToUTF8(e,r,t+1);const _=C._ts_query_new(this[0],r,t,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!_){const t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\"),_=UTF8ToString(r,getValue(TRANSFER_BUFFER,\"i32\")).length,n=e.substr(_,100).split(\"\\n\")[0];let s,a=n.match(QUERY_WORD_REGEX)[0];switch(t){case 2:s=new RangeError(`Bad node name '${a}'`);break;case 3:s=new RangeError(`Bad field name '${a}'`);break;case 4:s=new RangeError(`Bad capture name @${a}`);break;case 5:s=new TypeError(`Bad pattern structure at offset ${_}: '${n}'...`),a=\"\";break;default:s=new SyntaxError(`Bad syntax at offset ${_}: '${n}'...`),a=\"\"}throw s.index=_,s.length=a.length,C._free(r),s}const n=C._ts_query_string_count(_),s=C._ts_query_capture_count(_),a=C._ts_query_pattern_count(_),o=new Array(s),i=new Array(n);for(let e=0;e<s;e++){const t=C._ts_query_capture_name_for_id(_,e,TRANSFER_BUFFER),r=getValue(TRANSFER_BUFFER,\"i32\");o[e]=UTF8ToString(t,r)}for(let e=0;e<n;e++){const t=C._ts_query_string_value_for_id(_,e,TRANSFER_BUFFER),r=getValue(TRANSFER_BUFFER,\"i32\");i[e]=UTF8ToString(t,r)}const l=new Array(a),u=new Array(a),d=new Array(a),c=new Array(a),m=new Array(a);for(let e=0;e<a;e++){const t=C._ts_query_predicates_for_pattern(_,e,TRANSFER_BUFFER),r=getValue(TRANSFER_BUFFER,\"i32\");c[e]=[],m[e]=[];const n=[];let s=t;for(let t=0;t<r;t++){const t=getValue(s,\"i32\");s+=SIZE_OF_INT;const r=getValue(s,\"i32\");if(s+=SIZE_OF_INT,t===PREDICATE_STEP_TYPE_CAPTURE)n.push({type:\"capture\",name:o[r]});else if(t===PREDICATE_STEP_TYPE_STRING)n.push({type:\"string\",value:i[r]});else if(n.length>0){if(\"string\"!==n[0].type)throw new Error(\"Predicates must begin with a literal value\");const t=n[0].value;let r=!0;switch(t){case\"not-eq?\":r=!1;case\"eq?\":if(3!==n.length)throw new Error(\"Wrong number of arguments to `#eq?` predicate. Expected 2, got \"+(n.length-1));if(\"capture\"!==n[1].type)throw new Error(`First argument of \\`#eq?\\` predicate must be a capture. Got \"${n[1].value}\"`);if(\"capture\"===n[2].type){const t=n[1].name,_=n[2].name;m[e].push((function(e){let n,s;for(const r of e)r.name===t&&(n=r.node),r.name===_&&(s=r.node);return void 0===n||void 0===s||n.text===s.text===r}))}else{const t=n[1].name,_=n[2].value;m[e].push((function(e){for(const n of e)if(n.name===t)return n.node.text===_===r;return!0}))}break;case\"not-match?\":r=!1;case\"match?\":if(3!==n.length)throw new Error(`Wrong number of arguments to \\`#match?\\` predicate. Expected 2, got ${n.length-1}.`);if(\"capture\"!==n[1].type)throw new Error(`First argument of \\`#match?\\` predicate must be a capture. Got \"${n[1].value}\".`);if(\"string\"!==n[2].type)throw new Error(`Second argument of \\`#match?\\` predicate must be a string. Got @${n[2].value}.`);const _=n[1].name,s=new RegExp(n[2].value);m[e].push((function(e){for(const t of e)if(t.name===_)return s.test(t.node.text)===r;return!0}));break;case\"set!\":if(n.length<2||n.length>3)throw new Error(`Wrong number of arguments to \\`#set!\\` predicate. Expected 1 or 2. Got ${n.length-1}.`);if(n.some((e=>\"string\"!==e.type)))throw new Error('Arguments to `#set!` predicate must be a strings.\".');l[e]||(l[e]={}),l[e][n[1].value]=n[2]?n[2].value:null;break;case\"is?\":case\"is-not?\":if(n.length<2||n.length>3)throw new Error(`Wrong number of arguments to \\`#${t}\\` predicate. Expected 1 or 2. Got ${n.length-1}.`);if(n.some((e=>\"string\"!==e.type)))throw new Error(`Arguments to \\`#${t}\\` predicate must be a strings.\".`);const a=\"is?\"===t?u:d;a[e]||(a[e]={}),a[e][n[1].value]=n[2]?n[2].value:null;break;default:c[e].push({operator:t,operands:n.slice(1)})}n.length=0}}Object.freeze(l[e]),Object.freeze(u[e]),Object.freeze(d[e])}return C._free(r),new Query(INTERNAL,_,o,m,c,Object.freeze(l),Object.freeze(u),Object.freeze(d))}static load(e){let t;if(e instanceof Uint8Array)t=Promise.resolve(e);else{const r=e;if(\"undefined\"!=typeof process&&process.versions&&process.versions.node){const e=require(\"fs\");t=Promise.resolve(e.readFileSync(r))}else t=fetch(r).then((e=>e.arrayBuffer().then((t=>{if(e.ok)return new Uint8Array(t);{const r=new TextDecoder(\"utf-8\").decode(t);throw new Error(`Language.load failed with status ${e.status}.\\n\\n${r}`)}}))))}const r=\"function\"==typeof loadSideModule?loadSideModule:loadWebAssemblyModule;return t.then((e=>r(e,{loadAsync:!0}))).then((e=>{const t=Object.keys(e),r=t.find((e=>LANGUAGE_FUNCTION_REGEX.test(e)&&!e.includes(\"external_scanner_\")));r||console.log(`Couldn't find language function in WASM file. Symbols:\\n${JSON.stringify(t,null,2)}`);const _=e[r]();return new Language(INTERNAL,_)}))}}class Query{constructor(e,t,r,_,n,s,a,o){assertInternal(e),this[0]=t,this.captureNames=r,this.textPredicates=_,this.predicates=n,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=o,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,t,r,_){t||(t=ZERO_POINT),r||(r=ZERO_POINT),_||(_={});let n=_.matchLimit;if(void 0===n)n=0;else if(\"number\"!=typeof n)throw new Error(\"Arguments must be numbers\");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],t.row,t.column,r.row,r.column,n);const s=getValue(TRANSFER_BUFFER,\"i32\"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\"),o=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,\"i32\"),i=new Array(s);this.exceededMatchLimit=!!o;let l=0,u=a;for(let t=0;t<s;t++){const r=getValue(u,\"i32\");u+=SIZE_OF_INT;const _=getValue(u,\"i32\");u+=SIZE_OF_INT;const n=new Array(_);if(u=unmarshalCaptures(this,e.tree,u,n),this.textPredicates[r].every((e=>e(n)))){i[l++]={pattern:r,captures:n};const e=this.setProperties[r];e&&(i[t].setProperties=e);const _=this.assertedProperties[r];_&&(i[t].assertedProperties=_);const s=this.refutedProperties[r];s&&(i[t].refutedProperties=s)}}return i.length=l,C._free(a),i}captures(e,t,r,_){t||(t=ZERO_POINT),r||(r=ZERO_POINT),_||(_={});let n=_.matchLimit;if(void 0===n)n=0;else if(\"number\"!=typeof n)throw new Error(\"Arguments must be numbers\");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],t.row,t.column,r.row,r.column,n);const s=getValue(TRANSFER_BUFFER,\"i32\"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,\"i32\"),o=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,\"i32\"),i=[];this.exceededMatchLimit=!!o;const l=[];let u=a;for(let t=0;t<s;t++){const t=getValue(u,\"i32\");u+=SIZE_OF_INT;const r=getValue(u,\"i32\");u+=SIZE_OF_INT;const _=getValue(u,\"i32\");if(u+=SIZE_OF_INT,l.length=r,u=unmarshalCaptures(this,e.tree,u,l),this.textPredicates[t].every((e=>e(l)))){const e=l[_],r=this.setProperties[t];r&&(e.setProperties=r);const n=this.assertedProperties[t];n&&(e.assertedProperties=n);const s=this.refutedProperties[t];s&&(e.refutedProperties=s),i.push(e)}}return C._free(a),i}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,r){const _=r-t;let n=e.textCallback(t,null,r);for(t+=n.length;t<r;){const _=e.textCallback(t,null,r);if(!(_&&_.length>0))break;t+=_.length,n+=_}return t>r&&(n=n.slice(0,_)),n}function unmarshalCaptures(e,t,r,_){for(let n=0,s=_.length;n<s;n++){const s=getValue(r,\"i32\"),a=unmarshalNode(t,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,_[n]={name:e.captureNames[s],node:a}}return r}function assertInternal(e){if(e!==INTERNAL)throw new Error(\"Illegal constructor\")}function isPoint(e){return e&&\"number\"==typeof e.row&&\"number\"==typeof e.column}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,\"i32\"),t+=SIZE_OF_INT,setValue(t,e.startIndex,\"i32\"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,\"i32\"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,\"i32\"),t+=SIZE_OF_INT,setValue(t,e[0],\"i32\")}function unmarshalNode(e,t=TRANSFER_BUFFER){const r=getValue(t,\"i32\");if(0===r)return null;const _=getValue(t+=SIZE_OF_INT,\"i32\"),n=getValue(t+=SIZE_OF_INT,\"i32\"),s=getValue(t+=SIZE_OF_INT,\"i32\"),a=getValue(t+=SIZE_OF_INT,\"i32\"),o=new Node(INTERNAL,e);return o.id=r,o.startIndex=_,o.startPosition={row:n,column:s},o[0]=a,o}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],\"i32\"),setValue(t+1*SIZE_OF_INT,e[1],\"i32\"),setValue(t+2*SIZE_OF_INT,e[2],\"i32\")}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,\"i32\"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,\"i32\"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,\"i32\")}function marshalPoint(e,t){setValue(e,t.row,\"i32\"),setValue(e+SIZE_OF_INT,t.column,\"i32\")}function unmarshalPoint(e){return{row:getValue(e,\"i32\"),column:getValue(e+SIZE_OF_INT,\"i32\")}}function marshalRange(e,t){marshalPoint(e,t.startPosition),marshalPoint(e+=SIZE_OF_POINT,t.endPosition),setValue(e+=SIZE_OF_POINT,t.startIndex,\"i32\"),setValue(e+=SIZE_OF_INT,t.endIndex,\"i32\"),e+=SIZE_OF_INT}function unmarshalRange(e){const t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,\"i32\"),e+=SIZE_OF_INT,t.endIndex=getValue(e,\"i32\"),t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,\"i32\"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,\"i32\"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,\"i32\"),t+=SIZE_OF_INT}for(const e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}})))}}return Parser}();\"object\"==typeof exports&&(module.exports=TreeSitter);\n","module.exports = require(\"assert\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"util\");","module.exports = require(\"worker_threads\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const promptlib = require('./lib');\nconst {parentPort} = require('worker_threads');\nconst {defaultFileSystem} = require('./fileSystem');\n\nconst workerFileSystem = {\n    readFile: path => {\n        return new Promise((resolve, reject) => {\n            parentPort.once('readFileRes', data => {\n                if (data) {\n                    resolve(data);\n                } else {\n                    reject();\n                }\n            });\n            parentPort.emit('readFileReq', path);\n        });\n    },\n    mtime: path => {\n        return new Promise((resolve, reject) => {\n            parentPort.once('mtimeRes', data => {\n                if (data) {\n                    resolve(data);\n                } else {\n                    reject();\n                }\n            });\n            parentPort.emit('mtimeReq', path);\n        });\n    },\n};\n\nparentPort.on('message', async ({id, fn, args}) => {\n    try {\n        if (fn === 'getPrompt') {\n            //TODO: Figure out why `workerFileSystem` is deadlocking in TS files with imports\n            let res = await promptlib.getPrompt(defaultFileSystem, ...args);\n            parentPort.postMessage({id, res});\n        } else {\n            let res = await promptlib[fn](...args);\n            parentPort.postMessage({id, res});\n        }\n    } catch (err) {\n        parentPort.postMessage({id, err});\n    }\n});\n"],"names":["Object","defineProperty","exports","value","convertChangesToDMP","changes","change","operation","ret","i","length","added","removed","push","convertChangesToXML","s","n","replace","join","obj","diffArrays","oldArr","newArr","callback","arrayDiff","diff","__esModule","tokenize","slice","removeEmpty","Diff","buildValues","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","component","count","tmp","map","oldValue","lastComponent","equals","pop","prototype","options","arguments","undefined","this","self","done","setTimeout","castInput","newLen","oldLen","editLength","maxEditLength","Math","min","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","_oldPos","canAdd","canRemove","path","pushComponent","exec","last","commonCount","left","right","comparator","ignoreCase","toLowerCase","array","split","chars","diffChars","oldStr","newStr","characterDiff","diffCss","cssDiff","diffJson","oldObj","newObj","jsonDiff","canonicalize","_base","_line","_typeof","Symbol","iterator","constructor","objectPrototypeToString","toString","stack","replacementStack","replacer","key","canonicalizedObj","call","Array","toJSON","_key","sortedKeys","hasOwnProperty","sort","lineDiff","_this$options","undefinedReplacement","_this$options$stringi","stringifyReplacer","k","v","JSON","stringify","diffLines","diffTrimmedLines","_params","generateOptions","ignoreWhitespace","retLines","linesAndNewlines","line","newlineIsToken","trim","diffSentences","sentenceDiff","diffWords","wordDiff","diffWordsWithSpace","extendedWordChars","reWhitespace","test","tokens","splice","enumerable","get","_character","_word","_sentence","_css","_json","_array","_apply","applyPatch","applyPatches","_parse","parsePatch","_merge","merge","_create","structuredPatch","createTwoFilesPatch","createPatch","_dmp","_xml","uniDiff","currentIndex","processIndex","index","complete","loadFile","err","data","updatedContent","patched","_distanceIterator","source","isArray","Error","removeEOFNL","addEOFNL","lines","delimiters","match","hunks","compareLine","lineNumber","patchContent","errorCount","fuzzFactor","minLine","offset","hunkFits","hunk","toPos","j","content","substr","maxLine","oldLines","localOffset","oldStart","diffOffset","_i","_hunk","_toPos","newLines","delimiter","linedelimiters","previousOperation","_k","formatPatch","fileName","oldHeader","newHeader","_toConsumableArray","arr","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","o","minLen","name","_unsupportedIterableToArray","TypeError","_nonIterableSpread","len","arr2","oldFileName","newFileName","context","oldRangeStart","newRangeStart","curRange","oldLine","newLine","_loop","current","_curRange","prev","contextLines","apply","entry","_curRange2","_curRange3","contextSize","newStart","oldEOFNewline","newEOFNewline","noNlBeforeAdds","calcLineCount","mine","theirs","base","loadPatch","fileNameChanged","selectField","mineIndex","theirsIndex","mineOffset","theirsOffset","mineCurrent","Infinity","theirsCurrent","hunkBefore","cloneHunk","mergedHunk","mergeLines","_calcOldNewLineCount","calcOldNewLineCount","param","patch","conflict","check","mineLines","theirOffset","theirLines","their","insertLeading","theirCurrent","_hunk$lines","collectChange","_hunk$lines2","removal","mutualChange","insertTrailing","myChanges","theirChanges","allRemoves","_hunk$lines3","_hunk$lines4","arrayStartsWith","skipRemoveSuperset","arrayEqual","_hunk$lines5","swap","_hunk$lines6","state","matchChanges","merged","matchIndex","contextChanges","conflicted","collectContext","insert","reduce","removeChanges","delta","changeContent","forEach","myCount","theirCount","diffstr","list","parseIndex","header","parseFileHeader","parseHunk","strict","fileHeader","keyPrefix","chunkHeaderIndex","chunkHeader","addCount","removeCount","indexOf","start","a","b","wantForward","backwardExhausted","forwardExhausted","defaults","ElidableText","chunks","chunk","input","LineWithValueAndCost","copy","adjustValue","elidableTextForSourceCode","adjust","multiplier","recost","coster","x","getTokenizer","tokenLength","makePrompt","maxTokens","ellipsis","indentEllipses","strategy","tokenizer","cost","infiniteWorth","max","infiniteIndentation","text","trimmedEllipsis","totalCost","sum","defensiveCounter","leastDesirable","least","mostRecentNonBlankLine","reverse","find","indentation","repeat","newEllipis","newTotalCost","every","oldContent","newContent","languageId","changedLinesOld","Set","changedLinesNew","add","oldTree","mapLabels","flattenVirtual","parseTree","newTree","visitTree","node","type","has","label","fromTreeWithFocussedLines","fromTreeWithValuedLines","tree","valuedLines","foldTree","acc","deparseLine","trimEnd","DEFAULT_TREE_TRAVERSAL_CONFIG","worthUp","worthSibling","worthDown","config","treeWithDistances","isBlank","maxChildLabel","subs","child","values","sub","new_values","pow","abs","nodeLabel","contents","focusOnLastLeaf","focusOnFirstLine","treeWithFocussedLines","foundLastTrue","subnode","isLine","_value","_cost","validate","includes","defaultFileSystem","readFile","uri","async","stat","mtimeMs","ctime","ctimeMs","mtime","size","isVirtual","isTop","sourceLine","cut","parse","deparseTree","accum","str","cutAt","cutAtSet","cuts","curUndef","visit","describeTree","indent","ind","children","prefix","String","padStart","labelString","encodeTree","subString","firstLineOf","firstLine","lastLineOf","lastLine","registerLanguageSpecificParser","processMarkdown","processJava","javaLabelRules","buildLabelRules","package","import","class","interface","javadoc","comment_multi","comment_single","annotation","opener","closer","originalTree","labelLines","combineClosersAndOpeners","labelVirtualInherited","visitor","direction","_visit","subtree","condition","newSubs","shouldContinue","init","accumulator","skip","rebuild","filter","rebuilt","topNode","MarkdownLabelRules","heading","subheading","subsubheading","headingLevel","currentHierarchy","oldTreeSubs","level","groupBlocks","parseRaw","rawLines","indentations","trimLeft","parseNode","nextLine","parseSubs","lineNode","initialLine","parentIndentation","lastBlank","blankNode","parsedLine","labelRules","rule","matches","ruleMap","keys","returnTree","rebuildTree","findIndex","lastNew","directOlderSibling","firstNonVirtual","subsToKeep","subsToWrap","wrappedSubs","virtualNode","clearLabelsIf","arg","isDelimiter","currentBlockIndentation","nodesSinceLastFlush","lastNodeWasDelimiter","flushBlockIntoNewSubs","final","virtual","subIsDelimiter","genericLabelRules","LANGUAGE_SPECIFIC_PARSERS","language","parser","raw","languageSpecificParser","languageCommentMarkers","abap","end","bat","bibtex","blade","c","clojure","coffeescript","cpp","csharp","css","dart","dockerfile","elixir","erb","erlang","fsharp","go","groovy","haml","handlebars","haskell","html","ini","java","javascript","javascriptreact","jsonc","jsx","julia","kotlin","latex","less","lua","makefile","markdown","perl","php","powershell","pug","python","ql","r","razor","ruby","rust","sass","scala","scss","shellscript","slim","solidity","sql","stylus","svelte","swift","terraform","tex","typescript","typescriptreact","vb","verilog","vue","xml","xsl","yaml","dontAddLanguageMarker","shebangLines","hasLanguageMarker","startsWith","comment","markers","trailingNewline","endsWith","commented","doc","relativePath","FileSystem","commentBlockAsSingles","SnippetOrchestrator","getCursorContext","NeighboringSnippetType","NeighboringTabsOption","SnippetProviderType","SnippetSemantics","Worker","resolve","__dirname","resolveLocalTypeScriptImport","importerPath","imp","src","namedChild","extname","dirname","getTypescriptImportedNames","names","importClause","namedImports","namedImport","namedChildren","childForFieldName","alias","exportsCache","Map","EXPORTS_CACHE_LOW_WATER_MARK","EXPORTS_CACHE_HIGH_WATER_MARK","extractTypeScriptDeclaration","srcString","defn","decl","extractTypeScriptFunctionDeclaration","memberDecls","body","member","extractTypeScriptMemberDeclaration","extractTypeScriptBodyDecls","substring","startIndex","d","endIndex","signature","getDocComment","docCommentNode","getFirstPrecedingComment","firstChild","getIndentation","docComment","inner","getExportedDeclarations","lang","fs","parseTreeSitter","em","queryExports","rootNode","ec","captures","exp","hasError","exportedDecl","exportedDecls","set","delete","localImportRegex","localImportContext","lastImportOffset","m","lastImport","lastIndex","newlineAfterLastImport","lastTypeScriptLocalImportOffset","root","imports","toplevelStmt","getTypeScriptImports","srcUri","importedNames","importedName","extractTypeScriptLocalImportContext","SnippetProviders","LanguageSnippetProvider","PathSnippetProvider","providers","provider","Promise","reject","snippets","timeout","all","getSnippets","flat","clearTimeout","WASMLanguage","languageIdToWasmLanguageMapping","Python","JavaScript","TypeScript","TSX","Go","Ruby","languageIdToWasmLanguage","jsFunctionQuery","functionQuery","tsx","declaratorWithRequire","commonJsImport","tsImportQueries","importsQuery","jsExportQueries","exportsQuery","globalVarsQuery","jsFunctionTypes","functionTypes","isFunctionParent","nd","parent","loadedLanguages","getLanguage","wasmLanguage","loadedLang","Parser","wasmFile","Language","load","loadWasmLanguage","treeSitterLanguage","setLanguage","parsedTree","innerQuery","queries","query","queryFunctions","result","docstringQuery","isFunction","blockNode","namedChildCount","declarator","expr","rhs","cur","previousSibling","endPosition","row","startPosition","positions","res","fn","callSiteQuery","docInfo","pretruncateOffset","linesBeforeTruncation","callers","resIndex","callerName","callerLineNo","callerStartChar","argsStartIndex","argsEndIndex","cap","capIndex","column","callerLineCol","character","position","BaseBlockParser","nodeMatch","nodeTypesWithBlockOrStmtChild","cb","nodeToComplete","descendantForIndex","blockNodeType","fieldLabel","childToCheck","getNextBlockAtPosition","getNodeMatchAtPosition","block","nextComment","nextSibling","commentInline","commentAtEnd","completion","solution","lengthOfBlock","getNodeStart","RegexBasedBlockParser","blockEmptyMatch","lineMatch","super","isBlockStart","trimStart","blockText","rewindToNearestNonWs","prevNewline","lastIndexOf","nextNewline","getLineAtOffset","isBlockBodyEmpty","charAt","lineStart","outdented","fst","snd","fstIndent","sndIndent","TreeSitterBasedBlockParser","startKeywords","emptyStatementType","curlyBraceLanguage","isBlockEmpty","trimmed","queryPythonIsDocstring","RangeError","nodeAtPos","currNode","next","errorNode","blockParentNode","prevSibling","keyword","colonNode","parenCount","sibling","formalParameters","leftCurlyBrace","expectedType","wasmLanguageToBlockParser","class_definition","elif_clause","else_clause","except_clause","finally_clause","for_statement","function_definition","if_statement","try_statement","while_statement","with_statement","arrow_function","catch_clause","do_statement","for_in_statement","function","function_declaration","generator_function","generator_function_declaration","method_definition","class_declaration","ambient_declaration","internal_module","module","abstract_class_declaration","communication_case","default_case","expression_case","func_literal","labeled_statement","method_declaration","type_case","begin_block","end_block","lambda","for","until","while","case","do","if","method","unless","do_block","getBlockParser","isSupportedLanguageId","isEmptyBlockStart","isBlockBodyFinished","cachedSuffix","LanguageMarkerOption","PathMarkerOption","SnippetPositionOption","SnippetSelectionOption","LocalImportContextOption","LineEndingOptions","SuffixMatchOption","SuffixStartMode","SuffixOption","MAX_PROMPT_LENGTH","MAX_EDIT_DISTANCE_LENGTH","TOKENS_RESERVED_FOR_SUFFIX_ENCODING","DEFAULT_NUM_OF_SNIPPETS","PromptOptions","maxPromptLength","languageMarker","Top","pathMarker","Declarations","snippetPosition","TopOfText","numberOfSnippets","snippetProviderOptions","normalizationFunction","normalizationParams","retrieval","reservedSnippetCount","neighboringTabs","Eager","neighboringSnippetTypes","NeighboringSnippets","lineEnding","ConvertToUnix","suffixPercent","snippetPercent","suffixStartMode","Cursor","tokenizerName","TokenizerName","cushman001","suffixMatchThreshold","suffixMatchCriteria","Levenshtein","fimSuffixLengthThreshold","cursorContextFix","cursorSnippetsPickingStrategy","CursorSnippetsPickingStrategy","CursorJaccard","selectionValue","snippetSelection","newOptions","providerOptions","indentationMinLength","indentationMaxLength","TopK","snippetSelectionK","languageNormalizationMap","jade","cshtml","normalizeLanguageId","fileSystem","neighbors","lineCursorHistory","completeOptions","useCachedSuffix","priorities","Priorities","directContextPriority","justBelow","TOP","languageMarkerPriority","Always","pathMarkerPriority","localImportContextPriority","lowSnippetPriority","highSnippetPriority","justAbove","promptWishlist","PromptWishlist","languageMarkerLine","languageSnippet","NoMarker","append","snippet","PromptElementKind","LanguageMarker","pathMarkerLine","pathSnippet","Path","PathMarker","NoContext","extractLocalImportContext","newLineEnded","ImportedFile","neighborSnippets","None","getNeighborSnippets","allSnippets","addSnippetsNow","budget","round","processSnippetsForWishlist","low","high","kind","SimilarFile","Retrieval","RetrievalSnippet","SymbolDef","SymbolDefinition","announcedSnippet","priority","normalizedScore","source_lines","directContext","DirectlyAboveCursor","lastLineStart","directContextBeforePartialLastLine","partialLastLine","appendLineForLine","BeforeCursor","id","AfterCursor","require","exclude","actualSuffix","fulfill","CursorTrimStart","getSiblingFunctionStart","availableTokens","prefixTargetTokens","floor","promptInfo","suffixTargetTokens","prefixLength","suffixText","SiblingBlockTrimStart","suffix","takeFirstTokens","Equal","dist","findEditDistanceScore","score","suffixLength","startingOffset","anc","getAncestorWithSiblingFunctions","isFunctionDefinition","defaultCursorContextOptions","cushman002","cursorContextOptions","maxLineCount","maxTokenLength","lineCount","takeLastLinesTokens","byLines","WINDOWED_TOKEN_SET_CACHE","cache","put","leavingKey","shift","CustomizedFixedWindowSizeJaccardMatcher","WindowedMatcher","referenceDoc","windowLength","getWindowsDelineations","getBasicWindowDelineations","trimDocument","_getCursorContextInfo","similarityScore","computeScore","retrieveAllSnippets","objectDoc","sortOption","SortOptions","Descending","candidates","referenceTokens","tokensInWindows","needToComputeTokens","tokenizedLines","startLine","endLine","entries","tokensInWindow","sortScoredSnippets","CursorHistoryMatcher","jaccardMatcher","Ascending","snippetA","snippetB","markerToSnippet","nonOverlappingSnippets","snippetMarker","NeighboringTabs","semantics","Snippet","snippetSelectionOption","BestMatch","bestMatch","findBestMatch","findTopKMatches","CursorOnly","snippetsByCursor","retrieveCursorSnippets","bestCursorScore","bestSnippets","bestInMiddle","bestSnippetsByCursor","bestSnippetsBoundaryByCursor","bestSnippet","JaccardCursor","gatherNonOverlappingSnippets","snippetCandidates","jaccardMap","topKByJaccard","cursorMap","resortedTopKByJaccard","cursors","pointType","sparsePoints","num","leftBoundary","rightBoundary","numCursors","previousLine","FACTORY","to","FixedWindowSizeJaccardMatcher","IndentationBasedJaccardMatcher","windows","getIndentationWindowsDelineations","FunctionJaccardMatcher","FunctionalMatcher","intersection","neighborOptionToSelection","none","snippetLength","threshold","conservative","medium","eager","eagerButLittle","eagerButMedium","eagerButMuch","retrievalComparable","selection","matcher","matcherFactory","NeighboringFunctions","ok","getMatcher","neighbor","concat","findMatches","Tokenizer","stopsForLanguage","SPECIFIC_STOPS","GENERIC_STOPS","splitIntoWords","_referenceTokens","getMatchingScore","neighborDoc","neighborDocTokens","neighborFuncs","funcPositions","getFunctionPositions","func_source","getNeighboringFunctions","func","Function","ENGLISH_STOPS","snippetSemanticsToString","Variable","Parameter","Method","Class","Module","Alias","Enum","Interface","announceSnippet","targetDocLanguageId","headlinedSnippet","normalizeSnippetScore","providerScore","snippetRem","sortSnippetsDescending","selectSnippets","reserved","normalizedSnippets","snippetsByProvider","_provider","remaining","totalPrioritized","highPriorityBudget","usedBudget","processedSnippets","nextHighPriority","nextLowPriority","process","announced","minLength","maxLength","labeledTree","clearLabels","totalLength","firstLineAfter","NaN","getStartLine","getEndLine","lengthFromAToBInclusive","lastBThatWasntABlank","endLineTrimmedForBlanks","SnippetProvider","currentFile","getLanguageMarker","getPathMarker","buildSnippets","matrix","range","y","ord","charCodeAt","textDecoder","TextDecoder","decodeStr","decode","Uint8Array","get_char_pairs","word","pairs","prev_char","char","pat","tokenizers","mock","MockTokenizer","BPETokenizer","decoder","byte_encoder","byte_decoder","textEncoder","TextEncoder","encodeStr","encode","VOCAB","ENCODER","encoder_path","readFileSync","encoder_json","encoder","bpe_merges","l","bpe_ranks","_","dictZip","bs","cs","cs_","fromCharCode","chr","bytes_to_unicode","byteEncodeStr","bpe","bytes","minPairs","pair","joined_pair","rank","isNaN","minPairsKeys","Number","bigram","first","second","new_bytes","matchAll","chunk_tokens","takeLastTokens","suffixT","detokenize","prefix_t","newline","tokenizeStrings","token","hash","PromptBackground","used","unused","markUsed","element","IsSnippet","convert","undoMarkUsed","markUnused","toFixed","PromptChoices","usedCounts","unusedCounts","PromptElementRanges","usedElements","ranges","previousKind","nextRangeStart","lineEndingOption","getContent","convertLineEndings","requires","excludes","returns","dependentId","dependeeId","dependent","e","dependee","excludingId","excludedId","excluding","excluded","tallyOfChoices","promptBackground","indexedContent","idsThatHaveAlreadyBeenAdded","idsConflictingWithAlreadyAddedIds","budgetBreakingElement","remainingContent","remainingBudget","budgetUse","probableNextElem","items","targetIndex","best","bestIndex","elem","getMinimalGreater","prompt","promptLength","removeAfterAll","extendedContent","promptElementRanges","promptChoices","registeredPriorities","register","BOTTOM","nearestNeighbor","p","between","lower","higher","some","TreeSitter","initPromise","document","window","currentScript","initialize","static","moduleOptions","assign","resolveInitPromise","moduleOverrides","arguments_","thisProgram","quit_","t","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","importScripts","ENVIRONMENT_IS_NODE","versions","scriptDirectory","read_","readAsync","readBinary","setWindowTitle","locateFile","logExceptionOnExit","ExitStatus","nodePath","isFileURI","URL","normalize","buffer","argv","keepRuntimeAlive","exitCode","exit","inspect","location","href","XMLHttpRequest","open","send","responseText","responseType","response","onload","status","onerror","title","out","print","console","log","bind","printErr","warn","quit","STACK_ALIGN","dynamicLibraries","wasmBinary","noExitRuntime","wasmMemory","WebAssembly","abort","ABORT","EXITSTATUS","UTF8Decoder","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAPF32","HEAPF64","UTF8ArrayToString","subarray","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","updateGlobalBufferAndViews","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float32Array","Float64Array","INITIAL_MEMORY","Memory","initial","maximum","byteLength","wasmTable","Table","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATPOSTRUN__","__RELOC_FUNCS__","runtimeInitialized","preRun","addOnPreRun","callRuntimeCallbacks","initRuntime","preMain","postRun","addOnPostRun","unshift","addOnInit","runDependencies","runDependencyWatcher","dependenciesFulfilled","addRunDependency","monitorRunDependencies","removeRunDependency","clearInterval","onAbort","RuntimeError","dataURIPrefix","wasmBinaryFile","tempDouble","tempI64","isDataURI","getBinary","getBinaryPromise","fetch","credentials","then","arrayBuffer","catch","createWasm","env","asmLibraryArg","wasi_snapshot_preview1","Proxy","GOTHandler","relocateExports","getDylinkMetadata","neededDynlibs","mergeLibSymbols","asm","__wasm_call_ctors","__wasm_apply_data_relocs","instance","instantiate","instantiateWasm","instantiateStreaming","ASM_CONSTS","message","GOT","CurrentModuleWeakSymbols","Global","mutable","required","customSections","tlsExports","weakImports","memorySize","memoryAlign","tableSize","tableAlign","u","f","h","getValue","asmjsMangle","_main","LDSO","loadedLibsByName","loadedLibsByHandle","dynCallLegacy","wasmTableMirror","getWasmTableEntry","dynCall","createInvokeFunction","stackSave","stackRestore","_setThrew","___heap_base","zeroMemory","fill","getMemory","_malloc","__heap_base","isInternalSym","uleb128Encode","sigToWasmTypes","parameters","results","generateFuncType","convertJsFunctionToWasm","Instance","updateTableMap","functionsInTableMap","freeTableIndexes","getEmptyTableSlot","grow","setWasmTableEntry","addFunction","WeakMap","updateGOT","resolveGlobalSymbol","stub","alignMemory","ceil","loadWebAssemblyModule","binary","flags","handle","metadata","loadModule","firstLoad","memAlign","memoryBase","tableBase","tableGrowthNeeded","moduleExports","resolveSymbol","proxyHandler","proxy","info","postInstantiation","addEmAsm","addr","args","arity","eval","allowUndefined","reportUndefinedSymbols","__start_em_asm","stop","__stop_em_asm","jsString","applyRelocs","loadAsync","loadDynamicLibrary","global","nodelete","refcount","findObject","encoding","preloadedWasm","sig","preloadDylibs","setValue","___memory_base","___stack_pointer","___table_base","nowIsMonotonic","_emscripten_get_now","__emscripten_get_now_is_monotonic","_abort","_emscripten_date_now","Date","now","_emscripten_memcpy_big","copyWithin","getHeapMax","emscripten_realloc_buffer","_emscripten_resize_heap","hrtime","performance","SYSCALLS","DEFAULT_POLLMASK","calculateAt","PATH","isAbs","FS","cwd","getStreamFromFD","ErrnoError","join2","doStat","getPath","dev","ino","mode","nlink","uid","gid","rdev","blocks","atime","getTime","doMsync","isFile","msync","varargs","getStr","getStream","_proc_exit","onExit","exitJS","_exit","_fd_close","close","errno","convertI32PairToI53Checked","_fd_seek","llseek","getdents","doWritev","write","_fd_write","_tree_sitter_log_callback","currentLogCallback","_tree_sitter_parse_callback","currentParseCallback","stringToUTF16","handleException","allocateUTF8OnStack","stackAlloc","AsciiToString","__indirect_function_table","__memory_base","__stack_pointer","__table_base","_emscripten_get_now_is_monotonic","emscripten_get_now","emscripten_memcpy_big","emscripten_resize_heap","fd_close","fd_seek","fd_write","memory","tree_sitter_log_callback","tree_sitter_parse_callback","___wasm_call_ctors","___wasm_apply_data_relocs","malloc","_calloc","calloc","_realloc","realloc","_free","free","_ts_language_symbol_count","ts_language_symbol_count","_ts_language_version","ts_language_version","_ts_language_field_count","ts_language_field_count","_ts_language_symbol_name","ts_language_symbol_name","_ts_language_symbol_for_name","ts_language_symbol_for_name","_ts_language_symbol_type","ts_language_symbol_type","_ts_language_field_name_for_id","ts_language_field_name_for_id","_memset","memset","_memcpy","memcpy","_ts_parser_delete","ts_parser_delete","_ts_parser_reset","ts_parser_reset","_ts_parser_set_language","ts_parser_set_language","_ts_parser_timeout_micros","ts_parser_timeout_micros","_ts_parser_set_timeout_micros","ts_parser_set_timeout_micros","_memmove","memmove","_memcmp","memcmp","_ts_query_new","ts_query_new","_ts_query_delete","ts_query_delete","_iswspace","iswspace","_iswalnum","iswalnum","_ts_query_pattern_count","ts_query_pattern_count","_ts_query_capture_count","ts_query_capture_count","_ts_query_string_count","ts_query_string_count","_ts_query_capture_name_for_id","ts_query_capture_name_for_id","_ts_query_string_value_for_id","ts_query_string_value_for_id","_ts_query_predicates_for_pattern","ts_query_predicates_for_pattern","_ts_tree_copy","ts_tree_copy","_ts_tree_delete","ts_tree_delete","_ts_init","ts_init","_ts_parser_new_wasm","ts_parser_new_wasm","_ts_parser_enable_logger_wasm","ts_parser_enable_logger_wasm","_ts_parser_parse_wasm","ts_parser_parse_wasm","_ts_language_type_is_named_wasm","ts_language_type_is_named_wasm","_ts_language_type_is_visible_wasm","ts_language_type_is_visible_wasm","_ts_tree_root_node_wasm","ts_tree_root_node_wasm","_ts_tree_edit_wasm","ts_tree_edit_wasm","_ts_tree_get_changed_ranges_wasm","ts_tree_get_changed_ranges_wasm","_ts_tree_cursor_new_wasm","ts_tree_cursor_new_wasm","_ts_tree_cursor_delete_wasm","ts_tree_cursor_delete_wasm","_ts_tree_cursor_reset_wasm","ts_tree_cursor_reset_wasm","_ts_tree_cursor_goto_first_child_wasm","ts_tree_cursor_goto_first_child_wasm","_ts_tree_cursor_goto_next_sibling_wasm","ts_tree_cursor_goto_next_sibling_wasm","_ts_tree_cursor_goto_parent_wasm","ts_tree_cursor_goto_parent_wasm","_ts_tree_cursor_current_node_type_id_wasm","ts_tree_cursor_current_node_type_id_wasm","_ts_tree_cursor_current_node_is_named_wasm","ts_tree_cursor_current_node_is_named_wasm","_ts_tree_cursor_current_node_is_missing_wasm","ts_tree_cursor_current_node_is_missing_wasm","_ts_tree_cursor_current_node_id_wasm","ts_tree_cursor_current_node_id_wasm","_ts_tree_cursor_start_position_wasm","ts_tree_cursor_start_position_wasm","_ts_tree_cursor_end_position_wasm","ts_tree_cursor_end_position_wasm","_ts_tree_cursor_start_index_wasm","ts_tree_cursor_start_index_wasm","_ts_tree_cursor_end_index_wasm","ts_tree_cursor_end_index_wasm","_ts_tree_cursor_current_field_id_wasm","ts_tree_cursor_current_field_id_wasm","_ts_tree_cursor_current_node_wasm","ts_tree_cursor_current_node_wasm","_ts_node_symbol_wasm","ts_node_symbol_wasm","_ts_node_child_count_wasm","ts_node_child_count_wasm","_ts_node_named_child_count_wasm","ts_node_named_child_count_wasm","_ts_node_child_wasm","ts_node_child_wasm","_ts_node_named_child_wasm","ts_node_named_child_wasm","_ts_node_child_by_field_id_wasm","ts_node_child_by_field_id_wasm","_ts_node_next_sibling_wasm","ts_node_next_sibling_wasm","_ts_node_prev_sibling_wasm","ts_node_prev_sibling_wasm","_ts_node_next_named_sibling_wasm","ts_node_next_named_sibling_wasm","_ts_node_prev_named_sibling_wasm","ts_node_prev_named_sibling_wasm","_ts_node_parent_wasm","ts_node_parent_wasm","_ts_node_descendant_for_index_wasm","ts_node_descendant_for_index_wasm","_ts_node_named_descendant_for_index_wasm","ts_node_named_descendant_for_index_wasm","_ts_node_descendant_for_position_wasm","ts_node_descendant_for_position_wasm","_ts_node_named_descendant_for_position_wasm","ts_node_named_descendant_for_position_wasm","_ts_node_start_point_wasm","ts_node_start_point_wasm","_ts_node_end_point_wasm","ts_node_end_point_wasm","_ts_node_start_index_wasm","ts_node_start_index_wasm","_ts_node_end_index_wasm","ts_node_end_index_wasm","_ts_node_to_string_wasm","ts_node_to_string_wasm","_ts_node_children_wasm","ts_node_children_wasm","_ts_node_named_children_wasm","ts_node_named_children_wasm","_ts_node_descendants_of_type_wasm","ts_node_descendants_of_type_wasm","_ts_node_is_named_wasm","ts_node_is_named_wasm","_ts_node_has_changes_wasm","ts_node_has_changes_wasm","_ts_node_has_error_wasm","ts_node_has_error_wasm","_ts_node_is_missing_wasm","ts_node_is_missing_wasm","_ts_query_matches_wasm","ts_query_matches_wasm","_ts_query_captures_wasm","ts_query_captures_wasm","___cxa_atexit","__cxa_atexit","_iswdigit","iswdigit","_iswalpha","iswalpha","_iswlower","iswlower","_memchr","memchr","_strlen","strlen","_towupper","towupper","setThrew","__Znwm","_Znwm","__ZdlPv","_ZdlPv","__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev","_ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev","__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm","_ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm","__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm","_ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm","__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm","_ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm","__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm","_ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm","__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc","_ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc","__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev","_ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev","__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw","_ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw","__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw","_ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw","dynCall_jiji","_orig$ts_parser_timeout_micros","orig$ts_parser_timeout_micros","_orig$ts_parser_set_timeout_micros","orig$ts_parser_set_timeout_micros","calledRun","callMain","run","dylibsLoaded","onRuntimeInitialized","shouldRunNow","setStatus","preInit","noInitialRun","C","INTERNAL","SIZE_OF_INT","SIZE_OF_NODE","SIZE_OF_POINT","SIZE_OF_RANGE","ZERO_POINT","QUERY_WORD_REGEX","PREDICATE_STEP_TYPE_CAPTURE","PREDICATE_STEP_TYPE_STRING","LANGUAGE_FUNCTION_REGEX","VERSION","MIN_COMPATIBLE_VERSION","TRANSFER_BUFFER","ParserImpl","logCallback","includedRanges","marshalRange","Tree","reset","setTimeoutMicros","getTimeoutMicros","setLogger","getLogger","assertInternal","textCallback","edit","marshalEdit","unmarshalNode","walk","getChangedRanges","unmarshalRange","Node","typeId","marshalNode","types","unmarshalPoint","getText","isNamed","hasChanges","isMissing","childForFieldId","fields","childCount","firstNamedChild","lastChild","lastNamedChild","_children","_namedChildren","descendantsOfType","nextNamedSibling","previousNamedSibling","namedDescendantForIndex","descendantForPosition","isPoint","marshalPoint","namedDescendantForPosition","TreeCursor","unmarshalTreeCursor","marshalTreeCursor","nodeType","nodeTypeId","nodeId","nodeIsNamed","nodeIsMissing","nodeText","currentNode","currentFieldId","currentFieldName","gotoFirstChild","gotoNextSibling","gotoParent","version","fieldCount","fieldIdForName","fieldNameForId","idForNodeType","nodeTypeCount","nodeTypeForId","nodeTypeIsNamed","nodeTypeIsVisible","SyntaxError","RegExp","operator","operands","freeze","Query","loadSideModule","captureNames","textPredicates","predicates","setProperties","assertedProperties","refutedProperties","exceededMatchLimit","matchLimit","unmarshalCaptures","pattern","predicatesForPattern","didExceedMatchLimit","oldEndPosition","newEndPosition","oldEndIndex","newEndIndex","getOwnPropertyNames","writable","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","promptlib","parentPort","on","getPrompt","postMessage"],"sourceRoot":""}