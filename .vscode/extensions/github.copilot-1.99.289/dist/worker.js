(()=>{var __webpack_modules__={696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertChangesToDMP=function(e){for(var t,n,r=[],s=0;s<e.length;s++)n=(t=e[s]).added?1:t.removed?-1:0,r.push([n,t.value]);return r}},5826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertChangesToXML=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.added?t.push("<ins>"):r.removed&&t.push("<del>"),t.push((s=r.value,void 0,s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))),r.added?t.push("</ins>"):r.removed&&t.push("</del>")}var s;return t.join("")}},6976:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffArrays=function(e,t,n){return s.diff(e,t,n)},t.arrayDiff=void 0;var s=new(((r=n(5913))&&r.__esModule?r:{default:r}).default);t.arrayDiff=s,s.tokenize=function(e){return e.slice()},s.join=s.removeEmpty=function(e){return e}},5913:(e,t)=>{"use strict";function n(){}function r(e,t,n,r,s){for(var i=0,o=t.length,a=0,l=0;i<o;i++){var u=t[i];if(u.removed){if(u.value=e.join(r.slice(l,l+u.count)),l+=u.count,i&&t[i-1].added){var _=t[i-1];t[i-1]=t[i],t[i]=_}}else{if(!u.added&&s){var c=n.slice(a,a+u.count);c=c.map((function(e,t){var n=r[l+t];return n.length>e.length?n:e})),u.value=e.join(c)}else u.value=e.join(n.slice(a,a+u.count));a+=u.count,u.added||(l+=u.count)}}var d=t[o-1];return o>1&&"string"==typeof d.value&&(d.added||d.removed)&&e.equals("",d.value)&&(t[o-2].value+=d.value,t.pop()),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.callback;"function"==typeof n&&(s=n,n={}),this.options=n;var i=this;function o(e){return s?(setTimeout((function(){s(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var a=(t=this.removeEmpty(this.tokenize(t))).length,l=e.length,u=1,_=a+l;n.maxEditLength&&(_=Math.min(_,n.maxEditLength));var c=[{newPos:-1,components:[]}],d=this.extractCommon(c[0],t,e,0);if(c[0].newPos+1>=a&&d+1>=l)return o([{value:this.join(t),count:t.length}]);function p(){for(var n=-1*u;n<=u;n+=2){var s=void 0,_=c[n-1],d=c[n+1],p=(d?d.newPos:0)-n;_&&(c[n-1]=void 0);var m=_&&_.newPos+1<a,h=d&&0<=p&&p<l;if(m||h){if(!m||h&&_.newPos<d.newPos?(s={newPos:(f=d).newPos,components:f.components.slice(0)},i.pushComponent(s.components,void 0,!0)):((s=_).newPos++,i.pushComponent(s.components,!0,void 0)),p=i.extractCommon(s,t,e,n),s.newPos+1>=a&&p+1>=l)return o(r(i,s.components,t,e,i.useLongestToken));c[n]=s}else c[n]=void 0}var f;u++}if(s)!function e(){setTimeout((function(){if(u>_)return s();p()||e()}),0)}();else for(;u<=_;){var m=p();if(m)return m}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var s=t.length,i=n.length,o=e.newPos,a=o-r,l=0;o+1<s&&a+1<i&&this.equals(t[o+1],n[a+1]);)o++,a++,l++;return l&&e.components.push({count:l}),e.newPos=o,a},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}}},7630:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffChars=function(e,t,n){return s.diff(e,t,n)},t.characterDiff=void 0;var s=new(((r=n(5913))&&r.__esModule?r:{default:r}).default);t.characterDiff=s},4852:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffCss=function(e,t,n){return s.diff(e,t,n)},t.cssDiff=void 0;var s=new(((r=n(5913))&&r.__esModule?r:{default:r}).default);t.cssDiff=s,s.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}},4276:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffJson=function(e,t,n){return l.diff(e,t,n)},t.canonicalize=u,t.jsonDiff=void 0;var r,s=(r=n(5913))&&r.__esModule?r:{default:r},i=n(8187);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=Object.prototype.toString,l=new s.default;function u(e,t,n,r,s){var i,l;for(t=t||[],n=n||[],r&&(e=r(s,e)),i=0;i<t.length;i+=1)if(t[i]===e)return n[i];if("[object Array]"===a.call(e)){for(t.push(e),l=new Array(e.length),n.push(l),i=0;i<e.length;i+=1)l[i]=u(e[i],t,n,r,s);return t.pop(),n.pop(),l}if(e&&e.toJSON&&(e=e.toJSON()),"object"===o(e)&&null!==e){t.push(e),l={},n.push(l);var _,c=[];for(_ in e)e.hasOwnProperty(_)&&c.push(_);for(c.sort(),i=0;i<c.length;i+=1)l[_=c[i]]=u(e[_],t,n,r,_);t.pop(),n.pop()}else l=e;return l}t.jsonDiff=l,l.useLongestToken=!0,l.tokenize=i.lineDiff.tokenize,l.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,s=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(u(e,null,null,s),s,"  ")},l.equals=function(e,t){return s.default.prototype.equals.call(l,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}},8187:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffLines=function(e,t,n){return o.diff(e,t,n)},t.diffTrimmedLines=function(e,t,n){var r=(0,i.generateOptions)(n,{ignoreWhitespace:!0});return o.diff(e,t,r)},t.lineDiff=void 0;var r,s=(r=n(5913))&&r.__esModule?r:{default:r},i=n(8009),o=new s.default;t.lineDiff=o,o.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var s=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),t.push(s))}return t}},4146:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffSentences=function(e,t,n){return s.diff(e,t,n)},t.sentenceDiff=void 0;var s=new(((r=n(5913))&&r.__esModule?r:{default:r}).default);t.sentenceDiff=s,s.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}},5303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffWords=function(e,t,n){return n=(0,i.generateOptions)(n,{ignoreWhitespace:!0}),l.diff(e,t,n)},t.diffWordsWithSpace=function(e,t,n){return l.diff(e,t,n)},t.wordDiff=void 0;var r,s=(r=n(5913))&&r.__esModule?r:{default:r},i=n(8009),o=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,a=/\S/,l=new s.default;t.wordDiff=l,l.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!a.test(e)&&!a.test(t)},l.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&o.test(t[n])&&o.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}},9479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Diff",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"diffChars",{enumerable:!0,get:function(){return i.diffChars}}),Object.defineProperty(t,"diffWords",{enumerable:!0,get:function(){return o.diffWords}}),Object.defineProperty(t,"diffWordsWithSpace",{enumerable:!0,get:function(){return o.diffWordsWithSpace}}),Object.defineProperty(t,"diffLines",{enumerable:!0,get:function(){return a.diffLines}}),Object.defineProperty(t,"diffTrimmedLines",{enumerable:!0,get:function(){return a.diffTrimmedLines}}),Object.defineProperty(t,"diffSentences",{enumerable:!0,get:function(){return l.diffSentences}}),Object.defineProperty(t,"diffCss",{enumerable:!0,get:function(){return u.diffCss}}),Object.defineProperty(t,"diffJson",{enumerable:!0,get:function(){return _.diffJson}}),Object.defineProperty(t,"canonicalize",{enumerable:!0,get:function(){return _.canonicalize}}),Object.defineProperty(t,"diffArrays",{enumerable:!0,get:function(){return c.diffArrays}}),Object.defineProperty(t,"applyPatch",{enumerable:!0,get:function(){return d.applyPatch}}),Object.defineProperty(t,"applyPatches",{enumerable:!0,get:function(){return d.applyPatches}}),Object.defineProperty(t,"parsePatch",{enumerable:!0,get:function(){return p.parsePatch}}),Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return m.merge}}),Object.defineProperty(t,"structuredPatch",{enumerable:!0,get:function(){return h.structuredPatch}}),Object.defineProperty(t,"createTwoFilesPatch",{enumerable:!0,get:function(){return h.createTwoFilesPatch}}),Object.defineProperty(t,"createPatch",{enumerable:!0,get:function(){return h.createPatch}}),Object.defineProperty(t,"convertChangesToDMP",{enumerable:!0,get:function(){return f.convertChangesToDMP}}),Object.defineProperty(t,"convertChangesToXML",{enumerable:!0,get:function(){return g.convertChangesToXML}});var r,s=(r=n(5913))&&r.__esModule?r:{default:r},i=n(7630),o=n(5303),a=n(8187),l=n(4146),u=n(4852),_=n(4276),c=n(6976),d=n(3690),p=n(3719),m=n(3051),h=n(1286),f=n(696),g=n(5826)},3690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPatch=o,t.applyPatches=function(e,t){"string"==typeof e&&(e=(0,s.parsePatch)(e));var n=0;!function r(){var s=e[n++];if(!s)return t.complete();t.loadFile(s,(function(e,n){if(e)return t.complete(e);var i=o(n,s,t);t.patched(s,i,(function(e){if(e)return t.complete(e);r()}))}))}()};var r,s=n(3719),i=(r=n(8169))&&r.__esModule?r:{default:r};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t&&(t=(0,s.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var r,o,a=e.split(/\r\n|[\n\v\f\r\x85]/),l=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],u=t.hunks,_=n.compareLine||function(e,t,n,r){return t===r},c=0,d=n.fuzzFactor||0,p=0,m=0;function h(e,t){for(var n=0;n<e.lines.length;n++){var r=e.lines[n],s=r.length>0?r[0]:" ",i=r.length>0?r.substr(1):r;if(" "===s||"-"===s){if(!_(t+1,a[t],s,i)&&++c>d)return!1;t++}}return!0}for(var f=0;f<u.length;f++){for(var g=u[f],b=a.length-g.oldLines,y=0,w=m+g.oldStart-1,S=(0,i.default)(w,p,b);void 0!==y;y=S())if(h(g,w+y)){g.offset=m+=y;break}if(void 0===y)return!1;p=g.offset+g.oldStart+g.oldLines}for(var E=0,v=0;v<u.length;v++){var M=u[v],T=M.oldStart+M.offset+E-1;E+=M.newLines-M.oldLines;for(var I=0;I<M.lines.length;I++){var k=M.lines[I],x=k.length>0?k[0]:" ",N=k.length>0?k.substr(1):k,P=M.linedelimiters[I];if(" "===x)T++;else if("-"===x)a.splice(T,1),l.splice(T,1);else if("+"===x)a.splice(T,0,N),l.splice(T,0,P),T++;else if("\\"===x){var F=M.lines[I-1]?M.lines[I-1][0]:null;"+"===F?r=!0:"-"===F&&(o=!0)}}}if(r)for(;!a[a.length-1];)a.pop(),l.pop();else o&&(a.push(""),l.push("\n"));for(var L=0;L<a.length-1;L++)a[L]=a[L]+l[L];return a.join("")}},1286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structuredPatch=o,t.formatPatch=a,t.createTwoFilesPatch=l,t.createPatch=function(e,t,n,r,s,i){return l(e,e,t,n,r,s,i)};var r=n(8187);function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,i,o,a,l){l||(l={}),void 0===l.context&&(l.context=4);var u=(0,r.diffLines)(n,i,l);if(u){u.push({value:"",lines:[]});for(var _=[],c=0,d=0,p=[],m=1,h=1,f=function(e){var t=u[e],r=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=r,t.added||t.removed){var o;if(!c){var a=u[e-1];c=m,d=h,a&&(p=l.context>0?b(a.lines.slice(-l.context)):[],c-=p.length,d-=p.length)}(o=p).push.apply(o,s(r.map((function(e){return(t.added?"+":"-")+e})))),t.added?h+=r.length:m+=r.length}else{if(c)if(r.length<=2*l.context&&e<u.length-2){var f;(f=p).push.apply(f,s(b(r)))}else{var g,y=Math.min(r.length,l.context);(g=p).push.apply(g,s(b(r.slice(0,y))));var w={oldStart:c,oldLines:m-c+y,newStart:d,newLines:h-d+y,lines:p};if(e>=u.length-2&&r.length<=l.context){var S=/\n$/.test(n),E=/\n$/.test(i),v=0==r.length&&p.length>w.oldLines;!S&&v&&n.length>0&&p.splice(w.oldLines,0,"\\ No newline at end of file"),(S||v)&&E||p.push("\\ No newline at end of file")}_.push(w),c=0,d=0,p=[]}m+=r.length,h+=r.length}},g=0;g<u.length;g++)f(g);return{oldFileName:e,newFileName:t,oldHeader:o,newHeader:a,hunks:_}}function b(e){return e.map((function(e){return" "+e}))}}function a(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(void 0===e.oldHeader?"":"\t"+e.oldHeader)),t.push("+++ "+e.newFileName+(void 0===e.newHeader?"":"\t"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var r=e.hunks[n];0===r.oldLines&&(r.oldStart-=1),0===r.newLines&&(r.newStart-=1),t.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),t.push.apply(t,r.lines)}return t.join("\n")+"\n"}function l(e,t,n,r,s,i,l){return a(o(e,t,n,r,s,i,l))}},3051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcLineCount=l,t.merge=function(e,t,n){e=u(e,n),t=u(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index),(e.newFileName||t.newFileName)&&(_(e)?_(t)?(r.oldFileName=c(r,e.oldFileName,t.oldFileName),r.newFileName=c(r,e.newFileName,t.newFileName),r.oldHeader=c(r,e.oldHeader,t.oldHeader),r.newHeader=c(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader)),r.hunks=[];for(var s=0,i=0,o=0,a=0;s<e.hunks.length||i<t.hunks.length;){var l=e.hunks[s]||{oldStart:1/0},h=t.hunks[i]||{oldStart:1/0};if(d(l,h))r.hunks.push(p(l,o)),s++,a+=l.newLines-l.oldLines;else if(d(h,l))r.hunks.push(p(h,a)),i++,o+=h.newLines-h.oldLines;else{var f={oldStart:Math.min(l.oldStart,h.oldStart),oldLines:0,newStart:Math.min(l.newStart+o,h.oldStart+a),newLines:0,lines:[]};m(f,l.oldStart,l.lines,h.oldStart,h.lines),i++,s++,r.hunks.push(f)}}return r};var r=n(1286),s=n(3719),i=n(7780);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t=v(e.lines),n=t.oldLines,r=t.newLines;void 0!==n?e.oldLines=n:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function u(e,t){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,s.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,r.structuredPatch)(void 0,void 0,t,e)}return e}function _(e){return e.newFileName&&e.newFileName!==e.oldFileName}function c(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function d(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function p(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function m(e,t,n,r,s){var i={offset:t,lines:n,index:0},a={offset:r,lines:s,index:0};for(b(e,i,a),b(e,a,i);i.index<i.lines.length&&a.index<a.lines.length;){var u=i.lines[i.index],_=a.lines[a.index];if("-"!==u[0]&&"+"!==u[0]||"-"!==_[0]&&"+"!==_[0])if("+"===u[0]&&" "===_[0]){var c;(c=e.lines).push.apply(c,o(w(i)))}else if("+"===_[0]&&" "===u[0]){var d;(d=e.lines).push.apply(d,o(w(a)))}else"-"===u[0]&&" "===_[0]?f(e,i,a):"-"===_[0]&&" "===u[0]?f(e,a,i,!0):u===_?(e.lines.push(u),i.index++,a.index++):g(e,w(i),w(a));else h(e,i,a)}y(e,i),y(e,a),l(e)}function h(e,t,n){var r=w(t),s=w(n);if(S(r)&&S(s)){var a,l;if((0,i.arrayStartsWith)(r,s)&&E(n,r,r.length-s.length))return void(a=e.lines).push.apply(a,o(r));if((0,i.arrayStartsWith)(s,r)&&E(t,s,s.length-r.length))return void(l=e.lines).push.apply(l,o(s))}else if((0,i.arrayEqual)(r,s)){var u;return void(u=e.lines).push.apply(u,o(r))}g(e,r,s)}function f(e,t,n,r){var s,i=w(t),a=function(e,t){for(var n=[],r=[],s=0,i=!1,o=!1;s<t.length&&e.index<e.lines.length;){var a=e.lines[e.index],l=t[s];if("+"===l[0])break;if(i=i||" "!==a[0],r.push(l),s++,"+"===a[0])for(o=!0;"+"===a[0];)n.push(a),a=e.lines[++e.index];l.substr(1)===a.substr(1)?(n.push(a),e.index++):o=!0}if("+"===(t[s]||"")[0]&&i&&(o=!0),o)return n;for(;s<t.length;)r.push(t[s++]);return{merged:r,changes:n}}(n,i);a.merged?(s=e.lines).push.apply(s,o(a.merged)):g(e,r?a:i,r?i:a)}function g(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function b(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}function y(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function w(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if("-"===n&&"+"===r[0]&&(n="+"),n!==r[0])break;t.push(r),e.index++}return t}function S(e){return e.reduce((function(e,t){return e&&"-"===t[0]}),!0)}function E(e,t,n){for(var r=0;r<n;r++){var s=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+s)return!1}return e.index+=n,!0}function v(e){var t=0,n=0;return e.forEach((function(e){if("string"!=typeof e){var r=v(e.mine),s=v(e.theirs);void 0!==t&&(r.oldLines===s.oldLines?t+=r.oldLines:t=void 0),void 0!==n&&(r.newLines===s.newLines?n+=r.newLines:n=void 0)}else void 0===n||"+"!==e[0]&&" "!==e[0]||n++,void 0===t||"-"!==e[0]&&" "!==e[0]||t++})),{oldLines:t,newLines:n}}},3719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],s=[],i=0;function o(){var e={};for(s.push(e);i<n.length;){var r=n[i];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var o=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);o&&(e.index=o[1]),i++}for(a(e),a(e),e.hunks=[];i<n.length;){var u=n[i];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(u))break;if(/^@@/.test(u))e.hunks.push(l());else{if(u&&t.strict)throw new Error("Unknown line "+(i+1)+" "+JSON.stringify(u));i++}}}function a(e){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[i]);if(t){var r="---"===t[1]?"old":"new",s=t[2].split("\t",2),o=s[0].replace(/\\\\/g,"\\");/^".*"$/.test(o)&&(o=o.substr(1,o.length-2)),e[r+"FileName"]=o,e[r+"Header"]=(s[1]||"").trim(),i++}}function l(){var e=i,s=n[i++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),o={oldStart:+s[1],oldLines:void 0===s[2]?1:+s[2],newStart:+s[3],newLines:void 0===s[4]?1:+s[4],lines:[],linedelimiters:[]};0===o.oldLines&&(o.oldStart+=1),0===o.newLines&&(o.newStart+=1);for(var a=0,l=0;i<n.length&&!(0===n[i].indexOf("--- ")&&i+2<n.length&&0===n[i+1].indexOf("+++ ")&&0===n[i+2].indexOf("@@"));i++){var u=0==n[i].length&&i!=n.length-1?" ":n[i][0];if("+"!==u&&"-"!==u&&" "!==u&&"\\"!==u)break;o.lines.push(n[i]),o.linedelimiters.push(r[i]||"\n"),"+"===u?a++:"-"===u?l++:" "===u&&(a++,l++)}if(a||1!==o.newLines||(o.newLines=0),l||1!==o.oldLines||(o.oldLines=0),t.strict){if(a!==o.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(l!==o.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return o}for(;i<n.length;)o();return s}},7780:(e,t)=>{"use strict";function n(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayEqual=function(e,t){return e.length===t.length&&n(e,t)},t.arrayStartsWith=n},8169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=!0,s=!1,i=!1,o=1;return function a(){if(r&&!i){if(s?o++:r=!1,e+o<=n)return o;i=!0}if(!s)return i||(r=!0),t<=e-o?-o++:(s=!0,a())}}},8009:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOptions=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},4288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElidableText=void 0;const r=n(1145),s=n(3407),i=n(4121);class o{constructor(...e){this.lines=[];const t=[];for(const n of e){const e=Array.isArray(n)?n[1]:1,r=Array.isArray(n)?n[0]:n;"string"==typeof r?r.split("\n").forEach((n=>t.push(new i.LineWithValueAndCost(n,e)))):r instanceof o?t.push(...r.lines.map((t=>t.copy().adjustValue(e)))):"source"in r&&"languageId"in r&&t.push(...(0,s.elidableTextForSourceCode)(r).lines.map((t=>t.copy().adjustValue(e))))}this.lines=t}adjust(e){this.lines.forEach((t=>t.adjustValue(e)))}recost(e=(e=>(0,r.getTokenizer)().tokenLength(e+"\n"))){this.lines.forEach((t=>t.recost(e)))}makePrompt(e,t="[...]",n=!0,s="removeLeastDesirable",o=(0,r.getTokenizer)()){return function(e,t,n,r,s,o){if(o.tokenLength(n+"\n")>t)throw new Error("maxTokens must be larger than the ellipsis length");"removeLeastBangForBuck"===s&&e.forEach((e=>e.adjustValue(1/e.cost)));const a=e.reduce(((e,t)=>Math.max(e,t.value)),0)+1,l=e.reduce(((e,t)=>Math.max(e,t.text.length)),0)+1,u=n.trim();let _=e.reduce(((e,t)=>e+t.cost),0),c=e.length+1;for(;_>t&&c-- >=-1;){const t=e.reduce(((e,t)=>t.value<e.value?t:e)),s=e.indexOf(t),c=e.slice(0,s+1).reverse().find((e=>""!==e.text.trim()))??{text:""},d=r?Math.min(c.text.match(/^\s*/)?.[0].length??0,e[s-1]?.text.trim()===u?e[s-1]?.text.match(/^\s*/)?.[0].length??0:l,e[s+1]?.text.trim()===u?e[s+1]?.text.match(/^\s*/)?.[0].length??0:l):0,p=" ".repeat(d)+n,m=new i.LineWithValueAndCost(p,a,o.tokenLength(p+"\n"),"loose");e.splice(s,1,m),e[s+1]?.text.trim()===u&&e.splice(s+1,1),e[s-1]?.text.trim()===u&&e.splice(s-1,1);const h=e.reduce(((e,t)=>e+t.cost),0);h>=_&&e.every((e=>e.value===a))&&(r=!1),_=h}if(c<0)throw new Error(`Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text:\n ${e.map((e=>e.text)).join("\n")}`);return e.map((e=>e.text)).join("\n")}(this.lines.map((e=>e.copy())),e,t,n,s,o)}}t.ElidableText=o},8975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elidableTextForDiff=void 0;const r=n(9479),s=n(2180),i=n(5533);t.elidableTextForDiff=function(e,t){const n="string"==typeof e?"string"==typeof t?void 0:t.languageId:"string"==typeof t||e.languageId===t.languageId?e.languageId:void 0;e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source;const o=r.structuredPatch("","",e,t),a=new Set,l=new Set;for(const e of o.hunks){for(let t=e.oldStart;t<e.oldStart+e.oldLines;t++)a.add(t);for(let t=e.newStart;t<e.newStart+e.newLines;t++)l.add(t)}const u=(0,s.mapLabels)((0,s.flattenVirtual)((0,s.parseTree)(e,n)),(()=>!1)),_=(0,s.mapLabels)((0,s.flattenVirtual)((0,s.parseTree)(t,n)),(()=>!1));return(0,s.visitTree)(u,(e=>{"line"!==e.type&&"blank"!==e.type||a.has(e.lineNumber)&&(e.label=!0)}),"topDown"),(0,s.visitTree)(_,(e=>{"line"!==e.type&&"blank"!==e.type||l.has(e.lineNumber)&&(e.label=!0)}),"topDown"),[(0,i.fromTreeWithFocussedLines)(u),(0,i.fromTreeWithFocussedLines)(_)]}},5533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromTreeWithValuedLines=t.fromTreeWithFocussedLines=t.DEFAULT_TREE_TRAVERSAL_CONFIG=void 0;const r=n(2180),s=n(4288);function i(e){const t=(0,r.foldTree)(e,[],((e,t)=>("line"!==e.type&&"blank"!==e.type||t.push("line"===e.type?[(0,r.deparseLine)(e).trimEnd(),e.label??0]:["",e.label??0]),t)),"topDown");return new s.ElidableText(...t)}t.DEFAULT_TREE_TRAVERSAL_CONFIG={worthUp:.9,worthSibling:.88,worthDown:.8},t.fromTreeWithFocussedLines=function(e,n=t.DEFAULT_TREE_TRAVERSAL_CONFIG){const s=(0,r.mapLabels)(e,(e=>e?1:void 0));return(0,r.visitTree)(s,(e=>{if((0,r.isBlank)(e))return;const t=Math.max(...e.subs.map((e=>e.label??0)));e.label=Math.max(e.label??0,t*n.worthUp)}),"bottomUp"),(0,r.visitTree)(s,(e=>{if((0,r.isBlank)(e))return;const t=e.subs.map((e=>e.label??0));let s=[...t];for(let e=0;e<t.length;e++)0!==t[e]&&(s=s.map(((r,s)=>Math.max(r,Math.pow(n.worthSibling,Math.abs(e-s))*t[e]))));const i=e.label;void 0!==i&&(s=s.map((e=>Math.max(e,n.worthDown*i)))),e.subs.forEach(((e,t)=>e.label=s[t]))}),"topDown"),i(s)},t.fromTreeWithValuedLines=i},3407:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elidableTextForSourceCode=void 0;const r=n(2180),s=n(5533);t.elidableTextForSourceCode=function(e,t=!0,n=!0){const i="string"==typeof e?(0,r.parseTree)(e):(0,r.parseTree)(e.source,e.languageId);(0,r.flattenVirtual)(i);const o=(0,r.mapLabels)(i,(e=>t&&"closer"!==e));return(0,r.visitTree)(o,(e=>{void 0===e.label&&(e.label=t&&!1!==e.label)}),"topDown"),t&&(0,r.visitTree)(o,(e=>{if(e.label){let t=!1;for(const n of[...e.subs].reverse())n.label&&!t?t=!0:n.label=!1}else for(const t of e.subs)t.label=!1;e.subs.length>0&&(e.label=!1)}),"topDown"),n&&(0,r.visitTree)(o,(e=>{e.label||(e.label=((0,r.isLine)(e)||(0,r.isBlank)(e))&&0==e.lineNumber)}),"topDown"),(0,s.fromTreeWithFocussedLines)(o)}},3346:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(4288),t),s(n(8975),t),s(n(5533),t),s(n(3407),t),s(n(4121),t)},4121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineWithValueAndCost=void 0;const r=n(1145);class s{constructor(e,t,n=(0,r.getTokenizer)().tokenLength(e+"\n"),s="strict"){if(this.text=e,this._value=t,this._cost=n,e.includes("\n")&&"none"!==s)throw new Error("LineWithValueAndCost: text contains newline");if(t<0&&"none"!==s)throw new Error("LineWithValueAndCost: value is negative");if(n<0&&"none"!==s)throw new Error("LineWithValueAndCost: cost is negative");if("strict"==s&&t>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}recost(e=(e=>(0,r.getTokenizer)().tokenLength(e+"\n"))){return this._cost=e(this.text),this}copy(){return new s(this.text,this.value,this.cost,"none")}}t.LineWithValueAndCost=s},2271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileSystem=t.FileSystem=void 0;const r=n(7147);t.FileSystem=class{},t.defaultFileSystem={readFile:e=>r.promises.readFile(e),mtime:async e=>(await r.promises.stat(e)).mtimeMs,async stat(e){const t=await r.promises.stat(e);return{ctime:t.ctimeMs,mtime:t.mtimeMs,size:t.size}}}},4876:(e,t)=>{"use strict";function n(e){return"virtual"===e.type}function r(e){return"top"===e.type}Object.defineProperty(t,"__esModule",{value:!0}),t.duplicateTree=t.cutTreeAfterLine=t.isTop=t.isVirtual=t.isLine=t.isBlank=t.topNode=t.blankNode=t.lineNode=t.virtualNode=void 0,t.virtualNode=function(e,t,n){return{type:"virtual",indentation:e,subs:t,label:n}},t.lineNode=function(e,t,n,r,s){if(""===n)throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:e,lineNumber:t,sourceLine:n,subs:r,label:s}},t.blankNode=function(e){return{type:"blank",lineNumber:e,subs:[]}},t.topNode=function(e){return{type:"top",indentation:-1,subs:e??[]}},t.isBlank=function(e){return"blank"===e.type},t.isLine=function(e){return"line"===e.type},t.isVirtual=n,t.isTop=r,t.cutTreeAfterLine=function(e,t){!function e(s){if(!n(s)&&!r(s)&&s.lineNumber===t)return s.subs=[],!0;for(let t=0;t<s.subs.length;t++)if(e(s.subs[t]))return s.subs=s.subs.slice(0,t+1),!0;return!1}(e)},t.duplicateTree=function(e){return JSON.parse(JSON.stringify(e))}},3059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastLineOf=t.firstLineOf=t.encodeTree=t.describeTree=t.deparseAndCutTree=t.deparseTree=t.deparseLine=void 0;const r=n(4876),s=n(8617);function i(e){return" ".repeat(e.indentation)+e.sourceLine+"\n"}function o(e){return(0,s.foldTree)(e,"",(function(e,t){let n="";return(0,r.isLine)(e)?n=i(e):(0,r.isBlank)(e)&&(n="\n"),t+n}),"topDown")}t.deparseLine=i,t.deparseTree=o,t.deparseAndCutTree=function(e,t){const n=new Set(t),s=[];let a="";return function e(t){void 0!==t.label&&n.has(t.label)?(""!==a&&s.push({label:void 0,source:a}),s.push({label:t.label,source:o(t)}),a=""):((0,r.isLine)(t)&&(a+=i(t)),t.subs.forEach(e))}(e),""!==a&&s.push({label:void 0,source:a}),s},t.describeTree=function e(t,n=0){const s=" ".repeat(n);if(void 0===t)return"UNDEFINED NODE";let i;i=void 0===t.subs?"UNDEFINED SUBS":t.subs.map((t=>e(t,n+2))).join(",\n"),i=""===i?"[]":`[\n${i}\n      ${s}]`;const o=((0,r.isVirtual)(t)||(0,r.isTop)(t)?"   ":String(t.lineNumber).padStart(3," "))+`:  ${s}`,a=void 0===t.label?"":JSON.stringify(t.label);return(0,r.isVirtual)(t)||(0,r.isTop)(t)?`${o}vnode(${t.indentation}, ${a}, ${i})`:(0,r.isBlank)(t)?`${o}blank(${a??""})`:`${o}lnode(${t.indentation}, ${a}, ${JSON.stringify(t.sourceLine)}, ${i})`},t.encodeTree=function e(t,n=""){const s=void 0===t.label?"":`, ${JSON.stringify(t.label)}`,i=!(0,r.isBlank)(t)&&t.subs.length>0?`[\n${t.subs.map((t=>e(t,n+"  "))).join(", \n")}\n${n}]`:"[]";switch(t.type){case"blank":return`${n}blankNode(${t.lineNumber}${s})`;case"top":return`topNode(${i}${s})`;case"virtual":return`${n}virtualNode(${t.indentation}, ${i}${s})`;case"line":return`${n}lineNode(${t.indentation}, ${t.lineNumber}, "${t.sourceLine}", ${i}${s})`}},t.firstLineOf=function e(t){if((0,r.isLine)(t)||(0,r.isBlank)(t))return t.lineNumber;for(const n of t.subs){const t=e(n);if(void 0!==t)return t}},t.lastLineOf=function e(t){let n,s=t.subs.length-1;for(;s>=0&&void 0===n;)n=e(t.subs[s]),s--;return void 0!==n||(0,r.isVirtual)(t)||(0,r.isTop)(t)?n:t.lineNumber}},2180:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});const i=n(6647),o=n(1152),a=n(3469);(0,a.registerLanguageSpecificParser)("markdown",o.processMarkdown),(0,a.registerLanguageSpecificParser)("java",i.processJava),s(n(4876),t),s(n(3059),t),s(n(8617),t),s(n(3469),t)},6647:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processJava=void 0;const r=n(4876),s=n(8617),i=n(3469),o=(0,i.buildLabelRules)({package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[\[({]/,closer:/^[\])}]/});t.processJava=function(e){let t=e;return(0,i.labelLines)(t,o),t=(0,i.combineClosersAndOpeners)(t),t=(0,i.flattenVirtual)(t),(0,i.labelVirtualInherited)(t),(0,s.visitTree)(t,(e=>{if("class"===e.label||"interface"===e.label)for(const t of e.subs)(0,r.isBlank)(t)||void 0!==t.label&&"annotation"!==t.label||(t.label="member")}),"bottomUp"),t}},8617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rebuildTree=t.foldTree=t.visitTreeConditionally=t.visitTree=t.resetLineNumbers=t.mapLabels=t.clearLabelsIf=t.clearLabels=void 0;const r=n(4876);function s(e,t,n){!function e(r){"topDown"===n&&t(r),r.subs.forEach((t=>{e(t)})),"bottomUp"===n&&t(r)}(e)}t.clearLabels=function(e){return s(e,(e=>{e.label=void 0}),"bottomUp"),e},t.clearLabelsIf=function(e,t){return s(e,(e=>{e.label=e.label?t(e.label)?void 0:e.label:void 0}),"bottomUp"),e},t.mapLabels=function e(t,n){switch(t.type){case"line":case"virtual":const r=t.subs.map((t=>e(t,n)));return{...t,subs:r,label:t.label?n(t.label):void 0};case"blank":return{...t,label:t.label?n(t.label):void 0};case"top":return{...t,subs:t.subs.map((t=>e(t,n))),label:t.label?n(t.label):void 0}}},t.resetLineNumbers=function(e){let t=0;s(e,(function(e){(0,r.isVirtual)(e)||(0,r.isTop)(e)||(e.lineNumber=t,t++)}),"topDown")},t.visitTree=s,t.visitTreeConditionally=function(e,t,n){!function e(r){if("topDown"===n&&!t(r))return!1;let s=!0;return r.subs.forEach((t=>{s=s&&e(t)})),"bottomUp"===n&&(s=s&&t(r)),s}(e)},t.foldTree=function(e,t,n,r){let i=t;return s(e,(function(e){i=n(e,i)}),r),i},t.rebuildTree=function(e,t,n){const s=e=>{if(void 0!==n&&n(e))return e;{const n=e.subs.map(s).filter((e=>void 0!==e));return e.subs=n,t(e)}},i=s(e);return void 0!==i?i:(0,r.topNode)()}},1152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processMarkdown=void 0;const r=n(4876),s=n(3469),i=(0,s.buildLabelRules)({heading:/^# /,subheading:/^## /,subsubheading:/### /});t.processMarkdown=function(e){let t=e;if((0,s.labelLines)(t,i),(0,r.isBlank)(t))return t;function n(e){return"heading"===e.label?1:"subheading"===e.label?2:"subsubheading"===e.label?3:void 0}let o=[t],a=[...t.subs];t.subs=[];for(const e of a){const t=n(e);if(void 0===t||(0,r.isBlank)(e))o[o.length-1].subs.push(e);else{for(;o.length<t;)o.push(o[o.length-1]);for(o[t-1].subs.push(e),o[t]=e;o.length>t+1;)o.pop()}}return t=(0,s.groupBlocks)(t),t=(0,s.flattenVirtual)(t),(0,s.labelVirtualInherited)(t),t}},3469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTree=t.registerLanguageSpecificParser=t.flattenVirtual=t.groupBlocks=t.combineClosersAndOpeners=t.buildLabelRules=t.labelVirtualInherited=t.labelLines=t.parseRaw=void 0;const r=n(4876),s=n(8617);function i(e){const t=e.split("\n"),n=t.map((e=>e.match(/^\s*/)[0].length)),s=t.map((e=>e.trimLeft()));function i(e){const[t,i]=o(e+1,n[e]);return[(0,r.lineNode)(n[e],e,s[e],t),i]}function o(e,t){let o;const a=[];let l,u=e;for(;u<s.length&&(""===s[u]||n[u]>t);)if(""===s[u])void 0===l&&(l=u),u+=1;else{if(void 0!==l){for(let e=l;e<u;e++)a.push((0,r.blankNode)(e));l=void 0}[o,u]=i(u),a.push(o)}return void 0!==l&&(u=l),[a,u]}const[a,l]=o(0,-1);let u=l;for(;u<s.length&&""===s[u];)a.push((0,r.blankNode)(u)),u+=1;if(u<s.length)throw new Error(`Parsing did not go to end of file. Ended at ${u} out of ${s.length}`);return(0,r.topNode)(a)}function o(e,t){(0,s.visitTree)(e,(function(e){if((0,r.isLine)(e)){const n=t.find((t=>t.matches(e.sourceLine)));n&&(e.label=n.label)}}),"bottomUp")}function a(e){return Object.keys(e).map((t=>{let n;return n=e[t].test?n=>e[t].test(n):e[t],{matches:n,label:t}}))}function l(e){const t=(0,s.rebuildTree)(e,(function(e){if(0===e.subs.length||-1===e.subs.findIndex((e=>"closer"===e.label||"opener"===e.label)))return e;const t=[];let n;for(let s=0;s<e.subs.length;s++){const i=e.subs[s],o=e.subs[s-1];if("opener"===i.label&&void 0!==o&&(0,r.isLine)(o))o.subs.push(i),i.subs.forEach((e=>o.subs.push(e))),i.subs=[];else if("closer"===i.label&&void 0!==n&&((0,r.isLine)(i)||(0,r.isVirtual)(i))&&i.indentation>=n.indentation){let e=t.length-1;for(;e>0&&(0,r.isBlank)(t[e]);)e-=1;if(n.subs.push(...t.splice(e+1)),i.subs.length>0){const e=n.subs.findIndex((e=>"newVirtual"!==e.label)),t=n.subs.slice(0,e),s=n.subs.slice(e),o=s.length>0?[(0,r.virtualNode)(i.indentation,s,"newVirtual")]:[];n.subs=[...t,...o,i]}else n.subs.push(i)}else t.push(i),(0,r.isBlank)(i)||(n=i)}return e.subs=t,e}));return(0,s.clearLabelsIf)(e,(e=>"newVirtual"===e)),t}t.parseRaw=i,t.labelLines=o,t.labelVirtualInherited=function(e){(0,s.visitTree)(e,(function(e){if((0,r.isVirtual)(e)&&void 0===e.label){const t=e.subs.filter((e=>!(0,r.isBlank)(e)));1===t.length&&(e.label=t[0].label)}}),"bottomUp")},t.buildLabelRules=a,t.combineClosersAndOpeners=l,t.groupBlocks=function(e,t=r.isBlank,n){return(0,s.rebuildTree)(e,(function(e){if(e.subs.length<=1)return e;const s=[];let i,o=[],a=!1;function l(e=!1){if(void 0!==i&&(s.length>0||!e)){const e=(0,r.virtualNode)(i,o,n);s.push(e)}else o.forEach((e=>s.push(e)))}for(let n=0;n<e.subs.length;n++){const s=e.subs[n],u=t(s);!u&&a&&(l(),o=[]),a=u,o.push(s),(0,r.isBlank)(s)||(i=i??s.indentation)}return l(!0),e.subs=s,e}))},t.flattenVirtual=function(e){return(0,s.rebuildTree)(e,(function(e){return(0,r.isVirtual)(e)&&void 0===e.label&&e.subs.length<=1?0===e.subs.length?void 0:e.subs[0]:(1===e.subs.length&&(0,r.isVirtual)(e.subs[0])&&void 0===e.subs[0].label&&(e.subs=e.subs[0].subs),e)}))};const u=a({opener:/^[\[({]/,closer:/^[\])}]/}),_={};t.registerLanguageSpecificParser=function(e,t){_[e]=t},t.parseTree=function(e,t){const n=i(e),r=_[t??""];return r?r(n):(o(n,u),l(n))}},2417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newLineEnded=t.getPathMarker=t.getLanguageMarker=t.commentBlockAsSingles=t.comment=t.hasLanguageMarker=t.languageCommentMarkers=void 0,t.languageCommentMarkers={abap:{start:'"',end:""},bat:{start:"REM",end:""},bibtex:{start:"%",end:""},blade:{start:"#",end:""},c:{start:"//",end:""},clojure:{start:";",end:""},coffeescript:{start:"//",end:""},cpp:{start:"//",end:""},csharp:{start:"//",end:""},css:{start:"/*",end:"*/"},dart:{start:"//",end:""},dockerfile:{start:"#",end:""},elixir:{start:"#",end:""},erb:{start:"<%#",end:"%>"},erlang:{start:"%",end:""},fsharp:{start:"//",end:""},go:{start:"//",end:""},groovy:{start:"//",end:""},haml:{start:"-#",end:""},handlebars:{start:"{{!",end:"}}"},haskell:{start:"--",end:""},html:{start:"\x3c!--",end:"--\x3e"},ini:{start:";",end:""},java:{start:"//",end:""},javascript:{start:"//",end:""},javascriptreact:{start:"//",end:""},jsonc:{start:"//",end:""},jsx:{start:"//",end:""},julia:{start:"#",end:""},kotlin:{start:"//",end:""},latex:{start:"%",end:""},less:{start:"//",end:""},lua:{start:"--",end:""},makefile:{start:"#",end:""},markdown:{start:"[]: #",end:""},"objective-c":{start:"//",end:""},"objective-cpp":{start:"//",end:""},perl:{start:"#",end:""},php:{start:"//",end:""},powershell:{start:"#",end:""},pug:{start:"//",end:""},python:{start:"#",end:""},ql:{start:"//",end:""},r:{start:"#",end:""},razor:{start:"\x3c!--",end:"--\x3e"},ruby:{start:"#",end:""},rust:{start:"//",end:""},sass:{start:"//",end:""},scala:{start:"//",end:""},scss:{start:"//",end:""},shellscript:{start:"#",end:""},slim:{start:"/",end:""},solidity:{start:"//",end:""},sql:{start:"--",end:""},stylus:{start:"//",end:""},svelte:{start:"\x3c!--",end:"--\x3e"},swift:{start:"//",end:""},terraform:{start:"#",end:""},tex:{start:"%",end:""},typescript:{start:"//",end:""},typescriptreact:{start:"//",end:""},vb:{start:"'",end:""},verilog:{start:"//",end:""},"vue-html":{start:"\x3c!--",end:"--\x3e"},vue:{start:"//",end:""},xml:{start:"\x3c!--",end:"--\x3e"},xsl:{start:"\x3c!--",end:"--\x3e"},yaml:{start:"#",end:""}};const n=["php","plaintext"],r={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function s({source:e}){return e.startsWith("#!")||e.startsWith("<!DOCTYPE")}function i(e,n){const r=t.languageCommentMarkers[n];if(r){const t=""==r.end?"":" "+r.end;return`${r.start} ${e}${t}`}return""}t.hasLanguageMarker=s,t.comment=i,t.commentBlockAsSingles=function(e,n){if(!t.languageCommentMarkers[n]||""===e)return"";const r=e.endsWith("\n"),s=(r?e.slice(0,-1):e).split("\n").map((e=>i(e,n))).join("\n");return r?s+"\n":s},t.getLanguageMarker=function(e){const{languageId:t}=e;return-1!==n.indexOf(t)||s(e)?"":t in r?r[t]:i(`Language: ${t}`,t)},t.getPathMarker=function(e){return e.relativePath?i(`Path: ${e.relativePath}`,e.languageId):""},t.newLineEnded=function(e){return""===e||e.endsWith("\n")?e:e+"\n"}},5563:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createWorker=t.SnippetSemantics=t.SnippetProviderType=t.NeighboringTabsOption=t.NeighboringSnippetType=t.getCursorContext=t.SnippetOrchestrator=t.languageCommentMarkers=t.commentBlockAsSingles=t.comment=t.FileSystem=void 0;const i=n(1017),o=n(1267);s(n(3346),t);var a=n(2271);Object.defineProperty(t,"FileSystem",{enumerable:!0,get:function(){return a.FileSystem}}),s(n(2180),t);var l=n(2417);Object.defineProperty(t,"comment",{enumerable:!0,get:function(){return l.comment}}),Object.defineProperty(t,"commentBlockAsSingles",{enumerable:!0,get:function(){return l.commentBlockAsSingles}}),Object.defineProperty(t,"languageCommentMarkers",{enumerable:!0,get:function(){return l.languageCommentMarkers}});var u=n(6653);Object.defineProperty(t,"SnippetOrchestrator",{enumerable:!0,get:function(){return u.SnippetOrchestrator}}),s(n(8306),t),s(n(9610),t),s(n(8312),t);var _=n(648);Object.defineProperty(t,"getCursorContext",{enumerable:!0,get:function(){return _.getCursorContext}}),s(n(6845),t);var c=n(9125);Object.defineProperty(t,"NeighboringSnippetType",{enumerable:!0,get:function(){return c.NeighboringSnippetType}}),Object.defineProperty(t,"NeighboringTabsOption",{enumerable:!0,get:function(){return c.NeighboringTabsOption}});var d=n(4830);Object.defineProperty(t,"SnippetProviderType",{enumerable:!0,get:function(){return d.SnippetProviderType}}),Object.defineProperty(t,"SnippetSemantics",{enumerable:!0,get:function(){return d.SnippetSemantics}}),s(n(1145),t),t.createWorker=function(){return new o.Worker((0,i.resolve)(__dirname,"..","dist","worker.js"))}},5179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractLocalImportContext=t.getDocComment=void 0;const r=n(1017),s=n(8306);function i(e,t){let n=t.namedChild(1)?.text.slice(1,-1);if(!n||!n.startsWith("."))return null;if(""===(0,r.extname)(n))n+=".ts";else if(".ts"!==(0,r.extname)(n))return null;return(0,r.join)((0,r.dirname)(e),n)}function o(e){let t=[];if("import_clause"===e.namedChild(0)?.type){let n=e.namedChild(0);if("named_imports"===n?.namedChild(0)?.type){let e=n.namedChild(0);for(let n of e?.namedChildren??[])if("import_specifier"===n.type){const e=n.childForFieldName("name")?.text;if(e){const r=n.childForFieldName("alias")?.text;t.push({name:e,alias:r})}}}}return t}const a=new Map,l=1e3,u=2e3;function _(e,t){let n=t?.childForFieldName("name")?.text??"";switch(t?.type){case"ambient_declaration":return _(e,t.namedChild(0));case"interface_declaration":case"enum_declaration":case"type_alias_declaration":return{name:n,decl:t.text};case"function_declaration":case"function_signature":return{name:n,decl:c(e,t)};case"class_declaration":{let r=function(e,t){let n=t.childForFieldName("body");if(n)return n.namedChildren.map((t=>p(e,t))).filter((e=>e))}(e,t),s="";if(r){let n=t.childForFieldName("body");s=`declare ${e.substring(t.startIndex,n.startIndex+1)}`,s+=r.map((e=>"\n"+e)).join(""),s+="\n}"}return{name:n,decl:s}}}return{name:n,decl:""}}function c(e,t){const n=t.childForFieldName("return_type")?.endIndex??t.childForFieldName("parameters")?.endIndex;if(void 0!==n){let r=e.substring(t.startIndex,n)+";";return"function_declaration"===t.type||"function_signature"===t.type?"declare "+r:r}return""}function d(e,t){const n=(0,s.getFirstPrecedingComment)(t);return n?e.substring(n.startIndex,t.startIndex):""}function p(e,t){if("accessibility_modifier"===t?.firstChild?.type&&"private"===t.firstChild.text)return"";const n=function(e,t){let n=t.startIndex-1;for(;n>=0&&(" "===e[n]||"\t"===e[n]);)n--;if(n<0||"\n"===e[n])return e.substring(n+1,t.startIndex)}(e,(0,s.getFirstPrecedingComment)(t)??t)??"  ",r=d(e,t);switch(t.type){case"ambient_declaration":const s=t.namedChild(0);return s?n+r+p(e,s):"";case"method_definition":case"method_signature":return n+r+c(e,t);case"public_field_definition":{let s=t.childForFieldName("type")?.endIndex??t.childForFieldName("name")?.endIndex;if(void 0!==s)return n+r+e.substring(t.startIndex,s)+";"}}return""}async function m(e,t,n){let r=new Map,i=-1;try{i=await n.mtime(e)}catch{return r}let o=a.get(e);if(o&&o.mtime===i)return o.exports;if("typescript"===t){let i=null;try{let o=(await n.readFile(e)).toString();i=await(0,s.parseTreeSitter)(t,o);for(let e of(0,s.queryExports)(t,i.rootNode))for(let t of e.captures){let e=t.node;if("export_statement"===e.type){let t=e.childForFieldName("declaration");if(t?.hasError())continue;let{name:n,decl:s}=_(o,t);if(n){s=d(o,e)+s;let t=r.get(n);t||(t=[],r.set(n,t)),t.push(s)}}}}catch{}finally{i&&i.delete()}}if(a.size>u)for(let e of a.keys())if(a.delete(e),r.size<=l)break;return a.set(e,{mtime:i,exports:r}),r}t.getDocComment=d;const h=/^\s*import\s*(type|)\s*\{[^}]*\}\s*from\s*['"]\./gm;t.extractLocalImportContext=async function(e,t){let{source:n,uri:r,languageId:a}=e;return t&&"typescript"===a?async function(e,t,n){let r="typescript",a=[];const l=function(e){let t,n=-1;h.lastIndex=-1;do{t=h.exec(e),t&&(n=h.lastIndex+t.length)}while(t);if(-1===n)return-1;const r=e.indexOf("\n",n);return-1!==r?r:e.length}(e);if(-1===l)return a;e=e.substring(0,l);let u=await(0,s.parseTreeSitter)(r,e);try{for(let e of function(e){let t=[];for(let n of e.namedChildren)"import_statement"===n.type&&t.push(n);return t}(u.rootNode)){let s=i(t,e);if(!s)continue;let l=o(e);if(0===l.length)continue;let u=await m(s,r,n);for(let e of l)u.has(e.name)&&a.push(...u.get(e.name))}}finally{u.delete()}return a}(n,r,t):[]}},6653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SnippetOrchestrator=void 0;const r=n(926),s=n(5506),i=[r.LanguageSnippetProvider,s.PathSnippetProvider];t.SnippetOrchestrator=class{constructor(){this.providers=i.map((e=>new e))}async getSnippets(e){return new Promise((async(t,n)=>{const r=[],s=setTimeout((()=>{t(r)}),250);r.push(...(await Promise.all(this.providers.map((t=>t.getSnippets(e))))).flat()),clearTimeout(s),t(r)}))}}},8306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCallSites=t.getFunctionPositions=t.getFirstPrecedingComment=t.isFunctionDefinition=t.isFunction=t.getAncestorWithSiblingFunctions=t.queryPythonIsDocstring=t.queryGlobalVars=t.queryExports=t.queryImports=t.queryFunctions=t.getBlockCloseToken=t.parsesWithoutError=t.parseTreeSitter=t.getLanguage=t.languageIdToWasmLanguage=t.isSupportedLanguageId=t.WASMLanguage=void 0;const r=n(1017),s=n(4087),i=n(4087);var o;!function(e){e.Python="python",e.JavaScript="javascript",e.TypeScript="typescript",e.TSX="tsx",e.Go="go",e.Ruby="ruby"}(o=t.WASMLanguage||(t.WASMLanguage={}));const a={python:o.Python,javascript:o.JavaScript,javascriptreact:o.JavaScript,jsx:o.JavaScript,typescript:o.TypeScript,typescriptreact:o.TSX,go:o.Go,ruby:o.Ruby};function l(e){if(!(e in a))throw new Error(`Unrecognized language: ${e}`);return a[e]}t.isSupportedLanguageId=function(e){return e in a},t.languageIdToWasmLanguage=l;const u="[\n    (function body: (statement_block) @body)\n    (function_declaration body: (statement_block) @body)\n    (generator_function body: (statement_block) @body)\n    (generator_function_declaration body: (statement_block) @body)\n    (method_definition body: (statement_block) @body)\n    (arrow_function body: (statement_block) @body)\n  ] @function",_={python:[["(function_definition body: (block\n             (expression_statement (string))? @docstring) @body) @function"],['(ERROR ("def" (identifier) (parameters))) @function']],javascript:[[u]],typescript:[[u]],tsx:[[u]],go:[["[\n            (function_declaration body: (block) @body)\n            (method_declaration body: (block) @body)\n          ] @function"]],ruby:[['[\n            (method name: (_) parameters: (method_parameters)? @params [(_)+ "end"] @body)\n            (singleton_method name: (_) parameters: (method_parameters)? @params [(_)+ "end"] @body)\n          ] @function']]},c='(variable_declarator value: (call_expression function: ((identifier) @req (#eq? @req "require"))))',d=`\n    (lexical_declaration ${c}+)\n    (variable_declaration ${c}+)\n`,p=[[`(program [ ${d} ] @import)`],["(program [ (import_statement) (import_alias) ] @import)"]],m={python:[["(module (future_import_statement) @import)"],["(module (import_statement) @import)"],["(module (import_from_statement) @import)"]],javascript:[[`(program [ ${d} ] @import)`],["(program [ (import_statement) ] @import)"]],typescript:p,tsx:p,go:[],ruby:[]},h=[["(program (export_statement) @export)"]],f={python:[],javascript:h,typescript:h,tsx:h,go:[],ruby:[]},g={python:[["(module (global_statement) @globalVar)"],["(module (expression_statement) @globalVar)"]],javascript:[],typescript:[],tsx:[],go:[],ruby:[]},b=["function","function_declaration","generator_function","generator_function_declaration","method_definition","arrow_function"],y={python:new Set(["function_definition"]),javascript:new Set(b),typescript:new Set(b),tsx:new Set(b),go:new Set(["function_declaration","method_declaration"]),ruby:new Set(["method","singleton_method"])},w={python:e=>"module"===e.type||"block"===e.type&&"class_definition"===e.parent?.type,javascript:e=>"program"===e.type||"class_body"===e.type,typescript:e=>"program"===e.type||"class_body"===e.type,tsx:e=>"program"===e.type||"class_body"===e.type,go:e=>"source_file"===e.type,ruby:e=>"program"===e.type||"class"===e.type},S=new Map;async function E(e){const t=l(e);if(!S.has(t)){const e=await async function(e){await s.init();const t=(0,r.resolve)(__dirname,"..","dist",`tree-sitter-${e}.wasm`);return i.Language.load(t)}(t);S.set(t,e)}return S.get(t)}async function v(e,t){let n=await E(e);const r=new s;r.setLanguage(n);const i=r.parse(t);return r.delete(),i}function M(e,t){const n=[];for(const r of e){if(!r[1]){const e=t.tree.getLanguage();r[1]=e.query(r[0])}n.push(...r[1].matches(t))}return n}function T(e,t){return M(_[l(e)],t)}t.getLanguage=E,t.parseTreeSitter=v,t.parsesWithoutError=async function(e,t){const n=await v(e,t),r=!n.rootNode.hasError();return n.delete(),r},t.getBlockCloseToken=function(e){switch(l(e)){case o.Python:return null;case o.JavaScript:case o.TypeScript:case o.TSX:case o.Go:return"}";case o.Ruby:return"end"}},t.queryFunctions=T,t.queryImports=function(e,t){return M(m[l(e)],t)},t.queryExports=function(e,t){return M(f[l(e)],t)},t.queryGlobalVars=function(e,t){return M(g[l(e)],t)};const I=["[\n    (class_definition (block (expression_statement (string))))\n    (function_definition (block (expression_statement (string))))\n]"];function k(e,t){return y[l(e)].has(t.type)}t.queryPythonIsDocstring=function(e){return 1==M([I],e).length},t.getAncestorWithSiblingFunctions=function(e,t){const n=w[l(e)];for(;t.parent;){if(n(t.parent))return t;t=t.parent}return t.parent?t:null},t.isFunction=k,t.isFunctionDefinition=function(e,t){switch(l(e)){case o.Python:case o.Go:case o.Ruby:return k(e,t);case o.JavaScript:case o.TypeScript:case o.TSX:if("function_declaration"===t.type||"generator_function_declaration"===t.type||"method_definition"===t.type)return!0;if("lexical_declaration"===t.type||"variable_declaration"===t.type){if(t.namedChildCount>1)return!1;let n=t.namedChild(0);if(null==n)return!1;let r=n.namedChild(1);return null!==r&&k(e,r)}if("expression_statement"===t.type){let n=t.namedChild(0);if("assignment_expression"===n?.type){let t=n.namedChild(1);return null!==t&&k(e,t)}}return!1}},t.getFirstPrecedingComment=function(e){let t=e;for(;"comment"===t.previousSibling?.type;){let e=t.previousSibling;if(e.endPosition.row<t.startPosition.row-1)break;t=e}return"comment"===t?.type?t:null},t.getFunctionPositions=async function(e,t){const n=await v(e,t),r=T(e,n.rootNode).map((e=>{const t=e.captures.find((e=>"function"===e.name)).node;return{startIndex:t.startIndex,endIndex:t.endIndex}}));return n.delete(),r};const x={python:[["(call\n            function:  [\n                (identifier) @caller\n                (attribute attribute:(identifier) @caller)\n            ]\n            arguments: (argument_list) @args\n        )"]],javascript:[],tsx:[],typescript:[],go:[],ruby:[]};t.getCallSites=async function(e){if(!(e.languageId in x))return[];let t=e.offset,n=e.source.substring(0,t);const r=Math.max(n.length-5e3,0),s=n.substring(0,r).split("\n").length-1;t-=r,n=n.substring(r),n+=")))))";let i=[];const o=await v(e.languageId,n);return M(x[a[e.languageId]],o.rootNode).forEach(((e,r)=>{let o="",a=0,l=0,u=0,_=0;if(e.captures.forEach(((e,t)=>{const r=e.node;"caller"==e.name?(o=n.substring(r.startIndex,r.endIndex),a=r.startPosition.row+s,l=r.startPosition.column):"args"==e.name&&(u=r.startIndex,_=r.endIndex)})),t>=u&&t<=_){const e={line:a,character:l};i.push([o,e])}})),o.delete(),i.map((([e,t])=>({name:e,position:t})))}},9610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeStart=t.isBlockBodyFinished=t.isEmptyBlockStart=t.getBlockParser=void 0;const r=n(8306);class s{constructor(e,t,n){this.languageId=e,this.nodeMatch=t,this.nodeTypesWithBlockOrStmtChild=n}async getNodeMatchAtPosition(e,t,n){const s=await(0,r.parseTreeSitter)(this.languageId,e);try{let e=s.rootNode.descendantForIndex(t);for(;e;){const t=this.nodeMatch[e.type];if(t){if(!this.nodeTypesWithBlockOrStmtChild.has(e.type))break;const n=this.nodeTypesWithBlockOrStmtChild.get(e.type),r=""==n?e.namedChildren[0]:e.childForFieldName(n);if(r?.type==t)break}e=e.parent}if(!e)return;return n(e)}finally{s.delete()}}getNextBlockAtPosition(e,t,n){return this.getNodeMatchAtPosition(e,t,(e=>{let t=e.children.reverse().find((t=>t.type==this.nodeMatch[e.type]));if(t){if("python"==this.languageId&&t.parent){const e=":"==t.parent.type?t.parent.parent:t.parent;let n=e?.nextSibling;for(;n&&"comment"==n.type;){const r=n.startPosition.row==t.endPosition.row&&n.startPosition.column>=t.endPosition.column,s=n.startPosition.row>e.endPosition.row&&n.startPosition.column>e.startPosition.column;if(!r&&!s)break;t=n,n=n.nextSibling}}if(!(t.endIndex>=t.tree.rootNode.endIndex-1&&(t.hasError()||t.parent.hasError())))return n(t)}}))}async isBlockBodyFinished(e,t,n){const r=(e+t).trimEnd(),s=await this.getNextBlockAtPosition(r,n,(e=>e.endIndex));if(void 0!==s&&s<r.length){const t=s-e.length;return t>0?t:void 0}}getNodeStart(e,t){const n=e.trimEnd();return this.getNodeMatchAtPosition(n,t,(e=>e.startIndex))}}class i extends s{constructor(e,t,n,r,s){super(e,r,s),this.blockEmptyMatch=t,this.lineMatch=n}isBlockStart(e){return this.lineMatch.test(e.trimStart())}async isBlockBodyEmpty(e,t){const n=await this.getNextBlockAtPosition(e,t,(n=>{n.startIndex<t&&(t=n.startIndex);let r=e.substring(t,n.endIndex).trim();return""==r||r.replace(/\s/g,"")==this.blockEmptyMatch}));return void 0===n||n}async isEmptyBlockStart(e,t){return t=o(e,t),this.isBlockStart(function(e,t){const n=e.lastIndexOf("\n",t-1);let r=e.indexOf("\n",t);return r<0&&(r=e.length),e.slice(n+1,r)}(e,t))&&this.isBlockBodyEmpty(e,t)}}function o(e,t){let n=t;for(;n>0&&/\s/.test(e.charAt(n-1));)n--;return n}function a(e,t){const n=e.startIndex,r=e.startIndex-e.startPosition.column,s=t.substring(r,n);if(/^\s*$/.test(s))return s}function l(e,t,n){if(t.startPosition.row<=e.startPosition.row)return!1;const r=a(e,n),s=a(t,n);return void 0!==r&&void 0!==s&&r.startsWith(s)}class u extends s{constructor(e,t,n,r,s,i,o){super(e,t,n),this.startKeywords=r,this.blockNodeType=s,this.emptyStatementType=i,this.curlyBraceLanguage=o}isBlockEmpty(e,t){let n=e.text.trim();return this.curlyBraceLanguage&&(n.startsWith("{")&&(n=n.slice(1)),n.endsWith("}")&&(n=n.slice(0,-1)),n=n.trim()),0==n.length||!("python"!=this.languageId||"class_definition"!=e.parent?.type&&"function_definition"!=e.parent?.type||1!=e.children.length||!(0,r.queryPythonIsDocstring)(e.parent))}async isEmptyBlockStart(e,t){if(t>e.length)throw new RangeError("Invalid offset");for(let n=t;n<e.length&&"\n"!=e.charAt(n);n++)if(/\S/.test(e.charAt(n)))return!1;t=o(e,t);const n=await(0,r.parseTreeSitter)(this.languageId,e);try{const r=n.rootNode.descendantForIndex(t-1);if(null==r)return!1;if(this.curlyBraceLanguage&&"}"==r.type)return!1;if(("javascript"==this.languageId||"typescript"==this.languageId)&&r.parent&&"object"==r.parent.type&&"{"==r.parent.text.trim())return!0;if("typescript"==this.languageId){let n=r;for(;n.parent;){if("function_signature"==n.type||"method_signature"==n.type){const s=r.nextSibling;return!!(s&&n.hasError()&&l(n,s,e))||!n.children.find((e=>";"==e.type))&&n.endIndex<=t}n=n.parent}}let s=null,i=null,o=null,a=r;for(;null!=a;){if(a.type==this.blockNodeType){i=a;break}if(this.nodeMatch[a.type]){o=a;break}if("ERROR"==a.type){s=a;break}a=a.parent}if(null!=i){if(!i.parent||!this.nodeMatch[i.parent.type])return!1;if("python"==this.languageId){const e=i.previousSibling;if(null!=e&&e.hasError()&&(e.text.startsWith('"""')||e.text.startsWith("'''")))return!0}return this.isBlockEmpty(i,t)}if(null!=s){if("module"==s.previousSibling?.type||"internal_module"==s.previousSibling?.type||"def"==s.previousSibling?.type)return!0;const e=[...s.children].reverse(),n=e.find((e=>this.startKeywords.includes(e.type)));let i=e.find((e=>e.type==this.blockNodeType));if(n){switch(this.languageId){case"python":{let t;"try"==n.type&&"identifier"==r.type&&r.text.length>4&&(i=e.find((e=>e.hasError()))?.children.find((e=>"block"==e.type)));let o=0;for(const e of s.children){if(":"==e.type&&0==o){t=e;break}"("==e.type&&(o+=1),")"==e.type&&(o-=1)}if(t&&n.endIndex<=t.startIndex&&t.nextSibling){if("def"==n.type){const e=t.nextSibling;if('"'==e.type||"'"==e.type)return!0;if("ERROR"==e.type&&('"""'==e.text||"'''"==e.text))return!0}return!1}break}case"javascript":{const t=e.find((e=>"formal_parameters"==e.type));if("class"==n.type&&t)return!0;const r=e.find((e=>"{"==e.type));if(r&&r.startIndex>n.endIndex&&null!=r.nextSibling)return!1;if(e.find((e=>"do"==e.type))&&"while"==n.type)return!1;if("=>"==n.type&&n.nextSibling&&"{"!=n.nextSibling.type)return!1;break}case"typescript":{const t=e.find((e=>"{"==e.type));if(t&&t.startIndex>n.endIndex&&null!=t.nextSibling)return!1;if(e.find((e=>"do"==e.type))&&"while"==n.type)return!1;if("=>"==n.type&&n.nextSibling&&"{"!=n.nextSibling.type)return!1;break}}return!(i&&i.startIndex>n.endIndex)||this.isBlockEmpty(i,t)}}if(null!=o){const e=this.nodeMatch[o.type],n=o.children.slice().reverse().find((t=>t.type==e));if(n)return this.isBlockEmpty(n,t);if(this.nodeTypesWithBlockOrStmtChild.has(o.type)){const e=this.nodeTypesWithBlockOrStmtChild.get(o.type),t=""==e?o.children[0]:o.childForFieldName(e);if(t&&t.type!=this.blockNodeType&&t.type!=this.emptyStatementType)return!1}return!0}return!1}finally{n.delete()}}}const _={python:new u("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new u("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new u("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new u("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new i("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new i("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map)};function c(e){return _[(0,r.languageIdToWasmLanguage)(e)]}t.getBlockParser=c,t.isEmptyBlockStart=async function(e,t,n){return!!(0,r.isSupportedLanguageId)(e)&&c(e).isEmptyBlockStart(t,n)},t.isBlockBodyFinished=async function(e,t,n,s){if((0,r.isSupportedLanguageId)(e))return c(e).isBlockBodyFinished(t,n,s)},t.getNodeStart=async function(e,t,n){if((0,r.isSupportedLanguageId)(e))return c(e).getNodeStart(t,n)}},8312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrompt=t.normalizeLanguageId=t.PromptOptions=t.SuffixStartMode=t.SuffixMatchOption=t.SuffixOption=t.LineEndingOptions=t.LocalImportContextOption=t.SnippetSelectionOption=t.SnippetPositionOption=t.PathMarkerOption=t.LanguageMarkerOption=t.DEFAULT_NUM_OF_SNIPPETS=t.TOKENS_RESERVED_FOR_SUFFIX_ENCODING=t.MAX_EDIT_DISTANCE_LENGTH=t.MAX_PROMPT_LENGTH=void 0;const r=n(2417),s=n(5179),i=n(7670),o=n(6845),a=n(9125),l=n(4830),u=n(2395),_=n(1145),c=n(4456);let d={text:"",tokens:[]};var p,m,h,f,g,b,y,w,S;t.MAX_PROMPT_LENGTH=1500,t.MAX_EDIT_DISTANCE_LENGTH=50,t.TOKENS_RESERVED_FOR_SUFFIX_ENCODING=5,t.DEFAULT_NUM_OF_SNIPPETS=4,function(e){e.NoMarker="nomarker",e.Top="top",e.Always="always"}(p=t.LanguageMarkerOption||(t.LanguageMarkerOption={})),function(e){e.NoMarker="nomarker",e.Top="top",e.Always="always"}(m=t.PathMarkerOption||(t.PathMarkerOption={})),function(e){e.TopOfText="top",e.DirectlyAboveCursor="aboveCursor",e.AfterSiblings="afterSiblings"}(h=t.SnippetPositionOption||(t.SnippetPositionOption={})),function(e){e.BestMatch="bestMatch",e.TopK="topK"}(f=t.SnippetSelectionOption||(t.SnippetSelectionOption={})),function(e){e.NoContext="nocontext",e.Declarations="declarations"}(g=t.LocalImportContextOption||(t.LocalImportContextOption={})),function(e){e.ConvertToUnix="unix",e.KeepOriginal="keep"}(b=t.LineEndingOptions||(t.LineEndingOptions={})),(S=t.SuffixOption||(t.SuffixOption={})).None="none",S.FifteenPercent="fifteenPercent",function(e){e.Equal="equal",e.Levenshtein="levenshteineditdistance"}(y=t.SuffixMatchOption||(t.SuffixMatchOption={})),function(e){e.Cursor="cursor",e.CursorTrimStart="cursortrimstart",e.SiblingBlock="siblingblock",e.SiblingBlockTrimStart="siblingblocktrimstart"}(w=t.SuffixStartMode||(t.SuffixStartMode={}));class E{constructor(e,n){if(this.fs=e,this.maxPromptLength=t.MAX_PROMPT_LENGTH,this.languageMarker=p.Top,this.pathMarker=m.Top,this.localImportContext=g.Declarations,this.snippetPosition=h.TopOfText,this.numberOfSnippets=t.DEFAULT_NUM_OF_SNIPPETS,this.snippetProviderOptions={"neighboring-tabs":{normalizationFunction:"affine",normalizationParams:[1,0]},retrieval:{normalizationFunction:"affine",normalizationParams:[-1,0]},"symbol-def":{normalizationFunction:"affine",normalizationParams:[1,0],reservedSnippetCount:2},language:{normalizationFunction:"affine",normalizationParams:[1,0]},path:{normalizationFunction:"affine",normalizationParams:[1,0]}},this.neighboringTabs=a.NeighboringTabsOption.Eager,this.neighboringSnippetTypes=a.NeighboringSnippetType.NeighboringSnippets,this.lineEnding=b.ConvertToUnix,this.suffixPercent=0,this.snippetPercent=0,this.suffixStartMode=w.Cursor,this.tokenizerName=_.TokenizerName.cushman001,this.suffixMatchThreshold=0,this.suffixMatchCriteria=y.Levenshtein,this.fimSuffixLengthThreshold=0,this.cursorContextFix=!1,this.cursorSnippetsPickingStrategy=o.CursorSnippetsPickingStrategy.CursorJaccard,n){const e=n?.snippetSelection;if(e&&!Object.values(f).includes(e))throw new Error(`Invalid value for snippetSelection: ${e}`);for(const e in n)if("snippetProviderOptions"!==e)this[e]=n[e];else{const e=n.snippetProviderOptions||{};let t;for(t in e){const n=e[t];n&&(this.snippetProviderOptions[t]={...this.snippetProviderOptions[t],...n})}}}if(this.suffixPercent<0||this.suffixPercent>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${this.suffixPercent}`);if(this.snippetPercent<0||this.snippetPercent>100)throw new Error(`snippetPercent must be between 0 and 100, but was ${this.snippetPercent}`);if(this.suffixMatchThreshold<0||this.suffixMatchThreshold>100)throw new Error(`suffixMatchThreshold must be at between 0 and 100, but was ${this.suffixMatchThreshold}`);if(this.fimSuffixLengthThreshold<-1)throw new Error(`fimSuffixLengthThreshold must be at least -1, but was ${this.fimSuffixLengthThreshold}`);if(void 0!==this.indentationMinLength&&void 0!==this.indentationMaxLength){if(this.indentationMinLength>this.indentationMaxLength)throw new Error(`indentationMinLength must be less than or equal to indentationMaxLength, but was ${this.indentationMinLength} and ${this.indentationMaxLength}`);if(this.indentationMinLength<0)throw new Error(`indentationMinLength must be greater than or equal to zero but was ${this.indentationMinLength}`)}if(this.snippetSelection===f.TopK&&void 0===this.snippetSelectionK)throw new Error("snippetSelectionK must be defined.");if(this.snippetSelection===f.TopK&&this.snippetSelectionK&&this.snippetSelectionK<=0)throw new Error(`snippetSelectionK must be greater than 0, but was ${this.snippetSelectionK}`)}}t.PromptOptions=E;const v={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor"};function M(e){return e=e.toLowerCase(),v[e]??e}t.normalizeLanguageId=M,t.getPrompt=async function(e,n,o={},f=[],b=[],S){const v=new E(e,o),T=(0,_.getTokenizer)(v.tokenizerName);let I=!1;const{source:k,offset:x}=n;if(x<0||x>k.length)throw new Error(`Offset ${x} is out of range.`);n.languageId=M(n.languageId);const N=new c.Priorities,P=N.justBelow(c.Priorities.TOP),F=v.languageMarker===p.Always?N.justBelow(c.Priorities.TOP):N.justBelow(P),L=v.pathMarker===m.Always?N.justBelow(c.Priorities.TOP):N.justBelow(P),O=N.justBelow(P),C=N.justBelow(O),A=N.justAbove(P),R=new c.PromptWishlist(T,v.lineEnding);let D,j=b.find((e=>e.provider===l.SnippetProviderType.Language));v.languageMarker!==p.NoMarker&&j&&(D=R.append(j.snippet,c.PromptElementKind.LanguageMarker,F));let B,U=b.find((e=>e.provider===l.SnippetProviderType.Path));if(v.pathMarker!==m.NoMarker&&void 0!==U&&U.snippet.length>0&&(B=R.append(U.snippet,c.PromptElementKind.PathMarker,L)),v.localImportContext!==g.NoContext)for(const e of await(0,s.extractLocalImportContext)(n,v.fs))R.append((0,r.newLineEnded)(e),c.PromptElementKind.ImportedFile,O);const z=v.neighboringTabs===a.NeighboringTabsOption.None||0===f.length?[]:await(0,a.getNeighborSnippets)(n,f,v.neighboringSnippetTypes,v.neighboringTabs,v.cursorContextFix,v.indentationMinLength,v.indentationMaxLength,v.snippetSelection,v.snippetSelectionK,S,v.cursorSnippetsPickingStrategy);b=b.filter((e=>e.provider!==l.SnippetProviderType.Language&&e.provider!==l.SnippetProviderType.Path));const W=[...b,...z];function H(){const e=Math.round(v.snippetPercent/100*v.maxPromptLength);(0,l.processSnippetsForWishlist)(W,n.languageId,T,v.snippetProviderOptions,{priorities:N,low:C,high:A},v.numberOfSnippets,e).forEach((e=>{let t=c.PromptElementKind.SimilarFile;e.provider===l.SnippetProviderType.Retrieval?t=c.PromptElementKind.RetrievalSnippet:e.provider==l.SnippetProviderType.SymbolDef&&(t=c.PromptElementKind.SymbolDefinition),R.append(e.announcedSnippet,t,e.priority,e.tokens,e.normalizedScore)}))}v.snippetPosition===h.TopOfText&&H();const V=[];let Z;if(Z=k.substring(0,x),v.snippetPosition===h.DirectlyAboveCursor){const e=Z.lastIndexOf("\n")+1,t=Z.substring(0,e),n=Z.substring(e);R.appendLineForLine(t,c.PromptElementKind.BeforeCursor,P).forEach((e=>V.push(e))),H(),n.length>0&&(V.push(R.append(n,c.PromptElementKind.AfterCursor,P)),V.length>1&&R.require(V[V.length-2],V[V.length-1]))}else R.appendLineForLine(Z,c.PromptElementKind.BeforeCursor,P).forEach((e=>V.push(e)));p.Top===v.languageMarker&&V.length>0&&void 0!==D&&R.require(D,V[0]),m.Top===v.pathMarker&&V.length>0&&void 0!==B&&(D?R.require(B,D):R.require(B,V[0])),void 0!==D&&void 0!==B&&R.exclude(B,D);let q=k.slice(x);if(0===v.suffixPercent||q.length<=v.fimSuffixLengthThreshold)return R.fulfill(v.maxPromptLength);{let e=n.offset;v.suffixStartMode!==w.Cursor&&v.suffixStartMode!==w.CursorTrimStart&&(e=await(0,i.getSiblingFunctionStart)(n));const r=v.maxPromptLength-t.TOKENS_RESERVED_FOR_SUFFIX_ENCODING;let s=Math.floor(r*(100-v.suffixPercent)/100),o=R.fulfill(s);const a=r-o.prefixLength;let l=k.slice(e);v.suffixStartMode!==w.SiblingBlockTrimStart&&v.suffixStartMode!==w.CursorTrimStart||(l=l.trimStart());const _=T.takeFirstTokens(l,a);if(_.tokens.length<=a-3&&(s=r-_.tokens.length,o=R.fulfill(s)),v.suffixMatchCriteria===y.Equal)_.tokens.length===d.tokens.length&&_.tokens.every(((e,t)=>e===d.tokens[t]))&&(I=!0);else if(v.suffixMatchCriteria===y.Levenshtein&&_.tokens.length>0&&v.suffixMatchThreshold>0){const e=(0,u.findEditDistanceScore)(_.tokens.slice(0,t.MAX_EDIT_DISTANCE_LENGTH),d.tokens.slice(0,t.MAX_EDIT_DISTANCE_LENGTH))?.score;100*e<v.suffixMatchThreshold*Math.min(t.MAX_EDIT_DISTANCE_LENGTH,_.tokens.length)&&(I=!0)}return!0===I&&d.tokens.length<=a?(d.tokens.length<=a-3&&(s=r-d.tokens.length,o=R.fulfill(s)),o.suffix=d.text,o.suffixLength=d.tokens.length):(o.suffix=_.text,o.suffixLength=_.tokens.length,d=_),o}}},7670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSiblingFunctionStart=void 0;const r=n(8306);t.getSiblingFunctionStart=async function({source:e,offset:t,languageId:n}){if((0,r.isSupportedLanguageId)(n)){const s=await(0,r.parseTreeSitter)(n,e);try{let i=t;for(;i>=0&&/\s/.test(e[i]);)i--;const o=s.rootNode.descendantForIndex(i),a=(0,r.getAncestorWithSiblingFunctions)(n,o);if(a){for(let e=a.nextSibling;e;e=e.nextSibling)if((0,r.isFunctionDefinition)(n,e)){const n=(0,r.getFirstPrecedingComment)(e),s=n?.startIndex??e.startIndex;if(s<t)continue;return s}if(a.endIndex>=t)return a.endIndex}}finally{s.delete()}}return t}},648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCursorContext=void 0;const r=n(1145),s={tokenizerName:r.TokenizerName.cushman002};t.getCursorContext=function e(t,n={}){const i=function(e){return{...s,...e}}(n),o=(0,r.getTokenizer)(i.tokenizerName);if(i.cursorContextFix){if(void 0!==i.maxLineCount&&i.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(void 0!==i.maxTokenLength&&i.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(0===i.maxLineCount||0===i.maxTokenLength)return{context:"",lineCount:0,tokenLength:0,tokenizerName:i.tokenizerName};let e=t.source.slice(0,t.offset);return void 0!==i.maxLineCount&&(e=e.split("\n").slice(-i.maxLineCount).join("\n")),void 0!==i.maxTokenLength&&(e=o.takeLastLinesTokens(e,i.maxTokenLength)),{context:e,lineCount:e.split("\n").length,tokenLength:o.tokenLength(e),tokenizerName:i.tokenizerName}}if(void 0===i.maxTokenLength&&void 0!==i.maxLineCount){const e=t.source.slice(0,t.offset).split("\n").slice(-i.maxLineCount),n=e.join("\n");return{context:n,lineCount:e.length,tokenLength:o.tokenLength(n),tokenizerName:i.tokenizerName}}if(void 0!==i.maxTokenLength&&void 0===i.maxLineCount){const e=o.takeLastLinesTokens(t.source.slice(0,t.offset),i.maxTokenLength);return{context:e,lineCount:e.split("\n").length,tokenLength:o.tokenLength(e),tokenizerName:i.tokenizerName}}if(void 0!==i.maxTokenLength&&void 0!==i.maxLineCount){const r=e(t,{...n,maxTokenLength:void 0});return r.tokenLength>i.maxTokenLength?e(t,{...n,maxLineCount:void 0}):r}throw new Error("Either maxTokenLength or maxLineCount must be defined")}},6845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CursorHistoryMatcher=t.CursorSnippetsPickingStrategy=void 0;const r=n(8312),s=n(648),i=n(9404),o=n(1467),a=n(4830),l=n(5380);var u;!function(e){e.CursorOnly="cursoronly",e.CursorJaccard="cursorjaccard",e.JaccardCursor="jaccardcursor"}(u=t.CursorSnippetsPickingStrategy||(t.CursorSnippetsPickingStrategy={}));const _=new class{constructor(e){this.keys=[],this.cache={},this.size=e}put(e,t){if(this.cache[e]=t,this.keys.length>this.size){this.keys.push(e);const t=this.keys.shift()??"";delete this.cache[t]}}get(e){return this.cache[e]}}(20);class c extends o.WindowedMatcher{constructor(e,t,n){super(e,n),this.windowLength=t,this.cursorContextFix=n}id(){return"CustomizedFixedWindowSizeJaccardMatcher:"+this.windowLength}getWindowsDelineations(e){return(0,l.getBasicWindowDelineations)(this.windowLength,e)}trimDocument(e){return e.source.slice(0,e.offset).split("\n").slice(-this.windowLength).join("\n")}_getCursorContextInfo(e){return(0,s.getCursorContext)(e,{maxLineCount:this.windowLength,cursorContextFix:this.cursorContextFix})}similarityScore(e,t){return(0,i.computeScore)(e,t)}retrieveAllSnippets(e,t=o.SortOptions.Descending,n){const r=[];if(0===e.source.length||0===this.referenceTokens.size)return r;const s=e.source.split("\n"),i=this.id()+":"+e.source,a=_.get(i)??[],l=0==a.length,u=l?s.map(this.tokenizer.tokenize,this.tokenizer):[];for(const[e,[t,i]]of this.getWindowsDelineations(s).entries()){if(l){const e=new Set;u.slice(t,i).forEach((t=>t.forEach(e.add,e))),a.push(e)}if(void 0!==n&&n.get(t)!==i)continue;const s=a[e],o=this.similarityScore(s,this.referenceTokens);r.push({score:o,startLine:t,endLine:i})}return l&&_.put(i,a),this.sortScoredSnippets(r,t)}}class d{constructor(e,t,n,r,s){this.windowLength=t,this.lineCursorHistory=n,this.jaccardMatcher=new c(e,t,s),this.strategy=r}sortScoredSnippets(e,t=o.SortOptions.Descending){return t==o.SortOptions.Ascending?e.sort(((e,t)=>e.score>t.score?1:-1)):t==o.SortOptions.Descending?e.sort(((e,t)=>e.score>t.score?-1:1)):e}markerToSnippet(e,t){return e.map((e=>({snippet:t.slice(e.startLine,e.endLine).join("\n"),provider:a.SnippetProviderType.NeighboringTabs,semantics:a.SnippetSemantics.Snippet,...e})))}async findMatches(e,t=r.SnippetSelectionOption.BestMatch,n){if(t==r.SnippetSelectionOption.BestMatch){const t=await this.findBestMatch(e);return void 0===t?[]:[t]}return t==r.SnippetSelectionOption.TopK&&await this.findTopKMatches(e,n)||[]}async findBestMatch(e){if(0!==e.source.length){if(this.strategy===u.CursorOnly){let t=this.retrieveCursorSnippets(e);if(t=this.sortScoredSnippets(t,o.SortOptions.Descending),0===t.length)return;const n=Math.max(...t.map((e=>e.score))),r=t.filter((e=>e.score===n)),s=r.sort(((e,t)=>e.startLine-t.startLine))[Math.floor(r.length/2)];return{snippet:e.source.split("\n").slice(s.startLine,s.endLine).join("\n"),provider:a.SnippetProviderType.NeighboringTabs,semantics:a.SnippetSemantics.Snippet,...s}}if(this.strategy===u.CursorJaccard){let t=this.retrieveCursorSnippets(e);if(t=this.sortScoredSnippets(t,o.SortOptions.Descending),0===t.length)return;const n=Math.max(...t.map((e=>e.score))),r=[],s=new Map;for(const e of t)e.score===n&&(r.push(e),s.set(e.startLine,e.endLine));const i=this.jaccardMatcher.retrieveAllSnippets(e,o.SortOptions.Descending,s);if(0===i.length)return;const l=i[0];for(const e of t)if(e.startLine===l.startLine&&e.endLine===l.endLine){l.score+=e.score;break}return{snippet:e.source.split("\n").slice(l.startLine,l.endLine).join("\n"),provider:a.SnippetProviderType.NeighboringTabs,semantics:a.SnippetSemantics.Snippet,...l}}if(this.strategy===u.JaccardCursor){const t=await this.jaccardMatcher.findBestMatch(e);if(void 0===t)return;let n=this.retrieveCursorSnippets(e);if(n=this.sortScoredSnippets(n,o.SortOptions.Descending),0===n.length)return;for(const e of n)if(e.startLine===t.startLine&&e.endLine===t.endLine){t.score+=e.score;break}return t}}}async findTopKMatches(e,t=1){if(0===e.source.length||t<1)return;const n=e.source.split("\n");let r=this.retrieveCursorSnippets(e);if(0!==r.length){if(this.strategy===u.CursorOnly){r=this.sortScoredSnippets(r,o.SortOptions.Descending);let e=this.gatherNonOverlappingSnippets(r,t);return this.markerToSnippet(e,n)}if(this.strategy===u.CursorJaccard){r=this.sortScoredSnippets(r,o.SortOptions.Descending);const s=new Map(r.map((e=>[e.startLine,e.endLine]))),i=this.jaccardMatcher.retrieveAllSnippets(e,o.SortOptions.Descending,s).reduce(((e,t)=>e.set([t.startLine,t.endLine].join(","),t.score)),new Map);r.forEach((e=>e.score+=i.get([e.startLine,e.endLine].join(","))??0)),r=this.sortScoredSnippets(r,o.SortOptions.Descending);let a=this.gatherNonOverlappingSnippets(r,t);return this.markerToSnippet(a,n)}if(this.strategy===u.JaccardCursor){const s=await this.jaccardMatcher.findTopKMatches(e,t);if(void 0===s)return;const i=r.reduce(((e,t)=>e.set([t.startLine,t.endLine].join(","),t.score)),new Map);s.forEach((e=>e.score+=i.get([e.startLine,e.endLine].join(","))??0));const a=this.sortScoredSnippets(s,o.SortOptions.Descending);return this.markerToSnippet(a,n)}}}gatherNonOverlappingSnippets(e,t){let n=[e[0]];for(let r=1;r<e.length&&n.length<t;r++)-1==n.findIndex((t=>e[r].startLine<t.endLine&&e[r].endLine>t.startLine))&&n.push(e[r]);return n}retrieveCursorSnippets(e){const t=[];if(0===e.source.length)return t;const n=this.lineCursorHistory.get(e.uri);if(void 0===n)return t;const r=e.source.split("\n");let s;!function(e){e[e.leftBoundary=0]="leftBoundary",e[e.rightBoundary=1]="rightBoundary"}(s||(s={}));let i=[];for(const[e,t]of n.entries())e>=r.length||(i.push([Math.max(0,e-this.windowLength+1),s.leftBoundary,t]),i.push([e+1,s.rightBoundary,t]));i.push([r.length,s.leftBoundary,0]),i=i.sort(((e,t)=>e[0]-t[0]));let o=0,a=0;for(const[e,n,l]of i){if(o>0)for(let n=a;n<e&&(0==n||n+this.windowLength<=r.length);n++)t.push({score:o,startLine:n,endLine:Math.min(r.length,n+this.windowLength)});n===s.leftBoundary?o+=l:o-=l,a=e}return t}}t.CursorHistoryMatcher=d,d.FACTORY=(e,t,n,r)=>({to:s=>new d(s,e,t,n,r)})},9404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeScore=t.FunctionJaccardMatcher=t.IndentationBasedJaccardMatcher=t.FixedWindowSizeJaccardMatcher=void 0;const r=n(648),s=n(1467),i=n(5380);class o extends s.WindowedMatcher{constructor(e,t,n){super(e,n),this.windowLength=t,this.cursorContextFix=n}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return(0,i.getBasicWindowDelineations)(this.windowLength,e)}trimDocument(e){return e.source.slice(0,e.offset).split("\n").slice(-this.windowLength).join("\n")}_getCursorContextInfo(e){return(0,r.getCursorContext)(e,{maxLineCount:this.windowLength,cursorContextFix:this.cursorContextFix})}similarityScore(e,t){return u(e,t)}}t.FixedWindowSizeJaccardMatcher=o,o.FACTORY=(e,t)=>({to:n=>new o(n,e,t)});class a extends s.WindowedMatcher{constructor(e,t,n,r){super(e,r),this.indentationMinLength=t,this.indentationMaxLength=n,this.languageId=e.languageId,this.cursorContextFix=r}id(){return`indent:${this.indentationMinLength}:${this.indentationMaxLength}:${this.languageId}`}getWindowsDelineations(e){const t=(0,i.getIndentationWindowsDelineations)(e,this.languageId,this.indentationMinLength,this.indentationMaxLength);return t.length>0?t:e.length<this.indentationMinLength?[[0,e.length]]:[]}trimDocument(e){return e.source.slice(0,e.offset).split("\n").slice(-this.indentationMaxLength).join("\n")}_getCursorContextInfo(e){return(0,r.getCursorContext)(e,{maxLineCount:this.indentationMaxLength,cursorContextFix:this.cursorContextFix})}similarityScore(e,t){return u(e,t)}}t.IndentationBasedJaccardMatcher=a,a.FACTORY=(e,t,n)=>({to:r=>new a(r,e,t,n)});class l extends s.FunctionalMatcher{id(){return"function:"+this.windowLength}getWindowsDelineations(e){return void 0!==this.indentationMaxLength&&void 0!==this.indentationMinLength?(0,i.getIndentationWindowsDelineations)(e,this.languageId,this.indentationMinLength,this.indentationMaxLength):(0,i.getBasicWindowDelineations)(this.windowLength,e)}constructor(e,t,n,r,s){super(e,n),this.windowLength=t,this.indentationMinLength=r,this.indentationMaxLength=s,this.languageId=e.languageId,this.cursorContextFix=n}trimDocument(e){return e.source.slice(0,e.offset).split("\n").slice(-this.windowLength).join("\n")}_getCursorContextInfo(e){return(0,r.getCursorContext)(e,{maxLineCount:this.windowLength,cursorContextFix:this.cursorContextFix})}similarityScore(e,t){return u(e,t)}}function u(e,t){const n=new Set;return e.forEach((e=>{t.has(e)&&n.add(e)})),n.size/(e.size+t.size-n.size)}t.FunctionJaccardMatcher=l,l.FACTORY=(e,t,n,r)=>({to:s=>new l(s,e,t,n,r)}),t.computeScore=u},9125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNeighborSnippets=t.neighborOptionToSelection=t.NeighboringSnippetType=t.NeighboringTabsOption=void 0;const r=n(9491),s=n(6845),i=n(9404);var o,a;(a=t.NeighboringTabsOption||(t.NeighboringTabsOption={})).None="none",a.Conservative="conservative",a.Medium="medium",a.Eager="eager",a.EagerButLittle="eagerButLittle",a.EagerButMedium="eagerButMedium",a.EagerButMuch="eagerButMuch",a.RetrievalComparable="retrievalComparable",function(e){e.NeighboringFunctions="neighboringFunction",e.NeighboringSnippets="neighboringSnippet",e.CursorHistoryMatcher="cursorhistorymatcher"}(o=t.NeighboringSnippetType||(t.NeighboringSnippetType={})),t.neighborOptionToSelection={none:{snippetLength:1,threshold:-1,numberOfSnippets:0},conservative:{snippetLength:10,threshold:.3,numberOfSnippets:1},medium:{snippetLength:20,threshold:.1,numberOfSnippets:2},eager:{snippetLength:60,threshold:0,numberOfSnippets:4},eagerButLittle:{snippetLength:10,threshold:0,numberOfSnippets:1},eagerButMedium:{snippetLength:20,threshold:0,numberOfSnippets:4},eagerButMuch:{snippetLength:60,threshold:0,numberOfSnippets:6},retrievalComparable:{snippetLength:30,threshold:0,numberOfSnippets:4}},t.getNeighborSnippets=async function(e,n,a,l,u,_,c,d,p,m,h){const f={...t.neighborOptionToSelection[l]},g=function(e,t,n,a,l,u,_,c=s.CursorSnippetsPickingStrategy.CursorJaccard){let d;return t===o.NeighboringSnippets?d=void 0!==l&&void 0!==u?i.IndentationBasedJaccardMatcher.FACTORY(l,u,a):i.FixedWindowSizeJaccardMatcher.FACTORY(n.snippetLength,a):t===o.NeighboringFunctions?d=i.FunctionJaccardMatcher.FACTORY(n.snippetLength,a,l,u):((0,r.ok)(void 0!==_,"lineCursorHistory should not be undefined"),d=s.CursorHistoryMatcher.FACTORY(n.snippetLength,_,c,a)),d.to(e)}(e,a,f,u,_,c,m,h);return 0===f.numberOfSnippets?[]:(await n.filter((e=>e.source.length<1e4&&e.source.length>0)).slice(0,20).reduce((async(e,t)=>(await e).concat((await g.findMatches(t,d,p)).map((e=>({relativePath:t.relativePath,...e}))))),Promise.resolve([]))).filter((e=>e.score&&e.snippet&&e.score>f.threshold)).sort(((e,t)=>e.score-t.score)).slice(-f.numberOfSnippets)}},1467:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitIntoWords=t.FunctionalMatcher=t.WindowedMatcher=t.SortOptions=void 0;const r=n(8306),s=n(8312),i=n(4830);var o;!function(e){e.Ascending="ascending",e.Descending="descending",e.None="none"}(o=t.SortOptions||(t.SortOptions={}));class a{constructor(e){this.stopsForLanguage=p.get(e.languageId)??d}tokenize(e){return new Set(_(e).filter((e=>!this.stopsForLanguage.has(e))))}}const l=new class{constructor(e){this.keys=[],this.cache={},this.size=e}put(e,t){if(this.cache[e]=t,this.keys.length>this.size){this.keys.push(e);const t=this.keys.shift()??"";delete this.cache[t]}}get(e){return this.cache[e]}}(20);class u{constructor(e,t){this.referenceDoc=e,this.tokenizer=new a(e),t||(this._referenceTokens=this.tokenizer.tokenize(this.trimDocument(e)))}get referenceTokens(){return void 0===this._referenceTokens&&(this._referenceTokens=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)),this._referenceTokens}sortScoredSnippets(e,t=o.Descending){return t==o.Ascending?e.sort(((e,t)=>e.score>t.score?1:-1)):t==o.Descending?e.sort(((e,t)=>e.score>t.score?-1:1)):e}retrieveAllSnippets(e,t=o.Descending){const n=[];if(0===e.source.length||0===this.referenceTokens.size)return n;const r=e.source.split("\n"),s=this.id()+":"+e.source,i=l.get(s)??[],a=0==i.length,u=a?r.map(this.tokenizer.tokenize,this.tokenizer):[];for(const[e,[t,s]]of this.getWindowsDelineations(r).entries()){if(a){const e=new Set;u.slice(t,s).forEach((t=>t.forEach(e.add,e))),i.push(e)}const r=i[e],o=this.similarityScore(r,this.referenceTokens);n.push({score:o,startLine:t,endLine:s})}return a&&l.put(s,i),this.sortScoredSnippets(n,t)}async findMatches(e,t=s.SnippetSelectionOption.BestMatch,n){if(t==s.SnippetSelectionOption.BestMatch){const t=await this.findBestMatch(e);return t?[t]:[]}return t==s.SnippetSelectionOption.TopK&&await this.findTopKMatches(e,n)||[]}async findBestMatch(e){if(0===e.source.length||0===this.referenceTokens.size)return;const t=e.source.split("\n"),n=this.retrieveAllSnippets(e,o.Descending);return 0!==n.length&&0!==n[0].score?{snippet:t.slice(n[0].startLine,n[0].endLine).join("\n"),semantics:i.SnippetSemantics.Snippet,provider:i.SnippetProviderType.NeighboringTabs,...n[0]}:void 0}async findTopKMatches(e,t=1){if(0===e.source.length||0===this.referenceTokens.size||t<1)return;const n=e.source.split("\n"),r=this.retrieveAllSnippets(e,o.Descending);if(0===r.length||0===r[0].score)return;const s=[r[0]];for(let e=1;e<r.length&&s.length<t;e++)-1==s.findIndex((t=>r[e].startLine<t.endLine&&r[e].endLine>t.startLine))&&s.push(r[e]);return s.map((e=>({snippet:n.slice(e.startLine,e.endLine).join("\n"),semantics:i.SnippetSemantics.Snippet,provider:i.SnippetProviderType.NeighboringTabs,...e})))}}function _(e){return e.split(/[^a-zA-Z0-9]/).filter((e=>e.length>0))}t.WindowedMatcher=u,t.FunctionalMatcher=class extends u{constructor(e,t){super(e,t)}getMatchingScore(e){const t=this.tokenizer.tokenize(e.source),n=this.similarityScore(t,this.referenceTokens);return{snippet:e.source,score:n,startLine:0,endLine:0}}async findBestMatch(e){const t=await this.findMatches(e);if(0!==t.length&&0!==t[0].score)return t[0]}async findMatches(e,t,n){if(0===e.source.length||0===this.referenceTokens.size)return[];const s=await async function(e){let t=[];if((0,r.isSupportedLanguageId)(e.languageId)){const n=await(0,r.getFunctionPositions)(e.languageId,e.source);for(let r=0;r<n.length;r++){let{startIndex:s,endIndex:i}=n[r],o=e.source.substring(s,i);t.push({source:o,relativePath:e.relativePath,languageId:e.languageId,uri:e.uri})}}return t}(e);if(0==s.length){const t=e.source.split("\n"),n=this.retrieveAllSnippets(e,o.Descending);return 0===n.length||0===n[0].score?[]:[{snippet:t.slice(n[0].startLine,n[0].endLine).join("\n"),semantics:i.SnippetSemantics.Snippet,provider:i.SnippetProviderType.NeighboringTabs,...n[0]}]}const a=[];for(let e of s){const t=this.getMatchingScore(e);a.push({semantics:i.SnippetSemantics.Function,provider:i.SnippetProviderType.NeighboringTabs,...t})}return a}},t.splitIntoWords=_;const c=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),d=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...c]),p=new Map([])},4830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processSnippetsForWishlist=t.selectSnippets=t.normalizeSnippetScore=t.announceSnippet=t.SnippetSemantics=t.SnippetProviderType=void 0;const r=n(2417);var s,i;(i=t.SnippetProviderType||(t.SnippetProviderType={})).NeighboringTabs="neighboring-tabs",i.Retrieval="retrieval",i.SymbolDef="symbol-def",i.Language="language",i.Path="path",function(e){e.Function="function",e.Snippet="snippet",e.Variable="variable",e.Parameter="parameter",e.Method="method",e.Class="class",e.Module="module",e.Alias="alias",e.Enum="enum member",e.Interface="interface"}(s=t.SnippetSemantics||(t.SnippetSemantics={}));const o={[s.Function]:"function",[s.Snippet]:"snippet",[s.Variable]:"variable",[s.Parameter]:"parameter",[s.Method]:"method",[s.Class]:"class",[s.Module]:"module",[s.Alias]:"alias",[s.Enum]:"enum member",[s.Interface]:"interface"};function a(e,t){const n=o[e.semantics];let s=(e.relativePath?`Compare this ${n} from ${e.relativePath}:`:`Compare this ${n}:`)+"\n"+e.snippet;return s.endsWith("\n")||(s+="\n"),(0,r.commentBlockAsSingles)(s,t)}function l(e,t){const n=t[e.provider];if(!n)throw new Error("Unknown snippet provider: "+e.provider);const{score:r,...s}=e;let i=r;if("affine"!==n.normalizationFunction)throw new Error(`Unknown normalization function ${n.normalizationFunction} for snippet provider ${e.provider}`);{const[e,t]=n.normalizationParams;i=e*r+t}return{...s,providerScore:r,normalizedScore:i}}function u(e){e.sort(((e,t)=>t.normalizedScore-e.normalizedScore))}function _(e,t,n){if(0==t)return{reserved:[],candidates:[]};const r=e.map((e=>l(e,n))),s=new Map;let i;for(i in n)s.set(i,[]);for(const e of r){let t=s.get(e.provider);if(!t)throw new Error("Unknown snippet provider: "+e.provider);t.push(e)}for(const[e,t]of s)u(t);let o=[];for(i in n){const e=n[i].reservedSnippetCount||0;if(e>0){const t=s.get(i)||[];o=o.concat(t.slice(0,e)),s.set(i,t.slice(e))}}u(o);let a=[];if(o.length>t)throw new Error("Reserved snippet count exceeds number of snippets");if(o.length<t){const e=Array.from(s.values()).flat();u(e),a=e.slice(0,t-o.length)}return{reserved:o,candidates:a}}t.announceSnippet=a,t.normalizeSnippetScore=l,t.selectSnippets=_,t.processSnippetsForWishlist=function(e,t,n,r,s,i,o){const{reserved:l,candidates:c}=_(e,i,r);let d=0,p=[],m=s.high,h=s.low;function f(e,r){const i=a(e,t),l=n.tokenLength(i);let u;return r+l<=o?(u=m,m=s.priorities.justBelow(u)):(u=h,h=s.priorities.justBelow(u)),p.push({announcedSnippet:i,provider:e.provider,providerScore:e.providerScore,normalizedScore:e.normalizedScore,priority:u,tokens:l,relativePath:e.relativePath}),r+l}for(const e of[...l,...c]){if(p.length>=i)break;d=f(e,d)}return u(p),p.reverse(),p}},5380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIndentationWindowsDelineations=t.getBasicWindowDelineations=void 0;const r=n(8617),s=n(3469);t.getBasicWindowDelineations=function(e,t){const n=[],r=t.length;if(0==r)return[];if(r<e)return[[0,r]];for(let t=0;t<r-e+1;t++)n.push([t,t+e]);return n},t.getIndentationWindowsDelineations=function(e,t,n,i){if(e.length<n||0==i)return[];const o=[],a=(0,r.clearLabels)((0,s.parseTree)(e.join("\n"),t));return(0,r.visitTree)(a,(e=>{if("blank"===e.type)return void(e.label={totalLength:1,firstLineAfter:e.lineNumber+1});let t="line"===e.type?1:0,r="line"===e.type?e.lineNumber+1:NaN;function s(n){return-1==n?r-t:e.subs[n].label.firstLineAfter-e.subs[n].label.totalLength}function a(t,n){return 0==t?n+1:e.subs[t-1].label.firstLineAfter}let l="line"===e.type?-1:0,u="line"===e.type?1:0,_=0;for(let c=0;c<e.subs.length;c++){for(;l>=0&&l<e.subs.length&&"blank"===e.subs[l].type;)u-=e.subs[l].label.totalLength,l++;if("blank"!==e.subs[c].type&&(_=c),r=e.subs[c].label.firstLineAfter,t+=e.subs[c].label.totalLength,u+=e.subs[c].label.totalLength,u>i){const t=s(l),r=a(c,t),d=_==c?r:a(_,t);for(n<=r-t&&o.push([t,d]);u>i;)u-=-1==l?"line"==e.type?1:0:e.subs[l].label.totalLength,l++}}if(l<e.subs.length){const t=s(l),i=r,a=-1==l?i:e.subs[_].label.firstLineAfter;n<=i-t&&o.push([t,a])}e.label={totalLength:t,firstLineAfter:r}}),"bottomUp"),o.sort(((e,t)=>e[0]-t[0]||e[1]-t[1])).filter(((e,t,n)=>0==t||e[0]!=n[t-1][0]||e[1]!=n[t-1][1]))}},926:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageSnippetProvider=void 0;const r=n(2417),s=n(8312),i=n(4830),o=n(4314);class a extends o.SnippetProvider{async buildSnippets(e){const{currentFile:t}=e;return t.languageId=(0,s.normalizeLanguageId)(t.languageId),[{provider:i.SnippetProviderType.Language,semantics:i.SnippetSemantics.Snippet,snippet:(0,r.newLineEnded)((0,r.getLanguageMarker)(t)),relativePath:t.relativePath,startLine:0,endLine:0,score:0}]}}t.LanguageSnippetProvider=a},5506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathSnippetProvider=void 0;const r=n(2417),s=n(8312),i=n(4830),o=n(4314);class a extends o.SnippetProvider{async buildSnippets(e){const{currentFile:t}=e;return t.languageId=(0,s.normalizeLanguageId)(t.languageId),[{provider:i.SnippetProviderType.Path,semantics:i.SnippetSemantics.Snippet,snippet:(0,r.newLineEnded)((0,r.getPathMarker)(t)),relativePath:t.relativePath,startLine:0,endLine:0,score:0}]}}t.PathSnippetProvider=a},4314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SnippetProvider=void 0,t.SnippetProvider=class{getSnippets(e){return new Promise((async(t,n)=>{t(this.buildSnippets(e))}))}}},2395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findEditDistanceScore=void 0,t.findEditDistanceScore=function(e,t){if(0===e.length||0===t.length)return{score:e.length+t.length};const n=Array.from({length:e.length}).map((()=>Array.from({length:t.length}).map((()=>0))));for(let t=0;t<e.length;t++)n[t][0]=t;for(let e=0;e<t.length;e++)n[0][e]=e;for(let r=0;r<t.length;r++)for(let s=0;s<e.length;s++)n[s][r]=Math.min((0==s?r:n[s-1][r])+1,(0==r?s:n[s][r-1])+1,(0==s||0==r?Math.max(s,r):n[s-1][r-1])+(e[s]==t[r]?0:1));return{score:n[e.length-1][t.length-1]}}},1145:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(9323),t)},9323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenizer=t.TokenizerName=void 0;const r=n(7147),s=n(1017),i=n(3837),o=(e,t)=>Array.from(Array(t).keys()).slice(e),a=e=>e.charCodeAt(0),l=new i.TextDecoder("utf-8"),u=e=>l.decode(new Uint8Array(e));function _(e){const t=new Set;let n=e[0];for(let r=1;r<e.length;r++){const s=e[r];t.add([n,s]),n=s}return t}const c=/'s|'t|'re|'ve|'m|'ll|'d| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+/gu;var d;!function(e){e.cushman001="cushman001",e.cushman002="cushman002",e.mock="mock"}(d=t.TokenizerName||(t.TokenizerName={}));const p=new Map;t.getTokenizer=function(e=d.cushman002){let t=p.get(e);return void 0!==t||(t=e===d.mock?new h:new m(e),p.set(e,t)),t};class m{constructor(e=d.cushman002){this.decoder=new Map,this.byte_encoder=new Map,this.byte_decoder=new Map,this.cache=new Map,this.textEncoder=new i.TextEncoder,this.encodeStr=e=>Array.from(this.textEncoder.encode(e));let t="",n="";if(e===d.cushman001)t="vocab_cushman001.bpe",n="tokenizer_cushman001.json";else{if(e!==d.cushman002)throw new Error(`Unknown tokenizer name: ${e}`);t="vocab_cushman002.bpe",n="tokenizer_cushman002.json"}const l=r.readFileSync(s.resolve(__dirname,"resources",e,n)),u=JSON.parse(l.toString());this.encoder=new Map(Object.entries(u));for(let[e,t]of this.encoder)this.decoder.set(t,e);const _=r.readFileSync(s.resolve(__dirname,"resources",e,t),"utf-8").split("\n").slice(1).filter((e=>e.trim().length>0));this.bpe_ranks=((e,t)=>{const n=new Map;return e.forEach(((r,s)=>{n.set(e[s],t[s])})),n})(_,o(0,_.length)),function(e){const t=o(a("!"),a("~")+1).concat(o(a("¡"),a("¬")+1),o(a("®"),a("ÿ")+1));let n=t.slice(),r=0;for(let e=0;e<256;e++)t.includes(e)||(t.push(e),n.push(256+r),r+=1);const s=n.map((e=>(e=>String.fromCharCode(e))(e)));for(let n=0;n<t.length;n++)e.set(t[n],s[n])}(this.byte_encoder),this.byte_encoder.forEach(((e,t,n)=>{this.byte_decoder.set(e,t)}))}byteEncodeStr(e){return this.encodeStr(e).map((e=>this.byte_encoder.get(e)))}bpe(e){if(this.cache.has(e))return this.cache.get(e);let t=this.byteEncodeStr(e),n=_(t);if(!n)return t.map((e=>this.encoder.get(e)));for(;;){const e=new Map;n.forEach((t=>{const n=t.join(" "),r=this.bpe_ranks.get(n);e.set(void 0===r||isNaN(r)?1e11:r,t)}));const r=Array.from(e.keys()).map((e=>Number(e))),s=e.get(Math.min(...r));if(!s||!this.bpe_ranks.has(s.join(" ")))break;const i=s[0],o=s[1];let a=[],l=0;for(;l<t.length;){const e=t.indexOf(i,l);if(-1===e){Array.prototype.push.apply(a,t.slice(l));break}Array.prototype.push.apply(a,t.slice(l,e)),l=e,t[l]===i&&l<t.length-1&&t[l+1]===o?(a.push(i+o),l+=2):(a.push(t[l]),l+=1)}if(t=a,1===t.length)break;n=_(t)}const r=t.map((e=>this.encoder.get(e)));return this.cache.set(e,r),r}tokenize(e){let t=[];const n=Array.from(e.matchAll(c)).map((e=>e[0]));for(let e of n){const n=this.bpe(e);Array.prototype.push.apply(t,n)}return t}tokenLength(e){return this.tokenize(e).length}takeLastTokens(e,t){if(t<=0)return"";let n=Math.min(e.length,4*t),r=e.slice(-n),s=this.tokenize(r);for(;s.length<t+2&&n<e.length;)n=Math.min(e.length,n+1*t),r=e.slice(-n),s=this.tokenize(r);return s.length<t?e:(s=s.slice(-t),this.detokenize(s))}takeFirstTokens(e,t){if(t<=0)return{text:"",tokens:[]};let n=Math.min(e.length,4*t),r=e.slice(0,n),s=this.tokenize(r);for(;s.length<t+2&&n<e.length;)n=Math.min(e.length,n+1*t),r=e.slice(0,n),s=this.tokenize(r);return s.length<t?{text:e,tokens:s}:(s=s.slice(0,t),{text:this.detokenize(s),tokens:s})}takeLastLinesTokens(e,t){const n=this.takeLastTokens(e,t);if(n.length===e.length||"\n"===e[e.length-n.length-1])return n;let r=n.indexOf("\n");return n.substring(r+1)}detokenize(e){let t=e.map((e=>this.decoder.get(e))).join("");return t=u(t.split("").map((e=>this.byte_decoder.get(e)))),t}tokenizeStrings(e){return this.tokenize(e).map((e=>u(this.decoder.get(e).split("").map((e=>this.byte_decoder.get(e))))))}}class h{constructor(){this.hash=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=65535&t;return t}}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map((e=>e.toString())).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,t){return this.tokenizeStrings(e).slice(-t).join("")}takeFirstTokens(e,t){const n=this.tokenizeStrings(e).slice(0,t);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,t){const n=this.takeLastTokens(e,t);if(n.length===e.length||"\n"===e[e.length-n.length-1])return n;let r=n.indexOf("\n");return n.substring(r+1)}}},4456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Priorities=t.PromptWishlist=t.PromptElementRanges=t.PromptChoices=t.PromptBackground=t.PromptElementKind=void 0;const r=n(8312);var s;!function(e){e.BeforeCursor="BeforeCursor",e.AfterCursor="AfterCursor",e.SimilarFile="SimilarFile",e.RetrievalSnippet="RetrievalSnippet",e.SymbolDefinition="SymbolDefinition",e.ImportedFile="ImportedFile",e.LanguageMarker="LanguageMarker",e.PathMarker="PathMarker"}(s=t.PromptElementKind||(t.PromptElementKind={}));class i{constructor(){this.used=new Map,this.unused=new Map}markUsed(e){this.IsSnippet(e)&&this.used.set(e.id,this.convert(e))}undoMarkUsed(e){this.IsSnippet(e)&&this.used.delete(e.id)}markUnused(e){this.IsSnippet(e)&&this.unused.set(e.id,this.convert(e))}convert(e){return{score:e.score.toFixed(4),length:e.text.length}}IsSnippet(e){return e.kind==s.SimilarFile||e.kind==s.RetrievalSnippet}}t.PromptBackground=i;class o{constructor(){this.used=new Map,this.unused=new Map,this.usedCounts=new Map,this.unusedCounts=new Map}markUsed(e){this.used.set(e.kind,(this.used.get(e.kind)||0)+e.tokens),this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)+1)}undoMarkUsed(e){this.used.set(e.kind,(this.used.get(e.kind)||0)-e.tokens),this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)-1)}markUnused(e){this.unused.set(e.kind,(this.unused.get(e.kind)||0)+e.tokens),this.unusedCounts.set(e.kind,(this.unusedCounts.get(e.kind)||0)+1)}}t.PromptChoices=o;class a{constructor(e){this.ranges=new Array;let t,n=0;for(const{element:r}of e)0!==r.text.length&&(t===s.BeforeCursor&&r.kind===s.BeforeCursor?this.ranges[this.ranges.length-1].end+=r.text.length:this.ranges.push({kind:r.kind,start:n,end:n+r.text.length}),t=r.kind,n+=r.text.length)}}t.PromptElementRanges=a,t.PromptWishlist=class{constructor(e,t){this.tokenizer=e,this.content=[],this.tokenizer=e,this.lineEndingOption=t}getContent(){return[...this.content]}convertLineEndings(e){return this.lineEndingOption===r.LineEndingOptions.ConvertToUnix&&(e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),e}append(e,t,n,r=this.tokenizer.tokenLength(e),s=NaN){e=this.convertLineEndings(e);const i=this.content.length;return this.content.push({id:i,text:e,kind:t,priority:n,tokens:r,requires:[],excludes:[],score:s}),i}appendLineForLine(e,t,n){const r=(e=this.convertLineEndings(e)).split("\n");for(let e=0;e<r.length-1;e++)r[e]+="\n";const s=[];r.forEach(((e,t)=>{"\n"===e&&s.length>0&&!s[s.length-1].endsWith("\n\n")?s[s.length-1]+="\n":s.push(e)}));const i=[];return s.forEach(((e,r)=>{""!==e&&(i.push(this.append(e,t,n)),r>0&&(this.content[this.content.length-2].requires=[this.content[this.content.length-1]]))})),i}require(e,t){const n=this.content.find((t=>t.id===e)),r=this.content.find((e=>e.id===t));n&&r&&n.requires.push(r)}exclude(e,t){const n=this.content.find((t=>t.id===e)),r=this.content.find((e=>e.id===t));n&&r&&n.excludes.push(r)}fulfill(e){const t=new o,n=new i,r=this.content.map(((e,t)=>({element:e,index:t})));r.sort(((e,t)=>e.element.priority===t.element.priority?t.index-e.index:t.element.priority-e.element.priority));const s=new Set,l=new Set;let u;const _=[];let c=e;r.forEach((e=>{const r=e.element,i=e.index;if(c>=0&&(c>0||void 0===u)&&r.requires.every((e=>s.has(e.id)))&&!l.has(r.id)){let o=r.tokens;const a=function(e,t){let n,r=1/0;for(const s of e)s.index>t&&s.index<r&&(n=s,r=s.index);return n}(_,i)?.element;r.text.endsWith("\n\n")&&a&&!a.text.match(/^\s/)&&o++,c>=o?(c-=o,s.add(r.id),r.excludes.forEach((e=>l.add(e.id))),t.markUsed(r),n.markUsed(r),_.push(e)):void 0===u?u=e:(t.markUnused(e.element),n.markUnused(e.element))}else t.markUnused(r),n.markUnused(r)})),_.sort(((e,t)=>e.index-t.index));let d=_.reduce(((e,t)=>e+t.element.text),""),p=this.tokenizer.tokenLength(d);for(;p>e;){_.sort(((e,t)=>t.element.priority===e.element.priority?t.index-e.index:t.element.priority-e.element.priority));const e=_.pop();e&&(t.undoMarkUsed(e.element),t.markUnused(e.element),n.undoMarkUsed(e.element),n.markUnused(e.element),void 0!==u&&(t.markUnused(u.element),n.markUnused(u.element)),u=void 0),_.sort(((e,t)=>e.index-t.index)),d=_.reduce(((e,t)=>e+t.element.text),""),p=this.tokenizer.tokenLength(d)}const m=[..._];if(void 0!==u){m.push(u),m.sort(((e,t)=>e.index-t.index));const r=m.reduce(((e,t)=>e+t.element.text),""),s=this.tokenizer.tokenLength(r);if(s<=e){t.markUsed(u.element),n.markUsed(u.element);const e=new a(m);return{prefix:r,suffix:"",prefixLength:s,suffixLength:0,promptChoices:t,promptBackground:n,promptElementRanges:e}}t.markUnused(u.element),n.markUnused(u.element)}const h=new a(_);return{prefix:d,suffix:"",prefixLength:p,suffixLength:0,promptChoices:t,promptBackground:n,promptElementRanges:h}}};class l{constructor(){this.registeredPriorities=[0,1]}register(e){if(e>l.TOP||e<l.BOTTOM)throw new Error("Priority must be between 0 and 1");return this.registeredPriorities.push(e),e}justAbove(...e){const t=Math.max(...e),n=Math.min(...this.registeredPriorities.filter((e=>e>t)));return this.register((n+t)/2)}justBelow(...e){const t=Math.min(...e),n=Math.max(...this.registeredPriorities.filter((e=>e<t)));return this.register((n+t)/2)}between(e,t){if(this.registeredPriorities.some((n=>n>e&&n<t))||!this.registeredPriorities.includes(e)||!this.registeredPriorities.includes(t))throw new Error("Priorities must be adjacent in the list of priorities");return this.register((e+t)/2)}}t.Priorities=l,l.TOP=1,l.BOTTOM=0},4087:(module,__unused_webpack_exports,__webpack_require__)=>{var Module=void 0!==Module?Module:{},TreeSitter=function(){var initPromise,document="object"==typeof window?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise((resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}function logExceptionOnExit(e){e instanceof ExitStatus||err("exiting due to exception: "+e)}if(ENVIRONMENT_IS_NODE){var fs=__webpack_require__(7147),nodePath=__webpack_require__(1017);scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(e,t)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFileSync(e,t?void 0:"utf8")),readBinary=e=>{var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),t},readAsync=(e,t,n)=>{e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),module.exports=Module,quit_=(e,t)=>{if(keepRuntimeAlive())throw process.exitCode=e,t;logExceptionOnExit(t),process.exit(e)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:void 0!==document&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},setWindowTitle=e=>document.title=e);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;"object"!=typeof WebAssembly&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(e,t,n){for(var r=t+n,s=t;e[s]&&!(s>=r);)++s;if(s-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,s));for(var i="";t<s;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|a)}else i+=String.fromCharCode(o)}return i}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,n,r){if(!(r>0))return 0;for(var s=n,i=n+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=i)break;t[n++]=a}else if(a<=2047){if(n+1>=i)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=i)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=i)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-s}function stringToUTF8(e,t,n){return stringToUTF8Array(e,HEAPU8,t,n)}function lengthBytesUTF8(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort&&Module.onAbort(e),err(e="Aborted("+e+")"),ABORT=!0,EXITSTATUS=1,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(e){return e.startsWith(dataURIPrefix)}function isFileURI(e){return e.startsWith("file://")}function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if("function"==typeof fetch&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}));if(readAsync)return new Promise((function(e,t){readAsync(wasmBinaryFile,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var e={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function t(e,t){var n=e.exports;n=relocateExports(n,1024);var r=getDylinkMetadata(t);r.neededDynlibs&&(dynamicLibraries=r.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(n,"main"),Module.asm=n,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function n(e){t(e.instance,e.module)}function r(t){return getBinaryPromise().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)}))}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||"function"!=typeof fetch?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),r(n)}))})),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(e,t){var n=GOT[t];return n||(n=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(t)||(n.required=!0),n}};function callRuntimeCallbacks(e){for(;e.length>0;)e.shift()(Module)}function getDylinkMetadata(e){var t=0,n=0;function r(){for(var n=0,r=1;;){var s=e[t++];if(n+=(127&s)*r,r*=128,!(128&s))break}return n}function s(){var n=r();return UTF8ArrayToString(e,(t+=n)-n,n)}function i(e,t){if(e)throw new Error(t)}var o="dylink.0";if(e instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(e,o);0===a.length&&(o="dylink",a=WebAssembly.Module.customSections(e,o)),i(0===a.length,"need dylink section"),n=(e=new Uint8Array(a[0])).length}else{i(!(1836278016==new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]),"need to see wasm magic number"),i(0!==e[8],"need the dylink section to be first"),t=9;var l=r();n=t+l,o=s()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if("dylink"==o){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var _=r(),c=0;c<_;++c){var d=s();u.neededDynlibs.push(d)}}else for(i("dylink.0"!==o);t<n;){var p=e[t++],m=r();if(1===p)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(2===p)for(_=r(),c=0;c<_;++c)d=s(),u.neededDynlibs.push(d);else if(3===p)for(var h=r();h--;){var f=s();256&r()&&u.tlsExports.add(f)}else if(4===p)for(h=r();h--;)s(),f=s(),1==(3&r())&&u.weakImports.add(f);else t+=m}return u}function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];case"*":return HEAPU32[e>>2];default:abort("invalid type for getValue: "+t)}return null}function asmjsMangle(e){return 0==e.indexOf("dynCall_")||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(e)?e:"_"+e}function mergeLibSymbols(e,t){for(var n in e)if(e.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=e[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=e[n]),"__main_argc_argv"==n&&(Module._main=e[n])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(e,t,n){var r=Module["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}var wasmTableMirror=[];function getWasmTableEntry(e){var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t}function dynCall(e,t,n){return e.includes("j")?dynCallLegacy(e,t,n):getWasmTableEntry(t).apply(null,n)}function createInvokeFunction(e){return function(){var t=stackSave();try{return dynCall(e,arguments[0],Array.prototype.slice.call(arguments,1))}catch(e){if(stackRestore(t),e!==e+0)throw e;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(e,t){return HEAPU8.fill(0,e,e+t),e}function getMemory(e){if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,n=t+e+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,t}function isInternalSym(e){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(e)}function uleb128Encode(e,t){e<128?t.push(e):t.push(e%128|128,e>>7)}function sigToWasmTypes(e){for(var t={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)n.parameters.push(t[e[r]]),"j"===e[r]&&n.parameters.push("i32");return n}function generateFuncType(e,t){var n=e.slice(0,1),r=e.slice(1),s={i:127,p:127,j:126,f:125,d:124};t.push(96),uleb128Encode(r.length,t);for(var i=0;i<r.length;++i)t.push(s[r[i]]);"v"==n?t.push(0):t.push(1,s[n])}function convertJsFunctionToWasm(e,t){if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(sigToWasmTypes(t),e);var n=[1];generateFuncType(t,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var s=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(s,{e:{f:e}}).exports.f}function updateTableMap(e,t){if(functionsInTableMap)for(var n=e;n<e+t;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1}function setWasmTableEntry(e,t){wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e)}function addFunction(e,t){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(e))return functionsInTableMap.get(e);var n=getEmptyTableSlot();try{setWasmTableEntry(n,e)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(e,t))}return functionsInTableMap.set(e,n),n}function updateGOT(e,t){for(var n in e)if(!isInternalSym(n)){var r=e[n];n.startsWith("orig$")&&(n=n.split("$")[1],t=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(t||0==GOT[n].value)&&("function"==typeof r?GOT[n].value=addFunction(r):"number"==typeof r?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}function relocateExports(e,t,n){var r={};for(var s in e){var i=e[s];"object"==typeof i&&(i=i.value),"number"==typeof i&&(i+=t),r[s]=i}return updateGOT(r,n),r}function resolveGlobalSymbol(e,t){var n;return t&&(n=asmLibraryArg["orig$"+e]),n||(n=asmLibraryArg[e])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(e)]),!n&&e.startsWith("invoke_")&&(n=createInvokeFunction(e.split("_")[1])),n}function alignMemory(e,t){return Math.ceil(e/t)*t}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e,!1);return t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}return t in asmLibraryArg?asmLibraryArg[t]:(t in e||(e[t]=function(){return n||(n=resolveSymbol(t)),n.apply(null,arguments)}),e[t]);var n}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&-1!=body.indexOf("$"+arity);arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then((function(e){return postInstantiation(e.instance)}))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce((function(e,t){return e.then((function(){return loadDynamicLibrary(t,flags)}))}),Promise.resolve()).then((function(){return loadModule()})):(metadata.neededDynlibs.forEach((function(e){loadDynamicLibrary(e,flags)})),loadModule())}function loadDynamicLibrary(e,t,n){t=t||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[e];if(r)return t.global&&!r.global&&(r.global=!0,"loading"!==r.module&&mergeLibSymbols(r.module,e)),t.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!t.loadAsync||Promise.resolve(!0);function s(e){if(t.fs&&t.fs.findObject(e)){var n=t.fs.readFile(e,{encoding:"binary"});return n instanceof Uint8Array||(n=new Uint8Array(n)),t.loadAsync?Promise.resolve(n):n}if(e=locateFile(e),t.loadAsync)return new Promise((function(t,n){readAsync(e,(e=>t(new Uint8Array(e))),n)}));if(!readBinary)throw new Error(e+": file not found, and synchronous loading of external files is not available");return readBinary(e)}function i(){if("undefined"!=typeof preloadedWasm&&preloadedWasm[e]){var r=preloadedWasm[e];return t.loadAsync?Promise.resolve(r):r}return t.loadAsync?s(e).then((function(e){return loadWebAssemblyModule(e,t,n)})):loadWebAssemblyModule(s(e),t,n)}function o(t){r.global&&mergeLibSymbols(t,e),r.module=t}return r={refcount:t.nodelete?1/0:1,name:e,module:"loading",global:t.global},LDSO.loadedLibsByName[e]=r,n&&(LDSO.loadedLibsByHandle[n]=r),t.loadAsync?i().then((function(e){return o(e),!0})):(o(i()),!0)}function reportUndefinedSymbols(){for(var e in GOT)if(0==GOT[e].value){var t=resolveGlobalSymbol(e,!0);if(!t&&!GOT[e].required)continue;if("function"==typeof t)GOT[e].value=addFunction(t,t.sig);else{if("number"!=typeof t)throw new Error("bad export type for `"+e+"`: "+typeof t);GOT[e].value=t}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce((function(e,t){return e.then((function(){return loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})}))}),Promise.resolve()).then((function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")}))):reportUndefinedSymbols()}function setValue(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;case"*":HEAPU32[e>>2]=t;break;default:abort("invalid type for setValue: "+n)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(e,t,n){HEAPU8.copyWithin(e,t,t+n)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){var t=HEAPU8.length;e>>>=0;var n,r=getHeapMax();if(e>r)return!1;for(var s=1;s<=4;s*=2){var i=t*(1+.2/s);if(i=Math.min(i,e+100663296),emscripten_realloc_buffer(Math.min(r,(n=Math.max(e,i))+(65536-n%65536)%65536)))return!0}return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(PATH.isAbs(t))return t;var r;if(r=-100===e?FS.cwd():SYSCALLS.getStreamFromFD(e).path,0==t.length){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var s=r.atime.getTime(),i=r.mtime.getTime(),o=r.ctime.getTime();return tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=s%1e3*1e3,tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=o%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},doMsync:function(e,t,n,r,s){if(!FS.isFile(t.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var i=HEAPU8.slice(e,e+n);FS.msync(t,i,s,n,r)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t}};function _proc_exit(e){EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e))}function exitJS(e,t){EXITSTATUS=e,_proc_exit(e)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){if("undefined"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function convertI32PairToI53Checked(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN}function _fd_seek(e,t,n,r,s){try{var i=convertI32PairToI53Checked(t,n);if(isNaN(i))return 61;var o=SYSCALLS.getStreamFromFD(e);return FS.llseek(o,i,r),tempI64=[o.position>>>0,(tempDouble=o.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[s>>2]=tempI64[0],HEAP32[s+4>>2]=tempI64[1],o.getdents&&0===i&&0===r&&(o.getdents=null),0}catch(e){if("undefined"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function doWritev(e,t,n,r){for(var s=0,i=0;i<n;i++){var o=HEAPU32[t>>2],a=HEAPU32[t+4>>2];t+=8;var l=FS.write(e,HEAP8,o,a,r);if(l<0)return-1;s+=l,void 0!==r&&(r+=l)}return s}function _fd_write(e,t,n,r){try{var s=doWritev(SYSCALLS.getStreamFromFD(e),t,n);return HEAPU32[r>>2]=s,0}catch(e){if("undefined"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function _tree_sitter_log_callback(e,t){if(currentLogCallback){const n=UTF8ToString(t);currentLogCallback(n,0!==e)}}function _tree_sitter_parse_callback(e,t,n,r,s){var i=currentParseCallback(t,{row:n,column:r});"string"==typeof i?(setValue(s,i.length,"i32"),stringToUTF16(i,e,10240)):setValue(s,0,"i32")}function handleException(e){if(e instanceof ExitStatus||"unwind"==e)return EXITSTATUS;quit_(1,e)}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,n=stackAlloc(t);return stringToUTF8Array(e,HEAP8,n,t),n}function stringToUTF16(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,s=(n-=2)<2*e.length?n/2:e.length,i=0;i<s;++i){var o=e.charCodeAt(i);HEAP16[t>>1]=o,t+=2}return HEAP16[t>>1]=0,t-r}function AsciiToString(e){for(var t="";;){var n=HEAPU8[e++>>0];if(!n)return t;t+=String.fromCharCode(n)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(e){var t=Module._main;if(t){(e=e||[]).unshift(thisProgram);var n=e.length,r=stackAlloc(4*(n+1)),s=r>>2;e.forEach((e=>{HEAP32[s++]=allocateUTF8OnStack(e)})),HEAP32[s]=0;try{var i=t(n,r);return exitJS(i,!0),i}catch(e){return handleException(e)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)};var dylibsLoaded=!1;function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()))}e=e||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}if(Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();const C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let t;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{t=e[0];const n=C._ts_language_version(t);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else t=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],t),this}getLanguage(){return this.language}parse(e,t,n){if("string"==typeof e)currentParseCallback=(t,n,r)=>e.slice(t,r);else{if("function"!=typeof e)throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let r=0,s=0;if(n&&n.includedRanges){r=n.includedRanges.length,s=C._calloc(r,SIZE_OF_RANGE);let e=s;for(let t=0;t<r;t++)marshalRange(e,n.includedRanges[t]),e+=SIZE_OF_RANGE}const i=C._ts_parser_parse_wasm(this[0],this[1],t?t[0]:0,s,r);if(!i)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");const o=new Tree(INTERNAL,i,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,o}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if("function"!=typeof e)throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,t,n,r){assertInternal(e),this[0]=t,this.language=n,this.textCallback=r}copy(){const e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);const t=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=new Array(t);if(t>0){let e=n;for(let n=0;n<t;n++)r[n]=unmarshalRange(e),e+=SIZE_OF_RANGE;C._free(n)}return r}}class Node{constructor(e,t){assertInternal(e),this.tree=t}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),1===C._ts_node_is_named_wasm(this.tree[0])}hasError(){return marshalNode(this),1===C._ts_node_has_error_wasm(this.tree[0])}hasChanges(){return marshalNode(this),1===C._ts_node_has_changes_wasm(this.tree[0])}isMissing(){return marshalNode(this),1===C._ts_node_is_missing_wasm(this.tree[0])}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){const t=this.tree.language.fields.indexOf(e);if(-1!==t)return this.childForFieldId(t)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=t;for(let t=0;t<e;t++)this._children[t]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(t)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=t;for(let t=0;t<e;t++)this._namedChildren[t]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(t)}}return this._namedChildren}descendantsOfType(e,t,n){Array.isArray(e)||(e=[e]),t||(t=ZERO_POINT),n||(n=ZERO_POINT);const r=[],s=this.tree.language.types;for(let t=0,n=s.length;t<n;t++)e.includes(s[t])&&r.push(t);const i=C._malloc(SIZE_OF_INT*r.length);for(let e=0,t=r.length;e<t;e++)setValue(i+e*SIZE_OF_INT,r[e],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],i,r.length,t.row,t.column,n.row,n.column);const o=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=new Array(o);if(o>0){let e=a;for(let t=0;t<o;t++)l[t]=unmarshalNode(this.tree,e),e+=SIZE_OF_NODE}return C._free(a),C._free(i),l}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,t=e){if("number"!=typeof e||"number"!=typeof t)throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,t,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,t=e){if("number"!=typeof e||"number"!=typeof t)throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,t,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,t),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,t),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);const e=C._ts_node_to_string_wasm(this.tree[0]),t=AsciiToString(e);return C._free(e),t}}class TreeCursor{constructor(e,t){assertInternal(e),this.tree=t,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])}get nodeIsMissing(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])}get nodeText(){marshalTreeCursor(this);const e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),t=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,t)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoNextSibling(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoParent(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}}class Language{constructor(e,t){assertInternal(e),this[0]=t,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let e=0,t=this.types.length;e<t;e++)C._ts_language_symbol_type(this[0],e)<2&&(this.types[e]=UTF8ToString(C._ts_language_symbol_name(this[0],e)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let e=0,t=this.fields.length;e<t;e++){const t=C._ts_language_field_name_for_id(this[0],e);this.fields[e]=0!==t?UTF8ToString(t):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){const t=this.fields.indexOf(e);return-1!==t?t:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,t){const n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);const s=C._ts_language_symbol_for_name(this[0],r,n,t);return C._free(r),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){const t=C._ts_language_symbol_name(this[0],e);return t?UTF8ToString(t):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){const t=lengthBytesUTF8(e),n=C._malloc(t+1);stringToUTF8(e,n,t+1);const r=C._ts_query_new(this[0],n,t,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!r){const t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,s=e.substr(r,100).split("\n")[0];let i,o=s.match(QUERY_WORD_REGEX)[0];switch(t){case 2:i=new RangeError(`Bad node name '${o}'`);break;case 3:i=new RangeError(`Bad field name '${o}'`);break;case 4:i=new RangeError(`Bad capture name @${o}`);break;case 5:i=new TypeError(`Bad pattern structure at offset ${r}: '${s}'...`),o="";break;default:i=new SyntaxError(`Bad syntax at offset ${r}: '${s}'...`),o=""}throw i.index=r,i.length=o.length,C._free(n),i}const s=C._ts_query_string_count(r),i=C._ts_query_capture_count(r),o=C._ts_query_pattern_count(r),a=new Array(i),l=new Array(s);for(let e=0;e<i;e++){const t=C._ts_query_capture_name_for_id(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");a[e]=UTF8ToString(t,n)}for(let e=0;e<s;e++){const t=C._ts_query_string_value_for_id(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");l[e]=UTF8ToString(t,n)}const u=new Array(o),_=new Array(o),c=new Array(o),d=new Array(o),p=new Array(o);for(let e=0;e<o;e++){const t=C._ts_query_predicates_for_pattern(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");d[e]=[],p[e]=[];const s=[];let i=t;for(let t=0;t<n;t++){const t=getValue(i,"i32");i+=SIZE_OF_INT;const n=getValue(i,"i32");if(i+=SIZE_OF_INT,t===PREDICATE_STEP_TYPE_CAPTURE)s.push({type:"capture",name:a[n]});else if(t===PREDICATE_STEP_TYPE_STRING)s.push({type:"string",value:l[n]});else if(s.length>0){if("string"!==s[0].type)throw new Error("Predicates must begin with a literal value");const t=s[0].value;let n=!0;switch(t){case"not-eq?":n=!1;case"eq?":if(3!==s.length)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(s.length-1));if("capture"!==s[1].type)throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${s[1].value}"`);if("capture"===s[2].type){const t=s[1].name,r=s[2].name;p[e].push((function(e){let s,i;for(const n of e)n.name===t&&(s=n.node),n.name===r&&(i=n.node);return void 0===s||void 0===i||s.text===i.text===n}))}else{const t=s[1].name,r=s[2].value;p[e].push((function(e){for(const s of e)if(s.name===t)return s.node.text===r===n;return!0}))}break;case"not-match?":n=!1;case"match?":if(3!==s.length)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${s.length-1}.`);if("capture"!==s[1].type)throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${s[1].value}".`);if("string"!==s[2].type)throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${s[2].value}.`);const r=s[1].name,i=new RegExp(s[2].value);p[e].push((function(e){for(const t of e)if(t.name===r)return i.test(t.node.text)===n;return!0}));break;case"set!":if(s.length<2||s.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${s.length-1}.`);if(s.some((e=>"string"!==e.type)))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[e]||(u[e]={}),u[e][s[1].value]=s[2]?s[2].value:null;break;case"is?":case"is-not?":if(s.length<2||s.length>3)throw new Error(`Wrong number of arguments to \`#${t}\` predicate. Expected 1 or 2. Got ${s.length-1}.`);if(s.some((e=>"string"!==e.type)))throw new Error(`Arguments to \`#${t}\` predicate must be a strings.".`);const o="is?"===t?_:c;o[e]||(o[e]={}),o[e][s[1].value]=s[2]?s[2].value:null;break;default:d[e].push({operator:t,operands:s.slice(1)})}s.length=0}}Object.freeze(u[e]),Object.freeze(_[e]),Object.freeze(c[e])}return C._free(n),new Query(INTERNAL,r,a,p,d,Object.freeze(u),Object.freeze(_),Object.freeze(c))}static load(e){let t;if(e instanceof Uint8Array)t=Promise.resolve(e);else{const n=e;if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=__webpack_require__(7147);t=Promise.resolve(e.readFileSync(n))}else t=fetch(n).then((e=>e.arrayBuffer().then((t=>{if(e.ok)return new Uint8Array(t);{const n=new TextDecoder("utf-8").decode(t);throw new Error(`Language.load failed with status ${e.status}.\n\n${n}`)}}))))}const n="function"==typeof loadSideModule?loadSideModule:loadWebAssemblyModule;return t.then((e=>n(e,{loadAsync:!0}))).then((e=>{const t=Object.keys(e),n=t.find((e=>LANGUAGE_FUNCTION_REGEX.test(e)&&!e.includes("external_scanner_")));n||console.log(`Couldn't find language function in WASM file. Symbols:\n${JSON.stringify(t,null,2)}`);const r=e[n]();return new Language(INTERNAL,r)}))}}class Query{constructor(e,t,n,r,s,i,o,a){assertInternal(e),this[0]=t,this.captureNames=n,this.textPredicates=r,this.predicates=s,this.setProperties=i,this.assertedProperties=o,this.refutedProperties=a,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,t,n,r){t||(t=ZERO_POINT),n||(n=ZERO_POINT),r||(r={});let s=r.matchLimit;if(void 0===s)s=0;else if("number"!=typeof s)throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],t.row,t.column,n.row,n.column,s);const i=getValue(TRANSFER_BUFFER,"i32"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),a=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),l=new Array(i);this.exceededMatchLimit=!!a;let u=0,_=o;for(let t=0;t<i;t++){const n=getValue(_,"i32");_+=SIZE_OF_INT;const r=getValue(_,"i32");_+=SIZE_OF_INT;const s=new Array(r);if(_=unmarshalCaptures(this,e.tree,_,s),this.textPredicates[n].every((e=>e(s)))){l[u++]={pattern:n,captures:s};const e=this.setProperties[n];e&&(l[t].setProperties=e);const r=this.assertedProperties[n];r&&(l[t].assertedProperties=r);const i=this.refutedProperties[n];i&&(l[t].refutedProperties=i)}}return l.length=u,C._free(o),l}captures(e,t,n,r){t||(t=ZERO_POINT),n||(n=ZERO_POINT),r||(r={});let s=r.matchLimit;if(void 0===s)s=0;else if("number"!=typeof s)throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],t.row,t.column,n.row,n.column,s);const i=getValue(TRANSFER_BUFFER,"i32"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),a=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),l=[];this.exceededMatchLimit=!!a;const u=[];let _=o;for(let t=0;t<i;t++){const t=getValue(_,"i32");_+=SIZE_OF_INT;const n=getValue(_,"i32");_+=SIZE_OF_INT;const r=getValue(_,"i32");if(_+=SIZE_OF_INT,u.length=n,_=unmarshalCaptures(this,e.tree,_,u),this.textPredicates[t].every((e=>e(u)))){const e=u[r],n=this.setProperties[t];n&&(e.setProperties=n);const s=this.assertedProperties[t];s&&(e.assertedProperties=s);const i=this.refutedProperties[t];i&&(e.refutedProperties=i),l.push(e)}}return C._free(o),l}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,n){const r=n-t;let s=e.textCallback(t,null,n);for(t+=s.length;t<n;){const r=e.textCallback(t,null,n);if(!(r&&r.length>0))break;t+=r.length,s+=r}return t>n&&(s=s.slice(0,r)),s}function unmarshalCaptures(e,t,n,r){for(let s=0,i=r.length;s<i;s++){const i=getValue(n,"i32"),o=unmarshalNode(t,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[s]={name:e.captureNames[i],node:o}}return n}function assertInternal(e){if(e!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(e){return e&&"number"==typeof e.row&&"number"==typeof e.column}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,"i32"),t+=SIZE_OF_INT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,"i32"),t+=SIZE_OF_INT,setValue(t,e[0],"i32")}function unmarshalNode(e,t=TRANSFER_BUFFER){const n=getValue(t,"i32");if(0===n)return null;const r=getValue(t+=SIZE_OF_INT,"i32"),s=getValue(t+=SIZE_OF_INT,"i32"),i=getValue(t+=SIZE_OF_INT,"i32"),o=getValue(t+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,e);return a.id=n,a.startIndex=r,a.startPosition={row:s,column:i},a[0]=o,a}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],"i32"),setValue(t+1*SIZE_OF_INT,e[1],"i32"),setValue(t+2*SIZE_OF_INT,e[2],"i32")}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(e,t){setValue(e,t.row,"i32"),setValue(e+SIZE_OF_INT,t.column,"i32")}function unmarshalPoint(e){return{row:getValue(e,"i32"),column:getValue(e+SIZE_OF_INT,"i32")}}function marshalRange(e,t){marshalPoint(e,t.startPosition),marshalPoint(e+=SIZE_OF_POINT,t.endPosition),setValue(e+=SIZE_OF_POINT,t.startIndex,"i32"),setValue(e+=SIZE_OF_INT,t.endIndex,"i32"),e+=SIZE_OF_INT}function unmarshalRange(e){const t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,"i32"),e+=SIZE_OF_INT,t.endIndex=getValue(e,"i32"),t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,"i32"),t+=SIZE_OF_INT}for(const e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}})))}}return Parser}();module.exports=TreeSitter},9491:e=>{"use strict";e.exports=require("assert")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};(()=>{const e=__webpack_require__(5563),{parentPort:t}=__webpack_require__(1267),{defaultFileSystem:n}=__webpack_require__(2271);t.on("message",(async({id:r,fn:s,args:i})=>{try{if("getPrompt"===s){let s=await e.getPrompt(n,...i);t.postMessage({id:r,res:s})}else{let n=await e[s](...i);t.postMessage({id:r,res:n})}}catch(e){t.postMessage({id:r,err:e})}}))})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=worker.js.map