"use strict";var nt=Object.create;var de=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var ot=Object.getOwnPropertyNames;var at=Object.getPrototypeOf,it=Object.prototype.hasOwnProperty;var Y=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var Oe=(t,n,e,_)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of ot(n))!it.call(t,l)&&l!==e&&de(t,l,{get:()=>n[l],enumerable:!(_=st(n,l))||_.enumerable});return t};var ut=(t,n,e)=>(e=t!=null?nt(at(t)):{},Oe(n||!t||!t.__esModule?de(e,"default",{value:t,enumerable:!0}):e,t)),ct=t=>Oe(de({},"__esModule",{value:!0}),t);var ee=Y((Vt,Me)=>{"use strict";var lt=require("path"),z="\\\\/",Ie=`[^${z}]`,Z="\\.",ft="\\+",pt="\\?",ie="\\/",ht="(?=.)",He="[^/]",ye=`(?:${ie}|$)`,ke=`(?:^|${ie})`,Ae=`${Z}{1,2}${ye}`,dt=`(?!${Z})`,gt=`(?!${ke}${Ae})`,yt=`(?!${Z}{0,1}${ye})`,At=`(?!${Ae})`,mt=`[^.${ie}]`,bt=`${He}*?`,Le={DOT_LITERAL:Z,PLUS_LITERAL:ft,QMARK_LITERAL:pt,SLASH_LITERAL:ie,ONE_CHAR:ht,QMARK:He,END_ANCHOR:ye,DOTS_SLASH:Ae,NO_DOT:dt,NO_DOTS:gt,NO_DOT_SLASH:yt,NO_DOTS_SLASH:At,QMARK_NO_DOT:mt,STAR:bt,START_ANCHOR:ke},Rt={...Le,SLASH_LITERAL:`[${z}]`,QMARK:Ie,STAR:`${Ie}*?`,DOTS_SLASH:`${Z}{1,2}(?:[${z}]|$)`,NO_DOT:`(?!${Z})`,NO_DOTS:`(?!(?:^|[${z}])${Z}{1,2}(?:[${z}]|$))`,NO_DOT_SLASH:`(?!${Z}{0,1}(?:[${z}]|$))`,NO_DOTS_SLASH:`(?!${Z}{1,2}(?:[${z}]|$))`,QMARK_NO_DOT:`[^.${z}]`,START_ANCHOR:`(?:^|[${z}])`,END_ANCHOR:`(?:[${z}]|$)`},_t={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Me.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:_t,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:lt.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Rt:Le}}});var ue=Y(j=>{"use strict";var Ct=require("path"),Et=process.platform==="win32",{REGEX_BACKSLASH:xt,REGEX_REMOVE_BACKSLASH:vt,REGEX_SPECIAL_CHARS:St,REGEX_SPECIAL_CHARS_GLOBAL:$t}=ee();j.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);j.hasRegexChars=t=>St.test(t);j.isRegexChar=t=>t.length===1&&j.hasRegexChars(t);j.escapeRegex=t=>t.replace($t,"\\$1");j.toPosixSlashes=t=>t.replace(xt,"/");j.removeBackslashes=t=>t.replace(vt,n=>n==="\\"?"":n);j.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};j.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:Et===!0||Ct.sep==="\\";j.escapeLast=(t,n,e)=>{let _=t.lastIndexOf(n,e);return _===-1?t:t[_-1]==="\\"?j.escapeLast(t,n,_-1):`${t.slice(0,_)}\\${t.slice(_)}`};j.removePrefix=(t,n={})=>{let e=t;return e.startsWith("./")&&(e=e.slice(2),n.prefix="./"),e};j.wrapOutput=(t,n={},e={})=>{let _=e.contains?"":"^",l=e.contains?"":"$",d=`${_}(?:${t})${l}`;return n.negated===!0&&(d=`(?:^(?!${d}).*$)`),d}});var qe=Y((Jt,Be)=>{"use strict";var Ne=ue(),{CHAR_ASTERISK:me,CHAR_AT:Tt,CHAR_BACKWARD_SLASH:te,CHAR_COMMA:Ot,CHAR_DOT:be,CHAR_EXCLAMATION_MARK:Re,CHAR_FORWARD_SLASH:Ge,CHAR_LEFT_CURLY_BRACE:_e,CHAR_LEFT_PARENTHESES:Ce,CHAR_LEFT_SQUARE_BRACKET:wt,CHAR_PLUS:It,CHAR_QUESTION_MARK:Pe,CHAR_RIGHT_CURLY_BRACE:Ht,CHAR_RIGHT_PARENTHESES:Ue,CHAR_RIGHT_SQUARE_BRACKET:kt}=ee(),Ke=t=>t===Ge||t===te,De=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Lt=(t,n)=>{let e=n||{},_=t.length-1,l=e.parts===!0||e.scanToEnd===!0,d=[],R=[],S=[],a=t,u=-1,c=0,f=0,g=!1,A=!1,m=!1,C=!1,k=!1,$=!1,M=!1,I=!1,X=!1,D=!1,W=0,B,x,w={value:"",depth:0,isGlob:!1},U=()=>u>=_,r=()=>a.charCodeAt(u+1),i=()=>(B=x,a.charCodeAt(++u));for(;u<_;){x=i();let E;if(x===te){M=w.backslashes=!0,x=i(),x===_e&&($=!0);continue}if($===!0||x===_e){for(W++;U()!==!0&&(x=i());){if(x===te){M=w.backslashes=!0,i();continue}if(x===_e){W++;continue}if($!==!0&&x===be&&(x=i())===be){if(g=w.isBrace=!0,m=w.isGlob=!0,D=!0,l===!0)continue;break}if($!==!0&&x===Ot){if(g=w.isBrace=!0,m=w.isGlob=!0,D=!0,l===!0)continue;break}if(x===Ht&&(W--,W===0)){$=!1,g=w.isBrace=!0,D=!0;break}}if(l===!0)continue;break}if(x===Ge){if(d.push(u),R.push(w),w={value:"",depth:0,isGlob:!1},D===!0)continue;if(B===be&&u===c+1){c+=2;continue}f=u+1;continue}if(e.noext!==!0&&(x===It||x===Tt||x===me||x===Pe||x===Re)===!0&&r()===Ce){if(m=w.isGlob=!0,C=w.isExtglob=!0,D=!0,x===Re&&u===c&&(X=!0),l===!0){for(;U()!==!0&&(x=i());){if(x===te){M=w.backslashes=!0,x=i();continue}if(x===Ue){m=w.isGlob=!0,D=!0;break}}continue}break}if(x===me){if(B===me&&(k=w.isGlobstar=!0),m=w.isGlob=!0,D=!0,l===!0)continue;break}if(x===Pe){if(m=w.isGlob=!0,D=!0,l===!0)continue;break}if(x===wt){for(;U()!==!0&&(E=i());){if(E===te){M=w.backslashes=!0,i();continue}if(E===kt){A=w.isBracket=!0,m=w.isGlob=!0,D=!0;break}}if(l===!0)continue;break}if(e.nonegate!==!0&&x===Re&&u===c){I=w.negated=!0,c++;continue}if(e.noparen!==!0&&x===Ce){if(m=w.isGlob=!0,l===!0){for(;U()!==!0&&(x=i());){if(x===Ce){M=w.backslashes=!0,x=i();continue}if(x===Ue){D=!0;break}}continue}break}if(m===!0){if(D=!0,l===!0)continue;break}}e.noext===!0&&(C=!1,m=!1);let p=a,b="",o="";c>0&&(b=a.slice(0,c),a=a.slice(c),f-=c),p&&m===!0&&f>0?(p=a.slice(0,f),o=a.slice(f)):m===!0?(p="",o=a):p=a,p&&p!==""&&p!=="/"&&p!==a&&Ke(p.charCodeAt(p.length-1))&&(p=p.slice(0,-1)),e.unescape===!0&&(o&&(o=Ne.removeBackslashes(o)),p&&M===!0&&(p=Ne.removeBackslashes(p)));let s={prefix:b,input:t,start:c,base:p,glob:o,isBrace:g,isBracket:A,isGlob:m,isExtglob:C,isGlobstar:k,negated:I,negatedExtglob:X};if(e.tokens===!0&&(s.maxDepth=0,Ke(x)||R.push(w),s.tokens=R),e.parts===!0||e.tokens===!0){let E;for(let v=0;v<d.length;v++){let N=E?E+1:c,H=d[v],q=t.slice(N,H);e.tokens&&(v===0&&c!==0?(R[v].isPrefix=!0,R[v].value=b):R[v].value=q,De(R[v]),s.maxDepth+=R[v].depth),(v!==0||q!=="")&&S.push(q),E=H}if(E&&E+1<t.length){let v=t.slice(E+1);S.push(v),e.tokens&&(R[R.length-1].value=v,De(R[R.length-1]),s.maxDepth+=R[R.length-1].depth)}s.slashes=d,s.parts=S}return s};Be.exports=Lt});var Xe=Y((er,je)=>{"use strict";var ce=ee(),Q=ue(),{MAX_LENGTH:le,POSIX_REGEX_SOURCE:Mt,REGEX_NON_SPECIAL_CHARS:Nt,REGEX_SPECIAL_CHARS_BACKREF:Pt,REPLACEMENTS:Fe}=ce,Ut=(t,n)=>{if(typeof n.expandRange=="function")return n.expandRange(...t,n);t.sort();let e=`[${t.join("-")}]`;try{new RegExp(e)}catch{return t.map(l=>Q.escapeRegex(l)).join("..")}return e},J=(t,n)=>`Missing ${t}: "${n}" - use "\\\\${n}" to match literal characters`,Ee=(t,n)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Fe[t]||t;let e={...n},_=typeof e.maxLength=="number"?Math.min(le,e.maxLength):le,l=t.length;if(l>_)throw new SyntaxError(`Input length: ${l}, exceeds maximum allowed length: ${_}`);let d={type:"bos",value:"",output:e.prepend||""},R=[d],S=e.capture?"":"?:",a=Q.isWindows(n),u=ce.globChars(a),c=ce.extglobChars(u),{DOT_LITERAL:f,PLUS_LITERAL:g,SLASH_LITERAL:A,ONE_CHAR:m,DOTS_SLASH:C,NO_DOT:k,NO_DOT_SLASH:$,NO_DOTS_SLASH:M,QMARK:I,QMARK_NO_DOT:X,STAR:D,START_ANCHOR:W}=u,B=y=>`(${S}(?:(?!${W}${y.dot?C:f}).)*?)`,x=e.dot?"":k,w=e.dot?I:X,U=e.bash===!0?B(e):D;e.capture&&(U=`(${U})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let r={input:t,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:R};t=Q.removePrefix(t,r),l=t.length;let i=[],p=[],b=[],o=d,s,E=()=>r.index===l-1,v=r.peek=(y=1)=>t[r.index+y],N=r.advance=()=>t[++r.index]||"",H=()=>t.slice(r.index+1),q=(y="",L=0)=>{r.consumed+=y,r.index+=L},ne=y=>{r.output+=y.output!=null?y.output:y.value,q(y.value)},tt=()=>{let y=1;for(;v()==="!"&&(v(2)!=="("||v(3)==="?");)N(),r.start++,y++;return y%2===0?!1:(r.negated=!0,r.start++,!0)},se=y=>{r[y]++,b.push(y)},V=y=>{r[y]--,b.pop()},O=y=>{if(o.type==="globstar"){let L=r.braces>0&&(y.type==="comma"||y.type==="brace"),h=y.extglob===!0||i.length&&(y.type==="pipe"||y.type==="paren");y.type!=="slash"&&y.type!=="paren"&&!L&&!h&&(r.output=r.output.slice(0,-o.output.length),o.type="star",o.value="*",o.output=U,r.output+=o.output)}if(i.length&&y.type!=="paren"&&(i[i.length-1].inner+=y.value),(y.value||y.output)&&ne(y),o&&o.type==="text"&&y.type==="text"){o.value+=y.value,o.output=(o.output||"")+y.value;return}y.prev=o,R.push(y),o=y},oe=(y,L)=>{let h={...c[L],conditions:1,inner:""};h.prev=o,h.parens=r.parens,h.output=r.output;let T=(e.capture?"(":"")+h.open;se("parens"),O({type:y,value:L,output:r.output?"":m}),O({type:"paren",extglob:!0,value:N(),output:T}),i.push(h)},rt=y=>{let L=y.close+(e.capture?")":""),h;if(y.type==="negate"){let T=U;if(y.inner&&y.inner.length>1&&y.inner.includes("/")&&(T=B(e)),(T!==U||E()||/^\)+$/.test(H()))&&(L=y.close=`)$))${T}`),y.inner.includes("*")&&(h=H())&&/^\.[^\\/.]+$/.test(h)){let P=Ee(h,{...n,fastpaths:!1}).output;L=y.close=`)${P})${T})`}y.prev.type==="bos"&&(r.negatedExtglob=!0)}O({type:"paren",extglob:!0,value:s,output:L}),V("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let y=!1,L=t.replace(Pt,(h,T,P,F,G,he)=>F==="\\"?(y=!0,h):F==="?"?T?T+F+(G?I.repeat(G.length):""):he===0?w+(G?I.repeat(G.length):""):I.repeat(P.length):F==="."?f.repeat(P.length):F==="*"?T?T+F+(G?U:""):U:T?h:`\\${h}`);return y===!0&&(e.unescape===!0?L=L.replace(/\\/g,""):L=L.replace(/\\+/g,h=>h.length%2===0?"\\\\":h?"\\":"")),L===t&&e.contains===!0?(r.output=t,r):(r.output=Q.wrapOutput(L,r,n),r)}for(;!E();){if(s=N(),s==="\0")continue;if(s==="\\"){let h=v();if(h==="/"&&e.bash!==!0||h==="."||h===";")continue;if(!h){s+="\\",O({type:"text",value:s});continue}let T=/^\\+/.exec(H()),P=0;if(T&&T[0].length>2&&(P=T[0].length,r.index+=P,P%2!==0&&(s+="\\")),e.unescape===!0?s=N():s+=N(),r.brackets===0){O({type:"text",value:s});continue}}if(r.brackets>0&&(s!=="]"||o.value==="["||o.value==="[^")){if(e.posix!==!1&&s===":"){let h=o.value.slice(1);if(h.includes("[")&&(o.posix=!0,h.includes(":"))){let T=o.value.lastIndexOf("["),P=o.value.slice(0,T),F=o.value.slice(T+2),G=Mt[F];if(G){o.value=P+G,r.backtrack=!0,N(),!d.output&&R.indexOf(o)===1&&(d.output=m);continue}}}(s==="["&&v()!==":"||s==="-"&&v()==="]")&&(s=`\\${s}`),s==="]"&&(o.value==="["||o.value==="[^")&&(s=`\\${s}`),e.posix===!0&&s==="!"&&o.value==="["&&(s="^"),o.value+=s,ne({value:s});continue}if(r.quotes===1&&s!=='"'){s=Q.escapeRegex(s),o.value+=s,ne({value:s});continue}if(s==='"'){r.quotes=r.quotes===1?0:1,e.keepQuotes===!0&&O({type:"text",value:s});continue}if(s==="("){se("parens"),O({type:"paren",value:s});continue}if(s===")"){if(r.parens===0&&e.strictBrackets===!0)throw new SyntaxError(J("opening","("));let h=i[i.length-1];if(h&&r.parens===h.parens+1){rt(i.pop());continue}O({type:"paren",value:s,output:r.parens?")":"\\)"}),V("parens");continue}if(s==="["){if(e.nobracket===!0||!H().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(J("closing","]"));s=`\\${s}`}else se("brackets");O({type:"bracket",value:s});continue}if(s==="]"){if(e.nobracket===!0||o&&o.type==="bracket"&&o.value.length===1){O({type:"text",value:s,output:`\\${s}`});continue}if(r.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(J("opening","["));O({type:"text",value:s,output:`\\${s}`});continue}V("brackets");let h=o.value.slice(1);if(o.posix!==!0&&h[0]==="^"&&!h.includes("/")&&(s=`/${s}`),o.value+=s,ne({value:s}),e.literalBrackets===!1||Q.hasRegexChars(h))continue;let T=Q.escapeRegex(o.value);if(r.output=r.output.slice(0,-o.value.length),e.literalBrackets===!0){r.output+=T,o.value=T;continue}o.value=`(${S}${T}|${o.value})`,r.output+=o.value;continue}if(s==="{"&&e.nobrace!==!0){se("braces");let h={type:"brace",value:s,output:"(",outputIndex:r.output.length,tokensIndex:r.tokens.length};p.push(h),O(h);continue}if(s==="}"){let h=p[p.length-1];if(e.nobrace===!0||!h){O({type:"text",value:s,output:s});continue}let T=")";if(h.dots===!0){let P=R.slice(),F=[];for(let G=P.length-1;G>=0&&(R.pop(),P[G].type!=="brace");G--)P[G].type!=="dots"&&F.unshift(P[G].value);T=Ut(F,e),r.backtrack=!0}if(h.comma!==!0&&h.dots!==!0){let P=r.output.slice(0,h.outputIndex),F=r.tokens.slice(h.tokensIndex);h.value=h.output="\\{",s=T="\\}",r.output=P;for(let G of F)r.output+=G.output||G.value}O({type:"brace",value:s,output:T}),V("braces"),p.pop();continue}if(s==="|"){i.length>0&&i[i.length-1].conditions++,O({type:"text",value:s});continue}if(s===","){let h=s,T=p[p.length-1];T&&b[b.length-1]==="braces"&&(T.comma=!0,h="|"),O({type:"comma",value:s,output:h});continue}if(s==="/"){if(o.type==="dot"&&r.index===r.start+1){r.start=r.index+1,r.consumed="",r.output="",R.pop(),o=d;continue}O({type:"slash",value:s,output:A});continue}if(s==="."){if(r.braces>0&&o.type==="dot"){o.value==="."&&(o.output=f);let h=p[p.length-1];o.type="dots",o.output+=s,o.value+=s,h.dots=!0;continue}if(r.braces+r.parens===0&&o.type!=="bos"&&o.type!=="slash"){O({type:"text",value:s,output:f});continue}O({type:"dot",value:s,output:f});continue}if(s==="?"){if(!(o&&o.value==="(")&&e.noextglob!==!0&&v()==="("&&v(2)!=="?"){oe("qmark",s);continue}if(o&&o.type==="paren"){let T=v(),P=s;if(T==="<"&&!Q.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(o.value==="("&&!/[!=<:]/.test(T)||T==="<"&&!/<([!=]|\w+>)/.test(H()))&&(P=`\\${s}`),O({type:"text",value:s,output:P});continue}if(e.dot!==!0&&(o.type==="slash"||o.type==="bos")){O({type:"qmark",value:s,output:X});continue}O({type:"qmark",value:s,output:I});continue}if(s==="!"){if(e.noextglob!==!0&&v()==="("&&(v(2)!=="?"||!/[!=<:]/.test(v(3)))){oe("negate",s);continue}if(e.nonegate!==!0&&r.index===0){tt();continue}}if(s==="+"){if(e.noextglob!==!0&&v()==="("&&v(2)!=="?"){oe("plus",s);continue}if(o&&o.value==="("||e.regex===!1){O({type:"plus",value:s,output:g});continue}if(o&&(o.type==="bracket"||o.type==="paren"||o.type==="brace")||r.parens>0){O({type:"plus",value:s});continue}O({type:"plus",value:g});continue}if(s==="@"){if(e.noextglob!==!0&&v()==="("&&v(2)!=="?"){O({type:"at",extglob:!0,value:s,output:""});continue}O({type:"text",value:s});continue}if(s!=="*"){(s==="$"||s==="^")&&(s=`\\${s}`);let h=Nt.exec(H());h&&(s+=h[0],r.index+=h[0].length),O({type:"text",value:s});continue}if(o&&(o.type==="globstar"||o.star===!0)){o.type="star",o.star=!0,o.value+=s,o.output=U,r.backtrack=!0,r.globstar=!0,q(s);continue}let y=H();if(e.noextglob!==!0&&/^\([^?]/.test(y)){oe("star",s);continue}if(o.type==="star"){if(e.noglobstar===!0){q(s);continue}let h=o.prev,T=h.prev,P=h.type==="slash"||h.type==="bos",F=T&&(T.type==="star"||T.type==="globstar");if(e.bash===!0&&(!P||y[0]&&y[0]!=="/")){O({type:"star",value:s,output:""});continue}let G=r.braces>0&&(h.type==="comma"||h.type==="brace"),he=i.length&&(h.type==="pipe"||h.type==="paren");if(!P&&h.type!=="paren"&&!G&&!he){O({type:"star",value:s,output:""});continue}for(;y.slice(0,3)==="/**";){let ae=t[r.index+4];if(ae&&ae!=="/")break;y=y.slice(3),q("/**",3)}if(h.type==="bos"&&E()){o.type="globstar",o.value+=s,o.output=B(e),r.output=o.output,r.globstar=!0,q(s);continue}if(h.type==="slash"&&h.prev.type!=="bos"&&!F&&E()){r.output=r.output.slice(0,-(h.output+o.output).length),h.output=`(?:${h.output}`,o.type="globstar",o.output=B(e)+(e.strictSlashes?")":"|$)"),o.value+=s,r.globstar=!0,r.output+=h.output+o.output,q(s);continue}if(h.type==="slash"&&h.prev.type!=="bos"&&y[0]==="/"){let ae=y[1]!==void 0?"|$":"";r.output=r.output.slice(0,-(h.output+o.output).length),h.output=`(?:${h.output}`,o.type="globstar",o.output=`${B(e)}${A}|${A}${ae})`,o.value+=s,r.output+=h.output+o.output,r.globstar=!0,q(s+N()),O({type:"slash",value:"/",output:""});continue}if(h.type==="bos"&&y[0]==="/"){o.type="globstar",o.value+=s,o.output=`(?:^|${A}|${B(e)}${A})`,r.output=o.output,r.globstar=!0,q(s+N()),O({type:"slash",value:"/",output:""});continue}r.output=r.output.slice(0,-o.output.length),o.type="globstar",o.output=B(e),o.value+=s,r.output+=o.output,r.globstar=!0,q(s);continue}let L={type:"star",value:s,output:U};if(e.bash===!0){L.output=".*?",(o.type==="bos"||o.type==="slash")&&(L.output=x+L.output),O(L);continue}if(o&&(o.type==="bracket"||o.type==="paren")&&e.regex===!0){L.output=s,O(L);continue}(r.index===r.start||o.type==="slash"||o.type==="dot")&&(o.type==="dot"?(r.output+=$,o.output+=$):e.dot===!0?(r.output+=M,o.output+=M):(r.output+=x,o.output+=x),v()!=="*"&&(r.output+=m,o.output+=m)),O(L)}for(;r.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(J("closing","]"));r.output=Q.escapeLast(r.output,"["),V("brackets")}for(;r.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(J("closing",")"));r.output=Q.escapeLast(r.output,"("),V("parens")}for(;r.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(J("closing","}"));r.output=Q.escapeLast(r.output,"{"),V("braces")}if(e.strictSlashes!==!0&&(o.type==="star"||o.type==="bracket")&&O({type:"maybe_slash",value:"",output:`${A}?`}),r.backtrack===!0){r.output="";for(let y of r.tokens)r.output+=y.output!=null?y.output:y.value,y.suffix&&(r.output+=y.suffix)}return r};Ee.fastpaths=(t,n)=>{let e={...n},_=typeof e.maxLength=="number"?Math.min(le,e.maxLength):le,l=t.length;if(l>_)throw new SyntaxError(`Input length: ${l}, exceeds maximum allowed length: ${_}`);t=Fe[t]||t;let d=Q.isWindows(n),{DOT_LITERAL:R,SLASH_LITERAL:S,ONE_CHAR:a,DOTS_SLASH:u,NO_DOT:c,NO_DOTS:f,NO_DOTS_SLASH:g,STAR:A,START_ANCHOR:m}=ce.globChars(d),C=e.dot?f:c,k=e.dot?g:c,$=e.capture?"":"?:",M={negated:!1,prefix:""},I=e.bash===!0?".*?":A;e.capture&&(I=`(${I})`);let X=x=>x.noglobstar===!0?I:`(${$}(?:(?!${m}${x.dot?u:R}).)*?)`,D=x=>{switch(x){case"*":return`${C}${a}${I}`;case".*":return`${R}${a}${I}`;case"*.*":return`${C}${I}${R}${a}${I}`;case"*/*":return`${C}${I}${S}${a}${k}${I}`;case"**":return C+X(e);case"**/*":return`(?:${C}${X(e)}${S})?${k}${a}${I}`;case"**/*.*":return`(?:${C}${X(e)}${S})?${k}${I}${R}${a}${I}`;case"**/.*":return`(?:${C}${X(e)}${S})?${R}${a}${I}`;default:{let w=/^(.*?)\.(\w+)$/.exec(x);if(!w)return;let U=D(w[1]);return U?U+R+w[2]:void 0}}},W=Q.removePrefix(t,M),B=D(W);return B&&e.strictSlashes!==!0&&(B+=`${S}?`),B};je.exports=Ee});var Qe=Y((tr,We)=>{"use strict";var Kt=require("path"),Dt=qe(),xe=Xe(),ve=ue(),Gt=ee(),Bt=t=>t&&typeof t=="object"&&!Array.isArray(t),K=(t,n,e=!1)=>{if(Array.isArray(t)){let c=t.map(g=>K(g,n,e));return g=>{for(let A of c){let m=A(g);if(m)return m}return!1}}let _=Bt(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!_)throw new TypeError("Expected pattern to be a non-empty string");let l=n||{},d=ve.isWindows(n),R=_?K.compileRe(t,n):K.makeRe(t,n,!1,!0),S=R.state;delete R.state;let a=()=>!1;if(l.ignore){let c={...n,ignore:null,onMatch:null,onResult:null};a=K(l.ignore,c,e)}let u=(c,f=!1)=>{let{isMatch:g,match:A,output:m}=K.test(c,R,n,{glob:t,posix:d}),C={glob:t,state:S,regex:R,posix:d,input:c,output:m,match:A,isMatch:g};return typeof l.onResult=="function"&&l.onResult(C),g===!1?(C.isMatch=!1,f?C:!1):a(c)?(typeof l.onIgnore=="function"&&l.onIgnore(C),C.isMatch=!1,f?C:!1):(typeof l.onMatch=="function"&&l.onMatch(C),f?C:!0)};return e&&(u.state=S),u};K.test=(t,n,e,{glob:_,posix:l}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let d=e||{},R=d.format||(l?ve.toPosixSlashes:null),S=t===_,a=S&&R?R(t):t;return S===!1&&(a=R?R(t):t,S=a===_),(S===!1||d.capture===!0)&&(d.matchBase===!0||d.basename===!0?S=K.matchBase(t,n,e,l):S=n.exec(a)),{isMatch:!!S,match:S,output:a}};K.matchBase=(t,n,e,_=ve.isWindows(e))=>(n instanceof RegExp?n:K.makeRe(n,e)).test(Kt.basename(t));K.isMatch=(t,n,e)=>K(n,e)(t);K.parse=(t,n)=>Array.isArray(t)?t.map(e=>K.parse(e,n)):xe(t,{...n,fastpaths:!1});K.scan=(t,n)=>Dt(t,n);K.compileRe=(t,n,e=!1,_=!1)=>{if(e===!0)return t.output;let l=n||{},d=l.contains?"":"^",R=l.contains?"":"$",S=`${d}(?:${t.output})${R}`;t&&t.negated===!0&&(S=`^(?!${S}).*$`);let a=K.toRegex(S,n);return _===!0&&(a.state=t),a};K.makeRe=(t,n={},e=!1,_=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let l={negated:!1,fastpaths:!0};return n.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(l.output=xe.fastpaths(t,n)),l.output||(l=xe(t,n)),K.compileRe(l,n,e,_)};K.toRegex=(t,n)=>{try{let e=n||{};return new RegExp(t,e.flags||(e.nocase?"i":""))}catch(e){if(n&&n.debug===!0)throw e;return/$^/}};K.constants=Gt;We.exports=K});var Ze=Y((rr,ze)=>{"use strict";ze.exports=Qe()});var Wt={};module.exports=ct(Wt);var we;(()=>{"use strict";var t={470:l=>{function d(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function R(a,u){for(var c,f="",g=0,A=-1,m=0,C=0;C<=a.length;++C){if(C<a.length)c=a.charCodeAt(C);else{if(c===47)break;c=47}if(c===47){if(!(A===C-1||m===1))if(A!==C-1&&m===2){if(f.length<2||g!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var k=f.lastIndexOf("/");if(k!==f.length-1){k===-1?(f="",g=0):g=(f=f.slice(0,k)).length-1-f.lastIndexOf("/"),A=C,m=0;continue}}else if(f.length===2||f.length===1){f="",g=0,A=C,m=0;continue}}u&&(f.length>0?f+="/..":f="..",g=2)}else f.length>0?f+="/"+a.slice(A+1,C):f=a.slice(A+1,C),g=C-A-1;A=C,m=0}else c===46&&m!==-1?++m:m=-1}return f}var S={resolve:function(){for(var a,u="",c=!1,f=arguments.length-1;f>=-1&&!c;f--){var g;f>=0?g=arguments[f]:(a===void 0&&(a=process.cwd()),g=a),d(g),g.length!==0&&(u=g+"/"+u,c=g.charCodeAt(0)===47)}return u=R(u,!c),c?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(a){if(d(a),a.length===0)return".";var u=a.charCodeAt(0)===47,c=a.charCodeAt(a.length-1)===47;return(a=R(a,!u)).length!==0||u||(a="."),a.length>0&&c&&(a+="/"),u?"/"+a:a},isAbsolute:function(a){return d(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,u=0;u<arguments.length;++u){var c=arguments[u];d(c),c.length>0&&(a===void 0?a=c:a+="/"+c)}return a===void 0?".":S.normalize(a)},relative:function(a,u){if(d(a),d(u),a===u||(a=S.resolve(a))===(u=S.resolve(u)))return"";for(var c=1;c<a.length&&a.charCodeAt(c)===47;++c);for(var f=a.length,g=f-c,A=1;A<u.length&&u.charCodeAt(A)===47;++A);for(var m=u.length-A,C=g<m?g:m,k=-1,$=0;$<=C;++$){if($===C){if(m>C){if(u.charCodeAt(A+$)===47)return u.slice(A+$+1);if($===0)return u.slice(A+$)}else g>C&&(a.charCodeAt(c+$)===47?k=$:$===0&&(k=0));break}var M=a.charCodeAt(c+$);if(M!==u.charCodeAt(A+$))break;M===47&&(k=$)}var I="";for($=c+k+1;$<=f;++$)$!==f&&a.charCodeAt($)!==47||(I.length===0?I+="..":I+="/..");return I.length>0?I+u.slice(A+k):(A+=k,u.charCodeAt(A)===47&&++A,u.slice(A))},_makeLong:function(a){return a},dirname:function(a){if(d(a),a.length===0)return".";for(var u=a.charCodeAt(0),c=u===47,f=-1,g=!0,A=a.length-1;A>=1;--A)if((u=a.charCodeAt(A))===47){if(!g){f=A;break}}else g=!1;return f===-1?c?"/":".":c&&f===1?"//":a.slice(0,f)},basename:function(a,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');d(a);var c,f=0,g=-1,A=!0;if(u!==void 0&&u.length>0&&u.length<=a.length){if(u.length===a.length&&u===a)return"";var m=u.length-1,C=-1;for(c=a.length-1;c>=0;--c){var k=a.charCodeAt(c);if(k===47){if(!A){f=c+1;break}}else C===-1&&(A=!1,C=c+1),m>=0&&(k===u.charCodeAt(m)?--m==-1&&(g=c):(m=-1,g=C))}return f===g?g=C:g===-1&&(g=a.length),a.slice(f,g)}for(c=a.length-1;c>=0;--c)if(a.charCodeAt(c)===47){if(!A){f=c+1;break}}else g===-1&&(A=!1,g=c+1);return g===-1?"":a.slice(f,g)},extname:function(a){d(a);for(var u=-1,c=0,f=-1,g=!0,A=0,m=a.length-1;m>=0;--m){var C=a.charCodeAt(m);if(C!==47)f===-1&&(g=!1,f=m+1),C===46?u===-1?u=m:A!==1&&(A=1):u!==-1&&(A=-1);else if(!g){c=m+1;break}}return u===-1||f===-1||A===0||A===1&&u===f-1&&u===c+1?"":a.slice(u,f)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(u,c){var f=c.dir||c.root,g=c.base||(c.name||"")+(c.ext||"");return f?f===c.root?f+g:f+"/"+g:g}(0,a)},parse:function(a){d(a);var u={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return u;var c,f=a.charCodeAt(0),g=f===47;g?(u.root="/",c=1):c=0;for(var A=-1,m=0,C=-1,k=!0,$=a.length-1,M=0;$>=c;--$)if((f=a.charCodeAt($))!==47)C===-1&&(k=!1,C=$+1),f===46?A===-1?A=$:M!==1&&(M=1):A!==-1&&(M=-1);else if(!k){m=$+1;break}return A===-1||C===-1||M===0||M===1&&A===C-1&&A===m+1?C!==-1&&(u.base=u.name=m===0&&g?a.slice(1,C):a.slice(m,C)):(m===0&&g?(u.name=a.slice(1,A),u.base=a.slice(1,C)):(u.name=a.slice(m,A),u.base=a.slice(m,C)),u.ext=a.slice(A,C)),m>0?u.dir=a.slice(0,m-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};S.posix=S,l.exports=S}},n={};function e(l){var d=n[l];if(d!==void 0)return d.exports;var R=n[l]={exports:{}};return t[l](R,R.exports,e),R.exports}e.d=(l,d)=>{for(var R in d)e.o(d,R)&&!e.o(l,R)&&Object.defineProperty(l,R,{enumerable:!0,get:d[R]})},e.o=(l,d)=>Object.prototype.hasOwnProperty.call(l,d),e.r=l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var _={};(()=>{let l;e.r(_),e.d(_,{URI:()=>g,Utils:()=>U}),typeof process=="object"?l=process.platform==="win32":typeof navigator=="object"&&(l=navigator.userAgent.indexOf("Windows")>=0);let d=/^\w[\w\d+.-]*$/,R=/^\//,S=/^\/\//;function a(r,i){if(!r.scheme&&i)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!d.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!R.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(S.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",c="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(i){return i instanceof g||!!i&&typeof i.authority=="string"&&typeof i.fragment=="string"&&typeof i.path=="string"&&typeof i.query=="string"&&typeof i.scheme=="string"&&typeof i.fsPath=="string"&&typeof i.with=="function"&&typeof i.toString=="function"}scheme;authority;path;query;fragment;constructor(i,p,b,o,s,E=!1){typeof i=="object"?(this.scheme=i.scheme||u,this.authority=i.authority||u,this.path=i.path||u,this.query=i.query||u,this.fragment=i.fragment||u):(this.scheme=function(v,N){return v||N?v:"file"}(i,E),this.authority=p||u,this.path=function(v,N){switch(v){case"https":case"http":case"file":N?N[0]!==c&&(N=c+N):N=c}return N}(this.scheme,b||u),this.query=o||u,this.fragment=s||u,a(this,E))}get fsPath(){return M(this,!1)}with(i){if(!i)return this;let{scheme:p,authority:b,path:o,query:s,fragment:E}=i;return p===void 0?p=this.scheme:p===null&&(p=u),b===void 0?b=this.authority:b===null&&(b=u),o===void 0?o=this.path:o===null&&(o=u),s===void 0?s=this.query:s===null&&(s=u),E===void 0?E=this.fragment:E===null&&(E=u),p===this.scheme&&b===this.authority&&o===this.path&&s===this.query&&E===this.fragment?this:new m(p,b,o,s,E)}static parse(i,p=!1){let b=f.exec(i);return b?new m(b[2]||u,W(b[4]||u),W(b[5]||u),W(b[7]||u),W(b[9]||u),p):new m(u,u,u,u,u)}static file(i){let p=u;if(l&&(i=i.replace(/\\/g,c)),i[0]===c&&i[1]===c){let b=i.indexOf(c,2);b===-1?(p=i.substring(2),i=c):(p=i.substring(2,b),i=i.substring(b)||c)}return new m("file",p,i,u,u)}static from(i){let p=new m(i.scheme,i.authority,i.path,i.query,i.fragment);return a(p,!0),p}toString(i=!1){return I(this,i)}toJSON(){return this}static revive(i){if(i){if(i instanceof g)return i;{let p=new m(i);return p._formatted=i.external,p._fsPath=i._sep===A?i.fsPath:null,p}}return i}}let A=l?1:void 0;class m extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=M(this,!1)),this._fsPath}toString(i=!1){return i?I(this,!0):(this._formatted||(this._formatted=I(this,!1)),this._formatted)}toJSON(){let i={$mid:1};return this._fsPath&&(i.fsPath=this._fsPath,i._sep=A),this._formatted&&(i.external=this._formatted),this.path&&(i.path=this.path),this.scheme&&(i.scheme=this.scheme),this.authority&&(i.authority=this.authority),this.query&&(i.query=this.query),this.fragment&&(i.fragment=this.fragment),i}}let C={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function k(r,i,p){let b,o=-1;for(let s=0;s<r.length;s++){let E=r.charCodeAt(s);if(E>=97&&E<=122||E>=65&&E<=90||E>=48&&E<=57||E===45||E===46||E===95||E===126||i&&E===47||p&&E===91||p&&E===93||p&&E===58)o!==-1&&(b+=encodeURIComponent(r.substring(o,s)),o=-1),b!==void 0&&(b+=r.charAt(s));else{b===void 0&&(b=r.substr(0,s));let v=C[E];v!==void 0?(o!==-1&&(b+=encodeURIComponent(r.substring(o,s)),o=-1),b+=v):o===-1&&(o=s)}}return o!==-1&&(b+=encodeURIComponent(r.substring(o))),b!==void 0?b:r}function $(r){let i;for(let p=0;p<r.length;p++){let b=r.charCodeAt(p);b===35||b===63?(i===void 0&&(i=r.substr(0,p)),i+=C[b]):i!==void 0&&(i+=r[p])}return i!==void 0?i:r}function M(r,i){let p;return p=r.authority&&r.path.length>1&&r.scheme==="file"?`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?i?r.path.substr(1):r.path[1].toLowerCase()+r.path.substr(2):r.path,l&&(p=p.replace(/\//g,"\\")),p}function I(r,i){let p=i?$:k,b="",{scheme:o,authority:s,path:E,query:v,fragment:N}=r;if(o&&(b+=o,b+=":"),(s||o==="file")&&(b+=c,b+=c),s){let H=s.indexOf("@");if(H!==-1){let q=s.substr(0,H);s=s.substr(H+1),H=q.lastIndexOf(":"),H===-1?b+=p(q,!1,!1):(b+=p(q.substr(0,H),!1,!1),b+=":",b+=p(q.substr(H+1),!1,!0)),b+="@"}s=s.toLowerCase(),H=s.lastIndexOf(":"),H===-1?b+=p(s,!1,!0):(b+=p(s.substr(0,H),!1,!0),b+=s.substr(H))}if(E){if(E.length>=3&&E.charCodeAt(0)===47&&E.charCodeAt(2)===58){let H=E.charCodeAt(1);H>=65&&H<=90&&(E=`/${String.fromCharCode(H+32)}:${E.substr(3)}`)}else if(E.length>=2&&E.charCodeAt(1)===58){let H=E.charCodeAt(0);H>=65&&H<=90&&(E=`${String.fromCharCode(H+32)}:${E.substr(2)}`)}b+=p(E,!0,!1)}return v&&(b+="?",b+=p(v,!1,!1)),N&&(b+="#",b+=i?N:k(N,!1,!1)),b}function X(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+X(r.substr(3)):r}}let D=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function W(r){return r.match(D)?r.replace(D,i=>X(i)):r}var B=e(470);let x=B.posix||B,w="/";var U;(function(r){r.joinPath=function(i,...p){return i.with({path:x.join(i.path,...p)})},r.resolvePath=function(i,...p){let b=i.path,o=!1;b[0]!==w&&(b=w+b,o=!0);let s=x.resolve(b,...p);return o&&s[0]===w&&!i.authority&&(s=s.substring(1)),i.with({path:s})},r.dirname=function(i){if(i.path.length===0||i.path===w)return i;let p=x.dirname(i.path);return p.length===1&&p.charCodeAt(0)===46&&(p=""),i.with({path:p})},r.basename=function(i){return x.basename(i.path)},r.extname=function(i){return x.extname(i.path)}})(U||(U={}))})(),we=_})();var{URI:ge,Utils:zt}=we;var Je=require("worker_threads");var Se=ut(Ze());function Ve(t,n){return typeof n=="string"?Se.default.isMatch(t.fsPath,n,{dot:!0}):Se.default.isMatch(t.fsPath,n.pattern,{dot:!0})}function Ye(t,n){return n.exclude?.some(e=>Ve(t,e))?!1:n.include?n.include.some(e=>Ve(t,e)):!0}var $e=class{constructor(n,e){this.uri=n;this.value=e}},qt,fe=class t{constructor(n,e){this[qt]="ResourceMap";n instanceof t?(this.map=new Map(n.map),this.toKey=e??t.defaultToKey):(this.map=new Map,this.toKey=n??t.defaultToKey)}static{this.defaultToKey=n=>n.toString()}set(n,e){return this.map.set(this.toKey(n),new $e(n,e)),this}get(n){return this.map.get(this.toKey(n))?.value}has(n){return this.map.has(this.toKey(n))}get size(){return this.map.size}clear(){this.map.clear()}delete(n){return this.map.delete(this.toKey(n))}forEach(n,e){typeof e<"u"&&(n=n.bind(e));for(let[_,l]of this.map)n(l.value,l.uri,this)}*values(){for(let n of this.map.values())yield n.value}*keys(){for(let n of this.map.values())yield n.uri}*entries(){for(let n of this.map.values())yield[n.uri,n.value]}*[(qt=Symbol.toStringTag,Symbol.iterator)](){for(let[,n]of this.map)yield[n.uri,n.value]}};function Ft(t){let n=new Map;for(let e of t)n.set(e,(n.get(e)??0)+1);return n}var Te=class{constructor(n,e=-1/0){this.maxSize=n;this.minScore=e;this.store=[]}toArray(){return Array.from(this.store,n=>n.value)}add(n,e){if(n<=this.minScore)return;let _=this.store.findIndex(l=>l.score<n);for(this.store.splice(_>=0?_:this.store.length,0,{score:n,value:e});this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}},pe=class t{constructor(){this.chunkCount=0;this.chunkOccurrences=new Map;this.documents=new fe}static termFrequencies(n){return Ft(t.splitTerms(n))}static*splitTerms(n){let e=_=>_.toLowerCase();for(let[_]of n.matchAll(/\b\p{Letter}[\p{Letter}\d]{2,}\b/gu)){yield e(_);let l=_.split(/(?<=[a-z])(?=[A-Z])/g);if(l.length>1)for(let d of l)d.length>2&&/\p{Letter}{3,}/gu.test(d)&&(yield e(d))}}addOrUpdate(n){for(let{uri:e}of n)this.delete(e);for(let e of n){let _=[];for(let l of e.chunks){let d=t.termFrequencies(l.text);for(let R of d.keys())this.chunkOccurrences.set(R,(this.chunkOccurrences.get(R)??0)+1);_.push({...l,tf:d})}this.chunkCount+=_.length,this.documents.set(e.uri,{chunks:_})}}delete(n){let e=this.documents.get(n);if(e){this.documents.delete(n),this.chunkCount-=e.chunks.length;for(let _ of e.chunks)for(let l of _.tf.keys()){let d=this.chunkOccurrences.get(l);if(typeof d=="number"){let R=d-1;R<=0?this.chunkOccurrences.delete(l):this.chunkOccurrences.set(l,R)}}}}search(n,e,_=1/0,l=-1/0){let d=new Te(_,l),R=n.map(a=>this.computeEmbeddings(a)),S=new Map;for(let[a,u]of this.documents)if(!(e&&!Ye(a,e)))for(let c of u.chunks){let f=-1/0;for(let g of R)f=Math.max(f,this.score(c,g,S));f>0&&d.add(f,c)}return d.toArray()}computeEmbeddings(n){let e=t.termFrequencies(n);return this.computeTfidf(e)}score(n,e,_){let l=0;for(let[d,R]of Object.entries(e)){let S=n.tf.get(d);if(!S)continue;let a=_.get(d);typeof a!="number"&&(a=this.idf(d),_.set(d,a));let u=S*a;l+=u*R}return l}idf(n){let e=this.chunkOccurrences.get(n)??0;return e>0?Math.log((this.chunkCount+1)/e):0}computeTfidf(n){let e=Object.create(null);for(let[_,l]of n){let d=this.idf(_);d>0&&(e[_]=l*d)}return e}};function re(t,n){if(!t)return t;if(Array.isArray(t))return t.map(e=>re(e,n));if(typeof t=="object"){let e=n(t);if(e)return e;let _={};for(let l in t)_[l]=re(t[l],n);return _}return t}function jt(t){return re(t,n=>{if(ge.isUri(n))return{$mid:"uri",...n}})}function Xt(t){return re(t,n=>{if(n.$mid==="uri")return ge.from(n)})}var et=Je.parentPort;if(!et)throw new Error("This module should only be used in a worker thread.");new class{constructor(n){this._tfIdf=new pe;n.on("message",({id:e,fn:_,args:l})=>{try{let d=this._tfIdf[_](...Xt(l));n.postMessage({id:e,res:jt(d)})}catch(d){n.postMessage({id:e,err:d})}})}}(et);
