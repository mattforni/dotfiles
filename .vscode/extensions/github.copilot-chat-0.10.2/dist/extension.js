"use strict";var Nce=Object.create;var zx=Object.defineProperty;var Oce=Object.getOwnPropertyDescriptor;var Dce=Object.getOwnPropertyNames;var Lce=Object.getPrototypeOf,Mce=Object.prototype.hasOwnProperty;var k=(t,e)=>()=>(t&&(e=t(t=0)),e);var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Jn=(t,e)=>{for(var r in e)zx(t,r,{get:e[r],enumerable:!0})},v3=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Dce(e))!Mce.call(t,i)&&i!==r&&zx(t,i,{get:()=>e[i],enumerable:!(n=Oce(e,i))||n.enumerable});return t};var Te=(t,e,r)=>(r=t!=null?Nce(Lce(t)):{},v3(e||!t||!t.__esModule?zx(r,"default",{value:t,enumerable:!0}):r,t)),En=t=>v3(zx({},"__esModule",{value:!0}),t);var _3=x((XBe,y3)=>{var um=1e3,dm=um*60,pm=dm*60,Nd=pm*24,Fce=Nd*7,Bce=Nd*365.25;y3.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Uce(t);if(r==="number"&&isFinite(t))return e.long?Hce(t):qce(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Uce(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Bce;case"weeks":case"week":case"w":return r*Fce;case"days":case"day":case"d":return r*Nd;case"hours":case"hour":case"hrs":case"hr":case"h":return r*pm;case"minutes":case"minute":case"mins":case"min":case"m":return r*dm;case"seconds":case"second":case"secs":case"sec":case"s":return r*um;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function qce(t){var e=Math.abs(t);return e>=Nd?Math.round(t/Nd)+"d":e>=pm?Math.round(t/pm)+"h":e>=dm?Math.round(t/dm)+"m":e>=um?Math.round(t/um)+"s":t+"ms"}function Hce(t){var e=Math.abs(t);return e>=Nd?Wx(t,e,Nd,"day"):e>=pm?Wx(t,e,pm,"hour"):e>=dm?Wx(t,e,dm,"minute"):e>=um?Wx(t,e,um,"second"):t+" ms"}function Wx(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var hR=x((JBe,x3)=>{function jce(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=_3(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,p=null,f,m;function h(...g){if(!h.enabled)return;let v=h,y=Number(new Date),_=y-(d||y);v.diff=_,v.prev=d,v.curr=y,d=y,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let T=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(R,w)=>{if(R==="%%")return"%";T++;let O=r.formatters[w];if(typeof O=="function"){let V=g[T];R=O.call(v,V),g.splice(T,1),T--}return R}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=u,h.useColors=r.useColors(),h.color=r.selectColor(u),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,m=r.enabled(u)),m),set:g=>{p=g}}),typeof r.init=="function"&&r.init(h),h}function n(u,d){let p=r(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d,p=(typeof u=="string"?u:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(u))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}x3.exports=jce});var b3=x((co,Kx)=>{co.formatArgs=Gce;co.save=$ce;co.load=zce;co.useColors=Vce;co.storage=Wce();co.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();co.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Vce(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Gce(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Kx.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}co.log=console.debug||console.log||(()=>{});function $ce(t){try{t?co.storage.setItem("debug",t):co.storage.removeItem("debug")}catch{}}function zce(){let t;try{t=co.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Wce(){try{return localStorage}catch{}}Kx.exports=hR()(co);var{formatters:Kce}=Kx.exports;Kce.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var C3=x((ZBe,E3)=>{"use strict";E3.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var I3=x((eUe,T3)=>{"use strict";var Yce=require("os"),S3=require("tty"),qo=C3(),{env:Cn}=process,Bl;qo("no-color")||qo("no-colors")||qo("color=false")||qo("color=never")?Bl=0:(qo("color")||qo("colors")||qo("color=true")||qo("color=always"))&&(Bl=1);"FORCE_COLOR"in Cn&&(Cn.FORCE_COLOR==="true"?Bl=1:Cn.FORCE_COLOR==="false"?Bl=0:Bl=Cn.FORCE_COLOR.length===0?1:Math.min(parseInt(Cn.FORCE_COLOR,10),3));function gR(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function vR(t,e){if(Bl===0)return 0;if(qo("color=16m")||qo("color=full")||qo("color=truecolor"))return 3;if(qo("color=256"))return 2;if(t&&!e&&Bl===void 0)return 0;let r=Bl||0;if(Cn.TERM==="dumb")return r;if(process.platform==="win32"){let n=Yce.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Cn)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Cn)||Cn.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Cn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Cn.TEAMCITY_VERSION)?1:0;if(Cn.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Cn){let n=parseInt((Cn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Cn.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Cn.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Cn.TERM)||"COLORTERM"in Cn?1:r}function Qce(t){let e=vR(t,t&&t.isTTY);return gR(e)}T3.exports={supportsColor:Qce,stdout:gR(vR(!0,S3.isatty(1))),stderr:gR(vR(!0,S3.isatty(2)))}});var A3=x((Mn,Qx)=>{var Xce=require("tty"),Yx=require("util");Mn.init=ile;Mn.log=tle;Mn.formatArgs=Zce;Mn.save=rle;Mn.load=nle;Mn.useColors=Jce;Mn.destroy=Yx.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Mn.colors=[6,2,3,4,5,1];try{let t=I3();t&&(t.stderr||t).level>=2&&(Mn.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Mn.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Jce(){return"colors"in Mn.inspectOpts?!!Mn.inspectOpts.colors:Xce.isatty(process.stderr.fd)}function Zce(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Qx.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=ele()+e+" "+t[0]}function ele(){return Mn.inspectOpts.hideDate?"":new Date().toISOString()+" "}function tle(...t){return process.stderr.write(Yx.format(...t)+`
`)}function rle(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function nle(){return process.env.DEBUG}function ile(t){t.inspectOpts={};let e=Object.keys(Mn.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Mn.inspectOpts[e[r]]}Qx.exports=hR()(Mn);var{formatters:w3}=Qx.exports;w3.o=function(t){return this.inspectOpts.colors=this.useColors,Yx.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};w3.O=function(t){return this.inspectOpts.colors=this.useColors,Yx.inspect(t,this.inspectOpts)}});var Ho=x((tUe,yR)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?yR.exports=b3():yR.exports=A3()});var SR=x((iUe,N3)=>{var jv=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ole=typeof AbortController=="function",Xx=ole?AbortController:class{constructor(){this.signal=new R3}abort(){this.signal.dispatchEvent("abort")}},sle=typeof AbortSignal=="function",ale=typeof Xx.AbortSignal=="function",R3=sle?AbortSignal:ale?Xx.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},ER=new Set,_R=(t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;Jx(r)&&CR(r,`${t} option`,`options.${e}`,mm)},xR=(t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(Jx(r)){let{prototype:n}=mm,{get:i}=Object.getOwnPropertyDescriptor(n,t);CR(r,`${t} method`,`cache.${e}()`,i)}},cle=(t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(Jx(r)){let{prototype:n}=mm,{get:i}=Object.getOwnPropertyDescriptor(n,t);CR(r,`${t} property`,`cache.${e}`,i)}},P3=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},Jx=t=>!ER.has(t),CR=(t,e,r,n)=>{ER.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;P3(i,"DeprecationWarning",t,n)},Od=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),k3=t=>Od(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?fm:null:null,fm=class extends Array{constructor(e){super(e),this.fill(0)}},bR=class{constructor(e){if(e===0)return[];let r=k3(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},mm=class t{constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,sizeCalculation:m,fetchMethod:h,fetchContext:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:y}=e,{length:_,maxAge:T,stale:I}=e instanceof t?{}:e;if(r!==0&&!Od(r))throw new TypeError("max option must be a nonnegative integer");let R=r?k3(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=f,this.sizeCalculation=m||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=h||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new R(r),this.prev=new R(r),this.head=0,this.tail=0,this.free=new bR(r),this.initialFill=1,this.size=0,typeof c=="function"&&(this.dispose=c),typeof u=="function"?(this.disposeAfter=u,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.maxSize!==0){if(!Od(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!I,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Od(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||T||0,this.ttl){if(!Od(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let w="LRU_CACHE_UNBOUNDED";Jx(w)&&(ER.add(w),P3("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",w,t))}I&&_R("stale","allowStale"),T&&_R("maxAge","ttl"),_&&_R("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new fm(this.max),this.starts=new fm(this.max),this.setItemTTL=(n,i,o=jv.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let s=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);s.unref&&s.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?jv.now():0};let e=0,r=()=>{let n=jv.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n};this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new fm(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!Od(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!Od(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return xR("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[r];let a=jv.now()-this.starts[r];s.start=Math.floor(Date.now()-a)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=jv.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(s=this.requireSize(e,r,s,a),this.maxSize&&s>this.maxSize)return this;let c=this.size===0?void 0:this.keyMap.get(e);if(c===void 0)c=this.newIndex(),this.keyList[c]=e,this.valList[c]=r,this.keyMap.set(e,c),this.next[this.tail]=c,this.prev[c]=this.tail,this.tail=c,this.size++,this.addItemSize(c,s),l=!1;else{let u=this.valList[c];r!==u&&(this.isBackgroundFetch(u)?u.__abortController.abort():o||(this.dispose(u,e,"set"),this.disposeAfter&&this.disposed.push([u,e,"set"])),this.removeItemSize(c),this.valList[c]=r,this.addItemSize(c,s)),this.moveToTail(c)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(c,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let s=new Xx,a={signal:s.signal,options:n,context:i},l=p=>(s.signal.aborted||this.set(e,p,a.options),p),c=p=>{if(this.valList[r]===d&&(!n.noDeleteOnFetchRejection||d.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=d.__staleWhileFetching),d.__returned===d)throw p},u=p=>p(this.fetchMethod(e,o,a)),d=new Promise(u).then(l,c);return d.__abortController=s,d.__staleWhileFetching=o,d.__returned=null,r===void 0?(this.set(e,d,a.options),r=this.keyMap.get(e)):this.valList[r]=d,d}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,fetchContext:d=this.fetchContext,forceRefresh:p=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let f={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u},m=this.keyMap.get(e);if(m===void 0){let h=this.backgroundFetch(e,m,f,d);return h.__returned=h}else{let h=this.valList[m];if(this.isBackgroundFetch(h))return r&&h.__staleWhileFetching!==void 0?h.__staleWhileFetching:h.__returned=h;if(!p&&!this.isStale(m))return this.moveToTail(m),n&&this.updateItemAge(m),h;let g=this.backgroundFetch(e,m,f,d);return r&&g.__staleWhileFetching!==void 0?g.__staleWhileFetching:g.__returned=g}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let s=this.valList[o],a=this.isBackgroundFetch(s);return this.isStale(o)?a?r?s.__staleWhileFetching:void 0:(i||this.delete(e),r?s:void 0):a?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),s)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return xR("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return xR("reset","clear"),this.clear}get length(){return cle("length","size"),this.size}static get AbortController(){return Xx}static get AbortSignal(){return R3}};N3.exports=mm});var wR=x((oUe,O3)=>{"use strict";var Vv=class extends Error{constructor(e,r){super(e),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},TR=class extends Vv{constructor(e,r,n){super(e,r),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},IR=class extends Vv{constructor(e,r="aborted"){super(e,r)}};O3.exports={FetchBaseError:Vv,FetchError:TR,AbortError:IR}});var fc=x((sUe,L3)=>{"use strict";var{constants:{MAX_LENGTH:lle}}=require("buffer"),{pipeline:Zx,PassThrough:ule}=require("stream"),{promisify:dle}=require("util"),{createGunzip:ple,createInflate:fle,createBrotliDecompress:mle,constants:{Z_SYNC_FLUSH:D3}}=require("zlib"),hle=Ho()("helix-fetch:utils"),gle=dle(Zx),vle=(t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),yle=(t,e,r,n)=>{if(!vle(t,e))return r;let i=o=>{o&&(hle(`encountered error while decoding stream: ${o}`),n(o))};switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Zx(r,ple({flush:D3,finishFlush:D3}),i);case"deflate":case"x-deflate":return Zx(r,fle(),i);case"br":return Zx(r,mle(),i);default:return r}},_le=t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},eb=(t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?xle(t,e):ble(t,e);default:return 0}},xle=(t,e)=>(e.add(t),t.map(r=>e.has(r)?0:eb(r,e)).reduce((r,n)=>r+n,0)),ble=(t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=eb(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=eb(t[i],e)}),r},Ele=t=>eb(t,new WeakSet),Cle=async t=>{let e=new ule,r=0,n=[];return e.on("data",i=>{if(r+i.length>lle)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await gle(t,e),Buffer.concat(n,r)};L3.exports={decodeStream:yle,isPlainObject:_le,sizeof:Ele,streamToBuffer:Cle}});var rb=x((aUe,U3)=>{"use strict";var{PassThrough:M3,Readable:mc}=require("stream"),{types:{isAnyArrayBuffer:B3}}=require("util"),{FetchError:Sle,FetchBaseError:Tle}=wR(),{streamToBuffer:Ile}=fc(),wle=Buffer.alloc(0),jo=Symbol("Body internals"),Ale=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),F3=async t=>{if(t[jo].disturbed)throw new TypeError("Already read");if(t[jo].error)throw new TypeError(`Stream had error: ${t[jo].error.message}`);t[jo].disturbed=!0;let{stream:e}=t[jo];return e===null?wle:Ile(e)},tb=class{constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=mc.from(e.toString()):e instanceof mc?r=e:Buffer.isBuffer(e)?r=mc.from(e):B3(e)?r=mc.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=mc.from(e):r=mc.from(String(e)),this[jo]={stream:r,disturbed:!1,error:null},e instanceof mc&&r.on("error",n=>{let i=n instanceof Tle?n:new Sle(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[jo].error=i})}get body(){return this[jo].stream}get bodyUsed(){return this[jo].disturbed}async buffer(){return F3(this)}async arrayBuffer(){return Ale(await this.buffer())}async text(){return(await F3(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(tb.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Rle=t=>{if(t[jo].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[jo],r=e;if(e instanceof mc){r=new M3;let n=new M3;e.pipe(r),e.pipe(n),t[jo].stream=n}return r},Ple=t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||B3(t)||t instanceof mc?null:"text/plain; charset=utf-8";U3.exports={Body:tb,cloneStream:Rle,guessContentType:Ple}});var hm=x((cUe,V3)=>{"use strict";var{validateHeaderName:q3,validateHeaderValue:H3}=require("http"),{isPlainObject:kle}=fc(),hc=Symbol("Headers internals"),Gv=t=>{let e=typeof t!="string"?String(t):t;if(typeof q3=="function")q3(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},j3=(t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof H3=="function")H3(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},nb=class t{constructor(e={}){if(this[hc]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(kle(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[hc].map.set(Gv(e),j3(r,e))}has(e){return this[hc].map.has(Gv(e))}get(e){let r=this[hc].map.get(Gv(e));return r===void 0?null:r}append(e,r){let n=Gv(e),i=j3(r,e),o=this[hc].map.get(n);this[hc].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[hc].map.delete(Gv(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[hc].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[hc].map)}};Object.defineProperties(nb.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));V3.exports={Headers:nb}});var AR=x((lUe,G3)=>{"use strict";var{EventEmitter:Nle}=require("events"),Cs=Symbol("AbortSignal internals"),gm=class{constructor(){this[Cs]={eventEmitter:new Nle,onabort:null,aborted:!1}}get aborted(){return this[Cs].aborted}get onabort(){return this[Cs].onabort}set onabort(e){this[Cs].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[Cs].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[Cs].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[Cs][n]=="function"&&this[n](r),this[Cs].eventEmitter.emit(e,r)}fire(){this[Cs].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(gm.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var ob=class extends gm{constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Cs].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Cs].timerId)}};Object.defineProperties(ob.prototype,{clear:{enumerable:!0}});var ib=Symbol("AbortController internals"),sb=class{constructor(){this[ib]={signal:new gm}}get signal(){return this[ib].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[ib].signal.aborted||this[ib].signal.fire()}};Object.defineProperties(sb.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});G3.exports={AbortController:sb,AbortSignal:gm,TimeoutSignal:ob}});var $v=x((uUe,W3)=>{"use strict";var{randomBytes:Ole}=require("crypto"),{Readable:Dle}=require("stream"),PR=t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Lle=t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData",$3=t=>`--${t}--\r
\r
`,z3=(t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,PR(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`};async function*Mle(t,e){for(let[r,n]of t)yield z3(e,r,n),PR(n)?yield*n.stream():yield n,yield`\r
`;yield $3(e)}var Fle=(t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(z3(e,n,i)),r+=PR(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength($3(e)),r},RR=class{constructor(e){this.fd=e,this.boundary=Ole(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Fle(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Dle.from(Mle(this.fd,this.boundary))}};W3.exports={isFormData:Lle,FormDataSerializer:RR}});var Y3=x((dUe,K3)=>{"use strict";var{AbortSignal:Ble}=AR(),{Body:Ule,cloneStream:qle,guessContentType:Hle}=rb(),{Headers:jle}=hm(),{isPlainObject:Vle}=fc(),{isFormData:Gle,FormDataSerializer:$le}=$v(),zle=20,Ul=Symbol("Request internals"),ab=class t extends Ule{constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body||(n&&n.body?qle(n):null),a=new jle(r.headers||n&&n.headers||{});if(Gle(s)&&!a.has("content-type")){let d=new $le(s);s=d.stream(),a.set("content-type",d.contentType()),!a.has("transfer-encoding")&&!a.has("content-length")&&a.set("content-length",d.length())}if(!a.has("content-type"))if(Vle(s))s=JSON.stringify(s),a.set("content-type","application/json");else{let d=Hle(s);d&&a.set("content-type",d)}super(s);let l=n?n.signal:null;if("signal"in r&&(l=r.signal),l&&!(l instanceof Ble))throw new TypeError("signal needs to be an instance of AbortSignal");let c=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(c))throw new TypeError(`'${c}' is not a valid redirect option`);let u=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(u))throw new TypeError(`'${u}' is not a valid cache option`);this[Ul]={init:{...r},method:o,redirect:c,cache:u,headers:a,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=zle:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Ul].method}get url(){return this[Ul].parsedURL.toString()}get headers(){return this[Ul].headers}get redirect(){return this[Ul].redirect}get cache(){return this[Ul].cache}get signal(){return this[Ul].signal}clone(){return new t(this)}get init(){return this[Ul].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(ab.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});K3.exports={Request:ab}});var kR=x((pUe,Q3)=>{"use strict";var{Body:Wle,cloneStream:Kle,guessContentType:Yle}=rb(),{Headers:Qle}=hm(),{isPlainObject:Xle}=fc(),{isFormData:Jle,FormDataSerializer:Zle}=$v(),Ss=Symbol("Response internals"),cb=class t extends Wle{constructor(e=null,r={}){let n=new Qle(r.headers),i=e;if(Jle(i)&&!n.has("content-type")){let o=new Zle(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Xle(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=Yle(i);o&&n.set("content-type",o)}super(i),this[Ss]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Ss].url||""}get status(){return this[Ss].status}get statusText(){return this[Ss].statusText}get ok(){return this[Ss].status>=200&&this[Ss].status<300}get redirected(){return this[Ss].counter>0}get headers(){return this[Ss].headers}get httpVersion(){return this[Ss].httpVersion}get decoded(){return this[Ss].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Kle(this),{...this[Ss]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(cb.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Q3.exports={Response:cb}});var J3=x((mUe,X3)=>{"use strict";var eue=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),tue=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),rue=new Set([500,502,503,504]),nue={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},iue={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Dd(t){let e=parseInt(t,10);return isFinite(e)?e:0}function oue(t){return t?rue.has(t.status):!0}function NR(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function sue(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}X3.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=NR(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=NR(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":sue(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&tue.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||eue.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=NR(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)nue[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Dd(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Dd(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Dd(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Dd(this._rescc["stale-if-error"]),n=e+Dd(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Dd(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Dd(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&oue(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!iue[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var r4=x((hUe,t4)=>{"use strict";var aue=J3(),{Headers:cue}=hm(),Z3=t=>({url:t.url,method:t.method,headers:t.headers.plain()}),e4=t=>({status:t.status,headers:t.headers.plain()}),OR=class{constructor(e,r,n){this.policy=new aue(Z3(e),e4(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Z3(e))}responseHeaders(e){return new cue(this.policy.responseHeaders(e4(e)))}timeToLive(){return this.policy.timeToLive()}};t4.exports=OR});var o4=x((gUe,i4)=>{"use strict";var{Readable:lue}=require("stream"),{Headers:n4}=hm(),{Response:uue}=kR(),ql=Symbol("CacheableResponse internals"),due=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),DR=class t extends uue{constructor(e,r){super(e,r);let n=new n4(r.headers);this[ql]={headers:n,bufferedBody:e}}get headers(){return this[ql].headers}set headers(e){if(e instanceof n4)this[ql].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return lue.from(this[ql].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[ql].bufferedBody}async arrayBuffer(){return due(this[ql].bufferedBody)}async text(){return this[ql].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a}=this;return new t(this[ql].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a})}get[Symbol.toStringTag](){return this.constructor.name}},pue=async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:l}=t;return new DR(e,{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:l})};i4.exports={cacheableResponse:pue}});var lb=x((vUe,s4)=>{"use strict";var LR=class extends Error{get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};s4.exports={RequestAbortedError:LR}});var d4=x((yUe,u4)=>{"use strict";var c4=require("http"),l4=require("https"),{Readable:fue}=require("stream"),gc=Ho()("helix-fetch:h1"),{RequestAbortedError:a4}=lb(),{decodeStream:mue}=fc(),hue=(t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new l4.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new c4.Agent(n),r.httpAgent):void 0},gue=t=>{t.h1={}},vue=async({h1:t})=>{t.httpAgent&&(gc("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(gc("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},yue=(t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:l}=t,c=e?mue(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:l,readable:c,decoded:!!(e&&c!==t)}},_ue=async(t,e,r)=>{let{request:n}=e.protocol==="https:"?l4:c4,i=hue(t,e.protocol),o={...r,agent:i},{socket:s,body:a}=o;return s&&(delete o.socket,s.assigned||(s.assigned=!0,i?o.agent=new Proxy(i,{get:(l,c)=>c==="createConnection"&&!s.inUse?(u,d)=>{gc(`agent reusing socket #${s.id} (${s.servername})`),s.inUse=!0,d(null,s)}:l[c]}):o.createConnection=(l,c)=>{gc(`reusing socket #${s.id} (${s.servername})`),s.inUse=!0,c(null,s)})),new Promise((l,c)=>{gc(`${o.method} ${e.href}`);let u,{signal:d}=o,p=()=>{d.removeEventListener("abort",p),s&&!s.inUse&&(gc(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),c(new a4),u&&u.abort()};if(d){if(d.aborted){c(new a4);return}d.addEventListener("abort",p)}u=n(e,o),u.once("response",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(gc(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),l(yue(f,o.decode,c))}),u.once("error",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(gc(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),u.aborted||(gc(`${o.method} ${e.href} failed with: ${f.message}`),u.abort(),c(f))}),a instanceof fue?a.pipe(u):(a&&u.write(a),u.end())})};u4.exports={request:_ue,setupContext:gue,resetContext:vue}});var h4=x((_Ue,m4)=>{"use strict";var{connect:xue,constants:bue}=require("http2"),{Readable:Eue}=require("stream"),lr=Ho()("helix-fetch:h2"),{RequestAbortedError:p4}=lb(),{decodeStream:Cue}=fc(),{NGHTTP2_CANCEL:zv}=bue,Sue=5*60*1e3,Tue=5e3,Iue=t=>{t.h2={sessionCache:{}}},wue=async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),lr(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),f4=(t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let s=r?Cue(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:s,decoded:!!(r&&s!==e)}},Aue=(t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:s,pushHandler:a,pushedStreamIdleTimeout:l=Tue}}}=t,c=i[":path"],u=`${e}${c}`;lr(`received PUSH_PROMISE: ${u}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),s&&s(u,i,()=>{n.close(zv)}),n.on("push",(d,p)=>{lr(`received push headers for ${e}${c}, stream #${n.id}, headers: ${JSON.stringify(d)}, flags: ${p}`),n.setTimeout(l,()=>{lr(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(zv)}),a&&a(u,i,f4(d,n,r))}),n.on("aborted",()=>{lr(`pushed stream #${n.id} aborted`)}),n.on("error",d=>{lr(`pushed stream #${n.id} encountered error: ${d}`)}),n.on("frameError",(d,p,f)=>{lr(`pushed stream #${n.id} encountered frameError: type: ${d}, code: ${p}, id: ${f}`)})},Rue=async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:s}=e,a=`${i}${o}${s}`,{options:{h2:l={}},h2:{sessionCache:c}}=t,{idleSessionTimeout:u=Sue,pushPromiseHandler:d,pushHandler:p}=l,f={...r},{method:m,headers:h,socket:g,body:v,decode:y}=f;return g&&delete f.socket,h.host&&(h[":authority"]=h.host,delete h.host),new Promise((_,T)=>{let I=c[n];if(!I||I.closed||I.destroyed){let L=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),A={...l,rejectUnauthorized:L};g&&!g.inUse&&(A.createConnection=()=>(lr(`reusing socket #${g.id} (${g.servername})`),g.inUse=!0,g)),I=xue(n,{...A,settings:{enablePush:!!(d||p)}}),I.setMaxListeners(1e3),I.setTimeout(u,()=>{lr(`closing session ${n} after ${u} ms of inactivity`),I.close()}),I.once("connect",()=>{lr(`session ${n} established`),lr(`caching session ${n}`),c[n]=I}),I.on("localSettings",q=>{lr(`session ${n} localSettings: ${JSON.stringify(q)}`)}),I.on("remoteSettings",q=>{lr(`session ${n} remoteSettings: ${JSON.stringify(q)}`)}),I.once("close",()=>{lr(`session ${n} closed`),c[n]===I&&(lr(`discarding cached session ${n}`),delete c[n])}),I.once("error",q=>{lr(`session ${n} encountered error: ${q}`),c[n]===I&&(lr(`discarding cached session ${n}`),delete c[n])}),I.on("frameError",(q,B,P)=>{lr(`session ${n} encountered frameError: type: ${q}, code: ${B}, id: ${P}`)}),I.once("goaway",(q,B,P)=>{lr(`session ${n} received GOAWAY frame: errorCode: ${q}, lastStreamID: ${B}, opaqueData: ${P?P.toString():void 0}`)}),I.on("stream",(q,B,P)=>{Aue(t,n,y,q,B,P)})}else g&&g.id!==I.socket.id&&!g.inUse&&(lr(`discarding redundant socket used for ALPN: #${g.id} ${g.servername}`),g.destroy());lr(`${m} ${e.host}${a}`);let R,{signal:w}=f,O=()=>{w.removeEventListener("abort",O),T(new p4),R&&R.close(zv)};if(w){if(w.aborted){T(new p4);return}w.addEventListener("abort",O)}let V=L=>{lr(`session ${n} encountered error during ${f.method} ${e.href}: ${L}`),T(L)};I.once("error",V),R=I.request({":method":m,":path":a,...h}),R.once("response",L=>{I.off("error",V),w&&w.removeEventListener("abort",O),_(f4(L,R,f.decode,T))}),R.once("error",L=>{I.off("error",V),w&&w.removeEventListener("abort",O),R.rstCode!==zv&&(lr(`${f.method} ${e.href} failed with: ${L.message}`),R.close(zv),T(L))}),R.once("frameError",(L,A,N)=>{I.off("error",V),lr(`encountered frameError during ${f.method} ${e.href}: type: ${L}, code: ${A}, id: ${N}`)}),R.on("push",(L,A)=>{lr(`received 'push' event: headers: ${JSON.stringify(L)}, flags: ${A}`)}),v instanceof Eue?v.pipe(R):(v&&R.write(v),R.end())})};m4.exports={request:Rue,setupContext:Iue,resetContext:wue}});var v4=x((xUe,g4)=>{"use strict";var{EventEmitter:Pue}=require("events"),kue=()=>{let t={},e=new Pue;return e.setMaxListeners(0),{acquire:r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))};e.on(r,i)}),release:(r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))}}};g4.exports=kue});var y4=x((bUe,Nue)=>{Nue.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var C4=x((EUe,E4)=>{"use strict";var{Readable:Oue}=require("stream"),Due=require("tls"),{types:{isAnyArrayBuffer:Lue}}=require("util"),Mue=SR(),MR=Ho()("helix-fetch:core"),{RequestAbortedError:ub}=lb(),FR=d4(),db=h4(),Fue=v4(),{isPlainObject:Bue}=fc(),{isFormData:Uue,FormDataSerializer:que}=$v(),{version:Hue}=y4(),BR="h2",UR="h2c",qR="http/1.0",Ld="http/1.1",jue=100,Vue=60*60*1e3,Gue=[BR,Ld,qR],$ue=`helix-fetch/${Hue}`,zue={method:"GET",compress:!0,decode:!0},_4=0,x4=Fue(),b4=(t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,s=()=>{i.removeEventListener("abort",s);let c=new ub;n(c),o&&o.destroy(c)};if(i){if(i.aborted){n(new ub);return}i.addEventListener("abort",s)}let a=+t.port||443,l=c=>{i&&i.removeEventListener("abort",s),c instanceof ub||(MR(`connecting to ${t.hostname}:${a} failed with: ${c.message}`),n(c))};o=Due.connect(a,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",s),o.off("error",l),_4+=1,o.id=_4,o.secureConnecting=!1,MR(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),Wue=async(t,e)=>{let r=await x4.acquire(t.origin);try{return r||(r=await b4(t,e)),r}finally{x4.release(t.origin,r)}},Kue=async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=Ld,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=UR,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:s={},h2:a={}}}=t,l=!(o===!1||s.rejectUnauthorized===!1||a.rejectUnauthorized===!1),c={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(c.ca=t.options.ca);let u=await Wue(e,c);return i=u.alpnProtocol,i||(i=Ld),t.alpnCache.set(n,i),{protocol:i,socket:u}},Yue=t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},Que=async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let s={...r,host:e.host,hostname:e.hostname,port:o},a=await t(s);if(i){let c={...s,ALPNProtocols:n};c.socket=a,c.servername=s.host;let u=await b4(e,c);return{protocol:u.alpnProtocol||Ld,socket:u}}return{protocol:a.alpnProtocol||Ld,socket:a}},Xue=async(t,e,r)=>{let n=new URL(e),i={...zue,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=Yue(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(Uue(i.body)){let c=new que(i.body);o=c.contentType(),i.body=c.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(c.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":Bue(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Lue(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Oue||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:s}=i,{protocol:a,socket:l=null}=t.socketFactory?await Que(t.socketFactory,n,i,t.alpnProtocols):await Kue(t,n,s);switch(MR(`${n.host} -> ${a}`),a){case BR:try{return await db.request(t,n,l?{...i,socket:l}:i)}catch(c){let{code:u,message:d}=c;throw u==="ERR_HTTP2_ERROR"&&d==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),c}case UR:return db.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case qR:case Ld:return FR.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${a}`)}},Jue=async t=>(t.alpnCache.clear(),Promise.all([FR.resetContext(t),db.resetContext(t)])),Zue=t=>{let{options:{alpnProtocols:e=Gue,alpnCacheTTL:r=Vue,alpnCacheSize:n=jue,userAgent:i=$ue,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new Mue({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,FR.setupContext(t),db.setupContext(t)};E4.exports={request:Xue,setupContext:Zue,resetContext:Jue,RequestAbortedError:ub,ALPN_HTTP2:BR,ALPN_HTTP2C:UR,ALPN_HTTP1_1:Ld,ALPN_HTTP1_0:qR}});var T4=x((CUe,S4)=>{"use strict";var ede=Ho()("helix-fetch:core"),{request:tde,setupContext:rde,resetContext:nde,RequestAbortedError:ide,ALPN_HTTP2:ode,ALPN_HTTP2C:sde,ALPN_HTTP1_1:ade,ALPN_HTTP1_0:cde}=C4(),HR=class t{constructor(e){this.options={...e||{}},rde(this)}api(){return{request:async(e,r)=>this.request(e,r),context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),reset:async()=>this.reset(),RequestAbortedError:ide,ALPN_HTTP2:ode,ALPN_HTTP2C:sde,ALPN_HTTP1_1:ade,ALPN_HTTP1_0:cde}}async request(e,r){return tde(this,e,r)}setCA(e){this.options.ca=e}async reset(){return ede("resetting context"),nde(this)}};S4.exports=new HR().api()});var P4=x((SUe,R4)=>{"use strict";var{EventEmitter:lde}=require("events"),{Readable:Wv}=require("stream"),jR=Ho()("helix-fetch"),ude=SR(),{Body:dde}=rb(),{Headers:zR}=hm(),{Request:Md}=Y3(),{Response:GR}=kR(),{FetchBaseError:pde,FetchError:Kv,AbortError:pb}=wR(),{AbortController:fde,AbortSignal:mde,TimeoutSignal:hde}=AR(),gde=r4(),{cacheableResponse:vde}=o4(),{sizeof:yde}=fc(),{isFormData:_de}=$v(),{context:xde,RequestAbortedError:bde}=T4(),I4=["GET","HEAD"],Ede=500,Cde=100*1024*1024,VR="push",w4=async(t,e,r)=>{let{request:n}=t.context,i=e instanceof Md&&typeof r>"u"?e:new Md(e,r),{method:o,body:s,signal:a,compress:l,decode:c,follow:u,redirect:d,init:{body:p}}=i,f;if(a&&a.aborted){let I=new pb("The operation was aborted.");throw i.init.body instanceof Wv&&i.init.body.destroy(I),I}try{f=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:p&&!(p instanceof Wv)&&!_de(p)?p:s,compress:l,decode:c,follow:u,redirect:d,signal:a})}catch(I){throw p instanceof Wv&&p.destroy(I),I instanceof TypeError?I:I instanceof bde?new pb("The operation was aborted."):new Kv(I.message,"system",I)}let m=()=>{a.removeEventListener("abort",m);let I=new pb("The operation was aborted.");i.init.body instanceof Wv&&i.init.body.destroy(I),f.readable.emit("error",I)};a&&a.addEventListener("abort",m);let{statusCode:h,statusText:g,httpVersion:v,headers:y,readable:_,decoded:T}=f;if([301,302,303,307,308].includes(h)){let{location:I}=y,R=I==null?null:new URL(I,i.url);switch(i.redirect){case"manual":break;case"error":throw a&&a.removeEventListener("abort",m),new Kv(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(R===null)break;if(i.counter>=i.follow)throw a&&a.removeEventListener("abort",m),new Kv(`maximum redirect reached at: ${i.url}`,"max-redirect");let w={headers:new zR(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(h!==303&&i.body&&i.init.body instanceof Wv)throw a&&a.removeEventListener("abort",m),new Kv("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(h===303||(h===301||h===302)&&i.method==="POST")&&(w.method="GET",w.body=void 0,w.headers.delete("content-length")),a&&a.removeEventListener("abort",m),w4(t,new Md(R,w))}default:}}return a&&(_.once("end",()=>{a.removeEventListener("abort",m)}),_.once("error",()=>{a.removeEventListener("abort",m)})),new GR(_,{url:i.url,status:h,statusText:g,headers:y,httpVersion:v,decoded:T,counter:i.counter})},A4=async(t,e,r)=>{if(t.options.maxCacheSize===0||!I4.includes(e.method))return r;let n=new gde(e,r,{shared:!1});if(n.storable()){let i=await vde(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},Sde=async(t,e,r)=>{let n=new Md(e,r);if(t.options.maxCacheSize!==0&&I4.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:s,response:a}=t.cache.get(n.url)||{};if(s&&s.satisfiesWithoutRevalidation(n)){a.headers=new zR(s.responseHeaders(a));let l=a.clone();return l.fromCache=!0,l}}let o=await w4(t,n);return n.cache!=="no-store"?A4(t,n,o):o},Tde=(t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},Ide=t=>new hde(t),$R=class t{constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:Cde,i=Ede;n===0&&(n=1,i=1);let o=({response:a},l)=>yde(a);this.cache=new ude({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new lde,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:s}=this.options.h2;s&&(this.options.h2.pushPromiseHandler=(a,l,c)=>{let u={...l};Object.keys(u).filter(d=>d.startsWith(":")).forEach(d=>delete u[d]),this.pushPromiseHandler(a,u,c)},this.options.h2.pushHandler=(a,l,c)=>{let u={...l};Object.keys(u).filter(v=>v.startsWith(":")).forEach(v=>delete u[v]);let{statusCode:d,statusText:p,httpVersion:f,headers:m,readable:h,decoded:g}=c;this.pushHandler(a,u,new GR(h,{url:a,status:d,statusText:p,headers:m,httpVersion:f,decoded:g}))}),this.context=xde(this.options)}api(){return{fetch:async(e,r)=>this.fetch(e,r),Body:dde,Headers:zR,Request:Md,Response:GR,AbortController:fde,AbortSignal:mde,FetchBaseError:pde,FetchError:Kv,AbortError:pb,context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),noCache:(e={})=>new t({...e,maxCacheSize:0}).api(),h1:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAlive:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),h1NoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAliveNoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),reset:async()=>this.context.reset(),onPush:e=>this.onPush(e),offPush:e=>this.offPush(e),createUrl:Tde,timeoutSignal:Ide,clearCache:()=>this.clearCache(),cacheStats:()=>this.cacheStats(),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Sde(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(VR,e)}offPush(e){return this.eventEmitter.off(VR,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){jR(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new Md(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(jR(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){jR(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await A4(this,new Md(e,{headers:r}),n);this.eventEmitter.emit(VR,e,i)}};R4.exports=new $R().api()});var N4=x((TUe,k4)=>{"use strict";k4.exports=P4()});var B4=x(WR=>{var F4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");WR.encode=function(t){if(0<=t&&t<F4.length)return F4[t];throw new TypeError("Must be between 0 and 63: "+t)};WR.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,l=47,c=26,u=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+c:o<=t&&t<=s?t-o+u:t==a?62:t==l?63:-1}});var QR=x(YR=>{var U4=B4(),KR=5,q4=1<<KR,H4=q4-1,j4=q4;function wde(t){return t<0?(-t<<1)+1:(t<<1)+0}function Ade(t){var e=(t&1)===1,r=t>>1;return e?-r:r}YR.encode=function(e){var r="",n,i=wde(e);do n=i&H4,i>>>=KR,i>0&&(n|=j4),r+=U4.encode(n);while(i>0);return r};YR.decode=function(e,r,n){var i=e.length,o=0,s=0,a,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=U4.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(l&j4),l&=H4,o=o+(l<<s),s+=KR}while(a);n.value=Ade(o),n.rest=r}});var xm=x(Zn=>{function Rde(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}Zn.getArg=Rde;var V4=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Pde=/^data:.+\,.+$/;function Yv(t){var e=t.match(V4);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Zn.urlParse=Yv;function ym(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}Zn.urlGenerate=ym;function XR(t){var e=t,r=Yv(t);if(r){if(!r.path)return t;e=r.path}for(var n=Zn.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,ym(r)):e}Zn.normalize=XR;function G4(t,e){t===""&&(t="."),e===""&&(e=".");var r=Yv(e),n=Yv(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),ym(r);if(r||e.match(Pde))return e;if(n&&!n.host&&!n.path)return n.host=e,ym(n);var i=e.charAt(0)==="/"?e:XR(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,ym(n)):i}Zn.join=G4;Zn.isAbsolute=function(t){return t.charAt(0)==="/"||V4.test(t)};function kde(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}Zn.relative=kde;var $4=function(){var t=Object.create(null);return!("__proto__"in t)}();function z4(t){return t}function Nde(t){return W4(t)?"$"+t:t}Zn.toSetString=$4?z4:Nde;function Ode(t){return W4(t)?t.slice(1):t}Zn.fromSetString=$4?z4:Ode;function W4(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Dde(t,e,r){var n=_m(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:_m(t.name,e.name)}Zn.compareByOriginalPositions=Dde;function Lde(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=_m(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:_m(t.name,e.name)}Zn.compareByGeneratedPositionsDeflated=Lde;function _m(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Mde(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=_m(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:_m(t.name,e.name)}Zn.compareByGeneratedPositionsInflated=Mde;function Fde(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}Zn.parseSourceMapInput=Fde;function Bde(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=Yv(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=G4(ym(n),e)}return XR(e)}Zn.computeSourceURL=Bde});var eP=x(K4=>{var JR=xm(),ZR=Object.prototype.hasOwnProperty,Fd=typeof Map<"u";function vc(){this._array=[],this._set=Fd?new Map:Object.create(null)}vc.fromArray=function(e,r){for(var n=new vc,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};vc.prototype.size=function(){return Fd?this._set.size:Object.getOwnPropertyNames(this._set).length};vc.prototype.add=function(e,r){var n=Fd?e:JR.toSetString(e),i=Fd?this.has(e):ZR.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(Fd?this._set.set(e,o):this._set[n]=o)};vc.prototype.has=function(e){if(Fd)return this._set.has(e);var r=JR.toSetString(e);return ZR.call(this._set,r)};vc.prototype.indexOf=function(e){if(Fd){var r=this._set.get(e);if(r>=0)return r}else{var n=JR.toSetString(e);if(ZR.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};vc.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};vc.prototype.toArray=function(){return this._array.slice()};K4.ArraySet=vc});var X4=x(Q4=>{var Y4=xm();function Ude(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||Y4.compareByGeneratedPositionsInflated(t,e)<=0}function mb(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}mb.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};mb.prototype.add=function(e){Ude(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};mb.prototype.toArray=function(){return this._sorted||(this._array.sort(Y4.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Q4.MappingList=mb});var tP=x(J4=>{var Qv=QR(),Wr=xm(),hb=eP().ArraySet,qde=X4().MappingList;function Vo(t){t||(t={}),this._file=Wr.getArg(t,"file",null),this._sourceRoot=Wr.getArg(t,"sourceRoot",null),this._skipValidation=Wr.getArg(t,"skipValidation",!1),this._sources=new hb,this._names=new hb,this._mappings=new qde,this._sourcesContents=null}Vo.prototype._version=3;Vo.fromSourceMap=function(e){var r=e.sourceRoot,n=new Vo({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Wr.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Wr.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};Vo.prototype.addMapping=function(e){var r=Wr.getArg(e,"generated"),n=Wr.getArg(e,"original",null),i=Wr.getArg(e,"source",null),o=Wr.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};Vo.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Wr.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Wr.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Wr.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Vo.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Wr.relative(o,i));var s=new hb,a=new hb;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var c=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});c.source!=null&&(l.source=c.source,n!=null&&(l.source=Wr.join(n,l.source)),o!=null&&(l.source=Wr.relative(o,l.source)),l.originalLine=c.line,l.originalColumn=c.column,c.name!=null&&(l.name=c.name))}var u=l.source;u!=null&&!s.has(u)&&s.add(u);var d=l.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=s,this._names=a,e.sources.forEach(function(l){var c=e.sourceContentFor(l);c!=null&&(n!=null&&(l=Wr.join(n,l)),o!=null&&(l=Wr.relative(o,l)),this.setSourceContent(l,c))},this)};Vo.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};Vo.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",l,c,u,d,p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(c=p[f],l="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)l+=";",r++;else if(f>0){if(!Wr.compareByGeneratedPositionsInflated(c,p[f-1]))continue;l+=","}l+=Qv.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),l+=Qv.encode(d-s),s=d,l+=Qv.encode(c.originalLine-1-i),i=c.originalLine-1,l+=Qv.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(u=this._names.indexOf(c.name),l+=Qv.encode(u-o),o=u)),a+=l}return a};Vo.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Wr.relative(r,n));var i=Wr.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Vo.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Vo.prototype.toString=function(){return JSON.stringify(this.toJSON())};J4.SourceMapGenerator=Vo});var Z4=x(Bd=>{Bd.GREATEST_LOWER_BOUND=1;Bd.LEAST_UPPER_BOUND=2;function rP(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?rP(s,e,r,n,i,o):o==Bd.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?rP(t,s,r,n,i,o):o==Bd.LEAST_UPPER_BOUND?s:t<0?-1:t}Bd.search=function(e,r,n,i){if(r.length===0)return-1;var o=rP(-1,r.length,e,r,n,i||Bd.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var tH=x(eH=>{function nP(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Hde(t,e){return Math.round(t+Math.random()*(e-t))}function iP(t,e,r,n){if(r<n){var i=Hde(r,n),o=r-1;nP(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,nP(t,o,a));nP(t,o+1,a);var l=o+1;iP(t,e,r,l-1),iP(t,e,l+1,n)}}eH.quickSort=function(t,e){iP(t,e,0,t.length-1)}});var nH=x(gb=>{var Pe=xm(),oP=Z4(),bm=eP().ArraySet,jde=QR(),Xv=tH().quickSort;function ur(t,e){var r=t;return typeof t=="string"&&(r=Pe.parseSourceMapInput(t)),r.sections!=null?new Ts(r,e):new Fn(r,e)}ur.fromSourceMap=function(t,e){return Fn.fromSourceMap(t,e)};ur.prototype._version=3;ur.prototype.__generatedMappings=null;Object.defineProperty(ur.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});ur.prototype.__originalMappings=null;Object.defineProperty(ur.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});ur.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};ur.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};ur.GENERATED_ORDER=1;ur.ORIGINAL_ORDER=2;ur.GREATEST_LOWER_BOUND=1;ur.LEAST_UPPER_BOUND=2;ur.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||ur.GENERATED_ORDER,s;switch(o){case ur.GENERATED_ORDER:s=this._generatedMappings;break;case ur.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(l){var c=l.source===null?null:this._sources.at(l.source);return c=Pe.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)};ur.prototype.allGeneratedPositionsFor=function(e){var r=Pe.getArg(e,"line"),n={source:Pe.getArg(e,"source"),originalLine:r,originalColumn:Pe.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Pe.compareByOriginalPositions,oP.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:Pe.getArg(s,"generatedLine",null),column:Pe.getArg(s,"generatedColumn",null),lastColumn:Pe.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var l=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==l;)i.push({line:Pe.getArg(s,"generatedLine",null),column:Pe.getArg(s,"generatedColumn",null),lastColumn:Pe.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};gb.SourceMapConsumer=ur;function Fn(t,e){var r=t;typeof t=="string"&&(r=Pe.parseSourceMapInput(t));var n=Pe.getArg(r,"version"),i=Pe.getArg(r,"sources"),o=Pe.getArg(r,"names",[]),s=Pe.getArg(r,"sourceRoot",null),a=Pe.getArg(r,"sourcesContent",null),l=Pe.getArg(r,"mappings"),c=Pe.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=Pe.normalize(s)),i=i.map(String).map(Pe.normalize).map(function(u){return s&&Pe.isAbsolute(s)&&Pe.isAbsolute(u)?Pe.relative(s,u):u}),this._names=bm.fromArray(o.map(String),!0),this._sources=bm.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(u){return Pe.computeSourceURL(s,u,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=l,this._sourceMapURL=e,this.file=c}Fn.prototype=Object.create(ur.prototype);Fn.prototype.consumer=ur;Fn.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Pe.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Fn.fromSourceMap=function(e,r){var n=Object.create(Fn.prototype),i=n._names=bm.fromArray(e._names.toArray(),!0),o=n._sources=bm.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Pe.computeSourceURL(n.sourceRoot,f,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],l=n.__originalMappings=[],c=0,u=s.length;c<u;c++){var d=s[c],p=new rH;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=o.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=i.indexOf(d.name)),l.push(p)),a.push(p)}return Xv(n.__originalMappings,Pe.compareByOriginalPositions),n};Fn.prototype._version=3;Object.defineProperty(Fn.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function rH(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Fn.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,l=0,c=e.length,u=0,d={},p={},f=[],m=[],h,g,v,y,_;u<c;)if(e.charAt(u)===";")n++,u++,i=0;else if(e.charAt(u)===",")u++;else{for(h=new rH,h.generatedLine=n,y=u;y<c&&!this._charIsMappingSeparator(e,y);y++);if(g=e.slice(u,y),v=d[g],v)u+=g.length;else{for(v=[];u<y;)jde.decode(e,u,p),_=p.value,u=p.rest,v.push(_);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");d[g]=v}h.generatedColumn=i+v[0],i=h.generatedColumn,v.length>1&&(h.source=a+v[1],a+=v[1],h.originalLine=o+v[2],o=h.originalLine,h.originalLine+=1,h.originalColumn=s+v[3],s=h.originalColumn,v.length>4&&(h.name=l+v[4],l+=v[4])),m.push(h),typeof h.originalLine=="number"&&f.push(h)}Xv(m,Pe.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,Xv(f,Pe.compareByOriginalPositions),this.__originalMappings=f};Fn.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return oP.search(e,r,o,s)};Fn.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};Fn.prototype.originalPositionFor=function(e){var r={generatedLine:Pe.getArg(e,"line"),generatedColumn:Pe.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Pe.compareByGeneratedPositionsDeflated,Pe.getArg(e,"bias",ur.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Pe.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Pe.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=Pe.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:Pe.getArg(i,"originalLine",null),column:Pe.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};Fn.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Fn.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Pe.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Pe.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};Fn.prototype.generatedPositionFor=function(e){var r=Pe.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Pe.getArg(e,"line"),originalColumn:Pe.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Pe.compareByOriginalPositions,Pe.getArg(e,"bias",ur.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Pe.getArg(o,"generatedLine",null),column:Pe.getArg(o,"generatedColumn",null),lastColumn:Pe.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};gb.BasicSourceMapConsumer=Fn;function Ts(t,e){var r=t;typeof t=="string"&&(r=Pe.parseSourceMapInput(t));var n=Pe.getArg(r,"version"),i=Pe.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new bm,this._names=new bm;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=Pe.getArg(s,"offset"),l=Pe.getArg(a,"line"),c=Pe.getArg(a,"column");if(l<o.line||l===o.line&&c<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:l+1,generatedColumn:c+1},consumer:new ur(Pe.getArg(s,"map"),e)}})}Ts.prototype=Object.create(ur.prototype);Ts.prototype.constructor=ur;Ts.prototype._version=3;Object.defineProperty(Ts.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Ts.prototype.originalPositionFor=function(e){var r={generatedLine:Pe.getArg(e,"line"),generatedColumn:Pe.getArg(e,"column")},n=oP.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Ts.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Ts.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Ts.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Pe.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};Ts.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],l=i.consumer._sources.at(a.source);l=Pe.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;a.name&&(c=i.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var u={source:l,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(u),typeof u.originalLine=="number"&&this.__originalMappings.push(u)}Xv(this.__generatedMappings,Pe.compareByGeneratedPositionsDeflated),Xv(this.__originalMappings,Pe.compareByOriginalPositions)};gb.IndexedSourceMapConsumer=Ts});var oH=x(iH=>{var Vde=tP().SourceMapGenerator,vb=xm(),Gde=/(\r?\n)/,$de=10,Em="$$$isSourceNode$$$";function lo(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Em]=!0,n!=null&&this.add(n)}lo.fromStringWithSourceMap=function(e,r,n){var i=new lo,o=e.split(Gde),s=0,a=function(){var p=m(),f=m()||"";return p+f;function m(){return s<o.length?o[s++]:void 0}},l=1,c=0,u=null;return r.eachMapping(function(p){if(u!==null)if(l<p.generatedLine)d(u,a()),l++,c=0;else{var f=o[s]||"",m=f.substr(0,p.generatedColumn-c);o[s]=f.substr(p.generatedColumn-c),c=p.generatedColumn,d(u,m),u=p;return}for(;l<p.generatedLine;)i.add(a()),l++;if(c<p.generatedColumn){var f=o[s]||"";i.add(f.substr(0,p.generatedColumn)),o[s]=f.substr(p.generatedColumn),c=p.generatedColumn}u=p},this),s<o.length&&(u&&d(u,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=vb.join(n,p)),i.setSourceContent(p,f))}),i;function d(p,f){if(p===null||p.source===void 0)i.add(f);else{var m=n?vb.join(n,p.source):p.source;i.add(new lo(p.originalLine,p.originalColumn,m,f,p.name))}}};lo.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Em]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};lo.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Em]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};lo.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Em]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};lo.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};lo.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Em]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};lo.prototype.setSourceContent=function(e,r){this.sourceContents[vb.toSetString(e)]=r};lo.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Em]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(vb.fromSetString(i[r]),this.sourceContents[i[r]])};lo.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};lo.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new Vde(e),i=!1,o=null,s=null,a=null,l=null;return this.walk(function(c,u){r.code+=c,u.source!==null&&u.line!==null&&u.column!==null?((o!==u.source||s!==u.line||a!==u.column||l!==u.name)&&n.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:r.line,column:r.column},name:u.name}),o=u.source,s=u.line,a=u.column,l=u.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var d=0,p=c.length;d<p;d++)c.charCodeAt(d)===$de?(r.line++,r.column=0,d+1===p?(o=null,i=!1):i&&n.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:r.line,column:r.column},name:u.name})):r.column++}),this.walkSourceContents(function(c,u){n.setSourceContent(c,u)}),{code:r.code,map:n}};iH.SourceNode=lo});var sH=x(yb=>{yb.SourceMapGenerator=tP().SourceMapGenerator;yb.SourceMapConsumer=nH().SourceMapConsumer;yb.SourceNode=oH().SourceNode});var cH=x((aqe,aH)=>{var zde=Object.prototype.toString,sP=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Wde(t){return zde.call(t).slice(8,-1)==="ArrayBuffer"}function Kde(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return sP?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function Yde(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return sP?Buffer.from(t,e):new Buffer(t,e)}function Qde(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Wde(t)?Kde(t,e,r):typeof t=="string"?Yde(t,e):sP?Buffer.from(t):new Buffer(t)}aH.exports=Qde});var gH=x((qd,uP)=>{var Xde=sH().SourceMapConsumer,aP=require("path"),ga;try{ga=require("fs"),(!ga.existsSync||!ga.readFileSync)&&(ga=null)}catch{}var Jde=cH();function lH(t,e){return t.require(e)}var uH=!1,dH=!1,cP=!1,Jv="auto",Ud={},Zv={},Zde=/^data:application\/json[^,]+base64,/,Hl=[],jl=[];function dP(){return Jv==="browser"?!0:Jv==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function epe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function tpe(){return typeof process=="object"&&process!==null?process.version:""}function rpe(){if(typeof process=="object"&&process!==null)return process.stderr}function npe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function _b(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var pP=_b(Hl);Hl.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in Ud)return Ud[t];var e="";try{if(ga)ga.existsSync(t)&&(e=ga.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return Ud[t]=e});function lP(t,e){if(!t)return e;var r=aP.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+aP.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+aP.resolve(r.slice(i.length),e)}function ipe(t){var e;if(dP())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=pP(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var fP=_b(jl);jl.push(function(t){var e=ipe(t);if(!e)return null;var r;if(Zde.test(e)){var n=e.slice(e.indexOf(",")+1);r=Jde(n,"base64").toString(),e=t}else e=lP(t,e),r=pP(e);return r?{url:e,map:r}:null});function mP(t){var e=Zv[t.source];if(!e){var r=fP(t.source);r?(e=Zv[t.source]={url:r.url,map:new Xde(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=lP(e.url,i);Ud[a]=s}})):e=Zv[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=lP(e.url,n.source),n}return t}function fH(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=mP({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+fH(e[2])+")":t}function ope(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),l=!(this.isToplevel()||a);if(l){var c=this.getTypeName();c==="[object Object]"&&(c="null");var u=this.getMethodName();o?(c&&o.indexOf(c)!=0&&(i+=c+"."),i+=o,u&&o.indexOf("."+u)!=o.length-u.length-1&&(i+=" [as "+u+"]")):i+=c+"."+(u||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function pH(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=ope,e}function mH(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(tpe())?0:62;n===1&&i>s&&!dP()&&!t.isEval()&&(i-=s);var a=mP({source:r,line:n,column:i});e.curPosition=a,t=pH(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=fH(c),t=pH(t),t.getEvalOrigin=function(){return c}),t}function spe(t,e){cP&&(Ud={},Zv={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+mH(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function hH(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=Ud[r];if(!o&&ga&&ga.existsSync(r))try{o=ga.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function ape(t){var e=hH(t),r=rpe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),npe(1)}function cpe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return ape(arguments[1])}return t.apply(this,arguments)}}var lpe=Hl.slice(0),upe=jl.slice(0);qd.wrapCallSite=mH;qd.getErrorSource=hH;qd.mapSourcePosition=mP;qd.retrieveSourceMap=fP;qd.install=function(t){if(t=t||{},t.environment&&(Jv=t.environment,["node","browser","auto"].indexOf(Jv)===-1))throw new Error("environment "+Jv+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Hl.length=0),Hl.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(jl.length=0),jl.unshift(t.retrieveSourceMap)),t.hookRequire&&!dP()){var e=lH(uP,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return Ud[s]=o,Zv[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(cP||(cP="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),uH||(uH=!0,Error.prepareStackTrace=spe),!dH){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=lH(uP,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&epe()&&(dH=!0,cpe())}};qd.resetRetrieveHandlers=function(){Hl.length=0,jl.length=0,Hl=lpe.slice(0),jl=upe.slice(0),fP=_b(jl),pP=_b(Hl)}});var hP=x((lqe,dpe)=>{dpe.exports={name:"copilot-chat",displayName:"GitHub Copilot Chat",description:"AI chat features powered by Copilot",version:"0.10.2",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"prod",publisher:"GitHub",preview:!0,homepage:"https://github.com/features/copilot",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-release"},bugs:{url:"https://github.com/microsoft/vscode-copilot-release/issues"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/Copilot-App-Icon.png",pricing:"Trial",engines:{vscode:"^1.84.0-20231025",npm:">=9.0.0",node:">=18.0.0"},categories:["Programming Languages","Machine Learning","Education","Snippets"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup",description:"%github.copilot.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%github.copilot.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%github.copilot.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%github.copilot.badge.twitter%"}],activationEvents:["onStartupFinished"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["interactive","interactiveUserActions","chatProvider","codeActionAI","findTextInFiles","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","handleIssueUri","readonlyMessage","chatVariables","mappedEditsProvider","aiRelatedInformation","chatAgents","chatAgents2","chatAgents2Additions","defaultChatAgent"],contributes:{interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!github.copilot.interactiveSession.disabled"}],viewsWelcome:[{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.signIn%",when:"!github.copilot.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual%",when:"github.copilot.interactiveSession.individual.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual.expired%",when:"github.copilot.interactiveSession.individual.expired"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.enterprise%",when:"github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.offline%",when:"github.copilot.offline"}],commands:[{command:"github.copilot.interactiveEditor.explain",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generate",title:"%github.copilot.command.generateThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateDocs",title:"%github.copilot.command.generateDocs%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateTests",title:"%github.copilot.command.generateTests%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.fix",title:"%github.copilot.command.fixThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveSession.feedback",title:"%github.copilot.command.sendChatFeedback%",enablement:"github.copilot.activated && !github.copilot.interactiveSession.disabled",icon:"$(feedback)",category:"GitHub Copilot"},{command:"github.copilot.debug.workbenchState",title:"%github.copilot.command.logWorkbenchState%",category:"Developer"},{command:"github.copilot.ghpr.applySuggestion",title:"%github.copilot.command.applySuggestionWithCopilot%",icon:"$(sparkle)",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelection",title:"%github.copilot.command.explainTerminalSelection%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",title:"%github.copilot.command.explainTerminalSelectionContextMenu%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalLastCommand",title:"%github.copilot.command.explainTerminalLastCommand%",category:"GitHub Copilot"},{command:"github.copilot.terminal.suggestCommand",title:"%github.copilot.command.suggestCommand%",category:"GitHub Copilot"}],configuration:{title:"Copilot",properties:{"github.copilot.editor.enableCodeActions":{type:"boolean",default:!0,description:"%github.copilot.config.enableCodeActions%"},"github.copilot.editor.iterativeFixing":{type:"boolean",default:!0,description:"%github.copilot.config.iterativeFixing%"},"github.copilot.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%github.copilot.config.localeOverride%"},"github.copilot.chat.welcomeMessage":{type:"string",default:"first",markdownDescription:"%github.copilot.config.welcomeMessage%",markdownEnumDescriptions:["%github.copilot.config.welcomeMessage.first%","%github.copilot.config.welcomeMessage.always%","%github.copilot.config.welcomeMessage.never%"],enum:["first","always","never"]}}},configurationDefaults:{"terminal.integrated.commandsToSkipShell":["github.copilot.terminal.suggestCommand"]},keybindings:[{command:"github.copilot.terminal.suggestCommand",key:"ctrl+i",mac:"cmd+i",when:"terminalFocus"}],submenus:[{id:"copilot",label:"Copilot"}],menus:{"editor/context":[{submenu:"copilot",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"1_copilot@0"}],copilot:[{command:"inlineChat.start",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilot@1"},{command:"github.copilot.interactiveEditor.explain",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"github.copilot.interactiveEditor.fix",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@2"},{command:"github.copilot.interactiveEditor.generateDocs",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@3"},{command:"github.copilot.interactiveEditor.generateTests",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@4"}],"terminal/context":[{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",group:"1_copilot@0"}],commandPalette:[{command:"github.copilot.interactiveSession.feedback",when:"github.copilot.activated && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.debug.workbenchState",when:"true"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",when:"false"}],"view/title":[{command:"github.copilot.interactiveSession.feedback",when:"view == workbench.panel.chat.view.copilot",group:"navigation"}],"comments/comment/title":[{command:"github.copilot.ghpr.applySuggestion",title:"Apply Suggestion with Copilot",group:"inline@0",when:"commentController =~ /^github-review/ && !(comment =~ /hasSuggestion/)"}]},icons:{"copilot-logo":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"}]},extensionPack:["GitHub.copilot"],scripts:{postinstall:"tsx ./script/postinstall.ts",prepare:"tsx script/setup/prepare.ts","husky:install":"husky install","vscode:prepublish":"npm run build","vscode-dts:dev":"npx vscode-dts dev && mv vscode.proposed.*.ts src/extension",build:"tsx .esbuild.ts",compile:"tsx .esbuild.ts --dev",watch:"npm-run-all -p watch:*","watch:esbuild":"tsx .esbuild.ts --watch --dev","watch:tsc-extension":"tsc --noEmit --watch --project tsconfig.json","watch:tsc-simulation-workbench":"tsc --noEmit --watch --project test/simulation/workbench/tsconfig.json",typecheck:"tsc --noEmit -project tsconfig.json && tsc --noEmit --project test/simulation/workbench/tsconfig.json",lint:"eslint src test --max-warnings=0 --ext ts",tsfmt:"node tsfmt ./tsfmt.json -r --verify",pretest:"npm run build_test",test:"npm-run-all test:*","test:extension":"tsx ./test/runTest.ts --insiders","test:unit":"mocha -u tdd dist/test-unit.js --require source-map-support/register --exit","test:unit_jest":"jest --forceExit --detectOpenHandles",build_test:"tsc test/run.ts --esModuleInterop",get_token:"tsx script/setup/getToken.ts","patch-release":"tsx script/build/applyPatchForRelease.ts","patch-prerelease":"tsx script/build/applyPatchForRelease.ts -- --prerelease",prettier:"prettier --list-different --write --cache .","simulate:debug":"run-script-os","simulate:debug:win32":".venv\\Scripts\\activate.bat && node dist/simulationMain.js --n=10","simulate:debug:darwin:linux":". .venv/bin/activate && node dist/simulationMain.js --n=10",simulate:"node dist/simulationMain.js","simulate-ci":"node dist/simulationMain.js --ci --require-cache","simulate-baseline":"node dist/simulationMain.js --update-baseline",setup:"python script/setup/setup.py && npm run get_token","setup:dotnet":"run-script-os","setup:dotnet:darwin:linux":"curl -O https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.sh && chmod u+x dotnet-install.sh && ./dotnet-install.sh --version latest --quality GA --channel STS && rm dotnet-install.sh","setup:dotnet:win32":"Invoke-WebRequest -Uri https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.ps1 && chmod u+x dotnet-install.ps1 && ./dotnet-install.ps1 --version latest --quality GA --channel STS && rm dotnet-install.ps1",aml:"python test/aml/run.py",package:"vsce package"},devDependencies:{"@github/prettier-config":"0.0.6","@jest/globals":"^29.6.1","@nteract/messaging":"^7.0.10","@types/js-yaml":"^4.0.5","@types/kerberos":"^1.1.2","@types/minimist":"^1.2.2","@types/mocha":"^10.0.1","@types/node":"^18.11.9","@types/picomatch":"^2.3.0","@types/react":"^18.2.21","@types/react-dom":"^18.2.7","@types/sinon":"^10.0.13","@types/tar":"^6.1.5","@types/tunnel":"^0.0.3","@types/uuid":"^9.0.1","@types/vscode":"^1.74.0","@typescript-eslint/eslint-plugin":"^5.59.9","@typescript-eslint/parser":"^5.56.0","@typescript-eslint/typescript-estree":"^5.59.11","@vscode/dts":"^0.4.0","@vscode/test-electron":"^2.3.0","@vscode/vsce":"2.19.0","@vscode/zeromq":"0.1.6","csv-parse":"^5.5.0",dotenv:"^16.3.1",electron:"^25.8.4",esbuild:"^0.19.3",eslint:"^8.38.0","eslint-import-resolver-typescript":"^3.5.5","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.27.5","eslint-plugin-jsdoc":"^46.2.6","eslint-plugin-local":"^1.0.0","eslint-plugin-no-only-tests":"^3.1.0",fantasticon:"^2.0.0","get-port":"^5.1.1",glob:"^10.2.7",husky:"^8.0.3","ignore-loader":"^0.1.2",jest:"^29.6.1","js-yaml":"^4.1.0","lint-staged":"^13.2.2",minimist:"^1.2.8",mobx:"^6.10.2","mobx-react-lite":"^4.0.4",mocha:"^10.2.0","monaco-editor":"^0.41.0","npm-run-all":"^4.1.5",outdent:"^0.8.0",picomatch:"^2.3.1",prettier:"2.8.7",proxy:"^1.0.2",react:"^18.2.0","react-dom":"^18.2.0","run-script-os":"^1.1.6",sinon:"^15.1.2",tar:"^6.1.15","tree-sitter-c-sharp":"^0.20.0","tree-sitter-cli":"^0.20.8","tree-sitter-cpp":"^0.20.0","tree-sitter-go":"^0.19.1","tree-sitter-java":"^0.19.1","tree-sitter-javascript":"^0.19.0","tree-sitter-python":"^0.20.1","tree-sitter-ruby":"^0.19.0","tree-sitter-typescript":"^0.20.1","ts-dedent":"^2.2.0","ts-jest":"^29.1.1","ts-loader":"^9.4.2","ts-node":"^10.9.1",tsx:"^3.13.0",typescript:"^5.0.4","typescript-formatter":"^7.2.2",zeromq:"github:rebornix/zeromq.js#a19e8e373b3abc677f91b936d3f00d49b1b61792",zlib:"^1.0.5"},dependencies:{"@adobe/helix-fetch":"github:devm33/helix-fetch#eaa2f1344d93625e1bddb83d6846be5eea007e94","@microsoft/tiktokenizer":"^1.0.2","@roamhq/mac-ca":"^1.0.7","@vscode/extension-telemetry":"^0.8.4",applicationinsights:"^2.9.0",ignore:"^5.2.4","@humanwhocodes/gitignore-to-minimatch":"1.0.2",isbinaryfile:"^5.0.0","jsonc-parser":"^3.2.0",open:"^8.4.2","p-limit":"^3.0.0","source-map-support":"^0.5.21",tunnel:"^0.0.6","vscode-languageserver-textdocument":"~1.0.2","vscode-tas-client":"^0.1.63","vscode-uri":"^3.0.7","web-tree-sitter":"^0.20.8"},"lint-staged":{"!(test/simulation/fixtures/**)*.{ts,js},!.test-scenarios/**/*,!test/aml/**/*":["npm run tsfmt --","npm run lint --"]},isPreRelease:!1}});var CP=x(mt=>{"use strict";var bP=mt&&mt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},EP=mt&&mt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(mt,"__esModule",{value:!0});mt.getShallowFileSize=mt.getShallowDirectorySizeSync=mt.getShallowDirectorySize=mt.confirmDirExists=mt.unlinkAsync=mt.readdirAsync=mt.readFileAsync=mt.writeFileAsync=mt.appendFileAsync=mt.accessAsync=mt.mkdirAsync=mt.lstatAsync=mt.statAsync=void 0;var Is=require("fs"),PH=require("path"),Ec=require("util");mt.statAsync=Ec.promisify(Is.stat);mt.lstatAsync=Ec.promisify(Is.lstat);mt.mkdirAsync=Ec.promisify(Is.mkdir);mt.accessAsync=Ec.promisify(Is.access);mt.appendFileAsync=Ec.promisify(Is.appendFile);mt.writeFileAsync=Ec.promisify(Is.writeFile);mt.readFileAsync=Ec.promisify(Is.readFile);mt.readdirAsync=Ec.promisify(Is.readdir);mt.unlinkAsync=Ec.promisify(Is.unlink);var bpe=function(t){return bP(void 0,void 0,void 0,function(){var e,r,n;return EP(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,mt.lstatAsync(t)];case 1:if(e=i.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=i.sent(),!(r&&r.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,mt.mkdirAsync(t)];case 4:return i.sent(),[3,6];case 5:if(n=i.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};mt.confirmDirExists=bpe;var Epe=function(t){return bP(void 0,void 0,void 0,function(){var e,r,n,i,o,s;return EP(this,function(a){switch(a.label){case 0:return[4,mt.readdirAsync(t)];case 1:e=a.sent(),r=0,n=0,i=e,a.label=2;case 2:return n<i.length?(o=i[n],[4,mt.statAsync(PH.join(t,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(r+=s.size),a.label=4;case 4:return n++,[3,2];case 5:return[2,r]}})})};mt.getShallowDirectorySize=Epe;var Cpe=function(t){for(var e=Is.readdirSync(t),r=0,n=0;n<e.length;n++)r+=Is.statSync(PH.join(t,e[n])).size;return r};mt.getShallowDirectorySizeSync=Cpe;var Spe=function(t){return bP(void 0,void 0,void 0,function(){var e;return EP(this,function(r){switch(r.label){case 0:return[4,mt.statAsync(t)];case 1:return e=r.sent(),e.isFile()?[2,e.size]:[2]}})})};mt.getShallowFileSize=Spe});var OH=x(($d,NH)=>{"use strict";var SP=$d&&$d.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},TP=$d&&$d.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},kH=$d&&$d.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},Tpe=require("fs"),Ipe=require("os"),Gd=require("path"),_a=CP(),wpe=function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?Gd.isAbsolute(n)?this._tempDir=n:this._tempDir=Gd.join(process.cwd(),n):this._tempDir=Gd.join(Ipe.tmpdir(),"appInsights-node"),this._fileFullPath=Gd.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?kH([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?kH([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return SP(this,void 0,void 0,function(){var r,n,i,o,s,a;return TP(this,function(l){switch(l.label){case 0:r=e+`\r
`,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,_a.confirmDirExists(this._tempDir)];case 2:return l.sent(),[3,4];case 3:return n=l.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return l.trys.push([4,6,,11]),[4,_a.accessAsync(this._fileFullPath,Tpe.constants.F_OK)];case 5:return l.sent(),[3,11];case 6:i=l.sent(),l.label=7;case 7:return l.trys.push([7,9,,10]),[4,_a.appendFileAsync(this._fileFullPath,r)];case 8:return l.sent(),[2];case 9:return o=l.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return l.trys.push([11,17,,18]),[4,_a.getShallowFileSize(this._fileFullPath)];case 12:return s=l.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return l.sent(),[3,16];case 14:return[4,_a.appendFileAsync(this._fileFullPath,r)];case 15:l.sent(),l.label=16;case 16:return[3,18];case 17:return a=l.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return SP(this,void 0,void 0,function(){var r,n,i;return TP(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,_a.readFileAsync(this._fileFullPath)];case 1:return r=o.sent(),n=Gd.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,_a.writeFileAsync(n,r)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return _a.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return SP(this,void 0,void 0,function(){var e,r,n,i,o,s=this;return TP(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,_a.readdirAsync(this._tempDir)];case 1:e=a.sent(),e=e.filter(function(l){return Gd.basename(l).indexOf(s._backUpNameFormat)>-1}),e.sort(function(l,c){var u=new Date(parseInt(l.split(s._backUpNameFormat)[0])),d=new Date(parseInt(c.split(s._backUpNameFormat)[0]));if(u<d)return-1;if(u>=d)return 1}),r=e.length,n=0,a.label=2;case 2:return n<r-this.maxHistory?(i=Gd.join(this._tempDir,e[n]),[4,_a.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t}();NH.exports=wpe});var dr=x((Xqe,LH)=>{"use strict";var DH=OH(),Ape="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",Rpe="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",Ppe=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&DH.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||DH.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[Ape],t.disableWarnings=!!process.env[Rpe],t.TAG="ApplicationInsights:",t}();LH.exports=Ppe});var Nb=x(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});kb.JsonConfig=void 0;var kpe=require("fs"),Pb=require("path"),IP=dr(),Npe="APPLICATIONINSIGHTS_CONFIGURATION_FILE",Ope="APPLICATIONINSIGHTS_CONNECTION_STRING",MH="APPSETTING_",FH="APPINSIGHTS_INSTRUMENTATIONKEY",BH="APPINSIGHTS_INSTRUMENTATION_KEY",Dpe="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",Lpe="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",Mpe="http_proxy",Fpe="https_proxy",Bpe="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",Upe="APPLICATION_INSIGHTS_NO_STATSBEAT",qpe="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",Hpe="APPLICATION_INSIGHTS_NO_PATCH_MODULES",jpe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",Vpe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",Gpe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",$pe="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",zpe="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",Wpe=function(){function t(){this.connectionString=process.env[Ope],this.instrumentationKey=process.env[FH]||process.env[MH+FH]||process.env[BH]||process.env[MH+BH],!this.connectionString&&this.instrumentationKey&&IP.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[Lpe],this.extendedMetricDisablers=process.env[Dpe],this.proxyHttpUrl=process.env[Mpe],this.proxyHttpsUrl=process.env[Fpe],this.noDiagnosticChannel=!!process.env[Bpe],this.disableStatsbeat=!!process.env[Upe],this.noHttpAgentKeepAlive=!!process.env[qpe],this.noPatchModules=process.env[Hpe]||"",this.enableWebInstrumentation=!!process.env[jpe]||!!process.env[$pe],this.webInstrumentationSrc=process.env[Gpe]||"",this.webInstrumentationConnectionString=process.env[Vpe]||process.env[zpe]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r="{}";if(r)e=r;else{var n="applicationinsights.json",i=Pb.join(__dirname,"../../"),o=Pb.join(i,n),s=process.env[Npe];s&&(Pb.isAbsolute(s)?o=s:o=Pb.join(i,s));try{e=kpe.readFileSync(o,"utf8")}catch(l){IP.warn("Failed to read JSON config file: ",l)}}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(l){IP.warn("Invalid JSON config file: ",l)}},t}();kb.JsonConfig=Wpe});var ny=x((Zqe,UH)=>{var Kpe="2.0.0",Ype=Number.MAX_SAFE_INTEGER||9007199254740991,Qpe=16,Xpe=256-6,Jpe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];UH.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Qpe,MAX_SAFE_BUILD_LENGTH:Xpe,MAX_SAFE_INTEGER:Ype,RELEASE_TYPES:Jpe,SEMVER_SPEC_VERSION:Kpe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var iy=x((e3e,qH)=>{var Zpe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};qH.exports=Zpe});var Cm=x((Cc,HH)=>{var{MAX_SAFE_COMPONENT_LENGTH:wP,MAX_SAFE_BUILD_LENGTH:efe,MAX_LENGTH:tfe}=ny(),rfe=iy();Cc=HH.exports={};var nfe=Cc.re=[],ife=Cc.safeRe=[],ke=Cc.src=[],Ne=Cc.t={},ofe=0,AP="[a-zA-Z0-9-]",sfe=[["\\s",1],["\\d",tfe],[AP,efe]],afe=t=>{for(let[e,r]of sfe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},at=(t,e,r)=>{let n=afe(e),i=ofe++;rfe(t,i,e),Ne[t]=i,ke[i]=e,nfe[i]=new RegExp(e,r?"g":void 0),ife[i]=new RegExp(n,r?"g":void 0)};at("NUMERICIDENTIFIER","0|[1-9]\\d*");at("NUMERICIDENTIFIERLOOSE","\\d+");at("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${AP}*`);at("MAINVERSION",`(${ke[Ne.NUMERICIDENTIFIER]})\\.(${ke[Ne.NUMERICIDENTIFIER]})\\.(${ke[Ne.NUMERICIDENTIFIER]})`);at("MAINVERSIONLOOSE",`(${ke[Ne.NUMERICIDENTIFIERLOOSE]})\\.(${ke[Ne.NUMERICIDENTIFIERLOOSE]})\\.(${ke[Ne.NUMERICIDENTIFIERLOOSE]})`);at("PRERELEASEIDENTIFIER",`(?:${ke[Ne.NUMERICIDENTIFIER]}|${ke[Ne.NONNUMERICIDENTIFIER]})`);at("PRERELEASEIDENTIFIERLOOSE",`(?:${ke[Ne.NUMERICIDENTIFIERLOOSE]}|${ke[Ne.NONNUMERICIDENTIFIER]})`);at("PRERELEASE",`(?:-(${ke[Ne.PRERELEASEIDENTIFIER]}(?:\\.${ke[Ne.PRERELEASEIDENTIFIER]})*))`);at("PRERELEASELOOSE",`(?:-?(${ke[Ne.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ke[Ne.PRERELEASEIDENTIFIERLOOSE]})*))`);at("BUILDIDENTIFIER",`${AP}+`);at("BUILD",`(?:\\+(${ke[Ne.BUILDIDENTIFIER]}(?:\\.${ke[Ne.BUILDIDENTIFIER]})*))`);at("FULLPLAIN",`v?${ke[Ne.MAINVERSION]}${ke[Ne.PRERELEASE]}?${ke[Ne.BUILD]}?`);at("FULL",`^${ke[Ne.FULLPLAIN]}$`);at("LOOSEPLAIN",`[v=\\s]*${ke[Ne.MAINVERSIONLOOSE]}${ke[Ne.PRERELEASELOOSE]}?${ke[Ne.BUILD]}?`);at("LOOSE",`^${ke[Ne.LOOSEPLAIN]}$`);at("GTLT","((?:<|>)?=?)");at("XRANGEIDENTIFIERLOOSE",`${ke[Ne.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);at("XRANGEIDENTIFIER",`${ke[Ne.NUMERICIDENTIFIER]}|x|X|\\*`);at("XRANGEPLAIN",`[v=\\s]*(${ke[Ne.XRANGEIDENTIFIER]})(?:\\.(${ke[Ne.XRANGEIDENTIFIER]})(?:\\.(${ke[Ne.XRANGEIDENTIFIER]})(?:${ke[Ne.PRERELEASE]})?${ke[Ne.BUILD]}?)?)?`);at("XRANGEPLAINLOOSE",`[v=\\s]*(${ke[Ne.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ke[Ne.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ke[Ne.XRANGEIDENTIFIERLOOSE]})(?:${ke[Ne.PRERELEASELOOSE]})?${ke[Ne.BUILD]}?)?)?`);at("XRANGE",`^${ke[Ne.GTLT]}\\s*${ke[Ne.XRANGEPLAIN]}$`);at("XRANGELOOSE",`^${ke[Ne.GTLT]}\\s*${ke[Ne.XRANGEPLAINLOOSE]}$`);at("COERCE",`(^|[^\\d])(\\d{1,${wP}})(?:\\.(\\d{1,${wP}}))?(?:\\.(\\d{1,${wP}}))?(?:$|[^\\d])`);at("COERCERTL",ke[Ne.COERCE],!0);at("LONETILDE","(?:~>?)");at("TILDETRIM",`(\\s*)${ke[Ne.LONETILDE]}\\s+`,!0);Cc.tildeTrimReplace="$1~";at("TILDE",`^${ke[Ne.LONETILDE]}${ke[Ne.XRANGEPLAIN]}$`);at("TILDELOOSE",`^${ke[Ne.LONETILDE]}${ke[Ne.XRANGEPLAINLOOSE]}$`);at("LONECARET","(?:\\^)");at("CARETTRIM",`(\\s*)${ke[Ne.LONECARET]}\\s+`,!0);Cc.caretTrimReplace="$1^";at("CARET",`^${ke[Ne.LONECARET]}${ke[Ne.XRANGEPLAIN]}$`);at("CARETLOOSE",`^${ke[Ne.LONECARET]}${ke[Ne.XRANGEPLAINLOOSE]}$`);at("COMPARATORLOOSE",`^${ke[Ne.GTLT]}\\s*(${ke[Ne.LOOSEPLAIN]})$|^$`);at("COMPARATOR",`^${ke[Ne.GTLT]}\\s*(${ke[Ne.FULLPLAIN]})$|^$`);at("COMPARATORTRIM",`(\\s*)${ke[Ne.GTLT]}\\s*(${ke[Ne.LOOSEPLAIN]}|${ke[Ne.XRANGEPLAIN]})`,!0);Cc.comparatorTrimReplace="$1$2$3";at("HYPHENRANGE",`^\\s*(${ke[Ne.XRANGEPLAIN]})\\s+-\\s+(${ke[Ne.XRANGEPLAIN]})\\s*$`);at("HYPHENRANGELOOSE",`^\\s*(${ke[Ne.XRANGEPLAINLOOSE]})\\s+-\\s+(${ke[Ne.XRANGEPLAINLOOSE]})\\s*$`);at("STAR","(<|>)?=?\\s*\\*");at("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");at("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ob=x((t3e,jH)=>{var cfe=Object.freeze({loose:!0}),lfe=Object.freeze({}),ufe=t=>t?typeof t!="object"?cfe:t:lfe;jH.exports=ufe});var RP=x((r3e,$H)=>{var VH=/^[0-9]+$/,GH=(t,e)=>{let r=VH.test(t),n=VH.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},dfe=(t,e)=>GH(e,t);$H.exports={compareIdentifiers:GH,rcompareIdentifiers:dfe}});var ti=x((n3e,YH)=>{var Db=iy(),{MAX_LENGTH:zH,MAX_SAFE_INTEGER:Lb}=ny(),{safeRe:WH,t:KH}=Cm(),pfe=Ob(),{compareIdentifiers:Sm}=RP(),PP=class t{constructor(e,r){if(r=pfe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>zH)throw new TypeError(`version is longer than ${zH} characters`);Db("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?WH[KH.LOOSE]:WH[KH.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Lb||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lb||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lb||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Lb)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Db("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Sm(this.major,e.major)||Sm(this.minor,e.minor)||Sm(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Db("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Sm(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Db("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Sm(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),Sm(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};YH.exports=PP});var zd=x((i3e,XH)=>{var QH=ti(),ffe=(t,e,r=!1)=>{if(t instanceof QH)return t;try{return new QH(t,e)}catch(n){if(!r)return null;throw n}};XH.exports=ffe});var ZH=x((o3e,JH)=>{var mfe=zd(),hfe=(t,e)=>{let r=mfe(t,e);return r?r.version:null};JH.exports=hfe});var tj=x((s3e,ej)=>{var gfe=zd(),vfe=(t,e)=>{let r=gfe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};ej.exports=vfe});var ij=x((a3e,nj)=>{var rj=ti(),yfe=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new rj(t instanceof rj?t.version:t,r).inc(e,n,i).version}catch{return null}};nj.exports=yfe});var aj=x((c3e,sj)=>{var oj=zd(),_fe=(t,e)=>{let r=oj(t,null,!0),n=oj(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,l=!!s.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};sj.exports=_fe});var lj=x((l3e,cj)=>{var xfe=ti(),bfe=(t,e)=>new xfe(t,e).major;cj.exports=bfe});var dj=x((u3e,uj)=>{var Efe=ti(),Cfe=(t,e)=>new Efe(t,e).minor;uj.exports=Cfe});var fj=x((d3e,pj)=>{var Sfe=ti(),Tfe=(t,e)=>new Sfe(t,e).patch;pj.exports=Tfe});var hj=x((p3e,mj)=>{var Ife=zd(),wfe=(t,e)=>{let r=Ife(t,e);return r&&r.prerelease.length?r.prerelease:null};mj.exports=wfe});var $o=x((f3e,vj)=>{var gj=ti(),Afe=(t,e,r)=>new gj(t,r).compare(new gj(e,r));vj.exports=Afe});var _j=x((m3e,yj)=>{var Rfe=$o(),Pfe=(t,e,r)=>Rfe(e,t,r);yj.exports=Pfe});var bj=x((h3e,xj)=>{var kfe=$o(),Nfe=(t,e)=>kfe(t,e,!0);xj.exports=Nfe});var Mb=x((g3e,Cj)=>{var Ej=ti(),Ofe=(t,e,r)=>{let n=new Ej(t,r),i=new Ej(e,r);return n.compare(i)||n.compareBuild(i)};Cj.exports=Ofe});var Tj=x((v3e,Sj)=>{var Dfe=Mb(),Lfe=(t,e)=>t.sort((r,n)=>Dfe(r,n,e));Sj.exports=Lfe});var wj=x((y3e,Ij)=>{var Mfe=Mb(),Ffe=(t,e)=>t.sort((r,n)=>Mfe(n,r,e));Ij.exports=Ffe});var oy=x((_3e,Aj)=>{var Bfe=$o(),Ufe=(t,e,r)=>Bfe(t,e,r)>0;Aj.exports=Ufe});var Fb=x((x3e,Rj)=>{var qfe=$o(),Hfe=(t,e,r)=>qfe(t,e,r)<0;Rj.exports=Hfe});var kP=x((b3e,Pj)=>{var jfe=$o(),Vfe=(t,e,r)=>jfe(t,e,r)===0;Pj.exports=Vfe});var NP=x((E3e,kj)=>{var Gfe=$o(),$fe=(t,e,r)=>Gfe(t,e,r)!==0;kj.exports=$fe});var Bb=x((C3e,Nj)=>{var zfe=$o(),Wfe=(t,e,r)=>zfe(t,e,r)>=0;Nj.exports=Wfe});var Ub=x((S3e,Oj)=>{var Kfe=$o(),Yfe=(t,e,r)=>Kfe(t,e,r)<=0;Oj.exports=Yfe});var OP=x((T3e,Dj)=>{var Qfe=kP(),Xfe=NP(),Jfe=oy(),Zfe=Bb(),eme=Fb(),tme=Ub(),rme=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Qfe(t,r,n);case"!=":return Xfe(t,r,n);case">":return Jfe(t,r,n);case">=":return Zfe(t,r,n);case"<":return eme(t,r,n);case"<=":return tme(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};Dj.exports=rme});var Mj=x((I3e,Lj)=>{var nme=ti(),ime=zd(),{safeRe:qb,t:Hb}=Cm(),ome=(t,e)=>{if(t instanceof nme)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(qb[Hb.COERCE]);else{let n;for(;(n=qb[Hb.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),qb[Hb.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;qb[Hb.COERCERTL].lastIndex=-1}return r===null?null:ime(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};Lj.exports=ome});var Bj=x((w3e,Fj)=>{"use strict";Fj.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var qj=x((A3e,Uj)=>{"use strict";Uj.exports=Ft;Ft.Node=Wd;Ft.create=Ft;function Ft(t){var e=this;if(e instanceof Ft||(e=new Ft),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Ft.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ft.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ft.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ft.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)ame(this,arguments[t]);return this.length};Ft.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)cme(this,arguments[t]);return this.length};Ft.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ft.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ft.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Ft.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Ft.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Ft.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Ft.prototype.map=function(t,e){e=e||this;for(var r=new Ft,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Ft.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Ft,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Ft.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Ft.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Ft.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Ft.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Ft.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Ft;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Ft.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Ft;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Ft.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=sme(this,i,r[n]);return o};Ft.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function sme(t,e,r){var n=e===t.head?new Wd(r,null,e,t):new Wd(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function ame(t,e){t.tail=new Wd(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function cme(t,e){t.head=new Wd(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Wd(t,e,r,n){if(!(this instanceof Wd))return new Wd(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Bj()(Ft)}catch{}});var $j=x((R3e,Gj)=>{"use strict";var lme=qj(),Kd=Symbol("max"),Tc=Symbol("length"),Tm=Symbol("lengthCalculator"),ay=Symbol("allowStale"),Yd=Symbol("maxAge"),Sc=Symbol("dispose"),Hj=Symbol("noDisposeOnSet"),Tn=Symbol("lruList"),ws=Symbol("cache"),Vj=Symbol("updateAgeOnGet"),DP=()=>1,MP=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Kd]=e.max||1/0,n=e.length||DP;if(this[Tm]=typeof n!="function"?DP:n,this[ay]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Yd]=e.maxAge||0,this[Sc]=e.dispose,this[Hj]=e.noDisposeOnSet||!1,this[Vj]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Kd]=e||1/0,sy(this)}get max(){return this[Kd]}set allowStale(e){this[ay]=!!e}get allowStale(){return this[ay]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Yd]=e,sy(this)}get maxAge(){return this[Yd]}set lengthCalculator(e){typeof e!="function"&&(e=DP),e!==this[Tm]&&(this[Tm]=e,this[Tc]=0,this[Tn].forEach(r=>{r.length=this[Tm](r.value,r.key),this[Tc]+=r.length})),sy(this)}get lengthCalculator(){return this[Tm]}get length(){return this[Tc]}get itemCount(){return this[Tn].length}rforEach(e,r){r=r||this;for(let n=this[Tn].tail;n!==null;){let i=n.prev;jj(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[Tn].head;n!==null;){let i=n.next;jj(this,e,n,r),n=i}}keys(){return this[Tn].toArray().map(e=>e.key)}values(){return this[Tn].toArray().map(e=>e.value)}reset(){this[Sc]&&this[Tn]&&this[Tn].length&&this[Tn].forEach(e=>this[Sc](e.key,e.value)),this[ws]=new Map,this[Tn]=new lme,this[Tc]=0}dump(){return this[Tn].map(e=>jb(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Tn]}set(e,r,n){if(n=n||this[Yd],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[Tm](r,e);if(this[ws].has(e)){if(o>this[Kd])return Im(this,this[ws].get(e)),!1;let l=this[ws].get(e).value;return this[Sc]&&(this[Hj]||this[Sc](e,l.value)),l.now=i,l.maxAge=n,l.value=r,this[Tc]+=o-l.length,l.length=o,this.get(e),sy(this),!0}let s=new FP(e,r,o,i,n);return s.length>this[Kd]?(this[Sc]&&this[Sc](e,r),!1):(this[Tc]+=s.length,this[Tn].unshift(s),this[ws].set(e,this[Tn].head),sy(this),!0)}has(e){if(!this[ws].has(e))return!1;let r=this[ws].get(e).value;return!jb(this,r)}get(e){return LP(this,e,!0)}peek(e){return LP(this,e,!1)}pop(){let e=this[Tn].tail;return e?(Im(this,e),e.value):null}del(e){Im(this,this[ws].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ws].forEach((e,r)=>LP(this,r,!1))}},LP=(t,e,r)=>{let n=t[ws].get(e);if(n){let i=n.value;if(jb(t,i)){if(Im(t,n),!t[ay])return}else r&&(t[Vj]&&(n.value.now=Date.now()),t[Tn].unshiftNode(n));return i.value}},jb=(t,e)=>{if(!e||!e.maxAge&&!t[Yd])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Yd]&&r>t[Yd]},sy=t=>{if(t[Tc]>t[Kd])for(let e=t[Tn].tail;t[Tc]>t[Kd]&&e!==null;){let r=e.prev;Im(t,e),e=r}},Im=(t,e)=>{if(e){let r=e.value;t[Sc]&&t[Sc](r.key,r.value),t[Tc]-=r.length,t[ws].delete(r.key),t[Tn].removeNode(e)}},FP=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},jj=(t,e,r,n)=>{let i=r.value;jb(t,i)&&(Im(t,r),t[ay]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};Gj.exports=MP});var zo=x((P3e,Yj)=>{var BP=class t{constructor(e,r){if(r=dme(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof UP)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Wj(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&yme(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&gme)|(this.options.loose&&vme))+":"+e,i=zj.get(n);if(i)return i;let o=this.options.loose,s=o?Fi[hi.HYPHENRANGELOOSE]:Fi[hi.HYPHENRANGE];e=e.replace(s,Ame(this.options.includePrerelease)),pr("hyphen replace",e),e=e.replace(Fi[hi.COMPARATORTRIM],fme),pr("comparator trim",e),e=e.replace(Fi[hi.TILDETRIM],mme),pr("tilde trim",e),e=e.replace(Fi[hi.CARETTRIM],hme),pr("caret trim",e);let a=e.split(" ").map(d=>_me(d,this.options)).join(" ").split(/\s+/).map(d=>wme(d,this.options));o&&(a=a.filter(d=>(pr("loose invalid filter",d,this.options),!!d.match(Fi[hi.COMPARATORLOOSE])))),pr("range list",a);let l=new Map,c=a.map(d=>new UP(d,this.options));for(let d of c){if(Wj(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return zj.set(n,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>Kj(n,r)&&e.set.some(i=>Kj(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new pme(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Rme(this.set[r],e,this.options))return!0;return!1}};Yj.exports=BP;var ume=$j(),zj=new ume({max:1e3}),dme=Ob(),UP=cy(),pr=iy(),pme=ti(),{safeRe:Fi,t:hi,comparatorTrimReplace:fme,tildeTrimReplace:mme,caretTrimReplace:hme}=Cm(),{FLAG_INCLUDE_PRERELEASE:gme,FLAG_LOOSE:vme}=ny(),Wj=t=>t.value==="<0.0.0-0",yme=t=>t.value==="",Kj=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},_me=(t,e)=>(pr("comp",t,e),t=Eme(t,e),pr("caret",t),t=xme(t,e),pr("tildes",t),t=Sme(t,e),pr("xrange",t),t=Ime(t,e),pr("stars",t),t),gi=t=>!t||t.toLowerCase()==="x"||t==="*",xme=(t,e)=>t.trim().split(/\s+/).map(r=>bme(r,e)).join(" "),bme=(t,e)=>{let r=e.loose?Fi[hi.TILDELOOSE]:Fi[hi.TILDE];return t.replace(r,(n,i,o,s,a)=>{pr("tilde",t,n,i,o,s,a);let l;return gi(i)?l="":gi(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:gi(s)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(pr("replaceTilde pr",a),l=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,pr("tilde return",l),l})},Eme=(t,e)=>t.trim().split(/\s+/).map(r=>Cme(r,e)).join(" "),Cme=(t,e)=>{pr("caret",t,e);let r=e.loose?Fi[hi.CARETLOOSE]:Fi[hi.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,l)=>{pr("caret",t,i,o,s,a,l);let c;return gi(o)?c="":gi(s)?c=`>=${o}.0.0${n} <${+o+1}.0.0-0`:gi(a)?o==="0"?c=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:l?(pr("replaceCaret pr",l),o==="0"?s==="0"?c=`>=${o}.${s}.${a}-${l} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}-${l} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a}-${l} <${+o+1}.0.0-0`):(pr("no pr"),o==="0"?s==="0"?c=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),pr("caret return",c),c})},Sme=(t,e)=>(pr("replaceXRanges",t,e),t.split(/\s+/).map(r=>Tme(r,e)).join(" ")),Tme=(t,e)=>{t=t.trim();let r=e.loose?Fi[hi.XRANGELOOSE]:Fi[hi.XRANGE];return t.replace(r,(n,i,o,s,a,l)=>{pr("xRange",t,n,i,o,s,a,l);let c=gi(o),u=c||gi(s),d=u||gi(a),p=d;return i==="="&&p&&(i=""),l=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(l="-0"),n=`${i+o}.${s}.${a}${l}`):u?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${l} <${o}.${+s+1}.0-0`),pr("xRange return",n),n})},Ime=(t,e)=>(pr("replaceStars",t,e),t.trim().replace(Fi[hi.STAR],"")),wme=(t,e)=>(pr("replaceGTE0",t,e),t.trim().replace(Fi[e.includePrerelease?hi.GTE0PRE:hi.GTE0],"")),Ame=t=>(e,r,n,i,o,s,a,l,c,u,d,p,f)=>(gi(n)?r="":gi(i)?r=`>=${n}.0.0${t?"-0":""}`:gi(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,gi(c)?l="":gi(u)?l=`<${+c+1}.0.0-0`:gi(d)?l=`<${c}.${+u+1}.0-0`:p?l=`<=${c}.${u}.${d}-${p}`:t?l=`<${c}.${u}.${+d+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),Rme=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(pr(t[n].semver),t[n].semver!==UP.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var cy=x((k3e,tV)=>{var ly=Symbol("SemVer ANY"),jP=class t{static get ANY(){return ly}constructor(e,r){if(r=Qj(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),HP("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ly?this.value="":this.value=this.operator+this.semver.version,HP("comp",this)}parse(e){let r=this.options.loose?Xj[Jj.COMPARATORLOOSE]:Xj[Jj.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Zj(n[2],this.options.loose):this.semver=ly}toString(){return this.value}test(e){if(HP("Comparator.test",e,this.options.loose),this.semver===ly||e===ly)return!0;if(typeof e=="string")try{e=new Zj(e,this.options)}catch{return!1}return qP(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new eV(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new eV(this.value,r).test(e.semver):(r=Qj(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||qP(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||qP(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};tV.exports=jP;var Qj=Ob(),{safeRe:Xj,t:Jj}=Cm(),qP=OP(),HP=iy(),Zj=ti(),eV=zo()});var uy=x((N3e,rV)=>{var Pme=zo(),kme=(t,e,r)=>{try{e=new Pme(e,r)}catch{return!1}return e.test(t)};rV.exports=kme});var iV=x((O3e,nV)=>{var Nme=zo(),Ome=(t,e)=>new Nme(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));nV.exports=Ome});var sV=x((D3e,oV)=>{var Dme=ti(),Lme=zo(),Mme=(t,e,r)=>{let n=null,i=null,o=null;try{o=new Lme(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new Dme(n,r))}),n};oV.exports=Mme});var cV=x((L3e,aV)=>{var Fme=ti(),Bme=zo(),Ume=(t,e,r)=>{let n=null,i=null,o=null;try{o=new Bme(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new Fme(n,r))}),n};aV.exports=Ume});var dV=x((M3e,uV)=>{var VP=ti(),qme=zo(),lV=oy(),Hme=(t,e)=>{t=new qme(t,e);let r=new VP("0.0.0");if(t.test(r)||(r=new VP("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new VP(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||lV(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||lV(r,o))&&(r=o)}return r&&t.test(r)?r:null};uV.exports=Hme});var fV=x((F3e,pV)=>{var jme=zo(),Vme=(t,e)=>{try{return new jme(t,e).range||"*"}catch{return null}};pV.exports=Vme});var Vb=x((B3e,vV)=>{var Gme=ti(),gV=cy(),{ANY:$me}=gV,zme=zo(),Wme=uy(),mV=oy(),hV=Fb(),Kme=Ub(),Yme=Bb(),Qme=(t,e,r,n)=>{t=new Gme(t,n),e=new zme(e,n);let i,o,s,a,l;switch(r){case">":i=mV,o=Kme,s=hV,a=">",l=">=";break;case"<":i=hV,o=Yme,s=mV,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Wme(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let u=e.set[c],d=null,p=null;if(u.forEach(f=>{f.semver===$me&&(f=new gV(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===l||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===l&&s(t,p.semver))return!1}return!0};vV.exports=Qme});var _V=x((U3e,yV)=>{var Xme=Vb(),Jme=(t,e,r)=>Xme(t,e,">",r);yV.exports=Jme});var bV=x((q3e,xV)=>{var Zme=Vb(),ehe=(t,e,r)=>Zme(t,e,"<",r);xV.exports=ehe});var SV=x((H3e,CV)=>{var EV=zo(),the=(t,e,r)=>(t=new EV(t,r),e=new EV(e,r),t.intersects(e,r));CV.exports=the});var IV=x((j3e,TV)=>{var rhe=uy(),nhe=$o();TV.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,d)=>nhe(u,d,r));for(let u of s)rhe(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e}});var NV=x((V3e,kV)=>{var wV=zo(),$P=cy(),{ANY:GP}=$P,dy=uy(),zP=$o(),ihe=(t,e,r={})=>{if(t===e)return!0;t=new wV(t,r),e=new wV(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=she(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},ohe=[new $P(">=0.0.0-0")],AV=[new $P(">=0.0.0")],she=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===GP){if(e.length===1&&e[0].semver===GP)return!0;r.includePrerelease?t=ohe:t=AV}if(e.length===1&&e[0].semver===GP){if(r.includePrerelease)return!0;e=AV}let n=new Set,i,o;for(let f of t)f.operator===">"||f.operator===">="?i=RV(i,f,r):f.operator==="<"||f.operator==="<="?o=PV(o,f,r):n.add(f.semver);if(n.size>1)return null;let s;if(i&&o){if(s=zP(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of n){if(i&&!dy(f,String(i),r)||o&&!dy(f,String(o),r))return null;for(let m of e)if(!dy(f,String(m),r))return!1;return!0}let a,l,c,u,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=RV(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!dy(i.semver,String(f),r))return!1}if(o){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(l=PV(o,f,r),l===f&&l!==o)return!1}else if(o.operator==="<="&&!dy(o.semver,String(f),r))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&c&&!o&&s!==0||o&&u&&!i&&s!==0||p||d)},RV=(t,e,r)=>{if(!t)return e;let n=zP(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},PV=(t,e,r)=>{if(!t)return e;let n=zP(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};kV.exports=ihe});var MV=x((G3e,LV)=>{var WP=Cm(),OV=ny(),ahe=ti(),DV=RP(),che=zd(),lhe=ZH(),uhe=tj(),dhe=ij(),phe=aj(),fhe=lj(),mhe=dj(),hhe=fj(),ghe=hj(),vhe=$o(),yhe=_j(),_he=bj(),xhe=Mb(),bhe=Tj(),Ehe=wj(),Che=oy(),She=Fb(),The=kP(),Ihe=NP(),whe=Bb(),Ahe=Ub(),Rhe=OP(),Phe=Mj(),khe=cy(),Nhe=zo(),Ohe=uy(),Dhe=iV(),Lhe=sV(),Mhe=cV(),Fhe=dV(),Bhe=fV(),Uhe=Vb(),qhe=_V(),Hhe=bV(),jhe=SV(),Vhe=IV(),Ghe=NV();LV.exports={parse:che,valid:lhe,clean:uhe,inc:dhe,diff:phe,major:fhe,minor:mhe,patch:hhe,prerelease:ghe,compare:vhe,rcompare:yhe,compareLoose:_he,compareBuild:xhe,sort:bhe,rsort:Ehe,gt:Che,lt:She,eq:The,neq:Ihe,gte:whe,lte:Ahe,cmp:Rhe,coerce:Phe,Comparator:khe,Range:Nhe,satisfies:Ohe,toComparators:Dhe,maxSatisfying:Lhe,minSatisfying:Mhe,minVersion:Fhe,validRange:Bhe,outside:Uhe,gtr:qhe,ltr:Hhe,intersects:jhe,simplifyRange:Vhe,subset:Ghe,SemVer:ahe,re:WP.re,src:WP.src,tokens:WP.t,SEMVER_SPEC_VERSION:OV.SEMVER_SPEC_VERSION,RELEASE_TYPES:OV.RELEASE_TYPES,compareIdentifiers:DV.compareIdentifiers,rcompareIdentifiers:DV.rcompareIdentifiers}});var KP=x(Gb=>{"use strict";Object.defineProperty(Gb,"__esModule",{value:!0});Gb.makePatchingRequire=void 0;var $he=require("path"),zhe=MV(),FV=Dr(),UV=require("module"),Whe=Object.keys(process.binding("natives")),BV=UV.prototype.require;function Khe(t){var e={};return function(n){var i=BV.apply(this,arguments);if(t[n]){var o=UV._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(Whe.indexOf(n)<0)try{s=BV.call(this,$he.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var l=i,c=0,u=t[n];c<u.length;c++){var d=u[c];if(zhe.satisfies(s,d.versionSpecifier)&&(l=d.patch(l,o),FV.channel)){var p=d.publisherName||n;FV.channel.addPatchedModule(p,s)}}return e[o]=l}return i}}Gb.makePatchingRequire=Khe});var qV=x((z3e,Yhe)=>{Yhe.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var Dr=x(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.channel=Wo.ContextPreservingEventEmitter=Wo.trueFilter=Wo.makePatchingRequire=void 0;var Qhe=KP(),Xhe=KP();Object.defineProperty(Wo,"makePatchingRequire",{enumerable:!0,get:function(){return Xhe.makePatchingRequire}});var Jhe=function(t){return!0};Wo.trueFilter=Jhe;var jV=function(){function t(){this.version=qV().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,i){n===void 0&&(n=Wo.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(e);o&&i&&i(o.name,o.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=Wo.trueFilter);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,i=this.modulesPatched;n<i.length;n++){var o=i[n];if(o.name===e)return}this.modulesPatched.push({name:e,version:r});var s=this.subscribers[e];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var i=n[r];if(i.name===e)return i}return null},t}();Wo.ContextPreservingEventEmitter=jV;global.diagnosticsSource||(global.diagnosticsSource=new jV,HV=require("module"),HV.prototype.require=Qhe.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var HV;Wo.channel=global.diagnosticsSource});var VV,GV=k(()=>{VV=typeof globalThis=="object"?globalThis:global});var $V=k(()=>{GV()});var zV=k(()=>{$V()});var Ic,YP=k(()=>{Ic="1.6.0"});function Zhe(t){var e=new Set([t]),r=new Set,n=t.match(WV);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(l){return l===t};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(l){if(e.has(l))return!0;if(r.has(l))return!1;var c=l.match(WV);if(!c)return o(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||i.major!==u.major?o(l):i.major===0?i.minor===u.minor&&i.patch<=u.patch?s(l):o(l):i.minor<=u.minor?s(l):o(l)}}var WV,KV,YV=k(()=>{YP();WV=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;KV=Zhe(Ic)});function xa(t,e,r,n){var i;n===void 0&&(n=!1);var o=fy[py]=(i=fy[py])!==null&&i!==void 0?i:{version:Ic};if(!n&&o[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(o.version!==Ic){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+Ic);return r.error(s.stack||s.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Ic+"."),!0}function po(t){var e,r,n=(e=fy[py])===null||e===void 0?void 0:e.version;if(!(!n||!KV(n)))return(r=fy[py])===null||r===void 0?void 0:r[t]}function ba(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Ic+".");var r=fy[py];r&&delete r[t]}var ege,py,fy,Qd=k(()=>{zV();YP();YV();ege=Ic.split(".")[0],py=Symbol.for("opentelemetry.js.api."+ege),fy=VV});function my(t,e,r){var n=po("diag");if(n)return r.unshift(e),n[t].apply(n,rge([],tge(r),!1))}var tge,rge,QV,XV=k(()=>{Qd();tge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},rge=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},QV=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return my("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return my("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return my("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return my("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return my("verbose",this._namespace,e)},t}()});var Zt,$b=k(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Zt||(Zt={}))});function JV(t,e){t<Zt.NONE?t=Zt.NONE:t>Zt.ALL&&(t=Zt.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",Zt.ERROR),warn:r("warn",Zt.WARN),info:r("info",Zt.INFO),debug:r("debug",Zt.DEBUG),verbose:r("verbose",Zt.VERBOSE)}}var ZV=k(()=>{$b()});var nge,ige,oge,ri,Xd=k(()=>{XV();ZV();$b();Qd();nge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},ige=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},oge="diag",ri=function(){function t(){function e(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=po("diag");if(a)return a[i].apply(a,ige([],nge(o),!1))}}var r=this,n=function(i,o){var s,a,l;if(o===void 0&&(o={logLevel:Zt.INFO}),i===r){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof o=="number"&&(o={logLevel:o});var u=po("diag"),d=JV((a=o.logLevel)!==null&&a!==void 0?a:Zt.INFO,i);if(u&&!o.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return xa("diag",d,r,!0)};r.setLogger=n,r.disable=function(){ba(oge,r)},r.createComponentLogger=function(i){return new QV(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}()});var sge,age,e6,t6=k(()=>{sge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},age=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e6=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=sge(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var s=age(n),a=s.next();!a.done;a=s.next()){var l=a.value;o._entries.delete(l)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}()});var r6,n6=k(()=>{r6=Symbol("BaggageEntryMetadata")});function i6(t){return t===void 0&&(t={}),new e6(new Map(Object.entries(t)))}function zb(t){return typeof t!="string"&&(cge.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:r6,toString:function(){return t}}}var cge,QP=k(()=>{Xd();t6();n6();cge=ri.instance()});function Ea(t){return Symbol.for(t)}var lge,Wb,hy=k(()=>{lge=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),Wb=new lge});var XP,o6,s6=k(()=>{XP=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],o6=function(){function t(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[n];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var r=0;r<XP.length;r++)this[XP[r].n]=e(XP[r].c)}return t}()});function a6(){return e1}var wm,uge,JP,dge,pge,fge,ZP,mge,hge,gge,e1,vge,yge,_ge,xge,bge,Ege,t1=k(()=>{wm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uge=function(){function t(){}return t.prototype.createHistogram=function(e,r){return yge},t.prototype.createCounter=function(e,r){return vge},t.prototype.createUpDownCounter=function(e,r){return _ge},t.prototype.createObservableGauge=function(e,r){return bge},t.prototype.createObservableCounter=function(e,r){return xge},t.prototype.createObservableUpDownCounter=function(e,r){return Ege},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),JP=function(){function t(){}return t}(),dge=function(t){wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(JP),pge=function(t){wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(JP),fge=function(t){wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(JP),ZP=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),mge=function(t){wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ZP),hge=function(t){wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ZP),gge=function(t){wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ZP),e1=new uge,vge=new dge,yge=new fge,_ge=new pge,xge=new mge,bge=new hge,Ege=new gge});var Kb,c6=k(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(Kb||(Kb={}))});var Yb,Qb,r1=k(()=>{Yb={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},Qb={set:function(t,e,r){t!=null&&(t[e]=r)}}});var Cge,Sge,l6,u6=k(()=>{hy();Cge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Sge=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},l6=function(){function t(){}return t.prototype.active=function(){return Wb},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,Sge([n],Cge(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}()});var Tge,Ige,n1,wge,Vl,gy=k(()=>{u6();Qd();Xd();Tge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Ige=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},n1="context",wge=new l6,Vl=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return xa(n1,e,ri.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,Ige([e,r,n],Tge(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return po(n1)||wge},t.prototype.disable=function(){this._getContextManager().disable(),ba(n1,ri.instance())},t}()});var qr,i1=k(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(qr||(qr={}))});var vy,yy,Am,Xb=k(()=>{i1();vy="0000000000000000",yy="00000000000000000000000000000000",Am={traceId:yy,spanId:vy,traceFlags:qr.NONE}});var Gl,Jb=k(()=>{Xb();Gl=function(){function t(e){e===void 0&&(e=Am),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}()});function Zb(t){return t.getValue(o1)||void 0}function d6(){return Zb(Vl.getInstance().active())}function _y(t,e){return t.setValue(o1,e)}function p6(t){return t.deleteValue(o1)}function f6(t,e){return _y(t,new Gl(e))}function eE(t){var e;return(e=Zb(t))===null||e===void 0?void 0:e.spanContext()}var o1,s1=k(()=>{hy();Jb();gy();o1=Ea("OpenTelemetry Context Key SPAN")});function Jd(t){return Age.test(t)&&t!==yy}function a1(t){return Rge.test(t)&&t!==vy}function Ko(t){return Jd(t.traceId)&&a1(t.spanId)}function m6(t){return new Gl(t)}var Age,Rge,tE=k(()=>{Xb();Jb();Age=/^([0-9a-f]{32})$/i,Rge=/^[0-9a-f]{16}$/i});function Pge(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var c1,rE,l1=k(()=>{gy();s1();Jb();tE();c1=Vl.getInstance(),rE=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=c1.active());var i=!!r?.root;if(i)return new Gl;var o=n&&eE(n);return Pge(o)&&Ko(o)?new Gl(o):new Gl},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var l=s??c1.active(),c=this.startSpan(e,o,l),u=_y(l,c);return c1.with(u,a,void 0,c)}},t}()});var kge,nE,u1=k(()=>{l1();kge=new rE,nE=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):kge},t}()});var h6,g6=k(()=>{l1();h6=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new rE},t}()});var Nge,xy,d1=k(()=>{u1();g6();Nge=new h6,xy=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new nE(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Nge},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}()});var Bi,v6=k(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Bi||(Bi={}))});var Rm,y6=k(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Rm||(Rm={}))});var Pm,_6=k(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Pm||(Pm={}))});function x6(t){return Lge.test(t)}function b6(t){return Mge.test(t)&&!Fge.test(t)}var p1,Oge,Dge,Lge,Mge,Fge,E6=k(()=>{p1="[_0-9a-z-*/]",Oge="[a-z]"+p1+"{0,255}",Dge="[a-z0-9]"+p1+"{0,240}@[a-z]"+p1+"{0,13}",Lge=new RegExp("^(?:"+Oge+"|"+Dge+")$"),Mge=/^[ -~]{0,255}[!-~]$/,Fge=/,|=/});var C6,Bge,S6,T6,I6,w6=k(()=>{E6();C6=32,Bge=512,S6=",",T6="=",I6=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+T6+e.get(n)),r},[]).join(S6)},t.prototype._parse=function(e){e.length>Bge||(this._internalState=e.split(S6).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(T6);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);x6(s)&&b6(a)&&r.set(s,a)}return r},new Map),this._internalState.size>C6&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,C6))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function A6(t){return new I6(t)}var R6=k(()=>{w6()});var vi,P6=k(()=>{gy();vi=Vl.getInstance()});var Le,k6=k(()=>{Xd();Le=ri.instance()});var Uge,N6,O6=k(()=>{t1();Uge=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return e1},t}(),N6=new Uge});var f1,D6,L6=k(()=>{O6();Qd();Xd();f1="metrics",D6=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return xa(f1,e,ri.instance())},t.prototype.getMeterProvider=function(){return po(f1)||N6},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){ba(f1,ri.instance())},t}()});var m1,M6=k(()=>{L6();m1=D6.getInstance()});var F6,B6=k(()=>{F6=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}()});function g1(t){return t.getValue(h1)||void 0}function U6(){return g1(Vl.getInstance().active())}function q6(t,e){return t.setValue(h1,e)}function H6(t){return t.deleteValue(h1)}var h1,j6=k(()=>{gy();hy();h1=Ea("OpenTelemetry Baggage Key")});var v1,qge,V6,G6=k(()=>{Qd();B6();r1();j6();QP();Xd();v1="propagation",qge=new F6,V6=function(){function t(){this.createBaggage=i6,this.getBaggage=g1,this.getActiveBaggage=U6,this.setBaggage=q6,this.deleteBaggage=H6}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return xa(v1,e,ri.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=Qb),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=Yb),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){ba(v1,ri.instance())},t.prototype._getGlobalPropagator=function(){return po(v1)||qge},t}()});var wc,$6=k(()=>{G6();wc=V6.getInstance()});var y1,z6,W6=k(()=>{Qd();d1();tE();s1();Xd();y1="trace",z6=function(){function t(){this._proxyTracerProvider=new xy,this.wrapSpanContext=m6,this.isSpanContextValid=Ko,this.deleteSpan=p6,this.getSpan=Zb,this.getActiveSpan=d6,this.getSpanContext=eE,this.setSpan=_y,this.setSpanContext=f6}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=xa(y1,this._proxyTracerProvider,ri.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return po(y1)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){ba(y1,ri.instance()),this._proxyTracerProvider=new xy},t}()});var dn,K6=k(()=>{W6();dn=z6.getInstance()});var km={};Jn(km,{DiagConsoleLogger:()=>o6,DiagLogLevel:()=>Zt,INVALID_SPANID:()=>vy,INVALID_SPAN_CONTEXT:()=>Am,INVALID_TRACEID:()=>yy,ProxyTracer:()=>nE,ProxyTracerProvider:()=>xy,ROOT_CONTEXT:()=>Wb,SamplingDecision:()=>Bi,SpanKind:()=>Rm,SpanStatusCode:()=>Pm,TraceFlags:()=>qr,ValueType:()=>Kb,baggageEntryMetadataFromString:()=>zb,context:()=>vi,createContextKey:()=>Ea,createNoopMeter:()=>a6,createTraceState:()=>A6,default:()=>Hge,defaultTextMapGetter:()=>Yb,defaultTextMapSetter:()=>Qb,diag:()=>Le,isSpanContextValid:()=>Ko,isValidSpanId:()=>a1,isValidTraceId:()=>Jd,metrics:()=>m1,propagation:()=>wc,trace:()=>dn});var Hge,_t=k(()=>{QP();hy();s6();$b();t1();c6();r1();u1();d1();v6();y6();_6();i1();R6();tE();Xb();P6();k6();M6();$6();K6();Hge={context:vi,diag:Le,metrics:m1,propagation:wc,trace:dn}});function by(t){return t.setValue(_1,!0)}function jge(t){return t.deleteValue(_1)}function Zd(t){return t.getValue(_1)===!0}var _1,Ey=k(()=>{_t();_1=Ea("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var Y6,iE,Nm,oE,Q6,X6,J6,x1=k(()=>{Y6="=",iE=";",Nm=",",oE="baggage",Q6=180,X6=4096,J6=8192});var C1={};Jn(C1,{getKeyPairs:()=>E1,parseKeyPairsIntoRecord:()=>Gge,parsePairKeyValue:()=>sE,serializeKeyPairs:()=>b1});function b1(t){return t.reduce(function(e,r){var n=""+e+(e!==""?Nm:"")+r;return n.length>J6?e:n},"")}function E1(t){return t.getAllEntries().map(function(e){var r=Vge(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=iE+i.metadata.toString()),o})}function sE(t){var e=t.split(iE);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Y6);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),s;return e.length>0&&(s=zb(e.join(iE))),{key:i,value:o,metadata:s}}}}}function Gge(t){return typeof t!="string"||t.length===0?{}:t.split(Nm).map(function(e){return sE(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var Vge,S1=k(()=>{_t();x1();Vge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});var T1,Z6=k(()=>{_t();Ey();x1();S1();T1=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=wc.getBaggage(e);if(!(!i||Zd(e))){var o=E1(i).filter(function(a){return a.length<=X6}).slice(0,Q6),s=b1(o);s.length>0&&n.set(r,oE,s)}},t.prototype.extract=function(e,r,n){var i=n.get(r,oE),o=Array.isArray(i)?i.join(Nm):i;if(!o)return e;var s={};if(o.length===0)return e;var a=o.split(Nm);return a.forEach(function(l){var c=sE(l);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),s[c.key]=u}}),Object.entries(s).length===0?e:wc.setBaggage(e,wc.createBaggage(s))},t.prototype.fields=function(){return[oE]},t}()});var $ge,eG=k(()=>{$ge=function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t}()});function ep(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=tG(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=zge(o.value,2),a=s[0],l=s[1];if(!rG(a)){Le.warn("Invalid attribute key: "+a);continue}if(!aE(l)){Le.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(l)?n[a]=l.slice():n[a]=l}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function rG(t){return typeof t=="string"&&t.length>0}function aE(t){return t==null?!0:Array.isArray(t)?Wge(t):nG(t)}function Wge(t){var e,r,n;try{for(var i=tG(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!n){if(nG(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function nG(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var tG,zge,iG=k(()=>{_t();tG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zge=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});function I1(){return function(t){Le.error(Kge(t))}}function Kge(t){return typeof t=="string"?t:JSON.stringify(Yge(t))}function Yge(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var w1=k(()=>{_t()});function Qge(t){oG=t}function Ui(t){try{oG(t)}catch{}}var oG,A1=k(()=>{w1();oG=I1()});var fo,R1=k(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(fo||(fo={}))});var sG,aG=k(()=>{sG=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function Zge(t){return Jge.indexOf(t)>-1}function tve(t){return eve.indexOf(t)>-1}function nve(t){return rve.indexOf(t)>-1}function ive(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function ove(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function sve(t,e,r,n){n===void 0&&(n=Xge);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}function cve(t,e,r){var n=r[t];if(typeof n=="string"){var i=ave[n.toUpperCase()];i!=null&&(e[t]=i)}}function Cy(t){var e={};for(var r in cE){var n=r;switch(n){case"OTEL_LOG_LEVEL":cve(n,e,t);break;default:if(Zge(n))ive(n,e,t);else if(tve(n))ove(n,e,t);else if(nve(n))sve(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function P1(){return typeof process<"u"&&process&&process.env?Cy(process.env):Cy(sG)}var Xge,Jge,eve,rve,Om,Dm,cG,lG,cE,ave,k1=k(()=>{_t();R1();aG();Xge=",",Jge=["OTEL_SDK_DISABLED"];eve=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];rve=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];Om=1/0,Dm=128,cG=128,lG=128,cE={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Zt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Om,OTEL_ATTRIBUTE_COUNT_LIMIT:Dm,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Om,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Dm,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Om,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Dm,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:cG,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:lG,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:fo.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};ave={ALL:Zt.ALL,VERBOSE:Zt.VERBOSE,DEBUG:Zt.DEBUG,INFO:Zt.INFO,WARN:Zt.WARN,ERROR:Zt.ERROR,NONE:Zt.NONE}});function pn(){var t=Cy(process.env);return Object.assign({HOSTNAME:uG.hostname()},cE,t)}var uG,dG=k(()=>{uG=Te(require("os"));k1()});var lve,pG=k(()=>{lve=typeof globalThis=="object"?globalThis:global});function fG(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function pve(t){var e;t.length===16?e=uve:t.length===32?e=dve:e=Buffer.alloc(t.length/2);for(var r=0,n=0;n<t.length;n+=2){var i=fG(t.charCodeAt(n)),o=fG(t.charCodeAt(n+1));e.writeUInt8(i<<4|o,r++)}return e.toString("base64")}var uve,dve,mG=k(()=>{uve=Buffer.alloc(8),dve=Buffer.alloc(16)});function hG(t){return function(){for(var r=0;r<t/4;r++)lE.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(lE[r]>0);r++)r===t-1&&(lE[t-1]=1);return lE.toString("hex",0,t)}}var fve,gG,mve,lE,vG=k(()=>{fve=8,gG=16,mve=function(){function t(){this.generateTraceId=hG(gG),this.generateSpanId=hG(fve)}return t}(),lE=Buffer.allocUnsafe(gG)});var yG,Ac,_G=k(()=>{yG=require("perf_hooks"),Ac=yG.performance});var N1,uE=k(()=>{N1="1.17.0"});var Rc,hve,gve,vve,yve,_ve,xve,bve,Eve,Cve,Sve,Tve,Ive,wve,xG=k(()=>{Rc={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},hve={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},gve={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},vve={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},yve={INSERT:"insert",EDIT:"edit",DELETE:"delete"},_ve={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},xve={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},bve={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},Eve={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},Cve={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},Sve={QUEUE:"queue",TOPIC:"topic"},Tve={RECEIVE:"receive",PROCESS:"process"},Ive={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},wve={SENT:"SENT",RECEIVED:"RECEIVED"}});var bG=k(()=>{xG()});var ft,Ave,Rve,Pve,kve,Nve,O1,EG=k(()=>{ft={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Ave={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},Rve={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},Pve={EC2:"ec2",FARGATE:"fargate"},kve={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},Nve={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},O1={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var CG=k(()=>{EG()});var D1={};Jn(D1,{AwsEcsLaunchtypeValues:()=>Pve,CloudPlatformValues:()=>Rve,CloudProviderValues:()=>Ave,DbCassandraConsistencyLevelValues:()=>gve,DbSystemValues:()=>hve,FaasDocumentOperationValues:()=>yve,FaasInvokedProviderValues:()=>_ve,FaasTriggerValues:()=>vve,HostArchValues:()=>kve,HttpFlavorValues:()=>Cve,MessageTypeValues:()=>wve,MessagingDestinationKindValues:()=>Sve,MessagingOperationValues:()=>Tve,NetHostConnectionSubtypeValues:()=>Eve,NetHostConnectionTypeValues:()=>bve,NetTransportValues:()=>xve,OsTypeValues:()=>Nve,RpcGrpcStatusCodeValues:()=>Ive,SemanticAttributes:()=>Rc,SemanticResourceAttributes:()=>ft,TelemetrySdkLanguageValues:()=>O1});var As=k(()=>{bG();CG()});var Lm,Sy,SG=k(()=>{uE();As();Sy=(Lm={},Lm[ft.TELEMETRY_SDK_NAME]="opentelemetry",Lm[ft.PROCESS_RUNTIME_NAME]="node",Lm[ft.TELEMETRY_SDK_LANGUAGE]=O1.NODEJS,Lm[ft.TELEMETRY_SDK_VERSION]=N1,Lm)});function L1(t){t.unref()}var TG=k(()=>{});var IG=k(()=>{dG();pG();mG();vG();_G();SG();TG()});var M1=k(()=>{IG()});function Ca(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*Dve);return[r,n]}function Ty(){var t=Ac.timeOrigin;if(typeof t!="number"){var e=Ac;t=e.timing&&e.timing.fetchStart}return t}function pE(t){var e=Ca(Ty()),r=Ca(typeof t=="number"?t:Ac.now());return hE(e,r)}function Lve(t){if(Iy(t))return t;if(typeof t=="number")return t<Ty()?pE(t):Ca(t);if(t instanceof Date)return Ca(t.getTime());throw TypeError("Invalid input type")}function F1(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=dE),[r,n]}function Mve(t){var e=wG,r=""+"0".repeat(e)+t[1]+"Z",n=r.substr(r.length-e-1),i=new Date(t[0]*1e3).toISOString();return i.replace("000Z",n)}function Fve(t){return t[0]*dE+t[1]}function Bve(t){return t[0]*1e3+t[1]/1e6}function fE(t){return t[0]*1e6+t[1]/1e3}function Iy(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function mE(t){return Iy(t)||typeof t=="number"||t instanceof Date}function hE(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=dE&&(r[1]-=dE,r[0]+=1),r}var wG,Ove,Dve,dE,AG=k(()=>{M1();wG=9,Ove=6,Dve=Math.pow(10,Ove),dE=Math.pow(10,wG)});var RG=k(()=>{});var Yo,PG=k(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Yo||(Yo={}))});var Uve,B1,kG=k(()=>{_t();Uve=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B1=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var s=Uve(this._propagators),a=s.next();!a.done;a=s.next()){var l=a.value;try{l.inject(e,r,n)}catch(c){Le.warn("Failed to inject with "+l.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){Le.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}()});function NG(t){return jve.test(t)}function OG(t){return Vve.test(t)&&!Gve.test(t)}var U1,qve,Hve,jve,Vve,Gve,DG=k(()=>{U1="[_0-9a-z-*/]",qve="[a-z]"+U1+"{0,255}",Hve="[a-z0-9]"+U1+"{0,240}@[a-z]"+U1+"{0,13}",jve=new RegExp("^(?:"+qve+"|"+Hve+")$"),Vve=/^[ -~]{0,255}[!-~]$/,Gve=/,|=/});var LG,$ve,MG,FG,q1,H1=k(()=>{DG();LG=32,$ve=512,MG=",",FG="=",q1=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+FG+e.get(n)),r},[]).join(MG)},t.prototype._parse=function(e){e.length>$ve||(this._internalState=e.split(MG).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(FG);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);NG(s)&&OG(a)&&r.set(s,a)}return r},new Map),this._internalState.size>LG&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,LG))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function BG(t){var e=Xve.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var gE,vE,zve,Wve,Kve,Yve,Qve,Xve,j1,UG=k(()=>{_t();Ey();H1();gE="traceparent",vE="tracestate",zve="00",Wve="(?!ff)[\\da-f]{2}",Kve="(?![0]{32})[\\da-f]{32}",Yve="(?![0]{16})[\\da-f]{16}",Qve="[\\da-f]{2}",Xve=new RegExp("^\\s?("+Wve+")-("+Kve+")-("+Yve+")-("+Qve+")(-.*)?\\s?$");j1=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=dn.getSpanContext(e);if(!(!i||Zd(e)||!Ko(i))){var o=zve+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||qr.NONE).toString(16);n.set(r,gE,o),i.traceState&&n.set(r,vE,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,gE);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var s=BG(o);if(!s)return e;s.isRemote=!0;var a=n.get(r,vE);if(a){var l=Array.isArray(a)?a.join(","):a;s.traceState=new q1(typeof l=="string"?l:void 0)}return dn.setSpanContext(e,s)},t.prototype.fields=function(){return[gE,vE]},t}()});var qG=k(()=>{});function Jve(t,e){return t.setValue(G1,e)}function Zve(t){return t.deleteValue(G1)}function eye(t){return t.getValue(G1)}var G1,V1,HG=k(()=>{_t();G1=Ea("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(V1||(V1={}))});var yE,$1=k(()=>{_t();yE=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Bi.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var wy,z1=k(()=>{_t();wy=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Bi.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var tye,jG=k(()=>{_t();A1();$1();z1();tye=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(Ui(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new wy),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new wy,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new yE,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new wy,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new yE}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=dn.getSpanContext(e);return!a||!Ko(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&qr.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&qr.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var rye,VG=k(()=>{_t();rye=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Jd(r)&&this._accumulate(r)<this._upperBound?Bi.RECORD_AND_SAMPLED:Bi.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function lye(t,e){return function(r){return t(e(r))}}function W1(t){if(!uye(t)||dye(t)!==nye)return!1;var e=cye(t);if(e===null)return!0;var r=zG.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&GG.call(r)===aye}function uye(t){return t!=null&&typeof t=="object"}function dye(t){return t==null?t===void 0?oye:iye:tp&&tp in Object(t)?pye(t):fye(t)}function pye(t){var e=zG.call(t,tp),r=t[tp],n=!1;try{t[tp]=void 0,n=!0}catch{}var i=WG.call(t);return n&&(e?t[tp]=r:delete t[tp]),i}function fye(t){return WG.call(t)}var nye,iye,oye,sye,GG,aye,cye,$G,zG,tp,WG,KG=k(()=>{nye="[object Object]",iye="[object Null]",oye="[object Undefined]",sye=Function.prototype,GG=sye.toString,aye=GG.call(Object),cye=lye(Object.getPrototypeOf,Object),$G=Object.prototype,zG=$G.hasOwnProperty,tp=Symbol?Symbol.toStringTag:void 0,WG=$G.toString});function Y1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=QG(r,t.shift(),0,n);return r}function K1(t){return xE(t)?t.slice():t}function QG(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>mye)){if(r++,_E(t)||_E(e)||XG(e))i=K1(e);else if(xE(t)){if(i=t.slice(),xE(e))for(var o=0,s=e.length;o<s;o++)i.push(K1(e[o]));else if(Ay(e))for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var l=a[o];i[l]=K1(e[l])}}else if(Ay(t))if(Ay(e)){if(!hye(t,e))return e;i=Object.assign({},t);for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var l=a[o],c=e[l];if(_E(c))typeof c>"u"?delete i[l]:i[l]=c;else{var u=i[l],d=c;if(YG(t,l,n)||YG(e,l,n))delete i[l];else{if(Ay(u)&&Ay(d)){var p=n.get(u)||[],f=n.get(d)||[];p.push({obj:t,key:l}),f.push({obj:e,key:l}),n.set(u,p),n.set(d,f)}i[l]=QG(i[l],c,r,n)}}}}else i=e;return i}}function YG(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var s=n[i];if(s.key===e&&s.obj===t)return!0}return!1}function xE(t){return Array.isArray(t)}function XG(t){return typeof t=="function"}function Ay(t){return!_E(t)&&!xE(t)&&!XG(t)&&typeof t=="object"}function _E(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function hye(t,e){return!(!W1(t)||!W1(e))}var mye,JG=k(()=>{KG();mye=20});function vye(t,e){var r,n=new Promise(function(o,s){r=setTimeout(function(){s(new ZG("Operation timed out."))},e)});return Promise.race([t,n]).then(function(i){return clearTimeout(r),i},function(i){throw clearTimeout(r),i})}var gye,ZG,e5=k(()=>{gye=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZG=function(t){gye(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error)});function t5(t,e){return typeof e=="string"?t===e:!!t.match(e)}function _ye(t,e){var r,n;if(!e)return!1;try{for(var i=yye(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t5(t,s))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var yye,r5=k(()=>{yye=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function xye(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var n5=k(()=>{});var i5,o5=k(()=>{i5=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}()});var bye,Eye,Ry,s5=k(()=>{o5();bye=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Eye=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Ry=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new i5}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Eye([this._that],bye(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}()});function a5(t,e){return new Promise(function(r){vi.with(by(vi.active()),function(){t.export(e,function(n){r(n)})})})}var c5=k(()=>{_t();Ey()});var l5={};Jn(l5,{AlwaysOffSampler:()=>yE,AlwaysOnSampler:()=>wy,AnchoredClock:()=>$ge,BindOnceFuture:()=>Ry,CompositePropagator:()=>B1,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>Dm,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>Om,DEFAULT_ENVIRONMENT:()=>cE,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>cG,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>lG,ExportResultCode:()=>Yo,ParentBasedSampler:()=>tye,RPCType:()=>V1,RandomIdGenerator:()=>mve,SDK_INFO:()=>Sy,TRACE_PARENT_HEADER:()=>gE,TRACE_STATE_HEADER:()=>vE,TimeoutError:()=>ZG,TraceIdRatioBasedSampler:()=>rye,TraceState:()=>q1,TracesSamplerValues:()=>fo,VERSION:()=>N1,W3CBaggagePropagator:()=>T1,W3CTraceContextPropagator:()=>j1,_globalThis:()=>lve,addHrTimes:()=>hE,baggageUtils:()=>C1,callWithTimeout:()=>vye,deleteRPCMetadata:()=>Zve,getEnv:()=>pn,getEnvWithoutDefaults:()=>P1,getRPCMetadata:()=>eye,getTimeOrigin:()=>Ty,globalErrorHandler:()=>Ui,hexToBase64:()=>pve,hrTime:()=>pE,hrTimeDuration:()=>F1,hrTimeToMicroseconds:()=>fE,hrTimeToMilliseconds:()=>Bve,hrTimeToNanoseconds:()=>Fve,hrTimeToTimeStamp:()=>Mve,internal:()=>Q1,isAttributeKey:()=>rG,isAttributeValue:()=>aE,isTimeInput:()=>mE,isTimeInputHrTime:()=>Iy,isTracingSuppressed:()=>Zd,isUrlIgnored:()=>_ye,isWrapped:()=>xye,loggingErrorHandler:()=>I1,merge:()=>Y1,millisToHrTime:()=>Ca,otperformance:()=>Ac,parseEnvironment:()=>Cy,parseTraceParent:()=>BG,sanitizeAttributes:()=>ep,setGlobalErrorHandler:()=>Qge,setRPCMetadata:()=>Jve,suppressTracing:()=>by,timeInputToHrTime:()=>Lve,unrefTimer:()=>L1,unsuppressTracing:()=>jge,urlMatches:()=>t5});var Q1,yi=k(()=>{Z6();eG();iG();A1();w1();AG();RG();PG();uE();S1();M1();kG();UG();qG();HG();$1();z1();jG();VG();Ey();H1();k1();JG();R1();e5();r5();n5();s5();uE();c5();Q1={_export:a5}});var u5,d5=k(()=>{u5="exception"});var Cye,Sye,X1,J1=k(()=>{_t();yi();As();d5();Cye=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sye=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},X1=function(){function t(e,r,n,i,o,s,a,l,c){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Pm.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a;var u=Date.now();this._performanceStartTime=Ac.now(),this._performanceOffset=u-(this._performanceStartTime+Ty()),this._startTimeProvided=l!=null,this.startTime=this._getTime(l??u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(Le.warn("Invalid attribute key: "+e),this):aE(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(Le.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=Cye(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=Sye(o.value,2),a=s[0],l=s[1];this.setAttribute(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return Le.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(Le.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),mE(r)&&(mE(n)||(n=r),r=void 0);var i=ep(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){Le.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=F1(this.startTime,this.endTime),this._duration[0]<0&&(Le.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<Ac.now())return pE(e+this._performanceOffset);if(typeof e=="number")return Ca(e);if(e instanceof Date)return Ca(e.getTime());if(Iy(e))return e;if(this._startTimeProvided)return Ca(Date.now());var r=Ac.now()-this._performanceStartTime;return hE(this.startTime,Ca(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[Rc.EXCEPTION_MESSAGE]=e:e&&(e.code?n[Rc.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[Rc.EXCEPTION_TYPE]=e.name),e.message&&(n[Rc.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[Rc.EXCEPTION_STACKTRACE]=e.stack)),n[Rc.EXCEPTION_TYPE]||n[Rc.EXCEPTION_MESSAGE]?this.addEvent(u5,n,r):Le.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&Le.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(Le.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}()});var Sa,Py=k(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Sa||(Sa={}))});var rp,bE=k(()=>{Py();rp=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Sa.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var Pc,EE=k(()=>{Py();Pc=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Sa.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var ky,Z1=k(()=>{_t();yi();bE();EE();ky=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(Ui(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Pc),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new Pc,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new rp,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new Pc,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new rp}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=dn.getSpanContext(e);return!a||!Ko(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&qr.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&qr.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var CE,ek=k(()=>{_t();Py();CE=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Jd(r)&&this._accumulate(r)<this._upperBound?Sa.RECORD_AND_SAMPLED:Sa.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function SE(){return{sampler:tk(Tye),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:pn().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:pn().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:pn().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:pn().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:pn().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:pn().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:pn().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:pn().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function tk(t){switch(t===void 0&&(t=pn()),t.OTEL_TRACES_SAMPLER){case fo.AlwaysOn:return new Pc;case fo.AlwaysOff:return new rp;case fo.ParentBasedAlwaysOn:return new ky({root:new Pc});case fo.ParentBasedAlwaysOff:return new ky({root:new rp});case fo.TraceIdRatio:return new CE(p5(t));case fo.ParentBasedTraceIdRatio:return new ky({root:new CE(p5(t))});default:return Le.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Iye+'".'),new Pc}}function p5(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return Le.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Mm+"."),Mm;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(Le.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Mm+"."),Mm):e<0||e>1?(Le.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Mm+"."),Mm):e}var Tye,Iye,Mm,rk=k(()=>{_t();yi();bE();EE();Z1();ek();Tye=pn(),Iye=fo.AlwaysOn,Mm=1});function f5(t){var e={sampler:tk()},r=SE(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function m5(t){var e,r,n,i,o,s,a,l,c,u,d,p,f=Object.assign({},t.spanLimits),m=P1();return f.attributeCountLimit=(s=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:Dm,f.attributeValueLengthLimit=(p=(d=(u=(l=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&l!==void 0?l:(c=t.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&u!==void 0?u:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:Om,Object.assign({},t,{spanLimits:f})}var nk=k(()=>{rk();yi()});var h5,g5=k(()=>{_t();yi();h5=function(){function t(e,r){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=pn();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Ry(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Le.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&qr.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Le.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Le.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);vi.with(by(vi.active()),function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),s=function(){return e._exporter.export(o,function(l){var c;clearTimeout(i),l.code===Yo.SUCCESS?r():n((c=l.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(l){return l.resource}).filter(function(l){return l.asyncAttributesPending});a.length===0?s():Promise.all(a.map(function(l){var c;return(c=l.waitForAsyncAttributes)===null||c===void 0?void 0:c.call(l)})).then(s,function(l){Ui(l),n(l)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){Ui(r)})},this._scheduledDelayMillis),L1(this._timer))},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}()});var wye,ik,v5=k(()=>{g5();wye=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ik=function(t){wye(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e}(h5)});function y5(t){return function(){for(var r=0;r<t/4;r++)TE.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(TE[r]>0);r++)r===t-1&&(TE[t-1]=1);return TE.toString("hex",0,t)}}var Aye,_5,ok,TE,x5=k(()=>{Aye=8,_5=16,ok=function(){function t(){this.generateTraceId=y5(_5),this.generateSpanId=y5(Aye)}return t}(),TE=Buffer.allocUnsafe(_5)});var b5=k(()=>{v5();x5()});var IE=k(()=>{b5()});var sk,E5=k(()=>{_t();yi();J1();nk();IE();sk=function(){function t(e,r,n){this._tracerProvider=n;var i=f5(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new ok,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,s;r===void 0&&(r={}),n===void 0&&(n=vi.active()),r.root&&(n=dn.deleteSpan(n));var a=dn.getSpan(n);if(Zd(n)){Le.debug("Instrumentation suppressed, returning Noop Span");var l=dn.wrapSpanContext(Am);return l}var c=a?.spanContext(),u=this._idGenerator.generateSpanId(),d,p,f;!c||!dn.isSpanContextValid(c)?d=this._idGenerator.generateTraceId():(d=c.traceId,p=c.traceState,f=c.spanId);var m=(i=r.kind)!==null&&i!==void 0?i:Rm.INTERNAL,h=((o=r.links)!==null&&o!==void 0?o:[]).map(function(R){return{context:R.context,attributes:ep(R.attributes)}}),g=ep(r.attributes),v=this._sampler.shouldSample(n,d,e,m,g,h);p=(s=v.traceState)!==null&&s!==void 0?s:p;var y=v.decision===Bi.RECORD_AND_SAMPLED?qr.SAMPLED:qr.NONE,_={traceId:d,spanId:u,traceFlags:y,traceState:p};if(v.decision===Bi.NOT_RECORD){Le.debug("Recording is off, propagating context in a non-recording span");var l=dn.wrapSpanContext(_);return l}var T=new X1(this,n,e,_,m,f,h,r.startTime),I=ep(Object.assign(g,v.attributes));return T.setAttributes(I),T},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var l=s??vi.active(),c=this.startSpan(e,o,l),u=dn.setSpan(l,c);return vi.with(u,a,void 0,c)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}()});function C5(){return"unknown_service:"+process.argv0}var S5=k(()=>{});var T5,I5,ak=k(()=>{T5=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},I5=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});var w5,A5,Fm,wE=k(()=>{w5=Te(require("child_process")),A5=Te(require("util")),Fm=A5.promisify(w5.exec)});var R5={};Jn(R5,{getMachineId:()=>kye});function kye(){return Rye(this,void 0,void 0,function(){var t,e,r,n;return Pye(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Fm('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return t=i.sent(),e=t.stdout.split(`
`).find(function(o){return o.includes("IOPlatformUUID")}),e?(r=e.split('" = "'),r.length===2?[2,r[1].slice(0,-1)]:[3,3]):[2,""];case 2:return n=i.sent(),Le.debug("error reading machine id: "+n),[3,3];case 3:return[2,""]}})})}var Rye,Pye,P5=k(()=>{wE();_t();Rye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Pye=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var N5={};Jn(N5,{getMachineId:()=>Lye});function Lye(){return Nye(this,void 0,void 0,function(){var t,e,r,n,i,o,s,a,l;return Oye(this,function(c){switch(c.label){case 0:t=["/etc/machine-id","/var/lib/dbus/machine-id"],c.label=1;case 1:c.trys.push([1,8,9,10]),e=Dye(t),r=e.next(),c.label=2;case 2:if(r.done)return[3,7];n=r.value,c.label=3;case 3:return c.trys.push([3,5,,6]),[4,k5.promises.readFile(n,{encoding:"utf8"})];case 4:return i=c.sent(),[2,i.trim()];case 5:return o=c.sent(),Le.debug("error reading machine id: "+o),[3,6];case 6:return r=e.next(),[3,2];case 7:return[3,10];case 8:return s=c.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(l=e.return)&&l.call(e)}finally{if(a)throw a.error}return[7];case 10:return[2,""]}})})}var k5,Nye,Oye,Dye,O5=k(()=>{k5=require("fs");_t();Nye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Oye=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Dye=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});var L5={};Jn(L5,{getMachineId:()=>Bye});function Bye(){return Mye(this,void 0,void 0,function(){var e,t,e,r;return Fye(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,D5.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return e=n.sent(),[2,e.trim()];case 2:return t=n.sent(),Le.debug("error reading machine id: "+t),[3,3];case 3:return n.trys.push([3,5,,6]),[4,Fm("kenv -q smbios.system.uuid")];case 4:return e=n.sent(),[2,e.stdout.trim()];case 5:return r=n.sent(),Le.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})})}var D5,Mye,Fye,M5=k(()=>{D5=require("fs");wE();_t();Mye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Fye=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var F5={};Jn(F5,{getMachineId:()=>Hye});function Hye(){return Uye(this,void 0,void 0,function(){var t,e,r,n,i;return qye(this,function(o){switch(o.label){case 0:t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe",AE.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in AE.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Fm(e+" "+t)];case 2:return r=o.sent(),n=r.stdout.split("REG_SZ"),n.length===2?[2,n[1].trim()]:[3,4];case 3:return i=o.sent(),Le.debug("error reading machine id: "+i),[3,4];case 4:return[2,""]}})})}var AE,Uye,qye,B5=k(()=>{AE=Te(require("process"));wE();_t();Uye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},qye=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var U5={};Jn(U5,{getMachineId:()=>Gye});function Gye(){return jye(this,void 0,void 0,function(){return Vye(this,function(t){return Le.debug("could not read machine-id: unsupported platform"),[2,""]})})}var jye,Vye,q5=k(()=>{_t();jye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Vye=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var H5,np,j5=k(()=>{H5=Te(require("process"));switch(H5.platform){case"darwin":np=(P5(),En(R5)).getMachineId;break;case"linux":np=(O5(),En(N5)).getMachineId;break;case"freebsd":np=(M5(),En(L5)).getMachineId;break;case"win32":np=(B5(),En(F5)).getMachineId;break;default:np=(q5(),En(U5)).getMachineId}});var RE,$ye,V5,ck=k(()=>{As();Bm();RE=require("os");ak();j5();$ye=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[ft.HOST_NAME]=(0,RE.hostname)(),r[ft.HOST_ARCH]=T5((0,RE.arch)()),r);return new _i(n,this._getAsyncAttributes())},t.prototype._getAsyncAttributes=function(){return np().then(function(e){var r={};return e&&(r[ft.HOST_ID]=e),r})},t}(),V5=new $ye});var zye,PGe,G5=k(()=>{ck();zye=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(V5.detect(e))},t}(),PGe=new zye});var PE,Wye,$5,lk=k(()=>{As();Bm();PE=require("os");ak();Wye=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[ft.OS_TYPE]=I5((0,PE.platform)()),r[ft.OS_VERSION]=(0,PE.release)(),r);return new _i(n)},t}(),$5=new Wye});var Kye,FGe,z5=k(()=>{lk();Kye=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve($5.detect(e))},t}(),FGe=new Kye});var Y5,W5,K5,Yye,Q5,uk=k(()=>{_t();As();Bm();Y5=Te(require("os")),W5=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},K5=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Yye=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[ft.PROCESS_PID]=process.pid,r[ft.PROCESS_EXECUTABLE_NAME]=process.title,r[ft.PROCESS_EXECUTABLE_PATH]=process.execPath,r[ft.PROCESS_COMMAND_ARGS]=K5(K5([process.argv[0]],W5(process.execArgv),!1),W5(process.argv.slice(1)),!1),r[ft.PROCESS_RUNTIME_VERSION]=process.versions.node,r[ft.PROCESS_RUNTIME_NAME]="nodejs",r[ft.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r);process.argv.length>1&&(n[ft.PROCESS_COMMAND]=process.argv[1]);try{var i=Y5.userInfo();n[ft.PROCESS_OWNER]=i.username}catch(o){Le.debug("error obtaining process owner: "+o)}return new _i(n)},t}(),Q5=new Yye});var Qye,GGe,X5=k(()=>{uk();Qye=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Q5.detect(e))},t}(),GGe=new Qye});var J5=k(()=>{S5();G5();z5();ck();lk();X5();uk()});var dk=k(()=>{J5()});var $l,Xye,Jye,Zye,_i,Bm=k(()=>{_t();As();yi();dk();$l=function(){return $l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$l.apply(this,arguments)},Xye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Jye=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Zye=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},_i=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return Le.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[ft.SERVICE_NAME]=C5(),e[ft.TELEMETRY_SDK_LANGUAGE]=Sy[ft.TELEMETRY_SDK_LANGUAGE],e[ft.TELEMETRY_SDK_NAME]=Sy[ft.TELEMETRY_SDK_NAME],e[ft.TELEMETRY_SDK_VERSION]=Sy[ft.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Le.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return Xye(this,void 0,void 0,function(){return Jye(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=$l($l({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,l=Zye(s,2),c=l[0],u=l[1];return $l($l($l($l({},r._syncAttributes),c),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),u)});return new t(i,o)},t.EMPTY=new t({}),t}()});var Z5=k(()=>{});var e8=k(()=>{});var t8=k(()=>{});var e_e,c5e,r8=k(()=>{kE();e_e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(n8.detect(e))},t}(),c5e=new e_e});var t_e,r_e,n_e,i8,pk=k(()=>{_t();yi();As();Bm();t_e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r_e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},n_e=function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(e){var r={},n=pn(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME;if(i)try{var s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(a){Le.debug("EnvDetector failed: "+a.message)}return o&&(r[ft.SERVICE_NAME]=o),new _i(r)},t.prototype._parseResourceAttributes=function(e){var r,n;if(!e)return{};var i={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=t_e(o),a=s.next();!a.done;a=s.next()){var l=a.value,c=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(c.length===2){var u=r_e(c,2),d=u[0],p=u[1];if(d=d.trim(),p=p.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(d))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(p))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[d]=decodeURIComponent(p)}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},t.prototype._isBaggageOctetString=function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},t}(),i8=new n_e});var i_e,g5e,o8=k(()=>{pk();i_e=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(i8.detect(e))},t}(),g5e=new i_e});var fk,o_e,n8,s8=k(()=>{As();kE();_t();fk=function(){return fk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fk.apply(this,arguments)},o_e=function(){function t(){}return t.prototype.detect=function(e){var r,n=typeof navigator<"u";if(!n)return _i.empty();var i=(r={},r[ft.PROCESS_RUNTIME_NAME]="browser",r[ft.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",r[ft.PROCESS_RUNTIME_VERSION]=navigator.userAgent,r);return this._getResourceAttributes(i,e)},t.prototype._getResourceAttributes=function(e,r){return e[ft.PROCESS_RUNTIME_VERSION]===""?(Le.debug("BrowserDetector failed: Unable to find required browser resources. "),_i.empty()):new _i(fk({},e))},t}(),n8=new o_e});var a8=k(()=>{r8();o8();s8();pk()});var c8=k(()=>{});var kE=k(()=>{Bm();Z5();dk();e8();t8();a8();c8()});var NE,l8,u8=k(()=>{yi();NE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l8=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=NE(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(l){Ui(l||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=NE(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(e,r)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=NE(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=NE(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,l){Promise.all(n).then(function(){a()},l)})},t}()});var mk,hk=k(()=>{mk=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}()});var zl,s_e,d8=k(()=>{_t();yi();kE();gk();rk();u8();hk();IE();nk();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(zl||(zl={}));s_e=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=Y1({},SE(),m5(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:_i.empty(),this.resource=_i.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new ik(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new mk}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new sk({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return Le.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new l8(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),dn.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&vi.setGlobalContextManager(e.contextManager),e.propagator&&wc.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=zl.timeout},e);n.forceFlush().then(function(){clearTimeout(s),o!==zl.timeout&&(o=zl.resolved,i(o))}).catch(function(a){clearTimeout(s),o=zl.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==zl.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(pn().OTEL_PROPAGATORS)),n=r.map(function(o){var s=e._getPropagator(o);return s||Le.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new B1({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=pn().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||Le.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new j1}],["baggage",function(){return new T1}]]),t._registeredExporters=new Map,t}()});var a_e,c_e,p8=k(()=>{yi();a_e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c_e=function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:fE(e.startTime),duration:fE(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,i;try{for(var o=a_e(e),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return r({code:Yo.SUCCESS})},t}()});var l_e,u_e,d_e,f8=k(()=>{yi();l_e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},u_e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},d_e=function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:Yo.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,u_e([],l_e(e),!1)),setTimeout(function(){return r({code:Yo.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t}()});var m8=k(()=>{});var p_e,f_e,m_e,h8=k(()=>{_t();yi();p_e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},f_e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},m_e=function(){function t(e){this._exporter=e,this._shutdownOnce=new Ry(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return p_e(this,void 0,void 0,function(){return f_e(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,i;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&qr.SAMPLED){var o=function(){return Q1._export(r._exporter,[e]).then(function(a){var l;a.code!==Yo.SUCCESS&&Ui((l=a.error)!==null&&l!==void 0?l:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){Ui(a)})};if(e.resource.asyncAttributesPending){var s=(i=(n=e.resource).waitForAsyncAttributes)===null||i===void 0?void 0:i.call(n).then(function(){return s!=null&&r._unresolvedExports.delete(s),o()},function(a){return Ui(a)});s!=null&&this._unresolvedExports.add(s)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}()});var g8=k(()=>{});var v8=k(()=>{});var y8=k(()=>{});var _8=k(()=>{});var x8=k(()=>{});var b8={};Jn(b8,{AlwaysOffSampler:()=>rp,AlwaysOnSampler:()=>Pc,BasicTracerProvider:()=>s_e,BatchSpanProcessor:()=>ik,ConsoleSpanExporter:()=>c_e,ForceFlushState:()=>zl,InMemorySpanExporter:()=>d_e,NoopSpanProcessor:()=>mk,ParentBasedSampler:()=>ky,RandomIdGenerator:()=>ok,SamplingDecision:()=>Sa,SimpleSpanProcessor:()=>m_e,Span:()=>X1,TraceIdRatioBasedSampler:()=>CE,Tracer:()=>sk});var gk=k(()=>{E5();d8();IE();p8();f8();m8();h8();g8();hk();bE();EE();Z1();ek();Py();J1();v8();y8();_8();x8()});var C8=x(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.enable=Qo.azureCoreTracing=Qo.AzureMonitorSymbol=void 0;var vk=Dr();Qo.AzureMonitorSymbol="Azure_Monitor_Tracer";var yk="azure-coretracing",E8=!1,h_e=function(t){if(E8)return t;try{var e=(gk(),En(b8)),r=(_t(),En(km)),n=new e.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(t.setTracer){var o=t.setTracer;t.setTracer=function(c){var u=c.startSpan;c.startSpan=function(d,p,f){var m=u.call(this,d,p,f),h=m.end;return m.end=function(){var g=h.apply(this,arguments);return vk.channel.publish(yk,m),g},m},c[Qo.AzureMonitorSymbol]=!0,o.call(this,c)},r.trace.getSpan(r.context.active()),t.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(c){var u=c.getTracer;return c.getTracer=function(d,p){var f=u.call(this,d,p);if(!f[Qo.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,g,v){var y=m.call(this,h,g,v),_=y.end;return y.end=function(){var T=_.apply(this,arguments);return vk.channel.publish(yk,y),T},y},f[Qo.AzureMonitorSymbol]=!0}return f},s.call(this,c)},n.register(),r.trace.getSpan(r.context.active());var a=require("@opentelemetry/instrumentation"),l=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[l.createAzureSdkInstrumentation()]})}E8=!0}catch{}return t};Qo.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:h_e,publisherName:yk};function g_e(){vk.channel.registerMonkeyPatch("@azure/core-tracing",Qo.azureCoreTracing)}Qo.enable=g_e});var T8=x(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.enable=ip.bunyan=void 0;var S8=Dr(),v_e=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),S8.channel.publish("bunyan",{level:r.level,result:o})}return i},t};ip.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:v_e};function y_e(){S8.channel.registerMonkeyPatch("bunyan",ip.bunyan)}ip.enable=y_e});var w8=x(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.enable=op.console=void 0;var _k=Dr(),I8=require("stream"),__e=function(t){var e=new I8.Writable,r=new I8.Writable;e.write=function(c){if(!c)return!0;var u=c.toString();return _k.channel.publish("console",{message:u}),!0},r.write=function(c){if(!c)return!0;var u=c.toString();return _k.channel.publish("console",{message:u,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(c){var u=t[c];u&&(t[c]=function(){if(n[c])try{n[c].apply(n,arguments)}catch{}return u.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var l=a[s];o(l)}return t};op.console={versionSpecifier:">= 4.0.0",patch:__e};function x_e(){_k.channel.registerMonkeyPatch("console",op.console),require("console")}op.enable=x_e});var A8=x(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.enable=sp.mongoCore=void 0;var xk=Dr(),b_e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=xk.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=xk.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};sp.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:b_e};function E_e(){xk.channel.registerMonkeyPatch("mongodb-core",sp.mongoCore)}sp.enable=E_e});var R8=x(xi=>{"use strict";var Um=xi&&xi.__assign||function(){return Um=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Um.apply(this,arguments)};Object.defineProperty(xi,"__esModule",{value:!0});xi.enable=xi.mongo330=xi.mongo3=xi.mongo2=void 0;var ni=Dr(),C_e=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return ni.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=Um(Um({},n),{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return ni.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):ni.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return ni.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):ni.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},S_e=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=ni.channel.bindToContext(function(o){return o()}),r[i.requestId]=Um(Um({},i),{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return ni.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return ni.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},T_e=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=ni.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=ni.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},I_e=function(t){T_e(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=ni.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return ni.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return ni.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};xi.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:C_e};xi.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:S_e};xi.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:I_e};function w_e(){ni.channel.registerMonkeyPatch("mongodb",xi.mongo2),ni.channel.registerMonkeyPatch("mongodb",xi.mongo3),ni.channel.registerMonkeyPatch("mongodb",xi.mongo330)}xi.enable=w_e});var k8=x(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.enable=ap.mysql=void 0;var OE=Dr(),P8=require("path"),A_e=function(t,e){var r=function(l,c){return function(u,d){var p=l[u];p&&(l[u]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var g=arguments[m],v={result:null,startTime:null,startDate:null};typeof g=="function"&&(d?(v.startTime=process.hrtime(),v.startDate=new Date,arguments[m]=OE.channel.bindToContext(d(v,g))):arguments[m]=OE.channel.bindToContext(g));var y=p.apply(this,arguments);return v.result=y,y})}},n=function(l,c){return r(l.prototype,c+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(P8.dirname(e)+"/lib/Connection");i.forEach(function(l){return n(o,"Connection")(l)}),r(o,"Connection")("createQuery",function(l,c){return function(u){var d=process.hrtime(l.startTime),p=d[0]*1e3+d[1]/1e6|0;OE.channel.publish("mysql",{query:l.result,callbackArgs:arguments,err:u,duration:p,time:l.startDate}),c.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(P8.dirname(e)+"/lib/Pool");return s.forEach(function(l){return n(a,"Pool")(l)}),t};ap.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:A_e};function R_e(){OE.channel.registerMonkeyPatch("mysql",ap.mysql)}ap.enable=R_e});var O8=x(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.enable=cp.postgresPool1=void 0;var N8=Dr();function P_e(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=N8.channel.bindToContext(n)),e.apply(this,arguments)},t}cp.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:P_e};function k_e(){N8.channel.registerMonkeyPatch("pg-pool",cp.postgresPool1)}cp.enable=k_e});var L8=x(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.enable=Ta.postgres=Ta.postgres6=void 0;var qm=Dr(),D8=require("events"),bk="postgres";function N_e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime(),u;function d(p){p&&p[n]&&(p=p[n]);var f=qm.channel.bindToContext(function(m,h){var g=process.hrtime(c);if(l.result=h&&{rowCount:h.rowCount,command:h.command},l.error=m,l.duration=Math.ceil(g[0]*1e3+g[1]/1e6),qm.channel.publish(bk,l),m){if(p)return p.apply(this,arguments);u&&u instanceof D8.EventEmitter&&u.emit("error",m)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(f,n,{value:p}),f}catch{return p}}try{typeof o=="string"?s instanceof Array?(l.query.preparable={text:o,args:s},a=d(a)):(l.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?l.query.plan=o.name:o.values instanceof Array?l.query.preparable={text:o.text,args:o.values}:l.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,u=r.apply(this,arguments),u},t}function O_e(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var l=this,c,u,d=!!a,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f,m=process.hrtime();function h(y){y&&y[n]&&(y=y[n]);var _=qm.channel.bindToContext(function(T,I){var R=process.hrtime(m);if(p.result=I&&{rowCount:I.rowCount,command:I.command},p.error=T,p.duration=Math.ceil(R[0]*1e3+R[1]/1e6),qm.channel.publish(bk,p),T){if(y)return y.apply(this,arguments);f&&f instanceof D8.EventEmitter&&f.emit("error",T)}else y&&y.apply(this,arguments)});try{return Object.defineProperty(_,n,{value:y}),_}catch{return y}}try{typeof o=="string"?s instanceof Array?(p.query.preparable={text:o,args:s},d=typeof a=="function",a=d?h(a):a):(p.query.text=o,a?(d=typeof a=="function",a=d?h(a):a):(d=typeof s=="function",s=d?h(s):s)):(typeof o.name=="string"?p.query.plan=o.name:o.values instanceof Array?p.query.preparable={text:o.text,args:o.values}:o.cursor?p.query.text=(c=o.cursor)===null||c===void 0?void 0:c.text:p.query.text=o.text,a?(d=typeof a=="function",a=h(a)):s?(d=typeof s=="function",s=d?h(s):s):(d=typeof o.callback=="function",o.callback=d?h(o.callback):o.callback))}catch{return r.apply(this,arguments)}arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3;try{f=r.apply(this,arguments)}catch(y){throw h()(y,void 0),y}if(!d){if(f instanceof Promise)return f.then(function(y){return h()(void 0,y),new l._Promise(function(_,T){_(y)})}).catch(function(y){return h()(y,void 0),new l._Promise(function(_,T){T(y)})});var g=f.text?f.text:"";if(f.cursor&&(g=(u=f.cursor)===null||u===void 0?void 0:u.text),g){var v={command:g,rowCount:0};h()(void 0,v)}}return f},t}Ta.postgres6={versionSpecifier:"6.*",patch:N_e};Ta.postgres={versionSpecifier:">=7.* <=8.*",patch:O_e,publisherName:bk};function D_e(){qm.channel.registerMonkeyPatch("pg",Ta.postgres6),qm.channel.registerMonkeyPatch("pg",Ta.postgres)}Ta.enable=D_e});var M8=x(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.enable=lp.redis=void 0;var Ek=Dr(),L_e=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=Ek.channel.bindToContext(function(a,l){var c=process.hrtime(o),u=c[0]*1e3+c[1]/1e6|0;Ek.channel.publish("redis",{duration:u,address:i,commandObj:r,err:a,result:l,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};lp.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:L_e};function M_e(){Ek.channel.registerMonkeyPatch("redis",lp.redis)}lp.enable=M_e});var F8=x(kc=>{"use strict";var DE=kc&&kc.__assign||function(){return DE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},DE.apply(this,arguments)};Object.defineProperty(kc,"__esModule",{value:!0});kc.enable=kc.tedious=void 0;var Ck=Dr(),F_e=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return Ck.channel.bindToContext(function(l,c,u){var d=process.hrtime(s);a=DE(DE({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!l&&{rowCount:c,rows:u},query:{text:this.parametersByName.statement.value},error:l,duration:Math.ceil(d[0]*1e3+d[1]/1e6)}),Ck.channel.publish("tedious",a),o.call(this,l,c,u)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};kc.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:F_e};function B_e(){Ck.channel.registerMonkeyPatch("tedious",kc.tedious)}kc.enable=B_e});var B8=x(qi=>{"use strict";var U_e=qi&&qi.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q_e=qi&&qi.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(qi,"__esModule",{value:!0});qi.enable=qi.winston2=qi.winston3=void 0;var LE=Dr(),H_e=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",LE.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},j_e=function(t){var e=function(s,a){var l;return s.config.npm.levels[a]!=null?l="npm":s.config.syslog.levels[a]!=null?l="syslog":l="unknown",l},r=function(s){U_e(a,s);function a(l,c){var u=s.call(this,c)||this;return u.winston=l,u}return a.prototype.log=function(l,c){var u=l.message,d=l.level,p=l.meta,f=q_e(l,["message","level","meta"]);d=typeof Symbol.for=="function"?l[Symbol.for("level")]:d,u=l instanceof Error?l:u;var m=e(this.winston,d);p=p||{};for(var h in f)f.hasOwnProperty(h)&&(p[h]=f[h]);LE.channel.publish("winston",{message:u,level:d,levelKind:m,meta:p}),c()},a}(t.Transport);function n(){var s=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var l in s)s.hasOwnProperty(l)&&(a=a===void 0||s[l]>s[a]?l:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var l;for(var c in a)a.hasOwnProperty(c)&&(l=l===void 0||a[c]>a[l]?c:l);var u=i.apply(this,arguments);u.add(new r(t,{level:l}));var d=u.configure;return u.configure=function(){d.apply(this,arguments),n.apply(this,arguments)},u};var o=t.configure;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};qi.winston3={versionSpecifier:"3.x",patch:j_e};qi.winston2={versionSpecifier:"2.x",patch:H_e};function V_e(){LE.channel.registerMonkeyPatch("winston",qi.winston2),LE.channel.registerMonkeyPatch("winston",qi.winston3)}qi.enable=V_e});var Q8=x(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.enable=er.tedious=er.pgPool=er.pg=er.winston=er.redis=er.mysql=er.mongodb=er.mongodbCore=er.console=er.bunyan=er.azuresdk=void 0;var U8=C8();er.azuresdk=U8;var q8=T8();er.bunyan=q8;var H8=w8();er.console=H8;var j8=A8();er.mongodbCore=j8;var V8=R8();er.mongodb=V8;var G8=k8();er.mysql=G8;var $8=O8();er.pgPool=$8;var z8=L8();er.pg=z8;var W8=M8();er.redis=W8;var K8=F8();er.tedious=K8;var Y8=B8();er.winston=Y8;function G_e(){q8.enable(),H8.enable(),j8.enable(),V8.enable(),G8.enable(),z8.enable(),$8.enable(),W8.enable(),Y8.enable(),U8.enable(),K8.enable()}er.enable=G_e});var BE=x(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.registerContextPreservation=Wl.IsInitialized=void 0;var Sk=dr(),J8=Nb();Wl.IsInitialized=!J8.JsonConfig.getInstance().noDiagnosticChannel;var Tk="DiagnosticChannel";if(Wl.IsInitialized){Rs=Q8(),X8=J8.JsonConfig.getInstance().noPatchModules,ME=X8.split(","),Ik={bunyan:Rs.bunyan,console:Rs.console,mongodb:Rs.mongodb,mongodbCore:Rs.mongodbCore,mysql:Rs.mysql,redis:Rs.redis,pg:Rs.pg,pgPool:Rs.pgPool,winston:Rs.winston,azuresdk:Rs.azuresdk};for(FE in Ik)ME.indexOf(FE)===-1&&(Ik[FE].enable(),Sk.info(Tk,"Subscribed to "+FE+" events"));ME.length>0&&Sk.info(Tk,"Some modules will not be patched",ME)}else Sk.info(Tk,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Rs,X8,ME,Ik,FE;function $_e(t){if(Wl.IsInitialized){var e=Dr();e.channel.addContextPreservation(t)}}Wl.registerContextPreservation=$_e});var Hm=x((D8e,Z8)=>{"use strict";Z8.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Bn=x((Rk,e$)=>{"use strict";var Yl=Rk&&Rk.__assign||function(){return Yl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Yl.apply(this,arguments)},z_e=require("http"),wk=require("https"),Ak=require("url"),Kl=require("constants"),up=dr(),jm=Hm(),W_e=Nb(),K_e=function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,l){return String.fromCharCode(a>>l&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){up.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){up.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(l){i=o.constructor.name.toString()+" (Error: "+l.message+")",up.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new Ak.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[jm.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var a=new Ak.URL(r),l=Yl(Yl({},n),{host:a.hostname,port:a.port,path:a.pathname}),c=void 0;if(o&&(a.protocol==="https:"&&(c=e.proxyHttpsUrl||void 0),a.protocol==="http:"&&(c=e.proxyHttpUrl||void 0),c)){c.indexOf("//")===0&&(c="http:"+c);try{var u=new Ak.URL(c);u.protocol==="https:"?(up.info("Proxies that use HTTPS are not supported"),c=void 0):l=Yl(Yl({},l),{host:u.hostname,port:u.port||"80",path:r,headers:Yl(Yl({},l.headers),{Host:a.hostname})})}catch{up.warn("Wrong proxy URL provided")}}var d=a.protocol==="https:"&&!c;return s&&(d&&e.httpsAgent!==void 0?l.agent=e.httpsAgent:!d&&e.httpAgent!==void 0?l.agent=e.httpAgent:d&&(l.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),d?wk.request(l,i):z_e.request(l,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){up.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(jm.requestContextHeader,jm.requestContextSourceKey+"="+e.config.correlationId)},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){up.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=jm.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(jm.requestContextHeader,n+","+jm.requestContextSourceKey+"="+e.config.correlationId)},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!W_e.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new wk.Agent({keepAlive:!0,maxSockets:25,secureOptions:Kl.SSL_OP_NO_SSLv2|Kl.SSL_OP_NO_SSLv3|Kl.SSL_OP_NO_TLSv1|Kl.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new wk.Agent({secureOptions:Kl.SSL_OP_NO_SSLv2|Kl.SSL_OP_NO_SSLv3|Kl.SSL_OP_NO_TLSv1|Kl.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t}();e$.exports=K_e});var dp=x((L8e,t$)=>{"use strict";var Pk=Bn(),Y_e=function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+Pk.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=Pk.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=Pk.randomu32(),t}();t$.exports=Y_e});var UE=x((M8e,r$)=>{"use strict";var Un=Bn(),Q_e=dp(),X_e=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Un.w3cTraceId(),this.spanId=Un.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Un.w3cTraceId(),this.spanId=Un.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Un.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Un.w3cTraceId(),this.spanId=Un.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Un.w3cTraceId(),this.spanId=Un.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Un.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Un.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Un.w3cTraceId().substr(0,16),this.traceId=Un.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=Q_e.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=Un.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Un.w3cTraceId(),this.spanId=Un.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Un.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();r$.exports=X_e});var kk=x((F8e,n$)=>{"use strict";var J_e=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],l=a.trim();if(l.length!==0){var c=l.split("=");if(c.length!==2||!t.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(l)}}return r},t.strict=!0,t}();n$.exports=J_e});var Nc=x((B8e,i$)=>{"use strict";var Z_e=function(){function t(){}return t}();i$.exports=Z_e});var s$=x((Nk,o$)=>{"use strict";var e0e=Nk&&Nk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t0e=Nc(),r0e=function(t){e0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(t0e);o$.exports=r0e});var Ok=x((U8e,a$)=>{"use strict";var n0e=function(){function t(){}return t}();a$.exports=n0e});var l$=x((q8e,c$)=>{"use strict";var i0e=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();c$.exports=i0e});var d$=x((Dk,u$)=>{"use strict";var o0e=Dk&&Dk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s0e=Ok(),a0e=function(t){o0e(e,t);function e(){return t.call(this)||this}return e}(s0e);u$.exports=a0e});var Mk=x((H8e,p$)=>{"use strict";var Lk;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(Lk||(Lk={}));p$.exports=Lk});var m$=x((j8e,f$)=>{"use strict";var c0e=Mk(),l0e=function(){function t(){this.kind=c0e.Measurement}return t}();f$.exports=l0e});var g$=x((V8e,h$)=>{"use strict";var u0e=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();h$.exports=u0e});var Bk=x((Fk,v$)=>{"use strict";var d0e=Fk&&Fk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p0e=Nc(),f0e=function(t){d0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(p0e);v$.exports=f0e});var _$=x((Uk,y$)=>{"use strict";var m0e=Uk&&Uk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h0e=Nc(),g0e=function(t){m0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(h0e);y$.exports=g0e});var b$=x((G8e,x$)=>{"use strict";var v0e=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();x$.exports=v0e});var C$=x((qk,E$)=>{"use strict";var y0e=qk&&qk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_0e=Nc(),x0e=function(t){y0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(_0e);E$.exports=x0e});var T$=x((Hk,S$)=>{"use strict";var b0e=Hk&&Hk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E0e=Nc(),C0e=function(t){b0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(E0e);S$.exports=C0e});var w$=x((jk,I$)=>{"use strict";var S0e=jk&&jk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T0e=Bk(),I0e=function(t){S0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(T0e);I$.exports=I0e});var R$=x((Vk,A$)=>{"use strict";var w0e=Vk&&Vk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A0e=Nc(),R0e=function(t){w0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(A0e);A$.exports=R0e});var k$=x((Gk,P$)=>{"use strict";var P0e=Gk&&Gk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k0e=Nc(),N0e=function(t){P0e(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(k0e);P$.exports=N0e});var O$=x(($8e,N$)=>{"use strict";var $k;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})($k||($k={}));N$.exports=$k});var L$=x((z8e,D$)=>{"use strict";var O0e=function(){function t(){}return t}();D$.exports=O0e});var zk=x(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.AvailabilityData=s$();Yr.Base=Ok();Yr.ContextTagKeys=l$();Yr.Data=d$();Yr.DataPoint=m$();Yr.DataPointType=Mk();Yr.Domain=Nc();Yr.Envelope=g$();Yr.EventData=Bk();Yr.ExceptionData=_$();Yr.ExceptionDetails=b$();Yr.MessageData=C$();Yr.MetricData=T$();Yr.PageViewData=w$();Yr.RemoteDependencyData=R$();Yr.RequestData=k$();Yr.SeverityLevel=O$();Yr.StackFrame=L$()});var M$=x(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.domainSupportsProperties=Vm.RemoteDependencyDataConstants=void 0;var pp=zk(),D0e=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();Vm.RemoteDependencyDataConstants=D0e;function L0e(t){return"properties"in t||t instanceof pp.EventData||t instanceof pp.ExceptionData||t instanceof pp.MessageData||t instanceof pp.MetricData||t instanceof pp.PageViewData||t instanceof pp.RemoteDependencyData||t instanceof pp.RequestData}Vm.domainSupportsProperties=L0e});var B$=x(F$=>{"use strict";Object.defineProperty(F$,"__esModule",{value:!0})});var q$=x(U$=>{"use strict";Object.defineProperty(U$,"__esModule",{value:!0})});var j$=x(H$=>{"use strict";Object.defineProperty(H$,"__esModule",{value:!0})});var G$=x(V$=>{"use strict";Object.defineProperty(V$,"__esModule",{value:!0})});var z$=x($$=>{"use strict";Object.defineProperty($$,"__esModule",{value:!0})});var K$=x(W$=>{"use strict";Object.defineProperty(W$,"__esModule",{value:!0})});var Q$=x(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0})});var J$=x(X$=>{"use strict";Object.defineProperty(X$,"__esModule",{value:!0})});var ez=x(Z$=>{"use strict";Object.defineProperty(Z$,"__esModule",{value:!0})});var rz=x(tz=>{"use strict";Object.defineProperty(tz,"__esModule",{value:!0})});var iz=x(nz=>{"use strict";Object.defineProperty(nz,"__esModule",{value:!0})});var sz=x(oz=>{"use strict";Object.defineProperty(oz,"__esModule",{value:!0})});var az=x(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.TelemetryType=Ps.TelemetryTypeString=Ps.baseTypeToTelemetryType=Ps.telemetryTypeToBaseType=void 0;function M0e(t){switch(t){case qn.Event:return"EventData";case qn.Exception:return"ExceptionData";case qn.Trace:return"MessageData";case qn.Metric:return"MetricData";case qn.Request:return"RequestData";case qn.Dependency:return"RemoteDependencyData";case qn.Availability:return"AvailabilityData";case qn.PageView:return"PageViewData"}}Ps.telemetryTypeToBaseType=M0e;function F0e(t){switch(t){case"EventData":return qn.Event;case"ExceptionData":return qn.Exception;case"MessageData":return qn.Trace;case"MetricData":return qn.Metric;case"RequestData":return qn.Request;case"RemoteDependencyData":return qn.Dependency;case"AvailabilityData":return qn.Availability;case"PageViewData":return qn.PageView}}Ps.baseTypeToTelemetryType=F0e;Ps.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var qn;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(qn=Ps.TelemetryType||(Ps.TelemetryType={}))});var cz=x(fn=>{"use strict";var B0e=fn&&fn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mo=fn&&fn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&B0e(e,t,r)};Object.defineProperty(fn,"__esModule",{value:!0});mo(B$(),fn);mo(q$(),fn);mo(j$(),fn);mo(G$(),fn);mo(z$(),fn);mo(K$(),fn);mo(Q$(),fn);mo(J$(),fn);mo(ez(),fn);mo(rz(),fn);mo(iz(),fn);mo(sz(),fn);mo(az(),fn)});var uz=x(lz=>{"use strict";Object.defineProperty(lz,"__esModule",{value:!0})});var pz=x(dz=>{"use strict";Object.defineProperty(dz,"__esModule",{value:!0})});var mz=x(fz=>{"use strict";Object.defineProperty(fz,"__esModule",{value:!0})});var gz=x(hz=>{"use strict";Object.defineProperty(hz,"__esModule",{value:!0})});var yz=x(vz=>{"use strict";Object.defineProperty(vz,"__esModule",{value:!0})});var xz=x(_z=>{"use strict";Object.defineProperty(_z,"__esModule",{value:!0})});var Ez=x(bz=>{"use strict";Object.defineProperty(bz,"__esModule",{value:!0})});var Sz=x(Cz=>{"use strict";Object.defineProperty(Cz,"__esModule",{value:!0})});var Tz=x(Hi=>{"use strict";var U0e=Hi&&Hi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ql=Hi&&Hi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&U0e(e,t,r)};Object.defineProperty(Hi,"__esModule",{value:!0});Ql(uz(),Hi);Ql(pz(),Hi);Ql(mz(),Hi);Ql(gz(),Hi);Ql(yz(),Hi);Ql(xz(),Hi);Ql(Ez(),Hi);Ql(Sz(),Hi)});var ii=x(Ia=>{"use strict";var q0e=Ia&&Ia.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qE=Ia&&Ia.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&q0e(e,t,r)};Object.defineProperty(Ia,"__esModule",{value:!0});qE(M$(),Ia);qE(zk(),Ia);qE(cz(),Ia);qE(Tz(),Ia)});var Wk=x((_$e,Iz)=>{"use strict";var H0e=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();Iz.exports=H0e});var Sr=x(le=>{"use strict";var ks;Object.defineProperty(le,"__esModule",{value:!0});le.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=le.WEB_INSTRUMENTATION_DEFAULT_SOURCE=le.TIME_SINCE_ENQUEUED=le.ENQUEUED_TIME=le.MessageBusDestination=le.MicrosoftEventHub=le.AzNamespace=le.HttpRequestCookieNames=le.StatsbeatNetworkCategory=le.StatsbeatFeatureType=le.StatsbeatInstrumentation=le.StatsbeatFeature=le.StatsbeatCounter=le.StatsbeatAttach=le.StatsbeatResourceProvider=le.StatsbeatTelemetryName=le.HeartBeatMetricName=le.DependencyTypeName=le.TelemetryTypeStringToQuickPulseDocumentType=le.TelemetryTypeStringToQuickPulseType=le.QuickPulseType=le.QuickPulseDocumentType=le.PerformanceToQuickPulseCounter=le.MetricId=le.PerformanceCounter=le.QuickPulseCounter=le.DEFAULT_LIVEMETRICS_HOST=le.DEFAULT_LIVEMETRICS_ENDPOINT=le.DEFAULT_BREEZE_ENDPOINT=le.APPLICATION_INSIGHTS_SDK_VERSION=void 0;le.APPLICATION_INSIGHTS_SDK_VERSION="2.9.0";le.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";le.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";le.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var oi;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(oi=le.QuickPulseCounter||(le.QuickPulseCounter={}));var HE;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(HE=le.PerformanceCounter||(le.PerformanceCounter={}));var j0e;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(j0e=le.MetricId||(le.MetricId={}));le.PerformanceToQuickPulseCounter=(ks={},ks[HE.PROCESSOR_TIME]=oi.PROCESSOR_TIME,ks[HE.REQUEST_RATE]=oi.REQUEST_RATE,ks[HE.REQUEST_DURATION]=oi.REQUEST_DURATION,ks[oi.COMMITTED_BYTES]=oi.COMMITTED_BYTES,ks[oi.REQUEST_FAILURE_RATE]=oi.REQUEST_FAILURE_RATE,ks[oi.DEPENDENCY_RATE]=oi.DEPENDENCY_RATE,ks[oi.DEPENDENCY_FAILURE_RATE]=oi.DEPENDENCY_FAILURE_RATE,ks[oi.DEPENDENCY_DURATION]=oi.DEPENDENCY_DURATION,ks[oi.EXCEPTION_RATE]=oi.EXCEPTION_RATE,ks);le.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};le.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};le.TelemetryTypeStringToQuickPulseType={EventData:le.QuickPulseType.Event,ExceptionData:le.QuickPulseType.Exception,MessageData:le.QuickPulseType.Trace,MetricData:le.QuickPulseType.Metric,RequestData:le.QuickPulseType.Request,RemoteDependencyData:le.QuickPulseType.Dependency,AvailabilityData:le.QuickPulseType.Availability,PageViewData:le.QuickPulseType.PageView};le.TelemetryTypeStringToQuickPulseDocumentType={EventData:le.QuickPulseDocumentType.Event,ExceptionData:le.QuickPulseDocumentType.Exception,MessageData:le.QuickPulseDocumentType.Trace,MetricData:le.QuickPulseDocumentType.Metric,RequestData:le.QuickPulseDocumentType.Request,RemoteDependencyData:le.QuickPulseDocumentType.Dependency,AvailabilityData:le.QuickPulseDocumentType.Availability,PageViewData:le.QuickPulseDocumentType.PageView};le.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};le.HeartBeatMetricName="HeartbeatState";le.StatsbeatTelemetryName="Statsbeat";le.StatsbeatResourceProvider={appsvc:"appsvc",functions:"functions",vm:"vm",unknown:"unknown"};le.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};le.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var V0e;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.WEB_SNIPPET=4]="WEB_SNIPPET"})(V0e=le.StatsbeatFeature||(le.StatsbeatFeature={}));var G0e;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(G0e=le.StatsbeatInstrumentation||(le.StatsbeatInstrumentation={}));var $0e;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})($0e=le.StatsbeatFeatureType||(le.StatsbeatFeatureType={}));var z0e;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(z0e=le.StatsbeatNetworkCategory||(le.StatsbeatNetworkCategory={}));var W0e;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(W0e=le.HttpRequestCookieNames||(le.HttpRequestCookieNames={}));le.AzNamespace="az.namespace";le.MicrosoftEventHub="Microsoft.EventHub";le.MessageBusDestination="message_bus.destination";le.ENQUEUED_TIME="enqueuedTime";le.TIME_SINCE_ENQUEUED="timeSinceEnqueued";le.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";le.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var Xk=x((Qk,wz)=>{"use strict";var K0e=Qk&&Qk.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jE=require("url"),Y0e=ii(),Kk=Bn(),ho=Hm(),Q0e=Wk(),Xl=dp(),X0e=kk(),Yk=UE(),J0e=dr(),VE=Sr(),Z0e=function(t){K0e(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new jE.URL(this.url).pathname}catch{}var i={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?i.time=r.time:this.startTime&&(i.time=new Date(this.startTime)),r){for(var o in r)i[o]||(i[o]=r[o]);if(r.properties)for(var o in r.properties)i.properties[o]=r.properties[o]}return i},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(VE.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(VE.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(VE.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new jE.URL(this.url).pathname}catch{}var i=this.method;return n&&(i+=" "+n),i},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s="",a="";try{var l=new jE.URL(r.url,o);s=l.pathname,a=l.search}catch{}var c=jE.format({protocol:i,host:r.headers.host,pathname:s,search:a});return c},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===VE.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(o){n="",J0e.warn("Could not decode the auth cookie with error: ",Kk.dumpObj(o))}var i=e.parseId(Kk.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=Kk.getCorrelationContextTarget(r,ho.requestContextSourceKey),r.headers){var i=r.headers[ho.traceStateHeader]?r.headers[ho.traceStateHeader].toString():null,o=r.headers[ho.traceparentHeader]?r.headers[ho.traceparentHeader].toString():null,s=r.headers[ho.requestIdHeader]?r.headers[ho.requestIdHeader].toString():null,a=r.headers[ho.parentIdHeader]?r.headers[ho.parentIdHeader].toString():null,l=r.headers[ho.rootIdHeader]?r.headers[ho.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[ho.correlationContextHeader]?r.headers[ho.correlationContextHeader].toString():null,Xl.w3cEnabled&&(o||i)?(this.traceparent=new Yk(o?o.toString():null),this.tracestate=o&&i&&new X0e(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?Xl.w3cEnabled?(this.traceparent=new Yk(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=Xl.generateRequestId(this.parentId),this.operationId=Xl.getRootId(this.requestId)):Xl.w3cEnabled?(this.traceparent=new Yk,this.traceparent.parentId=a,this.traceparent.legacyRootId=l||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=Xl.generateRequestId(l||this.parentId),this.correlationContextHeader=null,this.operationId=Xl.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=Xl.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new Y0e.ContextTagKeys,e}(Q0e);wz.exports=Z0e});var Gz=x((Qe,Vz)=>{Qe=Vz.exports=Ct;var Wt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Wt=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Wt=function(){};Qe.SEMVER_SPEC_VERSION="2.0.0";var Ny=256,GE=Number.MAX_SAFE_INTEGER||9007199254740991,Jk=16,exe=Ny-6,Oy=Qe.re=[],tr=Qe.safeRe=[],ie=Qe.src=[],xt=0,nN="[a-zA-Z0-9-]",Zk=[["\\s",1],["\\d",Ny],[nN,exe]];function QE(t){for(var e=0;e<Zk.length;e++){var r=Zk[e][0],n=Zk[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Gm=xt++;ie[Gm]="0|[1-9]\\d*";var $m=xt++;ie[$m]="\\d+";var iN=xt++;ie[iN]="\\d*[a-zA-Z-]"+nN+"*";var Rz=xt++;ie[Rz]="("+ie[Gm]+")\\.("+ie[Gm]+")\\.("+ie[Gm]+")";var Pz=xt++;ie[Pz]="("+ie[$m]+")\\.("+ie[$m]+")\\.("+ie[$m]+")";var eN=xt++;ie[eN]="(?:"+ie[Gm]+"|"+ie[iN]+")";var tN=xt++;ie[tN]="(?:"+ie[$m]+"|"+ie[iN]+")";var oN=xt++;ie[oN]="(?:-("+ie[eN]+"(?:\\."+ie[eN]+")*))";var sN=xt++;ie[sN]="(?:-?("+ie[tN]+"(?:\\."+ie[tN]+")*))";var rN=xt++;ie[rN]=nN+"+";var Ly=xt++;ie[Ly]="(?:\\+("+ie[rN]+"(?:\\."+ie[rN]+")*))";var aN=xt++,kz="v?"+ie[Rz]+ie[oN]+"?"+ie[Ly]+"?";ie[aN]="^"+kz+"$";var cN="[v=\\s]*"+ie[Pz]+ie[sN]+"?"+ie[Ly]+"?",lN=xt++;ie[lN]="^"+cN+"$";var Qm=xt++;ie[Qm]="((?:<|>)?=?)";var $E=xt++;ie[$E]=ie[$m]+"|x|X|\\*";var zE=xt++;ie[zE]=ie[Gm]+"|x|X|\\*";var fp=xt++;ie[fp]="[v=\\s]*("+ie[zE]+")(?:\\.("+ie[zE]+")(?:\\.("+ie[zE]+")(?:"+ie[oN]+")?"+ie[Ly]+"?)?)?";var Wm=xt++;ie[Wm]="[v=\\s]*("+ie[$E]+")(?:\\.("+ie[$E]+")(?:\\.("+ie[$E]+")(?:"+ie[sN]+")?"+ie[Ly]+"?)?)?";var Nz=xt++;ie[Nz]="^"+ie[Qm]+"\\s*"+ie[fp]+"$";var Oz=xt++;ie[Oz]="^"+ie[Qm]+"\\s*"+ie[Wm]+"$";var Dz=xt++;ie[Dz]="(?:^|[^\\d])(\\d{1,"+Jk+"})(?:\\.(\\d{1,"+Jk+"}))?(?:\\.(\\d{1,"+Jk+"}))?(?:$|[^\\d])";var XE=xt++;ie[XE]="(?:~>?)";var Km=xt++;ie[Km]="(\\s*)"+ie[XE]+"\\s+";Oy[Km]=new RegExp(ie[Km],"g");tr[Km]=new RegExp(QE(ie[Km]),"g");var txe="$1~",Lz=xt++;ie[Lz]="^"+ie[XE]+ie[fp]+"$";var Mz=xt++;ie[Mz]="^"+ie[XE]+ie[Wm]+"$";var JE=xt++;ie[JE]="(?:\\^)";var Ym=xt++;ie[Ym]="(\\s*)"+ie[JE]+"\\s+";Oy[Ym]=new RegExp(ie[Ym],"g");tr[Ym]=new RegExp(QE(ie[Ym]),"g");var rxe="$1^",Fz=xt++;ie[Fz]="^"+ie[JE]+ie[fp]+"$";var Bz=xt++;ie[Bz]="^"+ie[JE]+ie[Wm]+"$";var uN=xt++;ie[uN]="^"+ie[Qm]+"\\s*("+cN+")$|^$";var dN=xt++;ie[dN]="^"+ie[Qm]+"\\s*("+kz+")$|^$";var mp=xt++;ie[mp]="(\\s*)"+ie[Qm]+"\\s*("+cN+"|"+ie[fp]+")";Oy[mp]=new RegExp(ie[mp],"g");tr[mp]=new RegExp(QE(ie[mp]),"g");var nxe="$1$2$3",Uz=xt++;ie[Uz]="^\\s*("+ie[fp]+")\\s+-\\s+("+ie[fp]+")\\s*$";var qz=xt++;ie[qz]="^\\s*("+ie[Wm]+")\\s+-\\s+("+ie[Wm]+")\\s*$";var Hz=xt++;ie[Hz]="(<|>)?=?\\s*\\*";for(wa=0;wa<xt;wa++)Wt(wa,ie[wa]),Oy[wa]||(Oy[wa]=new RegExp(ie[wa]),tr[wa]=new RegExp(QE(ie[wa])));var wa;Qe.parse=hp;function hp(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ct)return t;if(typeof t!="string"||t.length>Ny)return null;var r=e.loose?tr[lN]:tr[aN];if(!r.test(t))return null;try{return new Ct(t,e)}catch{return null}}Qe.valid=ixe;function ixe(t,e){var r=hp(t,e);return r?r.version:null}Qe.clean=oxe;function oxe(t,e){var r=hp(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Qe.SemVer=Ct;function Ct(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ct){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Ny)throw new TypeError("version is longer than "+Ny+" characters");if(!(this instanceof Ct))return new Ct(t,e);Wt("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?tr[lN]:tr[aN]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>GE||this.major<0)throw new TypeError("Invalid major version");if(this.minor>GE||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>GE||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<GE)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}Ct.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Ct.prototype.toString=function(){return this.version};Ct.prototype.compare=function(t){return Wt("SemVer.compare",this.version,this.options,t),t instanceof Ct||(t=new Ct(t,this.options)),this.compareMain(t)||this.comparePre(t)};Ct.prototype.compareMain=function(t){return t instanceof Ct||(t=new Ct(t,this.options)),zm(this.major,t.major)||zm(this.minor,t.minor)||zm(this.patch,t.patch)};Ct.prototype.comparePre=function(t){if(t instanceof Ct||(t=new Ct(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Wt("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return zm(r,n)}while(++e)};Ct.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Qe.inc=sxe;function sxe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new Ct(t,r).inc(e,n).version}catch{return null}}Qe.diff=axe;function axe(t,e){if(pN(t,e))return null;var r=hp(t),n=hp(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Qe.compareIdentifiers=zm;var Az=/^[0-9]+$/;function zm(t,e){var r=Az.test(t),n=Az.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Qe.rcompareIdentifiers=cxe;function cxe(t,e){return zm(e,t)}Qe.major=lxe;function lxe(t,e){return new Ct(t,e).major}Qe.minor=uxe;function uxe(t,e){return new Ct(t,e).minor}Qe.patch=dxe;function dxe(t,e){return new Ct(t,e).patch}Qe.compare=Oc;function Oc(t,e,r){return new Ct(t,r).compare(new Ct(e,r))}Qe.compareLoose=pxe;function pxe(t,e){return Oc(t,e,!0)}Qe.rcompare=fxe;function fxe(t,e,r){return Oc(e,t,r)}Qe.sort=mxe;function mxe(t,e){return t.sort(function(r,n){return Qe.compare(r,n,e)})}Qe.rsort=hxe;function hxe(t,e){return t.sort(function(r,n){return Qe.rcompare(r,n,e)})}Qe.gt=Dy;function Dy(t,e,r){return Oc(t,e,r)>0}Qe.lt=WE;function WE(t,e,r){return Oc(t,e,r)<0}Qe.eq=pN;function pN(t,e,r){return Oc(t,e,r)===0}Qe.neq=jz;function jz(t,e,r){return Oc(t,e,r)!==0}Qe.gte=fN;function fN(t,e,r){return Oc(t,e,r)>=0}Qe.lte=mN;function mN(t,e,r){return Oc(t,e,r)<=0}Qe.cmp=KE;function KE(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return pN(t,r,n);case"!=":return jz(t,r,n);case">":return Dy(t,r,n);case">=":return fN(t,r,n);case"<":return WE(t,r,n);case"<=":return mN(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Qe.Comparator=Xo;function Xo(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Xo){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Xo))return new Xo(t,e);t=t.trim().split(/\s+/).join(" "),Wt("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===My?this.value="":this.value=this.operator+this.semver.version,Wt("comp",this)}var My={};Xo.prototype.parse=function(t){var e=this.options.loose?tr[uN]:tr[dN],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new Ct(r[2],this.options.loose):this.semver=My};Xo.prototype.toString=function(){return this.value};Xo.prototype.test=function(t){return Wt("Comparator.test",t,this.options.loose),this.semver===My?!0:(typeof t=="string"&&(t=new Ct(t,this.options)),KE(t,this.operator,this.semver,this.options))};Xo.prototype.intersects=function(t,e){if(!(t instanceof Xo))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Tr(t.value,e),YE(this.value,r,e);if(t.operator==="")return r=new Tr(this.value,e),YE(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=KE(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=KE(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||l};Qe.Range=Tr;function Tr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Tr)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Tr(t.raw,e);if(t instanceof Xo)return new Tr(t.value,e);if(!(this instanceof Tr))return new Tr(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Tr.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Tr.prototype.toString=function(){return this.range};Tr.prototype.parseRange=function(t){var e=this.options.loose,r=e?tr[qz]:tr[Uz];t=t.replace(r,Txe),Wt("hyphen replace",t),t=t.replace(tr[mp],nxe),Wt("comparator trim",t,tr[mp]),t=t.replace(tr[Km],txe),t=t.replace(tr[Ym],rxe);var n=e?tr[uN]:tr[dN],i=t.split(" ").map(function(o){return vxe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Xo(o,this.options)},this),i};Tr.prototype.intersects=function(t,e){if(!(t instanceof Tr))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Qe.toComparators=gxe;function gxe(t,e){return new Tr(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function vxe(t,e){return Wt("comp",t,e),t=xxe(t,e),Wt("caret",t),t=yxe(t,e),Wt("tildes",t),t=Exe(t,e),Wt("xrange",t),t=Sxe(t,e),Wt("stars",t),t}function bi(t){return!t||t.toLowerCase()==="x"||t==="*"}function yxe(t,e){return t.trim().split(/\s+/).map(function(r){return _xe(r,e)}).join(" ")}function _xe(t,e){var r=e.loose?tr[Mz]:tr[Lz];return t.replace(r,function(n,i,o,s,a){Wt("tilde",t,n,i,o,s,a);var l;return bi(i)?l="":bi(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":bi(s)?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Wt("replaceTilde pr",a),l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Wt("tilde return",l),l})}function xxe(t,e){return t.trim().split(/\s+/).map(function(r){return bxe(r,e)}).join(" ")}function bxe(t,e){Wt("caret",t,e);var r=e.loose?tr[Bz]:tr[Fz];return t.replace(r,function(n,i,o,s,a){Wt("caret",t,n,i,o,s,a);var l;return bi(i)?l="":bi(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":bi(s)?i==="0"?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Wt("replaceCaret pr",a),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Wt("no pr"),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Wt("caret return",l),l})}function Exe(t,e){return Wt("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return Cxe(r,e)}).join(" ")}function Cxe(t,e){t=t.trim();var r=e.loose?tr[Oz]:tr[Nz];return t.replace(r,function(n,i,o,s,a,l){Wt("xRange",t,n,i,o,s,a,l);var c=bi(o),u=c||bi(s),d=u||bi(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):u?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Wt("xRange return",n),n})}function Sxe(t,e){return Wt("replaceStars",t,e),t.trim().replace(tr[Hz],"")}function Txe(t,e,r,n,i,o,s,a,l,c,u,d,p){return bi(r)?e="":bi(n)?e=">="+r+".0.0":bi(i)?e=">="+r+"."+n+".0":e=">="+e,bi(l)?a="":bi(c)?a="<"+(+l+1)+".0.0":bi(u)?a="<"+l+"."+(+c+1)+".0":d?a="<="+l+"."+c+"."+u+"-"+d:a="<="+a,(e+" "+a).trim()}Tr.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new Ct(t,this.options));for(var e=0;e<this.set.length;e++)if(Ixe(this.set[e],t,this.options))return!0;return!1};function Ixe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Wt(t[n].semver),t[n].semver!==My&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Qe.satisfies=YE;function YE(t,e,r){try{e=new Tr(e,r)}catch{return!1}return e.test(t)}Qe.maxSatisfying=wxe;function wxe(t,e,r){var n=null,i=null;try{var o=new Tr(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new Ct(n,r))}),n}Qe.minSatisfying=Axe;function Axe(t,e,r){var n=null,i=null;try{var o=new Tr(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new Ct(n,r))}),n}Qe.minVersion=Rxe;function Rxe(t,e){t=new Tr(t,e);var r=new Ct("0.0.0");if(t.test(r)||(r=new Ct("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new Ct(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Dy(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Qe.validRange=Pxe;function Pxe(t,e){try{return new Tr(t,e).range||"*"}catch{return null}}Qe.ltr=kxe;function kxe(t,e,r){return hN(t,e,"<",r)}Qe.gtr=Nxe;function Nxe(t,e,r){return hN(t,e,">",r)}Qe.outside=hN;function hN(t,e,r,n){t=new Ct(t,n),e=new Tr(e,n);var i,o,s,a,l;switch(r){case">":i=Dy,o=mN,s=WE,a=">",l=">=";break;case"<":i=WE,o=fN,s=Dy,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(YE(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],d=null,p=null;if(u.forEach(function(f){f.semver===My&&(f=new Xo(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===l||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===l&&s(t,p.semver))return!1}return!0}Qe.prerelease=Oxe;function Oxe(t,e){var r=hp(t,e);return r&&r.prerelease.length?r.prerelease:null}Qe.intersects=Dxe;function Dxe(t,e,r){return t=new Tr(t,r),e=new Tr(e,r),t.intersects(e)}Qe.coerce=Lxe;function Lxe(t){if(t instanceof Ct)return t;if(typeof t!="string")return null;var e=t.match(tr[Dz]);return e==null?null:hp(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var ZE=x((b$e,Wz)=>{"use strict";function gN(t){return typeof t=="function"}var Ei=console.error.bind(console);function Fy(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function By(t){t&&t.logger&&(gN(t.logger)?Ei=t.logger:Ei("new logger isn't a function, not replacing"))}function $z(t,e,r){if(!t||!t[e]){Ei("no original function "+e+" to wrap");return}if(!r){Ei("no wrapper function"),Ei(new Error().stack);return}if(!gN(t[e])||!gN(r)){Ei("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return Fy(i,"__original",n),Fy(i,"__unwrap",function(){t[e]===i&&Fy(t,e,n)}),Fy(i,"__wrapped",!0),Fy(t,e,i),i}function Mxe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Ei("must provide one or more modules to patch"),Ei(new Error().stack);return}if(!(e&&Array.isArray(e))){Ei("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){$z(n,i,r)})})}function zz(t,e){if(!t||!t[e]){Ei("no function to unwrap."),Ei(new Error().stack);return}if(!t[e].__unwrap)Ei("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function Fxe(t,e){if(t)Array.isArray(t)||(t=[t]);else{Ei("must provide one or more modules to patch"),Ei(new Error().stack);return}if(!(e&&Array.isArray(e))){Ei("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){zz(r,n)})})}By.wrap=$z;By.massWrap=Mxe;By.unwrap=zz;By.massUnwrap=Fxe;Wz.exports=By});var rC=x((E$e,Xz)=>{"use strict";var Yz=ZE(),Xm=Yz.wrap,eC=Yz.unwrap,Dc="wrap@before";function tC(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Bxe(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[Dc];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Qz(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function Uxe(t,e,r){var n=Qz(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&Bxe(t,i)}function Kz(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}Xz.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(l,c){var u=Qz(this,l).slice();try{var d=s.call(this,l,c);return Uxe(this,l,u),d}finally{this.on.__wrapped||Xm(this,"on",i),this.addListener.__wrapped||Xm(this,"addListener",i)}}}function o(s){return function(l){if(!this._events||!this._events[l])return s.apply(this,arguments);var c=this._events[l];function u(d){return function(){this._events[l]=c;try{return d.apply(this,arguments)}finally{c=this._events[l],this._events[l]=Kz(c,n)}}}Xm(this,"removeListener",u);try{return this._events[l]=Kz(c,n),s.apply(this,arguments)}finally{eC(this,"removeListener"),this._events[l]=c}}}e[Dc]?typeof e[Dc]=="function"?tC(e,Dc,[e[Dc],r]):Array.isArray(e[Dc])&&e[Dc].push(r):tC(e,Dc,r),e.__wrapped||(Xm(e,"addListener",i),Xm(e,"on",i),Xm(e,"emit",o),tC(e,"__unwrap",function(){eC(e,"addListener"),eC(e,"on"),eC(e,"emit"),delete e[Dc],delete e.__wrapped}),tC(e,"__wrapped",!0))}});var tW=x((C$e,eW)=>{"use strict";var qt=require("util"),Lc=require("assert"),qxe=rC(),fr=require("async_hooks"),Uy="cls@contexts",qy="error@context",Ir=process.env.DEBUG_CLS_HOOKED,Ut=-1;eW.exports={getNamespace:Jz,createNamespace:Hxe,destroyNamespace:Zz,reset:jxe,ERROR_SYMBOL:qy};function Jo(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Jo.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Ir){let n=" ".repeat(this._indent<0?0:this._indent);_r(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Ut+" active:"+qt.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Jo.prototype.get=function(e){if(!this.active){if(Ir){let r=fr.currentId(),n=fr.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);_r(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Ut} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Ir){let r=fr.executionAsyncId(),n=fr.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);_r(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Ut+" active:"+qt.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),_r(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Ut} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${qt.inspect(this.active)}`)}return this.active[e]};Jo.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Ut,Ir){let r=fr.executionAsyncId(),n=fr.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);_r(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Ut} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${qt.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Jo.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Ir){let n=fr.triggerAsyncId(),i=fr.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);_r(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Ut} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${qt.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[qy]=r),n}finally{if(Ir){let n=fr.triggerAsyncId(),i=fr.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);_r(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Ut} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${qt.inspect(r)}`)}this.exit(r)}};Jo.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Jo.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Ir&&_r("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Ut+" len:"+this._set.length+" "+qt.inspect(r)),n.then(i=>(Ir&&_r("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Ut+" len:"+this._set.length+" "+qt.inspect(r)),this.exit(r),i)).catch(i=>{throw i[qy]=r,Ir&&_r("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Ut+" len:"+this._set.length+" "+qt.inspect(r)),this.exit(r),i})};Jo.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[qy]=r),o}finally{n.exit(r)}}};Jo.prototype.enter=function(e){if(Lc.ok(e,"context must be provided for entering"),Ir){let r=fr.executionAsyncId(),n=fr.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);_r(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Ut} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${qt.inspect(e)}`)}this._set.push(this.active),this.active=e};Jo.prototype.exit=function(e){if(Lc.ok(e,"context must be provided for exiting"),Ir){let n=fr.executionAsyncId(),i=fr.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);_r(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Ut} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${qt.inspect(e)}`)}if(this.active===e){Lc.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Ir&&_r("??ERROR?? context exiting but not entered - ignoring: "+qt.inspect(e)),Lc.ok(r>=0,`context not currently entered; can't exit. 
`+qt.inspect(this)+`
`+qt.inspect(e))):(Lc.ok(r,"can't remove top context"),this._set.splice(r,1))};Jo.prototype.bindEmitter=function(e){Lc.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[Uy]||(s[Uy]=Object.create(null)),s[Uy][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[Uy]))return s;let a=s,l=s[Uy];return Object.keys(l).forEach(function(c){let u=l[c];a=u.namespace.bind(a,u.context)}),a}qxe(e,i,o)};Jo.prototype.fromException=function(e){return e[qy]};function Jz(t){return process.namespaces[t]}function Hxe(t){Lc.ok(t,"namespace must be given a name."),Ir&&_r(`NS-CREATING NAMESPACE (${t})`);let e=new Jo(t);return e.id=Ut,fr.createHook({init(n,i,o,s){if(Ut=fr.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Ir){let a=" ".repeat(e._indent<0?0:e._indent);_r(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Ut} triggerId:${o} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Ut===0){let a=fr.triggerAsyncId(),l=e._contexts.get(a);if(l){if(e._contexts.set(n,l),Ir){let c=" ".repeat(e._indent<0?0:e._indent);_r(`${c}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Ut} triggerId:${a} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Ir){let c=" ".repeat(e._indent<0?0:e._indent);_r(`${c}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Ut} triggerId:${a} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(Ir&&i==="PROMISE"){_r(qt.inspect(s,{showHidden:!0}));let a=s.parentId,l=" ".repeat(e._indent<0?0:e._indent);_r(`${l}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Ut} triggerId:${o} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Ut=fr.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ut),i){if(Ir){let o=fr.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);_r(`${s}BEFORE (${t}) asyncId:${n} currentUid:${Ut} triggerId:${o} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${qt.inspect(i)}`),e._indent+=2}e.enter(i)}else if(Ir){let o=fr.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);_r(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ut} triggerId:${o} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${qt.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Ut=fr.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ut),i){if(Ir){let o=fr.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);_r(`${s}AFTER (${t}) asyncId:${n} currentUid:${Ut} triggerId:${o} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${qt.inspect(i)}`)}e.exit(i)}else if(Ir){let o=fr.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);_r(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ut} triggerId:${o} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${qt.inspect(i)}`)}},destroy(n){if(Ut=fr.executionAsyncId(),Ir){let i=fr.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);_r(`${o}DESTROY (${t}) currentUid:${Ut} asyncId:${n} triggerId:${i} active:${qt.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${qt.inspect(e._contexts.get(Ut))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function Zz(t){let e=Jz(t);Lc.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Lc.ok(e.id,"don't assign to process.namespaces directly! "+qt.inspect(e)),process.namespaces[t]=null}function jxe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Zz(t)}),process.namespaces=Object.create(null)}process.namespaces={};function _r(...t){Ir&&process._rawDebug(`${qt.format(...t)}`)}});var nW=x((S$e,rW)=>{"use strict";function Vxe(){}rW.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let l=0;l<arguments.length;l++)i[l]=arguments[l];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new Vxe,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let l=!0;try{o.apply(this,arguments),l=!1}finally{l&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var oW=x((T$e,iW)=>{"use strict";function Gxe(){}iW.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=l;function o(c,u,d,p){return typeof c!="function"?p?s(d):a(d):function(){e.pre.call(u,d);try{return c.apply(this,arguments)}finally{e.post.call(u,d,!1),e.destroy.call(null,d)}}}function s(c){return function(d){return e.destroy.call(null,c),d}}function a(c){return function(d){throw e.destroy.call(null,c),d}}function l(c,u){if(!r.enabled)return i.call(this,c,u);let d=new Gxe,p=--r.counter;return e.init.call(d,p,0,null,null),i.call(this,o(c,d,p,!0),o(u,d,p,!1))}}});var aW=x((I$e,sW)=>{"use strict";var go=require("timers");function $xe(){}function zxe(){}function Wxe(){}var Kxe=new Map,Yxe=new Map,Qxe=new Map,vN=null,yN=!1;sW.exports=function(){_N(this._hooks,this._state,"setTimeout","clearTimeout",$xe,Kxe,!0),_N(this._hooks,this._state,"setInterval","clearInterval",zxe,Yxe,!1),_N(this._hooks,this._state,"setImmediate","clearImmediate",Wxe,Qxe,!0),global.setTimeout=go.setTimeout,global.setInterval=go.setInterval,global.setImmediate=go.setImmediate,global.clearTimeout=go.clearTimeout,global.clearInterval=go.clearInterval,global.clearImmediate=go.clearImmediate};function _N(t,e,r,n,i,o,s){let a=go[r],l=go[n];go[r]=function(){if(!e.enabled)return a.apply(go,arguments);let c=new Array(arguments.length);for(let m=0;m<arguments.length;m++)c[m]=arguments[m];let u=c[0];if(typeof u!="function")throw new TypeError('"callback" argument must be a function');let d=new i,p=--e.counter,f;return t.init.call(d,p,0,null,null),c[0]=function(){vN=f,t.pre.call(d,p);let m=!0;try{u.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(d,p,!0),o.delete(f),t.destroy.call(null,p)})}t.post.call(d,p,!1),vN=null,(s||yN)&&(yN=!1,o.delete(f),t.destroy.call(null,p))},f=a.apply(go,c),o.set(f,p),f},go[n]=function(c){if(vN===c&&c!==null)yN=!0;else if(o.has(c)){let u=o.get(c);o.delete(c),t.destroy.call(null,u)}l.apply(go,arguments)}}});var xN=x((w$e,Xxe)=>{Xxe.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var uW=x((A$e,lW)=>{"use strict";var jy=process.binding("async_wrap"),Jxe=jy.Providers.TIMERWRAP,cW={nextTick:nW(),promise:oW(),timers:aW()},Hy=new Set;function Zxe(){this.enabled=!1,this.counter=0}function bN(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===Jxe){Hy.add(i);return}for(let l of t)l(i,this,o,s,a)},this.pre=function(i){if(!Hy.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!Hy.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(Hy.has(i)){Hy.delete(i);return}for(let o of n)o(i)}}bN.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function nC(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}bN.prototype.remove=function(t){t.init&&nC(this.initFns,t.init),t.pre&&nC(this.preFns,t.pre),t.post&&nC(this.postFns,t.post),t.destroy&&nC(this.destroyFns,t.destroy)};function Vy(){this._state=new Zxe,this._hooks=new bN,this.version=xN().version,this.providers=jy.Providers;for(let t of Object.keys(cW))cW[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),jy.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}lW.exports=Vy;Vy.prototype.addHooks=function(t){this._hooks.add(t)};Vy.prototype.removeHooks=function(t){this._hooks.remove(t)};Vy.prototype.enable=function(){this._state.enabled=!0,jy.enable()};Vy.prototype.disable=function(){this._state.enabled=!1,jy.disable()}});var EN=x((R$e,ebe)=>{ebe.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var pW=x((P$e,dW)=>{function tbe(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}dW.exports=function(e,r){var n=[];n.push(tbe(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var gW=x((k$e,hW)=>{var iC=pW();function mW(){this.extend=new Gy,this.filter=new Gy,this.format=new $y,this.version=EN().version}var SN=!1;mW.prototype.callSite=function t(e){e||(e={}),SN=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return SN=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var Jl=new mW;function Gy(){this._modifiers=[]}Gy.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};Gy.prototype.attach=function(t){this._modifiers.push(t)};Gy.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function $y(){this._formater=iC,this._previous=void 0}$y.prototype.replace=function(t){t?this._formater=t:this.restore()};$y.prototype.restore=function(){this._formater=iC,this._previous=void 0};$y.prototype._backup=function(){this._previous=this._formater};$y.prototype._roolback=function(){this._previous===iC?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&Jl.format.replace(Error.prepareStackTrace);var CN=!1;function fW(t,e){if(SN)return e;if(CN)return iC(t,e);var r=e.concat();r=Jl.extend._modify(t,r),r=Jl.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),CN=!0;var n=Jl.format._formater(t,r);return CN=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return fW},set:function(t){t===fW?Jl.format._roolback():(Jl.format._backup(),Jl.format.replace(t))}});function rbe(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:rbe,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});hW.exports=Jl});var IN=x((N$e,TN)=>{if(global._stackChain)if(global._stackChain.version===EN().version)TN.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else TN.exports=global._stackChain=gW()});var vW=x((O$e,wN)=>{"use strict";var nbe=uW();if(global._asyncHook)if(global._asyncHook.version===xN().version)wN.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else IN().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),wN.exports=global._asyncHook=new nbe});var CW=x((D$e,EW)=>{"use strict";var jr=require("util"),Mc=require("assert"),ibe=rC(),Jm=vW(),zy="cls@contexts",Wy="error@context",_W=[];for(let t in Jm.providers)_W[Jm.providers[t]]=t;var Lr=process.env.DEBUG_CLS_HOOKED,Qr=-1;EW.exports={getNamespace:xW,createNamespace:obe,destroyNamespace:bW,reset:sbe,ERROR_SYMBOL:Wy};function Zo(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Zo.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return Lr&&Hr("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+Qr+" active:"+jr.inspect(this.active,!0)),this.active[e]=r,r};Zo.prototype.get=function(e){if(!this.active){Lr&&Hr("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+Qr+" active:"+jr.inspect(this.active,!0));return}return Lr&&Hr("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+Qr+" active:"+jr.inspect(this.active,!0)),this.active[e]};Zo.prototype.createContext=function(){Lr&&Hr("   CREATING Context: "+this.name+" uid:"+Qr+" len:"+this._set.length+"  active:"+jr.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=Qr,Lr&&Hr("   CREATED Context: "+this.name+" uid:"+Qr+" len:"+this._set.length+"  context:"+jr.inspect(e,!0,2,!0)),e};Zo.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return Lr&&Hr(" BEFORE RUN: "+this.name+" uid:"+Qr+" len:"+this._set.length+" "+jr.inspect(r)),e(r),r}catch(n){throw n&&(n[Wy]=r),n}finally{Lr&&Hr(" AFTER RUN: "+this.name+" uid:"+Qr+" len:"+this._set.length+" "+jr.inspect(r)),this.exit(r)}};Zo.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Zo.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Lr&&Hr(" BEFORE runPromise: "+this.name+" uid:"+Qr+" len:"+this._set.length+" "+jr.inspect(r)),n.then(i=>(Lr&&Hr(" AFTER runPromise: "+this.name+" uid:"+Qr+" len:"+this._set.length+" "+jr.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Wy]=r,Lr&&Hr(" AFTER runPromise: "+this.name+" uid:"+Qr+" len:"+this._set.length+" "+jr.inspect(r)),this.exit(r),i})};Zo.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[Wy]=r),o}finally{n.exit(r)}}};Zo.prototype.enter=function(e){Mc.ok(e,"context must be provided for entering"),Lr&&Hr("  ENTER "+this.name+" uid:"+Qr+" len:"+this._set.length+" context: "+jr.inspect(e)),this._set.push(this.active),this.active=e};Zo.prototype.exit=function(e){if(Mc.ok(e,"context must be provided for exiting"),Lr&&Hr("  EXIT "+this.name+" uid:"+Qr+" len:"+this._set.length+" context: "+jr.inspect(e)),this.active===e){Mc.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Lr&&Hr("??ERROR?? context exiting but not entered - ignoring: "+jr.inspect(e)),Mc.ok(r>=0,`context not currently entered; can't exit. 
`+jr.inspect(this)+`
`+jr.inspect(e))):(Mc.ok(r,"can't remove top context"),this._set.splice(r,1))};Zo.prototype.bindEmitter=function(e){Mc.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[zy]||(s[zy]=Object.create(null)),s[zy][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[zy]))return s;let a=s,l=s[zy];return Object.keys(l).forEach(function(c){let u=l[c];a=u.namespace.bind(a,u.context)}),a}ibe(e,i,o)};Zo.prototype.fromException=function(e){return e[Wy]};function xW(t){return process.namespaces[t]}function obe(t){Mc.ok(t,"namespace must be given a name."),Lr&&Hr("CREATING NAMESPACE "+t);let e=new Zo(t);return e.id=Qr,Jm.addHooks({init(r,n,i,o,s){Qr=r,o?(e._contexts.set(r,e._contexts.get(o)),Lr&&Hr("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(Qr,e.active),Lr&&Hr("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+_W[i]+" active:"+jr.inspect(e.active,!0))},pre(r,n){Qr=r;let i=e._contexts.get(r);i?(Lr&&Hr(" PRE "+t+" uid:"+r+" handle:"+oC(n)+" context:"+jr.inspect(i)),e.enter(i)):Lr&&Hr(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+oC(n))},post(r,n){Qr=r;let i=e._contexts.get(r);i?(Lr&&Hr(" POST "+t+" uid:"+r+" handle:"+oC(n)+" context:"+jr.inspect(i)),e.exit(i)):Lr&&Hr(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+oC(n))},destroy(r){Qr=r,Lr&&Hr("DESTROY "+t+" uid:"+r+" context:"+jr.inspect(e._contexts.get(Qr))+" active:"+jr.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function bW(t){let e=xW(t);Mc.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Mc.ok(e.id,"don't assign to process.namespaces directly! "+jr.inspect(e)),process.namespaces[t]=null}function sbe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){bW(t)}),process.namespaces=Object.create(null)}process.namespaces={};Jm._state&&!Jm._state.enabled&&Jm.enable();function Hr(t){process.env.DEBUG&&process._rawDebug(t)}function oC(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(Lr){AN=IN();for(yW in AN.filter._modifiers)AN.filter.deattach(yW)}var AN,yW});var SW=x((L$e,RN)=>{"use strict";var abe=Gz();process&&abe.gte(process.versions.node,"8.0.0")?RN.exports=tW():RN.exports=CW()});var HW=x((Xe,qW)=>{Xe=qW.exports=St;var Kt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Kt=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Kt=function(){};Xe.SEMVER_SPEC_VERSION="2.0.0";var Ky=256,sC=Number.MAX_SAFE_INTEGER||9007199254740991,PN=16,cbe=Ky-6,Yy=Xe.re=[],rr=Xe.safeRe=[],oe=Xe.src=[],bt=0,LN="[a-zA-Z0-9-]",kN=[["\\s",1],["\\d",Ky],[LN,cbe]];function pC(t){for(var e=0;e<kN.length;e++){var r=kN[e][0],n=kN[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Zm=bt++;oe[Zm]="0|[1-9]\\d*";var eh=bt++;oe[eh]="\\d+";var MN=bt++;oe[MN]="\\d*[a-zA-Z-]"+LN+"*";var IW=bt++;oe[IW]="("+oe[Zm]+")\\.("+oe[Zm]+")\\.("+oe[Zm]+")";var wW=bt++;oe[wW]="("+oe[eh]+")\\.("+oe[eh]+")\\.("+oe[eh]+")";var NN=bt++;oe[NN]="(?:"+oe[Zm]+"|"+oe[MN]+")";var ON=bt++;oe[ON]="(?:"+oe[eh]+"|"+oe[MN]+")";var FN=bt++;oe[FN]="(?:-("+oe[NN]+"(?:\\."+oe[NN]+")*))";var BN=bt++;oe[BN]="(?:-?("+oe[ON]+"(?:\\."+oe[ON]+")*))";var DN=bt++;oe[DN]=LN+"+";var Xy=bt++;oe[Xy]="(?:\\+("+oe[DN]+"(?:\\."+oe[DN]+")*))";var UN=bt++,AW="v?"+oe[IW]+oe[FN]+"?"+oe[Xy]+"?";oe[UN]="^"+AW+"$";var qN="[v=\\s]*"+oe[wW]+oe[BN]+"?"+oe[Xy]+"?",HN=bt++;oe[HN]="^"+qN+"$";var oh=bt++;oe[oh]="((?:<|>)?=?)";var aC=bt++;oe[aC]=oe[eh]+"|x|X|\\*";var cC=bt++;oe[cC]=oe[Zm]+"|x|X|\\*";var gp=bt++;oe[gp]="[v=\\s]*("+oe[cC]+")(?:\\.("+oe[cC]+")(?:\\.("+oe[cC]+")(?:"+oe[FN]+")?"+oe[Xy]+"?)?)?";var rh=bt++;oe[rh]="[v=\\s]*("+oe[aC]+")(?:\\.("+oe[aC]+")(?:\\.("+oe[aC]+")(?:"+oe[BN]+")?"+oe[Xy]+"?)?)?";var RW=bt++;oe[RW]="^"+oe[oh]+"\\s*"+oe[gp]+"$";var PW=bt++;oe[PW]="^"+oe[oh]+"\\s*"+oe[rh]+"$";var kW=bt++;oe[kW]="(?:^|[^\\d])(\\d{1,"+PN+"})(?:\\.(\\d{1,"+PN+"}))?(?:\\.(\\d{1,"+PN+"}))?(?:$|[^\\d])";var fC=bt++;oe[fC]="(?:~>?)";var nh=bt++;oe[nh]="(\\s*)"+oe[fC]+"\\s+";Yy[nh]=new RegExp(oe[nh],"g");rr[nh]=new RegExp(pC(oe[nh]),"g");var lbe="$1~",NW=bt++;oe[NW]="^"+oe[fC]+oe[gp]+"$";var OW=bt++;oe[OW]="^"+oe[fC]+oe[rh]+"$";var mC=bt++;oe[mC]="(?:\\^)";var ih=bt++;oe[ih]="(\\s*)"+oe[mC]+"\\s+";Yy[ih]=new RegExp(oe[ih],"g");rr[ih]=new RegExp(pC(oe[ih]),"g");var ube="$1^",DW=bt++;oe[DW]="^"+oe[mC]+oe[gp]+"$";var LW=bt++;oe[LW]="^"+oe[mC]+oe[rh]+"$";var jN=bt++;oe[jN]="^"+oe[oh]+"\\s*("+qN+")$|^$";var VN=bt++;oe[VN]="^"+oe[oh]+"\\s*("+AW+")$|^$";var vp=bt++;oe[vp]="(\\s*)"+oe[oh]+"\\s*("+qN+"|"+oe[gp]+")";Yy[vp]=new RegExp(oe[vp],"g");rr[vp]=new RegExp(pC(oe[vp]),"g");var dbe="$1$2$3",MW=bt++;oe[MW]="^\\s*("+oe[gp]+")\\s+-\\s+("+oe[gp]+")\\s*$";var FW=bt++;oe[FW]="^\\s*("+oe[rh]+")\\s+-\\s+("+oe[rh]+")\\s*$";var BW=bt++;oe[BW]="(<|>)?=?\\s*\\*";for(Aa=0;Aa<bt;Aa++)Kt(Aa,oe[Aa]),Yy[Aa]||(Yy[Aa]=new RegExp(oe[Aa]),rr[Aa]=new RegExp(pC(oe[Aa])));var Aa;Xe.parse=yp;function yp(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof St)return t;if(typeof t!="string"||t.length>Ky)return null;var r=e.loose?rr[HN]:rr[UN];if(!r.test(t))return null;try{return new St(t,e)}catch{return null}}Xe.valid=pbe;function pbe(t,e){var r=yp(t,e);return r?r.version:null}Xe.clean=fbe;function fbe(t,e){var r=yp(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Xe.SemVer=St;function St(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof St){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Ky)throw new TypeError("version is longer than "+Ky+" characters");if(!(this instanceof St))return new St(t,e);Kt("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?rr[HN]:rr[UN]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>sC||this.major<0)throw new TypeError("Invalid major version");if(this.minor>sC||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>sC||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<sC)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}St.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};St.prototype.toString=function(){return this.version};St.prototype.compare=function(t){return Kt("SemVer.compare",this.version,this.options,t),t instanceof St||(t=new St(t,this.options)),this.compareMain(t)||this.comparePre(t)};St.prototype.compareMain=function(t){return t instanceof St||(t=new St(t,this.options)),th(this.major,t.major)||th(this.minor,t.minor)||th(this.patch,t.patch)};St.prototype.comparePre=function(t){if(t instanceof St||(t=new St(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Kt("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return th(r,n)}while(++e)};St.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Xe.inc=mbe;function mbe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new St(t,r).inc(e,n).version}catch{return null}}Xe.diff=hbe;function hbe(t,e){if(GN(t,e))return null;var r=yp(t),n=yp(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Xe.compareIdentifiers=th;var TW=/^[0-9]+$/;function th(t,e){var r=TW.test(t),n=TW.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Xe.rcompareIdentifiers=gbe;function gbe(t,e){return th(e,t)}Xe.major=vbe;function vbe(t,e){return new St(t,e).major}Xe.minor=ybe;function ybe(t,e){return new St(t,e).minor}Xe.patch=_be;function _be(t,e){return new St(t,e).patch}Xe.compare=Fc;function Fc(t,e,r){return new St(t,r).compare(new St(e,r))}Xe.compareLoose=xbe;function xbe(t,e){return Fc(t,e,!0)}Xe.rcompare=bbe;function bbe(t,e,r){return Fc(e,t,r)}Xe.sort=Ebe;function Ebe(t,e){return t.sort(function(r,n){return Xe.compare(r,n,e)})}Xe.rsort=Cbe;function Cbe(t,e){return t.sort(function(r,n){return Xe.rcompare(r,n,e)})}Xe.gt=Qy;function Qy(t,e,r){return Fc(t,e,r)>0}Xe.lt=lC;function lC(t,e,r){return Fc(t,e,r)<0}Xe.eq=GN;function GN(t,e,r){return Fc(t,e,r)===0}Xe.neq=UW;function UW(t,e,r){return Fc(t,e,r)!==0}Xe.gte=$N;function $N(t,e,r){return Fc(t,e,r)>=0}Xe.lte=zN;function zN(t,e,r){return Fc(t,e,r)<=0}Xe.cmp=uC;function uC(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return GN(t,r,n);case"!=":return UW(t,r,n);case">":return Qy(t,r,n);case">=":return $N(t,r,n);case"<":return lC(t,r,n);case"<=":return zN(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Xe.Comparator=es;function es(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof es){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof es))return new es(t,e);t=t.trim().split(/\s+/).join(" "),Kt("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Jy?this.value="":this.value=this.operator+this.semver.version,Kt("comp",this)}var Jy={};es.prototype.parse=function(t){var e=this.options.loose?rr[jN]:rr[VN],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new St(r[2],this.options.loose):this.semver=Jy};es.prototype.toString=function(){return this.value};es.prototype.test=function(t){return Kt("Comparator.test",t,this.options.loose),this.semver===Jy?!0:(typeof t=="string"&&(t=new St(t,this.options)),uC(t,this.operator,this.semver,this.options))};es.prototype.intersects=function(t,e){if(!(t instanceof es))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new wr(t.value,e),dC(this.value,r,e);if(t.operator==="")return r=new wr(this.value,e),dC(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=uC(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=uC(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||l};Xe.Range=wr;function wr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof wr)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new wr(t.raw,e);if(t instanceof es)return new wr(t.value,e);if(!(this instanceof wr))return new wr(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}wr.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};wr.prototype.toString=function(){return this.range};wr.prototype.parseRange=function(t){var e=this.options.loose,r=e?rr[FW]:rr[MW];t=t.replace(r,Obe),Kt("hyphen replace",t),t=t.replace(rr[vp],dbe),Kt("comparator trim",t,rr[vp]),t=t.replace(rr[nh],lbe),t=t.replace(rr[ih],ube);var n=e?rr[jN]:rr[VN],i=t.split(" ").map(function(o){return Tbe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new es(o,this.options)},this),i};wr.prototype.intersects=function(t,e){if(!(t instanceof wr))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Xe.toComparators=Sbe;function Sbe(t,e){return new wr(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Tbe(t,e){return Kt("comp",t,e),t=Abe(t,e),Kt("caret",t),t=Ibe(t,e),Kt("tildes",t),t=Pbe(t,e),Kt("xrange",t),t=Nbe(t,e),Kt("stars",t),t}function Ci(t){return!t||t.toLowerCase()==="x"||t==="*"}function Ibe(t,e){return t.trim().split(/\s+/).map(function(r){return wbe(r,e)}).join(" ")}function wbe(t,e){var r=e.loose?rr[OW]:rr[NW];return t.replace(r,function(n,i,o,s,a){Kt("tilde",t,n,i,o,s,a);var l;return Ci(i)?l="":Ci(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Ci(s)?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Kt("replaceTilde pr",a),l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Kt("tilde return",l),l})}function Abe(t,e){return t.trim().split(/\s+/).map(function(r){return Rbe(r,e)}).join(" ")}function Rbe(t,e){Kt("caret",t,e);var r=e.loose?rr[LW]:rr[DW];return t.replace(r,function(n,i,o,s,a){Kt("caret",t,n,i,o,s,a);var l;return Ci(i)?l="":Ci(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Ci(s)?i==="0"?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Kt("replaceCaret pr",a),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Kt("no pr"),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Kt("caret return",l),l})}function Pbe(t,e){return Kt("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return kbe(r,e)}).join(" ")}function kbe(t,e){t=t.trim();var r=e.loose?rr[PW]:rr[RW];return t.replace(r,function(n,i,o,s,a,l){Kt("xRange",t,n,i,o,s,a,l);var c=Ci(o),u=c||Ci(s),d=u||Ci(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):u?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Kt("xRange return",n),n})}function Nbe(t,e){return Kt("replaceStars",t,e),t.trim().replace(rr[BW],"")}function Obe(t,e,r,n,i,o,s,a,l,c,u,d,p){return Ci(r)?e="":Ci(n)?e=">="+r+".0.0":Ci(i)?e=">="+r+"."+n+".0":e=">="+e,Ci(l)?a="":Ci(c)?a="<"+(+l+1)+".0.0":Ci(u)?a="<"+l+"."+(+c+1)+".0":d?a="<="+l+"."+c+"."+u+"-"+d:a="<="+a,(e+" "+a).trim()}wr.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new St(t,this.options));for(var e=0;e<this.set.length;e++)if(Dbe(this.set[e],t,this.options))return!0;return!1};function Dbe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Kt(t[n].semver),t[n].semver!==Jy&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Xe.satisfies=dC;function dC(t,e,r){try{e=new wr(e,r)}catch{return!1}return e.test(t)}Xe.maxSatisfying=Lbe;function Lbe(t,e,r){var n=null,i=null;try{var o=new wr(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new St(n,r))}),n}Xe.minSatisfying=Mbe;function Mbe(t,e,r){var n=null,i=null;try{var o=new wr(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new St(n,r))}),n}Xe.minVersion=Fbe;function Fbe(t,e){t=new wr(t,e);var r=new St("0.0.0");if(t.test(r)||(r=new St("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new St(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Qy(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Xe.validRange=Bbe;function Bbe(t,e){try{return new wr(t,e).range||"*"}catch{return null}}Xe.ltr=Ube;function Ube(t,e,r){return WN(t,e,"<",r)}Xe.gtr=qbe;function qbe(t,e,r){return WN(t,e,">",r)}Xe.outside=WN;function WN(t,e,r,n){t=new St(t,n),e=new wr(e,n);var i,o,s,a,l;switch(r){case">":i=Qy,o=zN,s=lC,a=">",l=">=";break;case"<":i=lC,o=$N,s=Qy,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dC(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],d=null,p=null;if(u.forEach(function(f){f.semver===Jy&&(f=new es(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===l||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===l&&s(t,p.semver))return!1}return!0}Xe.prerelease=Hbe;function Hbe(t,e){var r=yp(t,e);return r&&r.prerelease.length?r.prerelease:null}Xe.intersects=jbe;function jbe(t,e,r){return t=new wr(t,r),e=new wr(e,r),t.intersects(e)}Xe.coerce=Vbe;function Vbe(t){if(t instanceof St)return t;if(typeof t!="string")return null;var e=t.match(rr[kW]);return e==null?null:yp(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var GW=x((M$e,VW)=>{var Gbe=ZE().wrap,YN=1,QN=2,XN=4,gC=8,Qt=[],$be=0,si=!1,Zl=[],sh,JN;function ZN(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(hC=!1,sh=function(e){var r=Qt.length;if(hC||r===0)return!1;var n=!1;hC=!0;for(var i=0;i<r;++i){var o=Qt[i];if(o.flags&gC){var s=ah&&ah[o.uid];n=o.error(s,e)||n}}return hC=!1,Zl.length>0&&(Qt=Zl.pop()),ah=void 0,n&&!si},JN=function(e,r,n){var i=[];si=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&YN)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return si=!1,function(){ah=i,Zl.push(Qt),Qt=ZN(r,Qt),si=!0;for(var l=0;l<n;++l)(r[l].flags&QN)>0&&r[l].before(this,i[r[l].uid]);si=!1;var c=e.apply(this,arguments);for(si=!0,l=0;l<n;++l)(r[l].flags&XN)>0&&r[l].after(this,i[r[l].uid]);return si=!1,Qt=Zl.pop(),ah=void 0,c}},Gbe(process,"_fatalException",function(t){return function(r){return sh(r)||t(r)}})):(KN=!1,sh=function(e){if(KN)throw e;for(var r=!1,n=Qt.length,i=0;i<n;++i){var o=Qt[i];o.flags&gC&&(r=o.error(null,e)||r)}if(!r&&si)throw e},JN=function(e,r,n){var i=[];si=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&YN)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return si=!1,function(){var l=!1,c=!1;Zl.push(Qt),Qt=ZN(r,Qt),si=!0;for(var u=0;u<n;++u)(r[u].flags&QN)>0&&r[u].before(this,i[r[u].uid]);si=!1;var d;try{d=e.apply(this,arguments)}catch(p){l=!0;for(var u=0;u<n;++u)if(Qt[u].flags&gC)try{c=Qt[u].error(i[r[u].uid],p)||c}catch(m){throw KN=!0,m}if(!c)throw process.removeListener("uncaughtException",sh),process._originalNextTick(function(){process.addListener("uncaughtException",sh)}),p}finally{if(!l||c){for(si=!0,u=0;u<n;++u)(r[u].flags&XN)>0&&r[u].after(this,i[r[u].uid]);si=!1}Qt=Zl.pop()}return d}},process.addListener("uncaughtException",sh));var hC,ah,KN;function zbe(t,e,r){si=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return si=!1,function(){Zl.push(Qt),Qt=ZN(e,Qt);var o=t.apply(this,arguments);return Qt=Zl.pop(),o}}function Wbe(t){var e=Qt.length;if(e===0)return t;for(var r=Qt.slice(),n=0;n<e;++n)if(r[n].flags>0)return JN(t,r,e);return zbe(t,r,e)}function Ra(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=YN),typeof t.before=="function"&&(this.before=t.before,this.flags|=QN),typeof t.after=="function"&&(this.after=t.after,this.flags|=XN),typeof t.error=="function"&&(this.error=t.error,this.flags|=gC),this.uid=++$be,this.data=e===void 0?null:e}Ra.prototype.create=void 0;Ra.prototype.before=void 0;Ra.prototype.after=void 0;Ra.prototype.error=void 0;Ra.prototype.data=void 0;Ra.prototype.uid=0;Ra.prototype.flags=0;function jW(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof Ra?t:new Ra(t,e)}function Kbe(t,e){var r;t instanceof Ra?r=t:r=jW(t,e);for(var n=!1,i=0;i<Qt.length;i++)if(r===Qt[i]){n=!0;break}return n||Qt.push(r),r}function Ybe(t){for(var e=0;e<Qt.length;e++)if(t===Qt[e]){Qt.splice(e,1);break}}process.createAsyncListener=jW;process.addAsyncListener=Kbe;process.removeAsyncListener=Ybe;VW.exports=Wbe});var zW=x((B$e,$W)=>{"use strict";$W.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(l){o[1](l)}return s;function a(l,c){i=this,o=[u,d];function u(p){return e(s,!1),l(p)}function d(p){return e(s,!1),c(p)}}}}});var ZW=x(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var QW=ZE(),yC=HW(),ji=QW.wrap,eu=QW.massWrap,Ar=GW(),Qbe=require("util"),Xbe=yC.gte(process.version,"6.0.0"),rO=yC.gte(process.version,"7.0.0"),Jbe=yC.gte(process.version,"8.0.0"),Zbe=yC.gte(process.version,"11.0.0"),Pa=require("net");rO&&!Pa._normalizeArgs?Pa._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:iEe(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!rO&&!Pa._normalizeConnectArgs&&(Pa._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in Pa.Server.prototype?ji(Pa.Server.prototype,"_setUpListenHandle",WW):ji(Pa.Server.prototype,"_listen2",WW);function WW(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=Ar(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=Ar(this._handle.onconnection))}}}function XW(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=Ar(e._originalOnread)}}ji(Pa.Socket.prototype,"connect",function(t){return function(){var e;Jbe&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=rO?Pa._normalizeArgs(arguments):Pa._normalizeConnectArgs(arguments),e[1]&&(e[1]=Ar(e[1]));var r=t.apply(this,e);return XW(this),r}});var eEe=require("http");ji(eEe.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=Ar(function(n){return XW(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var eO=require("child_process");function KW(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=Ar(e._handle.onread),ji(e._handle,"close",_C))}),t._handle&&(t._handle.onexit=Ar(t._handle.onexit))}eO.ChildProcess?ji(eO.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return KW(this),e}}):eu(eO,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return KW(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var oO=[];process._nextDomainTick&&oO.push("_nextDomainTick");process._tickDomainCallback&&oO.push("_tickDomainCallback");eu(process,oO,ka);ji(process,"nextTick",_C);var sO=["setTimeout","setInterval"];global.setImmediate&&sO.push("setImmediate");var JW=require("timers"),tEe=global.setTimeout===JW.setTimeout;eu(JW,sO,_C);tEe&&eu(global,sO,_C);var nO=require("dns");eu(nO,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ka);nO.resolveNaptr&&ji(nO,"resolveNaptr",ka);var xp=require("fs");eu(xp,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ka);xp.lchown&&ji(xp,"lchown",ka);xp.lchmod&&ji(xp,"lchmod",ka);xp.ftruncate&&ji(xp,"ftruncate",ka);var Zy;try{Zy=require("zlib")}catch{}Zy&&Zy.Deflate&&Zy.Deflate.prototype&&(_p=Object.getPrototypeOf(Zy.Deflate.prototype),_p._transform?ji(_p,"_transform",ka):_p.write&&_p.flush&&_p.end&&eu(_p,["write","flush","end"],ka));var _p,iO;try{iO=require("crypto")}catch{}iO&&(tO=["pbkdf2","randomBytes"],Zbe||tO.push("pseudoRandomBytes"),eu(iO,tO,ka));var tO,vC=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";vC&&(YW=process.addAsyncListener({create:function(){vC=!1}}),global.Promise.resolve(!0).then(function(){vC=!1}),process.removeAsyncListener(YW));var YW;vC&&rEe();function rEe(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,l,c=new t(u);c.__proto__=e.prototype;try{s.apply(a,l)}catch(d){l[1](d)}return c;function u(d,p){a=this,l=[f,m];function f(h){return n(c,!1),d(h)}function m(h){return n(c,!1),p(h)}}}if(Qbe.inherits(e,t),ji(t.prototype,"then",o),t.prototype.chain&&ji(t.prototype,"chain",o),Xbe)global.Promise=zW()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=Ar(i))}function i(s,a,l,c){var u;try{return u=a.call(s,l),{returnVal:u,error:!1}}catch(d){return{errorVal:d,error:!0}}finally{u instanceof t?c.__asl_wrapper=function(){var p=u.__asl_wrapper||i;return p.apply(this,arguments)}:n(c,!0)}}function o(s){return function(){var l=this,c=s.apply(l,Array.prototype.map.call(arguments,u));return c.__asl_wrapper=function(p,f,m,h){return l.__asl_wrapper?(l.__asl_wrapper(p,function(){},null,c),c.__asl_wrapper(p,f,m,h)):i(p,f,m,h)},c;function u(d){return typeof d!="function"?d:Ar(function(p){var f=(l.__asl_wrapper||i)(this,d,p,c);if(f.error)throw f.errorVal;return f.returnVal})}}}}function ka(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=Ar(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=Ar(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=Ar(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=Ar(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=Ar(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=Ar(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function _C(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=Ar(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=Ar(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function nEe(t){return(t=Number(t))>=0?t:!1}function iEe(t){return typeof t=="string"&&nEe(t)===!1}});var iK=x((H$e,nK)=>{"use strict";var Bc=require("assert"),oEe=rC(),e_="cls@contexts",aO="error@context";process.addAsyncListener||ZW();function Ns(t){this.name=t,this.active=null,this._set=[],this.id=null}Ns.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};Ns.prototype.get=function(t){if(this.active)return this.active[t]};Ns.prototype.createContext=function(){return Object.create(this.active)};Ns.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[aO]=e),r}finally{this.exit(e)}};Ns.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};Ns.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[aO]=e),n}finally{r.exit(e)}}};Ns.prototype.enter=function(t){Bc.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};Ns.prototype.exit=function(t){if(Bc.ok(t,"context must be provided for exiting"),this.active===t){Bc.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);Bc.ok(e>=0,"context not currently entered; can't exit"),Bc.ok(e,"can't remove top context"),this._set.splice(e,1)};Ns.prototype.bindEmitter=function(t){Bc.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){o&&(o[e_]||(o[e_]=Object.create(null)),o[e_][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[e_]))return o;var s=o,a=o[e_];return Object.keys(a).forEach(function(l){var c=a[l];s=c.namespace.bind(s,c.context)}),s}oEe(t,n,i)};Ns.prototype.fromException=function(t){return t[aO]};function eK(t){return process.namespaces[t]}function sEe(t){Bc.ok(t,"namespace must be given a name!");var e=new Ns(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function tK(t){var e=eK(t);Bc.ok(e,"can't delete nonexistent namespace!"),Bc.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function rK(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){tK(t)}),process.namespaces=Object.create(null)}process.namespaces||rK();nK.exports={getNamespace:eK,createNamespace:sEe,destroyNamespace:tK,reset:rK}});var tu=x(bC=>{"use strict";Object.defineProperty(bC,"__esModule",{value:!0});bC.CorrelationContextManager=void 0;var ch=dr(),aEe=BE(),bp=UE(),cO=kk(),oK=Xk(),xC=Bn(),cEe=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new lEe(i)}:null},t.spanToContextObject=function(e,r,n){var i=new bp;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=bp.formatOpenTelemetryTraceFlags(e.traceFlags)||bp.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(i){ch.warn("Error binding to session context",xC.dumpObj(i))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){ch.warn("Error binding to session context",xC.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(i){ch.warn("Error binding to session context",xC.dumpObj(i))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=SW():this.cls=iK()),t.session=this.cls.createNamespace("AI-CLS-Session"),aEe.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){ch.warn("Error binding to session context",xC.dumpObj(n))}})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.spanContext?e:null,o=e&&e.traceId?e:null,s=e&&e.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof r=="string"?r:"");var a=typeof r=="string"?r:"";if(n){var l=null,c=null;if(a=n.attributes.OperationName||a,r){var u=r;u.headers&&(u.headers.traceparent?l=new bp(u.headers.traceparent):u.headers["request-id"]&&(l=new bp(null,u.headers["request-id"])),u.headers.tracestate&&(c=new cO(u.headers.tracestate)))}l||(l=new bp(n.traceParent||n.traceparent)),c||(c=new cO(n.traceState||n.tracestate));var d=void 0;if(typeof r=="object"){var p=new oK(r);d=p.getCorrelationContextHeader(),a=p.getOperationName({})}var f=t.generateContextObject(l.traceId,l.parentId,a,d,l,c);return f}if(s){var l=new bp(s.traceparent?s.traceparent.toString():null),c=new cO(s.tracestate?s.tracestate.toString():null),p=new oK(e),f=t.generateContextObject(l.traceId,l.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),l,c);return f}return ch.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();bC.CorrelationContextManager=cEe;var lEe=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){ch.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var sK=x(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.dispose=lh.enable=void 0;var EC=ii(),uEe=Sr(),CC=Dr(),ru=[],lO=function(t){var e=t.data.message;ru.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?EC.SeverityLevel.Error:EC.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?EC.SeverityLevel.Warning:EC.SeverityLevel.Information}))})};function dEe(t,e){if(t){var r=ru.find(function(n){return n==e});if(r)return;ru.length===0&&CC.channel.subscribe("console",lO,CC.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(uEe.StatsbeatInstrumentation.CONSOLE)}),ru.push(e)}else ru=ru.filter(function(n){return n!=e}),ru.length===0&&CC.channel.unsubscribe("console",lO)}lh.enable=dEe;function pEe(){CC.channel.unsubscribe("console",lO),ru=[]}lh.dispose=pEe});var aK=x(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.dispose=dh.enable=void 0;var uh=ii(),fEe=Sr(),SC=Dr(),nu=[],mEe={10:uh.SeverityLevel.Verbose,20:uh.SeverityLevel.Verbose,30:uh.SeverityLevel.Information,40:uh.SeverityLevel.Warning,50:uh.SeverityLevel.Error,60:uh.SeverityLevel.Critical},uO=function(t){var e=t.data.result,r=mEe[t.data.level];nu.forEach(function(n){try{var i=JSON.parse(e);if(i.err){var o=new Error(i.err.message);if(o.name=i.err.name,o.stack=i.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:o});return}}catch{}n.trackTrace({message:e,severity:r})})};function hEe(t,e){if(t){var r=nu.find(function(n){return n==e});if(r)return;nu.length===0&&SC.channel.subscribe("bunyan",uO,SC.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(fEe.StatsbeatInstrumentation.BUNYAN)}),nu.push(e)}else nu=nu.filter(function(n){return n!=e}),nu.length===0&&SC.channel.unsubscribe("bunyan",uO)}dh.enable=hEe;function gEe(){SC.channel.unsubscribe("bunyan",uO),nu=[]}dh.dispose=gEe});var cK=x(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.dispose=ph.enable=void 0;var vEe=Sr(),Hn=ii(),TC=Dr(),iu=[],yEe={syslog:function(t){var e={emerg:Hn.SeverityLevel.Critical,alert:Hn.SeverityLevel.Critical,crit:Hn.SeverityLevel.Critical,error:Hn.SeverityLevel.Error,warning:Hn.SeverityLevel.Warning,notice:Hn.SeverityLevel.Information,info:Hn.SeverityLevel.Information,debug:Hn.SeverityLevel.Verbose};return e[t]===void 0?Hn.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Hn.SeverityLevel.Error,warn:Hn.SeverityLevel.Warning,info:Hn.SeverityLevel.Information,verbose:Hn.SeverityLevel.Verbose,debug:Hn.SeverityLevel.Verbose,silly:Hn.SeverityLevel.Verbose};return e[t]===void 0?Hn.SeverityLevel.Information:e[t]},unknown:function(t){return Hn.SeverityLevel.Information}},dO=function(t){var e=t.data.message,r=yEe[t.data.levelKind](t.data.level);iu.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function _Ee(t,e){if(t){var r=iu.find(function(n){return n==e});if(r)return;iu.length===0&&TC.channel.subscribe("winston",dO,TC.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(vEe.StatsbeatInstrumentation.WINSTON)}),iu.push(e)}else iu=iu.filter(function(n){return n!=e}),iu.length===0&&TC.channel.unsubscribe("winston",dO)}ph.enable=_Ee;function xEe(){TC.channel.unsubscribe("winston",dO),iu=[]}ph.dispose=xEe});var uK=x((z$e,lK)=>{"use strict";var bEe=BE(),EEe=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){bEe.IsInitialized&&(sK().enable(e&&r,this._client),aK().enable(e,this._client),cK().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();lK.exports=EEe});var pK=x((W$e,dK)=>{"use strict";var CEe=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(i,o,s){s===void 0&&(s=new Error(t._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,r._client.trackException(a),r._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();dK.exports=CEe});var wC=x((K$e,fK)=>{"use strict";var IC=require("os"),ts=Sr(),SEe=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=IC.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=IC.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var l=e[a],c=this._lastCpus[a],u="% cpu("+a+") ",d=l.model,p=l.speed,f=l.times,m=c.times,h=f.user-m.user||0;r+=h;var g=f.sys-m.sys||0;n+=g;var v=f.nice-m.nice||0;i+=v;var y=f.idle-m.idle||0;o+=y;var _=f.irq-m.irq||0;s+=_}var T=void 0;if(typeof process.cpuUsage=="function"){var I=process.cpuUsage(),R=process.hrtime(),w=I.user-this._lastAppCpuUsage.user+(I.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var O=(R[0]-this._lastHrtime[0])*1e6+(R[1]-this._lastHrtime[1])/1e3||0;T=100*w/(O*e.length)}this._lastAppCpuUsage=I,this._lastHrtime=R}var V=r+n+i+o+s||1;this._client.trackMetric({name:ts.PerformanceCounter.PROCESSOR_TIME,value:(V-o)/V*100}),this._client.trackMetric({name:ts.PerformanceCounter.PROCESS_TIME,value:T||r/V*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=IC.freemem(),r=process.memoryUsage().rss,n=IC.totalmem()-e;this._client.trackMetric({name:ts.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:ts.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:ts.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var l=n/s,c=i/s;this._client.trackMetric({name:ts.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:ts.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:ts.QuickPulseCounter.REQUEST_FAILURE_RATE,value:c})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var l=n/s,c=i/s;this._client.trackMetric({name:ts.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:ts.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:ts.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:ts.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();fK.exports=SEe});var mK=x(AC=>{"use strict";Object.defineProperty(AC,"__esModule",{value:!0});AC.AggregatedMetricCounter=void 0;var TEe=function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();AC.AggregatedMetricCounter=TEe});var hK=x(RC=>{"use strict";Object.defineProperty(RC,"__esModule",{value:!0});RC.PreaggregatedMetricPropertyNames=void 0;RC.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var fO=x((pO,gK)=>{"use strict";var kC=pO&&pO.__assign||function(){return kC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kC.apply(this,arguments)},PC=Sr(),IEe=mK(),wEe=hK(),AEe=function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,i=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;i.intervalExecutionTime+=n,i.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof e=="string")i=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")i=e;else return;n.intervalExecutionTime+=i,n.totalCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,i=0;i<r.length;i++){if(e===r[i].dimensions)return r[i];if(Object.keys(e).length===Object.keys(r[i].dimensions).length){for(var o in e)if(e[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new IEe.AggregatedMetricCounter(e);return r.push(s),s},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:PC.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:PC.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:PC.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:PC.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[wEe.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=kC(kC({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();gK.exports=AEe});var fh=x((X$e,vK)=>{"use strict";var Uc=require("os"),REe=require("fs"),PEe=require("path"),kEe=ii(),NEe=Sr(),OEe=dr(),DEe=function(){function t(e){this.keys=new kEe.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||PEe.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(REe.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){OEe.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=Uc&&Uc.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=Uc&&Uc.type()+" "+Uc.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=Uc&&Uc.arch(),this.tags["ai.device.osPlatform"]=Uc&&Uc.platform()},t.prototype._loadInternalContext=function(){t.sdkVersion=NEe.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();vK.exports=DEe});var xK=x((J$e,_K)=>{"use strict";var LEe=require("crypto"),yK=require("os"),MEe=Sr(),FEe=fh(),BEe=function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},i=FEe.sdkVersion;n.sdkVersion=i,n.osType=yK.type(),n.osVersion=yK.release(),this._uniqueProcessId||(this._uniqueProcessId=LEe.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:MEe.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();_K.exports=BEe});var bK=x(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.isContentTypeHeaderHtml=Je.insertSnippetByIndex=Je.getContentEncodingFromHeaders=Je.isSupportedContentEncoding=Je.findBufferEncodingType=Je.isBufferType=Je.getBrotliDecompressSync=Je.getBrotliDecompressAsync=Je.getBrotliCompressSync=Je.getBrotliCompressAsync=Je.inflateAsync=Je.deflateAsync=Je.gunzipAsync=Je.gzipAsync=Je.isBrotliSupperted=Je.bufferEncodingTypes=Je.contentEncodingMethod=void 0;var OC=require("zlib"),mh=require("util"),NC;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(NC=Je.contentEncodingMethod||(Je.contentEncodingMethod={}));Je.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var UEe=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};Je.isBrotliSupperted=UEe;Je.gzipAsync=mh.promisify(OC.gzip);Je.gunzipAsync=mh.promisify(OC.gunzip);Je.deflateAsync=mh.promisify(OC.deflate);Je.inflateAsync=mh.promisify(OC.inflate);var qEe=function(t){var e=Je.isBrotliSupperted();return e&&typeof t.brotliCompress=="function"?mh.promisify(t.brotliCompress):null};Je.getBrotliCompressAsync=qEe;var HEe=function(t){var e=Je.isBrotliSupperted();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};Je.getBrotliCompressSync=HEe;var jEe=function(t){var e=Je.isBrotliSupperted();return e&&typeof t.brotliDecompress=="function"?mh.promisify(t.brotliDecompress):null};Je.getBrotliDecompressAsync=jEe;var VEe=function(t){var e=Je.isBrotliSupperted();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};Je.getBrotliDecompressSync=VEe;var GEe=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var i=Buffer.from(t.toString(r),r);n=i.toJSON().data.toString()===t.toJSON().data.toString()}return n};Je.isBufferType=GEe;var $Ee=function(t){var e=null;for(var r in Je.bufferEncodingTypes){var n=Je.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&Je.isBufferType(t,n)){e=n;break}}return e};Je.findBufferEncodingType=$Ee;var zEe=function(t){var e=null;switch(t){case"gzip":e=NC.GZIP;break;case"br":e=NC.BR;break;case"deflate":e=NC.DEFLATE;break;default:}return e};Je.isSupportedContentEncoding=zEe;var WEe=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=Je.isSupportedContentEncoding(r);n&&e.push(n)}return e};Je.getContentEncodingFromHeaders=WEe;var KEe=function(t,e,r){if(t<0)return null;var n=null,i=e.substring(0,t),o=e.substring(t);return n=i+'<script type="text/javascript">'+r+"</script>"+o,n};Je.insertSnippetByIndex=KEe;var YEe=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};Je.isContentTypeHeaderHtml=YEe});var EK=x(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.getResourceProvider=In.getOsPrefix=In.isFunctionApp=In.isWebApp=In.isLinux=In.isWindows=void 0;var QEe=function(){return process.platform==="win32"};In.isWindows=QEe;var XEe=function(){return process.platform==="linux"};In.isLinux=XEe;var JEe=function(){return!!process.env.WEBSITE_SITE_NAME};In.isWebApp=JEe;var ZEe=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};In.isFunctionApp=ZEe;var eCe=function(){return In.isWindows()?"w":In.isLinux()?"l":"u"};In.getOsPrefix=eCe;var tCe=function(){return In.isWebApp()?"a":In.isFunctionApp()?"f":"u"};In.getResourceProvider=tCe});var mO=x((tze,SK)=>{"use strict";var CK=Sr(),rCe=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var l=a[0].toLowerCase(),c=a[1];o[l]=c}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||CK.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||CK.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();SK.exports=rCe});var TK={};Jn(TK,{webSnippet:()=>nCe});var nCe,IK=k(()=>{nCe=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var NK=x((rze,kK)=>{"use strict";var wK=require("http"),AK=require("https"),hh=require("zlib"),Na=dr(),rs=bK(),RK=EK(),t_=Sr(),PK=mO(),iCe=(IK(),En(TK)),oCe=function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=t_.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=t_.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(t_.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(t_.StatsbeatFeature.WEB_SNIPPET)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=PK.parse(e),i=n.instrumentationkey||"";PK.isIkeyValid(i)?(this._isIkeyValid=!0,r=i):(this._isIkeyValid=!1,Na.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){Na.info("get web snippet ikey error: "+o)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=RK.getOsPrefix(),n=RK.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+e+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+n+r+"d_n_",o=iCe.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace(t_.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var i=n.name;if(i!==void 0){var o=n.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,r+=s;break;default:s=" "+i+": "+o+`,\r
`,r+=s;break}}})}catch{this._isEnabled=!1,Na.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=wK.createServer,r=AK.createServer,n=this._isEnabled;wK.createServer=function(i){var o=i;return o&&(i=function(s,a){var l=a.write,c=s.method=="GET";a.write=function(p,f,m){try{if(n&&c){var h=rs.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(y){Na.warn("Inject snippet error: "+y)}return l.apply(a,arguments)};var u=a.end;return a.end=function(p,f,m){if(n&&c)try{if(n&&c){var h=rs.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(y){Na.warn("Inject snipet error: "+y)}return u.apply(a,arguments)},o(s,a)}),e(i)},AK.createServer=function(i,o){var s=o;if(s)return o=function(a,l){var c=a.method=="GET",u=l.write,d=l.end;return l.write=function(f,m,h){try{if(n&&c){var g=rs.getContentEncodingFromHeaders(l),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(l,f)&&(arguments[0]=this.InjectWebSnippet(l,f,void 0,v));else if(g.length){var y=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(l,f,y)}}}catch(_){Na.warn("Inject snippet error: "+_)}return u.apply(l,arguments)},l.end=function(f,m,h){try{if(n&&c){var g=rs.getContentEncodingFromHeaders(l),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(l,f)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(l,f,void 0,v));else if(g.length){var y=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(l,f,y)}}}catch(_){Na.warn("Inject snippet error: "+_)}return d.apply(l,arguments)},s(a,l)},r(i,o)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=rs.isContentTypeHeaderHtml(e);if(!n)return!1;var i=r.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(t._aiUrl)<0&&i.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(o){Na.info("validate injections error: "+o)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,i){try{var o=!!n;if(o)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var s=r.toString(),a=s.indexOf("</head>");if(a<0)return r;var l=rs.insertSnippetByIndex(a,s,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=l,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var c=i||"utf8",u=rs.isBufferType(r,c);if(u){e.removeHeader("Content-Length");var d=Buffer.from(l).toString(c);r=Buffer.from(d,c),e.setHeader("Content-Length",r.length)}}}}catch(p){Na.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case rs.contentEncodingMethod.GZIP:var i=hh.gunzipSync(r);if(this.ValidateInjection(e,i)){var o=this.InjectWebSnippet(e,i);r=hh.gzipSync(o)}break;case rs.contentEncodingMethod.DEFLATE:var s=hh.inflateSync(r);if(this.ValidateInjection(e,s)){var a=this.InjectWebSnippet(e,s);r=hh.deflateSync(a)}break;case rs.contentEncodingMethod.BR:var l=rs.getBrotliDecompressSync(hh),c=rs.getBrotliCompressSync(hh);if(l&&c){var u=l(r);if(this.ValidateInjection(e,u)){var d=this.InjectWebSnippet(e,u);r=c(d)}break}}}catch(p){Na.info("get web injection compress buffer error: "+p)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();kK.exports=oCe});var DK=x((gO,OK)=>{"use strict";var sCe=gO&&gO.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ns=require("url"),hO=ii(),aCe=Bn(),cCe=Hm(),lCe=Wk(),uCe=dp(),dCe=function(t){sCe(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=aCe.getCorrelationContextTarget(r,cCe.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=this.method.toUpperCase(),o=hO.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new ns.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=hO.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==uCe.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=hO.RemoteDependencyDataConstants.TYPE_HTTP;var l={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(r&&r.time?l.time=r.time:this.startTime&&(l.time=new Date(this.startTime)),r){for(var c in r)l[c]||(l[c]=r[c]);if(r.properties)for(var c in r.properties)l.properties[c]=r.properties[c]}return l},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new ns.URL(r)}catch{}else try{var i=new ns.URL("http://"+r);i.port==="443"?r=new ns.URL("https://"+r):r=new ns.URL("http://"+r)}catch{}else{if(r&&typeof ns.URL=="function"&&r instanceof ns.URL)return ns.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(l){r[l]=o[l]})}if(r.path&&r.host)try{var s=new ns.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.path&&r.hostname&&!r.host)try{var s=new ns.URL(r.path,"http://"+r.hostname+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.host&&r.port)try{var a=new ns.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",ns.format(r)},e}(lCe);OK.exports=dCe});var LK=x(gh=>{"use strict";var DC=gh&&gh.__assign||function(){return DC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},DC.apply(this,arguments)};Object.defineProperty(gh,"__esModule",{value:!0});gh.parseEventHubSpan=void 0;var vO=(_t(),En(km)),pCe=(yi(),En(l5)),fCe=(As(),En(D1)),r_=Sr(),mCe=function(t){var e=0,r=0,n=pCe.hrTimeToMilliseconds(t.startTime);return t.links.forEach(function(i){var o=i.attributes,s=o?.[r_.ENQUEUED_TIME];s&&(e+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(e||1),0)},hCe=function(t,e){var r,n=t.attributes[r_.AzNamespace],i=(t.attributes[fCe.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=t.attributes[r_.MessageBusDestination]||"unknown";switch(t.kind){case vO.SpanKind.CLIENT:e.dependencyTypeName=n,e.target=i+"/"+o;break;case vO.SpanKind.PRODUCER:e.dependencyTypeName=r_.DependencyTypeName.QueueMessage+" | "+n,e.target=i+"/"+o;break;case vO.SpanKind.CONSUMER:e.source=i+"/"+o,e.measurements=DC(DC({},e.measurements),(r={},r[r_.TIME_SINCE_ENQUEUED]=mCe(t),r));break;default:}};gh.parseEventHubSpan=hCe});var BK=x(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});LC.spanToTelemetryContract=void 0;var MK=require("url"),Os=(_t(),En(km)),ct=(As(),En(D1)),qc=Sr(),gCe=LK(),vCe=Bn();function yCe(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(e[i]=t.attributes[i])}var o=t.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(e["_MS.links"]=vCe.stringify(o)),e}function _Ce(t){return t===ct.DbSystemValues.DB2||t===ct.DbSystemValues.DERBY||t===ct.DbSystemValues.MARIADB||t===ct.DbSystemValues.MSSQL||t===ct.DbSystemValues.ORACLE||t===ct.DbSystemValues.SQLITE||t===ct.DbSystemValues.OTHER_SQL||t===ct.DbSystemValues.HSQLDB||t===ct.DbSystemValues.H2}function FK(t){var e=t.attributes[ct.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[ct.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[ct.SemanticAttributes.HTTP_SCHEME],i=t.attributes[ct.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=t.attributes[ct.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=t.attributes[ct.SemanticAttributes.NET_PEER_PORT];if(s){var a=t.attributes[ct.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var l=t.attributes[ct.SemanticAttributes.NET_PEER_IP];if(l)return n+"://"+l+":"+s+i}}}return""}function yO(t){var e=t.attributes[ct.SemanticAttributes.PEER_SERVICE],r=t.attributes[ct.SemanticAttributes.HTTP_HOST],n=t.attributes[ct.SemanticAttributes.HTTP_URL],i=t.attributes[ct.SemanticAttributes.NET_PEER_NAME],o=t.attributes[ct.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):i?String(i):o?String(o):""}function xCe(t){var e={name:t.name,success:t.status.code!=Os.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===Os.SpanKind.PRODUCER&&(e.dependencyTypeName=qc.DependencyTypeName.QueueMessage),t.kind===Os.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=qc.DependencyTypeName.InProc);var r=t.attributes[ct.SemanticAttributes.HTTP_METHOD],n=t.attributes[ct.SemanticAttributes.DB_SYSTEM],i=t.attributes[ct.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=qc.DependencyTypeName.Http;var o=t.attributes[ct.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new MK.URL(String(o));s=a.pathname}catch{}e.name=r+" "+s}e.data=FK(t);var l=t.attributes[ct.SemanticAttributes.HTTP_STATUS_CODE];l&&(e.resultCode=String(l));var c=yO(t);if(c){try{var u=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),d=u.exec(c);if(d!=null){var p=d[1],f=d[3];(p=="https"&&f==":443"||p=="http"&&f==":80")&&(c=d[1]+d[2]+d[4])}}catch{}e.target=""+c}}else if(n){String(n)===ct.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===ct.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===ct.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===ct.DbSystemValues.REDIS?e.dependencyTypeName="redis":_Ce(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var m=t.attributes[ct.SemanticAttributes.DB_STATEMENT],h=t.attributes[ct.SemanticAttributes.DB_OPERATION];m?e.data=String(m):h&&(e.data=String(h));var c=yO(t),g=t.attributes[ct.SemanticAttributes.DB_NAME];c?e.target=g?c+"|"+g:""+c:e.target=g?""+g:""+n}else if(i){e.dependencyTypeName=qc.DependencyTypeName.Grpc;var v=t.attributes[ct.SemanticAttributes.RPC_GRPC_STATUS_CODE];v&&(e.resultCode=String(v));var c=yO(t);c?e.target=""+c:i&&(e.target=String(i))}return e}function bCe(t){var e={name:t.name,success:t.status.code!=Os.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[ct.SemanticAttributes.HTTP_METHOD],n=t.attributes[ct.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==Os.SpanKind.SERVER){var i=t.attributes[ct.SemanticAttributes.HTTP_ROUTE],o=t.attributes[ct.SemanticAttributes.HTTP_URL];if(i)e.name=r+" "+i;else if(o)try{var s=new MK.URL(String(o));e.name=r+" "+s.pathname}catch{}}e.url=FK(t);var a=t.attributes[ct.SemanticAttributes.HTTP_STATUS_CODE];a&&(e.resultCode=String(a))}else n&&(e.resultCode=String(n));return e}function ECe(t){var e;switch(t.kind){case Os.SpanKind.CLIENT:case Os.SpanKind.PRODUCER:case Os.SpanKind.INTERNAL:e=xCe(t);break;case Os.SpanKind.SERVER:case Os.SpanKind.CONSUMER:e=bCe(t);break}var r=t.spanContext?t.spanContext():t.context(),n=""+r.spanId,i=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=i,e.properties=yCe(t),t.attributes[qc.AzNamespace]&&(t.kind===Os.SpanKind.INTERNAL&&(e.dependencyTypeName=qc.DependencyTypeName.InProc+" | "+t.attributes[qc.AzNamespace]),t.attributes[qc.AzNamespace]===qc.MicrosoftEventHub&&gCe.parseEventHubSpan(t,e)),e}LC.spanToTelemetryContract=ECe});var qK=x(su=>{"use strict";var vh=su&&su.__assign||function(){return vh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vh.apply(this,arguments)};Object.defineProperty(su,"__esModule",{value:!0});su.AsyncScopeManager=su.OpenTelemetryScopeManagerWrapper=void 0;var ou=tu(),CCe=require("events"),UK=function(){function t(){}return t.prototype.active=function(){var e=this,r=ou.CorrelationContextManager.getCurrentContext();return vh(vh({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,o=t._spanToContext(e,n,i);return ou.CorrelationContextManager.runWithContext(o,r)()},t.prototype.bind=function(e){return typeof e=="function"?ou.CorrelationContextManager.wrapCallback(e):(e instanceof CCe.EventEmitter&&ou.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return ou.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return ou.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=e.spanContext?e.spanContext():e.context(),o=vh(vh({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),s=r?"|"+i.traceId+"."+r+".":i.traceId,a=ou.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,r||(s=a.operation.parentId));var l=ou.CorrelationContextManager.spanToContextObject(o,s,n);return l},t}();su.OpenTelemetryScopeManagerWrapper=UK;su.AsyncScopeManager=new UK});var HK=x(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.enable=au.subscriber=void 0;var n_=(_t(),En(km)),SCe=Sr(),_O=Dr(),TCe=BK(),ICe=qK(),Ep=[],wCe=function(t){try{var e=t.data,r=TCe.spanToTelemetryContract(e);ICe.AsyncScopeManager.with(e,function(){Ep.forEach(function(n){e.kind===n_.SpanKind.SERVER||e.kind===n_.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===n_.SpanKind.CLIENT||e.kind===n_.SpanKind.INTERNAL||e.kind===n_.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};au.subscriber=wCe;function ACe(t,e){if(t){var r=Ep.find(function(n){return n==e});if(r)return;Ep.length===0&&_O.channel.subscribe("azure-coretracing",au.subscriber,_O.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(SCe.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),Ep.push(e)}else Ep=Ep.filter(function(n){return n!=e}),Ep.length===0&&_O.channel.unsubscribe("azure-coretracing",au.subscriber)}au.enable=ACe});var jK=x(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.enable=cu.subscriber=void 0;var RCe=Sr(),xO=Dr(),Cp=[],PCe=function(t){t.data.event.commandName!=="ismaster"&&Cp.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};cu.subscriber=PCe;function kCe(t,e){if(t){var r=Cp.find(function(n){return n==e});if(r)return;Cp.length===0&&xO.channel.subscribe("mongodb",cu.subscriber,xO.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(RCe.StatsbeatInstrumentation.MONGODB)}),Cp.push(e)}else Cp=Cp.filter(function(n){return n!=e}),Cp.length===0&&xO.channel.unsubscribe("mongodb",cu.subscriber)}cu.enable=kCe});var VK=x(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.enable=lu.subscriber=void 0;var NCe=Sr(),bO=Dr(),Sp=[],OCe=function(t){Sp.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};lu.subscriber=OCe;function DCe(t,e){if(t){var r=Sp.find(function(n){return n==e});if(r)return;Sp.length===0&&bO.channel.subscribe("mysql",lu.subscriber,bO.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(NCe.StatsbeatInstrumentation.MYSQL)}),Sp.push(e)}else Sp=Sp.filter(function(n){return n!=e}),Sp.length===0&&bO.channel.unsubscribe("mysql",lu.subscriber)}lu.enable=DCe});var GK=x(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.enable=uu.subscriber=void 0;var LCe=Sr(),EO=Dr(),Tp=[],MCe=function(t){Tp.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};uu.subscriber=MCe;function FCe(t,e){if(t){var r=Tp.find(function(n){return n==e});if(r)return;Tp.length===0&&EO.channel.subscribe("redis",uu.subscriber,EO.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(LCe.StatsbeatInstrumentation.REDIS)}),Tp.push(e)}else Tp=Tp.filter(function(n){return n!=e}),Tp.length===0&&EO.channel.unsubscribe("redis",uu.subscriber)}uu.enable=FCe});var $K=x(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.enable=du.subscriber=void 0;var BCe=Sr(),CO=Dr(),Ip=[],UCe=function(t){Ip.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};du.subscriber=UCe;function qCe(t,e){if(t){var r=Ip.find(function(n){return n==e});if(r)return;Ip.length===0&&CO.channel.subscribe("postgres",du.subscriber,CO.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(BCe.StatsbeatInstrumentation.POSTGRES)}),Ip.push(e)}else Ip=Ip.filter(function(n){return n!=e}),Ip.length===0&&CO.channel.unsubscribe("postgres",du.subscriber)}du.enable=qCe});var xh=x((TO,zK)=>{"use strict";var MC=TO&&TO.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},yh=require("http"),_h=require("https"),FC=dr(),SO=Bn(),pu=Hm(),HCe=DK(),i_=tu(),BC=UE(),jCe=BE(),o_=dp(),VCe=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),jCe.IsInitialized&&(HK().enable(e,this._client),jK().enable(e,this._client),VK().enable(e,this._client),GK().enable(e,this._client),$K().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=yh.request,n=_h.request,i=function(o,s){try{var a=!s[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag],l=null;if(s.headers&&(l=s.headers["User-Agent"]||s.headers["user-agent"],l&&l.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(i_.CorrelationContextManager.wrapEmitter(o),e._isEnabled))if(o[t.alreadyAutoCollectedFlag]=!0,i_.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:s,request:o});else{var c=null;if(o_.w3cEnabled){var u=new BC;c=u.traceId}else{var d=o_.generateRequestId(null);c=o_.getRootId(d)}var p=i_.CorrelationContextManager.generateContextObject(c);i_.CorrelationContextManager.runWithContext(p,function(){t.trackRequest(e._client,{options:s,request:o})})}}catch(f){FC.warn("Failed to generate dependency telemetry.",SO.dumpObj(f))}};yh.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var l=r.call.apply(r,MC([yh,o],s));return i(l,o),l},_h.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var l=n.call.apply(n,MC([_h,o],s));return i(l,o),l},yh.get=function(o){for(var s,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=(s=yh.request).call.apply(s,MC([yh,o],a));return c.end(),c},_h.get=function(o){for(var s,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=(s=_h.request).call.apply(s,MC([_h,o],a));return c.end(),c}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){FC.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new HCe(r.options,r.request),i=i_.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&BC.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(o_.w3cEnabled){var a=new BC;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(SO.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var l=r.request.getHeader(pu.requestContextHeader);try{SO.safeIncludeCorrelationHeader(e,r.request,l)}catch(d){FC.warn("Request-Context header could not be set. Correlation of requests may be lost",d)}if(i&&i.operation)try{if(r.request.setHeader(pu.requestIdHeader,o),e.config.ignoreLegacyHeaders||(r.request.setHeader(pu.parentIdHeader,i.operation.id),r.request.setHeader(pu.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(pu.traceparentHeader,s||i.operation.traceparent.toString());else if(o_.w3cEnabled){var a=new BC().toString();r.request.setHeader(pu.traceparentHeader,a)}if(i.operation.tracestate){var c=i.operation.tracestate.toString();c&&r.request.setHeader(pu.traceStateHeader,c)}var u=i.customProperties.serializeToHeader();u&&r.request.setHeader(pu.correlationContextHeader,u)}catch(d){FC.warn("Correlation headers could not be set. Correlation of requests may be lost.",d)}}r.request.on&&(r.request.on("response",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects["http.ClientResponse"]=d,e.trackDependency(p)}}),r.request.on("error",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onError(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects.Error=d,e.trackDependency(p)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(d)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();zK.exports=VCe});var wO=x((dze,XK)=>{"use strict";var WK=require("http"),KK=require("https"),YK=dr(),QK=Bn(),GCe=Hm(),IO=Xk(),Hc=tu(),$Ce=wC(),zCe=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||$Ce.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?Hc.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&Hc.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return Hc.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var i=this,o=new IO(e),s=this._generateCorrelationContext(o);Hc.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(i._client,{request:e,response:r},o)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){Hc.CorrelationContextManager.wrapEmitter(s),Hc.CorrelationContextManager.wrapEmitter(a);var l=s&&!s[t.alreadyAutoCollectedFlag];s&&l&&t.INSTANCE?t.INSTANCE._registerRequest(s,a,o):o(s,a)}}},r=function(o){var s=o.addListener.bind(o);o.addListener=function(a,l){switch(a){case"request":case"checkContinue":return s(a,e(l));default:return s(a,l)}},o.on=o.addListener},n=WK.createServer;WK.createServer=function(o,s){if(s&&typeof s=="function"){var a=n(o,e(s));return r(a),a}else{var a=n(e(o));return r(a),a}};var i=KK.createServer;KK.createServer=function(o,s){var a=i(o,e(s));return r(a),a}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){YK.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=Hc.CorrelationContextManager.getCurrentContext(),i=new IO(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){YK.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var i=Hc.CorrelationContextManager.getCurrentContext(),o=n||new IO(r.request,i&&i.operation.parentId);QK.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(GCe.requestContextHeader);QK.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){if(!n.isProcessed){n.isProcessed=!0,o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var l=r.getLegacyRootId();l&&(s.properties.ai_legacyRootId=l),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,Hc.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();XK.exports=zCe});var e9=x((RO,ZK)=>{"use strict";var is=RO&&RO.__assign||function(){return is=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},is.apply(this,arguments)},AO=require("os"),wp=ii(),JK=Sr(),WCe=Bn(),KCe=dr(),YCe=WCe.w3cTraceId(),QCe=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=AO&&typeof AO.hostname=="function"&&AO.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,l={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:YCe,MachineName:o,Instance:s,RoleName:a};return l},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case wp.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case wp.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case wp.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case wp.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case wp.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=is(is({},r),{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=is(is({},r),{Message:e.data.baseData.message,SeverityLevel:wp.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(l){i+=l.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=is(is({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=is(is({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=is(is({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=JK.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=JK.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):KCe.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new wp.ContextTagKeys,t}();ZK.exports=QCe});var r9=x((pze,t9)=>{"use strict";var XCe=function(){return(Date.now()+621355968e5)*1e4};t9.exports={getTransmissionTime:XCe}});var s9=x((s_,o9)=>{"use strict";var n9=s_&&s_.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},i9=s_&&s_.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},JCe=require("https"),ZCe=xh(),PO=dr(),eSe=r9(),kO=Bn(),tSe=require("url"),os={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},rSe=function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var i=[{name:os.streamId,value:e.StreamId},{name:os.machineName,value:e.MachineName},{name:os.roleName,value:e.RoleName},{name:os.instanceName,value:e.Instance},{name:os.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",i)},t.prototype.post=function(e,r,n){return n9(this,void 0,void 0,function(){return i9(this,function(i){switch(i.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return i.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,i,o){return n9(this,void 0,void 0,function(){var s,a,l,c,u,d,p,f,m=this;return i9(this,function(h){switch(h.label){case 0:if(s=kO.stringify(e),a=(p={},p[ZCe.disableCollectionRequestOption]=!0,p.host=r&&r.length>0?r:this._config.quickPulseHost,p.method=os.method,p.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,p.headers=(f={Expect:"100-continue"},f[os.time]=eSe.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),p),o&&o.length>0&&o.forEach(function(g){return a.headers[g.name]=g.value}),i!=="post")return[3,4];if(l=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!l)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,l.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return c=h.sent(),u="Failed to get AAD bearer token for the Application. Error:",PO.info(t.TAG,u,c),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=kO.tlsRestrictedAgent,d=JCe.request(a,function(g){if(g.statusCode==200){var v=g.headers[os.subscribed]==="true",y=null;try{y=g.headers[os.endpointRedirect]?new tSe.URL(g.headers[os.endpointRedirect].toString()).host:null}catch(T){m._onError("Failed to parse redirect header from QuickPulse: "+kO.dumpObj(T))}var _=g.headers[os.pollingIntervalHint]?parseInt(g.headers[os.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,n(v,g,y,_)}else m._onError("StatusCode:"+g.statusCode+" StatusMessage:"+g.statusMessage),n()}),d.on("error",function(g){m._onError(g),n()}),d.write(s),d.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",PO.warn(t.TAG,r,e)):PO.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();o9.exports=rSe});var d9=x((a_,u9)=>{"use strict";var a9=a_&&a_.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},c9=a_&&a_.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},l9=dr(),NO=e9(),nSe=s9(),iSe=Sr(),oSe=fh(),sSe=function(){function t(e,r,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new oSe,this._sender=new nSe(this.config,n),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=NO.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=iSe.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=NO.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return a9(this,void 0,void 0,function(){var e,r,n,i,o=this;return c9(this,function(s){switch(s.label){case 0:return e=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=NO.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,i=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return a9(this,void 0,void 0,function(){return c9(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,i){e!=null?(this._isCollectingData!==e&&(l9.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,l9.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();u9.exports=sSe});var p9=x(bh=>{"use strict";var UC=bh&&bh.__assign||function(){return UC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},UC.apply(this,arguments)};Object.defineProperty(bh,"__esModule",{value:!0});bh.AutoCollectNativePerformance=void 0;var c_=fh(),aSe=dr(),cSe=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,aSe.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,i=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,l=o;a<l.length;a++){var c=l[a];s[c]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:UC(UC({},e),s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+c_.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+c_.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+c_.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+c_.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+c_.sdkVersion,n)})}},t}();bh.AutoCollectNativePerformance=cSe});var h9=x(fu=>{"use strict";var f9=fu&&fu.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},m9=fu&&fu.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(fu,"__esModule",{value:!0});fu.AzureFunctionsHook=void 0;var qC=dr(),OO=tu(),lSe=function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{qC.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new uSe:e.version.startsWith("4.")&&(this._cachedModelHelper=new dSe)),this._cachedModelHelper||(this._cachedModelHelper=null,qC.warn('AzureFunctionsHook does not support model "'+e.name+'" version "'+e.version+'"'))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return f9(e,void 0,void 0,function(){var n,i,o,s;return m9(this,function(a){try{n=this._getFuncModelHelper(),n&&(i=r.invocationContext,o=OO.CorrelationContextManager.startOperation(i),o&&(o.customProperties.setProperty("InvocationId",i.invocationId),s=i.traceContext,s.attributes&&(o.customProperties.setProperty("ProcessId",s.attributes.ProcessId),o.customProperties.setProperty("LogLevel",s.attributes.LogLevel),o.customProperties.setProperty("Category",s.attributes.Category),o.customProperties.setProperty("HostInstanceId",s.attributes.HostInstanceId),o.customProperties.setProperty("AzFuncLiveLogsSessionId",s.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=OO.CorrelationContextManager.wrapCallback(r.functionCallback,o),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=o,r.hookData.appInsightsStartTime=Date.now())))}catch(l){return qC.warn("Failed to propagate context in Azure Functions",l),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return f9(e,void 0,void 0,function(){var n,i,o,s,a=this;return m9(this,function(l){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(i=r.inputs[0],i&&(o=r.hookData.appInsightsStartTime||Date.now(),s=r.hookData.appInsightsExtractedContext,s?OO.CorrelationContextManager.runWithContext(s,function(){a._createIncomingRequestTelemetry(i,r,o,s.operation.parentId)}):this._createIncomingRequestTelemetry(i,r,o,null)))}catch(c){qC.warn("Error creating automatic incoming request in Azure Functions",c)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,i){var o=this._getFuncModelHelper().getStatusCodes(r),s=200;if(o)for(var a=0,l=o;a<l.length;a++){var c=l[a];if(typeof c=="number"&&Number.isInteger(c)){s=c;break}else if(typeof c=="string"){var u=parseInt(c);if(!isNaN(u)){s=u;break}}}else s=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:s,success:typeof s=="number"?0<s&&s<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t}();fu.AzureFunctionsHook=lSe;var uSe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,i=r.bindingDefinitions.find(function(o){return o.direction==="out"&&o.type.toLowerCase()==="http"});return i?.name==="$return"?n=e.result:i&&r.bindings&&r.bindings[i.name]!==void 0?n=r.bindings[i.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var i;return((i=n.type)===null||i===void 0?void 0:i.toLowerCase())==="httptrigger"})},t}(),dSe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t}()});var DO=x((hze,y9)=>{"use strict";var pSe=dp(),g9=mO(),fSe=dr(),v9=Sr(),mSe=require("url"),hSe=Nb(),gSe=function(){function t(e){this._endpointBase=v9.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=g9.parse(e),i=g9.parse(r),o=!n.instrumentationkey&&Object.keys(n).length>0?null:e,s=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||n.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||i.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||i.liveendpoint||process.env[t.ENV_quickPulseHost]||v9.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new mSe.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||i.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=pSe.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||fSe.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=hSe.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t}();y9.exports=gSe});function HC(){return LO.create()}var _9,LO,MO=k(()=>{_9=new Set(["Deserialize","Serialize","Retry","Sign"]),LO=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!_9.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!_9.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),o=n("None"),s=n("Deserialize"),a=n("Retry"),l=n("Sign"),c=[i,o,s,a,l];function u(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?l:o}for(let m of this._policies){let h=m.policy,g=m.options,v=h.name;if(r.has(v))throw new Error("Duplicate policy names not allowed in pipeline");let y={policy:h,dependsOn:new Set,dependants:new Set};g.afterPhase&&(y.afterPhase=u(g.afterPhase),y.afterPhase.hasAfterPolicies=!0),r.set(v,y),u(g.phase).policies.add(y)}for(let m of this._policies){let{policy:h,options:g}=m,v=h.name,y=r.get(v);if(!y)throw new Error(`Missing node for policy ${v}`);if(g.afterPolicies)for(let _ of g.afterPolicies){let T=r.get(_);T&&(y.dependsOn.add(T),T.dependants.add(y))}if(g.beforePolicies)for(let _ of g.beforePolicies){let T=r.get(_);T&&(T.dependsOn.add(y),y.dependants.add(T))}}function d(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(let g of h.dependants)g.dependsOn.delete(h);r.delete(h.policy.name),m.policies.delete(h)}}function p(){for(let m of c){if(d(m),m.policies.size>0&&m!==o){o.hasRun||d(o);return}m.hasAfterPolicies&&d(o)}}let f=0;for(;r.size>0;){f++;let m=e.length;if(p(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}});function E9(t,...e){process.stderr.write(`${b9.default.format(t,...e)}${x9.EOL}`)}var x9,b9,C9=k(()=>{x9=require("os"),b9=Te(require("util"))});function UO(t){T9=t,FO=[],BO=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?BO.push(new RegExp(`^${n.substr(1)}$`)):FO.push(new RegExp(`^${n}$`));for(let n of jC)n.enabled=qO(n.namespace)}function qO(t){if(t.endsWith("*"))return!0;for(let e of BO)if(e.test(t))return!1;for(let e of FO)if(e.test(t))return!0;return!1}function vSe(){let t=T9||"";return UO(""),t}function w9(t){let e=Object.assign(r,{enabled:qO(t),destroy:ySe,log:I9.log,namespace:t,extend:_Se});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return jC.push(e),e}function ySe(){let t=jC.indexOf(this);return t>=0?(jC.splice(t,1),!0):!1}function _Se(t){let e=w9(`${this.namespace}:${t}`);return e.log=this.log,e}var S9,T9,FO,BO,jC,I9,Eh,A9=k(()=>{C9();S9=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,FO=[],BO=[],jC=[];S9&&UO(S9);I9=Object.assign(t=>w9(t),{enable:UO,enabled:qO,disable:vSe,log:E9});Eh=I9});function xSe(t){if(t&&!O9(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${VO.join(",")}`);HO=t;let e=[];for(let r of P9)N9(r)&&e.push(r.namespace);Eh.enable(e.join(","))}function $C(t){let e=jO.extend(t);return k9(jO,e),{error:GC(e,"error"),warning:GC(e,"warning"),info:GC(e,"info"),verbose:GC(e,"verbose")}}function k9(t,e){e.log=(...r)=>{t.log(...r)}}function GC(t,e){let r=Object.assign(t.extend(e),{level:e});if(k9(t,r),N9(r)){let n=Eh.disable();Eh.enable(n+","+r.namespace)}return P9.add(r),r}function N9(t){return!!(HO&&R9[t.level]<=R9[HO])}function O9(t){return VO.includes(t)}var P9,VC,HO,jO,VO,R9,GO=k(()=>{A9();P9=new Set,VC=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,jO=Eh("azure");jO.log=(...t)=>{Eh.log(...t)};VO=["verbose","info","warning","error"];VC&&(O9(VC)?xSe(VC):console.error(`AZURE_LOG_LEVEL set to unknown log level '${VC}'; logging is not enabled. Acceptable values: ${VO.join(", ")}.`));R9={verbose:400,info:300,warning:200,error:100}});var jn,Ch=k(()=>{GO();jn=$C("core-rest-pipeline")});var $O,zC,D9=k(()=>{zC=typeof process<"u"&&!!process.version&&!!(!(($O=process.versions)===null||$O===void 0)&&$O.node)});function zO(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);let e=Sh.get(t);e&&e.slice().forEach(r=>{r.call(t,{type:"abort"})}),WC.set(t,!0)}var Sh,WC,l_,L9=k(()=>{Sh=new WeakMap,WC=new WeakMap,l_=class t{constructor(){this.onabort=null,Sh.set(this,[]),WC.set(this,!1)}get aborted(){if(!WC.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return WC.get(this)}static get none(){return new t}addEventListener(e,r){if(!Sh.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");Sh.get(this).push(r)}removeEventListener(e,r){if(!Sh.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=Sh.get(this),i=n.indexOf(r);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var Oa,u_,M9=k(()=>{L9();Oa=class extends Error{constructor(e){super(e),this.name="AbortError"}},u_=class{constructor(e){if(this._signal=new l_,!!e){Array.isArray(e)||(e=arguments);for(let r of e)r.aborted?this.abort():r.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){zO(this._signal)}static timeout(e){let r=new l_,n=setTimeout(zO,e,r);return typeof n.unref=="function"&&n.unref(),r}}});var KC=k(()=>{M9()});function WO(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var F9=k(()=>{});function d_(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var KO=k(()=>{});function Th(t){if(d_(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}function Ih(t){if(Th(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}var B9=k(()=>{KO()});var wh=k(()=>{D9();F9();KO();B9()});var YO,bSe,ESe,Ah,QO=k(()=>{wh();YO="REDACTED",bSe=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],ESe=["api-version"],Ah=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=bSe.concat(e),r=ESe.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||d_(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=YO;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=YO;return r}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,YO);return r.toString()}}});function YC(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:jn.info,n=new Ah({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:XO,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let s=await o(i);return r(`Response status code: ${s.status}`),r(`Headers: ${n.sanitize(s.headers)}`),s}}}var XO,JO=k(()=>{Ch();QO();XO="logPolicy"});function QC(t={}){let{maxRetries:e=20}=t;return{name:ZO,async sendRequest(r,n){let i=await n(r);return q9(n,i,e)}}}async function q9(t,e,r,n=0){let{request:i,status:o,headers:s}=e,a=s.get("location");if(a&&(o===300||o===301&&U9.includes(i.method)||o===302&&U9.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(a,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let c=await t(i);return q9(t,c,r,n+1)}return e}var ZO,U9,eD=k(()=>{ZO="redirectPolicy",U9=["GET","HEAD"]});function H9(){return"User-Agent"}function j9(t){t.set("Node",process.version),t.set("OS",`(${Rh.arch()}-${Rh.type()}-${Rh.release()})`)}var Rh,V9=k(()=>{Rh=Te(require("os"))});var XC,tD=k(()=>{XC="1.10.1"});function CSe(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}function G9(){return H9()}function JC(t){let e=new Map;e.set("core-rest-pipeline",XC),j9(e);let r=CSe(e);return t?`${t} ${r}`:r}var rD=k(()=>{V9();tD()});function ZC(t={}){let e=JC(t.userAgentPrefix);return{name:nD,async sendRequest(r,n){return r.headers.has($9)||r.headers.set($9,e),n(r)}}}var $9,nD,iD=k(()=>{rD();$9=G9(),nD="userAgentPolicy"});function eS(){return{name:oD,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}var oD,sD=k(()=>{oD="decompressResponsePolicy"});function tS(t,e,r){return new Promise((n,i)=>{let o,s,a=()=>i(new Oa(r?.abortErrorMsg?r?.abortErrorMsg:SSe)),l=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),l(),a()),r?.abortSignal&&r.abortSignal.aborted)return a();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})}function z9(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}var SSe,rS=k(()=>{KC();SSe="The operation was aborted."});function W9(t){if(t&&[429,503].includes(t.status))try{for(let i of TSe){let o=z9(t,i);if(o===0||o)return o*(i===aD?1e3:1)}let e=t.headers.get(aD);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function K9(t){return Number.isFinite(W9(t))}function nS(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=W9(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var aD,TSe,iS=k(()=>{rS();aD="Retry-After",TSe=["retry-after-ms","x-ms-retry-after-ms",aD]});function Ph(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:ISe,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:wSe,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:l}){let c=RSe(l),u=c&&t.ignoreSystemErrors,d=ASe(a),p=d&&t.ignoreHttpStatusCodes;if(a&&(K9(a)||!d)||p||u)return{skipStrategy:!0};if(l&&!c&&!d)return{errorToThrow:l};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+WO(0,h/2),{retryAfterInMs:o}}}}function ASe(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function RSe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}var ISe,wSe,oS=k(()=>{wh();iS();ISe=1e3,wSe=1e3*64});function Da(t,e={maxRetries:3}){let r=e.logger||Y9;return{name:PSe,async sendRequest(n,i){var o,s;let a,l,c=-1;e:for(;;){c+=1,a=void 0,l=void 0;try{r.info(`Retry ${c}: Attempting to send request`,n.requestId),a=await i(n),r.info(`Retry ${c}: Received a response from request`,n.requestId)}catch(u){if(r.error(`Retry ${c}: Received an error from request`,n.requestId),l=u,!u||l.name!=="RestError")throw u;a=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${c}: Request aborted.`),new Oa;if(c>=((s=e.maxRetries)!==null&&s!==void 0?s:3)){if(r.info(`Retry ${c}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${c}: Processing ${t.length} retry strategies.`);t:for(let u of t){let d=u.logger||Y9;d.info(`Retry ${c}: Processing retry strategy ${u.name}.`);let p=u.retry({retryCount:c,response:a,responseError:l});if(p.skipStrategy){d.info(`Retry ${c}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=p;if(f)throw d.error(`Retry ${c}: Retry strategy ${u.name} throws error:`,f),f;if(m||m===0){d.info(`Retry ${c}: Retry strategy ${u.name} retries after ${m}`),await tS(m,void 0,{abortSignal:n.abortSignal});continue e}if(h){d.info(`Retry ${c}: Retry strategy ${u.name} redirects to ${h}`),n.url=h;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(a)return r.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var Y9,PSe,kh=k(()=>{rS();GO();KC();Y9=$C("core-rest-pipeline retryPolicy"),PSe="retryPolicy"});function sS(t={}){var e;return{name:kSe,sendRequest:Da([nS(),Ph(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var kSe,cD=k(()=>{oS();iS();kh();kSe="defaultRetryPolicy"});var J9=x((mWe,X9)=>{var Q9=require("stream").Stream,NSe=require("util");X9.exports=Ds;function Ds(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}NSe.inherits(Ds,Q9);Ds.create=function(t,e){var r=new this;e=e||{};for(var n in e)r[n]=e[n];r.source=t;var i=t.emit;return t.emit=function(){return r._handleEmit(arguments),i.apply(t,arguments)},t.on("error",function(){}),r.pauseStream&&t.pause(),r};Object.defineProperty(Ds.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Ds.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Ds.prototype.resume=function(){this._released||this.release(),this.source.resume()};Ds.prototype.pause=function(){this.source.pause()};Ds.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};Ds.prototype.pipe=function(){var t=Q9.prototype.pipe.apply(this,arguments);return this.resume(),t};Ds.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};Ds.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var r7=x((hWe,t7)=>{var OSe=require("util"),e7=require("stream").Stream,Z9=J9();t7.exports=Mr;function Mr(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}OSe.inherits(Mr,e7);Mr.create=function(t){var e=new this;t=t||{};for(var r in t)e[r]=t[r];return e};Mr.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};Mr.prototype.append=function(t){var e=Mr.isStreamLike(t);if(e){if(!(t instanceof Z9)){var r=Z9.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};Mr.prototype.pipe=function(t,e){return e7.prototype.pipe.call(this,t,e),this.resume(),t};Mr.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};Mr.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(r){var n=Mr.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};Mr.prototype._pipeNext=function(t){this._currentStream=t;var e=Mr.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var r=t;this.write(r),this._getNext()};Mr.prototype._handleErrors=function(t){var e=this;t.on("error",function(r){e._emitError(r)})};Mr.prototype.write=function(t){this.emit("data",t)};Mr.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};Mr.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};Mr.prototype.end=function(){this._reset(),this.emit("end")};Mr.prototype.destroy=function(){this._reset(),this.emit("close")};Mr.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};Mr.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};Mr.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};Mr.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var n7=x((gWe,DSe)=>{DSe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var o7=x((vWe,i7)=>{i7.exports=n7()});var c7=x(Vi=>{"use strict";var aS=o7(),LSe=require("path").extname,s7=/^\s*([^;\s]*)(?:;|\s|$)/,MSe=/^text\//i;Vi.charset=a7;Vi.charsets={lookup:a7};Vi.contentType=FSe;Vi.extension=BSe;Vi.extensions=Object.create(null);Vi.lookup=USe;Vi.types=Object.create(null);qSe(Vi.extensions,Vi.types);function a7(t){if(!t||typeof t!="string")return!1;var e=s7.exec(t),r=e&&aS[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&MSe.test(e[1])?"UTF-8":!1}function FSe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Vi.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=Vi.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function BSe(t){if(!t||typeof t!="string")return!1;var e=s7.exec(t),r=e&&Vi.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function USe(t){if(!t||typeof t!="string")return!1;var e=LSe("x."+t).toLowerCase().substr(1);return e&&Vi.types[e]||!1}function qSe(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(aS).forEach(function(i){var o=aS[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var l=s[a];if(e[l]){var c=r.indexOf(aS[e[l]].source),u=r.indexOf(o.source);if(e[l]!=="application/octet-stream"&&(c>u||c===u&&e[l].substr(0,12)==="application/"))continue}e[l]=i}}})}});var u7=x((_We,l7)=>{l7.exports=HSe;function HSe(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var lD=x((xWe,p7)=>{var d7=u7();p7.exports=jSe;function jSe(t){var e=!1;return d7(function(){e=!0}),function(n,i){e?t(n,i):d7(function(){t(n,i)})}}});var uD=x((bWe,f7)=>{f7.exports=VSe;function VSe(t){Object.keys(t.jobs).forEach(GSe.bind(t)),t.jobs={}}function GSe(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var dD=x((EWe,h7)=>{var m7=lD(),$Se=uD();h7.exports=zSe;function zSe(t,e,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=WSe(e,i,t[i],function(o,s){i in r.jobs&&(delete r.jobs[i],o?$Se(r):r.results[i]=s,n(o,r.results))})}function WSe(t,e,r,n){var i;return t.length==2?i=t(r,m7(n)):i=t(r,e,m7(n)),i}});var pD=x((CWe,g7)=>{g7.exports=KSe;function KSe(t,e){var r=!Array.isArray(t),n={index:0,keyedList:r||e?Object.keys(t):null,jobs:{},results:r?{}:[],size:r?Object.keys(t).length:t.length};return e&&n.keyedList.sort(r?e:function(i,o){return e(t[i],t[o])}),n}});var fD=x((SWe,v7)=>{var YSe=uD(),QSe=lD();v7.exports=XSe;function XSe(t){Object.keys(this.jobs).length&&(this.index=this.size,YSe(this),QSe(t)(null,this.results))}});var _7=x((TWe,y7)=>{var JSe=dD(),ZSe=pD(),eTe=fD();y7.exports=tTe;function tTe(t,e,r){for(var n=ZSe(t);n.index<(n.keyedList||t).length;)JSe(t,e,n,function(i,o){if(i){r(i,o);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return eTe.bind(n,r)}});var mD=x((IWe,cS)=>{var x7=dD(),rTe=pD(),nTe=fD();cS.exports=iTe;cS.exports.ascending=b7;cS.exports.descending=oTe;function iTe(t,e,r,n){var i=rTe(t,r);return x7(t,e,i,function o(s,a){if(s){n(s,a);return}if(i.index++,i.index<(i.keyedList||t).length){x7(t,e,i,o);return}n(null,i.results)}),nTe.bind(i,n)}function b7(t,e){return t<e?-1:t>e?1:0}function oTe(t,e){return-1*b7(t,e)}});var C7=x((wWe,E7)=>{var sTe=mD();E7.exports=aTe;function aTe(t,e,r){return sTe(t,e,null,r)}});var T7=x((AWe,S7)=>{S7.exports={parallel:_7(),serial:C7(),serialOrdered:mD()}});var w7=x((RWe,I7)=>{I7.exports=function(t,e){return Object.keys(e).forEach(function(r){t[r]=t[r]||e[r]}),t}});var P7=x((PWe,R7)=>{var yD=r7(),A7=require("util"),hD=require("path"),cTe=require("http"),lTe=require("https"),uTe=require("url").parse,dTe=require("fs"),pTe=require("stream").Stream,gD=c7(),fTe=T7(),vD=w7();R7.exports=Nt;A7.inherits(Nt,yD);function Nt(t){if(!(this instanceof Nt))return new Nt(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],yD.call(this),t=t||{};for(var e in t)this[e]=t[e]}Nt.LINE_BREAK=`\r
`;Nt.DEFAULT_CONTENT_TYPE="application/octet-stream";Nt.prototype.append=function(t,e,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=yD.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),A7.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(t,e,r),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,r)};Nt.prototype._trackLength=function(t,e,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+Nt.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof pTe))&&(r.knownLength||this._valuesToMeasure.push(e))};Nt.prototype._lengthRetriever=function(t,e){t.hasOwnProperty("fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):dTe.stat(t.path,function(r,n){var i;if(r){e(r);return}i=n.size-(t.start?t.start:0),e(null,i)}):t.hasOwnProperty("httpVersion")?e(null,+t.headers["content-length"]):t.hasOwnProperty("httpModule")?(t.on("response",function(r){t.pause(),e(null,+r.headers["content-length"])}),t.resume()):e("Unknown stream")};Nt.prototype._multiPartHeader=function(t,e,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(e,r),i=this._getContentType(e,r),o="",s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&vD(s,r.header);var a;for(var l in s)s.hasOwnProperty(l)&&(a=s[l],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=l+": "+a.join("; ")+Nt.LINE_BREAK)));return"--"+this.getBoundary()+Nt.LINE_BREAK+o+Nt.LINE_BREAK};Nt.prototype._getContentDisposition=function(t,e){var r,n;return typeof e.filepath=="string"?r=hD.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t.name||t.path?r=hD.basename(e.filename||t.name||t.path):t.readable&&t.hasOwnProperty("httpVersion")&&(r=hD.basename(t.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};Nt.prototype._getContentType=function(t,e){var r=e.contentType;return!r&&t.name&&(r=gD.lookup(t.name)),!r&&t.path&&(r=gD.lookup(t.path)),!r&&t.readable&&t.hasOwnProperty("httpVersion")&&(r=t.headers["content-type"]),!r&&(e.filepath||e.filename)&&(r=gD.lookup(e.filepath||e.filename)),!r&&typeof t=="object"&&(r=Nt.DEFAULT_CONTENT_TYPE),r};Nt.prototype._multiPartFooter=function(){return function(t){var e=Nt.LINE_BREAK,r=this._streams.length===0;r&&(e+=this._lastBoundary()),t(e)}.bind(this)};Nt.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+Nt.LINE_BREAK};Nt.prototype.getHeaders=function(t){var e,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)t.hasOwnProperty(e)&&(r[e.toLowerCase()]=t[e]);return r};Nt.prototype.setBoundary=function(t){this._boundary=t};Nt.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};Nt.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?t=Buffer.concat([t,this._streams[r]]):t=Buffer.concat([t,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(Nt.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};Nt.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;e<24;e++)t+=Math.floor(Math.random()*10).toString(16);this._boundary=t};Nt.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};Nt.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};Nt.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}fTe.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){t(r);return}n.forEach(function(i){e+=i}),t(null,e)})};Nt.prototype.submit=function(t,e){var r,n,i={method:"post"};return typeof t=="string"?(t=uTe(t),n=vD({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},i)):(n=vD(t,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(t.headers),n.protocol=="https:"?r=lTe.request(n):r=cTe.request(n),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&r.setHeader("Content-Length",s),this.pipe(r),e){var a,l=function(c,u){return r.removeListener("error",l),r.removeListener("response",a),e.call(this,c,u)};a=l.bind(this,null),r.on("error",l),r.on("response",a)}}.bind(this)),r};Nt.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};Nt.prototype.toString=function(){return"[object FormData]"}});function lS(){return{name:_D,async sendRequest(t,e){if(t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?(t.body=mTe(t.formData),t.formData=void 0):await hTe(t.formData,t)}return e(t)}}}function mTe(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}async function hTe(t,e){let r=new k7.default;for(let i of Object.keys(t)){let o=t[i];if(Array.isArray(o))for(let s of o)r.append(i,s);else r.append(i,o)}e.body=r,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${r.getBoundary()}`);try{let i=await new Promise((o,s)=>{r.getLength((a,l)=>{a?s(a):o(l)})});e.headers.set("Content-Length",i)}catch{}}var k7,_D,xD=k(()=>{k7=Te(P7()),_D="formDataPolicy"});var N7=x(bD=>{"use strict";Object.defineProperty(bD,"__esModule",{value:!0});function gTe(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(o,s)=>{o?i(o):n(s)})})}}bD.default=gTe});var SD=x((CD,D7)=>{"use strict";var O7=CD&&CD.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},vTe=require("events"),yTe=O7(Ho()),_Te=O7(N7()),f_=yTe.default("agent-base");function xTe(t){return!!t&&typeof t.addRequest=="function"}function ED(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function uS(t,e){return new uS.Agent(t,e)}(function(t){class e extends vTe.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:ED()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:ED()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=ED()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,a=null,l=o.timeout||this.timeout,c=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},u=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${l}ms`);f.code="ETIMEOUT",c(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),c(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),xTe(f)){f_("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);c(m)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(f_("Converting legacy callback function to promise"),this.promisifiedCallback=_Te.default(this.callback)):this.promisifiedCallback=this.callback),typeof l=="number"&&l>0&&(a=setTimeout(u,l)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{f_("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){f_("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){f_("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(uS||(uS={}));D7.exports=uS});var L7=x(h_=>{"use strict";var bTe=h_&&h_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h_,"__esModule",{value:!0});var ETe=bTe(Ho()),m_=ETe.default("https-proxy-agent:parse-proxy-response");function CTe(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?u(d):t.once("readable",o)}function s(){t.removeListener("end",l),t.removeListener("error",c),t.removeListener("close",a),t.removeListener("readable",o)}function a(d){m_("onclose had error %o",d)}function l(){m_("onend")}function c(d){s(),m_("onerror %o",d),r(d)}function u(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){m_("have not received end of HTTP headers yet..."),o();return}let m=p.toString("ascii",0,p.indexOf(`\r
`)),h=+m.split(" ")[1];m_("got proxy server response: %o",m),e({statusCode:h,buffered:p})}t.on("error",c),t.on("close",a),t.on("end",l),o()})}h_.default=CTe});var B7=x(Ap=>{"use strict";var STe=Ap&&Ap.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Nh=Ap&&Ap.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ap,"__esModule",{value:!0});var M7=Nh(require("net")),F7=Nh(require("tls")),TTe=Nh(require("url")),ITe=Nh(require("assert")),wTe=Nh(Ho()),ATe=SD(),RTe=Nh(L7()),g_=wTe.default("https-proxy-agent:agent"),TD=class extends ATe.Agent{constructor(e){let r;if(typeof e=="string"?r=TTe.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");g_("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||NTe(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return STe(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(g_("Creating `tls.Socket`: %o",n),o=F7.default.connect(n)):(g_("Creating `net.Socket`: %o",n),o=M7.default.connect(n));let s=Object.assign({},n.headers),l=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:c,port:u,secureEndpoint:d}=r;kTe(u,d)||(c+=`:${u}`),s.Host=c,s.Connection="close";for(let g of Object.keys(s))l+=`${g}: ${s[g]}\r
`;let p=RTe.default(o);o.write(`${l}\r
`);let{statusCode:f,buffered:m}=yield p;if(f===200){if(e.once("socket",PTe),r.secureEndpoint){g_("Upgrading socket connection to TLS");let g=r.servername||r.host;return F7.default.connect(Object.assign(Object.assign({},OTe(r,"host","hostname","path","port")),{socket:o,servername:g}))}return o}o.destroy();let h=new M7.default.Socket({writable:!1});return h.readable=!0,e.once("socket",g=>{g_("replaying proxy buffer for failed request"),ITe.default(g.listenerCount("data")>0),g.push(m),g.push(null)}),h})}};Ap.default=TD;function PTe(t){t.resume()}function kTe(t,e){return!!(!e&&t===80||e&&t===443)}function NTe(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function OTe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var q7=x((AD,U7)=>{"use strict";var DTe=AD&&AD.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ID=DTe(B7());function wD(t){return new ID.default(t)}(function(t){t.HttpsProxyAgent=ID.default,t.prototype=ID.default.prototype})(wD||(wD={}));U7.exports=wD});var H7=x(RD=>{"use strict";Object.defineProperty(RD,"__esModule",{value:!0});function LTe(t,e,{signal:r}={}){return new Promise((n,i)=>{function o(){r?.removeEventListener("abort",o),t.removeListener(e,s),t.removeListener("error",a)}function s(...l){o(),n(l)}function a(l){o(),i(l)}r?.addEventListener("abort",o),t.on(e,s),t.on("error",a)})}RD.default=LTe});var j7=x(Rp=>{"use strict";var MTe=Rp&&Rp.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},v_=Rp&&Rp.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rp,"__esModule",{value:!0});var FTe=v_(require("net")),BTe=v_(require("tls")),PD=v_(require("url")),UTe=v_(Ho()),qTe=v_(H7()),HTe=SD(),mu=(0,UTe.default)("http-proxy-agent");function jTe(t){return typeof t=="string"?/^https:?$/i.test(t):!1}var kD=class extends HTe.Agent{constructor(e){let r;if(typeof e=="string"?r=PD.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");mu("Creating new HttpProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||jTe(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return MTe(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=PD.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=r.hostname||r.host||null),o.port==null&&typeof r.port&&(o.port=String(r.port)),o.port==="80"&&(o.port=""),e.path=PD.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let s;if(i?(mu("Creating `tls.Socket`: %o",n),s=BTe.default.connect(n)):(mu("Creating `net.Socket`: %o",n),s=FTe.default.connect(n)),e._header){let a,l;mu("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(mu("Patching connection write() output buffer with updated header"),a=e.output[0],l=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(l),mu("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(mu("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,l=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(l),mu("Output buffer: %o",e.outputData[0].data))}return yield(0,qTe.default)(s,"connect"),s})}};Rp.default=kD});var G7=x((DD,V7)=>{"use strict";var VTe=DD&&DD.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ND=VTe(j7());function OD(t){return new ND.default(t)}(function(t){t.HttpProxyAgent=ND.default,t.prototype=ND.default.prototype})(OD||(OD={}));V7.exports=OD});function dS(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function YTe(){if(!process)return;let t=dS(GTe),e=dS(zTe),r=dS($Te);return t||e||r}function QTe(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}function XTe(){let t=dS(WTe);return Y7=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function MD(t){if(!t&&(t=YTe(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function z7(t,{headers:e,tlsSettings:r}){let n;try{n=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}r&&jn.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:t.port,protocol:n.protocol,headers:e.toJSON()};return t.username&&t.password?i.auth=`${t.username}:${t.password}`:t.username&&(i.auth=`${t.username}`),i}function JTe(t,e){if(t.agent)return;let n=new URL(t.url).protocol!=="https:",i=t.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=z7(i,t);e.httpProxyAgent=new K7.HttpProxyAgent(o)}t.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=z7(i,t);e.httpsProxyAgent=new W7.HttpsProxyAgent(o)}t.agent=e.httpsProxyAgent}}function pS(t=MD(),e){Y7||$7.push(...XTe());let r={};return{name:LD,async sendRequest(n,i){var o;return!n.proxySettings&&!QTe(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:$7,e?.customNoProxyList?void 0:KTe)&&(n.proxySettings=t),n.proxySettings&&JTe(n,r),i(n)}}}var W7,K7,GTe,$Te,zTe,WTe,LD,$7,Y7,KTe,FD=k(()=>{W7=Te(q7()),K7=Te(G7());Ch();GTe="HTTPS_PROXY",$Te="HTTP_PROXY",zTe="ALL_PROXY",WTe="NO_PROXY",LD="proxyPolicy",$7=[],Y7=!1,KTe=new Map});function fS(t="x-ms-client-request-id"){return{name:BD,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}var BD,UD=k(()=>{BD="setClientRequestIdPolicy"});function mS(t){return{name:qD,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}var qD,HD=k(()=>{qD="tlsPolicy"});function Q7(t={}){let e=new jD(t.parentContext);return t.span&&(e=e.setValue(Oh.span,t.span)),t.namespace&&(e=e.setValue(Oh.namespace,t.namespace)),e}var Oh,jD,VD=k(()=>{Oh={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};jD=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}}});function ZTe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function eIe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:ZTe(),tracingContext:Q7({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function y_(){return GD||(GD=eIe()),GD}var GD,X7=k(()=>{VD()});function $D(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(c,u,d){var p;let f=y_().startSpan(c,Object.assign(Object.assign({},d),{packageName:r,packageVersion:n,tracingContext:(p=u?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(Oh.namespace)||(m=m.setValue(Oh.namespace,e)),h.setAttribute("az.namespace",m.getValue(Oh.namespace));let g=Object.assign({},u,{tracingOptions:Object.assign(Object.assign({},u?.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:g}}async function o(c,u,d,p){let{span:f,updatedOptions:m}=i(c,u,p);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(c,u,...d){return y_().withContext(c,u,...d)}function a(c){return y_().parseTraceparentHeader(c)}function l(c){return y_().createRequestHeaders(c)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:l}}var J7=k(()=>{X7();VD()});var Z7=k(()=>{J7()});var eY,tY,rY=k(()=>{eY=require("util"),tY=eY.inspect.custom});function hS(t){return t instanceof vo?!0:Th(t)&&t.name==="RestError"}var tIe,vo,gS=k(()=>{wh();rY();QO();tIe=new Ah,vo=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,this.request=r.request,this.response=r.response,Object.setPrototypeOf(this,t.prototype)}[tY](){return`RestError: ${this.message} 
 ${tIe.sanitize(this)}`}};vo.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";vo.PARSE_ERROR="PARSE_ERROR"});function vS(t={}){let e=JC(t.userAgentPrefix),r=rIe();return{name:zD,async sendRequest(n,i){var o,s;if(!r||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:a,tracingContext:l}=(s=nIe(r,n,e))!==null&&s!==void 0?s:{};if(!a||!l)return i(n);try{let c=await r.withContext(l,i,n);return oIe(a,c),c}catch(c){throw iIe(a,c),c}}}}function rIe(){try{return $D({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:XC})}catch(t){jn.warning(`Error when creating the TracingClient: ${Ih(t)}`);return}}function nIe(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}r&&n.setAttribute("http.user_agent",r);let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))e.headers.set(s,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){jn.warning(`Skipping creating a tracing span due to an error: ${Ih(n)}`);return}}function iIe(t,e){try{t.setStatus({status:"error",error:Th(e)?e:void 0}),hS(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){jn.warning(`Skipping tracing span processing due to an error: ${Ih(r)}`)}}function oIe(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){jn.warning(`Skipping tracing span processing due to an error: ${Ih(r)}`)}}var zD,WD=k(()=>{Z7();tD();rD();Ch();wh();gS();zD="tracingPolicy"});function nY(t){let e=HC();return zC&&(t.tlsOptions&&e.addPolicy(mS(t.tlsOptions)),e.addPolicy(pS(t.proxyOptions)),e.addPolicy(eS())),e.addPolicy(lS()),e.addPolicy(ZC(t.userAgentOptions)),e.addPolicy(fS()),e.addPolicy(sS(t.retryOptions),{phase:"Retry"}),e.addPolicy(vS(t.userAgentOptions),{afterPhase:"Retry"}),zC&&e.addPolicy(QC(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(YC(t.loggingOptions),{afterPhase:"Sign"}),e}var iY=k(()=>{JO();MO();eD();iD();sD();cD();xD();wh();FD();UD();HD();WD()});function yS(t){return t.toLowerCase()}function*sIe(t){for(let e of t.values())yield[e.name,e.value]}function Dh(t){return new KD(t)}var KD,_S=k(()=>{KD=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(yS(e),{name:e,value:String(r)})}get(e){var r;return(r=this._headersMap.get(yS(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(yS(e))}delete(e){this._headersMap.delete(yS(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return sIe(this._headersMap)}}});function __(t){return t&&typeof t.pipe=="function"}function oY(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function aY(t){return t&&typeof t.byteLength=="number"}function cIe(t){let e=Dh();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function lIe(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=bS.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=bS.createInflate();return t.pipe(n),n}return t}function uIe(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new vo(`Error reading response as text: ${i.message}`,{code:vo.PARSE_ERROR}))})})}function dIe(t){return t?Buffer.isBuffer(t)?t.length:__(t)?null:aY(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function cY(){return new YD}var Lh,Mh,bS,sY,aIe,xS,YD,lY=k(()=>{Lh=Te(require("http")),Mh=Te(require("https")),bS=Te(require("zlib")),sY=require("stream");KC();_S();gS();Ch();aIe={};xS=class extends sY.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},YD=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new u_,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new Oa("The operation was aborted.");s=d=>{d.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),l=a?.includes("gzip")||a?.includes("deflate"),c=typeof e.body=="function"?e.body():e.body;if(c&&!e.headers.has("Content-Length")){let d=dIe(c);d!==null&&e.headers.set("Content-Length",d)}let u;try{if(c&&e.onUploadProgress){let g=e.onUploadProgress,v=new xS(g);v.on("error",y=>{jn.error("Error in upload progress",y)}),__(c)?c.pipe(v):v.end(c),c=v}let d=await this.makeRequest(e,o,c),p=cIe(d),m={status:(r=d.statusCode)!==null&&r!==void 0?r:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),m;u=l?lIe(d,p):d;let h=e.onDownloadProgress;if(h){let g=new xS(h);g.on("error",v=>{jn.error("Error in download progress",v)}),u.pipe(g),u=g}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=u:m.bodyAsText=await uIe(u),m}finally{if(e.abortSignal&&s){let d=Promise.resolve();__(c)&&(d=oY(c));let p=Promise.resolve();__(u)&&(p=oY(u)),Promise.all([d,p]).then(()=>{var f;s&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{jn.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),s=o.protocol!=="https:";if(s&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let l={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((c,u)=>{let d=s?Lh.request(l,c):Mh.request(l,c);d.once("error",p=>{var f;u(new vo(p.message,{code:(f=p.code)!==null&&f!==void 0?f:vo.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let p=new Oa("The operation was aborted.");d.destroy(p),u(p)}),n&&__(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):aY(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(jn.error("Unrecognized body type",n),u(new vo("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?Lh.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Lh.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return Mh.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:aIe,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(jn.info("No cached TLS Agent exist, creating a new Agent"),s=new Mh.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function uY(){return cY()}var dY=k(()=>{lY()});function QD(){return ES>CS.length-16&&(pY.default.randomFillSync(CS),ES=0),CS.slice(ES,ES+=16)}var pY,CS,ES,fY=k(()=>{pY=Te(require("crypto")),CS=new Uint8Array(256),ES=CS.length});var mY,hY=k(()=>{mY=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function pIe(t){return typeof t=="string"&&mY.test(t)}var gY,vY=k(()=>{hY();gY=pIe});function fIe(t,e=0){let r=(Vn[t[e+0]]+Vn[t[e+1]]+Vn[t[e+2]]+Vn[t[e+3]]+"-"+Vn[t[e+4]]+Vn[t[e+5]]+"-"+Vn[t[e+6]]+Vn[t[e+7]]+"-"+Vn[t[e+8]]+Vn[t[e+9]]+"-"+Vn[t[e+10]]+Vn[t[e+11]]+Vn[t[e+12]]+Vn[t[e+13]]+Vn[t[e+14]]+Vn[t[e+15]]).toLowerCase();if(!gY(r))throw TypeError("Stringified UUID is invalid");return r}var Vn,yY,_Y=k(()=>{vY();Vn=[];for(let t=0;t<256;++t)Vn.push((t+256).toString(16).substr(1));yY=fIe});function mIe(t,e,r){t=t||{};let n=t.random||(t.rng||QD)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return yY(n)}var XD,xY=k(()=>{fY();_Y();XD=mIe});var bY=k(()=>{xY()});function EY(){return XD()}var CY=k(()=>{bY()});function SY(t){return new JD(t)}var JD,TY=k(()=>{_S();CY();JD=class{constructor(e){var r,n,i,o,s,a,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:Dh(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(s=e.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||EY(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1}}});function wY(t={}){var e;return Da([Ph(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3})}var IY,AY=k(()=>{oS();kh();IY="exponentialRetryPolicy"});function RY(t={}){var e;return{name:ZD,sendRequest:Da([Ph(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var ZD,PY=k(()=>{oS();kh();ZD="systemErrorRetryPolicy"});function kY(t={}){var e;return{name:eL,sendRequest:Da([nS()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var eL,NY=k(()=>{iS();kh();eL="throttlingRetryPolicy"});async function gIe(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await tS(e),i=await n();return i}function OY(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},hIe),e),s={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return!s.isRefreshing&&((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(l,c){var u;return s.isRefreshing||(r=gIe(()=>t.getToken(l,c),o.retryIntervalInMs,(u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then(p=>(r=null,n=p,i=c.tenantId,n)).catch(p=>{throw r=null,n=null,i=void 0,p})),r}return async(l,c)=>i!==c.tenantId||!!c.claims||s.mustRefresh?a(l,c):(s.shouldRefresh&&a(l,c),n)}var hIe,DY=k(()=>{rS();hIe={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function vIe(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}function yIe(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function LY(t){var e;let{credential:r,scopes:n,challengeCallbacks:i}=t,o=t.logger||jn,s=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:vIe,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=r?OY(r):()=>Promise.resolve(null);return{name:tL,async sendRequest(l,c){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:l,getAccessToken:a,logger:o});let u,d;try{u=await c(l)}catch(p){d=p,u=p.response}if(s.authorizeRequestOnChallenge&&u?.status===401&&yIe(u)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:l,response:u,getAccessToken:a,logger:o}))return c(l);if(d)throw d;return u}}}var tL,MY=k(()=>{DY();Ch();tL="bearerTokenAuthenticationPolicy"});function FY(){return{name:rL,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}var rL,BY=k(()=>{rL="ndJsonPolicy"});var UY={};Jn(UY,{RestError:()=>vo,bearerTokenAuthenticationPolicy:()=>LY,bearerTokenAuthenticationPolicyName:()=>tL,createDefaultHttpClient:()=>uY,createEmptyPipeline:()=>HC,createHttpHeaders:()=>Dh,createPipelineFromOptions:()=>nY,createPipelineRequest:()=>SY,decompressResponsePolicy:()=>eS,decompressResponsePolicyName:()=>oD,defaultRetryPolicy:()=>sS,exponentialRetryPolicy:()=>wY,exponentialRetryPolicyName:()=>IY,formDataPolicy:()=>lS,formDataPolicyName:()=>_D,getDefaultProxySettings:()=>MD,isRestError:()=>hS,logPolicy:()=>YC,logPolicyName:()=>XO,ndJsonPolicy:()=>FY,ndJsonPolicyName:()=>rL,proxyPolicy:()=>pS,proxyPolicyName:()=>LD,redirectPolicy:()=>QC,redirectPolicyName:()=>ZO,retryPolicy:()=>Da,setClientRequestIdPolicy:()=>fS,setClientRequestIdPolicyName:()=>BD,systemErrorRetryPolicy:()=>RY,systemErrorRetryPolicyName:()=>ZD,throttlingRetryPolicy:()=>kY,throttlingRetryPolicyName:()=>eL,tlsPolicy:()=>mS,tlsPolicyName:()=>qD,tracingPolicy:()=>vS,tracingPolicyName:()=>zD,userAgentPolicy:()=>ZC,userAgentPolicyName:()=>nD});var qY=k(()=>{MO();iY();dY();_S();TY();gS();sD();AY();UD();JO();FD();eD();PY();NY();kh();WD();cD();iD();HD();xD();MY();BY()});var VY=x((x_,jY)=>{"use strict";var _Ie=x_&&x_.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},xIe=x_&&x_.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},HY=(qY(),En(UY)),bIe="https://monitor.azure.com//.default";function EIe(t){return null}var CIe=function(){function t(e,r){var n=r?[r]:[bIe];this._azureTokenPolicy=HY.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}return t.prototype.addAuthorizationHeader=function(e){return _Ie(this,void 0,void 0,function(){var r,n;return xIe(this,function(i){switch(i.label){case 0:return r="authorization",n=HY.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,EIe)];case 1:return i.sent(),e.headers[r]=n.headers.get(r),[2]}})})},t}();jY.exports=CIe});var $Y=x((w9e,GY)=>{"use strict";var SIe=dr(),TIe=Bn(),IIe=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){SIe.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||TIe.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t}();GY.exports=IIe});var zY=x(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.azureRoleEnvironmentTelemetryProcessor=void 0;function wIe(t,e){}SS.azureRoleEnvironmentTelemetryProcessor=wIe});var YY=x(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.getSamplingHashCode=Fh.samplingTelemetryProcessor=void 0;var WY=ii();function AIe(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&WY.TelemetryType.Metric===WY.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=KY(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Fh.samplingTelemetryProcessor=AIe;function KY(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}Fh.getSamplingHashCode=KY});var QY=x(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});TS.performanceMetricsTelemetryProcessor=void 0;var nL=wC(),iL=ii();function RIe(t,e){switch(e&&e.addDocument(t),t.data.baseType){case iL.TelemetryTypeString.Exception:nL.countException();break;case iL.TelemetryTypeString.Request:var r=t.data.baseData;nL.countRequest(r.duration,r.success);break;case iL.TelemetryTypeString.Dependency:var n=t.data.baseData;nL.countDependency(n.duration,n.success);break}return!0}TS.performanceMetricsTelemetryProcessor=RIe});var XY=x(Bh=>{"use strict";var La=Bh&&Bh.__assign||function(){return La=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},La.apply(this,arguments)};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.preAggregatedMetricsTelemetryProcessor=void 0;var PIe=ii(),b_=fO(),IS=ii();function kIe(t,e){if(b_.isEnabled())switch(t.data.baseType){case IS.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=La(La({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};b_.countException(n);break;case IS.TelemetryTypeString.Trace:var i=t.data.baseData;i.properties=La(La({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:PIe.SeverityLevel[i.severity]};b_.countTrace(o);break;case IS.TelemetryTypeString.Request:var s=t.data.baseData;s.properties=La(La({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};b_.countRequest(s.duration,a);break;case IS.TelemetryTypeString.Dependency:var l=t.data.baseData;l.properties=La(La({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var c={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:l.success,dependencyType:l.type,dependencyTarget:l.target,dependencyResultCode:l.resultCode};b_.countDependency(l.duration,c);break}return!0}Bh.preAggregatedMetricsTelemetryProcessor=kIe});var JY=x(Ma=>{"use strict";var NIe=Ma&&Ma.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wS=Ma&&Ma.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&NIe(e,t,r)};Object.defineProperty(Ma,"__esModule",{value:!0});wS(zY(),Ma);wS(YY(),Ma);wS(QY(),Ma);wS(XY(),Ma)});var oL=x((O9e,tQ)=>{"use strict";var ze=ii(),Gi=Bn(),ZY=tu(),OIe=dr(),DIe=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case ze.TelemetryType.Trace:s=t.createTraceData(e);break;case ze.TelemetryType.Dependency:s=t.createDependencyData(e);break;case ze.TelemetryType.Event:s=t.createEventData(e);break;case ze.TelemetryType.Exception:s=t.createExceptionData(e);break;case ze.TelemetryType.Request:s=t.createRequestData(e);break;case ze.TelemetryType.Metric:s=t.createMetricData(e);break;case ze.TelemetryType.Availability:s=t.createAvailabilityData(e);break;case ze.TelemetryType.PageView:s=t.createPageViewData(e);break}if(s&&s.baseData&&ze.domainSupportsProperties(s.baseData)){if(n)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);t.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=Gi.validateStringMap(s.baseData.properties))}var l=o&&o.instrumentationKey||"",c=new ze.Envelope;return c.data=s,c.iKey=l,c.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,e.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=o?o.samplingPercentage:100,r===ze.TelemetryType.Metric&&(c.sampleRate=100),c},t.addAzureFunctionsCorrelationProperties=function(e){var r=ZY.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),i=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(Gi.isDate(i[o])||(i[o]==null&&(i[o]=""),typeof i[o]=="object"&&(i[o]=Gi.stringify(i[o])),r[n[o]]=String(i[o]).substring(0,8192)),r[n[o]]=i[o]);return r}catch(s){OIe.warn("Failed to properly truncate telemetry properties: ",s)}},t.createTraceData=function(e){var r,n=new ze.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=ze.SeverityLevel.Information:n.severityLevel=e.severity;var i=new ze.Data;return i.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Trace),i.baseData=n,i},t.createDependencyData=function(e){var r,n,i,o=new ze.RemoteDependencyData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),o.target=(i=e.target)===null||i===void 0?void 0:i.substring(0,1024),o.duration=Gi.msToTimeSpan(e.duration),o.success=e.success,o.type=e.dependencyTypeName,o.properties=this.truncateProperties(e),o.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?o.id=e.id:o.id=Gi.w3cTraceId();var s=new ze.Data;return s.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Dependency),s.baseData=o,s},t.createEventData=function(e){var r,n=new ze.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new ze.Data;return i.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Event),i.baseData=n,i},t.createExceptionData=function(e){var r,n,i=new ze.ExceptionData;i.properties=this.truncateProperties(e),isNaN(e.severity)?i.severityLevel=ze.SeverityLevel.Error:i.severityLevel=e.severity,i.measurements=e.measurements,i.exceptions=[];var o=e.exception.stack,s=new ze.ExceptionDetails;s.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),s.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),s.parsedStack=this.parseStack(o),s.hasFullStack=Gi.isArray(s.parsedStack)&&s.parsedStack.length>0,i.exceptions.push(s);var a=new ze.Data;return a.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Exception),a.baseData=i,a},t.createRequestData=function(e){var r,n,i,o,s=new ze.RequestData;e.id?s.id=e.id:s.id=Gi.w3cTraceId(),s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),s.source=(i=e.source)===null||i===void 0?void 0:i.substring(0,1024),s.duration=Gi.msToTimeSpan(e.duration),s.responseCode=(o=e.resultCode?e.resultCode.toString():"0")===null||o===void 0?void 0:o.substring(0,1024),s.success=e.success,s.properties=this.truncateProperties(e),s.measurements=e.measurements;var a=new ze.Data;return a.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Request),a.baseData=s,a},t.createMetricData=function(e){var r,n=new ze.MetricData;n.metrics=[];var i=new ze.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=ze.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new ze.Data;return o.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Metric),o.baseData=n,o},t.createAvailabilityData=function(e){var r,n,i=new ze.AvailabilityData;e.id?i.id=e.id:i.id=Gi.w3cTraceId(),i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Gi.msToTimeSpan(e.duration),i.success=e.success,i.runLocation=e.runLocation,i.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new ze.Data;return o.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.Availability),o.baseData=i,o},t.createPageViewData=function(e){var r,n,i=new ze.PageViewData;i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Gi.msToTimeSpan(e.duration),i.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new ze.Data;return o.baseType=ze.telemetryTypeToBaseType(ze.TelemetryType.PageView),o.baseData=i,o},t.getTags=function(e,r){var n=ZY.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(eQ.regex.test(a)){var l=new eQ(n[s],i++);o+=l.sizeInBytes,r.push(l)}}var c=32*1024;if(o>c)for(var u=0,d=r.length-1,p=0,f=u,m=d;u<d;){var h=r[u].sizeInBytes,g=r[d].sizeInBytes;if(p+=h+g,p>c){var v=m-f+1;r.splice(f,v);break}f=u,m=d,u++,d--}}return r},t}(),eQ=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Gi.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Gi.trim(n[2])||this.method,this.fileName=Gi.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();tQ.exports=DIe});var rQ=x(hu=>{"use strict";var LIe=hu&&hu.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},MIe=hu&&hu.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(hu,"__esModule",{value:!0});hu.FileAccessControl=void 0;var FIe=require("fs"),BIe=require("os"),Uh=require("child_process"),UIe=dr(),qIe=function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=FIe.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||UIe.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return LIe(this,void 0,void 0,function(){var r,n;return MIe(this,function(i){switch(i.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=i.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return i.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=i.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var i=Uh.spawn(t.ICACLS_PATH,e,{windowsHide:!0});i.on("error",function(o){return n(o)}),i.on("close",function(o,s){o===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},t._runICACLSSync=function(e){if(Uh.spawnSync){var r=Uh.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=Uh.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";n.stdout.on("data",function(o){return i+=o}),n.on("error",function(o){return r(o)}),n.on("close",function(o,s){t.ACL_IDENTITY=i&&i.trim(),o===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(Uh.spawnSync){var e=Uh.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=BIe.type()==="Windows_NT",t}();hu.FileAccessControl=qIe});var aL=x((C_,iQ)=>{"use strict";var AS=C_&&C_.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},RS=C_&&C_.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},sL=require("fs"),HIe=require("os"),Pp=require("path"),jIe=require("zlib"),gu=Sr(),VIe=xh(),jc=CP(),$i=Bn(),GIe=require("url"),nQ=dr(),E_=rQ(),$Ie=439,zIe=402,WIe=[200,206,402,408,429,439,500],KIe=function(){function t(e,r,n,i,o,s,a){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=Pp.join(HIe.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var i=this;e&&E_.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=E_.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!E_.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(gu.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(gu.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return AS(this,void 0,void 0,function(){var n,i,o,s,a,l,c,u,d=this;return RS(this,function(p){switch(p.label){case 0:if(!e)return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,i=new GIe.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(gu.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return p.sent(),[3,4];case 3:return a=p.sent(),l="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(l+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),l+="Error:"+a.toString(),this._logWarn(l),typeof r=="function"&&r(l),[2];case 4:c="",e.forEach(function(f){var m=$i.stringify(f);typeof m=="string"&&(c+=m+`
`)}),c.length>0&&(c=c.substring(0,c.length-1)),u=Buffer.from?Buffer.from(c):new Buffer(c),jIe.gzip(u,function(f,m){var h=m;f?(d._logWarn($i.dumpObj(f)),h=u,o.headers["Content-Length"]=u.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),d._logInfo($i.dumpObj(o)),o[VIe.disableCollectionRequestOption]=!0;var g=+new Date,v=function(_){_.setEncoding("utf-8");var T="";_.on("data",function(I){T+=I}),_.on("end",function(){var I=+new Date,R=I-g;if(d._numConsecutiveFailures=0,d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&(WIe.includes(_.statusCode)?d._statsbeatHasReachedIngestionAtLeastOnce=!0:d._statsbeatFailedToIngest()),d._statsbeat&&(_.statusCode==zIe||_.statusCode==$Ie?d._statsbeat.countThrottle(gu.StatsbeatNetworkCategory.Breeze,i,_.statusCode):d._statsbeat.countRequest(gu.StatsbeatNetworkCategory.Breeze,i,R,_.statusCode===200,_.statusCode)),d._enableDiskRetryMode){if(_.statusCode===200)d._resendTimer||(d._resendTimer=setTimeout(function(){d._resendTimer=null,d._sendFirstFileOnDisk()},d._resendInterval),d._resendTimer.unref());else if(d._isRetriable(_.statusCode))try{d._statsbeat&&d._statsbeat.countRetry(gu.StatsbeatNetworkCategory.Breeze,i,_.statusCode);var w=JSON.parse(T),O=[];w.errors&&(w.errors.forEach(function(A){(A.statusCode==429||A.statusCode==500||A.statusCode==503)&&O.push(e[A.index])}),O.length>0&&d._storeToDisk(O))}catch{d._storeToDisk(e)}}if(_.statusCode===307||_.statusCode===308)if(d._numConsecutiveRedirects++,d._numConsecutiveRedirects<10){var V=_.headers.location?_.headers.location.toString():null;V&&(d._redirectedHost=V,d.send(e,r))}else{var L={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};d._statsbeat&&d._statsbeat.countException(gu.StatsbeatNetworkCategory.Breeze,i,L),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else d._numConsecutiveRedirects=0,typeof r=="function"&&r(T),d._logInfo(T),typeof d._onSuccess=="function"&&d._onSuccess(T)})},y=$i.makeRequest(d._config,n,o,v);y.setTimeout(t.HTTP_TIMEOUT,function(){d._requestTimedOut=!0,y.abort()}),y.on("error",function(_){if(d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&d._statsbeatFailedToIngest(),d._numConsecutiveFailures++,d._statsbeat&&d._statsbeat.countException(gu.StatsbeatNetworkCategory.Breeze,i,_),!d._enableDiskRetryMode||d._numConsecutiveFailures>0&&d._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var T="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";d._enableDiskRetryMode&&(T="Ingestion endpoint could not be reached "+d._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),d._logWarn(T,$i.dumpObj(_))}else{var T="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";d._logInfo(T,$i.dumpObj(_))}d._onErrorHelper(_),typeof r=="function"&&(_?(d._requestTimedOut&&(_.name="telemetry timeout",_.message="telemetry request timed out"),r($i.dumpObj(_))):r("Error sending telemetry")),d._enableDiskRetryMode&&d._storeToDisk(e)}),y.write(h),y.end()}),p.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync($i.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||nQ.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||nQ.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return AS(this,void 0,void 0,function(){var r,n,i,o,s,a,l;return RS(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,jc.confirmDirExists(this._tempDir)];case 1:return c.sent(),[3,3];case 2:return r=c.sent(),this._logWarn("Failed to create folder to put telemetry: "+$i.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return c.trys.push([3,5,,6]),[4,E_.FileAccessControl.applyACLRules(this._tempDir)];case 4:return c.sent(),[3,6];case 5:return n=c.sent(),this._logWarn("Failed to apply file access control to folder: "+$i.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return c.trys.push([6,8,,9]),[4,jc.getShallowDirectorySize(this._tempDir)];case 7:return i=c.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=c.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+$i.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return c.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=Pp.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,jc.writeFileAsync(a,$i.stringify(e),{mode:384})];case 10:return c.sent(),[3,12];case 11:return l=c.sent(),this._logWarn("Failed to persist telemetry to disk: "+$i.dumpObj(l)),this._onErrorHelper(l),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),sL.existsSync(this._tempDir)||sL.mkdirSync(this._tempDir),E_.FileAccessControl.applyACLRulesSync(this._tempDir);var r=jc.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Pp.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),sL.writeFileSync(i,e,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+$i.dumpObj(o)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){return AS(this,void 0,void 0,function(){var e,r,n,i,o,s;return RS(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,jc.readdirAsync(this._tempDir)];case 1:return e=a.sent(),e=e.filter(function(l){return Pp.basename(l).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=Pp.join(this._tempDir,r),[4,jc.readFileAsync(n)]):[3,5];case 2:return i=a.sent(),[4,jc.unlinkAsync(n)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return AS(this,void 0,void 0,function(){var e,r,n,i,o,s,a=this;return RS(this,function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),[4,jc.readdirAsync(this._tempDir)];case 1:if(e=l.sent(),e=e.filter(function(c){return Pp.basename(c).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,l.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),i=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,i?(o=Pp.join(this._tempDir,e[r]),[4,jc.unlinkAsync(o).catch(function(c){a._onErrorHelper(c)})]):[3,4]):[3,5];case 3:l.sent(),l.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return s=l.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=60*60*1e3,t.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t}();iQ.exports=KIe});var sQ=x(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});PS.AzureVirtualMachine=void 0;var oQ=dr(),YIe=Bn(),QIe=xh(),XIe="http://169.254.169.254/metadata/instance/compute",JIe="api-version=2017-12-01",ZIe="format=json",ewe="UNREACH",twe=function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,i=this,o={},s=XIe+"?"+JIe+"&"+ZIe,a=(n={method:"GET"},n[QIe.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),l=YIe.makeRequest(e,s,a,function(c){if(c.statusCode===200){o.isVM=!0;var u="";c.on("data",function(d){u+=d}),c.on("end",function(){try{var d=JSON.parse(u);o.id=d.vmId||"",o.subscriptionId=d.subscriptionId||"",o.osType=d.osType||""}catch(p){oQ.info(t.TAG,p)}r(o)})}else r(o)},!1,!1);l&&(setTimeout(function(){i._requestTimedOut=!0,l.abort()},t.HTTP_TIMEOUT),l.on("error",function(c){i._requestTimedOut&&c&&(c.name="telemetry timeout",c.message="telemetry request timed out"),c&&c.message&&c.message.indexOf(ewe)>-1?o.isVM=!1:oQ.info(t.TAG,c),r(o)}),l.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t}();PS.AzureVirtualMachine=twe});var aQ=x(kS=>{"use strict";Object.defineProperty(kS,"__esModule",{value:!0});kS.NetworkStatsbeat=void 0;var rwe=function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t}();kS.NetworkStatsbeat=rwe});var pQ=x((kp,dQ)=>{"use strict";var Fa=kp&&kp.__assign||function(){return Fa=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fa.apply(this,arguments)},cL=kp&&kp.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},lL=kp&&kp.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},nwe=require("os"),iwe=oL(),cQ=dr(),owe=aL(),xr=Sr(),swe=ii(),awe=sQ(),cwe=DO(),lQ=fh(),lwe=aQ(),uQ=Bn(),uwe="node",dwe=function(){function t(e,r){this._attach=xr.StatsbeatAttach.sdk,this._feature=xr.StatsbeatFeature.NONE,this._instrumentation=xr.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new lQ;var n=this._getConnectionString(e);this._statsbeatConfig=new cwe(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new owe(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=xr.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(e,r);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=n,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(l){return o===l.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.exceptionCount.find(function(s){return n.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.throttleCount.find(function(s){return n===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.retryCount.find(function(s){return n===s.statusCode});o?o.count++:i.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return cL(this,void 0,void 0,function(){var e,r;return lL(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),cQ.info(t.TAG,"Failed to send Statsbeat metrics: "+uQ.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return cL(this,void 0,void 0,function(){var e,r,n,i,o;return lL(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:xr.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=xr.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:xr.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:xr.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=xr.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:xr.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:xr.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),cQ.info(t.TAG,"Failed to send Statsbeat metrics: "+uQ.dumpObj(o)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new lwe.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(o),o},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:xr.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=n.exec(e);i!=null&&i.length>1&&(r=i[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(a){o=i._networkStatsbeatCollection[a];var l=Object.assign({endpoint:o.endpoint,host:o.host},e);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:xr.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:l}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(c){l=Object.assign(Fa(Fa({},l),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:xr.StatsbeatCounter.REQUEST_FAILURE,value:c.count,properties:l})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(c){l=Object.assign(Fa(Fa({},l),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:xr.StatsbeatCounter.RETRY_COUNT,value:c.count,properties:l})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(c){l=Object.assign(Fa(Fa({},l),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:xr.StatsbeatCounter.THROTTLE_COUNT,value:c.count,properties:l})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(c){l=Object.assign(Fa(Fa({},l),{exceptionType:c.exceptionType})),r._statbeatMetrics.push({name:xr.StatsbeatCounter.EXCEPTION_COUNT,value:c.count,properties:l})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)n(s)},t.prototype._sendStatsbeats=function(){return cL(this,void 0,void 0,function(){var e,r,n,i;return lL(this,function(o){switch(o.label){case 0:for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=iwe.createEnvelope(n,swe.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=xr.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return o.sent(),[2]}})})},t.prototype._getCustomProperties=function(){this._language=uwe,this._cikey=this._config.instrumentationKey,this._sdkVersion=lQ.sdkVersion,this._os=nwe.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var i=!1;e._resourceProvider=xr.StatsbeatResourceProvider.unknown,e._resourceIdentifier=xr.StatsbeatResourceProvider.unknown,process.env.WEBSITE_SITE_NAME?(e._resourceProvider=xr.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=xr.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(i=!0,awe.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(o){e._isVM=o.isVM,e._isVM&&(e._resourceProvider=xr.StatsbeatResourceProvider.vm,e._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(e._os=o.osType)),r()})):e._resourceProvider=xr.StatsbeatResourceProvider.unknown),i||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<n.length;i++)if(r.indexOf(n[i])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.TAG="Statsbeat",t}();dQ.exports=dwe});var hQ=x((F9e,mQ)=>{"use strict";var pwe=require("url"),fwe=DO(),mwe=VY(),hwe=fh(),Vc=ii(),gwe=$Y(),uL=JY(),fQ=tu(),vwe=pQ(),ywe=aL(),dL=Bn(),NS=dr(),_we=oL(),xwe=function(){function t(e){this._telemetryProcessors=[];var r=new fwe(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new hwe,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new vwe(this.config,this.context),this._statsbeat.enable(!0));var n=new ywe(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new gwe(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,Vc.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,Vc.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,Vc.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,Vc.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!dL.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,Vc.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,Vc.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,Vc.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new pwe.URL(e.data).host}catch(r){e.target=null,NS.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,Vc.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&Vc.telemetryTypeToBaseType(r)){var n=_we.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&uL.samplingTelemetryProcessor(n,{correlationContext:fQ.CorrelationContextManager.getCurrentContext()}),uL.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(uL.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else NS.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(NS.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new mwe(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=fQ.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,NS.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,e)}return n&&(e&&e.tags&&(e.tags=dL.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=dL.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t}();mQ.exports=xwe});var yQ=x((pL,vQ)=>{"use strict";var bwe=pL&&pL.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ewe=hQ(),gQ=wO(),Cwe=xh(),OS=dr(),Swe=function(t){bwe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?gQ.trackRequestSync(this,r):OS.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&OS.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?gQ.trackRequest(this,r):OS.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?Cwe.trackRequest(this,r):OS.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(Ewe);vQ.exports=Swe});var xQ=x(_Q=>{"use strict";Object.defineProperty(_Q,"__esModule",{value:!0})});var vL=x($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.dispose=$.Configuration=$.wrapWithCorrelationContext=$.startOperation=$.getCorrelationContext=$.start=$.setup=$.liveMetricsClient=$.defaultClient=$.DistributedTracingModes=void 0;var fL=tu(),Twe=uK(),Iwe=pK(),mL=wC(),wwe=fO(),Awe=xK(),Rwe=NK(),Pwe=xh(),kwe=wO(),bQ=dp(),S_=dr(),EQ=d9(),hL=p9(),Nwe=h9();$.TelemetryClient=yQ();$.Contracts=ii();$.azureFunctionsTypes=xQ();var CQ;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(CQ=$.DistributedTracingModes||($.DistributedTracingModes={}));var T_,I_,w_,A_,R_,qh,Hh,Np,P_,k_,yo=!1,DS;function Owe(t){return $.defaultClient?S_.info("The default client is already setup"):($.defaultClient=new $.TelemetryClient(t),T_=new Twe($.defaultClient),I_=new Iwe($.defaultClient),w_=new mL($.defaultClient),A_=new wwe($.defaultClient),R_=new Awe($.defaultClient),qh=new Rwe($.defaultClient),Np=new kwe($.defaultClient),P_=new Pwe($.defaultClient),Hh||(Hh=new hL.AutoCollectNativePerformance($.defaultClient)),k_=new Nwe.AzureFunctionsHook($.defaultClient)),gL}$.setup=Owe;function Dwe(){$.defaultClient&&($.defaultClient.config.enableAutoCollectExternalLoggers==null&&($.defaultClient.config.enableAutoCollectExternalLoggers=!0),$.defaultClient.config.enableAutoCollectConsole==null&&($.defaultClient.config.enableAutoCollectConsole=!1),$.defaultClient.config.enableAutoCollectExceptions==null&&($.defaultClient.config.enableAutoCollectExceptions=!0),$.defaultClient.config.enableAutoCollectPerformance==null&&($.defaultClient.config.enableAutoCollectPerformance=!0),$.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&($.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),$.defaultClient.config.enableAutoCollectHeartbeat==null&&($.defaultClient.config.enableAutoCollectHeartbeat=!0),$.defaultClient.config.enableAutoCollectRequests==null&&($.defaultClient.config.enableAutoCollectRequests=!0),$.defaultClient.config.enableAutoCollectDependencies==null&&($.defaultClient.config.enableAutoCollectDependencies=!0),$.defaultClient.config.enableUseDiskRetryCaching==null&&($.defaultClient.config.enableUseDiskRetryCaching=!0),$.defaultClient.config.enableAutoDependencyCorrelation==null&&($.defaultClient.config.enableAutoDependencyCorrelation=!0),$.defaultClient.config.enableSendLiveMetrics==null&&($.defaultClient.config.enableSendLiveMetrics=!1),$.defaultClient.config.enableAutoCollectExtendedMetrics==null&&($.defaultClient.config.enableAutoCollectExtendedMetrics=!0),$.defaultClient.config.enableWebInstrumentation==null&&($.defaultClient.config.enableWebInstrumentation=!1),$.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&($.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function SQ(){if($.defaultClient){yo=!0,Dwe(),T_.enable($.defaultClient.config.enableAutoCollectExternalLoggers,$.defaultClient.config.enableAutoCollectConsole),I_.enable($.defaultClient.config.enableAutoCollectExceptions),w_.enable($.defaultClient.config.enableAutoCollectPerformance),A_.enable($.defaultClient.config.enableAutoCollectPreAggregatedMetrics),R_.enable($.defaultClient.config.enableAutoCollectHeartbeat),Np.useAutoCorrelation($.defaultClient.config.enableAutoDependencyCorrelation,$.defaultClient.config.enableUseAsyncHooks),Np.enable($.defaultClient.config.enableAutoCollectRequests),P_.enable($.defaultClient.config.enableAutoCollectDependencies),qh.enable($.defaultClient.config.enableWebInstrumentation,$.defaultClient.config.webInstrumentationConnectionString),$.defaultClient.config.enableSendLiveMetrics&&($.liveMetricsClient||($.liveMetricsClient=new EQ($.defaultClient.config,$.defaultClient.context,$.defaultClient.getAuthorizationHandler),DS=new mL($.liveMetricsClient,1e3,!0),$.liveMetricsClient.addCollector(DS),$.defaultClient.quickPulseClient=$.liveMetricsClient)),k_.enable($.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=hL.AutoCollectNativePerformance.parseEnabled($.defaultClient.config.enableAutoCollectExtendedMetrics,$.defaultClient.config);Hh.enable($.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),$.defaultClient&&$.defaultClient.channel&&$.defaultClient.channel.setUseDiskRetryCaching($.defaultClient.config.enableUseDiskRetryCaching,$.defaultClient.config.enableResendInterval,$.defaultClient.config.enableMaxBytesOnDisk)}else S_.warn("Start cannot be called before setup");return gL}$.start=SQ;function Lwe(){return fL.CorrelationContextManager.getCurrentContext()}$.getCorrelationContext=Lwe;function Mwe(t,e){return fL.CorrelationContextManager.startOperation(t,e)}$.startOperation=Mwe;function Fwe(t,e){return fL.CorrelationContextManager.wrapCallback(t,e)}$.wrapWithCorrelationContext=Fwe;var gL=function(){function t(){}return t.setDistributedTracingMode=function(e){return bQ.w3cEnabled=e===CQ.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),$.defaultClient&&($.defaultClient.config.enableAutoCollectExternalLoggers=e,$.defaultClient.config.enableAutoCollectConsole=r,yo&&T_.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return $.defaultClient&&($.defaultClient.config.enableAutoCollectExceptions=e,yo&&I_.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),$.defaultClient){$.defaultClient.config.enableAutoCollectPerformance=e;var n=hL.AutoCollectNativePerformance.parseEnabled(r,$.defaultClient.config);$.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,yo&&(w_.enable(e),Hh.enable($.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return $.defaultClient&&($.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,yo&&A_.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return $.defaultClient&&($.defaultClient.config.enableAutoCollectHeartbeat=e,yo&&R_.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return $.defaultClient&&($.defaultClient.config.enableWebInstrumentation=e,$.defaultClient.config.webInstrumentationConnectionString=r,yo&&qh.enable($.defaultClient.config.enableAutoWebSnippetInjection,$.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return $.defaultClient&&($.defaultClient.config.enableWebInstrumentation=e,$.defaultClient.config.webInstrumentationConnectionString=r,yo&&qh.enable($.defaultClient.config.enableWebInstrumentation,$.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return $.defaultClient&&($.defaultClient.config.enableAutoCollectRequests=e,yo&&Np.enable(e)),t},t.setAutoCollectDependencies=function(e){return $.defaultClient&&($.defaultClient.config.enableAutoCollectDependencies=e,yo&&P_.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return $.defaultClient&&($.defaultClient.config.enableAutoDependencyCorrelation=e,$.defaultClient.config.enableUseAsyncHooks=r,yo&&Np.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return $.defaultClient&&($.defaultClient.config.enableUseDiskRetryCaching=e,$.defaultClient.config.enableResendInterval=r,$.defaultClient.config.enableMaxBytesOnDisk=n,$.defaultClient.channel&&$.defaultClient.channel.setUseDiskRetryCaching($.defaultClient.config.enableUseDiskRetryCaching,$.defaultClient.config.enableResendInterval,$.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),S_.enableDebug=e,S_.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return $.defaultClient&&($.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,yo&&k_.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),$.defaultClient?(!$.liveMetricsClient&&e?($.liveMetricsClient=new EQ($.defaultClient.config,$.defaultClient.context,$.defaultClient.getAuthorizationHandler),DS=new mL($.liveMetricsClient,1e3,!0),$.liveMetricsClient.addCollector(DS),$.defaultClient.quickPulseClient=$.liveMetricsClient):$.liveMetricsClient&&$.liveMetricsClient.enable(e),$.defaultClient.config.enableSendLiveMetrics=e,t):(S_.warn("Live metrics client cannot be setup without the default client"),t)},t.start=SQ,t}();$.Configuration=gL;function Bwe(){bQ.w3cEnabled=!0,$.defaultClient=null,yo=!1,T_&&T_.dispose(),I_&&I_.dispose(),w_&&w_.dispose(),A_&&A_.dispose(),R_&&R_.dispose(),qh&&qh.dispose(),Hh&&Hh.dispose(),Np&&Np.dispose(),P_&&P_.dispose(),$.liveMetricsClient&&($.liveMetricsClient.enable(!1),$.liveMetricsClient=void 0),k_&&k_.dispose()}$.dispose=Bwe});var PQ=x((W9e,yL)=>{"use strict";var Hwe=require("net"),US=class extends Error{constructor(e){super(`${e} is locked`)}},jh={old:new Set,young:new Set},jwe=1e3*15,BS,RQ=t=>new Promise((e,r)=>{let n=Hwe.createServer();n.unref(),n.on("error",r),n.listen(t,()=>{let{port:i}=n.address();n.close(()=>{e(i)})})}),Vwe=function*(t){t&&(yield*t),yield 0};yL.exports=async t=>{let e;t&&(e=typeof t.port=="number"?[t.port]:t.port),BS===void 0&&(BS=setInterval(()=>{jh.old=jh.young,jh.young=new Set},jwe),BS.unref&&BS.unref());for(let r of Vwe(e))try{let n=await RQ({...t,port:r});for(;jh.old.has(n)||jh.young.has(n);){if(r!==0)throw new US(r);n=await RQ({...t,port:r})}return jh.young.add(n),n}catch(n){if(!["EADDRINUSE","EACCES"].includes(n.code)&&!(n instanceof US))throw n}throw new Error("No available ports found")};yL.exports.makeRange=(t,e)=>{if(!Number.isInteger(t)||!Number.isInteger(e))throw new TypeError("`from` and `to` must be integer numbers");if(t<1024||t>65535)throw new RangeError("`from` must be between 1024 and 65535");if(e<1024||e>65536)throw new RangeError("`to` must be between 1024 and 65536");if(e<t)throw new RangeError("`to` must be greater than or equal to `from`");return function*(n,i){for(let o=n;o<=i;o++)yield o}(t,e)}});var bL=x((b7e,DQ)=>{"use strict";var OQ=require("fs"),xL;function Wwe(){try{return OQ.statSync("/.dockerenv"),!0}catch{return!1}}function Kwe(){try{return OQ.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}DQ.exports=()=>(xL===void 0&&(xL=Wwe()||Kwe()),xL)});var FQ=x((E7e,EL)=>{"use strict";var Ywe=require("os"),Qwe=require("fs"),LQ=bL(),MQ=()=>{if(process.platform!=="linux")return!1;if(Ywe.release().toLowerCase().includes("microsoft"))return!LQ();try{return Qwe.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!LQ():!1}catch{return!1}};process.env.__IS_WSL_TEST__?EL.exports=MQ:EL.exports=MQ()});var UQ=x((C7e,BQ)=>{"use strict";BQ.exports=(t,e,r)=>{let n=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}});var zQ=x((S7e,$Q)=>{var Xwe=require("path"),Jwe=require("child_process"),{promises:zS,constants:GQ}=require("fs"),$S=FQ(),Zwe=bL(),SL=UQ(),qQ=Xwe.join(__dirname,"xdg-open"),{platform:Vh,arch:HQ}=process,eAe=()=>{try{return zS.statSync("/run/.containerenv"),!0}catch{return!1}},CL;function tAe(){return CL===void 0&&(CL=eAe()||Zwe()),CL}var rAe=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await zS.access(r,GQ.F_OK),n=!0}catch{}if(!n)return t;let i=await zS.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),jQ=async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},WS=async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return jQ(t.app,a=>WS({...t,app:a}));let{name:e,arguments:r=[]}=t.app||{};if(r=[...r],Array.isArray(e))return jQ(e,a=>WS({...t,app:{name:a,arguments:r}}));let n,i=[],o={};if(Vh==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Vh==="win32"||$S&&!tAe()&&!e){let a=await rAe();n=$S?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),$S||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`,"-ArgumentList"),t.target&&r.unshift(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(c=>`"\`"${c}\`""`),l.push(r.join(","))),t.target=Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",l=!1;try{await zS.access(qQ,GQ.X_OK),l=!0}catch{}n=process.versions.electron||Vh==="android"||a||!l?"xdg-open":qQ}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}t.target&&i.push(t.target),Vh==="darwin"&&r.length>0&&i.push("--args",...r);let s=Jwe.spawn(n,i,o);return t.wait?new Promise((a,l)=>{s.once("error",l),s.once("close",c=>{if(!t.allowNonzeroExitCode&&c>0){l(new Error(`Exited with code ${c}`));return}a(s)})}):(s.unref(),s)},TL=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return WS({...e,target:t})},nAe=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=e||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return WS({...e,app:{name:t,arguments:r}})};function VQ(t){if(typeof t=="string"||Array.isArray(t))return t;let{[HQ]:e}=t;if(!e)throw new Error(`${HQ} is not supported`);return e}function IL({[Vh]:t},{wsl:e}){if(e&&$S)return VQ(e);if(!t)throw new Error(`${Vh} is not supported`);return VQ(t)}var KS={};SL(KS,"chrome",()=>IL({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));SL(KS,"firefox",()=>IL({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));SL(KS,"edge",()=>IL({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));TL.apps=KS;TL.openApp=nAe;$Q.exports=TL});var hX=x(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});pT.LRUCache=void 0;var q_=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,pX=new Set,UL=typeof process=="object"&&process?process:{},fX=(t,e,r,n)=>{typeof UL.emitWarning=="function"?UL.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},dT=globalThis.AbortController,dX=globalThis.AbortSignal;if(typeof dT>"u"){dX=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},dT=class{constructor(){e()}signal=new dX;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=UL.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,fX("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var CAe=t=>!pX.has(t),LYe=Symbol("type"),Cu=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),mX=t=>Cu(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Kh:null:null,Kh=class extends Array{constructor(e){super(e),this.fill(0)}},qL=class t{heap;length;static#c=!1;static create(e){let r=mX(e);if(!r)return[];t.#c=!0;let n=new t(e,r);return t.#c=!1,n}constructor(e,r){if(!t.#c)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},HL=class t{#c;#d;#y;#m;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#h;#i;#r;#e;#l;#p;#a;#o;#g;#s;#E;#C;#v;#_;#T;#u;static unsafeExposeInternals(e){return{starts:e.#C,ttls:e.#v,sizes:e.#E,keyMap:e.#i,keyList:e.#r,valList:e.#e,next:e.#l,prev:e.#p,get head(){return e.#a},get tail(){return e.#o},free:e.#g,isBackgroundFetch:r=>e.#t(r),backgroundFetch:(r,n,i,o)=>e.#N(r,n,i,o),moveToTail:r=>e.#A(r),indexes:r=>e.#x(r),rindexes:r=>e.#b(r),isStale:r=>e.#f(r)}}get max(){return this.#c}get maxSize(){return this.#d}get calculatedSize(){return this.#h}get size(){return this.#n}get fetchMethod(){return this.#R}get dispose(){return this.#y}get disposeAfter(){return this.#m}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:h,fetchMethod:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:T,ignoreFetchAbort:I}=e;if(r!==0&&!Cu(r))throw new TypeError("max option must be a nonnegative integer");let R=r?mX(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.#c=r,this.#d=f,this.maxEntrySize=m||this.#d,this.sizeCalculation=h,this.sizeCalculation){if(!this.#d&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=g,this.#T=!!g,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#l=new R(r),this.#p=new R(r),this.#a=0,this.#o=0,this.#g=qL.create(r),this.#n=0,this.#h=0,typeof c=="function"&&(this.#y=c),typeof u=="function"?(this.#m=u,this.#s=[]):(this.#m=void 0,this.#s=void 0),this.#_=!!this.#y,this.#u=!!this.#m,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!_,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!I,this.maxEntrySize!==0){if(this.#d!==0&&!Cu(this.#d))throw new TypeError("maxSize must be a positive integer if specified");if(!Cu(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Cu(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Cu(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#c===0&&this.ttl===0&&this.#d===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#c&&!this.#d){let w="LRU_CACHE_UNBOUNDED";CAe(w)&&(pX.add(w),fX("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",w,t))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#O(){let e=new Kh(this.#c),r=new Kh(this.#c);this.#v=e,this.#C=r,this.#D=(o,s,a=q_.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#f(o)&&this.delete(this.#r[o])},s+1);l.unref&&l.unref()}},this.#I=o=>{r[o]=e[o]!==0?q_.now():0},this.#S=(o,s)=>{if(e[s]){let a=e[s],l=r[s];o.ttl=a,o.start=l,o.now=n||i();let c=o.now-l;o.remainingTTL=a-c}};let n=0,i=()=>{let o=q_.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#i.get(o);if(s===void 0)return 0;let a=e[s],l=r[s];if(a===0||l===0)return 1/0;let c=(n||i())-l;return a-c},this.#f=o=>e[o]!==0&&r[o]!==0&&(n||i())-r[o]>e[o]}#I=()=>{};#S=()=>{};#D=()=>{};#f=()=>!1;#B(){let e=new Kh(this.#c);this.#h=0,this.#E=e,this.#w=r=>{this.#h-=e[r],e[r]=0},this.#L=(r,n,i,o)=>{if(this.#t(n))return 0;if(!Cu(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Cu(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(e[r]=n,this.#d){let o=this.#d-e[r];for(;this.#h>o;)this.#k(!0)}this.#h+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#h)}}#w=e=>{};#P=(e,r,n)=>{};#L=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#M(r)||((e||!this.#f(r))&&(yield r),r===this.#a));)r=this.#p[r]}*#b({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#a;!(!this.#M(r)||((e||!this.#f(r))&&(yield r),r===this.#o));)r=this.#l[r]}#M(e){return e!==void 0&&this.#i.get(this.#r[e])===e}*entries(){for(let e of this.#x())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#x()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#b()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*values(){for(let e of this.#x())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.#x()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#r[n],this))return this.get(this.#r[n],r)}}forEach(e,r=this){for(let n of this.#x()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}rforEach(e,r=this){for(let n of this.#b()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}purgeStale(){let e=!1;for(let r of this.#b({allowStale:!0}))this.#f(r)&&(this.delete(this.#r[r]),e=!0);return e}dump(){let e=[];for(let r of this.#x({allowStale:!0})){let n=this.#r[r],i=this.#e[r],o=this.#t(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#v&&this.#C){s.ttl=this.#v[r];let a=q_.now()-this.#C[r];s.start=Math.floor(Date.now()-a)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=q_.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#L(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(e),this;let d=this.#n===0?void 0:this.#i.get(e);if(d===void 0)d=this.#n===0?this.#o:this.#g.length!==0?this.#g.pop():this.#n===this.#c?this.#k(!1):this.#n,this.#r[d]=e,this.#e[d]=r,this.#i.set(e,d),this.#l[this.#o]=d,this.#p[d]=this.#o,this.#o=d,this.#n++,this.#P(d,u,l),l&&(l.set="add"),c=!1;else{this.#A(d);let p=this.#e[d];if(r!==p){if(this.#T&&this.#t(p)?p.__abortController.abort(new Error("replaced")):s||(this.#_&&this.#y?.(p,e,"set"),this.#u&&this.#s?.push([p,e,"set"])),this.#w(d),this.#P(d,u,l),this.#e[d]=r,l){l.set="replace";let f=p&&this.#t(p)?p.__staleWhileFetching:p;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#v&&this.#O(),this.#v&&(c||this.#D(d,i,o),l&&this.#S(l,d)),!s&&this.#u&&this.#s){let p=this.#s,f;for(;f=p?.shift();)this.#m?.(...f)}return this}pop(){try{for(;this.#n;){let e=this.#e[this.#a];if(this.#k(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#u&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#m?.(...r)}}}#k(e){let r=this.#a,n=this.#r[r],i=this.#e[r];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#_||this.#u)&&(this.#_&&this.#y?.(i,n,"evict"),this.#u&&this.#s?.push([i,n,"evict"])),this.#w(r),e&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#g.push(r)),this.#n===1?(this.#a=this.#o=0,this.#g.length=0):this.#a=this.#l[r],this.#i.delete(n),this.#n--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#i.get(e);if(o!==void 0){let s=this.#e[o];if(this.#t(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#f(o))i&&(i.has="stale",this.#S(i,o));else return n&&this.#I(o),i&&(i.has="hit",this.#S(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#i.get(e);if(i!==void 0&&(n||!this.#f(i))){let o=this.#e[i];return this.#t(o)?o.__staleWhileFetching:o}}#N(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#t(o))return o;let s=new dT,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let l={signal:s.signal,options:n,context:i},c=(h,g=!1)=>{let{aborted:v}=s.signal,y=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(v&&!g?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,y&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!y&&!g)return d(s.signal.reason);let _=f;return this.#e[r]===f&&(h===void 0?_.__staleWhileFetching?this.#e[r]=_.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:g}=s.signal,v=g&&n.allowStaleOnFetchAbort,y=v||n.allowStaleOnFetchRejection,_=y||n.noDeleteOnFetchRejection,T=f;if(this.#e[r]===f&&(!_||T.__staleWhileFetching===void 0?this.delete(e):v||(this.#e[r]=T.__staleWhileFetching)),y)return n.status&&T.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw h},p=(h,g)=>{let v=this.#R?.(e,o,l);v&&v instanceof Promise&&v.then(y=>h(y),g),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(),n.allowStaleOnFetchAbort&&(h=y=>c(y,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(c,u),m=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,m,{...l.options,status:void 0}),r=this.#i.get(e)):this.#e[r]=m,m}#t(e){if(!this.#T)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof dT}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:h,forceRefresh:g=!1,status:v,signal:y}=r;if(!this.#T)return v&&(v.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:v});let _={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:v,signal:y},T=this.#i.get(e);if(T===void 0){v&&(v.fetch="miss");let I=this.#N(e,T,_,h);return I.__returned=I}else{let I=this.#e[T];if(this.#t(I)){let L=n&&I.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",L&&(v.returnedStale=!0)),L?I.__staleWhileFetching:I.__returned=I}let R=this.#f(T);if(!g&&!R)return v&&(v.fetch="hit"),this.#A(T),i&&this.#I(T),v&&this.#S(v,T),I;let w=this.#N(e,T,_,h),V=w.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=R?"stale":"refresh",V&&R&&(v.returnedStale=!0)),V?w.__staleWhileFetching:w.__returned=w}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#i.get(e);if(a!==void 0){let l=this.#e[a],c=this.#t(l);return s&&this.#S(s,a),this.#f(a)?(s&&(s.get="stale"),c?(s&&n&&l.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?l.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?l:void 0)):(s&&(s.get="hit"),c?l.__staleWhileFetching:(this.#A(a),i&&this.#I(a),l))}else s&&(s.get="miss")}#F(e,r){this.#p[r]=e,this.#l[e]=r}#A(e){e!==this.#o&&(e===this.#a?this.#a=this.#l[e]:this.#F(this.#p[e],this.#l[e]),this.#F(this.#o,e),this.#o=e)}delete(e){let r=!1;if(this.#n!==0){let n=this.#i.get(e);if(n!==void 0)if(r=!0,this.#n===1)this.clear();else{this.#w(n);let i=this.#e[n];this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#_||this.#u)&&(this.#_&&this.#y?.(i,e,"delete"),this.#u&&this.#s?.push([i,e,"delete"])),this.#i.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#o?this.#o=this.#p[n]:n===this.#a?this.#a=this.#l[n]:(this.#l[this.#p[n]]=this.#l[n],this.#p[this.#l[n]]=this.#p[n]),this.#n--,this.#g.push(n)}}if(this.#u&&this.#s?.length){let n=this.#s,i;for(;i=n?.shift();)this.#m?.(...i)}return r}clear(){for(let e of this.#b({allowStale:!0})){let r=this.#e[e];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#_&&this.#y?.(r,n,"delete"),this.#u&&this.#s?.push([r,n,"delete"])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#v&&this.#C&&(this.#v.fill(0),this.#C.fill(0)),this.#E&&this.#E.fill(0),this.#a=0,this.#o=0,this.#g.length=0,this.#h=0,this.#n=0,this.#u&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#m?.(...r)}}};pT.LRUCache=HL});var gX=x(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.bytePairEncode=Yh.uint8ArrayToString=void 0;function jL(t){return Array.from(t).map(e=>e.toString()).join("_")}Yh.uint8ArrayToString=jL;function SAe(t,e){if(t.length===1)return[e.get(t[0].toString())];let r=[];for(let o=0;o<t.length+1;o++)r.push([o,Number.MAX_SAFE_INTEGER]);function n(o,s=0){if(o+s+2<r.length){let a=t.slice(r[o][0],r[o+s+2][0]),l=e.get(jL(a));if(l!==void 0)return l}return Number.MAX_SAFE_INTEGER}for(let o=0;o<r.length-2;o++){let s=n(o);s!==Number.MAX_SAFE_INTEGER&&(r[o][1]=s)}for(;r.length>1;){let o=[0,Number.MAX_SAFE_INTEGER];for(let s=0;s<r.length-1;s++)r[s][1]<o[1]&&(o=[s,r[s][1]]);if(o[1]!==Number.MAX_SAFE_INTEGER){let s=o[0];r[s][1]=n(s,1),s>0&&(r[s-1][1]=n(s-1,1)),r.splice(s+1,1)}else break}let i=[];for(let o=0;o<r.length-1;o++)i.push(e.get(jL(t.slice(r[o][0],r[o+1][0]))));return i}Yh.bytePairEncode=SAe});var $L=x(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0});fT.TikTokenizer=void 0;var TAe=require("fs"),IAe=hX(),VL=require("util"),Up=gX();function wAe(t){let e=new Map;try{let n=TAe.readFileSync(t,"utf-8");return r(n),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let s=new Uint8Array(Buffer.from(o[0],"base64")),a=parseInt(o[1]);if(!isNaN(a))e.set(s,a);else throw new Error(`Can't parse ${o[1]} to integer`)}}}function AAe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var GL=class{constructor(e,r,n,i=8192){this.textEncoder=new VL.TextEncoder,this.textDecoder=new VL.TextDecoder("utf-8");let o={max:i};this.cache=new IAe.LRUCache(o);let s=wAe(e);this.init(s,r,n)}init(e,r,n){this.encoder=new Map;for(let[i,o]of e)this.encoder.set((0,Up.uint8ArrayToString)(i),o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>AAe(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(this.encoder.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let s=o?i+o.index:e.length;return[o,s]}encode(e,r){let n=[],i=0;for(;;){let o,s;if([o,s]=this.findNextSpecialToken(e,i,r),s>i&&this.encodeByIndex(e,n,i,s),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,s=Array.from(e.substring(n,i).matchAll(this.regex));for(var a=0;a<s.length&&(o=s[a],o!==void 0);a++)if(this.cache.has(o[0]))r.push(...this.cache.get(o[0]));else{let l=this.textEncoder.encode(o[0]),c=this.encoder?.get((0,Up.uint8ArrayToString)(l));if(c!==void 0)r.push(c),this.cache.set(o[0],[c]);else{let u=(0,Up.bytePairEncode)(l,this.encoder);r.push(...u),this.cache.set(o[0],u)}}}encodeTrimSuffixByIndex(e,r,n,i,o,s,a){let l,c=Array.from(e.substring(n,i).matchAll(this.regex));for(var u=0;u<c.length;u++){l=c[u];let d=l[0];if(this.cache.has(d)){let p=this.cache.get(d);if(s+=p.length,s<=o)a+=d.length,r.push(...p);else break}else{let p=this.textEncoder.encode(d),f=this.encoder.get((0,Up.uint8ArrayToString)(p));if(f!==void 0)if(s++,s<=o)a+=d.length,r.push(f);else break;else{let m=(0,Up.bytePairEncode)(p,this.encoder);if(this.cache.set(d,m),s+=m.length,s<=o)a+=d.length,r.push(...m);else break}}if(s>=o)break}return{tokenCount:s,encodeLength:a}}encodeTrimSuffix(e,r,n){let i=[],o=0,s=0,a=0;for(;;){let c,u;if([c,u]=this.findNextSpecialToken(e,o,n),u>o){let{tokenCount:d,encodeLength:p}=this.encodeTrimSuffixByIndex(e,i,o,u,r,s,a);if(s=d,a=p,s>=r)break}if(c!==null){if(s++,s<=r&&(o=o+this.encodeSpecialToken(i,c),a+=c[0].length,o>=e.length)||s>=r)break}else break}let l=a===e.length?e:e.slice(0,a);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,s=0,a=0,l=new Map;for(l.set(s,a);;){let f,m;if([f,m]=this.findNextSpecialToken(e,o,n),m>o){let h,g=Array.from(e.substring(o,m).matchAll(this.regex));for(var c=0;c<g.length;c++){h=g[c];let v=h[0];if(this.cache.has(v)){let y=this.cache.get(v);s+=y.length,a+=v.length,i.push(...y),l.set(s,a)}else{let y=new VL.TextEncoder().encode(v),_=this.encoder.get((0,Up.uint8ArrayToString)(y));if(_!==void 0)s++,a+=v.length,i.push(_),l.set(s,a);else{let T=(0,Up.bytePairEncode)(y,this.encoder);this.cache.set(v,T),s+=T.length,a+=v.length,i.push(...T),l.set(s,a)}}}}if(f!==null){if(o=o+this.encodeSpecialToken(i,f),s++,a+=f[0].length,l.set(s,a),o>=e.length)break}else break}if(s<=r)return{tokenIds:i,text:e};let u=s-r,d=0,p=0;for(let[f,m]of l)if(f>=u){d=f,p=m;break}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let s=this.specialTokensDecoder?.get(n);s!==void 0&&(i=Array.from(this.textEncoder.encode(s)))}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};fT.TikTokenizer=GL});var SX=x(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.createTokenizer=Zr.createByEncoderName=Zr.createByModelName=Zr.getRegexByModel=Zr.getRegexByEncoder=Zr.getSpecialTokensByModel=Zr.getSpecialTokensByEncoder=Zr.MODEL_TO_ENCODING=void 0;var mT=require("fs"),zL=require("path"),RAe=$L(),PAe=new Map([["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"]]);Zr.MODEL_TO_ENCODING=new Map([["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var WL="<|endoftext|>",vX="<|fim_prefix|>",yX="<|fim_middle|>",_X="<|fim_suffix|>",kAe="<|endofprompt|>",H_="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",xX="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+";function KL(t){let e="";if(Zr.MODEL_TO_ENCODING.has(t))e=Zr.MODEL_TO_ENCODING.get(t);else for(let[r,n]of PAe)if(t.startsWith(r)){e=n;break}return e}async function NAe(t,e){let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let n=await r.text();mT.writeFileSync(e,n)}function YL(t){let e=new Map([[WL,50256]]);switch(t){case"cl100k_base":e=new Map([[WL,100257],[vX,100258],[yX,100259],[_X,100260],[kAe,100276]]);break;case"p50k_edit":e=new Map([[WL,50256],[vX,50281],[yX,50282],[_X,50283]]);break;default:break}return e}Zr.getSpecialTokensByEncoder=YL;function OAe(t){let e=KL(t);return YL(e)}Zr.getSpecialTokensByModel=OAe;function bX(t){switch(t){case"cl100k_base":return xX;default:break}return H_}Zr.getRegexByEncoder=bX;function DAe(t){let e=KL(t);return bX(e)}Zr.getRegexByModel=DAe;async function LAe(t,e=null){return EX(KL(t),e)}Zr.createByModelName=LAe;async function EX(t,e=null){let r,n,i=YL(t);switch(t){case"cl100k_base":r=xX,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=H_,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=H_,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=H_,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=H_,n="https://pythia.blob.core.windows.net/public/encoding/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=zL.basename(n),s=zL.resolve(__dirname,"..","model");mT.existsSync(s)||mT.mkdirSync(s,{recursive:!0});let a=zL.resolve(s,o);return mT.existsSync(a)||(console.log(`Downloading file from ${n}`),await NAe(n,a),console.log(`Saved file to ${a}`)),CX(a,i,r)}Zr.createByEncoderName=EX;function CX(t,e,r,n=8192){return new RAe.TikTokenizer(t,e,r,n)}Zr.createTokenizer=CX});var TX=x(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.createTokenizer=en.createByEncoderName=en.createByModelName=en.getSpecialTokensByModel=en.getSpecialTokensByEncoder=en.getRegexByModel=en.getRegexByEncoder=en.MODEL_TO_ENCODING=en.TikTokenizer=void 0;var MAe=$L();Object.defineProperty(en,"TikTokenizer",{enumerable:!0,get:function(){return MAe.TikTokenizer}});var Su=SX();Object.defineProperty(en,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return Su.MODEL_TO_ENCODING}});Object.defineProperty(en,"getRegexByEncoder",{enumerable:!0,get:function(){return Su.getRegexByEncoder}});Object.defineProperty(en,"getRegexByModel",{enumerable:!0,get:function(){return Su.getRegexByModel}});Object.defineProperty(en,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return Su.getSpecialTokensByEncoder}});Object.defineProperty(en,"getSpecialTokensByModel",{enumerable:!0,get:function(){return Su.getSpecialTokensByModel}});Object.defineProperty(en,"createByModelName",{enumerable:!0,get:function(){return Su.createByModelName}});Object.defineProperty(en,"createByEncoderName",{enumerable:!0,get:function(){return Su.createByEncoderName}});Object.defineProperty(en,"createTokenizer",{enumerable:!0,get:function(){return Su.createTokenizer}})});var DX=x((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if((224&s)!=192){var l=63&t[e++];if((s=(240&s)==224?(15&s)<<12|a<<6|l:(7&s)<<18|a<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}return e[r]=0,r-i}function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var s=i.exports;s=relocateExports(s,1024);var a=getDylinkMetadata(o);a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(s,"main"),Module.asm=s,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function r(i){e(i.instance,i.module)}function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,r=0;function n(){for(var v=0,y=1;;){var _=t[e++];if(v+=(127&_)*y,y*=128,!(128&_))break}return v}function i(){var v=n();return UTF8ArrayToString(t,(e+=v)-v,v)}function o(v,y){if(v)throw new Error(y)}var s="dylink.0";if(t instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(t,s);a.length===0&&(s="dylink",a=WebAssembly.Module.customSections(t,s)),o(a.length===0,"need dylink section"),r=(t=new Uint8Array(a[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,s=i()}var c={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(s=="dylink"){c.memorySize=n(),c.memoryAlign=n(),c.tableSize=n(),c.tableAlign=n();for(var u=n(),d=0;d<u;++d){var p=i();c.neededDynlibs.push(p)}}else for(o(s!=="dylink.0");e<r;){var f=t[e++],m=n();if(f===1)c.memorySize=n(),c.memoryAlign=n(),c.tableSize=n(),c.tableAlign=n();else if(f===2)for(u=n(),d=0;d<u;++d)p=i(),c.neededDynlibs.push(p);else if(f===3)for(var h=n();h--;){var g=i();256&n()&&c.tlsExports.add(g)}else if(f===4)for(h=n();h--;)i(),g=i(),(3&n())==1&&c.weakImports.add(g);else e+=m}return c}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(a){if(e.fs&&e.fs.findObject(a)){var l=e.fs.readFile(a,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(a=locateFile(a),e.loadAsync)return new Promise(function(c,u){readAsync(a,d=>c(new Uint8Array(d)),u)});if(!readBinary)throw new Error(a+": file not found, and synchronous loading of external files is not available");return readBinary(a)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var a=preloadedWasm[t];return e.loadAsync?Promise.resolve(a):a}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}function s(a){n.global&&mergeLibSymbols(a,t),n.module=a}return n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(a){return s(a),!0}):(s(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((s=65536)-o%s)%s)))return!0}var o,s;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},doStat:function(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(a.node)))return-54;throw a}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=s%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(t);return FS.llseek(s,o,n),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var s=HEAPU32[e>>2],a=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,s,a,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var s=t.charCodeAt(o);HEAP16[e>>1]=s,e+=2}return HEAP16[e>>1]=0,e-n}function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(s=>{HEAP32[i++]=allocateUTF8OnStack(s)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(s){return handleException(s)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(l,c,u)=>e.slice(l,u);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let c=0;c<i;c++)marshalRange(l,n.includedRanges[c]),l+=SIZE_OF_RANGE}let s=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let s=0;s<r;s++)i[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let u=0,d=o.length;u<d;u++)e.includes(o[u])&&i.push(u);let s=C._malloc(SIZE_OF_INT*i.length);for(let u=0,d=i.length;u<d;u++)setValue(s+u*SIZE_OF_INT,i[u],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,i.length,r.row,r.column,n.row,n.column);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=new Array(a);if(a>0){let u=l;for(let d=0;d<a;d++)c[d]=unmarshalNode(this.tree,u),u+=SIZE_OF_NODE}return C._free(l),C._free(s),c}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,v=e.substr(g,100).split(`
`)[0],y,_=v.match(QUERY_WORD_REGEX)[0];switch(h){case 2:y=new RangeError(`Bad node name '${_}'`);break;case 3:y=new RangeError(`Bad field name '${_}'`);break;case 4:y=new RangeError(`Bad capture name @${_}`);break;case 5:y=new TypeError(`Bad pattern structure at offset ${g}: '${v}'...`),_="";break;default:y=new SyntaxError(`Bad syntax at offset ${g}: '${v}'...`),_=""}throw y.index=g,y.length=_.length,C._free(n),y}let o=C._ts_query_string_count(i),s=C._ts_query_capture_count(i),a=C._ts_query_pattern_count(i),l=new Array(s),c=new Array(o);for(let h=0;h<s;h++){let g=C._ts_query_capture_name_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");l[h]=UTF8ToString(g,v)}for(let h=0;h<o;h++){let g=C._ts_query_string_value_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");c[h]=UTF8ToString(g,v)}let u=new Array(a),d=new Array(a),p=new Array(a),f=new Array(a),m=new Array(a);for(let h=0;h<a;h++){let g=C._ts_query_predicates_for_pattern(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");f[h]=[],m[h]=[];let y=[],_=g;for(let T=0;T<v;T++){let I=getValue(_,"i32");_+=SIZE_OF_INT;let R=getValue(_,"i32");if(_+=SIZE_OF_INT,I===PREDICATE_STEP_TYPE_CAPTURE)y.push({type:"capture",name:l[R]});else if(I===PREDICATE_STEP_TYPE_STRING)y.push({type:"string",value:c[R]});else if(y.length>0){if(y[0].type!=="string")throw new Error("Predicates must begin with a literal value");let w=y[0].value,O=!0;switch(w){case"not-eq?":O=!1;case"eq?":if(y.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(y.length-1));if(y[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${y[1].value}"`);if(y[2].type==="capture"){let N=y[1].name,q=y[2].name;m[h].push(function(B){let P,F;for(let W of B)W.name===N&&(P=W.node),W.name===q&&(F=W.node);return P===void 0||F===void 0||P.text===F.text===O})}else{let N=y[1].name,q=y[2].value;m[h].push(function(B){for(let P of B)if(P.name===N)return P.node.text===q===O;return!0})}break;case"not-match?":O=!1;case"match?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${y[1].value}".`);if(y[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${y[2].value}.`);let V=y[1].name,L=new RegExp(y[2].value);m[h].push(function(N){for(let q of N)if(q.name===V)return L.test(q.node.text)===O;return!0});break;case"set!":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(N=>N.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[h]||(u[h]={}),u[h][y[1].value]=y[2]?y[2].value:null;break;case"is?":case"is-not?":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#${w}\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(N=>N.type!=="string"))throw new Error(`Arguments to \`#${w}\` predicate must be a strings.".`);let A=w==="is?"?d:p;A[h]||(A[h]={}),A[h][y[1].value]=y[2]?y[2].value:null;break;default:f[h].push({operator:w,operands:y.slice(1)})}y.length=0}}Object.freeze(u[h]),Object.freeze(d[h]),Object.freeze(p[h])}return C._free(n),new Query(INTERNAL,i,l,m,f,Object.freeze(u),Object.freeze(d),Object.freeze(p))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),s=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=i[s]();return new Language(INTERNAL,a)})}}class Query{constructor(e,r,n,i,o,s,a,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=new Array(s);this.exceededMatchLimit=!!l;let u=0,d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=new Array(m);if(d=unmarshalCaptures(this,e.tree,d,h),this.textPredicates[f].every(g=>g(h))){c[u++]={pattern:f,captures:h};let g=this.setProperties[f];g&&(c[p].setProperties=g);let v=this.assertedProperties[f];v&&(c[p].assertedProperties=v);let y=this.refutedProperties[f];y&&(c[p].refutedProperties=y)}}return c.length=u,C._free(a),c}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=[];this.exceededMatchLimit=!!l;let u=[],d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=getValue(d,"i32");if(d+=SIZE_OF_INT,u.length=m,d=unmarshalCaptures(this,e.tree,d,u),this.textPredicates[f].every(g=>g(u))){let g=u[h],v=this.setProperties[f];v&&(g.setProperties=v);let y=this.assertedProperties[f];y&&(g.assertedProperties=y);let _=this.refutedProperties[f];_&&(g.refutedProperties=_),c.push(g)}}return C._free(a),c}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let s=getValue(r,"i32"),a=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[s],node:a}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,t);return a.id=r,a.startIndex=n,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var MJ=x((gZe,LJ)=>{var EM=class{constructor(e){this.value=e,this.next=void 0}},CM=class{constructor(){this.clear()}enqueue(e){let r=new EM(e);this._head?(this._tail.next=r,this._tail=r):(this._head=r,this._tail=r),this._size++}dequeue(){let e=this._head;if(e)return this._head=this._head.next,this._size--,e.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let e=this._head;for(;e;)yield e.value,e=e.next}};LJ.exports=CM});var SM=x((vZe,FJ)=>{"use strict";var WRe=MJ(),KRe=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let e=new WRe,r=0,n=()=>{r--,e.size>0&&e.dequeue()()},i=async(a,l,...c)=>{r++;let u=(async()=>a(...c))();l(u);try{await u}catch{}n()},o=(a,l,...c)=>{e.enqueue(i.bind(null,a,l,...c)),(async()=>(await Promise.resolve(),r<t&&e.size>0&&e.dequeue()()))()},s=(a,...l)=>new Promise(c=>{o(a,c,...l)});return Object.defineProperties(s,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),s};FJ.exports=KRe});var uZ=x((Mtt,lZ)=>{function tZ(t){return Array.isArray(t)?t:[t]}var oZ="",rZ=" ",NM="\\",_Pe=/^\s+$/,xPe=/(?:[^\\]|^)\\$/,bPe=/^\\!/,EPe=/^\\#/,CPe=/\r?\n/g,SPe=/^\.*\/|^\.+$/,OM="/",sZ="node-ignore";typeof Symbol<"u"&&(sZ=Symbol.for("node-ignore"));var nZ=sZ,TPe=(t,e,r)=>Object.defineProperty(t,e,{value:r}),IPe=/([0-z])-([0-z])/g,aZ=()=>!1,wPe=t=>t.replace(IPe,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:oZ),APe=t=>{let{length:e}=t;return t.slice(0,e-e%2)},RPe=[[/\\?\s+$/,t=>t.indexOf("\\")===0?rZ:oZ],[/\\\s/g,()=>rZ],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>NM],[/\\\\/g,()=>NM],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===NM?`\\[${r}${APe(n)}${i}`:i==="]"&&n.length%2===0?`[${wPe(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],iZ=Object.create(null),PPe=(t,e)=>{let r=iZ[t];return r||(r=RPe.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),iZ[t]=r),e?new RegExp(r,"i"):new RegExp(r)},MM=t=>typeof t=="string",kPe=t=>t&&MM(t)&&!_Pe.test(t)&&!xPe.test(t)&&t.indexOf("#")!==0,NPe=t=>t.split(CPe),DM=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},OPe=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(bPe,"!").replace(EPe,"#");let i=PPe(t,e);return new DM(r,t,n,i)},DPe=(t,e)=>{throw new e(t)},il=(t,e,r)=>MM(t)?t?il.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),cZ=t=>SPe.test(t);il.isNotRelative=cZ;il.convert=t=>t;var LM=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){TPe(this,nZ,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[nZ]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(kPe(e)){let r=OPe(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,tZ(MM(e)?NPe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!r)return;o.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let o=e&&il.convert(e);return il(o,e,this._allowRelativePaths?aZ:DPe),this._t(o,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(OM)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let o=this._t(i.join(OM)+OM,r,n,i);return r[e]=o.ignored?o:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return tZ(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},BT=t=>new LM(t),LPe=t=>il(t&&il.convert(t),t,aZ);BT.isPathValid=LPe;BT.default=BT;lZ.exports=BT;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");il.convert=t;let e=/^[a-z]:\//i;il.isNotRelative=r=>e.test(r)||cZ(r)}});var yZ=x(Fu=>{"use strict";var jPe=Fu&&Fu.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.isBinaryFileSync=Fu.isBinaryFile=void 0;var Mu=require("fs"),QM=require("util"),VPe=QM.promisify(Mu.stat),GPe=QM.promisify(Mu.open),$Pe=QM.promisify(Mu.close),n0=512,YM=class{constructor(e,r){this.fileBuffer=e,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(e){let r=new Array;for(let n=0;n<e;n++)r[n]=this.nextByte();return r}};function KM(t){let e=0,r=0;for(;!t.hasError();){let n=t.nextByte();if(r=r|(n&127)<<7*e,!(n&128))break;e++}return r}function zPe(t){switch(KM(t)&7){case 0:return KM(t),!0;case 1:return t.next(8),!0;case 2:let n=KM(t);return t.next(n),!0;case 5:return t.next(4),!0}return!1}function WPe(t,e){let r=new YM(t,e),n=0;for(;;){if(!zPe(r)&&!r.hasError())return!1;if(r.hasError())break;n++}return n>0}function KPe(t,e){return jPe(this,void 0,void 0,function*(){if(gZ(t)){let r=yield VPe(t);vZ(r);let n=yield GPe(t,"r"),i=Buffer.alloc(n0);return new Promise((o,s)=>{Mu.read(n,i,0,n0,0,(a,l,c)=>{$Pe(n),a?s(a):o(jT(i,l))})})}else return e===void 0&&(e=t.length),jT(t,e)})}Fu.isBinaryFile=KPe;function YPe(t,e){if(gZ(t)){let r=Mu.statSync(t);vZ(r);let n=Mu.openSync(t,"r"),i=Buffer.alloc(n0),o=Mu.readSync(n,i,0,n0,0);return Mu.closeSync(n),jT(i,o)}else return e===void 0&&(e=t.length),jT(t,e)}Fu.isBinaryFileSync=YPe;function jT(t,e){if(e===0)return!1;let r=0,n=Math.min(e,n0);if(e>=3&&t[0]===239&&t[1]===187&&t[2]===191||e>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||e>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||e>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(n>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(e>=2&&t[0]===254&&t[1]===255||e>=2&&t[0]===255&&t[1]===254)return!1;for(let i=0;i<n;i++){if(t[i]===0)return!0;if((t[i]<7||t[i]>14)&&(t[i]<32||t[i]>127)){if(t[i]>193&&t[i]<224&&i+1<n){if(i++,t[i]>127&&t[i]<192)continue}else if(t[i]>223&&t[i]<240&&i+2<n&&(i++,t[i]>127&&t[i]<192&&t[i+1]>127&&t[i+1]<192)){i++;continue}if(r++,i>=32&&r*100/n>10)return!0}}return!!(r*100/n>10||r>1&&WPe(t,n))}function gZ(t){return typeof t=="string"}function vZ(t){if(!t.isFile())throw new Error("Path provided was not a file!")}});var a0=x((git,MZ)=>{"use strict";var u1e=require("path"),Ga="\\\\/",NZ=`[^${Ga}]`,cl="\\.",d1e="\\+",p1e="\\?",QT="\\/",f1e="(?=.)",OZ="[^/]",r2=`(?:${QT}|$)`,DZ=`(?:^|${QT})`,n2=`${cl}{1,2}${r2}`,m1e=`(?!${cl})`,h1e=`(?!${DZ}${n2})`,g1e=`(?!${cl}{0,1}${r2})`,v1e=`(?!${n2})`,y1e=`[^.${QT}]`,_1e=`${OZ}*?`,LZ={DOT_LITERAL:cl,PLUS_LITERAL:d1e,QMARK_LITERAL:p1e,SLASH_LITERAL:QT,ONE_CHAR:f1e,QMARK:OZ,END_ANCHOR:r2,DOTS_SLASH:n2,NO_DOT:m1e,NO_DOTS:h1e,NO_DOT_SLASH:g1e,NO_DOTS_SLASH:v1e,QMARK_NO_DOT:y1e,STAR:_1e,START_ANCHOR:DZ},x1e={...LZ,SLASH_LITERAL:`[${Ga}]`,QMARK:NZ,STAR:`${NZ}*?`,DOTS_SLASH:`${cl}{1,2}(?:[${Ga}]|$)`,NO_DOT:`(?!${cl})`,NO_DOTS:`(?!(?:^|[${Ga}])${cl}{1,2}(?:[${Ga}]|$))`,NO_DOT_SLASH:`(?!${cl}{0,1}(?:[${Ga}]|$))`,NO_DOTS_SLASH:`(?!${cl}{1,2}(?:[${Ga}]|$))`,QMARK_NO_DOT:`[^.${Ga}]`,START_ANCHOR:`(?:^|[${Ga}])`,END_ANCHOR:`(?:[${Ga}]|$)`},b1e={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};MZ.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:b1e,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:u1e.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?x1e:LZ}}});var XT=x(Yi=>{"use strict";var E1e=require("path"),C1e=process.platform==="win32",{REGEX_BACKSLASH:S1e,REGEX_REMOVE_BACKSLASH:T1e,REGEX_SPECIAL_CHARS:I1e,REGEX_SPECIAL_CHARS_GLOBAL:w1e}=a0();Yi.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Yi.hasRegexChars=t=>I1e.test(t);Yi.isRegexChar=t=>t.length===1&&Yi.hasRegexChars(t);Yi.escapeRegex=t=>t.replace(w1e,"\\$1");Yi.toPosixSlashes=t=>t.replace(S1e,"/");Yi.removeBackslashes=t=>t.replace(T1e,e=>e==="\\"?"":e);Yi.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};Yi.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:C1e===!0||E1e.sep==="\\";Yi.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?Yi.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};Yi.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Yi.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var GZ=x((yit,VZ)=>{"use strict";var FZ=XT(),{CHAR_ASTERISK:i2,CHAR_AT:A1e,CHAR_BACKWARD_SLASH:c0,CHAR_COMMA:R1e,CHAR_DOT:o2,CHAR_EXCLAMATION_MARK:s2,CHAR_FORWARD_SLASH:jZ,CHAR_LEFT_CURLY_BRACE:a2,CHAR_LEFT_PARENTHESES:c2,CHAR_LEFT_SQUARE_BRACKET:P1e,CHAR_PLUS:k1e,CHAR_QUESTION_MARK:BZ,CHAR_RIGHT_CURLY_BRACE:N1e,CHAR_RIGHT_PARENTHESES:UZ,CHAR_RIGHT_SQUARE_BRACKET:O1e}=a0(),qZ=t=>t===jZ||t===c0,HZ=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},D1e=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],l=t,c=-1,u=0,d=0,p=!1,f=!1,m=!1,h=!1,g=!1,v=!1,y=!1,_=!1,T=!1,I=!1,R=0,w,O,V={value:"",depth:0,isGlob:!1},L=()=>c>=n,A=()=>l.charCodeAt(c+1),N=()=>(w=O,l.charCodeAt(++c));for(;c<n;){O=N();let W;if(O===c0){y=V.backslashes=!0,O=N(),O===a2&&(v=!0);continue}if(v===!0||O===a2){for(R++;L()!==!0&&(O=N());){if(O===c0){y=V.backslashes=!0,N();continue}if(O===a2){R++;continue}if(v!==!0&&O===o2&&(O=N())===o2){if(p=V.isBrace=!0,m=V.isGlob=!0,I=!0,i===!0)continue;break}if(v!==!0&&O===R1e){if(p=V.isBrace=!0,m=V.isGlob=!0,I=!0,i===!0)continue;break}if(O===N1e&&(R--,R===0)){v=!1,p=V.isBrace=!0,I=!0;break}}if(i===!0)continue;break}if(O===jZ){if(o.push(c),s.push(V),V={value:"",depth:0,isGlob:!1},I===!0)continue;if(w===o2&&c===u+1){u+=2;continue}d=c+1;continue}if(r.noext!==!0&&(O===k1e||O===A1e||O===i2||O===BZ||O===s2)===!0&&A()===c2){if(m=V.isGlob=!0,h=V.isExtglob=!0,I=!0,O===s2&&c===u&&(T=!0),i===!0){for(;L()!==!0&&(O=N());){if(O===c0){y=V.backslashes=!0,O=N();continue}if(O===UZ){m=V.isGlob=!0,I=!0;break}}continue}break}if(O===i2){if(w===i2&&(g=V.isGlobstar=!0),m=V.isGlob=!0,I=!0,i===!0)continue;break}if(O===BZ){if(m=V.isGlob=!0,I=!0,i===!0)continue;break}if(O===P1e){for(;L()!==!0&&(W=N());){if(W===c0){y=V.backslashes=!0,N();continue}if(W===O1e){f=V.isBracket=!0,m=V.isGlob=!0,I=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&O===s2&&c===u){_=V.negated=!0,u++;continue}if(r.noparen!==!0&&O===c2){if(m=V.isGlob=!0,i===!0){for(;L()!==!0&&(O=N());){if(O===c2){y=V.backslashes=!0,O=N();continue}if(O===UZ){I=!0;break}}continue}break}if(m===!0){if(I=!0,i===!0)continue;break}}r.noext===!0&&(h=!1,m=!1);let q=l,B="",P="";u>0&&(B=l.slice(0,u),l=l.slice(u),d-=u),q&&m===!0&&d>0?(q=l.slice(0,d),P=l.slice(d)):m===!0?(q="",P=l):q=l,q&&q!==""&&q!=="/"&&q!==l&&qZ(q.charCodeAt(q.length-1))&&(q=q.slice(0,-1)),r.unescape===!0&&(P&&(P=FZ.removeBackslashes(P)),q&&y===!0&&(q=FZ.removeBackslashes(q)));let F={prefix:B,input:t,start:u,base:q,glob:P,isBrace:p,isBracket:f,isGlob:m,isExtglob:h,isGlobstar:g,negated:_,negatedExtglob:T};if(r.tokens===!0&&(F.maxDepth=0,qZ(O)||s.push(V),F.tokens=s),r.parts===!0||r.tokens===!0){let W;for(let xe=0;xe<o.length;xe++){let Ye=W?W+1:u,de=o[xe],Ue=t.slice(Ye,de);r.tokens&&(xe===0&&u!==0?(s[xe].isPrefix=!0,s[xe].value=B):s[xe].value=Ue,HZ(s[xe]),F.maxDepth+=s[xe].depth),(xe!==0||Ue!=="")&&a.push(Ue),W=de}if(W&&W+1<t.length){let xe=t.slice(W+1);a.push(xe),r.tokens&&(s[s.length-1].value=xe,HZ(s[s.length-1]),F.maxDepth+=s[s.length-1].depth)}F.slashes=o,F.parts=a}return F};VZ.exports=D1e});var WZ=x((_it,zZ)=>{"use strict";var JT=a0(),So=XT(),{MAX_LENGTH:ZT,POSIX_REGEX_SOURCE:L1e,REGEX_NON_SPECIAL_CHARS:M1e,REGEX_SPECIAL_CHARS_BACKREF:F1e,REPLACEMENTS:$Z}=JT,B1e=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>So.escapeRegex(i)).join("..")}return r},gg=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,l2=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=$Z[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(ZT,r.maxLength):ZT,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",l=So.isWindows(e),c=JT.globChars(l),u=JT.extglobChars(c),{DOT_LITERAL:d,PLUS_LITERAL:p,SLASH_LITERAL:f,ONE_CHAR:m,DOTS_SLASH:h,NO_DOT:g,NO_DOT_SLASH:v,NO_DOTS_SLASH:y,QMARK:_,QMARK_NO_DOT:T,STAR:I,START_ANCHOR:R}=c,w=ee=>`(${a}(?:(?!${R}${ee.dot?h:d}).)*?)`,O=r.dot?"":g,V=r.dot?_:T,L=r.bash===!0?w(r):I;r.capture&&(L=`(${L})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let A={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=So.removePrefix(t,A),i=t.length;let N=[],q=[],B=[],P=o,F,W=()=>A.index===i-1,xe=A.peek=(ee=1)=>t[A.index+ee],Ye=A.advance=()=>t[++A.index]||"",de=()=>t.slice(A.index+1),Ue=(ee="",Ee=0)=>{A.consumed+=ee,A.index+=Ee},z=ee=>{A.output+=ee.output!=null?ee.output:ee.value,Ue(ee.value)},Z=()=>{let ee=1;for(;xe()==="!"&&(xe(2)!=="("||xe(3)==="?");)Ye(),A.start++,ee++;return ee%2===0?!1:(A.negated=!0,A.start++,!0)},ve=ee=>{A[ee]++,B.push(ee)},he=ee=>{A[ee]--,B.pop()},ne=ee=>{if(P.type==="globstar"){let Ee=A.braces>0&&(ee.type==="comma"||ee.type==="brace"),J=ee.extglob===!0||N.length&&(ee.type==="pipe"||ee.type==="paren");ee.type!=="slash"&&ee.type!=="paren"&&!Ee&&!J&&(A.output=A.output.slice(0,-P.output.length),P.type="star",P.value="*",P.output=L,A.output+=P.output)}if(N.length&&ee.type!=="paren"&&(N[N.length-1].inner+=ee.value),(ee.value||ee.output)&&z(ee),P&&P.type==="text"&&ee.type==="text"){P.value+=ee.value,P.output=(P.output||"")+ee.value;return}ee.prev=P,s.push(ee),P=ee},je=(ee,Ee)=>{let J={...u[Ee],conditions:1,inner:""};J.prev=P,J.parens=A.parens,J.output=A.output;let Oe=(r.capture?"(":"")+J.open;ve("parens"),ne({type:ee,value:Ee,output:A.output?"":m}),ne({type:"paren",extglob:!0,value:Ye(),output:Oe}),N.push(J)},nt=ee=>{let Ee=ee.close+(r.capture?")":""),J;if(ee.type==="negate"){let Oe=L;if(ee.inner&&ee.inner.length>1&&ee.inner.includes("/")&&(Oe=w(r)),(Oe!==L||W()||/^\)+$/.test(de()))&&(Ee=ee.close=`)$))${Oe}`),ee.inner.includes("*")&&(J=de())&&/^\.[^\\/.]+$/.test(J)){let $e=l2(J,{...e,fastpaths:!1}).output;Ee=ee.close=`)${$e})${Oe})`}ee.prev.type==="bos"&&(A.negatedExtglob=!0)}ne({type:"paren",extglob:!0,value:F,output:Ee}),he("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let ee=!1,Ee=t.replace(F1e,(J,Oe,$e,pt,it,pc)=>pt==="\\"?(ee=!0,J):pt==="?"?Oe?Oe+pt+(it?_.repeat(it.length):""):pc===0?V+(it?_.repeat(it.length):""):_.repeat($e.length):pt==="."?d.repeat($e.length):pt==="*"?Oe?Oe+pt+(it?L:""):L:Oe?J:`\\${J}`);return ee===!0&&(r.unescape===!0?Ee=Ee.replace(/\\/g,""):Ee=Ee.replace(/\\+/g,J=>J.length%2===0?"\\\\":J?"\\":"")),Ee===t&&r.contains===!0?(A.output=t,A):(A.output=So.wrapOutput(Ee,A,e),A)}for(;!W();){if(F=Ye(),F==="\0")continue;if(F==="\\"){let J=xe();if(J==="/"&&r.bash!==!0||J==="."||J===";")continue;if(!J){F+="\\",ne({type:"text",value:F});continue}let Oe=/^\\+/.exec(de()),$e=0;if(Oe&&Oe[0].length>2&&($e=Oe[0].length,A.index+=$e,$e%2!==0&&(F+="\\")),r.unescape===!0?F=Ye():F+=Ye(),A.brackets===0){ne({type:"text",value:F});continue}}if(A.brackets>0&&(F!=="]"||P.value==="["||P.value==="[^")){if(r.posix!==!1&&F===":"){let J=P.value.slice(1);if(J.includes("[")&&(P.posix=!0,J.includes(":"))){let Oe=P.value.lastIndexOf("["),$e=P.value.slice(0,Oe),pt=P.value.slice(Oe+2),it=L1e[pt];if(it){P.value=$e+it,A.backtrack=!0,Ye(),!o.output&&s.indexOf(P)===1&&(o.output=m);continue}}}(F==="["&&xe()!==":"||F==="-"&&xe()==="]")&&(F=`\\${F}`),F==="]"&&(P.value==="["||P.value==="[^")&&(F=`\\${F}`),r.posix===!0&&F==="!"&&P.value==="["&&(F="^"),P.value+=F,z({value:F});continue}if(A.quotes===1&&F!=='"'){F=So.escapeRegex(F),P.value+=F,z({value:F});continue}if(F==='"'){A.quotes=A.quotes===1?0:1,r.keepQuotes===!0&&ne({type:"text",value:F});continue}if(F==="("){ve("parens"),ne({type:"paren",value:F});continue}if(F===")"){if(A.parens===0&&r.strictBrackets===!0)throw new SyntaxError(gg("opening","("));let J=N[N.length-1];if(J&&A.parens===J.parens+1){nt(N.pop());continue}ne({type:"paren",value:F,output:A.parens?")":"\\)"}),he("parens");continue}if(F==="["){if(r.nobracket===!0||!de().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(gg("closing","]"));F=`\\${F}`}else ve("brackets");ne({type:"bracket",value:F});continue}if(F==="]"){if(r.nobracket===!0||P&&P.type==="bracket"&&P.value.length===1){ne({type:"text",value:F,output:`\\${F}`});continue}if(A.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(gg("opening","["));ne({type:"text",value:F,output:`\\${F}`});continue}he("brackets");let J=P.value.slice(1);if(P.posix!==!0&&J[0]==="^"&&!J.includes("/")&&(F=`/${F}`),P.value+=F,z({value:F}),r.literalBrackets===!1||So.hasRegexChars(J))continue;let Oe=So.escapeRegex(P.value);if(A.output=A.output.slice(0,-P.value.length),r.literalBrackets===!0){A.output+=Oe,P.value=Oe;continue}P.value=`(${a}${Oe}|${P.value})`,A.output+=P.value;continue}if(F==="{"&&r.nobrace!==!0){ve("braces");let J={type:"brace",value:F,output:"(",outputIndex:A.output.length,tokensIndex:A.tokens.length};q.push(J),ne(J);continue}if(F==="}"){let J=q[q.length-1];if(r.nobrace===!0||!J){ne({type:"text",value:F,output:F});continue}let Oe=")";if(J.dots===!0){let $e=s.slice(),pt=[];for(let it=$e.length-1;it>=0&&(s.pop(),$e[it].type!=="brace");it--)$e[it].type!=="dots"&&pt.unshift($e[it].value);Oe=B1e(pt,r),A.backtrack=!0}if(J.comma!==!0&&J.dots!==!0){let $e=A.output.slice(0,J.outputIndex),pt=A.tokens.slice(J.tokensIndex);J.value=J.output="\\{",F=Oe="\\}",A.output=$e;for(let it of pt)A.output+=it.output||it.value}ne({type:"brace",value:F,output:Oe}),he("braces"),q.pop();continue}if(F==="|"){N.length>0&&N[N.length-1].conditions++,ne({type:"text",value:F});continue}if(F===","){let J=F,Oe=q[q.length-1];Oe&&B[B.length-1]==="braces"&&(Oe.comma=!0,J="|"),ne({type:"comma",value:F,output:J});continue}if(F==="/"){if(P.type==="dot"&&A.index===A.start+1){A.start=A.index+1,A.consumed="",A.output="",s.pop(),P=o;continue}ne({type:"slash",value:F,output:f});continue}if(F==="."){if(A.braces>0&&P.type==="dot"){P.value==="."&&(P.output=d);let J=q[q.length-1];P.type="dots",P.output+=F,P.value+=F,J.dots=!0;continue}if(A.braces+A.parens===0&&P.type!=="bos"&&P.type!=="slash"){ne({type:"text",value:F,output:d});continue}ne({type:"dot",value:F,output:d});continue}if(F==="?"){if(!(P&&P.value==="(")&&r.noextglob!==!0&&xe()==="("&&xe(2)!=="?"){je("qmark",F);continue}if(P&&P.type==="paren"){let Oe=xe(),$e=F;if(Oe==="<"&&!So.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(P.value==="("&&!/[!=<:]/.test(Oe)||Oe==="<"&&!/<([!=]|\w+>)/.test(de()))&&($e=`\\${F}`),ne({type:"text",value:F,output:$e});continue}if(r.dot!==!0&&(P.type==="slash"||P.type==="bos")){ne({type:"qmark",value:F,output:T});continue}ne({type:"qmark",value:F,output:_});continue}if(F==="!"){if(r.noextglob!==!0&&xe()==="("&&(xe(2)!=="?"||!/[!=<:]/.test(xe(3)))){je("negate",F);continue}if(r.nonegate!==!0&&A.index===0){Z();continue}}if(F==="+"){if(r.noextglob!==!0&&xe()==="("&&xe(2)!=="?"){je("plus",F);continue}if(P&&P.value==="("||r.regex===!1){ne({type:"plus",value:F,output:p});continue}if(P&&(P.type==="bracket"||P.type==="paren"||P.type==="brace")||A.parens>0){ne({type:"plus",value:F});continue}ne({type:"plus",value:p});continue}if(F==="@"){if(r.noextglob!==!0&&xe()==="("&&xe(2)!=="?"){ne({type:"at",extglob:!0,value:F,output:""});continue}ne({type:"text",value:F});continue}if(F!=="*"){(F==="$"||F==="^")&&(F=`\\${F}`);let J=M1e.exec(de());J&&(F+=J[0],A.index+=J[0].length),ne({type:"text",value:F});continue}if(P&&(P.type==="globstar"||P.star===!0)){P.type="star",P.star=!0,P.value+=F,P.output=L,A.backtrack=!0,A.globstar=!0,Ue(F);continue}let ee=de();if(r.noextglob!==!0&&/^\([^?]/.test(ee)){je("star",F);continue}if(P.type==="star"){if(r.noglobstar===!0){Ue(F);continue}let J=P.prev,Oe=J.prev,$e=J.type==="slash"||J.type==="bos",pt=Oe&&(Oe.type==="star"||Oe.type==="globstar");if(r.bash===!0&&(!$e||ee[0]&&ee[0]!=="/")){ne({type:"star",value:F,output:""});continue}let it=A.braces>0&&(J.type==="comma"||J.type==="brace"),pc=N.length&&(J.type==="pipe"||J.type==="paren");if(!$e&&J.type!=="paren"&&!it&&!pc){ne({type:"star",value:F,output:""});continue}for(;ee.slice(0,3)==="/**";){let Fl=t[A.index+4];if(Fl&&Fl!=="/")break;ee=ee.slice(3),Ue("/**",3)}if(J.type==="bos"&&W()){P.type="globstar",P.value+=F,P.output=w(r),A.output=P.output,A.globstar=!0,Ue(F);continue}if(J.type==="slash"&&J.prev.type!=="bos"&&!pt&&W()){A.output=A.output.slice(0,-(J.output+P.output).length),J.output=`(?:${J.output}`,P.type="globstar",P.output=w(r)+(r.strictSlashes?")":"|$)"),P.value+=F,A.globstar=!0,A.output+=J.output+P.output,Ue(F);continue}if(J.type==="slash"&&J.prev.type!=="bos"&&ee[0]==="/"){let Fl=ee[1]!==void 0?"|$":"";A.output=A.output.slice(0,-(J.output+P.output).length),J.output=`(?:${J.output}`,P.type="globstar",P.output=`${w(r)}${f}|${f}${Fl})`,P.value+=F,A.output+=J.output+P.output,A.globstar=!0,Ue(F+Ye()),ne({type:"slash",value:"/",output:""});continue}if(J.type==="bos"&&ee[0]==="/"){P.type="globstar",P.value+=F,P.output=`(?:^|${f}|${w(r)}${f})`,A.output=P.output,A.globstar=!0,Ue(F+Ye()),ne({type:"slash",value:"/",output:""});continue}A.output=A.output.slice(0,-P.output.length),P.type="globstar",P.output=w(r),P.value+=F,A.output+=P.output,A.globstar=!0,Ue(F);continue}let Ee={type:"star",value:F,output:L};if(r.bash===!0){Ee.output=".*?",(P.type==="bos"||P.type==="slash")&&(Ee.output=O+Ee.output),ne(Ee);continue}if(P&&(P.type==="bracket"||P.type==="paren")&&r.regex===!0){Ee.output=F,ne(Ee);continue}(A.index===A.start||P.type==="slash"||P.type==="dot")&&(P.type==="dot"?(A.output+=v,P.output+=v):r.dot===!0?(A.output+=y,P.output+=y):(A.output+=O,P.output+=O),xe()!=="*"&&(A.output+=m,P.output+=m)),ne(Ee)}for(;A.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(gg("closing","]"));A.output=So.escapeLast(A.output,"["),he("brackets")}for(;A.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(gg("closing",")"));A.output=So.escapeLast(A.output,"("),he("parens")}for(;A.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(gg("closing","}"));A.output=So.escapeLast(A.output,"{"),he("braces")}if(r.strictSlashes!==!0&&(P.type==="star"||P.type==="bracket")&&ne({type:"maybe_slash",value:"",output:`${f}?`}),A.backtrack===!0){A.output="";for(let ee of A.tokens)A.output+=ee.output!=null?ee.output:ee.value,ee.suffix&&(A.output+=ee.suffix)}return A};l2.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(ZT,r.maxLength):ZT,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=$Z[t]||t;let o=So.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:l,DOTS_SLASH:c,NO_DOT:u,NO_DOTS:d,NO_DOTS_SLASH:p,STAR:f,START_ANCHOR:m}=JT.globChars(o),h=r.dot?d:u,g=r.dot?p:u,v=r.capture?"":"?:",y={negated:!1,prefix:""},_=r.bash===!0?".*?":f;r.capture&&(_=`(${_})`);let T=O=>O.noglobstar===!0?_:`(${v}(?:(?!${m}${O.dot?c:s}).)*?)`,I=O=>{switch(O){case"*":return`${h}${l}${_}`;case".*":return`${s}${l}${_}`;case"*.*":return`${h}${_}${s}${l}${_}`;case"*/*":return`${h}${_}${a}${l}${g}${_}`;case"**":return h+T(r);case"**/*":return`(?:${h}${T(r)}${a})?${g}${l}${_}`;case"**/*.*":return`(?:${h}${T(r)}${a})?${g}${_}${s}${l}${_}`;case"**/.*":return`(?:${h}${T(r)}${a})?${s}${l}${_}`;default:{let V=/^(.*?)\.(\w+)$/.exec(O);if(!V)return;let L=I(V[1]);return L?L+s+V[2]:void 0}}},R=So.removePrefix(t,y),w=I(R);return w&&r.strictSlashes!==!0&&(w+=`${a}?`),w};zZ.exports=l2});var YZ=x((xit,KZ)=>{"use strict";var U1e=require("path"),q1e=GZ(),u2=WZ(),d2=XT(),H1e=a0(),j1e=t=>t&&typeof t=="object"&&!Array.isArray(t),Vr=(t,e,r=!1)=>{if(Array.isArray(t)){let u=t.map(p=>Vr(p,e,r));return p=>{for(let f of u){let m=f(p);if(m)return m}return!1}}let n=j1e(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=d2.isWindows(e),s=n?Vr.compileRe(t,e):Vr.makeRe(t,e,!1,!0),a=s.state;delete s.state;let l=()=>!1;if(i.ignore){let u={...e,ignore:null,onMatch:null,onResult:null};l=Vr(i.ignore,u,r)}let c=(u,d=!1)=>{let{isMatch:p,match:f,output:m}=Vr.test(u,s,e,{glob:t,posix:o}),h={glob:t,state:a,regex:s,posix:o,input:u,output:m,match:f,isMatch:p};return typeof i.onResult=="function"&&i.onResult(h),p===!1?(h.isMatch=!1,d?h:!1):l(u)?(typeof i.onIgnore=="function"&&i.onIgnore(h),h.isMatch=!1,d?h:!1):(typeof i.onMatch=="function"&&i.onMatch(h),d?h:!0)};return r&&(c.state=a),c};Vr.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?d2.toPosixSlashes:null),a=t===n,l=a&&s?s(t):t;return a===!1&&(l=s?s(t):t,a=l===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Vr.matchBase(t,e,r,i):a=e.exec(l)),{isMatch:!!a,match:a,output:l}};Vr.matchBase=(t,e,r,n=d2.isWindows(r))=>(e instanceof RegExp?e:Vr.makeRe(e,r)).test(U1e.basename(t));Vr.isMatch=(t,e,r)=>Vr(e,r)(t);Vr.parse=(t,e)=>Array.isArray(t)?t.map(r=>Vr.parse(r,e)):u2(t,{...e,fastpaths:!1});Vr.scan=(t,e)=>q1e(t,e);Vr.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let l=Vr.toRegex(a,e);return n===!0&&(l.state=t),l};Vr.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=u2.fastpaths(t,e)),i.output||(i=u2(t,e)),Vr.compileRe(i,e,r,n)};Vr.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Vr.constants=H1e;KZ.exports=Vr});var XZ=x((bit,QZ)=>{"use strict";QZ.exports=YZ()});var lt=x((Tit,eee)=>{eee.exports={options:{usePureJavaScript:!1}}});var nee=x((Iit,ree)=>{var f2={};ree.exports=f2;var tee={};f2.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=V1e(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var l=0,c=t[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%o,c=c/o|0;for(;c>0;)a.push(c%o),c=c/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};f2.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=tee[e];if(!r){r=tee[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var l=0,c=a;l<s.length;++l)c+=s[l]*i,s[l]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var u=0;t[u]===o&&u<t.length-1;++u)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function V1e(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}});var Lt=x((wit,aee)=>{var iee=lt(),oee=nee(),U=aee.exports=iee.util=iee.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){U.nextTick=process.nextTick,typeof setImmediate=="function"?U.setImmediate=setImmediate:U.setImmediate=U.nextTick;return}if(typeof setImmediate=="function"){U.setImmediate=function(){return setImmediate.apply(void 0,arguments)},U.nextTick=function(a){return setImmediate(a)};return}if(U.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(u){u()})}};var s=a,t="forge.setImmediate",e=[];U.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(c){c()})}).observe(i,{attributes:!0});var o=U.setImmediate;U.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}U.nextTick=U.setImmediate})();U.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;U.globalScope=function(){return U.isNodejs?global:typeof self>"u"?window:self}();U.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};U.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};U.isArrayBufferView=function(t){return t&&U.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function l0(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}U.ByteBuffer=m2;function m2(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(U.isArrayBuffer(t)||U.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof m2||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}U.ByteStringBuffer=m2;var G1e=4096;U.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>G1e&&(this.data.substr(0,1),this._constructedStringLength=0)};U.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};U.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};U.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};U.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};U.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};U.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(U.encodeUtf8(t))};U.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};U.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};U.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};U.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};U.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};U.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};U.ByteStringBuffer.prototype.putInt=function(t,e){l0(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};U.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};U.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};U.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};U.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};U.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};U.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};U.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};U.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};U.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};U.ByteStringBuffer.prototype.getInt=function(t){l0(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};U.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};U.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};U.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};U.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};U.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};U.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};U.ByteStringBuffer.prototype.copy=function(){var t=U.createBuffer(this.data);return t.read=this.read,t};U.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};U.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};U.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};U.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};U.ByteStringBuffer.prototype.toString=function(){return U.decodeUtf8(this.bytes())};function $1e(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=U.isArrayBuffer(t),n=U.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}U.DataBuffer=$1e;U.DataBuffer.prototype.length=function(){return this.write-this.read};U.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};U.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};U.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};U.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};U.DataBuffer.prototype.putBytes=function(t,e){if(U.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(U.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof U.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&U.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof U.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=U.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=U.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};U.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};U.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};U.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};U.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};U.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};U.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};U.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};U.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};U.DataBuffer.prototype.putInt=function(t,e){l0(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};U.DataBuffer.prototype.putSignedInt=function(t,e){return l0(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};U.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};U.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};U.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};U.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};U.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};U.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};U.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};U.DataBuffer.prototype.getInt=function(t){l0(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};U.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};U.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};U.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};U.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};U.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};U.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};U.DataBuffer.prototype.copy=function(){return new U.DataBuffer(this)};U.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};U.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};U.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};U.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};U.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return U.binary.raw.encode(e);if(t==="hex")return U.binary.hex.encode(e);if(t==="base64")return U.binary.base64.encode(e);if(t==="utf8")return U.text.utf8.decode(e);if(t==="utf16")return U.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};U.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=U.encodeUtf8(t)),new U.ByteBuffer(t)};U.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};U.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};U.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};U.bytesToHex=function(t){return U.createBuffer(t).toHex()};U.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Vu=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],see="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";U.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=ju.charAt(i>>2),r+=ju.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=ju.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":ju.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};U.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=Vu[t.charCodeAt(s++)-43],n=Vu[t.charCodeAt(s++)-43],i=Vu[t.charCodeAt(s++)-43],o=Vu[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};U.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};U.decodeUtf8=function(t){return decodeURIComponent(escape(t))};U.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:oee.encode,decode:oee.decode}};U.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};U.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};U.binary.hex.encode=U.bytesToHex;U.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};U.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=ju.charAt(i>>2),r+=ju.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=ju.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":ju.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};U.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,l=0,c=r;l<t.length;)i=Vu[t.charCodeAt(l++)-43],o=Vu[t.charCodeAt(l++)-43],s=Vu[t.charCodeAt(l++)-43],a=Vu[t.charCodeAt(l++)-43],n[c++]=i<<2|o>>4,s!==64&&(n[c++]=(o&15)<<4|s>>2,a!==64&&(n[c++]=(s&3)<<6|a));return e?c-r:n.subarray(0,c)};U.binary.base58.encode=function(t,e){return U.binary.baseN.encode(t,see,e)};U.binary.base58.decode=function(t,e){return U.binary.baseN.decode(t,see,e)};U.text={utf8:{},utf16:{}};U.text.utf8.encode=function(t,e,r){t=U.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};U.text.utf8.decode=function(t){return U.decodeUtf8(String.fromCharCode.apply(null,t))};U.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};U.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};U.deflate=function(t,e,r){if(e=U.decode64(t.deflate(U.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};U.inflate=function(t,e,r){var n=t.inflate(U.encode64(e)).rval;return n===null?null:U.decode64(n)};var h2=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=U.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},g2=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(U.decode64(r))),r},z1e=function(t,e,r,n){var i=g2(t,e);i===null&&(i={}),i[r]=n,h2(t,e,i)},W1e=function(t,e,r){var n=g2(t,e);return n!==null&&(n=r in n?n[r]:null),n},K1e=function(t,e,r){var n=g2(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),h2(t,e,n)}},Y1e=function(t,e){h2(t,e,null)},eI=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){s=l}if(o)break}if(!o)throw s;return n};U.setItem=function(t,e,r,n,i){eI(z1e,arguments,i)};U.getItem=function(t,e,r,n){return eI(W1e,arguments,n)};U.removeItem=function(t,e,r,n){eI(K1e,arguments,n)};U.clearItems=function(t,e,r){eI(Y1e,arguments,r)};U.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};U.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};U.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")};U.formatSize=function(t){return t>=1073741824?t=U.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=U.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=U.formatNumber(t/1024,0)+" KiB":t=U.formatNumber(t,0)+" bytes",t};U.bytesFromIP=function(t){return t.indexOf(".")!==-1?U.bytesFromIPv4(t):t.indexOf(":")!==-1?U.bytesFromIPv6(t):null};U.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=U.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};U.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=U.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=U.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};U.bytesToIP=function(t){return t.length===4?U.bytesToIPv4(t):t.length===16?U.bytesToIPv6(t):null};U.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};U.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=U.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};U.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in U&&!t.update)return e(null,U.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return U.cores=navigator.hardwareConcurrency,e(null,U.cores);if(typeof Worker>"u")return U.cores=1,e(null,U.cores);if(typeof Blob>"u")return U.cores=2,e(null,U.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),l=a+4;Date.now()<l;);self.postMessage({st:a,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,l){if(a===0){var c=Math.floor(s.reduce(function(u,d){return u+d},0)/s.length);return U.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,U.cores)}i(l,function(u,d){s.push(o(l,d)),n(s,a-1,l)})}function i(s,a){for(var l=[],c=[],u=0;u<s;++u){var d=new Worker(r);d.addEventListener("message",function(p){if(c.push(p.data),c.length===s){for(var f=0;f<s;++f)l[f].terminate();a(null,c)}}),l.push(d)}for(var u=0;u<s;++u)l[u].postMessage(u)}function o(s,a){for(var l=[],c=0;c<s;++c)for(var u=a[c],d=l[c]=[],p=0;p<s;++p)if(c!==p){var f=a[p];(u.st>f.st&&u.st<f.et||f.st>u.st&&f.st<u.et)&&d.push(p)}return l.reduce(function(m,h){return Math.max(m,h.length)},0)}}});var tI=x((Ait,cee)=>{var Rn=lt();Lt();cee.exports=Rn.cipher=Rn.cipher||{};Rn.cipher.algorithms=Rn.cipher.algorithms||{};Rn.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Rn.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Rn.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Rn.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Rn.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Rn.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Rn.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Rn.cipher.algorithms[t]=e};Rn.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Rn.cipher.algorithms?Rn.cipher.algorithms[t]:null};var v2=Rn.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};v2.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Rn.util.createBuffer(),this.output=t.output||Rn.util.createBuffer(),this.mode.start(e)};v2.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};v2.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var _2=x((Rit,lee)=>{var Pn=lt();Lt();Pn.cipher=Pn.cipher||{};var ht=lee.exports=Pn.cipher.modes=Pn.cipher.modes||{};ht.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ht.ecb.prototype.start=function(t){};ht.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};ht.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};ht.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ht.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};ht.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ht.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=rI(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ht.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};ht.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};ht.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ht.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};ht.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Pn.util.createBuffer(),this._partialBytes=0};ht.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=rI(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ht.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ht.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ht.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Pn.util.createBuffer(),this._partialBytes=0};ht.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=rI(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ht.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ht.ofb.prototype.decrypt=ht.ofb.prototype.encrypt;ht.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Pn.util.createBuffer(),this._partialBytes=0};ht.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=rI(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ht.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}nI(this._inBlock)};ht.ctr.prototype.decrypt=ht.ctr.prototype.encrypt;ht.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Pn.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ht.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Pn.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Pn.util.createBuffer(t.additionalData):r=Pn.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Pn.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(y2(n*8)))}this._inBlock=this._j0.slice(0),nI(this._inBlock),this._partialBytes=0,r=Pn.util.createBuffer(r),this._aDataLength=y2(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ht.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),nI(this._inBlock)};ht.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),nI(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};ht.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Pn.util.createBuffer();var n=this._aDataLength.concat(y2(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ht.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};ht.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};ht.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};ht.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};ht.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],l=s/n|0,c=(n-1-s%n)*e;a[l]=1<<e-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};ht.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],l=i[s];i[o+s]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var c=i[o^n];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i};function rI(t,e){if(typeof t=="string"&&(t=Pn.util.createBuffer(t)),Pn.util.isArray(t)&&t.length>4){var r=t;t=Pn.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Pn.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function nI(t){t[t.length-1]=t[t.length-1]+1&4294967295}function y2(t){return[t/4294967296|0,t&4294967295]}});var Gu=x((Pit,fee)=>{var ir=lt();tI();_2();Lt();fee.exports=ir.aes=ir.aes||{};ir.aes.startEncrypting=function(t,e,r,n){var i=iI({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ir.aes.createEncryptionCipher=function(t,e){return iI({key:t,output:null,decrypt:!1,mode:e})};ir.aes.startDecrypting=function(t,e,r,n){var i=iI({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ir.aes.createDecryptionCipher=function(t,e){return iI({key:t,output:null,decrypt:!0,mode:e})};ir.aes.Algorithm=function(t,e){E2||dee();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return b2(r._w,n,i,!1)},decrypt:function(n,i){return b2(r._w,n,i,!0)}}}),r._init=!1};ir.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ir.util.createBuffer(e);else if(ir.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ir.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ir.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ir.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=pee(e,t.decrypt&&!s),this._init=!0}};ir.aes._expandKey=function(t,e){return E2||dee(),pee(t,e)};ir.aes._updateBlock=b2;yg("AES-ECB",ir.cipher.modes.ecb);yg("AES-CBC",ir.cipher.modes.cbc);yg("AES-CFB",ir.cipher.modes.cfb);yg("AES-OFB",ir.cipher.modes.ofb);yg("AES-CTR",ir.cipher.modes.ctr);yg("AES-GCM",ir.cipher.modes.gcm);function yg(t,e){var r=function(){return new ir.aes.Algorithm(t,e)};ir.cipher.registerAlgorithm(t,r)}var E2=!1,vg=4,wi,x2,uee,ef,Vs;function dee(){E2=!0,uee=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;wi=new Array(256),x2=new Array(256),ef=new Array(4),Vs=new Array(4);for(var e=0;e<4;++e)ef[e]=new Array(256),Vs[e]=new Array(256);for(var r=0,n=0,i,o,s,a,l,c,u,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,wi[r]=a,x2[a]=r,l=t[a],i=t[r],o=t[i],s=t[o],c=l<<24^a<<16^a<<8^(a^l),u=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var d=0;d<4;++d)ef[d][r]=c,Vs[d][a]=u,c=c<<24|c>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function pee(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=vg*s,l=o;l<a;++l)n=r[l-1],l%o===0?(n=wi[n>>>16&255]<<24^wi[n>>>8&255]<<16^wi[n&255]<<8^wi[n>>>24]^uee[i]<<24,i++):o>6&&l%o===4&&(n=wi[n>>>24]<<24^wi[n>>>16&255]<<16^wi[n>>>8&255]<<8^wi[n&255]),r[l]=r[l-o]^n;if(e){var c,u=Vs[0],d=Vs[1],p=Vs[2],f=Vs[3],m=r.slice(0);a=r.length;for(var l=0,h=a-vg;l<a;l+=vg,h-=vg)if(l===0||l===a-vg)m[l]=r[h],m[l+1]=r[h+3],m[l+2]=r[h+2],m[l+3]=r[h+1];else for(var g=0;g<vg;++g)c=r[h+g],m[l+(3&-g)]=u[wi[c>>>24]]^d[wi[c>>>16&255]]^p[wi[c>>>8&255]]^f[wi[c&255]];r=m}return r}function b2(t,e,r,n){var i=t.length/4-1,o,s,a,l,c;n?(o=Vs[0],s=Vs[1],a=Vs[2],l=Vs[3],c=x2):(o=ef[0],s=ef[1],a=ef[2],l=ef[3],c=wi);var u,d,p,f,m,h,g;u=e[0]^t[0],d=e[n?3:1]^t[1],p=e[2]^t[2],f=e[n?1:3]^t[3];for(var v=3,y=1;y<i;++y)m=o[u>>>24]^s[d>>>16&255]^a[p>>>8&255]^l[f&255]^t[++v],h=o[d>>>24]^s[p>>>16&255]^a[f>>>8&255]^l[u&255]^t[++v],g=o[p>>>24]^s[f>>>16&255]^a[u>>>8&255]^l[d&255]^t[++v],f=o[f>>>24]^s[u>>>16&255]^a[d>>>8&255]^l[p&255]^t[++v],u=m,d=h,p=g;r[0]=c[u>>>24]<<24^c[d>>>16&255]<<16^c[p>>>8&255]<<8^c[f&255]^t[++v],r[n?3:1]=c[d>>>24]<<24^c[p>>>16&255]<<16^c[f>>>8&255]<<8^c[u&255]^t[++v],r[2]=c[p>>>24]<<24^c[f>>>16&255]<<16^c[u>>>8&255]<<8^c[d&255]^t[++v],r[n?1:3]=c[f>>>24]<<24^c[u>>>16&255]<<16^c[d>>>8&255]<<8^c[p&255]^t[++v]}function iI(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ir.cipher.createDecipher(r,t.key):n=ir.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof ir.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var $u=x((kit,mee)=>{var u0=lt();u0.pki=u0.pki||{};var C2=mee.exports=u0.pki.oids=u0.oids=u0.oids||{};function ae(t,e){C2[t]=e,C2[e]=t}function zt(t,e){C2[t]=e}ae("1.2.840.113549.1.1.1","rsaEncryption");ae("1.2.840.113549.1.1.4","md5WithRSAEncryption");ae("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ae("1.2.840.113549.1.1.7","RSAES-OAEP");ae("1.2.840.113549.1.1.8","mgf1");ae("1.2.840.113549.1.1.9","pSpecified");ae("1.2.840.113549.1.1.10","RSASSA-PSS");ae("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ae("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ae("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ae("1.3.101.112","EdDSA25519");ae("1.2.840.10040.4.3","dsa-with-sha1");ae("1.3.14.3.2.7","desCBC");ae("1.3.14.3.2.26","sha1");ae("1.3.14.3.2.29","sha1WithRSASignature");ae("2.16.840.1.101.3.4.2.1","sha256");ae("2.16.840.1.101.3.4.2.2","sha384");ae("2.16.840.1.101.3.4.2.3","sha512");ae("2.16.840.1.101.3.4.2.4","sha224");ae("2.16.840.1.101.3.4.2.5","sha512-224");ae("2.16.840.1.101.3.4.2.6","sha512-256");ae("1.2.840.113549.2.2","md2");ae("1.2.840.113549.2.5","md5");ae("1.2.840.113549.1.7.1","data");ae("1.2.840.113549.1.7.2","signedData");ae("1.2.840.113549.1.7.3","envelopedData");ae("1.2.840.113549.1.7.4","signedAndEnvelopedData");ae("1.2.840.113549.1.7.5","digestedData");ae("1.2.840.113549.1.7.6","encryptedData");ae("1.2.840.113549.1.9.1","emailAddress");ae("1.2.840.113549.1.9.2","unstructuredName");ae("1.2.840.113549.1.9.3","contentType");ae("1.2.840.113549.1.9.4","messageDigest");ae("1.2.840.113549.1.9.5","signingTime");ae("1.2.840.113549.1.9.6","counterSignature");ae("1.2.840.113549.1.9.7","challengePassword");ae("1.2.840.113549.1.9.8","unstructuredAddress");ae("1.2.840.113549.1.9.14","extensionRequest");ae("1.2.840.113549.1.9.20","friendlyName");ae("1.2.840.113549.1.9.21","localKeyId");ae("1.2.840.113549.1.9.22.1","x509Certificate");ae("1.2.840.113549.1.12.10.1.1","keyBag");ae("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ae("1.2.840.113549.1.12.10.1.3","certBag");ae("1.2.840.113549.1.12.10.1.4","crlBag");ae("1.2.840.113549.1.12.10.1.5","secretBag");ae("1.2.840.113549.1.12.10.1.6","safeContentsBag");ae("1.2.840.113549.1.5.13","pkcs5PBES2");ae("1.2.840.113549.1.5.12","pkcs5PBKDF2");ae("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ae("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ae("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ae("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ae("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ae("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ae("1.2.840.113549.2.7","hmacWithSHA1");ae("1.2.840.113549.2.8","hmacWithSHA224");ae("1.2.840.113549.2.9","hmacWithSHA256");ae("1.2.840.113549.2.10","hmacWithSHA384");ae("1.2.840.113549.2.11","hmacWithSHA512");ae("1.2.840.113549.3.7","des-EDE3-CBC");ae("2.16.840.1.101.3.4.1.2","aes128-CBC");ae("2.16.840.1.101.3.4.1.22","aes192-CBC");ae("2.16.840.1.101.3.4.1.42","aes256-CBC");ae("2.5.4.3","commonName");ae("2.5.4.4","surname");ae("2.5.4.5","serialNumber");ae("2.5.4.6","countryName");ae("2.5.4.7","localityName");ae("2.5.4.8","stateOrProvinceName");ae("2.5.4.9","streetAddress");ae("2.5.4.10","organizationName");ae("2.5.4.11","organizationalUnitName");ae("2.5.4.12","title");ae("2.5.4.13","description");ae("2.5.4.15","businessCategory");ae("2.5.4.17","postalCode");ae("2.5.4.42","givenName");ae("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ae("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ae("2.16.840.1.113730.1.1","nsCertType");ae("2.16.840.1.113730.1.13","nsComment");zt("2.5.29.1","authorityKeyIdentifier");zt("2.5.29.2","keyAttributes");zt("2.5.29.3","certificatePolicies");zt("2.5.29.4","keyUsageRestriction");zt("2.5.29.5","policyMapping");zt("2.5.29.6","subtreesConstraint");zt("2.5.29.7","subjectAltName");zt("2.5.29.8","issuerAltName");zt("2.5.29.9","subjectDirectoryAttributes");zt("2.5.29.10","basicConstraints");zt("2.5.29.11","nameConstraints");zt("2.5.29.12","policyConstraints");zt("2.5.29.13","basicConstraints");ae("2.5.29.14","subjectKeyIdentifier");ae("2.5.29.15","keyUsage");zt("2.5.29.16","privateKeyUsagePeriod");ae("2.5.29.17","subjectAltName");ae("2.5.29.18","issuerAltName");ae("2.5.29.19","basicConstraints");zt("2.5.29.20","cRLNumber");zt("2.5.29.21","cRLReason");zt("2.5.29.22","expirationDate");zt("2.5.29.23","instructionCode");zt("2.5.29.24","invalidityDate");zt("2.5.29.25","cRLDistributionPoints");zt("2.5.29.26","issuingDistributionPoint");zt("2.5.29.27","deltaCRLIndicator");zt("2.5.29.28","issuingDistributionPoint");zt("2.5.29.29","certificateIssuer");zt("2.5.29.30","nameConstraints");ae("2.5.29.31","cRLDistributionPoints");ae("2.5.29.32","certificatePolicies");zt("2.5.29.33","policyMappings");zt("2.5.29.34","policyConstraints");ae("2.5.29.35","authorityKeyIdentifier");zt("2.5.29.36","policyConstraints");ae("2.5.29.37","extKeyUsage");zt("2.5.29.46","freshestCRL");zt("2.5.29.54","inhibitAnyPolicy");ae("1.3.6.1.4.1.11129.2.4.2","timestampList");ae("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ae("1.3.6.1.5.5.7.3.1","serverAuth");ae("1.3.6.1.5.5.7.3.2","clientAuth");ae("1.3.6.1.5.5.7.3.3","codeSigning");ae("1.3.6.1.5.5.7.3.4","emailProtection");ae("1.3.6.1.5.5.7.3.8","timeStamping")});var Gs=x((Nit,gee)=>{var mr=lt();Lt();$u();var ye=gee.exports=mr.asn1=mr.asn1||{};ye.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ye.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ye.create=function(t,e,r,n,i){if(mr.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||mr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=ye.copy(a)),a};ye.copy=function(t,e){var r;if(mr.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(ye.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:ye.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};ye.equals=function(t,e,r){if(mr.util.isArray(t)){if(!mr.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ye.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&ye.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};ye.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function d0(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var Q1e=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;d0(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};ye.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=mr.util.createBuffer(t));var r=t.length(),n=oI(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function oI(t,e,r,n){var i;d0(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var l=Q1e(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=l,c}l=e}var u,d,p=(o&32)===32;if(p)if(u=[],l===void 0)for(;;){if(d0(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),u.push(oI(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),u.push(oI(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(u===void 0&&s===ye.Class.UNIVERSAL&&a===ye.Type.BITSTRING&&(d=t.bytes(l)),u===void 0&&n.decodeBitStrings&&s===ye.Class.UNIVERSAL&&a===ye.Type.BITSTRING&&l>1){var f=t.read,m=e,h=0;if(a===ye.Type.BITSTRING&&(d0(t,e,1),h=t.getByte(),e--),h===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},v=oI(t,e,r+1,g),y=i-t.length();e-=y,a==ye.Type.BITSTRING&&y++;var _=v.tagClass;y===l&&(_===ye.Class.UNIVERSAL||_===ye.Class.CONTEXT_SPECIFIC)&&(u=[v])}catch{}u===void 0&&(t.read=f,e=m)}if(u===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(a===ye.Type.BMPSTRING)for(u="";l>0;l-=2)d0(t,e,2),u+=String.fromCharCode(t.getInt16()),e-=2;else u=t.getBytes(l),e-=l}var T=d===void 0?null:{bitStringContents:d};return ye.create(s,a,p,u,T)}ye.toDer=function(t){var e=mr.util.createBuffer(),r=t.tagClass|t.type,n=mr.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=ye.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(ye.toDer(t.value[o]))}else if(t.type===ye.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===ye.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};ye.oidToDer=function(t){var e=t.split("."),r=mr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};ye.derToOid=function(t){var e;typeof t=="string"&&(t=mr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};ye.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var l=t.charAt(10),c=10;l!=="+"&&l!=="-"&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),c&&(l=t.charAt(c),l==="+"||l==="-")){var u=parseInt(t.substr(c+1,2),10),d=parseInt(t.substr(c+4,2),10),p=u*60+d;p*=6e4,l==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};ye.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),l=0,c=0,u=!1;t.charAt(t.length-1)==="Z"&&(u=!0);var d=t.length-5,p=t.charAt(d);if(p==="+"||p==="-"){var f=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10);c=f*60+m,c*=6e4,p==="+"&&(c*=-1),u=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),u?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,l),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(o,s,a,l)),e};ye.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ye.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ye.integerToDer=function(t){var e=mr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};ye.derToInteger=function(t){typeof t=="string"&&(t=mr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};ye.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&mr.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=ye.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var hee=/[^\\u0000-\\u00ff]/;ye.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case ye.Class.UNIVERSAL:n+="Universal:";break;case ye.Class.APPLICATION:n+="Application:";break;case ye.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case ye.Class.PRIVATE:n+="Private:";break}if(t.tagClass===ye.Class.UNIVERSAL)switch(n+=t.type,t.type){case ye.Type.NONE:n+=" (None)";break;case ye.Type.BOOLEAN:n+=" (Boolean)";break;case ye.Type.INTEGER:n+=" (Integer)";break;case ye.Type.BITSTRING:n+=" (Bit string)";break;case ye.Type.OCTETSTRING:n+=" (Octet string)";break;case ye.Type.NULL:n+=" (Null)";break;case ye.Type.OID:n+=" (Object Identifier)";break;case ye.Type.ODESC:n+=" (Object Descriptor)";break;case ye.Type.EXTERNAL:n+=" (External or Instance of)";break;case ye.Type.REAL:n+=" (Real)";break;case ye.Type.ENUMERATED:n+=" (Enumerated)";break;case ye.Type.EMBEDDED:n+=" (Embedded PDV)";break;case ye.Type.UTF8:n+=" (UTF8)";break;case ye.Type.ROID:n+=" (Relative Object Identifier)";break;case ye.Type.SEQUENCE:n+=" (Sequence)";break;case ye.Type.SET:n+=" (Set)";break;case ye.Type.PRINTABLESTRING:n+=" (Printable String)";break;case ye.Type.IA5String:n+=" (IA5String (ASCII))";break;case ye.Type.UTCTIME:n+=" (UTC time)";break;case ye.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case ye.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=ye.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===ye.Type.OID){var l=ye.derToOid(t.value);n+=l,mr.pki&&mr.pki.oids&&l in mr.pki.oids&&(n+=" ("+mr.pki.oids[l]+") ")}if(t.type===ye.Type.INTEGER)try{n+=ye.derToInteger(t.value)}catch{n+="0x"+mr.util.bytesToHex(t.value)}else if(t.type===ye.Type.BITSTRING){if(t.value.length>1?n+="0x"+mr.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(t.type===ye.Type.OCTETSTRING)hee.test(t.value)||(n+="("+t.value+") "),n+="0x"+mr.util.bytesToHex(t.value);else if(t.type===ye.Type.UTF8)try{n+=mr.util.decodeUtf8(t.value)}catch(u){if(u.message==="URI malformed")n+="0x"+mr.util.bytesToHex(t.value)+" (malformed UTF8)";else throw u}else t.type===ye.Type.PRINTABLESTRING||t.type===ye.Type.IA5String?n+=t.value:hee.test(t.value)?n+="0x"+mr.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var $a=x((Oit,vee)=>{var sI=lt();vee.exports=sI.md=sI.md||{};sI.md.algorithms=sI.md.algorithms||{}});var _g=x((Dit,yee)=>{var ll=lt();$a();Lt();var X1e=yee.exports=ll.hmac=ll.hmac||{};X1e.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in ll.md.algorithms)e=ll.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=ll.util.createBuffer(s);else if(ll.util.isArray(s)){var a=s;s=ll.util.createBuffer();for(var l=0;l<a.length;++l)s.putByte(a[l])}var c=s.length();c>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=ll.util.createBuffer(),n=ll.util.createBuffer(),c=s.length();for(var l=0;l<c;++l){var a=s.at(l);r.putByte(54^a),n.putByte(92^a)}if(c<e.blockLength)for(var a=e.blockLength-c,l=0;l<a;++l)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var cI=x((Lit,Eee)=>{var za=lt();$a();Lt();var xee=Eee.exports=za.md5=za.md5||{};za.md.md5=za.md.algorithms.md5=xee;xee.create=function(){bee||J1e();var t=null,e=za.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=za.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=za.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),_ee(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=za.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(S2.substr(0,n.blockLength-s));for(var a,l=0,c=n.fullMessageLength.length-1;c>=0;--c)a=n.fullMessageLength[c]*8+l,l=a/4294967296>>>0,i.putInt32Le(a>>>0);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};_ee(u,r,i);var d=za.util.createBuffer();return d.putInt32Le(u.h0),d.putInt32Le(u.h1),d.putInt32Le(u.h2),d.putInt32Le(u.h3),d},n};var S2=null,aI=null,p0=null,xg=null,bee=!1;function J1e(){S2=String.fromCharCode(128),S2+=za.util.fillString(String.fromCharCode(0),64),aI=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],p0=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],xg=new Array(64);for(var t=0;t<64;++t)xg[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);bee=!0}function _ee(t,e,r){for(var n,i,o,s,a,l,c,u,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,u=0;u<16;++u)e[u]=r.getInt32Le(),l=a^o&(s^a),n=i+l+xg[u]+e[u],c=p0[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;u<32;++u)l=s^a&(o^s),n=i+l+xg[u]+e[aI[u]],c=p0[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;u<48;++u)l=o^s^a,n=i+l+xg[u]+e[aI[u]],c=p0[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;u<64;++u)l=s^(o|~a),n=i+l+xg[u]+e[aI[u]],c=p0[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,d-=64}}});var tf=x((Mit,See)=>{var uI=lt();Lt();var Cee=See.exports=uI.pem=uI.pem||{};Cee.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=lI(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=lI(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=lI(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=lI(t.headers[i]);return t.procType&&(r+=`\r
`),r+=uI.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Cee.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:uI.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var l=o[2].split(i),c=0;o&&c<l.length;){for(var u=l[c].replace(/\s+$/,""),d=c+1;d<l.length;++d){var p=l[d];if(!/\s/.test(p[0]))break;u+=p,c=d}if(o=u.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),h=0;h<m.length;++h)f.values.push(Z1e(m[h]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function lI(t){for(var e=t.name+": ",r=[],n=function(l,c){return" "+c},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function Z1e(t){return t.replace(/^\s+/,"")}});var f0=x((Fit,Iee)=>{var br=lt();tI();_2();Lt();Iee.exports=br.des=br.des||{};br.des.startEncrypting=function(t,e,r,n){var i=dI({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};br.des.createEncryptionCipher=function(t,e){return dI({key:t,output:null,decrypt:!1,mode:e})};br.des.startDecrypting=function(t,e,r,n){var i=dI({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};br.des.createDecryptionCipher=function(t,e){return dI({key:t,output:null,decrypt:!0,mode:e})};br.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Tee(r._keys,n,i,!1)},decrypt:function(n,i){return Tee(r._keys,n,i,!0)}}}),r._init=!1};br.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=br.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=cke(e),this._init=!0}};Wa("DES-ECB",br.cipher.modes.ecb);Wa("DES-CBC",br.cipher.modes.cbc);Wa("DES-CFB",br.cipher.modes.cfb);Wa("DES-OFB",br.cipher.modes.ofb);Wa("DES-CTR",br.cipher.modes.ctr);Wa("3DES-ECB",br.cipher.modes.ecb);Wa("3DES-CBC",br.cipher.modes.cbc);Wa("3DES-CFB",br.cipher.modes.cfb);Wa("3DES-OFB",br.cipher.modes.ofb);Wa("3DES-CTR",br.cipher.modes.ctr);function Wa(t,e){var r=function(){return new br.des.Algorithm(t,e)};br.cipher.registerAlgorithm(t,r)}var eke=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],tke=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],rke=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],nke=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ike=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],oke=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],ske=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ake=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function cke(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],y=0,_,T=0;T<h;T++){var I=t.getInt32(),R=t.getInt32();_=(I>>>4^R)&252645135,R^=_,I^=_<<4,_=(R>>>-16^I)&65535,I^=_,R^=_<<-16,_=(I>>>2^R)&858993459,R^=_,I^=_<<2,_=(R>>>-16^I)&65535,I^=_,R^=_<<-16,_=(I>>>1^R)&1431655765,R^=_,I^=_<<1,_=(R>>>8^I)&16711935,I^=_,R^=_<<8,_=(I>>>1^R)&1431655765,R^=_,I^=_<<1,_=I<<8|R>>>20&240,I=R<<24|R<<8&16711680|R>>>8&65280|R>>>24&240,R=_;for(var w=0;w<v.length;++w){v[w]?(I=I<<2|I>>>26,R=R<<2|R>>>26):(I=I<<1|I>>>27,R=R<<1|R>>>27),I&=-15,R&=-15;var O=e[I>>>28]|r[I>>>24&15]|n[I>>>20&15]|i[I>>>16&15]|o[I>>>12&15]|s[I>>>8&15]|a[I>>>4&15],V=l[R>>>28]|c[R>>>24&15]|u[R>>>20&15]|d[R>>>16&15]|p[R>>>12&15]|f[R>>>8&15]|m[R>>>4&15];_=(V>>>16^O)&65535,g[y++]=O^_,g[y++]=V^_<<16}}return g}function Tee(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],l=e[1];s=(a>>>4^l)&252645135,l^=s,a^=s<<4,s=(a>>>16^l)&65535,l^=s,a^=s<<16,s=(l>>>2^a)&858993459,a^=s,l^=s<<2,s=(l>>>8^a)&16711935,a^=s,l^=s<<8,s=(a>>>1^l)&1431655765,l^=s,a^=s<<1,a=a<<1|a>>>31,l=l<<1|l>>>31;for(var c=0;c<i;c+=3){for(var u=o[c+1],d=o[c+2],p=o[c];p!=u;p+=d){var f=l^t[p],m=(l>>>4|l<<28)^t[p+1];s=a,a=l,l=s^(tke[f>>>24&63]|nke[f>>>16&63]|oke[f>>>8&63]|ake[f&63]|eke[m>>>24&63]|rke[m>>>16&63]|ike[m>>>8&63]|ske[m&63])}s=a,a=l,l=s}a=a>>>1|a<<31,l=l>>>1|l<<31,s=(a>>>1^l)&1431655765,l^=s,a^=s<<1,s=(l>>>8^a)&16711935,a^=s,l^=s<<8,s=(l>>>2^a)&858993459,a^=s,l^=s<<2,s=(a>>>16^l)&65535,l^=s,a^=s<<16,s=(a>>>4^l)&252645135,l^=s,a^=s<<4,r[0]=a,r[1]=l}function dI(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=br.cipher.createDecipher(r,t.key):n=br.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof br.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var pI=x((Bit,wee)=>{var Ai=lt();_g();$a();Lt();var lke=Ai.pkcs5=Ai.pkcs5||{},ul;Ai.util.isNodejs&&!Ai.options.usePureJavaScript&&(ul=require("crypto"));wee.exports=Ai.pbkdf2=lke.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Ai.util.isNodejs&&!Ai.options.usePureJavaScript&&ul.pbkdf2&&(i===null||typeof i!="object")&&(ul.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?ul.pbkdf2Sync.length===4?ul.pbkdf2(t,e,r,n,function(_,T){if(_)return o(_);o(null,T.toString("binary"))}):ul.pbkdf2(t,e,r,n,i,function(_,T){if(_)return o(_);o(null,T.toString("binary"))}):ul.pbkdf2Sync.length===4?ul.pbkdf2Sync(t,e,r,n).toString("binary"):ul.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Ai.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ai.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var l=Math.ceil(n/s),c=n-(l-1)*s,u=Ai.hmac.create();u.start(i,t);var d="",p,f,m;if(!o){for(var h=1;h<=l;++h){u.start(null,null),u.update(e),u.update(Ai.util.int32ToBytes(h)),p=m=u.digest().getBytes();for(var g=2;g<=r;++g)u.start(null,null),u.update(m),f=u.digest().getBytes(),p=Ai.util.xorBytes(p,f,s),m=f;d+=h<l?p:p.substr(0,c)}return d}var h=1,g;function v(){if(h>l)return o(null,d);u.start(null,null),u.update(e),u.update(Ai.util.int32ToBytes(h)),p=m=u.digest().getBytes(),g=2,y()}function y(){if(g<=r)return u.start(null,null),u.update(m),f=u.digest().getBytes(),p=Ai.util.xorBytes(p,f,s),m=f,++g,Ai.util.setImmediate(y);d+=h<l?p:p.substr(0,c),++h,v()}v()}});var I2=x((Uit,Nee)=>{var Ka=lt();$a();Lt();var Ree=Nee.exports=Ka.sha256=Ka.sha256||{};Ka.md.sha256=Ka.md.algorithms.sha256=Ree;Ree.create=function(){Pee||uke();var t=null,e=Ka.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Ka.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Ka.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Aee(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ka.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(T2.substr(0,n.blockLength-s));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Aee(d,r,i);var p=Ka.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},n};var T2=null,Pee=!1,kee=null;function uke(){T2=String.fromCharCode(128),T2+=Ka.util.fillString(String.fromCharCode(0),64),kee=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Pee=!0}function Aee(t,e,r){for(var n,i,o,s,a,l,c,u,d,p,f,m,h,g,v,y=r.length();y>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=e[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(u=t.h0,d=t.h1,p=t.h2,f=t.h3,m=t.h4,h=t.h5,g=t.h6,v=t.h7,c=0;c<64;++c)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=g^m&(h^g),o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),l=u&d|p&(u^d),n=v+s+a+kee[c]+e[c],i=o+l,v=g,g=h,h=m,m=f+n>>>0,f=p,p=d,d=u,u=n+i>>>0;t.h0=t.h0+u|0,t.h1=t.h1+d|0,t.h2=t.h2+p|0,t.h3=t.h3+f|0,t.h4=t.h4+m|0,t.h5=t.h5+h|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,y-=64}}});var w2=x((qit,Oee)=>{var Ya=lt();Lt();var fI=null;Ya.util.isNodejs&&!Ya.options.usePureJavaScript&&!process.versions["node-webkit"]&&(fI=require("crypto"));var dke=Oee.exports=Ya.prng=Ya.prng||{};dke.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(c,u){if(!u)return e.generateSync(c);var d=e.plugin.cipher,p=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,h=Ya.util.createBuffer();e.key=null,g();function g(v){if(v)return u(v);if(h.length()>=c)return u(null,h.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return Ya.util.nextTick(function(){o(g)});var y=d(e.key,e.seed);e.generated+=y.length,h.putBytes(y),e.key=f(d(e.key,p(e.seed))),e.seed=m(d(e.key,e.seed)),Ya.util.setImmediate(g)}},e.generateSync=function(c){var u=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=Ya.util.createBuffer();m.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&s();var h=u(e.key,e.seed);e.generated+=h.length,m.putBytes(h),e.key=p(u(e.key,d(e.seed))),e.seed=f(u(e.key,e.seed))}return m.getBytes(c)};function o(c){if(e.pools[0].messageLength>=32)return a(),c();var u=32-e.pools[0].messageLength<<5;e.seedFile(u,function(d,p){if(d)return c(d);e.collect(p),a(),c()})}function s(){if(e.pools[0].messageLength>=32)return a();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var u=1,d=0;d<32;++d)e.reseeds%u===0&&(c.update(e.pools[d].digest().getBytes()),e.pools[d].start()),u=u<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var p=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function l(c){var u=null,d=Ya.util.globalScope,p=d.crypto||d.msCrypto;p&&p.getRandomValues&&(u=function(I){return p.getRandomValues(I)});var f=Ya.util.createBuffer();if(u)for(;f.length()<c;){var m=Math.max(1,Math.min(c-f.length(),65536)/4),h=new Uint32Array(Math.floor(m));try{u(h);for(var g=0;g<h.length;++g)f.putInt32(h[g])}catch(I){if(!(typeof QuotaExceededError<"u"&&I instanceof QuotaExceededError))throw I}}if(f.length()<c)for(var v,y,_,T=Math.floor(Math.random()*65536);f.length()<c;){y=16807*(T&65535),v=16807*(T>>16),y+=(v&32767)<<16,y+=v>>15,y=(y&2147483647)+(y>>31),T=y&4294967295;for(var g=0;g<3;++g)_=T>>>(g<<3),_^=Math.floor(Math.random()*256),f.putByte(_&255)}return f.getBytes(c)}return fI?(e.seedFile=function(c,u){fI.randomBytes(c,function(d,p){if(d)return u(d);u(null,p.toString())})},e.seedFileSync=function(c){return fI.randomBytes(c).toString()}):(e.seedFile=function(c,u){try{u(null,l(c))}catch(d){u(d)}},e.seedFileSync=l),e.collect=function(c){for(var u=c.length,d=0;d<u;++d)e.pools[e.pool].update(c.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,u){for(var d="",p=0;p<u;p+=8)d+=String.fromCharCode(c>>p&255);e.collect(d)},e.registerWorker=function(c){if(c===self)e.seedFile=function(d,p){function f(m){var h=m.data;h.forge&&h.forge.prng&&(self.removeEventListener("message",f),p(h.forge.prng.err,h.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:d}}})};else{var u=function(d){var p=d.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(f,m){c.postMessage({forge:{prng:{err:f,bytes:m}}})})};c.addEventListener("message",u)}},e}});var ds=x((Hit,A2)=>{var kn=lt();Gu();I2();w2();Lt();(function(){if(kn.random&&kn.random.getBytes){A2.exports=kn.random;return}(function(t){var e={},r=new Array(4),n=kn.util.createBuffer();e.formatKey=function(d){var p=kn.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),kn.aes._expandKey(d,!1)},e.formatSeed=function(d){var p=kn.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),d},e.cipher=function(d,p){return kn.aes._updateBlock(d,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(d){return++d[3],d},e.md=kn.md.sha256;function i(){var d=kn.prng.create(e);return d.getBytes=function(p,f){return d.generate(p,f)},d.getBytesSync=function(p){return d.generate(p)},d}var o=i(),s=null,a=kn.util.globalScope,l=a.crypto||a.msCrypto;if(l&&l.getRandomValues&&(s=function(d){return l.getRandomValues(d)}),kn.options.usePureJavaScript||!kn.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var u in navigator)try{typeof navigator[u]=="string"&&(c+=navigator[u])}catch{}o.collect(c),c=null}t&&(t().mousemove(function(d){o.collectInt(d.clientX,16),o.collectInt(d.clientY,16)}),t().keypress(function(d){o.collectInt(d.charCode,8)}))}if(!kn.random)kn.random=o;else for(var u in o)kn.random[u]=o[u];kn.random.createInstance=i,A2.exports=kn.random})(typeof jQuery<"u"?jQuery:null)})()});var P2=x((jit,Mee)=>{var Qi=lt();Lt();var R2=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Dee=[1,2,3,5],pke=function(t,e){return t<<e&65535|(t&65535)>>16-e},fke=function(t,e){return(t&65535)>>e|t<<16-e&65535};Mee.exports=Qi.rc2=Qi.rc2||{};Qi.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Qi.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(R2[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,R2[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,R2[r.at(a+1)^r.at(a+o)]);return r};var Lee=function(t,e,r){var n=!1,i=null,o=null,s=null,a,l,c,u,d=[];for(t=Qi.rc2.expandKey(t,e),c=0;c<64;c++)d.push(t.getInt16Le());r?(a=function(m){for(c=0;c<4;c++)m[c]+=d[u]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),m[c]=pke(m[c],Dee[c]),u++},l=function(m){for(c=0;c<4;c++)m[c]+=d[m[(c+3)%4]&63]}):(a=function(m){for(c=3;c>=0;c--)m[c]=fke(m[c],Dee[c]),m[c]-=d[u]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),u--},l=function(m){for(c=3;c>=0;c--)m[c]-=d[m[(c+3)%4]&63]});var p=function(m){var h=[];for(c=0;c<4;c++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),h.push(g&65535)}u=r?0:63;for(var v=0;v<m.length;v++)for(var y=0;y<m[v][0];y++)m[v][1](h);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(h[c]):h[c]^=s.getInt16Le()),o.putInt16Le(h[c])},f=null;return f={start:function(m,h){m&&typeof m=="string"&&(m=Qi.util.createBuffer(m)),n=!1,i=Qi.util.createBuffer(),o=h||new Qi.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)p([[5,a],[1,l],[6,a],[1,l],[5,a]])},finish:function(m){var h=!0;if(r)if(m)h=m(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(h&&(n=!0,f.update()),!r&&(h=i.length()===0,h))if(m)h=m(8,o,!r);else{var v=o.length(),y=o.at(v-1);y>v?h=!1:o.truncate(y)}return h}},f};Qi.rc2.startEncrypting=function(t,e,r){var n=Qi.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Qi.rc2.createEncryptionCipher=function(t,e){return Lee(t,e,!0)};Qi.rc2.startDecrypting=function(t,e,r){var n=Qi.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Qi.rc2.createDecryptionCipher=function(t,e){return Lee(t,e,!1)}});var h0=x((Vit,Gee)=>{var k2=lt();Gee.exports=k2.jsbn=k2.jsbn||{};var dl,mke=0xdeadbeefcafe,Fee=(mke&16777215)==15715070;function te(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}k2.jsbn.BigInteger=te;function Mt(){return new te(null)}function hke(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function gke(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var l=this.data[t]&32767,c=this.data[t++]>>15,u=a*l+c*s;l=s*l+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(u>>>15)+a*c+(i>>>30),r.data[n++]=l&1073741823}return i}function Bee(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var l=this.data[t]&16383,c=this.data[t++]>>14,u=a*l+c*s;l=s*l+((u&16383)<<14)+r.data[n]+i,i=(l>>28)+(u>>14)+a*c,r.data[n++]=l&268435455}return i}typeof navigator>"u"?(te.prototype.am=Bee,dl=28):Fee&&navigator.appName=="Microsoft Internet Explorer"?(te.prototype.am=gke,dl=30):Fee&&navigator.appName!="Netscape"?(te.prototype.am=hke,dl=26):(te.prototype.am=Bee,dl=28);te.prototype.DB=dl;te.prototype.DM=(1<<dl)-1;te.prototype.DV=1<<dl;var N2=52;te.prototype.FV=Math.pow(2,N2);te.prototype.F1=N2-dl;te.prototype.F2=2*dl-N2;var vke="0123456789abcdefghijklmnopqrstuvwxyz",mI=new Array,bg,ps;bg="0".charCodeAt(0);for(ps=0;ps<=9;++ps)mI[bg++]=ps;bg="a".charCodeAt(0);for(ps=10;ps<36;++ps)mI[bg++]=ps;bg="A".charCodeAt(0);for(ps=10;ps<36;++ps)mI[bg++]=ps;function Uee(t){return vke.charAt(t)}function qee(t,e){var r=mI[t.charCodeAt(e)];return r??-1}function yke(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function _ke(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function zu(t){var e=Mt();return e.fromInt(t),e}function xke(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:qee(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&te.ZERO.subTo(this,this)}function bke(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Eke(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=Uee(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=Uee(n));return i?o:"0"}function Cke(){var t=Mt();return te.ZERO.subTo(this,t),t}function Ske(){return this.s<0?this.negate():this}function Tke(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function hI(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Ike(){return this.t<=0?0:this.DB*(this.t-1)+hI(this.data[this.t-1]^this.s&this.DM)}function wke(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Ake(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Rke(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function Pke(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function kke(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Nke(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&te.ZERO.subTo(e,e)}function Oke(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Dke(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Mt());var o=Mt(),s=this.s,a=t.s,l=this.DB-hI(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var c=o.t,u=o.data[c-1];if(u!=0){var d=u*(1<<this.F1)+(c>1?o.data[c-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,m=1<<this.F2,h=r.t,g=h-c,v=e??Mt();for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),te.ONE.dlShiftTo(c,v),v.subTo(o,o);o.t<c;)o.data[o.t++]=0;for(;--g>=0;){var y=r.data[--h]==u?this.DM:Math.floor(r.data[h]*p+(r.data[h-1]+m)*f);if((r.data[h]+=o.am(0,y,r,g,0,c))<y)for(o.dlShiftTo(g,v),r.subTo(v,r);r.data[h]<--y;)r.subTo(v,r)}e!=null&&(r.drShiftTo(c,e),s!=a&&te.ZERO.subTo(e,e)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&te.ZERO.subTo(r,r)}}}function Lke(t){var e=Mt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(te.ZERO)>0&&t.subTo(e,e),e}function rf(t){this.m=t}function Mke(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Fke(t){return t}function Bke(t){t.divRemTo(this.m,null,t)}function Uke(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function qke(t,e){t.squareTo(e),this.reduce(e)}rf.prototype.convert=Mke;rf.prototype.revert=Fke;rf.prototype.reduce=Bke;rf.prototype.mulTo=Uke;rf.prototype.sqrTo=qke;function Hke(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function nf(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function jke(t){var e=Mt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(te.ZERO)>0&&this.m.subTo(e,e),e}function Vke(t){var e=Mt();return t.copyTo(e),this.reduce(e),e}function Gke(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function $ke(t,e){t.squareTo(e),this.reduce(e)}function zke(t,e,r){t.multiplyTo(e,r),this.reduce(r)}nf.prototype.convert=jke;nf.prototype.revert=Vke;nf.prototype.reduce=Gke;nf.prototype.mulTo=zke;nf.prototype.sqrTo=$ke;function Wke(){return(this.t>0?this.data[0]&1:this.s)==0}function Kke(t,e){if(t>4294967295||t<1)return te.ONE;var r=Mt(),n=Mt(),i=e.convert(this),o=hI(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function Yke(t,e){var r;return t<256||e.isEven()?r=new rf(e):r=new nf(e),this.exp(t,r)}te.prototype.copyTo=yke;te.prototype.fromInt=_ke;te.prototype.fromString=xke;te.prototype.clamp=bke;te.prototype.dlShiftTo=wke;te.prototype.drShiftTo=Ake;te.prototype.lShiftTo=Rke;te.prototype.rShiftTo=Pke;te.prototype.subTo=kke;te.prototype.multiplyTo=Nke;te.prototype.squareTo=Oke;te.prototype.divRemTo=Dke;te.prototype.invDigit=Hke;te.prototype.isEven=Wke;te.prototype.exp=Kke;te.prototype.toString=Eke;te.prototype.negate=Cke;te.prototype.abs=Ske;te.prototype.compareTo=Tke;te.prototype.bitLength=Ike;te.prototype.mod=Lke;te.prototype.modPowInt=Yke;te.ZERO=zu(0);te.ONE=zu(1);function Qke(){var t=Mt();return this.copyTo(t),t}function Xke(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Jke(){return this.t==0?this.s:this.data[0]<<24>>24}function Zke(){return this.t==0?this.s:this.data[0]<<16>>16}function eNe(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function tNe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function rNe(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=zu(r),i=Mt(),o=Mt(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function nNe(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var l=qee(t,a);if(l<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&te.ZERO.subTo(this,this)}function iNe(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(te.ONE.shiftLeft(t-1),O2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(te.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function oNe(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function sNe(t){return this.compareTo(t)==0}function aNe(t){return this.compareTo(t)<0?this:t}function cNe(t){return this.compareTo(t)>0?this:t}function lNe(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function uNe(t,e){return t&e}function dNe(t){var e=Mt();return this.bitwiseTo(t,uNe,e),e}function O2(t,e){return t|e}function pNe(t){var e=Mt();return this.bitwiseTo(t,O2,e),e}function Hee(t,e){return t^e}function fNe(t){var e=Mt();return this.bitwiseTo(t,Hee,e),e}function jee(t,e){return t&~e}function mNe(t){var e=Mt();return this.bitwiseTo(t,jee,e),e}function hNe(){for(var t=Mt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function gNe(t){var e=Mt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function vNe(t){var e=Mt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yNe(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function _Ne(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+yNe(this.data[t]);return this.s<0?this.t*this.DB:-1}function xNe(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function bNe(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=xNe(this.data[r]^e);return t}function ENe(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function CNe(t,e){var r=te.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function SNe(t){return this.changeBit(t,O2)}function TNe(t){return this.changeBit(t,jee)}function INe(t){return this.changeBit(t,Hee)}function wNe(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function ANe(t){var e=Mt();return this.addTo(t,e),e}function RNe(t){var e=Mt();return this.subTo(t,e),e}function PNe(t){var e=Mt();return this.multiplyTo(t,e),e}function kNe(t){var e=Mt();return this.divRemTo(t,e,null),e}function NNe(t){var e=Mt();return this.divRemTo(t,null,e),e}function ONe(t){var e=Mt(),r=Mt();return this.divRemTo(t,e,r),new Array(e,r)}function DNe(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function LNe(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function m0(){}function Vee(t){return t}function MNe(t,e,r){t.multiplyTo(e,r)}function FNe(t,e){t.squareTo(e)}m0.prototype.convert=Vee;m0.prototype.revert=Vee;m0.prototype.mulTo=MNe;m0.prototype.sqrTo=FNe;function BNe(t){return this.exp(t,new m0)}function UNe(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function qNe(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Eg(t){this.r2=Mt(),this.q3=Mt(),te.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function HNe(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Mt();return t.copyTo(e),this.reduce(e),e}function jNe(t){return t}function VNe(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function GNe(t,e){t.squareTo(e),this.reduce(e)}function $Ne(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Eg.prototype.convert=HNe;Eg.prototype.revert=jNe;Eg.prototype.reduce=VNe;Eg.prototype.mulTo=$Ne;Eg.prototype.sqrTo=GNe;function zNe(t,e){var r=t.bitLength(),n,i=zu(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new rf(e):e.isEven()?o=new Eg(e):o=new nf(e);var s=new Array,a=3,l=n-1,c=(1<<n)-1;if(s[1]=o.convert(this),n>1){var u=Mt();for(o.sqrTo(s[1],u);a<=c;)s[a]=Mt(),o.mulTo(u,s[a-2],s[a]),a+=2}var d=t.t-1,p,f=!0,m=Mt(),h;for(r=hI(t.data[d])-1;d>=0;){for(r>=l?p=t.data[d]>>r-l&c:(p=(t.data[d]&(1<<r+1)-1)<<l-r,d>0&&(p|=t.data[d-1]>>this.DB+r-l)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)s[p].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(h=i,i=m,m=h),o.mulTo(m,s[p],i)}for(;d>=0&&!(t.data[d]&1<<r);)o.sqrTo(i,m),h=i,i=m,m=h,--r<0&&(r=this.DB-1,--d)}return o.revert(i)}function WNe(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function KNe(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function YNe(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return te.ZERO;for(var r=t.clone(),n=this.clone(),i=zu(1),o=zu(0),s=zu(0),a=zu(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(te.ONE)!=0)return te.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var $s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],QNe=(1<<26)/$s[$s.length-1];function XNe(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=$s[$s.length-1]){for(e=0;e<$s.length;++e)if(r.data[0]==$s[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<$s.length;){for(var n=$s[e],i=e+1;i<$s.length&&n<QNe;)n*=$s[i++];for(n=r.modInt(n);e<i;)if(n%$s[e++]==0)return!1}return r.millerRabin(t)}function JNe(t){var e=this.subtract(te.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=ZNe(),o,s=0;s<t;++s){do o=new te(this.bitLength(),i);while(o.compareTo(te.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(te.ONE)!=0&&a.compareTo(e)!=0){for(var l=1;l++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(te.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function ZNe(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}te.prototype.chunkSize=eNe;te.prototype.toRadix=rNe;te.prototype.fromRadix=nNe;te.prototype.fromNumber=iNe;te.prototype.bitwiseTo=lNe;te.prototype.changeBit=CNe;te.prototype.addTo=wNe;te.prototype.dMultiply=DNe;te.prototype.dAddOffset=LNe;te.prototype.multiplyLowerTo=UNe;te.prototype.multiplyUpperTo=qNe;te.prototype.modInt=KNe;te.prototype.millerRabin=JNe;te.prototype.clone=Qke;te.prototype.intValue=Xke;te.prototype.byteValue=Jke;te.prototype.shortValue=Zke;te.prototype.signum=tNe;te.prototype.toByteArray=oNe;te.prototype.equals=sNe;te.prototype.min=aNe;te.prototype.max=cNe;te.prototype.and=dNe;te.prototype.or=pNe;te.prototype.xor=fNe;te.prototype.andNot=mNe;te.prototype.not=hNe;te.prototype.shiftLeft=gNe;te.prototype.shiftRight=vNe;te.prototype.getLowestSetBit=_Ne;te.prototype.bitCount=bNe;te.prototype.testBit=ENe;te.prototype.setBit=SNe;te.prototype.clearBit=TNe;te.prototype.flipBit=INe;te.prototype.add=ANe;te.prototype.subtract=RNe;te.prototype.multiply=PNe;te.prototype.divide=kNe;te.prototype.remainder=NNe;te.prototype.divideAndRemainder=ONe;te.prototype.modPow=zNe;te.prototype.modInverse=YNe;te.prototype.pow=BNe;te.prototype.gcd=WNe;te.prototype.isProbablePrime=XNe});var Cg=x((Git,Kee)=>{var Qa=lt();$a();Lt();var zee=Kee.exports=Qa.sha1=Qa.sha1||{};Qa.md.sha1=Qa.md.algorithms.sha1=zee;zee.create=function(){Wee||eOe();var t=null,e=Qa.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Qa.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Qa.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),$ee(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Qa.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(D2.substr(0,n.blockLength-s));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};$ee(d,r,i);var p=Qa.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},n};var D2=null,Wee=!1;function eOe(){D2=String.fromCharCode(128),D2+=Qa.util.fillString(String.fromCharCode(0),64),Wee=!0}function $ee(t,e,r){for(var n,i,o,s,a,l,c,u,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,c=o^s^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,c=o^s^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,c=o&s|a&(o^s),n=(i<<5|i>>>27)+c+l+2400959708+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,c=o^s^a,n=(i<<5|i>>>27)+c+l+3395469782+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+l|0,d-=64}}});var L2=x(($it,Qee)=>{var Xa=lt();Lt();ds();Cg();var Yee=Qee.exports=Xa.pkcs1=Xa.pkcs1||{};Yee.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=Xa.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),l=a-2*o.digestLength-2;if(e.length>l){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=l,c}n||(n=""),o.update(n,"raw");for(var u=o.digest(),d="",p=l-e.length,f=0;f<p;f++)d+="\0";var m=u.getBytes()+d+""+e;if(!i)i=Xa.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=o.digestLength,c}var h=gI(i,a-o.digestLength-1,s),g=Xa.util.xorBytes(m,h,m.length),v=gI(g,o.digestLength,s),y=Xa.util.xorBytes(i,v,i.length);return"\0"+y+g};Yee.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=Xa.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),l=e.charAt(0),c=e.substring(1,i.digestLength+1),u=e.substring(1+i.digestLength),d=gI(u,i.digestLength,o),p=Xa.util.xorBytes(c,d,c.length),f=gI(p,s-i.digestLength-1,o),m=Xa.util.xorBytes(u,f,u.length),h=m.substring(0,i.digestLength),g=l!=="\0",v=0;v<i.digestLength;++v)g|=a.charAt(v)!==h.charAt(v);for(var y=1,_=i.digestLength,T=i.digestLength;T<m.length;T++){var I=m.charCodeAt(T),R=I&1^1,w=y?65534:0;g|=I&w,y=y&R,_+=y}if(g||m.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(_+1)};function gI(t,e,r){r||(r=Xa.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var F2=x((zit,M2)=>{var Wu=lt();Lt();h0();ds();(function(){if(Wu.prime){M2.exports=Wu.prime;return}var t=M2.exports=Wu.prime=Wu.prime||{},e=Wu.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(d,p){return d|p};t.generateProbablePrime=function(d,p,f){typeof p=="function"&&(f=p,p={}),p=p||{};var m=p.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var h=p.prng||Wu.random,g={nextBytes:function(v){for(var y=h.getBytesSync(v.length),_=0;_<v.length;++_)v[_]=y.charCodeAt(_)}};if(m.name==="PRIMEINC")return o(d,g,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(d,p,f,m){return"workers"in f?l(d,p,f,m):s(d,p,f,m)}function s(d,p,f,m){var h=c(d,p),g=0,v=u(h.bitLength());"millerRabinTests"in f&&(v=f.millerRabinTests);var y=10;"maxBlockTime"in f&&(y=f.maxBlockTime),a(h,d,p,g,v,y,m)}function a(d,p,f,m,h,g,v){var y=+new Date;do{if(d.bitLength()>p&&(d=c(p,f)),d.isProbablePrime(h))return v(null,d);d.dAddOffset(r[m++%8],0)}while(g<0||+new Date-y<g);Wu.util.setImmediate(function(){a(d,p,f,m,h,g,v)})}function l(d,p,f,m){if(typeof Worker>"u")return s(d,p,f,m);var h=c(d,p),g=f.workers,v=f.workLoad||100,y=v*30/8,_=f.workerScript||"forge/prime.worker.js";if(g===-1)return Wu.util.estimateCores(function(I,R){I&&(R=2),g=R-1,T()});T();function T(){g=Math.max(1,g);for(var I=[],R=0;R<g;++R)I[R]=new Worker(_);for(var w=g,R=0;R<g;++R)I[R].addEventListener("message",V);var O=!1;function V(L){if(!O){--w;var A=L.data;if(A.found){for(var N=0;N<I.length;++N)I[N].terminate();return O=!0,m(null,new e(A.prime,16))}h.bitLength()>d&&(h=c(d,p));var q=h.toString(16);L.target.postMessage({hex:q,workLoad:v}),h.dAddOffset(y,0)}}}}function c(d,p){var f=new e(d,p),m=d-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function u(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var g0=x((Wit,nte)=>{var Fe=lt();Gs();h0();$u();L2();F2();ds();Lt();typeof At>"u"&&(At=Fe.jsbn.BigInteger);var At,B2=Fe.util.isNodejs?require("crypto"):null,G=Fe.asn1,ms=Fe.util;Fe.pki=Fe.pki||{};nte.exports=Fe.pki.rsa=Fe.rsa=Fe.rsa||{};var tt=Fe.pki,tOe=[6,4,2,4,2,4,6,2],rOe={name:"PrivateKeyInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},nOe={name:"RSAPrivateKey",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},iOe={name:"RSAPublicKey",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},oOe=Fe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:G.Class.UNIVERSAL,type:G.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},sOe={name:"DigestInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:G.Class.UNIVERSAL,type:G.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:G.Class.UNIVERSAL,type:G.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},aOe=function(t){var e;if(t.algorithm in tt.oids)e=tt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=G.oidToDer(e).getBytes(),i=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[]),o=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[]);o.value.push(G.create(G.Class.UNIVERSAL,G.Type.OID,!1,n)),o.value.push(G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,""));var s=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),G.toDer(i).getBytes()},tte=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(At.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(At.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new At(Fe.util.bytesToHex(Fe.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(At.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};tt.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=rte(t,e,r)):(i=Fe.util.createBuffer(),i.putBytes(t));for(var s=new At(i.toHex(),16),a=tte(s,e,n),l=a.toString(16),c=Fe.util.createBuffer(),u=o-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(Fe.util.hexToBytes(l)),c.getBytes()};tt.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new At(Fe.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=tte(s,e,r),l=a.toString(16),c=Fe.util.createBuffer(),u=i-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(Fe.util.hexToBytes(l)),n!==!1?vI(c.getBytes(),e,r):c.getBytes()};tt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Fe.random,i={nextBytes:function(a){for(var l=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=l.charCodeAt(c)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new At(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};tt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new At(null);r.fromInt(30);for(var n=0,i=function(d,p){return d|p},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,c=l-1;t.pqState===0?(t.num=new At(l,t.rng),t.num.testBit(c)||t.num.bitwiseTo(At.ONE.shiftLeft(c),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(lOe(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(tOe[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(At.ONE).gcd(t.e).compareTo(At.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(At.ONE),t.q1=t.q.subtract(At.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(At.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var u=t.e.modInverse(t.phi);t.keys={privateKey:tt.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:tt.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};tt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Fe.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Xee("generateKeyPair"))return B2.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,l,c){if(a)return n(a);n(null,{privateKey:tt.privateKeyFromPem(c),publicKey:tt.publicKeyFromPem(l)})});if(Jee("generateKey")&&Jee("exportKey"))return ms.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ete(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return ms.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var l=tt.privateKeyFromAsn1(G.fromDer(Fe.util.createBuffer(a)));n(null,{privateKey:l,publicKey:tt.setRsaPublicKey(l.n,l.e)})}});if(Zee("generateKey")&&Zee("exportKey")){var i=ms.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ete(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var l=a.target.result,c=ms.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(u){var d=u.target.result,p=tt.privateKeyFromAsn1(G.fromDer(Fe.util.createBuffer(d)));n(null,{privateKey:p,publicKey:tt.setRsaPublicKey(p.n,p.e)})},c.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(Xee("generateKeyPairSync")){var o=B2.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:tt.privateKeyFromPem(o.privateKey),publicKey:tt.publicKeyFromPem(o.publicKey)}}}var s=tt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return tt.rsa.stepKeyPairGenerationState(s,0),s.keys;cOe(s,r,n)};tt.setRsaPublicKey=tt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,l,c){return rte(a,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,l){return Fe.pkcs1.encode_rsa_oaep(l,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return tt.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(l,c){c=vI(c,r,!0);var u=G.fromDer(c,{parseAllBytes:s._parseAllDigestBytes}),d={},p=[];if(!G.validate(u,sOe,d,p)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=p,f}var m=G.derToOid(d.algorithmIdentifier);if(!(m===Fe.oids.md2||m===Fe.oids.md5||m===Fe.oids.sha1||m===Fe.oids.sha224||m===Fe.oids.sha256||m===Fe.oids.sha384||m===Fe.oids.sha512||m===Fe.oids["sha512-224"]||m===Fe.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===Fe.oids.md2||m===Fe.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===d.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(l,c){return c=vI(c,r,!0),l===c}});var a=tt.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};tt.setRsaPrivateKey=tt.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return l.decrypt=function(c,u,d){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var p=tt.rsa.decrypt(c,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:vI};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(f,m){return Fe.pkcs1.decode_rsa_oaep(m,f,d)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(p,l,!1)},l.sign=function(c,u){var d=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:aOe},d=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return c}},d=1);var p=u.encode(c,l.n.bitLength());return tt.rsa.encrypt(p,l,d)},l};tt.wrapRsaPrivateKey=function(t){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(0).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(tt.oids.rsaEncryption).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]),G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,G.toDer(t).getBytes())])};tt.privateKeyFromAsn1=function(t){var e={},r=[];if(G.validate(t,rOe,e,r)&&(t=G.fromDer(Fe.util.createBuffer(e.privateKey))),e={},r=[],!G.validate(t,nOe,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,l,c,u,d;return i=Fe.util.createBuffer(e.privateKeyModulus).toHex(),o=Fe.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=Fe.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=Fe.util.createBuffer(e.privateKeyPrime1).toHex(),l=Fe.util.createBuffer(e.privateKeyPrime2).toHex(),c=Fe.util.createBuffer(e.privateKeyExponent1).toHex(),u=Fe.util.createBuffer(e.privateKeyExponent2).toHex(),d=Fe.util.createBuffer(e.privateKeyCoefficient).toHex(),tt.setRsaPrivateKey(new At(i,16),new At(o,16),new At(s,16),new At(a,16),new At(l,16),new At(c,16),new At(u,16),new At(d,16))};tt.privateKeyToAsn1=tt.privateKeyToRSAPrivateKey=function(t){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(0).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.n)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.e)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.d)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.p)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.q)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.dP)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.dQ)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.qInv))])};tt.publicKeyFromAsn1=function(t){var e={},r=[];if(G.validate(t,oOe,e,r)){var n=G.derToOid(e.publicKeyOid);if(n!==tt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!G.validate(t,iOe,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=Fe.util.createBuffer(e.publicKeyModulus).toHex(),s=Fe.util.createBuffer(e.publicKeyExponent).toHex();return tt.setRsaPublicKey(new At(o,16),new At(s,16))};tt.publicKeyToAsn1=tt.publicKeyToSubjectPublicKeyInfo=function(t){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(tt.oids.rsaEncryption).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]),G.create(G.Class.UNIVERSAL,G.Type.BITSTRING,!1,[tt.publicKeyToRSAPublicKey(t)])])};tt.publicKeyToRSAPublicKey=function(t){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.n)),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Ja(t.e))])};function rte(t,e,r){var n=Fe.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var l=0;l<s;++l)n.putByte(a)}else for(;s>0;){for(var c=0,u=Fe.random.getBytes(s),l=0;l<s;++l)a=u.charCodeAt(l),a===0?++c:n.putByte(a);s=c}return n.putByte(0),n.putBytes(t),n}function vI(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=Fe.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(a===0){l=i-3-n;for(var c=0;c<l;++c)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(a===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var u=o.getByte();if(u!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function cOe(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,l){if(a)return r(a);if(t.p=l,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,l){Fe.prime.generateProbablePrime(a,n,l)}function s(a,l){if(a)return r(a);if(t.q=l,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(At.ONE).gcd(t.e).compareTo(At.ONE)!==0){t.p=null,i();return}if(t.q.subtract(At.ONE).gcd(t.e).compareTo(At.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(At.ONE),t.q1=t.q.subtract(At.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(At.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var u=t.e.modInverse(t.phi);t.keys={privateKey:tt.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:tt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Ja(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Fe.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function lOe(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Xee(t){return Fe.util.isNodejs&&typeof B2[t]=="function"}function Jee(t){return typeof ms.globalScope<"u"&&typeof ms.globalScope.crypto=="object"&&typeof ms.globalScope.crypto.subtle=="object"&&typeof ms.globalScope.crypto.subtle[t]=="function"}function Zee(t){return typeof ms.globalScope<"u"&&typeof ms.globalScope.msCrypto=="object"&&typeof ms.globalScope.msCrypto.subtle=="object"&&typeof ms.globalScope.msCrypto.subtle[t]=="function"}function ete(t){for(var e=Fe.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var U2=x((Kit,cte)=>{var Ce=lt();Gu();Gs();f0();$a();$u();pI();tf();ds();P2();g0();Lt();typeof ite>"u"&&(ite=Ce.jsbn.BigInteger);var ite,Q=Ce.asn1,st=Ce.pki=Ce.pki||{};cte.exports=st.pbe=Ce.pbe=Ce.pbe||{};var of=st.oids,uOe={name:"EncryptedPrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},dOe={name:"PBES2Algorithms",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pOe={name:"pkcs-12PbeParams",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"iterations"}]};st.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ce.random.getBytesSync(r.saltSize),i=r.count,o=Q.integerToDer(i),s,a,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,u,d;switch(r.algorithm){case"aes128":s=16,c=16,u=of["aes128-CBC"],d=Ce.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,u=of["aes192-CBC"],d=Ce.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,u=of["aes256-CBC"],d=Ce.aes.createEncryptionCipher;break;case"des":s=8,c=8,u=of.desCBC,d=Ce.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var f="hmacWith"+r.prfAlgorithm.toUpperCase(),m=ate(f),h=Ce.pkcs5.pbkdf2(e,n,i,s,m),g=Ce.random.getBytesSync(c),v=d(h);v.start(g),v.update(Q.toDer(t)),v.finish(),l=v.output.getBytes();var y=fOe(n,o,s,f);a=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(of.pkcs5PBES2).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(of.pkcs5PBKDF2).getBytes()),y]),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(u).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var _=new Ce.util.ByteBuffer(n),h=st.pbe.generatePkcs12Key(e,_,1,i,s),g=st.pbe.generatePkcs12Key(e,_,2,i,s),v=Ce.des.createEncryptionCipher(h);v.start(g),v.update(Q.toDer(t)),v.finish(),l=v.output.getBytes(),a=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(of["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,n),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,o.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var T=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[a,Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,l)]);return T};st.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!Q.validate(t,uOe,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=Q.derToOid(n.encryptionOid),a=st.pbe.getCipher(s,n.encryptionParams,e),l=Ce.util.createBuffer(n.encryptedData);return a.update(l),a.finish()&&(r=Q.fromDer(a.output)),r};st.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:Q.toDer(t).getBytes()};return Ce.pem.encode(r,{maxline:e})};st.encryptedPrivateKeyFromPem=function(t){var e=Ce.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Q.fromDer(e.body)};st.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=st.wrapRsaPrivateKey(st.privateKeyToAsn1(t));return n=st.encryptPrivateKeyInfo(n,e,r),st.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=Ce.random.getBytesSync(16),a=Ce.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=Ce.random.getBytesSync(16),a=Ce.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=Ce.random.getBytesSync(16),a=Ce.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=Ce.random.getBytesSync(8),a=Ce.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=Ce.random.getBytesSync(8),a=Ce.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var c=Ce.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(c);u.start(o),u.update(Q.toDer(st.privateKeyToAsn1(t))),u.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ce.util.bytesToHex(o).toUpperCase()},body:u.output.getBytes()};return Ce.pem.encode(d)};st.decryptRsaPrivateKey=function(t,e){var r=null,n=Ce.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=Ce.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=Ce.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=Ce.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=Ce.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=Ce.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(d){return Ce.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":o=8,s=function(d){return Ce.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":o=16,s=function(d){return Ce.rc2.createDecryptionCipher(d,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Ce.util.hexToBytes(n.dekInfo.parameters),l=Ce.pbe.opensslDeriveBytes(e,a.substr(0,8),o),c=s(l);if(c.start(a),c.update(Ce.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=st.decryptPrivateKeyInfo(Q.fromDer(r),e):r=Q.fromDer(r),r!==null&&(r=st.privateKeyFromAsn1(r)),r};st.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in Ce.md))throw new Error('"sha1" hash algorithm unavailable.');o=Ce.md.sha1.create()}var l=o.digestLength,c=o.blockLength,u=new Ce.util.ByteBuffer,d=new Ce.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var p=d.length(),f=e.length(),m=new Ce.util.ByteBuffer;m.fillWithByte(r,c);var h=c*Math.ceil(f/c),g=new Ce.util.ByteBuffer;for(a=0;a<h;a++)g.putByte(e.at(a%f));var v=c*Math.ceil(p/c),y=new Ce.util.ByteBuffer;for(a=0;a<v;a++)y.putByte(d.at(a%p));var _=g;_.putBuffer(y);for(var T=Math.ceil(i/l),I=1;I<=T;I++){var R=new Ce.util.ByteBuffer;R.putBytes(m.bytes()),R.putBytes(_.bytes());for(var w=0;w<n;w++)o.start(),o.update(R.getBytes()),R=o.digest();var O=new Ce.util.ByteBuffer;for(a=0;a<c;a++)O.putByte(R.at(a%l));var V=Math.ceil(f/c)+Math.ceil(p/c),L=new Ce.util.ByteBuffer;for(s=0;s<V;s++){var A=new Ce.util.ByteBuffer(_.getBytes(c)),N=511;for(a=O.length()-1;a>=0;a--)N=N>>8,N+=O.at(a)+A.at(a),A.setAt(a,N&255);L.putBuffer(A)}_=L,u.putBuffer(R)}return u.truncate(u.length()-i),u};st.pbe.getCipher=function(t,e,r){switch(t){case st.oids.pkcs5PBES2:return st.pbe.getCipherForPBES2(t,e,r);case st.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case st.oids["pbewithSHAAnd40BitRC2-CBC"]:return st.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};st.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!Q.validate(e,dOe,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=Q.derToOid(n.kdfOid),t!==st.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=Q.derToOid(n.encOid),t!==st.oids["aes128-CBC"]&&t!==st.oids["aes192-CBC"]&&t!==st.oids["aes256-CBC"]&&t!==st.oids["des-EDE3-CBC"]&&t!==st.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=Ce.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var l,c;switch(st.oids[t]){case"aes128-CBC":l=16,c=Ce.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,c=Ce.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,c=Ce.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,c=Ce.des.createDecryptionCipher;break;case"desCBC":l=8,c=Ce.des.createDecryptionCipher;break}var u=ste(n.prfOid),d=Ce.pkcs5.pbkdf2(r,s,a,l,u),p=n.encIv,f=c(d);return f.start(p),f};st.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!Q.validate(e,pOe,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=Ce.util.createBuffer(n.salt),a=Ce.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var l,c,u;switch(t){case st.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,c=8,u=Ce.des.startDecrypting;break;case st.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,c=8,u=function(h,g){var v=Ce.rc2.createDecryptionCipher(h,40);return v.start(g,null),v};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var d=ste(n.prfOid),p=st.pbe.generatePkcs12Key(r,s,1,a,l,d);d.start();var f=st.pbe.generatePkcs12Key(r,s,2,a,c,d);return u(p,f)};st.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Ce.md))throw new Error('"md5" hash algorithm unavailable.');n=Ce.md.md5.create()}e===null&&(e="");for(var i=[ote(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(ote(n,i[s-1]+t+e));return i.join("").substr(0,r)};function ote(t,e){return t.start().update(e).digest().getBytes()}function ste(t){var e;if(!t)e="hmacWithSHA1";else if(e=st.oids[Q.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return ate(e)}function ate(t){var e=Ce.md;switch(t){case"hmacWithSHA224":e=Ce.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function fOe(t,e,r,n){var i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,t),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,Ce.util.hexToBytes(r.toString(16))),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(st.oids[n]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")])),i}});var q2=x((Yit,dte)=>{var Sg=lt();Gs();Lt();var _e=Sg.asn1,Tg=dte.exports=Sg.pkcs7asn1=Sg.pkcs7asn1||{};Sg.pkcs7=Sg.pkcs7||{};Sg.pkcs7.asn1=Tg;var lte={name:"ContentInfo",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:_e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};Tg.contentInfoValidator=lte;var ute={name:"EncryptedContentInfo",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:_e.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:_e.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};Tg.envelopedDataValidator={name:"EnvelopedData",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(ute)};Tg.encryptedDataValidator={name:"EncryptedData",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"version"}].concat(ute)};var mOe={name:"SignerInfo",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:_e.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:_e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:_e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};Tg.signedDataValidator={name:"SignedData",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},lte,{name:"SignedData.Certificates",tagClass:_e.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:_e.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SET,capture:"signerInfos",optional:!0,value:[mOe]}]};Tg.recipientInfoValidator={name:"RecipientInfo",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:_e.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var H2=x((Qit,pte)=>{var sf=lt();Lt();sf.mgf=sf.mgf||{};var hOe=pte.exports=sf.mgf.mgf1=sf.mgf1=sf.mgf1||{};hOe.create=function(t){var e={generate:function(r,n){for(var i=new sf.util.ByteBuffer,o=Math.ceil(n/t.digestLength),s=0;s<o;s++){var a=new sf.util.ByteBuffer;a.putInt32(s),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var mte=x((Xit,fte)=>{var yI=lt();H2();fte.exports=yI.mgf=yI.mgf||{};yI.mgf.mgf1=yI.mgf1});var _I=x((Jit,hte)=>{var af=lt();ds();Lt();var gOe=hte.exports=af.pss=af.pss||{};gOe.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=af.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||af.random,a={};return a.encode=function(l,c){var u,d=c-1,p=Math.ceil(d/8),f=l.digest().getBytes();if(p<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var h=new af.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(m),e.start(),e.update(h.getBytes());var g=e.digest().getBytes(),v=new af.util.ByteBuffer;v.fillWithByte(0,p-o-n-2),v.putByte(1),v.putBytes(m);var y=v.getBytes(),_=p-n-1,T=r.generate(g,_),I="";for(u=0;u<_;u++)I+=String.fromCharCode(y.charCodeAt(u)^T.charCodeAt(u));var R=65280>>8*p-d&255;return I=String.fromCharCode(I.charCodeAt(0)&~R)+I.substr(1),I+g+String.fromCharCode(188)},a.verify=function(l,c,u){var d,p=u-1,f=Math.ceil(p/8);if(c=c.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,h=c.substr(0,m),g=c.substr(m,n),v=65280>>8*f-p&255;if(h.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var y=r.generate(g,m),_="";for(d=0;d<m;d++)_+=String.fromCharCode(h.charCodeAt(d)^y.charCodeAt(d));_=String.fromCharCode(_.charCodeAt(0)&~v)+_.substr(1);var T=f-n-o-2;for(d=0;d<T;d++)if(_.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(T)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var I=_.substr(-o),R=new af.util.ByteBuffer;R.fillWithByte(0,8),R.putBytes(l),R.putBytes(I),e.start(),e.update(R.getBytes());var w=e.digest().getBytes();return g===w},a}});var EI=x((Zit,xte)=>{var Be=lt();Gu();Gs();f0();$a();mte();$u();tf();_I();g0();Lt();var b=Be.asn1,fe=xte.exports=Be.pki=Be.pki||{},Rt=fe.oids,Br={};Br.CN=Rt.commonName;Br.commonName="CN";Br.C=Rt.countryName;Br.countryName="C";Br.L=Rt.localityName;Br.localityName="L";Br.ST=Rt.stateOrProvinceName;Br.stateOrProvinceName="ST";Br.O=Rt.organizationName;Br.organizationName="O";Br.OU=Rt.organizationalUnitName;Br.organizationalUnitName="OU";Br.E=Rt.emailAddress;Br.emailAddress="E";var vte=Be.pki.rsa.publicKeyValidator,vOe={name:"Certificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:b.Class.UNIVERSAL,type:b.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:b.Class.UNIVERSAL,type:b.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},vte,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},yOe={name:"rsapss",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:b.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:b.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:b.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:b.Class.UNIVERSAL,type:b.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},_Oe={name:"CertificationRequestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},vte,{name:"CertificationRequestInfo.attributes",tagClass:b.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:b.Class.UNIVERSAL,type:b.Type.SET,constructed:!0}]}]}]},xOe={name:"CertificationRequest",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[_Oe,{name:"CertificationRequest.signatureAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};fe.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,s=0;s<t.value.length;++s){n=t.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=b.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in Rt&&(o.name=Rt[o.type],o.name in Br&&(o.shortName=Br[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};fe.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=b.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in Rt&&(a.name=Rt[a.type],a.name in Br&&(a.shortName=Br[a.name])),a.type===Rt.extensionRequest){a.extensions=[];for(var l=0;l<a.value.length;++l)a.extensions.push(fe.certificateExtensionFromAsn1(a.value[l]))}e.push(a)}return e};function Ku(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var xI=function(t,e,r){var n={};if(t!==Rt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Rt.sha1},mgf:{algorithmOid:Rt.mgf1,hash:{algorithmOid:Rt.sha1}},saltLength:20});var i={},o=[];if(!b.validate(e,yOe,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=b.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=b.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=b.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},bI=function(t){switch(Rt[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Be.md.sha1.create();case"md5WithRSAEncryption":return Be.md.md5.create();case"sha256WithRSAEncryption":return Be.md.sha256.create();case"sha384WithRSAEncryption":return Be.md.sha384.create();case"sha512WithRSAEncryption":return Be.md.sha512.create();case"RSASSA-PSS":return Be.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},yte=function(t){var e=t.certificate,r;switch(e.signatureOid){case Rt.sha1WithRSAEncryption:case Rt.sha1WithRSASignature:break;case Rt["RSASSA-PSS"]:var n,i;if(n=Rt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||Be.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=Rt[e.signatureParameters.mgf.algorithmOid],i===void 0||Be.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=Be.mgf[i].create(Be.md[n].create()),n=Rt[e.signatureParameters.hash.algorithmOid],n===void 0||Be.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=Be.pss.create(Be.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};fe.certificateFromPem=function(t,e,r){var n=Be.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=b.fromDer(n.body,r);return fe.certificateFromAsn1(o,e)};fe.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:b.toDer(fe.certificateToAsn1(t)).getBytes()};return Be.pem.encode(r,{maxline:e})};fe.publicKeyFromPem=function(t){var e=Be.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=b.fromDer(e.body);return fe.publicKeyFromAsn1(n)};fe.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:b.toDer(fe.publicKeyToAsn1(t)).getBytes()};return Be.pem.encode(r,{maxline:e})};fe.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:b.toDer(fe.publicKeyToRSAPublicKey(t)).getBytes()};return Be.pem.encode(r,{maxline:e})};fe.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Be.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=b.toDer(fe.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=b.toDer(fe.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};fe.certificationRequestFromPem=function(t,e,r){var n=Be.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=b.fromDer(n.body,r);return fe.certificationRequestFromAsn1(o,e)};fe.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:b.toDer(fe.certificationRequestToAsn1(t)).getBytes()};return Be.pem.encode(r,{maxline:e})};fe.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Ku(t.issuer,e)},t.issuer.addField=function(e){hs([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Ku(t.subject,e)},t.subject.addField=function(e){hs([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){hs(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){hs(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)_te(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||Be.md.sha1.create();var n=Rt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=fe.getTBSCertificate(t);var o=b.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=bI({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||fe.getTBSCertificate(e),l=b.toDer(a);s.update(l.getBytes())}return s!==null&&(r=yte({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,s,a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return fe.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Rt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Be.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};fe.certificateFromAsn1=function(t,e){var r={},n=[];if(!b.validate(t,vOe,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=b.derToOid(r.publicKeyOid);if(o!==fe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=fe.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=Be.util.createBuffer(r.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=Be.asn1.derToOid(r.certSignatureOid),s.signatureParameters=xI(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Be.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=xI(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(b.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(b.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(b.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(b.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=l[0],s.validity.notAfter=l[1],s.tbsCertificate=r.tbsCertificate,e){s.md=bI({signatureOid:s.signatureOid,type:"certificate"});var c=b.toDer(s.tbsCertificate);s.md.update(c.getBytes())}var u=Be.md.sha1.create(),d=b.toDer(r.certIssuer);u.update(d.getBytes()),s.issuer.getField=function(m){return Ku(s.issuer,m)},s.issuer.addField=function(m){hs([m]),s.issuer.attributes.push(m)},s.issuer.attributes=fe.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=u.digest().toHex();var p=Be.md.sha1.create(),f=b.toDer(r.certSubject);return p.update(f.getBytes()),s.subject.getField=function(m){return Ku(s.subject,m)},s.subject.addField=function(m){hs([m]),s.subject.attributes.push(m)},s.subject.attributes=fe.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=p.digest().toHex(),r.certExtensions?s.extensions=fe.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=fe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};fe.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(fe.certificateExtensionFromAsn1(n.value[i]));return e};fe.certificateExtensionFromAsn1=function(t){var e={};if(e.id=b.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===b.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Rt){if(e.name=Rt[e.id],e.name==="keyUsage"){var r=b.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=b.fromDer(e.value);r.value.length>0&&r.value[0].type===b.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===b.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=b.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=b.fromDer(e.value),s=0;s<r.value.length;++s){var a=b.derToOid(r.value[s].value);a in Rt?e[Rt[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=b.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=b.fromDer(e.value),c=0;c<r.value.length;++c){l=r.value[c];var u={type:l.type,value:l.value};switch(e.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=Be.util.bytesToIP(l.value);break;case 8:u.oid=b.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=b.fromDer(e.value);e.subjectKeyIdentifier=Be.util.bytesToHex(r.value)}}return e};fe.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!b.validate(t,xOe,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=b.derToOid(r.publicKeyOid);if(o!==fe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=fe.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Be.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=xI(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Be.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=xI(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=bI({signatureOid:s.signatureOid,type:"certification request"});var a=b.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var l=Be.md.sha1.create();return s.subject.getField=function(c){return Ku(s.subject,c)},s.subject.addField=function(c){hs([c]),s.subject.attributes.push(c)},s.subject.attributes=fe.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),s.subject.hash=l.digest().toHex(),s.publicKey=fe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(c){return Ku(s,c)},s.addAttribute=function(c){hs([c]),s.attributes.push(c)},s.attributes=fe.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};fe.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Ku(t.subject,e)},t.subject.addField=function(e){hs([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Ku(t,e)},t.addAttribute=function(e){hs([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){hs(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){hs(e),t.attributes=e},t.sign=function(e,r){t.md=r||Be.md.sha1.create();var n=Rt[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=fe.getCertificationRequestInfo(t);var o=b.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=bI({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||fe.getCertificationRequestInfo(t),i=b.toDer(n);r.update(i.getBytes())}return r!==null&&(e=yte({certificate:t,md:r,signature:t.signature})),e},t};function Ig(t){for(var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var s=r.value,a=b.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===b.Type.UTF8&&(s=Be.util.encodeUtf8(s))),n=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(r.type).getBytes()),b.create(b.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function hs(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in fe.oids?e.name=fe.oids[e.type]:e.shortName&&e.shortName in Br&&(e.name=fe.oids[Br[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in fe.oids)e.type=fe.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Br&&(e.shortName=Br[e.name]),e.type===Rt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=b.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(fe.certificateExtensionToAsn1(_te(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function _te(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in fe.oids&&(t.name=fe.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in fe.oids)t.id=fe.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),t.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var l in t)t[l]===!0&&(l in Rt?a.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Rt[l]).getBytes())):l.indexOf(".")!==-1&&a.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var c,u=0;u<t.altNames.length;++u){c=t.altNames[u];var s=c.value;if(c.type===7&&c.ip){if(s=Be.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else c.type===8&&(c.oid?s=b.oidToDer(b.oidToDer(c.oid)):s=b.oidToDer(s));t.value.value.push(b.create(b.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=b.create(b.Class.UNIVERSAL,b.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var p=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var f=[b.create(b.Class.CONTEXT_SPECIFIC,4,!0,[Ig(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,f))}if(t.serialNumber){var m=Be.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);for(var a=t.value.value,h=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),g=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]),c,u=0;u<t.altNames.length;++u){c=t.altNames[u];var s=c.value;if(c.type===7&&c.ip){if(s=Be.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else c.type===8&&(c.oid?s=b.oidToDer(b.oidToDer(c.oid)):s=b.oidToDer(s));g.value.push(b.create(b.Class.CONTEXT_SPECIFIC,c.type,!1,s))}h.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[g])),a.push(h)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function j2(t,e){switch(t){case Rt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.mgf.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.mgf.hash.algorithmOid).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.saltLength).getBytes())])),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,r);default:return b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")}}function bOe(t){var e=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,s=b.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===b.Type.UTF8&&(o=Be.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var l=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(i.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[b.create(b.Class.UNIVERSAL,s,a,o)])]);e.value.push(l)}return e}var EOe=new Date("1950-01-01T00:00:00Z"),COe=new Date("2050-01-01T00:00:00Z");function gte(t){return t>=EOe&&t<COe?b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(t)):b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(t))}fe.getTBSCertificate=function(t){var e=gte(t.validity.notBefore),r=gte(t.validity.notAfter),n=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.version).getBytes())]),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,Be.util.hexToBytes(t.serialNumber)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.siginfo.algorithmOid).getBytes()),j2(t.siginfo.algorithmOid,t.siginfo.parameters)]),Ig(t.issuer),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,r]),Ig(t.subject),fe.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(b.create(b.Class.CONTEXT_SPECIFIC,2,!0,[b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(fe.certificateExtensionsToAsn1(t.extensions)),n};fe.getCertificationRequestInfo=function(t){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(t.version).getBytes()),Ig(t.subject),fe.publicKeyToAsn1(t.publicKey),bOe(t)]);return e};fe.distinguishedNameToAsn1=function(t){return Ig(t)};fe.certificateToAsn1=function(t){var e=t.tbsCertificate||fe.getTBSCertificate(t);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.signatureOid).getBytes()),j2(t.signatureOid,t.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};fe.certificateExtensionsToAsn1=function(t){var e=b.create(b.Class.CONTEXT_SPECIFIC,3,!0,[]),r=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(fe.certificateExtensionToAsn1(t[n]));return e};fe.certificateExtensionToAsn1=function(t){var e=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);e.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.id).getBytes())),t.critical&&e.value.push(b.create(b.Class.UNIVERSAL,b.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=b.toDer(r).getBytes()),e.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,r)),e};fe.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||fe.getCertificationRequestInfo(t);return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[e,b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(t.signatureOid).getBytes()),j2(t.signatureOid,t.signatureParameters)]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};fe.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var a=r(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=Be.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];Be.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=Be.pki.certificateFromPem(s));var a=r(s.subject);if(!a)return!1;Be.util.isArray(a)||(a=[a]);for(var l=b.toDer(fe.certificateToAsn1(s)).getBytes(),c=0;c<a.length;++c){var u=b.toDer(fe.certificateToAsn1(a[c])).getBytes();if(l===u)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var l=e.certs[a];if(!Be.util.isArray(l))s.push(l);else for(var c=0;c<l.length;++c)s.push(l[c])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=Be.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var l=r(s.subject);if(!Be.util.isArray(l))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var c=b.toDer(fe.certificateToAsn1(s)).getBytes(),u=0;u<l.length;++u){var d=b.toDer(fe.certificateToAsn1(l[u])).getBytes();c===d&&(a=l[u],l.splice(u,1))}return l.length===0&&delete e.certs[s.subject.hash],a};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=Be.md.sha1.create();s.attributes=fe.RDNAttributesAsArray(Ig(s),a),s.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};fe.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};fe.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var l=e.shift(),c=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:fe.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),s===null){if(c=e[0]||t.getIssuer(l),c===null&&l.isIssuer(l)&&(u=!0,c=l),c){var d=c;Be.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){c=d.shift();try{p=c.verify(l)}catch{}}p||(s={message:"Certificate signature is invalid.",error:fe.certificateError.bad_certificate})}s===null&&(!c||u)&&!t.hasCertificate(l)&&(s={message:"Certificate is not trusted.",error:fe.certificateError.unknown_ca})}if(s===null&&c&&!l.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:fe.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<l.extensions.length;++m){var h=l.extensions[m];h.critical&&!(h.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:fe.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!c||u))){var g=l.getExtension("basicConstraints"),v=l.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||g===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:fe.certificateError.bad_certificate}),s===null&&g!==null&&!g.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:fe.certificateError.bad_certificate}),s===null&&v!==null&&"pathLenConstraint"in g){var y=a-1;y>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:fe.certificateError.bad_certificate})}}var _=s===null?!0:s.error,T=r.verify?r.verify(_,a,n):_;if(T===!0)s=null;else throw _===!0&&(s={message:"The application rejected the certificate.",error:fe.certificateError.bad_certificate}),(T||T===0)&&(typeof T=="object"&&!Be.util.isArray(T)?(T.message&&(s.message=T.message),T.error&&(s.error=T.error)):typeof T=="string"&&(s.error=T)),s;o=!1,++a}while(e.length>0);return!0}});var G2=x((eot,Ete)=>{var or=lt();Gs();_g();$u();q2();U2();ds();g0();Cg();Lt();EI();var D=or.asn1,gt=or.pki,y0=Ete.exports=or.pkcs12=or.pkcs12||{},bte={name:"ContentInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},SOe={name:"PFX",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"version"},bte,{name:"PFX.macData",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},TOe={name:"SafeBag",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},IOe={name:"Attribute",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0,capture:"values"}]},wOe={name:"CertBag",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:D.Class.UNIVERSAL,type:D.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function v0(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];if(!(n!==void 0&&a.type!==n)){if(e===null){i.push(a);continue}a.attributes[e]!==void 0&&a.attributes[e].indexOf(r)>=0&&i.push(a)}}return i}y0.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!D.validate(t,SOe,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v={},y;return"localKeyId"in g?y=g.localKeyId:"localKeyIdHex"in g&&(y=or.util.hexToBytes(g.localKeyIdHex)),y===void 0&&!("friendlyName"in g)&&"bagType"in g&&(v[g.bagType]=v0(s.safeContents,null,null,g.bagType)),y!==void 0&&(v.localKeyId=v0(s.safeContents,"localKeyId",y,g.bagType)),"friendlyName"in g&&(v.friendlyName=v0(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),v},getBagsByFriendlyName:function(g,v){return v0(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return v0(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(D.derToOid(n.contentType)!==gt.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=D.derToOid(n.contentType),o}var a=n.content.value[0];if(a.tagClass!==D.Class.UNIVERSAL||a.type!==D.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=V2(a),n.mac){var l=null,c=0,u=D.derToOid(n.macAlgorithm);switch(u){case gt.oids.sha1:l=or.md.sha1.create(),c=20;break;case gt.oids.sha256:l=or.md.sha256.create(),c=32;break;case gt.oids.sha384:l=or.md.sha384.create(),c=48;break;case gt.oids.sha512:l=or.md.sha512.create(),c=64;break;case gt.oids.md5:l=or.md.md5.create(),c=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var d=new or.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(or.util.bytesToHex(n.macIterations),16):1,f=y0.generateKey(r,d,3,p,c,l),m=or.hmac.create();m.start(l,f),m.update(a.value);var h=m.getMac();if(h.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return AOe(s,a.value,e,r),s};function V2(t){if(t.composed||t.constructed){for(var e=or.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function AOe(t,e,r,n){if(e=D.fromDer(e,r),e.tagClass!==D.Class.UNIVERSAL||e.type!==D.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],s={},a=[];if(!D.validate(o,bte,s,a)){var l=new Error("Cannot read ContentInfo.");throw l.errors=a,l}var c={encrypted:!1},u=null,d=s.content.value[0];switch(D.derToOid(s.contentType)){case gt.oids.data:if(d.tagClass!==D.Class.UNIVERSAL||d.type!==D.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=V2(d).value;break;case gt.oids.encryptedData:u=ROe(d,n),c.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=D.derToOid(s.contentType),l}c.safeBags=POe(u,r,n),t.safeContents.push(c)}}function ROe(t,e){var r={},n=[];if(!D.validate(t,or.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=D.derToOid(r.contentType);if(o!==gt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=D.derToOid(r.encAlgorithm);var s=gt.pbe.getCipher(o,r.encParameter,e),a=V2(r.encryptedContentAsn1),l=or.util.createBuffer(a.value);if(s.update(l),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function POe(t,e,r){if(!e&&t.length===0)return[];if(t=D.fromDer(t,e),t.tagClass!==D.Class.UNIVERSAL||t.type!==D.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],s={},a=[];if(!D.validate(o,TOe,s,a)){var l=new Error("Cannot read SafeBag.");throw l.errors=a,l}var c={type:D.derToOid(s.bagId),attributes:kOe(s.bagAttributes)};n.push(c);var u,d,p=s.bagValue.value[0];switch(c.type){case gt.oids.pkcs8ShroudedKeyBag:if(p=gt.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case gt.oids.keyBag:try{c.key=gt.privateKeyFromAsn1(p)}catch{c.key=null,c.asn1=p}continue;case gt.oids.certBag:u=wOe,d=function(){if(D.derToOid(s.certId)!==gt.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=D.derToOid(s.certId),m}var h=D.fromDer(s.cert,e);try{c.cert=gt.certificateFromAsn1(h,!0)}catch{c.cert=null,c.asn1=h}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=c.type,l}if(u!==void 0&&!D.validate(p,u,s,a)){var l=new Error("Cannot read PKCS#12 "+u.name);throw l.errors=a,l}d()}return n}function kOe(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!D.validate(t[r],IOe,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var s=D.derToOid(n.oid);if(gt.oids[s]!==void 0){e[gt.oids[s]]=[];for(var a=0;a<n.values.length;++a)e[gt.oids[s]].push(n.values[a].value)}}return e}y0.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=or.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=or.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=gt.certificateFromPem(s));var a=or.md.sha1.create();a.update(D.toDer(gt.certificateToAsn1(s)).getBytes()),i=a.digest().getBytes()}else i=or.random.getBytes(20);var l=[];i!==null&&l.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.localKeyId).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.friendlyName).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,l));var c=[],u=[];e!==null&&(or.util.isArray(e)?u=e:u=[e]);for(var d=[],p=0;p<u.length;++p){e=u[p],typeof e=="string"&&(e=gt.certificateFromPem(e));var f=p===0?o:void 0,m=gt.certificateToAsn1(e),h=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.certBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.x509Certificate).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(m).getBytes())])])]),f]);d.push(h)}if(d.length>0){var g=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,d),v=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(g).getBytes())])]);c.push(v)}var y=null;if(t!==null){var _=gt.wrapRsaPrivateKey(gt.privateKeyToAsn1(t));r===null?y=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.keyBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):y=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.pkcs8ShroudedKeyBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[gt.encryptPrivateKeyInfo(_,r,n)]),o]);var T=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[y]),I=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(T).getBytes())])]);c.push(I)}var R=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,c),w;if(n.useMac){var a=or.md.sha1.create(),O=new or.util.ByteBuffer(or.random.getBytes(n.saltSize)),V=n.count,t=y0.generateKey(r,O,3,V,20),L=or.hmac.create();L.start(a,t),L.update(D.toDer(R).getBytes());var A=L.getMac();w=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.sha1).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,A.getBytes())]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,O.getBytes()),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(V).getBytes())])}return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(3).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(gt.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(R).getBytes())])]),w])};y0.generateKey=or.pbe.generatePkcs12Key});var z2=x((tot,Cte)=>{var Yu=lt();Gs();$u();U2();tf();pI();G2();_I();g0();Lt();EI();var $2=Yu.asn1,wg=Cte.exports=Yu.pki=Yu.pki||{};wg.pemToDer=function(t){var e=Yu.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Yu.util.createBuffer(e.body)};wg.privateKeyFromPem=function(t){var e=Yu.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=$2.fromDer(e.body);return wg.privateKeyFromAsn1(n)};wg.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:$2.toDer(wg.privateKeyToAsn1(t)).getBytes()};return Yu.pem.encode(r,{maxline:e})};wg.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:$2.toDer(t).getBytes()};return Yu.pem.encode(r,{maxline:e})}});var J2=x((rot,kte)=>{var re=lt();Gs();_g();cI();tf();z2();ds();Cg();Lt();var II=function(t,e,r,n){var i=re.util.createBuffer(),o=t.length>>1,s=o+(t.length&1),a=t.substr(0,s),l=t.substr(o,s),c=re.util.createBuffer(),u=re.hmac.create();r=e+r;var d=Math.ceil(n/16),p=Math.ceil(n/20);u.start("MD5",a);var f=re.util.createBuffer();c.putBytes(r);for(var m=0;m<d;++m)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),f.putBuffer(u.digest());u.start("SHA1",l);var h=re.util.createBuffer();c.clear(),c.putBytes(r);for(var m=0;m<p;++m)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),h.putBuffer(u.digest());return i.putBytes(re.util.xorBytes(f.getBytes(),h.getBytes(),n)),i},NOe=function(t,e,r){var n=re.hmac.create();n.start("SHA1",t);var i=re.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},OOe=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=re.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},DOe=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=re.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},To=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return re.util.createBuffer(t.getBytes(r))},gs=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},S={};S.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};S.SupportedVersions=[S.Versions.TLS_1_1,S.Versions.TLS_1_0];S.Version=S.SupportedVersions[0];S.MaxFragment=16384-1024;S.ConnectionEnd={server:0,client:1};S.PRFAlgorithm={tls_prf_sha256:0};S.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};S.CipherType={stream:0,block:1,aead:2};S.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};S.CompressionMethod={none:0,deflate:1};S.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};S.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};S.Alert={};S.Alert.Level={warning:1,fatal:2};S.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};S.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};S.CipherSuites={};S.getCipherSuite=function(t){var e=null;for(var r in S.CipherSuites){var n=S.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};S.handleUnexpected=function(t,e){var r=!t.open&&t.entity===S.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unexpected_message}})};S.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(S.queue(t,S.createAlert(t,{level:S.Alert.Level.warning,description:S.Alert.Description.no_renegotiation})),S.flush(t)),t.process()};S.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===S.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});else{var o=e.fragment,s=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:re.util.createBuffer(o.getBytes(32)),session_id:To(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=To(o,2),n.compression_methods=To(o,1)),s=r-(s-o.length()),s>0){for(var a=To(o,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:To(a,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var c=n.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var u=To(c.data,2);u.length()>0;){var d=u.getByte();if(d!==0)break;t.session.extensions.server_name.serverNameList.push(To(u,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=S.getCipherSuite(n.cipher_suite);else for(var p=re.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(t.session.cipherSuite=S.getCipherSuite(p.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.handshake_failure},cipherSuite:re.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=S.CompressionMethod.none}return n};S.createSecurityParameters=function(t,e){var r=t.entity===S.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:S.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:S.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};S.handleServerHello=function(t,e,r){var n=S.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=Ite,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=MOe,t.session.resuming=!1,S.createSecurityParameters(t,n)),t.session.id=i,t.process()}};S.handleClientHello=function(t,e,r){var n=S.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=re.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var s,a=1;a<S.SupportedVersions.length&&(s=S.SupportedVersions[a],!(s.minor<=n.version.minor));++a);t.version={major:s.major,minor:s.minor},t.session.version=t.version}o!==null?(t.expect=Q2,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?VOe:Y2,t.session.resuming=!1,S.createSecurityParameters(t,n)),t.open=!0,S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createServerHello(t)})),t.session.resuming?(S.queue(t,S.createRecord(t,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),t.state.pending=S.createConnectionState(t),t.state.current.write=t.state.pending.write,S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createFinished(t)}))):(S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createCertificate(t)})),t.fail||(S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createServerKeyExchange(t)})),t.verifyClient!==!1&&S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createCertificateRequest(t)})),S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createServerHelloDone(t)})))),S.flush(t),t.process()}};S.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:To(n,3)},o,s,a=[];try{for(;i.certificate_list.length()>0;)o=To(i.certificate_list,3),s=re.asn1.fromDer(o),o=re.pki.certificateFromAsn1(s,!0),a.push(o)}catch(c){return t.error(t,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate}})}var l=t.entity===S.ConnectionEnd.client;(l||t.verifyClient===!0)&&a.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}}):a.length===0?t.expect=l?Ste:Y2:(l?t.session.serverCertificate=a[0]:t.session.clientCertificate=a[0],S.verifyCertificateChain(t,a)&&(t.expect=l?Ste:Y2)),t.process()};S.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unsupported_certificate}});t.expect=FOe,t.process()};S.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:To(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=re.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==s.pre_master_secret.charCodeAt(0)||a.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=re.random.getBytes(48)}t.expect=Q2,t.session.clientCertificate!==null&&(t.expect=GOe),t.process()};S.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:To(n,1),certificate_authorities:To(n,2)};t.session.certificateRequest=i,t.expect=BOe,t.process()};S.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:To(n,2).getBytes()},s=re.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var a=t.session.clientCertificate;if(!a.publicKey.verify(s,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.handshake_failure}})}t.expect=Q2,t.process()};S.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!re.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=S.createRecord(t,{type:S.ContentType.handshake,data:S.createCertificate(t)}),S.queue(t,e)),e=S.createRecord(t,{type:S.ContentType.handshake,data:S.createClientKeyExchange(t)}),S.queue(t,e),t.expect=HOe;var s=function(a,l){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&S.queue(a,S.createRecord(a,{type:S.ContentType.handshake,data:S.createCertificateVerify(a,l)})),S.queue(a,S.createRecord(a,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),a.state.pending=S.createConnectionState(a),a.state.current.write=a.state.pending.write,S.queue(a,S.createRecord(a,{type:S.ContentType.handshake,data:S.createFinished(a)})),a.expect=Ite,S.flush(a),a.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);S.getClientSignature(t,s)};S.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var r=t.entity===S.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=S.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?UOe:$Oe,t.process()};S.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=re.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===S.ConnectionEnd.client,a=s?"server finished":"client finished",l=t.session.sp,c=12,u=II;if(n=u(l.master_secret,a,n.getBytes(),c),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(S.queue(t,S.createRecord(t,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createFinished(t)}))),t.expect=s?qOe:zOe,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,S.flush(t),t.isConnected=!0,t.connected(t),t.process()};S.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case S.Alert.Description.close_notify:i="Connection closed.";break;case S.Alert.Description.unexpected_message:i="Unexpected message.";break;case S.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case S.Alert.Description.decryption_failed:i="Decryption failed.";break;case S.Alert.Description.record_overflow:i="Record overflow.";break;case S.Alert.Description.decompression_failure:i="Decompression failed.";break;case S.Alert.Description.handshake_failure:i="Handshake failure.";break;case S.Alert.Description.bad_certificate:i="Bad certificate.";break;case S.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case S.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case S.Alert.Description.certificate_expired:i="Certificate expired.";break;case S.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case S.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case S.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case S.Alert.Description.access_denied:i="Access denied.";break;case S.Alert.Description.decode_error:i="Decode error.";break;case S.Alert.Description.decrypt_error:i="Decrypt error.";break;case S.Alert.Description.export_restriction:i="Export restriction.";break;case S.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case S.Alert.Description.insufficient_security:i="Insufficient security.";break;case S.Alert.Description.internal_error:i="Internal error.";break;case S.Alert.Description.user_canceled:i="User canceled.";break;case S.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===S.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===S.ConnectionEnd.client?"server":"client",alert:n}),t.process()};S.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=re.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in TI[t.entity][t.expect]?(t.entity===S.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:re.md.md5.create(),sha1:re.md.sha1.create()}),n!==S.HandshakeType.hello_request&&n!==S.HandshakeType.certificate_verify&&n!==S.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),TI[t.entity][t.expect][n](t,e,i)):S.handleUnexpected(t,e)};S.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};S.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===S.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();S.queue(t,S.createRecord(t,{type:S.ContentType.heartbeat,data:S.createHeartbeat(S.HeartbeatMessageType.heartbeat_response,o)})),S.flush(t)}else if(n===S.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,re.util.createBuffer(o))}t.process()};var LOe=0,MOe=1,Ste=2,FOe=3,BOe=4,Ite=5,UOe=6,qOe=7,HOe=8,jOe=0,VOe=1,Y2=2,GOe=3,Q2=4,$Oe=5,zOe=6,E=S.handleUnexpected,wte=S.handleChangeCipherSpec,$n=S.handleAlert,Ri=S.handleHandshake,Ate=S.handleApplicationData,zn=S.handleHeartbeat,X2=[];X2[S.ConnectionEnd.client]=[[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[wte,$n,E,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,Ate,zn],[E,$n,Ri,E,zn]];X2[S.ConnectionEnd.server]=[[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,E,zn],[wte,$n,E,E,zn],[E,$n,Ri,E,zn],[E,$n,Ri,Ate,zn],[E,$n,Ri,E,zn]];var Qu=S.handleHelloRequest,WOe=S.handleServerHello,Rte=S.handleCertificate,Tte=S.handleServerKeyExchange,W2=S.handleCertificateRequest,CI=S.handleServerHelloDone,Pte=S.handleFinished,TI=[];TI[S.ConnectionEnd.client]=[[E,E,WOe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,Rte,Tte,W2,CI,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,E,Tte,W2,CI,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,E,E,W2,CI,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,E,E,E,CI,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,Pte],[Qu,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[Qu,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];var KOe=S.handleClientHello,YOe=S.handleClientKeyExchange,QOe=S.handleCertificateVerify;TI[S.ConnectionEnd.server]=[[E,KOe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,Rte,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,YOe,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,QOe,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,Pte],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];S.generateKeys=function(t,e){var r=II,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===S.Versions.TLS_1_0.major&&t.version.minor===S.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),a={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return o&&(a.client_write_IV=s.getBytes(e.fixed_iv_length),a.server_write_IV=s.getBytes(e.fixed_iv_length)),a};S.createConnectionState=function(t){var e=t.entity===S.ConnectionEnd.client,r=function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]}};return o},n={read:r(),write:r()};if(n.read.update=function(o,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(o,s,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,s){return n.write.compressFunction(o,s,n.write)?n.write.cipherFunction(s,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=S.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case S.CompressionMethod.none:break;case S.CompressionMethod.deflate:n.read.compressFunction=DOe,n.write.compressFunction=OOe;break;default:throw new Error("Unsupported compression algorithm.")}}return n};S.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=re.util.createBuffer();return r.putInt32(e),r.putBytes(re.random.getBytes(28)),r};S.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};S.createAlert=function(t,e){var r=re.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),S.createRecord(t,{type:S.ContentType.alert,data:r})};S.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=re.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=re.util.createBuffer();o.putByte(S.CompressionMethod.none);var s=o.length(),a=re.util.createBuffer();if(t.virtualHost){var l=re.util.createBuffer();l.putByte(0),l.putByte(0);var c=re.util.createBuffer();c.putByte(0),gs(c,2,re.util.createBuffer(t.virtualHost));var u=re.util.createBuffer();gs(u,2,c),gs(l,2,u),a.putBuffer(l)}var d=a.length();d>0&&(d+=2);var p=t.session.id,f=p.length+1+2+4+28+2+i+1+s+d,m=re.util.createBuffer();return m.putByte(S.HandshakeType.client_hello),m.putInt24(f),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),gs(m,1,re.util.createBuffer(p)),gs(m,2,e),gs(m,1,o),d>0&&gs(m,2,a),m};S.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=re.util.createBuffer();return n.putByte(S.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),gs(n,1,re.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};S.createCertificate=function(t){var e=t.entity===S.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=re.util.createBuffer();if(r!==null)try{re.util.isArray(r)||(r=[r]);for(var o=null,s=0;s<r.length;++s){var a=re.pem.decode(r[s])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=a.type,l}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=re.util.createBuffer(a.body);o===null&&(o=re.asn1.fromDer(c.bytes(),!1));var u=re.util.createBuffer();gs(u,3,c),i.putBuffer(u)}r=re.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(f){return t.error(t,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate}})}var d=3+i.length(),p=re.util.createBuffer();return p.putByte(S.HandshakeType.certificate),p.putInt24(d),gs(p,3,i),p};S.createClientKeyExchange=function(t){var e=re.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(re.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=re.util.createBuffer();return o.putByte(S.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};S.createServerKeyExchange=function(t){var e=0,r=re.util.createBuffer();return e>0&&(r.putByte(S.HandshakeType.server_key_exchange),r.putInt24(e)),r};S.getClientSignature=function(t,e){var r=re.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=re.pki.privateKeyFromPem(s)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}):i=s.sign(i,null),o(n,i)},t.getSignature(t,r,e)};S.createCertificateVerify=function(t,e){var r=e.length+2,n=re.util.createBuffer();return n.putByte(S.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};S.createCertificateRequest=function(t){var e=re.util.createBuffer();e.putByte(1);var r=re.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=re.pki.distinguishedNameToAsn1(i.subject),s=re.asn1.toDer(o);r.putInt16(s.length()),r.putBuffer(s)}var a=1+e.length()+2+r.length(),l=re.util.createBuffer();return l.putByte(S.HandshakeType.certificate_request),l.putInt24(a),gs(l,1,e),gs(l,2,r),l};S.createServerHelloDone=function(t){var e=re.util.createBuffer();return e.putByte(S.HandshakeType.server_hello_done),e.putInt24(0),e};S.createChangeCipherSpec=function(){var t=re.util.createBuffer();return t.putByte(1),t};S.createFinished=function(t){var e=re.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===S.ConnectionEnd.client,n=t.session.sp,i=12,o=II,s=r?"client finished":"server finished";e=o(n.master_secret,s,e.getBytes(),i);var a=re.util.createBuffer();return a.putByte(S.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a};S.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=re.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(re.random.getBytes(o)),n};S.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===S.ContentType.handshake||e.type===S.ContentType.alert||e.type===S.ContentType.change_cipher_spec))){if(e.type===S.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=S.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>S.MaxFragment;)n.push(S.createRecord(t,{type:e.type,data:re.util.createBuffer(i.slice(0,S.MaxFragment))})),i=i.slice(S.MaxFragment);i.length>0&&n.push(S.createRecord(t,{type:e.type,data:re.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var s=n[o],a=t.state.current.write;a.update(t,s)&&t.records.push(s)}}};S.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var K2=function(t){switch(t){case!0:return!0;case re.pki.certificateError.bad_certificate:return S.Alert.Description.bad_certificate;case re.pki.certificateError.unsupported_certificate:return S.Alert.Description.unsupported_certificate;case re.pki.certificateError.certificate_revoked:return S.Alert.Description.certificate_revoked;case re.pki.certificateError.certificate_expired:return S.Alert.Description.certificate_expired;case re.pki.certificateError.certificate_unknown:return S.Alert.Description.certificate_unknown;case re.pki.certificateError.unknown_ca:return S.Alert.Description.unknown_ca;default:return S.Alert.Description.bad_certificate}},XOe=function(t){switch(t){case!0:return!0;case S.Alert.Description.bad_certificate:return re.pki.certificateError.bad_certificate;case S.Alert.Description.unsupported_certificate:return re.pki.certificateError.unsupported_certificate;case S.Alert.Description.certificate_revoked:return re.pki.certificateError.certificate_revoked;case S.Alert.Description.certificate_expired:return re.pki.certificateError.certificate_expired;case S.Alert.Description.certificate_unknown:return re.pki.certificateError.certificate_unknown;case S.Alert.Description.unknown_ca:return re.pki.certificateError.unknown_ca;default:return re.pki.certificateError.bad_certificate}};S.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,s,a){var l=K2(o),c=t.verify(t,o,s,a);if(c!==!0){if(typeof c=="object"&&!re.util.isArray(c)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate},c.message&&(u.message=c.message),c.alert&&(u.alert.description=c.alert),u}c!==o&&(c=XOe(c))}return c},re.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||re.util.isArray(i))&&(i={send:!0,alert:{level:S.Alert.Level.fatal,description:K2(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:S.Alert.Level.fatal,description:K2(i.error)}),t.error(t,i)}return!t.fail};S.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,s=null;if(i?s=re.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){o=r.cache[s],delete r.cache[s];for(var a in r.order)if(r.order[a]===s){r.order.splice(a,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=re.util.bytesToHex(i);r.order.push(s),r.cache[s]=o}}return r};S.createConnection=function(t){var e=null;t.caStore?re.util.isArray(t.caStore)?e=re.pki.createCaStore(t.caStore):e=t.caStore:e=re.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in S.CipherSuites)r.push(S.CipherSuites[n])}var i=t.server?S.ConnectionEnd.server:S.ConnectionEnd.client,o=t.sessionCache?S.createSessionCache(t.sessionCache):null,s={version:{major:S.Version.major,minor:S.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(u,d,p,f){return d},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:re.util.createBuffer(),tlsData:re.util.createBuffer(),data:re.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(u,d){d.origin=d.origin||(u.entity===S.ConnectionEnd.client?"client":"server"),d.send&&(S.queue(u,S.createAlert(u,d.alert)),S.flush(u));var p=d.fatal!==!1;p&&(u.fail=!0),t.error(u,d),p&&u.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(u){s.version={major:S.Version.major,minor:S.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===S.ConnectionEnd.client?LOe:jOe,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(u||typeof u>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=S.createConnectionState(s)},s.reset();var a=function(u,d){var p=d.type-S.ContentType.change_cipher_spec,f=X2[u.entity][u.expect];p in f?f[p](u,d):S.handleUnexpected(u,d)},l=function(u){var d=0,p=u.input,f=p.length();if(f<5)d=5-f;else{u.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:re.util.createBuffer(),ready:!1};var m=u.record.version.major===u.version.major;m&&u.session&&u.session.version&&(m=u.record.version.minor===u.version.minor),m||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}})}return d},c=function(u){var d=0,p=u.input,f=p.length();if(f<u.record.length)d=u.record.length-f;else{u.record.fragment.putBytes(p.getBytes(u.record.length)),p.compact();var m=u.state.current.read;m.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unexpected_message}})),u.record.ready=!0)}return d};return s.handshake=function(u){if(s.entity!==S.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,u=u||"";var d=null;u.length>0&&(s.sessionCache&&(d=s.sessionCache.getSession(u)),d===null&&(u="")),u.length===0&&s.sessionCache&&(d=s.sessionCache.getSession(),d!==null&&(u=d.id)),s.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:re.md.md5.create(),sha1:re.md.sha1.create()},d&&(s.version=d.version,s.session.sp=d.sp),s.session.sp.client_random=S.createRandom().getBytes(),s.open=!0,S.queue(s,S.createRecord(s,{type:S.ContentType.handshake,data:S.createClientHello(s)})),S.flush(s)}},s.process=function(u){var d=0;return u&&s.input.putBytes(u),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(d=l(s)),!s.fail&&s.record!==null&&!s.record.ready&&(d=c(s)),!s.fail&&s.record!==null&&s.record.ready&&a(s,s.record)),d},s.prepare=function(u){return S.queue(s,S.createRecord(s,{type:S.ContentType.application_data,data:re.util.createBuffer(u)})),S.flush(s)},s.prepareHeartbeatRequest=function(u,d){return u instanceof re.util.ByteBuffer&&(u=u.bytes()),typeof d>"u"&&(d=u.length),s.expectedHeartbeatPayload=u,S.queue(s,S.createRecord(s,{type:S.ContentType.heartbeat,data:S.createHeartbeat(S.HeartbeatMessageType.heartbeat_request,u,d)})),S.flush(s)},s.close=function(u){if(!s.fail&&s.sessionCache&&s.session){var d={id:s.session.id,version:s.session.version,sp:s.session.sp};d.sp.keys=null,s.sessionCache.setSession(d.id,d)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,S.queue(s,S.createAlert(s,{level:S.Alert.Level.warning,description:S.Alert.Description.close_notify})),S.flush(s)),s.closed(s)),s.reset(u)},s};kte.exports=re.tls=re.tls||{};for(SI in S)typeof S[SI]!="function"&&(re.tls[SI]=S[SI]);var SI;re.tls.prf_tls1=II;re.tls.hmac_sha1=NOe;re.tls.createSessionCache=S.createSessionCache;re.tls.createConnection=S.createConnection});var Dte=x((not,Ote)=>{var Xu=lt();Gu();J2();var vs=Ote.exports=Xu.tls;vs.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=vs.BulkCipherAlgorithm.aes,t.cipher_type=vs.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=vs.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:Nte};vs.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=vs.BulkCipherAlgorithm.aes,t.cipher_type=vs.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=vs.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:Nte};function Nte(t,e,r){var n=e.entity===Xu.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:Xu.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:Xu.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=tDe,t.write.cipherFunction=JOe,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=vs.hmac_sha1}function JOe(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===vs.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=Xu.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=vs.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(ZOe)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}function ZOe(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function eDe(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function tDe(t,e){var r=!1,n;t.version.minor===vs.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(eDe);var o=e.macLength,s=Xu.random.getBytesSync(o),a=i.output.length();a>=o?(t.fragment=i.output.getBytes(a-o),s=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=Xu.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=rDe(e.macKey,s,l)&&r,r}function rDe(t,e,r){var n=Xu.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var tF=x((iot,Bte)=>{var hr=lt();$a();Lt();var _0=Bte.exports=hr.sha512=hr.sha512||{};hr.md.sha512=hr.md.algorithms.sha512=_0;var Mte=hr.sha384=hr.sha512.sha384=hr.sha512.sha384||{};Mte.create=function(){return _0.create("SHA-384")};hr.md.sha384=hr.md.algorithms.sha384=Mte;hr.sha512.sha256=hr.sha512.sha256||{create:function(){return _0.create("SHA-512/256")}};hr.md["sha512/256"]=hr.md.algorithms["sha512/256"]=hr.sha512.sha256;hr.sha512.sha224=hr.sha512.sha224||{create:function(){return _0.create("SHA-512/224")}};hr.md["sha512/224"]=hr.md.algorithms["sha512/224"]=hr.sha512.sha224;_0.create=function(t){if(Fte||nDe(),typeof t>"u"&&(t="SHA-512"),!(t in cf))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=cf[t],r=null,n=hr.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var l=a.messageLengthSize/4,c=0;c<l;++c)a.fullMessageLength.push(0);n=hr.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return a},a.start(),a.update=function(l,c){c==="utf8"&&(l=hr.util.encodeUtf8(l));var u=l.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=u[1],u[1]=u[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(l),Lte(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var l=hr.util.createBuffer();l.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=c&a.blockLength-1;l.putBytes(Z2.substr(0,a.blockLength-u));for(var d,p,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)d=a.fullMessageLength[m+1]*8,p=d/4294967296>>>0,f+=p,l.putInt32(f>>>0),f=d>>>0;l.putInt32(f);for(var h=new Array(r.length),m=0;m<r.length;++m)h[m]=r[m].slice(0);Lte(h,i,l);var g=hr.util.createBuffer(),v;t==="SHA-512"?v=h.length:t==="SHA-384"?v=h.length-2:v=h.length-4;for(var m=0;m<v;++m)g.putInt32(h[m][0]),(m!==v-1||t!=="SHA-512/224")&&g.putInt32(h[m][1]);return g},a};var Z2=null,Fte=!1,eF=null,cf=null;function nDe(){Z2=String.fromCharCode(128),Z2+=hr.util.fillString(String.fromCharCode(0),128),eF=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],cf={},cf["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],cf["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],cf["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],cf["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Fte=!0}function Lte(t,e,r){for(var n,i,o,s,a,l,c,u,d,p,f,m,h,g,v,y,_,T,I,R,w,O,V,L,A,N,q,B,P,F,W,xe,Ye,de,Ue,z=r.length();z>=128;){for(P=0;P<16;++P)e[P][0]=r.getInt32()>>>0,e[P][1]=r.getInt32()>>>0;for(;P<80;++P)xe=e[P-2],F=xe[0],W=xe[1],n=((F>>>19|W<<13)^(W>>>29|F<<3)^F>>>6)>>>0,i=((F<<13|W>>>19)^(W<<3|F>>>29)^(F<<26|W>>>6))>>>0,de=e[P-15],F=de[0],W=de[1],o=((F>>>1|W<<31)^(F>>>8|W<<24)^F>>>7)>>>0,s=((F<<31|W>>>1)^(F<<24|W>>>8)^(F<<25|W>>>7))>>>0,Ye=e[P-7],Ue=e[P-16],W=i+Ye[1]+s+Ue[1],e[P][0]=n+Ye[0]+o+Ue[0]+(W/4294967296>>>0)>>>0,e[P][1]=W>>>0;for(h=t[0][0],g=t[0][1],v=t[1][0],y=t[1][1],_=t[2][0],T=t[2][1],I=t[3][0],R=t[3][1],w=t[4][0],O=t[4][1],V=t[5][0],L=t[5][1],A=t[6][0],N=t[6][1],q=t[7][0],B=t[7][1],P=0;P<80;++P)c=((w>>>14|O<<18)^(w>>>18|O<<14)^(O>>>9|w<<23))>>>0,u=((w<<18|O>>>14)^(w<<14|O>>>18)^(O<<23|w>>>9))>>>0,d=(A^w&(V^A))>>>0,p=(N^O&(L^N))>>>0,a=((h>>>28|g<<4)^(g>>>2|h<<30)^(g>>>7|h<<25))>>>0,l=((h<<4|g>>>28)^(g<<30|h>>>2)^(g<<25|h>>>7))>>>0,f=(h&v|_&(h^v))>>>0,m=(g&y|T&(g^y))>>>0,W=B+u+p+eF[P][1]+e[P][1],n=q+c+d+eF[P][0]+e[P][0]+(W/4294967296>>>0)>>>0,i=W>>>0,W=l+m,o=a+f+(W/4294967296>>>0)>>>0,s=W>>>0,q=A,B=N,A=V,N=L,V=w,L=O,W=R+i,w=I+n+(W/4294967296>>>0)>>>0,O=W>>>0,I=_,R=T,_=v,T=y,v=h,y=g,W=i+s,h=n+o+(W/4294967296>>>0)>>>0,g=W>>>0;W=t[0][1]+g,t[0][0]=t[0][0]+h+(W/4294967296>>>0)>>>0,t[0][1]=W>>>0,W=t[1][1]+y,t[1][0]=t[1][0]+v+(W/4294967296>>>0)>>>0,t[1][1]=W>>>0,W=t[2][1]+T,t[2][0]=t[2][0]+_+(W/4294967296>>>0)>>>0,t[2][1]=W>>>0,W=t[3][1]+R,t[3][0]=t[3][0]+I+(W/4294967296>>>0)>>>0,t[3][1]=W>>>0,W=t[4][1]+O,t[4][0]=t[4][0]+w+(W/4294967296>>>0)>>>0,t[4][1]=W>>>0,W=t[5][1]+L,t[5][0]=t[5][0]+V+(W/4294967296>>>0)>>>0,t[5][1]=W>>>0,W=t[6][1]+N,t[6][0]=t[6][0]+A+(W/4294967296>>>0)>>>0,t[6][1]=W>>>0,W=t[7][1]+B,t[7][0]=t[7][0]+q+(W/4294967296>>>0)>>>0,t[7][1]=W>>>0,z-=128}}});var Ute=x(rF=>{var iDe=lt();Gs();var Nn=iDe.asn1;rF.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};rF.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Nn.Class.UNIVERSAL,type:Nn.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Jte=x((sot,Xte)=>{var Wn=lt();h0();ds();tF();Lt();var $te=Ute(),oDe=$te.publicKeyValidator,sDe=$te.privateKeyValidator;typeof qte>"u"&&(qte=Wn.jsbn.BigInteger);var qte,oF=Wn.util.ByteBuffer,Xi=typeof Buffer>"u"?Uint8Array:Buffer;Wn.pki=Wn.pki||{};Xte.exports=Wn.pki.ed25519=Wn.ed25519=Wn.ed25519||{};var vt=Wn.ed25519;vt.constants={};vt.constants.PUBLIC_KEY_BYTE_LENGTH=32;vt.constants.PRIVATE_KEY_BYTE_LENGTH=64;vt.constants.SEED_BYTE_LENGTH=32;vt.constants.SIGN_BYTE_LENGTH=64;vt.constants.HASH_BYTE_LENGTH=64;vt.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Wn.random.getBytesSync(vt.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==vt.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+vt.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=pl({message:e,encoding:"binary"});for(var r=new Xi(vt.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Xi(vt.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return uDe(r,n),{publicKey:r,privateKey:n}};vt.privateKeyFromAsn1=function(t){var e={},r=[],n=Wn.asn1.validate(t,sDe,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Wn.asn1.derToOid(e.privateKeyOid),s=Wn.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.privateKey,l=pl({message:Wn.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:l}};vt.publicKeyFromAsn1=function(t){var e={},r=[],n=Wn.asn1.validate(t,oDe,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Wn.asn1.derToOid(e.publicKeyOid),s=Wn.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.ed25519PublicKey;if(a.length!==vt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return pl({message:a,encoding:"binary"})};vt.publicKeyFromPrivateKey=function(t){t=t||{};var e=pl({message:t.privateKey,encoding:"binary"});if(e.length!==vt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+vt.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Xi(vt.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};vt.sign=function(t){t=t||{};var e=pl(t),r=pl({message:t.privateKey,encoding:"binary"});if(r.length===vt.constants.SEED_BYTE_LENGTH){var n=vt.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==vt.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+vt.constants.SEED_BYTE_LENGTH+" or "+vt.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Xi(vt.constants.SIGN_BYTE_LENGTH+e.length);dDe(i,e,e.length,r);for(var o=new Xi(vt.constants.SIGN_BYTE_LENGTH),s=0;s<o.length;++s)o[s]=i[s];return o};vt.verify=function(t){t=t||{};var e=pl(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=pl({message:t.signature,encoding:"binary"});if(r.length!==vt.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+vt.constants.SIGN_BYTE_LENGTH);var n=pl({message:t.publicKey,encoding:"binary"});if(n.length!==vt.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+vt.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Xi(vt.constants.SIGN_BYTE_LENGTH+e.length),o=new Xi(vt.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<vt.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+vt.constants.SIGN_BYTE_LENGTH]=e[s];return pDe(o,i,i.length,n)>=0};function pl(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Xi)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new oF(e,r)}else if(!(e instanceof oF))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Xi(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var sF=Ve(),wI=Ve([1]),aDe=Ve([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),cDe=Ve([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Hte=Ve([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),jte=Ve([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),nF=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),lDe=Ve([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x0(t,e){var r=Wn.md.sha512.create(),n=new oF(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Xi(vt.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=i.charCodeAt(s);return o}function uDe(t,e){var r=[Ve(),Ve(),Ve(),Ve()],n,i=x0(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,uF(r,i),lF(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function dDe(t,e,r,n){var i,o,s=new Float64Array(64),a=[Ve(),Ve(),Ve(),Ve()],l=x0(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var c=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var u=x0(t.subarray(32),r+32);for(aF(u),uF(a,u),lF(t,a),i=32;i<64;++i)t[i]=n[i];var d=x0(t,r+64);for(aF(d),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=u[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=d[i]*l[o];return zte(t.subarray(32),s),c}function pDe(t,e,r,n){var i,o,s=new Xi(32),a=[Ve(),Ve(),Ve(),Ve()],l=[Ve(),Ve(),Ve(),Ve()];if(o=-1,r<64||fDe(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var c=x0(t,r);if(aF(c),Yte(a,l,c),uF(l,e.subarray(32)),cF(a,l),lF(s,a),r-=64,Wte(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}function zte(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*nF[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*nF[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*nF[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function aF(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;zte(t,e)}function cF(t,e){var r=Ve(),n=Ve(),i=Ve(),o=Ve(),s=Ve(),a=Ve(),l=Ve(),c=Ve(),u=Ve();Rg(r,t[1],t[0]),Rg(u,e[1],e[0]),Jt(r,r,u),Ag(n,t[0],t[1]),Ag(u,e[0],e[1]),Jt(n,n,u),Jt(i,t[3],e[3]),Jt(i,i,cDe),Jt(o,t[2],e[2]),Ag(o,o,o),Rg(s,n,r),Rg(a,o,i),Ag(l,o,i),Ag(c,n,r),Jt(t[0],s,a),Jt(t[1],c,l),Jt(t[2],l,a),Jt(t[3],s,c)}function Vte(t,e,r){for(var n=0;n<4;++n)Qte(t[n],e[n],r)}function lF(t,e){var r=Ve(),n=Ve(),i=Ve();vDe(i,e[2]),Jt(r,e[0],i),Jt(n,e[1],i),AI(t,n),t[31]^=Kte(r)<<7}function AI(t,e){var r,n,i,o=Ve(),s=Ve();for(r=0;r<16;++r)s[r]=e[r];for(iF(s),iF(s),iF(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Qte(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function fDe(t,e){var r=Ve(),n=Ve(),i=Ve(),o=Ve(),s=Ve(),a=Ve(),l=Ve();return Ju(t[2],wI),mDe(t[1],e),lf(i,t[1]),Jt(o,i,aDe),Rg(i,i,t[2]),Ag(o,t[2],o),lf(s,o),lf(a,s),Jt(l,a,s),Jt(r,l,i),Jt(r,r,o),hDe(r,r),Jt(r,r,i),Jt(r,r,o),Jt(r,r,o),Jt(t[0],r,o),lf(n,t[0]),Jt(n,n,o),Gte(n,i)&&Jt(t[0],t[0],lDe),lf(n,t[0]),Jt(n,n,o),Gte(n,i)?-1:(Kte(t[0])===e[31]>>7&&Rg(t[0],sF,t[0]),Jt(t[3],t[0],t[1]),0)}function mDe(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function hDe(t,e){var r=Ve(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)lf(r,r),n!==1&&Jt(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Gte(t,e){var r=new Xi(32),n=new Xi(32);return AI(r,t),AI(n,e),Wte(r,0,n,0)}function Wte(t,e,r,n){return gDe(t,e,r,n,32)}function gDe(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function Kte(t){var e=new Xi(32);return AI(e,t),e[0]&1}function Yte(t,e,r){var n,i;for(Ju(t[0],sF),Ju(t[1],wI),Ju(t[2],wI),Ju(t[3],sF),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Vte(t,e,n),cF(e,t),cF(t,t),Vte(t,e,n)}function uF(t,e){var r=[Ve(),Ve(),Ve(),Ve()];Ju(r[0],Hte),Ju(r[1],jte),Ju(r[2],wI),Jt(r[3],Hte,jte),Yte(t,r,e)}function Ju(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function vDe(t,e){var r=Ve(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)lf(r,r),n!==2&&n!==4&&Jt(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function iF(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function Qte(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function Ve(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function Ag(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function Rg(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function lf(t,e){Jt(t,e,e)}function Jt(t,e,r){var n,i,o=0,s=0,a=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,g=0,v=0,y=0,_=0,T=0,I=0,R=0,w=0,O=0,V=0,L=0,A=0,N=0,q=0,B=0,P=0,F=0,W=0,xe=0,Ye=0,de=r[0],Ue=r[1],z=r[2],Z=r[3],ve=r[4],he=r[5],ne=r[6],je=r[7],nt=r[8],ee=r[9],Ee=r[10],J=r[11],Oe=r[12],$e=r[13],pt=r[14],it=r[15];n=e[0],o+=n*de,s+=n*Ue,a+=n*z,l+=n*Z,c+=n*ve,u+=n*he,d+=n*ne,p+=n*je,f+=n*nt,m+=n*ee,h+=n*Ee,g+=n*J,v+=n*Oe,y+=n*$e,_+=n*pt,T+=n*it,n=e[1],s+=n*de,a+=n*Ue,l+=n*z,c+=n*Z,u+=n*ve,d+=n*he,p+=n*ne,f+=n*je,m+=n*nt,h+=n*ee,g+=n*Ee,v+=n*J,y+=n*Oe,_+=n*$e,T+=n*pt,I+=n*it,n=e[2],a+=n*de,l+=n*Ue,c+=n*z,u+=n*Z,d+=n*ve,p+=n*he,f+=n*ne,m+=n*je,h+=n*nt,g+=n*ee,v+=n*Ee,y+=n*J,_+=n*Oe,T+=n*$e,I+=n*pt,R+=n*it,n=e[3],l+=n*de,c+=n*Ue,u+=n*z,d+=n*Z,p+=n*ve,f+=n*he,m+=n*ne,h+=n*je,g+=n*nt,v+=n*ee,y+=n*Ee,_+=n*J,T+=n*Oe,I+=n*$e,R+=n*pt,w+=n*it,n=e[4],c+=n*de,u+=n*Ue,d+=n*z,p+=n*Z,f+=n*ve,m+=n*he,h+=n*ne,g+=n*je,v+=n*nt,y+=n*ee,_+=n*Ee,T+=n*J,I+=n*Oe,R+=n*$e,w+=n*pt,O+=n*it,n=e[5],u+=n*de,d+=n*Ue,p+=n*z,f+=n*Z,m+=n*ve,h+=n*he,g+=n*ne,v+=n*je,y+=n*nt,_+=n*ee,T+=n*Ee,I+=n*J,R+=n*Oe,w+=n*$e,O+=n*pt,V+=n*it,n=e[6],d+=n*de,p+=n*Ue,f+=n*z,m+=n*Z,h+=n*ve,g+=n*he,v+=n*ne,y+=n*je,_+=n*nt,T+=n*ee,I+=n*Ee,R+=n*J,w+=n*Oe,O+=n*$e,V+=n*pt,L+=n*it,n=e[7],p+=n*de,f+=n*Ue,m+=n*z,h+=n*Z,g+=n*ve,v+=n*he,y+=n*ne,_+=n*je,T+=n*nt,I+=n*ee,R+=n*Ee,w+=n*J,O+=n*Oe,V+=n*$e,L+=n*pt,A+=n*it,n=e[8],f+=n*de,m+=n*Ue,h+=n*z,g+=n*Z,v+=n*ve,y+=n*he,_+=n*ne,T+=n*je,I+=n*nt,R+=n*ee,w+=n*Ee,O+=n*J,V+=n*Oe,L+=n*$e,A+=n*pt,N+=n*it,n=e[9],m+=n*de,h+=n*Ue,g+=n*z,v+=n*Z,y+=n*ve,_+=n*he,T+=n*ne,I+=n*je,R+=n*nt,w+=n*ee,O+=n*Ee,V+=n*J,L+=n*Oe,A+=n*$e,N+=n*pt,q+=n*it,n=e[10],h+=n*de,g+=n*Ue,v+=n*z,y+=n*Z,_+=n*ve,T+=n*he,I+=n*ne,R+=n*je,w+=n*nt,O+=n*ee,V+=n*Ee,L+=n*J,A+=n*Oe,N+=n*$e,q+=n*pt,B+=n*it,n=e[11],g+=n*de,v+=n*Ue,y+=n*z,_+=n*Z,T+=n*ve,I+=n*he,R+=n*ne,w+=n*je,O+=n*nt,V+=n*ee,L+=n*Ee,A+=n*J,N+=n*Oe,q+=n*$e,B+=n*pt,P+=n*it,n=e[12],v+=n*de,y+=n*Ue,_+=n*z,T+=n*Z,I+=n*ve,R+=n*he,w+=n*ne,O+=n*je,V+=n*nt,L+=n*ee,A+=n*Ee,N+=n*J,q+=n*Oe,B+=n*$e,P+=n*pt,F+=n*it,n=e[13],y+=n*de,_+=n*Ue,T+=n*z,I+=n*Z,R+=n*ve,w+=n*he,O+=n*ne,V+=n*je,L+=n*nt,A+=n*ee,N+=n*Ee,q+=n*J,B+=n*Oe,P+=n*$e,F+=n*pt,W+=n*it,n=e[14],_+=n*de,T+=n*Ue,I+=n*z,R+=n*Z,w+=n*ve,O+=n*he,V+=n*ne,L+=n*je,A+=n*nt,N+=n*ee,q+=n*Ee,B+=n*J,P+=n*Oe,F+=n*$e,W+=n*pt,xe+=n*it,n=e[15],T+=n*de,I+=n*Ue,R+=n*z,w+=n*Z,O+=n*ve,V+=n*he,L+=n*ne,A+=n*je,N+=n*nt,q+=n*ee,B+=n*Ee,P+=n*J,F+=n*Oe,W+=n*$e,xe+=n*pt,Ye+=n*it,o+=38*I,s+=38*R,a+=38*w,l+=38*O,c+=38*V,u+=38*L,d+=38*A,p+=38*N,f+=38*q,m+=38*B,h+=38*P,g+=38*F,v+=38*W,y+=38*xe,_+=38*Ye,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=l,t[4]=c,t[5]=u,t[6]=d,t[7]=p,t[8]=f,t[9]=m,t[10]=h,t[11]=g,t[12]=v,t[13]=y,t[14]=_,t[15]=T}});var rre=x((aot,tre)=>{var Io=lt();Lt();ds();h0();tre.exports=Io.kem=Io.kem||{};var Zte=Io.jsbn.BigInteger;Io.kem.rsa={};Io.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Io.random,n={};return n.encrypt=function(i,o){var s=Math.ceil(i.n.bitLength()/8),a;do a=new Zte(Io.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(a.compareTo(Zte.ONE)<=0);a=Io.util.hexToBytes(a.toString(16));var l=s-a.length;l>0&&(a=Io.util.fillString(String.fromCharCode(0),l)+a);var c=i.encrypt(a,"NONE"),u=t.generate(a,o);return{encapsulation:c,key:u}},n.decrypt=function(i,o,s){var a=i.decrypt(o,"NONE");return t.generate(a,s)},n};Io.kem.kdf1=function(t,e){ere(this,t,0,e||t.digestLength)};Io.kem.kdf2=function(t,e){ere(this,t,1,e||t.digestLength)};function ere(t,e,r,n){t.generate=function(i,o){for(var s=new Io.util.ByteBuffer,a=Math.ceil(o/n)+r,l=new Io.util.ByteBuffer,c=r;c<a;++c){l.putInt32(c),e.start(),e.update(i+l.getBytes());var u=e.digest();s.putBytes(u.getBytes(n))}return s.truncate(s.length()-o),s.getBytes()}}});var sre=x((cot,ore)=>{var Et=lt();Lt();ore.exports=Et.log=Et.log||{};Et.log.levels=["none","error","warning","info","debug","verbose","max"];var RI={},fF=[],E0=null;Et.log.LEVEL_LOCKED=2;Et.log.NO_LEVEL_CHECK=4;Et.log.INTERPOLATE=8;for(Za=0;Za<Et.log.levels.length;++Za)dF=Et.log.levels[Za],RI[dF]={index:Za,name:dF.toUpperCase()};var dF,Za;Et.log.logMessage=function(t){for(var e=RI[t.level].index,r=0;r<fF.length;++r){var n=fF[r];if(n.flags&Et.log.NO_LEVEL_CHECK)n.f(t);else{var i=RI[n.level].index;e<=i&&n.f(n,t)}}};Et.log.prepareStandard=function(t){"standard"in t||(t.standard=RI[t.level].name+" ["+t.category+"] "+t.message)};Et.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Et.util.format.apply(this,e)}};Et.log.prepareStandardFull=function(t){"standardFull"in t||(Et.log.prepareStandard(t),t.standardFull=t.standard)};for(pF=["error","warning","info","debug","verbose"],Za=0;Za<pF.length;++Za)(function(e){Et.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};Et.log.logMessage(o)}})(pF[Za]);var pF,Za;Et.log.makeLogger=function(t){var e={flags:0,f:t};return Et.log.setLevel(e,"none"),e};Et.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Et.log.LEVEL_LOCKED))for(var n=0;n<Et.log.levels.length;++n){var i=Et.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};Et.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Et.log.LEVEL_LOCKED:t.flags&=~Et.log.LEVEL_LOCKED};Et.log.addLogger=function(t){fF.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(nre={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},C0=function(t,e){Et.log.prepareStandard(e);var r=nre[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},Pg=Et.log.makeLogger(C0)):(C0=function(e,r){Et.log.prepareStandardFull(r),console.log(r.standardFull)},Pg=Et.log.makeLogger(C0)),Et.log.setLevel(Pg,"debug"),Et.log.addLogger(Pg),E0=Pg):console={log:function(){}};var Pg,nre,C0;E0!==null&&typeof window<"u"&&window.location&&(b0=new URL(window.location.href).searchParams,b0.has("console.level")&&Et.log.setLevel(E0,b0.get("console.level").slice(-1)[0]),b0.has("console.lock")&&(ire=b0.get("console.lock").slice(-1)[0],ire=="true"&&Et.log.lock(E0)));var b0,ire;Et.log.consoleLogger=E0});var cre=x((lot,are)=>{are.exports=$a();cI();Cg();I2();tF()});var dre=x((uot,ure)=>{var ge=lt();Gu();Gs();f0();$u();tf();q2();ds();Lt();EI();var M=ge.asn1,Pi=ure.exports=ge.pkcs7=ge.pkcs7||{};Pi.messageFromPem=function(t){var e=ge.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=M.fromDer(e.body);return Pi.messageFromAsn1(n)};Pi.messageToPem=function(t,e){var r={type:"PKCS7",body:M.toDer(t.toAsn1()).getBytes()};return ge.pem.encode(r,{maxline:e})};Pi.messageFromAsn1=function(t){var e={},r=[];if(!M.validate(t,Pi.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=M.derToOid(e.contentType),o;switch(i){case ge.pki.oids.envelopedData:o=Pi.createEnvelopedData();break;case ge.pki.oids.encryptedData:o=Pi.createEncryptedData();break;case ge.pki.oids.signedData:o=Pi.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Pi.createSignedData=function(){var t=null;return t={type:ge.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(hF(t,n,Pi.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(ge.pki.certificateFromAsn1(i[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(ge.pki.certificateToAsn1(t.certificates[i]));var o=[],s=M.create(M.Class.CONTEXT_SPECIFIC,0,!0,[M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.INTEGER,!1,M.integerToDer(t.version).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(M.create(M.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(M.create(M.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(M.create(M.Class.UNIVERSAL,M.Type.SET,!0,t.signerInfos)),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=ge.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=ge.pki.privateKeyFromPem(a));var l=n.digestAlgorithm||ge.pki.oids.sha1;switch(l){case ge.pki.oids.sha1:case ge.pki.oids.sha256:case ge.pki.oids.sha384:case ge.pki.oids.sha512:case ge.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var u=!1,d=!1,p=0;p<c.length;++p){var f=c[p];if(!u&&f.type===ge.pki.oids.contentType){if(u=!0,d)break;continue}if(!d&&f.type===ge.pki.oids.messageDigest){if(d=!0,u)break;continue}}if(!u||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:ge.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(ge.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof ge.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=ge.util.encodeUtf8(t.content)),n.detached?t.detachedContent=M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(M.create(M.Class.CONTEXT_SPECIFIC,0,!0,[M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=ge.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],s=o.digestAlgorithm;s in n||(n[s]=ge.md[ge.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=ge.md[ge.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(s).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=M.derToOid(t.contentInfo.value[0].value),s=M.toDer(i);s.getByte(),M.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var l=new Date,c=0;c<t.signers.length;++c){var u=t.signers[c];if(u.authenticatedAttributes.length===0){if(o!==ge.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=M.create(M.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=M.create(M.Class.UNIVERSAL,M.Type.SET,!0,[]),p=0;p<u.authenticatedAttributes.length;++p){var f=u.authenticatedAttributes[p];f.type===ge.pki.oids.messageDigest?f.value=n[u.digestAlgorithm].digest():f.type===ge.pki.oids.signingTime&&(f.value||(f.value=l)),d.value.push(mF(f)),u.authenticatedAttributesAsn1.value.push(mF(f))}s=M.toDer(d).getBytes(),u.md.start().update(s)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=CDe(t.signers)}};Pi.createEncryptedData=function(){var t=null;return t={type:ge.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:ge.pki.oids["aes256-CBC"]},fromAsn1:function(e){hF(t,e,Pi.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),lre(t)}},t};Pi.createEnvelopedData=function(){var t=null;return t={type:ge.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:ge.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=hF(t,e,Pi.asn1.envelopedDataValidator);t.recipients=xDe(r.recipientInfos.value)},toAsn1:function(){return M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.type).getBytes()),M.create(M.Class.CONTEXT_SPECIFIC,0,!0,[M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.INTEGER,!1,M.integerToDer(t.version).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.SET,!0,bDe(t.recipients)),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,SDe(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case ge.pki.oids.rsaEncryption:case ge.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=ge.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}lre(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:ge.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case ge.pki.oids["aes128-CBC"]:n=16,i=16,o=ge.aes.createEncryptionCipher;break;case ge.pki.oids["aes192-CBC"]:n=24,i=16,o=ge.aes.createEncryptionCipher;break;case ge.pki.oids["aes256-CBC"]:n=32,i=16,o=ge.aes.createEncryptionCipher;break;case ge.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=ge.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=ge.util.createBuffer(ge.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=ge.util.createBuffer(ge.random.getBytes(i));var s=o(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var a=0;a<t.recipients.length;++a){var l=t.recipients[a];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case ge.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},t};function yDe(t){var e={},r=[];if(!M.validate(t,Pi.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:ge.pki.RDNAttributesAsArray(e.issuer),serialNumber:ge.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:M.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function _De(t){return M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.INTEGER,!1,M.integerToDer(t.version).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[ge.pki.distinguishedNameToAsn1({attributes:t.issuer}),M.create(M.Class.UNIVERSAL,M.Type.INTEGER,!1,ge.util.hexToBytes(t.serialNumber))]),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.encryptedContent.algorithm).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.NULL,!1,"")]),M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function xDe(t){for(var e=[],r=0;r<t.length;++r)e.push(yDe(t[r]));return e}function bDe(t){for(var e=[],r=0;r<t.length;++r)e.push(_De(t[r]));return e}function EDe(t){var e=M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.INTEGER,!1,M.integerToDer(t.version).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[ge.pki.distinguishedNameToAsn1({attributes:t.issuer}),M.create(M.Class.UNIVERSAL,M.Type.INTEGER,!1,ge.util.hexToBytes(t.serialNumber))]),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.digestAlgorithm).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.signatureAlgorithm).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.NULL,!1,"")])),e.value.push(M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=M.create(M.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(mF(i))}e.value.push(r)}return e}function CDe(t){for(var e=[],r=0;r<t.length;++r)e.push(EDe(t[r]));return e}function mF(t){var e;if(t.type===ge.pki.oids.contentType)e=M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.value).getBytes());else if(t.type===ge.pki.oids.messageDigest)e=M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===ge.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=M.utcTimeToDate(i):i=M.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=M.create(M.Class.UNIVERSAL,M.Type.UTCTIME,!1,M.dateToUtcTime(i)):e=M.create(M.Class.UNIVERSAL,M.Type.GENERALIZEDTIME,!1,M.dateToGeneralizedTime(i))}return M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.type).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.SET,!0,[e])])}function SDe(t){return[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(ge.pki.oids.data).getBytes()),M.create(M.Class.UNIVERSAL,M.Type.SEQUENCE,!0,[M.create(M.Class.UNIVERSAL,M.Type.OID,!1,M.oidToDer(t.algorithm).getBytes()),t.parameter?M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),M.create(M.Class.CONTEXT_SPECIFIC,0,!0,[M.create(M.Class.UNIVERSAL,M.Type.OCTETSTRING,!1,t.content.getBytes())])]}function hF(t,e,r){var n={},i=[];if(!M.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=M.derToOid(n.contentType);if(s!==ge.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(ge.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==M.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[l].value}else a=n.encryptedContent;t.encryptedContent={algorithm:M.derToOid(n.encAlgorithm),parameter:ge.util.createBuffer(n.encParameter.value),content:ge.util.createBuffer(a)}}if(n.content){var a="";if(ge.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==M.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[l].value}else a=n.content;t.content=ge.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function lre(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case ge.pki.oids["aes128-CBC"]:case ge.pki.oids["aes192-CBC"]:case ge.pki.oids["aes256-CBC"]:e=ge.aes.createDecryptionCipher(t.encryptedContent.key);break;case ge.pki.oids.desCBC:case ge.pki.oids["des-EDE3-CBC"]:e=ge.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var fre=x((dot,pre)=>{var nn=lt();Gu();_g();cI();Cg();Lt();var kI=pre.exports=nn.ssh=nn.ssh||{};kI.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var s=nn.util.createBuffer();kg(s,n),ec(s,t.e),ec(s,t.n);var a=nn.util.encode64(s.bytes(),64),l=Math.floor(a.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=a;var c=nn.util.createBuffer();ec(c,t.d),ec(c,t.p),ec(c,t.q),ec(c,t.qInv);var u;if(!e)u=nn.util.encode64(c.bytes(),64);else{var d=c.length()+16-1;d-=d%16;var p=PI(c.bytes());p.truncate(p.length()-d+c.length()),c.putBuffer(p);var f=nn.util.createBuffer();f.putBuffer(PI("\0\0\0\0",e)),f.putBuffer(PI("\0\0\0",e));var m=nn.aes.createEncryptionCipher(f.truncate(8),"CBC");m.start(nn.util.createBuffer().fillWithByte(0,16)),m.update(c.copy()),m.finish();var h=m.output;h.truncate(16),u=nn.util.encode64(h.bytes(),64)}l=Math.floor(u.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=u;var g=PI("putty-private-key-file-mac-key",e),v=nn.util.createBuffer();kg(v,n),kg(v,i),kg(v,r),v.putInt32(s.length()),v.putBuffer(s),v.putInt32(c.length()),v.putBuffer(c);var y=nn.hmac.create();return y.start("sha1",g),y.update(v.bytes()),o+=`\r
Private-MAC: `+y.digest().toHex()+`\r
`,o};kI.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=nn.util.createBuffer();return kg(n,r),ec(n,t.e),ec(n,t.n),r+" "+nn.util.encode64(n.bytes())+" "+e};kI.privateKeyToOpenSSH=function(t,e){return e?nn.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):nn.pki.privateKeyToPem(t)};kI.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||nn.md.md5.create(),n="ssh-rsa",i=nn.util.createBuffer();kg(i,n),ec(i,t.e),ec(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function ec(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=nn.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function kg(t,e){t.putInt32(e.length),t.putString(e)}function PI(){for(var t=nn.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var hre=x((pot,mre)=>{mre.exports=lt();Gu();Dte();Gs();tI();f0();Jte();_g();rre();sre();cre();H2();pI();tf();L2();G2();dre();z2();F2();w2();_I();ds();P2();fre();J2();Lt()});var gre=x((fot,TDe)=>{TDe.exports={name:"@roamhq/mac-ca",version:"1.0.7",description:"Get Mac OS Root certificates",main:"index.js",repository:{type:"git",url:"https://github.com/WonderInventions/mac-ca.git"},scripts:{test:'echo "Error: no test specified" && exit 1',lint:"eslint ."},license:"BSD-3-Clause",dependencies:{"node-forge":"^1.3.1"},devDependencies:{eslint:"^8.22.0"}}});var _re=x((mot,gF)=>{var OI=hre(),vre=gre(),NI=gF.exports.validFormats={der:0,pem:1,txt:2,asn1:3};function yre(t){let e=OI.pki.pemToDer(t),r=OI.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,s=n.slice(o);return{serial:s[0],issuer:s[2],valid:s[3],subject:s[4]}}function IDe(t){let e=yre(t),r=new Date,n=e.subject.value.map(s=>s.value[0].value[1].value).join("/"),i=e.valid.value.map(s=>s.value).join(" - "),o=r.toTimeString().replace(/\s*\(.*\)\s*/,"");return[`Subject	${n}`,`Valid	${i}`,`Saved	${r.toLocaleDateString()} ${o} by ${vre.name}@${vre.version}`,String(t)].join(`
`)}gF.exports.transform=function(t){return function(e){try{switch(t){case NI.der:return OI.pki.pemToDer(e);case NI.pem:return e;case NI.txt:return IDe(e);case NI.asn1:return yre(e);default:return OI.pki.certificateFromPem(e)}}catch{return}}}});var xre=x((hot,Ng)=>{var vF=require("https"),yF=_re();if(process.platform!=="darwin")Ng.exports.all=()=>[],Ng.exports.each=()=>{};else{let a=function(c,u,d){return d.indexOf(c)===u};wDe=a;let t=require("child_process"),e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r="/System/Library/Keychains/SystemRootCertificates.keychain",n=["find-certificate","-a","-p"],i=t.spawnSync("/usr/bin/security",n).stdout.toString().split(e),o=t.spawnSync("/usr/bin/security",n.concat(r)).stdout.toString().split(e);vF.globalAgent.options.ca=vF.globalAgent.options.ca||[];let s=vF.globalAgent.options.ca,l=i.concat(o);l.filter(a).forEach(c=>s.push(c)),Ng.exports.der2=yF.validFormats,Ng.exports.all=function(c){return l.map(yF.transform(c)).filter(u=>u)},Ng.exports.each=function(c,u){return typeof c=="function"&&(u=c,c=void 0),l.map(yF.transform(c)).filter(d=>d).forEach(u)}}var wDe});var RB=x(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var Iw=require("vscode"),AB=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case vl.ApplicationVersion:return t.trimVersionSuffix(Iw.version);case vl.Build:return Iw.env.appName;case vl.ClientId:return Iw.env.machineId;case vl.ExtensionName:return this.extensionName;case vl.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case vl.Language:return Iw.env.language;case vl.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(vl);for(let n of r)e.set(n,this.getFilterValue(n));return e}};Sf.VSCodeFilterProvider=AB;var vl;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(vl=Sf.Filters||(Sf.Filters={}));var sMe;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(sMe=Sf.TargetPopulation||(Sf.TargetPopulation={}))});var Yne=x(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0});var PB=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};kB.BaseFeatureProvider=PB});var Qne=x(OB=>{"use strict";Object.defineProperty(OB,"__esModule",{value:!0});var aMe=Yne(),NB=class extends aMe.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};OB.FilteredFeatureProvider=NB});var Xne=x(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});var cMe=Qne();Vg.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var DB="ErrorType",LB=class extends cMe.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let l=e.get(a);r[a]=l}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let l=a,c=new Map;l.response?c.set(DB,"ServerError"):l.request?c.set(DB,"NoResponse"):c.set(DB,"GenericError"),this.telemetry.postEvent(Vg.TASAPI_FETCHERROR_EVENTNAME,c)}if(!n)throw Error(Vg.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let l of Object.keys(a.Parameters)){let c=l+(a.Parameters[l]?"":"cf");s.includes(c)||s.push(c)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};Vg.TasApiFeatureProvider=LB});var MB=x((wvt,Jne)=>{"use strict";Jne.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var pi=x((Avt,rie)=>{"use strict";var lMe=MB(),ld=Object.prototype.toString;function UB(t){return Array.isArray(t)}function FB(t){return typeof t>"u"}function uMe(t){return t!==null&&!FB(t)&&t.constructor!==null&&!FB(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Zne(t){return ld.call(t)==="[object ArrayBuffer]"}function dMe(t){return ld.call(t)==="[object FormData]"}function pMe(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Zne(t.buffer),e}function fMe(t){return typeof t=="string"}function mMe(t){return typeof t=="number"}function eie(t){return t!==null&&typeof t=="object"}function ww(t){if(ld.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function hMe(t){return ld.call(t)==="[object Date]"}function gMe(t){return ld.call(t)==="[object File]"}function vMe(t){return ld.call(t)==="[object Blob]"}function tie(t){return ld.call(t)==="[object Function]"}function yMe(t){return eie(t)&&tie(t.pipe)}function _Me(t){return ld.call(t)==="[object URLSearchParams]"}function xMe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function bMe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function qB(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),UB(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function BB(){var t={};function e(i,o){ww(t[o])&&ww(i)?t[o]=BB(t[o],i):ww(i)?t[o]=BB({},i):UB(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)qB(arguments[r],e);return t}function EMe(t,e,r){return qB(e,function(i,o){r&&typeof i=="function"?t[o]=lMe(i,r):t[o]=i}),t}function CMe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}rie.exports={isArray:UB,isArrayBuffer:Zne,isBuffer:uMe,isFormData:dMe,isArrayBufferView:pMe,isString:fMe,isNumber:mMe,isObject:eie,isPlainObject:ww,isUndefined:FB,isDate:hMe,isFile:gMe,isBlob:vMe,isFunction:tie,isStream:yMe,isURLSearchParams:_Me,isStandardBrowserEnv:bMe,forEach:qB,merge:BB,extend:EMe,trim:xMe,stripBOM:CMe}});var Aw=x((Rvt,iie)=>{"use strict";var Gg=pi();function nie(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}iie.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Gg.isURLSearchParams(r))i=r.toString();else{var o=[];Gg.forEach(r,function(l,c){l===null||typeof l>"u"||(Gg.isArray(l)?c=c+"[]":l=[l],Gg.forEach(l,function(d){Gg.isDate(d)?d=d.toISOString():Gg.isObject(d)&&(d=JSON.stringify(d)),o.push(nie(c)+"="+nie(d))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var sie=x((Pvt,oie)=>{"use strict";var SMe=pi();function Rw(){this.handlers=[]}Rw.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Rw.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Rw.prototype.forEach=function(e){SMe.forEach(this.handlers,function(n){n!==null&&e(n)})};oie.exports=Rw});var cie=x((kvt,aie)=>{"use strict";var TMe=pi();aie.exports=function(e,r){TMe.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var Pw=x((Nvt,lie)=>{"use strict";lie.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var kw=x((Ovt,uie)=>{"use strict";uie.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var Nw=x((Dvt,die)=>{"use strict";var IMe=Pw();die.exports=function(e,r,n,i,o){var s=new Error(e);return IMe(s,r,n,i,o)}});var HB=x((Lvt,pie)=>{"use strict";var wMe=Nw();pie.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(wMe("Request failed with status code "+n.status,n.config,null,n.request,n))}});var mie=x((Mvt,fie)=>{"use strict";var Ow=pi();fie.exports=Ow.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var l=[];l.push(r+"="+encodeURIComponent(n)),Ow.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),Ow.isString(o)&&l.push("path="+o),Ow.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var gie=x((Fvt,hie)=>{"use strict";hie.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var yie=x((Bvt,vie)=>{"use strict";vie.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var jB=x((Uvt,_ie)=>{"use strict";var AMe=gie(),RMe=yie();_ie.exports=function(e,r){return e&&!AMe(r)?RMe(e,r):r}});var bie=x((qvt,xie)=>{"use strict";var VB=pi(),PMe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];xie.exports=function(e){var r={},n,i,o;return e&&VB.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=VB.trim(a.substr(0,o)).toLowerCase(),i=VB.trim(a.substr(o+1)),n){if(r[n]&&PMe.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var Sie=x((Hvt,Cie)=>{"use strict";var Eie=pi();Cie.exports=Eie.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=Eie.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var $g=x((jvt,Tie)=>{"use strict";function GB(t){this.message=t}GB.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};GB.prototype.__CANCEL__=!0;Tie.exports=GB});var wie=x((Vvt,Iie)=>{"use strict";var Dw=pi(),kMe=HB(),NMe=mie(),OMe=Aw(),DMe=jB(),LMe=bie(),MMe=Sie(),$B=Nw(),FMe=kw(),BMe=$g();Iie.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,l;function c(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}Dw.isFormData(o)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+p)}var f=DMe(e.baseURL,e.url);u.open(e.method.toUpperCase(),OMe(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function m(){if(u){var g="getAllResponseHeaders"in u?LMe(u.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?u.responseText:u.response,y={data:v,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};kMe(function(T){n(T),c()},function(T){i(T),c()},y),u=null}}if("onloadend"in u?u.onloadend=m:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(m)},u.onabort=function(){u&&(i($B("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i($B("Network Error",e,null,u)),u=null},u.ontimeout=function(){var v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",y=e.transitional||FMe;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i($B(v,e,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Dw.isStandardBrowserEnv()){var h=(e.withCredentials||MMe(f))&&e.xsrfCookieName?NMe.read(e.xsrfCookieName):void 0;h&&(s[e.xsrfHeaderName]=h)}"setRequestHeader"in u&&Dw.forEach(s,function(v,y){typeof o>"u"&&y.toLowerCase()==="content-type"?delete s[y]:u.setRequestHeader(y,v)}),Dw.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(g){u&&(i(!g||g&&g.type?new BMe("canceled"):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),o||(o=null),u.send(o)})}});var Rie=x((Gvt,Aie)=>{var U0;Aie.exports=function(){if(!U0){try{U0=Ho()("follow-redirects")}catch{}typeof U0!="function"&&(U0=function(){})}U0.apply(null,arguments)}});var ZB=x(($vt,JB)=>{var Tf=require("url"),zB=Tf.URL,UMe=require("http"),qMe=require("https"),KB=require("stream").Writable,Nie=require("assert"),Oie=Rie(),YB=["abort","aborted","connect","error","socket","timeout"],QB=Object.create(null);YB.forEach(function(t){QB[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var HMe=H0("ERR_INVALID_URL","Invalid URL",TypeError),Pie=H0("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),jMe=H0("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),VMe=H0("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),GMe=H0("ERR_STREAM_WRITE_AFTER_END","write after end"),$Me=KB.prototype.destroy||Lie;function Zi(t,e){KB.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Zi.prototype=Object.create(KB.prototype);Zi.prototype.abort=function(){XB(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Zi.prototype.destroy=function(t){return XB(this._currentRequest,t),$Me.call(this,t),this};Zi.prototype.write=function(t,e,r){if(this._ending)throw new GMe;if(!If(t)&&!WMe(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(q0(e)&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new VMe),this.abort())};Zi.prototype.end=function(t,e,r){if(q0(t)?(r=t,t=e=null):q0(e)&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Zi.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Zi.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Zi.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),r.removeListener("close",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this.on("close",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Zi.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Zi.prototype,t,{get:function(){return this._currentRequest[t]}})});Zi.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Zi.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of YB)n.on(i,QB[i]);if(this._currentUrl=/^\//.test(this._options.path)?Tf.format(this._options):this._options.path,this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function l(c){if(n===s._currentRequest)if(c)s.emit("error",c);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,l)}else s._ended&&n.end()})()}};Zi.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(XB(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new jMe);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var o=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],WB(/^content-/i,this._options.headers));var s=WB(/^host$/i,this._options.headers),a=Tf.parse(this._currentUrl),l=s||a.host,c=/^\w+:/.test(r)?this._currentUrl:Tf.format(Object.assign(a,{host:l})),u;try{u=Tf.resolve(c,r)}catch(m){this.emit("error",new Pie({cause:m}));return}Oie("redirecting to",u),this._isRedirect=!0;var d=Tf.parse(u);if(Object.assign(this._options,d),(d.protocol!==a.protocol&&d.protocol!=="https:"||d.host!==l&&!zMe(d.host,l))&&WB(/^(?:authorization|cookie)$/i,this._options.headers),q0(i)){var p={headers:t.headers,statusCode:e},f={url:c,method:o,headers:n};try{i(this._options,p,f)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new Pie({cause:m}))}};function Die(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(c,u,d){if(If(c)){var p;try{p=kie(new zB(c))}catch{p=Tf.parse(c)}if(!If(p.protocol))throw new HMe({input:c});c=p}else zB&&c instanceof zB?c=kie(c):(d=u,u=c,c={protocol:i});return q0(u)&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},c,u),u.nativeProtocols=r,!If(u.host)&&!If(u.hostname)&&(u.hostname="::1"),Nie.equal(u.protocol,i,"protocol mismatch"),Oie("options",u),new Zi(u,d)}function l(c,u,d){var p=s.request(c,u,d);return p.end(),p}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:l,configurable:!0,enumerable:!0,writable:!0}})}),e}function Lie(){}function kie(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function WB(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function H0(t,e,r){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(r||Error),n.prototype.constructor=n,n.prototype.name="Error ["+t+"]",n}function XB(t,e){for(var r of YB)t.removeListener(r,QB[r]);t.on("error",Lie),t.destroy(e)}function zMe(t,e){Nie(If(t)&&If(e));var r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}function If(t){return typeof t=="string"||t instanceof String}function q0(t){return typeof t=="function"}function WMe(t){return typeof t=="object"&&"length"in t}JB.exports=Die({http:UMe,https:qMe});JB.exports.wrap=Die});var Lw=x((zvt,Mie)=>{Mie.exports={version:"0.26.1"}});var Vie=x((Wvt,jie)=>{"use strict";var j0=pi(),Fie=HB(),KMe=jB(),Bie=Aw(),YMe=require("http"),QMe=require("https"),XMe=ZB().http,JMe=ZB().https,Uie=require("url"),ZMe=require("zlib"),e2e=Lw().version,zg=Nw(),Mw=Pw(),t2e=kw(),r2e=$g(),qie=/https:?/;function Hie(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,Hie(o,e,o.href)}}jie.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(Z){s(),n(Z)},l=!1,c=function(Z){s(),l=!0,i(Z)},u=e.data,d=e.headers,p={};if(Object.keys(d).forEach(function(Z){p[Z.toLowerCase()]=Z}),"user-agent"in p?d[p["user-agent"]]||delete d[p["user-agent"]]:d["User-Agent"]="axios/"+e2e,u&&!j0.isStream(u)){if(!Buffer.isBuffer(u))if(j0.isArrayBuffer(u))u=Buffer.from(new Uint8Array(u));else if(j0.isString(u))u=Buffer.from(u,"utf-8");else return c(zg("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));if(e.maxBodyLength>-1&&u.length>e.maxBodyLength)return c(zg("Request body larger than maxBodyLength limit",e));p["content-length"]||(d["Content-Length"]=u.length)}var f=void 0;if(e.auth){var m=e.auth.username||"",h=e.auth.password||"";f=m+":"+h}var g=KMe(e.baseURL,e.url),v=Uie.parse(g),y=v.protocol||"http:";if(!f&&v.auth){var _=v.auth.split(":"),T=_[0]||"",I=_[1]||"";f=T+":"+I}f&&p.authorization&&delete d[p.authorization];var R=qie.test(y),w=R?e.httpsAgent:e.httpAgent;try{Bie(v.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(z){var O=new Error(z.message);O.config=e,O.url=e.url,O.exists=!0,c(O)}var V={path:Bie(v.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:d,agent:w,agents:{http:e.httpAgent,https:e.httpsAgent},auth:f};e.socketPath?V.socketPath=e.socketPath:(V.hostname=v.hostname,V.port=v.port);var L=e.proxy;if(!L&&L!==!1){var A=y.slice(0,-1)+"_proxy",N=process.env[A]||process.env[A.toUpperCase()];if(N){var q=Uie.parse(N),B=process.env.no_proxy||process.env.NO_PROXY,P=!0;if(B){var F=B.split(",").map(function(Z){return Z.trim()});P=!F.some(function(Z){return Z?Z==="*"||Z[0]==="."&&v.hostname.substr(v.hostname.length-Z.length)===Z?!0:v.hostname===Z:!1})}if(P&&(L={host:q.hostname,port:q.port,protocol:q.protocol},q.auth)){var W=q.auth.split(":");L.auth={username:W[0],password:W[1]}}}}L&&(V.headers.host=v.hostname+(v.port?":"+v.port:""),Hie(V,L,y+"//"+v.hostname+(v.port?":"+v.port:"")+V.path));var xe,Ye=R&&(L?qie.test(L.protocol):!0);e.transport?xe=e.transport:e.maxRedirects===0?xe=Ye?QMe:YMe:(e.maxRedirects&&(V.maxRedirects=e.maxRedirects),xe=Ye?JMe:XMe),e.maxBodyLength>-1&&(V.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(V.insecureHTTPParser=e.insecureHTTPParser);var de=xe.request(V,function(Z){if(!de.aborted){var ve=Z,he=Z.req||de;if(Z.statusCode!==204&&he.method!=="HEAD"&&e.decompress!==!1)switch(Z.headers["content-encoding"]){case"gzip":case"compress":case"deflate":ve=ve.pipe(ZMe.createUnzip()),delete Z.headers["content-encoding"];break}var ne={status:Z.statusCode,statusText:Z.statusMessage,headers:Z.headers,config:e,request:he};if(e.responseType==="stream")ne.data=ve,Fie(a,c,ne);else{var je=[],nt=0;ve.on("data",function(Ee){je.push(Ee),nt+=Ee.length,e.maxContentLength>-1&&nt>e.maxContentLength&&(l=!0,ve.destroy(),c(zg("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,he)))}),ve.on("aborted",function(){l||(ve.destroy(),c(zg("error request aborted",e,"ERR_REQUEST_ABORTED",he)))}),ve.on("error",function(Ee){de.aborted||c(Mw(Ee,e,null,he))}),ve.on("end",function(){try{var Ee=je.length===1?je[0]:Buffer.concat(je);e.responseType!=="arraybuffer"&&(Ee=Ee.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(Ee=j0.stripBOM(Ee))),ne.data=Ee}catch(J){c(Mw(J,e,J.code,ne.request,ne))}Fie(a,c,ne)})}}});if(de.on("error",function(Z){de.aborted&&Z.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(Mw(Z,e,null,de))}),de.on("socket",function(Z){Z.setKeepAlive(!0,1e3*60)}),e.timeout){var Ue=parseInt(e.timeout,10);if(isNaN(Ue)){c(zg("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",de));return}de.setTimeout(Ue,function(){de.abort();var Z="";e.timeoutErrorMessage?Z=e.timeoutErrorMessage:Z="timeout of "+e.timeout+"ms exceeded";var ve=e.transitional||t2e;c(zg(Z,e,ve.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",de))})}(e.cancelToken||e.signal)&&(o=function(z){de.aborted||(de.abort(),c(!z||z&&z.type?new r2e("canceled"):z))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),j0.isStream(u)?u.on("error",function(Z){c(Mw(Z,e,null,de))}).pipe(de):de.end(u)})}});var Bw=x((Kvt,zie)=>{"use strict";var Kn=pi(),Gie=cie(),n2e=Pw(),i2e=kw(),o2e={"Content-Type":"application/x-www-form-urlencoded"};function $ie(t,e){!Kn.isUndefined(t)&&Kn.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function s2e(){var t;return typeof XMLHttpRequest<"u"?t=wie():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=Vie()),t}function a2e(t,e,r){if(Kn.isString(t))try{return(e||JSON.parse)(t),Kn.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Fw={transitional:i2e,adapter:s2e(),transformRequest:[function(e,r){return Gie(r,"Accept"),Gie(r,"Content-Type"),Kn.isFormData(e)||Kn.isArrayBuffer(e)||Kn.isBuffer(e)||Kn.isStream(e)||Kn.isFile(e)||Kn.isBlob(e)?e:Kn.isArrayBufferView(e)?e.buffer:Kn.isURLSearchParams(e)?($ie(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Kn.isObject(e)||r&&r["Content-Type"]==="application/json"?($ie(r,"application/json"),a2e(e)):e}],transformResponse:[function(e){var r=this.transitional||Fw.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Kn.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?n2e(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Kn.forEach(["delete","get","head"],function(e){Fw.headers[e]={}});Kn.forEach(["post","put","patch"],function(e){Fw.headers[e]=Kn.merge(o2e)});zie.exports=Fw});var Kie=x((Yvt,Wie)=>{"use strict";var c2e=pi(),l2e=Bw();Wie.exports=function(e,r,n){var i=this||l2e;return c2e.forEach(n,function(s){e=s.call(i,e,r)}),e}});var eU=x((Qvt,Yie)=>{"use strict";Yie.exports=function(e){return!!(e&&e.__CANCEL__)}});var Jie=x((Xvt,Xie)=>{"use strict";var Qie=pi(),tU=Kie(),u2e=eU(),d2e=Bw(),p2e=$g();function rU(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new p2e("canceled")}Xie.exports=function(e){rU(e),e.headers=e.headers||{},e.data=tU.call(e,e.data,e.headers,e.transformRequest),e.headers=Qie.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Qie.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||d2e.adapter;return r(e).then(function(i){return rU(e),i.data=tU.call(e,i.data,i.headers,e.transformResponse),i},function(i){return u2e(i)||(rU(e),i&&i.response&&(i.response.data=tU.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var nU=x((Jvt,Zie)=>{"use strict";var Po=pi();Zie.exports=function(e,r){r=r||{};var n={};function i(u,d){return Po.isPlainObject(u)&&Po.isPlainObject(d)?Po.merge(u,d):Po.isPlainObject(d)?Po.merge({},d):Po.isArray(d)?d.slice():d}function o(u){if(Po.isUndefined(r[u])){if(!Po.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function s(u){if(!Po.isUndefined(r[u]))return i(void 0,r[u])}function a(u){if(Po.isUndefined(r[u])){if(!Po.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function l(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return Po.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var p=c[d]||o,f=p(d);Po.isUndefined(f)&&p!==l||(n[d]=f)}),n}});var roe=x((Zvt,toe)=>{"use strict";var f2e=Lw().version,iU={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){iU[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var eoe={};iU.transitional=function(e,r,n){function i(o,s){return"[Axios v"+f2e+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!eoe[s]&&(eoe[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function m2e(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new TypeError("option "+o+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+o)}}toe.exports={assertOptions:m2e,validators:iU}});var coe=x((eyt,aoe)=>{"use strict";var ooe=pi(),h2e=Aw(),noe=sie(),ioe=Jie(),Uw=nU(),soe=roe(),Wg=soe.validators;function V0(t){this.defaults=t,this.interceptors={request:new noe,response:new noe}}V0.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Uw(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&soe.assertOptions(n,{silentJSONParsing:Wg.transitional(Wg.boolean),forcedJSONParsing:Wg.transitional(Wg.boolean),clarifyTimeoutError:Wg.transitional(Wg.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(o=o&&f.synchronous,i.unshift(f.fulfilled,f.rejected))});var s=[];this.interceptors.response.forEach(function(f){s.push(f.fulfilled,f.rejected)});var a;if(!o){var l=[ioe,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(s),a=Promise.resolve(r);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=r;i.length;){var u=i.shift(),d=i.shift();try{c=u(c)}catch(p){d(p);break}}try{a=ioe(c)}catch(p){return Promise.reject(p)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};V0.prototype.getUri=function(e){return e=Uw(this.defaults,e),h2e(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ooe.forEach(["delete","get","head","options"],function(e){V0.prototype[e]=function(r,n){return this.request(Uw(n||{},{method:e,url:r,data:(n||{}).data}))}});ooe.forEach(["post","put","patch"],function(e){V0.prototype[e]=function(r,n,i){return this.request(Uw(i||{},{method:e,url:r,data:n}))}});aoe.exports=V0});var uoe=x((tyt,loe)=>{"use strict";var g2e=$g();function Kg(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new g2e(i),e(r.reason))})}Kg.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Kg.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Kg.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Kg.source=function(){var e,r=new Kg(function(i){e=i});return{token:r,cancel:e}};loe.exports=Kg});var poe=x((ryt,doe)=>{"use strict";doe.exports=function(e){return function(n){return e.apply(null,n)}}});var moe=x((nyt,foe)=>{"use strict";var v2e=pi();foe.exports=function(e){return v2e.isObject(e)&&e.isAxiosError===!0}});var voe=x((iyt,oU)=>{"use strict";var hoe=pi(),y2e=MB(),qw=coe(),_2e=nU(),x2e=Bw();function goe(t){var e=new qw(t),r=y2e(qw.prototype.request,e);return hoe.extend(r,qw.prototype,e),hoe.extend(r,e),r.create=function(i){return goe(_2e(t,i))},r}var rc=goe(x2e);rc.Axios=qw;rc.Cancel=$g();rc.CancelToken=uoe();rc.isCancel=eU();rc.VERSION=Lw().version;rc.all=function(e){return Promise.all(e)};rc.spread=poe();rc.isAxiosError=moe();oU.exports=rc;oU.exports.default=rc});var _oe=x((oyt,yoe)=>{yoe.exports=voe()});var xoe=x(aU=>{"use strict";Object.defineProperty(aU,"__esModule",{value:!0});var b2e=_oe(),sU=class{constructor(e){this.endpoint=e}get(e){return b2e.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};aU.AxiosHttpClient=sU});var boe=x(lU=>{"use strict";Object.defineProperty(lU,"__esModule",{value:!0});var cU=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};lU.MemoryKeyValueStorage=cU});var Eoe=x(dU=>{"use strict";Object.defineProperty(dU,"__esModule",{value:!0});var E2e=boe(),uU=class{constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new E2e.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};dU.ExperimentationServiceBase=uU});var Coe=x(fU=>{"use strict";Object.defineProperty(fU,"__esModule",{value:!0});var pU=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};fU.PollingService=pU});var Soe=x(hU=>{"use strict";Object.defineProperty(hU,"__esModule",{value:!0});var C2e=Eoe(),S2e=Coe(),mU=class extends C2e.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new S2e.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};hU.ExperimentationServiceAutoPolling=mU});var Toe=x(gU=>{"use strict";Object.defineProperty(gU,"__esModule",{value:!0});var T2e=Xne(),I2e=xoe(),w2e=Soe(),Hw=class extends w2e.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new T2e.TasApiFeatureProvider(new I2e.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};gU.ExperimentationService=Hw;Hw.REFRESH_RATE_IN_MINUTES=30});var Ioe=x(vU=>{"use strict";Object.defineProperty(vU,"__esModule",{value:!0});var A2e=Toe();vU.ExperimentationService=A2e.ExperimentationService});var woe=x(_U=>{"use strict";Object.defineProperty(_U,"__esModule",{value:!0});var yU=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};_U.MementoKeyValueStorage=yU});var Aoe=x(bU=>{"use strict";Object.defineProperty(bU,"__esModule",{value:!0});var xU=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};bU.default=xU});var Poe=x(jw=>{"use strict";Object.defineProperty(jw,"__esModule",{value:!0});var R2e=RB(),P2e=Ioe(),EU=require("vscode"),k2e=woe(),N2e=Aoe(),O2e="https://default.exp-tas.com/vscode/ab",D2e="query-expfeature",L2e="abexp.assignmentcontext",M2e="VSCode.ABExp.FeatureData",F2e=1e3*60*30;function Roe(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=EU.workspace.getConfiguration("telemetry");if(!(EU.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):EU.env.isTelemetryEnabled))return new N2e.default;let c=[new R2e.VSCodeFilterProvider(t,e,r),...o],u=new k2e.MementoKeyValueStorage(i);return new P2e.ExperimentationService({filterProviders:c,telemetry:n,storageKey:M2e,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:L2e,telemetryEventName:D2e,endpoint:O2e,refetchInterval:F2e})}jw.getExperimentationService=Roe;async function B2e(t,e,r,n,i,...o){let s=Roe(t,e,r,n,i,...o);return await s.initializePromise,s}jw.getExperimentationServiceAsync=B2e});var Noe=x(G0=>{"use strict";Object.defineProperty(G0,"__esModule",{value:!0});var koe=Poe();G0.getExperimentationService=koe.getExperimentationService;G0.getExperimentationServiceAsync=koe.getExperimentationServiceAsync;var U2e=RB();G0.TargetPopulation=U2e.TargetPopulation});var Doe=x(Vw=>{"use strict";Object.defineProperty(Vw,"__esModule",{value:!0});Vw.BaseTelemetryReporter=void 0;var CU=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let o of Object.keys(i??{})){let s=i[o];typeof o=="string"&&s!==void 0&&(i[o]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};Vw.BaseTelemetryReporter=CU});var Loe=x(Gw=>{"use strict";Object.defineProperty(Gw,"__esModule",{value:!0});Gw.BaseTelemetrySender=void 0;var yl;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(yl||(yl={}));var SU=class{constructor(e,r){this._instantiationStatus=yl.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==yl.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==yl.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};r?r.properties={...r.properties,...n}:r={properties:n},this._telemetryClient.logEvent("unhandlederror",r)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===yl.NOT_INSTANTIATED&&(this._instantiationStatus=yl.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=yl.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=yl.INSTANTIATED}))}};Gw.BaseTelemetrySender=SU});var Moe=x($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});$w.TelemetryUtil=void 0;var TU=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.8.5"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};$w.TelemetryUtil=TU});var ys,on,sn,an,z0,ko,Yg,Qg,zw,Xg,No,Ww=k(()=>{ys="function",on="object",sn="undefined",an="prototype",z0="hasOwnProperty",ko=Object,Yg=ko[an],Qg=ko.assign,zw=ko.create,Xg=ko.defineProperty,No=Yg[z0]});function Ys(t){t===void 0&&(t=!0);var e=t===!1?null:Foe;return e||(typeof globalThis!==sn&&(e=globalThis),!e&&typeof self!==sn&&(e=self),!e&&typeof window!==sn&&(e=window),!e&&typeof global!==sn&&(e=global),Foe=e),e}function Jg(t){throw new TypeError(t)}function nc(t){var e=zw;if(e)return e(t);if(t==null)return{};var r=typeof t;r!==on&&r!==ys&&Jg("Object prototype may only be an Object:"+t);function n(){}return n[an]=t,new n}var Foe,IU=k(()=>{Ww();Foe=null});function Qs(t,e){typeof e!==ys&&e!==null&&Jg("Class extends value "+String(e)+" is not a constructor or null"),wU(t,e);function r(){this.constructor=t}t[an]=e===null?nc(e):(r[an]=e[an],new r)}function Yw(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var wyt,Ayt,j2e,Kw,wU,Boe=k(()=>{Ww();IU();wyt=(Ys()||{}).Symbol,Ayt=(Ys()||{}).Reflect,j2e=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Yg[z0].call(e,i)&&(t[i]=e[i])}return t},Kw=Qg||j2e,wU=function(t,e){return wU=ko.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[z0](i)&&(r[i]=n[i])},wU(t,e)}});var Uoe=k(()=>{});var eo=k(()=>{Ww();IU();Boe();Uoe()});var AU,qoe=k(()=>{"use strict";AU=100});var Xs,Yn,W0,Js,dt,Oo,ic,Qw,Ln,Me,wf,sr,Xw,Af,Rf,RU,Pf,kf,Zg,K0,_l,Do,ev,ud,Zs,tv,Nf,Lo,_s,dd,xl,Jw,oc,ea,rv,sc,Y0,pd,Zw,nv,ta,PU,kU,fd,cn,to,Q0,Of,X0,Df,ra,eA,iv,J0,md,tA,Gr=k(()=>{Xs="initialize",Yn="name",W0="getNotifyMgr",Js="identifier",dt="push",Oo="isInitialized",ic="config",Qw="instrumentationKey",Ln="logger",Me="length",wf="time",sr="processNext",Xw="getProcessTelContext",Af="addNotificationListener",Rf="removeNotificationListener",RU="stopPollingInternalLogs",Pf="onComplete",kf="getPlugin",Zg="flush",K0="_extensions",_l="splice",Do="teardown",ev="messageId",ud="message",Zs="isAsync",tv="_doTeardown",Nf="update",Lo="getNext",_s="diagLog",dd="setNextPlugin",xl="createNew",Jw="cookieCfg",oc="indexOf",ea="substring",rv="userAgent",sc="split",Y0="setEnabled",pd="substr",Zw="nodeType",nv="apply",ta="replace",PU="enableDebugExceptions",kU="logInternalMessage",fd="toLowerCase",cn="call",to="type",Q0="handler",Of="listeners",X0="isChildEvt",Df="getCtx",ra="setCtx",eA="complete",iv="traceId",J0="spanId",md="traceFlags",tA="version"});var Ge,NU,kr,OU,Z0,ov,Hoe,ro,xs,sv,hd,av,gd,rA,ex,Lf,yn=k(()=>{Ge="",NU="channels",kr="core",OU="createPerfMgr",Z0="disabled",ov="extensionConfig",Hoe="extensions",ro="processTelemetry",xs="priority",sv="eventsSent",hd="eventsDiscarded",av="eventsSendRequest",gd="perfEvent",rA="errorToConsole",ex="warnToConsole",Lf="getPerfMgr"});function tFe(t){if(t){if(iA)return iA(t);var e=t[V2e]||t[an]||t[nA];if(e)return e}return null}function cv(t,e){return typeof t===e}function Bt(t){return t===void 0||typeof t===sn}function rt(t){return t===null||Bt(t)}function qU(t){return!rt(t)}function bl(t,e){return!!(t&&No[cn](t,e))}function Qn(t){return!!(t&&typeof t===on)}function yt(t){return!!(t&&typeof t===ys)}function Mf(t){var e=t;return e&&Nr(e)&&(e=e[ta](J2e,function(r,n){return n.toUpperCase()}),e=e[ta](Z2e,"_"),e=e[ta](eFe,function(r,n){return"_"+n})),e}function ar(t,e){if(t)for(var r in t)No[cn](t,r)&&e[cn](t,r,t[r])}function Ff(t,e){var r=!1;return t&&e&&!(r=t===e)&&(r=z2e?t[Yoe](e):rFe(t,e)),r}function rFe(t,e){var r=!1,n=e?e[Me]:0,i=t?t[Me]:0;if(n&&i&&i>=n&&!(r=t===e)){for(var o=i-1,s=n-1;s>=0;s--){if(t[o]!=e[s])return!1;o--}r=!0}return r}function lv(t,e){var r=!1;return t&&e&&!(r=t===e)&&(r=W2e?t[Qoe](e):nFe(t,e)),r}function nFe(t,e){var r=!1,n=e?e[Me]:0;if(t&&n&&t[Me]>=n&&!(r=t===e)){for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;r=!0}return r}function $r(t,e){return t&&e?t[oc](e)!==-1:!1}function uv(t){return!!(t&&UU[cn](t)==="[object Date]")}function iFe(t){return!!(t&&UU[cn](t)==="[object Array]")}function Bf(t){return!!(t&&UU[cn](t)==="[object Error]")}function Nr(t){return typeof t=="string"}function no(t){return typeof t=="number"}function El(t){return typeof t=="boolean"}function FU(t){var e=!1;if(t&&typeof t=="object"){var r=iA?iA(t):tFe(t);r?(r[nA]&&No[cn](r,nA)&&(r=r[nA]),e=typeof r===ys&&Joe[cn](r)===X2e):e=!0}return e}function bs(t){if(t)return Y2e?t[Koe]():oFe(t)}function oFe(t){if(t&&t.getUTCFullYear){var e=function(r){var n=String(r);return n[Me]===1&&(n="0"+n),n};return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function Se(t,e,r){var n=t[Me];try{for(var i=0;i<n&&!(i in t&&e[cn](r||t,t[i],i,t)===-1);i++);}catch{}}function _n(t,e,r){if(t){if(t[joe])return t[joe](e,r);var n=t[Me],i=r||0;try{for(var o=Math.max(i>=0?i:n-Math.abs(i),0);o<n;o++)if(o in t&&t[o]===e)return o}catch{}}return-1}function Uf(t,e,r){var n;if(t){if(t[Voe])return t[Voe](e,r);var i=t[Me],o=r||t;n=new Array(i);try{for(var s=0;s<i;s++)s in t&&(n[s]=e[cn](o,t[s],t))}catch{}}return n}function qf(t,e,r){var n;if(t){if(t[Goe])return t[Goe](e,r);var i=t[Me],o=0;if(arguments[Me]>=3)n=arguments[2];else{for(;o<i&&!(o in t);)o++;n=t[o++]}for(;o<i;)o in t&&(n=e(n,t[o],o,t)),o++}return n}function cr(t){return t&&(t=$2e&&t[LU]?t[LU]():t[ta]?t[ta](/^\s+|(?=\s)\s+$/g,Ge):t),t}function Oi(t){var e=typeof t;if(e!==ys&&(e!==on||t===null)&&Jg("objKeys called on non-object"),!Woe&&zoe)return zoe(t);var r=[];for(var n in t)t&&No[cn](t,n)&&r[dt](n);if(Woe)for(var i=DU[Me],o=0;o<i;o++)t&&No[cn](t,DU[o])&&r[dt](DU[o]);return r}function Mo(t,e,r,n){if($oe)try{var i={enumerable:!0,configurable:!0};return r&&(i.get=r),n&&(i.set=n),$oe(t,e,i),!0}catch{}return!1}function Zoe(t){return t}function HU(t){return MU&&ar(t,function(e,r){(et(r)||Qn(r))&&MU(r)}),io(t)}function xn(){var t=Date;return t.now?t.now():new t().getTime()}function Hf(t){return Bf(t)?t[Yn]:Ge}function oo(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function vd(t,e,r){var n;return t?(n=t[e],!n&&rt(n)&&(n=Bt(r)?{}:r,t[e]=n)):n=Bt(r)?{}:r,n}function Fo(t,e){return rt(t)?e:t}function VU(t){return!t}function dv(t){return!!t}function bn(t){throw new Error(t)}function ese(t,e){var r=null,n=null;return yt(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][nv](n,i)}}function GU(t,e,r){if(t&&e&&Qn(t)&&Qn(e)){var n=function(o){if(Nr(o)){var s=e[o];yt(s)?(!r||r(o,!0,e,t))&&(t[o]=ese(e,o)):(!r||r(o,!1,e,t))&&(bl(t,o)&&delete t[o],Mo(t,o,function(){return e[o]},function(a){e[o]=a})||(t[o]=s))}};for(var i in e)n(i)}return t}function yd(t,e,r,n,i){t&&e&&r&&(i!==!1||Bt(t[e]))&&(t[e]=ese(r,n))}function jf(t,e,r,n){return t&&e&&Qn(t)&&et(r)&&Se(r,function(i){Nr(i)&&yd(t,i,e,i,n)}),t}function Cl(t){return t&&Qg&&(t=ko(Qg({},t))),t}function pv(t,e,r,n,i,o){var s=arguments,a=s[0]||{},l=s[Me],c=!1,u=1;for(l>0&&El(a)&&(c=a,a=s[u]||{},u++),Qn(a)||(a={});u<l;u++){var d=s[u],p=et(d),f=Qn(d);for(var m in d){var h=p&&m in d||f&&No[cn](d,m);if(h){var g=d[m],v=void 0;if(c&&g&&((v=et(g))||FU(g))){var y=a[m];v?et(y)||(y=[]):FU(y)||(y={}),g=pv(c,y,g)}g!==void 0&&(a[m]=g)}}}return a}var Koe,Yoe,Qoe,joe,Voe,Goe,LU,Xoe,V2e,nA,$oe,MU,G2e,zoe,BU,$2e,z2e,W2e,K2e,Y2e,Q2e,UU,Joe,X2e,J2e,Z2e,eFe,iA,et,Woe,DU,io,jU,zr=k(()=>{eo();Gr();yn();Koe="toISOString",Yoe="endsWith",Qoe="startsWith",joe="indexOf",Voe="map",Goe="reduce",LU="trim",Xoe="toString",V2e="__proto__",nA="constructor",$oe=Xg,MU=ko.freeze,G2e=ko.seal,zoe=ko.keys,BU=String[an],$2e=BU[LU],z2e=BU[Yoe],W2e=BU[Qoe],K2e=Date[an],Y2e=K2e[Koe],Q2e=Array.isArray,UU=Yg[Xoe],Joe=No[Xoe],X2e=Joe[cn](ko),J2e=/-([a-z])/g,Z2e=/([^\w\d_$])/g,eFe=/^(\d+[\w\d_$])/,iA=Object.getPrototypeOf;et=Q2e||iFe;Woe=!{toString:null}.propertyIsEnumerable("toString"),DU=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];io=MU||Zoe,jU=G2e||Zoe});function Di(t){var e={};return ar(t,function(r,n){e[r]=n,e[n]=r}),HU(e)}var oA=k(()=>{zr()});var na,tse=k(()=>{oA();na=Di({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})});function aFe(){var t;return typeof globalThis!==aA&&(t=globalThis),!t&&typeof self!==aA&&(t=self),!t&&typeof window!==aA&&(t=window),!t&&typeof global!==aA&&(t=global),t||{}}function Tl(t,e){return t&&hA[Sl].hasOwnProperty.call(t,e)}function cse(t){return t&&(t===hA[Sl]||t===Array[Sl])}function XU(t){return cse(t)||t===Function[Sl]}function Vf(t){var e;if(t){if(rx)return rx(t);var r=t[ase]||t[Sl]||(t[uA]?t[uA][Sl]:null);e=t[cA]||r,Tl(t,cA)||(delete t[$U],e=t[cA]=t[$U]||t[cA],t[$U]=r)}return e}function fA(t,e){var r=[];if(ise)r=ise(t);else for(var n in t)typeof n=="string"&&Tl(t,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)e(r[i])}function JU(t,e,r){return e!==uA&&typeof t[e]===dA&&(r||Tl(t,e))}function mA(t){throw new TypeError("DynamicProto: "+t)}function cFe(t){var e={};return fA(t,function(r){!e[r]&&JU(t,r,!1)&&(e[r]=t[r])}),e}function ZU(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function lFe(t,e,r,n){function i(l,c,u){var d=c[u];if(d[WU]&&n){var p=l[pA]||{};p[tx]!==!1&&(d=(p[c[fv]]||{})[u]||d)}return function(){return d.apply(l,arguments)}}var o={};fA(r,function(l){o[l]=i(e,r,l)});for(var s=Vf(t),a=[];s&&!XU(s)&&!ZU(a,s);)fA(s,function(l){!o[l]&&JU(s,l,!rx)&&(o[l]=i(e,s,l))}),a.push(s),s=Vf(s);return o}function uFe(t,e,r,n){var i=null;if(t&&Tl(r,fv)){var o=t[pA]||{};if(i=(o[r[fv]]||{})[e],i||mA("Missing ["+e+"] "+dA),!i[KU]&&o[tx]!==!1){for(var s=!Tl(t,e),a=Vf(t),l=[];s&&a&&!XU(a)&&!ZU(l,a);){var c=a[e];if(c){s=c===n;break}l.push(a),a=Vf(a)}try{s&&(t[e]=i),i[KU]=1}catch{o[tx]=!1}}}return i}function dFe(t,e,r){var n=e[t];return n===r&&(n=Vf(e)[t]),typeof n!==dA&&mA("["+t+"] is not a "+dA),n}function pFe(t,e,r,n,i){function o(l,c){var u=function(){var d=uFe(this,c,l,u)||dFe(c,l,u);return d.apply(this,arguments)};return u[WU]=1,u}if(!cse(t)){var s=r[pA]=r[pA]||{},a=s[e]=s[e]||{};s[tx]!==!1&&(s[tx]=!!i),fA(r,function(l){JU(r,l,!1)&&r[l]!==n[l]&&(a[l]=r[l],delete r[l],(!Tl(t,l)||t[l]&&!t[l][WU])&&(t[l]=o(t,l)))})}}function fFe(t,e){if(rx){for(var r=[],n=Vf(e);n&&!XU(n)&&!ZU(r,n);){if(n===t)return!0;r.push(n),n=Vf(n)}return!1}return!0}function zU(t,e){return Tl(t,Sl)?t.name||e||rse:((t||{})[uA]||{}).name||e||rse}function Pt(t,e,r,n){Tl(t,Sl)||mA("theClass is an invalid class definition.");var i=t[Sl];fFe(i,e)||mA("["+zU(t)+"] not in hierarchy of ["+zU(e)+"]");var o=null;Tl(i,fv)?o=i[fv]:(o=sFe+zU(t,"_")+"$"+QU.n,QU.n++,i[fv]=o);var s=Pt[sse],a=!!s[lA];a&&n&&n[lA]!==void 0&&(a=!!n[lA]);var l=cFe(e),c=lFe(i,e,l,a);r(e,c);var u=!!rx&&!!s[YU];u&&n&&(u=!!n[YU]),pFe(i,o,e,l,u!==!1)}var sA,aA,uA,Sl,dA,pA,WU,fv,sFe,KU,tx,sse,rse,ase,cA,nse,$U,lA,YU,hA,rx,ise,ose,QU,Xn=k(()=>{aA="undefined",uA="constructor",Sl="prototype",dA="function",pA="_dynInstFuncs",WU="_isDynProxy",fv="_dynClass",sFe="_dynCls$",KU="_dynInstChk",tx=KU,sse="_dfOpts",rse="_unknown_",ase="__proto__",cA="_dyn"+ase,nse="__dynProto$Gbl",$U="_dynInstProto",lA="useBaseInst",YU="setInstFuncs",hA=Object,rx=hA.getPrototypeOf,ise=hA.getOwnPropertyNames;ose=aFe(),QU=ose[nse]||(ose[nse]={o:(sA={},sA[YU]=!0,sA[lA]=!0,sA),n:1e3});Pt[sse]=QU.o});function fse(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[an];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!Bt(i[e])}catch{}}return r}function oq(t){pse=t}function Or(t){var e=Ys();return e&&e[t]?e[t]:t===lse&&nx()?window:null}function nx(){return!!(typeof window===on&&window)}function ac(){return nx()?window:Or(lse)}function gA(){return!!(typeof document===on&&document)}function so(){return gA()?document:Or(mFe)}function ix(){return!!(typeof navigator===on&&navigator)}function Bo(){return ix()?navigator:Or(gFe)}function vA(){return!!(typeof history===on&&history)}function sq(){return vA()?history:Or(vFe)}function Gf(t){if(t&&pse){var e=Or("__mockLocation");if(e)return e}return typeof location===on&&location?location:Or(yFe)}function ox(){return typeof console!==sn?console:Or(_Fe)}function hv(){return Or(xFe)}function $f(){return!!(typeof JSON===on&&JSON||Or(use)!==null)}function gv(){return $f()?JSON||Or(use):null}function sx(){return Or(bFe)}function ax(){return Or(EFe)}function Il(){var t=Bo();return t&&t.product?t.product===CFe:!1}function ia(){var t=Bo();if(t&&(t[rv]!==tq||eq===null)){tq=t[rv];var e=(tq||Ge)[fd]();eq=$r(e,nq)||$r(e,iq)}return eq}function aq(t){if(t===void 0&&(t=null),!t){var e=Bo()||{};t=e?(e[rv]||Ge)[fd]():Ge}var r=(t||Ge)[fd]();if($r(r,nq)){var n=so()||{};return Math.max(parseInt(r[sc](nq)[1]),n[hFe]||0)}else if($r(r,iq)){var i=parseInt(r[sc](iq)[1]);if(i)return i+4}return null}function Er(t){var e=Object[an].toString[cn](t),r=Ge;return e==="[object Error]"?r="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t[Yn]+"'":$f()&&(r=gv().stringify(t)),e+r}function _d(){return rq===null&&(rq=ix()&&!!Bo().sendBeacon),rq}function vv(t){var e=!1;try{e=!!Or("fetch");var r=Or("Request");e&&t&&r&&(e=fse(r,"keepalive"))}catch{}return e}function zf(){return mv===null&&(mv=typeof XDomainRequest!==sn,mv&&yv()&&(mv=mv&&!fse(Or(dse),"withCredentials"))),mv}function yv(){var t=!1;try{var e=Or(dse);t=!!e}catch{}return t}function mse(t,e){if(t)for(var r=0;r<t[Me];r++){var n=t[r];if(n[Yn]&&n[Yn]===e)return n}return{}}function cq(t){var e=so();return e&&t?mse(e.querySelectorAll("meta"),t).content:null}function lq(t){var e,r=hv();if(r){var n=r.getEntriesByType("navigation")||[];e=mse((n[Me]>0?n[0]:{}).serverTiming,t).description}return e}var lse,mFe,hFe,gFe,vFe,yFe,_Fe,xFe,use,bFe,EFe,CFe,nq,iq,dse,eq,tq,pse,mv,rq,Es=k(()=>{"use strict";eo();Gr();zr();yn();lse="window",mFe="document",hFe="documentMode",gFe="navigator",vFe="history",yFe="location",_Fe="console",xFe="performance",use="JSON",bFe="crypto",EFe="msCrypto",CFe="ReactNative",nq="msie",iq="trident/",dse="XMLHttpRequest",eq=null,tq=null,pse=!1,mv=null,rq=null});function SFe(t,e){return function(){var r=arguments,n=dq(e);if(n){var i=n.listener;i&&i[t]&&i[t][nv](i,r)}}}function TFe(){var t=Or("Microsoft");return t&&(_A=t.ApplicationInsights),_A}function dq(t){var e=_A;return!e&&t.disableDbgExt!==!0&&(e=_A||TFe()),e?e.ChromeDbgExt:null}function hse(t){if(!yA){yA={};for(var e=0;e<uq[Me];e++)yA[uq[e]]=SFe(uq[e],t)}return yA}var uq,_A,yA,pq=k(()=>{Gr();Es();uq=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],_A=null});function gse(t){return t?'"'+t[ta](/\"/g,Ge)+'"':Ge}function vse(t,e){var r=ox();if(r){var n="log";r[t]&&(n=t),yt(r[n])&&r[n](e)}}function cx(t,e){return(t||{})[Ln]||new oa(e)}function fq(t){return t||new oa}function vr(t,e,r,n,i,o){o===void 0&&(o=!1),fq(t).throwInternal(e,r,n,i,o)}function sa(t,e){fq(t)[ex](e)}function mq(t,e,r){fq(t)[kU](e,r)}var IFe,wFe,AFe,Wf,oa,xd=k(()=>{"use strict";Xn();Gr();pq();Es();zr();yn();IFe="AI (Internal): ",wFe="AI: ",AFe="AITR_";Wf=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[ev]=e,o[ud]=(n?wFe:IFe)+e;var s=Ge;$f()&&(s=gv().stringify(i));var a=(r?" message:"+gse(r):Ge)+(i?" props:"+gse(s):Ge);o[ud]+=a}return t.dataType="MessageData",t}();oa=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a;Pt(t,this,function(l){u(e||{}),l.consoleLoggingLevel=function(){return i},l.telemetryLoggingLevel=function(){return o},l.maxInternalMessageLimit=function(){return s},l[PU]=function(){return a},l.throwInternal=function(f,m,h,g,v){v===void 0&&(v=!1);var y=new Wf(m,h,v,g);if(a)throw Er(y);var _=f===1?rA:ex;if(Bt(y[ud]))p("throw"+(f===1?"Critical":"Warning"),y);else{if(v){var T=+y[ev];!n[T]&&i>=f&&(l[_](y[ud]),n[T]=!0)}else i>=f&&l[_](y[ud]);c(f,y)}},l[ex]=function(f){vse("warn",f),p("warning",f)},l[rA]=function(f){vse("error",f),p("error",f)},l.resetInternalMessageCount=function(){r=0,n={}},l[kU]=c;function c(f,m){if(!d()){var h=!0,g=AFe+m[ev];if(n[g]?h=!1:n[g]=!0,h&&(f<=o&&(l.queue[dt](m),r++,p(f===1?"error":"warn",m)),r===s)){var v="Internal events throttle limit per PageView reached for this app.",y=new Wf(23,v,!1);l.queue[dt](y),f===1?l[rA](v):l[ex](v)}}}function u(f){i=Fo(f.loggingLevelConsole,0),o=Fo(f.loggingLevelTelemetry,1),s=Fo(f.maxMessageLimit,25),a=Fo(f.enableDebug,Fo(f[PU],!1))}function d(){return r>=s}function p(f,m){var h=dq(e||{});h&&h[_s]&&h[_s](f,m)}})}return t.__ieDyn=1,t}()});function Ur(t,e,r,n,i){if(t){var o=t;if(o[Lf]&&(o=o[Lf]()),o){var s=void 0,a=o[Df](hq);try{if(s=o.create(e(),n,i),s){if(a&&s[ra]&&(s[ra](Kf[gq],a),a[Df]&&a[ra])){var l=a[Df](Kf[lx]);l||(l=[],a[ra](Kf[lx],l)),l[dt](s)}return o[ra](hq,s),r(s)}}catch(c){s&&s[ra]&&s[ra]("exception",c)}finally{s&&o.fire(s),o[ra](hq,a)}}}return r()}function vq(){return RFe}var _v,gq,lx,RFe,Kf,ux,hq,dx=k(()=>{Xn();Gr();zr();yn();_v="ctx",gq="ParentContextKey",lx="ChildrenContextKey",RFe=null,Kf=function(){function t(e,r,n){var i=this,o=!1;if(i.start=xn(),i[Yn]=e,i[Zs]=n,i[X0]=function(){return!1},yt(r)){var s;o=Mo(i,"payload",function(){return!s&&yt(r)&&(s=r(),r=null),s})}i[Df]=function(a){return a?a===t[gq]||a===t[lx]?i[a]:(i[_v]||{})[a]:null},i[ra]=function(a,l){if(a)if(a===t[gq])i[a]||(i[X0]=function(){return!0}),i[a]=l;else if(a===t[lx])i[a]=l;else{var c=i[_v]=i[_v]||{};c[a]=l}},i[eA]=function(){var a=0,l=i[Df](t[lx]);if(et(l))for(var c=0;c<l[Me];c++){var u=l[c];u&&(a+=u[wf])}i[wf]=xn()-i.start,i.exTime=i[wf]-a,i[eA]=function(){},!o&&yt(r)&&(i.payload=r())}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),ux=function(){function t(e){this.ctx={},Pt(t,this,function(r){r.create=function(n,i,o){return new Kf(n,i,o)},r.fire=function(n){n&&(n[eA](),e&&yt(e[gd])&&e[gd](n))},r[ra]=function(n,i){if(n){var o=r[_v]=r[_v]||{};o[n]=i}},r[Df]=function(n){return(r[_v]||{})[n]}})}return t.__ieDyn=1,t}(),hq="CoreUtils.doPerf"});function xse(t){t<0&&(t>>>=0),px=123456789+t&bd,fx=987654321-t&bd,_se=!0}function bse(){try{var t=xn()&2147483647;xse((Math.random()*yse^t)+t)}catch{}}function xv(t){return t>0?Math.floor(aa()/bd*(t+1))>>>0:0}function aa(t){var e=0,r=sx()||ax();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&bd),e===0&&ia()&&(_se||bse(),e=mx()&bd),e===0&&(e=Math.floor(yse*Math.random()|0)),t||(e>>>=0),e}function xA(t){t?xse(t):bse()}function mx(t){fx=36969*(fx&65535)+(fx>>16)&bd,px=18e3*(px&65535)+(px>>16)&bd;var e=(fx<<16)+(px&65535)>>>0&bd|0;return t||(e>>>=0),e}function Ed(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=aa()>>>0,n=0,i=Ge;i[Me]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(aa()<<2&4294967295|r&3)>>>0,n=0);return i}var yse,bd,_se,px,fx,bA=k(()=>{Gr();Es();zr();yn();yse=4294967296,bd=4294967295,_se=!1,px=123456789,fx=987654321});function NFe(t,e,r){if(Ese)try{return Ese(t,e,{value:r,enumerable:!1,configurable:!0}),!0}catch{}return!1}function Sse(t){return t[Zw]===1||t[Zw]===9||!+t[Zw]}function OFe(t,e){var r=e[t.id];if(!r){r={};try{Sse(e)&&(NFe(e,t.id,r)||(e[t.id]=r))}catch{}}return r}function ca(t,e){return e===void 0&&(e=!1),Mf(t+kFe+++(e?"."+Cse:Ge)+PFe)}function EA(t){var e={id:ca("_aiData-"+(t||Ge)+"."+Cse),accept:function(r){return Sse(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[Mf(n)]:(o&&(s=OFe(e,r),s[Mf(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var Ese,Cse,PFe,kFe,hx=k(()=>{eo();Gr();zr();yn();bA();Ese=Xg,Cse="2.8.16",PFe="."+Ed(6),kFe=0});function DFe(t,e){var r=wl[Cd]||TA[Cd];return r||(r=wl[Cd]=wl(t,e),TA[Cd]=r),r}function SA(t){return t?t.isEnabled():!0}function LFe(t){var e=t[Jw]=t[Jw]||{};if(oo(e,"domain",t.cookieDomain,qU,rt),oo(e,"path",t.cookiePath||"/",null,rt),rt(e[xq])){var r=void 0;Bt(t[wse])||(r=!t[wse]),Bt(t[Ase])||(r=!t[Ase]),e[xq]=r}return e}function Dse(t,e){return e&&t&&et(t.ignoreCookies)?t.ignoreCookies[oc](e)!==-1:!1}function MFe(t,e){return e&&t&&et(t.blockedCookies)&&t.blockedCookies[oc](e)!==-1?!0:Dse(t,e)}function Sd(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e[Jw];n[Cd]?r=n[Cd]:r=wl(e)}return r||(r=DFe(e,(t||{})[Ln])),r}function wl(t,e){var r,n=LFe(t||TA),i=n.path||"/",o=n.domain,s=n[xq]!==!1,a=(r={isEnabled:function(){var l=s&&la(e),c=TA[Cd];return l&&c&&a!==c&&(l=SA(c)),l}},r[Y0]=function(l){s=l!==!1},r.set=function(l,c,u,d,p){var f=!1;if(SA(a)&&!MFe(n,l)){var m={},h=cr(c||Ge),g=h[oc](";");if(g!==-1&&(h=cr(c[ea](0,g)),m=Lse(c[ea](g+1))),oo(m,"domain",d||o,dv,Bt),!rt(u)){var v=ia();if(Bt(m[yq])){var y=xn(),_=y+u*1e3;if(_>0){var T=new Date;T.setTime(_),oo(m,yq,kse(T,v?Tse:Ise)||kse(T,v?Tse:Ise)||Ge,dv)}}v||oo(m,"max-age",Ge+u,null,Bt)}var I=Gf();I&&I.protocol==="https:"&&(oo(m,"secure",null,null,Bt),_q===null&&(_q=!bv((Bo()||{})[rv])),_q&&oo(m,"SameSite","None",null,Bt)),oo(m,"path",p||i,null,Bt);var R=n.setCookie||Ose;R(l,Nse(h,m)),f=!0}return f},r.get=function(l){var c=Ge;return SA(a)&&!Dse(n,l)&&(c=(n.getCookie||FFe)(l)),c},r.del=function(l,c){var u=!1;return SA(a)&&(u=a.purge(l,c)),u},r.purge=function(l,c){var u,d=!1;if(la(e)){var p=(u={},u.path=c||"/",u[yq]="Thu, 01 Jan 1970 00:00:01 GMT",u);ia()||(p["max-age"]="0");var f=n.delCookie||Ose;f(l,Nse(Ge,p)),d=!0}return d},r);return a[Cd]=a,a}function la(t){if(CA===null){CA=!1;try{var e=gx||{};CA=e[bq]!==void 0}catch(r){vr(t,2,68,"Cannot access document.cookie - "+Hf(r),{exception:Er(r)})}}return CA}function Lse(t){var e={};if(t&&t[Me]){var r=cr(t)[sc](";");Se(r,function(n){if(n=cr(n||Ge),n){var i=n[oc]("=");i===-1?e[n]=null:e[cr(n[ea](0,i))]=cr(n[ea](i+1))}})}return e}function kse(t,e){return yt(t[e])?t[e]():null}function Nse(t,e){var r=t||Ge;return ar(e,function(n,i){r+="; "+n+(rt(i)?Ge:"="+i)}),r}function FFe(t){var e=Ge;if(gx){var r=gx[bq]||Ge;Rse!==r&&(Pse=Lse(r),Rse=r),e=cr(Pse[t]||Ge)}return e}function Ose(t,e){gx&&(gx[bq]=t+"="+e)}function bv(t){return Nr(t)?!!($r(t,"CPU iPhone OS 12")||$r(t,"iPad; CPU OS 12")||$r(t,"Macintosh; Intel Mac OS X 10_14")&&$r(t,"Version/")&&$r(t,"Safari")||$r(t,"Macintosh; Intel Mac OS X 10_14")&&Ff(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||$r(t,"Chrome/5")||$r(t,"Chrome/6")||$r(t,"UnrealEngine")&&!$r(t,"Chrome")||$r(t,"UCBrowser/12")||$r(t,"UCBrowser/11")):!1}var Tse,Ise,bq,yq,xq,wse,Ase,Cd,CA,_q,Rse,gx,Pse,TA,Eq=k(()=>{Gr();xd();Es();zr();yn();Tse="toGMTString",Ise="toUTCString",bq="cookie",yq="expires",xq="enabled",wse="isCookieUseDisabled",Ase="disableCookiesUsage",Cd="_ckMgr",CA=null,_q=null,Rse=null,gx=so(),Pse={},TA={}});function qse(t){return t&&t[ta]?t[ta](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ge):t}function AA(t,e){var r;if(e){var n=Ge;et(e)?(n=Ge,Se(e,function(o){o=qse(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=qse(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Ge)+n)}var i=HFe.exec(t||Ge)||[];return r={},r[to]=i[1],r.ns=(i[2]||Ge).replace(BFe,".").replace(UFe,Ge)[sc](".").sort().join("."),r}function Cq(t,e,r){var n=[],i=yx.get(t,IA,{},!1),o=AA(e,r);return ar(i,function(s,a){Se(a,function(l){var c;(!o[to]||o[to]===l.evtName[to])&&(!o.ns||o.ns===o.ns)&&n[dt]((c={},c[Yn]=l.evtName[to]+(l.evtName.ns?"."+l.evtName.ns:Ge),c.handler=l[Q0],c))})}),n}function Kse(t,e,r){r===void 0&&(r=!0);var n=yx.get(t,IA,{},r),i=n[e];return i||(i=n[e]=[]),i}function Yse(t,e,r,n){t&&e&&e[to]&&(t[Use]?t[Use](e[to],r,n):t[Bse]&&t[Bse](jse+e[to],r))}function jFe(t,e,r,n){var i=!1;return t&&e&&e[to]&&r&&(t[Fse]?(t[Fse](e[to],r,n),i=!0):t[Mse]&&(t[Mse](jse+e[to],r),i=!0)),i}function Hse(t,e,r,n){for(var i=e[Me];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(Yse(t,o.evtName,o[Q0],o.capture),e[_l](i,1))}}function VFe(t,e,r){if(e[to])Hse(t,Kse(t,e[to]),e,r);else{var n=yx.get(t,IA,{});ar(n,function(i,o){Hse(t,o,e,r)}),Oi(n)[Me]===0&&yx.kill(t,IA)}}function Al(t,e){var r;return e?(et(e)?r=[t].concat(e):r=[t,e],r=AA("xx",r).ns[sc](".")):r=t,r}function Yf(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=AA(e,n);if(s=jFe(t,a,r,i),s&&yx.accept(t)){var l=(o={guid:qFe++,evtName:a},o[Q0]=r,o.capture=i,o);Kse(t,a.type)[dt](l)}}catch{}return s}function Qf(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=AA(e,n),s=!1;VFe(t,o,function(a){return o.ns&&!r||a[Q0]===r?(s=!0,!0):!1}),s||Yse(t,o,r,i)}catch{}}function Cv(t,e,r,n){return n===void 0&&(n=!1),Yf(t,e,r,null,n)}function Sv(t,e,r,n){n===void 0&&(n=!1),Qf(t,e,r,null,n)}function Id(t,e,r){var n=!1,i=ac();i&&(n=Yf(i,t,e,r),n=Yf(i.body,t,e,r)||n);var o=so();return o&&(n=Yf(o,t,e,r)||n),n}function RA(t,e,r){var n=ac();n&&(Qf(n,t,e,r),Qf(n.body,t,e,r));var i=so();i&&Qf(i,t,e,r)}function Ev(t,e,r,n){var i=!1;return e&&t&&t[Me]>0&&Se(t,function(o){o&&(!r||_n(r,o)===-1)&&(i=Id(o,e,n)||i)}),i}function PA(t,e,r,n){var i=!1;return e&&t&&et(t)&&(i=Ev(t,e,r,n),!i&&r&&r[Me]>0&&(i=Ev(t,e,null,n))),i}function Td(t,e,r){t&&et(t)&&Se(t,function(n){n&&RA(n,e,r)})}function Xf(t,e,r){return PA([$se,Gse,wA],t,e,r)}function _x(t,e){Td([$se,Gse,wA],t,e)}function Tv(t,e,r){function n(s){var a=so();t&&a&&a.visibilityState==="hidden"&&t(s)}var i=Al(zse,r),o=Ev([wA],t,e,i);return(!e||_n(e,vx)===-1)&&(o=Ev([vx],n,e,i)||o),!o&&e&&(o=Tv(t,null,r)),o}function xx(t,e){var r=Al(zse,e);Td([wA],t,r),Td([vx],null,r)}function Iv(t,e,r){function n(s){var a=so();t&&a&&a.visibilityState==="visible"&&t(s)}var i=Al(Wse,r),o=Ev([Vse],t,e,i);return o=Ev([vx],n,e,i)||o,!o&&e&&(o=Iv(t,null,r)),o}function bx(t,e){var r=Al(Wse,e);Td([Vse],t,r),Td([vx],null,r)}var jse,Mse,Fse,Bse,Use,IA,vx,wA,Vse,Gse,$se,zse,Wse,BFe,UFe,qFe,yx,HFe,Sq=k(()=>{Gr();hx();Es();zr();yn();jse="on",Mse="attachEvent",Fse="addEventListener",Bse="detachEvent",Use="removeEventListener",IA="events",vx="visibilitychange",wA="pagehide",Vse="pageshow",Gse="unload",$se="beforeunload",zse=ca("aiEvtPageHide"),Wse=ca("aiEvtPageShow"),BFe=/\.[\.]+/g,UFe=/[\.]+$/,qFe=1,yx=EA("events"),HFe=/^([^.]*)(?:\.(.+)|)/});function wv(){var t=Rl();return t[ea](0,8)+"-"+t[ea](8,12)+"-"+t[ea](12,16)+"-"+t[ea](16,20)+"-"+t[ea](20)}function Av(){var t=hv();return t&&t.now?t.now():xn()}function Rl(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Ge,r,n=0;n<4;n++)r=aa(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(aa()&3)|0];return e[pd](0,8)+e[pd](9,4)+"4"+e[pd](13,3)+i+e[pd](16,3)+e[pd](19,12)}var Tq,Iq=k(()=>{"use strict";Gr();Es();Sq();zr();yn();bA();Tq={Attach:Cv,AttachEvent:Cv,Detach:Sv,DetachEvent:Sv}});function Pl(t,e,r){return t&&t[Me]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function Xse(t,e,r){return Pl(t,e)?t:r}function Jse(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[Me]<2;)e="0"+e;return e}function Rq(t,e,r,n){var i;return i={},i[tA]=Pl(n,2,Aq)?n:wq,i[iv]=Rv(t)?t:Rl(),i.spanId=Pv(e)?e:Rl()[pd](0,16),i.traceFlags=r>=0&&r<=255?r:1,i}function Ex(t,e){var r;if(!t||(et(t)&&(t=t[0]||""),!t||!Nr(t)||t[Me]>8192))return null;if(t[oc](",")!==-1){var n=t[sc](",");t=n[e>0&&n[Me]>e?e:0]}var i=GFe.exec(cr(t));return!i||i[1]===Aq||i[2]===kA||i[3]===NA?null:(r={version:(i[1]||Ge)[fd](),traceId:(i[2]||Ge)[fd](),spanId:(i[3]||Ge)[fd]()},r[md]=parseInt(i[4],16),r)}function Rv(t){return Pl(t,32,kA)}function Pv(t){return Pl(t,16,NA)}function OA(t){return!(!t||!Pl(t[tA],2,Aq)||!Pl(t[iv],32,kA)||!Pl(t[J0],16,NA)||!Pl(Jse(t[md]),2))}function Pq(t){return OA(t)?(t[md]&Qse)===Qse:!1}function kq(t){if(t){var e=Jse(t[md]);Pl(e,2)||(e="01");var r=t[tA]||wq;return r!=="00"&&r!=="ff"&&(r=wq),"".concat(r.toLowerCase(),"-").concat(Xse(t.traceId,32,kA).toLowerCase(),"-").concat(Xse(t.spanId,16,NA).toLowerCase(),"-").concat(e.toLowerCase())}return""}function Nq(t){var e="traceparent",r=Ex(cq(e),t);return r||(r=Ex(lq(e),t)),r}var GFe,wq,Aq,kA,NA,Qse,Oq=k(()=>{Gr();Iq();Es();zr();yn();GFe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,wq="00",Aq="ff",kA="00000000000000000000000000000000",NA="0000000000000000",Qse=1});function kl(t){return $Fe.get(t,"state",{},!0)}function DA(t,e){for(var r=[],n=null,i=t[Lo](),o;i;){var s=i[kf]();if(s){n&&yt(n[dd])&&yt(s[ro])&&n[dd](s);var a=!1;yt(s[Oo])?a=s[Oo]():(o=kl(s),a=o[Oo]),a||r[dt](s),n=s,i=i[Lo]()}}Se(r,function(l){var c=t[kr]();l[Xs](t.getCfg(),c,e,t[Lo]()),o=kl(l),!l[kr]&&!o[kr]&&(o[kr]=c),o[Oo]=!0,delete o[Do]})}function LA(t){return t.sort(function(e,r){var n=0;if(r){var i=yt(r[ro]);yt(e[ro])?n=i?e[xs]-r[xs]:1:i&&(n=-1)}else n=e?1:-1;return n})}function Zse(t){var e={};return{getName:function(){return e[Yn]},setName:function(r){t&&t.setName(r),e[Yn]=r},getTraceId:function(){return e[iv]},setTraceId:function(r){t&&t.setTraceId(r),Rv(r)&&(e[iv]=r)},getSpanId:function(){return e[J0]},setSpanId:function(r){t&&t.setSpanId(r),Pv(r)&&(e[J0]=r)},getTraceFlags:function(){return e[md]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[md]=r}}}var $Fe,MA=k(()=>{"use strict";Gr();hx();zr();yn();Oq();$Fe=EA("plugin")});function WFe(t,e,r){for(;t;){if(t[kf]()===r)return t;t=t[Lo]()}return cc([r],e[ic]||{},e)}function Dq(t,e,r,n){var i=null,o=[];n!==null&&(i=n?WFe(t,r,n):t);var s={_next:l,ctx:{core:function(){return r},diagLog:function(){return cx(r,e)},getCfg:function(){return e},getExtCfg:c,getConfig:u,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(p){i=p},iterate:d,onComplete:a}};function a(p,f){for(var m=[],h=2;h<arguments.length;h++)m[h-2]=arguments[h];p&&o[dt]({func:p,self:Bt(f)?s.ctx:f,args:m})}function l(){var p=i;if(i=p?p[Lo]():null,!p){var f=o;f&&f[Me]>0&&(Se(f,function(m){try{m.func[cn](m.self,m.args)}catch(h){vr(r[Ln],2,73,"Unexpected Exception during onComplete - "+Er(h))}}),o=[])}return p}function c(p,f,m){f===void 0&&(f={}),m===void 0&&(m=0);var h;if(e){var g=e[ov];g&&p&&(h=g[p])}if(!h)h=f;else if(Qn(f)&&m!==0){var v=pv(!0,f,h);e&&m===2&&ar(f,function(y){if(rt(v[y])){var _=e[y];rt(_)||(v[y]=_)}}),h=v}return h}function u(p,f,m){m===void 0&&(m=!1);var h,g=c(p,null);return g&&!rt(g[f])?h=g[f]:e&&!rt(e[f])&&(h=e[f]),rt(h)?m:h}function d(p){for(var f;f=s._next();){var m=f[kf]();m&&p(m)}}return s}function ao(t,e,r,n){var i=Dq(t,e,r,n),o=i.ctx;function s(l){var c=i._next();return c&&c[ro](l,o),!c}function a(l,c){return l===void 0&&(l=null),et(l)&&(l=cc(l,e,r,c)),ao(l||o[Lo](),e,r,c)}return o[sr]=s,o[xl]=a,o}function kv(t,e,r){var n=e[ic]||{},i=Dq(t,n,e,r),o=i.ctx;function s(l){var c=i._next();return c&&c.unload(o,l),!c}function a(l,c){return l===void 0&&(l=null),et(l)&&(l=cc(l,n,e,c)),kv(l||o[Lo](),e,c)}return o[sr]=s,o[xl]=a,o}function Cx(t,e,r){var n=e[ic]||{},i=Dq(t,n,e,r),o=i.ctx;function s(l){return o.iterate(function(c){yt(c[Nf])&&c[Nf](o,l)})}function a(l,c){return l===void 0&&(l=null),et(l)&&(l=cc(l,n,e,c)),Cx(l||o[Lo](),e,c)}return o[sr]=s,o[xl]=a,o}function cc(t,e,r,n){var i=null,o=!n;if(et(t)&&t[Me]>0){var s=null;Se(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&yt(a[ro])){var l=KFe(a,e,r);i||(i=l),s&&s._setNext(l),s=l}})}return n&&!i?cc([n],e,r):i}function KFe(t,e,r){var n=null,i=yt(t[ro]),o=yt(t[dd]),s;t?s=t[Js]+"-"+t[xs]+"-"+rae++:s="Unknown-0-"+rae++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:u,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function l(){var f;return t&&yt(t[tae])&&(f=t[tae]()),f||(f=ao(a,e,r)),f}function c(f,m,h,g,v){var y=!1,_=t?t[Js]:zFe,T=f[eae];return T||(T=f[eae]={}),f.setNext(n),t&&Ur(f[kr](),function(){return _+":"+h},function(){T[s]=!0;try{var I=n?n._id:Ge;I&&(T[I]=!1),y=m(f)}catch(w){var R=n?T[n._id]:!0;R&&(y=!0),(!n||!R)&&vr(f[_s](),1,73,"Plugin ["+_+"] failed during "+h+" - "+Er(w)+", run flags: "+Er(T))}},g,v),y}function u(f,m){m=m||l();function h(g){if(!t||!i)return!1;var v=kl(t);return v[Do]||v[Z0]?!1:(o&&t[dd](n),t[ro](f,g),!0)}c(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[sr](f)}function d(f,m){function h(){var g=!1;if(t){var v=kl(t),y=t[kr]||v[kr];t&&(!y||y===f.core())&&!v[Do]&&(v[kr]=null,v[Do]=!0,v[Oo]=!1,t[Do]&&t[Do](f,m)===!0&&(g=!0))}return g}c(f,h,"unload",function(){},m[Zs])||f[sr](m)}function p(f,m){function h(){var g=!1;if(t){var v=kl(t),y=t[kr]||v[kr];t&&(!y||y===f.core())&&!v[Do]&&t[Nf]&&t[Nf](f,m)===!0&&(g=!0)}return g}c(f,h,"update",function(){},!1)||f[sr](m)}return io(a)}var zFe,eae,tae,rae,Lq,Sx=k(()=>{"use strict";Gr();xd();Es();zr();yn();dx();MA();zFe="TelemetryPluginChain",eae="_hasRun",tae="_getTelCtx",rae=0;Lq=function(){function t(e,r,n,i){var o=this,s=ao(e,r,n,i);jf(o,s,Oi(s))}return t}()});function nae(t,e,r){e&&et(e)&&e[Me]>0&&(e=e.sort(function(n,i){return n[xs]-i[xs]}),Se(e,function(n){n[xs]<Tx&&bn(YFe+n[Js])}),t[dt]({queue:io(e),chain:cc(e,r[ic],r)}))}function iae(t,e){function r(){return ao(null,e[ic],e,null)}function n(c,u,d,p){var f=c?c[Me]+1:1;function m(){f--,f===0&&(p&&p(),p=null)}f>0&&Se(c,function(h){if(h&&h.queue[Me]>0){var g=h.chain,v=u[xl](g);v[Pf](m),d(v)}else f--}),m()}function i(c,u){var d=u||{reason:0};return n(t,c,function(p){p[sr](d)},function(){c[sr](d)}),!0}function o(c,u){var d=u||{reason:0,isAsync:!1};return n(t,c,function(p){p[sr](d)},function(){c[sr](d),a=!1}),!0}function s(c){var u=null;return t&&t[Me]>0&&Se(t,function(d){if(d&&d.queue[Me]>0&&(Se(d.queue,function(p){if(p[Js]===c)return u=p,-1}),u))return-1}),u}var a=!1,l={identifier:"ChannelControllerPlugin",priority:Tx,initialize:function(c,u,d,p){a=!0,Se(t,function(f){f&&f.queue[Me]>0&&DA(ao(f.chain,c,u),d)})},isInitialized:function(){return a},processTelemetry:function(c,u){n(t,u||r(),function(d){d[sr](c)},function(){u[sr](c)})},update:i,pause:function(){n(t,r(),function(c){c.iterate(function(u){u.pause&&u.pause()})},null)},resume:function(){n(t,r(),function(c){c.iterate(function(u){u.resume&&u.resume()})},null)},teardown:o,getChannel:s,flush:function(c,u,d,p){var f=1,m=!1,h=null;p=p||5e3;function g(){f--,m&&f===0&&(h&&(clearTimeout(h),h=null),u&&u(m),u=null)}return n(t,r(),function(v){v.iterate(function(y){if(y[Zg]){f++;var _=!1;y[Zg](c,function(){_=!0,g()},d)||_||(c&&h==null?h=setTimeout(function(){h=null,g()},p):g())}})},function(){m=!0,g()}),!0},_setQueue:function(c){t=c}};return l}function oae(t,e,r){var n=[];if(t&&Se(t,function(o){return nae(n,o,r)}),e){var i=[];Se(e,function(o){o[xs]>Tx&&i[dt](o)}),nae(n,i,r)}return n}var Tx,YFe,sae=k(()=>{Gr();zr();yn();Sx();MA();Tx=500,YFe="Channel has invalid priority - "});function Jf(){var t=[];function e(n){n&&t[dt](n)}function r(n,i){Se(t,function(o){try{o(n,i)}catch(s){vr(n[_s](),2,73,"Unexpected error calling unload handler - "+Er(s))}}),t=[]}return{add:e,run:r}}var FA=k(()=>{Gr();xd();Es();zr()});var wd,Zf,Mq=k(()=>{"use strict";Xn();Gr();zr();yn();Sx();FA();wd="getPlugin",Zf=function(){function t(){var e=this,r,n,i,o,s;c(),Pt(t,e,function(u){u[Xs]=function(d,p,f,m){l(d,p,m),r=!0},u[Do]=function(d,p){var f,m=u[kr];if(!m||d&&m!==d[kr]())return;var h,g=!1,v=d||kv(null,m,i&&i[wd]?i[wd]():i),y=p||(f={reason:0},f[Zs]=!1,f);function _(){if(!g){g=!0,o.run(v,p);var T=s;s=[],Se(T,function(I){I.rm()}),h===!0&&v[sr](y),c()}}return!u[tv]||u[tv](v,y,_)!==!0?_():h=!0,h},u[Nf]=function(d,p){var f=u[kr];if(!f||d&&f!==d[kr]())return;var m,h=!1,g=d||Cx(null,f,i&&i[wd]?i[wd]():i),v=p||{reason:0};function y(){h||(h=!0,l(g.getCfg(),g.core(),g[Lo]()))}return!u._doUpdate||u._doUpdate(g,v,y)!==!0?y():m=!0,m},u._addHook=function(d){d&&(et(d)?s=s.concat(d):s[dt](d))},yd(u,"_addUnloadCb",function(){return o},"add")}),e[_s]=function(u){return a(u)[_s]()},e[Oo]=function(){return r},e.setInitialized=function(u){r=u},e[dd]=function(u){i=u},e[sr]=function(u,d){d?d[sr](u):i&&yt(i[ro])&&i[ro](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var d=u;if(!d){var p=n||ao(null,{},e[kr]);i&&i[wd]?d=p[xl](null,i[wd]):d=p[xl](null,i)}return d}function l(u,d,p){u&&oo(u,ov,[],null,rt),!p&&d&&(p=d[Xw]()[Lo]());var f=i;i&&i[wd]&&(f=i[wd]()),e[kr]=d,n=ao(p,u,d,f)}function c(){r=!1,e[kr]=null,n=null,i=null,s=[],o=Jf()}}return t.__ieDyn=1,t}()});var aae,cae=k(()=>{eo();Xn();Gr();Mq();xd();Es();zr();yn();aae=function(t){Qs(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),Pt(e,r,function(s,a){s.addTelemetryInitializer=function(l){var c={id:n++,fn:l};i[dt](c);var u={remove:function(){Se(i,function(d,p){if(d.id===c.id)return i[_l](p,1),-1})}};return u},s[ro]=function(l,c){for(var u=!1,d=i[Me],p=0;p<d;++p){var f=i[p];if(f)try{if(f.fn[nv](null,[l])===!1){u=!0;break}}catch(m){vr(c[_s](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Hf(m),{exception:Er(m)},!0)}}u||s[sr](l,c)},s[tv]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(Zf)});function JFe(t,e){return new ux(e)}function ZFe(t,e,r){var n,i=[],o={};return Se(r,function(s){(rt(s)||rt(s[Xs]))&&bn(pae);var a=s[xs],l=s[Js];s&&a&&(rt(o[a])?o[a]=l:sa(t,"Two extensions have same priority #"+a+" - "+o[a]+", "+l)),(!a||a<e)&&i[dt](s)}),n={all:r},n[kr]=i,n}function dae(t,e){var r=!1;return Se(e,function(n){if(n===t)return r=!0,-1}),r}function eBe(){var t;return nc((t={},t[Af]=function(e){},t[Rf]=function(e){},t[sv]=function(e){},t[hd]=function(e,r){},t[av]=function(e,r){},t))}var pae,lae,uae,QFe,XFe,em,Fq=k(()=>{"use strict";eo();Xn();eo();Gr();sae();Eq();hx();pq();xd();zr();yn();dx();Sx();MA();cae();FA();pae="Plugins must provide initialize method",lae="_notificationManager",uae="SDK is still unloading...",QFe="SDK is not initialized",XFe={loggingLevelConsole:1};em=function(){function t(){var e,r,n,i,o,s,a,l,c,u,d,p,f,m,h,g,v,y,_,T,I=0,R=!1;Pt(t,this,function(w){V(),w[Oo]=function(){return r},w[Xs]=function(z,Z,ve,he){m&&bn(uae),w[Oo]()&&bn("Core should not be initialized more than once"),e=z||{},w[ic]=e,rt(z[Qw])&&bn("Please provide instrumentation key"),i=he,w[lae]=he,W(),xe(),Ye(),ve&&(w[Ln]=ve);var ne=vd(e,Hoe,[]);c=[],c[dt].apply(c,Yw(Yw([],Z,!1),ne,!1)),p=vd(e,NU,[]),A(null),(!f||f[Me]===0)&&bn("No "+NU+" available"),r=!0,w.releaseQueue()},w.getTransmissionControls=function(){var z=[];return f&&Se(f,function(Z){z[dt](Z.queue)}),io(z)},w.track=function(z){z.iKey=z.iKey||e[Qw],z[wf]=z[wf]||bs(new Date),z.ver=z.ver||"4.0",!m&&w[Oo]()?L()[sr](z):n[dt](z)},w[Xw]=L,w[W0]=function(){return i||(i=eBe(),w[lae]=i),i},w[Af]=function(z){i&&i[Af](z)},w[Rf]=function(z){i&&i[Rf](z)},w.getCookieMgr=function(){return a||(a=wl(e,w[Ln])),a},w.setCookieMgr=function(z){a=z},w[Lf]=function(){if(!o&&!s&&Fo(e.enablePerfMgr)){var z=Fo(e[OU]);yt(z)&&(s=z(w,w[W0]()))}return o||s||vq()},w.setPerfMgr=function(z){o=z},w.eventCnt=function(){return n[Me]},w.releaseQueue=function(){if(r&&n[Me]>0){var z=n;n=[],Se(z,function(Z){L()[sr](Z)})}},w.pollInternalLogs=function(z){return g=z||null,R=!1,I&&(clearInterval(I),I=null),O(!0)};function O(z){if(!I&&!R){var Z=z||w[Ln]&&w[Ln].queue[Me]>0;if(Z){var ve=Fo(e.diagnosticLogInterval);(!ve||!(ve>0))&&(ve=1e4),I=setInterval(function(){clearInterval(I),I=0,P()},ve)}}return I}w[RU]=function(){R=!0,I&&(clearInterval(I),I=0,P())},jf(w,function(){return h},["addTelemetryInitializer"]),w.unload=function(z,Z,ve){var he;z===void 0&&(z=!0),r||bn(QFe),m&&bn(uae);var ne=(he={reason:50},he[Zs]=z,he.flushComplete=!1,he),je=kv(q(),w);je[Pf](function(){V(),Z&&Z(ne)},w);function nt(ee){ne.flushComplete=ee,m=!0,y.run(je,ne),w[RU](),je[sr](ne)}P(),F(z,nt,6,ve)||nt(!1)},w[kf]=N,w.addPlugin=function(z,Z,ve,he){if(!z){he&&he(!1),Ue(pae);return}var ne=N(z[Js]);if(ne&&!Z){he&&he(!1),Ue("Plugin ["+z[Js]+"] is already loaded!");return}var je={reason:16};function nt(J){c[dt](z),je.added=[z],A(je),he&&he(!0)}if(ne){var ee=[ne.plugin],Ee={reason:2,isAsync:!!ve};B(ee,Ee,function(J){J?(je.removed=ee,je.reason|=32,nt(!0)):he&&he(!1)})}else nt(!1)},w.evtNamespace=function(){return v},w[Zg]=F,w.getTraceCtx=function(z){return T||(T=Zse()),T},w.setTraceCtx=function(z){T=z||null},yd(w,"addUnloadCb",function(){return y},"add");function V(){r=!1,e=pv(!0,{},XFe),w[ic]=e,w[Ln]=new oa(e),w[K0]=[],h=new aae,n=[],i=null,o=null,s=null,a=null,l=null,u=null,c=[],d=null,p=null,f=null,m=!1,g=null,v=ca("AIBaseCore",!0),y=Jf(),T=null}function L(){var z=ao(q(),e,w);return z[Pf](O),z}function A(z){var Z=ZFe(w[Ln],Tx,c);u=Z[kr],l=null;var ve=Z.all;if(f=io(oae(p,ve,w)),d){var he=_n(ve,d);he!==-1&&ve[_l](he,1),he=_n(u,d),he!==-1&&u[_l](he,1),d._setQueue(f)}else d=iae(f,w);ve[dt](d),u[dt](d),w[K0]=LA(ve),d[Xs](e,w,ve);var ne=L();DA(ne,ve),w[K0]=io(LA(u||[])).slice(),z&&de(z)}function N(z){var Z,ve=null,he=null;return Se(w[K0],function(ne){if(ne[Js]===z&&ne!==d&&ne!==h)return he=ne,-1}),!he&&d&&(he=d.getChannel(z)),he&&(ve=(Z={plugin:he},Z[Y0]=function(ne){kl(he)[Z0]=!ne},Z.isEnabled=function(){var ne=kl(he);return!ne[Do]&&!ne[Z0]},Z.remove=function(ne,je){var nt;ne===void 0&&(ne=!0);var ee=[he],Ee=(nt={reason:1},nt[Zs]=ne,nt);B(ee,Ee,function(J){J&&A({reason:32,removed:ee}),je&&je(J)})},Z)),ve}function q(){if(!l){var z=(u||[]).slice();_n(z,h)===-1&&z[dt](h),l=cc(LA(z),e,w)}return l}function B(z,Z,ve){if(z&&z[Me]>0){var he=cc(z,e,w),ne=kv(he,w);ne[Pf](function(){var je=!1,nt=[];Se(c,function(Ee,J){dae(Ee,z)?je=!0:nt[dt](Ee)}),c=nt;var ee=[];p&&(Se(p,function(Ee,J){var Oe=[];Se(Ee,function($e){dae($e,z)?je=!0:Oe[dt]($e)}),ee[dt](Oe)}),p=ee),ve&&ve(je),O()}),ne[sr](Z)}else ve(!1)}function P(){if(w[Ln]&&w[Ln].queue){var z=w[Ln].queue.slice(0);w[Ln].queue[Me]=0,Se(z,function(Z){var ve,he=(ve={},ve[Yn]=g||"InternalMessageId: "+Z[ev],ve.iKey=Fo(e[Qw]),ve.time=bs(new Date),ve.baseType=Wf.dataType,ve.baseData={message:Z[ud]},ve);w.track(he)})}}function F(z,Z,ve,he){return d?d[Zg](z,Z,ve||6,he):(Z&&Z(!1),!0)}function W(){var z=Fo(e.disableDbgExt);z===!0&&_&&(i[Rf](_),_=null),i&&!_&&z!==!0&&(_=hse(e),i[Af](_))}function xe(){var z=Fo(e.enablePerfMgr);!z&&s&&(s=null),z&&vd(e,OU,JFe)}function Ye(){var z=vd(e,ov,{});z.NotificationManager=i}function de(z){var Z=Cx(q(),w);Z[Pf](O),(!w._updateHook||w._updateHook(Z,z)!==!0)&&Z[sr](z)}function Ue(z){var Z=w[Ln];Z?(vr(Z,2,73,z),O()):bn(z)}})}return t.__ieDyn=1,t}()});function BA(t,e,r,n){Se(t,function(i){if(i&&i[e])if(r)setTimeout(function(){return n(i)},0);else try{n(i)}catch{}})}var Ix,Bq=k(()=>{Xn();Gr();zr();yn();Ix=function(){function t(e){this.listeners=[];var r=!!(e||{}).perfEvtsSendAll;Pt(t,this,function(n){n[Af]=function(i){n.listeners[dt](i)},n[Rf]=function(i){for(var o=_n(n[Of],i);o>-1;)n.listeners[_l](o,1),o=_n(n[Of],i)},n[sv]=function(i){BA(n[Of],sv,!0,function(o){o[sv](i)})},n[hd]=function(i,o){BA(n[Of],hd,!0,function(s){s[hd](i,o)})},n[av]=function(i,o){BA(n[Of],av,o,function(s){s[av](i,o)})},n[gd]=function(i){i&&(r||!i[X0]())&&BA(n[Of],gd,!1,function(o){i[Zs]?setTimeout(function(){return o[gd](i)},0):o[gd](i)})}})}return t.__ieDyn=1,t}()});var wx,fae=k(()=>{eo();Xn();Gr();Fq();xd();zr();yn();Bq();dx();wx=function(t){Qs(e,t);function e(){var r=t.call(this)||this;return Pt(e,r,function(n,i){n[Xs]=function(a,l,c,u){i[Xs](a,l,c||new oa(a),u||new Ix(a))},n.track=function(a){Ur(n[Lf](),function(){return"AppInsightsCore:track"},function(){a===null&&(s(a),bn("Invalid telemetry item")),o(a),i.track(a)},function(){return{item:a}},!a.sync)};function o(a){rt(a[Yn])&&(s(a),bn("telemetry name required"))}function s(a){var l=n[W0]();l&&l[hd]([a],2)}}),r}return e.__ieDyn=1,e}(em)});var ue,Yt,tm,ua,mae,hae,UA,Uq,Ax,qA,Nv,da,Ad,Nl,Rx,gae,qq,Px,vae=k(()=>{oA();Yt="Failed",tm=Yt+"MonitorAjax",ua="Track",mae="Start",hae="Stop",UA="Event",Uq="AuthContext",Ax="Exception",qA="Local",Nv="Session",da="Storage",Ad="Browser",Nl="Cannot",Rx="Buffer",gae="InstrumentationKey",qq=Di({CRITICAL:1,WARNING:2}),Px=Di((ue={},ue[Ad+"DoesNotSupport"+qA+da]=0,ue[Ad+Nl+"Read"+qA+da]=1,ue[Ad+Nl+"Read"+Nv+da]=2,ue[Ad+Nl+"Write"+qA+da]=3,ue[Ad+Nl+"Write"+Nv+da]=4,ue[Ad+Yt+"RemovalFrom"+qA+da]=5,ue[Ad+Yt+"RemovalFrom"+Nv+da]=6,ue[Nl+"SendEmptyTelemetry"]=7,ue.ClientPerformanceMathError=8,ue["ErrorParsingAI"+Nv+"Cookie"]=9,ue.ErrorPVCalc=10,ue[Ax+"WhileLoggingError"]=11,ue[Yt+"AddingTelemetryTo"+Rx]=12,ue[tm+"Abort"]=13,ue[tm+"Dur"]=14,ue[tm+"Open"]=15,ue[tm+"RSC"]=16,ue[tm+"Send"]=17,ue[tm+"GetCorrelationHeader"]=18,ue[Yt+"ToAddHandlerForOnBeforeUnload"]=19,ue[Yt+"ToSendQueuedTelemetry"]=20,ue[Yt+"ToReportDataLoss"]=21,ue["Flush"+Yt]=22,ue.MessageLimitPerPVExceeded=23,ue.MissingRequiredFieldSpecification=24,ue.NavigationTimingNotSupported=25,ue.OnError=26,ue[Nv+"RenewalDateIsZero"]=27,ue.SenderNotInitialized=28,ue[mae+ua+UA+Yt]=29,ue[hae+ua+UA+Yt]=30,ue[mae+ua+Yt]=31,ue[hae+ua+Yt]=32,ue.TelemetrySampledAndNotSent=33,ue[ua+UA+Yt]=34,ue[ua+Ax+Yt]=35,ue[ua+"Metric"+Yt]=36,ue[ua+"PV"+Yt]=37,ue[ua+"PV"+Yt+"Calc"]=38,ue[ua+"Trace"+Yt]=39,ue["Transmission"+Yt]=40,ue[Yt+"ToSet"+da+Rx]=41,ue[Yt+"ToRestore"+da+Rx]=42,ue.InvalidBackendResponse=43,ue[Yt+"ToFixDepricatedValues"]=44,ue.InvalidDurationValue=45,ue.TelemetryEnvelopeInvalid=46,ue.CreateEnvelopeError=47,ue[Nl+"SerializeObject"]=48,ue[Nl+"SerializeObjectNonSerializable"]=49,ue.CircularReferenceDetected=50,ue["Clear"+Uq+Yt]=51,ue[Ax+"Truncated"]=52,ue.IllegalCharsInName=53,ue.ItemNotInArray=54,ue.MaxAjaxPerPVExceeded=55,ue.MessageTruncated=56,ue.NameTooLong=57,ue.SampleRateOutOfRange=58,ue["Set"+Uq+Yt]=59,ue["Set"+Uq+Yt+"AccountName"]=60,ue.StringValueTooLong=61,ue.StartCalledMoreThanOnce=62,ue.StopCalledWithoutStart=63,ue["TelemetryInitializer"+Yt]=64,ue.TrackArgumentsNotSpecified=65,ue.UrlTooLong=66,ue[Nv+da+Rx+"Full"]=67,ue[Nl+"AccessCookie"]=68,ue.IdTooLong=69,ue.InvalidEvent=70,ue[tm+"SetRequestHeader"]=71,ue["Send"+Ad+"InfoOnUserInit"]=72,ue["Plugin"+Ax]=73,ue["Notification"+Ax]=74,ue.SnippetScriptLoadFailure=99,ue["Invalid"+gae]=100,ue[Nl+"ParseAiBlobValue"]=101,ue.InvalidContentBlob=102,ue[ua+"PageAction"+UA+Yt]=103,ue[Yt+"AddingCustomDefinedRequestContext"]=104,ue["InMemory"+da+Rx+"Full"]=105,ue[gae+"Deprecation"]=106,ue))});var Ol=k(()=>{qoe();tse();fae();Fq();Mq();bA();Iq();zr();oA();Sq();Es();eo();Bq();dx();xd();Sx();vae();Eq();hx();FA();Oq()});var yae,_ae,xae,bae,Eae,Cae,Sae=k(()=>{eo();Ol();yae=Di({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),_ae=Di({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),xae=Di({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),bae=Di({Normal:1,Critical:2}),Eae=Di({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Cae=io(Kw(Kw({},Px),Di({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})))});var pa,HA,tBe,xbt,Hq,jA,kx=k(()=>{pa="",HA="https://browser.events.data.microsoft.com/OneCollector/1.0/",tBe="pluginVersionString",xbt=tBe+"Arr",Hq="version",jA="properties"});function ln(t){return!(t===pa||rt(t))}function Ox(t){if(t){var e=t.indexOf("-");if(e>-1)return t.substring(0,e)}return pa}function Gq(){return jq===null&&(jq=!Bt(Uint8Array)&&!sBe()&&!Il()),jq}function Dx(t){return!!(t&&no(t)&&t>=1&&t<=4)}function Lx(t,e,r){if(!e&&!ln(e)||typeof t!="string")return null;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||et(e))e={value:e};else if(n==="object"&&!No.call(e,"value"))e={value:r?JSON.stringify(e):e};else if(rt(e.value)||e.value===pa||!Nr(e.value)&&!no(e.value)&&!El(e.value)&&!et(e.value))return null;if(et(e.value)&&!GA(e.value))return null;if(!rt(e.kind)){if(et(e.value)||!Ov(e.kind))return null;e.value=e.value.toString()}return e}function Mx(t,e,r){var n=-1;if(!Bt(t))if(e>0&&(e===32?n=8192:e<=13&&(n=e<<5)),oBe(r))n===-1&&(n=0),n|=r;else{var i=iBe[fa(t)]||-1;n!==-1&&i!==-1?n|=i:i===6&&(n=i)}return n}function $q(){Sd(null).setEnabled(!1)}function zq(t,e,r){la(null)&&Sd(null).set(t,e,r*86400,null,"/")}function Wq(t){la(null)&&Sd(null).del(t)}function Kq(t){return la(null)?Yq(Sd(null),t):pa}function Yq(t,e,r){r===void 0&&(r=!0);var n;return t&&(n=t.get(e),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||pa}function Qq(t){t===void 0&&(t="D");var e=wv();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,pa)),e}function Rd(t,e,r,n,i){var o={},s=!1,a=0,l=arguments.length,c=Object[an],u=arguments;for(c.toString.call(u[0])==="[object Boolean]"&&(s=u[0],a++);a<l;a++){var t=u[a];ar(t,function(p,f){s&&f&&Qn(f)?et(f)?(o[p]=o[p]||[],Se(f,function(m,h){m&&Qn(m)?o[p][h]=Rd(!0,o[p][h],m):o[p][h]=m})):o[p]=Rd(!0,o[p],f):o[p]=f})}return o}function Ov(t){return t===0||t>0&&t<=13||t===32}function oBe(t){return t>=0&&t<=9}function sBe(){var t=Bo();if(!Bt(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e.indexOf("safari")>=0||e.indexOf("firefox")>=0)&&e.indexOf("chrome")<0)return!0}return!1}function GA(t){return t.length>0}function rm(t,e){var r=t;r.timings=r.timings||{},r.timings.processTelemetryStart=r.timings.processTelemetryStart||{},r.timings.processTelemetryStart[e]=Li()}function fa(t){var e=0;if(t!=null){var r=typeof t;r==="string"?e=1:r==="number"?e=2:r==="boolean"?e=3:r===on&&(e=4,et(t)?(e=4096,t.length>0&&(e|=fa(t[0]))):No.call(t,"value")&&(e=8192|fa(t.value)))}return e}function $A(){return!!Or("chrome")}function zA(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(l,c,u){try{l[c]=u}catch{}}var a=new XMLHttpRequest;return n&&s(a,rBe,n),r&&s(a,Tae,r),a.open(t,e,!i),r&&s(a,Tae,r),!i&&o&&s(a,nBe,o),a}var Dl,VA,Ll,rBe,Tae,nBe,iBe,jq,Nx,Vq,Li,Iae,wae,Fx=k(()=>{Ol();eo();kx();VA="3.2.14",Ll="1DS-Web-JS-"+VA,rBe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Tae="withCredentials",nBe="timeout",iBe=(Dl={},Dl[0]=0,Dl[2]=6,Dl[1]=1,Dl[3]=7,Dl[4098]=6,Dl[4097]=1,Dl[4099]=7,Dl),jq=null,Nx=!!so(),Vq=!!ac();Li=Av;Iae={Version:VA,FullVersionString:Ll,strUndefined:sn,strObject:on,Undefined:sn,arrForEach:Se,arrIndexOf:_n,arrMap:Uf,arrReduce:qf,objKeys:Oi,toISOString:bs,isReactNative:Il,isString:Nr,isNumber:no,isBoolean:El,isFunction:yt,isArray:et,isObject:Qn,strTrim:cr,isDocumentObjectAvailable:Nx,isWindowObjectAvailable:Vq,isValueAssigned:ln,getTenantId:Ox,isBeaconsSupported:_d,isUint8ArrayAvailable:Gq,isLatency:Dx,sanitizeProperty:Lx,getISOString:bs,useXDomainRequest:zf,getCommonSchemaMetaData:Mx,cookieAvailable:la,disallowsSameSiteNone:bv,setCookie:zq,deleteCookie:Wq,getCookie:Kq,createGuid:Qq,extend:Rd,getTime:Li,isValueKind:Ov,isArrayValid:GA,objDefineAccessors:Mo,addPageUnloadEventListener:Xf,setProcessTelemetryTimings:rm,addEventHandler:Id,getFieldValueType:fa,strEndsWith:Ff,objForEachKey:ar},wae={_canUseCookies:void 0,isTypeof:cv,isUndefined:Bt,isNullOrUndefined:rt,hasOwnProperty:bl,isFunction:yt,isObject:Qn,isDate:uv,isArray:et,isError:Bf,isString:Nr,isNumber:no,isBoolean:El,toISOString:bs,arrForEach:Se,arrIndexOf:_n,arrMap:Uf,arrReduce:qf,strTrim:cr,objCreate:nc,objKeys:Oi,objDefineAccessors:Mo,addEventHandler:Id,dateNow:xn,isIE:ia,disableCookies:$q,newGuid:wv,perfNow:Av,newId:Ed,randomValue:xv,random32:aa,mwcRandomSeed:xA,mwcRandom32:mx,generateW3CId:Rl}});var aBe,Aae,Rae=k(()=>{eo();Xn();Ol();kx();Fx();aBe=function(t){Qs(e,t);function e(){var r=t.call(this)||this;return r.pluginVersionStringArr=[],Pt(e,r,function(n,i){(!n.logger||!n.logger.queue)&&(n.logger=new oa({loggingLevelConsole:1})),n.initialize=function(o,s,a,l){Ur(n,function(){return"AppInsightsCore.initialize"},function(){var c=n.pluginVersionStringArr;if(o){o.endpointUrl||(o.endpointUrl=HA);var u=o.propertyStorageOverride;u&&(!u.getProperty||!u.setProperty)&&bn("Invalid property storage override passed."),o.channels&&Se(o.channels,function(f){f&&Se(f,function(m){if(m.identifier&&m.version){var h=m.identifier+"="+m.version;c.push(h)}})})}n.getWParam=function(){return typeof document<"u"||o.enableWParam?0:-1},s&&Se(s,function(f){if(f&&f.identifier&&f.version){var m=f.identifier+"="+f.version;c.push(m)}}),n.pluginVersionString=c.join(";"),n.pluginVersionStringArr=c;try{i.initialize(o,s,a,l),n.pollInternalLogs("InternalLog")}catch(f){var d=n.logger,p=Er(f);p.indexOf("channels")!==-1&&(p+=`
 - Channels must be provided through config.channels only!`),vr(d,1,514,"SDK Initialization Failed - no telemetry will be sent: "+p)}},function(){return{config:o,extensions:s,logger:a,notificationManager:l}})},n.track=function(o){Ur(n,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s.timings=s.timings||{},s.timings.trackStart=Li(),Dx(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Ll;var l=s.baseData=s.baseData||{};l[jA]=l[jA]||{};var c=l[jA];c[Hq]=c[Hq]||n.pluginVersionString||pa}i.track(s)},function(){return{item:o}},!o.sync)}}),r}return e.__ieDyn=1,e}(wx),Aae=aBe});var cBe,Pae,kae=k(()=>{eo();Xn();Ol();kx();Fx();cBe=function(t){Qs(e,t);function e(){var r=t.call(this)||this;return Pt(e,r,function(n,i){n.initialize=function(o,s,a,l){o&&!o.endpointUrl&&(o.endpointUrl=HA),n.getWParam=function(){return Nx||o.enableWParam?0:-1};try{i.initialize(o,s,a,l)}catch(c){vr(n.logger,1,514,"Initialization Failed: "+Er(c)+`
 - Note: Channels must be provided through config.channels only`)}},n.track=function(o){var s=o;if(s){var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Ll}i.track(s)}}),r}return e.__ieDyn=1,e}(em),Pae=cBe});function lBe(t,e,r){return function(n){t[e]=n,r()}}var nm,uBe,Pd,Xq=k(()=>{Xn();Ol();nm=yt;uBe=function(){function t(e){var r=0,n=null,i=[];Pt(t,this,function(c){c.then=function(u,d){return new t(function(p,f){o(u,d,p,f)})},c.catch=function(u){return c.then(null,u)}});function o(c,u,d,p){i.push(function(){var f;try{r===1?f=nm(c)?c(n):n:f=nm(u)?u(n):n,f instanceof t?f.then(d,p):r===2&&!nm(u)?p(f):d(f)}catch(m){p(m);return}}),r!==0&&s()}function s(){if(i.length>0){var c=i.slice();i=[],setTimeout(function(){for(var u=0,d=c.length;u<d;++u)try{c[u]()}catch{}},0)}}function a(c){r===0&&(n=c,r=1,s())}function l(c){r===0&&(n=c,r=2,s())}(function(){if(!nm(e))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{e(a,l)}catch(u){l(u)}})()}return t.resolve=function(e){return e instanceof t?e:e&&nm(e.then)?new t(function(r,n){try{e.then(r,n)}catch(i){n(i)}}):new t(function(r){r(e)})},t.reject=function(e){return new t(function(r,n){n(e)})},t.all=function(e){if(!(!e||!e.length))return new t(function(r,n){try{for(var i=[],o=0,s=0;s<e.length;s++){var a=e[s];a&&nm(a.then)?(o++,a.then(lBe(i,s,function(){--o===0&&r(i)}),n)):i[s]=a}o===0&&setTimeout(function(){r(i)},0)}catch(l){n(l)}})},t.race=function(e){return new t(function(r,n){if(!(!e||!e.length))try{for(var i=function(s){var a=e[s];a&&nm(a.then)?a.then(r,n):setTimeout(function(){r(a)},0)},o=0;o<e.length;o++)i(o)}catch(s){n(s)}})},t}(),Pd=uBe});function Dv(){return new Date().getTime()}var dBe,Nae,Bx,im,Jq,pBe,Oae,Dae=k(()=>{Xn();Xq();Ol();dBe=6e5,Nae=0,Bx=[],im=[],Jq=[];pBe=function(){function t(e,r){var n=0,i=(e||"<unnamed>")+"."+Nae;Nae++,Pt(t,this,function(a){var l=null,c=0;a.scheduleEvent=function(d,p,f){var m=i+"."+c;c++,p&&(m+="-("+p+")");var h=m+"{"+n+"}";n++;var g={evt:null,tm:Dv(),id:h,isRunning:!1,isAborted:!1};return l?g.evt=w(g,l):g.evt=R(g),l=g,l.evt._schId=h,g.evt;function v(O){for(var V=Dv(),L=V-dBe,A=O.length,N=0;N<A;){var q=O[N];if(q&&q.tm<L){var B=null;q.abort?(B="Aborting ["+q.id+"] due to Excessive runtime ("+(V-q.tm)+" ms)",q.abort(B)):B="Removing ["+q.id+"] due to Excessive runtime ("+(V-q.tm)+" ms)",s(B),O.splice(N,1),A--}else N++}}function y(O,V){var L=!1,A=u(Bx,O);if(A||(A=u(Jq,O),L=!0),A){A.to&&(clearTimeout(A.to),A.to=null);var N=Dv()-A.tm;V?L?s("Timed out event ["+O+"] finally complete -- "+N+" ms"):o("Promise ["+O+"] Complete -- "+N+" ms"):(Jq.push(A),s("Event ["+O+"] Timed out and removed -- "+N+" ms"))}else o("Failed to remove ["+O+"] from running queue");l&&l.id===O&&(l=null),v(Bx),v(im),v(Jq)}function _(O,V){return function(L){return y(O,!0),V&&V(L),L}}function T(O,V,L,A){V.then(function(N){return N instanceof Pd?(o("Event ["+O+"] returned a promise -- waiting"),T(O,N,L,A),N):_(O,L)(N)},_(O,A))}function I(O,V){var L=O.id;return new Pd(function(A,N){o("Event ["+L+"] Starting -- waited for "+(O.wTm||"--")+" ms"),O.isRunning=!0,O.abort=function(B){O.abort=null,O.isAborted=!0,y(L,!1),N(new Error(B))};var q=V(L);q instanceof Pd?(f&&(O.to=setTimeout(function(){y(L,!1),N(new Error("Timed out after ["+f+"] ms"))},f)),T(L,q,function(B){o("Event ["+L+"] Resolving after "+(Dv()-O.tm)+" ms"),A(B)},N)):(o("Promise ["+L+"] Auto completed as the start action did not return a promise"),A())})}function R(O){var V=Dv();return O.wTm=V-O.tm,O.tm=V,O.isAborted?Pd.reject(new Error("["+m+"] was aborted")):(Bx.push(O),I(O,d))}function w(O,V){var L=new Pd(function(A,N){var q=Dv()-V.tm,B=V.id;o("["+m+"] is waiting for ["+B+":"+q+" ms] to complete before starting -- ["+im.length+"] waiting and ["+Bx.length+"] running"),O.abort=function(P){O.abort=null,u(im,m),O.isAborted=!0,N(new Error(P))},V.evt.then(function(P){u(im,m),R(O).then(A,N)},function(P){u(im,m),R(O).then(A,N)})});return im.push(O),L}};function u(d,p){for(var f=0;f<d.length;f++)if(d[f].id===p)return d.splice(f,1)[0];return null}});function o(a){var l=Ys();l&&l.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+a)}function s(a){sa(r,"ESPromiseScheduler["+i+"] "+a)}}return t.incomplete=function(){return Bx},t.waitingToStart=function(){return im},t}(),Oae=pBe});var Lae,Mae=k(()=>{Ol();kx();Fx();Lae=function(){function t(e){var r=this,n={},i=[],o=[];e&&o.push(e);function s(u,d){var p,f=n[u];if(f&&(p=f[d]),!p&&p!==null){if(Nr(u)&&Nr(d))if(o.length>0){for(var m=0;m<o.length;m++)if(o[m].handleField(u,d)){p={canHandle:!0,fieldHandler:o[m]};break}}else i.length===0&&(p={canHandle:!0});if(!p&&p!==null){p=null;for(var m=0;m<i.length;m++)if(i[m].handleField(u,d)){p={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=n[u]={}),f[d]=p}return p}r.addSanitizer=function(u){u&&(i.push(u),n={})},r.addFieldSanitizer=function(u){u&&(o.push(u),n={})},r.handleField=function(u,d){var p=s(u,d);return p?p.canHandle:!1},r.value=function(u,d,p,f){var m=s(u,d);if(m&&m.canHandle){if(!m||!m.canHandle)return null;if(m.handler)return m.handler.value(u,d,p,f);if(!Nr(d)||rt(p)||p===pa)return null;var h=null,g=fa(p);if((g&8192)===8192){var v=g&-8193;if(h=p,!ln(h.value)||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=l(u,d,p):g===4&&(h=l(u,d,f?JSON.stringify(p):p));if(h)return a(m,u,d,g,h,f)}return null},r.property=function(u,d,p,f){var m=s(u,d);if(!m||!m.canHandle||!Nr(d)||rt(p)||!ln(p.value))return null;var h=fa(p.value);return h===0?null:a(m,u,d,h,p,f)};function a(u,d,p,f,m,h){if(u.handler)return u.handler.property(d,p,m,h);if(!rt(m.kind)){if((f&4096)===4096||!Ov(m.kind))return null;m.value=m.value.toString()}return c(u.fieldHandler,d,p,f,m)}function l(u,d,p){return ln(p)?{value:p}:null}function c(u,d,p,f,m){if(m&&u){var h=u.getSanitizer(d,p,f,m.kind,m.propertyType);if(h)if(f===4){var g={},v=m.value;ar(v,function(_,T){var I=d+"."+p;if(ln(T)){var R=l(I,_,T);R=c(u,I,_,fa(T),R),R&&(g[_]=R.value)}}),m.value=g}else{var y={path:d,name:p,type:f,prop:m,sanitizer:r};m=h.call(r,y)}}return m}}return t.getFieldType=fa,t}()});var Fae={};Jn(Fae,{AppInsightsCore:()=>Aae,BaseCore:()=>Pae,BaseTelemetryPlugin:()=>Zf,CoreUtils:()=>wae,DiagnosticLogger:()=>oa,ESPromise:()=>Pd,ESPromiseScheduler:()=>Oae,EventHelper:()=>Tq,EventLatency:()=>_ae,EventPersistence:()=>bae,EventPropertyType:()=>xae,EventsDiscardedReason:()=>na,FullVersionString:()=>Ll,InternalAppInsightsCore:()=>wx,InternalBaseCore:()=>em,LoggingSeverity:()=>qq,MinChannelPriorty:()=>AU,NotificationManager:()=>Ix,PerfEvent:()=>Kf,PerfManager:()=>ux,ProcessTelemetryContext:()=>Lq,TraceLevel:()=>Eae,Undefined:()=>sn,Utils:()=>Iae,ValueKind:()=>yae,ValueSanitizer:()=>Lae,Version:()=>VA,_ExtendedInternalMessageId:()=>Cae,_InternalLogMessage:()=>Wf,_InternalMessageId:()=>Px,__getRegisteredEvents:()=>Cq,_logInternalMessage:()=>mq,_throwInternal:()=>vr,_warnToConsole:()=>sa,addEventHandler:()=>Id,addEventListeners:()=>PA,addPageHideEventListener:()=>Tv,addPageShowEventListener:()=>Iv,addPageUnloadEventListener:()=>Xf,areCookiesSupported:()=>la,arrForEach:()=>Se,arrIndexOf:()=>_n,arrMap:()=>Uf,arrReduce:()=>qf,attachEvent:()=>Cv,cookieAvailable:()=>la,createCookieMgr:()=>wl,createEnumStyle:()=>Di,createGuid:()=>Qq,createProcessTelemetryContext:()=>ao,createTraceParent:()=>Rq,createUniqueNamespace:()=>ca,createUnloadHandlerContainer:()=>Jf,dateNow:()=>xn,deleteCookie:()=>Wq,detachEvent:()=>Sv,disableCookies:()=>$q,disallowsSameSiteNone:()=>bv,doPerf:()=>Ur,dumpObj:()=>Er,eventOff:()=>Qf,eventOn:()=>Yf,extend:()=>Rd,findW3cTraceParent:()=>Nq,formatTraceParent:()=>kq,generateW3CId:()=>Rl,getCommonSchemaMetaData:()=>Mx,getConsole:()=>ox,getCookie:()=>Kq,getCookieValue:()=>Yq,getCrypto:()=>sx,getDocument:()=>so,getExceptionName:()=>Hf,getFieldValueType:()=>fa,getGlobal:()=>Ys,getGlobalInst:()=>Or,getHistory:()=>sq,getIEVersion:()=>aq,getISOString:()=>bs,getJSON:()=>gv,getLocation:()=>Gf,getMsCrypto:()=>ax,getNavigator:()=>Bo,getPerformance:()=>hv,getSetValue:()=>vd,getTenantId:()=>Ox,getTime:()=>Li,getWindow:()=>ac,hasDocument:()=>gA,hasHistory:()=>vA,hasJSON:()=>$f,hasNavigator:()=>ix,hasOwnProperty:()=>bl,hasWindow:()=>nx,isArray:()=>et,isArrayValid:()=>GA,isBeaconsSupported:()=>_d,isBoolean:()=>El,isChromium:()=>$A,isDate:()=>uv,isDocumentObjectAvailable:()=>Nx,isError:()=>Bf,isFetchSupported:()=>vv,isFunction:()=>yt,isIE:()=>ia,isLatency:()=>Dx,isNotTruthy:()=>VU,isNullOrUndefined:()=>rt,isNumber:()=>no,isObject:()=>Qn,isReactNative:()=>Il,isSampledFlag:()=>Pq,isString:()=>Nr,isTruthy:()=>dv,isTypeof:()=>cv,isUint8ArrayAvailable:()=>Gq,isUndefined:()=>Bt,isValidSpanId:()=>Pv,isValidTraceId:()=>Rv,isValidTraceParent:()=>OA,isValueAssigned:()=>ln,isValueKind:()=>Ov,isWindowObjectAvailable:()=>Vq,isXhrSupported:()=>yv,mergeEvtNamespace:()=>Al,newGuid:()=>wv,newId:()=>Ed,normalizeJsName:()=>Mf,objCreate:()=>nc,objDefineAccessors:()=>Mo,objForEachKey:()=>ar,objFreeze:()=>io,objKeys:()=>Oi,objSeal:()=>jU,openXhr:()=>zA,optimizeObject:()=>Cl,parseTraceParent:()=>Ex,perfNow:()=>Av,proxyAssign:()=>GU,proxyFunctionAs:()=>yd,proxyFunctions:()=>jf,random32:()=>aa,randomValue:()=>xv,removeEventHandler:()=>RA,removeEventListeners:()=>Td,removePageHideEventListener:()=>xx,removePageShowEventListener:()=>bx,removePageUnloadEventListener:()=>_x,safeGetCookieMgr:()=>Sd,safeGetLogger:()=>cx,sanitizeProperty:()=>Lx,setCookie:()=>zq,setEnableEnvMocks:()=>oq,setProcessTelemetryTimings:()=>rm,setValue:()=>oo,strContains:()=>$r,strEndsWith:()=>Ff,strFunction:()=>ys,strObject:()=>on,strPrototype:()=>an,strStartsWith:()=>lv,strTrim:()=>cr,strUndefined:()=>sn,throwError:()=>bn,toISOString:()=>bs,useXDomainRequest:()=>zf});var om=k(()=>{Sae();Rae();kae();Xq();Dae();Mae();Ol();Fx()});var sm,WA,KA,Zq=k(()=>{sm="REAL_TIME",WA="NEAR_REAL_TIME",KA="BEST_EFFORT"});var ma,YA,Bae,QA,Uae,e3,qae,Hae,jae,t3,r3,XA,Vae,n3,Gae,i3,JA,o3,ZA,eR,tR,Ux,s3,$ae,Lv,a3,rR,qx=k(()=>{ma="",YA="POST",Bae="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",QA="drop",Uae="send",e3="requeue",qae="rspFail",Hae="oth",jae="no-cache, no-store",t3="application/x-json-stream",r3="cache-control",XA="content-type",Vae="kill-tokens",n3="kill-duration",Gae="kill-duration-seconds",i3="time-delta-millis",JA="client-version",o3="client-id",ZA="time-delta-to-apply-millis",eR="upload-time",tR="apikey",Ux="AuthMsaDeviceTicket",s3="AuthXToken",$ae="NoResponseBody",Lv="msfpc",a3="trace",rR="user"});function Wae(t){var e=(t.ext||{}).intweb;return e&&ln(e[Lv])?e[Lv]:null}function zae(t){for(var e=null,r=0;e===null&&r<t.length;r++)e=Wae(t[r]);return e}var Mv,c3=k(()=>{om();qx();Mv=function(){function t(e,r){var n=r?[].concat(r):[],i=this,o=zae(n);i.iKey=function(){return e},i.Msfpc=function(){return o||ma},i.count=function(){return n.length},i.events=function(){return n},i.addEvent=function(s){return s?(n.push(s),o||(o=Wae(s)),!0):!1},i.split=function(s,a){var l;if(s<n.length){var c=n.length-s;rt(a)||(c=a<c?a:c),l=n.splice(s,c),o=zae(n)}return new t(e,l)}}return t.create=function(e,r){return new t(e,r)},t}()});var fBe,Kae,Yae=k(()=>{Xn();fBe=function(){function t(){var e=!0,r=!0,n=!0,i="use-collector-delta",o=!1;Pt(t,this,function(s){s.allowRequestSending=function(){return e},s.firstRequestSent=function(){n&&(n=!1,o||(e=!1))},s.shouldAddClockSkewHeaders=function(){return r},s.getClockSkewHeaderValue=function(){return i},s.setClockSkew=function(a){o||(a?(i=a,r=!0,o=!0):r=!1,e=!0)}})}return t.__ieDyn=1,t}(),Kae=fBe});var mBe,hBe,Qae,Xae=k(()=>{Xn();om();mBe=1e3,hBe=function(){function t(){var e={};function r(n){var i=[];return n&&Se(n,function(o){i.push(cr(o))}),i}Pt(t,this,function(n){n.setKillSwitchTenants=function(i,o){if(i&&o)try{var s=r(i.split(","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*mBe,l=0;l<s.length;++l)e[s[l]]=xn()+a}catch{return[]}return[]},n.isTenantKilled=function(i){var o=e,s=cr(i);return o[s]!==void 0&&o[s]>xn()?!0:(delete o[s],!1)}})}return t.__ieDyn=1,t}(),Qae=hBe});function Zae(t){return!(t>=300&&t<500&&t!=408&&t!=429||t==501||t==505)}function nR(t){var e=0,r=Jae*gBe,n=Jae*vBe,i=Math.floor(Math.random()*(n-r))+r;return e=Math.pow(2,t)*i,Math.min(e,yBe)}var gBe,vBe,Jae,yBe,l3=k(()=>{gBe=.8,vBe=1.2,Jae=3e3,yBe=6e5});function tce(t,e,r,n){if(n&&t){var i=Mx(n.value,n.kind,n.propertyType);if(i>-1){var o=t[ece];o||(o=t[ece]={f:{}});var s=o[iR];if(s||(s=o[iR]={}),e)for(var a=0;a<e.length;a++){var l=e[a];s[l]||(s[l]={f:{}});var c=s[l][iR];c||(c=s[l][iR]={}),s=c}s=s[r]={},et(n.value)?s.a={t:i}:s.t=i}}}var _Be,xBe,rce,nce,bBe,ece,iR,EBe,ice,oce=k(()=>{Xn();om();c3();qx();_Be=20,xBe=3984588,rce=65e3,nce=2e6,bBe=Math.min(nce,rce),ece="metadata",iR="f",EBe=/\./,ice=function(){function t(e,r,n,i){var o="data",s="baseData",a="ext",l=!!i,c=!0,u=r,d={};Pt(t,this,function(p){p.createPayload=function(h,g,v,y,_,T){return{apiKeys:[],payloadBlob:ma,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:h,isTeardown:g,isSync:v,isBeacon:y,sendType:T,sendReason:_}},p.appendPayload=function(h,g,v){var y=h&&g&&!h.overflow;return y&&Ur(e,function(){return"Serializer:appendPayload"},function(){for(var _=g.events(),T=h.payloadBlob,I=h.numEvents,R=!1,w=[],O=[],V=h.isBeacon,L=V?rce:xBe,A=V?bBe:nce,N=0,q=0;N<_.length;){var B=_[N];if(B){if(I>=v){h.overflow=g.split(N);break}var P=p.getEventBlob(B);if(P&&P.length<=A){var F=P.length,W=T.length;if(W+F>L){h.overflow=g.split(N);break}T&&(T+=`
`),T+=P,q++,q>_Be&&(T.substr(0,1),q=0),R=!0,I++}else P?w.push(B):O.push(B),_.splice(N,1),N--}N++}if(w&&w.length>0&&h.sizeExceed.push(Mv.create(g.iKey(),w)),O&&O.length>0&&h.failedEvts.push(Mv.create(g.iKey(),O)),R){h.batches.push(g),h.payloadBlob=T,h.numEvents=I;var xe=g.iKey();_n(h.apiKeys,xe)===-1&&h.apiKeys.push(xe)}},function(){return{payload:h,theBatch:{iKey:g.iKey(),evts:g.events()},max:v}}),y},p.getEventBlob=function(h){try{return Ur(e,function(){return"Serializer.getEventBlob"},function(){var g={};g.name=h.name,g.time=h.time,g.ver=h.ver,g.iKey="o:"+Ox(h.iKey);var v={},y=h[a];y&&(g[a]=v,ar(y,function(I,R){var w=v[I]={};m(R,w,"ext."+I,!0,null,null,!0)}));var _=g[o]={};_.baseType=h.baseType;var T=_[s]={};return m(h.baseData,T,s,!1,[s],function(I,R,w){tce(v,I,R,w)},c),m(h.data,_,o,!1,[],function(I,R,w){tce(v,I,R,w)},c),JSON.stringify(g)},function(){return{item:h}})}catch{return null}};function f(h,g){var v=d[h];return v===void 0&&(h.length>=7&&(v=lv(h,"ext.metadata")||lv(h,"ext.web")),d[h]=v),v}function m(h,g,v,y,_,T,I){ar(h,function(R,w){var O=null;if(w||ln(w)){var V=v,L=R,A=_,N=g;if(l&&!y&&EBe.test(R)){var q=R.split("."),B=q.length;if(B>1){A&&(A=A.slice());for(var P=0;P<B-1;P++){var F=q[P];N=N[F]=N[F]||{},V+="."+F,A&&A.push(F)}L=q[B-1]}}var W=y&&f(V,L);if(!W&&u&&u.handleField(V,L)?O=u.value(V,L,w,n):O=Lx(L,w,n),O){var xe=O.value;if(N[L]=xe,T&&T(A,L,O),I&&typeof xe=="object"&&!et(xe)){var Ye=A;Ye&&(Ye=Ye.slice(),Ye.push(L)),m(w,xe,V+"."+L,y,Ye,T,I)}}}})}})}return t.__ieDyn=1,t}()});function cm(t,e,r){d3[t]=e,r!==!1&&(p3[e]=t)}function ace(t){try{return t.responseText}catch{}return ma}function cce(t,e){var r=!1;if(t&&e){var n=Oi(t);if(n&&n.length>0)for(var i=e.toLowerCase(),o=0;o<n.length;o++){var s=n[o];if(s&&bl(e,s)&&s.toLowerCase()===i){r=!0;break}}}return r}function Fv(t,e,r,n){e&&r&&r.length>0&&(n&&d3[e]?(t.hdrs[d3[e]]=r,t.useHdrs=!0):t.url+="&"+e+"="+r)}function lce(t,e){return e&&(no(e)?t=[e].concat(t):et(e)&&(t=e.concat(t))),t}var am,u3,sce,CBe,d3,p3,uce,dce=k(()=>{Xn();Yae();Xae();om();qx();l3();oce();u3="sendAttempt",sce="&"+$ae+"=true",CBe=(am={},am[1]=e3,am[100]=e3,am[200]="sent",am[8004]=QA,am[8003]=QA,am),d3={},p3={};cm(Ux,Ux,!1);cm(JA,JA);cm(o3,"Client-Id");cm(tR,tR);cm(ZA,ZA);cm(eR,eR);cm(s3,s3);uce=function(){function t(e,r,n,i,o){this._responseHandlers=[];var s="?cors=true&"+XA.toLowerCase()+"="+t3,a=new Qae,l=!1,c=new Kae,u=!1,d=0,p,f,m,h,g=!0,v=[],y={},_=[],T=null,I=!1,R,w=!1,O=!1,V,L,A,N,q;Pt(t,this,function(B){var P=!0;B.initialize=function(H,se,ce,pe,we){var ot;we||(we={}),s=H+s,O=Bt(we.avoidOptions)?!0:!we.avoidOptions,h=se,R=se.getCookieMgr(),I=!h.config.disableEventTimings;var We=!!h.config.enableCompoundKey;p=ce,f=p.diagLog();var j=we.valueSanitizer,Y=we.stringifyObjects;Bt(we.enableCompoundKey)||(We=!!we.enableCompoundKey),V=we.xhrTimeout,L=!!we.disableXhrSync,A=!!we.disableFetchKeepAlive,q=we.addNoResponse!==!1,u=!Il(),T=new ice(h,j,Y,We),rt(we.useSendBeacon)||(u=!!we.useSendBeacon);var K=pe,me=we.alwaysUseXhrOverride?pe:null,Ae=we.alwaysUseXhrOverride?pe:null,qe=[3,2];if(!pe){g=!1;var kt=Gf();kt&&kt.protocol&&kt.protocol.toLowerCase()==="file:"&&(P=!1);var Vt=[];Il()?(Vt=[2,1],qe=[2,1,3]):Vt=[1,2,3],Vt=lce(Vt,we.transports),pe=F(Vt,!1),pe||sa(f,"No available transport to send events"),K=F(Vt,!0)}me||(qe=lce(qe,we.unloadTransports),me=F(qe,!0)),N=!g&&(u&&_d()||!A&&vv(!0)),m=(ot={},ot[0]=pe,ot[1]=K||F([1,2,3],!0),ot[2]=me||K||F([1],!0),ot[3]=Ae||F([2,3],!0)||K||F([1],!0),ot)};function F(H,se){for(var ce=0,pe=null,we=0;pe==null&&we<H.length;)ce=H[we],ce===1?zf()?pe=W:yv()&&(pe=Ye):ce===2&&vv(se)&&(!se||se&&!A)?pe=xe:u&&ce===3&&_d()&&(pe=Ue),we++;return pe?{_transport:ce,_isSync:se,sendPOST:pe}:null}B._getDbgPlgTargets=function(){return[m[0],a,T,m]};function W(H,se,ce){var pe=new XDomainRequest;pe.open(YA,H.urlString),H.timeout&&(pe.timeout=H.timeout),pe.onload=function(){var we=ace(pe);de(se,200,{},we),Bv(we)},pe.onerror=function(){de(se,400,{})},pe.ontimeout=function(){de(se,500,{})},pe.onprogress=function(){},ce?pe.send(H.data):o.set(function(){pe.send(H.data)},0)}function xe(H,se,ce){var pe,we=H.urlString,ot=!1,We=!1,j=(pe={body:H.data,method:YA},pe[Bae]=!0,pe);ce&&(j.keepalive=!0,H._sendReason===2&&(ot=!0,q&&(we+=sce))),P&&(j.credentials="include"),H.headers&&Oi(H.headers).length>0&&(j.headers=H.headers),fetch(we,j).then(function(Y){var K={},me=ma,Ae=Y.headers;Ae&&Ae.forEach(function(qe,kt){K[kt]=qe}),Y.body&&Y.text().then(function(qe){me=qe}),We||(We=!0,de(se,Y.status,K,me),Bv(me))}).catch(function(Y){We||(We=!0,de(se,0,{}))}),ot&&!We&&(We=!0,de(se,200,{})),!We&&H.timeout>0&&o.set(function(){We||(We=!0,de(se,500,{}))},H.timeout)}function Ye(H,se,ce){var pe=H.urlString;function we(Y,K,me){if(!Y[me]&&K&&K.getResponseHeader){var Ae=K.getResponseHeader(me);Ae&&(Y[me]=cr(Ae))}return Y}function ot(Y){var K={};return Y.getAllResponseHeaders?K=Fl(Y.getAllResponseHeaders()):(K=we(K,Y,i3),K=we(K,Y,n3),K=we(K,Y,Gae)),K}function We(Y,K){de(se,Y.status,ot(Y),K)}ce&&H.disableXhrSync&&(ce=!1);var j=zA(YA,pe,P,!0,ce,H.timeout);ar(H.headers,function(Y,K){j.setRequestHeader(Y,K)}),j.onload=function(){var Y=ace(j);We(j,Y),Bv(Y)},j.onerror=function(){We(j)},j.ontimeout=function(){We(j)},j.send(H.data)}function de(H,se,ce,pe){try{H(se,ce,pe)}catch(we){vr(f,2,518,Er(we))}}function Ue(H,se,ce){var pe=H,we=200,ot=pe._thePayload,We=H.urlString+(q?sce:ma);try{var j=Bo();if(!j.sendBeacon(We,H.data))if(ot){var Y=[];Se(ot.batches,function(K){if(Y&&K&&K.count()>0){for(var me=K.events(),Ae=0;Ae<me.length;Ae++)if(!j.sendBeacon(We,T.getEventBlob(me[Ae]))){Y.push(K.split(Ae));break}}else Y.push(K.split(0))}),Uo(Y,8003,ot.sendType,!0)}else we=0}catch(K){sa(f,"Failed to send telemetry using sendBeacon API. Ex:"+Er(K)),we=0}finally{de(se,we,{},ma)}}function z(H){return H===2||H===3}function Z(H){return w&&z(H)&&(H=2),H}B.addQueryStringParameter=function(H,se){for(var ce=0;ce<v.length;ce++)if(v[ce].name===H){v[ce].value=se;return}v.push({name:H,value:se})},B.addHeader=function(H,se){y[H]=se},B.canSendRequest=function(){return ve()&&c.allowRequestSending()},B.sendQueuedRequests=function(H,se){Bt(H)&&(H=0),w&&(H=Z(H),se=2),ne(_,H,0)&&nt(he(),0,!1,H,se||0)},B.isCompletelyIdle=function(){return!l&&d===0&&_.length===0},B.setUnloading=function(H){w=H},B.addBatch=function(H){if(H&&H.count()>0){if(a.isTenantKilled(H.iKey()))return!1;_.push(H)}return!0},B.teardown=function(){_.length>0&&nt(he(),0,!0,2,2)},B.pause=function(){l=!0},B.resume=function(){l=!1,B.sendQueuedRequests(0,4)},B.sendSynchronousBatch=function(H,se,ce){H&&H.count()>0&&(rt(se)&&(se=1),w&&(se=Z(se),ce=2),nt([H],0,!1,se,ce||0))};function ve(){return!l&&d<r}function he(){var H=_;return _=[],H}function ne(H,se,ce){var pe=!1;return H&&H.length>0&&!l&&m[se]&&T&&(pe=se!==0||ve()&&(ce>0||c.allowRequestSending())),pe}function je(H){var se={};return H&&Se(H,function(ce,pe){se[pe]={iKey:ce.iKey(),evts:ce.events()}}),se}function nt(H,se,ce,pe,we){if(!(!H||H.length===0)){if(l){Uo(H,1,pe);return}pe=Z(pe);try{var ot=H,We=pe!==0;Ur(h,function(){return"HttpManager:_sendBatches"},function(j){j&&(H=H.slice(0));for(var Y=[],K=null,me=Li(),Ae=m[pe]||(We?m[1]:m[0]),qe=Ae&&Ae._transport,kt=N&&(w||z(pe)||qe===3||Ae._isSync&&qe===2);ne(H,pe,se);){var Vt=H.shift();Vt&&Vt.count()>0&&(a.isTenantKilled(Vt.iKey())?Y.push(Vt):(K=K||T.createPayload(se,ce,We,kt,we,pe),T.appendPayload(K,Vt,e)?K.overflow!==null&&(H=[K.overflow].concat(H),K.overflow=null,J(K,me,Li(),we),me=Li(),K=null):(J(K,me,Li(),we),me=Li(),H=[Vt].concat(H),K=null)))}K&&J(K,me,Li(),we),H.length>0&&(_=H.concat(_)),Uo(Y,8004,pe)},function(){return{batches:je(ot),retryCount:se,isTeardown:ce,isSynchronous:We,sendReason:we,useSendBeacon:z(pe),sendType:pe}},!We)}catch(j){vr(f,2,48,"Unexpected Exception sending batch: "+Er(j))}}}function ee(H,se){var ce={url:s,hdrs:{},useHdrs:!1};se?(ce.hdrs=Rd(ce.hdrs,y),ce.useHdrs=Oi(ce.hdrs).length>0):ar(y,function(j,Y){p3[j]?Fv(ce,p3[j],Y,!1):(ce.hdrs[j]=Y,ce.useHdrs=!0)}),Fv(ce,o3,"NO_AUTH",se),Fv(ce,JA,Ll,se);var pe=ma;Se(H.apiKeys,function(j){pe.length>0&&(pe+=","),pe+=j}),Fv(ce,tR,pe,se),Fv(ce,eR,xn().toString(),se);var we=Gx(H);if(ln(we)&&(ce.url+="&ext.intweb.msfpc="+we),c.shouldAddClockSkewHeaders()&&Fv(ce,ZA,c.getClockSkewHeaderValue(),se),h.getWParam){var ot=h.getWParam();ot>=0&&(ce.url+="&w="+ot)}for(var We=0;We<v.length;We++)ce.url+="&"+v[We].name+"="+v[We].value;return ce}function Ee(H,se,ce){H[se]=H[se]||{},H[se][p.identifier]=ce}function J(H,se,ce,pe){if(H&&H.payloadBlob&&H.payloadBlob.length>0){var we=!!B.sendHook,ot=m[H.sendType];!z(H.sendType)&&H.isBeacon&&H.sendReason===2&&(ot=m[2]||m[3]||ot);var We=O;(H.isBeacon||ot._transport===3)&&(We=!1);var j=ee(H,We);We=We||j.useHdrs;var Y=Li();Ur(h,function(){return"HttpManager:_doPayloadSend"},function(){for(var K=0;K<H.batches.length;K++)for(var me=H.batches[K],Ae=me.events(),qe=0;qe<Ae.length;qe++){var kt=Ae[qe];if(I){var Vt=kt.timings=kt.timings||{};Ee(Vt,"sendEventStart",Y),Ee(Vt,"serializationStart",se),Ee(Vt,"serializationCompleted",ce)}kt[u3]>0?kt[u3]++:kt[u3]=1}Uo(H.batches,1e3+(pe||0),H.sendType,!0);var yr={data:H.payloadBlob,urlString:j.url,headers:j.hdrs,_thePayload:H,_sendReason:pe,timeout:V,disableXhrSync:L,disableFetchKeepAlive:A};We&&(cce(yr.headers,r3)||(yr.headers[r3]=jae),cce(yr.headers,XA)||(yr.headers[XA]=t3));var qv=null;ot&&(qv=function($x){c.firstRequestSent();var Hv=function(mR,kce){$e(mR,kce,H,pe)},ha=H.isTeardown||H.isSync;try{ot.sendPOST($x,Hv,ha),B.sendListener&&B.sendListener(yr,$x,ha,H.isBeacon)}catch(mR){sa(f,"Unexpected exception sending payload. Ex:"+Er(mR)),de(Hv,0,{})}}),Ur(h,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(qv)if(H.sendType===0&&d++,we&&!H.isBeacon&&ot._transport!==3){var $x={data:yr.data,urlString:yr.urlString,headers:Rd({},yr.headers),timeout:yr.timeout,disableXhrSync:yr.disableXhrSync,disableFetchKeepAlive:yr.disableFetchKeepAlive},Hv=!1;Ur(h,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{B.sendHook($x,function(ha){Hv=!0,!g&&!ha._thePayload&&(ha._thePayload=ha._thePayload||yr._thePayload,ha._sendReason=ha._sendReason||yr._sendReason),qv(ha)},H.isSync||H.isTeardown)}catch{Hv||qv(yr)}})}else qv(yr)})},function(){return{thePayload:H,serializationStart:se,serializationCompleted:ce,sendReason:pe}},H.isSync)}H.sizeExceed&&H.sizeExceed.length>0&&Uo(H.sizeExceed,8003,H.sendType),H.failedEvts&&H.failedEvts.length>0&&Uo(H.failedEvts,8002,H.sendType)}function Oe(H,se){I&&Se(H,function(ce){var pe=ce.timings=ce.timings||{};Ee(pe,"sendEventCompleted",se)})}function $e(H,se,ce,pe){var we=9e3,ot=null,We=!1,j=!1;try{var Y=!0;if(typeof H!==sn){if(se){c.setClockSkew(se[i3]);var K=se[n3]||se["kill-duration-seconds"];Se(a.setKillSwitchTenants(se[Vae],K),function(Ae){Se(ce.batches,function(qe){if(qe.iKey()===Ae){ot=ot||[];var kt=qe.split(0);ce.numEvents-=kt.count(),ot.push(kt)}})})}if(H==200||H==204){we=200;return}(!Zae(H)||ce.numEvents<=0)&&(Y=!1),we=9e3+H%1e3}if(Y){we=100;var me=ce.retryCnt;ce.sendType===0&&(me<n?(We=!0,pc(function(){ce.sendType===0&&d--,nt(ce.batches,me+1,ce.isTeardown,w?2:ce.sendType,5)},w,nR(me))):(j=!0,w&&(we=8001)))}}finally{We||(c.setClockSkew(),pt(ce,we,pe,j)),Uo(ot,8004,ce.sendType)}}function pt(H,se,ce,pe){try{pe&&p._backOffTransmission(),se===200&&(!pe&&!H.isSync&&p._clearBackOff(),it(H.batches)),Uo(H.batches,se,H.sendType,!0)}finally{H.sendType===0&&(d--,ce!==5&&B.sendQueuedRequests(H.sendType,ce))}}function it(H){if(I){var se=Li();Se(H,function(ce){ce&&ce.count()>0&&Oe(ce.events(),se)})}}function pc(H,se,ce){se?H():o.set(H,ce)}function Fl(H){var se={};if(Nr(H)){var ce=cr(H).split(/[\r\n]+/);Se(ce,function(pe){if(pe){var we=pe.indexOf(": ");if(we!==-1){var ot=cr(pe.substring(0,we)).toLowerCase(),We=cr(pe.substring(we+1));se[ot]=We}else se[cr(pe)]=1}})}return se}function Gx(H){for(var se=0;se<H.batches.length;se++){var ce=H.batches[se].Msfpc();if(ce)return encodeURIComponent(ce)}return ma}function Bv(H){var se=B._responseHandlers;try{for(var ce=0;ce<se.length;ce++)try{se[ce](H)}catch(we){vr(f,1,519,"Response handler failed: "+we)}if(H){var pe=JSON.parse(H);ln(pe.webResult)&&ln(pe.webResult[Lv])&&R.set("MSFPC",pe.webResult[Lv],365*86400)}}catch{}}function Uo(H,se,ce,pe){if(H&&H.length>0&&i){var we=i[Uv(se)];if(we){var ot=ce!==0;Ur(h,function(){return"HttpManager:_sendBatchesNotification"},function(){pc(function(){try{we.call(i,H,se,ot,ce)}catch(We){vr(f,1,74,"send request notification failed: "+We)}},pe||ot,0)},function(){return{batches:je(H),reason:se,isSync:ot,sendSync:pe,sendType:ce}},!ot)}}}function Uv(H){var se=CBe[H];return ln(se)||(se=Hae,H>=9e3&&H<=9999?se=qae:H>=8e3&&H<=8999?se=QA:H>=1e3&&H<=1999&&(se=Uae)),se}})}return t.__ieDyn=1,t}()});function SBe(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout(t,e,r)}function TBe(t){clearTimeout(t)}function Hx(t,e){return{set:t||SBe,clear:e||TBe}}var pce=k(()=>{});var IBe,fce,wBe,mce,hce,ABe,gce,RBe,lm,oR,vce,yce,PBe,kBe,_ce,xce=k(()=>{eo();Xn();om();Zq();c3();dce();qx();l3();pce();IBe=.25,fce=500,wBe=20,mce=6,hce=2,ABe=4,gce=2,RBe=1,lm="eventsDiscarded",oR="overrideInstrumentationKey",vce="maxEventRetryAttempts",yce="maxUnloadEventRetryAttempts",PBe="addUnloadCb",kBe=function(t){Qs(e,t);function e(){var r=t.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.14";var n,i=!1,o=[],s=null,a=!1,l=0,c=500,u=0,d=1e4,p={},f=sm,m=null,h=null,g=0,v=0,y,_,T={},I,R,w=-1,O,V=!0,L=!1,A=mce,N=hce,q,B;return Pt(e,r,function(P,F){ve(),P._getDbgPlgTargets=function(){return[_]},P.initialize=function(j,Y,K){Ur(Y,function(){return"PostChannel:initialize"},function(){var me=Y;F.initialize(j,Y,K);try{var Ae=!!Y[PBe];q=Al(ca(P.identifier),Y.evtNamespace&&Y.evtNamespace());var qe=P._getTelCtx();j.extensionConfig[P.identifier]=j.extensionConfig[P.identifier]||{},n=qe.getExtCfg(P.identifier),B=Hx(n.setTimeoutOverride,n.clearTimeoutOverride),V=!n.disableOptimizeObj&&$A(),W(me),n.eventsLimitInMem>0&&(d=n.eventsLimitInMem),n.immediateEventLimit>0&&(c=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(I=n.autoFlushEventsLimit),no(n[vce])&&(A=n[vce]),no(n[yce])&&(N=n[yce]),We(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(y=n.httpXHROverride),ln(j.anonCookieName)&&_.addQueryStringParameter("anoncknm",j.anonCookieName),_.sendHook=n.payloadPreprocessor,_.sendListener=n.payloadListener;var kt=n.overrideEndpointUrl?n.overrideEndpointUrl:j.endpointUrl;P._notificationManager=Y.getNotifyMgr(),_.initialize(kt,P.core,P,y,n);var Vt=j.disablePageUnloadEvents||[];Xf(xe,Vt,q),Tv(xe,Vt,q),Iv(Ye,j.disablePageShowEvents,q)}catch(yr){throw P.setInitialized(!1),yr}},function(){return{coreConfig:j,core:Y,extensions:K}})},P.processTelemetry=function(j,Y){rm(j,P.identifier),Y=P._getTelCtx(Y);var K=Y.getExtCfg(P.identifier),me=!!n.disableTelemetry;K&&(me=me||!!K.disableTelemetry);var Ae=j;!me&&!i&&(n[oR]&&(Ae.iKey=n[oR]),K&&K[oR]&&(Ae.iKey=K[oR]),de(Ae,!0),L?je(2,2):Z()),P.processNext(Ae,Y)},P._doTeardown=function(j,Y){je(2,2),i=!0,_.teardown(),_x(null,q),xx(null,q),bx(null,q),ve()};function W(j){var Y=j.getWParam;j.getWParam=function(){var K=0;return n.ignoreMc1Ms0CookieProcessing&&(K=K|2),K|Y()}}function xe(j){var Y=j||ac().event;Y.type!=="beforeunload"&&(L=!0,_.setUnloading(L)),je(2,2)}function Ye(j){L=!1,_.setUnloading(L)}function de(j,Y){if(j.sendAttempt||(j.sendAttempt=0),j.latency||(j.latency=1),j.ext&&j.ext[a3]&&delete j.ext[a3],j.ext&&j.ext[rR]&&j.ext[rR].id&&delete j.ext[rR].id,V&&(rm,j.ext=Cl(j.ext),j.baseData&&(j.baseData=Cl(j.baseData)),j.data&&(j.data=Cl(j.data))),j.sync){if(g||a)j.latency=3,j.sync=!1;else if(_){V&&(j=Cl(j)),_.sendSynchronousBatch(Mv.create(j.iKey,[j]),j.sync===!0?1:j.sync,3);return}}var K=j.latency,me=u,Ae=d;K===4&&(me=l,Ae=c);var qe=!1;if(me<Ae)qe=!J(j,Y);else{var kt=1,Vt=wBe;K===4&&(kt=4,Vt=1),qe=!0,Oe(j.iKey,j.latency,kt,Vt)&&(qe=!J(j,Y))}qe&&Uv(lm,[j],na.QueueFull)}P.setEventQueueLimits=function(j,Y){d=j>0?j:1e4,I=Y>0?Y:0,We();var K=u>j;if(!K&&R>0)for(var me=1;!K&&me<=3;me++){var Ae=T[me];Ae&&Ae.batches&&Se(Ae.batches,function(qe){qe&&qe.count()>=R&&(K=!0)})}Ee(!0,K)},P.pause=function(){ne(),a=!0,_.pause()},P.resume=function(){a=!1,_.resume(),Z()},P.addResponseHandler=function(j){_._responseHandlers.push(j)},P._loadTransmitProfiles=function(j){Fl(),ar(j,function(Y,K){var me=K.length;if(me>=2){var Ae=me>2?K[2]:0;if(K.splice(0,me-2),K[1]<0&&(K[0]=-1),K[1]>0&&K[0]>0){var qe=K[0]/K[1];K[0]=Math.ceil(qe)*K[1]}Ae>=0&&K[1]>=0&&Ae>K[1]&&(Ae=K[1]),K.push(Ae),p[Y]=K}})},P.flush=function(j,Y,K){if(j===void 0&&(j=!0),!a)if(K=K||1,j)s==null?(ne(),pt(1,0,K),s=he(function(){s=null,it(Y,K)},0)):o.push(Y);else{var me=ne();Ue(1,1,K),Y?.(),me&&Z()}},P.setMsaAuthTicket=function(j){_.addHeader(Ux,j)},P.hasEvents=z,P._setTransmitProfile=function(j){f!==j&&p[j]!==void 0&&(ne(),f=j,Z())};function Ue(j,Y,K){var me=pt(j,Y,K);return _.sendQueuedRequests(Y,K),me}function z(){return u>0}function Z(){if(w>=0&&pt(w,0,O)&&_.sendQueuedRequests(0,O),l>0&&!h&&!a){var j=p[f][2];j>=0&&(h=he(function(){h=null,Ue(4,0,1),Z()},j))}var Y=p[f][1];!m&&!s&&Y>=0&&!a&&(z()?m=he(function(){m=null,Ue(v===0?3:1,0,1),v++,v%=2,Z()},Y):v=0)}P._backOffTransmission=function(){g<ABe&&(g++,ne(),Z())},P._clearBackOff=function(){g&&(g=0,ne(),Z())};function ve(){n=null,i=!1,o=[],s=null,a=!1,l=0,c=500,u=0,d=1e4,p={},f=sm,m=null,h=null,g=0,v=0,y=null,T={},I=void 0,R=0,w=-1,O=null,V=!0,L=!1,A=mce,N=hce,q=null,B=Hx(),_=new uce(fce,gce,RBe,{requeue:Bv,send:se,sent:ce,drop:pe,rspFail:we,oth:ot},B),Gx(),nt(),We()}function he(j,Y){Y===0&&g&&(Y=1);var K=1e3;return g&&(K=nR(g-1)),B.set(j,Y*K)}function ne(){return m!==null?(B.clear(m),m=null,v=0,!0):!1}function je(j,Y){ne(),s&&(B.clear(s),s=null),a||Ue(1,j,Y)}function nt(){T[4]={batches:[],iKeyMap:{}},T[3]={batches:[],iKeyMap:{}},T[2]={batches:[],iKeyMap:{}},T[1]={batches:[],iKeyMap:{}}}function ee(j,Y,K){var me=T[Y];me||(Y=1,me=T[Y]);var Ae=me.iKeyMap[j];return!Ae&&K&&(Ae=Mv.create(j),me.batches.push(Ae),me.iKeyMap[j]=Ae),Ae}function Ee(j,Y){_.canSendRequest()&&!g&&(I>0&&u>I&&(Y=!0),Y&&s==null&&P.flush(j,null,20))}function J(j,Y){V&&(j=Cl(j));var K=j.latency,me=ee(j.iKey,K,!0);return me.addEvent(j)?(K!==4?(u++,Y&&j.sendAttempt===0&&Ee(!j.sync,R>0&&me.count()>=R)):l++,!0):!1}function Oe(j,Y,K,me){for(;K<=Y;){var Ae=ee(j,Y,!0);if(Ae&&Ae.count()>0){var qe=Ae.split(0,me),kt=qe.count();if(kt>0)return K===4?l-=kt:u-=kt,H(lm,[qe],na.QueueFull),!0}K++}return $e(),!1}function $e(){for(var j=0,Y=0,K=function(Ae){var qe=T[Ae];qe&&qe.batches&&Se(qe.batches,function(kt){Ae===4?j+=kt.count():Y+=kt.count()})},me=1;me<=4;me++)K(me);u=Y,l=j}function pt(j,Y,K){var me=!1,Ae=Y===0;return!Ae||_.canSendRequest()?Ur(P.core,function(){return"PostChannel._queueBatches"},function(){for(var qe=[],kt=4;kt>=j;){var Vt=T[kt];Vt&&Vt.batches&&Vt.batches.length>0&&(Se(Vt.batches,function(yr){_.addBatch(yr)?me=me||yr&&yr.count()>0:qe=qe.concat(yr.events()),kt===4?l-=yr.count():u-=yr.count()}),Vt.batches=[],Vt.iKeyMap={}),kt--}qe.length>0&&Uv(lm,qe,na.KillSwitch),me&&w>=j&&(w=-1,O=0)},function(){return{latency:j,sendType:Y,sendReason:K}},!Ae):(w=w>=0?Math.min(w,j):j,O=Math.max(O,K)),me}function it(j,Y){Ue(1,0,Y),$e(),pc(function(){j&&j(),o.length>0?s=he(function(){s=null,it(o.shift(),Y)},0):(s=null,Z())})}function pc(j){_.isCompletelyIdle()?j():s=he(function(){s=null,pc(j)},IBe)}function Fl(){ne(),Gx(),f=sm,Z()}function Gx(){p={},p[sm]=[2,1,0],p[WA]=[6,3,0],p[KA]=[18,9,0]}function Bv(j,Y){var K=[],me=A;L&&(me=N),Se(j,function(Ae){Ae&&Ae.count()>0&&Se(Ae.events(),function(qe){qe&&(qe.sync&&(qe.latency=4,qe.sync=!1),qe.sendAttempt<me?(rm(qe,P.identifier),de(qe,!1)):K.push(qe))})}),K.length>0&&Uv(lm,K,na.NonRetryableStatus),L&&je(2,2)}function Uo(j,Y){var K=P._notificationManager||{},me=K[j];if(me)try{me.apply(K,Y)}catch(Ae){vr(P.diagLog(),1,74,j+" notification failed: "+Ae)}}function Uv(j,Y){for(var K=[],me=2;me<arguments.length;me++)K[me-2]=arguments[me];Y&&Y.length>0&&Uo(j,[Y].concat(K))}function H(j,Y){for(var K=[],me=2;me<arguments.length;me++)K[me-2]=arguments[me];Y&&Y.length>0&&Se(Y,function(Ae){Ae&&Ae.count()>0&&Uo(j,[Ae.events()].concat(K))})}function se(j,Y,K){j&&j.length>0&&Uo("eventsSendRequest",[Y>=1e3&&Y<=1999?Y-1e3:0,K!==!0])}function ce(j,Y){H("eventsSent",j,Y),Z()}function pe(j,Y){H(lm,j,Y>=8e3&&Y<=8999?Y-8e3:na.Unknown)}function we(j){H(lm,j,na.NonRetryableStatus),Z()}function ot(j,Y){H(lm,j,na.Unknown),Z()}function We(){!n||!n.disableAutoBatchFlushLimit?R=Math.max(fce*(gce+1),d/6):R=0}Mo(P,"_setTimeoutOverride",function(){return B.set},function(j){B=Hx(j,B.clear)}),Mo(P,"_clearTimeoutOverride",function(){return B.clear},function(j){B=Hx(B.set,j)})}),r}return e.__ieDyn=1,e}(Zf),_ce=kBe});var bce={};Jn(bce,{BE_PROFILE:()=>KA,NRT_PROFILE:()=>WA,PostChannel:()=>_ce,RT_PROFILE:()=>sm});var Ece=k(()=>{xce();Zq()});var Sce=x(lc=>{"use strict";var NBe=lc&&lc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OBe=lc&&lc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Cce=lc&&lc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NBe(e,t,r);return OBe(e,t),e};Object.defineProperty(lc,"__esModule",{value:!0});lc.oneDataSystemClientFactory=void 0;var DBe=async(t,e,r)=>{let n=await Promise.resolve().then(()=>Cce((om(),En(Fae)))),i=await Promise.resolve().then(()=>Cce((Ece(),En(bce)))),o=new n.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=u}let c=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(u=>{c&&(u.ext=u.ext??{},u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),o},LBe=async(t,e,r)=>{let n=await DBe(t,e,r);return{logEvent:(s,a)=>{try{n?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(l){throw new Error(`Failed to log event to app insights!
`+l.message)}},flush:async()=>{try{return new Promise((a,l)=>{if(!n){a();return}n.flush(!0,c=>{if(!c){l("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!n){a();return}n.unload(!1,()=>{a(),n=void 0},1e3)})}};lc.oneDataSystemClientFactory=LBe});var Tce=x(Ml=>{"use strict";var MBe=Ml&&Ml.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FBe=Ml&&Ml.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sR=Ml&&Ml.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&MBe(e,t,r);return FBe(e,t),e};Object.defineProperty(Ml,"__esModule",{value:!0});var f3=sR(require("os")),kd=sR(require("vscode")),BBe=sR(require("https")),UBe=Doe(),qBe=Loe(),jx=Moe(),HBe=Sce(),jBe=async(t,e)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let i=await Promise.resolve().then(()=>sR(vL()));i.defaultClient?(r=new i.TelemetryClient(t),r.channel.setUseDiskRetryCaching(!0)):(i.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setAutoCollectIncomingRequestAzureFunctions(!1).setUseDiskRetryCaching(!0).start(),r=i.defaultClient),kd&&kd.env&&(r.context.tags[r.context.keys.userId]=kd.env.machineId,r.context.tags[r.context.keys.sessionId]=kd.env.sessionId,r.context.tags[r.context.keys.cloudRole]=kd.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=kd.env.appName)}catch(i){return Promise.reject(`Failed to initialize app insights!
`+i.message)}return e?.length&&VBe(r,e),{logEvent:(i,o)=>{try{r?.trackEvent({name:i,properties:o?.properties,measurements:o?.measurements})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},flush:async()=>{try{r?.flush()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}},dispose:async()=>{r?.flush({isAppCrashing:!0}),r=void 0}}};function VBe(t,e){t.addTelemetryProcessor(r=>(Array.isArray(r.tags)?r.tags.forEach(n=>jx.TelemetryUtil.applyReplacements(n,e)):r.tags&&jx.TelemetryUtil.applyReplacements(r.tags,e),r.data.baseData&&jx.TelemetryUtil.applyReplacements(r.data.baseData,e),!0))}function GBe(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=BBe.request(e.urlString,n,o=>{o.on("data",function(s){r(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){r(0,{})})});i.write(e.data,o=>{o&&r(0,{})}),i.end()}catch{r(0,{})}}}}var m3=class extends UBe.BaseTelemetryReporter{constructor(e,r){let n=s=>jBe(s,r);jx.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=s=>(0,HBe.oneDataSystemClientFactory)(s,kd,GBe()));let i={release:f3.release(),platform:f3.platform(),architecture:f3.arch()},o=new qBe.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,kd,{additionalCommonProperties:jx.TelemetryUtil.getAdditionalCommonProperties(i)})}};Ml.default=m3});var YBe={};Jn(YBe,{activate:()=>zBe,createExtensionContext:()=>Rce,onDeactivate:()=>Pce});module.exports=En(YBe);var vm=Te(N4(),1),IUe={ALPN_HTTP2:vm.default.ALPN_HTTP2,ALPN_HTTP2C:vm.default.ALPN_HTTP2C,ALPN_HTTP1_1:vm.default.ALPN_HTTP1_1,ALPN_HTTP1_0:vm.default.ALPN_HTTP1_0},{fetch:wUe,context:O4,reset:AUe,noCache:RUe,h1:PUe,keepAlive:kUe,h1NoCache:NUe,keepAliveNoCache:OUe,cacheStats:DUe,clearCache:LUe,offPush:MUe,onPush:FUe,createUrl:BUe,timeoutSignal:UUe,Body:qUe,Headers:HUe,Request:jUe,Response:VUe,AbortController:D4,AbortError:L4,AbortSignal:GUe,FetchBaseError:$Ue,FetchError:fb,ALPN_HTTP2:zUe,ALPN_HTTP2C:WUe,ALPN_HTTP1_1:KUe,ALPN_HTTP1_0:YUe}=vm.default;gH().install();var jt=require("vscode");var AL=require("events");var un="github.copilot";var yH=hP(),be={IterativeFixing:["editor","iterativeFixing"],LocaleOverride:["chat","localeOverride"],WelcomeMessage:["chat","welcomeMessage"],DebugOverrideProxyUrl:["advanced","debug.overrideProxyUrl"],DebugChatOverrideProxyUrl:["advanced","debug.chatOverrideProxyUrl"],DebugTestOverrideProxyUrl:["advanced","debug.testOverrideProxyUrl"],DebugOverrideEngine:["advanced","debug.overrideEngine"],DebugOverrideChatEngine:["advanced","debug.overrideChatEngine"],DebugOverrideChatMaxTokenNum:["advanced","debug.overrideChatMaxTokenNum"],DebugOverrideChatOffTopicModel:["advanced","debug.overrideChatOffTopicModel"],DebugOverrideChatOffTopicModelTokenizer:["advanced","debug.overrideChatOffTopicModelTokenizer"],DebugOverrideChatOffTopicModelThreshold:["advanced","debug.overrideChatOffTopicModelThreshold"],DebugOverrideLogLevels:["advanced","debug.overrideLogLevels"],DebugFilterLogCategories:["advanced","debug.filterLogCategories"],ConversationSlashCommandEnablements:["advanced","slashCommands"],ConversationVariablesEnablements:["advanced","variables"],ConversationAdditionalPromptContext:["advanced","conversationAdditionalPromptContext"],ConversationLoggingEnabled:["advanced","conversationLoggingEnabled"],ConversationIntentDetection:["advanced","conversationIntentDetection"],KerberosServicePrincipal:["advanced","kerberosServicePrincipal"],AgentsEndpointUrl:["advanced","agentsEndpointUrl"],EnableRemoteAgents:["advanced","enableRemoteAgents"],EnableRemoteSkills:["advanced","enableRemoteSkills"],UseCAPI:["advanced","useCAPI"],EnableAgents:["advanced","enableAgents"],ExplainIntentFineTunedContext:["advanced","explain.fineTunedContext"],ExplainIntentRefer:["advanced","explain.refer"],WorkspaceNewFlowEnabled:["advanced","workspace.useNewFlow"],WorkspaceCodeSearchEnabled:["advanced","workspace.codeSearchEnabled"],WorkspaceUseAdaEnabled:["advanced","workspace.useAda"],InlineChatStreaming:["advanced","inlineChatStreaming"]};function Go(t){return Array.isArray(t)?`${t[0]}.${t[1]}`:t}var vH={[Go(be.DebugOverrideEngine)]:"",[Go(be.DebugOverrideChatEngine)]:"",[Go(be.DebugOverrideChatMaxTokenNum)]:0,[Go(be.DebugOverrideChatOffTopicModel)]:"",[Go(be.DebugOverrideChatOffTopicModelTokenizer)]:"",[Go(be.DebugOverrideChatOffTopicModelThreshold)]:0,[Go(be.DebugOverrideProxyUrl)]:"",[Go(be.DebugChatOverrideProxyUrl)]:"",[Go(be.DebugTestOverrideProxyUrl)]:"",[Go(be.DebugOverrideLogLevels)]:{},[Go(be.DebugFilterLogCategories)]:[],[Go(be.UseCAPI)]:!1};var yc=class{};var ey;function ppe(){if(!ey){ey=new Map;for(let e of Object.keys(vH))ey.set(`${un}.${e}`,vH[e]);let t=yH.contributes.configuration.properties;for(let e of Object.keys(t))typeof t[e].default<"u"&&ey.set(e,t[e].default)}return ey}function _H(t){let r=ppe().get(`${un}.${t}`);if(typeof r>"u")throw new Error(`Missing config default value: ${un}.${t}`);return r}function Sn(t,e){return t.get(yc).getConfig(e)}function fpe(t,e){return t.get(yc).isDefaultSettingOverwritten(e)}function Ze(t,e,r){try{if(fpe(t,e)){let n=Sn(t,e);return!Array.isArray(r.default)&&!Array.isArray(n)&&typeof r.default=="object"&&typeof n=="object"?{...r.default,...n}:n}}catch{}return r.default}function xH(t){return t.get(yc).dumpConfig()}var uo=class{constructor(){this.packageJson=yH}isProduction(){return this.getBuildType()!=="dev"}isPreRelease(){return!!this.packageJson.isPreRelease||!this.isProduction()}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function bH(t){return t.get(uo).getBuildType()}function EH(t){return t.get(uo).getBuild()}function CH(t){return t.get(uo).getVersion()}function ty(t){return t.get(uo).isPreRelease()}var ei=class{constructor(e,r){this.sessionId=e;this.machineId=r}};function Hd({name:t,version:e}){return`${t}/${e}`}var Mi=class{};function va(t){let e=t.get(Mi);return{"Editor-Version":Hd(e.getEditorInfo()),"Editor-Plugin-Version":Hd(e.getEditorPluginInfo())}}var _c=class{now(){return new Date}};function Cr(t){return{name:t,_serviceIdentifierBrand:!0}}var ry=class{constructor(e,r){this.constructionStack=[];this.instances=new Map;this.isSealed=!1;this.base=r;let n=new Error().stack?.split(`
`);if(n&&this.constructionStack.push(...n.slice(1)),e)for(let[i,o]of e)this.instances.set(i,o)}get(e){let r=this.tryGet(e);if(r)return r;throw new Error(`No instance of ${SH(e)} has been registered.
${this}`)}safeGet(e){return this.tryGet(e)}tryGet(e){let r=this.instances.get(e);if(r)return r;if(this.base)return this.base.tryGet(e)}define(e,r){if(this.isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");let n=this.instances.get(e);return this.instances.set(e,r),n}seal(){this.isSealed=!0}toString(){let e=`    Accessor created at:
`;for(let r of this.constructionStack||[])e+=`    ${r}
`;return e+=this.base?.toString()??"",e}get debug(){let e={};for(let[r,n]of this.instances)e[SH(r)]=n;return e}};function SH(t){return t.name}var NQ=require("crypto");var mpe=require("events"),fi=class extends mpe{constructor(){super()}emit(e,r,n){return super.emit(e,r,n)}};var jd=class{constructor(e=10){this.values=new Map;this.lruKeys=[];if(e<1)throw new Error("Cache size must be at least 1");this.size=e}removeKeyFromLRU(e){let r=this.lruKeys.indexOf(e);r!==-1&&this.lruKeys.splice(r,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}clear(){this.values.clear(),this.lruKeys=[]}deleteKey(e){this.removeKeyFromLRU(e);let r=this.values.get(e);return r!==void 0&&this.values.delete(e),r}get(e){if(this.values.has(e)){let r=this.values.get(e);return this.touchKeyInLRU(e),r}}keys(){return this.lruKeys.slice()}getValues(){return this.values.values()}put(e,r){let n;if(!this.values.has(e)&&this.lruKeys.length===this.size){let i=this.lruKeys.shift(),o=this.deleteKey(i);n=[i,o]}return this.values.set(e,r),this.touchKeyInLRU(e),n}},xb=class{constructor(e){this.actual=new jd(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};var xc=class t{constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return e.get(ut).sendExpProblemTelemetry({reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};var TH=Te(require("util"));var Vd=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};var Kr=class{set rejectUnauthorized(e){this._rejectUnauthorized=e}get rejectUnauthorized(){return this._rejectUnauthorized}};function Eb(t){return t instanceof L4}var bb=class{constructor(e,r,n,i,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getJson=o;this.getBody=s;this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}},gpe=30*1e3;function Cb(t,e,r,n,i,o,s){let a=t.get(ei),l={Authorization:TH.format("Bearer %s",r),"X-Request-Id":i,"VScode-SessionId":a.sessionId,"VScode-MachineId":a.machineId,...va(t),...e.getExtraHeaders?e.getExtraHeaders():{}};e.interceptBody&&e.interceptBody(o),t.get(Vd).contributeHeaders(l),n&&(l["OpenAI-Intent"]=n);let c={method:"POST",headers:l,json:o,timeout:gpe},u=t.get(ut),d=t.get(Kr);if(s){let f=d.makeAbortController();s.onCancellationRequested(()=>{u.sendTelemetry("networking.cancelRequest",Gt.createAndMarkAsIssued({headerRequestId:i})),f.abort()}),c.signal=f.signal}return d.fetch(e.url,c).catch(f=>{if(f.code==="ECONNRESET"||f.code==="ETIMEDOUT"||f.code==="ERR_HTTP2_INVALID_SESSION"||f.message==="ERR_HTTP2_GOAWAY_SESSION")return u.sendTelemetry("networking.disconnectAll"),d.disconnectAll().then(()=>d.fetch(e.url,c));throw f})}var ya=class{},Sb=class extends ya{async fetchExperiments(e,r){let n=e.get(Kr),i;try{i=await n.fetch("https://default.exp-tas.com/vscode/ab",{method:"GET",headers:r})}catch(l){return xc.createFallbackConfig(e,`Error fetching ExP config: ${l}`)}if(!i.ok)return xc.createFallbackConfig(e,`ExP responded with ${i.status}`);let o=await i.json(),s=o.Configs.find(l=>l.Id==="vscode")??{Id:"vscode",Parameters:{}},a=Object.entries(s.Parameters).map(([l,c])=>l+(c?"":"cf"));return new xc(s.Parameters,o.AssignmentContext,a.join(";"))}},Tb=class extends ya{async fetchExperiments(e,r){return xc.createEmptyConfig()}};var vpe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},Ib=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=vpe[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};var wb=class{constructor(e){this.prefix=e}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},gP=class extends wb{getValue(e){return this.prefix}getUpcomingValues(e){return[]}},IH=t=>new gP(t),Ab=class extends wb{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let s of i)for(let a of o)n.push(this.prefix+s+a);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets===void 0?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs===void 0?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var wH="X-Copilot-ClientTimeBucket",Rb=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=IH(e)}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new Ab(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(wH,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(wH,o))}}};var vP=class{constructor(e){this.accessor=e;this.cache=new jd(200)}async fetchExpConfig(e){let r=this.cache.get(e.stringify());return r||(r=new yP(()=>this.accessor.get(ya).fetchExperiments(this.accessor,e.toHeaders()),1e3*60*60),this.cache.put(e.stringify(),r)),r.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},yP=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}},mi=class t{constructor(e){this.accessor=e;this.staticFilters={};this.dynamicFilters={};this.upcomingDynamicFilters={};this.assignments=new vP(this.accessor)}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}getDynamicFilterValues(){let e={};for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}async getAssignment(e,r={},n){let i=this.getGranularityDirectory(),o=this.makeFilterSettings(r),s=i.extendFilters(o),a=await this.getExpConfig(s.newFilterSettings);i.update(o,+(a.variables.copilotbycallbuckets??NaN),+(a.variables.copilottimeperiodsizeinh??NaN));let l=i.extendFilters(o),c=l.newFilterSettings,u=await this.getExpConfig(c),d=new Promise(p=>setTimeout(p,t.upcomingDynamicFilterCheckDelayMs));for(let p of l.otherFilterSettingsToPrefetch)d=d.then(async()=>{await new Promise(f=>setTimeout(f,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(p)});return this.prepareForUpcomingFilters(c),n&&(n.filtersAndExp={exp:u,filters:c}),u.variables[e]}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.accessor.get(ei).machineId;this.granularityDirectory=new Rb(e,this.accessor.get(_c))}return this.granularityDirectory}makeFilterSettings(e){return new Ib({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e){try{return this.assignments.fetchExpConfig(e)}catch(r){return xc.createFallbackConfig(this.accessor,`Error fetching ExP config: ${r}`)}}async prepareForUpcomingFilters(e){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,n]of Object.entries(this.upcomingDynamicFilters))await new Promise(i=>setTimeout(i,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,n()))}async fastCancellation(){return await this.getAssignment("copilotoverridefastcancellation")??!0}async chatExpModel(){return await this.getAssignment("copilotchatexpmodel")??""}async chatMaxNumTokens(){return await this.getAssignment("copilotchatmaxnumtokens")??0}async chatOffTopicModel(){return await this.getAssignment("copilotchatofftopicmodel")??""}async chatOffTopicModelTokenizer(){return await this.getAssignment("copilotchatofftopicmodeltokenizer")??""}async chatOffTopicModelThreshold(){return await this.getAssignment("copilotchatofftopicmodelthreshold")??0}async addExpAndFilterToTelemetry(e){let r=this.makeFilterSettings({});e.filtersAndExp={filters:r,exp:await this.getExpConfig(r)}}};var bc=class t{constructor(e){this.flags=e}static fromEnvironment(e){return new t({debug:ype(process.argv,process.env),telemetryLogging:_pe(process.env),testMode:e,recordInput:xpe(process.argv,process.env)})}};function _P(t){return t.get(bc).flags.testMode}function RH(t){return _P(t)}function ype(t,e){return t.includes("--debug")||xP(e,"GITHUB_COPILOT_DEBUG")}function _pe(t){return xP(t,"COPILOT_LOG_TELEMETRY")}function xpe(t,e){return t.includes("--record")||xP(e,"GITHUB_COPILOT_RECORD")}function xP(t,e){if(e in t){let r=t[e];return r==="1"||r?.toLowerCase()==="true"}return!1}var TQ=Te(vL()),LS=Te(require("os"));var N_=class{constructor(e,r,n){this.namespace=r;this.client=Uwe(e,n),IQ(e,this.client)}separateData(e){let r={},n={};for(let[i,o]of Object.entries(e))typeof o=="number"?n[i]=o:r[i]=o;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackEvent({name:this.qualifyEventName(e),properties:n,measurements:i})}sendErrorData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:i})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Uwe(t,e){let r=new TQ.TelemetryClient(e);return r.config.enableAutoCollectRequests=!1,r.config.enableAutoCollectPerformance=!1,r.config.enableAutoCollectExceptions=!1,r.config.enableAutoCollectConsole=!1,r.config.enableAutoCollectDependencies=!1,r.config.noDiagnosticChannel=!0,IQ(t,r),r}function IQ(t,e){e.commonProperties=qwe(e.commonProperties,t);let r=t.get(ei);e.context.tags[e.context.keys.sessionId]=r.sessionId,e.context.tags[e.context.keys.userId]=r.machineId,e.context.tags[e.context.keys.cloudRoleInstance]="REDACTED",e.config.endpointUrl=t.get(vu).getUrl()}function qwe(t,e){t=t||{},t.common_os=LS.platform(),t.common_platformversion=LS.release();let r=e.get(ei);return t.common_vscodemachineid=r.machineId,t.common_vscodesessionid=r.sessionId,t.common_uikind="desktop",t.common_remotename="none",t.common_isnewappinstall="",t}var wQ="7d7048df-6dd0-4048-bb23-b716c1461f8f",AQ="3fdd7f28-937a-48c8-9a21-ba337db23bd1";async function MS(t,e,r){let n=t.get(ut);if(await n.deactivate(),!r)return;let i=new N_(t,e,wQ),o=new N_(t,e,AQ);return n.setReporter(i),n.setSecureReporter(o),{dispose(){n.setReporter(void 0),n.setSecureReporter(void 0),i.flush(),o.flush()}}}var K9e=PQ();var qS=class{sendEventData(e,r){throw new Error("Telemetry disabled")}sendErrorData(e,r){throw new Error("Telemetry disabled")}flush(){return Promise.resolve()}};function kQ(t){return t.replace(/([\s|(]|file:\/\/)(\/[^\s]+)/g,"$1[redacted]").replace(/([\s|(]|file:\/\/)([a-zA-Z]:[(\\|/){1,2}][^\s]+)/gi,"$1[redacted]").replace(/([\s|(]|file:\/\/)(\\[^\s]+)/gi,"$1[redacted]")}var O_=class{constructor(e){this.accessor=e;this.reporters=new _L;this.openPromises=void 0}withPromise(e){return this.openPromises?(this.openPromises.add(e),e.then(r=>{this.openPromises?.delete(e)})):e}async enablePromiseTracking(e){e?this.openPromises||(this.openPromises=new Set):await this.awaitOpenPromises(void 0)}setSecureReporter(e){this.reporters.setSecureReporter(e)}setReporter(e){this.reporters.setReporter(e)}async sendTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!1))}async sendRestrictedTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!0))}async sendErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!1))}async sendRestrictedErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!0))}async sendExpProblemTelemetry(e){await this.withPromise(this._sendExpProblemTelemetry(e))}async sendExceptionTelemetry(e,r){await this.withPromise(this._sendExceptionTelemetry(e,r))}async deactivate(){await this.awaitOpenPromises(new Set),await this.reporters.deactivate()}async awaitOpenPromises(e){if(this.openPromises){let r=[...this.openPromises.values()];this.openPromises=e,await Promise.all(r)}}async _sendTelemetry(e,r,n){if(n&&!HS(this.accessor))return;let i=r||Gt.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor,n??!1,"IncludeExp"),this.sendTelemetryEvent(n??!1,e,i)}async _sendExpProblemTelemetry(e){let r="expProblem",n=Gt.createAndMarkAsIssued(e,{});await n.makeReadyForSending(this.accessor,!1,"SkipExp"),this.sendTelemetryEvent(!1,r,n)}async _sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=HS(this.accessor),o=Gt.createAndMarkAsIssued({origin:kQ(r),reason:i?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await o.makeReadyForSending(this.accessor,!1,"IncludeExp"),this.sendTelemetryEvent(!1,"exception",o),!i)return;let s=Gt.createAndMarkAsIssued({origin:r});await s.makeReadyForSending(this.accessor,!0,"IncludeExp"),this.sendTelemetryException(!0,n,s)}async _sendErrorTelemetry(e,r,n){if(n&&!HS(this.accessor))return;let i=r||Gt.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor,n??!1,"IncludeExp"),this.sendTelemetryErrorEvent(n??!1,e,i)}sendTelemetryEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Gt.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}sendTelemetryException(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Gt.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendErrorData(r,{...o,...n.measurements})}}sendTelemetryErrorEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Gt.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}},_L=class{getReporter(e,r){if(!r)return this.reporter;if(HS(e))return this.reporterSecure;if(RH(e))return new qS}setReporter(e){this.reporter=e}setSecureReporter(e){this.reporterSecure=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.flush?this.reporter.flush():void 0,this.reporter=void 0);let r=Promise.resolve();this.reporterSecure&&(r=this.reporterSecure.flush?this.reporterSecure.flush():void 0,this.reporterSecure=void 0),await Promise.all([e,r])}},Op=class{constructor(e,r,n){this.trackingId=r,this.optedIn=n??!1,this.setupUpdateOnToken(e)}setupUpdateOnToken(e){e.get(fi).on("onCopilotToken",r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("tid"),o=r.organization_list;i!==void 0&&(this.trackingId=i,this.organizationsList=o?.toString(),this.optedIn=n)})}},Gt=class t{static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},yu())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o.filtersAndExp=this.filtersAndExp,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=yu())}async extendWithExpTelemetry(e){this.filtersAndExp||await e.get(mi).addExpAndFilterToTelemetry(this),this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=Hd(e.get(Mi).getEditorInfo()),this.properties.editor_plugin_version=Hd(e.get(Mi).getEditorPluginInfo());let r=e.get(ei);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${CH(e)}`;let n=e.get(Mi);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=Hd(n.getEditorInfo())}extendWithConfigProperties(e){let r=xH(e);r["copilot.build"]=EH(e),r["copilot.buildType"]=bH(e);let n=e.get(Op);n.trackingId&&(r["copilot.trackingId"]=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=yu()-this.issuedTime;if(this.measurements.timeSinceIssuedMs=e,this.displayedTime!==void 0){let r=yu()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}async makeReadyForSending(e,r,n){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateTimeSinceIssuedAndDisplayed();for(let i in this.properties)this.properties[i]===void 0&&delete this.properties[i];$we(e,this.properties)}};function yu(){return new Date().getTime()}var Gwe="https://copilot-telemetry.githubusercontent.com/telemetry",vu=class{constructor(e=Gwe){this.url=e}getUrl(){return this.url}};function HS(t){return t.get(Op).optedIn}function $we(t,e){e.unique_id=(0,NQ.randomUUID)();let r=t.get(Mi);e.common_extname=r.getEditorPluginInfo().name,e.common_extversion=r.getEditorPluginInfo().version,e.common_vscodeversion=Hd(r.getEditorInfo())}var nr=Cr("IMSTelemetryService"),ut=Cr("IGHTelemetryService");var Dp=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Dp||{}),_o=class{},jS=class extends _o{constructor(r){super();this.console=r}logIt(r,n,i,...o){n===3?this.console.error(i,...o):n===2&&this.console.warn(i,...o)}},VS=class extends _o{constructor(r){super();this.output=r}logIt(r,n,i,...o){this.output.appendLine(`${i} ${o.map(zwe)}`)}},GS=class extends _o{constructor(r){super();this.targets=r}logIt(r,n,i,...o){this.targets.forEach(s=>s.logIt(r,n,i,...o))}},Re=class{constructor(e,r){this.accessor=e;this.category=r;this.target=e.get(_o),this.ghTelemetry=e.get(ut)}stringToLevel(e){return Dp[e]}log(e,...r){let n=Dp[e];if(!this.shouldLog(this.accessor,e,this.category))return;let o=`${this.accessor.get(_c).now().toISOString()} [${n}] [${this.category}]`;this.target.logIt(this.accessor,e,o,...r)}sendErrorTelemetry(e,r,n){this.ghTelemetry.sendRestrictedErrorTelemetry(e,Gt.createAndMarkAsIssued({context:this.category,level:Dp[3],message:r})),this.ghTelemetry.sendErrorTelemetry(e,Gt.createAndMarkAsIssued({context:this.category,level:Dp[3],message:n}))}telemetryMessage(...e){return e.length>0?JSON.stringify(e):"no msg"}shouldLog(e,r,n){let i=Sn(e,be.DebugFilterLogCategories);if(i.length>0&&!i.includes(n))return!1;let o=Sn(e,be.DebugOverrideLogLevels),s=this.stringToLevel(o[this.category])??this.stringToLevel(o["*"])??1;return r>=s}debug(...e){this.log(0,...e)}info(...e){this.log(1,...e)}warn(...e){this.log(2,...e)}errorAndSendTelemetry(...e){this.sendErrorTelemetry("log",this.telemetryMessage(...e),"[redacted]"),this.log(3,...e)}exception(e,r){let n=r?`${r}: `:"",i=e instanceof Error?e:new Error("Non-error thrown: "+e);this.ghTelemetry.sendExceptionTelemetry(i,r??"Error"),this.log(3,`${n}(${i.constructor.name}) ${i.message}`)}};function zwe(t){switch(typeof t){case"object":return JSON.stringify(t);default:return String(t)}}var Gc=Cr("IDefaultLogger");var Lp=class{};var iAe=zQ(),_u=class{},YS=class{async open(e){await iAe(e)}};var oAe=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],Mp=class{constructor(){this.notifiedErrorCodes=[]}async notifyUser(e,r){oAe.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.displayCertificateErrorNotification(e,r),this.notifiedErrorCodes.push(r.code))}displayCertificateErrorNotification(e,r){let n="https://aka.ms/copilot-ssc",i="Your current Copilot license doesn't support proxy connections with self-signed certificates.";new Re(e,"certificates").errorAndSendTelemetry(`${i} Please visit ${n} to learn more. Original cause: ${JSON.stringify(r)}`),this.showCertificateWarningMessage(e,i,n)}showCertificateWarningMessage(e,r,n){let i={title:"Learn more"};e.get(Lp).showWarningMessage(r,i).then(o=>{o?.title===i.title&&e.get(_u).open(n)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};var WQ;(()=>{"use strict";var t={470:i=>{function o(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}function s(l,c){for(var u,d="",p=0,f=-1,m=0,h=0;h<=l.length;++h){if(h<l.length)u=l.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(f===h-1||m===1))if(f!==h-1&&m===2){if(d.length<2||p!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var g=d.lastIndexOf("/");if(g!==d.length-1){g===-1?(d="",p=0):p=(d=d.slice(0,g)).length-1-d.lastIndexOf("/"),f=h,m=0;continue}}else if(d.length===2||d.length===1){d="",p=0,f=h,m=0;continue}}c&&(d.length>0?d+="/..":d="..",p=2)}else d.length>0?d+="/"+l.slice(f+1,h):d=l.slice(f+1,h),p=h-f-1;f=h,m=0}else u===46&&m!==-1?++m:m=-1}return d}var a={resolve:function(){for(var l,c="",u=!1,d=arguments.length-1;d>=-1&&!u;d--){var p;d>=0?p=arguments[d]:(l===void 0&&(l=process.cwd()),p=l),o(p),p.length!==0&&(c=p+"/"+c,u=p.charCodeAt(0)===47)}return c=s(c,!u),u?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(l){if(o(l),l.length===0)return".";var c=l.charCodeAt(0)===47,u=l.charCodeAt(l.length-1)===47;return(l=s(l,!c)).length!==0||c||(l="."),l.length>0&&u&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return o(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,c=0;c<arguments.length;++c){var u=arguments[c];o(u),u.length>0&&(l===void 0?l=u:l+="/"+u)}return l===void 0?".":a.normalize(l)},relative:function(l,c){if(o(l),o(c),l===c||(l=a.resolve(l))===(c=a.resolve(c)))return"";for(var u=1;u<l.length&&l.charCodeAt(u)===47;++u);for(var d=l.length,p=d-u,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var m=c.length-f,h=p<m?p:m,g=-1,v=0;v<=h;++v){if(v===h){if(m>h){if(c.charCodeAt(f+v)===47)return c.slice(f+v+1);if(v===0)return c.slice(f+v)}else p>h&&(l.charCodeAt(u+v)===47?g=v:v===0&&(g=0));break}var y=l.charCodeAt(u+v);if(y!==c.charCodeAt(f+v))break;y===47&&(g=v)}var _="";for(v=u+g+1;v<=d;++v)v!==d&&l.charCodeAt(v)!==47||(_.length===0?_+="..":_+="/..");return _.length>0?_+c.slice(f+g):(f+=g,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(l){return l},dirname:function(l){if(o(l),l.length===0)return".";for(var c=l.charCodeAt(0),u=c===47,d=-1,p=!0,f=l.length-1;f>=1;--f)if((c=l.charCodeAt(f))===47){if(!p){d=f;break}}else p=!1;return d===-1?u?"/":".":u&&d===1?"//":l.slice(0,d)},basename:function(l,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');o(l);var u,d=0,p=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var m=c.length-1,h=-1;for(u=l.length-1;u>=0;--u){var g=l.charCodeAt(u);if(g===47){if(!f){d=u+1;break}}else h===-1&&(f=!1,h=u+1),m>=0&&(g===c.charCodeAt(m)?--m==-1&&(p=u):(m=-1,p=h))}return d===p?p=h:p===-1&&(p=l.length),l.slice(d,p)}for(u=l.length-1;u>=0;--u)if(l.charCodeAt(u)===47){if(!f){d=u+1;break}}else p===-1&&(f=!1,p=u+1);return p===-1?"":l.slice(d,p)},extname:function(l){o(l);for(var c=-1,u=0,d=-1,p=!0,f=0,m=l.length-1;m>=0;--m){var h=l.charCodeAt(m);if(h!==47)d===-1&&(p=!1,d=m+1),h===46?c===-1?c=m:f!==1&&(f=1):c!==-1&&(f=-1);else if(!p){u=m+1;break}}return c===-1||d===-1||f===0||f===1&&c===d-1&&c===u+1?"":l.slice(c,d)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(c,u){var d=u.dir||u.root,p=u.base||(u.name||"")+(u.ext||"");return d?d===u.root?d+p:d+"/"+p:p}(0,l)},parse:function(l){o(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return c;var u,d=l.charCodeAt(0),p=d===47;p?(c.root="/",u=1):u=0;for(var f=-1,m=0,h=-1,g=!0,v=l.length-1,y=0;v>=u;--v)if((d=l.charCodeAt(v))!==47)h===-1&&(g=!1,h=v+1),d===46?f===-1?f=v:y!==1&&(y=1):f!==-1&&(y=-1);else if(!g){m=v+1;break}return f===-1||h===-1||y===0||y===1&&f===h-1&&f===m+1?h!==-1&&(c.base=c.name=m===0&&p?l.slice(1,h):l.slice(m,h)):(m===0&&p?(c.name=l.slice(1,f),c.base=l.slice(1,h)):(c.name=l.slice(m,f),c.base=l.slice(m,h)),c.ext=l.slice(f,h)),m>0?c.dir=l.slice(0,m-1):p&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,i.exports=a}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>p,Utils:()=>L}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function l(A,N){if(!A.scheme&&N)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${A.authority}", path: "${A.path}", query: "${A.query}", fragment: "${A.fragment}"}`);if(A.scheme&&!o.test(A.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(A.path){if(A.authority){if(!s.test(A.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(A.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let c="",u="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class p{static isUri(N){return N instanceof p||!!N&&typeof N.authority=="string"&&typeof N.fragment=="string"&&typeof N.path=="string"&&typeof N.query=="string"&&typeof N.scheme=="string"&&typeof N.fsPath=="string"&&typeof N.with=="function"&&typeof N.toString=="function"}scheme;authority;path;query;fragment;constructor(N,q,B,P,F,W=!1){typeof N=="object"?(this.scheme=N.scheme||c,this.authority=N.authority||c,this.path=N.path||c,this.query=N.query||c,this.fragment=N.fragment||c):(this.scheme=function(xe,Ye){return xe||Ye?xe:"file"}(N,W),this.authority=q||c,this.path=function(xe,Ye){switch(xe){case"https":case"http":case"file":Ye?Ye[0]!==u&&(Ye=u+Ye):Ye=u}return Ye}(this.scheme,B||c),this.query=P||c,this.fragment=F||c,l(this,W))}get fsPath(){return y(this,!1)}with(N){if(!N)return this;let{scheme:q,authority:B,path:P,query:F,fragment:W}=N;return q===void 0?q=this.scheme:q===null&&(q=c),B===void 0?B=this.authority:B===null&&(B=c),P===void 0?P=this.path:P===null&&(P=c),F===void 0?F=this.query:F===null&&(F=c),W===void 0?W=this.fragment:W===null&&(W=c),q===this.scheme&&B===this.authority&&P===this.path&&F===this.query&&W===this.fragment?this:new m(q,B,P,F,W)}static parse(N,q=!1){let B=d.exec(N);return B?new m(B[2]||c,R(B[4]||c),R(B[5]||c),R(B[7]||c),R(B[9]||c),q):new m(c,c,c,c,c)}static file(N){let q=c;if(i&&(N=N.replace(/\\/g,u)),N[0]===u&&N[1]===u){let B=N.indexOf(u,2);B===-1?(q=N.substring(2),N=u):(q=N.substring(2,B),N=N.substring(B)||u)}return new m("file",q,N,c,c)}static from(N){let q=new m(N.scheme,N.authority,N.path,N.query,N.fragment);return l(q,!0),q}toString(N=!1){return _(this,N)}toJSON(){return this}static revive(N){if(N){if(N instanceof p)return N;{let q=new m(N);return q._formatted=N.external,q._fsPath=N._sep===f?N.fsPath:null,q}}return N}}let f=i?1:void 0;class m extends p{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=y(this,!1)),this._fsPath}toString(N=!1){return N?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let N={$mid:1};return this._fsPath&&(N.fsPath=this._fsPath,N._sep=f),this._formatted&&(N.external=this._formatted),this.path&&(N.path=this.path),this.scheme&&(N.scheme=this.scheme),this.authority&&(N.authority=this.authority),this.query&&(N.query=this.query),this.fragment&&(N.fragment=this.fragment),N}}let h={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(A,N,q){let B,P=-1;for(let F=0;F<A.length;F++){let W=A.charCodeAt(F);if(W>=97&&W<=122||W>=65&&W<=90||W>=48&&W<=57||W===45||W===46||W===95||W===126||N&&W===47||q&&W===91||q&&W===93||q&&W===58)P!==-1&&(B+=encodeURIComponent(A.substring(P,F)),P=-1),B!==void 0&&(B+=A.charAt(F));else{B===void 0&&(B=A.substr(0,F));let xe=h[W];xe!==void 0?(P!==-1&&(B+=encodeURIComponent(A.substring(P,F)),P=-1),B+=xe):P===-1&&(P=F)}}return P!==-1&&(B+=encodeURIComponent(A.substring(P))),B!==void 0?B:A}function v(A){let N;for(let q=0;q<A.length;q++){let B=A.charCodeAt(q);B===35||B===63?(N===void 0&&(N=A.substr(0,q)),N+=h[B]):N!==void 0&&(N+=A[q])}return N!==void 0?N:A}function y(A,N){let q;return q=A.authority&&A.path.length>1&&A.scheme==="file"?`//${A.authority}${A.path}`:A.path.charCodeAt(0)===47&&(A.path.charCodeAt(1)>=65&&A.path.charCodeAt(1)<=90||A.path.charCodeAt(1)>=97&&A.path.charCodeAt(1)<=122)&&A.path.charCodeAt(2)===58?N?A.path.substr(1):A.path[1].toLowerCase()+A.path.substr(2):A.path,i&&(q=q.replace(/\//g,"\\")),q}function _(A,N){let q=N?v:g,B="",{scheme:P,authority:F,path:W,query:xe,fragment:Ye}=A;if(P&&(B+=P,B+=":"),(F||P==="file")&&(B+=u,B+=u),F){let de=F.indexOf("@");if(de!==-1){let Ue=F.substr(0,de);F=F.substr(de+1),de=Ue.lastIndexOf(":"),de===-1?B+=q(Ue,!1,!1):(B+=q(Ue.substr(0,de),!1,!1),B+=":",B+=q(Ue.substr(de+1),!1,!0)),B+="@"}F=F.toLowerCase(),de=F.lastIndexOf(":"),de===-1?B+=q(F,!1,!0):(B+=q(F.substr(0,de),!1,!0),B+=F.substr(de))}if(W){if(W.length>=3&&W.charCodeAt(0)===47&&W.charCodeAt(2)===58){let de=W.charCodeAt(1);de>=65&&de<=90&&(W=`/${String.fromCharCode(de+32)}:${W.substr(3)}`)}else if(W.length>=2&&W.charCodeAt(1)===58){let de=W.charCodeAt(0);de>=65&&de<=90&&(W=`${String.fromCharCode(de+32)}:${W.substr(2)}`)}B+=q(W,!0,!1)}return xe&&(B+="?",B+=q(xe,!1,!1)),Ye&&(B+="#",B+=N?Ye:g(Ye,!1,!1)),B}function T(A){try{return decodeURIComponent(A)}catch{return A.length>3?A.substr(0,3)+T(A.substr(3)):A}}let I=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function R(A){return A.match(I)?A.replace(I,N=>T(N)):A}var w=r(470);let O=w.posix||w,V="/";var L;(function(A){A.joinPath=function(N,...q){return N.with({path:O.join(N.path,...q)})},A.resolvePath=function(N,...q){let B=N.path,P=!1;B[0]!==V&&(B=V+B,P=!0);let F=O.resolve(B,...q);return P&&F[0]===V&&!N.authority&&(F=F.substring(1)),N.with({path:F})},A.dirname=function(N){if(N.path.length===0||N.path===V)return N;let q=O.dirname(N.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),N.with({path:q})},A.basename=function(N){return O.basename(N.path)},A.extname=function(N){return O.extname(N.path)}})(L||(L={}))})(),WQ=n})();var{URI:zi,Utils:Tt}=WQ;var KQ="github.com",sAe=`https://${KQ}`,$c=class{},QS=class extends $c{constructor(r=sAe){super();this.recalculateUrls(r)}isGitHubEnterprise(){return this.isEnterprise}getTokenUrl(r){return r.devOverride?.copilotTokenUrl??this.tokenUrl}getNotificationUrl(r){return r.devOverride?.notificationUrl??this.notificationUrl}updateBaseUrl(r,n){if(!n)return;let i=this.baseUri;this.recalculateUrls(n),i.toString()!==this.baseUri.toString()&&r.get(Ot).resetCopilotToken(r)}recalculateUrls(r){this.baseUri=zi.parse(r);let n=zi.parse(`${this.baseUri.scheme}://api.${this.baseUri.authority}`);this.isEnterprise=this.baseUri.authority!==KQ,this.tokenUrl=Tt.joinPath(n,"/copilot_internal/v2/token").toString(),this.notificationUrl=Tt.joinPath(n,"/copilot_internal/notification").toString()}};var wL;function QQ(t){return wL||(wL=new Re(t,"auth")),wL}var aAe=60,cAe="token_refreshed",lAe="github_token_changed";function xu(){return Math.floor(Date.now()/1e3)}async function XS(t,e){let r=QQ(t),n=t.get(ut);n.sendTelemetry("auth.new_login");let i=await uAe(t,e);if(!i)return r.info("Failed to get copilot token"),n.sendErrorTelemetry("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let o=await i.json();if(!o)return r.info("Failed to get copilot token"),n.sendErrorTelemetry("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(i.status===401)return r.info("Failed to get copilot token due to 401 status"),n.sendErrorTelemetry("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(!i.ok||!o.token)return r.info(`Invalid copilot token: missing token: ${i.status} ${i.statusText}`),n.sendErrorTelemetry("auth.invalid_token",Gt.createAndMarkAsIssued({status:i.status.toString(),status_text:i.statusText})),{kind:"failure",reason:"NotAuthorized",...o.error_details};let s=o.expires_at;o.expires_at=xu()+o.refresh_in+aAe;let{token:a,organization_list:l,...c}=o,u=new bu(a,l);return t.get(fi).emit("onCopilotToken",u,c),n.sendTelemetry("auth.new_token",Gt.createAndMarkAsIssued({},{adjusted_expires_at:o.expires_at,expires_at:s,current_time:xu()})),{kind:"success",...o}}async function uAe(t,e){let r=t.get($c).getTokenUrl(e);try{return await t.get(Kr).fetch(r,{headers:{Authorization:`token ${e.token}`,...va(t)}})}catch(n){throw t.get(Mp).notifyUser(t,n),n}}var bu=class{constructor(e,r){this.token=e;this.organization_list=r;this.tokenMap=this.parseToken(e)}parseToken(e){let r=new Map,i=e?.split(":")[0]?.split(";");for(let o of i){let[s,a]=o.split("=");r.set(s,a)}return r}get isInternal(){let e=["4535c7beffc844b46bb1ed4aa04d759a","a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225"];if(!this.organization_list)return!1;for(let r of this.organization_list)if(e.includes(r))return!0;return!1}getTokenValue(e){return this.tokenMap.get(e)}},Ot=class{constructor(){this.copilotTokenRefreshEventEmitter=new AL.EventEmitter;this.githubTokenChangedEventEmitter=new AL.EventEmitter}},Gh=class extends Ot{constructor(r,n){super();this.completionsToken=r;this.embeddingsToken=n;this.wasReset=!1}getBasicGitHubToken(){return Promise.resolve("token")}getPermissiveGitHubToken(){return Promise.resolve("token")}async getCopilotToken(r,n){return new bu(this.completionsToken)}async getEmbeddingsToken(r,n){return new bu(this.embeddingsToken??this.completionsToken)}resetCopilotToken(r,n){this.wasReset=!0}async checkCopilotToken(r){return{status:"OK"}}},JS=class extends Ot{constructor(r){super();this.githubToken=r;this.copilotToken=void 0}getBasicGitHubToken(){return Promise.resolve(this.githubToken.token)}getPermissiveGitHubToken(){return Promise.resolve(this.githubToken.token)}async getCopilotToken(r,n){if(!this.copilotToken||this.copilotToken.expires_at<xu()||n){let i=await XS(r,this.githubToken);if(i.kind==="failure")throw Error(`Failed to get copilot token: ${i.reason.toString()} ${i.message??""}`);this.copilotToken={...i},ZS(r,this,i.refresh_in)}return new bu(this.copilotToken.token,this.copilotToken.organization_list)}async checkCopilotToken(r){if(!this.copilotToken||this.copilotToken.expires_at<xu()){let i=await XS(r,this.githubToken);if(i.kind==="failure")return i;this.copilotToken={...i},ZS(r,this,i.refresh_in)}return{status:"OK"}}resetCopilotToken(r,n){n!==void 0&&r.get(ut).sendTelemetry("auth.reset_token_"+n),QQ(r).debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}},YQ=new WeakMap;function ZS(t,e,r){let n=xu(),i=YQ.get(e)??YQ.set(e,{value:0}).get(e);i.value>0||(i.value++,setTimeout(async()=>{let o,s="";try{i.value--,await e.getCopilotToken(t,!0),o="success",e.copilotTokenRefreshEventEmitter.emit(cAe)}catch(l){o="failure",s=l.toString()}let a=Gt.createAndMarkAsIssued({result:o},{time_taken:xu()-n,refresh_count:i.value});s&&(a.properties.reason=s),t.get(ut).sendTelemetry("auth.token_refresh",a)},r*1e3))}function XQ(t,e){t.provider.id==="github"&&e.githubTokenChangedEventEmitter.emit(lAe,t)}var Dt=Te(require("vscode")),mn=Dt.Position,De=Dt.Range,$h=Dt.Selection,JQ=Dt.EventEmitter,Fp=Dt.CancellationTokenSource;var Xr=Dt.TextEdit,RL=Dt.WorkspaceEdit,D_=Dt.Uri,Ls=Dt.MarkdownString,Ms=Dt.InteractiveEditorResponseFeedbackKind;var L_=Dt.DiagnosticSeverity,eT=Dt.ExtensionMode,M_=Dt.Location;var zh={t:Dt.l10n.t};var Ba=new class{constructor(){this.contributions=new Set}start(t){for(let e of this.contributions)e(t)}registerContribution(t){this.contributions.add(t)}};var Wi=Cr("ConversationOptions"),It=(O=>(O.CurrentEditor="current-editor",O.ActiveEditorFilenames="active-editor-filenames",O.CurrentSelection="current-selection",O.CurrentSelectionFunctionImplementations="current-selection-function-implementations",O.CurrentSelectionClassDeclarations="current-selection-class-declarations",O.CurrentSelectionTypeDeclarations="current-selection-type-declarations",O.ProjectLabels="project-labels",O.GitMetadata="git-metadata",O.DebugConsoleOutput="debug-console-output",O.TerminalBuffer="terminal-buffer",O.TerminalLastCommand="terminal-last-command",O.TerminalSelection="terminal-selection",O.TerminalShellType="terminal-shell-type",O.TestsImpl2Test="tests/impl2test",O.TestsTest2Impl="tests/test2impl",O.ExtensionApi="extension-api",O.VSCode="vscode",O.Workspace="workspace",O.InlineChatSelection="inline-chat-selection",O.DocSelection="doc-selection",O.Diagnostics="diagnostics",O.FixSelection="fix-selection",O.Extensions="extensions",O.Variable="variable",O))(It||{}),hn=class{constructor(e){this.anchor=e}},Jr=class{constructor(e,r){this.request=e;this.sessionId=r;this.status="in-progress";this.contextParts=[]}},gn=class t{constructor(e,r=[]){this.systemPrompt=e;this.turns=r}copy(){let e=JSON.parse(JSON.stringify(this.turns));return new t(this.systemPrompt,e)}getLatestTurn(){return this.turns[this.turns.length-1]}addTurn(e){this.turns.push(e)}removeTurn(e){let r=this.turns.findIndex(n=>n.requestId===e);if(r!==-1)return this.turns.splice(r,1)[0]}getState(){return{turns:this.turns}}};function tT(t,e,r){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(r)});t.then(n,i).finally(()=>o.dispose())})}function F_(t,e,r){let n,i=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(i)),new Promise(o=>n=o)])}var zc=class{get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Error("Canceled"))}};var Bp=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromises(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new JQ,queueMicrotask(async()=>{let r={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(r)),this.resolve()}catch(n){this.reject(n instanceof Error?n:new Error(String(n)))}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await dAe(this._onStateChanged.event)}while(!0)}}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};function dAe(t){return new Promise(e=>{let r=t(n=>{r.dispose(),e(n)})})}var Eu=class{constructor(){this._deferred=new zc;this._asyncIterable=new Bp(n=>{if(e){n.reject(e);return}return r&&n.emitMany(r),this._errorFn=i=>n.reject(i),this._emitFn=i=>n.emitOne(i),this._deferred.p});let e,r;this._emitFn=n=>{r||(r=[]),r.push(n)},this._errorFn=n=>{e||(e=n)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}error(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var xo=class{constructor(e){this.deltaApplier=e;this._appliedLength=0;this._appliedText=""}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){let r=e.substring(this._appliedLength,e.length);this.append(r)}async append(e){this.deltaApplier(e),this._appliedLength+=e.length,this._appliedText+=e}},rT=class extends xo{constructor(){super(r=>this._source.emitOne(r));this._source=new Eu}get asyncIterable(){return this._source.asyncIterable}finish(){this._source.resolve()}};var tX=require("crypto");function Wh(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function ZQ(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function ss(){let t=(0,tX.randomUUID)(),e=Gt.createAndMarkAsIssued({messageId:t});return new PL(e)}var PL=class t{constructor(e){this.raw=e}get properties(){return this.raw.properties}get measurements(){return this.raw.measurements}markAsDisplayed(){this.raw.markAsDisplayed()}extendedBy(e,r){let n=this.raw.extendedBy(e,r);return new t(n)}};function nT(t,e,r,n,i,o,s){let a=t.turns[t.turns.length-1].contextParts.map(u=>u.kind).sort(),l={source:"user",turnIndex:(t.turns.length-1).toString(),conversationId:e,uiKind:r,inputSources:a.join(",")},c={promptTokenLen:i,messageCharLen:n.length};return o&&(l.suggestion=o),s=s.extendedBy(l,c),s}function iT(t,e,r,n,i,o){n!==void 0&&(o=o.extendedBy({offTopic:n.toString()})),kL(t,i,e,r,{},{},o)}function oT(t,e,r,n,i,o,s,a){let l=NL(i);kL(t,s,n,i,{source:"model",turnIndex:e.turns.length.toString(),conversationId:r,headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:i.length,numCodeBlocks:l.length},a)}function sT(t,e,r,n,i,o,s,a){kL(t,s,n,i,{source:"offTopic",turnIndex:e.turns.length.toString(),conversationId:r,userMessageId:o,uiKind:n},{messageCharLen:i.length},a)}function kL(t,e,r,n,i,o,s){let a={...n?{messageText:n}:{},...i};e&&(i.languageId=e.languageId,o.documentLength=e.getText().length);let l=s.extendedBy(i,o),c=s.extendedBy(a),u=pAe(r),d=t.get(ut);return d.sendTelemetry(`${u}.message`,l.raw),d.sendRestrictedTelemetry(`${u}.messageText`,c.raw),l.raw}function aT(t,e,r,n,i){return Ua(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionShown")}function rX(t,e,r,n,i){return Ua(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionSelected")}function Ua(t,e,r,n,i,o){let s=o??Gt.createAndMarkAsIssued();e&&(r.languageId=e.languageId,n.documentLength=e.getText().length);let a=s.extendedBy(r,n);return t.get(ut).sendTelemetry(i,a),a}async function cT(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});await t.get(ut).sendRestrictedTelemetry("engine.messages",n)}function pAe(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}function NL(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}function nX(t,e,r,n,i,o,s,a){return cT(t,[e],a),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:s,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a}}var OL=class{constructor(e,r){this.uri=e;this.value=r}},mAe,bo=class t{constructor(e,r){this[mAe]="ResourceMap";e instanceof t?(this.map=new Map(e.map),this.toKey=r??t.defaultToKey):(this.map=new Map,this.toKey=e??t.defaultToKey)}static{this.defaultToKey=e=>e.toString()}set(e,r){return this.map.set(this.toKey(e),new OL(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(mAe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}};function B_(t){switch(t){case 1:return"conversationInline";case 2:return"conversationPanel";default:return"none"}}function iX(t,e,r){let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n}function ai(t){return t.filter(e=>!!e)}function oX(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let i=t[n];e(i,r)>0&&(r=i)}return r}var sX=Te(require("util"));var Ht=class{};var qa=Cr("IExperimentationService"),lT=class{constructor(){this.initializePromise=Promise.resolve();this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};async function hAe(t){let e=Sn(t,be.DebugTestOverrideProxyUrl);return _P(t)&&e.length>0?e:Sn(t,be.DebugChatOverrideProxyUrl)??Sn(t,be.DebugOverrideProxyUrl)}async function gAe(t,e){let r=await hAe(t);return r.length===0?(r="https://api.githubcopilot.com",`${r}${e}`):r}async function vAe(t){return gAe(t,"/chat")}async function yAe(t){return"https://api.githubcopilot.com/embeddings"}async function aX(t,e,r){let n=e.get(Xt);switch(t){case 0:case 1:{let i=await LL(e,r,t===0);return n.getChatEndpointInfo(i)}case 3:return n.getChatEndpointInfo("gpt-3.5");case 2:return n.getChatEndpointInfo("gpt-4");case 4:return n.getChatEndpointInfo("code-llama");default:throw new Error("Unrecognized model")}}async function LL(t,e,r){if(await t.get(qa).getTreatmentVariableAsync("vscode","copilotchat.panelGpt4",!0)!==!1&&e===2&&r)return"gpt-4"}async function _Ae(t,e){let r=Ze(t,be.DebugOverrideChatMaxTokenNum,{default:0});if(r>0)return r;let i=await t.get(qa).getTreatmentVariableAsync("vscode","copilotchat.panelGpt4Context",!0);switch(e){case"gpt-3.5":return 8192;case"gpt-4":return i||4096;default:return 8192}}var Xt=class{constructor(e){this.accessor=e;this._chatEndpoints=new Map}async getChatEndpointInfo(e){this._defaultModel??=Ze(this.accessor,be.DebugOverrideChatEngine,{default:"gpt-3.5"});let r=e??this._defaultModel,n=this._chatEndpoints.get(r);if(n)return n;let i=await vAe(this.accessor),o=await _Ae(this.accessor,r),s=await this.shouldDisableSnippy();return n=new U_(i,"completions",r,o,s),this._chatEndpoints.set(r,n),n}async shouldDisableSnippy(){let e=await this.accessor.get(Ot).getCopilotToken(this.accessor),r=this.accessor.get(Ht).extensionMode===eT.Development;return e.isInternal&&r}async getEmbeddingsEndpointInfo(){if(this._embeddingsEndpoint)return this._embeddingsEndpoint;let e=await yAe(this.accessor);return this._embeddingsEndpoint=new DL(e,16),this._embeddingsEndpoint}},U_=class{constructor(e,r,n,i,o){this.engineUrl=e;this.endpoint=r;this.disableSnippy=o;this._maxTokens=i,this.model=n}get modelMaxTokenWindow(){return this._maxTokens}get engineName(){let e=this.engineUrl.split("/").pop();return e||this.engineUrl}get url(){return sX.format("%s/%s",this.engineUrl,this.endpoint)}interceptBody(e){e&&this.disableSnippy&&(e.snippy={enabled:!1},Object.keys(e).forEach(r=>{r.startsWith("intent")&&delete e[r]}))}getExtraHeaders(){let e={};return this.disableSnippy&&(e["Editor-Plugin-Version"]="simulation-tests-plugin/2",e["Editor-Version"]="simulation-tests-editor/1"),{"Openai-Organization":"github-copilot",...e}}},DL=class{constructor(e,r=1){this.url=e;this.maxBatchSize=r;this.modelMaxTokenWindow=8192}getExtraHeaders(){return{"Openai-Organization":"github-copilot"}}};var kX=require("crypto");var ML=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[]}append(e){e.text&&this.text.push(e.text),e.delta?.content&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[]))}};function xAe(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var uT=class t{constructor(e,r,n,i,o,s,a,l){this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=s;this.fastCancellation=a;this.cancellationToken=l;this.requestId=Wh(this.response);this.stats=new FL(this.expectedNumChoices);this.solutions={};this.logger=new Re(e,"streamChoices"),this.ghTelemetry=e.get(ut)}static async create(e,r,n,i,o,s){let a=await n.body();a.setEncoding("utf8");let l=await e.get(mi).fastCancellation();return new t(e,r,n,a,i,o??["content_filter"],l,s)}async*processSSE(e=async()=>{}){try{yield*this.processSSEInner(e)}finally{this.fastCancellation&&this.cancel(),this.logger.info(`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),this.logger.debug(`request stats: ${this.stats}`)}}async*processSSEInner(e){let r="",n=!1;e:for await(let i of this.body){if(this.maybeCancel("after awaiting body chunk"))return;this.logger.debug("chunk",i.toString());let[o,s]=xAe(r+i.toString());r=s;for(let a of o){let l=a.slice(5).trim();if(l==="[DONE]"){yield*this.finishSolutions();return}let c;try{c=JSON.parse(l)}catch{this.logger.errorAndSendTelemetry(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a);continue}if(c.choices===void 0){c.error!==void 0?this.logger.errorAndSendTelemetry(`Error in response for request id ${this.requestId.headerRequestId}:`,c.error.message):this.logger.errorAndSendTelemetry(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`);continue}if(this.requestId.created===0&&(this.requestId=Wh(this.response,c),this.requestId.created===0&&this.logger.errorAndSendTelemetry(`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId)),this.allSolutionsDone()&&this.fastCancellation)break e;for(let u=0;u<c.choices.length;u++){let d=c.choices[u];this.logger.debug("choice",d),this.stats.add(d.index),d.index in this.solutions||(this.solutions[d.index]=new ML);let p=this.solutions[d.index];if(p===null)continue;p.append(d);let f,m=d.text?.indexOf(`
`)>-1||d.delta?.content?.indexOf(`
`)>-1;if((d.finish_reason||m)&&(f=await e(p.text.join(""),d.index),f!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb")))return;if(!(!!d.finish_reason||f!==void 0))continue;let g=d.finish_reason??"client-trimmed";if(this.ghTelemetry.sendTelemetry("completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:g})),this.dropCompletionReasons.includes(d.finish_reason)?this.solutions[d.index]=null:(this.stats.markYielded(d.index),yield{solution:p,finishOffset:f,reason:d.finish_reason??"client-trimmed",requestId:this.requestId,index:d.index}),this.maybeCancel("after yielding finished choice"))return;this.solutions[d.index]=null}}}for(let[i,o]of Object.entries(this.solutions)){let s=Number(i);if(o!==null&&(this.stats.markYielded(s),yield{solution:o,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let i=JSON.parse(r);i.error!==void 0&&this.logger.errorAndSendTelemetry(`Error in response: ${i.error.message}`,i.error)}catch{this.logger.errorAndSendTelemetry(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null&&(this.stats.markYielded(n),yield{solution:r,finishOffset:void 0,reason:"DONE",requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logger.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};function cX(t,e){let n={text:e.text.join(""),tokens:e.text};if(e.logprobs.length===0)return n;let i=e.logprobs.reduce((l,c)=>l.concat(c),[]),o=e.top_logprobs.reduce((l,c)=>l.concat(c),[]),s=e.text_offset.reduce((l,c)=>l.concat(c),[]),a=e.tokens.reduce((l,c)=>l.concat(c),[]);return{...n,logprobs:{token_logprobs:i,top_logprobs:o,text_offset:s,tokens:a}}}var FL=class{constructor(e){this.choices=new Map;for(let r=0;r<e;r++)this.choices.set(r,new BL)}add(e){this.choices.get(e).increment()}markYielded(e){this.choices.get(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},BL=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};var bAe=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function uX(t,e="client"){if(e==="proxy")return!1;let r=t.slice();return r.reverse(),lX(r)||lX(r.filter(n=>n.trim().length>0))}function lX(t){let e=EAe(t);for(let r of bAe){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function EAe(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}var Qh=Te(TX()),IX=require("path"),Fs=class{constructor(){}tokenize(e){return this._cl100kTokenizer||(this._cl100kTokenizer=(0,Qh.createTokenizer)((0,IX.join)(__dirname,"./cl100k_base.tiktoken"),(0,Qh.getSpecialTokensByEncoder)("cl100k_base"),(0,Qh.getRegexByEncoder)("cl100k_base"),64e3)),this._cl100kTokenizer.encode(e)}tokenLength(e){return e?this.tokenize(e).length:0}};function Xh(t,e){let r=t.get(Fs),n=3,i=3,o=-1,s=0;for(let a of e){s+=i;for(let[l,c]of Object.entries(a))s+=r.tokenLength(c),l==="name"&&(s+=o)}return s+=n,s}async function*wX(t,e){for await(let r of t)yield e(r)}var Wc=class{};function AX(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}function RX(t,e,r){let n=new Re(t,"streamMessages"),i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(n.debug(`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),n.info(`message ${e.index} returned. finish reason: [${e.reason}]`),n.debug(`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let s=cX(t,e.solution),a={role:"assistant",content:i};return nX(t,a,s,e.index,e.requestId,o,e.reason,r)}async function PX(t,e,r,n,i,o,s){let a=new Re(t,"chat fetch"),l=BAe(t,r);if(o?.isCancellationRequested)return{type:"canceled",reason:"before fetch request"};a.info(`engine ${e.engineUrl}`),a.info(`modelMaxTokenWindow ${e.modelMaxTokenWindow}`),a.info(`chat model ${r.model}`),r.intent_model&&a.info(`intent model ${r.intent_model}`),r.intent_tokenizer&&a.info(`intent tokenizer ${r.intent_tokenizer}`),r.intent_threshold&&a.info(`intent threshold ${r.intent_threshold}`);let c=t.get(Wc);if(!(await t.get(Ot).getCopilotToken(t)).token)return a.errorAndSendTelemetry(`Failed to send request to ${e.url} due to missing key`),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:"key is missing"};let d=await qAe(t,e,r.ourRequestId,l,(await t.get(Ot).getCopilotToken(t)).token,r.location,o,s);if(o?.isCancellationRequested){let g=await d.body();try{g.destroy()}catch(v){a.exception(v,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=FAe(e,t,r.location,r.ourRequestId);return a.info("Request ID for failed request: ",r.ourRequestId),UAe(t,c,g,d)}let p=r.postOptions?.n??1,m=(await uT.create(t,p,d,n,[],o)).processSSE(i);return{type:"success",chatCompletions:wX(m,async g=>RX(t,g,n)),getProcessingTime:()=>ZQ(d)}}function FAe(t,e,r,n){return Gt.createAndMarkAsIssued({endpoint:t.endpoint,engineName:t.engineName,uiKind:B_(r),headerRequestId:n})}function BAe(t,e){let r={messages:e.messages,model:e.model};e.postOptions&&Object.assign(r,e.postOptions);let n=AX(e.repoInfo);return n!==void 0&&(r.nwo=n),e.intent&&(r.intent=e.intent,e.intent_model&&(r.intent_model=e.intent_model),e.intent_tokenizer&&(r.intent_tokenizer=e.intent_tokenizer),e.intent_threshold&&(r.intent_threshold=e.intent_threshold)),r}async function UAe(t,e,r,n){let i=new Re(t,"chat fetch"),o=t.get(ut);if(e.setWarning(),r.properties.error=`Response status was ${n.status}`,r.properties.status=String(n.status),o.sendTelemetry("request.shownWarning",r),n.status===401||n.status===403)return t.get(Ot).resetCopilotToken(t,n.status),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:`token expired or invalid: ${n.status}`};if(n.status===499)return i.info("Cancelled by server"),{type:"failed",failKind:"serverCanceled",reason:"canceled by server"};let s=await n.text();return n.status===466?(e.setError(s),i.info(s),{type:"failed",failKind:"clientNotSupported",reason:`client not supported: ${s}`}):n.status===400&&s.includes("off_topic")?{type:"failed",failKind:"offTopic",reason:"filtered as off_topic by intent classifier: message was not programming related"}:n.status===429?{type:"failed",failKind:"rateLimited",reason:s}:n.status>=500&&n.status<600?{type:"failed",failKind:"serverError",reason:`${n.status} ${s}`}:(i.errorAndSendTelemetry("Unhandled status from server:",n.status,s),{type:"failed",failKind:"unknown",reason:`unhandled status from server: ${n.status} ${s}`})}function qAe(t,e,r,n,i,o,s,a){let l=new Re(t,"chat fetch"),c=t.get(ut),u=Gt.createAndMarkAsIssued({endpoint:e.endpoint,engineName:e.engineName,uiKind:B_(o),...a},{maxTokenWindow:e.modelMaxTokenWindow});for(let[f,m]of Object.entries(n))f!=="messages"&&(u.properties[`request.option.${f}`]=JSON.stringify(m)??"undefined");u.properties.headerRequestId=r,c.sendTelemetry("request.sent",u);let d=yu(),p=HAe(o);return Cb(t,e,i,p,r,n,s).then(f=>{let m=Wh(f,void 0);u.extendWithRequestId(m);let h=yu()-d;return u.measurements.totalTimeMs=h,l.info(`request.response: [${e.url}], took ${h} ms`),l.debug("request.response properties",u.properties),l.debug("request.response measurements",u.measurements),l.debug(`messages: ${JSON.stringify(n.messages)}`),c.sendTelemetry("request.response",u),f}).catch(f=>{if(Eb(f))throw f;t.get(Wc).setWarning(f.message);let h=u.extendedBy({error:"Network exception"});c.sendTelemetry("request.shownWarning",h),u.properties.code=String(f.code??""),u.properties.errno=String(f.errno??""),u.properties.message=String(f.message??""),u.properties.type=String(f.type??"");let g=yu()-d;throw u.measurements.totalTimeMs=g,l.debug(`request.response: [${e.url}] took ${g} ms`),l.debug("request.error properties",u.properties),l.debug("request.error measurements",u.measurements),c.sendTelemetry("request.error",u),f}).finally(()=>{cT(t,n.messages,u)})}function HAe(t){switch(t){case 2:return"conversation-panel";case 1:return"conversation-inline"}}var wn=class extends Re{constructor(e,r){super(e,r)}debug(e,...r){Tu(this.accessor)&&super.debug(e,...r)}logPrompt(e){if(!Tu(this.accessor))return;let r=`
---------------------------------
`;super.info(r+e.map(n=>`${n.role.toUpperCase()}:
${n.content}`).join(r)+r)}logResponse(e){if(!Tu(this.accessor))return;let r=`
---------------------------------
`;if(typeof e!="string"){if(e.type!=="success"){super.info(`${r}RESPONSE FAILED DUE TO ${e.type}${r}`);return}Array.isArray(e.value)?e.value.length===1?e=e.value[0]:e=`${e.value.map(n=>`<<${n}>>`).join(", ")}`:e=e.value}super.info(`${r}ASSISTANT:
${e}${r}`)}info(e,...r){Tu(this.accessor)&&super.info(e,...r)}warn(e,...r){Tu(this.accessor)&&super.warn(e,...r)}errorAndSendTelemetry(e,...r){Tu(this.accessor)&&super.errorAndSendTelemetry(e,...r)}};function Tu(t){return!!Ze(t,be.ConversationLoggingEnabled,{default:!1})}var wt=class{constructor(e){this.accessor=e;this.logger=new wn(e,"ChatMLFetcher")}async fetchOne(e,r,n,i,o,s,a,l){let c=await this.fetchMany(e,r,n,i,o,{...s,n:1},a,l);return c.type==="success"?{...c,value:c.value[0]}:c}async fetchMany(e,r,n,i,o,s,a,l){let c=await aX(o,this.accessor,i);return this.fetchManyFromEndpoint(c,e,r,n,i,s,a,l)}async fetchManyFromEndpoint(e,r,n,i,o,s,a,l){let c=a?.messageId??(0,kX.randomUUID)(),u=Xh(this.accessor,r);s={max_tokens:e.modelMaxTokenWindow-u,...s};let p=this.preparePostOptions(s),f=e.model;l&&(l.intent_model=await this.getOffTopicModelName(),l.intent_tokenizer=await this.getOffTopicModelTokenizer(),l.intent_threshold=await this.getOffTopicModelThreshold());let m={messages:r.filter(g=>g.content&&g.content!==""),model:f,repoInfo:void 0,ourRequestId:c,location:o,postOptions:p,...l},h=Gt.createAndMarkAsIssued({...a,uiKind:B_(o)});try{let g=await PX(this.accessor,e,m,h,n||(async()=>{}),i,a),v;switch(g.type){case"success":return await this.processSuccessfulResponse(g,m.ourRequestId,a,e);case"canceled":return this.processCanceledResponse(g,m.ourRequestId);case"failed":return v=this.processFailedResponse(g,m.ourRequestId),this.accessor.get(nr).sendTelemetryEvent("response.error",{type:v.type,source:a?.messageSource??"unknown",requestId:m.ourRequestId,model:e.model},{maxTokenCount:e.modelMaxTokenWindow??-1}),v}}catch(g){return this.processError(g,m.ourRequestId)}}preparePostOptions(e){let r={...e};return r.stream||(r.stream=!0),r}async processSuccessfulResponse(e,r,n,i){let o=[];for await(let l of e.chatCompletions)this.accessor.get(nr).sendTelemetryEvent("response.success",{reason:l.finishReason,source:n?.messageSource??"unknown",model:i?.model,requestId:r},{tokenCount:l.numTokens,maxTokenCount:i?.modelMaxTokenWindow??-1,processingTime:e.getProcessingTime()}),this.isRepetitive(l,n)||o.push(l);this.logger.debug(`Received choices: ${JSON.stringify(o,null,2)}`);let s=o.filter(l=>l.finishReason==="stop"||l.finishReason==="client-trimmed");if(s.length>=1)return{type:"success",value:s.map(l=>l.message.content),requestId:r};switch(o[0]?.finishReason){case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:r};case"length":return{type:"length",reason:"Response too long.",requestId:r}}return{type:"unknown",reason:"Response contained no choices.",requestId:r}}async getOffTopicModelName(){let e=Ze(this.accessor,be.DebugOverrideChatOffTopicModel,{default:""});if(e)return e;let r=await this.accessor.get(mi).chatOffTopicModel();return r||""}async getOffTopicModelTokenizer(){let e=Ze(this.accessor,be.DebugOverrideChatOffTopicModelTokenizer,{default:""});if(e)return e;let r=await this.accessor.get(mi).chatOffTopicModelTokenizer();return r||""}async getOffTopicModelThreshold(){let e=Ze(this.accessor,be.DebugOverrideChatOffTopicModelThreshold,{default:0});if(e!==0)return e;let r=await this.accessor.get(mi).chatOffTopicModelThreshold();return r!==0?r:0}isRepetitive(e,r){let n=uX(e.tokens);if(n){let i=Gt.createAndMarkAsIssued();i.extendWithRequestId(e.requestId);let o=i.extendedBy(r);this.accessor.get(ut).sendRestrictedTelemetry("conversation.repetition.detected",o),this.logger.info("Filtered out repetitive conversation result")}return n}processCanceledResponse(e,r){return this.logger.debug("Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e.failKind==="rateLimited"?{type:"rateLimited",reason:e.reason,requestId:r}:e.failKind==="offTopic"?{type:"offTopic",reason:e.reason,requestId:r}:e.failKind==="tokenExpiredOrInvalid"||e.failKind==="clientNotSupported"||e.reason.includes("Bad request: ")?{type:"badRequest",reason:e.reason,requestId:r}:e.failKind==="serverError"?{type:"failed",reason:e.reason,requestId:r}:{type:"filtered",reason:e.reason,requestId:r}}processError(e,r){return Eb(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(this.accessor.get(Gc).exception(e,"Error on conversation request"),e instanceof fb?{type:"failed",reason:`Please check your firewall rules and network connection then try again. Error Code: ${e.code}.`,requestId:r}:{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};var Ke=new class{constructor(){this._contextResolvers=[]}get contextResolvers(){return this._contextResolvers}register(t){Array.isArray(t)?this._contextResolvers.push(...t):this._contextResolvers.push(t)}};var hT=class t{constructor(e,r){this.accessor=e;this.options=r}static parseFromResponse(e,r){let n=Ke.contextResolvers;return r.split(",").map(o=>o.trim()).filter(o=>Object.values(It).includes(o)).filter(o=>!n.find(s=>s.kind===o)?.requiredOnly)}async fetchPromptContext(e,r,n){let i=this.generateMetaPrompt(e),o="",s=new xo(l=>{o+=l}),a=await this.accessor.get(wt).fetchOne([{role:"system",content:i}],async l=>{s.apply(l)},r,2,1,{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"]},{messageSource:"chat.metaprompt"});return await this.handleResult(a,o,n,e)}async handleResult(e,r,n,i){if(e.type!=="success")return this.sendPromptContextErrorTelemetry(n,e),[];let o=t.parseFromResponse(this.accessor,r),s=n.extendedBy({messageText:i,promptContext:r,inputSourceIds:o.map(a=>a.toString()).sort().join(",")});return this.accessor.get(ut).sendRestrictedTelemetry("conversation.promptContext",s.raw),o}sendPromptContextErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.accessor.get(ut).sendRestrictedTelemetry("conversation.promptContextError",n.raw)}generateMetaPrompt(e){return`
Copilot is an AI programming assistant that resides within a chat window in a VS code IDE.

The user has the following query:

${e}

Since this is a chat window, Copilot may need additional context to answer the user's question.

Copilot has access to the information within the VS Code IDE, and can request that information before responding to the user.

Which of the following information would be most relevant for Copilot to answer the user's question?
Limit the answer to one to three sources and provide them in order of highest to lowest priority as a comma-separated list without extra information. You must not come up with new sources. If none of the information is relevant, respond "None". End the list with a ;
Do not include the description of the source in your response. The description is for your reference only.
List of possible information sources:
${Ke.contextResolvers.filter(r=>!r.requiredOnly).map(r=>`- ${r.kind}:${r.promptDescription}
`).join("")}

Example:
List of possible information sources:
- current-editor:source code in the active document
- active-editor-filenames:file names of active editors
- terminal-buffer:The active terminal's buffer
- vscode:relevant information about vs code commands and settings

Response:
current-editor,active-editor-filenames;
`.trim()}};var He=Cr("IPromptContextModel");var gT=class{constructor(e){this.accessor=e;this.options=e.get(Wi),this.metaPromptFetcher=new hT(e,this.options)}async resolveContexts(e,r,n,i,o,s,a=[],l=[]){let c=e.turns.length===1,u=await this._collectContextKinds(c,r,i,o,s,a,l);return i.isCancellationRequested?[]:await this.resolveContext(e,u,r,n,i)}async _collectContextKinds(e,r,n,i,o,s=[],a=[]){let l=[];if((this.options.additionalPromptContext==="firstTurn"||this.options.additionalPromptContext==="allTurns")&&!o&&(this.options.additionalPromptContext==="allTurns"||e)){let c=await this.metaPromptFetcher.fetchPromptContext(r,n,i);l.push(...c.reverse())}return o?(l.push(...o),l):(l.unshift(...s),l.push(...a),l)}async resolveContext(e,r,n,i,o){let s=this.filterContexts(r),a=await Promise.all(s.map(l=>this.resolveOneContext(e,n,l,i,o)));return ai(a)}filterContexts(e){return e.includes("current-selection")&&e.includes("current-editor")&&(e=e.filter(r=>r!=="current-editor")),e.filter((r,n,i)=>i.indexOf(r)===n)}async resolveOneContext(e,r,n,i,o){let a=Ke.contextResolvers.find(c=>c.kind===n);if(!a)return;let l=await a.resolveContext(this.accessor,this.accessor.get(He),e,i,r,o);return typeof l=="object"?{kind:a.kind,metadata:l.metadata,promptPart:l.userMessages,references:l.references,usedContext:l.usedContext}:l?{promptPart:a.promptDescription+`:
`+l,kind:a.kind,metadata:void 0}:void 0}};var NX={abap:{start:'"',end:""},bat:{start:"REM",end:""},bibtex:{start:"%",end:""},blade:{start:"#",end:""},c:{start:"//",end:""},clojure:{start:";",end:""},coffeescript:{start:"//",end:""},cpp:{start:"//",end:""},csharp:{start:"//",end:""},css:{start:"/*",end:"*/"},dart:{start:"//",end:""},dockerfile:{start:"#",end:""},elixir:{start:"#",end:""},erb:{start:"<%#",end:"%>"},erlang:{start:"%",end:""},fsharp:{start:"//",end:""},go:{start:"//",end:""},groovy:{start:"//",end:""},haml:{start:"-#",end:""},handlebars:{start:"{{!",end:"}}"},haskell:{start:"--",end:""},html:{start:"<!--",end:"-->"},ini:{start:";",end:""},java:{start:"//",end:""},javascript:{start:"//",end:""},javascriptreact:{start:"//",end:""},jsonc:{start:"//",end:""},jsx:{start:"//",end:""},julia:{start:"#",end:""},kotlin:{start:"//",end:""},latex:{start:"%",end:""},less:{start:"//",end:""},lua:{start:"--",end:""},makefile:{start:"#",end:""},markdown:{start:"[]: #",end:""},"objective-c":{start:"//",end:""},"objective-cpp":{start:"//",end:""},perl:{start:"#",end:""},php:{start:"//",end:""},powershell:{start:"#",end:""},pug:{start:"//",end:""},python:{start:"#",end:""},ql:{start:"//",end:""},r:{start:"#",end:""},razor:{start:"<!--",end:"-->"},ruby:{start:"#",end:""},rust:{start:"//",end:""},sass:{start:"//",end:""},scala:{start:"//",end:""},scss:{start:"//",end:""},shellscript:{start:"#",end:""},slim:{start:"/",end:""},solidity:{start:"//",end:""},sql:{start:"--",end:""},stylus:{start:"//",end:""},svelte:{start:"<!--",end:"-->"},swift:{start:"//",end:""},terraform:{start:"#",end:""},tex:{start:"%",end:""},typescript:{start:"//",end:""},typescriptreact:{start:"//",end:""},vb:{start:"'",end:""},verilog:{start:"//",end:""},"vue-html":{start:"<!--",end:"-->"},vue:{start:"//",end:""},xml:{start:"<!--",end:"-->"},xsl:{start:"<!--",end:"-->"},yaml:{start:"#",end:""}};var Si={doesContain:(t,e)=>t.startIndex<=e.startIndex&&e.endIndex<=t.endIndex,ofSyntaxNode:t=>({startIndex:t.startIndex,endIndex:t.endIndex}),compare:(t,e)=>t.startIndex-e.startIndex||e.endIndex-t.endIndex,doIntersect:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return r<n},len:t=>t.endIndex-t.startIndex,intersectionSize:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return Math.max(n-r,0)},isTreeSitterOffsetRange(t){return typeof t.startIndex=="number"&&typeof t.endIndex=="number"},toTreeSitterOffsetRange(t,e){return{startIndex:e.offsetAt(t.start),endIndex:e.offsetAt(t.end)}}},Bs={isEqual(t,e){return t.row===e.row&&t.column===e.column},isBefore(t,e){return t.row<e.row||t.row===e.row&&t.column<e.column},isAfter(t,e){return Bs.isBefore(e,t)},isBeforeOrEqual(t,e){let r=Bs.isBefore(t,e),n=Bs.isEqual(t,e);return!!(r||n)},equals(t,e){return t.column===e.column&&t.row===e.row},isAfterOrEqual(t,e){return Bs.isBeforeOrEqual(e,t)},ofPoint:t=>({row:t.row,column:t.column})},Iu={doesContain:(t,e)=>Bs.isBeforeOrEqual(t.startPosition,e.startPosition)&&Bs.isAfterOrEqual(t.endPosition,e.endPosition),equals:(t,e)=>Bs.equals(t.startPosition,e.startPosition)&&Bs.equals(t.endPosition,e.endPosition),ofSyntaxNode:t=>({startPosition:t.startPosition,endPosition:t.endPosition})},QL={ofSyntaxNode:t=>({type:t.type,startIndex:t.startIndex,endIndex:t.endIndex})},Kc={ofSyntaxNode:t=>({range:Iu.ofSyntaxNode(t),startIndex:t.startIndex,text:t.text,endIndex:t.endIndex})};var tJ=Te(require("path"));var OX=require("worker_threads"),XL=class{constructor(e,r){this.logger=r;this.handlers=new Map;this.nextId=1;this.worker=new OX.Worker(e),this.worker.on("message",({id:n,err:i,res:o})=>{let s=this.handlers.get(n);s&&(this.handlers.delete(n),i?s.reject(i):s.resolve(o))}),this.worker.on("error",n=>this.handleError(n)),this.worker.on("exit",n=>{n!==0&&this.handleError(new Error(`Worker thread exited with code ${n}.`))})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.handlers.clear()}handleError(e){this.logger?.exception(e);for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}remoteCall(e,r){let n=this.nextId++,i,o,s=new Promise((a,l)=>{i=a,o=l});return this.handlers.set(n,{resolve:i,reject:o}),this.worker.postMessage({id:n,fn:e,args:r}),s}},Jh=class{constructor(e,r){this.worker=new XL(e,r);let n={get:(i,o)=>(typeof o=="string"&&!i[o]&&(i[o]=(...s)=>{if(!this.worker)throw new Error("Worker was terminated!");return this.worker.remoteCall(o,s)}),i[o])};this.proxy=new Proxy(Object.create(null),n)}terminate(){this.worker.terminate()}};var _T={};Jn(_T,{TreeSitterOffsetRange:()=>Si,_clean:()=>rM,_extractDoc:()=>mRe,_getCallExpressions:()=>eRe,_getClassDeclarations:()=>rRe,_getCoarseParentScope:()=>lRe,_getDocumentableNodeIfOnIdentifier:()=>dRe,_getFixSelectionOfInterest:()=>uRe,_getFunctionBodies:()=>cRe,_getFunctionDefinitions:()=>tRe,_getFunctionPositions:()=>aRe,_getNewExpressions:()=>oRe,_getNodeMatchingSelection:()=>eJ,_getNodeToDocument:()=>pRe,_getSemanticChunkTree:()=>sRe,_getTypeDeclarations:()=>nRe,_getTypeReferences:()=>iRe,_parse:()=>Ti});var G_=Te(require("path")),yT=Te(DX());var vT=class{constructor(e,r){this.syntaxTreeRoot=r;this.roots=[];this.formTree(e)}formTree(e){e.sort((o,s)=>o.mainBlock.startIndex-s.mainBlock.startIndex||o.mainBlock.endIndex-s.mainBlock.endIndex);let r=[],n=()=>r[r.length-1],i=(o,s)=>o.mainBlock.startIndex===s.mainBlock.startIndex&&o.mainBlock.endIndex===s.mainBlock.endIndex;for(let o of e){let s={info:o,children:[]},a=n();if(!a){this.roots.push(s),r.push(s);continue}if(!i(a.info,o)){for(;a&&!Si.doesContain(a.info.mainBlock,o.mainBlock);)r.pop(),a=n();a?a.children.push(s):this.roots.push(s),r.push(s)}}}};var j_=class extends Error{constructor(e){super(`Unrecognized language: ${e}`)}},LX={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"typescript",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java"};function Yc(t){return t in LX}function An(t){if(Yc(t))return LX[t];throw new j_(t)}var MX={typescript:[[`[
				(call_expression
					function: (identifier) @identifier)
				(call_expression
					function: (member_expression
						(property_identifier) @identifier))
			] @call_expression`]],javascript:[[`[
				(call_expression
					function: (identifier) @identifier)
				(call_expression
					function: (member_expression
						(property_identifier) @identifier))
			] @call_expression`]],python:[[`[
				(call
					function: (identifier) @identifier)
				(call
					function: (attribute
						attribute: (identifier) @identifier))
			] @call_expression`]],csharp:[[`[
				(invocation_expression
					function: (identifier) @identifier)
				(invocation_expression
					function: (member_access_expression
						name: (identifier) @identifier))
			  ] @call_expression`]],go:[[`[
				(call_expression
					((selector_expression
						(field_identifier) @identifier)))
				(call_expression
					(identifier) @identifier)
			] @call_expression`]],java:[[`[
				(method_invocation
				  name: (identifier) @identifier)
			] @call_expression`]],ruby:[[`[
				(call (identifier) @identifier
					(#not-match? @identifier "new|send|public_send|method"))
				(call
					receiver: (identifier)
					method: (identifier) @method
					(#match? @method "^(send|public_send|method)")
					arguments: (argument_list
						(simple_symbol) @symbol))
			] @call_expression`]],cpp:[[`[
				(call_expression (identifier) @identifier)
				(call_expression
					(field_expression
						field: (field_identifier) @identifier))
				(call_expression
					(call_expression
						(primitive_type)
						(argument_list
							(pointer_expression
							(identifier) @identifier))))
			] @call_expression`]]},FX={typescript:[["(class_declaration) @class_declaration"]],javascript:[["(class_declaration) @class_declaration"]],java:[["(class_declaration) @class_declaration"]],csharp:[["(class_declaration) @class_declaration"]],python:[["(class_definition) @class_declaration"]],cpp:[["(class_specifier) @class_declaration"]],ruby:[["(class) @class_declaration"]],go:[[`(type_declaration
				(type_spec
					(type_identifier) @type_identifier)) @class_declaration`]]},BX={typescript:[[`[
				(interface_declaration)
				(type_alias_declaration)
			] @type_declaration`]],csharp:[[`(interface_declaration
				(identifier) @type_identifier) @type_declaration`]],cpp:[[`[
				(struct_specifier
					(type_identifier) @type_identifier)
				(union_specifier
					(type_identifier) @type_identifier)
				(enum_specifier
					(type_identifier) @type_identifier)
			] @type_declaration`]],java:[[`(interface_declaration
				(identifier) @type_identifier) @type_declaration`]],go:[[`(type_declaration
				(type_spec
					(type_identifier) @type_identifier)) @type_declaration`]],ruby:[["(module (constant) @type_identifier)"]],python:[[`(class_definition
				(identifier) @type_identifier) @class_declaration`]]},UX={typescript:[["(type_identifier) @type_identifier"]],go:[["(type_identifier) @type_identifier"]],ruby:[["(type_identifier) @type_identifier"]],csharp:[[`[
				(base_list
					(identifier) @type_identifier)
				(variable_declaration
					(identifier) @type_identifier)
			]`]],cpp:[["(type_identifier) @type_identifier"]],java:[["(type_identifier) @type_identifier"]],python:[[`[
				(type (identifier) @type_identifier)
				(argument_list
					(identifier) @type_identifier)
			]`]]},qX={typescript:[[`(new_expression
				constructor: (identifier) @new_expression)`]],javascript:[[`(new_expression
				constructor: (identifier) @new_expression)`]],python:[[`(call
				function: (identifier) @new_expression)`]],csharp:[[`(object_creation_expression
				(identifier) @new_expression)`]],java:[[`(object_creation_expression
				(type_identifier) @new_expression)`]],cpp:[[`(declaration
				(type_identifier) @new_expression)`]],go:[["(composite_literal (type_identifier) @new_expression)"]],ruby:[[`((call
				receiver: ((constant) @new_expression)
				method: (identifier) @method)
					(#eq? @method "new"))`]]},HX={python:[[`[
				(function_definition
					name: (identifier) @identifier
					body: (block
							(expression_statement (string))? @docstring) @body)
				(assignment
					left: (identifier) @identifier
					right: (lambda) @body)
			] @function`],['(ERROR ("def" (identifier) (parameters))) @function']],javascript:[[`[
				(function
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(function_declaration
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(generator_function
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(generator_function_declaration
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(method_definition
					name: (property_identifier)? @identifier
					body: (statement_block) @body)
				(arrow_function
					body: (statement_block) @body)
			] @function`]],typescript:[[`[
				(function
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(function_declaration
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(generator_function
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(generator_function_declaration
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(method_definition
					name: (property_identifier)? @identifier
					body: (statement_block) @body)
				(arrow_function
					body: (statement_block) @body)
			] @function`]],go:[[`[
				(function_declaration
					name: (identifier) @identifier
					body: (block) @body)
				(method_declaration
					name: (field_identifier) @identifier
					body: (block) @body)
			] @function`]],ruby:[[`[
				(method
					name: (_) @identifier
					parameters: (method_parameters)? @params
					[(_)+ "end"] @body)
				(singleton_method
					name: (_) @identifier
					parameters: (method_parameters)? @params
					[(_)+ "end"] @body)
			] @function`]],csharp:[[`[
				(constructor_declaration
					(identifier) @identifier
					(block) @body)
				(destructor_declaration
					(identifier) @identifier
					(block) @body)
				(operator_declaration
					(block) @body)
				(method_declaration
					(identifier) @identifier
					(block) @body)
				(local_function_statement
					(identifier) @identifier
					(block) @body)
			] @function`]],cpp:[[`(function_definition
					(_
					(identifier) @identifier)
				(compound_statement) @body) @function`]],java:[[`[
				(constructor_declaration
					name: (identifier) @identifier
					body: (constructor_body) @body)
				(method_declaration
					name: (_) @identifier
					body: (block) @body)
				(lambda_expression
					body: (block) @body)
			] @function`]]},jX={javascript:[[`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]],typescript:[[`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]],java:[[`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]],cpp:[[`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]],csharp:[[`(
			((comment) @c
				(#match? @c "^\\\\/\\\\/\\\\/"))+
		) @docComment`]],python:[[`(expression_statement
			(string) @docComment)`]],go:[["((comment)+) @docComment"]],ruby:[["((comment)+) @docComment"]]},VX={typescript:["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"],javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"]},GX={typescript:[[wu("typescript")]],javascript:[[wu("javascript")]],java:[[wu("java")]],cpp:[[wu("cpp")]],csharp:[[wu("csharp")]],python:[[wu("python")]],go:[[wu("go")]],ruby:[[wu("ruby")]]},VAe={typescript:["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"],javascript:["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"],java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"]},GAe={typescript:["lexical_declaration","expression_statement","public_field_definition"],javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"]},$Ae={typescript:["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition"],javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:[]},$X={typescript:[[qp("typescript")]],javascript:[[qp("javascript")]],java:[[qp("java")]],cpp:[[qp("cpp")]],csharp:[[qp("csharp")]],python:[[qp("python")]],go:[[qp("go")]],ruby:[]};function wu(t){return VX[An(t)].map(e=>`(${e}) @scope`).join(`
`)}function qp(t){return`[
		${$Ae[An(t)].map(r=>`(${r})`).join(`
`)}
	] @definition`}function V_(t,e){return VX[An(t)].includes(e.type)||VAe[An(t)].includes(e.type)}function JL(t,e){return GAe[An(t)].includes(e.type)}var ZL=class{constructor(){this.loadedLanguagesCache=new Map}loadLanguage(e){return this.loadedLanguagesCache.has(e)||this.loadedLanguagesCache.set(e,this._doLoadLanguage(e)),this.loadedLanguagesCache.get(e)}_doLoadLanguage(e){let n=`tree-sitter-${e==="csharp"?"c-sharp":e}.wasm`,i=G_.basename(__dirname)==="dist"?G_.resolve(__dirname,n):G_.resolve(__dirname,"../../../dist",n);return yT.default.Language.load(i)}};function zAe(t){return{tree:t,dispose:()=>t.delete()}}var eM=class t{static{this.CACHE_SIZE_PER_LANGUAGE=5}constructor(){this.caches=new Map,this.languageLoader=new ZL,this._parser=null}get parser(){return this._parser||(this._parser=new yT.default),this._parser}async parse(e,r){await yT.default.init();let n=this.getParseTreeCache(e),i=n.get(r);if(i)return i.tree;let o=await this.languageLoader.loadLanguage(e);this.parser.setLanguage(o);let s=this.parser.parse(r);return n.put(r,zAe(s)),s}delete(){this._parser&&(this.parser.delete(),this._parser=null);for(let e of this.caches.values())e.dispose()}getParseTreeCache(e){let r=this.caches.get(e);return r||(r=new xb(t.CACHE_SIZE_PER_LANGUAGE),this.caches.set(e,r)),r}},QX=new eM;function rM(){QX.delete()}function Ti(t,e){return QX.parse(An(t),e)}function Qc(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}function WAe(t,e){let r=GX[An(t)];return Qc(r,e)}function nM(t,e){let r=HX[An(t)];return Qc(r,e)}function KAe(t,e){let r=MX[An(t)];return Qc(r,e)}function YAe(t,e){let r=FX[An(t)];return Qc(r,e)}function QAe(t,e){let r=BX[An(t)];return Qc(r,e)}function XAe(t,e){let r=UX[An(t)];return Qc(r,e)}function JAe(t,e){let r=qX[An(t)];return Qc(r,e)}function ZAe(t,e){let r=$X[An(t)];return Qc(r,e)}async function eRe(t,e,r){let n=await Ti(t,e);return KAe(t,n.rootNode).reduce((s,a)=>{let l=a.captures.find(c=>c.name==="call_expression").node;if(Si.doIntersect(r,l)){let c,u;t==="ruby"&&(u=a.captures.find(d=>d.name==="symbol")?.node,c=u?.text?.slice(1)),u??=a.captures.find(d=>d.name==="identifier")?.node,c??=u?.text,s.push({identifier:c??"",text:l.text,startIndex:(u??l).startIndex,endIndex:(u??l).endIndex})}return s},[])}async function tRe(t,e){let r=await Ti(t,e);return nM(t,r.rootNode).map(o=>{let s=o.captures.find(l=>l.name==="function").node;return{identifier:o.captures.find(l=>l.name==="identifier")?.node.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function rRe(t,e){let r=await Ti(t,e);return YAe(t,r.rootNode).map(o=>{let s=o.captures.find(l=>l.name==="class_declaration").node;return{identifier:s?.children.find(l=>l.type==="type_identifier"||l.type==="identifier"||l.type==="constant")?.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function nRe(t,e){let r=await Ti(t,e);return QAe(t,r.rootNode).map(o=>{let s=o.captures.find(l=>l.name==="type_declaration").node,a=o.captures.find(l=>l.name==="type_identifier")?.node.text;return a||(a=s?.children.find(l=>l.type==="type_identifier")?.text),{identifier:a??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function iRe(t,e){let r=await Ti(t,e);return XAe(t,r.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="type_identifier").node;return{identifier:s.text,text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function oRe(t,e,r){let n=await Ti(t,e);return JAe(t,n.rootNode).reduce((s,a)=>{let l=a.captures.find(c=>c.name==="new_expression").node;return Si.doIntersect(r,l)&&s.push({identifier:l.text,text:l.text,startIndex:l.startIndex,endIndex:l.endIndex}),s},[])}async function sRe(t,e){let r=await Ti(t,e),n=ZAe(t,r.rootNode);return gRe(t,n,r.rootNode)}async function aRe(t,e){let r=await Ti(t,e);return nM(t,r.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="function").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}async function cRe(t,e){let r=await Ti(t,e);return nM(t,r.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="body").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}async function lRe(t,e,r){let n=await Ti(t,e),i=WAe(t,n.rootNode),o;for(let s of i){let a=s.captures[0].node,l=Iu.ofSyntaxNode(a);if(Iu.doesContain(l,r)&&(o=a),Bs.isBefore(r.endPosition,l.startPosition))break}if(o)return Iu.ofSyntaxNode(o);throw new Error("No parent node found")}async function uRe(t,e,r,n){let o=(await Ti(t,e)).rootNode.descendantForPosition(r.startPosition,r.endPosition),s={startPosition:o.startPosition,endPosition:o.endPosition},a=JX(t,o,n,r,!0);return Iu.equals(s,a)?XX(t,o):a}function XX(t,e){let r=e.parent,n={startPosition:e.startPosition,endPosition:e.endPosition};if(V_(t,e)||!r)return n;let{filteredRanges:i,indexOfInterest:o}=ZX(t,r.children,n,!1);if(o-1>=0&&o+1<=i.length-1){let s=i[o-1],a=i[o+1];return{startPosition:s.startPosition,endPosition:a.endPosition}}return XX(t,r)}function JX(t,e,r,n,i){let o=e.children;if(e.endPosition.row-e.startPosition.row+1<=r){let a=V_(t,e)?{startPosition:e.startPosition,endPosition:e.endPosition}:WX(t,o,r,n,i),l=e.parent;return l?JX(t,l,r,a,!1):a}return WX(t,o,r,n,i)}function zX(t,e){return e.endPosition.row-t.startPosition.row+1}function WX(t,e,r,n,i){if(e.length===0)return n;let{filteredRanges:o,indexOfInterest:s}=ZX(t,e,n,i),a=0,l=o.length-1,c=o[a],u=o[l];for(;zX(c,u)>r&&a!==l;)s-a<l-s?(l--,u=o[l]):(a++,c=o[a]);return zX(c,u)<=r?{startPosition:c.startPosition,endPosition:u.endPosition}:n}function ZX(t,e,r,n){let i,o;if(n?(i=e.filter(s=>V_(t,s)||JL(t,s)),o=iX(i,r,(s,a)=>Bs.isBefore(s.startPosition,a.startPosition)),i.splice(o,0,r)):(i=e.filter(s=>Iu.doesContain(s,r)||V_(t,s)||JL(t,s)),o=i.findIndex(s=>Iu.doesContain(s,r))),o===-1)throw new Error("Valid index not found");return{filteredRanges:i,indexOfInterest:o}}function eJ(t,e,r){let n=[t.rootNode],i=[];for(;;){let o=n.map(s=>[s,Si.intersectionSize(s,e)]).filter(([s,a])=>a>0).sort(([s,a],[l,c])=>c-a);if(o.length===0)return i.length===0?void 0:oX(i,([s,a],[l,c])=>a-c)[0];{let s=o.map(([a,l])=>{let c=Si.len(a),u=Math.abs(Si.len(e)-l),p=(l-u)/c;return[a,p]});i.push(...s.filter(([a,l])=>iM(a,r))),n=[],n.push(...s.flatMap(([a,l])=>a.children))}}}async function dRe(t,e,r){if(!Yc(t))return;let i=(await Ti(t,e)).rootNode.descendantForIndex(r.startIndex,r.endIndex);if(i.type.match(/identifier/)&&(i.parent===null||iM(i.parent,t))){let o=i.parent,s=o===null?void 0:{startIndex:o.startIndex,endIndex:o.endIndex};return{identifier:i.text,nodeRange:s}}}async function pRe(t,e,r){if(!Yc(t))return;let n=await Ti(t,e),o=r.startIndex===r.endIndex?void 0:eJ(n,r,t);if(o)return{nodeIdentifier:KX(o,t),nodeToDocument:QL.ofSyntaxNode(o),nodeSelectionBy:"matchingSelection"};let a=n.rootNode.descendantForIndex(r.startIndex,r.endIndex),l=0;for(;!iM(a,t)&&a.parent!==null;)a=a.parent,++l;return{nodeIdentifier:KX(a,t),nodeToDocument:QL.ofSyntaxNode(a),nodeSelectionBy:"expanding"}}function KX(t,e){switch(e){case"python":case"csharp":return t.children.find(r=>r.type.match(/identifier/))?.text;case"golang":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/spec/))?.children.find(i=>i.type.match(/identifier/))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":case"java":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/declarator/))?.children.find(i=>i.type.match(/identifier/))?.text}case"ruby":return t.children.find(r=>r.type.match(/constant|identifier/))?.text;default:return t.children.find(r=>r.type.match(/identifier/))?.text}}function iM(t,e){switch(e){case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return t.type.match(/definition|declaration|declarator|export_statement/);case"golang":return t.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return t.type.match(/definition|declaration|declarator|class_specifier/);case"ruby":return t.type.match(/module|class|method|assignment/);default:return t.type.match(/definition|declaration|declarator/)}}var fRe=new Set(["javascript","typescript","java","cpp","csharp"]);async function mRe(t,e){if(!fRe.has(t))return;let r=await Ti(t,e),n=jX[An(t)],i=Qc(n,r.rootNode).flatMap(s=>s.captures.filter(a=>a.name==="docComment")),o=hRe(i);if(o.length===1)return o[0]}function hRe(t){let e=[];for(let r=0;r<t.length;++r){let n=[t[r].node.text];for(;r+1<t.length&&t[r].node.endPosition.row+1===t[r+1].node.startPosition.row;)++r,n.push(t[r].node.text);e.push(n.join(`
`))}return e}function gRe(t,e,r){let n=[];switch(An(t)){case"typescript":case"javascript":n=YX(e,!0);break;case"python":n=vRe(e);break;default:{n=YX(e,!1);break}}return new vT(n,Kc.ofSyntaxNode(r))}function YX(t,e){let r=new Map;return t.forEach(n=>{let o=n.captures.find(a=>a.name==="definition")?.node,s=o?.childForFieldName("body");if(o&&s){let a=e?yRe(o):tM(o);r.get(o.id)||r.set(o.id,{mainBlock:Kc.ofSyntaxNode(o),detailBlocks:{comments:a.map(c=>Kc.ofSyntaxNode(c)),body:Kc.ofSyntaxNode(s)}})}}),Array.from(r.values())}function vRe(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(s=>s.name==="definition")?.node,o=i?.childForFieldName("body");if(i&&o){let s=xRe(o),a=_Re(i);e.set(i.id,{mainBlock:Kc.ofSyntaxNode(i),detailBlocks:{docstring:s?Kc.ofSyntaxNode(s):void 0,decorator:a?Kc.ofSyntaxNode(a):void 0,body:Kc.ofSyntaxNode(o)}});return}}),Array.from(e.values())}function tM(t){let e=[],r=t.previousNamedSibling;for(;r?.type==="comment";)e.push(r),r=r.previousNamedSibling;return e.reverse()}function yRe(t){let e=t.parent;return e?.type==="export_statement"?tM(e):tM(t)}function _Re(t){let e=t.previousNamedSibling;return e?.type==="decorator"?e:void 0}function xRe(t){let e=t.firstChild;if(!e||e.type!=="expression_statement")return;let r=e.firstChild;return r?.type==="string"?r:void 0}var bRe=tJ.join(__dirname,"worker2.js"),$_=null,li=_T;function rJ(t,e){t&&($_=new Jh(bRe,e),li=$_.proxy)}function nJ(){$_&&($_.terminate(),$_=null,li=_T),rM()}async function iJ(t,e){return li._getFunctionPositions(t,e)}async function oJ(t,e){return li._getFunctionBodies(t,e)}async function sJ(t,e,r){return li._getCoarseParentScope(t,e,r)}async function aJ(t,e,r,n){return li._getFixSelectionOfInterest(t,e,r,n)}async function cJ(t,e,r){return li._getCallExpressions(t,e,r)}async function oM(t,e){return li._getFunctionDefinitions(t,e)}async function lJ(t,e,r){return li._getNewExpressions(t,e,r)}async function sM(t,e){return li._getClassDeclarations(t,e)}async function uJ(t,e){return li._getTypeDeclarations(t,e)}async function dJ(t,e){return li._getTypeReferences(t,e)}async function aM(t,e){return li._getSemanticChunkTree(t,e)}async function pJ(t,e,r){return li._getDocumentableNodeIfOnIdentifier(t,e,r)}async function fJ(t,e,r){return li._getNodeToDocument(t,e,r)}async function mJ(t,e){return li._extractDoc(t,e)}var Xc=class{};function cM(t){return typeof t=="object"&&t!==null&&"targetUri"in t}async function gJ(t,e,r,n){let i=await EJ(t,e,n),o=yJ(e,i,r),s=vJ(r,o);return{functionPositions:i,expandedRange:e.validateRange(s)}}function vJ(t,e){let r=Math.abs(t.start.line-e.start.line),n=Math.abs(t.end.line-e.end.line);return r+n>30?t:e}function yJ(t,e,r){let n=hJ(t,e,r.start),i=hJ(t,e,r.end),o=t.offsetAt(r.start),s=t.offsetAt(r.end);return n&&(o=Math.min(o,n.startIndex),s=Math.max(s,n.endIndex)),i&&(o=Math.min(o,i.startIndex),s=Math.max(s,i.endIndex)),new De(t.positionAt(o),t.positionAt(s))}async function _J(t,e,r,n){let i=Si.toTreeSitterOffsetRange(r,e),o=await Ha(t,e,n,()=>cJ(e.languageId,e.getText(),i),[]),s=await Ha(t,e,n*3,()=>Promise.all(o.map(d=>{let p=e.positionAt(d.startIndex);return t.get(Xc).getImplementations(e.uri,p)})),[]),a=[];for(let d=0;d<s.length;d++){let p=o[d],f=s[d];for(let m of f){let{uri:h,range:g}=cM(m)?{uri:m.targetUri,range:m.targetRange}:m,v=await t.get(He).openTextDocument(h),_=(await oM(e.languageId,v.getText())).find(T=>T.identifier===p.identifier);if(_){let T=Si.toTreeSitterOffsetRange(g,e);a.push({uri:h,version:v.version,identifier:p.identifier,startIndex:T.startIndex,endIndex:T.endIndex,text:_.text})}}}if(a.length!==0)return a;let l=e.getText(),c=await Ha(t,e,n,()=>oM(e.languageId,l),[]),u=[];for(let d of c)for(let p of o)d.identifier===p.identifier&&u.push(d);return u.sort((d,p)=>d.startIndex-p.startIndex)}async function xJ(t,e,r,n){let i=Si.toTreeSitterOffsetRange(r,e),o=await Ha(t,e,n,()=>lJ(e.languageId,e.getText(),i),[]),s=await Ha(t,e,n*3,()=>Promise.all(o.map(d=>t.get(Xc).getDefinitions(e.uri,e.positionAt(d.startIndex)))),[]),a=[];for(let d=0;d<s.length;d++){let p=o[d],f=s[d];for(let m of f){let{uri:h,range:g}=cM(m)?{uri:m.targetUri,range:m.targetRange}:m,v=await t.get(He).openTextDocument(h),y=(await sM(e.languageId,v.getText())).find(_=>_.identifier===p.identifier);if(y){let _=Si.toTreeSitterOffsetRange(g,e);a.push({uri:h,version:v.version,identifier:p.identifier,startIndex:_.startIndex,endIndex:_.endIndex,text:y.text})}}}if(a.length!==0)return a;let l=e.getText(),c=await Ha(t,e,n,()=>sM(e.languageId,l),[]),u=[];for(let d of c)for(let p of o)d.identifier===p.identifier&&u.push(d);return u.sort((d,p)=>d.startIndex-p.startIndex)}async function bJ(t,e,r,n){let i=await Ha(t,e,n,()=>dJ(e.languageId,r),[]),o=e.getText(),s=await Ha(t,e,n,()=>uJ(e.languageId,o),[]),a=[];for(let l of s)for(let c of i)l.identifier===c.identifier&&a.push(l);return a.sort((l,c)=>l.startIndex-c.startIndex)}function hJ(t,e,r){let n=t.offsetAt(r),i=null;for(let o of e)if(!(o.endIndex<n)){if(o.startIndex>n)break;i=o}return i}function CRe(t,e){return e===0?t.then(r=>({type:"success",value:r})):new Promise((r,n)=>{let i=setTimeout(()=>r({type:"timeout"}),e);t.then(o=>{clearTimeout(i),r({type:"success",value:o})}).catch(o=>{clearTimeout(i),n(o)})})}async function EJ(t,e,r){let n=await Ha(t,e,r,()=>iJ(e.languageId,e.getText()),[]);return n.sort((i,o)=>i.startIndex-o.startIndex),n}async function lM(t,e,r){let n=await Ha(t,e,r,()=>oJ(e.languageId,e.getText()),[]);return n.sort((i,o)=>i.startIndex-o.startIndex),SRe(n)}function SRe(t){t.sort((r,n)=>r.startIndex-n.startIndex||n.endIndex-r.endIndex);let e=[];for(let r=0,n=t.length;r<n;){e.push(t[r]);let i=r+1;for(;i<t.length&&Si.doesContain(t[r],t[i]);)++i;r=i}return e}async function Ha(t,e,r,n,i){let o=new Re(t,"asyncCompute");try{let s=await CRe(CJ(e,n,i),r);return s.type==="success"?s.value:(o.info(`Computing async parser based result took longer than ${r}ms`),i)}catch(s){return s instanceof j_||o.exception(s,"Failed to compute async parser based result"),i}}async function CJ(t,e,r,n=0){let i=t.version,o=await e();return t.version!==i?n<3?CJ(t,e,r,n+1):r:o}function Jc(t,e){let r=NX[e.languageId];return r?r.end?{languageId:e.languageId,lineCommentToken:"//"}:{languageId:e.languageId,lineCommentToken:r.start}:{languageId:e.languageId,lineCommentToken:"//"}}var Fr=class t{static forDocument(e,r){return this.forUri(e,r.uri)}static forUri(e,r){return`${this.forLanguage(e)}: ${r.path}`}static forLanguage(e){return`${e.lineCommentToken} FILEPATH`}static testLine(e,r){let n=t.forLanguage(e);return r.trimStart().startsWith(n)}};var Gn=class{static begin(e,r){return typeof r>"u"?`${e.lineCommentToken} BEGIN:`:`${e.lineCommentToken} BEGIN: ${r}`}static end(e,r){return typeof r>"u"?`${e.lineCommentToken} END:`:`${e.lineCommentToken} END: ${r}`}};function Au(t){return/```[\s\S]+\n```/m.test(t)}var TRe={analysisTimeoutMs:100};async function SJ(t,e){let r=t.get(Ht).extensionMode===eT.Test?0:TRe.analysisTimeoutMs,n=Date.now(),i=await EJ(t,e.document,r),o=Date.now()-n,s=r===0?0:Math.max(10,r-o),a=await lM(t,e.document,s),l=yJ(e.document,i,e.wholeRange);return{expandedRange:e.document.validateRange(vJ(e.wholeRange,l)),rangeExpandedToFunction:l,functionBodies:a}}var uM;(e=>{function t(r){return r&&r.expandedRange&&r.contextInfo}e.is=t})(uM||={});var TJ=Te(require("fs"));var Zc=class{constructor(e){this._variableEnablements=Ze(e,be.ConversationVariablesEnablements,{default:{"*":ty(e)}})}isVariableEnabled(e){return typeof this._variableEnablements[e.name]=="boolean"?this._variableEnablements[e.name]:typeof e.defaultEnablement=="boolean"?e.defaultEnablement:!!this._variableEnablements["*"]}getVariables(){return Ke.contextResolvers.filter(e=>e.variableInfo&&this.isVariableEnabled(e.variableInfo)).map(e=>({name:e.variableInfo.name,kind:e.kind,description:e.variableInfo.description,resolve:e.resolveContext.bind(e)}))}getVariable(e){return this.getVariables().find(r=>r.name===e)}};async function IJ(t,e,r){let n=/(^|\s)\[(@|#)([\w_\-]+)(:[\w_\-\.]+)?\]\(values:([\w_\-]+)(:[\w_\-\.]+)?\)/ig,i=[];for(;;){let o=n.exec(e);if(!o)return{parts:i,message:e};let[s,a,l,c,u,d,p]=o,f=d+(p??""),m=r[f];if(!m||m.length===0)continue;let h=m.find(v=>v.level===3)??m[0];if(l==="#"&&d==="file"){let v=zi.parse(h.value);h.value=(await TJ.promises.readFile(v.fsPath)).toString()}let g=t.get(Zc).getVariable(f);i.push({kind:g?.kind??"variable",promptPart:`# ${f.toUpperCase()} CONTEXT
${h.value}`}),e=e.slice(0,o.index)+a+`[${f}](#${f}-context)`+e.slice(o.index+s.length)}}var Zh=class{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},z_=class{constructor(e){this.lines=e}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.lines[r].trim();return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},Ru=class{static Assert(e,r){if(!e)throw new Error(r)}},Pu=class{static Copy(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}static Copy2(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}};var xT=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Zh(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},bT=class t{constructor(e,r){let[n,i]=t._getElements(e),[o,s]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=s,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let u;return n<=i?(Ru.Assert(e===r+1,"originalStart should only be one more than originalEnd"),u=[new Zh(e,0,n,i-n+1)]):e<=r?(Ru.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Zh(e,r-e+1,n,0)]):(Ru.Assert(e===r+1,"originalStart should only be one more than originalEnd"),Ru.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}let o=[0],s=[0],a=this.ComputeRecursionPoint(e,r,n,i,o,s),l=o[0],c=s[0];if(a!==null)return a;{let u=this.ComputeDiffRecursive(e,l,n,c),d=this.ComputeDiffRecursive(l+1,r,c+1,i);return this.ConcatenateChanges(u,d)}}WALKTRACE(e,r,n,i,o,s,a,l,c,u,d,p,f,m,h,g,v){let y=null,_=null,T=new xT,I=r,R=n,w=f[0]-g[0]-i,O=-1073741824,V=this.m_forwardHistory.length-1;do{let L=w+e;L===I||L<R&&c[L-1]<c[L+1]?(d=c[L+1],m=d-w-i,d<O&&T.MarkNextChange(),O=d,T.AddModifiedElement(d+1,m),w=L+1-e):(d=c[L-1]+1,m=d-w-i,d<O&&T.MarkNextChange(),O=d-1,T.AddOriginalElement(d,m+1),w=L-1-e),V>=0&&(c=this.m_forwardHistory[V],e=c[0],I=1,R=c.length-1)}while(--V>=-1);y=T.getReverseChanges(),T=new xT,I=s,R=a,w=f[0]-g[0]-l,O=1073741824,V=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let L=w+o;L===I||L<R&&u[L-1]>=u[L+1]?(d=u[L+1]-1,m=d-w-l,d>O&&T.MarkNextChange(),O=d+1,T.AddOriginalElement(d+1,m+1),w=L+1-o):(d=u[L-1],m=d-w-l,d>O&&T.MarkNextChange(),O=d,T.AddModifiedElement(d+1,m+1),w=L-1-o),V>=0&&(u=this.m_reverseHistory[V],o=u[0],I=1,R=u.length-1)}while(--V>=-1);return _=T.getChanges(),this.ConcatenateChanges(y,_)}ComputeRecursionPoint(e,r,n,i,o,s){let a=0,l=0,c=0,u=0,d=0,p=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=r-e+(i-n),m=f+1,h=new Int32Array(m),g=new Int32Array(m),v=i-n,y=r-e,_=e-n,T=r-i,R=(y-v)%2===0;h[v]=e,g[y]=r;for(let w=1;w<=f/2+1;w++){let O=0,V=0;c=this.ClipDiagonalBound(v-w,w,v,m),u=this.ClipDiagonalBound(v+w,w,v,m);for(let L=c;L<=u;L+=2){L===c||L<u&&h[L-1]<h[L+1]?a=h[L+1]:a=h[L-1]+1,l=a-(L-v)-_;let A=a;for(;a<r&&l<i&&this.ElementsAreEqual(a+1,l+1);)a++,l++;if(h[L]=a,a+l>O+V&&(O=a,V=l),!R&&Math.abs(L-y)<=w-1&&a>=g[L])return o[0]=a,s[0]=l,A<=g[L]&&1447>0&&w<=1447+1?this.WALKTRACE(v,c,u,_,y,d,p,T,h,g,a,r,o,l,i,s,R):null}d=this.ClipDiagonalBound(y-w,w,y,m),p=this.ClipDiagonalBound(y+w,w,y,m);for(let L=d;L<=p;L+=2){L===d||L<p&&g[L-1]>=g[L+1]?a=g[L+1]-1:a=g[L-1],l=a-(L-y)-T;let A=a;for(;a>e&&l>n&&this.ElementsAreEqual(a,l);)a--,l--;if(g[L]=a,R&&Math.abs(L-v)<=w&&a<=h[L])return o[0]=a,s[0]=l,A>=h[L]&&1447>0&&w<=1447+1?this.WALKTRACE(v,c,u,_,y,d,p,T,h,g,a,r,o,l,i,s,R):null}if(w<=1447){let L=new Int32Array(u-c+2);L[0]=v-c+1,Pu.Copy2(h,c,L,1,u-c+1),this.m_forwardHistory.push(L),L=new Int32Array(p-d+2),L[0]=y-d+1,Pu.Copy2(g,d,L,1,p-d+1),this.m_reverseHistory.push(L)}}return this.WALKTRACE(v,c,u,_,y,d,p,T,h,g,a,r,o,l,i,s,R)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return Pu.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Pu.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return Pu.Copy(e,0,i,0,e.length),Pu.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(Ru.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),Ru.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(a=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new Zh(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=r%2===0;if(e<0){let l=o%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?i-1:i-2}}};var dM=class{constructor(){this.spacesDiff=0;this.looksLikeAlignment=!1}};function IRe(t,e,r,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=t.charCodeAt(o),f=r.charCodeAt(o);if(p!==f)break}let s=0,a=0;for(let p=o;p<e;p++)t.charCodeAt(p)===32?s++:a++;let l=0,c=0;for(let p=o;p<n;p++)r.charCodeAt(p)===32?l++:c++;if(s>0&&a>0||l>0&&c>0)return;let u=Math.abs(a-c),d=Math.abs(s-l);if(u===0){i.spacesDiff=d,d>0&&0<=l-1&&l-1<t.length&&l<r.length&&r.charCodeAt(l)!==32&&t.charCodeAt(l-1)===32&&t.charCodeAt(t.length-1)===44&&(i.looksLikeAlignment=!0);return}if(d%u===0){i.spacesDiff=d/u;return}}function wJ(t,e,r){let n=Math.min(t.getLineCount(),1e4),i=0,o=0,s="",a=0,l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],d=new dM;for(let m=1;m<=n;m++){let h=t.getLineLength(m),g=t.getLineContent(m),v=!1,y=0,_=0,T=0;for(let R=0,w=h;R<w;R++){let O=g.charCodeAt(R);if(O===9)T++;else if(O===32)_++;else{v=!0,y=R;break}}if(!v||(T>0?i++:_>1&&o++,IRe(s,a,g,y,d),d.looksLikeAlignment&&!(r&&e===d.spacesDiff)))continue;let I=d.spacesDiff;I<=c&&u[I]++,s=g,a=y}let p=r;i!==o&&(p=i<o);let f=e;if(p){let m=p?0:.1*n;l.forEach(h=>{let g=u[h];g>m&&(m=g,f=h)}),f===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(f=2)}return{insertSpaces:p,tabSize:f}}var Hp=class t{constructor(e,r){this.text=e;this.languageId=r}static fromDocumentContext(e){return new t(e.document.getText(),e.language.languageId)}};function jp(t,e,r,n,i,o){let s=r.split(/\r\n|\r|\n/g);if(s.length===e.range.lines.length&&e.range.lines.every((p,f)=>p===s[f]))return[];let a=null,l=[],c=!1,u=!1,d=[];for(let p=0;p<s.length;p++){let f=s[p],m=fM(e,f);if(a)if(m===null)l.push(f);else if(m.type==="end"&&m.endMarker===a)d.push(PJ(e,a,l,i)),a=null,l=[];else if(m.type==="end"&&a===e.above&&m.endMarker===e.range){let h=e.range.clone();h.mergeFromAbove(e.above.clone()),d.push(ja(h,l,i)),a=null,l=[];break}else if(m.type==="end"&&a===e.above&&m.endMarker===e.below){let h=e.range.clone();h.mergeFromAbove(e.above.clone()),h.mergeFromBelow(e.below.clone()),d.push(ja(h,l,i)),a=null,l=[];break}else l.push(f);else if(m===null)l.push(f);else switch(m.type){case"start":{c=!0,a=m.startMarker,l=[];break}case"end":{c=!0,d.push(ja(m.endMarker,l,i)),a=null,l=[];break}case"fakestart":case"fakend":u=!0}}return l.length>0&&(a?d.push(PJ(e,a,l,i)):c||d.push(ORe(t,e,l,u,n,i))),o&&(d=wRe(o,d)),d}function wRe(t,e){let r=[],n=t.text.split(/\r\n|\r|\n/g),i=ARe(n,a=>AJ(a,t.languageId)),o=[];for(let a of e){if(a.range.start.line<i+1)return e;let l=!1,c=!1,u=[],d=a.newText.split(/\r\n|\r|\n/g);for(let p of d)AJ(p,t.languageId)?(o.push(NJ(p)+`
`),c=!0):(u.push(p),l=l||p.length>0);c&&!l&&a.range.start.line!==a.range.end.line||r.push(new Xr(a.range,u.join(`
`)))}if(o.length===0)return e;let s=new mn(i+1,0);return r.unshift(new Xr(new De(s,s),o.join(""))),r}function ARe(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}function NJ(t){return t.replace(/^\s+/g,"")}function AJ(t,e){let r=NJ(t);return e==="typescript"||e==="javascript"||e==="java"?r.startsWith("import "):e==="php"?r.startsWith("use "):e==="rust"?!!r.match(/^use\s+[\w:{}, ]+\s*(as\s+\w+)?;/):e==="python"?!!r.match(/^from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!r.match(/^import\s+[\w, ]+$/):!1}var RRe=/^(\t+)/,pM=new Map;function PRe(t){return pM.has(t)||pM.set(t,new RegExp(`^(( {${t}})+)`)),pM.get(t)}function W_(t,e,r){let n=e?PRe(r):RRe,i=t.match(n);return i?[i[0],i[0].length/(e?r:1)]:["",0]}function kRe(t){let e={getLineCount:function(){return t.length},getLineLength:function(o){return t[o-1].length},getLineContent:function(o){return t[o-1]}},{insertSpaces:r,tabSize:n}=wJ(e,4,!1),i=Number.MAX_VALUE;for(let o of t){if(/^\s*$/.test(o))continue;let[,s]=W_(o,r,n);i=Math.min(i,s)}return{insertSpaces:r,tabSize:n,minIndentLevel:i}}function RJ(t,e){if(e===0)return"";if(t===" ")switch(e){case 2:return"  ";case 4:return"    ";case 8:return"        ";case 12:return"            "}if(t==="	")switch(e){case 1:return"	";case 2:return"		";case 3:return"			"}return new Array(e).fill(t).join("")}function NRe(t,e){let r=t.lines,n;if(t.whichLine==="topMost")n=r.find(i=>i!=="");else for(let i=r.length-1;i>=0;--i)if(r[i]!==""){n=r[i];break}return n===void 0?0:W_(n,e.insertSpaces,e.tabSize)[1]}function Vp(t,e,r){if(r===void 0)return t;let n=NRe(e,r),i=kRe(t),o=r.insertSpaces?RJ(" ",r.tabSize):"	";return t.map(s=>{if(s==="")return"";{let[a,l]=W_(s,i.insertSpaces,i.tabSize),c=s.substring(a.length);return RJ(o,n+(l-i.minIndentLevel))+c}})}function fM(t,e){switch(e){case t.above.startMarker:return{type:"start",startMarker:t.above};case t.above.endMarker:return{type:"end",endMarker:t.above};case t.range.startMarker:return{type:"start",startMarker:t.range};case t.range.endMarker:return{type:"end",endMarker:t.range};case t.below.startMarker:return{type:"start",startMarker:t.below};case t.below.endMarker:return{type:"end",endMarker:t.below}}return e.trimStart().startsWith(Gn.begin(t.language))?{type:"fakestart"}:e.trimStart().startsWith(Gn.end(t.language))?{type:"fakend"}:null}function PJ(t,e,r,n){return ja(e,r,n)}function ORe(t,e,r,n,i,o){let s=(h,g,v)=>{let y=0;for(let R of h)for(let w=R.originalStart;w<R.originalStart+R.originalLength;w++){let O=g.lines[w];y+=O.length}let _=g.getCharCount(),T=v.getCharCount(),I=_-y;return{equalCharCount:I,originalCharCount:_,modifiedCharCount:T,originalCharRatio:_>0?I/_:0,modifiedCharRatio:T>0?I/T:0}},a=h=>{let g=new z_(h.lines),v=new z_(r),_=new bT(g,v).ComputeDiff();return s(_,g,v)},l=e.range.clone();l.mergeFromAbove(e.above.clone()),l.mergeFromBelow(e.below.clone());let c=a(l),u=a(e.range),d={diffToEntireScore:c,diffToRangeScore:u},p=new Re(t,"editGeneration");if(p.info(`Diff metrics: ${JSON.stringify(d,null,"	")}`),c.originalCharCount>30&&c.originalCharRatio>.7)return p.info("(case 1) Replacing entire code"),ja(l,r,o);if(u.originalCharCount>20&&u.originalCharRatio>.7)return p.info("(case 2) Replacing selected code"),ja(e.range,r,o);let f=Math.min(c.originalCharRatio,c.modifiedCharRatio),m=Math.min(u.originalCharRatio,u.modifiedCharRatio);return f>.2&&f>m?(p.info("(case 3) Replacing entire code"),ja(l,r,o)):m>.2?(p.info("(case 4) Replacing selected code"),ja(e.range,r,o)):e.range.hasContent?n?(p.info("(case 6) Appending to selected code"),kJ(e.range,r,o)):i===3?(p.info("(case 7) Appending to selected code"),kJ(e.range,r,o)):i===1?(p.info("(case 8) Prepending to selected code"),MRe(e.range,Vp(r,e.range.lines.filter(h=>h.trim()!=="").length>0?{whichLine:"topMost",lines:e.range.lines}:{whichLine:"bottomMost",lines:e.above.lines},o))):(p.info("(Default) Replacing selected code"),ja(e.range,r,o)):(p.info("(case 5) Replacing empty selected code"),ja(e.range,r,o,{whichLine:"bottomMost",lines:e.above.lines}))}function ja(t,e,r,n){let o=Vp(e,n??{whichLine:"topMost",lines:t.lines},r).slice(0),s=t.lines.slice(0),a=t.firstLineIndex,l=t.lastLineIndex;if(s.length===1&&s[0]==="")return new Xr(new De(l,0,l,0),o.join(`
`)+`
`);let c=DRe(s,o);if(a+=c,s.splice(0,c),o.splice(0,c),s.length===0)return new Xr(new De(l+1,0,l+1,0),o.join(`
`)+`
`);let u=LRe(s,o);return l-=u,s.splice(s.length-u,u),o.splice(o.length-u,u),s.length===0?new Xr(new De(a,0,a,0),o.join(`
`)+`
`):new Xr(new De(a,0,l+1,0),o.join(`
`)+`
`)}function DRe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[n]!==e[n])return n;return r}function LRe(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[t.length-1-n]!==e[e.length-1-n])return n;return r}function MRe(t,e){return new Xr(new De(t.firstLineIndex,0,t.firstLineIndex,0),e.join(`
`)+`
`)}function kJ(t,e,r){let n=Vp(e,{whichLine:"bottomMost",lines:t.lines},r);return new Xr(new De(t.lastLineIndex+1,0,t.lastLineIndex+1,0),n.join(`
`)+`
`)}var FRe="vscode-notebook-cell";function Ii(t){return t.scheme===FRe}function Gp(t,e){return{type:"inlineEdit",edits:t,newWholeRange:e}}function el(t,e,r){let n=BRe(t,e);if(!n)return null;let{code:i,contentBeforeCode:o,language:s}=n;if(Fr.testLine(r,i)){let a=i.indexOf(`
`);i=i.substring(a).trim()}return{code:i,contentBeforeCode:o,language:s}}function BRe(t,e){e=e.trim();let r=e.startsWith("```")?0:e.indexOf("```");if(r!==-1){let a=e.indexOf("\n```",r+1);a===-1&&(a=e.indexOf("```",r+1));let l=a!==-1?a:e.length,c=e.indexOf(`
`,r+1),u=e.substring(c,l);u=u.trim();let d=e.substring(0,r).trim(),p=e.substring(r+3,c).trim();return{code:u,contentBeforeCode:d,language:p}}let n=e.split(/\r\n|\r|\n/g),i=!1,o=[],s=[];for(let a of n){let l=fM(t,a);if(i){if(l)return s.push(a),{code:s.join(`
`),contentBeforeCode:o.join(`
`),language:""};s.push(a)}else l?(i=!0,s.push(a)):o.push(a)}return null}var eg=class{constructor(e,r,n,i){this.accessor=e;this.maxResponseTokens=r;this.location=n;this.maxTokenTestOverride=i}async toChatMessages(e){let r=e.turns.length?e.turns[e.turns.length-1].request.type==="user":!1,n=await this.computeMaxRequestTokens(r),i=e.turns.filter(l=>l.status==="success"||l.status==="in-progress"),o=[{role:"system",content:e.systemPrompt}],s=Xh(this.accessor,o),a=[];for(let l=i.length-1;l>=0;l--){let c=l===i.length-1,u=await this.turnToMessages(i[l],c),d=Xh(this.accessor,u);for(;s+d>=n&&u.length>=1;)u.shift(),d=Xh(this.accessor,u);if(c&&!u.length)throw new Error("Sorry, this message is too long. Please try a shorter question.");if(s+d<n)a=[...u,...a],s+=d;else break}return o.push(...a),{messages:o,tokenCount:s}}async computeMaxRequestTokens(e){let r=this.maxTokenTestOverride??(await this.accessor.get(Xt).getChatEndpointInfo(await LL(this.accessor,this.location,e))).modelMaxTokenWindow;if(this.maxResponseTokens!==void 0)return r-this.maxResponseTokens;let n=r<8192?.15:r<16384?.1:.05;return Math.floor(r*(1-n))}async turnToMessages(e,r){let n=[];return r&&e.contextParts.forEach(i=>{n.push({role:"user",content:i.promptPart+`

`})}),n.push({role:"user",content:e.request.message}),e.response&&e.response.type!=="meta"&&n.push({role:"assistant",content:e.response.message}),n}};var ku=class{};function mM(){return`
You are an AI programming assistant.
`.trim()}function tl(){return`
When asked for your name, you must respond with "GitHub Copilot".
Follow the user's requirements carefully & to the letter.`.trim()}function rl(){return`You are an AI programming assistant.
When asked for your name, you must respond with \u201CGitHub Copilot\u201D
Your expertise is strictly limited to software development topics.
Follow Microsoft content policies.
Avoid content that violates copyrights.
For questions not related to software development, simply give a reminder that you are an AI programming assistant.
Keep your answers short and impersonal.`.trim()}function URe(){return`
First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.
Then output the code in a single code block.
Minimize any other prose.
`.trim()}function qRe(){return`
Keep your answers short and impersonal.
Use Markdown formatting in your answers.
Make sure to include the programming language name at the start of the Markdown code blocks.
Avoid wrapping the whole response in triple backticks.
The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.
The active document is the source code the user is looking at right now.
You can only give one reply for each conversation turn.
You should always generate short suggestions for the next user turns that are relevant to the conversation and not offensive.
`.trim()}function tg(t,e={includeCodeGenerationRules:!0}){return`
${e.roleplay??mM()}
${tl()}
${rl()}
${e.includeCodeGenerationRules?URe():""}
${qRe()}
${rg(t)}
`.trim()}var HRe=["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"];function rg(t){let e=Sn(t,be.LocaleOverride);if(!HRe.find(n=>e===n))return"";let r=e!=="auto"?e:t.get(ku).language;return r==="en"?"":`Respond in the following locale: ${r}`}var ET=class{constructor(e,r,n,i,o){this.language=n;this.myDocument=new hM(e,r,i,o),this.beginMarker=Gn.begin(n),this.endMarker=Gn.end(n),this.forceInsertionAtSelection=i.range.lines.length===1&&i.range.lines[0]===""}async processStream(e){let r=jRe(e),n;(p=>(p[p.Initial=0]="Initial",p[p.InitialAfterFilePath=1]="InitialAfterFilePath",p[p.InProgress=2]="InProgress"))(n||={});let i=0,o=this.myDocument.firstSentLineIndex,s=null,a=!1,l=!1;for await(let c of r){if(Fr.testLine(this.language,c)&&i===0){i=1;continue}if(c.startsWith(this.beginMarker)||c.startsWith(this.endMarker)){l=!0;continue}if(this.forceInsertionAtSelection){s||(s=new CT(this.myDocument.getLine(this.myDocument.firstRangeLine.lineIndex),c),o=this.myDocument.firstRangeLine.lineIndex);let u=s.reindent(c,this.myDocument.indentStyle);o===0?o=this.myDocument.replaceLine(o,u):o=this.myDocument.insertLineAfter(o-1,u),a=!0;continue}if(l){if(s){let u=s.reindent(c,this.myDocument.indentStyle),d=this.findAnchor(u,o);if(d)o=this.myDocument.replaceLines(o,d.lineIndex,u);else if(o>=this.myDocument.getLineCount())o=this.myDocument.appendLine(u);else{let p=this.myDocument.getLine(o);!p.isSent||u.adjustedContent===""||p.content!==""&&p.indentLevel<u.adjustedIndentLevel?o=this.myDocument.insertLineAfter(o-1,u):o=this.myDocument.replaceLine(o,u)}}else{let u=this.findInitialAnchor(c);s=new CT(this.myDocument.getLine(u.lineIndex),c);let d=s.reindent(c,this.myDocument.indentStyle);o=this.myDocument.replaceLine(u.lineIndex,d)}a=!0}}return a}findInitialAnchor(e){let r=e.trim();for(let n=this.myDocument.firstSentLineIndex;n<this.myDocument.getLineCount();n++){let i=this.myDocument.getLine(n);if(i.isSent&&i.trimmedContent===r)return new K_(n)}return this.myDocument.firstRangeLine}findAnchor(e,r){for(let n=r;n<this.myDocument.getLineCount();n++){let i=this.myDocument.getLine(n);if(i.isSent){if(i.trimmedContent.length>0&&i.indentLevel<e.adjustedIndentLevel)return null;if(i.content===e.adjustedContent)return new K_(n)}}return null}},CT=class{constructor(e,r){let n=e.indentLevel,[,i]=this.guessIndentLevel(r);this.indentDelta=i-n}reindent(e,r){if(e==="")return new ST("",0,"",0);let[n,i]=this.guessIndentLevel(e),o=i-this.indentDelta,a=this.getIndentString(r).repeat(o)+e.substring(n.length);return new ST(e,i,a,o)}guessIndentLevel(e){let r=zp.getLeadingWhitespace(e);return r===""||r===" "?["",0]:(this._replyIndentStyle||(this._replyIndentStyle=zp.guessIndentStyleFromLeadingWhitespace(r)),zp.guessIndentLevel(e,this._replyIndentStyle))}getIndentString(e){return e.kind==="tabs"?"	":" ".repeat(e.indentSize)}},hM=class{constructor(e,r,n,i){this.progress=e;this.lines=[];this.indentStyle=zp.getDocumentIndentStyle(n,i);let o=r.getText().split(/\r\n|\r|\n/g);for(let a=0;a<o.length;a++)this.lines[a]=new $p(o[a],this.indentStyle);let s=[n.above,n.range,n.below];for(let a of s)for(let l=0;l<a.lines.length;l++){let c=a.firstLineIndex+l;this.lines[c].markSent()}this.firstSentLineIndex=n.above.hasContent?n.above.firstLineIndex:n.range.firstLineIndex,this.firstRangeLine=new K_(n.range.firstLineIndex)}getLineCount(){return this.lines.length}getLine(e){return this.lines[e]}replaceLine(e,r){return this.lines[e]=new $p(r.adjustedContent,this.indentStyle),this.progress.report({edits:[new Xr(new De(e,0,e,1e3),r.adjustedContent)]}),e+1}replaceLines(e,r,n){return e===r?this.replaceLine(e,n):(this.lines.splice(e,r-e+1,new $p(n.adjustedContent,this.indentStyle)),this.progress.report({edits:[new Xr(new De(e,0,r,1e3),n.adjustedContent)]}),e+1)}appendLine(e){return this.lines.push(new $p(e.adjustedContent,this.indentStyle)),this.progress.report({edits:[new Xr(new De(this.lines.length-1,1e3,this.lines.length-1,1e3),`
`+e.adjustedContent)]}),this.lines.length}insertLineAfter(e,r){return this.lines.splice(e+1,0,new $p(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new Xr(new De(e,1e3,e,1e3),`
`+r.adjustedContent)]}),e+2}},ST=class{constructor(e,r,n,i){this.originalContent=e;this.originalIndentLevel=r;this.adjustedContent=n;this.adjustedIndentLevel=i}},K_=class{constructor(e){this.lineIndex=e}},$p=class{constructor(e,r){this.content=e;this._indentStyle=r;this._isSent=!1;this._trimmedContent=null;this._indentLevel=-1}get isSent(){return this._isSent}get trimmedContent(){return this._trimmedContent===null&&(this._trimmedContent=this.content.trim()),this._trimmedContent}get indentLevel(){if(this._indentLevel===-1){let[e,r]=zp.guessIndentLevel(this.content,this._indentStyle);this._indentLevel=r}return this._indentLevel}markSent(){this._isSent=!0}},zp=class{static getDocumentIndentStyle(e,r){if(r)return r.insertSpaces?{kind:"spaces",indentSize:r.tabSize}:{kind:"tabs"};let n=[e.range,e.above,e.below];for(let i of n)for(let o of i.lines){let s=this.guessIndentStyleFromLine(o);if(s)return s}return{kind:"tabs"}}static guessIndentStyleFromLine(e){let r=this.getLeadingWhitespace(e);return this.guessIndentStyleFromLeadingWhitespace(r)}static guessIndentStyleFromLeadingWhitespace(e){if(e===""||e===" ")return;if(/\t/.test(e))return{kind:"tabs"};let r=e.match(/( +)/);if(r){let n=r[1].length;return{kind:"spaces",indentSize:n===2?n:4}}}static guessIndentLevel(e,r){return W_(e,r.kind==="spaces",r.kind==="spaces"?r.indentSize:1)}static getLeadingWhitespace(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(0,r)}return e}};function OJ(t,e){let r=Fr.forLanguage(t);return new Bp(async n=>{let i="";function o(){i.length>0&&(n.emitOne(i),i="")}let s=new gM(e[Symbol.asyncIterator](),()=>o());try{for(;;){if(s.atEnd)return;if(await s.matches("```")){await s.readLine(),await s.matches(r)&&await s.readLine();break}await s.readLine()}for(;;){if(s.atEnd||await s.matches("```"))return;await s.readLine(a=>{i+=a})}}finally{o()}})}var gM=class{constructor(e,r){this._source=e;this._onBeforeBlock=r;this._buffer="";this._atEnd=!1}async extendBuffer(){if(this._atEnd)return;this._onBeforeBlock();let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async matches(e){for(;this._buffer.length<e.length&&e.startsWith(this._buffer)&&!this.atEnd;)await this.extendBuffer();return this._buffer.startsWith(e)}async readLine(e){for(;;){let r="",n=this._buffer.indexOf(`
`),i=n===-1?this._buffer:this._buffer.substring(0,n+1);if(this._buffer=n===-1?"":this._buffer.substring(n+1),e?.(i),r+=i,n===-1&&!this.atEnd)await this.extendBuffer();else return r}}get atEnd(){return this._atEnd}};function vM(t){return new Bp(async e=>{let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;for await(let i of t){if(n===0){if(/^```/.test(i)){n=1,e.emitOne({value:i,kind:2});continue}}else n===1&&/^```/.test(i)&&(n=2);e.emitOne({value:i,kind:n===1?1:2})}})}function jRe(t){let e=VRe(t);return vM(e).filter(n=>n.kind===1).map(n=>n.value)}function VRe(t){return new Bp(async e=>{let r="";for await(let n of t){r+=n;do{let i=r.indexOf(`
`);if(i===-1)break;let o=r.substring(0,i);r=r.substring(i+1),e.emitOne(o)}while(!0)}r.length>0&&e.emitOne(r)})}var ng=class t{constructor(){this._data=new Map;this._messages={0:t._shuffleArray(t._progressMessages[0]),1:t._shuffleArray(t._progressMessages[1]),2:t._shuffleArray(t._progressMessages[2]),3:t._shuffleArray(t._progressMessages[3])}}static{this._progressMessages={0:["Fetching response, it won't be long now.","Working hard to get your response...","Request is being processed, sit tight!","Response is being prepared, please be patient."],1:["Data is on its way, please wait a moment.","Request is being processed, sit tight!","Response is being prepared, please be patient."],2:["Data is on its way, please wait a moment.","Source code arriving...","Hold on tight, we're almost there!","Response is being prepared, please be patient.","Code chunks incoming...","Receiving code, please wait...","Code is being processed, please wait..."],3:["Almost done, just a few more seconds...","Processing response, please wait..."]}}next(e){let r=this._data.get(e);if(r){if(Date.now()-r.time<3579)return this._messages[e][r.index];r.index+=1,r.time=Date.now();let n=this._messages[e];return n[Math.min(n.length-1,r.index)]}else return this._data.set(e,{index:0,time:Date.now()}),this._messages[e][0]}static _shuffleArray(e){e=e.slice();for(let r=e.length-1;r>0;r--){let n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e}},TT=class{constructor(e){this.progress=e;this._progressMessages=new ng;this._lastText=void 0}_reportProgress(e){let r=this._progressMessages.next(e);this.progress.report({message:r})}update(e){return this._reportProgress(this._lastText?e.includes("```")?2:1:0),this._lastText=e,{shouldFinish:Au(e)}}async finish(){if(!this._lastText)throw new Error("No text");return this._reportProgress(3),await this.interpretReply(this._lastText)}},Nu=class t extends TT{constructor(r,n){super(n);this.replyInterpreter=r}static createFactory(r){return n=>new t(r,n)}interpretReply(r){return this.replyInterpreter(r)}},Wp=class t extends TT{constructor(r,n,i,o,s){super(s);this.accessor=r;this.promptCrafter=n;this.context=i;this.editStrategy=o}static createFactory(r,n,i,o=2){return s=>new t(r,n,i,o,s)}interpretReply(r){if(!this.promptCrafter.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let{contextInfo:n,expandedRange:i}=this.promptCrafter.selectionContextMetadata,o=el(n,r,this.context.language);if(!o)return{type:"conversational",content:r};let{code:s}=o,a=jp(this.accessor,n,s,this.editStrategy,this.context.fileIndentInfo,Hp.fromDocumentContext(this.context));return Gp(a,i)}},IT=class t{constructor(e){this._progress=e;this._responseStream=new Eu;this._lastLength=0;this._lastText=void 0;this._promise=void 0;this._progressMessages=new ng}static createFactory(){return e=>new t(e)}_reportProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(1);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._lastText=e,this._responseStream.emitOne(r),{shouldFinish:!1}}async finish(){return this._responseStream.resolve(),{type:"conversational",content:this._lastText??""}}async processStream(e,r){for await(let n of e.asyncIterable)r.report({content:n});return!1}},yM=class{constructor(e,r,n,i,o){this._accessor=e;this._promptCrafter=r;this._context=n;this._editStrategy=i;this._progress=o;this._responseStream=new Eu;this._lastLength=0;this._lastText=void 0;this._promise=void 0;this._progressMessages=new ng}_reportProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(2);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._lastText=e,this._responseStream.emitOne(r),{shouldFinish:Au(e)}}async finish(){if(this._responseStream.resolve(),await this._promise===!1){let r=new Wp(this._accessor,this._promptCrafter,this._context,this._editStrategy,this._progress);return r.update(this._lastText),await r.finish()}return{type:"inlineEdit",edits:[],newWholeRange:void 0}}},wT=class t extends yM{constructor(r,n,i,o,s,a){super(r,n,i,o,s);this.position=a}static createFactory(r,n,i,o,s=2){return(a,l)=>l?new t(r,n,i,s,a,o):new Wp(r,n,i,s,a)}async processStream(r,n){let i=this.position,o=0;for await(let s of OJ(this._context.language,r.asyncIterable)){n.report({edits:[new Xr(new De(i,i),s)]});let a=s.split(/\r\n|\r|\n/),l=a[a.length-1];i=new mn(i.line+a.length-1,(a.length===1?i.character:0)+l.length),o+=1}return o>0}};function GRe(t,e){let r=new _M(t),n=e.map(i=>{let o=i.range;return{startOffset:r.getOffset(o.start),endOffset:r.getOffset(o.end),text:i.newText}});n.sort((i,o)=>o.startOffset-i.startOffset||o.endOffset-i.endOffset);for(let i of n)t=t.substring(0,i.startOffset)+i.text+t.substring(i.endOffset);return t}var _M=class{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&this.lineStartOffsetByLineIdx.push(r+1);this.lineStartOffsetByLineIdx.push(e.length)}getOffset(e){return this.lineStartOffsetByLineIdx[e.line]+e.character}},Kp=class t{constructor(e,r,n,i,o){this._accessor=e;this._promptCrafter=r;this._context=n;this._editStrategy=i;this._progress=o;this._responseStream=new Eu;this._lastLength=0;this._lastText=void 0;this._streamingPromise=void 0;this._initialDocText=this._context.document.getText();this._progressMessages=new ng;this.documentInfo=Hp.fromDocumentContext(this._context)}static createFactory(e,r,n,i=2){return(o,s)=>s?new t(e,r,n,i,o):new Wp(e,r,n,i,o)}update(e){this._reportMessageProgress(this._lastText?2:0),this._lastText=e,this._streamingPromise||(this._streamingPromise=this._processStream(this._responseStream,{report:n=>{this._progress.report(n)}}));let r=e.slice(this._lastLength);return this._lastLength=e.length,this._responseStream.emitOne(r),{shouldFinish:Au(e)}}_reportMessageProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}async finish(){if(!this._lastText)throw new Error("No text");this._responseStream.resolve(),await this._streamingPromise;let e=await this._interpretReply(this._lastText);if(e.type==="inlineEdit"){let r=GRe(this._initialDocText,e.edits);return{type:"inlineEdit",edits:[{range:new De(new mn(0,0),new mn(Number.MAX_SAFE_INTEGER,0)),newText:r}],newWholeRange:e.newWholeRange}}return this._progress.report({edits:[{range:new De(new mn(0,0),new mn(Number.MAX_SAFE_INTEGER,0)),newText:this._initialDocText}]}),e}async _processStream(e,r){if(!this._promptCrafter.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");return await new ET(r,this._context.document,this._context.language,this._promptCrafter.selectionContextMetadata.contextInfo,this._context.fileIndentInfo).processStream(e.asyncIterable)}_interpretReply(e){if(!this._promptCrafter.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let{contextInfo:r,expandedRange:n}=this._promptCrafter.selectionContextMetadata,i=el(r,e,this._context.language);if(!i)return{type:"conversational",content:e};let{code:o}=i,s=jp(this._accessor,r,o,this._editStrategy,this._context.fileIndentInfo,this.documentInfo);return Gp(s,n)}},ui=class{constructor(e,r,n,i){this.accessor=e;this.options=r;this.location=n;this.context=i}get selectionContextMetadata(){return this._selectionContextMetadata}async buildPrompt(e,r,n,i,o){let s=e.getLatestTurn(),a=await IJ(this.accessor,s.request.message,r),l=new Set(a.parts.map(y=>y.kind));s.request.message=a.message;let c=e.turns.slice(0,-1),u=e.getLatestTurn(),d=new gT(this.accessor),p=u.request.message,f=await d.resolveContexts(e,p,this.context,o,i,(this.options.requiredContextKinds??[]).filter(y=>!l.has(y)),this.location===2?["project-labels"]:void 0,this.location===2?["current-selection"]:void 0),m=[],h=[];for(let{promptPart:y,usedContext:_,references:T}of[a.parts,f].flat()){typeof y=="string"&&(y=[y]);for(let I of y)m.push(new Jr({message:I,type:"user"}));_&&n.report({documents:_}),T&&h.push(...T)}zRe(h).forEach(y=>n.report({reference:y.anchor})),m.length>0&&(e=new gn(e.systemPrompt,[...c,m,u].flat()));for(let y of f)if(uM.is(y.metadata)){this._selectionContextMetadata=y.metadata;break}if(this.location===1){let y=this.options.rules??(this.context&&AT(this.context)),_=this.createInlineChatSystemMessage(y??"");e=new gn(_,e.turns)}else if(this.location===2){let y=this.createPanelChatSystemMessage(e.systemPrompt);e=new gn(y,e.turns)}if(this.options.turnFilter&&this.location===2){let y=this.options.turnFilter(e.turns);e=new gn(e.systemPrompt,y)}if(this.options.queryPrefix&&e.turns.length>0){let y=e.getLatestTurn();y.request.message=`${this.options.queryPrefix} ${y.request.message}`.trim()}let{messages:g,tokenCount:v}=await new eg(this.accessor,this.accessor.get(Wi).maxResponseTokens,this.location).toChatMessages(e);return{messages:g,tokenCount:v}}createPanelChatSystemMessage(e){this.options.systemPromptOptions?.roleplay&&(e=tg(this.accessor,this.options.systemPromptOptions));let r=this.options.rules??"";return`
${e}

${this.options.roleplay&&!this.options.systemPromptOptions?.roleplay?this.options.roleplay:""}

${r?"Additional Rules":""}
${r??""}

${this.options.systemPromptOptions?.examples?"Examples:":""}
${this.options.systemPromptOptions?.examples??""}
${rg(this.accessor)}
`.trim()}createInlineChatSystemMessage(e){return`
${this.options.systemPromptOptions?.roleplay??mM()}
${tl()}
${e}
${rl()}
${!this.options.systemPromptOptions?.roleplay&&this.options.roleplay?this.options.roleplay:""}
${rg(this.accessor)}
`.trim()}},tn=class{constructor(e){this.opts=e;this.id=e.id,this.locations=Array.isArray(e.location)?e.location:[e.location],this.description=e.description,this.intentDetectionInput={sampleQuestion:e.sampleQuestion,modelDescription:e.modelDescription??e.description},this.commandInfo=e.commandInfo}async invoke(e,r,n){let i=new ui(e,this.opts,r,n);return{intent:this,location:r,promptCrafter:i,followUps:this.opts.followUps,responseProcessor:this.opts.responseProcessor,createReplyInterpreter:n&&Kp.createFactory(e,i,n)}}},AT=t=>`
The user has a ${t.language.languageId} file opened in a code editor.
The user includes some code snippets from the file.
Each code block starts with \`\`\` and ${Fr.forLanguage(t.language)}.
Answer with a single ${t.language.languageId} code block.
If you modify existing code, you will use the ${Gn.begin(t.language)} and ${Gn.end(t.language)} markers.
${Ii(t.document.uri)?$Re():""}
`.trim();function $Re(){return`
- When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well
- When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.
- When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.
`.trim()}function zRe(t){let e=new bo,r=(i,o)=>{if(i.contains(o))return i;if(o.contains(i))return o;let[s,a]=i.start.line<o.start.line?[i,o]:[o,i];if(s.end.line>=a.start.line-1)return new De(s.start,a.end)};return t.forEach(i=>{let o=i.anchor;if(!DJ(o))e.set(o,i);else{let s=e.get(o.uri);if(!s)e.set(o.uri,[i]);else if(!(s instanceof hn)){let a=[],l=o.range;s.forEach(u=>{if(!DJ(u.anchor))return;let d=r(l,u.anchor.range);d?l=d:a.push(u.anchor)});let c={uri:o.uri,range:l};e.set(o.uri,[...a,c].sort((u,d)=>u.range.start.line-d.range.start.line||u.range.end.line-d.range.end.line).map(u=>new hn(u)))}}}),Array.from(e.keys()).sort((i,o)=>i.fsPath.localeCompare(o.fsPath)).map(i=>{let o=e.get(i);return o||[]}).flat()}function DJ(t){return"uri"in t&&"range"in t}var Us=class t{constructor(){this.id=t.ID;this.locations=[1,2];this.description="Intent of this command is unclear or is not related to information technologies";this.commandInfo={hiddenFromUser:!0};this.intentDetectionInput={sampleQuestion:"Add a dog to this comment."}}static{this.ID="unknown"}static{this.Instance=new t}async invoke(e,r,n){let i=new ui(e,{requiredContextKinds:r===1?["inline-chat-selection"]:["current-selection"]},r,n);return{intent:this,location:r,promptCrafter:i,createReplyInterpreter:n&&Wp.createFactory(e,i,n)}}};var cs=new class{constructor(){this.commands=new Set}registerCommand(t){this.commands.add(t)}getCommand(t,e){return this.getCommands(e).find(r=>r.commandId===t)}getCommands(t){return Array.from(this.commands.values()).filter(e=>e.locations.includes(t))}};var ls="fix",RT=class{constructor(){this.id=ls;this.locations=[1,2];this.description="Propose a fix for the problems in the selected code";this.intentDetectionInput={sampleQuestion:"There is a problem in this code. Rewrite the code to show it with the bug fixed."};this.commandInfo=void 0}async invoke(e,r,n){if(!n)throw new Error("Open a file to fix an issue");return Ii(n.document.uri)&&n.document.languageId==="python"?new bM(this,r,e,n):new PT(this,r,e,n)}},PT=class{constructor(e,r,n,i){this.intent=e;this.location=r;this.accessor=n;this.documentContext=i;let o={queryPrefix:"Please fix my code.",rules:this.getRules(),requiredContextKinds:this.getRequiredContextKinds()};this.promptCrafter=new ui(n,o,r,i),this.createReplyInterpreter=s=>new class extends Nu{constructor(a){super(a,{report:l=>{s.report({...l,editsShouldBeInstant:!0})}})}_reportProgress(){}}(this.interpretCodeReply.bind(this))}getRequiredContextKinds(){return this.location===1?["fix-selection","diagnostics"]:["current-selection","diagnostics","project-labels"]}getRules(){return this.location===1?AT(this.documentContext)+`
- When adding missing imports, insert them at the top of the code block. Do not replace existing code.`:`You specialize in being a highly skilled code generator. Your task is to help the Developer fix an issue.
If context is provided, try to match the style of the provided code as best as possible
Generated code is readable and properly indented
Markdown blocks are used to denote code
Preserve user's code comment blocks, do not exclude them when refactoring code.
Pay especially close attention to the selection or exception context.
Given a description of what to do you can refactor, fix or enhance the existing code.`}async interpretCodeReply(e){let r=this.promptCrafter.selectionContextMetadata;if(!r)throw new Error("code reply NEEDS a selection context");let n=el(this.promptCrafter.selectionContextMetadata.contextInfo,e,this.documentContext.language);if(!n||n.language==="bash"||n.language==="ps1")return{type:"conversational",content:e};let i=this.generateEdits(r,n.code);return Gp(i,r.expandedRange)}generateEdits(e,r){return jp(this.accessor,e.contextInfo,r,2,this.documentContext.fileIndentInfo,Hp.fromDocumentContext(this.documentContext))}},bM=class extends PT{getRules(){return this.location===1?AT(this.documentContext)+`
- When fixing "ModuleNotFoundError" or "Import could not be resolved" errors, always use magic command "%pip install" to add the missing packages. The imports MUST be inserted at the top of the code block and it should not replace existing code.
- You should not import the same module twice.`:super.getRules()}generateEdits(e,r){let n=r.split(`
`),i=[],o=[];for(let l of n)l.match(/^[%\!]pip/)?i.push(l):o.push(l);if(!i.length)return super.generateEdits(e,r);let s=[],a=Vp(i,{whichLine:"topMost",lines:e.contextInfo.range.lines},this.documentContext.fileIndentInfo).join(`
`)+`
`;return s.push(new Xr(new De(e.expandedRange.start,e.expandedRange.start),a)),o.length&&s.push(...super.generateEdits(e,o.join(`
`))),s}};var BJ=Te(SM());var kT=class{constructor(e,r,n,i,o,s,a,l){this.accessor=e;this.id=r;this.description=n;this.roleplay=i;this.rules=o;this.sampleQuestion=s;this.contextKinds=a;this.options=l;this.pLimit=(0,BJ.default)(1);this.logger=new Re(e,"GenerateFileContentsPrompt")}async requiredContextKinds(){return this.contextKinds}turnFilter(e){return e.filter(r=>r.intentInvocation?.intent.id===Ou||r.request.type!=="user"&&r.request.type!=="follow-up")}buildPrompt(){return[this.roleplay,this.rules,this.sampleQuestion].join(`
`)}async run(e,r,n){return this.pLimit(()=>this.doRun(e,r,n))}async doRun(e,r,n){let i=this.buildPrompt();for(let[s,a]of Object.entries(r))i=i.replace(`{${s}}`,a);this.logger.info("prompt: "+i);let o=await this.accessor.get(wt).fetchOne([...e,{role:"user",content:i}],async s=>{},n,2,0,{temperature:this.options.temperature,top_p:this.options.topP,stop:["stopIt"]},{messageSource:"createWorkspaceIntent"});return o.type!=="success"?(this.errorAndSendTelemetry("fetch failure type: "+o.type,", reason: "+o.reason),""):(this.log("fetch response: "+o.value),o.value)}errorAndSendTelemetry(...e){this.logger.errorAndSendTelemetry(`[createWorkspaceIntent] ${this.id} `,...e)}log(...e){this.logger.info(`[createWorkspaceIntent] ${this.id} `,...e)}};function YRe(t,e,r={}){let n=`Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

	## Valid question

	User: ${t}
	Assistant: ${e}`;for(let[i,o]of Object.entries(r))n=n.replace(`{${i}}`,o);return n}var NT=class extends kT{constructor(e,r){let n="I want to set up the following project: {PROJECT_DESCRIPTION}.\n		This is the project tree structure:\n		```markdown\n		{PROJECT_TREE_STRUCTURE}\n		```\n		",i=`
		Think step by step and respond with a text description that lists and summarizes each file inside this project.
		List the classes, types, interfaces, functions, and constants it exports and imports if it is a code file.
		You should be as specific as possible when listing the public properties and methods for each exported class.
		Do not use code blocks or backticks. Do not include any text before or after the file contents.
		Do not include product names such as Visual Studio in the comments.`.trim(),o="The project has the following files:\n		`src/app.ts`: This file is the entry point of the application. It creates an instance of the express app and sets up middleware and routes.\n		`src/controllers/index.ts`: This file exports a class `IndexController` which has a method `getIndex` that handles the root route of the application.\n		`src/routes/index.ts`: This file exports a function `setRoutes` which sets up the routes for the application. It uses the `IndexController` to handle the root route.\n		`src/types/index.ts`: This file exports interfaces `Request` and `Response` which extend the interfaces from the `express` library.\n		`tsconfig.json`: This file is the configuration file for TypeScript. It specifies the compiler options and the files to include in the compilation.\n		`package.json`: This file is the configuration file for npm. It lists the dependencies and scripts for the project.\n		`README.md`: This file contains the documentation for the project.",s=YRe(n+i,o,{PROJECT_DESCRIPTION:"Create a TypeScript Express app",PROJECT_TREE_STRUCTURE:`
		my-express-app
		\u251C\u2500\u2500 src
		\u2502   \u251C\u2500\u2500 app.ts
		\u2502   \u251C\u2500\u2500 controllers
		\u2502   \u2502   \u2514\u2500\u2500 index.ts
		\u2502   \u251C\u2500\u2500 routes
		\u2502   \u2502   \u2514\u2500\u2500 index.ts
		\u2502   \u2514\u2500\u2500 types
		\u2502       \u2514\u2500\u2500 index.ts
		\u251C\u2500\u2500 package.json
		\u251C\u2500\u2500 tsconfig.json
		\u2514\u2500\u2500 README.md`});super(e,"generateProjectPlan","Generate a plan for the contents of a project",n,i,s,[],r)}async run(e,r,n){return super.run(e,r,n)}},OT=class extends kT{constructor(e,r){super(e,"generateFile","Generate the contents of a file","I want to set up the following project: {PROJECT_DESCRIPTION}.\n			This is the project tree structure:\n			```markdown\n			{PROJECT_TREE_STRUCTURE}\n			```\n			The project should adhere to the following specification:\n			{PROJECT_SPECIFICATION}",`
Think step by step and give me just the file {FILEPATH} within this project. The code should not contain bugs.
If the file is supposed to be empty, please respond with a code comment saying that this file is intentionally left blank.
Do not include comments in json files.
Do not use code blocks or backticks.
Do not include product names such as Visual Studio in the comments.`.trim(),"",[],r)}async run(e,r,n){let i=await super.run(e,r,n),o=QRe(r.FILEPATH,i);return i.length!==0&&o.length===0&&(this.errorAndSendTelemetry("failed to parse content"),this.log(`failed to parse ${r.FILEPATH} content 
 ${i}`)),o.startsWith("Sorry, I cannot generate file contents")?(this.errorAndSendTelemetry("AI failed to generate file contents"),this.log(`failed to generate ${r.FILEPATH} content 
 ${i}`),""):o}};function QRe(t,e){e=e.trimEnd().replace("[RESPONSE END]","");function r(n,i){try{let o=i.exec(n.trim());if(o&&o.length>2)return o[2]}catch(o){console.error(o)}return n}if(t.endsWith(".md")){let n=r(e,/^```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/),[i,...o]=n.split("#");return i.length?["",...o].join("#"):n}else return r(e,/```([^\n]+)?\s*\n([\s\S]+?)\s*```/g)}var nl=class{constructor(e){this.accessor=e;this.promises=[];this.responseScopedData=new Map;this.generatePlanPrompt=new NT(this.accessor,{maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:"none",rejectionMessage:""});this.generateFilePrompt=new OT(this.accessor,{maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:"none",rejectionMessage:""})}set(e,r,n,i,o,s){let a=this.generatePlanPrompt.run(s,{PROJECT_DESCRIPTION:n,PROJECT_TREE_STRUCTURE:i},new Fp().token);this.promises.push(a),this._getResponseScopedData(e).set(r,{userPrompt:n,projectStructure:i,projectSpecification:a,chatMessages:s,fileTreeData:this._prefetch(n,i,a,o.treeData,s)})}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTreeData;for(let l of i)a=a?.children?.find(c=>c.label===l);if(a&&!a?.content&&!a?.children){let l=a;l.content=this._getFileContent(s.userPrompt,s.projectStructure,s.projectSpecification,r,s.chatMessages).catch(()=>l.content=void 0)}return a}_prefetch(e,r,n,i,o){let s=Date.now();return i.children?{...i,children:i.children.map(a=>this._prefetch(e,r,n,a,o)),ctime:s}:{...i,content:void 0,ctime:s}}async _getFileContent(e,r,n,i,o,s=new Fp().token){return this.generateFilePrompt.run(o,{PROJECT_DESCRIPTION:e,PROJECT_TREE_STRUCTURE:r,PROJECT_SPECIFICATION:await n,FILEPATH:i},s).then(a=>Buffer.from(a))}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}},XRe=`
Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

## Valid setup question

User: Create a TypeScript express app
Assistant:

Sure, here's a proposed directory structure for a TypeScript Express app:

\`\`\`filetree
my-express-app
\u251C\u2500\u2500 src
\u2502   \u251C\u2500\u2500 app.ts
\u2502   \u251C\u2500\u2500 controllers
\u2502   \u2502   \u2514\u2500\u2500 index.ts
\u2502   \u251C\u2500\u2500 routes
\u2502   \u2502   \u2514\u2500\u2500 index.ts
\u2502   \u2514\u2500\u2500 types
\u2502       \u2514\u2500\u2500 index.ts
\u251C\u2500\u2500 package.json
\u251C\u2500\u2500 tsconfig.json
\u2514\u2500\u2500 README.md
\`\`\`

## Invalid setup question

User: Create a horse project
Assistant: Sorry, I don't know how to set up a horse project.`,Ou="new";function JRe(){let t=new tn({location:2,id:Ou,description:"Scaffold code for a new workspace",modelDescription:"Scaffolds a new project from scratch based on requirements from the user.",sampleQuestion:"Create a RESTful API server using typescript",commandInfo:{followupPlaceholder:"Provide additional instructions to refine the proposed workspace",shouldRepopulate:!0,allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0},systemPromptOptions:{examples:XRe,roleplay:"You are a VS Code assistant. Your job is to suggest a filetree directory structure for a project that a user wants to create. If a step does not relate to filetree directory structures, do not respond. Please do not guess a response and instead just respond with a polite apology if you are unsure. Please end your response with [RESPONSE END] and do not include any other text."},rules:`
You should generate a markdown file tree structure for the same project and include it in your response.
You should only list common files for the user's desired project type.
You should always include a README.md file which describes the project.
Do not include folders and files generated after compiling, building or running the project such as node_modules, dist, build, out
Do not include image files such as png, jpg, ico, etc
Do not include any descriptions or explanations in your response.`.trim(),turnFilter:e=>e.filter(r=>r.intentInvocation?.intent.id===Ou||r.request.type!=="user"&&r.request.type!=="follow-up"),responseProcessor:ZRe,followUps:ePe,requiredContextKinds:[]});Rr.registerIntent(t)}Ba.registerContribution(JRe);function ZRe(t,e,r,n){let i=!1,o="",s="",a,l=/```filetree\n/,c=/```[^\n]*/,u=n.filter(p=>p.role!=="system"),d=new xo(p=>{let f=e.requestId??"";if(e.response||(e.response={message:o,type:"model"}),p=p.replace("[RESPONSE END]",""),e.response.message+=p,o+=p,!p)return;let m=e.request.message,h=p.match(/```filetree\n([\s\S]+?)\n```/);if(h){let[g,v]=p.split(h[0]);s=h[1];let y=TM(s),_={treeData:IM(f,y)};r.report({content:g}),r.report({placeholder:"Generating workspace preview...",resolvedContent:Promise.resolve(_)}),r.report({content:v}),t.get(nl).set(f,_.treeData.label,m,s,_,u)}else if(p.trim().match(c)&&i&&a){s=s.trim(),i=!1;let g=TM(s),v={treeData:IM(f,g)};v.treeData.children?.length===0?a.complete({content:"Sorry, something went wrong. Please try asking your question again."}):(a.complete(v),t.get(nl).set(f,v.treeData.label,m,s,v,u))}else p.match(l)&&!i&&!a?(i=!0,a=new zc,r.report({placeholder:"Generating workspace preview...",resolvedContent:a.p})):i?s+=p:r.report({content:p})});return{get appliedText(){return Promise.resolve(o)},apply:p=>d.apply(p)}}async function ePe(t,e){let r=new wn(t,"createWorkspace");if(!e.response?.message)return[];let n=/```[^\n]*\n([\s\S]+?)\n```/,i=e.response.message.match(n),o=i&&i[1].trim();if(!o)return r.info(`[workspaceIntent] Response validation failed for response: 
`+JSON.stringify(e.response.message)),[];let s=TM(o),a=[];if(HJ(s,"",a),a.length===0)return r.info(`[workspaceIntent] Failed to fetch project items for 
`+o),[];let l=[],c={commandId:"github.copilot.createProject",args:[e.request.message,a,o.replace(/\n/g,""),e.sessionId,e.requestId],title:"Create Workspace"};return l.push(c),l}function tPe(t){let e=t.indexOf("\u2500\u2500 "),r=e-t.indexOf(`
`,e)-1;return r===-1?0:r}var rPe=["node_modules","out","bin","debug","obj","lib",".dll",".pdb",".lib",".jpg",".png",".ico",".gif",".svg",".jpeg",".tiff",".bmp",".webp",".jpeg",".gitignore","LICENSE.txt","yarn.lock","package-lock.json"];function UJ(t){let e=[];for(let r of t.children)rPe.some(n=>r.name.endsWith(n))||e.push(r);t.children=e;for(let r of t.children)UJ(r);return t}function TM(t){let e=t.trim().split(`
`),r={name:"",depth:0,parent:void 0,children:[]},n=r;for(let i of e){let o=tPe(i),s=i.lastIndexOf("\u2500\u2500 "),l={name:s>=0?i.substring(s+3):i,depth:o,parent:void 0,children:[]};if(o===0){r.name=i;continue}else if(n.depth<o)l.parent=n,n.children.push(l);else if(n.depth===o)l.parent=n.parent,n.parent?.children.push(l);else{for(;n.depth!==o&&n.parent;)n=n.parent;l.parent=n.parent,n.parent?.children.push(l)}n=l}return UJ(r)}function qJ(t){return/\.[^/.]+$/.test(t)}function HJ(t,e="",r){let n=e===""?t.name:`${e}/${t.name}`;r.push({type:t.children.length||!qJ(n)?"folder":"file",path:n});for(let i of t.children)HJ(i,n,r)}function IM(t,e,r=""){let n=r===""?e.name:`${r}/${e.name}`,i=[],o=e.children.sort((s,a)=>s.children.length&&a.children.length?s.name.localeCompare(a.name):s.children.length?-1:1);for(let s of o)i.push(IM(t,s,n));return{label:e.name,uri:wM(t,n),children:i.length||!qJ(n)?i:void 0}}async function jJ(t,e,r,n,i){let o=n.code?typeof n.code=="string"||typeof n.code=="number"?n.code:n.code.value:"",s=`${n.message}. ${o}`,a={messageSource:"slash.createWorkspace"},l=n.range,c={document:r,fileIndentInfo:void 0,language:Jc(t,r),wholeRange:l,selection:new $h(l.start,l.end)},u=await ig(t,`/${ls} ${s}`,c,void 0,ss(),i),d=await og(u,void 0,ss(),i),p=t.get(wt),f=async h=>Au(h)?h.length:void 0,m=await p.fetchOne(d,f,i,2,0,{temperature:e.temperature,top_p:e.topP},a);if(m.type==="success"&&m.value.length>0){let h=u.intentInvocation.createReplyInterpreter({report(){}},!1);h.update(m.value);let g=await h.finish();return g.type==="inlineEdit"?g.edits:void 0}}function wM(t,e){return D_.from({scheme:"vscode-copilot-workspace",authority:t??"",path:`/${e}`})}var nPe=["code","doc","edit",sg,Ou,"search","workspace","tests","fix","explain","extApi"],Rr=new class{constructor(){this.intents=new Set}registerIntent(t){t.locations.every(e=>this.getIntent(t.id,e))||(this.intents.add(t),(!t.commandInfo||!t.commandInfo.hiddenFromUser)&&cs.registerCommand({commandId:t.id,intent:t,details:t.description,locations:t.locations}))}getIntents(t){let e=r=>{let n=nPe.indexOf(r);return n===-1?Number.MAX_SAFE_INTEGER:n};return Array.from(this.intents.values()).filter(r=>r.locations.includes(t)).sort((r,n)=>e(r.id)-e(n.id))}getIntent(t,e){return this.getIntents(e).find(r=>r.id===t)}};var ag=class t{constructor(e,r){this.accessor=e;this.location=r;this.logger=new wn(e,"intent detection"),this.ghTelemetry=e.get(ut),this.options=e.get(Wi)}async detectIntent(e,r,n){let i=this.createIntentDetectionPrompt(e),o=[{role:"system",content:i}];this.logger.logPrompt(o);let s=await this.accessor.get(wt).fetchMany(o,void 0,r,this.location,1,{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"],n:1},{messageSource:"chat.intentprompt"});return this.handleResult(s,n,e)}handleResult(e,r,n){if(this.logger.logResponse(e),e.type!=="success"){this.sendPromptIntentErrorTelemetry(r,e);return}let i=e.value.map(l=>l.trimStart().split(`
`)[0].replace(/function id:|response:/i,"").trim()),o=i.map(l=>Rr.getIntent(l,this.location)).filter(l=>l!==void 0&&l.id!==Us.ID),s=t.pickMostFrequent(o);this.logger.info(`picked intent "${s?.id}" from ${JSON.stringify(e.value,null,"	")}`);let a=r.extendedBy({messageText:n,promptContext:i.join(),intent:s?.id||"unknown"});return this.ghTelemetry.sendRestrictedTelemetry("conversation.promptIntent",a.raw),s}sendPromptIntentErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.ghTelemetry.sendRestrictedTelemetry("conversation.promptIntentError",n.raw)}static pickMostFrequent(e){if(e.length===0)return;let r=new Map;for(let i of e){let o=r.get(i.id)??[0,i];o[0]+=1,r.set(i.id,o)}let[,n]=[...r.values()].reduce((i,o)=>i[0]>o[0]?i:o);return n}createIntentDetectionPrompt(e){let r=Rr.getIntents(this.location);return`
${tl()}
${rl()}

A software developer is using an AI chatbot in a code editor.
The developer added the following request to the chat and your goal is to select a function to perform the request.

Request: ${e}

Available functions:
${r.map(n=>`Function Id: ${n.id}
Function Description: ${n.intentDetectionInput.modelDescription||n.description}
`).join(`
`)}

Here are some examples to make the instructions clearer:
${r.map(n=>`Request: ${n.intentDetectionInput.sampleQuestion}
Response: ${n.id}
`).join(`
`)}
Request: ${e}
Response:
`.trim()}};async function ig(t,e,r,n,i,o){let s=new Eo(t),a,l="",c=s.parse(e,1);c.command?(a=c.command.intent,l=c.restOfQuery):(Ze(t,be.ConversationIntentDetection,{default:!0})&&(a=await new ag(t,1).detectIntent(e,o,i)),Ii(r.document.uri)&&(a=Us.Instance),l=e);let u;a&&n&&(u=n.slashCommands.find(p=>p.command===a.id)),a??=Us.Instance;let d=await a?.invoke(t,1,r,u);return{queryWithoutCommand:l,intentInvocation:d,slashCommand:u}}async function og(t,e,r,n){let i=new gn("");if(e&&e.length>0){let a=`The current code is a result of a previous interaction with you. Here are my previous messages: 
- ${e.join(`
- `)}`,l=new Jr({message:a,type:"user"});i.addTurn(l)}let o=new Jr({message:t.queryWithoutCommand,type:"user"});o.intentInvocation=t.intentInvocation,i.addTurn(o);let{messages:s}=await t.intentInvocation.promptCrafter.buildPrompt(i,{},{report(){}},r,n);return s}var AM=class{constructor(e,r,n){this.turn=r;this.progress=n;this.stagedTextToApply="";this.reporting=!0;this._appliedText="";this._resolvedContentDeferredPromise=new zc;this._incodeblock=!1;this.conversationCallback=new xo(i=>this.applyDelta(i))}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){this.conversationCallback.apply(e)}applyDeltaToTurn(e){this.turn.response||(this.turn.response={message:e,type:"model"}),this._appliedText+=e,this.turn.response.message+=e}applyDeltaToProgress(e){this.progress.report({content:e})}applyDelta(e){if(!this.reporting){this.applyDeltaToTurn(e);return}if(e=this.stagedTextToApply+e,this._incodeblock){let n=e.indexOf("```");if(n===-1){this.stagedTextToApply=e,this.applyDeltaToProgress(""),this.applyDeltaToTurn("");return}else{this._incodeblock=!1,e=e.substring(0,n)+"```";try{this.applyDeltaToTurn(e)}catch{}finally{this.reporting=!1,this.stagedTextToApply="",this._resolvedContentDeferredPromise.complete({content:""})}return}}let r=e.indexOf("```");if(r!==-1)if(this._incodeblock=!0,e.indexOf("```",r+3)!==-1){this.applyDeltaToTurn(e),this.reporting=!1,this.stagedTextToApply="";return}else{let i=e.substring(0,r);this.applyDeltaToProgress(i),this.applyDeltaToTurn(e),this.stagedTextToApply="",this.progress.report({placeholder:"Thinking ...",resolvedContent:this._resolvedContentDeferredPromise.p});return}this.applyDeltaToProgress(e),this.applyDeltaToTurn(e),this.stagedTextToApply=""}},iPe=`
DO NOT include Introduction or Conclusion section in the outline!
Focus only on sections that will need code!

Generate the outline as two parts:
- First part is markdown bullet list of section titles
- Second part is the JSON data that will validate against this JSON schema, wrap the response in code block. We assume that a code block begins with \`\`\`[optionally the language] and ends with \`\`\`

The JSON schema is:
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
	"description": {
	  "type": "string"
	},
	"sections": {
	  "type": "array",
	  "items": {
		"type": "object",
		"properties": {
		  "title": {
			"type": "string"
		  },
		  "content": {
			"type": "string"
		  }
		},
		"required": ["title", "content"]
	  }
	}
  },
  "required": ["sections"]
}`,oPe=`
Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

## Valid notebook creation question

user: Creating Random Arrays with Numpy

assistant: Here's an outline for a Jupyter notebook that creates Random Arrays with Numpy:

* **Import Required Libraries**
* **Create Random Arrays**
* **Seed the Random Number Generator**
* **Generate Random Integers**

\`\`\`json
{
  "description": "A Jupyter notebook that creates Random Arrays with Numpy.",
  "sections": [
    {
      "title": "Import Required Libraries",
      "content": "Import the necessary libraries, including NumPy."
    },
    {
      "title": "Create Random Arrays",
      "content": "Use NumPy to create random arrays of various shapes and sizes, including 1D, 2D, and 3D arrays."
    },
    {
      "title": "Seed the Random Number Generator",
      "content": "Use the seed() function to seed the random number generator for reproducibility."
    },
	{
	  "title": "Generate Random Integers",
	  "content": "Use the randint() function to generate random integers within a specified range."
	}
  ]
}
\`\`\`
`,sg="newNotebook";function sPe(){let t=new tn({location:2,id:sg,description:"Create a new Jupyter Notebook",modelDescription:"Creates a new Jupyter Notebook for tasks such as data analysis, scientific computing, and machine learning.",sampleQuestion:"How do I create a notebook to load data from a csv file?",commandInfo:{allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0},systemPromptOptions:{examples:oPe},roleplay:"You are an AI that creates a detailed content outline for a Jupyter notebook on a given topic.",rules:iPe,turnFilter:e=>e.filter(r=>r.intentInvocation?.intent.id===sg||r.request.type!=="user"&&r.request.type!=="follow-up"),responseProcessor:(e,r,n)=>new AM(e,r,n),followUps:async(e,r)=>{let n=(r.response?.message??"").replace(/\n/g,""),o=/```(?:json)?(.+)/g.exec(n);if(o)try{let s=o[1],a=s.indexOf("```"),l=a===-1?s:s.substring(0,a);return[{commandId:"github.copilot.createNotebook",args:[JSON.parse(l)],title:"Create Notebook"}]}catch{}return[]},requiredContextKinds:["project-labels","current-selection"]});Rr.registerIntent(t)}Ba.registerContribution(sPe);async function VJ(t,e,r,n,i,o){let s={messageSource:"slash.createNotebook"},a=`
	You are an AI that writes Python code for a single section of a Jupyter notebook.
	Overall topic of the notebook: ${r}
	Title of the notebook section: ${n.title}
	Description of the notebok section: ${n.content}
	Given this information, write all the code for this section and this section only.
	Your output should be valid Python code with inline comments.
	You should return the code directly without any explantion.
	You should not print message to explain the code or purpose of the code.

	Code in the notebook so far:

	${i}

	Please make sure the new code you generate works fine with the code above.
	You should return the code directly, without wrapping it inside \`\`\`.

	Please make sure that the new code is syntactically valid Python code. It can be validated by running it in a Python interpreter.
	For example, it should pass the validation through builtin module codeop \`codeop.compile_command(statement)\`.
	`,c=await t.get(wt).fetchOne([{content:a,role:"user"}],void 0,o,2,0,{temperature:e.temperature,top_p:e.topP},s);if(c.type==="success")return c.value}async function GJ(t,e,r,n,i,o,s){let a={messageSource:"slash.createNotebook"},l=`
You are an AI that improves Python code with respect to readability and performance for a single section of a Jupyter notebook.
You MUST return Python code as your answer.
DO NOT explain in inline comments for your the improvements
Overall topic of the notebook: ${r}
Title of the notebook section: ${n.title}
Description of the notebok section: ${n.content}

Code in the notebook so far:

${i}

Given this information, improve the following code.

Make sure the new code you generate works fine with the code above.
Make sure if a module is already imported in the code above, it can be used in the new code directly without importing it again. For the same reason, if a variable is defined above, it can be used in new code as well.
Make sure to return the code only - don't give an explanation of the improvements.

${o}
	`,u=await t.get(wt).fetchOne([{content:l,role:"user"}],void 0,s,2,0,{temperature:e.temperature,top_p:e.topP},a);if(u.type==="success")return u.value}async function $J(t,e,r,n,i){let o=n.code?typeof n.code=="string"||typeof n.code=="number"?n.code:n.code.value:"",s=`${n.message}. ${o}`,a={messageSource:"slash.createNotebook"},l=n.range,c={document:r,fileIndentInfo:void 0,language:Jc(t,r),wholeRange:l,selection:new $h(l.start,l.end)},u=await ig(t,`/${ls} ${s}`,c,void 0,ss(),i),d=await og(u,void 0,ss(),i),p=t.get(wt),f=async h=>Au(h)?h.length:void 0,m=await p.fetchOne(d,f,i,2,0,{temperature:e.temperature,top_p:e.topP},a);if(m.type==="success"&&m.value.length>0){let h=u.intentInvocation.createReplyInterpreter({report(){}},!1);h.update(m.value);let g=await h.finish();return g.type==="inlineEdit"?g.edits:void 0}}var Va="explain",Y_="Write an explanation for the active selection as paragraphs of text.",aPe={terminalSelection:{location:2,id:"explainTerminal",description:"Explain the terminal selection if it exists, otherwise explain what is happening in the terminal buffer",sampleQuestion:"Can you explain what is happening in the terminal selection",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. You are an expert at explaining code to anyone. Your task is to help the Developer understand what is happening in the terminal."},rules:`
Provide well thought out examples
Utilize provided context in examples
Match the style of provided context when using examples
Say "I'm not quite sure how to explain that." when you aren't confident in your explanation`.trim(),requiredContextKinds:["terminal-selection","terminal-buffer"],commandInfo:{executeImmediately:!0}},terminalLastCommand:{location:2,id:"explainTerminalLastCommand",description:"Explain the command that was last run in the terminal",sampleQuestion:"Can you explain what is happening in the last terminal command",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. You are an expert at explaining code to anyone. Your task is to help the Developer understand what is happening in the terminal.",examples:'\nBelow you will find a set of examples of how to suggest to fix the command. Please follow these examples as closely as possible.\n```sh\necho "hello world"\n```'},rules:`
Provide well thought out examples
Utilize provided context in examples
Match the style of provided context when using examples
Say "I'm not quite sure how to explain that." when you aren't confident in your explanation
If the command can be fixed, make a suggestion wrapped in a markdown codefenced block`.trim(),requiredContextKinds:["terminal-last-command"]}},zJ={systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a world-class coding tutor. Your code explanations perfectly balance high-level concepts and granular details. Your approach ensures that students not only understand how to write code, but also grasp the underlying principles that guide effective programming."},rules:`
Think step by step:
1. Examine the provided code selection and any optional context like user question, related errors, project details, class definitions, etc.
2. If you are unsure about the code, concepts, or the user's question, ask clarifying questions.
3. If the user provided a specific question or error, answer it based on the selected code and additional provided context. Otherwise focus on explaining the selected code.
4. Provide suggestions if you see opportunities to improve code readability, performance, etc.

Rules:
- Focus on being clear, helpful, and thorough without assuming extensive prior knowledge.
- Use developer-friendly terms and analogies in your explanations.
- Identify 'gotchas' or less obvious parts of the code that might trip up someone new.
- Provide clear and relevant examples aligned with any provided context.
`.trim(),requiredContextKinds:["current-selection","current-selection-function-implementations","current-selection-class-declarations","current-selection-type-declarations","project-labels"],turnFilter:t=>t.map(e=>(e.request.message.startsWith(Y_)&&(e.request.message=Y_),e))},RM=class{constructor(e){this.accessor=e;this.defaultPanelPromptCrafter=new ui(e,zJ,2,void 0)}async buildPrompt(e,r,n,i,o){let s;for(let l of Object.keys(r))if(s=aPe[l],s)break;return s?new ui(this.accessor,s,2,void 0).buildPrompt(e,r,n,i,o):this.defaultPanelPromptCrafter.buildPrompt(e,r,n,i,o)}},DT=class{constructor(){this.id=Va;this.locations=[2,1];this.description="Explain how the selected code works";this.intentDetectionInput={sampleQuestion:"Write an explanation for the code above as paragraphs of text."}}async invoke(e,r,n,i){if(r===1){let o=new class extends ui{async buildPrompt(a,l,c,u,d){let p=a.getLatestTurn();return p?.request.message===""&&(p.request={message:Y_,type:"user"}),super.buildPrompt(a,l,c,u,d)}}(e,zJ,1,n),s=n&&IT.createFactory();return{intent:this,location:r,promptCrafter:o,createReplyInterpreter:s}}return{intent:this,location:r,promptCrafter:new RM(e)}}async asSlashCommand(e,r){return{command:this.id,detail:this.description,refer:Ze(e,be.ExplainIntentRefer,{default:!0})}}};var cg=class t extends tn{static{this.ID="api"}constructor(){super({location:2,id:t.ID,description:"Ask about VS Code extension development",systemPromptOptions:{roleplay:"You are in expert in VS Code extension development. You know how to use the VS Code API to extend the editor. Your task is to help the Developer with their VS Code extension development."},sampleQuestion:"How do I add text to the status bar?",rules:`
Assume the question is about VS Code extension development
Politely decline to answer if the question is not about VS Code extension development
Please do not guess a response and instead just respond with a polite apology if you are unsure
If you believe the api related context given to you is incorrect or not relevant you may ignore it
The user cannot see the api context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply
Do not talk about initial setup of creating an extension unless the user asks about it
Only provide information to related VS Code extension development`.trim(),requiredContextKinds:["extension-api","project-labels"]})}};function LT(t,e=!1){let r=t.length,n=0,i="",o=0,s=16,a=0,l=0,c=0,u=0,d=0;function p(_,T){let I=0,R=0;for(;I<_||!T;){let w=t.charCodeAt(n);if(w>=48&&w<=57)R=R*16+w-48;else if(w>=65&&w<=70)R=R*16+w-65+10;else if(w>=97&&w<=102)R=R*16+w-97+10;else break;n++,I++}return I<_&&(R=-1),R}function f(_){n=_,i="",o=0,s=16,d=0}function m(){let _=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&lg(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&lg(t.charCodeAt(n)))for(n++;n<t.length&&lg(t.charCodeAt(n));)n++;else return d=3,t.substring(_,n);let T=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&lg(t.charCodeAt(n))){for(n++;n<t.length&&lg(t.charCodeAt(n));)n++;T=n}else d=3;return t.substring(_,T)}function h(){let _="",T=n;for(;;){if(n>=r){_+=t.substring(T,n),d=2;break}let I=t.charCodeAt(n);if(I===34){_+=t.substring(T,n),n++;break}if(I===92){if(_+=t.substring(T,n),n++,n>=r){d=2;break}switch(t.charCodeAt(n++)){case 34:_+='"';break;case 92:_+="\\";break;case 47:_+="/";break;case 98:_+="\b";break;case 102:_+="\f";break;case 110:_+=`
`;break;case 114:_+="\r";break;case 116:_+="	";break;case 117:let w=p(4,!0);w>=0?_+=String.fromCharCode(w):d=4;break;default:d=5}T=n;continue}if(I>=0&&I<=31)if(Q_(I)){_+=t.substring(T,n),d=2;break}else d=6;n++}return _}function g(){if(i="",d=0,o=n,l=a,u=c,n>=r)return o=r,s=17;let _=t.charCodeAt(n);if(PM(_)){do n++,i+=String.fromCharCode(_),_=t.charCodeAt(n);while(PM(_));return s=15}if(Q_(_))return n++,i+=String.fromCharCode(_),_===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,s=14;switch(_){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=h(),s=10;case 47:let T=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!Q_(t.charCodeAt(n));)n++;return i=t.substring(T,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;let I=r-1,R=!1;for(;n<I;){let w=t.charCodeAt(n);if(w===42&&t.charCodeAt(n+1)===47){n+=2,R=!0;break}n++,Q_(w)&&(w===13&&t.charCodeAt(n)===10&&n++,a++,c=n)}return R||(n++,d=1),i=t.substring(T,n),s=13}return i+=String.fromCharCode(_),n++,s=16;case 45:if(i+=String.fromCharCode(_),n++,n===r||!lg(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;n<r&&v(_);)n++,_=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(_),n++,s=16}}function v(_){if(PM(_)||Q_(_))return!1;switch(_){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let _;do _=g();while(_>=12&&_<=15);return _}return{setPosition:f,getPosition:()=>n,scan:e?y:g,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>l,getTokenStartCharacter:()=>o-u,getTokenError:()=>d}}function PM(t){return t===32||t===9}function Q_(t){return t===10||t===13}function lg(t){return t>=48&&t<=57}var WJ;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(WJ||(WJ={}));var MT;(function(t){t.DEFAULT={allowTrailingComma:!1}})(MT||(MT={}));function KJ(t,e=[],r=MT.DEFAULT){let n=null,i=[],o=[];function s(l){Array.isArray(i)?i.push(l):n!==null&&(i[n]=l)}return YJ(t,{onObjectBegin:()=>{let l={};s(l),o.push(i),i=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let l=[];s(l),o.push(i),i=l,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(l,c,u)=>{e.push({error:l,offset:c,length:u})}},r),i[0]}function YJ(t,e,r=MT.DEFAULT){let n=LT(t,!1),i=[];function o(N){return N?()=>N(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(N){return N?()=>N(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(N){return N?q=>N(q,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function l(N){return N?q=>N(q,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=s(e.onObjectBegin),u=l(e.onObjectProperty),d=o(e.onObjectEnd),p=s(e.onArrayBegin),f=o(e.onArrayEnd),m=l(e.onLiteralValue),h=a(e.onSeparator),g=o(e.onComment),v=a(e.onError),y=r&&r.disallowComments,_=r&&r.allowTrailingComma;function T(){for(;;){let N=n.scan();switch(n.getTokenError()){case 4:I(14);break;case 5:I(15);break;case 3:I(13);break;case 1:y||I(11);break;case 2:I(12);break;case 6:I(16);break}switch(N){case 12:case 13:y?I(10):g();break;case 16:I(1);break;case 15:case 14:break;default:return N}}}function I(N,q=[],B=[]){if(v(N),q.length+B.length>0){let P=n.getToken();for(;P!==17;){if(q.indexOf(P)!==-1){T();break}else if(B.indexOf(P)!==-1)break;P=T()}}}function R(N){let q=n.getTokenValue();return N?m(q):(u(q),i.push(q)),T(),!0}function w(){switch(n.getToken()){case 11:let N=n.getTokenValue(),q=Number(N);isNaN(q)&&(I(2),q=0),m(q);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return T(),!0}function O(){return n.getToken()!==10?(I(3,[],[2,5]),!1):(R(!1),n.getToken()===6?(h(":"),T(),A()||I(4,[],[2,5])):I(5,[],[2,5]),i.pop(),!0)}function V(){c(),T();let N=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(N||I(4,[],[]),h(","),T(),n.getToken()===2&&_)break}else N&&I(6,[],[]);O()||I(4,[],[2,5]),N=!0}return d(),n.getToken()!==2?I(7,[2],[]):T(),!0}function L(){p(),T();let N=!0,q=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(q||I(4,[],[]),h(","),T(),n.getToken()===4&&_)break}else q&&I(6,[],[]);N?(i.push(0),N=!1):i[i.length-1]++,A()||I(4,[],[4,5]),q=!0}return f(),N||i.pop(),n.getToken()!==4?I(8,[4],[]):T(),!0}function A(){switch(n.getToken()){case 3:return L();case 1:return V();case 10:return R(!0);default:return w()}}return T(),n.getToken()===17?r.allowEmptyContent?!0:(I(4,[],[]),!1):A()?(n.getToken()!==17&&I(9,[],[]),!0):(I(4,[],[]),!1)}var QJ;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(QJ||(QJ={}));var XJ;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(XJ||(XJ={}));var X_=KJ;var JJ;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(JJ||(JJ={}));var Du=class{constructor(e,r,n,i){this.stopStartMappings=e;this.turn=r;this.progress=n;this.processNonReportedText=i;this.stagedTextToApply="";this.currentStartStop=void 0;this._appliedText="";this.nonReportedText=[];this.conversationCallback=new xo(o=>this.applyDelta(o))}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){return this.conversationCallback.apply(e)}applyDeltaToTurn(e){this.turn.response||(this.turn.response={message:e,type:"model"}),this._appliedText+=e,this.turn.response.message+=e}applyDeltaToProgress(e){this.progress.report({content:e})}checkForKeyWords(e,r,n=this.applyDeltaToProgress){r=this.stagedTextToApply+r;for(let i of e){let o=r.indexOf(i);if(o===-1)continue;let s=r.substring(0,o);return n.call(this,s),this.applyDeltaToTurn(r),this.stagedTextToApply=r.substring(o+i.length),i}for(let i of e)for(let o=i.length-1;o>=0;o--){let s=i.substring(o);if(r.endsWith(s)){this.stagedTextToApply=r;return}}n.call(this,r),this.applyDeltaToTurn(r),this.stagedTextToApply=""}postReportRecordProgress(e){this.nonReportedText.push(e)}applyDelta(e){if(this.currentStartStop===void 0){let r=this.checkForKeyWords(this.stopStartMappings.map(n=>n.stop),e);r&&(this.currentStartStop=this.stopStartMappings.find(n=>n.stop===r));return}else{if(!this.currentStartStop.start){this.applyDeltaToTurn(e);return}this.checkForKeyWords([this.currentStartStop.start],e,this.postReportRecordProgress)&&(this.processNonReportedText&&this.processNonReportedText(this.nonReportedText).forEach(i=>this.applyDeltaToProgress(i)),this.currentStartStop=void 0,this.stagedTextToApply.length>0&&this.applyDelta(""))}}};var hPe=`
### Question:
Search for 'foo' in all files under my 'src' directory.

### Answer:
Populate the query field with 'foo' and specify the files to include as 'src/'.

[ARGS START]
\`\`\`json
{
    "query": "foo",
    "filesToInclude": "src" ,
}
\`\`\`
[ARGS END]

### Question:
Find all CamelCase words in all files under the 'src/extensions' directory.

### Answer:
Perform a regex search for camelCase variables by checking for any word that has a lowercase letter followed by an uppercase letter, followed by any number of lowercase letters. You can use \`\\b[a-z]+[A-Z][a-z]+\\b\` to acheive this.
This must be case-sensitive since the capitalization of the letters in our regex matters.

[ARGS START]
\`\`\`json
{
    "query": "\\\\b[a-z]+[A-Z][a-z]+\\\\b",
    "filesToInclude": "src/extensions" ,
    "isRegex": true,
    "isCaseSensitive": true,
}
\`\`\`
[ARGS END]

### Question:
Find all hex color codes in css files

### Answer:
Perform a search for 6-digit or 3-digit hex color codes using the regex \`#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\b\`.

[ARGS START]
\`\`\`json
{
    "query": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\\\b",
    "filesToInclude": "*.css" ,
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Find all HTTPS links in markdown.

### Answer:
Search all URLs that have the HTTPS protocol in a markdown file. Make sure to include all valid URL characters in their respective places. This regex should achieve this: \`https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#()?&//=]*)\`.

[ARGS START]
\`\`\`json
{
    "query": "https?:\\\\/\\\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#()?&//=]*)",
    "filesToInclude": "*.md" ,
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Replace all YYYY-MM-DD dates with MM/DD/YYYY dates. Don't do this in typescript files.

### Answer:
You will need to use the regex \`\\b(\\d{4})-(\\d{2})-(\\d{2})\\b\` to match the YYYY-MM-DD date format. Then, you will need to use the replace string \`$2/$3/$1\` to replace the date with the MM/DD/YYYY format.

[ARGS START]
\`\`\`json
{
    "query": "\\\\b(\\\\d{4})-(\\\\d{2})-(\\\\d{2})\\\\b",
    "replace: "$2/$3/$1",
    "filesToExclude": "*.ts",
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Replace all camel case variable names with snake case variable names.

### Answer:
To replace all camel case variables with snake case, we will need to:
1. Find all sequences of lowercase letters succeeded by uppercase letters. Use \`([a-z]+)([A-Z])\` to capture these sequences.
2. Separate them with an underscore character. \`$1_$2\` does this.
3. Convert both characters to lowercase. Adjust the previous replace text to be \`\\l$1_\\l$2\`.

[ARGS START]
\`\`\`json
{
    "query": "([a-z]+)([A-Z])",
    "replace: "\\\\l$1_\\\\l$2",
    "isRegex": true,
    "isCaseSensitive": true,
}
\`\`\`
[ARGS END]

### Question:
alphanumeric

### Answer:
To find all alphanumeric characters, you can use the regex \`[a-zA-Z0-9]\`.

[ARGS START]
\`\`\`json
{
    "query": "[a-zA-Z0-9]",
    "isRegex": true,
    "isCaseSensitive": true,
}
\`\`\`
[ARGS END]

### Question:
link

### Answer:
To find all web links, use the regex \`https?:\\/\\/\\S+\`.

[ARGS START]
\`\`\`json
{
    "query": "https?:\\\\/\\\\/\\\\S+",
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Search for actionbar files outside of my "extensions" directoy

### Answer:
To do this, use the query \`actionbar\` in all files except the ones in \`extensions\`.

[ARGS START]
\`\`\`json
{
    "query": "actionbar",
    "filesToExclude": "extensions",
}
\`\`\`
[ARGS END]

### Question:
typescript for loop

### Answer:
To look for "for" loops in most languages, use the query \`for\\s*\\(\`.

[ARGS START]
\`\`\`json
{
    "query": "for\\s*\\(",
	"isRegex: true,
	"filesToInclude: "*.ts"
}
\`\`\`
[ARGS END]

`;function gPe(t){if(!t)return[];let e=[],r={query:t.query??"",replace:t.replace??"",filesToInclude:t.filesToInclude??"",filesToExclude:t.filesToExclude??"",isRegex:t.isRegex??!1,isCaseSensitive:t.isRegex??!1};return e.push({commandId:"github.copilot.executeSearch",args:[r],title:"Search"}),e}function ZJ(t){let e=/```(?:json)\s*([\s\S]+?\s*)```/g,r=Array.from(t.matchAll(e),o=>o[1]),n=r&&r.length>0?r[0]:void 0,i;if(n){let o;try{o=X_(n)}catch{}o&&(i=o)}return i}function vPe(t){if(!t)return[];let e=[`| Parameter  | Value |
`,`| ------ | ----- |
`];for(let[r,n]of Object.entries(t)){if(n==="")continue;let i=n;(typeof n=="string"||n instanceof String)&&(i=n.replace(/\|/g,"\\|")),e.push(`| ${r} | \`${i}\` |
`)}return e.push(`
`),e}var kM="search";function yPe(t){let e=new tn({location:2,id:kM,description:"Generate query parameters for workspace search",sampleQuestion:"Search for 'foo' in all files under my 'src' directory",systemPromptOptions:{examples:hPe,roleplay:"You are a VS Code search expert who helps to write search queries for text in a workspace. Users want to search across a whole workspace. Your response will contain parameters to use in the search that targets what the user wants."},commandInfo:{allowsEmptyArgs:!1,defaultEnablement:t},rules:`
The user's question is ALWAYS related to search or replace. When the user's question does not seem to be related to searching or replacing, you MUST assume that they're searching for or replacing what they are describing.
For example, if the user says "emojis", try appending "I'm looking for _____" to the beginning (e.g. I'm looking for emojis) to make more sense of it.

For all valid questions, you MUST respond with a JSON object with search parameters to use.
- Your answer MUST wrap the JSON object in "[ARGS START]" and "[ARGS END]". "[ARGS START]" must be on a new line.
- Your answer MUST have an explanation in full, human-readable sentences. This goes before the "[ARGS START]" line.

If you put a regex in the "query" parameter, make sure to set "isRegex" to true.
If you put a regex in the "query" parameter, do not start and/or end with forward slashes to denote a regex literal.
You MUST NOT give an answer with an empty-string query parameter.

The "replace" string will be used to replace the query-matched search results.

If you want to target certain files, set "filesToInclude" to a glob pattern. DO NOT assume the "filesToInclude" and "filesToExclude" without being very sure that the user wants to target these files!

If the query is case sensitive, set "isCaseSensitive" to true.

By default, all string fields are the empty string, and all boolean fields are false. Only list the fields you want to change.

I want the JSON object of search parameters to be in this format:
[ARGS START]
\`\`\`json
{
	"query": ...,
	"replace": ...,
	"filesToInclude": ...,
	"filesToExclude": ...,
	"isRegex": ...,
	"isCaseSensitive": ...,
}
\`\`\`
[ARGS END]
`.trim(),responseProcessor:(r,n,i)=>new Du([{start:"[ARGS END]",stop:"[ARGS START]"}],n,i,o=>vPe(ZJ(o.join("")))),followUps:async(r,n)=>{let i=ZJ(n.response?.message??"");return gPe(i)},requiredContextKinds:["project-labels","current-selection"]});Rr.registerIntent(e)}Ba.registerContribution(yPe);var ug="terminal",FT=class extends tn{constructor(){super({location:2,id:ug,description:"Ask how to do something in the terminal",sampleQuestion:"How do I view all files within a directory including sub-directories",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. Your task is to help the Developer craft a command to run on the command line. Pay close attention to the terminalShellType context",examples:"\n```sh\nls -lR\n```"},rules:`
Prefer single line commands.
If the command suggestion needs an explanation, be concise.
Always prefer commands of the provided shell type; only use a tool like python or perl when it is not possible with the shell.
Say "I'm not quite sure how to do that." when you aren't confident in your explanation`.trim(),requiredContextKinds:["terminal-shell-type"]})}};var GM=require("util");var Pr=class{};var Yp=class{constructor(e,r){this.baseUri=e;this.pattern=r}get base(){throw new Error("Not implemented")}};var Ki=class{};function eZ(t){if(typeof t!="string")throw new TypeError("Argument must be a string.");if(!t)return t;let e=t.startsWith("!"),r=e?t.slice(1):t,n=r,i=!1;switch(r[0]==="/"&&(i=!0,n=r.slice(1)),n[0]){case"*":r[1]!=="*"&&(n="**/"+n);break;default:if((!i&&!n.includes("/")||n.endsWith("/"))&&(n="**/"+n),n.endsWith("*")||n.endsWith("?"))break;/\.[a-z\d_-]+$/.test(n)||(n.endsWith("/")||(n+="/"),n+="**")}return e?"!"+n:n}var pZ=Te(uZ()),qs=require("path"),J_=class{constructor(){this._ignoreMap=new Map;this._ignoreCache=new Map;this._searchRankCache=null}setIgnoreFile(e,r){this._ignoreMap.set(e.fsPath,{ignore:(0,pZ.default)().add(r),patterns:r.split(/\r?\n/).filter(Boolean).map(eZ)}),this._searchRankCache=null,this._ignoreCache.clear()}removeIgnoreFile(e){this._ignoreMap.delete(e.fsPath),this._searchRankCache=null,this._ignoreCache.clear()}removeWorkspace(e){let r=0;for(let n of this._ignoreMap.keys())dZ(e.fsPath,n)&&(this._ignoreMap.delete(n),r+=1);r>0&&(this._searchRankCache=null,this._ignoreCache.clear())}asMinimatchPatterns(){return[...this._ignoreMap.values()].flatMap(e=>e.patterns)}isIgnored(e){if(this._ignoreMap.size===0)return!1;let r=e.fsPath;if(this._ignoreCache.has(r))return this._ignoreCache.get(r);let n=0,i={ignored:!1,unignored:!1};try{let o=this._searchRank;for(let s of o){n+=1;let a=(0,qs.dirname)(s),l=(0,qs.relative)(a,r);if(!l.startsWith("..")&&a!==r&&dZ(a,r)){let c=this._ignoreMap.get(s);if(!c)throw new Error(`No ignore patterns found for ${s}`);if(i=c.ignore.test(l),i.ignored||i.unignored)break}}return this._ignoreCache.set(r,i.ignored),i.ignored}catch{return!1}}get _searchRank(){if(this._searchRankCache!==null)return this._searchRankCache;let e={},r=n=>n.split(qs.sep).length;return this._searchRankCache=[...this._ignoreMap.keys()].sort((n,i)=>(e[i]||=r(i))-(e[n]||=r(n)))}};function dZ(t,e){return t===e?!0:(t.charAt(t.length-1)!==qs.sep&&(t+=qs.sep),(0,qs.normalize)(e).startsWith((0,qs.normalize)(t)))}var Hs=Cr("IIgnoreService"),UT=".copilotignore",qT=".gitignore",HT=class{constructor(e){this.accessor=e;this._gitIgnoreFiles=new J_;this._copilotIgnoreFiles=new J_;this._disposables=[];this.fs=e.get(Pr)}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}isIgnored(e,r){let n=this._gitIgnoreFiles.isIgnored(e),i=this._copilotIgnoreFiles.isIgnored(e);return!r||r.includeGitIgnore&&r.includeCopilotIgnore?n||i:r.includeGitIgnore&&!r.includeCopilotIgnore?n:!r.includeGitIgnore&&r.includeCopilotIgnore?i:!1}asMinimatchPattern(e){let r=[];e.includeCopilotIgnore&&r.push(this._copilotIgnoreFiles.asMinimatchPatterns()),e.includeGitIgnore&&r.push(this._gitIgnoreFiles.asMinimatchPatterns());let n=r.flat();if(n.length!==0)return n.length===1?n[0]:`{${n.join(",")}}`}init(){return this._init??=(async()=>{for(let e of this.accessor.get(He).workspaceFolders??[])await this.addWorkspace(e)})(),this._init}trackIgnoreFile(e,r){e.path.endsWith(qT)?this._gitIgnoreFiles.setIgnoreFile(e,r):e.path.endsWith(UT)&&this._copilotIgnoreFiles.setIgnoreFile(e,r)}removeIgnoreFile(e){e.path.endsWith(qT)?this._gitIgnoreFiles.removeIgnoreFile(e):e.path.endsWith(UT)&&this._copilotIgnoreFiles.removeIgnoreFile(e)}removeWorkspace(e){this._gitIgnoreFiles.removeWorkspace(e),this._copilotIgnoreFiles.removeWorkspace(e)}isIgnoreFile(e){return e.path.endsWith(qT)?!0:!!e.path.endsWith(UT)}async addWorkspace(e){let r=[];if(e.scheme!=="file")return;let n=this.accessor.get(Ki);r=r.concat(await n.findFiles(new Yp(e,`**/${UT}`))),r=r.concat(await n.findFiles(new Yp(e,`**/${qT}`)));for(let i of r){let o=(await this.fs.readFile(i)).toString();this.trackIgnoreFile(i,o)}}};var ol=class{constructor(e){this._accessor=e}async findFilesWithDefaultExcludes(e,r,n){let o=this._accessor?.safeGet(Hs)?.asMinimatchPattern({includeCopilotIgnore:!0,includeGitIgnore:!1}),s={include:e,maxResults:r,exclude:o,useDefaultExcludes:!0},a=[],l={report(c){a.push(c.uri)}};return await this.findTextInFiles({pattern:".",isRegExp:!0},s,l,n),r===1?a[0]:a}};var dg={location:"sameFolder",prefix:"test_",suffixes:[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"]},pg={csharp:{suffixes:["Test"],location:"testFolder"},dart:{suffixes:["_test"],location:"testFolder"},go:{suffixes:["_test"],location:"sameFolder"},java:{suffixes:["Test"],location:"testFolder"},javascript:{suffixes:[".test",".spec"],location:"sameFolder"},kotlin:{suffixes:["Test"],location:"testFolder"},php:{suffixes:["Test"],location:"testFolder"},powershell:{suffixes:[".Tests"],location:"testFolder"},python:{prefix:"test_",location:"testFolder"},ruby:{suffixes:["_test","_spec"],location:"testFolder"},rust:{suffixes:[""],location:"testFolder"},swift:{suffixes:["Tests"],location:"testFolder"},typescript:{suffixes:[".test",".spec"],location:"sameFolder"}},MPe={cs:"csharp",dart:"dart",go:"go",java:"java",js:"javascript",kt:"kotlin",php:"php",ps1:"powershell",py:"python",rb:"ruby",rs:"rust",swift:"swift",ts:"typescript"},FPe=function(){let t={};for(let[e,r]of Object.entries(MPe))t[e]=pg[r];return t}(),Z_=class{constructor(e){this._search=e}async findTestFileForSourceFile(e,r){if(e.isUntitled)return;let n=Tt.basename(e.uri),i=Tt.extname(e.uri),o=pg[e.languageId]??dg,s=[];if(o.prefix&&s.push(o.prefix+n),o.suffixes)for(let c of o.suffixes??[]){let u=n.replace(`${i}`,`${c}${i}`);s.push(u)}let a=`**/{${s.join(",")}}`;return await this._search.findFilesWithDefaultExcludes(a,1,r)}async findAnyTestFileForSourceFile(e,r){let n=pg[e.languageId]??dg,i=[];if(n.prefix&&i.push(`${n.prefix}*`),n.suffixes){let a=Tt.extname(e.uri);for(let l of n.suffixes??[])i.push(`*${l}${a}`)}let o=`**/{${i.join(",")}}`;return await this._search.findFilesWithDefaultExcludes(o,1,r)}async findFileForTestFile(e,r){let n=pg[e.languageId]??dg,i=Tt.basename(e.uri),o=[];n.suffixes&&o.splice(0,0,...n.suffixes),n.prefix&&o.splice(0,0,n.prefix);for(let s of o){let a=i.replace(s,"");if(a!==i){let l=await this._search.findFilesWithDefaultExcludes(`**/${a}`,1,r);if(l)return l}}}};function e0(t){let e;zi.isUri(t)||(e=pg[t.languageId],t=t.uri);let r=Tt.basename(t),n=Tt.extname(t);return e??=FPe[n.replace(".","")],e?!(e.suffixes&&!e.suffixes.some(o=>r.endsWith(o+n))||e.prefix&&!r.startsWith(e.prefix)):!!(dg.suffixes.some(o=>r.endsWith(o+n))||r.startsWith(dg.prefix))}function fZ(t){let e=pg[t.languageId]??dg,r=Tt.basename(t.uri);if(e.prefix)return e.prefix+r;let n=Tt.extname(t.uri),i=e.suffixes&&e.suffixes.length>0?e.suffixes[0]:".test";return r.replace(`${n}`,`${i}${n}`)}var us=class{constructor(e){this.charLimit=e;this._totalChars=0}get totalChars(){return this._totalChars}addLine(e){this._totalChars+=e.length+1}lineWouldFit(e){return this._totalChars+e.length+1<this.charLimit}},di=class t{constructor(e,r,n,i){this.tracker=e;this.document=r;this.language=n;this.kindOrUniqueStr=i;this.lines=[];this.firstLineIndex=this.document.lineCount;this.lastLineIndex=-1;this.isComplete=!1;this.nonTrimWhitespaceCharCount=0;this._startMarker=Gn.begin(n,i),this._endMarker=Gn.end(n,i),this.lines=[],this.firstLineIndex=r.lineCount,this.lastLineIndex=-1}get startMarker(){return this._startMarker}get endMarker(){return this._endMarker}get lineCount(){return this.lines.length}get isVerySmallOrEmpty(){return this.nonTrimWhitespaceCharCount<10}get hasContent(){return this.lines.length===0||this.nonTrimWhitespaceCharCount===0?!1:this.lines.length>0}clone(){let e=new t(this.tracker,this.document,this.language,this.kindOrUniqueStr);return e._startMarker=this.startMarker,e._endMarker=this.endMarker,e.lines.push(...this.lines),e.firstLineIndex=this.firstLineIndex,e.lastLineIndex=this.lastLineIndex,e.nonTrimWhitespaceCharCount=this.nonTrimWhitespaceCharCount,e}clear(){this.lines.length=0,this.firstLineIndex=this.document.lineCount,this.lastLineIndex=-1,this.nonTrimWhitespaceCharCount=0}generatePrompt(e){if(!this.hasContent)return[];let r=[];return r.push("```"+this.language.languageId),r.push(Fr.forDocument(this.language,this.document)),e&&r.push(`${this.startMarker}`),r.push(...this.lines),e&&r.push(`${this.endMarker}`),r.push("```"),r}prependLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.unshift(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}appendLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.push(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}trim(e){let r=e?Math.min(this.lastLineIndex,e.start.line):this.lastLineIndex;for(;this.firstLineIndex<r&&this.lines.length>0&&this.lines[0].trim().length===0;)this.firstLineIndex++,this.lines.shift();let n=e?Math.max(this.firstLineIndex,e.end.line):this.firstLineIndex;for(;n<this.lastLineIndex&&this.lines.length>0&&this.lines[this.lines.length-1].trim().length===0;)this.lastLineIndex--,this.lines.pop()}removeFirstNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(0,e),n=0;for(let i of r)n+=i.trim().length;return this.firstLineIndex+=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}removeLastNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(this.lines.length-e,e),n=0;for(let i of r)n+=i.trim().length;return this.lastLineIndex-=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}takeFromAbove(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeLastNLines(r);this.lines.unshift(...n),this.firstLineIndex-=n.length,this.nonTrimWhitespaceCharCount+=i}takeFromBelow(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeFirstNLines(r);this.lines.push(...n),this.lastLineIndex+=n.length,this.nonTrimWhitespaceCharCount+=i}mergeFromAbove(e){e.hasContent&&(this.lines.unshift(...e.lines),this.firstLineIndex=e.firstLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}mergeFromBelow(e){e.hasContent&&(this.lines.push(...e.lines),this.lastLineIndex=e.lastLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}toRange(){try{let e=this.lastLineIndex===-1?this.document.lineCount-1:this.lastLineIndex,r=new De(this.firstLineIndex,0,e,this.document.lineAt(e).text.length);if(this.document.validateRange(r)===r)return r}catch{return}}toString(){return`{${this.firstLineIndex} -> ${this.lastLineIndex}}`}};var BM=class{constructor(){this.promptDescription="";this.kind="inline-chat-selection";this.requiredOnly=!0}async resolveContext(e,r,n,i,o,s){if(!i)return;let{expandedRange:a,rangeExpandedToFunction:l,functionBodies:c}=await SJ(e,i),u,d;Ii(i.document.uri)?(u=await this.generateSelectionContextInNotebook(e,r,i,a,void 0),d=this.generateSelectionContextPromptsForNotebook(e,i,u)):(u=await this.generateSelectionContext(e,i,a,l,c,void 0),d=this.generateSelectionContextPrompts(i,u));let p=[{uri:i.document.uri,version:i.document.version,ranges:ai([u.range.toRange(),u.above.toRange(),u.below.toRange()])}];return{userMessages:d,usedContext:p,metadata:{expandedRange:a,contextInfo:u}}}generateSelectionContextPrompts(e,r){let n=[],i=r.above.hasContent||r.below.hasContent||r.outlineAbove.length>0||r.outlineBelow.length>0;if(r.outlineAbove.length>0){let o=[];o.push("I have the following code above:"),o.push("```"+e.document.languageId),o.push(Fr.forDocument(e.language,e.document)),o.push(r.outlineAbove),o.push("```"),n.push(o.join(`
`))}if(r.above.hasContent){let o=[];o.push("I have the following code above the selection:"),o.push(...r.above.generatePrompt(i)),n.push(o.join(`
`))}if(r.below.hasContent){let o=[];o.push("I have the following code below the selection:"),o.push(...r.below.generatePrompt(i)),n.push(o.join(`
`))}if(r.outlineBelow.length>0){let o=[];o.push("I have the following code below:"),o.push("```"+e.document.languageId),o.push(Fr.forDocument(e.language,e.document)),o.push(r.outlineBelow),o.push("```"),n.push(o.join(`
`))}{let o=[];r.range.hasContent?(o.push("I have the following code in the selection:"),o.push(...r.range.generatePrompt(i))):i||(o.push("I am in an empty file:"),o.push("```"+e.language.languageId),o.push(Fr.forDocument(e.language,e.document)),o.push("```")),o.length>0&&n.push(o.join(`
`))}return n}async generateSelectionContext(e,r,n,i,o,s){let a=await e.get(Xt).getChatEndpointInfo();s=s??a.modelMaxTokenWindow*4/3;let l=new us(s),c=FM(r.document,r.selection,n,new De(0,0,r.document.lineCount,0),r.language,l);if(!(c.above.hasContent&&!c.above.isComplete))return{language:c.language,above:c.above,range:c.range,below:c.below,outlineAbove:"",outlineBelow:""};let d=new us(s),p=new De(i.start.line,0,i.end.line,r.document.lineAt(i.end.line).range.end.character),f=FM(r.document,r.selection,n,p,r.language,d),m="",h="";if(f.above.isComplete&&f.below.isComplete){let g=BPe({document:r.document,functionBodies:o,rangeExpandedToFunctionWholeLines:p}),v=UPe(g,d);m=v.outlineAbove,h=v.outlineBelow}return{language:f.language,above:f.above,range:f.range,below:f.below,outlineAbove:m,outlineBelow:h}}async generateSelectionContextInNotebook(e,r,n,i,o){let s=await e.get(Xt).getChatEndpointInfo();o=o??s.modelMaxTokenWindow*4/3;let a=new us(o),l=FM(n.document,n.selection,i,new De(0,0,n.document.lineCount,0),n.language,a);return HM(r,n,l,a)}generateSelectionContextPromptsForNotebook(e,r,n){return jM(e,r,n)}};Ke.register(new BM);function FM(t,e,r,n,i,o){let s=new di(o,t,i,"ed8c6549bwf9"),a=new di(o,t,i,"abpxx6d04wxr"),l=new di(o,t,i,"be15d9bcejpp"),c=()=>(a.trim(),s.trim(e),l.trim(),{language:i,above:a,range:s,below:l});for(let d=r.end.line;d>=r.start.line;d--)if(!s.prependLine(d))return c();let u={aboveLineIndex:r.start.line-1,belowLineIndex:r.end.line+1,minimumLineIndex:Math.max(0,n.start.line),maximumLineIndex:Math.min(t.lineCount-1,n.end.line)};return UM(u,a,l),c()}function UM(t,e,r){let n=t.aboveLineIndex,i=!0,o=t.belowLineIndex,s=!0;for(let a=0;a<100&&(i||s);a++)!i||s&&a%4===3?o<=t.maximumLineIndex&&r.appendLine(o)?o++:s=!1:n>=t.minimumLineIndex&&e.prependLine(n)?n--:i=!1;e.isComplete=n<t.minimumLineIndex,r.isComplete=o>t.maximumLineIndex}function BPe({document:t,functionBodies:e,rangeExpandedToFunctionWholeLines:r}){let n="";t.languageId==="typescript"&&(n=";");let i=d=>{let f=new De(t.positionAt(d.startIndex),t.positionAt(d.endIndex));return f.end.line<r.start.line?r.start.line-f.start.line>50:f.start.line>r.end.line?f.end.line-r.end.line>50:!0},o=e.filter(i),s=t.offsetAt(r.start),a=t.offsetAt(r.end),l={startOffset:s,endOffset:a},{outlineAbove:c,outlineBelow:u}=qM(t.getText(),o,l,n);return{outlineAboveRange:c,outlineBelowRange:u}}function qM(t,e,r,n){let i=0,o="",s=r.endOffset,a="";for(let l of e)if(l.endIndex<r.startOffset)o+=t.substring(i,l.startIndex),o+=n,i=l.endIndex;else if(l.startIndex>r.endOffset)a+=t.substring(s,l.startIndex),a+=n,s=l.endIndex;else continue;return o+=t.substring(i,r.startOffset),a+=t.substring(s,t.length),{outlineAbove:o,outlineBelow:a}}function UPe(t,e){let r=/\r\n|\r|\n/g,n=t.outlineAboveRange===""?[]:t.outlineAboveRange.split(r),i=t.outlineBelowRange===""?[]:t.outlineBelowRange.split(r),o=[],s=[],a=f=>e.lineWouldFit(f)?(e.addLine(f),o.unshift(f),!0):!1,l=f=>e.lineWouldFit(f)?(e.addLine(f),s.push(f),!0):!1,c=n.length-1,u=!0,d=0,p=!0;for(let f=0;f<100&&(u||p);f++)!u||p&&f%4===3?d<i.length&&l(i[d])?d++:p=!1:c>=0&&a(n[c])?c--:u=!1;return{outlineAbove:o.join(`
`),outlineBelow:s.join(`
`)}}function HM(t,e,r,n){let i=t.notebookDocuments.find(y=>y.uri.fsPath===e.document.uri.fsPath&&y.getCells().find(_=>_.document===e.document));if(!i)return{...r,outlineAbove:"",outlineBelow:"",aboveCells:[],belowCells:[]};let{language:o,above:s,range:a,below:l}=r,c=s.lines.length+a.lines.length+l.lines.length,u=i.getCells().findIndex(y=>y.document===e.document),d=[],p=[],f=()=>(d.forEach(y=>y.trim()),p.forEach(y=>y.trim()),{language:o,above:s,range:a,below:l,outlineAbove:"",outlineBelow:"",aboveCells:d,belowCells:p}),m=!0,h=!0,g=u-1,v=u+1;for(let y=c;y<100&&(m||h);y++)if(m)if(g>=0){let T=i.cellAt(g).document,I=new di(n,T,e.language,"CELL:"+T.uri.fragment);for(let R=0;R<T.lineCount;R++)I.appendLine(R);d.unshift(I),g--}else m=!1;else if(v<i.cellCount){let T=i.cellAt(v).document,I=new di(n,T,e.language,"CELL:"+T.uri.fragment);for(let R=0;R<T.lineCount;R++)I.appendLine(R);p.push(I),v++}else h=!1;return f()}function jM(t,e,r,n={includeLineNumbers:!1,includeDelimeters:!1}){let{below:i,above:o,range:s,aboveCells:a,belowCells:l}=r,c=a||[],u=l||[],d=[],p=n.includeDelimeters??(o.hasContent||i.hasContent);if(c.length>0||u.length>0){let f=[],m=qPe(e.language.languageId);f.push(...m),c.length>0&&(f.push(`Here are the cells in this Jupyter Notebook:
`),c.forEach((h,g)=>{f.push(`CELL INDEX: ${g}`),f.push("```"+e.language.languageId),f.push(...h.lines),f.push("```")})),u.length>0&&(f.push(`Here are the cells below the current cell that I am editing in this Jupyter Notebook:
`),u.forEach((h,g)=>{f.push(`CELL INDEX: ${c.length+1+g}`),f.push("```"+e.language.languageId),f.push(...h.lines),f.push("```")})),d.push(f.join(`
`))}{let f=[`Now I create a new cell in this Jupyter Notebook document at index ${c.length}.`];e.language.languageId==="markdown"?(f.push("This is a markdown cell. Markdown cell is used to describte and document your workflow."),s.hasContent?(f.push("I have the following content in the selection:"),f.push(...s.generatePrompt(p))):(f.push("In this new cell, I am working with the following content:"),f.push("```"+e.language.languageId),f.push("```")),d.push(f.join(`
`)),o.hasContent&&d.push(["In this new cell, I have the following markdown content above the selection:",...o.generatePrompt(n.includeDelimeters)].join(`
`)),i.hasContent&&d.push(["In this new cell, I have the following markdown content below the selection:",...i.generatePrompt(n.includeDelimeters)].join(`
`))):(s.hasContent?(f.push("I have the following code in the selection:"),f.push(...s.generatePrompt(p))):(f.push("In this new cell, I am working with the following code:"),f.push("```"+e.language.languageId),f.push("```")),d.push(f.join(`
`)),o.hasContent&&d.push(["In this new cell, I have the following code above the selection:",...o.generatePrompt(n.includeDelimeters)].join(`
`)),i.hasContent&&d.push(["In this new cell, I have the following code below the selection:",...i.generatePrompt(n.includeDelimeters)].join(`
`)))}return d}function qPe(t){return["I am working on a Jupyter notebook.","This Jupyter Notebook already contains multiple cells.","The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```"+t,"Each cell is a block of code that can be executed independently.","Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.","For the same reason, if a variable is defined in a cell, it can be used in other cells as well.","We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.","Do not generate CELL INDEX in your answer, it is only used to help you understand the context.","","Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.","## Examples starts here","Here are the cells in this Jupyter Notebook:","`CELL INDEX: 0","```python","import pandas as pd","","# create a dataframe with sample data","df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})","print(df)","```","---------------------------------","USER:","Now I create a new cell in this Jupyter Notebook document at index 1.","In this new cell, I am working with the following code:","```python","```","---------------------------------","USER:","plot the data frame","","---------------------------------","ChatGPT Answer","---------------------------------","To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:","","```python","df.plot(x='Name', y='Age', kind='bar')","```","## Example ends here"]}var t0=class{constructor(){this.promptDescription="Information about existing or related files containing tests.";this.kind="tests/impl2test";this._decoder=new GM.TextDecoder}async resolveContext(e,r,n,i,o,s){if(!i||e0(i.document))return;let a=e.get(Pr),l=new Z_(e.get(ol)),u=(await e.get(Xt).getChatEndpointInfo()).modelMaxTokenWindow*4/3,d=async(h,g=u)=>{let y=this._decoder.decode(await a.readFile(h)).substring(0,g);return`${Fr.forUri(i.language,h)}

${y}`},p=await l.findTestFileForSourceFile(i.document,s);if(p){let h=new Ls;return h.appendMarkdown(`

Excerpt of the existing test file:

`),h.appendCodeblock(await d(p),i.document.languageId),h.appendMarkdown(`
Because a test file exists:`),h.appendMarkdown(`
- Do not generate preambles, like imports, copyright headers etc.`),h.appendMarkdown(`
- Do generate code that can be appended to the existing test file.`),{userMessages:[h.value],references:[new hn(p)]}}let f=await l.findAnyTestFileForSourceFile(i.document,s);if(!f)return;let m=new Ls(`This is sample test file:

`);return m.appendCodeblock(await d(f),i.document.languageId),{userMessages:[m.value]}}},VM=class{constructor(){this.promptDescription="Information about existing or related files containing tests.";this.kind="tests/test2impl";this._decoder=new GM.TextDecoder}async resolveContext(e,r,n,i,o,s){if(!i||!e0(i.document))return;let a=e.get(Pr),l=new Z_(e.get(ol)),u=(await e.get(Xt).getChatEndpointInfo()).modelMaxTokenWindow*4/3;function d(h,g,v=u){return`${Fr.forUri(i.language,h)}

${g.substring(0,v)}`}let p=async h=>{let g=this._decoder.decode(await a.readFile(h));return d(h,g)},f=await l.findFileForTestFile(i.document,s);if(!f)return;let m;try{let h=await e.get(He).openTextDocument(f),g=h.getText(),v=await lM(e,h,100),{outlineAbove:y,outlineBelow:_}=qM(g,v,{startOffset:g.length,endOffset:g.length},""),T=`${y}
${_}`;m=new Ls(`
This is an excerpt of the file that this test is covering:

`),m.appendCodeblock(d(f,T),i.document.languageId)}catch{}return m||(m=new Ls(`
This is an excerpt of the file that this test is covering:

`),m.appendCodeblock(await p(f),i.document.languageId)),{userMessages:[m.value],references:[new hn(f)]}}};Ke.register(new t0);Ke.register(new VM);var Lu=class t{constructor(){this.id=t.ID;this.locations=[2,1];this.description="Generate unit tests for the selected code";this.intentDetectionInput={sampleQuestion:"Write a set of detailed unit test functions for the code above."};this.commandInfo=void 0}static{this.ID="tests"}async invoke(e,r,n){if(!n)throw new Error("Open a file to generate tests.");return e0(n.document)?new $M(this,r,e,n):new zM(this,r,e,n)}},$M=class{constructor(e,r,n,i){this.intent=e;this.location=r;this.accessor=n;this.context=i;this.promptCrafter=new ui(this.accessor,{queryPrefix:"Please generate tests for my code.",requiredContextKinds:["inline-chat-selection","tests/test2impl"]},this.location,this.context);this.createReplyInterpreter=Kp.createFactory(this.accessor,this.promptCrafter,this.context);this.responseProcessor=(e,r,n)=>{let i=new rT;return(async()=>{let o=[Gn.begin(this.context.language),Gn.end(this.context.language),Fr.forLanguage(this.context.language)];for await(let s of vM(i.asyncIterable))s.kind===1&&o.some(a=>s.value.startsWith(a))||n.report({content:s.value})})().catch(o=>console.error(o)),i}}},zM=class{constructor(e,r,n,i){this.intent=e;this.location=r;this.accessor=n;this.context=i;this.createReplyInterpreter=Nu.createFactory(async e=>{let r=el(this.promptCrafter.selectionContextMetadata.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=r.code,i=this.context.document;if(this.existingTestFile){let l=await this.accessor.get(He).openTextDocument(this.existingTestFile),c=new RL;return c.set(this.existingTestFile,[Xr.insert(new mn(l.lineCount,0),n)]),{type:"workspaceEdit",workspaceEdit:c}}let o=fZ(i),s=D_.joinPath(i.uri,`../${o}`),a=new RL;return a.createFile(s,{ignoreIfExists:!0}),a.replace(s,new De(0,0,0,0),n),{type:"workspaceEdit",workspaceEdit:a}});let o=this;this.promptCrafter=new class extends ui{constructor(){super(n,{queryPrefix:"Please generate tests for my code.",requiredContextKinds:["doc-selection"]},r,i)}async buildPrompt(s,a,l,c,u){let d=await new t0().resolveContext(n,n.get(He),s,i,void 0,u);if(d){d.references?.[0]instanceof hn&&(o.existingTestFile=d.references[0].anchor instanceof D_?d.references[0].anchor:d.references[0].anchor.uri,l.report({reference:o.existingTestFile}));let p=[];for(let f of d.userMessages)p.push(new Jr({message:f,type:"user"}));s=new gn(s.systemPrompt,[s.turns.slice(0,-1),p,s.turns.slice(-1)].flat())}return super.buildPrompt(s,a,l,c,u)}}}};var r0={workspace:[Va,Lu.ID,ls,Ou,sg,ug],vscode:[kM,cg.ID]},Eo=class{constructor(e){this.accessor=e;this.commandPrefix="/";this.readConfig()}readConfig(){this._enabledCommands=Ze(this.accessor,be.ConversationSlashCommandEnablements,{default:{"*":!1}})}isCommandEnabled(e,r){if(this._enabledCommands===void 0)return!1;if(this._enabledCommands[e]===void 0){if(this._enabledCommands["*"])return!0;let n=cs.getCommand(e,r)?.intent?.commandInfo?.defaultEnablement;return typeof n=="boolean"?n:!0}return!!this._enabledCommands[e]}parse(e,r){if(e=e.trimStart(),e.startsWith(this.commandPrefix)){let n=e.indexOf(" "),i=n===-1?e.length:n,o=e.substring(this.commandPrefix.length,i),s=cs.getCommand(o,r);if(this.readConfig(),s&&this.isCommandEnabled(o,r)){let a=e.substring(i).trim();return{command:s,restOfQuery:a}}}return{restOfQuery:e}}getCommand(e,r){return this.allCommands(r).find(n=>n.commandId===e)}allCommands(e){return this.readConfig(),cs.getCommands(e).filter(r=>this.isCommandEnabled(r.commandId,e))}};var WM=require("crypto");var rn=Cr("IEmbeddingsComputer"),fg=class{constructor(e){this.accessor=e}async computeEmbeddings(e,r){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(Xt).getEmbeddingsEndpointInfo());let n=this._embeddingEndpoint.maxBatchSize,i=this._embeddingEndpoint.modelMaxTokenWindow;return this.fetchResponseWithBatches(e,r,i,n)}async fetchResponseWithBatches(e,r,n,i){let o=[],s=this.accessor.get(Fs),a=[],l=0;for(let c of e){let u=s.tokenLength(c);if(l+u>=n||a.length>=i){let d=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,(0,WM.randomUUID)(),a,r);if(d.type==="failed")return;o.push(...d.embeddings),a=[],l=0}a.push(c),l+=u}if(a.length>0){let c=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,(0,WM.randomUUID)(),a,r);if(c.type==="failed")return;o.push(...c.embeddings)}return o.length===0?void 0:o}async rawEmbeddingsFetchWithTelemetry(e,r,n,i){let o=Date.now(),s=this.accessor.get(nr),a=await this.rawEmbeddingsFetch(e,r,n,i);return a.type==="failed"?(s.sendTelemetryEvent("embedding.error",{type:a.type,reason:a.reason}),a):(s.sendTelemetryEvent("embedding.success",{},{tokenCount:a.embeddings.reduce((l,c)=>l+c.length,0),timeToComplete:Date.now()-o}),a)}async rawEmbeddingsFetch(e,r,n,i){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(Xt).getEmbeddingsEndpointInfo());try{let o=e.get(Ot),s=o instanceof Gh?await o.getEmbeddingsToken(e):await o.getCopilotToken(e),a={input:n,model:"copilot-text-embedding-ada-002"};this._embeddingEndpoint.interceptBody?.(a);let l=await Cb(e,this._embeddingEndpoint,s.token,"copilot-panel",r,a,i),c=await l.json();return l.status===200&&c.data?{type:"success",embeddings:c.data.map(u=>u.embedding)}:{type:"failed",reason:c.error}}catch(o){let s=o?.message??"Unknown error";return s.match(/Unexpected.*JSON/i)&&(s="timeout"),{type:"failed",reason:s}}}},HPe=.72;function hZ(t,e,r,n=HPe){return e.flatMap(i=>{let o=0;for(let s of t){let a=i.embedding.reduce((l,c,u)=>l+c*s[u],0);o=Math.max(o,a)}return{score:o,item:i}}).filter(i=>i.score>n).sort((i,o)=>o.score-i.score).slice(0,r).map(i=>i.item)}var TZ=require("crypto"),IZ=Te(yZ()),wZ=require("util");var js=class{getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>r.scheme===e.scheme&&r.authority===e.authority&&e.fsPath.startsWith(r.fsPath))}};var _Z=1.25,QPe=.75,XPe=4,JPe=250,VT=JPe*XPe;function Bu(t){return new mn(t.row,t.column)}function Qp(t){return new De(Bu(t.range.startPosition),Bu(t.range.endPosition))}function ZPe(t,e){return e+t.replace(/\n/g,`
${e}`)}function e1e(t,e){let r=t.length<e.length?t:e;if(r.length===0)return"";for(let n=1;n<r.length;n++)t.substring(0,n)!==e.substring(0,n)&&r.substring(0,n-1);return r}function xZ(t){let e=t.map(o=>{if(!o)return;let s=o.match(/^\s+/),a=s?s[0]:"",l=o.substring(a?.length);return[a,l]}),r=e.filter(o=>!!o),n=t1e(r)??"",i=n.length;return{trimmedLines:e.map(o=>o?o[0].substring(i)+o[1]:""),shortestLeadingCommonWhitespace:n}}function t1e(t){let e;for(let r of t){if(e===void 0){e=r[0];continue}e=e1e(e,r[0])}return e??""}function bZ({text:t,maxCharLength:e=VT,removeEmptyLines:r=!0}){let n=t.split(/\n/),i=new mn(0,0),o=[],s=[],a,l=()=>{let d=xZ(s);a=d.shortestLeadingCommonWhitespace,s=d.trimmedLines},c=d=>{let p=s.map(h=>h||`
`);if(p.length===1)p[0]=p[0]?.trim();else if(p.length===0)return;let f=new mn(d,p[p.length-1].length),m=new De(i,f);o.push({text:p.reduce((h,g)=>h+g,""),range:m}),s=[],i=new mn(f.line+1,0),a=void 0},u=new De(0,0,n.length-1,n[n.length-1].length);return EZ(n,u,e,c,l,d=>s.push(d),()=>s.map(d=>d?.length??0).reduce((d,p)=>d+p,0),()=>a,r),s&&(a===void 0&&l(),c(u.end.line)),o.filter(d=>!r||d.text.length&&/[\w\d]{2}/.test(d.text))}function EZ(t,e,r,n,i,o,s,a,l){let c=e.start.line,u=r*QPe,d=r*_Z,p=(m,h)=>{let g=a(),v=m,y=!1;g!==void 0&&(v.startsWith(g)?(v=v.substring(g.length),y=!0):n(c+h)),v=sl(v);let T=s()+v.length+1;T>=u&&T<=d?g===void 0?(i(),p(v,h)):(v.length&&o(v),n(c+h)):T>d?g===void 0?(i(),p(v,h)):(y&&(v=g+v),n(c+h),v.length&&p(v.slice(0,r),h)):v.length&&o(v+`
`)},f="";for(let m=0;m<t.length;m++){let h=t[m];if(h.length===0){l||o(void 0);continue}p(f+h,m),f=""}}function CZ({lineRangeText:t,maxCharLength:e=VT,indentString:r="",removeEmptyLines:n=!0}){if(t.length===0)return[];let i=t[0].range.start,o=[],s=[],a,l=()=>{let u=xZ(s);a=u.shortestLeadingCommonWhitespace,s=u.trimmedLines},c=u=>{let d=s.map(m=>m||`
`);if(d.length===1)d[0]=d[0]?.trim();else if(d.length===0){s=[],a=void 0;return}let p=new mn(u,d[d.length-1].length+r.length),f=new De(i,p);o.push({text:d.reduce((m,h)=>m+h,""),range:f}),s=[],i=new mn(p.line+1,0),a=void 0};for(let u of t){let d=u.text.split(/\n/),p=e-r.length*d.length;if(p<0)throw Error("Cannot chunk text, not enough chunk room");EZ(d,u.range,p,c,l,f=>s.push(f),()=>s.map(f=>f?.length??0).reduce((f,m)=>f+m,0),()=>a,n)}return s&&(a===void 0&&l(),c(t[t.length-1].range.end.line)),o.map(u=>({text:ZPe(sl(u.text),r),range:u.range})).filter(u=>!n||u.text.length&&/[\w\d]{2}/.test(u.text))}function sl(t){return t.replace(/\s+$/,"")}function i0(t,e,r,n,i,o=!0){return e.length===0?[]:e.map((s,a)=>{let l=t.length===0?"":`${t} `;o&&(l+="{"),a!==0&&(l+=`
${n+i}...`),(t.length>0||a!==0)&&(l+=`
`);let c="";return a!==e.length-1&&(c+=`
${n+i}...`),(t.length>0||a!==e.length-1)&&(c+=`
`),o&&(c+=`${n}}`),Array.isArray(s)?s.map(u=>({range:u.range,text:l+u.text+c})):{range:new De(a===0?r.start:s.range.start,s.range.end),text:l+s.text+c}}).flat()}function r1e(t,e,r){let n=(r+t.text.replace(/(^\s*\{)|(\}\s*$)/g,"")).split(`
`),i=t.range.start.line,o=[],s=i,a=(c,u)=>{let d=[];for(let p=c;p<u;p++)d.push(n[p-i]);o.push({text:d.join(`
`),range:new De(new mn(c,0),new mn(u,n[u-i]?.length??0))})},l=c=>{o.push({text:c.summary,range:c.range})};return e.sort((c,u)=>c.range.start.line-u.range.start.line||c.range.end.line-u.range.end.line),e.forEach(c=>{a(s,c.range.start.line),l(c),s=c.range.end.line+1}),a(s,t.range.end.line+1),o}function o0(t,e,r,n,i,o,s){let a=r1e(e,r.map(c=>({summary:sl(c.summary),range:c.range})),i+o),l;try{l=CZ({lineRangeText:a,indentString:i+o,removeEmptyLines:!1})}catch{return[]}return i0(t,l,n,i,o,s)}var mg=class{constructor(e){this._queryTree=e}async parse(e,r){let n=await this._queryTree,i=this._parseBlocks(n.roots,"",e,r),o=i.content.flat(),s=i.outline??[],a=o0("",{text:n.syntaxTreeRoot.text,range:Qp(n.syntaxTreeRoot)},s,new De(0,0,n.syntaxTreeRoot.range.endPosition.row,n.syntaxTreeRoot.range.endPosition.column),"","",!1);return a.length===1&&(a[0]={...a[0],isFullFile:!0}),o.push(...a),o}_parseBlocks(e,r,n,i){return this._parseSemanticStructure(e,r,n,i,(o,s,a,l)=>{let c=r+l+s.text.replace(/(^\s*\{)|(\}\s*$)/g,""),u=()=>{let m;try{m=CZ({lineRangeText:[{range:s.range,text:c}],maxCharLength:a,indentString:r+l})}catch{return{content:{text:[],isFull:!1},outline:[]}}return{content:{text:m,isFull:!0}}};if(c.length<=n*_Z||o.length===0)return u();let d=this._parseBlocks(o,r+l,a,i),p=d.content,f=d.outline;return{content:{text:p,isFull:!1},outline:f}})}_parseSemanticStructure(e,r,n,i,o){return{outline:void 0,content:[]}}};var al=class extends mg{_parseSemanticStructure(e,r,n,i,o){let s=[],a=c=>{let u=[],d=c.info,p=d.mainBlock,f=d.detailBlocks.comments,m=d.detailBlocks.body,h=m.startIndex-p.startIndex,g="",y=m.text.match(new RegExp(`\\n(\\s*)${r}`));y&&y.length>1&&(g=y[1]);let _="";for(let N of f)_+=r+N.text+`
`;let T=r+p.text.substring(0,h),I=_+T,R=Qp(p);f.length>0&&(R=R.with(Bu(f[0].range.startPosition)));let w=i*n,O=sl(I),V=O;O.length>w&&(O=T,O.length>w&&(O=""));let L={text:m.text,range:Qp(m)},A=o(c.children,L,n-O.length,g);return R=new De(R.start,Bu(p.range.endPosition)),A.content.text.length>0&&(u.push(...i0(O,A.content.text,R,r,g)),s.push({summary:V+" ...",range:R})),A.outline!==void 0&&u.push(...o0(O,L,A.outline,R,r,g,!0)),u},l=e.map(c=>a(c));return{outline:s,content:l}}};var GT=class extends mg{_parseSemanticStructure(e,r,n,i,o){let s=[],a=c=>{let u=[],d=c.info,p=d.mainBlock,f=d.detailBlocks.decorator,m=d.detailBlocks.docstring,h=d.detailBlocks.body,g=p.text.length-1;m?g=m.endIndex-p.startIndex:h&&(g=h.startIndex-p.startIndex);let v="",_=p.text.substring(0,h.startIndex-p.startIndex).match(new RegExp(`\\n(\\s*)${r}$`));_&&_.length>1&&(v=_[1]);let T=f?r+f.text+`
`:"",I=r+p.text.substring(0,g),R=T+I,w=Qp(p);f&&(w=w.with(Bu(f.range.startPosition)));let O=i*n,V=sl(R),L=V;V.length>O&&(V=r+sl(R.substring(0,h.startIndex-p.startIndex)),V.length>O&&(V="")),w=new De(w.start,Bu(p.range.endPosition)),s.push({summary:m?L+`
${v}...`:L+" ...",range:w});let A={text:h.text,range:Qp(h)},N=o(c.children,A,n-V.length,v),q=r+sl(p.text.substring(0,h.startIndex-p.startIndex));return N.content.isFull&&(V=q),N.content.text.length>0&&(u.push(...i0(V,N.content.text,w,r,v,!1)),N.outline!==void 0&&u.push(...o0(q,A,N.outline,w,r,v,!1))),u},l=e.map(c=>a(c));return{outline:s,content:l}}};var n1e=.6,i1e=[{fileExtensions:["ts","mts","cts"],parse:(t,e)=>new al(Xp(t,"typescript")).parse(e.maxCharLength,e.maxHeaderLengthFactor)},{fileExtensions:["js","mjs","cjs"],parse:(t,e)=>new al(Xp(t,"javascript")).parse(e.maxCharLength,e.maxHeaderLengthFactor)},{fileExtensions:["py"],parse:(t,e)=>new GT(Xp(t,"python")).parse(e.maxCharLength,e.maxHeaderLengthFactor)},{fileExtensions:["java"],parse:(t,e)=>new al(Xp(t,"java")).parse(e.maxCharLength,e.maxHeaderLengthFactor)},{fileExtensions:["cpp"],parse:(t,e)=>new al(Xp(t,"cpp")).parse(e.maxCharLength,e.maxHeaderLengthFactor)},{fileExtensions:["cs"],parse:(t,e)=>new al(Xp(t,"csharp")).parse(e.maxCharLength,e.maxHeaderLengthFactor)},{fileExtensions:["go"],parse:(t,e)=>new al(Xp(t,"go")).parse(e.maxCharLength,e.maxHeaderLengthFactor)}];function SZ(t){let e=Tt.extname(t).toLowerCase().replace(/\./,"");return i1e.find(r=>r.fileExtensions.includes(e))}function $T(t){return!!SZ(t)}var XM;async function Xp(t,e){return XM=XM?.then(async()=>await aM(e,t))??aM(e,t),await XM}async function JM({text:t,maxCharLength:e=VT,uri:r,maxHeaderLengthFactor:n=n1e,shouldSemanticChunk:i=!1}){let o=[];try{if(i){let s=await SZ(r)?.parse(t,{maxCharLength:e,maxHeaderLengthFactor:n});s&&o.push(...s.map(a=>({file:r,text:a.text,range:a.range,isFullFile:a.isFullFile})))}}catch{o=[]}if(!o.length){let s=bZ({text:t,maxCharLength:e});o.push(...s.map(a=>({file:r,text:a.text,range:a.range,isFullFile:s.length===1})))}return o.filter(s=>s.text)}var o1e=new Set(["jpg","jpeg","jpe","png","gif","bmp","tif","tiff","tga","ico","webp","svg","eps","heif","heic","pdf","raw","mp4","m4v","mkv","webm","mov","avi","wmv","flv","mp3","wav","m4a","flac","ogg","wma","weba","aac","7z","bz2","gz","gz","rar","tar","xz","zip","vsix","db","bin","dat","hex","map","wasm","pyc","pdb","sym","git"]),s1e=["node_modules","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],a1e=[".DS_Store","Thumbs.db","package-lock.json","yarn.lock"],c1e=["vscode","vscode-userdata","output","inmemory","private","git"];function Jp(t,e){if(c1e.includes(t.scheme)||e&&!["file","untitled"].includes(t.scheme)&&!e.workspaceFolders?.some(i=>t.scheme===i.scheme))return!1;let r=Tt.extname(t).replace(/\./,"").toLowerCase();return!(o1e.has(r)||a1e.includes(Tt.basename(t).toLowerCase())||t.fsPath.toLowerCase().split(/[/\\]/g).some(i=>s1e.includes(i)))}async function l1e(t,e=1e5,r){let n=t.get(He),i=t.get(Ki),o=t.get(Hs);if(await o.init(),r?.isCancellationRequested)return[];let s=new bo;for(let a of n.workspaceFolders??[]){if(s.size>=e)break;let l=await i.findFiles(new Yp(a,"**/*"),void 0,e-s.size);if(r?.isCancellationRequested)return[];for(let c of l)Jp(c,n)&&!o.isIgnored(c)&&s.set(c)}return s.keys()}var zT=class{constructor(e){this._uri=e;this._isDisposed=!1;this._disposedCts=new Fp}dispose(){this._isDisposed=!0,this._disposedCts.cancel(),this._disposedCts.dispose()}get uri(){return this._uri}async getHash(e){if(this._hash===void 0){let r=await this.getText(e);r!==void 0&&(this._hash=(0,TZ.createHash)("sha256").update(r).digest("hex"))}return this._hash}async getBasicChunks(e){return this._basicChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:JM({text:r,uri:this._uri,shouldSemanticChunk:!1})),await tT(this._basicChunks,e)??[]}async getSemanticChunks(e){return $T(this.uri)?(this._semanticChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:JM({text:r,uri:this._uri,shouldSemanticChunk:!0})),await tT(this._semanticChunks,e)??[]):this.getBasicChunks(e)}},ZM=class extends zT{constructor(r,n){super(r);this._fs=n}async getText(r){return this._text??=this._fs.readFile(this.uri).then(async n=>this._isDisposed||await(0,IZ.isBinaryFile)(Buffer.from(n))||this._isDisposed?"":new wZ.TextDecoder().decode(n),n=>""),await tT(this._text,r)??""}},WT=class extends zT{constructor(r){super(r.uri);this._textDocument=r}async getText(r){return this._textDocument.getText()}},Co=class{constructor(e){this._textDocumentFiles=new bo;this._fsFiles=new bo;this._disposables=[];this._listeners=new Set;this._accessor=e,this._fileSystem=e.get(Pr)}get size(){return this._fsFiles.size}dispose(){this._disposables.forEach(e=>e.dispose());for(let e of this._fsFiles.values())e.dispose();this._fsFiles.clear();for(let e of this._textDocumentFiles.values())e.dispose();this._textDocumentFiles.clear()}get(e){return this._textDocumentFiles.get(e)||this._fsFiles.get(e)}*entries(){let e=new bo;for(let[r,n]of this._textDocumentFiles.entries())yield[r,n],e.set(r);for(let[r,n]of this._fsFiles.entries())e.has(r)||(e.set(r),yield[r,n])}*keys(){for(let[e]of this.entries())yield e}*values(){for(let[e,r]of this.entries())yield r}addListener(e){return this._listeners.has(e)?{dispose:()=>{}}:(this._listeners.add(e),{dispose:()=>{this._listeners.delete(e)}})}registerListeners(){let e=this._accessor.get(js),r=this._accessor.get(He),n=o=>{if(!Jp(o.uri,r))return;let s=this._textDocumentFiles.get(o.uri),a=this._fsFiles.get(o.uri);s&&s.dispose(),this._textDocumentFiles.set(o.uri,new WT(o)),!s&&!a?this._listeners.forEach(l=>l.onDidCreateFile?.(o.uri)):this._listeners.forEach(l=>l.onDidChangeFile?.(o.uri))};this._disposables.push(e.onDidOpenTextDocument(n)),this._disposables.push(e.onDidChangeTextDocument(o=>n(o.document))),this._disposables.push(e.onDidCloseTextDocument(o=>{let s=this._textDocumentFiles.get(o.uri);if(!s)return;this._textDocumentFiles.delete(o.uri),s.dispose(),this._fsFiles.get(o.uri)?this._listeners.forEach(l=>l.onDidChangeFile?.(o.uri)):this._listeners.forEach(l=>l.onDidDeleteFile?.(o.uri))}));let i=r.createFileSystemWatcher("**/*");this._disposables.push(i),this._disposables.push(i.onDidChange(o=>{if(!Jp(o,r))return;let s=this._fsFiles.has(o);this.createOrUpdateFsEntry(o),s?this._listeners.forEach(a=>a.onDidChangeFile?.(o)):this._listeners.forEach(a=>a.onDidCreateFile?.(o))})),this._disposables.push(i.onDidCreate(o=>{Jp(o,r)&&(this._fsFiles.has(o)||(this.createOrUpdateFsEntry(o),this._listeners.forEach(s=>s.onDidCreateFile?.(o))))})),this._disposables.push(i.onDidDelete(o=>{let s=this._fsFiles.get(o);s&&(s.dispose(),this._fsFiles.delete(o),this._listeners.forEach(a=>a.onDidDeleteFile?.(o)))}))}initialize(){return this._initializedWorkspacePromise??=(async()=>{this.registerListeners();let e=this._accessor.get(He),r=this._accessor.get(js);for(let i of r.textDocuments)Jp(i.uri,e)&&this._textDocumentFiles.set(i.uri,new WT(i));let n=await l1e(this._accessor);for(let i of n)this.createOrUpdateFsEntry(i)})(),this._initializedWorkspacePromise}createOrUpdateFsEntry(e){let r=this._fsFiles.get(e);r&&r.dispose();let n=new ZM(e,this._fileSystem);this._fsFiles.set(e,n)}};var kZ=Te(require("util"));var AZ=Te(require("util"));var hg=Cr("IRemoteSkillsService"),s0=new Map,KT=class{constructor(e){this.accessor=e;this.skills=new Map;this.skillRegistrations=new Map;this._logger=new Re(this.accessor,"RemoteSkillsService")}async refreshRemoteSkills(e){let r=new Set(this.skills.keys());try{let n=await this.accessor.get(Ot).getBasicGitHubToken();if(!n)throw new Error("Failed to auth with repo scope");if(e?.isCancellationRequested)return;let i=Ze(this.accessor,be.AgentsEndpointUrl,{default:"https://api.githubcopilot.com"}),s=await(await this.accessor.get(Kr).fetch(`${i}/skills`,{method:"GET",headers:{Authorization:AZ.format("Bearer %s",n),"Copilot-Integration-Id":"copilot-chat",...va(this.accessor)}})).text();if(e?.isCancellationRequested)return;let a;try{a=JSON.parse(s).skills}catch(l){this._logger.warn(`Invalid /skills response: ${s} (${l})`);return}this._logger.debug(`Loaded remote skills: ${JSON.stringify(a)}`);for(let l of a)if(!r.delete(l.slug)&&(this.skills.set(l.slug,l),s0.has(l.slug))){let c=s0.get(l.slug),u=new c(this.accessor,l);this.skillRegistrations.set(l.slug,u)}}catch(n){this._logger.warn(`Failed to load remote slash commands: ${n}`)}for(let n of r)this.skills.delete(n)}getSkills(){return Array.from(this.skills.values())}getSkill(e){return this.skillRegistrations.get(e)}};function RZ(t,e){return`${Ze(t,be.AgentsEndpointUrl,{default:"https://api.githubcopilot.com"})}/skills/${e}`}function PZ(t){let e=[`repo:${t.repo}`];return t.lang&&e.push(`(lang:${t.lang.join(" OR lang:")})`),t.notLang&&e.push(`NOT (lang:${t.notLang.join(" OR lang:")})`),t.path&&e.push(`(path:${t.path.join(" OR path:")})`),t.notPath&&e.push(`NOT (path:${t.notPath.join(" OR path:")})`),e.join(" ")}function e2(t){t=t.replace(/^git@/,""),t=t.replace(/\.git$/,"");try{let e=zi.parse(t);return e.authority!=="github.com"&&e.scheme!=="github.com"?void 0:e.path.replace(/^\//,"")}catch{return}}var Zp="codesearch",t2="docssearch",YT=class{constructor(e,r){this.accessor=e;this.info=r;this._logger=new Re(this.accessor,"CodeOrDocsSearchSkill")}async isAvailable(){if(!this.accessor.get(He).currentRepository)return!1;let r=this.getRepoName();if(!r)return!1;try{return await this.search("the",{repo:r},1,.1),!0}catch{return!1}}async search(e,r,n=6,i=.766){let o=this.accessor.get(Ot),s=await o.getPermissiveGitHubToken({silent:!0})??await o.getBasicGitHubToken(),a=RZ(this.accessor,this.info.slug),l=5,c=0,u=this.getRepoName();if(!u)throw new Error("Failed to get repo name");r??={repo:u},r.repo??=u;let d;for(;c<l;)try{let p=await this.accessor.get(Kr).fetch(a,{method:"POST",headers:{"Copilot-Integration-Id":"copilot-chat",Accept:"application/json",Authorization:kZ.format("Bearer %s",s),...va(this.accessor)},body:JSON.stringify({query:e,scopingQuery:PZ(r),similarity:i,limit:n})}),f=await p.text(),m;try{m=JSON.parse(f)}catch{throw f}if(!m)return this._logger.debug(`No results from remote skill for query: ${e}`),[];if(Array.isArray(m))return m;d=`Error fetching remote skill. Status: ${p.status}. Error: ${f}`;break}catch(p){c++;let f=c*1e3;this._logger.warn(`Error fetching remote skill. Retrying in ${c} seconds. Error: ${p}`),await new Promise(m=>setTimeout(m,f))}throw new Error(d??`Failed to fetch remote skill after ${l} retries`)}getRepoName(){let e=this.accessor.safeGet(He)?.currentRepository;if(!e)return;let r,n=e.remotes.findIndex(i=>i==="origin");if(n!==-1&&e.remoteFetchUrls?.[n]&&(r=e2(e.remoteFetchUrls[n])),!r&&e.remoteFetchUrls){for(let i of e.remoteFetchUrls)if(i&&(r=e2(i),r))break}return r}};s0.set(Zp,YT);s0.set(t2,YT);var Uu=class{constructor(e){this._accessor=e;this.disposables=new Array}dispose(){for(;this.disposables.length;)this.disposables.pop()?.dispose()}_register(e){return this.disposables.push(e),e}async getShouldUseAda(){let e=Ze(this._accessor,be.WorkspaceUseAdaEnabled,{default:void 0});return e!==void 0?e:await this._accessor.get(qa).getTreatmentVariableAsync("vscode","copilotchat.workspaceUseAda",!0)??!0}};var wre=require("path");var p2=Te(XZ());function JZ(t,e){return typeof e=="string"?p2.default.isMatch(t.fsPath,e,{dot:!0}):p2.default.isMatch(t.fsPath,e.pattern,{dot:!0})}function ZZ(t,e){return e.exclude?.some(r=>JZ(t,r))?!1:e.include?e.include.some(r=>JZ(t,r)):!0}var Sre=Te(require("tls"));var bre=Te(require("fs"));var qu=class{constructor(){this.cache=new Map}get(e){return this.cache.get(e)}set(e,r){this.cache.set(e,r)}};var Hu=class{async loadCaCerts(){}};var ki=class{},Ere=(t,e=process.platform)=>new _F(t.get(fi),ADe(e,t),new wF),_F=class extends ki{constructor(r,n,i){super();this.realReader=n;this.noopReader=i;this.delegate=n,r.on("onCopilotToken",o=>{this.delegate=o.getTokenValue("ssc")==="1"?this.realReader:this.noopReader})}getAllRootCAs(){return this.delegate.getAllRootCAs()}},ADe=(t,e)=>{let r=e.get(qu).get(t);if(r)return r;let n=RDe(t,e),i=new EF(n),o=new bF(i),s=new xF(e,o);return e.get(qu).set(t,s),s},RDe=(t,e)=>{switch(t){case"linux":return new CF;case"darwin":return new SF;case"win32":return new TF(e);default:return new IF}},xF=class extends ki{constructor(r,n){super();this.accessor=r;this.delegate=n}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return new Re(this.accessor,"certificates").warn(`Failed to read root certificates: ${r}`),[]}}},bF=class extends ki{constructor(r){super();this.delegate=r}async getAllRootCAs(){return this.certificates||(this.certificates=await this.delegate.getAllRootCAs()),this.certificates}},EF=class extends ki{constructor(r){super();this.delegate=r}async getAllRootCAs(){let r=await this.delegate.getAllRootCAs(),n=process.env.NODE_EXTRA_CA_CERTS;if(!n)return r;let i=await Cre(n);return r.concat(i)}},CF=class extends ki{async getAllRootCAs(){let e=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let n=await Cre(r);e=e.concat(n)}return e}},SF=class extends ki{async getAllRootCAs(){let e=xre();return e.all(e.der2.pem).filter(r=>r!==void 0)}},TF=class extends ki{constructor(r){super();this.accessor=r}async getAllRootCAs(){return await this.accessor.get(Hu).loadCaCerts()||[]}},IF=class extends ki{async getAllRootCAs(){throw new Error("No certificate reader available for unsupported platform")}},wF=class extends ki{async getAllRootCAs(){return[]}};async function Cre(t){try{let n=(await bre.promises.readFile(t,{encoding:"utf8"})).split(/(?=-----BEGIN CERTIFICATE-----)/g).filter(o=>o.length>0),i=new Set(n);return Array.from(i)}catch(e){if(e?.code!=="ENOENT")throw e}return[]}var DI=class{constructor(e){this._certificateReader=e.get(ki)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async applyToRequestOptions(e){let r=await this._certificateReader.getAllRootCAs(),n={_vscodeAdditionalCaCerts:r};e.secureContext=Sre.createSecureContext(n),e.ca=r,e.cert=r,r.map(i=>{e.secureContext.context.addCACert(i)})}};var Tre=Te(require("http"));var Zu=class{async loadKerberos(){}};var PDe=407,ed=class{},fl=class extends Error{constructor(r,n,i){super(r);this.cause=n;this.responseStatus=i}};function Ire(t){return new AF(t,new RF(t))}var AF=class extends ed{constructor(r,n,i=process.platform){super();this.accessor=r;this.delegate=n;this.platform=i;this.successfullyAuthorized=new jd(20);this.logger=new Re(r,"proxy-socket-factory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(this.logger.debug("Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof fl&&i.responseStatus===PDe){this.logger.debug("Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return this.logger.debug("Proxy authorization successful, caching result"),this.successfullyAuthorized.put(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(this.logger.debug("Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(this.logger.debug("Proxy authorization successful, received token"),i)return this.logger.debug("Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){this.logger.debug("Loading kerberos module");let n=await kDe(this.accessor);if(!n){this.logger.debug("Could not load kerberos module");return}let i=this.computeSpn(r);this.logger.debug("Initializing kerberos client using spn",i);let o=await n.initializeClient(i);this.logger.debug("Perform client side kerberos step");let s=await o.step("");return this.logger.debug("Received kerberos server response"),s}computeSpn(r){let n=Ze(this.accessor,be.KerberosServicePrincipal,{default:r.kerberosServicePrincipal});if(n)return this.logger.debug("Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.host}`:`HTTP@${r.host}`;return this.logger.debug("Using default kerberos spn",i),i}getProxyCacheKey(r){return r.host+":"+r.port}},RF=class extends ed{constructor(r){super();this.logger=new Re(r,"proxy-socket-factory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,s)=>{this.logger.debug("Attempting to establish connection to proxy");let a=Tre.request(i);a.useChunkedEncodingByDefault=!1,a.once("connect",(l,c,u)=>{this.logger.debug("Socket Connect returned status code",l.statusCode),a.removeAllListeners(),c.removeAllListeners(),l.statusCode!==200?(c.destroy(),s(new fl("tunneling socket could not be established",void 0,l.statusCode))):u.length>0?(c.destroy(),s(new fl("got illegal response body from proxy"))):(this.logger.debug("Successfully established tunneling connection to proxy"),o(c))}),a.once("error",l=>{this.logger.debug("Proxy socket connection error",l.message),a.removeAllListeners(),s(new fl("tunneling socket could not be established",l))}),a.on("timeout",()=>{this.logger.debug("Proxy socket connection timeout"),s(new fl(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.host}:${i.port}`))}),a.end()})}createConnectRequestOptions(r,n){let i={...n,method:"CONNECT",path:r.host+":"+r.port,agent:!1,headers:{host:r.host+":"+r.port,"Proxy-Connection":"keep-alive"},timeout:r.timeout};return r.localAddress&&(i.localAddress=r.localAddress),this.configureProxyAuthorization(i,r),i}configureProxyAuthorization(r,n){r.headers["Proxy-Authorization"]=[],r.proxyAuth&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(r.proxyAuth).toString("base64")),n.headers&&n.headers["Proxy-Authorization"]&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}};async function kDe(t){try{return t.get(Zu).loadKerberos()}catch{return}}var Og=class extends Kr{constructor(r){super();this.accessor=r;this.createSocketFactory=(r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);try{return await this.proxySocketFactory.createSocket(i,o)}catch(s){throw s instanceof fl&&s.cause?new Error(`${s.message}, cause=${s.cause.message}`):new Error(s.message)}};this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new DI(r),this.proxySocketFactory=r.get(ed)}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.accessor)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.accessor)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(r){let n=r.get(uo);return O4({userAgent:`GitHubCopilotChat/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(r,n){let i={...n,body:n.body?n.body:n.json,signal:n.signal};await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(o);let s=await this.fetchApi.fetch(r,i);return new bb(s.status,s.statusText,s.headers,()=>s.text(),()=>s.json(),async()=>s.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new D4}};function td(t,e){let r=t.reduce((o,s,a)=>o+s*e[a],0),n=Math.sqrt(t.reduce((o,s)=>o+s*s,0)),i=Math.sqrt(e.reduce((o,s)=>o+s*s,0));return r/(n*i)}var Dg=class{constructor(e,r,n,i){this.accessor=e;this.cacheType=r;this.cacheKey=n;this.cacheVersion=i;this.cacheVersionKey=`${n}-version`,this.fileSystem=e.get(Pr)}get cacheStorageUri(){return this.cacheType===2?this.accessor.get(Ht).storageUri:this.accessor.get(Ht).globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.accessor.get(Ht).workspaceState:this.accessor.get(Ht).globalState}async updateCache(e){if(!this.cacheStorageUri||!this.fileSystem.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystem.stat(this.cacheStorageUri)}catch{await this.fileSystem.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion),this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let n=Tt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await(e===void 0?this.fileSystem.delete(n,{useTrash:!1}):this.fileSystem.writeFile(n,Buffer.from(JSON.stringify(e))))}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${n}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let r=await this.fileSystem.readFile(Tt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return JSON.parse(r.toString())}catch{return}}async clearCache(){return this.updateCache(void 0)}},rd=class t extends Dg{constructor(r,n,i,o,s){super(r,n,i,o);this.helixFetcher=new Og(r),this.remoteCacheVersionKey=`${i}-version-remote`,this.remoteCacheURL=t.calculateRemoteCDNURL(s,o),this.remoteCacheLatestUpdateURL=t.calculateRemoteCDNLatestURL(s,o)}async fetchRemoteCache(){if(this._remoteCache)return this._remoteCache;try{let r=await this.helixFetcher.fetch(this.remoteCacheURL,{method:"GET"});if(r.ok)return this._remoteCache=await r.json(),this._remoteCache;console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}}async fetchRemoteCacheLatest(){try{let r=await this.helixFetcher.fetch(this.remoteCacheLatestUpdateURL,{method:"GET"});if(r.ok)return r.text();console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}}async getCache(){let r=await this.fetchRemoteCacheLatest(),n=await super.getCache();if(n&&r===this.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return n;let i=await this.fetchRemoteCache();return await this.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,r),await this.updateCache(i),i}async updateCache(r,n){if(r===void 0)return super.updateCache(r);if(!await super.getCache()||n)return super.updateCache(r)}static calculateRemoteCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/core.json`}static calculateRemoteCDNLatestURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/latest.txt`}},PF=class t extends rd{constructor(r,n,i,o,s){super(r,n,i,o,s);this._wasRemoteExtensionCacheUpdated=!1;this.baseExtensionCDNURL=t.calculateBaseRemoteExtensionCDNURL(s,o)}constructExposedCache(){if(!this._remoteExtensionCache)return;let r={...this._remoteExtensionCache.core};for(let n in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[n];for(let o in i)r[o]=i[o]}return r}async fetchRemoteExtensionCache(r){let n=`${this.baseExtensionCDNURL}/${r}.json`;try{let i=await this.helixFetcher.fetch(n,{method:"GET"});if(i.ok)return await i.json();if(i.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${n}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${n}`);return}}async getCache(){let r=await super.getCache();if(r===void 0)return;let n={core:{},extensions:{}};r&&t.isEmbeddingsCacheEntriesWithExtensions(r)?n=r:n={core:r,extensions:{}};let i=t.getInstalledExtensionIds(this.accessor),o=!1;for(let a in n.extensions)i.includes(a)||(delete n.extensions[a],o=!0);let s=i.filter(a=>!(a in n.extensions)||n.extensions[a]===void 0);for(let a of s){let l=await this.fetchRemoteExtensionCache(a);l&&(n.extensions[a]=l)}return this._remoteExtensionCache=n,this._wasRemoteExtensionCacheUpdated=s.length>0||o,this.constructExposedCache()}async updateCache(r,n){let i=r?super.updateCache(this._remoteExtensionCache,n||this._wasRemoteExtensionCacheUpdated):super.updateCache(r,n||this._wasRemoteExtensionCacheUpdated);return this._wasRemoteExtensionCacheUpdated=!1,i}static isEmbeddingsCacheEntriesWithExtensions(r){return"core"in r&&"extensions"in r}static getInstalledExtensionIds(r){return r.get(He).getAllExtensions().filter(n=>!n.id.startsWith("vscode")).map(n=>n.id)}static calculateBaseRemoteExtensionCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}`}},LI=class{constructor(e,r,n,i,o,s,a){this.cacheKey=i;this.embeddingsComputer=s;this._isIndexLoaded=!1;this._logger=new wn(r,e),this._items=new Map,a?.type&&!a.supportsExtensions?this._embeddingsCache=new rd(r,n,i,o,a.type):a?.type&&a.supportsExtensions?this._embeddingsCache=new PF(r,n,i,o,a.type):this._embeddingsCache=new Dg(r,n,i,o)}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,r){let n=Array.from(this._items.values()).map(i=>{if(!i.embedding)return{item:i,similarity:0};let o=td(e,i.embedding);return{item:i,similarity:o}});return n=n.filter(i=>i.similarity>0),n.sort((i,o)=>o.similarity-i.similarity),n.slice(0,r).map(i=>i.item)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),r=await this.getLatestItems(),n=await this._embeddingsCache.getCache(),i=new Map;for(let o of r){let s=o,a=this._items.get(o.key),l=o.key;a?.embedding?s=a:n&&n[l]&&(s={...o,...n[l]}),i.set(l,s)}this._items=i,await this._embeddingsCache.updateCache(n),this._logger.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}async fetchEmbeddingsForItems(e){return this.embeddingsComputer.computeEmbeddings(e.map(r=>this.getEmbeddingQueryString(r)),void 0)}};function uf(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var NDe="1.0.8",zs=class t{constructor(e){this._accessor=e;this._embeddingsMemoryCache=new Map;this._embeddingsComputer=e.get(rn),this._workspaceIndex=e.get(Co),this._embeddingsStorageCache=new Dg(e,2,"workspaceEmbeddingsCache",NDe),this._logger=new Re(e,"WorkspaceChunkEmbeddingsIndex"),this.loadCacheFromStorage()}static{this._MAX_EMBEDDINGS_COMPUTATION_TIME=1e4}static{this._MAX_CHUNK_LENGTH=2e3}get size(){return this._workspaceIndex.size}workspaceEmbeddingsInitialized(){return this._initializedWorkspacePromise??=this._workspaceIndex.initialize(),this._initializedWorkspacePromise}async triggerIndexing(e){let r=Array.from(this._workspaceIndex.values()),n=new Array;for(let o of r){let s=await o.getSemanticChunks(e);s=s.filter(a=>a.text.length<t._MAX_CHUNK_LENGTH),n.push(...s)}if(e.isCancellationRequested)return;let i=await this.getEmbeddings(n,e);this._logger.debug(`Indexed ${i.length} chunks`)}async searchFileChunks(e,r,n,i,o){let s;if(o)s=o;else{s=new Array;let u=Array.from(this._workspaceIndex.values()).filter(p=>ZZ(p.uri,r)),d=(await Promise.all(u.map(p=>p.getSemanticChunks(i)))).flat();if(i.isCancellationRequested)return[];s.push(...d)}s=s.filter(c=>c.text.length<t._MAX_CHUNK_LENGTH);let a=await F_(this.getEmbeddings(s,i),t._MAX_EMBEDDINGS_COMPUTATION_TIME);if(!a)throw new Error("Timeout computing embeddings");return hZ(e,a,n)}async loadCacheFromStorage(){let e=await this._embeddingsStorageCache.getCache();e||await this._embeddingsStorageCache.clearCache(),this._embeddingsMemoryCache.clear();for(let[r,n]of Object.entries(e??{}))this._embeddingsMemoryCache.set(r,n)}async getEmbeddings(e,r){let n=new Array;for(let s of e){let a=this._embeddingsMemoryCache.get(s.text);a?s.embedding=a:n.push(s)}if(n.length===0)return e;let i=n.map(s=>{let a=this._accessor.get(He).getWorkspaceFolder(s.file),l=a?(0,wre.relative)(a.path,s.file.path):s.file.fsPath;return ODe(s,l)}),o=await this.computeEmbeddingsWithRetry(i,r);for(let s=0;s<n.length;s++){let a=n[s];a.embedding=o[s],this._embeddingsMemoryCache.set(a.text,a.embedding)}return e}async computeEmbeddingsWithRetry(e,r){let i=0,o;for(;i<3;)try{if(o=await this._embeddingsComputer.computeEmbeddings(e,r),!o)throw new Error("Failed to compute embeddings");return o}catch(s){if(i++,i===3)throw s;if(r.isCancellationRequested)throw new Error("Cancelled computing embeddings");this._logger.warn(`Error computing embeddings. Retrying in ${i} seconds. Error: ${s}`),await new Promise(a=>setTimeout(a,1e3*i))}throw new Error("Failed to compute embeddings")}};function ODe(t,e){return`File: \`${e}\`
\`\`\`${Tt.extname(t.file).replace(".","")}
${t.text}
\`\`\``}var S0=class extends Uu{constructor(r){super(r);this._remoteSkillsService=r.get(hg),this._embeddingsComputer=r.get(rn),this._workspaceChunkIndex=r.get(Co),this._embeddingsIndex=r.get(zs),this._promptContext=r.get(He),this._logger=new Re(r,"CodeSearchChunkSearch")}async searchFileChunks(r,n,i,o){if(!r.length||o.isCancellationRequested)return[];let s=await this._embeddingsComputer.computeEmbeddings(r.map(c=>c.fullText),o);if(!s||o.isCancellationRequested)return[];if(await this.initialized(),o.isCancellationRequested)return[];this._logger.debug("Fetching related workspace chunks in repository...");let a=await this.getSimilarFilesFromCodeSearch(r,n);if(!a)return[];if(!await this.getShouldUseAda())return this._logger.debug("Ada disabled, returning chunks from code search"),a.slice(0,i);this._logger.debug("Remapping chunks to semantic chunks...");let l=await MI(this._accessor,a,o);this._logger.debug("Reranking results...");try{return await this._embeddingsIndex.searchFileChunks(s,n,i,o,l)}catch(c){return this._logger.warn(`Failed to search for chunks: ${c}`),a.slice(0,i)}}async isAvailable(){let r=Ze(this._accessor,be.WorkspaceCodeSearchEnabled,{default:void 0});if(r===!1||r===void 0&&await this._accessor.get(qa).getTreatmentVariableAsync("vscode","copilotchat.useCodeSearch",!0)!==!0)return!1;let n=this._remoteSkillsService.getSkill(Zp);if(!n&&(await this._remoteSkillsService.refreshRemoteSkills(),n=this._remoteSkillsService.getSkill(Zp),!n))return!1;try{return await n.isAvailable()}catch(i){return this._logger.debug(`Failed to check if code search is available: ${i}`),!1}}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}async getSimilarFilesFromCodeSearch(r,n){let i=this._remoteSkillsService.getSkill(Zp);if(!i)return;let o=[];for(let c of r)o.push(i.search(c.fullText,{path:n.include?.filter(u=>typeof u=="string"),notPath:n.exclude?.filter(u=>typeof u=="string")}));let s=await Promise.allSettled(o),a=new Array,l=this._promptContext.workspaceFolders??[];for(let c of s)if(c.status==="fulfilled")for(let u of c.value)for(let d of l){let p=this._workspaceChunkIndex.get(Tt.joinPath(d,u.path));p&&a.push({file:p.uri,score:u.score,text:u.contents,range:new De(u.range.start,0,u.range.end+1,0)})}else this._logger.warn(`Failed to get snippets: ${c.reason}`);return r.length>1?a.sort((c,u)=>u.score-c.score):a}};var Are=Object.freeze({dispose(){}});var Rre=()=>Are;var T0=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Rre});var Pre=Te(SM()),kre=Te(require("path"));function I0(t,e){if(!t)return t;if(Array.isArray(t))return t.map(r=>I0(r,e));if(typeof t=="object"){let r=e(t);if(r)return r;let n={};for(let i in t)n[i]=I0(t[i],e);return n}return t}var DDe=kre.default.join(__dirname,"tfidfWorker.js"),Lg=class{constructor(e){this._disposables=[];this._tfIdfWorker=new Jh(DDe);let r=n=>{let i=this._workspaceIndex.get(n);i&&this.addOrUpdateTfidfEntries([i])};this._workspaceIndex=e.get(Co),this._disposables.push(this._workspaceIndex.addListener({onDidChangeFile:r,onDidCreateFile:r,onDidDeleteFile:n=>{this._tfIdfWorker.proxy.delete(n)}}))}dispose(){this._disposables.forEach(e=>e.dispose()),this._tfIdfWorker.terminate()}initialized(){return this._initializePromise??=this._initializeWorkspaceFiles(),this._initializePromise}async searchFileChunks(e,r,n,i){if(await this.initialized(),i.isCancellationRequested)return[];let o=await this._tfIdfWorker.proxy.search(e.map(s=>s.keywords.join(", ")),r,n,-1/0);return MDe(o)}async _initializeWorkspaceFiles(){await this._workspaceIndex.initialize(),await this.addOrUpdateTfidfEntries(this._workspaceIndex.values())}async addOrUpdateTfidfEntries(e){let r=(0,Pre.default)(20);this._tfIdfWorker.proxy.addOrUpdate(LDe(await Promise.all(Array.from(e,n=>r(async()=>({uri:n.uri,text:await n.getText(T0),chunks:await n.getBasicChunks(T0)}))))))}};function LDe(t){return I0(t,e=>{if(zi.isUri(e))return{$mid:"uri",...e};if(e instanceof De)return{$mid:"range",start:{line:e.start.line,character:e.start.character},end:{line:e.end.line,character:e.end.character}}})}function MDe(t){return I0(t,e=>{if(e.$mid==="range")return new De(e.start.line,e.start.character,e.end.line,e.end.character);if(e.$mid==="uri")return zi.revive(e)})}var df=class extends Uu{constructor(r){super(r);this._tfidf=this._register(new Lg(r)),this._embeddingsComputer=r.get(rn),this._embeddingsIndex=r.get(zs),this._logger=new Re(r,"TfIdfWithRerankChunkSearch")}isAvailable(){return Promise.resolve(!0)}async searchFileChunks(r,n,i,o){this._logger.debug("Performing full workspace search for chunks...");let a=await this._tfidf.searchFileChunks(r,n,i*2,o);if(o.isCancellationRequested||!a.length)return[];if(!await this.getShouldUseAda())return this._logger.debug("Ada disabled, returning tfidf results..."),a.slice(0,i);this._logger.debug("Remapping chunks to semantic chunks...");let l=await MI(this._accessor,a,o);if(o.isCancellationRequested||!l.length)return[];let c=await this._embeddingsComputer.computeEmbeddings(r.map(u=>u.fullText),o);if(!c)return a.slice(0,i);this._logger.debug("Reranking results...");try{return await this._embeddingsIndex.searchFileChunks(c,n,i,o,l)}catch(u){return this._logger.warn(`Failed to search for chunks: ${u}`),a.slice(0,i)}}};var w0=class t extends Uu{constructor(r){super(r);this._embeddingsIndexReady=!1;this._embeddingsComputer=r.get(rn),this._embeddingsIndex=r.get(zs),this._tfidfWithRerankChunkSearch=new df(r),this._logger=new Re(r,"EmbeddingsCacheChunkSearch")}static{this.FILE_CAP=200}async searchFileChunks(r,n,i,o){if(!r.length||o.isCancellationRequested)return[];this._logger.debug("Computing embeddings for query...");let s=await this._embeddingsComputer.computeEmbeddings(r.map(a=>a.fullText),o);if(!s||o.isCancellationRequested)return[];if(await this.initialized(),o.isCancellationRequested)return[];if(this._logger.debug("Fetching related workspace chunks in repository..."),this._embeddingsIndexReady){this._logger.debug("Workspace Chunk Embeddings Index initialized, using it for search.");try{return await this._embeddingsIndex.searchFileChunks(s,n,i,o)}catch(a){return this._logger.warn(`Failed to search for chunks. Using TF-IDF as fallback: ${a}`),await this._tfidfWithRerankChunkSearch.searchFileChunks(r,n,i,o)}}return this._logger.debug("Workspace Chunk Embeddings Index not initialized yet, triggering indexing and falling back to TF-IDF search..."),this.triggerIndexing(),await this._tfidfWithRerankChunkSearch.searchFileChunks(r,n,i,o)}async isAvailable(){return await this.getShouldUseAda()?(await this.initialized(),this._embeddingsIndex.size<t.FILE_CAP):(this._logger.debug("Ada disabled, not using embeddings cache."),!1)}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}triggerIndexing(){this._initializedWorkspacePromise||(this._initializedWorkspacePromise=this._embeddingsIndex.triggerIndexing(T0).then(()=>{this._embeddingsIndexReady=!0,this._logger.debug("Workspace Chunk Embeddings Index initialized.")}).catch(r=>{this._logger.warn(`Failed to index workspace: ${r}`),this._initializedWorkspacePromise=void 0}))}};var Mg=Cr("IWorkspaceChunkSearch");async function FDe(t,e,r){switch(r){case"ada":return new w0(t);case"auto":return await BDe(t,e);case"codesearch+ada":return new S0(t);case"tfidf":return new Lg(t);case"tfidf+rerank":return new df(t)}}var NF;async function BDe(t,e){return NF||(NF=UDe(t,e)),NF}async function UDe(t,e){let r;try{let n=new S0(t);if(await n.isAvailable())return r="codesearch+ada",n;n.dispose();let i=new w0(t);return await i.isAvailable()?(r="ada",i):(i.dispose(),r="tfidf+rerank",new df(t))}finally{e.debug(`Using '${r}' workspace chunk search strategy`),t.get(nr).sendTelemetryEvent("workspaceChunkSearchStrategy",{strategy:r})}}var FI=class{constructor(e,r){this._accessor=e;this.forcedChunkSearchStrategy=r;this._logger=new Re(this._accessor,"WorkspaceChunkSearch")}getConfiguredStrategy(){return Ze(this._accessor,be.WorkspaceNewFlowEnabled,{default:!0})?"auto":"tfidf+rerank"}getStrategy(){let e=this.forcedChunkSearchStrategy??this.getConfiguredStrategy();return this._strategy?.strategy===e?this._strategy.impl:(this._strategy?.impl.then(r=>r.dispose()),this._strategy={strategy:e,impl:FDe(this._accessor,this._logger,e)},this._logger.debug(`Using ${this._strategy.strategy} workspace chunk search strategy`),this._strategy.impl)}dispose(){this._strategy?.impl.then(e=>e.dispose()),this._strategy=void 0}async searchFileChunks(e,r,n,i){return(await this.getStrategy()).searchFileChunks(e,r,n,i)}};async function MI(t,e,r){let n=t.get(Co),i=new bo;for(let s of e){let a=i.get(s.file);a?a.push(s):i.set(s.file,[s])}let o=await Promise.all(Array.from(i,async([s,a])=>{let l=n.get(s);if(l&&$T(s)){let c=await l.getSemanticChunks(r);if(r.isCancellationRequested)return[];let u=new Set;for(let d of a){let p=!1;for(let f of c)f.range.intersection(d.range)&&(u.add(f),p=!0);p||u.add(d)}return Array.from(u)}else return a}));return Array.from(new Set(o.flat()))}var Ji=Te(require("fs"));var BI=class extends Pr{async stat(e){let r=await Ji.promises.stat(e.fsPath);return{type:r.isFile()?1:2,ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size}}async readDirectory(e){ml(e);let r=await Ji.promises.readdir(e.fsPath,{withFileTypes:!0}),n=[];for(let i of r)n.push([i.name,i.isFile()?1:2]);return n}async createDirectory(e){return ml(e),Ji.promises.mkdir(e.fsPath)}async readFile(e){return ml(e),Ji.promises.readFile(e.fsPath)}async writeFile(e,r){return ml(e),Ji.promises.writeFile(e.fsPath,r)}async delete(e,r){return ml(e),Ji.promises.rm(e.fsPath,{recursive:r?.recursive??!1})}async rename(e,r,n){if(ml(e),ml(r),!(!n?.overwrite&&Ji.existsSync(r.fsPath)))return Ji.promises.rename(e.fsPath,r.fsPath)}async copy(e,r,n){ml(e),ml(r);let i=n?.overwrite?Ji.constants.COPYFILE_FICLONE:Ji.constants.COPYFILE_EXCL;return Ji.promises.copyFile(e.fsPath,r.fsPath,i)}isWritableFileSystem(e){return!0}};function ml(t){if(t.scheme!=="file")throw new Error(`URI must be of file scheme, received ${t.scheme}`)}function Nre(t){t.define(Xt,new Xt(t)),t.define(_c,new _c),t.define(uo,new uo),t.define(ut,new O_(t)),t.define(bc,bc.fromEnvironment(!1)),t.define(fi,new fi),t.define(qu,new qu),t.define(ki,Ere(t)),t.define(ed,Ire(t)),t.define(Kr,new Og(t)),t.define(Op,new Op(t)),t.define(vu,new vu),t.define(Vd,new Vd),t.define(Mp,new Mp),t.define(_u,new YS),t.define(ya,new Tb),t.define(Pr,new BI),t.define(rn,new fg(t)),t.define(Co,new Co(t)),t.define(Mg,new FI(t)),t.define(Eo,new Eo(t)),t.define(Zc,new Zc(t))}var Ni=Cr("IChatAgentService"),Fg="workspace",Ore="vscode";var HDe=`Here are some questions I can help with:

* General programming questions
{COMMANDS}
* _Be creative_, it's in your control`,jDe=`
You can ask me general programming questions, or chat with the following agents which have specialized expertise and can perform actions:
{COMMANDS}
`,VDe=`
To have a great conversation, ask me questions as if I was a real programmer:

* **Show me the code** you want to talk about by having the files open and selecting the most important lines.
* **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
* **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.

You can also ask me questions about your editor selection by [starting an inline chat session](command:inlineChat.start).

Learn more about [GitHub Copilot](https://docs.github.com/copilot/getting-started-with-github-copilot?tool=vscode) in [Visual Studio Code](https://code.visualstudio.com/docs/editor/artificial-intelligence).`;function Dre(t,e,r){let n=t.find(o=>o.commandId===e);if(!n)return;let i=r?`@${r} /${n.commandId} ${n.intent?.intentDetectionInput.sampleQuestion}`:`@${n.commandId} ${n.intent?.intentDetectionInput.sampleQuestion}`;return`${r?"	":""}* [\`${r?"/":"@"}${n.commandId}\`](command:github.copilot.runInPanelChat?${JSON.stringify([{message:encodeURIComponent(i)}])}) - ${n.details}`}var UI="help";cs.registerCommand({commandId:UI,details:"Learn how to use Copilot Chat",executeImmediately:!0,locations:[2],plainTextResponse(t){let r=t.get(Eo).allCommands(2),n=t.get(Ni).agentsEnabled(),i,o;n?(i=jDe,o=Object.entries(r0).reduce((l,[c,u])=>{let d=Dre(r,c);if(d){l.push(d);for(let p of u){let f=Dre(r,p,c);f&&l.push(f)}}return l},[])):(i=HDe,o=r.reduce((l,c)=>(c.commandId!==UI&&l.push(`* [\`/${c.commandId}\`](command:github.copilot.runInPanelChat?%5B%7B%22message%22%3A%22%2F${c.commandId}${encodeURIComponent(` ${c.intent?.intentDetectionInput.sampleQuestion}`)}%22%7D%5D) - ${c.details}`),l),[]));let s=i.replace("{COMMANDS}",o.join(`
`)),a=new Ls([s,VDe].join(`
`));return a.isTrusted={enabledCommands:["github.copilot.runInPanelChat","inlineChat.start"]},a}});var Lre=Cr("IGitContextModel");var GDe=require("path"),A0=class{constructor(){this.promptDescription="source code in the active document";this.kind="current-editor";this.variableInfo={name:"editor",description:"The source code in the active editor",defaultEnablement:!1}}async resolveContext(e,r){let n=r.activeTextEditor,i=n?.visibleRanges[0];if(i){if(!n.selection.isEmpty)return;let o="";n.selection.isSingleLine&&(o=`The cursor is on line: ${n.selection.start.line}`);let s="Excerpt from "+GDe.basename(n.document.uri.path)+", lines "+(i.start.line+1)+" to "+(i.end.line+1)+":\n```"+n.document.languageId+`
`+n.document.getText(i)+"\n```\n\n"+o,a=[{uri:n.document.uri,version:n.document.version,ranges:[i]}];return{userMessages:[s],usedContext:a,references:[new hn({uri:n.document.uri,range:i})]}}}};Ke.register(new A0);var Mre=Te(require("path"));var hl=class t{constructor(){this.promptDescription="Active selection";this.kind="current-selection";this.variableInfo={name:"selection",description:"The current selection"}}async resolveContext(e,r){let n=t.getCurrentSelection(r);if(n){let i=t.formatSelection(n),o=[{uri:n.activeDocument.uri,version:n.activeDocument.version,ranges:[n.range]}];return{userMessages:[`${this.promptDescription}:
${i}`],usedContext:o,references:[new hn(new M_(n.activeDocument.uri,n.range))]}}else{let i=await new A0().resolveContext(e,r);if(i){let o=i.userMessages[0],s=i.usedContext??[];return{userMessages:[`${this.promptDescription}:
${o}`],usedContext:s,references:i.references}}}}static formatSelection(e){return`

${e.fileName?`From the file: ${Mre.basename(e.fileName)}
`:""}\`\`\`${e.languageId}
${e.selectedText}
\`\`\`

`}static getCurrentSelection(e){let r=e.activeTextEditor,n=r?.document;if(n){let i=r.selection;if(i&&!i.isEmpty){let o=n.languageId,s=n.getText(i);return{languageId:o,selectedText:s,activeDocument:n,range:i,fileName:n.fileName}}}}};function MF(t,e){let r=Ze(t,be.ExplainIntentFineTunedContext,{default:!0});return typeof r=="boolean"?r:r.includes(e)}function Fre(t,e){let r=[],n=new Map,i=new Set;for(let o of e){let s=o.uri??t.uri,a=`${s.toString()}-${o.startIndex}-${o.endIndex}`;if(i.has(a))continue;i.add(a);let l=new De(t.positionAt(o.startIndex),t.positionAt(o.endIndex));r.push(new hn(new M_(s,l)));let[c,u]=n.get(s)??[o.version??t.version,[]];u.push(l),n.set(s,[c,u])}return{references:r,usedContext:[...n.entries()].map(([o,[s,a]])=>({uri:o,version:s,ranges:a}))}}var OF=class{constructor(){this.kind="current-selection-function-implementations";this.promptDescription="Relevant function implementations"}async resolveContext(e,r){if(!MF(e,this.kind))return;let n=hl.getCurrentSelection(r);if(!n)return;let i=n.activeDocument,o=await _J(e,i,n.range,200);if(!o.length)return;let s=`${this.promptDescription}:


\`\`\`${n.languageId}
${o.reduce((c,u)=>c+`
`+u.text,"")}
\`\`\`

`,{references:a,usedContext:l}=Fre(i,o);return{userMessages:[s],references:a,usedContext:l}}},DF=class{constructor(){this.promptDescription="Relevant class declarations";this.kind="current-selection-class-declarations"}async resolveContext(e,r){if(!MF(e,this.kind))return;let n=hl.getCurrentSelection(r);if(!n)return;let i=n.activeDocument,o=await xJ(e,i,n.range,200);if(!o.length)return;let s=`${this.promptDescription}:


\`\`\`${n.languageId}
${o.reduce((c,u)=>c+`
`+u.text,"")}
\`\`\`

`,{references:a,usedContext:l}=Fre(i,o);return{userMessages:[s],references:a,usedContext:l}}},LF=class{constructor(){this.promptDescription="Relevant type declarations";this.kind="current-selection-type-declarations"}async resolveContext(e,r){if(!MF(e,this.kind))return;let n=hl.getCurrentSelection(r);if(!n)return;let i=n.activeDocument,o=await bJ(e,i,n.selectedText,200);if(!o.length)return;let s=`${this.promptDescription}:


\`\`\`${n.languageId}
${o.reduce((l,c)=>l+`
`+c.text,"")}
\`\`\`

`,a=[{uri:i.uri,version:i.version,ranges:o.map(l=>new De(i.positionAt(l.startIndex),i.positionAt(l.endIndex)))}];return{userMessages:[s],usedContext:a}}};Ke.register(new hl);Ke.register(new OF);Ke.register(new DF);Ke.register(new LF);var FF=class{constructor(){this.promptDescription="Debug console output";this.kind="debug-console-output";this.variableInfo={name:"debugConsole",description:"The output in the debug console",defaultEnablement:!1}}async resolveContext(e,r){return r.debugConsoleOutput}};Ke.register(new FF);function wo(t,e){let r=e.matchAll(/^\s*(```+)/gm),n=Math.max(3,...Array.from(r,o=>o[1].length+1)),i="`".repeat(n);return`${i}${t}
${e.trim()}
${i}`}var qre=require("crypto");var qI={top_p:1,temperature:.1};var BF=class{constructor(e,r,n,i,o,s,a){this.placeholder=e;this.slashCommands=r;this.wholeRange=n;this.document=i;this.formattingOptions=o;this.message=s;this.input=a;this._requests=[];this.sessionId=(0,qre.randomUUID)(),this.conversation=void 0}addRequest(e){this._requests.push(e)}getRequests(){return this._requests}},HI=class t{constructor(e,r){this.accessor=e;this.conversationOptions=r;this.logger=new wn(e,"interactiveEditor"),this.promptContextModel=e.get(He),this._microsoftTelemetryService=e.get(nr),this.logger.info("CopilotInteractiveEditorSessionProvider created, opts: "+JSON.stringify(r,null,2))}handleInteractiveEditorResponseFeedback(e,r,n){this.logger.debug("CopilotInteractiveEditorSessionProvider feedback received");let i={messageId:r.messageId},o,{selection:s,wholeRange:a,intent:l,query:c}=r.promptQuery,u=e.conversation?.getLatestTurn()?.requestId??"",d=e.sessionId,p=l?.id,f=e.document.languageId,m=r.reply.type,h=m==="inlineEdit"?r.reply.edits:null,g=this.accessor.get(He),v=Ure(g),y=Ii(e.document.uri)?1:0,_={languageId:f,replyType:m,conversationId:d,requestId:u,command:p},T={selectionLineCount:s?Math.abs(s.end.line-s.start.line):-1,wholeRangeLineCount:a?Math.abs(a.end.line-a.start.line):-1,editCount:h?.length??-1,editLineCount:h?.reduce((R,w)=>R+w.newText.split(`
`).length,0)??-1,isNotebook:y,problemsCount:v.problemsCount,diagnosticsCount:v.diagnosticsCount},I=(R,w)=>{this._microsoftTelemetryService.sendInternalTelemetryEvent(R,{language:f,intent:p,query:c,conversationId:d,requestId:u,replyType:m,problems:v.problems,diagnosticCodes:v.diagnosticCodes},{isNotebook:y,...w})};if(n===Ms.Helpful||n===Ms.Unhelpful){let R=n===Ms.Helpful?1:0;this._microsoftTelemetryService.sendTelemetryEvent("inline.action.vote",_,{...T,vote:R}),I("interactiveSessionVote",{vote:R})}else if(n===Ms.Undone||n===Ms.Accepted){let R=n===Ms.Accepted?1:0;this._microsoftTelemetryService.sendTelemetryEvent("inline.done",_,{...T,accepted:R}),I("interactiveSessionDone",{accepted:R})}switch(n){case Ms.Helpful:i.rating="positive",o="inlineConversation.messageRating";break;case Ms.Unhelpful:i.rating="negative",o="inlineConversation.messageRating";break;case Ms.Undone:i.action="undo",o="inlineConversation.undo";break;case Ms.Accepted:i.action="accept",o="inlineConversation.accept";break}o&&Ua(this.accessor,e.document,i,{},o)}async prepareInteractiveEditorSession(e){let r;if(this.promptContextModel.activeTextEditor?.document.uri.toString()===e.document.uri.toString()){let l=this.promptContextModel.activeTextEditor.options;r={insertSpaces:l.insertSpaces,tabSize:l.tabSize}}let n,i;e.selection.isEmpty&&e.document.lineAt(e.selection.start.line).text.trim().length!==0&&(i=(await gJ(this.accessor,e.document,e.selection,100)).expandedRange);let o=this.promptContextModel.activeFileDiagnostics.find(l=>l.range.contains(e.selection));o&&(o.severity===L_.Warning||o.severity===L_.Error)&&(n=`/${ls} ${o.message}`);let s={document:e.document,fileIndentInfo:r,language:Jc(this.accessor,e.document),selection:e.selection,wholeRange:i??e.selection},a=[];for(let l of cs.getCommands(1))l.intent?.asSlashCommand?a.push(await l.intent.asSlashCommand(this.accessor,s)):a.push({command:l.commandId,detail:l.details,executeImmediately:l.executeImmediately});return new BF("Ask Copilot or type '/' for commands",a,i,e.document,r,"$(copilot-logo) Copilot generated code may be incorrect",n)}async provideInteractiveEditorResponse(e,r,n,i){this.logger.info(`CopilotInteractiveEditorSessionProvider query: ${r.prompt}`),n.report({message:zh.t("Fetching response..."),edits:[]}),r.attempt===0&&e.addRequest(r.prompt);let o=Ze(this.accessor,be.InlineChatStreaming,{default:"progressive"}),s=r.live;if(o==="off")s=!1;else if(o==="instant"){let l=n;n={report:c=>{l.report({...c,editsShouldBeInstant:!0})}}}let a=await this.fetchResponse(e,r,n,s,i);if(a)return s&&a.promptQuery.intent?.id===ls&&a.parsedReply.type==="inlineEdit"&&Sn(this.accessor,be.IterativeFixing)?this.provideIterativeFixResponse(a.parsedReply,a.promptQuery,a.messageId,n,e,r,i):Bre(a)}async provideIterativeFixResponse(e,r,n,i,o,s,a){let{diagnosticsInRangeOfInterestPreEdits:l,rangeOfInterestPostEdits:c}=await $De(this.promptContextModel,e.edits,r);i.report({message:zh.t("Made changes and waiting for new diagnostics"),edits:e.edits});let u=await this.fetchActiveDiagnosticsForRange(l,c,a);if(u.length===0)return{edits:[],promptQuery:r,reply:e,messageId:n};i.report({message:zh.t("Running a second iteration of fix"),edits:[]});let d=UF(u),p={prompt:`/fix ${u.map(m=>m.message).join(", ")}`,selection:new $h(d.start,d.end),wholeRange:d,live:s.live,attempt:s.attempt},f=await this.fetchResponse(o,p,i,!1,a);return f?Bre(f):void 0}async fetchActiveDiagnosticsForRange(e,r,n){let i=this.promptContextModel.activeTextDocument?.uri;if(!i)return[];let o,s;return new Promise(a=>{o=n.onCancellationRequested(a);let l=new Promise(u=>{s=this.promptContextModel.onDidChangeDiagnostics(async d=>{if(d.uris.map(String).includes(i.toString())){let p=this.promptContextModel.activeFileDiagnostics.filter(f=>f.range.intersection(r)&&f.severity===L_.Error);u(p)}})}),c=new Promise(u=>{setTimeout(()=>{u(e)},5e3)});try{a(Promise.race([l,c]))}catch{}}).finally(()=>{o.dispose(),s.dispose()})}async fetchResponse(e,r,n,i,o){let s=ss(),a=Date.now(),l={document:e.document,fileIndentInfo:e.formattingOptions,language:Jc(this.accessor,e.document),selection:r.selection,wholeRange:r.wholeRange},c=await ig(this.accessor,r.prompt,l,e,s,o);n.report({slashCommand:c.slashCommand});let u=await og(c,e.getRequests().slice(0,-1),s,o);if(o.isCancellationRequested)return;let d=e.conversation,p=d===void 0;if(!d){let B=u.find(P=>P.role==="system").content;d=e.conversation=new gn(B)}let f=u.map(B=>B.content).join(`
`),m=new Jr({message:f,type:"user"});d.addTurn(m),s=nT(d,e.sessionId,"conversationInline",r.prompt,WDe(this.accessor,u),c.intentInvocation.intent.id,s);let h=s.properties.messageId;m.requestId=h,this.logger.logPrompt(u);let g,v,y=0,_=c.intentInvocation.createReplyInterpreter(n,i),T=async B=>(y===0&&(y=Date.now()),_.update(B).shouldFinish?B.length:void 0),I=Date.now();try{g=await this.accessor.get(wt).fetchOne(u,T,o,1,0,{temperature:t.pickTemperature(r),top_p:qI.top_p},{messageId:h,messageSource:"inline.user"},{intent:!0})}catch(B){throw this.logger.exception(B,"Fetching failed: "),m.status="error",m.response={message:B.message,type:"server"},new Error("Failed to make request")}this.logger.logResponse(g);let R=this.accessor.get(He);iT(this.accessor,"conversationInline",r.prompt,g.type==="offTopic",R.activeTextDocument,s);let w=Ii(e.document.uri)?1:0,O=Ure(R),V=B=>{this._microsoftTelemetryService.sendTelemetryEvent("inline.request",{command:c.intentInvocation.intent.id??"",contextTypes:"none",promptTypes:u.map(P=>`${P.role}${P.name?`-${P.name}`:""}:${P.content.length}`).join(","),conversationId:e.sessionId,requestId:h,languageId:R.activeTextDocument?.languageId,responseType:g.type,replyType:B?.type},{firstTurn:p?1:0,isNotebook:w,messageLength:c.queryWithoutCommand.length,promptLength:u.reduce((P,F)=>P+F.content.length,0),responseLength:g.type==="success"?g.value.length:-1,implicitCommand:r.prompt.trim().startsWith(`/${c.intentInvocation.intent.id}`)?0:1,attemptCount:r.attempt||0,selectionLineCount:r.selection?Math.abs(r.selection.end.line-r.selection.start.line)+1:-1,wholeRangeLineCount:r.wholeRange?Math.abs(r.wholeRange.end.line-r.wholeRange.start.line)+1:-1,editCount:B?.type==="inlineEdit"?B.edits.length:-1,editLineCount:B?.type==="inlineEdit"?B.edits.reduce((P,F)=>P+F.newText.split(`
`).length,0):-1,problemsCount:O.problemsCount,diagnosticsCount:O.diagnosticsCount,timeToRequest:I-a,timeToFirstToken:y?y-a:-1,timeToComplete:Date.now()-a})},L=(B,P)=>{this._microsoftTelemetryService.sendInternalTelemetryEvent("interactiveSessionResponse",{intent:m.intentInvocation?.intent.id??"",problems:O.problems,diagnosticCodes:O.diagnosticCodes,language:R.activeTextDocument?.languageId,request:r.prompt,responseType:B,response:P},{isNotebook:w})};switch(g.type){case"rateLimited":{let B=`Response failed ${g.type}: ${g.reason}`;throw m.status="error",m.response={message:B,type:"server"},V(),L(g.type,B),new Error("Oops, your request failed due to a rate limit. Please try again later.")}case"badRequest":{let B=`Response failed ${g.type}: ${g.reason}`;throw m.status="error",m.response={message:B,type:"server"},V(),L(g.type,B),new Error("Failed to make request")}case"failed":{this.logger.errorAndSendTelemetry(`Response failed: ${g.reason}`),m.status="error";let B=g.reason;throw m.response={message:B,type:"server"},V(),L(g.type,B),new Error("Failed to make request")}case"canceled":{this.logger.debug(`Response canceled: ${g.reason}`),m.status="error";let B="Cancelled";m.response={message:B,type:"user"},V(),L(g.type,B);return}case"unknown":{let B=`Response is empty: ${g.reason}`;this.logger.info(B),m.status="error",m.response={message:B,type:"server"},V(),L(g.type,B);return}case"filtered":{let B=`Response got filtered: ${g.reason}`;throw this.logger.info(B),m.status="filtered",m.response={message:B,type:"server"},V(),L(g.type,B),new Error("Oops, response got filtered. Please rephrase your prompt.")}case"offTopic":{this.logger.info(`Response marked as offtopic: ${g.reason}`),m.status="off-topic";let B=this.conversationOptions.rejectionMessage;m.response={message:B,type:"offtopic-detection"},V(),L(g.type,B),sT(this.accessor,d,e.sessionId,"conversationInline",this.conversationOptions.rejectionMessage,h,e.document,s);return}case"length":{let B=`Response was too long: ${g.reason}`;this.logger.info(B),m.status="error",m.response={message:B,type:"server"},V(),L(g.type,B);return}case"success":break;default:{this.logger.errorAndSendTelemetry("Unexpected response type"),this.logger.info(JSON.stringify(g)),m.status="error";let B=`Unexpected response type: ${JSON.stringify(g)}`;m.response={message:B,type:"server"},V(),L("unknown",B);return}}if(v=g.value,v.length===0){this.logger.info("Response is empty."),V(),L("unknown","Empty response");return}_.update(v);let A=await _.finish();m.status="success";let N=v;return m.response={message:N,type:"model"},V(A),L("success",N),s=s.extendedBy({replyType:A.type}),oT(this.accessor,d,e.sessionId,"conversationInline",v,h,e.document,s),this.logger.info(`Parsed response: ${JSON.stringify(A,null,"	")}`),{promptQuery:{query:c.queryWithoutCommand,...l,intent:c.intentInvocation.intent},parsedReply:A,messageId:s.properties.messageId}}static pickTemperature(e){return"attempt"in e&&typeof e.attempt=="number"?Math.min(qI.temperature*(e.attempt+1),2):qI.temperature}};function Bre(t){let{promptQuery:e,parsedReply:r,messageId:n}=t;return r.type==="conversational"?{contents:new Ls(r.content),promptQuery:e,reply:r,messageId:n}:r.type==="workspaceEdit"?{edits:r.workspaceEdit,promptQuery:e,reply:r,messageId:n}:{edits:r.edits,wholeRange:r.newWholeRange,reply:r,promptQuery:e,messageId:n}}async function $De(t,e,r){let i=(await qF(t,r.query,r.document,r.wholeRange)).rangeOfInterest,o=t.activeFileDiagnostics.filter(a=>a.range.intersection(i)&&a.severity===L_.Error);return{rangeOfInterestPostEdits:await zDe(i,e),diagnosticsInRangeOfInterestPreEdits:o}}async function zDe(t,e){let r=t;for(let n of e){let i=n.range.start,o=n.range.end,s=r.start,a=r.end,l=n.newText.split(`
`).length,c=l-(o.line-i.line)-1,u=s.line,d=s.line;o.isBefore(s)?(u=s.line+c,d=a.line+c):i.isBefore(s)&&o.isAfterOrEqual(s)&&o.isBeforeOrEqual(a)?(u=i.line,d=a.line+c):i.isAfterOrEqual(s)&&i.isBeforeOrEqual(a)&&o.isAfter(a)?(u=s.line,d=o.line+c):i.isAfter(a)?(u=s.line,d=a.line):r.contains(n.range)?(u=s.line,d=a.line+c):n.range.contains(r)&&(u=i.line,d=i.line+l-1),r=new De(u,0,d,0)}return r}function UF(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function WDe(t,e){let r=t.get(Fs),n=0;for(let i of e)n+=r.tokenLength(i.content);return n}function Ure(t){let e=t.activeFileDiagnostics,r=e.map(a=>a.message).join(", "),n=e.length,i=new Map;e.forEach(a=>{let l=a.code,c=typeof l=="string"||typeof l=="number"?l.toString():l?l.value.toString():"";i.set(c,(i.get(c)||0)+1)});let o="";i.forEach((a,l)=>{o+=`${l}:${a},`});let s=i.size;return{diagnosticCodes:o,problems:r,problemsCount:n,diagnosticsCount:s}}var KDe=15,HF=class{constructor(){this.promptDescription="";this.kind="fix-selection";this.requiredOnly=!0}async resolveContext(e,r,n,i,o,s){if(!Yc(i.language.languageId))return Ke.contextResolvers.find(m=>m.kind==="inline-chat-selection")?.resolveContext(e,r,n,i,o,s);let l=await qF(r,o,i.document,i.wholeRange),c,u;Ii(i.document.uri)?(c=await this.generateFixContextInNotebook(e,r,i,l),u=this.generateFixContextPromptsForNotebook(e,i,c)):({contextInfo:c}=await this.generateFixContext(e,i,l),u=this.generateFixContextPrompts(c));let d=i.document,p=[{uri:d.uri,version:d.version,ranges:ai([c.range.toRange(),c.above.toRange(),c.below.toRange()])}];return{userMessages:u,usedContext:p,metadata:{expandedRange:l.range,contextInfo:c}}}async generateFixContext(e,r,n){let o=(await e.get(Xt).getChatEndpointInfo()).modelMaxTokenWindow*4/3,s=new us(o),a=r.document,l=r.language,c=new di(s,a,l,"ed8c6549bwf9"),u=new di(s,a,l,"abpxx6d04wxr"),d=new di(s,a,l,"be15d9bcejpp"),p=()=>(u.trim(),c.trim(),d.trim(),{contextInfo:{language:l,above:u,range:c,below:d,outlineAbove:"",outlineBelow:""},tracker:s});if(!YDe(c,n))return p();let m={aboveLineIndex:n.rangeOfInterest.start.line-1,belowLineIndex:n.rangeOfInterest.end.line+1,minimumLineIndex:0,maximumLineIndex:a.lineCount-1};return UM(m,u,d),p()}generateFixContextPrompts(e){let r=[];if(e.above.hasContent){let n=[];n.push("I have the following code above the selection:"),n.push(...e.above.generatePrompt(!0)),r.push(n.join(`
`))}if(e.below.hasContent){let n=[];n.push("I have the following code below the selection:"),n.push(...e.below.generatePrompt(!0)),r.push(n.join(`
`))}if(e.range.hasContent){let n=[];n.push("I have the following code in the selection:"),n.push(...e.range.generatePrompt(!0)),r.push(n.join(`
`))}else r.push("There is no code in the selection.");return r.push([`Only change the code inside of the selection, delimited by markers '${e.range.startMarker}' and '${e.range.endMarker}'. The code block with the suggested changes should also contain the markers.`].join(`
`)),r}async generateFixContextInNotebook(e,r,n,i){let{contextInfo:o,tracker:s}=await this.generateFixContext(e,n,i);return HM(r,n,o,s)}generateFixContextPromptsForNotebook(e,r,n){return jM(e,r,n,{includeDelimeters:!0,includeLineNumbers:!0})}};Ke.register(new HF);function YDe(t,e){let r=e.range,n=e.rangeOfInterest,i=Math.floor((r.start.line+r.end.line)/2),o=Math.max(i-n.start.line,n.end.line-i);t.appendLine(i);for(let s=1;s<=o;s++){let a=i-s,l=i+s;if(a>=n.start.line&&!t.prependLine(a)||l<=n.end.line&&!t.appendLine(l))return!1}return!0}async function qF(t,e,r,n){let i=await jF(t,e,n),s=Yc(r.languageId)?await QDe(i,r,KDe):i.range;return{range:i.range,rangeOfInterest:s}}async function jF(t,e,r){let n=t.activeFileDiagnostics.filter(i=>!!i.range.intersection(r));if(e){let i=n.filter(o=>e.includes(o.message));n=i.length>0?i:n}return{range:n.length>0?UF(n):r,diagnostics:n}}async function QDe(t,e,r){let n=t.range,i=VF(n),o=Math.max(r,n.end.line-n.start.line+r),s=await aJ(e.languageId,e.getText(),i,o);return GF(s)}function VF(t){return{startPosition:{row:t.start.line,column:t.start.character},endPosition:{row:t.end.line,column:t.end.character}}}function GF(t){return new De(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}var $F=class{constructor(){this.promptDescription="";this.kind="diagnostics";this.requiredOnly=!0}async resolveContext(e,r,n,i,o,s){if(!i)return;let{diagnostics:a}=await jF(r,o,i.wholeRange);return{userMessages:await this.getDiagnosticsContextPrompts(r,a,i.document)}}async getRelatedInfo(e,r){if(r.relatedInformation){let n=[];for(let i of r.relatedInformation){let o=i.location,s=await e.openTextDocument(o.uri),a=o.range,l=Yc(s.languageId),c=VF(a),u=l?await sJ(s.languageId,s.getText(),c):c,d=s.getText(GF(u));n.push(wo("",d))}return n.join(`
`)}}async getDiagnosticsContextPrompts(e,r,n){let i=[];if(r.length>0){i.push(`The code has the following ${r[0].source+" "}problems`);for(let o=0;o<r.length;o++){i.push(`Problem ${o+1}:`);let s=r[o],a=n.getText(new De(s.range.start.line,0,s.range.end.line+1,0)).trim();a.length>0&&a.length<200&&(i.push("This code"),i.push(wo("",a)),i.push("has the problem reported:")),i.push(wo("",`${s.message}`));let l=await this.getRelatedInfo(e,s);l&&(i.push("This diagnostic has some related code:"),i.push(`${l}`))}}return i.length>0?[i.join(`
`)]:[]}};Ke.register(new $F);var pf=class t{constructor(e=void 0){this.nodeToDocument=e;this.promptDescription="";this.kind="doc-selection";this.requiredOnly=!0}async resolveContext(e,r,n,i,o,s){if(!i||Ii(i.document.uri))return;let a=i.wholeRange,l=this.nodeToDocument??await t.determineNodeToDocument(e,i),c=await t.generateDocContext(e,i,l),u=[];{let p=[];p.push("I have the following code in the selection:"),p.push(...c.range.generatePrompt(!1)),u.push(p.join(`
`))}let d=[{uri:i.document.uri,version:i.document.version,ranges:ai([c.range.toRange()])}];return{userMessages:u,usedContext:d,metadata:{expandedRange:a,contextInfo:c}}}static async determineNodeToDocument(e,r){let n=t.toTreeSitterOffsetRange(r.selection,r.document),i=Date.now(),o=await fJ(r.language.languageId,r.document.getText(),n),s=Date.now()-i;if(o){let a=t.toTreeSitterOffsetRange(r.wholeRange,r.document);t.sendNodeToDocumentTelemetry(e,n,a,o,r.document.languageId,s);let l=new De(r.document.positionAt(o.nodeToDocument.startIndex),r.document.positionAt(o.nodeToDocument.endIndex));return{identifier:o.nodeIdentifier,range:l}}else return{range:r.wholeRange}}static toTreeSitterOffsetRange(e,r){return{startIndex:r.offsetAt(e.start),endIndex:r.offsetAt(e.end)}}static async generateDocContext(e,r,n){let{range:i}=n,o=await e.get(Xt).getChatEndpointInfo(),s=new us(o.modelMaxTokenWindow*4/3),a=new di(s,r.document,r.language,"ed8c6549bwf9"),l=new di(new us(0),r.document,r.language,"abpxx6d04wxr"),c=new di(new us(0),r.document,r.language,"be15d9bcejpp");for(let u=i.start.line,d=i.end.line;u<=d&&!(u===d&&i.end.character===0||!a.appendLine(u));++u);return a.trim(r.selection),{language:r.language,above:l,range:a,below:c,outlineAbove:"",outlineBelow:""}}static sendNodeToDocumentTelemetry(e,r,n,i,o,s){e.get(nr).sendTelemetryEvent("getNodeToDocument",{languageId:o,typeOfNodeToDocument:i.nodeToDocument.type,nodeToDocumentStart:i.nodeToDocument.startIndex.toString(),nodeToDocumentEnd:i.nodeToDocument.endIndex.toString(),selectionOffsetRangeStart:r.startIndex.toString(),selectionOffsetRangeEnd:r.endIndex.toString(),wholeRangeOffsetRangeStart:n.startIndex.toString(),wholeRangeOffsetRangeEnd:n.endIndex.toString()},{timeSpentMs:s})}};Ke.register(new pf);var zF=class{constructor(e){let r=uf(e.get(He).vsCodeVersion);this.embeddingsCache=new rd(e,1,"api",r,"api")}async updateIndex(){this.apiChunks=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this.apiChunks)return[];let i=this.apiChunks.map(o=>{if(!o.embedding)return{text:o.text,similarity:0};let s=td(e,o.embedding);return{text:this.toContextString(o),similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.text)}toContextString(e){return e.type==="code"?`Snippet from vscode.d.ts:
${wo(e.lang,e.text)}`:e.type==="command"?`${e.text}`:e.type==="documentationCodeBlock"?`Example code from documentation:
${wo(e.lang,e.text)}`:""}},WF=class{constructor(){this.promptDescription="relevant vs code api information";this.kind="extension-api";this.requiredOnly=!0}async resolveContext(e,r,n,i,o,s){if(this.embeddingComputer??=e.get(rn),!o||(this.apiEmbeddingsIndex||(this.apiEmbeddingsIndex=new zF(e)),await this.apiEmbeddingsIndex.updateIndex(),s.isCancellationRequested))return;let a=await this.embeddingComputer?.computeEmbeddings([o],s);if(!s.isCancellationRequested&&a&&a.length>0){let l=this.apiEmbeddingsIndex.nClosestValues(a[0],5,.7);if(l.length)return["Below are some potentially relevant code samples related to VS Code extension development. You may use information from these samples to help you answer the question if you believe it is relevant:",l.join(`

`)].join(`
`)}}};Ke.register(new WF);var KF=class{constructor(e){let r=uf(e.get(He).vsCodeVersion);this.embeddingsCache=new rd(e,1,"extensionEmbeddings",r,"extensions")}async updateIndex(){this._embeddings=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[1].name}(${o[0]})`,similarity:0};let s=td(e,o[1].embedding);return{key:`${o[1].name}(${o[0]})`,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}},XDe=`
The current question is related to VS Code extensions. The application is currently open.
If an extension is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all extension ids you referenced in your response
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),YF=class{constructor(){this.promptDescription="Relavant information about extensions for VS Code";this.kind="extensions"}async resolveContext(e,r,n,i,o,s){let a=XDe+`

`;if(this._embeddingCompute??=e.get(rn),!o||(this._extensionsIndex||(this._extensionsIndex=new KF(e),await this._extensionsIndex.updateIndex()),s.isCancellationRequested))return;let l=await this._embeddingCompute?.computeEmbeddings([o],s);if(!(!l||s.isCancellationRequested)&&l&&l.length>0){let c=await this._extensionsIndex.nClosestValues(l[0],5);if(c.length)return a+=`Here are some possible extensions:
`,a+=c.join(`

`),a}}};Ke.register(new YF);var QF=class{constructor(){this.promptDescription="Metadata about the current git repository";this.kind="git-metadata";this.variableInfo={name:"git",description:"Information about the current git repository"}}async resolveContext(e,r,n,i,o,s){let a=r.currentRepository;if(a){let l=[];return s.isCancellationRequested?void 0:(a.headBranchName?(l.push(`Current Branch name: ${a.headBranchName}`),l.push(`Upstream: ${a.upstreamBranchName?a.upstreamBranchName:"none"}`)):l.push("Detached HEAD: yes"),l.push(`Is currently rebasing? ${a.isRebasing?"yes":"no"}`),l.push(`Remotes: ${(a.remotes??[]).join(", ")}`),"- "+l.join(`
- `))}}};Ke.register(new QF);var XF=class{constructor(){this.promptDescription="The active terminal's buffer";this.kind="terminal-buffer";this.variableInfo={name:"terminalBuffer",description:"The active terminal's buffer",defaultEnablement:!1}}async resolveContext(e,r){return r.terminalBuffer}};Ke.register(new XF);var JF=class{constructor(){this.promptDescription="The active terminal's last run command";this.kind="terminal-last-command";this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0}}async resolveContext(e,r){let n=r.terminalLastCommand;if(!n)return;let i=[];return n.commandLine&&(i.push("The following is the last command run in the terminal:"),i.push(n.commandLine)),n.cwd&&(i.push("It was run in the directory:"),i.push(typeof n.cwd=="object"?n.cwd.toString():n.cwd)),n.output&&(i.push("It has the following output:"),i.push(n.output)),i.join(`
`)}};Ke.register(new JF);var ZF=class{constructor(){this.promptDescription="The active terminal's selection";this.kind="terminal-selection";this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0}}async resolveContext(e,r){return r.terminalSelection}};Ke.register(new ZF);var Gre=Te(require("path"));function Hre(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}async function JDe(t,e=1/0,r){let n=jre(0,t,e),i=e-Hre(n);for(;;){let o=!1,s=[];for(let a of n)if(a.type==="text")s.push(a);else if(a.type==="dir"){s.push({type:"text",value:a.value});let l=await a.getChildren();if(r?.isCancellationRequested)return"";let c=jre(a.level+1,l,i-1);c.length&&(o=!0,i-=Hre(c)+1,s.push(...c))}if(n=s,!o)break}return n.map(o=>o.value).join(`
`)}function jre(t,e,r){let n="	".repeat(t),i=[],o=r;for(let s=0;s<e.length;++s){let a=e[s],l=n+a.name+(a.type===2?"/":"");if(l.length>o){let c=n+"...";for(;c.length>o&&i.length>0;)o+=i.pop().value.length+1;c.length<=o&&i.push({type:"text",value:c});break}a.type===2?i.push({type:"dir",level:t,value:l,getChildren:a.getChildren}):i.push({type:"text",value:l}),o-=l.length,s!==e.length-1&&(o-=1)}return i}async function jI(t,e,r,n){let i=t.get(Pr),o=t.get(Hs);async function s(l){let c;try{c=await i.readDirectory(l)}catch(u){return console.error(u),[]}return n.isCancellationRequested?[]:c.filter(u=>{let d=Tt.joinPath(l,u[0]);return Jp(d)&&!o.isIgnored(d)}).map(u=>u[1]===2?{type:2,name:u[0],getChildren:()=>s(Tt.joinPath(l,u[0]))}:{type:1,name:u[0]})}if(await o.init(),n.isCancellationRequested)return"";let a=await s(e);return n.isCancellationRequested?"":JDe(a,r,n)}var VI=class{constructor(){this.toolLineRegexp=/[\*\-]\s*(\w+)\(["']?(.*?)["']?\)/}async resolveContext(e,r,n,i,o,s){if(!o)return;let a=e.get(wt);this.logger||(this.logger=new Re(e,"workspaceResolver")),this.logger.debug("Collecting workspace structure...");let l=await Vre(e,r,1e3,s);if(s.isCancellationRequested)return;this.logger.debug("Asking the model about tools to use...");let c=await a.fetchOne(ai([...this.getHistory(n),{role:"system",content:rLe},l?{role:"user",content:l}:void 0,{role:"user",content:o}]),async d=>{},s,2,0,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceIntent"});if(c.type!=="success"||s.isCancellationRequested)return;let u=this.parseMetaPromptResponse(o,c.value);return this.logger.debug("Running tools..."),this.runTools(e,u.tools,{promptContext:r,fullQuestionText:u.rephrasedQuestion},s)}getHistory(e){return e?e.turns.slice(0,-1).flatMap(r=>r.request.type==="user"?ai([{role:"user",content:r.request.message},r.response?{role:"assistant",content:r.response.message}:void 0]):[]):[]}parseMetaPromptResponse(e,r){let n=this.parseCollectInfoTools(r),i=r.split(`
`),o=i.findIndex(s=>this.toolLineRegexp.test(s));return o<=0?{rephrasedQuestion:e.trim(),tools:n}:{rephrasedQuestion:i.slice(0,o).join(`
`).trim(),tools:n}}parseCollectInfoTools(e){let r=[];for(let n of e.split(`
`)){let i=n.match(this.toolLineRegexp);if(!i)continue;let o=i[1],s=i[2];r.push({name:o,argument:s})}return r}async runTools(e,r,n,i){let o=new Map;for(let a of r)o.has(a.name)||o.set(a.name,[]),o.get(a.name)?.push(a.argument);return(await Promise.all([Vre(e,n.promptContext,500,i).then(a=>a?{userMessages:[a]}:void 0),...Array.from(o.entries(),async([a,l])=>$re.get(a)?.resolve(e,l,n,i))])).reduce((a,l)=>({userMessages:[...a.userMessages,...l?.userMessages??[]],references:[...a.references??[],...l?.references??[]],usedContext:[...a.usedContext??[],...l?.usedContext??[]]}),{userMessages:[]})}},ZDe=new class{constructor(){this.name="symbolSearch";this.arguments=["symbolName"];this.description="Search for a symbol (e.g. function or class) in the workspace by name. This is useful when the user is looking for a specific symbol."}async resolve(t,e,r,n){let i=(await Promise.all(e.map(s=>r.promptContext.getWorkspaceSymbols(s)))).flat().filter(s=>!s.location.uri.path.includes("node_modules"));if(!i.length||n.isCancellationRequested)return;let o=8;return{userMessages:[Bg("# Relevant Workspace Symbols",...zre(i.map(s=>`- ${s.name} \u2014 ${eB(r.promptContext,s.location.uri)}`)).slice(0,o))]}}},eLe=new class{constructor(){this.name="listFiles";this.arguments=["fileName"];this.description="Search for a file in the workspace by name. This is useful when trying to find a file which contains specific functionality."}async resolve(t,e,r,n){let i=(await Promise.all(e.map(s=>t.get(Ki).findFiles(`**/*${s}*`,"**/node_modules/**",10,n)))).flat();if(!i.length||n.isCancellationRequested)return;let o=8;return{userMessages:[Bg("# Relevant Workspace File Names",...zre(i.map(s=>`- ${eB(r.promptContext,s)}`)).slice(0,o))]}}},tLe=new class{constructor(){this.name="fuzzyTextSearch";this.arguments=["searchText"];this.description="Search for fuzzy text matches in the workspace."}async resolve(t,e,r,n){let i=t.get(Mg),o=8,a=Math.max(1,Math.ceil(o*.25)),l=o-a,c=["**/*.md","**/*.markdown","**/*.txt","**/*.rst","**/*.text"],u={fullText:r.fullQuestionText,keywords:e},d=(await Promise.all([i.searchFileChunks([u],{exclude:c},l,n),i.searchFileChunks([u],{include:c},a,n)])).flat();if(n.isCancellationRequested||!d.length)return;let p=new bo;for(let f of d)p.set(f.file);return{userMessages:[Bg("# Relevant code excerpts from the workspace","",d.map(f=>{let m=eB(r.promptContext,f.file);return Bg(`\`${m}\``,wo(Tt.extname(f.file).replace(/\./g,""),f.text))}).join(`

`))],references:Array.from(p.keys(),f=>new hn(f))}}};async function Vre(t,e,r=500,n){let i=e.workspaceFolders?.at(0);if(!i)return;let o=await jI(t,i,r,n);return Bg("# Partial Workspace Structure","",wo("",o))}var $re=new Map([ZDe,eLe,tLe].map(t=>[t.name,t])),rLe=`
# Rules
You are a coding assistant who suggests tools a user can use to answer a question about code in their workspace.
You only suggest tools to run.
Yo do not try to answer the user's question directly.

The following tools are available:

${Bg(...Array.from($re.values(),t=>`- ${t.name}(${t.arguments.join(", ")}) \u2014 ${t.description}`))}

# Additional Rules
Think step by step:

1. Read the user's question to understand what they are asking about their workspace.

2. If there is ambiguity in the question, try to resolve it by looking at the conversation history. Do not ask the user for additional information.

3. Consider which tools you would use to collect information relevant to the user's question. You may use the same tool multiple times with different inputs. You do not have to use every tool however you should prefer using a variety of tools with different inputs. Consider synonyms and alternative phrasings of keywords in the question when determining which tools to use.

4. First output the rephrased question with any ambiguities resolved. Do not ask the user for additional information. Do not explain.

5. Then return a Markdown list of tools you would use to answer the question and the arguments to call them with. Only return a list of tools. Do not explain.

# Examples

User: Where's the code for base64 encoding?

Response:

Where's the code for base64 encoding

* symbolSearch("base64Encoding")
* symbolSearch("base64Encoder")
* symbolSearch("base64Encode")
* listFiles("base64")
* fuzzyTextSearch("base64 encoding")
`.trim();function eB(t,e){let r=t.getWorkspaceFolder(e);return r?Gre.relative(r.path,e.path):e.fsPath}function zre(t){return[...new Set(t)]}function Bg(...t){return t.join(`
`)}var Yre=Te(require("path"));function Wre(t,e,r){return Math.min(Math.max(t,e),r)}var GI=class{constructor(){this.keywordLineRegexp=/^[\*\-]\s*(.+)/m}async resolveContext(e,r,n,i,o,s){if(!o)return;let a=e.get(wt);this.logger||(this.logger=new Re(e,"workspaceResolver")),this.logger.debug("Collecting workspace structure...");let l=await Kre(e,r,1e3,s);if(s.isCancellationRequested)return;this.logger.debug("Asking the model to update the user question and provide queries...");let c=await a.fetchOne(ai([...this.getHistory(n),{role:"system",content:nLe},l?{role:"user",content:l}:void 0,{role:"user",content:o}]),async d=>{},s,2,0,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceIntent"});if(c.type!=="success"||s.isCancellationRequested)return;let u=this.parseMetaPromptResponse(o,c.value);return this.logger.debug("Running all tools..."),this.runTools(e,r,u,s)}getHistory(e){return e?e.turns.slice(0,-1).flatMap(r=>r.request.type==="user"?ai([{role:"user",content:r.request.message},r.response?{role:"assistant",content:r.response.message}:void 0]):[]):[]}parseMetaPromptResponse(e,r){let n=r.trim().split(`
`),i=0,o=[];for(let a of Array.from(n).reverse()){let l=a.match(this.keywordLineRegexp);if(l){let c=l[1].split(/,/g).map(u=>u.trim());c.length&&o.unshift({keyword:c[0],variations:c.slice(1)})}else if(o.length)break;i++}return{rephrasedQuestion:n.slice(0,-i).join(`
`).trim()||e.trim(),keywords:o}}async runTools(e,r,n,i){let o={fullQuestionText:n.rephrasedQuestion,keywords:n.keywords,promptContext:r};return(await Promise.all([Kre(e,r,500,i).then(a=>a?{userMessages:[a]}:void 0),...aLe.map(a=>a.resolve(e,o,i))])).reduce((a,l)=>({userMessages:[...a.userMessages,...l?.userMessages??[]],references:[...a.references??[],...l?.references??[]],usedContext:[...a.usedContext??[],...l?.usedContext??[]]}),{userMessages:[]})}};async function Kre(t,e,r=500,n){let i=e.workspaceFolders?.at(0);if(!i)return;let o=await jI(t,i,r,n);return R0("# Partial Workspace Structure","",wo("",o))}var nLe=`
You are a coding assistant who help the user answer questions about code in their workspace by clarifying their question and providing a list of relevant keywords they can search for to answer the question.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete. Do not mention this or ask the user for more information.
You only clarify and provide keywords.
You do not try to answer the user's question directly.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.

2. If there are ambiguous words in the question \u2014 for example 'it', 'that', 'this' \u2014 try to understand them by looking at the conversation history.

3. Output a clarified version of the question with all ambiguities resolved. Be sure to preserve the meaning of the question when clarifying it.

4. Then output a short markdown list of relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords.

5. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms.

# Examples
User: Where's the code for base64 encoding?

Response:

Where's the code for base64 encoding?

- base64 encoding, base64 encoder, base64 encode
- base64, base 64
- encode, encoded, encoder, encoders
`.trim(),iLe=new class{constructor(){this.timeout=15e3}async resolve(t,e,r){let n=await rB(t,{valueFor4096:8,maxMultiplier:4});if(r.isCancellationRequested)return;let i=await this.getSymbols(t,e);if(!(!i.length||r.isCancellationRequested))return{userMessages:[R0("# Relevant Workspace Symbols",...Qre(i.map(o=>`- ${o.name} \u2014 ${tB(e.promptContext,o.location.uri)}`)).slice(0,n))]}}async getSymbols(t,e){let r=t.get(Hs),n=await Promise.all(e.keywords.flatMap(i=>[i.keyword,...i.variations]).map(i=>F_(e.promptContext.getWorkspaceSymbols(i),this.timeout)));return ai(n.flat()).filter(i=>!r.isIgnored(i.location.uri))}},oLe=new class{constructor(){this.timeout=15e3}async resolve(t,e,r){let n=await rB(t,{valueFor4096:8,maxMultiplier:4});if(r.isCancellationRequested)return;let i=await this.findFiles(t,e,n,r);if(!(!i.length||r.isCancellationRequested))return{userMessages:[R0("# Relevant Workspace File Names",...Qre(i.map(o=>`- ${tB(e.promptContext,o)}`)).slice(0,n))]}}async findFiles(t,e,r,n){let i=t.get(Hs),o=t.get(Ki),s=await Promise.all(e.keywords.flatMap(a=>[a.keyword,...a.variations]).map(a=>F_(Promise.resolve(o.findFiles(`**/*${a}*`,"**/node_modules/**",r,n)),this.timeout)));return ai(s.flat()).filter(a=>!i.isIgnored(a))}},sLe=new class{async resolve(t,e,r){let n=t.get(Mg),i=await rB(t,{valueFor4096:8,maxMultiplier:4});if(r.isCancellationRequested)return;let o={fullText:e.fullQuestionText,keywords:e.keywords.flatMap(l=>[l.keyword,...l.variations])},s=(await n.searchFileChunks([o],{},i,r)).slice(0,i);if(r.isCancellationRequested||!s.length)return;let a=s.sort((l,c)=>l.file.fsPath.localeCompare(c.file.fsPath)||l.range.start.compareTo(c.range.start)||l.range.end.compareTo(c.range.end)).filter((l,c)=>{for(let[u,d]of s.entries())if(c!==u&&l.file.fsPath===d.file.fsPath&&(d.isFullFile||l.range===d.range||d.range.contains(l.range)))return!1;return!0}).map(l=>new hn(l.isFullFile?l.file:new M_(l.file,l.range)));return{userMessages:[R0("# Relevant code excerpts from the workspace","",s.map(l=>{let c=tB(e.promptContext,l.file);return R0(`\`${c}\``,wo(Tt.extname(l.file).replace(/\./g,""),l.text))}).join(`

`))],references:a}}},aLe=[iLe,oLe,sLe];function tB(t,e){let r=t.getWorkspaceFolder(e);return r?Yre.relative(r.path,e.path):e.fsPath}function Qre(t){return[...new Set(t)]}function R0(...t){return t.join(`
`)}async function rB(t,e){let n=(await t.get(Xt).getChatEndpointInfo()).modelMaxTokenWindow/4096;return Wre(Math.round(e.valueFor4096*n),e.valueFor4096,e.valueFor4096*e.maxMultiplier)}var nB=class{constructor(){this.promptDescription="The following is a subset of information about the workspace that may be relevant to the current conversation";this.kind="workspace";this.requiredOnly=!0}async resolveContext(e,r,n,i,o,s){return this._workspaceResolver||(this._workspaceResolver=Ze(e,be.WorkspaceNewFlowEnabled,{default:!0})?new GI:new VI),this._workspaceResolver.resolveContext(e,r,n,i,o,s)}};Ke.register(new nB);var $I=class t extends tn{static{this.ID="code"}constructor(){super({id:t.ID,location:1,description:"Add code to an already existing code base",sampleQuestion:"Add a function that returns the sum of two numbers",commandInfo:{hiddenFromUser:!0},requiredContextKinds:["inline-chat-selection"]})}async invoke(e,r,n){if(!n)throw new Error("Open a file to add code.");let i=await super.invoke(e,r,n),o;return n?.selection.isEmpty&&n.document.lineCount===1&&n.document.lineAt(0).text===""?o=wT.createFactory(e,i.promptCrafter,n,n.selection.start,3):o=Kp.createFactory(e,i.promptCrafter,n,3),{...i,createReplyInterpreter:o}}};var cLe=6e4,lLe=1500,ff=class t{constructor(){this.id=t.ID;this.description="Add documentation comment for this symbol";this.intentDetectionInput={sampleQuestion:"Add jsdoc to this method"};this.locations=[1];this.commandInfo={executeImmediately:!0}}static{this.ID="doc"}async asSlashCommand(e,r){if(r.document.lineCount>lLe||r.document.getText().length>cLe)return new P0("Add documentation comment for this symbol");let n=await pf.determineNodeToDocument(e,r),i=n.identifier?`Add documentation comment for '${n.identifier}'`:"Add documentation comment for this symbol";return new P0(i,n)}async invoke(e,r,n,i){if(!n)throw new Error("Open a file to add documentation.");let o;return i instanceof P0?o=i.nodeToDocument:new Re(e,"InlineDocIntent#invoke").warn("Unexpected: SlashCommand given to intent invocation is not a DocSlashCommand"),new iB(e,n,this,o)}},P0=class{constructor(e,r=void 0){this.detail=e;this.nodeToDocument=r;this.command=ff.ID;this.executeImmediately=!0}},iB=class t{constructor(e,r,n,i=void 0){this.accessor=e;this.context=r;this.intent=n;this.nodeToDocument=i;this.location=1;this.createReplyInterpreter=Nu.createFactory(async e=>{if(!this.contextInfo||!this.expandedRange)throw new Error("doc intent NEEDS a selection context");let r=el(this.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=r.code,i=Date.now(),o=await mJ(this.context.document.languageId,n),s=Date.now()-i;t._sendExtractDocTelemetry(this.accessor.get(nr),this.context.document.languageId,n.length,o,s),o&&(n=o);let a=jp(this.accessor,this.contextInfo,n,1,this.context.fileIndentInfo);return Gp(a,this.expandedRange)});let o=this,s=this.computeRules(r);this.promptCrafter=new class extends ui{constructor(){super(e,{rules:s},1,r)}async buildPrompt(a,l,c,u,d){o.nodeToDocument||(o.nodeToDocument=await pf.determineNodeToDocument(o.accessor,o.context));let p=await new pf(o.nodeToDocument).resolveContext(o.accessor,o.accessor.get(He),a,o.context,void 0,void 0);if(p){o.contextInfo=p?.metadata.contextInfo,o.expandedRange=p?.metadata.expandedRange;let f=await o.computeQueryPrefix(e,r),m=[];for(let g of p.userMessages)m.push(new Jr({message:g,type:"user"}));let h=a.getLatestTurn();if(!h)throw new Error("No last message");h.request.message=`${f} ${h.request.message}`.trim(),a=new gn(a.systemPrompt,[m,a.turns].flat())}return super.buildPrompt(a,l,c,u,d)}}}computeRules(e){return`
- Each code block starts with \`\`\` and ${Fr.forLanguage(e.language)}.
- You always answer with ${e.language.languageId} code.
- When the user asks you to document something, you must answer in the form of a ${e.language.languageId} code block.`.trim()}async computeQueryPrefix(e,r){let n,i;this.nodeToDocument===void 0||!this.nodeToDocument.identifier?(n=!1,i="the selection"):(n=!0,i=this.nodeToDocument.identifier);let o;switch(r.document.languageId){case"typescript":case"typescriptreact":o=n?"a TSDoc comment":"TSDoc comment";break;case"javascript":case"javascriptreact":o=n?"a JSDoc comment":"JSDoc comment";break;case"python":o="docstring";break;default:o="documentation comment"}return`Please add ${o} for ${i}.`}static _sendExtractDocTelemetry(e,r,n,i,o){e.sendTelemetryEvent("extractDoc",{languageId:r,couldExtractDoc:i===void 0?"false":"true"},{codeBlockLen:n,timeSpentMs:o})}};var zI=class t extends tn{static{this.ID="edit"}constructor(){super({id:t.ID,location:1,description:"Refactors the selected code based on requirements provided by the user",sampleQuestion:"Change this method to use async/await",commandInfo:{hiddenFromUser:!0},requiredContextKinds:["inline-chat-selection"]})}};var WI="_github.copilot.openRelativePath",KI="_github.copilot.openSymbolInFile";function uLe(t,e){return`[\`${t}\`](${Jre(WI,[e.replace(/\\/g,"/")])} "${Zre(e)}")`}function dLe(t,e,r){return`[\`${t}\`](${Jre(KI,[r.replace(/\\/g,"/"),e])} "${Zre(r)}")`}function Jre(t,e){return`command:${t}?${encodeURIComponent(JSON.stringify(e))}`}function Zre(t){return t.replace(/"/g,'\\"')}var pLe=`
Think step by step:

1. Read the provided relevant workspace information (code excerpts, file names, and symbols) to understand the user's workspace.

2. Consider how to answer the user's prompt based on the provided information and your specialized coding knowledge. Always assume that the user is asking about the code in their workspace instead of asking a general programming question. Prefer using variables, functions, types, and classes from the workspace over those from the standard library.

3. Generate a response that clearly and accurately answers the user's question. Use links for referenced symbols (example: [\`VariableName\`](path/to/file.ts)) and files (example: [path/to/file](path/to/file.ts)) so that the user can open them. If you do not have enough information to answer the question, respond with "I'm sorry, I can't answer that question with what I currently know about your workspace".

Remember that all referenced symbols and files MUST link their source files. Example: [\`functionName\`](path/to/util.ts) or [path/to/file.js](path/to/file.js).
`.trim(),fLe=`
Question:
What file implements base64 encoding?

Response:
Base64 encoding is implemented in [src/base64.ts](src/base64.ts) as [\`encode\`](src/base64.ts) function.


Question:
How can I join strings with newlines?

Response:
You can use the [\`joinLines\`](src/utils/string.ts) function from [src/utils/string.ts](src/utils/string.ts) to join multiple strings with newlines.


Question:
How do I build this project?

Response:
To build this TypeScript project, run the \`build\` script in the [package.json](package.json) file:

\`\`\`sh
npm run build
\`\`\`


Question:
How do I read a file?

Response:
To read a file, you can use a [\`FileReader\`](src/fs/fileReader.ts) class from [src/fs/fileReader.ts](src/fs/fileReader.ts).
`.trim(),k0="workspace",mLe=new tn({location:2,id:k0,description:"Ask a question about the files in your current workspace",sampleQuestion:"How do I build this project?",commandInfo:{allowsEmptyArgs:!1,defaultEnablement:!0},systemPromptOptions:{roleplay:"You are a software engineer with expert knowledge of the codebase the user has open in their workspace.",examples:fLe},rules:pLe,requiredContextKinds:["project-labels","current-selection","workspace"],responseProcessor:(t,e,r,n,i)=>{let o="";e.response||(e.response={message:o,type:"model"});let s=t.get(He),a=t.get(Pr),l=!1,c=Promise.resolve(""),u=new xo(p=>{c=c.then(async()=>{let f=p,m=s.workspaceFolders;if(m?.length&&(f.startsWith("```")&&(l=!l),!l)){let g=String.raw`(\S+?\.[\w\d]{1,4}?)`;f=f.replace(new RegExp("\\[`(.+?)`\\]\\("+g+"\\)","g"),(y,_,T)=>{let I=_.match(/^\w[\d\w]*/);return I?dLe(_,I[0],T):y});let v=async(y,_,T)=>{if(/^\w+:/.test(T))return y;try{let I=Tt.joinPath(m[0],T);return await a.stat(I),uLe(T,T)}catch{return _}};if(f=await Xre(f,new RegExp("\\[([^`\\s]+)\\]\\("+g+"\\)","g"),v),i.isCancellationRequested)return"";f=await Xre(f,new RegExp("(?<!\\[)(`([^`\\s]+)`)(?!\\])","g"),v)}let h=new Ls(f);return h.isTrusted={enabledCommands:[WI,KI]},o+=f,e.response.message+=f,r.report({content:h}),o})}),d=new zc;return i.onCancellationRequested(()=>d.cancel()),{get appliedText(){return d.p},apply(p){u.apply(p)},finish(){c.then(p=>d.complete(p),p=>d.error(p))}}}});Rr.registerIntent(mLe);function Xre(t,e,r){let n=[],i=0;for(let o of t.matchAll(e)){if(n.push(t.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,n.push(r(o[0],...o.slice(1),o.index,t,o.groups))}return n.push(t.slice(i)),Promise.all(n).then(o=>o.join(""))}Rr.registerIntent(new $I);Rr.registerIntent(new ff);Rr.registerIntent(new zI);Rr.registerIntent(new Lu);Rr.registerIntent(new RT);Rr.registerIntent(new DT);Rr.registerIntent(new FT);Rr.registerIntent(Us.Instance);Rr.registerIntent(new cg);var hLe=new Map;var ene=t=>t.get(js).onDidFocusTextDocument(e=>{e&&hLe.set(e.document.uri.toString(),Date.now())});var mf=class{};function rne(t){let e=t.get(mi);e.registerStaticFilters(gLe(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Sn(t,be.DebugOverrideEngine))}function gLe(t){let e=vLe(t),r=t.get(mf).addEditorSpecificFilters();return{...e,...r}}function vLe(t){let e=t.get(uo),r=t.get(Mi).getEditorInfo(),n=t.get(ei);return{"X-VSCode-AppVersion":tne(r.version),"X-MSEdge-ClientId":n.machineId,"X-VSCode-ExtensionName":e.getName(),"X-VSCode-ExtensionVersion":tne(e.getVersion()),"X-VSCode-TargetPopulation":"public"}}function tne(t){return t.split("-")[0]}var YI=class{sendInternalTelemetryEvent(e,r,n){}postEvent(e,r){}setSharedProperty(e,r){}sendTelemetryErrorEvent(e,r,n){}sendTelemetryEvent(e,r,n){}};var QI=Te(require("fs"));var sB=`${process.env.HOME}/.copilot-testing-gh-token`,oB;function nne(){return oB||(oB=yLe()),oB}var yLe=()=>{let t=process.env.GITHUB_TOKEN??_Le();if(t)return new JS({token:t.trim()});if(process.env.GH_COPILOT_TOKEN)return new Gh(process.env.GH_COPILOT_TOKEN);throw new Error(`Tests: either GH_COPILOT_TOKEN, or GITHUB_TOKEN, must be set, or there must be a GitHub token from an app with access to Copilot in ${sB}. Run "npm run get_token" to get one.`)};function _Le(){if(QI.existsSync(sB))return QI.readFileSync(sB).toString()}var XI=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var vf=require("vscode");var hf=require("vscode");var xLe=["read:user"],ine=["user:email"],bLe=["read:user","user:email","repo","workflow"],aB="You are not signed in to GitHub. Please sign in to use Copilot.";function cB(){return hf.workspace.getConfiguration(un).get("advanced")?.authProvider==="github-enterprise"?"github-enterprise":"github"}async function one(t,e){let r=t.provider,n=cB();if(r.id===n){let i=e.get(Wc);if(await hf.authentication.getSession(n,ine,{silent:!0}))return i.forceNormal(),await e.get(Ot).getCopilotToken(e,!0);e.get(Ot).resetCopilotToken(e),i.setWarning(aB)}}async function gf(){let t=cB();return await hf.authentication.getSession(t,ine,{silent:!0})??await hf.authentication.getSession(t,xLe,{silent:!0})}async function sne(t){let e=cB();return await hf.authentication.getSession(e,bLe,t)}var ane=!1;async function ELe(t){let e=new Re(t,"auth"),r=await gf();if(!r)return e.info("GitHub login failed"),t.get(ut).sendErrorTelemetry("auth.github_login_failed"),{kind:"failure",reason:"GitHubLoginFailed"};e.info(`Logged in as ${r.account.label}`);let n=await XS(t,{token:r.accessToken});return n.kind==="success"&&e.info(`Got Copilot token for ${r.account.label}`),n}var JI=class{async showWarningMessage(e,...r){return{title:await vf.window.showWarningMessage(e,...r.map(i=>i.title))}}},N0=class extends Error{},O0=class extends Error{},D0=class extends Error{};async function CLe(t){let e=await ELe(t);if(e.kind==="failure"&&e.reason==="NotAuthorized"){let r=e.message;if(r?.includes("No access to GitHub Copilot found"))throw new N0(r??"User not authorized");if(r?.includes("Your subscription has ended"))throw new O0(r);if(r?.includes("Please contact your enterprise admin to enable your managed account for Copilot for Business"))throw new D0(r)}if(e.kind==="failure"&&e.reason==="HTTP401"){let r="Your GitHub token is invalid. Please sign out from your GitHub account using the VS Code accounts menu and try again.";throw ane||(ane=!0,vf.window.showWarningMessage(r)),Error(r)}if(e.kind==="failure"&&e.reason==="GitHubLoginFailed")throw Error("GitHubLoginFailed");if(e.kind==="failure")throw Error("Failed to get copilot token");return e}var ZI=class extends Ot{constructor(){super();this.copilotToken=void 0,this._disposable=vf.Disposable.from(vf.authentication.onDidChangeSessions(r=>XQ(r,this)))}dispose(){this._disposable.dispose()}async getBasicGitHubToken(){return(await gf())?.accessToken}async getPermissiveGitHubToken(r){return(await sne(r))?.accessToken}async getCopilotToken(r,n){return(!this.copilotToken||this.copilotToken.expires_at<xu()||n)&&(this.copilotToken=await CLe(r),ZS(r,this,this.copilotToken.refresh_in)),new bu(this.copilotToken.token,this.copilotToken.organization_list)}resetCopilotToken(r,n){n!==void 0&&r.get(ut).sendTelemetry("auth.reset_token_"+n),new Re(r,"auth").debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}};var nd=Te(require("vscode"));var lne=hP();function cne(t){return typeof t=="string"?t:JSON.stringify(t)}var ew=class extends yc{constructor(){super();this.config=nd.workspace.getConfiguration(un),nd.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(un)&&(this.config=nd.workspace.getConfiguration(un))})}getConfigKeyFromObject(r,n){return this.config[r]&&this.config[r][n]!==void 0?this.config[r][n]:_H(`${r}.${n}`)}getConfig(r){if(Array.isArray(r))return this.getConfigKeyFromObject(r[0],r[1]);let n=this.config.get(r);if(n===void 0)throw new Error(`Missing config default value: ${un}.${r}`);return n}isDefaultSettingOverwritten(r){if(Array.isArray(r))return this.config[r[0]][r[1]]!==void 0;let n=this.config.inspect(r);return n?!!n.globalValue||!!n.workspaceValue||!!n.workspaceFolderValue||!!n.defaultLanguageValue||!!n.globalLanguageValue||!!n.workspaceLanguageValue||!!n.workspaceFolderLanguageValue:!1}dumpConfig(){let r={};try{let n=lne.contributes.configuration?.[0]?.properties??{};for(let i in n){let s=i.replace(`${un}.`,"").split(".").reduce((a,l)=>a[l],this.config);typeof s=="object"&&s!==null?Object.keys(s).filter(a=>a!=="secret_key").forEach(a=>r[`${i}.${a}`]=cne(s[a])):r[i]=cne(s)}}catch(n){console.error(`Failed to retrieve configuration properties ${n}`)}return r}getLanguageConfig(r,n){let i=this.getConfig(r);if(n===void 0){let o=nd.window.activeTextEditor;n=o&&o.document.languageId}return n&&n in i?i[n]:i["*"]}},tw=class extends Mi{getEditorInfo(){return{name:"vscode",version:nd.version}}getEditorPluginInfo(){return{name:"copilot-chat",version:lne.version}}};var gl=Te(require("vscode"));var Ug=class t{constructor(e,r,n){this.accessor=e;this.sessionId=r;this.outputChannelProvider=n;this.requestCount=-1;this.logger=new wn(e,"chat")}logRequest(e){this.requestCount++,this.requestCount>0&&this.logInfo("",`

`),this.logInfo("REQUEST",e.message)}logMessages(e){let r="";e.forEach(n=>{r+=`${n.role}: ${n.content}

`}),this.logInfo("PROMPT MESSAGES",r)}logProgress(e,r){"content"in e&&this.logInfo(r?"RESPONSE":"",typeof e.content=="string"?e.content:e.content.value,!1)}logResponse(e){this.logInfo("",""),e.errorDetails&&this.logInfo("ERROR DETAILS",JSON.stringify(e.errorDetails))}logFollowups(e){this.logInfo("FOLLOWUPS",JSON.stringify(e))}logThrownError(e){this.logInfo("THROWN ERROR",e.stack?e.stack:e.message)}logIntent(e,r){this.logInfo("INTENT",e!==void 0?`User intent determined to be '${e}' via the ${r?"user":"model"}`:"Intent could not be determined")}logInfo(e,r,n=!0){Tu(this.accessor)&&(e&&(r=`[[${e} ${this.sessionId}_${this.requestCount}]]
${r}`),t.outputChannel===void 0&&(t.outputChannel=this.outputChannelProvider()),n?(this.logger.info(r+`
`),t.outputChannel.appendLine(r+`
`)):(this.logger.info(r),t.outputChannel.append(r)))}};var une=require("crypto");var rw=class{constructor(e,r,n){this.accessor=e;this.messageConverter=r;this.options=n;this.logger=new Re(e,"ConversationFollowUp")}async followUp(e,r,n){let i=e.copy();i.addTurn(new Jr({type:"meta",message:`Write a short one-sentence question that the user can ask that naturally follows from the previous few questions and answers. It should not ask a question which is already answered in the conversation. It should be a question that you are capable of answering. Reply with only the text of the question and nothing else.
					${rg(this.accessor)}`.trim()}));let o=n?{...n}:{};o.messageSource="chat.followup";let{messages:s}=await this.messageConverter.toChatMessages(i),a=await this.accessor.get(wt).fetchOne(s,void 0,r,2,1,{temperature:this.options.temperature,top_p:this.options.topP},o);if(a.type==="success"){let l=[];return a.value&&l.push(a.value.trim()),l}else return this.logger.errorAndSendTelemetry(`Failed to fetch followups because of response type (${a.type}) and reason (${a.reason})`,a),[]}};var lB;(e=>{function t(r,n,i){let{options:o,document:s,selection:a,visibleRanges:l}=n,c={insertSpaces:o.insertSpaces,tabSize:o.tabSize},u=Jc(r,s);return i||(l.length===1?i=l[0]:l.length>1?i=l[0].union(l[l.length-1]):i=a),{document:s,fileIndentInfo:c,language:u,selection:a,wholeRange:i}}e.fromEditor=t})(lB||={});var tc=class{constructor(e,r,n,i,o,s,a){this.options=r;this.username=i;this.conversationLogger=o;this.isInternal=s;this.sessionId=a;this.inputPlaceholder="Ask Copilot or type '/' for commands";this._microsoftTelemetryService=e.get(nr),this.accessor=e,this.commandService=e.get(Eo),this.conversation=new gn(tg(e)),this.intentDetector=new ag(e,2),this.conversation=this.intializeConversation(n),this.messageConverter=new eg(this.accessor,this.options.maxResponseTokens,2),this.conversationFollowUp=new rw(this.accessor,this.messageConverter,this.options)}get responder(){return{name:"GitHub Copilot"}}get requester(){return{name:this.username??"You",icon:this.username?zi.parse(`https://avatars.githubusercontent.com/${this.username}`):void 0}}addHistory(e){for(let r=0;r<e.length;r++){let n=e[r],i;if(n.role===1){let s=e[r+1];s&&s.role===2&&(i=s,r++)}let o=new Jr({message:n.content,type:n.role===1?"user":"model"});i&&(o.response={message:i.content,type:"model"}),this.conversation.addTurn(o)}}intializeConversation(e){if(e){let r=e;return new gn(tg(this.accessor),r.turns)}else return new gn(tg(this.accessor))}saveState(){return this.conversation.getState()}provideSlashCommands(e){return e.isCancellationRequested?[]:(this.accessor.get(Ni).agentsEnabled()?[this.commandService.getCommand(UI,2)]:this.commandService.allCommands(2)).map(n=>({command:n.commandId,detail:n.details,followupPlaceholder:n.intent?.commandInfo?.followupPlaceholder,kind:0,shouldRepopulate:n.intent?.commandInfo?.shouldRepopulate,executeImmediately:n.executeImmediately??n.intent?.commandInfo?.executeImmediately,yieldsTo:n.intent?.commandInfo?.yieldsTo}))}async provideResponseWithProgress(e,r,n,i){this.refreshFollowupsCancellationToken();try{let o=!0,s={report:u=>{this.conversationLogger?.logProgress(u,o),o=!1,r.report(u)}},a=this.newTurn(e),l=ss();l.markAsDisplayed();let c=await this._provideResponseWithProgress(a,e,s,n,l,i);return this.conversationLogger?.logResponse(c),this.lastResponse=c,this._microsoftTelemetryService.sendInternalTelemetryEvent("interactiveSessionResponse",{intent:a.intentInvocation?.intent.id??"",request:e.message,response:a.response?.message??"",sessionId:this.sessionId},{turnNumber:this.conversation.turns.length,isFollowup:typeof e.message=="string"?0:1}),{...c,responseId:a.requestId}}catch(o){throw this.conversationLogger?.logThrownError(o),o}}newTurn(e){let r;typeof e.message=="string"?r={message:e.message,type:"user"}:r={message:e.message.message,type:"follow-up"};let n=new Jr(r,this.sessionId);return this.conversation.addTurn(n),n}async _provideResponseWithProgress(e,r,n,i,o,s){if(i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:"Cancelled"}};try{let a=this.accessor.get(He).activeTextEditor,l=e.request.message;this.conversationLogger?.logRequest(e.request);let c=this.commandService.parse(l,2);if(c.command?.plainTextResponse){let y=c.command.plainTextResponse(this.accessor);return n.report({content:y}),e.response={message:y.value,type:"meta"},e.status="success",{}}if(s&&(c={command:s.intentId?cs.getCommand(s.intentId,2):void 0,restOfQuery:l}),c.command?.intent&&!(c.command.intent.commandInfo?.allowsEmptyArgs??!0)&&!c.restOfQuery)return e.response={message:`Please specify a question when using this command.

Usage: ${this.commandService.commandPrefix}${c.command.commandId} ${c.command.details}`,type:"meta"},e.status="error",{errorDetails:{message:e.response.message,responseIsFiltered:!1,responseIsIncomplete:!1}};let u=c?.command?.intent,d;u&&(e.request={message:c.restOfQuery||u.intentDetectionInput.sampleQuestion,type:"user"},this.conversationLogger?.logIntent(u.id,!0)),!u&&Ze(this.accessor,be.ConversationIntentDetection,{default:!1})?(u=d=await this.intentDetector.detectIntent(l,i,o),this.conversationLogger?.logIntent(u?.id,!1)):this.isInternal&&(d=u||this.conversation.turns.length!==1?void 0:await this.intentDetector.detectIntent(l,i,o)),u??=Us.Instance;let p=a?lB.fromEditor(this.accessor,a):void 0,f=await u.invoke(this.accessor,2,p,void 0);e.intentInvocation=f;let{messages:m,tokenCount:h}=await f.promptCrafter.buildPrompt(this.conversation,r.variables,n,o,i),g=this.conversation.getLatestTurn()?.contextParts.map(y=>y.kind)??[];if(this._microsoftTelemetryService.sendInternalTelemetryEvent("interactiveSessionMessage",{intent:u?.id??"none",detectedIntent:d?.id??"none",contextTypes:g.join(","),query:c.restOfQuery},{}),this.conversationLogger?.logMessages(m),o=nT(this.conversation,this.sessionId,"conversationPanel",l,h,u?.id,o),i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:"Cancelled"}};let v=f?.responseProcessor?f.responseProcessor(this.accessor,e,n,m,i):new Du([{stop:"[COMMANDS START]"}],e,n);return await this.fetchConversationResponse(e,l,m,i,n,v,o,{messageId:o.properties.messageId,messageSource:"chat.user"})}catch(a){this.accessor.get(Gc).exception(a),this.conversationLogger?.logThrownError(a);let l=a.message;return e.status="error",e.response={message:l,type:"meta"},{errorDetails:{message:l,responseIsIncomplete:!0}}}}async fetchConversationResponse(e,r,n,i,o,s,a,l){let c=ss();o.report({responseId:c.properties.messageId}),e.requestId=c.properties.messageId;let u=Date.now(),d=0,p=await this.accessor.get(wt).fetchOne(n,async y=>{d===0&&(d=Date.now()),s.apply(y)},i,2,0,{temperature:this.options.temperature,top_p:this.options.topP},l,{intent:!0});s.finish?.();let f=e.response?.message??"",m=f?NL(f):[],h=a.raw.displayedTime??u,g=["programming-related tasks","programming related questions","related to programming"],v=0;switch(p.type==="success"&&!f.trim().includes(`
`)&&g.some(y=>f.toLowerCase().includes(y))&&(v=1),this._microsoftTelemetryService.sendTelemetryEvent("panel.request",{command:e.intentInvocation?.intent.id??"none",contextTypes:e.contextParts.map(y=>y.kind).join(",")??"none",promptTypes:n.map(y=>`${y.role}${y.name?`-${y.name}`:""}:${y.content.length}`).join(","),conversationId:this.sessionId,requestId:e.requestId,responseId:p.requestId,responseType:p.type,codeBlocks:m.join(",")},{turn:this.conversation.turns.length,textBlocks:m.length?-1:f.split(/\n{2,}/).length??0,maybeOffTopic:v,messageLength:e.request.message.length,promptLength:n.reduce((y,_)=>y+_.content.length,0),userPromptCount:n.filter(y=>y.role==="user").length,responseLength:f.length??0,timeToRequest:u-h,timeToFirstToken:d?d-h:-1,timeToComplete:Date.now()-h}),iT(this.accessor,"conversationPanel",r,p.type==="offTopic",this.accessor.get(He).activeTextDocument,a),p.type){case"success":return await this.processSuccessfulFetchResult(e,s,p.requestId,c);case"offTopic":return await this.processOffTopicFetchResult(o,e,a);case"canceled":return e.status="cancelled",e.response={message:"Cancelled",type:"user"},{errorDetails:e.response};case"rateLimited":return e.status="error",{errorDetails:{message:"Sorry, your request was rate-limited. Please wait and try sending again later.",responseIsFiltered:!0}};case"badRequest":case"failed":return e.status="error",e.response={message:p.reason,type:"server"},{errorDetails:e.response};case"filtered":return e.status="filtered",{errorDetails:{message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",responseIsFiltered:!0}};case"length":return e.status="error",{errorDetails:{message:"Sorry, the response hit the length limit. Please rephrase your prompt.",responseIsFiltered:!0}};case"unknown":return e.status="error",{errorDetails:{message:"Sorry, no response was returned.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i){let o=await r.appliedText;return o.length>0?(e.status="success",e.response={message:o,type:"model"},i.markAsDisplayed(),oT(this.accessor,this.conversation,this.sessionId,"conversationPanel",o,n,this.accessor.get(He).activeTextDocument,i),{followsupsPromise:this.computeFollowups(!0,{messageId:i.properties.messageId})}):(e.status="error",e.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{errorDetails:e.response})}async processOffTopicFetchResult(e,r,n){let i=ss();return e.report({responseId:i.properties.messageId}),e.report({content:this.options.rejectionMessage}),r.response={message:this.options.rejectionMessage,type:"offtopic-detection"},r.status="off-topic",i.markAsDisplayed(),sT(this.accessor,this.conversation,this.sessionId,"conversationPanel",this.options.rejectionMessage,n.properties.messageId,this.accessor.get(He).activeTextDocument,i),{followsupsPromise:this.computeOfftopicFollowups()}}getLatestTurn(){return this.conversation.getLatestTurn()}async provideFollowups(e){return this.lastResponse?await this.lastResponse.followsupsPromise??[]:[]}removeRequest(e){let r=this.conversation.removeTurn(e);this._microsoftTelemetryService.sendTelemetryEvent("panel.action.remove",{command:r?.intentInvocation?.intent.id,contextTypes:r?.contextParts.map(n=>n.kind).join(",")??"none",responseType:r?.response?.type,conversationId:this.sessionId,requestId:e})}refreshFollowupsCancellationToken(){this.lastResponseFollowupsCancellation?.cancel(),this.lastResponseFollowupsCancellation?.dispose(),this.lastResponseFollowupsCancellation=new Fp}async computeOfftopicFollowups(){return this.computeFollowups(!1)}async computeFollowups(e=!0,r){let n=this.lastResponseFollowupsCancellation.token,o=(e?await this.conversationFollowUp.followUp(this.conversation,n,r):[]).map(c=>SLe(c,this.accessor,r));n.isCancellationRequested||this.conversationLogger?.logFollowups(o);let s=this.conversation.getLatestTurn(),a=[],l=s?.intentInvocation;return l?.followUps&&(a=await l.followUps(this.accessor,s)),o.concat(a)}};function SLe(t,e,r){let n=r??{};return n.suggestionId=(0,une.randomUUID)(),n.suggestionType="Follow-up from model",aT(e,n.suggestionType,n.messageId,n.suggestionId,e.get(He).activeTextDocument),{message:t,title:t,metadata:n}}var Ws=require("vscode");var nw=class extends LI{constructor(r,n,i,o,s,a,l,c){super(r,n,i,o,s,a,c);this.relatedInformationConfig=l;this.isIndexLoaded=!1}async provideRelatedInformation(r,n){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logger.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(n.isCancellationRequested)return this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this.embeddingsComputer.computeEmbeddings([r],n);if(this._logger.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),n.isCancellationRequested||!s||!s[0])return this._logger.debug(`Related Information: Request cancelled or no match found, returning ${Date.now()-i}ms`),[];let a=[];for(let c of this._items.values()){if(n.isCancellationRequested){this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(c.embedding){let u=td(s[0],c.embedding);u>this.relatedInformationConfig.threshold&&a.push(this.toRelatedInformation(c,u))}}return this._logger.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),a.sort((c,u)=>u.weight-c.weight).slice(0,this.relatedInformationConfig.maxResults)}},id=class extends nw{constructor(e,r){super("CommandIdIndex",e,1,"commandEmbeddings",uf(Ws.version),r,{type:Ws.RelatedInformationType.CommandInformation,threshold:.7,maxResults:100},{type:"commands",supportsExtensions:!0})}async getLatestItems(){let e=await Ws.commands.executeCommand("_getAllCommands");return e.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),e.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),e.map(r=>({key:r.command,label:r.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:r.label,keybinding:r.keybinding??"Not set"}))}getEmbeddingQueryString(e){return`${e.label} - ${e.key}`}toRelatedInformation(e,r){return{type:Ws.RelatedInformationType.CommandInformation,weight:r,command:e.key}}};function uB(t){let e=`Setting Id: ${t.key}
`;if(e+=`Type: ${t.type}
`,e+=`Description: ${t.description??t.markdownDescription??""}
`,t.enum){e+=`Possible values:
`;for(let r=0;r<t.enum.length;r++)e+=` - ${t.enum[r]} - ${t.enumDescriptions?.[r]??""}
`}return e+=`
`,e}var od=class extends nw{constructor(e,r){super("SettingsIndex",e,1,"settingEmbeddings",uf(Ws.version),r,{type:Ws.RelatedInformationType.SettingInformation,threshold:.7,maxResults:100},{type:"settings",supportsExtensions:!0}),this.isIndexLoaded=!1}async getLatestItems(){let r=await Ws.commands.executeCommand("_getAllSettings"),n=[];for(let i of Object.keys(r)){let o=r[i];o.deprecationMessage||o.markdownDeprecationMessage||n.push({...o,key:i})}return n}getEmbeddingQueryString(e){return uB(e)}toRelatedInformation(e,r){return{type:Ws.RelatedInformationType.SettingInformation,weight:r,setting:e.key}}},sd=class{constructor(e){this._commandIdIndex=e.get(id),this._settingsIndex=e.get(od)}async loadIndexes(){await Promise.all([this._commandIdIndex.isIndexLoaded?Promise.resolve():this._commandIdIndex.calculateEmbeddings(),this._settingsIndex.isIndexLoaded?Promise.resolve():this._settingsIndex.calculateEmbeddings()])}async nClosestValues(e,r){return await this.loadIndexes(),{commands:this._commandIdIndex.nClosestValues(e,r),settings:this._settingsIndex.nClosestValues(e,r)}}hasSetting(e){return this._settingsIndex.hasItem(e)}hasCommand(e){return this._commandIdIndex.hasItem(e)}getSetting(e){return this._settingsIndex.getItem(e)}getCommand(e){return this._commandIdIndex.getItem(e)}};async function dne(t,e){let r=t.get(sd);await r.loadIndexes();let n=TLe(r,e.response?.message??"");return ILe(r,n.settings,n.commands)}function TLe(t,e){let r=[];e=e.replace(/\n/g,"");let n=/```(json)?\s*([\s\S]+?)\s*```/g,i=e.match(n);for(let u of i??[]){let d=u.replace(/```(json)?\s*|\s*```/g,""),p;try{p=X_(d)}catch{}p&&!Array.isArray(p)&&r.push(p)}let o=[],s=/\[COMMANDS START\]```(?:json)?(.+)\[COMMANDS END\]/g,a;for(a of e.matchAll(s)){let u=a[1].trim(),d;try{d=X_(u)}catch{}d&&Array.isArray(d)&&o.push(...d)}let l=r.map(u=>{for(let d of Object.keys(u))if(!t.hasSetting(d))return!1;return!0}).some(u=>u===!1),c=o.map(u=>{if(u.command&&!t.hasCommand(u.command))return!1}).some(u=>u===!1);return{settings:r,commands:o,validationFailed:l||c}}async function ILe(t,e,r){let n=[],i=r.length;for(let o of e){let s="";for(let a of Object.keys(o))n.some(l=>l.args&&l.args[0].includes(`@id:${a}`))||t.hasSetting(a)&&(s+=`@id:${a} `);s=s.trimEnd(),s&&n.push({commandId:"workbench.action.openSettings",args:[s],title:"Show in Settings Editor"})}for(let o of r)if(o.command==="workbench.extensions.search"||o.command==="workbench.extensions.installExtension"){let s=(Array.isArray(o.args)?o.args:[o.args]).filter(a=>typeof a=="string");if(s.length===1){let a=["featured","popular","recentlyPublished","recommended","updates","builtin","enabled","disabled","installed","workspaceUnsupported"];s[0].includes(":")&&!s[0].startsWith("@")?s[0]=`@${s[0]}`:a.includes(s[0])&&(s[0]=`@${s[0]}`)}n.push({commandId:"workbench.extensions.search",args:s,title:"Search Extension Marketplace"})}else{let s=t.getCommand(o.command);if(!s)continue;n.push({commandId:"workbench.action.quickOpen",args:[`>${s.originalLabel}`],title:i>1?`Show "${s.originalLabel}"`:"Show in Command Palette"})}return n}var wLe=`
The current question is related to VS Code with a focus on commands and settings. The application is currently open.
If a command or setting is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all commands you referenced in your response
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),dB=class{constructor(){this.promptDescription="relevant information about vs code commands and settings";this.kind="vscode"}async resolveContext(e,r,n,i,o,s){let a=wLe+`

`;if(this._embeddingCompute??=e.get(rn),!o)return;this._commandsAndSettingsIndex||(this._commandsAndSettingsIndex=new sd(e));let l=await this._embeddingCompute?.computeEmbeddings([o],s);if(!l||s.isCancellationRequested)return;a+='Below is a list of commands and settings we found which might be relevant to the question. For view related commands "Toggle" often means Show or Hide. A setting may reference another setting, that will appear as `#setting.id#`, you must return the referenced setting as well. You may use this context to help you formulate your response, but are not required to.';let c=await this._commandsAndSettingsIndex.nClosestValues(l[0],5);return c.commands.length&&(a+=`Here are some possible commands:
`,a+=c.commands.map(u=>`- ${u.label} ("${u.key}") (Keybinding: "${u.keybinding}")`).join(`
`)),c.settings.length&&(c.commands.length&&(a+=`

`),a+=`Here are some possible settings:
`,a+=c.settings.map(u=>uB(u)).join(`
`)),a}};Ke.register(new dB);var ALe=`
[EXAMPLES START]
Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

## Settings response
Question: How do I disable telemetry?

Response:
\`\`\`json
{
    "telemetry.telemetryLevel": "off"
}
\`\`\`
is a setting which can be used to disable telemetry.

## Command response
Question: How do I close all editors?

Response:
You can use the **Close All Editors** command to close all editors.

[COMMANDS START]
\`\`\`json
[
    { "command": "workbench.action.closeAllEditors" }
]
\`\`\`
[COMMANDS END]

## No such command
Question: How do I move the terminal to a new window?

Response:
There is no such command.

## Invalid Question
Question: How do I bake a potato?

Response:
Sorry this question isn't related to VS Code.

## Marketplace search
Question: How do I add PHP support?

Response:
You can use the **Search marketplace** command to search for extensions that add PHP support.

[COMMANDS START]
\`\`\`json
[
    { "command": "workbench.extensions.search", "args": "php" }
]
\`\`\`
[COMMANDS END]
`,pB="vscode";Rr.registerIntent(new tn({location:2,id:pB,description:"Ask questions about VS Code",modelDescription:"Looks up VS Code commands and settings to accomplish the given editor-specific task.",sampleQuestion:"What is the command to open the integrated terminal?",systemPromptOptions:{examples:ALe,roleplay:"You are a VS Code assistant. Your job is to assist users in using VS Code by providing suggestions for settings and commands. If a command or setting is not a valid answer, but it still relates to VS Code, please still respond. Please do not guess a response and instead just respond with a polite apology if you are unsure."},commandInfo:{allowsEmptyArgs:!1},rules:`
You must respond with either a setting to set or a command to execute when applicable.
When referring to a command, you must use the command name in markdown bold syntax.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all commands you referenced in your response in the order they were referenced in a JSON code block containing a JSON array.
If a command or setting references another command or setting, you must respond with the original setting or command and the referenced setting or command.
All referenced settings must be properly formatted in a JSON markdown code block to allow copying them into the user's settings.json file.
You must not respond with a setting that is not in a properly formatted JSON markdown code block.
If a setting and command will accomplish the same thing, you must suggest the command instead.
You must not suggest opening the settings editor.
You must not suggest pressing any keybindings or keyboard shortcuts to execute commands.
You must not suggest opening the command palette to execute commands.
You must not suggest commands or settings identifiers that do not exist.
If you believe the context given to you is incorrect or not relevant you may ignore it.
If an extension might help the user, you may suggest a search query for the extension marketplace. You must also include the command **Search marketplace** (\`workbench.extensions.search\`) with args set to the suggested query in the commands section at the end of your response. The query can also contain the tags "@popular", "@recommended", or "@featured" to filter the results.`.trim(),requiredContextKinds:["vscode"],followUps:dne}));var ad=Te(require("vscode"));function pne(t,e){let r=ad.window.activeTextEditor?.document,n=ad.window.activeTextEditor?.selection,i=e.result,o=t.get(nr);switch(e.action.kind){case"copy":o.sendTelemetryEvent("panel.action.copy",{languageId:r?.languageId,requestId:i.responseId},{codeBlockIndex:e.action.codeBlockIndex,copyType:e.action.copyType,characterCount:e.action.copiedCharacters,lineCount:e.action.copiedText.split(`
`).length});break;case"insert":o.sendTelemetryEvent("panel.action.insert",{languageId:r?.languageId,requestId:i.responseId},{codeBlockIndex:e.action.codeBlockIndex,characterCount:e.action.totalCharacters});break;case"runInTerminal":o.sendTelemetryEvent("panel.action.runinterminal",{languageId:r?.languageId,requestId:i.responseId,blockLanguage:e.action.languageId},{codeBlockIndex:e.action.codeBlockIndex});break;case"followUp":rX(t,e.action.followup.metadata.suggestType,e.action.followup.metadata.messageId,e.action.followup.metadata.suggestionId,void 0);break}if(e.action.kind==="copy"||e.action.kind==="insert"){let s={};s={totalCharacters:e.action.totalCharacters},e.action.kind==="copy"&&(s={...s,copiedCharacters:e.action.copiedCharacters}),r&&n&&(s={...s,cursorLocation:r.offsetAt(n.active)}),Ua(t,ad.window.activeTextEditor?.document,{codeBlockIndex:e.action.codeBlockIndex.toString(),messageId:i.responseId},s,e.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}}function fne(t,e){let r=ad.window.activeTextEditor?.document,n=e.result;t.get(nr).sendTelemetryEvent("panel.action.vote",{languageId:r?.languageId,requestId:n.responseId},{direction:e.kind===ad.ChatAgentResultFeedbackKind.Helpful?1:2}),Ua(t,r,{rating:e.kind===ad.ChatAgentResultFeedbackKind.Helpful?"positive":"negative",messageId:n.responseId},{},"conversation.messageRating")}var iw=class{constructor(e){this.accessor=e}agentsEnabled(){return Ze(this.accessor,be.EnableAgents,{default:!0})}async register(e){return new fB(this.accessor,e).register()}},fB=class{constructor(e,r){this.accessor=e;this.options=r;this._commandService=e.get(Eo),this._chatAgentService=this.accessor.get(Ni),this._logger=new Ug(this.accessor,"",()=>gl.window.createOutputChannel("GitHub Copilot Chat Conversation"))}async register(){if(!this._chatAgentService.agentsEnabled())return;this._isInternal=(await this.accessor.get(Ot).getCopilotToken(this.accessor))?.isInternal,this.accessor.get(Ht).subscriptions.push(this.registerWorkspaceAgent(),this.registerVSCodeAgent(),this.registerDefaultAgent())}createAgent(e,r){let n=gl.chat.createChatAgent(e,this.getChatAgentHandler(r));return n.onDidPerformAction(i=>pne(this.accessor,i)),n.onDidReceiveFeedback(i=>fne(this.accessor,i)),n}registerWorkspaceAgent(){let e=this.createAgent(Fg,k0);return e.fullName="Workspace",e.description="Ask about your workspace",e.followupProvider={provideFollowups:(r,n)=>"session"in r?r.session.provideFollowups(n):[]},e.iconPath=new gl.ThemeIcon("code"),e.slashCommandProvider={provideSlashCommands:r=>this.getSlashCommands(r0.workspace)},e.isSecondary=!0,e}registerVSCodeAgent(){let e=this.createAgent(Ore,pB);e.fullName="VS Code",e.description="Ask about VS Code",e.followupProvider={provideFollowups:(n,i)=>"session"in n?n.session.provideFollowups(i):[]},e.slashCommandProvider={provideSlashCommands:n=>this.getSlashCommands(r0.vscode)};let r=gl.env.appName.includes("Insiders")||gl.env.appName.includes("OSS");return e.iconPath=Tt.joinPath(this.accessor.get(Ht).extensionUri,"assets",r?"vscode-chat-avatar-insiders.svg":"vscode-chat-avatar-stable.svg"),e}registerDefaultAgent(){let e=this.createAgent("","");return e.isDefault=!0,e.fullName="GitHub Copilot",e.description="",e.followupProvider={provideFollowups:(r,n)=>"session"in r?r.session.provideFollowups(n):[]},e.slashCommandProvider={provideSlashCommands:r=>[]},e}getSlashCommands(e){let r=[];return e.forEach(n=>{let i=this._commandService.getCommand(n,2)?.intent;i&&r.push({name:i.id,description:i.description,followupPlaceholder:i.commandInfo?.followupPlaceholder,shouldRepopulate:i.commandInfo?.shouldRepopulate})}),r}getChatAgentHandler(e){return async(r,n,i,o)=>{let s=new tc(this.accessor,this.options,void 0,"",this._logger,this._isInternal,"");s.addHistory(n.history);let a={session:s,message:r.prompt,variables:r.variables},l=r.slashCommand?.name??e,c=await s.provideResponseWithProgress(a,i,o,{intentId:l});return c.session=s,c}}};var mne=require("util"),qg=require("vscode"),RLe=require("path"),ow=class{constructor(){this.indicators=new Map;this.contentIndicators=new Map;this._labels=[];this.initIndicators()}get labels(){if(this._labels.includes("javascript")&&this._labels.includes("typescript")){let e=this._labels.indexOf("javascript");this._labels.splice(e,1)}return this._labels}collectContext(){let e=qg.workspace.workspaceFolders;e&&e.forEach(r=>{this.addContextForFolders(r.uri.fsPath)})}addContextForFolders(e){this.indicators.forEach((r,n)=>{this.addLabelIfApplicable(e,n,r)})}addLabelIfApplicable(e,r,n){let i=RLe.join(e,r),o=qg.Uri.file(i);qg.workspace.fs.stat(o).then(()=>{n.forEach(a=>this._labels.push(a));let s=this.contentIndicators.get(r);s&&qg.workspace.fs.readFile(o).then(a=>{try{s(new mne.TextDecoder().decode(a)).forEach(c=>this._labels.push(c))}catch{}})},()=>{})}initIndicators(){this.addIndicator("package.json","javascript","npm"),this.addIndicator("tsconfig.json","typescript"),this.addIndicator("pom.xml","java","maven"),this.addIndicator("build.gradle","java","gradle"),this.addIndicator("requirements.txt","python","pip"),this.addIndicator("Pipfile","python","pip"),this.addIndicator("Cargo.toml","rust","cargo"),this.addIndicator("go.mod","go","go.mod"),this.addIndicator("pubspec.yaml","dart","pub"),this.addIndicator("build.sbt","scala","sbt"),this.addIndicator("build.boot","clojure","boot"),this.addIndicator("project.clj","clojure","lein"),this.addIndicator("mix.exs","elixir","mix"),this.addIndicator("composer.json","php","composer"),this.addIndicator("Gemfile","ruby","bundler"),this.addIndicator("build.xml","java","ant"),this.addIndicator("build.gradle.kts","java","gradle"),this.addIndicator("yarn.lock","yarn"),this.addContentIndicator("package.json",this.collectPackageJsonIndicators)}addIndicator(e,...r){this.indicators.set(e,r)}addContentIndicator(e,r){this.contentIndicators.set(e,r)}collectPackageJsonIndicators(e){let r=[],n=JSON.parse(e),i=n.dependencies,o=n.devDependencies;i&&(i["@angular/core"]&&r.push("angular"),i.react&&r.push("react"),i.vue&&r.push("vue")),o&&o.typescript&&r.push("typescript");let s=n.engines;return s&&(s.node&&r.push("node"),s.vscode&&r.push("vscode extension")),r}};var mB=class{constructor(e){this.workspaceLabels=e;this.promptDescription="I am working on a project of the following nature";this.kind="project-labels"}async resolveContext(e,r){if(this.workspaceLabels.labels.length>0)return this.workspaceLabels.labels.join(`
-`)}},hne=new ow;Ke.register(new mB(hne));Ba.registerContribution(()=>{hne.collectContext()});var X=Te(require("vscode"));var sw=Te(require("vscode"));var aw=class{constructor(e){this.ctx=e}async provideChatResponse(e,r,n,i){let o=e.map(l=>{let c={content:l.content,name:l.name,role:"user"};switch(l.role){case sw.ChatMessageRole.System:c.role="system";break;case sw.ChatMessageRole.Assistant:c.role="assistant";break;case sw.ChatMessageRole.User:c.role="user";break}return c}),s=this.ctx.get(wt),a=0;await s.fetchMany(o,async(l,c)=>{let u=l.substring(a);a+=u.length,n.report({part:u,index:c})},i,3,0,{n:r.n,stream:!0})}};var gne=require("path"),vne=require("util"),Ie=require("vscode");var On=require("vscode"),cw=class{constructor(e){this.contentManager=e;this._onDidChangeFile=new On.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event}async stat(e){let r=this.contentManager.get(e.authority,e.path);if(!r)throw On.FileSystemError.FileNotFound(e);let n=await r.content?.then(i=>i?.length)??0;return{ctime:r.ctime??0,mtime:r.ctime??0,size:n,type:r.children?On.FileType.Directory:On.FileType.File,permissions:On.FilePermission.Readonly}}readDirectory(e){let r=this.contentManager.get(e.authority,e.path);if(!r)throw On.FileSystemError.FileNotFound(e);return r.children?.map(n=>[n.label,n.children?On.FileType.Directory:On.FileType.File])??[]}async readFile(e){let r=this.contentManager.get(e.authority,e.path);if(!r)throw On.FileSystemError.FileNotFound(e);let n;try{n=await r.content}catch{}return n??new Uint8Array}watch(e,r){return{dispose(){}}}createDirectory(e){throw On.FileSystemError.NoPermissions(e)}writeFile(e,r,n){throw On.FileSystemError.NoPermissions(e)}delete(e,r){throw On.FileSystemError.NoPermissions(e)}rename(e,r,n){throw On.FileSystemError.NoPermissions(r)}copy(e,r,n){throw On.FileSystemError.NoPermissions(r)}};function yne(t,e){return PLe(t,e),Ie.Disposable.from(Ie.workspace.registerFileSystemProvider("vscode-copilot-workspace",new cw(t.get(nl)),{isReadonly:new Ie.MarkdownString(Ie.l10n.t(`This file preview was generated by Copilot and may contain surprises or mistakes.

Ask followup questions to refine it, then press Create Workspace.`))}),Ie.commands.registerCommand("github.copilot.createProject",async(r,n,i,o,s)=>{let a=t.get(yf).getInteractiveSession(o),l=(await Ie.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select as Parent Folder"}))?.[0];if(!l)return;let c=n[0].path,u=await DLe(l,c),d=new RegExp(c,"g"),p=[];Ie.window.tabGroups.all.forEach(f=>{f.tabs.forEach(m=>{m.input instanceof Ie.TabInputText&&m.input.uri.scheme==="vscode-copilot-workspace"&&p.push(m)})}),Ie.window.tabGroups.close(p,!0),await Ie.window.withProgress({location:Ie.ProgressLocation.Notification,cancellable:!0},async(f,m)=>{for(let y of n){let _=y.path.replace(d,u),T=Ie.Uri.joinPath(l,_);switch(y.type){case"folder":{f.report({message:Ie.l10n.t("Creating folder {0}...",_)}),await Ie.workspace.fs.createDirectory(T);break}case"file":{f.report({message:Ie.l10n.t("Creating file {0}...",_)});let I=wM(s,y.path),R=await Ie.workspace.fs.readFile(I),w=Ie.Uri.joinPath(l,_);await Ie.workspace.fs.writeFile(w,Buffer.from(R));break}default:break}}let h=Ie.Uri.joinPath(l,u);a!==void 0&&Ie.interactive.transferChatSession(a,h),new Re(t,"createWorkspaceIntent").info("Opening folder: "+h.fsPath);let g=t.get(Ht),v=g.globalState.get("CopilotGeneratedWorkspaceUris",[]);await g.globalState.update("CopilotGeneratedWorkspaceUris",[...v,h.toString()]);try{await MLe(h)}catch{}await Ie.commands.executeCommand("vscode.openFolder",h)})}))}async function PLe(t,e){let r=t.get(Ht),n=r.globalState.get("CopilotGeneratedWorkspaceUris",[]),i=Ie.workspace.workspaceFolders?.[0]?.uri.toString();if(!i)return;let[o,s]=n.reduce(([a,l],c)=>c===i?[a,!0]:[[...a,c],l],[[],!1]);if(s){let a=Ie.workspace.getConfiguration(un).get("workspace.experimental.fileLimit",0);if(a<=0)return;let l=await _ne(Ie.Uri.parse(i),a),c=new Ie.WorkspaceEdit,u=new Ie.CancellationTokenSource().token;for(let p of l){let f=await kLe(p.uri,u);if(!f.length)continue;let m=await jJ(t,e,p,f[0],u);m&&c.set(p.uri,m)}let d=Ie.l10n.t("Apply Fixes");if(c.size>0){if(await Ie.window.showInformationMessage(Ie.l10n.t("We detected errors in your project. Would you like to apply the suggested fixes?"),d)!==d)return;await Ie.workspace.applyEdit(c)}await r.globalState.update("CopilotGeneratedWorkspaceUris",o)}}async function kLe(t,e,r=5e3){let n,i;return new Promise(o=>{n=e.onCancellationRequested(o);let s;i=setTimeout(()=>{s?.dispose(),o([])},r),new Promise(a=>{s=Ie.languages.onDidChangeDiagnostics(async l=>{if(l.uris.map(String).includes(t.toString())){let c=Ie.languages.getDiagnostics(t);if(c.length>0){let u=c.filter(d=>OLe(d));a(u)}}else a([])})}).then(a=>{s?.dispose(),o(a)})}).finally(()=>{n.dispose(),clearTimeout(i)})}var NLe=[".txt",".md",".json",".ini",".lock",".gitignore",".gitattributes",".env"];async function _ne(t,e,r=[]){let n=await Ie.workspace.fs.readDirectory(t);for(let[i,o]of n){if(r.length>e)break;if(o===Ie.FileType.File&&!NLe.includes((0,gne.extname)(i))){let s=Ie.Uri.joinPath(t,i),a=await Ie.window.showTextDocument(s);r.push(a.document)}else o===Ie.FileType.Directory&&await _ne(Ie.Uri.joinPath(t,i),e,r)}return r}function OLe(t){return t.severity===Ie.DiagnosticSeverity.Error&&t.message.includes("Did you mean")}async function DLe(t,e){let r=0,n=!0,i=e;for(;n;)try{await Ie.workspace.fs.stat(Ie.Uri.joinPath(t,i)),i=e+"-"+ ++r}catch{n=!1}return i}async function LLe(t){try{return await Ie.workspace.fs.stat(t),!0}catch{return!1}}async function MLe(t){let e=FLe();if(e)if(await LLe(e)){let r=await Ie.workspace.fs.readFile(e).then(i=>new vne.TextDecoder().decode(i)),n=JSON.parse(r);n.push(t.toString()),await Ie.workspace.fs.writeFile(e,Buffer.from(JSON.stringify(n,null,2)))}else await Ie.workspace.fs.writeFile(e,Buffer.from(JSON.stringify([t.toString()],null,2)))}function FLe(){let t=Ie.env.appName.indexOf("Insider")>0||Ie.env.appName.indexOf("Code - OSS Dev")>=0?"Code - Insiders":"Code",e=Ie.Uri.file(process.env.HOME||(process.env.HOMEPATH?process.env.HOMEPATH:""));switch(process.platform){case"darwin":return Ie.Uri.joinPath(e,"Library","Application Support",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"linux":return Ie.Uri.joinPath(e,".config",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"win32":return process.env.APPDATA?Ie.Uri.joinPath(Ie.Uri.file(process.env.APPDATA),t,"User","workspaceStorage","aiGeneratedWorkspaces.json"):void 0;default:return}}var _f=Te(require("vscode"));var lw=class{constructor(e){this.accessor=e;this.logger=new wn(e,"git commit message generator"),this.options=e.get(Wi)}async generateGitCommitMessage(e,r,n){let i=await this.accessor.get(Xt).getChatEndpointInfo(),o=Math.floor(i.modelMaxTokenWindow*4/3),s=BLe(e,o),a=[{role:"system",content:s}],l=Math.min(this.options.temperature*(1+r),2),c=await this.accessor.get(wt).fetchOne(a,void 0,n,3,0,{temperature:l,top_p:this.options.topP},{messageSource:"command.generateGitCommitMessagePrompt"});if(this.logger.logResponse(c),c.type==="success")return this.processGeneratedCommitMessage(c.value)}processGeneratedCommitMessage(e){return e.replace(/\*\*\*/gm,"").trim()}};function BLe(t,e){let r=e-Math.floor(e*.1),n=t.join(`

`).length;if(n>r)for(t.sort((i,o)=>i.length-o.length);n>r&&t.length>0;){let i=t.pop();n-=i.length}return`
${tl()}
${rl()}

You are an AI assistant for a software developer who is about to commit some changes to a Git repository.
Below is a git diff that contains the changes that the developer has made:
${t.join(`

`)}

Based on the git diff, please suggest a commit message for the developer to use.
The commit message should be short and concise that describes the changes in the code.
The commit message should start with *** and end with ***.
`.trim()}var uw=class{constructor(e){this.accessor=e;this.icon=new _f.ThemeIcon("sparkle");this.title=zh.t("Generate Commit Message");this._changesMap=new Map;this._disposables=[];this._disposables.push(...this.registerCommitMessageProvider())}registerCommitMessageProvider(){let e=[],r=_f.extensions.getExtension("vscode.git"),n=async()=>{let i=await r.activate(),o=s=>{if(s){let a=i.getAPI(1);e.push(a.registerCommitMessageProvider(this))}};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{let i=_f.extensions.onDidChange(()=>{!r&&_f.extensions.getExtension("vscode.git")&&(r=_f.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}async provideCommitMessage(e,r,n){if(!n.isCancellationRequested)try{let i=this.getAttemptCount(e,r),s=await new lw(this.accessor).generateGitCommitMessage(r,i,n);return this._changesMap.set(e.rootUri.fsPath,[r,i]),s}catch{return}}getAttemptCount(e,r){let[n,i]=this._changesMap.get(e.rootUri.fsPath)??[[],1];if(n.length!==r.length)return 1;for(let o=0;o<r.length;o++)if(n[o]!==r[o])return 1;return i+1}dispose(){this._disposables.forEach(e=>e.dispose())}};var L0=Te(require("vscode"));var dw=class t{constructor(e){this.accessor=e;this.disposables=[];this.lastContext={commitMessages:[],patches:[]};this.logger=new wn(e,"GitHub pull request title and description generator"),this.options=e.get(Wi),this.initializeGitHubPRExtensionApi()}getExtension(){return L0.extensions.getExtension("github.vscode-pull-request-github")}initializeGitHubPRExtensionApi(){let e=this.getExtension(),r=async()=>{if(e){let n=await e.activate();this.gitHubExtensionApi=n,this.registerTitleAndDescriptionProvider()}};if(e)r();else{let n=L0.extensions.onDidChange(()=>{e=this.getExtension(),e&&(r(),n.dispose())});this.disposables.push(n)}}dispose(){this.disposables.forEach(e=>e.dispose())}async registerTitleAndDescriptionProvider(){if(this.gitHubExtensionApi)try{this.disposables.push(this.gitHubExtensionApi.registerTitleAndDescriptionProvider(L0.l10n.t("Generate with GitHub Copilot"),this))}catch{}}isRegenerate(e,r){if(e.length!==this.lastContext.commitMessages.length||r.length!==this.lastContext.patches.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==this.lastContext.commitMessages[n])return!1;for(let n=0;n<r.length;n++)if(r[n]!==this.lastContext.patches[n])return!1;return!0}async provideTitleAndDescription(e,r,n){let i=await this.accessor.get(Xt).getChatEndpointInfo(),o=Math.floor(i.modelMaxTokenWindow*4/3),s=this.createPRTitleAndDescriptionPrompt(e,r,o),a=[{role:"system",content:s}],l=await this.accessor.get(wt).fetchOne(a,void 0,n,3,0,{temperature:this.isRegenerate(e,r)?this.options.temperature+.1:this.options.temperature,top_p:this.options.topP},{messageSource:"extension.providePullRequestTitleAndDescription"});if(this.logger.logResponse(l),this.lastContext={commitMessages:e,patches:r},l.type==="success")return t.parseFetchResult(l.value)}static parseFetchResult(e,r=!0){e=e.trim();let n=e,i=n.indexOf("+++");if(i===-1)return;let o=n.lastIndexOf("+++");n=n.substring(i+3,o>i+3?o:void 0).trim();let s=n.split("+++").filter(u=>u.trim().length>0),a;if(s.length===1)a=s[0].split(`
`);else if(s.length>1){let u=s.slice(1).map(d=>d.split(`
`)).flat().filter(d=>d.trim().length>0);a=[s[0],...u]}else return;let l,c;if(a.length===1){if(l=a[0].trim(),r&&e.includes(`
`)&&e.split("+++").length===3)return this.parseFetchResult(e+"+++",!1)}else if(a.length>1){l=a[0].trim(),c="";let u=a.slice(1);for(let d of u)d.includes("commit message")||(c+=`${d.trim()}

`)}if(l)return l=l.replace(/Title\:\s/,"").trim(),c&&(c=c.replace(/Description\:\s/,"").trim()),{title:l,description:c}}createPRTitleAndDescriptionPrompt(e,r,n){let i=e.map(a=>`* ${a}`).join(`
`),o=n-Math.floor(n*.1)-i.length,s=r.join(`

`).length;if(s>o)for(r.sort((a,l)=>a.length-l.length);s>o&&r.length>0;){let a=r.pop();s-=a.length}return`
${tl()}
${rl()}

You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository.
Pull requests have a short and concise title that describes the changes in the code and a slightly longer description.
The description can be more detailed but should still be concise and should never list commits or files.
These are the commits that will be included in the pull request:
${i}
Below is a list of git patches that contain the file changes for all the files that will be included in the pull request:
${r.join(`

`)}

Based on the git patches and on the git commit messages above, please suggest a specific title and description for the pull request. Don't generate an issue number reference.
The title and description should be markdown and start with +++ and end with +++. Here's a good example:
+++Batch mark/unmark files as viewed
+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.
Fixes #4520+++`}};var Ks=Te(require("vscode"));var pw=class{provideMappedEdits(e,r,n,i){if(n.documents.length===0)return null;let o=n.documents[0],s=e.uri.toString(),a=o.find(y=>y.uri.toString()===s);if(!a)return null;let l=a.ranges;if(l.length!==1||r.length!==1)return null;let c=l[0],u=r[0];if(!e.getText(new Ks.Range(new Ks.Position(c.start.line,0),new Ks.Position(c.start.line,c.start.character))).match(/^\s*$/))return null;let p=Ks.window.activeTextEditor,f;if(p&&p.options&&e.languageId===p.document.languageId){let y=p.options,_=typeof y.tabSize=="number"?y.tabSize:4,T=typeof y.insertSpaces=="boolean"?y.insertSpaces:!0;f={tabSize:_,insertSpaces:T}}let m=new Ks.Range(new Ks.Position(c.start.line,0),c.end),h=e.getText(m),g=Vp(u.split(`
`),{whichLine:"topMost",lines:h.split(`
`)},f).join(`
`),v=new Ks.WorkspaceEdit;return v.replace(e.uri,m,g),v}};var vn=Te(require("vscode"));var xne=require("vscode");function Hg(t,e,r){let n=xne.commands.registerCommand(e,async(...i)=>{try{return await r(...i)}catch(o){t.get(ut).sendExceptionTelemetry(o,e)}});t.get(Ht).subscriptions.push(n)}var gr=Te(require("vscode"));var xf=class extends gr.CodeAction{constructor(){super(...arguments);this.isAI=!0}},bf=class t{static{this.providedCodeActionKinds=[gr.CodeActionKind.QuickFix]}static getSevereDiagnostics(e){let r=e.filter(n=>n.severity<=gr.DiagnosticSeverity.Warning);return r.length===0?[]:r}static getDiagnosticsAsText(e){return e.map(r=>r.message).join(", ")}async provideCodeActions(e,r,n){if(!gr.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions"))return;let o=[];if(!gr.window.activeTextEditor)return o;let a=t.getSevereDiagnostics(n.diagnostics);if(a.length===0)return o;let l=a.map(f=>f.range).reduce((f,m)=>f.union(m)),c=new gr.Selection(l.start,l.end),u=t.getDiagnosticsAsText(a),d=new xf(gr.l10n.t("Fix using Copilot"),gr.CodeActionKind.QuickFix);d.diagnostics=a,d.command={title:d.title,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${u}`,position:l.start,initialSelection:c,initialRange:l}]};let p=new xf(gr.l10n.t("Explain using Copilot"),gr.CodeActionKind.QuickFix);return p.diagnostics=a,p.command={title:p.title,command:"github.copilot.interactiveEditor.explain",arguments:[`/explain ${u}`]},o.push(d,p),o}},M0=class{static{this.providedCodeActionKinds=[gr.CodeActionKind.RefactorRewrite]}constructor(e){this.logger=new Re(e,"RefactorsProvider")}async provideCodeActions(e,r,n){let i=await this.provideDocumentUsingCopilotCodeAction(e,r),o=this.provideGenerateUsingCopilotCodeAction(e);return[...i,...o]}provideGenerateUsingCopilotCodeAction(e){let r=[],n=gr.window.activeTextEditor;if(!n)return r;let i,o=n.selection;if(o.isEmpty){let s=e.lineAt(o.start.line).text;/^\s*$/g.test(s)&&(i=new xf(gr.l10n.t("Generate using Copilot"),gr.CodeActionKind.RefactorRewrite))}if(!o.isEmpty){let s=e.getText(o);/^\s*$/g.test(s)||(i=new xf(gr.l10n.t("Modify using Copilot"),gr.CodeActionKind.RefactorRewrite))}return i&&(i.command={title:i.title,command:"vscode.editorChat.start",arguments:[{position:o.start,initialSelection:o,initialRange:o}]},r.push(i)),r}async provideDocumentUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s;try{s=await pJ(e.languageId,e.getText(),o)}catch(u){this.logger.exception(u,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed")}if(s===void 0)return[];let a=gr.l10n.t("Document using Copilot: {0}",s.identifier),l=new xf(a,gr.CodeActionKind.RefactorRewrite),c=s.nodeRange===void 0?void 0:new De(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return l.command={title:a,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/doc",initialRange:c}]},[l]}};var bne=require("util"),Ene=Te(require("vscode"));var ULe="application/vnd.code.notebook.error",fw=class{constructor(e){this.accessor=e}async provideCellStatusBarItems(e,r){let n=e.outputs.flatMap(o=>o.items).find(o=>o.mime===ULe);if(!n)return[];let i;try{let o=new bne.TextDecoder;if(i=JSON.parse(o.decode(n.data)),!i.name&&!i.message)return[];let s="Fix using Copilot",a=[i.name,i.message].filter(Boolean).join(": ").replace(/\s*\(\S+,\s*line\s*\d+\)/,"");return[{text:"$(sparkle)",alignment:Ene.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:s,command:{title:s,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${a}`}]}}]}catch(o){this.accessor.get(_o).logIt(this.accessor,3,`Failed to parse error output ${o}`)}return[]}};function Cne(t){let e=a=>{let l=`@${k0} /${Va} `;if(typeof a=="string"&&a)l=a;else{let c=hl.getCurrentSelection(t.get(He));if(c){let u=vn.languages.getDiagnostics(c.activeDocument.uri),d=u.filter(f=>!!f.range.intersection(c.range));bf.getSevereDiagnostics(d).length?l+=bf.getDiagnosticsAsText(u):(l+=Y_,l+=hl.formatSelection({languageId:c.languageId,selectedText:c.selectedText}))}}vn.interactive.sendInteractiveRequestToProvider("copilot",{message:l})},r=()=>vn.commands.executeCommand("vscode.editorChat.start",{message:"/generate "}),n=()=>vn.commands.executeCommand("vscode.editorChat.start",{message:`/${ff.ID} `,autoSend:!0,initialRange:vn.window.activeTextEditor?.selection}),i=()=>vn.commands.executeCommand("vscode.editorChat.start",{message:`/${Lu.ID} `,autoSend:!0,initialRange:vn.window.activeTextEditor?.selection}),o=()=>{let a=vn.window.activeTextEditor;if(!a)return;let l=a.selection,c=vn.languages.getDiagnostics(a.document.uri).filter(u=>!!l.intersection(u.range)).map(u=>u.message).join(", ");return vn.commands.executeCommand("vscode.editorChat.start",{message:`/${ls} ${c}`,autoSend:!0,initialRange:vn.window.activeTextEditor?.selection})};try{Hg(t,"github.copilot.interactiveEditor.explain",e),Hg(t,"github.copilot.interactiveEditor.generate",r),Hg(t,"github.copilot.interactiveEditor.generateDocs",n),Hg(t,"github.copilot.interactiveEditor.generateTests",i),Hg(t,"github.copilot.interactiveEditor.fix",o)}catch(a){t.get(Gc).exception(a,"Could not register explain command")}t.get(Ht).subscriptions.push(vn.languages.registerCodeActionsProvider("*",new bf,{providedCodeActionKinds:bf.providedCodeActionKinds}),vn.languages.registerCodeActionsProvider("*",new M0(t),{providedCodeActionKinds:M0.providedCodeActionKinds}),vn.notebooks.registerNotebookCellStatusBarItemProvider("jupyter-notebook",new fw(t)))}var vB=require("crypto"),Dn=Te(require("vscode"));var Sne=Te(require("util")),Ao=require("vscode");var F0=new Map;async function Tne(t){t.get(Ht).subscriptions.push(new Ao.Disposable(()=>F0.forEach(r=>r.dispose()))),hB(t),gB(t)}var qLe=["default","smith"],mw;async function hB(t){return mw||(mw=HLe(t)),mw.then(()=>mw=void 0)}async function HLe(t){let e=new Re(t,"RemoteAgents");if(!Ze(t,be.EnableRemoteAgents,{default:!1}))return;let n=Ze(t,be.AgentsEndpointUrl,{default:"https://api.githubcopilot.com"}),i=new Set(F0.keys());try{let o=(await t.get(Ot).getCopilotToken(t)).token,a=await(await t.get(Kr).fetch(`${n}/agents`,{method:"GET",headers:{Authorization:Sne.format("Bearer %s",o),...va(t)}})).text(),l;try{l=JSON.parse(a).agents}catch(c){e.warn(`Invalid remote agent response: ${a} (${c})`);return}for(let c of l)qLe.includes(c.slug)||i.delete(c.slug)||F0.set(c.slug,jLe(t,e,c,n))}catch(o){e.warn(`Failed to load remote slash commands: ${o}`)}for(let o of i)F0.get(o).dispose(),F0.delete(o)}function jLe(t,e,r,n){return Ao.chat.registerAgent(r.slug,async(i,o,s,a)=>{try{let l=new Jr({message:i.content,type:"user"}),c=new Du([],l,{report(p){"content"in p&&s.report({message:typeof p.content=="string"?new Ao.MarkdownString(p.content):p.content})}}),u=new U_(n,`agents/${r.slug}?chat`,"copilot-chat",4096),d=await t.get(wt).fetchManyFromEndpoint(u,[{role:"user",content:i.content,intent:"conversation"}],async p=>{c.apply(p)},a,2);return d.type!=="success"&&e.warn(`Bad response from /agents/${r.slug}: ${d.type} ${d.reason}`),{}}catch(l){return e.warn(`/agents/${r.slug} failed: ${l}`),{}}},{description:r.description,subCommands:[],fullName:`Remote Agent "${r.slug}"`})}var hw=new Map;async function gB(t){if(!Ze(t,be.EnableRemoteSkills,{default:!1}))return;let r=new Re(t,"RemoteSkills"),n=new Set(hw.keys()),i=t.get(hg);try{await i.refreshRemoteSkills();for(let o of i.getSkills())switch(o.slug){case Zp:case t2:{let s=i.getSkill(o.slug);s&&!n.delete(s.info.slug)&&await s.isAvailable()&&hw.set(s.info.slug,Ao.chat.registerVariable(s.info.slug,s.info.description,VLe(r,s)));break}default:continue}}catch(o){r.warn(`Failed to load remote slash commands: ${o}`)}for(let o of n)hw.get(o).dispose(),hw.delete(o)}function VLe(t,e){return{resolve:async(r,n,i)=>{try{let o=GLe();if(!o)return t.debug("Could not determine current repo"),[];t.debug(`Searching in '${o}'`);let a=(await e.search(n.message,{repo:o})).map(l=>`${l.path}:
${l.contents}`);return[{level:Ao.ChatVariableLevel.Full,value:a.join(`

`)}]}catch(o){return t.warn(`/skills/${e.info.slug} failed: ${o}`),[]}}}}function GLe(){let t=Ao.extensions.getExtension("vscode.git");if(t){let r=t.exports.getAPI(1).repositories[0];if(r){let n=r.state.HEAD?.upstream?.remote,i=r.state.remotes.find(s=>s.name===n);return i?.fetchUrl?$Le(i.fetchUrl):""}}}function $Le(t){t=t.replace(/^git@/,""),t=t.replace(/\.git$/,"");try{let e=Ao.Uri.parse(t);return e.authority!=="github.com"&&e.scheme!=="github.com"?"":e.path.replace(/^\//,"")}catch{return""}}var gw=class{constructor(e,r){this.accessor=e;this.options=r;this.hasShownWelcomeMessage=!1;this.isInternal=!1;this.sessions=new Map}getSession(e){return this.sessions.get(e)}async prepareSession(e,r){if(!this.username){let s=await gf();this.isInternal=(await this.accessor.get(Ot).getCopilotToken(this.accessor))?.isInternal,this.username=s?.account?.label}e&&(this.hasShownWelcomeMessage=!0),hB(this.accessor),gB(this.accessor);let n=(0,vB.randomUUID)(),i=new Ug(this.accessor,n,()=>Dn.window.createOutputChannel("GitHub Copilot Chat Conversation")),o=new tc(this.accessor,this.options,e,this.username,i,this.isInternal,n);return this.sessions.set(n,o),o}provideResponseWithProgress(e,r,n){if(!(e.session instanceof tc))throw new Error("Invalid session: "+JSON.stringify(e.session));return e.session.provideResponseWithProgress(e,r,n)}provideSlashCommands(e,r){if(!(e instanceof tc))throw new Error("Invalid session: "+JSON.stringify(e));return e.provideSlashCommands(r)}async provideSampleQuestions(e){let r=Dn.window.activeNotebookEditor||Dn.window.activeTextEditor?WLe(this.accessor.get(Ni).agentsEnabled()):Ine([["","/help",Dn.l10n.t("What can you do?")]]);return zLe([...r],this.accessor,"welcome"),r}async provideWelcomeMessage(e){let r=yB(),n=Sn(this.accessor,be.WelcomeMessage),i=Dn.l10n.t({message:"I'm powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and [share feedback]({0}) so that we can learn and improve. Check out the [{1} documentation]({2}) to learn more.",args:[r,"Copilot","https://docs.github.com/copilot/getting-started-with-github-copilot?tool=vscode"],comment:"Do not translate the [text](url) Markdown link syntax."}),o=this.username?" **@"+this.username+"**":"";if(n==="never"||this.hasShownWelcomeMessage&&n==="first")return[Dn.l10n.t("Hi{0}, how can I help you?",o)];this.hasShownWelcomeMessage=!0;let s=Dn.window.activeNotebookEditor||Dn.window.activeTextEditor?Dn.l10n.t("You can also [start an inline chat session]({0}).","command:inlineChat.start"):"",a=new Dn.MarkdownString(Dn.l10n.t("Welcome{0}, I'm your {1} and I'm here to help you get things done faster. {2}",o,"Copilot",s));return a.isTrusted={enabledCommands:["inlineChat.start"]},[a,i]}resolveRequest(e,r,n){return{message:"Hello",session:e,variables:{}}}async provideFollowups(e,r){if(!(e instanceof tc))throw new Error("Invalid session: "+JSON.stringify(e));return e.provideFollowups(r)}removeRequest(e,r){if(!(e instanceof tc))throw new Error("Invalid session: "+JSON.stringify(e));e.removeRequest(r)}};function zLe(t,e,r){t.map(n=>{aT(e,n.message,r,n.metadata.suggestionId,Dn.window.activeTextEditor?.document)})}function yB(){return"https://aka.ms/microsoft/vscode-copilot-release"}function WLe(t){let e=t?"@workspace ":"";return Ine([[e,"/fix",Dn.l10n.t("the problems in my code")],[e,"/tests",Dn.l10n.t("add unit tests for my code")],[e,"/explain",Dn.l10n.t("how the selected code works")]])}function Ine(t){return t.map(([e,r,n])=>({message:e+r+" ",title:r+" "+n,metadata:{messageId:"welcome",suggestionId:(0,vB.randomUUID)(),suggestionType:"Follow-up from model"}}))}var Ro=Te(require("vscode")),Ef=require("vscode");var bB=require("vscode"),wne=[];function Ane(){return wne.join(`
`)}function KLe(t,e){t.push(YLe(e)),t.length>40&&t.shift()}var _B=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(bB.debug.activeDebugSession!==this.session)return;let r=this.extractOutput(e);r&&KLe(wne,r)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,r){}};function YLe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function Rne(){return[bB.debug.registerDebugAdapterTrackerFactory("*",new xB)]}var xB=class{createDebugAdapterTracker(e){return new _B(e)}};var kne=require("path"),Nne=require("process"),cd=require("vscode"),vw=new Map,CB=new Map;function One(){let t=cd.window.activeTerminal;return t===void 0?"":vw.get(t)?.join(`
`)||""}function Dne(){let t=cd.window.activeTerminal;if(t!==void 0)return CB.get(t)?.at(-1)}function Lne(){try{return cd.window.activeTerminal?.selection??""}catch{return""}}var EB;function Mne(){let t=cd.window.activeTerminal;if(t&&"shellPath"in t.creationOptions){let e=t.creationOptions.shellPath;if(e){let r,n=(0,kne.basename)(e);if(n==="bash.exe")r="Git Bash";else{let i=n.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":r="powershell";case"":break;default:r=i}}if(r)return EB=r,r}}return EB||(Nne.platform==="win32"?"powershell":"bash")}function Pne(t,e){t.push(e),t.length>40&&t.shift()}function QLe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function Fne(){return[cd.window.onDidWriteTerminalData(t=>{let e=vw.get(t.terminal);e||(e=[],vw.set(t.terminal,e)),Pne(e,QLe(t.data))}),cd.window.onDidExecuteTerminalCommand(t=>{let e=CB.get(t.terminal);e||(e=[],CB.set(t.terminal,e)),Pne(e,t)}),cd.window.onDidCloseTerminal(t=>{vw.delete(t)})]}var yw=class{constructor(e){this._documentManager=e;this._disposables=[];this._disposables.push(...Rne(),...Fne())}get activeFileDiagnostics(){let r=this.activeTextEditor?.document;return r?Ro.languages.getDiagnostics(r.uri):[]}get debugConsoleOutput(){return Ane()}get terminalBuffer(){return One()}get terminalLastCommand(){return Dne()}get terminalSelection(){return Lne()}get terminalShellType(){return Mne()}get activeTextDocument(){return this.activeTextEditor?.document??Ef.window.activeTextEditor?.document}get activeTextEditor(){return this._documentManager.getActiveTextEditorOrPrevious()??Ef.window.activeTextEditor}getWorkspaceFolder(e){return this._documentManager.getWorkspaceFolder(e)}get workspaceFolders(){return Ro.workspace.workspaceFolders?.map(e=>e.uri)}get notebookDocuments(){return Ro.workspace.notebookDocuments}getConfiguration(e,r){return Ro.workspace.getConfiguration(e,r)}onDidChangeDiagnostics(e,r,n){return Ro.languages.onDidChangeDiagnostics(e,r,n)}async openTextDocument(e){return Ro.workspace.openTextDocument(e)}async getWorkspaceSymbols(e){return(await Ro.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)).filter(n=>!n.location.uri.path.includes("node_modules"))}createFileSystemWatcher(e){return Ro.workspace.createFileSystemWatcher(e)}getAllExtensions(){return Ro.extensions.all}get currentRepository(){let e=Ef.extensions.getExtension("vscode.git");if(e){let r=e.exports.getAPI(1),n=this.selectRepository(r);return n?{name:n.state.HEAD?.name??"",headBranchName:n.state.HEAD?.name,upstreamBranchName:n.state.HEAD?.upstream?.name,isRebasing:n.state.rebaseCommit!==null,remotes:n.state.remotes.map(i=>i.name),remoteFetchUrls:n.state.remotes.map(i=>i.fetchUrl)}:void 0}}get vsCodeVersion(){return Ef.version}selectRepository(e){if(e.repositories.length===0)return;if(e.repositories.length===1)return e.repositories[0];let r=this.activeTextEditor;return e.repositories.filter(n=>r?.document.uri.fsPath.startsWith(n.rootUri.fsPath))[0]}dispose(){this._disposables.forEach(e=>e.dispose())}};async function Bne(t,e){let r=t.get(He),n=r.workspaceFolders?.map(d=>d.fsPath+"/"),i=r.notebookDocuments.map(d=>d.uri.fsPath),s=(await Promise.all(e.map(d=>r.getWorkspaceSymbols(d)))).flat().map(d=>({name:d.name,kind:d.kind,containerName:d.containerName,filePath:d.location.uri.fsPath,start:d.location.range.start,end:d.location.range.end})),a=r.activeFileDiagnostics.map(d=>({start:d.range.start,end:d.range.end,message:d.message,severity:d.severity,relatedInformation:d.relatedInformation?.map(XLe)})),l=r.activeTextEditor?{selections:r.activeTextEditor?.selections.map(d=>({anchor:d.anchor,active:d.active,isReversed:d.isReversed}))??[],documentFilePath:r.activeTextEditor?.document.uri.fsPath??"",visibleRanges:r.activeTextEditor?.visibleRanges.map(d=>({start:d.start,end:d.end}))??[],languageId:r.activeTextEditor?.document.languageId??"javascript"}:void 0,c=r.terminalLastCommand?{commandLine:r.terminalLastCommand.commandLine,cwd:typeof r.terminalLastCommand.cwd=="object"?r.terminalLastCommand.cwd.toString():r.terminalLastCommand.cwd,exitCode:r.terminalLastCommand.exitCode,output:r.terminalLastCommand.output}:void 0;return{workspaceFoldersFilePaths:n,symbols:s,activeFileDiagnostics:a,activeTextEditor:l,debugConsoleOutput:r.debugConsoleOutput,terminalBuffer:r.terminalBuffer,terminalLastCommand:c,terminalSelection:r.terminalSelection,terminalShellType:r.terminalShellType,repoContext:r.currentRepository,notebookDocumentFilePaths:i}}function XLe(t){return{filePath:t.location.uri.fsPath,start:t.location.range.start,end:t.location.range.end,message:t.message}}var yf=class{constructor(e){this.accessor=e;if(this.logger=new Re(e,"chat"),this._enabled=!1,this._activated=!1,this.context=e,X.interactive?._version!==1){this.logger.warn("Not activating ConversationFeature- api version mismatch");return}this.registerCopilotTokenListener(e)}get enabled(){return this._enabled}set enabled(e){e&&!this.activated&&(this.activated=!0),X.commands.executeCommand("setContext","github.copilot.interactiveSession.disabled",!e),this._enabled=e}get activated(){return this._activated}set activated(e){if(!this._activated){if(!this._activated&&e){let r=this.accessor.get(Wi);this.registerProviders(r),this.listenToUserEvents(),this.registerCommands(r),this.registerRelatedInformationProviders(),this.registerChatVariables()}this._activated=e}}getInteractiveSession(e){return this.interactiveSessionProvider?.getSession(e)}registerProviders(e){try{let r=X.chat.registerChatResponseProvider("copilot",new aw(this.accessor),{name:"Copilot"});this.interactiveSessionProvider=new gw(this.accessor,e);let n=X.interactive.registerInteractiveSessionProvider("copilot",this.interactiveSessionProvider);this.interactiveEditorSessionProvider=new HI(this.accessor,e);let i=X.interactive.registerInteractiveEditorSessionProvider(this.interactiveEditorSessionProvider);Cne(this.accessor),this.accessor.get(Ht).subscriptions.push(r,n,i),"registerMappedEditsProvider"in X.chat&&X.chat.registerMappedEditsProvider("*",new pw),this.accessor.get(Ni).register(e).catch(o=>{this.accessor.get(_o).logIt(this.accessor,3,"Registration of chat agents failed:",o.toString())})}catch(r){this.accessor.get(_o).logIt(this.accessor,3,"Registration of interactive providers failed:",r.toString())}}listenToUserEvents(){let e=X.interactive.onDidPerformUserAction(r=>{let n=X.window.activeTextEditor?.document,i=X.window.activeTextEditor?.selection,o=this.accessor.get(nr);switch(r.action.kind){case"vote":o.sendTelemetryEvent("panel.action.vote",{languageId:n?.languageId,requestId:r.action.responseId},{direction:r.action.direction===X.InteractiveSessionVoteDirection.Up?1:2});break;case"copy":o.sendTelemetryEvent("panel.action.copy",{languageId:n?.languageId,requestId:r.action.responseId},{codeBlockIndex:r.action.codeBlockIndex,copyType:r.action.copyType,characterCount:r.action.copiedCharacters,lineCount:r.action.copiedText.split(`
`).length});break;case"insert":o.sendTelemetryEvent("panel.action.insert",{languageId:n?.languageId,requestId:r.action.responseId},{codeBlockIndex:r.action.codeBlockIndex,characterCount:r.action.totalCharacters});break;case"runInTerminal":o.sendTelemetryEvent("panel.action.runinterminal",{languageId:n?.languageId,requestId:r.action.responseId,blockLanguage:r.action.languageId},{codeBlockIndex:r.action.codeBlockIndex});break}if(r.action.kind==="vote")Ua(this.context,n,{rating:r.action.direction===X.InteractiveSessionVoteDirection.Up?"positive":"negative",messageId:r.action.responseId},{},"conversation.messageRating");else if(r.action.kind==="copy"||r.action.kind==="insert"){let s={};s={totalCharacters:r.action.totalCharacters},r.action.kind==="copy"&&(s={...s,copiedCharacters:r.action.copiedCharacters}),n&&i&&(s={...s,cursorLocation:n.offsetAt(i.active)}),Ua(this.context,X.window.activeTextEditor?.document,{codeBlockIndex:r.action.codeBlockIndex.toString(),messageId:r.action.responseId},s,r.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}});this.accessor.get(Ht).subscriptions.push(e)}registerCommands(e){let r=i=>"body"in i&&(i.body instanceof X.MarkdownString||typeof i.body=="string"),n=i=>"range"in i&&i.range instanceof X.Range;this.accessor.get(Ht).subscriptions.push(X.commands.registerCommand("github.copilot.interactiveSession.feedback",async()=>X.env.openExternal(X.Uri.parse(yB()))),X.commands.registerCommand("github.copilot.ghpr.applySuggestion",async(i,o)=>{if(!r(i)||!n(o))return;let s=i.body instanceof X.MarkdownString?i.body.value:i.body;await X.commands.executeCommand("vscode.editorChat.start",{initialRange:o.range,message:s,autoSend:!0})}),X.commands.registerCommand("github.copilot.debug.workbenchState",async()=>{let i=await X.window.showInputBox({prompt:"Enter a comma-separated list of symbol queries. Can be left blank if not using WorkspaceSymbols"}),o=await X.window.showInputBox({prompt:"Enter a file name - .state.json will be appended as the extension",value:"workspaceState"});if(!o)return;let s=await Bne(this.accessor,i?.split(",")??[]);if(!s)return;let a=X.workspace.workspaceFolders?.[0].uri;if(!a)return;let l=X.Uri.joinPath(a,`${o}.state.json`),c=JSON.stringify(s,null,2);c=c.replace(new RegExp(`${a.fsPath}/`,"g"),"./"),X.workspace.fs.writeFile(l,Buffer.from(c))}),X.commands.registerCommand("github.copilot.terminal.explainTerminalSelection",async()=>{let i=this.accessor.get(Ni).agentsEnabled()?`@${Fg} /${Va}`:`/${Va}`;return X.interactive.sendInteractiveRequestToProvider("copilot",{message:`${i} #terminalSelection`})}),X.commands.registerCommand("github.copilot.terminal.explainTerminalSelectionContextMenu",()=>X.commands.executeCommand("github.copilot.terminal.explainTerminalSelection")),X.commands.registerCommand("github.copilot.terminal.explainTerminalLastCommand",async()=>{let i=this.accessor.get(Ni).agentsEnabled()?`@${Fg} /${Va}`:`/${Va}`;return X.interactive.sendInteractiveRequestToProvider("copilot",{message:`${i} #terminalLastCommand`})}),X.commands.registerCommand("github.copilot.terminal.suggestCommand",async()=>{let i=this.accessor.get(Ni).agentsEnabled()?`@${Fg} /${ug}`:`/${ug}`;await X.commands.executeCommand("workbench.action.quickchat.toggle",{query:`${i} `,isPartialQuery:!0})}),X.commands.registerCommand(WI,async i=>{let o=X.workspace.workspaceFolders?.[0].uri;if(!o)return;let s=X.Uri.joinPath(o,i);if(this.accessor.get(nr).sendTelemetryEvent("panel.action.filelink"),await a(s))await X.commands.executeCommand("revealInExplorer",s);else return X.commands.executeCommand("vscode.open",s);async function a(l){if(s.path.endsWith("/"))return!0;try{return(await X.workspace.fs.stat(l)).type===X.FileType.Directory}catch{return!1}}}),X.commands.registerCommand("github.copilot.runInPanelChat",async i=>{X.interactive.sendInteractiveRequestToProvider("copilot",i)}),X.commands.registerCommand(KI,async(i,o)=>{function s(d,p){for(let f of d){if(f.name===p)return f;if(f.children){let m=s(f.children,p);if(m)return m}}}let a=X.workspace.workspaceFolders?.[0].uri;if(!a)return;let l=X.Uri.joinPath(a,i),c=await X.commands.executeCommand("vscode.executeDocumentSymbolProvider",l),u=c&&s(c,o);if(this.accessor.get(nr).sendTelemetryEvent("panel.action.symbollink",{},{hadMatch:u?1:0}),u){let d=u instanceof X.SymbolInformation?u.location.range:u.selectionRange;return X.commands.executeCommand("vscode.open",l,{selection:new X.Range(d.start,d.start)})}return X.commands.executeCommand("vscode.open",l)}),ZLe(this.accessor,e),yne(this.accessor,e),tMe(this.accessor),rMe(this.accessor),eMe())}registerRelatedInformationProviders(){this.accessor.get(Ht).subscriptions.push(X.ai.registerRelatedInformationProvider(X.RelatedInformationType.CommandInformation,this.accessor.get(id)),X.ai.registerRelatedInformationProvider(X.RelatedInformationType.SettingInformation,this.accessor.get(od)))}registerChatVariables(){this.accessor.get(Zc).getVariables().forEach(e=>{this.accessor.get(Ht).subscriptions.push(X.chat.registerVariable(e.name,e.description??"",{resolve:async(r,n,i)=>{let o=await e.resolve(this.accessor,this.accessor.get(He),void 0,void 0,n.message,i);if(!o)return[];let s=typeof o=="string"?o:o.userMessages.join(`

`);return[{level:X.ChatVariableLevel?X.ChatVariableLevel.Full:"full",value:s,description:""}]}}))})}registerCopilotTokenListener(e){e.get(fi).on("onCopilotToken",(r,n)=>{this.logger.info(`copilot token chat_enabled: ${n.chat_enabled}`),this.enabled=n.chat_enabled??!1})}};async function JLe(t,e,r){let n,i;return new Promise(o=>{n=r.onCancellationRequested(o);let s;i=setTimeout(()=>{s?.dispose(),o([])},e),new Promise(a=>{s=X.languages.onDidChangeDiagnostics(async l=>{if(l.uris.map(String).includes(t.uri.toString())){let c=X.languages.getDiagnostics(t.uri);if(c.length>0){let u=c.filter(d=>d.severity===X.DiagnosticSeverity.Error||d.severity===X.DiagnosticSeverity.Warning);a(u)}}else a([])})}).then(a=>{s?.dispose(),o(a)})}).finally(()=>{n.dispose(),clearTimeout(i)})}function ZLe(t,e){return X.commands.registerCommand("github.copilot.createNotebook",async r=>{let n=X.workspace.getConfiguration(un).get("notebook"),i=Sn(t,be.IterativeFixing),o=n?.iterativeImproving??!1;await X.window.withProgress({location:X.ProgressLocation.Notification},async s=>{let a=new X.NotebookData([]);a.metadata={custom:{cells:[],metadata:{orig_nbformat:4},nbformat:4,nbformat_minor:2}};let l=await X.workspace.openNotebookDocument("jupyter-notebook",a),c=await X.window.showNotebookDocument(l);s.report({message:X.l10n.t("Generating notebook...")});let u=r.description,d=r.sections;for(let p of d){let f=c.notebook.getCells().filter(T=>T.kind===X.NotebookCellKind.Code).map(T=>T.document.getText()).join(`
`),m=new X.CancellationTokenSource;s.report({message:X.l10n.t('Generating section "{0}"...',p.title)});let h=await VJ(t,e,u,p,f,m.token);if(!h)return;if(o){s.report({message:X.l10n.t('Improving code for section "{0}"...',p.title)});let T=await GJ(t,e,u,p,f,h,m.token);if(!T)return;h=T}let g=new X.NotebookCellData(X.NotebookCellKind.Markup,`# ${p.title}
${p.content}`,"markdown"),v=new X.NotebookCellData(X.NotebookCellKind.Code,h,"python"),y=X.NotebookEdit.insertCells(l.cellCount,[g,v]),_=new X.WorkspaceEdit;if(_.set(l.uri,[y]),await X.workspace.applyEdit(_),c.revealRange(new X.NotebookRange(l.cellCount-1,l.cellCount),X.NotebookEditorRevealType.Default),c.selection=new X.NotebookRange(l.cellCount-1,l.cellCount),i){s.report({message:X.l10n.t('Waiting for new diagnostics for section "{0}"...',p.title)});let T=c.notebook.cellAt(l.cellCount-1).document,I=await JLe(T,5e3,m.token);if(I.length!==0){let R=await $J(t,e,T,I[0],m.token);if(R){let w=new X.WorkspaceEdit;w.set(T.uri,R),await X.workspace.applyEdit(w)}}}}s.report({increment:100})})})}function eMe(){return X.commands.registerCommand("github.copilot.executeSearch",async t=>{let e=t.filesToExclude.length>0||t.filesToInclude.length>0;X.commands.executeCommand("workbench.view.search.focus").then(()=>X.commands.executeCommand("workbench.action.search.toggleQueryDetails",{show:e})),X.commands.executeCommand("workbench.action.findInFiles",t)})}function tMe(t){return new uw(t)}function rMe(t){return new dw(t)}var B0=Te(require("vscode")),_w=class{constructor(){this._disposables=[];this._disposables.push(...this.initializeGitExtensionApi())}initializeGitExtensionApi(){let e=[],r=B0.extensions.getExtension("vscode.git"),n=async()=>{let i=await r.activate(),o=s=>{this._gitExtensionApi=s?i.getAPI(1):void 0};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{let i=B0.extensions.onDidChange(()=>{!r&&B0.extensions.getExtension("vscode.git")&&(r=B0.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}async getRepositoryDiff(e){let r=await this._getRepository(e);if(!r)return;let n=[];if(r.state.indexChanges.length!==0)for(let i of r.state.indexChanges.map(o=>o.uri.fsPath))n.push(await r.diffIndexWithHEAD(i));else for(let i of r.state.workingTreeChanges.map(o=>o.uri.fsPath))n.push(await r.diffWithHEAD(i));return n}async _getRepository(e){return await this._gitExtensionApi?.openRepository(e)??void 0}dispose(){this._disposables.forEach(e=>e.dispose())}};var SB=Te(require("vscode"));var xw=class extends mf{addEditorSpecificFilters(){return{"X-VSCode-Build":SB.env.appName,"X-VSCode-Language":SB.env.language}}};var Cf=require("vscode");var bw=class extends HT{constructor(e){super(e),this.installListeners()}installListeners(){this._disposables.push(Cf.workspace.onDidChangeWorkspaceFolders(e=>{for(let r of e.removed)this.removeWorkspace(r.uri);for(let r of e.added)this.addWorkspace(r.uri)})),this._disposables.push(Cf.workspace.onDidSaveTextDocument(async e=>{if(this.isIgnoreFile(e.uri)){let r=(await Cf.workspace.fs.readFile(e.uri)).toString();this.trackIgnoreFile(e.uri,r)}}),Cf.workspace.onDidDeleteFiles(e=>{for(let r of e.files)this.removeIgnoreFile(r)}),Cf.workspace.onDidRenameFiles(async e=>{for(let r of e.files)if(this.isIgnoreFile(r.newUri)){let n=(await Cf.workspace.fs.readFile(r.newUri)).toString();this.removeIgnoreFile(r.oldUri),this.trackIgnoreFile(r.newUri,n)}}))}};var TB=require("vscode");var Hne="github-enterprise",Une="https://github.com";function qne(){return TB.workspace.getConfiguration(un).get("advanced")?.authProvider==="github-enterprise"?TB.workspace.getConfiguration(Hne).get("uri")??Une:Une}var Ew=class extends QS{constructor(){super(qne())}updateBaseUrl(e,r){super.updateBaseUrl(e,qne())}};function jne(t,e){(t.affectsConfiguration(`${un}.advanced`)||t.affectsConfiguration(`${Hne}.uri`))&&e.get($c).updateBaseUrl(e)}var IB=Te(require("vscode"));var Cw=class extends Zu{async loadKerberos(){try{return require(`${IB.env.appRoot}/node_modules.asar/kerberos`)}catch{}try{return require(`${IB.env.appRoot}/node_modules/kerberos`)}catch{}}};var Vne=Te(require("os")),wB=Te(require("vscode"));var Sw=class extends Hu{async loadCaCerts(){let e=await this.loadBuiltInWinCAModule(),r=new Set,n=new e.Crypt32;try{let i;for(;i=n.next();)r.add(nMe(i))}finally{n.done()}return Array.from(r)}async loadBuiltInWinCAModule(){try{return require(`${wB.env.appRoot}/node_modules.asar/@vscode/windows-ca-certs`)}catch{}try{return require(`${wB.env.appRoot}/node_modules/@vscode/windows-ca-certs`)}catch{}}};function nMe(t){let e=["-----BEGIN CERTIFICATE-----"],r=t.toString("base64");for(let n=0;n<r.length;n+=64)e.push(r.substr(n,64));return e.push("-----END CERTIFICATE-----",""),e.join(Vne.EOL)}var $ne=require("net"),zne=require("url"),jg=require("vscode");function iMe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy||null}function Wne(t,e){jg.workspace.onDidChangeConfiguration(r=>{let n=r.affectsConfiguration("http.proxy");(r.affectsConfiguration("http.proxyStrictSSL")||r.affectsConfiguration("http.proxyAuthorization")||r.affectsConfiguration("http.proxyKerberosServicePrincipal")||n)&&Gne(t,e,n)}),Gne(t,e)}var Gne=(t,e,r)=>{let i=jg.workspace.getConfiguration("http").get("proxy")||iMe(e);if(i){let o={},s=jg.workspace.getConfiguration("http").get("proxyAuthorization"),a=jg.workspace.getConfiguration("http").get("proxyStrictSSL",!0);s&&(o["Proxy-Authorization"]=s);let l=i,c=i.split(":");if(c.length>2){if(i.includes("[")){let v=i.indexOf("["),y=i.indexOf("]");l=i.substring(v+1,y)}}else l=c[0];let u=(0,$ne.isIP)(l);u===4?i=`https://${i}`:u===6&&(i.includes("[")?i.startsWith("https://")||(i=`https://${i}`):i=`https://[${i}]`);let{hostname:d,port:p,username:f,password:m}=oMe(i),h=f&&m&&`${decodeURIComponent(f)}:${decodeURIComponent(m)}`;t.proxySettings={host:d,port:parseInt(p),proxyAuth:h,headers:o};let g=jg.workspace.getConfiguration("http").get("proxyKerberosServicePrincipal");g&&(t.proxySettings.kerberosServicePrincipal=g),t.rejectUnauthorized=a}else r&&!i&&(t.proxySettings=void 0)};function oMe(t){try{return new zne.URL(t)}catch{throw new Error(`Invalid proxy URL: '${t}'`)}}var Kne=Te(require("vscode"));var Tw=class extends ol{findTextInFiles(e,r,n,i){return Promise.resolve(Kne.workspace.findTextInFiles(e,r,o=>n.report(o),i))}};var $0=Te(Noe());function q2e(t){return t?$0.TargetPopulation.Insiders:$0.TargetPopulation.Public}async function Ooe(t,e,r){let n=t.extension.id,i=t.extension.packageJSON.version,o=q2e(r);return(0,$0.getExperimentationService)(n,i,o,e,t.globalState)}var h3=Te(Tce());var aR=class{constructor(e,r,n,i){this._sharedProperties={};this._isInternal=!1;n.on("onCopilotToken",async(o,s)=>{if(this._username=(await gf())?.account?.label,this._sku=o.getTokenValue("sku"),this._isInternal=o.isInternal,this.sendTelemetryEvent("token",{},{chatEnabled:s.chat_enabled?1:0}),!o.organization_list||!s.chat_enabled){this._internalTelemetryReporter=void 0;return}o.isInternal&&(this._internalTelemetryReporter=new h3.default(e),i.subscriptions.push(this._internalTelemetryReporter))}),this._externalTelemetryReporter=new h3.default(r),i.subscriptions.push(this._externalTelemetryReporter)}setSharedProperty(e,r){this._sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this._isInternal&&this.sendInternalTelemetryEvent(e,n),this.sendTelemetryEvent(e,n)}sendInternalTelemetryEvent(e,r,n){this._internalTelemetryReporter&&(r={...r,"common.userName":this._username??"undefined",...this._sharedProperties},this._internalTelemetryReporter.sendRawTelemetryEvent(e,r,n))}sendTelemetryEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined",...this._sharedProperties},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryEvent(e,r,n)}sendTelemetryErrorEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryErrorEvent(e,r,n)}};var uc=require("vscode");var cR=class extends js{constructor(r){super();this.onDidOpenTextDocument=uc.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=uc.workspace.onDidChangeTextDocument;this.onDidCloseTextDocument=uc.workspace.onDidCloseTextDocument;this.onDidFocusTextDocument=uc.window.onDidChangeActiveTextEditor;uc.window.onDidChangeActiveTextEditor(n=>{n?.document.uri.scheme!=="output"&&(this._previousActiveTextEditor=n??this._previousActiveTextEditor)})}get textDocuments(){return uc.workspace.textDocuments}getActiveTextEditorOrPrevious(){return uc.window.activeTextEditor||this._previousActiveTextEditor}getWorkspaceFolders(){return uc.workspace.workspaceFolders?.map(r=>r.uri)??[]}};var Ice=Te(require("vscode"));var lR=class extends ku{get language(){return Ice.env.language}};var dc=Te(require("vscode"));var uR=class extends Pr{async stat(e){return dc.workspace.fs.stat(e)}async readDirectory(e){return dc.workspace.fs.readDirectory(e)}async createDirectory(e){return dc.workspace.fs.createDirectory(e)}async readFile(e){return dc.workspace.fs.readFile(e)}async writeFile(e,r){return dc.workspace.fs.writeFile(e,r)}async delete(e,r){return dc.workspace.fs.delete(e,r)}async rename(e,r,n){return dc.workspace.fs.rename(e,r,n)}async copy(e,r,n){return dc.workspace.fs.copy(e,r,n)}isWritableFileSystem(e){return!!dc.workspace.fs.isWritableFileSystem(e)}};var dR=Te(require("vscode"));var pR=class extends Xc{async getDefinitions(e,r){return await dR.commands.executeCommand("vscode.executeDefinitionProvider",e,r)}async getImplementations(e,r){return await dR.commands.executeCommand("vscode.executeImplementationProvider",e,r)}async getReferences(e,r){return await dR.commands.executeCommand("vscode.executeReferenceProvider",e,r)}};var wce=Te(require("vscode"));var fR=class extends Ki{findFiles(e,r,n,i){return wce.workspace.findFiles(e,r,n,i)}};var $Be=jt.window.createOutputChannel("GitHub Copilot Chat");async function zBe(t,e){if(t.extensionMode===jt.ExtensionMode.Test&&!e)return t;let r=await Rce(t);t.subscriptions.push(Pce(r)),t.subscriptions.push(KBe()),t.subscriptions.push(jt.window.registerTerminalQuickFixProvider("copilot-chat.fixWithCopilot",{provideTerminalQuickFixes(o,s){return[{command:"github.copilot.terminal.explainTerminalLastCommand",title:"Explain using Copilot"}]}}));let n=r.get(ut);if(await(async()=>{let o=a=>{let l=a.message||a;n.sendErrorTelemetry("activationFailed",Gt.createAndMarkAsIssued({reason:l})),n.deactivate();let c=l==="GitHubLoginFailed"?aB:`GitHub Copilot could not connect to server. Extension activation failed: "${l}"`;r.get(Gc).errorAndSendTelemetry(c),jt.commands.executeCommand("setContext","github.copilot.activated",!1);let u=jt.authentication.onDidChangeSessions(async d=>{try{await one(d,r)!==void 0&&(jt.commands.executeCommand("setContext","github.copilot.activated",!0),g3(),u.dispose())}catch(p){g3(p),o(p)}})};try{await r.get(Ot).getCopilotToken(r),jt.commands.executeCommand("setContext","github.copilot.activated",!0)}catch(a){g3(a),o(a)}t.subscriptions.push(ene(r)),t.subscriptions.push(jt.workspace.onDidChangeConfiguration(a=>jne(a,r)));let s=t.extensionMode!==jt.ExtensionMode.Development;rJ(s,new Re(r,"parser proxy")),Tne(r),Ba.start(ty(r)),n.sendTelemetry("extension.activate")})(),jt.ExtensionMode.Test===t.extensionMode)return r}async function Rce(t){let e=new ry;e.define(_o,new GS([new jS(console),new VS($Be)])),e.define(yc,new ew),Nre(e),e.define(Pr,new uR),e.define(Ht,t),e.define(zs,new zs(e)),e.define(ol,new Tw(e)),e.define(ku,new lR),e.define(Ki,new fR),e.define(Xc,new pR),e.define(ei,new ei(jt.env.sessionId,jt.env.machineId)),e.define(Mi,new tw),e.define(Zu,new Cw),e.define(Hu,new Sw),e.define(Wc,new class{setProgress(){}removeProgress(){}setWarning(){}setError(s){console.error(s)}setInactive(){}forceNormal(){}}),e.define(mi,new mi(e)),e.define(Ni,new iw(e));let r=t.extension.packageJSON.internalAIKey??"",n=t.extension.packageJSON.ariaKey??"";if(t.extensionMode===jt.ExtensionMode.Test)e.define(bc,bc.fromEnvironment(!0)),e.define(Ot,nne()),e.define(_u,new XI),await Ace(e,t,r,n,"copilot-test",!0);else{let s=new ZI;t.subscriptions.push(s),e.define(Ot,s),e.define(ya,new Sb),await Ace(e,t,r,n,t.extension.packageJSON.name,jt.env.isTelemetryEnabled)}e.define(hg,new KT(e)),e.define(wt,new wt(e)),e.define(Fs,new Fs),e.define(rn,new fg(e)),e.define(Gc,new Re(e,"extension")),e.define(Lp,new JI),e.define(mf,new xw),e.define($c,new Ew),e.define(Wi,{maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:Ze(e,be.ConversationAdditionalPromptContext,{default:"firstTurn"}),rejectionMessage:"Sorry, but I can only assist with programming related questions."}),Wne(e.get(Kr),process.env),rne(e);let i=new cR(e);e.define(js,i),e.define(id,new id(e,e.get(rn))),e.define(od,new od(e,e.get(rn))),e.define(sd,new sd(e)),e.define(He,new yw(i)),e.define(nl,new nl(e)),e.define(yf,new yf(e)),e.define(Lre,new _w);let o=new bw(e);return e.define(Hs,o),t.subscriptions.push(o),await o.init(),e.seal(),e}async function WBe(t,e){if(jt.ExtensionMode.Production===e.extensionMode){let r=t.get(nr),n=await Ooe(e,r,ty(t));t.define(qa,n)}else t.define(qa,new lT)}async function Ace(t,e,r,n,i,o){let s=await MS(t,i,o),a=jt.env.onDidChangeTelemetryEnabled(async l=>{s?.dispose(),s=await MS(t,e.extension.packageJSON.name,l&&jt.env.isTelemetryEnabled)});e.subscriptions.push(a),e.subscriptions.push(new jt.Disposable(()=>s?.dispose())),jt.ExtensionMode.Production===e.extensionMode?t.define(nr,new aR(r,n,t.get(fi),e)):t.define(nr,new YI),WBe(t,e)}function Pce(t){return{dispose:async()=>{let e=t.get(ut);await e.sendTelemetry("extension.deactivate"),e.deactivate(),nJ()}}}function KBe(){return jt.env.registerIssueUriRequestHandler({handleIssueUrlRequest:()=>jt.Uri.parse("https://aka.ms/microsoft/vscode-copilot-release")})}var Vx={Offline:"github.copilot.offline",IndividualDisabled:"github.copilot.interactiveSession.individual.disabled",IndividualExpired:"github.copilot.interactiveSession.individual.expired",EnterpriseDisabled:"github.copilot.interactiveSession.enterprise.disabled"};function g3(t){let e=Object.values(Vx),r;t instanceof fb&&t.code==="ENOTFOUND"?r=Vx.Offline:t instanceof N0?r=Vx.IndividualDisabled:t instanceof O0?r=Vx.IndividualExpired:t instanceof D0&&(r=Vx.EnterpriseDisabled),r&&jt.commands.executeCommand("setContext",r,!0);for(let n of e)n!==r&&jt.commands.executeCommand("setContext",n,!1)}0&&(module.exports={activate,createExtensionContext,onDeactivate});
/*! Bundled license information:

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js:
  (*!
   * Microsoft Dynamic Proto Utility, 1.1.9
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
*/
