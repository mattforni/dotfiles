"use strict";var pbe=Object.create;var qC=Object.defineProperty;var dbe=Object.getOwnPropertyDescriptor;var fbe=Object.getOwnPropertyNames;var mbe=Object.getPrototypeOf,hbe=Object.prototype.hasOwnProperty;var I=(t,e)=>()=>(t&&(e=t(t=0)),e);var k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ri=(t,e)=>{for(var r in e)qC(t,r,{get:e[r],enumerable:!0})},mz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fbe(e))!hbe.call(t,i)&&i!==r&&qC(t,i,{get:()=>e[i],enumerable:!(n=dbe(e,i))||n.enumerable});return t};var Oe=(t,e,r)=>(r=t!=null?pbe(mbe(t)):{},mz(e||!t||!t.__esModule?qC(r,"default",{value:t,enumerable:!0}):r,t)),Xn=t=>mz(qC({},"__esModule",{value:!0}),t);var jn=k((FYe,bz)=>{"use strict";var gbe=Object.create,jC=Object.defineProperty,vbe=Object.getOwnPropertyDescriptor,vz=Object.getOwnPropertyNames,_be=Object.getPrototypeOf,ybe=Object.prototype.hasOwnProperty,xbe=(t,e)=>function(){return e||(0,t[vz(t)[0]])((e={exports:{}}).exports,e),e.exports},bbe=(t,e)=>{for(var r in e)jC(t,r,{get:e[r],enumerable:!0})},_z=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vz(e))!ybe.call(t,i)&&i!==r&&jC(t,i,{get:()=>e[i],enumerable:!(n=vbe(e,i))||n.enumerable});return t},Ebe=(t,e,r)=>(r=t!=null?gbe(_be(t)):{},_z(e||!t||!t.__esModule?jC(r,"default",{value:t,enumerable:!0}):r,t)),Tbe=t=>_z(jC({},"__esModule",{value:!0}),t),Sbe=xbe({"node_modules/request-light/lib/node/main.js"(t){(()=>{var e={46:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(l,c,{signal:u}={}){return new Promise((p,d)=>{function f(){u?.removeEventListener("abort",f),l.removeListener(c,m),l.removeListener("error",h)}function m(...g){f(),p(g)}function h(g){f(),d(g)}u?.addEventListener("abort",f),l.on(c,m),l.on("error",h)})}},54:function(s,a,l){"use strict";var c=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};let u=l(361),p=c(l(374)),d=c(l(304)),f=p.default("agent-base");function m(){let{stack:g}=new Error;return typeof g=="string"&&g.split(`
`).some(v=>v.indexOf("(https.js:")!==-1||v.indexOf("node:https:")!==-1)}function h(g,v){return new h.Agent(g,v)}(function(g){class v extends u.EventEmitter{constructor(y,b){super();let x=b;typeof y=="function"?this.callback=y:y&&(x=y),this.timeout=null,x&&typeof x.timeout=="number"&&(this.timeout=x.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:m()?443:80}set defaultPort(y){this.explicitDefaultPort=y}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:m()?"https:":"http:"}set protocol(y){this.explicitProtocol=y}callback(y,b,x){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(y,b){let x=Object.assign({},b);typeof x.secureEndpoint!="boolean"&&(x.secureEndpoint=m()),x.host==null&&(x.host="localhost"),x.port==null&&(x.port=x.secureEndpoint?443:80),x.protocol==null&&(x.protocol=x.secureEndpoint?"https:":"http:"),x.host&&x.path&&delete x.path,delete x.agent,delete x.hostname,delete x._defaultAgent,delete x.defaultPort,delete x.createConnection,y._last=!0,y.shouldKeepAlive=!1;let P=!1,U=null,H=x.timeout||this.timeout,j=q=>{y._hadError||(y.emit("error",q),y._hadError=!0)},M=()=>{U=null,P=!0;let q=new Error(`A "socket" was not created for HTTP request before ${H}ms`);q.code="ETIMEOUT",j(q)},F=q=>{P||(U!==null&&(clearTimeout(U),U=null),j(q))},z=q=>{if(P)return;if(U!=null&&(clearTimeout(U),U=null),L=q,!!L&&typeof L.addRequest=="function")return f("Callback returned another Agent instance %o",q.constructor.name),void q.addRequest(y,x);var L;if(q)return q.once("free",()=>{this.freeSocket(q,x)}),void y.onSocket(q);let S=new Error(`no Duplex stream was returned to agent-base for \`${y.method} ${y.path}\``);j(S)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(f("Converting legacy callback function to promise"),this.promisifiedCallback=d.default(this.callback)):this.promisifiedCallback=this.callback),typeof H=="number"&&H>0&&(U=setTimeout(M,H)),"port"in x&&typeof x.port!="number"&&(x.port=Number(x.port));try{f("Resolving socket for %o request: %o",x.protocol,`${y.method} ${y.path}`),Promise.resolve(this.promisifiedCallback(y,x)).then(z,F)}catch(q){Promise.reject(q).catch(F)}}else j(new Error("`callback` is not defined"))}freeSocket(y,b){f("Freeing socket %o %o",y.constructor.name,b),y.destroy()}destroy(){f("Destroying agent %o",this.constructor.name)}}g.Agent=v,g.prototype=g.Agent.prototype})(h||(h={})),s.exports=h},304:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(l){return function(c,u){return new Promise((p,d)=>{l.call(this,c,u,(f,m)=>{f?d(f):p(m)})})}}},370:function(s,a,l){"use strict";var c=this&&this.__awaiter||function(y,b,x,P){return new(x||(x=Promise))(function(U,H){function j(z){try{F(P.next(z))}catch(q){H(q)}}function M(z){try{F(P.throw(z))}catch(q){H(q)}}function F(z){var q;z.done?U(z.value):(q=z.value,q instanceof x?q:new x(function(L){L(q)})).then(j,M)}F((P=P.apply(y,b||[])).next())})},u=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(a,"__esModule",{value:!0});let p=u(l(808)),d=u(l(404)),f=u(l(310)),m=u(l(374)),h=u(l(46)),g=l(54),v=(0,m.default)("http-proxy-agent");class _ extends g.Agent{constructor(b){let x;if(x=typeof b=="string"?f.default.parse(b):b,!x)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");v("Creating new HttpProxyAgent instance: %o",x),super(x);let P=Object.assign({},x);var U;this.secureProxy=x.secureProxy||typeof(U=P.protocol)=="string"&&/^https:?$/i.test(U),P.host=P.hostname||P.host,typeof P.port=="string"&&(P.port=parseInt(P.port,10)),!P.port&&P.host&&(P.port=this.secureProxy?443:80),P.host&&P.path&&(delete P.path,delete P.pathname),this.proxy=P}callback(b,x){return c(this,void 0,void 0,function*(){let{proxy:P,secureProxy:U}=this,H=f.default.parse(b.path),j;if(H.protocol||(H.protocol="http:"),H.hostname||(H.hostname=x.hostname||x.host||null),H.port==null&&(x.port,1)&&(H.port=String(x.port)),H.port==="80"&&(H.port=""),b.path=f.default.format(H),P.auth&&b.setHeader("Proxy-Authorization",`Basic ${Buffer.from(P.auth).toString("base64")}`),U?(v("Creating `tls.Socket`: %o",P),j=d.default.connect(P)):(v("Creating `net.Socket`: %o",P),j=p.default.connect(P)),b._header){let M,F;v("Regenerating stored HTTP header string for request"),b._header=null,b._implicitHeader(),b.output&&b.output.length>0?(v("Patching connection write() output buffer with updated header"),M=b.output[0],F=M.indexOf(`\r
\r
`)+4,b.output[0]=b._header+M.substring(F),v("Output buffer: %o",b.output)):b.outputData&&b.outputData.length>0&&(v("Patching connection write() output buffer with updated header"),M=b.outputData[0].data,F=M.indexOf(`\r
\r
`)+4,b.outputData[0].data=b._header+M.substring(F),v("Output buffer: %o",b.outputData[0].data))}return yield(0,h.default)(j,"connect"),j})}}a.default=_},201:function(s,a,l){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(l(370));function u(p){return new c.default(p)}(function(p){p.HttpProxyAgent=c.default,p.prototype=c.default.prototype})(u||(u={})),s.exports=u},146:function(s,a,l){"use strict";var c=this&&this.__awaiter||function(x,P,U,H){return new(U||(U=Promise))(function(j,M){function F(L){try{q(H.next(L))}catch(S){M(S)}}function z(L){try{q(H.throw(L))}catch(S){M(S)}}function q(L){var S;L.done?j(L.value):(S=L.value,S instanceof U?S:new U(function(T){T(S)})).then(F,z)}q((H=H.apply(x,P||[])).next())})},u=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(a,"__esModule",{value:!0});let p=u(l(808)),d=u(l(404)),f=u(l(310)),m=u(l(491)),h=u(l(374)),g=l(54),v=u(l(829)),_=h.default("https-proxy-agent:agent");class y extends g.Agent{constructor(P){let U;if(U=typeof P=="string"?f.default.parse(P):P,!U)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_("creating new HttpsProxyAgent instance: %o",U),super(U);let H=Object.assign({},U);var j;this.secureProxy=U.secureProxy||typeof(j=H.protocol)=="string"&&/^https:?$/i.test(j),H.host=H.hostname||H.host,typeof H.port=="string"&&(H.port=parseInt(H.port,10)),!H.port&&H.host&&(H.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in H)&&(H.ALPNProtocols=["http 1.1"]),H.host&&H.path&&(delete H.path,delete H.pathname),this.proxy=H}callback(P,U){return c(this,void 0,void 0,function*(){let{proxy:H,secureProxy:j}=this,M;j?(_("Creating `tls.Socket`: %o",H),M=d.default.connect(H)):(_("Creating `net.Socket`: %o",H),M=p.default.connect(H));let F=Object.assign({},H.headers),z=`CONNECT ${U.host}:${U.port} HTTP/1.1\r
`;H.auth&&(F["Proxy-Authorization"]=`Basic ${Buffer.from(H.auth).toString("base64")}`);let{host:q,port:L,secureEndpoint:S}=U;(function(ce,ae){return!!(!ae&&ce===80||ae&&ce===443)})(L,S)||(q+=`:${L}`),F.Host=q,F.Connection="close";for(let ce of Object.keys(F))z+=`${ce}: ${F[ce]}\r
`;let T=v.default(M);M.write(`${z}\r
`);let{statusCode:A,buffered:J}=yield T;if(A===200){if(P.once("socket",b),U.secureEndpoint){_("Upgrading socket connection to TLS");let ce=U.servername||U.host;return d.default.connect(Object.assign(Object.assign({},function(ae,...se){let je={},Ye;for(Ye in ae)se.includes(Ye)||(je[Ye]=ae[Ye]);return je}(U,"host","hostname","path","port")),{socket:M,servername:ce}))}return M}M.destroy();let me=new p.default.Socket({writable:!1});return me.readable=!0,P.once("socket",ce=>{_("replaying proxy buffer for failed request"),m.default(ce.listenerCount("data")>0),ce.push(J),ce.push(null)}),me})}}function b(x){x.resume()}a.default=y},18:function(s,a,l){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(l(146));function u(p){return new c.default(p)}(function(p){p.HttpsProxyAgent=c.default,p.prototype=c.default.prototype})(u||(u={})),s.exports=u},829:function(s,a,l){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(a,"__esModule",{value:!0});let u=c(l(374)).default("https-proxy-agent:parse-proxy-response");a.default=function(p){return new Promise((d,f)=>{let m=0,h=[];function g(){let y=p.read();y?function(b){h.push(b),m+=b.length;let x=Buffer.concat(h,m);if(x.indexOf(`\r
\r
`)===-1)return u("have not received end of HTTP headers yet..."),void g();let P=x.toString("ascii",0,x.indexOf(`\r
`)),U=+P.split(" ")[1];u("got proxy server response: %o",P),d({statusCode:U,buffered:x})}(y):p.once("readable",g)}function v(y){u("onclose had error %o",y)}function _(){u("onend")}p.on("error",function y(b){p.removeListener("end",_),p.removeListener("error",y),p.removeListener("close",v),p.removeListener("readable",g),u("onerror %o",b),f(b)}),p.on("close",v),p.on("end",_),g()})}},539:function(s,a,l){"use strict";var c,u=this&&this.__extends||(c=function(j,M){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(F[q]=z[q])},c(j,M)},function(j,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function F(){this.constructor=j}c(j,M),j.prototype=M===null?Object.create(M):(F.prototype=M.prototype,new F)}),p=this&&this.__assign||function(){return p=Object.assign||function(j){for(var M,F=1,z=arguments.length;F<z;F++)for(var q in M=arguments[F])Object.prototype.hasOwnProperty.call(M,q)&&(j[q]=M[q]);return j},p.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.getErrorStatusDescription=a.xhr=a.configure=void 0;var d=l(685),f=l(687),m=l(310),h=l(472),g=l(796),v=l(201),_=l(18);if(process.env.VSCODE_NLS_CONFIG){var y=process.env.VSCODE_NLS_CONFIG;h.config(JSON.parse(y))}var b=h.loadMessageBundle(),x=void 0,P=!0;function U(j){var M;return new Promise(function(F,z){var q=(0,m.parse)(j.url),L={hostname:q.hostname,agent:!!j.agent&&j.agent,port:q.port?parseInt(q.port):q.protocol==="https:"?443:80,path:q.path,method:j.type||"GET",headers:j.headers,rejectUnauthorized:typeof j.strictSSL!="boolean"||j.strictSSL};j.user&&j.password&&(L.auth=j.user+":"+j.password);var S=function(T){if(T.statusCode>=300&&T.statusCode<400&&j.followRedirects&&j.followRedirects>0&&T.headers.location){var A=T.headers.location;A.startsWith("/")&&(A=(0,m.format)({protocol:q.protocol,hostname:q.hostname,port:q.port,pathname:A})),F(U(function(J){for(var me=[],ce=1;ce<arguments.length;ce++)me[ce-1]=arguments[ce];return me.forEach(function(ae){return Object.keys(ae).forEach(function(se){return J[se]=ae[se]})}),J}({},j,{url:A,followRedirects:j.followRedirects-1})))}else F({req:M,res:T})};(M=q.protocol==="https:"?f.request(L,S):d.request(L,S)).on("error",z),j.timeout&&M.setTimeout(j.timeout),j.data&&M.write(j.data),M.end(),j.token&&(j.token.isCancellationRequested&&M.destroy(new H),j.token.onCancellationRequested(function(){M.destroy(new H)}))})}a.configure=function(j,M){x=j,P=M},a.xhr=function(j){return typeof(j=p({},j)).strictSSL!="boolean"&&(j.strictSSL=P),j.agent||(j.agent=function(M,F){F===void 0&&(F={});var z=(0,m.parse)(M),q=F.proxyUrl||function(T){return T.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:T.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(z);if(!q)return null;var L=(0,m.parse)(q);if(!/^https?:$/.test(L.protocol))return null;var S={host:L.hostname,port:Number(L.port),auth:L.auth,rejectUnauthorized:typeof F.strictSSL!="boolean"||F.strictSSL,protocol:L.protocol};return z.protocol==="http:"?v(S):_(S)}(j.url,{proxyUrl:x,strictSSL:P})),typeof j.followRedirects!="number"&&(j.followRedirects=5),U(j).then(function(M){return new Promise(function(F,z){var q,L,S=M.res,T=S,A=!1,J=S.headers&&S.headers["content-encoding"];if(J&&(q=j.type,L=M.res.statusCode,!(q==="HEAD"||L>=100&&L<200||L===204||L===304))){var me={flush:g.constants.Z_SYNC_FLUSH,finishFlush:g.constants.Z_SYNC_FLUSH};if(J==="gzip"){var ce=g.createGunzip(me);S.pipe(ce),T=ce}else if(J==="deflate"){var ae=g.createInflate(me);S.pipe(ae),T=ae}}var se=[];T.on("data",function(je){return se.push(je)}),T.on("end",function(){if(!A){if(A=!0,j.followRedirects>0&&(S.statusCode>=300&&S.statusCode<=303||S.statusCode===307)){var je=S.headers.location;if(je.startsWith("/")){var Ye=(0,m.parse)(j.url);je=(0,m.format)({protocol:Ye.protocol,hostname:Ye.hostname,port:Ye.port,pathname:je})}if(je){var Ze={type:j.type,url:je,user:j.user,password:j.password,headers:j.headers,timeout:j.timeout,followRedirects:j.followRedirects-1,data:j.data,token:j.token};return void(0,a.xhr)(Ze).then(F,z)}}var ke=Buffer.concat(se),st={responseText:ke.toString(),body:ke,status:S.statusCode,headers:S.headers||{}};S.statusCode>=200&&S.statusCode<300||S.statusCode===1223?F(st):z(st)}}),T.on("error",function(je){var Ye;Ye=H.is(je)?je:{responseText:b("error","Unable to access {0}. Error: {1}",j.url,je.message),body:Buffer.concat(se),status:500,headers:{}},A=!0,z(Ye)}),j.token&&(j.token.isCancellationRequested&&T.destroy(new H),j.token.onCancellationRequested(function(){T.destroy(new H)}))})},function(M){var F;return F=H.is(M)?M:{responseText:j.agent?b("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",j.url,M.message):b("error.cannot.connect","Unable to connect to {0}. Error: {1}",j.url,M.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(F)})},a.getErrorStatusDescription=function(j){if(!(j<400))switch(j){case 400:return b("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return b("status.401","Unauthorized. The server is refusing to respond.");case 403:return b("status.403","Forbidden. The server is refusing to respond.");case 404:return b("status.404","Not Found. The requested location could not be found.");case 405:return b("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return b("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return b("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return b("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return b("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return b("status.410","Gone. The requested page is no longer available.");case 411:return b("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return b("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return b("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return b("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return b("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return b("status.500","Internal Server Error.");case 501:return b("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return b("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return b("status.416","HTTP status code {0}",j)}};var H=function(j){function M(){var F=j.call(this,"The user aborted a request")||this;return F.name="AbortError",Object.setPrototypeOf(F,M.prototype),F}return u(M,j),M.is=function(F){return F instanceof M},M}(Error)},800:(s,a,l)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.localize=a.format=a.setPseudo=a.isPseudo=a.isDefined=a.BundleFormat=a.MessageFormat=void 0;var c,u,p,d=l(926);function f(h){return h!==void 0}function m(h,g){return a.isPseudo&&(h="\uFF3B"+h.replace(/[aouei]/g,"$&$&")+"\uFF3D"),g.length===0?h:h.replace(/\{(\d+)\}/g,function(v,_){var y=_[0],b=g[y],x=v;return typeof b=="string"?x=b:typeof b!="number"&&typeof b!="boolean"&&b!=null||(x=String(b)),x})}(p=a.MessageFormat||(a.MessageFormat={})).file="file",p.bundle="bundle",p.both="both",(u=a.BundleFormat||(a.BundleFormat={})).standalone="standalone",u.languagePack="languagePack",function(h){h.is=function(g){var v=g;return v&&f(v.key)&&f(v.comment)}}(c||(c={})),a.isDefined=f,a.isPseudo=!1,a.setPseudo=function(h){a.isPseudo=h},a.format=m,a.localize=function(h,g){for(var v=[],_=2;_<arguments.length;_++)v[_-2]=arguments[_];return m(g,v)},a.loadMessageBundle=function(h){return(0,d.default)().loadMessageBundle(h)},a.config=function(h){return(0,d.default)().config(h)}},926:(s,a)=>{"use strict";var l;function c(){if(l===void 0)throw new Error("No runtime abstraction layer installed");return l}Object.defineProperty(a,"__esModule",{value:!0}),function(u){u.install=function(p){if(p===void 0)throw new Error("No runtime abstraction layer provided");l=p}}(c||(c={})),a.default=c},472:(s,a,l)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.BundleFormat=a.MessageFormat=void 0;var c=l(17),u=l(147),p=l(926),d=l(800),f=l(800);Object.defineProperty(a,"MessageFormat",{enumerable:!0,get:function(){return f.MessageFormat}}),Object.defineProperty(a,"BundleFormat",{enumerable:!0,get:function(){return f.BundleFormat}});var m,h,g=Object.prototype.toString;function v(M){return g.call(M)==="[object Number]"}function _(M){return g.call(M)==="[object String]"}function y(M){return JSON.parse(u.readFileSync(M,"utf8"))}function b(M){return function(F,z){for(var q=[],L=2;L<arguments.length;L++)q[L-2]=arguments[L];return v(F)?F>=M.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,d.format)(M[F],q):_(z)?(console.warn("Message ".concat(z," didn't get externalized correctly.")),(0,d.format)(z,q)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function x(M,F){return m[M]=F,F}function P(M){try{return function(F){var z=y(c.join(F,"nls.metadata.json")),q=Object.create(null);for(var L in z){var S=z[L];q[L]=S.messages}return q}(M)}catch(F){return void console.log("Generating default bundle from meta data failed.",F)}}function U(M,F){var z;if(h.languagePackSupport===!0&&h.cacheRoot!==void 0&&h.languagePackId!==void 0&&h.translationsConfigFile!==void 0&&h.translationsConfig!==void 0)try{z=function(L,S){var T,A,J,me=c.join(h.cacheRoot,"".concat(L.id,"-").concat(L.hash,".json")),ce=!1,ae=!1;try{return T=JSON.parse(u.readFileSync(me,{encoding:"utf8",flag:"r"})),A=me,J=new Date,u.utimes(A,J,J,function(){}),T}catch(se){if(se.code==="ENOENT")ae=!0;else{if(!(se instanceof SyntaxError))throw se;console.log("Syntax error parsing message bundle: ".concat(se.message,".")),u.unlink(me,function(je){je&&console.error("Deleting corrupted bundle ".concat(me," failed."))}),ce=!0}}if(T=function(se,je){var Ye=h.translationsConfig[se.id];if(Ye){var Ze=y(Ye).contents,ke=y(c.join(je,"nls.metadata.json")),st=Object.create(null);for(var et in ke){var ve=ke[et],W=Ze["".concat(se.outDir,"/").concat(et)];if(W){for(var ne=[],ye=0;ye<ve.keys.length;ye++){var Te=ve.keys[ye],Ne=W[_(Te)?Te:Te.key];Ne===void 0&&(Ne=ve.messages[ye]),ne.push(Ne)}st[et]=ne}else st[et]=ve.messages}return st}}(L,S),!T||ce)return T;if(ae)try{u.writeFileSync(me,JSON.stringify(T),{encoding:"utf8",flag:"wx"})}catch(se){if(se.code==="EEXIST")return T;throw se}return T}(M,F)}catch(L){console.log("Load or create bundle failed ",L)}if(!z){if(h.languagePackSupport)return P(F);var q=function(L){for(var S=h.language;S;){var T=c.join(L,"nls.bundle.".concat(S,".json"));if(u.existsSync(T))return T;var A=S.lastIndexOf("-");S=A>0?S.substring(0,A):void 0}if(S===void 0&&(T=c.join(L,"nls.bundle.json"),u.existsSync(T)))return T}(F);if(q)try{return y(q)}catch(L){console.log("Loading in the box message bundle failed.",L)}z=P(F)}return z}function H(M){if(!M)return d.localize;var F=c.extname(M);if(F&&(M=M.substr(0,M.length-F.length)),h.messageFormat===d.MessageFormat.both||h.messageFormat===d.MessageFormat.bundle){var z=function(ce){for(var ae,se=c.dirname(ce);ae=c.join(se,"nls.metadata.header.json"),!u.existsSync(ae);){var je=c.dirname(se);if(je===se){ae=void 0;break}se=je}return ae}(M);if(z){var q=c.dirname(z),L=m[q];if(L===void 0)try{var S=JSON.parse(u.readFileSync(z,"utf8"));try{var T=U(S,q);L=x(q,T?{header:S,nlsBundle:T}:null)}catch(ce){console.error("Failed to load nls bundle",ce),L=x(q,null)}}catch(ce){console.error("Failed to read header file",ce),L=x(q,null)}if(L){var A=M.substr(q.length+1).replace(/\\/g,"/"),J=L.nlsBundle[A];return J===void 0?(console.error("Messages for file ".concat(M," not found. See console for details.")),function(){return"Messages not found."}):b(J)}}}if(h.messageFormat===d.MessageFormat.both||h.messageFormat===d.MessageFormat.file)try{var me=y(function(ce){var ae;if(!(h.cacheLanguageResolution&&ae)){if(d.isPseudo||!h.language)ae=".nls.json";else for(var se=h.language;se;){var je=".nls."+se+".json";if(u.existsSync(ce+je)){ae=je;break}var Ye=se.lastIndexOf("-");Ye>0?se=se.substring(0,Ye):(ae=".nls.json",se=null)}h.cacheLanguageResolution}return ce+ae}(M));return Array.isArray(me)?b(me):(0,d.isDefined)(me.messages)&&(0,d.isDefined)(me.keys)?b(me.messages):(console.error("String bundle '".concat(M,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(ce){ce.code!=="ENOENT"&&console.error("Failed to load single file bundle",ce)}return console.error("Failed to load message bundle for file ".concat(M)),function(){return"Failed to load message bundle. See console for details."}}function j(M){return M&&(_(M.locale)&&(h.locale=M.locale.toLowerCase(),h.language=h.locale,m=Object.create(null)),M.messageFormat!==void 0&&(h.messageFormat=M.messageFormat),M.bundleFormat===d.BundleFormat.standalone&&h.languagePackSupport===!0&&(h.languagePackSupport=!1)),(0,d.setPseudo)(h.locale==="pseudo"),H}(function(){if(h={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:d.MessageFormat.bundle},_(process.env.VSCODE_NLS_CONFIG))try{var M=JSON.parse(process.env.VSCODE_NLS_CONFIG),F=void 0;if(M.availableLanguages){var z=M.availableLanguages["*"];_(z)&&(F=z)}if(_(M.locale)&&(h.locale=M.locale.toLowerCase()),F===void 0?h.language=h.locale:F!=="en"&&(h.language=F),function(L){return L===!0||L===!1}(M._languagePackSupport)&&(h.languagePackSupport=M._languagePackSupport),_(M._cacheRoot)&&(h.cacheRoot=M._cacheRoot),_(M._languagePackId)&&(h.languagePackId=M._languagePackId),_(M._translationsConfigFile)){h.translationsConfigFile=M._translationsConfigFile;try{h.translationsConfig=y(h.translationsConfigFile)}catch{if(M._corruptedFile){var q=c.dirname(M._corruptedFile);u.exists(q,function(S){S&&u.writeFile(M._corruptedFile,"corrupted","utf8",function(T){console.error(T)})})}}}}catch{}(0,d.setPseudo)(h.locale==="pseudo"),m=Object.create(null)})(),a.loadMessageBundle=H,a.config=j,p.default.install(Object.freeze({loadMessageBundle:H,config:j}))},374:(s,a)=>{function l(){}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){return l}},491:s=>{"use strict";s.exports=require("assert")},361:s=>{"use strict";s.exports=require("events")},147:s=>{"use strict";s.exports=require("fs")},685:s=>{"use strict";s.exports=require("http")},687:s=>{"use strict";s.exports=require("https")},808:s=>{"use strict";s.exports=require("net")},17:s=>{"use strict";s.exports=require("path")},404:s=>{"use strict";s.exports=require("tls")},310:s=>{"use strict";s.exports=require("url")},796:s=>{"use strict";s.exports=require("zlib")}},r={},n=function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return e[a].call(c.exports,c,c.exports,s),c.exports}(539),i=t;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})()}}),yz={};bbe(yz,{config:()=>Rbe,t:()=>xz});bz.exports=Tbe(yz);var Cbe=require("fs"),Ibe=require("fs/promises"),hz=Ebe(Sbe());async function wbe(t){if(t.protocol==="file:")return await(0,Ibe.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:")try{let e=await(0,hz.xhr)({url:t.toString(),followRedirects:5,headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"}});return new TextDecoder().decode(e.body)}catch(e){throw new Error(e.responseText??(0,hz.getErrorStatusDescription)(e.status)??e.toString())}throw new Error("Unsupported protocol")}function Abe(t){return(0,Cbe.readFileSync)(t,"utf8")}var Hx;function Rbe(t){if("contents"in t){typeof t.contents=="string"?Hx=JSON.parse(t.contents):Hx=t.contents;return}if("fsPath"in t){let e=Abe(t.fsPath),r=JSON.parse(e);Hx=gz(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=wbe(e).then(o=>{try{let s=JSON.parse(o);Hx=gz(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function xz(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let l=1;l<e.length;l++)a+=`{${l-1}}`+e[l];return xz(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=Hx?.[r];return o?typeof o=="string"?HC(o,i):o.comment?HC(o.message,i):HC(n,i):HC(n,i)}var Dbe=/{([^}]+)}/g;function HC(t,e){return t.replace(Dbe,(r,n)=>e[n]??r)}function gz(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var Tz=k(NO=>{var Ez="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");NO.encode=function(t){if(0<=t&&t<Ez.length)return Ez[t];throw new TypeError("Must be between 0 and 63: "+t)};NO.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,l=47,c=26,u=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+c:o<=t&&t<=s?t-o+u:t==a?62:t==l?63:-1}});var LO=k(OO=>{var Sz=Tz(),kO=5,Cz=1<<kO,Iz=Cz-1,wz=Cz;function Pbe(t){return t<0?(-t<<1)+1:(t<<1)+0}function Nbe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}OO.encode=function(e){var r="",n,i=Pbe(e);do n=i&Iz,i>>>=kO,i>0&&(n|=wz),r+=Sz.encode(n);while(i>0);return r};OO.decode=function(e,r,n){var i=e.length,o=0,s=0,a,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=Sz.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(l&wz),l&=Iz,o=o+(l<<s),s+=kO}while(a);n.value=Nbe(o),n.rest=r}});var T0=k(vo=>{function kbe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}vo.getArg=kbe;var Az=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Obe=/^data:.+\,.+$/;function jx(t){var e=t.match(Az);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}vo.urlParse=jx;function b0(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}vo.urlGenerate=b0;function MO(t){var e=t,r=jx(t);if(r){if(!r.path)return t;e=r.path}for(var n=vo.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,b0(r)):e}vo.normalize=MO;function Rz(t,e){t===""&&(t="."),e===""&&(e=".");var r=jx(e),n=jx(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),b0(r);if(r||e.match(Obe))return e;if(n&&!n.host&&!n.path)return n.host=e,b0(n);var i=e.charAt(0)==="/"?e:MO(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,b0(n)):i}vo.join=Rz;vo.isAbsolute=function(t){return t.charAt(0)==="/"||Az.test(t)};function Lbe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}vo.relative=Lbe;var Dz=function(){var t=Object.create(null);return!("__proto__"in t)}();function Pz(t){return t}function Mbe(t){return Nz(t)?"$"+t:t}vo.toSetString=Dz?Pz:Mbe;function Fbe(t){return Nz(t)?t.slice(1):t}vo.fromSetString=Dz?Pz:Fbe;function Nz(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Ube(t,e,r){var n=E0(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:E0(t.name,e.name)}vo.compareByOriginalPositions=Ube;function Bbe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=E0(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:E0(t.name,e.name)}vo.compareByGeneratedPositionsDeflated=Bbe;function E0(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function qbe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=E0(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:E0(t.name,e.name)}vo.compareByGeneratedPositionsInflated=qbe;function Hbe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}vo.parseSourceMapInput=Hbe;function jbe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=jx(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=Rz(b0(n),e)}return MO(e)}vo.computeSourceURL=jbe});var BO=k(kz=>{var FO=T0(),UO=Object.prototype.hasOwnProperty,wh=typeof Map<"u";function ju(){this._array=[],this._set=wh?new Map:Object.create(null)}ju.fromArray=function(e,r){for(var n=new ju,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};ju.prototype.size=function(){return wh?this._set.size:Object.getOwnPropertyNames(this._set).length};ju.prototype.add=function(e,r){var n=wh?e:FO.toSetString(e),i=wh?this.has(e):UO.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(wh?this._set.set(e,o):this._set[n]=o)};ju.prototype.has=function(e){if(wh)return this._set.has(e);var r=FO.toSetString(e);return UO.call(this._set,r)};ju.prototype.indexOf=function(e){if(wh){var r=this._set.get(e);if(r>=0)return r}else{var n=FO.toSetString(e);if(UO.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};ju.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};ju.prototype.toArray=function(){return this._array.slice()};kz.ArraySet=ju});var Mz=k(Lz=>{var Oz=T0();function Gbe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||Oz.compareByGeneratedPositionsInflated(t,e)<=0}function GC(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}GC.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};GC.prototype.add=function(e){Gbe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};GC.prototype.toArray=function(){return this._sorted||(this._array.sort(Oz.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Lz.MappingList=GC});var qO=k(Fz=>{var Gx=LO(),Jn=T0(),VC=BO().ArraySet,Vbe=Mz().MappingList;function wa(t){t||(t={}),this._file=Jn.getArg(t,"file",null),this._sourceRoot=Jn.getArg(t,"sourceRoot",null),this._skipValidation=Jn.getArg(t,"skipValidation",!1),this._sources=new VC,this._names=new VC,this._mappings=new Vbe,this._sourcesContents=null}wa.prototype._version=3;wa.fromSourceMap=function(e){var r=e.sourceRoot,n=new wa({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Jn.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Jn.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};wa.prototype.addMapping=function(e){var r=Jn.getArg(e,"generated"),n=Jn.getArg(e,"original",null),i=Jn.getArg(e,"source",null),o=Jn.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};wa.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Jn.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Jn.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Jn.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};wa.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Jn.relative(o,i));var s=new VC,a=new VC;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var c=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});c.source!=null&&(l.source=c.source,n!=null&&(l.source=Jn.join(n,l.source)),o!=null&&(l.source=Jn.relative(o,l.source)),l.originalLine=c.line,l.originalColumn=c.column,c.name!=null&&(l.name=c.name))}var u=l.source;u!=null&&!s.has(u)&&s.add(u);var p=l.name;p!=null&&!a.has(p)&&a.add(p)},this),this._sources=s,this._names=a,e.sources.forEach(function(l){var c=e.sourceContentFor(l);c!=null&&(n!=null&&(l=Jn.join(n,l)),o!=null&&(l=Jn.relative(o,l)),this.setSourceContent(l,c))},this)};wa.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};wa.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",l,c,u,p,d=this._mappings.toArray(),f=0,m=d.length;f<m;f++){if(c=d[f],l="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)l+=";",r++;else if(f>0){if(!Jn.compareByGeneratedPositionsInflated(c,d[f-1]))continue;l+=","}l+=Gx.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(p=this._sources.indexOf(c.source),l+=Gx.encode(p-s),s=p,l+=Gx.encode(c.originalLine-1-i),i=c.originalLine-1,l+=Gx.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(u=this._names.indexOf(c.name),l+=Gx.encode(u-o),o=u)),a+=l}return a};wa.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Jn.relative(r,n));var i=Jn.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};wa.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};wa.prototype.toString=function(){return JSON.stringify(this.toJSON())};Fz.SourceMapGenerator=wa});var Uz=k(Ah=>{Ah.GREATEST_LOWER_BOUND=1;Ah.LEAST_UPPER_BOUND=2;function HO(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?HO(s,e,r,n,i,o):o==Ah.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?HO(t,s,r,n,i,o):o==Ah.LEAST_UPPER_BOUND?s:t<0?-1:t}Ah.search=function(e,r,n,i){if(r.length===0)return-1;var o=HO(-1,r.length,e,r,n,i||Ah.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var qz=k(Bz=>{function jO(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function zbe(t,e){return Math.round(t+Math.random()*(e-t))}function GO(t,e,r,n){if(r<n){var i=zbe(r,n),o=r-1;jO(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,jO(t,o,a));jO(t,o+1,a);var l=o+1;GO(t,e,r,l-1),GO(t,e,l+1,n)}}Bz.quickSort=function(t,e){GO(t,e,0,t.length-1)}});var jz=k(zC=>{var rt=T0(),VO=Uz(),S0=BO().ArraySet,$be=LO(),Vx=qz().quickSort;function Xr(t,e){var r=t;return typeof t=="string"&&(r=rt.parseSourceMapInput(t)),r.sections!=null?new xc(r,e):new Qi(r,e)}Xr.fromSourceMap=function(t,e){return Qi.fromSourceMap(t,e)};Xr.prototype._version=3;Xr.prototype.__generatedMappings=null;Object.defineProperty(Xr.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Xr.prototype.__originalMappings=null;Object.defineProperty(Xr.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Xr.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Xr.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Xr.GENERATED_ORDER=1;Xr.ORIGINAL_ORDER=2;Xr.GREATEST_LOWER_BOUND=1;Xr.LEAST_UPPER_BOUND=2;Xr.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||Xr.GENERATED_ORDER,s;switch(o){case Xr.GENERATED_ORDER:s=this._generatedMappings;break;case Xr.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(l){var c=l.source===null?null:this._sources.at(l.source);return c=rt.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)};Xr.prototype.allGeneratedPositionsFor=function(e){var r=rt.getArg(e,"line"),n={source:rt.getArg(e,"source"),originalLine:r,originalColumn:rt.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",rt.compareByOriginalPositions,VO.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:rt.getArg(s,"generatedLine",null),column:rt.getArg(s,"generatedColumn",null),lastColumn:rt.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var l=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==l;)i.push({line:rt.getArg(s,"generatedLine",null),column:rt.getArg(s,"generatedColumn",null),lastColumn:rt.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};zC.SourceMapConsumer=Xr;function Qi(t,e){var r=t;typeof t=="string"&&(r=rt.parseSourceMapInput(t));var n=rt.getArg(r,"version"),i=rt.getArg(r,"sources"),o=rt.getArg(r,"names",[]),s=rt.getArg(r,"sourceRoot",null),a=rt.getArg(r,"sourcesContent",null),l=rt.getArg(r,"mappings"),c=rt.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=rt.normalize(s)),i=i.map(String).map(rt.normalize).map(function(u){return s&&rt.isAbsolute(s)&&rt.isAbsolute(u)?rt.relative(s,u):u}),this._names=S0.fromArray(o.map(String),!0),this._sources=S0.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(u){return rt.computeSourceURL(s,u,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=l,this._sourceMapURL=e,this.file=c}Qi.prototype=Object.create(Xr.prototype);Qi.prototype.consumer=Xr;Qi.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=rt.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Qi.fromSourceMap=function(e,r){var n=Object.create(Qi.prototype),i=n._names=S0.fromArray(e._names.toArray(),!0),o=n._sources=S0.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return rt.computeSourceURL(n.sourceRoot,f,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],l=n.__originalMappings=[],c=0,u=s.length;c<u;c++){var p=s[c],d=new Hz;d.generatedLine=p.generatedLine,d.generatedColumn=p.generatedColumn,p.source&&(d.source=o.indexOf(p.source),d.originalLine=p.originalLine,d.originalColumn=p.originalColumn,p.name&&(d.name=i.indexOf(p.name)),l.push(d)),a.push(d)}return Vx(n.__originalMappings,rt.compareByOriginalPositions),n};Qi.prototype._version=3;Object.defineProperty(Qi.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Hz(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Qi.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,l=0,c=e.length,u=0,p={},d={},f=[],m=[],h,g,v,_,y;u<c;)if(e.charAt(u)===";")n++,u++,i=0;else if(e.charAt(u)===",")u++;else{for(h=new Hz,h.generatedLine=n,_=u;_<c&&!this._charIsMappingSeparator(e,_);_++);if(g=e.slice(u,_),v=p[g],v)u+=g.length;else{for(v=[];u<_;)$be.decode(e,u,d),y=d.value,u=d.rest,v.push(y);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");p[g]=v}h.generatedColumn=i+v[0],i=h.generatedColumn,v.length>1&&(h.source=a+v[1],a+=v[1],h.originalLine=o+v[2],o=h.originalLine,h.originalLine+=1,h.originalColumn=s+v[3],s=h.originalColumn,v.length>4&&(h.name=l+v[4],l+=v[4])),m.push(h),typeof h.originalLine=="number"&&f.push(h)}Vx(m,rt.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,Vx(f,rt.compareByOriginalPositions),this.__originalMappings=f};Qi.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return VO.search(e,r,o,s)};Qi.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};Qi.prototype.originalPositionFor=function(e){var r={generatedLine:rt.getArg(e,"line"),generatedColumn:rt.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",rt.compareByGeneratedPositionsDeflated,rt.getArg(e,"bias",Xr.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=rt.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=rt.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=rt.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:rt.getArg(i,"originalLine",null),column:rt.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};Qi.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Qi.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=rt.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=rt.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};Qi.prototype.generatedPositionFor=function(e){var r=rt.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:rt.getArg(e,"line"),originalColumn:rt.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",rt.compareByOriginalPositions,rt.getArg(e,"bias",Xr.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:rt.getArg(o,"generatedLine",null),column:rt.getArg(o,"generatedColumn",null),lastColumn:rt.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};zC.BasicSourceMapConsumer=Qi;function xc(t,e){var r=t;typeof t=="string"&&(r=rt.parseSourceMapInput(t));var n=rt.getArg(r,"version"),i=rt.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new S0,this._names=new S0;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=rt.getArg(s,"offset"),l=rt.getArg(a,"line"),c=rt.getArg(a,"column");if(l<o.line||l===o.line&&c<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:l+1,generatedColumn:c+1},consumer:new Xr(rt.getArg(s,"map"),e)}})}xc.prototype=Object.create(Xr.prototype);xc.prototype.constructor=Xr;xc.prototype._version=3;Object.defineProperty(xc.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});xc.prototype.originalPositionFor=function(e){var r={generatedLine:rt.getArg(e,"line"),generatedColumn:rt.getArg(e,"column")},n=VO.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};xc.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};xc.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};xc.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(rt.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};xc.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],l=i.consumer._sources.at(a.source);l=rt.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var c=null;a.name&&(c=i.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var u={source:l,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(u),typeof u.originalLine=="number"&&this.__originalMappings.push(u)}Vx(this.__generatedMappings,rt.compareByGeneratedPositionsDeflated),Vx(this.__originalMappings,rt.compareByOriginalPositions)};zC.IndexedSourceMapConsumer=xc});var Vz=k(Gz=>{var Wbe=qO().SourceMapGenerator,$C=T0(),Kbe=/(\r?\n)/,Ybe=10,C0="$$$isSourceNode$$$";function Ws(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[C0]=!0,n!=null&&this.add(n)}Ws.fromStringWithSourceMap=function(e,r,n){var i=new Ws,o=e.split(Kbe),s=0,a=function(){var d=m(),f=m()||"";return d+f;function m(){return s<o.length?o[s++]:void 0}},l=1,c=0,u=null;return r.eachMapping(function(d){if(u!==null)if(l<d.generatedLine)p(u,a()),l++,c=0;else{var f=o[s]||"",m=f.substr(0,d.generatedColumn-c);o[s]=f.substr(d.generatedColumn-c),c=d.generatedColumn,p(u,m),u=d;return}for(;l<d.generatedLine;)i.add(a()),l++;if(c<d.generatedColumn){var f=o[s]||"";i.add(f.substr(0,d.generatedColumn)),o[s]=f.substr(d.generatedColumn),c=d.generatedColumn}u=d},this),s<o.length&&(u&&p(u,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(d){var f=r.sourceContentFor(d);f!=null&&(n!=null&&(d=$C.join(n,d)),i.setSourceContent(d,f))}),i;function p(d,f){if(d===null||d.source===void 0)i.add(f);else{var m=n?$C.join(n,d.source):d.source;i.add(new Ws(d.originalLine,d.originalColumn,m,f,d.name))}}};Ws.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[C0]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Ws.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[C0]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Ws.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[C0]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Ws.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};Ws.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[C0]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};Ws.prototype.setSourceContent=function(e,r){this.sourceContents[$C.toSetString(e)]=r};Ws.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][C0]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e($C.fromSetString(i[r]),this.sourceContents[i[r]])};Ws.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};Ws.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new Wbe(e),i=!1,o=null,s=null,a=null,l=null;return this.walk(function(c,u){r.code+=c,u.source!==null&&u.line!==null&&u.column!==null?((o!==u.source||s!==u.line||a!==u.column||l!==u.name)&&n.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:r.line,column:r.column},name:u.name}),o=u.source,s=u.line,a=u.column,l=u.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,d=c.length;p<d;p++)c.charCodeAt(p)===Ybe?(r.line++,r.column=0,p+1===d?(o=null,i=!1):i&&n.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:r.line,column:r.column},name:u.name})):r.column++}),this.walkSourceContents(function(c,u){n.setSourceContent(c,u)}),{code:r.code,map:n}};Gz.SourceNode=Ws});var zz=k(WC=>{WC.SourceMapGenerator=qO().SourceMapGenerator;WC.SourceMapConsumer=jz().SourceMapConsumer;WC.SourceNode=Vz().SourceNode});var Wz=k((YYe,$z)=>{var Qbe=Object.prototype.toString,zO=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Xbe(t){return Qbe.call(t).slice(8,-1)==="ArrayBuffer"}function Jbe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return zO?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function Zbe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return zO?Buffer.from(t,e):new Buffer(t,e)}function eEe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Xbe(t)?Jbe(t,e,r):typeof t=="string"?Zbe(t,e):zO?Buffer.from(t):new Buffer(t)}$z.exports=eEe});var t$=k((Dh,YO)=>{var tEe=zz().SourceMapConsumer,$O=require("path"),dl;try{dl=require("fs"),(!dl.existsSync||!dl.readFileSync)&&(dl=null)}catch{}var rEe=Wz();function Kz(t,e){return t.require(e)}var Yz=!1,Qz=!1,WO=!1,zx="auto",Rh={},$x={},nEe=/^data:application\/json[^,]+base64,/,Ad=[],Rd=[];function QO(){return zx==="browser"?!0:zx==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function iEe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function oEe(){return typeof process=="object"&&process!==null?process.version:""}function sEe(){if(typeof process=="object"&&process!==null)return process.stderr}function aEe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function KC(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var XO=KC(Ad);Ad.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in Rh)return Rh[t];var e="";try{if(dl)dl.existsSync(t)&&(e=dl.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return Rh[t]=e});function KO(t,e){if(!t)return e;var r=$O.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+$O.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+$O.resolve(r.slice(i.length),e)}function cEe(t){var e;if(QO())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=XO(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var JO=KC(Rd);Rd.push(function(t){var e=cEe(t);if(!e)return null;var r;if(nEe.test(e)){var n=e.slice(e.indexOf(",")+1);r=rEe(n,"base64").toString(),e=t}else e=KO(t,e),r=XO(e);return r?{url:e,map:r}:null});function ZO(t){var e=$x[t.source];if(!e){var r=JO(t.source);r?(e=$x[t.source]={url:r.url,map:new tEe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=KO(e.url,i);Rh[a]=s}})):e=$x[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=KO(e.url,n.source),n}return t}function Jz(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=ZO({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Jz(e[2])+")":t}function lEe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),l=!(this.isToplevel()||a);if(l){var c=this.getTypeName();c==="[object Object]"&&(c="null");var u=this.getMethodName();o?(c&&o.indexOf(c)!=0&&(i+=c+"."),i+=o,u&&o.indexOf("."+u)!=o.length-u.length-1&&(i+=" [as "+u+"]")):i+=c+"."+(u||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function Xz(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=lEe,e}function Zz(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(oEe())?0:62;n===1&&i>s&&!QO()&&!t.isEval()&&(i-=s);var a=ZO({source:r,line:n,column:i});e.curPosition=a,t=Xz(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=Jz(c),t=Xz(t),t.getEvalOrigin=function(){return c}),t}function uEe(t,e){WO&&(Rh={},$x={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+Zz(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function e$(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=Rh[r];if(!o&&dl&&dl.existsSync(r))try{o=dl.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function pEe(t){var e=e$(t),r=sEe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),aEe(1)}function dEe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return pEe(arguments[1])}return t.apply(this,arguments)}}var fEe=Ad.slice(0),mEe=Rd.slice(0);Dh.wrapCallSite=Zz;Dh.getErrorSource=e$;Dh.mapSourcePosition=ZO;Dh.retrieveSourceMap=JO;Dh.install=function(t){if(t=t||{},t.environment&&(zx=t.environment,["node","browser","auto"].indexOf(zx)===-1))throw new Error("environment "+zx+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Ad.length=0),Ad.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Rd.length=0),Rd.unshift(t.retrieveSourceMap)),t.hookRequire&&!QO()){var e=Kz(YO,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return Rh[s]=o,$x[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(WO||(WO="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Yz||(Yz=!0,Error.prepareStackTrace=uEe),!Qz){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=Kz(YO,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&iEe()&&(Qz=!0,dEe())}};Dh.resetRetrieveHandlers=function(){Ad.length=0,Rd.length=0,Ad=fEe.slice(0),Rd=mEe.slice(0),JO=KC(Rd),XO=KC(Ad)}});var p$=k((dQe,IEe)=>{IEe.exports={name:"copilot-chat",displayName:"GitHub Copilot Chat",description:"AI chat features powered by Copilot",version:"0.11.0",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"prod",publisher:"GitHub",preview:!0,homepage:"https://github.com/features/copilot",license:"https://docs.github.com/en/site-policy/github-terms/github-copilot-pre-release-license-terms",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-release"},bugs:{url:"https://aka.ms/microsoft/vscode-copilot-release"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/Copilot-App-Icon.png",pricing:"Trial",engines:{vscode:"^1.85.0",npm:">=9.0.0",node:">=18.0.0"},categories:["Programming Languages","Machine Learning","Education","Snippets"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup",description:"%github.copilot.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%github.copilot.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%github.copilot.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%github.copilot.badge.twitter%"}],activationEvents:["onStartupFinished"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["interactive","interactiveUserActions","chatProvider","codeActionAI","findTextInFiles","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","readonlyMessage","chatVariables","mappedEditsProvider","aiRelatedInformation","chatAgents2","chatAgents2Additions","defaultChatAgent","contribSourceControlInputBoxMenu"],contributes:{interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!github.copilot.interactiveSession.disabled"}],viewsWelcome:[{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.signIn%",when:"!github.copilot.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual%",when:"github.copilot.interactiveSession.individual.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual.expired%",when:"github.copilot.interactiveSession.individual.expired"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.enterprise%",when:"github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.offline%",when:"github.copilot.offline"}],commands:[{command:"github.copilot.interactiveEditor.explain",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generate",title:"%github.copilot.command.generateThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateDocs",title:"%github.copilot.command.generateDocs%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateTests",title:"%github.copilot.command.generateTests%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.fix",title:"%github.copilot.command.fixThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveSession.feedback",title:"%github.copilot.command.sendChatFeedback%",enablement:"github.copilot.activated && !github.copilot.interactiveSession.disabled",icon:"$(feedback)",category:"GitHub Copilot"},{command:"github.copilot.debug.workbenchState",title:"%github.copilot.command.logWorkbenchState%",category:"Developer"},{command:"github.copilot.ghpr.applySuggestion",title:"%github.copilot.command.applySuggestionWithCopilot%",icon:"$(sparkle)",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelection",title:"%github.copilot.command.explainTerminalSelection%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",title:"%github.copilot.command.explainTerminalSelectionContextMenu%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalLastCommand",title:"%github.copilot.command.explainTerminalLastCommand%",category:"GitHub Copilot"},{command:"github.copilot.terminal.suggestCommand",title:"%github.copilot.command.suggestCommand%",category:"GitHub Copilot"},{command:"github.copilot.git.generateCommitMessage",title:"%github.copilot.git.generateCommitMessage%",icon:"$(sparkle)",category:"GitHub Copilot"}],configuration:{title:"Copilot",properties:{"github.copilot.editor.enableCodeActions":{type:"boolean",default:!0,description:"%github.copilot.config.enableCodeActions%"},"github.copilot.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%github.copilot.config.localeOverride%"},"github.copilot.chat.welcomeMessage":{type:"string",default:"first",markdownDescription:"%github.copilot.config.welcomeMessage%",markdownEnumDescriptions:["%github.copilot.config.welcomeMessage.first%","%github.copilot.config.welcomeMessage.always%","%github.copilot.config.welcomeMessage.never%"],enum:["first","always","never"]}}},configurationDefaults:{"terminal.integrated.commandsToSkipShell":["github.copilot.terminal.suggestCommand"]},keybindings:[{command:"github.copilot.terminal.suggestCommand",key:"ctrl+i",mac:"cmd+i",when:"terminalFocus"}],submenus:[{id:"copilot",label:"Copilot"}],menus:{"editor/context":[{submenu:"copilot",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"1_copilot@0"}],copilot:[{command:"inlineChat.start",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilot@1"},{command:"github.copilot.interactiveEditor.explain",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"github.copilot.interactiveEditor.fix",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@2"},{command:"github.copilot.interactiveEditor.generateDocs",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@3"},{command:"github.copilot.interactiveEditor.generateTests",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@4"}],"terminal/context":[{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",group:"1_copilot@0"}],commandPalette:[{command:"github.copilot.interactiveSession.feedback",when:"github.copilot.activated && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.debug.workbenchState",when:"true"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",when:"false"},{command:"github.copilot.git.generateCommitMessage",when:"false"}],"view/title":[{command:"github.copilot.interactiveSession.feedback",when:"view == workbench.panel.chat.view.copilot",group:"navigation"}],"comments/comment/title":[{command:"github.copilot.ghpr.applySuggestion",title:"Apply Suggestion with Copilot",group:"inline@0",when:"commentController =~ /^github-review/ && !(comment =~ /hasSuggestion/)"}],"scm/inputBox":[{command:"github.copilot.git.generateCommitMessage",when:"scmProvider == git"}]},icons:{"copilot-logo":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"},{id:"copilot-chat.generateCommitMessage",commandLineMatcher:"git add .+",commandExitResult:"success",kind:"explain",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0}}]},extensionPack:["GitHub.copilot"],scripts:{postinstall:"tsx ./script/postinstall.ts",prepare:"tsx script/setup/prepare.ts","husky:install":"husky install","vscode:prepublish":"npm run build","vscode-dts:dev":"npx vscode-dts dev && mv vscode.proposed.*.ts src/extension",build:"tsx .esbuild.ts",compile:"tsx .esbuild.ts --dev",watch:"npm-run-all -p watch:*","watch:esbuild":"tsx .esbuild.ts --watch --dev","watch:tsc-extension":"tsc --noEmit --watch --project tsconfig.json","watch:tsc-simulation-workbench":"tsc --noEmit --watch --project test/simulation/workbench/tsconfig.json",typecheck:"tsc --noEmit -project tsconfig.json && tsc --noEmit --project test/simulation/workbench/tsconfig.json",lint:"eslint src test --max-warnings=0 --ext ts","lint-staged":"eslint src test --ext ts",tsfmt:"node tsfmt ./tsfmt.json -r --verify",test:"npm-run-all test:*","test:extension":"vscode-test --code-version=insiders --timeout=5000","test:unit":"mocha -u tdd dist/test-unit.js --require source-map-support/register --exit --timeout=5000","test:unit_jest":"jest --forceExit --detectOpenHandles",get_token:"tsx script/setup/getToken.ts","patch-release":"tsx script/build/applyPatchForRelease.ts","patch-prerelease":"tsx script/build/applyPatchForRelease.ts -- --prerelease",prettier:"prettier --list-different --write --cache .",simulate:"node dist/simulationMain.js","simulate-ci":"node dist/simulationMain.js --ci --require-cache","simulate-baseline":"node dist/simulationMain.js --update-baseline",setup:"python script/setup/setup.py && npm run get_token","setup:dotnet":"run-script-os","setup:dotnet:darwin:linux":"curl -O https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.sh && chmod u+x dotnet-install.sh && ./dotnet-install.sh --version latest --quality GA --channel STS && rm dotnet-install.sh","setup:dotnet:win32":"Invoke-WebRequest -Uri https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.ps1 && chmod u+x dotnet-install.ps1 && ./dotnet-install.ps1 --version latest --quality GA --channel STS && rm dotnet-install.ps1",aml:"python test/aml/run.py",package:"vsce package"},devDependencies:{"@jest/globals":"^29.6.1","@nteract/messaging":"^7.0.10","@types/eslint":"8.44.7","@types/kerberos":"^1.1.2","@types/minimist":"^1.2.2","@types/mocha":"^10.0.1","@types/node":"^18.11.9","@types/picomatch":"^2.3.0","@types/react":"^18.2.21","@types/react-dom":"^18.2.7","@types/sinon":"^10.0.13","@types/tar":"^6.1.5","@types/vscode":"^1.74.0","@typescript-eslint/eslint-plugin":"^5.59.9","@typescript-eslint/parser":"^5.56.0","@typescript-eslint/typescript-estree":"^5.59.11","@vscode/dts":"^0.4.0","@vscode/test-cli":"^0.0.4","@vscode/test-electron":"^2.3.8","@vscode/vsce":"2.19.0","@vscode/zeromq":"0.1.6","csv-parse":"^5.5.0",dotenv:"^16.3.1",electron:"^25.8.4",esbuild:"^0.19.3",eslint:"^8.38.0","eslint-import-resolver-typescript":"^3.5.5","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.27.5","eslint-plugin-jsdoc":"^46.2.6","eslint-plugin-local":"^1.0.0","eslint-plugin-no-only-tests":"^3.1.0","get-port":"^5.1.1",glob:"^10.2.7",husky:"^8.0.3",jest:"^29.6.1","lint-staged":"^13.2.2",minimist:"^1.2.8",mobx:"^6.10.2","mobx-react-lite":"^4.0.4",mocha:"^10.2.0","monaco-editor":"^0.41.0","npm-run-all":"^4.1.5",outdent:"^0.8.0",picomatch:"^2.3.1",prettier:"2.8.7",proxy:"^1.0.2",react:"^18.2.0","react-dom":"^18.2.0","run-script-os":"^1.1.6",sinon:"^15.1.2",tar:"^6.1.15","tree-sitter-c-sharp":"^0.20.0","tree-sitter-cli":"^0.20.8","tree-sitter-cpp":"^0.20.3","tree-sitter-go":"^0.20.0","tree-sitter-java":"^0.20.2","tree-sitter-javascript":"^0.20.1","tree-sitter-python":"^0.20.4","tree-sitter-ruby":"^0.19.0","tree-sitter-rust":"^0.20.4","tree-sitter-typescript":"^0.20.3","ts-dedent":"^2.2.0","ts-jest":"^29.1.1","ts-node":"^10.9.1",tsx:"^3.13.0",typescript:"^5.0.4",zeromq:"github:rebornix/zeromq.js#a19e8e373b3abc677f91b936d3f00d49b1b61792",zlib:"^1.0.5"},dependencies:{"@adobe/helix-fetch":"github:devm33/helix-fetch#eaa2f1344d93625e1bddb83d6846be5eea007e94","@humanwhocodes/gitignore-to-minimatch":"1.0.2","@microsoft/tiktokenizer":"^1.0.2","@roamhq/mac-ca":"^1.0.7","@vscode/extension-telemetry":"^0.9.0","@vscode/l10n":"^0.0.16",applicationinsights:"^2.9.0",ignore:"^5.2.4",isbinaryfile:"^5.0.0","jsonc-parser":"^3.2.0",open:"^8.4.2","p-limit":"^3.0.0","source-map-support":"^0.5.21","vscode-tas-client":"^0.1.75","web-tree-sitter":"^0.20.8"},"lint-staged":{"!(test/simulation/fixtures/**|.test-scenarios/**)*.{ts,js}":["npm run tsfmt --","npm run lint-staged --"]},isPreRelease:!1}});var dL=k((TQe,m$)=>{"use strict";var f$=require("fs"),pL;function PEe(){try{return f$.statSync("/.dockerenv"),!0}catch{return!1}}function NEe(){try{return f$.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}m$.exports=()=>(pL===void 0&&(pL=PEe()||NEe()),pL)});var v$=k((SQe,fL)=>{"use strict";var kEe=require("os"),OEe=require("fs"),h$=dL(),g$=()=>{if(process.platform!=="linux")return!1;if(kEe.release().toLowerCase().includes("microsoft"))return!h$();try{return OEe.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!h$():!1}catch{return!1}};process.env.__IS_WSL_TEST__?fL.exports=g$:fL.exports=g$()});var y$=k((CQe,_$)=>{"use strict";_$.exports=(t,e,r)=>{let n=i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}});var I$=k((IQe,C$)=>{var LEe=require("path"),MEe=require("child_process"),{promises:cI,constants:S$}=require("fs"),aI=v$(),FEe=dL(),hL=y$(),x$=LEe.join(__dirname,"xdg-open"),{platform:R0,arch:b$}=process,UEe=()=>{try{return cI.statSync("/run/.containerenv"),!0}catch{return!1}},mL;function BEe(){return mL===void 0&&(mL=UEe()||FEe()),mL}var qEe=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await cI.access(r,S$.F_OK),n=!0}catch{}if(!n)return t;let i=await cI.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),E$=async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},lI=async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return E$(t.app,a=>lI({...t,app:a}));let{name:e,arguments:r=[]}=t.app||{};if(r=[...r],Array.isArray(e))return E$(e,a=>lI({...t,app:{name:a,arguments:r}}));let n,i=[],o={};if(R0==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(R0==="win32"||aI&&!BEe()&&!e){let a=await qEe();n=aI?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),aI||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`,"-ArgumentList"),t.target&&r.unshift(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(c=>`"\`"${c}\`""`),l.push(r.join(","))),t.target=Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",l=!1;try{await cI.access(x$,S$.X_OK),l=!0}catch{}n=process.versions.electron||R0==="android"||a||!l?"xdg-open":x$}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}t.target&&i.push(t.target),R0==="darwin"&&r.length>0&&i.push("--args",...r);let s=MEe.spawn(n,i,o);return t.wait?new Promise((a,l)=>{s.once("error",l),s.once("close",c=>{if(!t.allowNonzeroExitCode&&c>0){l(new Error(`Exited with code ${c}`));return}a(s)})}):(s.unref(),s)},gL=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return lI({...e,target:t})},HEe=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=e||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return lI({...e,app:{name:t,arguments:r}})};function T$(t){if(typeof t=="string"||Array.isArray(t))return t;let{[b$]:e}=t;if(!e)throw new Error(`${b$} is not supported`);return e}function vL({[R0]:t},{wsl:e}){if(e&&aI)return T$(e);if(!t)throw new Error(`${R0} is not supported`);return T$(t)}var uI={};hL(uI,"chrome",()=>vL({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));hL(uI,"firefox",()=>vL({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));hL(uI,"edge",()=>vL({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));gL.apps=uI;gL.openApp=HEe;C$.exports=gL});var kL=k(Gt=>{"use strict";var PL=Gt&&Gt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},NL=Gt&&Gt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getShallowFileSize=Gt.getShallowDirectorySizeSync=Gt.getShallowDirectorySize=Gt.confirmDirExists=Gt.unlinkAsync=Gt.readdirAsync=Gt.readFileAsync=Gt.writeFileAsync=Gt.appendFileAsync=Gt.accessAsync=Gt.mkdirAsync=Gt.lstatAsync=Gt.statAsync=void 0;var Ec=require("fs"),rW=require("path"),Yu=require("util");Gt.statAsync=Yu.promisify(Ec.stat);Gt.lstatAsync=Yu.promisify(Ec.lstat);Gt.mkdirAsync=Yu.promisify(Ec.mkdir);Gt.accessAsync=Yu.promisify(Ec.access);Gt.appendFileAsync=Yu.promisify(Ec.appendFile);Gt.writeFileAsync=Yu.promisify(Ec.writeFile);Gt.readFileAsync=Yu.promisify(Ec.readFile);Gt.readdirAsync=Yu.promisify(Ec.readdir);Gt.unlinkAsync=Yu.promisify(Ec.unlink);var RTe=function(t){return PL(void 0,void 0,void 0,function(){var e,r,n;return NL(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Gt.lstatAsync(t)];case 1:if(e=i.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=i.sent(),!(r&&r.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,Gt.mkdirAsync(t)];case 4:return i.sent(),[3,6];case 5:if(n=i.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};Gt.confirmDirExists=RTe;var DTe=function(t){return PL(void 0,void 0,void 0,function(){var e,r,n,i,o,s;return NL(this,function(a){switch(a.label){case 0:return[4,Gt.readdirAsync(t)];case 1:e=a.sent(),r=0,n=0,i=e,a.label=2;case 2:return n<i.length?(o=i[n],[4,Gt.statAsync(rW.join(t,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(r+=s.size),a.label=4;case 4:return n++,[3,2];case 5:return[2,r]}})})};Gt.getShallowDirectorySize=DTe;var PTe=function(t){for(var e=Ec.readdirSync(t),r=0,n=0;n<e.length;n++)r+=Ec.statSync(rW.join(t,e[n])).size;return r};Gt.getShallowDirectorySizeSync=PTe;var NTe=function(t){return PL(void 0,void 0,void 0,function(){var e;return NL(this,function(r){switch(r.label){case 0:return[4,Gt.statAsync(t)];case 1:return e=r.sent(),e.isFile()?[2,e.size]:[2]}})})};Gt.getShallowFileSize=NTe});var oW=k((Fh,iW)=>{"use strict";var OL=Fh&&Fh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},LL=Fh&&Fh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},nW=Fh&&Fh.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},kTe=require("fs"),OTe=require("os"),Mh=require("path"),vl=kL(),LTe=function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?Mh.isAbsolute(n)?this._tempDir=n:this._tempDir=Mh.join(process.cwd(),n):this._tempDir=Mh.join(OTe.tmpdir(),"appInsights-node"),this._fileFullPath=Mh.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?nW([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?nW([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return OL(this,void 0,void 0,function(){var r,n,i,o,s,a;return LL(this,function(l){switch(l.label){case 0:r=e+`\r
`,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,vl.confirmDirExists(this._tempDir)];case 2:return l.sent(),[3,4];case 3:return n=l.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return l.trys.push([4,6,,11]),[4,vl.accessAsync(this._fileFullPath,kTe.constants.F_OK)];case 5:return l.sent(),[3,11];case 6:i=l.sent(),l.label=7;case 7:return l.trys.push([7,9,,10]),[4,vl.appendFileAsync(this._fileFullPath,r)];case 8:return l.sent(),[2];case 9:return o=l.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return l.trys.push([11,17,,18]),[4,vl.getShallowFileSize(this._fileFullPath)];case 12:return s=l.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return l.sent(),[3,16];case 14:return[4,vl.appendFileAsync(this._fileFullPath,r)];case 15:l.sent(),l.label=16;case 16:return[3,18];case 17:return a=l.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return OL(this,void 0,void 0,function(){var r,n,i;return LL(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,vl.readFileAsync(this._fileFullPath)];case 1:return r=o.sent(),n=Mh.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,vl.writeFileAsync(n,r)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return vl.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return OL(this,void 0,void 0,function(){var e,r,n,i,o,s=this;return LL(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,vl.readdirAsync(this._tempDir)];case 1:e=a.sent(),e=e.filter(function(l){return Mh.basename(l).indexOf(s._backUpNameFormat)>-1}),e.sort(function(l,c){var u=new Date(parseInt(l.split(s._backUpNameFormat)[0])),p=new Date(parseInt(c.split(s._backUpNameFormat)[0]));if(u<p)return-1;if(u>=p)return 1}),r=e.length,n=0,a.label=2;case 2:return n<r-this.maxHistory?(i=Mh.join(this._tempDir,e[n]),[4,vl.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t}();iW.exports=LTe});var Jr=k((FXe,aW)=>{"use strict";var sW=oW(),MTe="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",FTe="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",UTe=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&sW.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||sW.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[MTe],t.disableWarnings=!!process.env[FTe],t.TAG="ApplicationInsights:",t}();aW.exports=UTe});var AI=k(wI=>{"use strict";Object.defineProperty(wI,"__esModule",{value:!0});wI.JsonConfig=void 0;var BTe=require("fs"),II=require("path"),ML=Jr(),qTe="APPLICATIONINSIGHTS_CONFIGURATION_FILE",HTe="APPLICATIONINSIGHTS_CONNECTION_STRING",cW="APPSETTING_",lW="APPINSIGHTS_INSTRUMENTATIONKEY",uW="APPINSIGHTS_INSTRUMENTATION_KEY",jTe="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",GTe="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",VTe="http_proxy",zTe="https_proxy",$Te="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",WTe="APPLICATION_INSIGHTS_NO_STATSBEAT",KTe="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",YTe="APPLICATION_INSIGHTS_NO_PATCH_MODULES",QTe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",XTe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",JTe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",ZTe="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",eSe="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",tSe=function(){function t(){this.connectionString=process.env[HTe],this.instrumentationKey=process.env[lW]||process.env[cW+lW]||process.env[uW]||process.env[cW+uW],!this.connectionString&&this.instrumentationKey&&ML.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[GTe],this.extendedMetricDisablers=process.env[jTe],this.proxyHttpUrl=process.env[VTe],this.proxyHttpsUrl=process.env[zTe],this.noDiagnosticChannel=!!process.env[$Te],this.disableStatsbeat=!!process.env[WTe],this.noHttpAgentKeepAlive=!!process.env[KTe],this.noPatchModules=process.env[YTe]||"",this.enableWebInstrumentation=!!process.env[QTe]||!!process.env[ZTe],this.webInstrumentationSrc=process.env[JTe]||"",this.webInstrumentationConnectionString=process.env[XTe]||process.env[eSe]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r="{}";if(r)e=r;else{var n="applicationinsights.json",i=II.join(__dirname,"../../"),o=II.join(i,n),s=process.env[qTe];s&&(II.isAbsolute(s)?o=s:o=II.join(i,s));try{e=BTe.readFileSync(o,"utf8")}catch(l){ML.warn("Failed to read JSON config file: ",l)}}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(l){ML.warn("Invalid JSON config file: ",l)}},t}();wI.JsonConfig=tSe});var Zx=k((BXe,pW)=>{var rSe="2.0.0",nSe=Number.MAX_SAFE_INTEGER||9007199254740991,iSe=16,oSe=256-6,sSe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];pW.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:iSe,MAX_SAFE_BUILD_LENGTH:oSe,MAX_SAFE_INTEGER:nSe,RELEASE_TYPES:sSe,SEMVER_SPEC_VERSION:rSe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var eb=k((qXe,dW)=>{var aSe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};dW.exports=aSe});var N0=k((Qu,fW)=>{var{MAX_SAFE_COMPONENT_LENGTH:FL,MAX_SAFE_BUILD_LENGTH:cSe,MAX_LENGTH:lSe}=Zx(),uSe=eb();Qu=fW.exports={};var pSe=Qu.re=[],dSe=Qu.safeRe=[],nt=Qu.src=[],it=Qu.t={},fSe=0,UL="[a-zA-Z0-9-]",mSe=[["\\s",1],["\\d",lSe],[UL,cSe]],hSe=t=>{for(let[e,r]of mSe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Mt=(t,e,r)=>{let n=hSe(e),i=fSe++;uSe(t,i,e),it[t]=i,nt[i]=e,pSe[i]=new RegExp(e,r?"g":void 0),dSe[i]=new RegExp(n,r?"g":void 0)};Mt("NUMERICIDENTIFIER","0|[1-9]\\d*");Mt("NUMERICIDENTIFIERLOOSE","\\d+");Mt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${UL}*`);Mt("MAINVERSION",`(${nt[it.NUMERICIDENTIFIER]})\\.(${nt[it.NUMERICIDENTIFIER]})\\.(${nt[it.NUMERICIDENTIFIER]})`);Mt("MAINVERSIONLOOSE",`(${nt[it.NUMERICIDENTIFIERLOOSE]})\\.(${nt[it.NUMERICIDENTIFIERLOOSE]})\\.(${nt[it.NUMERICIDENTIFIERLOOSE]})`);Mt("PRERELEASEIDENTIFIER",`(?:${nt[it.NUMERICIDENTIFIER]}|${nt[it.NONNUMERICIDENTIFIER]})`);Mt("PRERELEASEIDENTIFIERLOOSE",`(?:${nt[it.NUMERICIDENTIFIERLOOSE]}|${nt[it.NONNUMERICIDENTIFIER]})`);Mt("PRERELEASE",`(?:-(${nt[it.PRERELEASEIDENTIFIER]}(?:\\.${nt[it.PRERELEASEIDENTIFIER]})*))`);Mt("PRERELEASELOOSE",`(?:-?(${nt[it.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${nt[it.PRERELEASEIDENTIFIERLOOSE]})*))`);Mt("BUILDIDENTIFIER",`${UL}+`);Mt("BUILD",`(?:\\+(${nt[it.BUILDIDENTIFIER]}(?:\\.${nt[it.BUILDIDENTIFIER]})*))`);Mt("FULLPLAIN",`v?${nt[it.MAINVERSION]}${nt[it.PRERELEASE]}?${nt[it.BUILD]}?`);Mt("FULL",`^${nt[it.FULLPLAIN]}$`);Mt("LOOSEPLAIN",`[v=\\s]*${nt[it.MAINVERSIONLOOSE]}${nt[it.PRERELEASELOOSE]}?${nt[it.BUILD]}?`);Mt("LOOSE",`^${nt[it.LOOSEPLAIN]}$`);Mt("GTLT","((?:<|>)?=?)");Mt("XRANGEIDENTIFIERLOOSE",`${nt[it.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Mt("XRANGEIDENTIFIER",`${nt[it.NUMERICIDENTIFIER]}|x|X|\\*`);Mt("XRANGEPLAIN",`[v=\\s]*(${nt[it.XRANGEIDENTIFIER]})(?:\\.(${nt[it.XRANGEIDENTIFIER]})(?:\\.(${nt[it.XRANGEIDENTIFIER]})(?:${nt[it.PRERELEASE]})?${nt[it.BUILD]}?)?)?`);Mt("XRANGEPLAINLOOSE",`[v=\\s]*(${nt[it.XRANGEIDENTIFIERLOOSE]})(?:\\.(${nt[it.XRANGEIDENTIFIERLOOSE]})(?:\\.(${nt[it.XRANGEIDENTIFIERLOOSE]})(?:${nt[it.PRERELEASELOOSE]})?${nt[it.BUILD]}?)?)?`);Mt("XRANGE",`^${nt[it.GTLT]}\\s*${nt[it.XRANGEPLAIN]}$`);Mt("XRANGELOOSE",`^${nt[it.GTLT]}\\s*${nt[it.XRANGEPLAINLOOSE]}$`);Mt("COERCE",`(^|[^\\d])(\\d{1,${FL}})(?:\\.(\\d{1,${FL}}))?(?:\\.(\\d{1,${FL}}))?(?:$|[^\\d])`);Mt("COERCERTL",nt[it.COERCE],!0);Mt("LONETILDE","(?:~>?)");Mt("TILDETRIM",`(\\s*)${nt[it.LONETILDE]}\\s+`,!0);Qu.tildeTrimReplace="$1~";Mt("TILDE",`^${nt[it.LONETILDE]}${nt[it.XRANGEPLAIN]}$`);Mt("TILDELOOSE",`^${nt[it.LONETILDE]}${nt[it.XRANGEPLAINLOOSE]}$`);Mt("LONECARET","(?:\\^)");Mt("CARETTRIM",`(\\s*)${nt[it.LONECARET]}\\s+`,!0);Qu.caretTrimReplace="$1^";Mt("CARET",`^${nt[it.LONECARET]}${nt[it.XRANGEPLAIN]}$`);Mt("CARETLOOSE",`^${nt[it.LONECARET]}${nt[it.XRANGEPLAINLOOSE]}$`);Mt("COMPARATORLOOSE",`^${nt[it.GTLT]}\\s*(${nt[it.LOOSEPLAIN]})$|^$`);Mt("COMPARATOR",`^${nt[it.GTLT]}\\s*(${nt[it.FULLPLAIN]})$|^$`);Mt("COMPARATORTRIM",`(\\s*)${nt[it.GTLT]}\\s*(${nt[it.LOOSEPLAIN]}|${nt[it.XRANGEPLAIN]})`,!0);Qu.comparatorTrimReplace="$1$2$3";Mt("HYPHENRANGE",`^\\s*(${nt[it.XRANGEPLAIN]})\\s+-\\s+(${nt[it.XRANGEPLAIN]})\\s*$`);Mt("HYPHENRANGELOOSE",`^\\s*(${nt[it.XRANGEPLAINLOOSE]})\\s+-\\s+(${nt[it.XRANGEPLAINLOOSE]})\\s*$`);Mt("STAR","(<|>)?=?\\s*\\*");Mt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Mt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var RI=k((HXe,mW)=>{var gSe=Object.freeze({loose:!0}),vSe=Object.freeze({}),_Se=t=>t?typeof t!="object"?gSe:t:vSe;mW.exports=_Se});var BL=k((jXe,vW)=>{var hW=/^[0-9]+$/,gW=(t,e)=>{let r=hW.test(t),n=hW.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},ySe=(t,e)=>gW(e,t);vW.exports={compareIdentifiers:gW,rcompareIdentifiers:ySe}});var _o=k((GXe,bW)=>{var DI=eb(),{MAX_LENGTH:_W,MAX_SAFE_INTEGER:PI}=Zx(),{safeRe:yW,t:xW}=N0(),xSe=RI(),{compareIdentifiers:k0}=BL(),qL=class t{constructor(e,r){if(r=xSe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>_W)throw new TypeError(`version is longer than ${_W} characters`);DI("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?yW[xW.LOOSE]:yW[xW.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>PI||this.major<0)throw new TypeError("Invalid major version");if(this.minor>PI||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>PI||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<PI)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(DI("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),k0(this.major,e.major)||k0(this.minor,e.minor)||k0(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(DI("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return k0(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(DI("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return k0(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),k0(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};bW.exports=qL});var Uh=k((VXe,TW)=>{var EW=_o(),bSe=(t,e,r=!1)=>{if(t instanceof EW)return t;try{return new EW(t,e)}catch(n){if(!r)return null;throw n}};TW.exports=bSe});var CW=k((zXe,SW)=>{var ESe=Uh(),TSe=(t,e)=>{let r=ESe(t,e);return r?r.version:null};SW.exports=TSe});var wW=k(($Xe,IW)=>{var SSe=Uh(),CSe=(t,e)=>{let r=SSe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};IW.exports=CSe});var DW=k((WXe,RW)=>{var AW=_o(),ISe=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new AW(t instanceof AW?t.version:t,r).inc(e,n,i).version}catch{return null}};RW.exports=ISe});var kW=k((KXe,NW)=>{var PW=Uh(),wSe=(t,e)=>{let r=PW(t,null,!0),n=PW(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,l=!!s.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};NW.exports=wSe});var LW=k((YXe,OW)=>{var ASe=_o(),RSe=(t,e)=>new ASe(t,e).major;OW.exports=RSe});var FW=k((QXe,MW)=>{var DSe=_o(),PSe=(t,e)=>new DSe(t,e).minor;MW.exports=PSe});var BW=k((XXe,UW)=>{var NSe=_o(),kSe=(t,e)=>new NSe(t,e).patch;UW.exports=kSe});var HW=k((JXe,qW)=>{var OSe=Uh(),LSe=(t,e)=>{let r=OSe(t,e);return r&&r.prerelease.length?r.prerelease:null};qW.exports=LSe});var Aa=k((ZXe,GW)=>{var jW=_o(),MSe=(t,e,r)=>new jW(t,r).compare(new jW(e,r));GW.exports=MSe});var zW=k((eJe,VW)=>{var FSe=Aa(),USe=(t,e,r)=>FSe(e,t,r);VW.exports=USe});var WW=k((tJe,$W)=>{var BSe=Aa(),qSe=(t,e)=>BSe(t,e,!0);$W.exports=qSe});var NI=k((rJe,YW)=>{var KW=_o(),HSe=(t,e,r)=>{let n=new KW(t,r),i=new KW(e,r);return n.compare(i)||n.compareBuild(i)};YW.exports=HSe});var XW=k((nJe,QW)=>{var jSe=NI(),GSe=(t,e)=>t.sort((r,n)=>jSe(r,n,e));QW.exports=GSe});var ZW=k((iJe,JW)=>{var VSe=NI(),zSe=(t,e)=>t.sort((r,n)=>VSe(n,r,e));JW.exports=zSe});var tb=k((oJe,eK)=>{var $Se=Aa(),WSe=(t,e,r)=>$Se(t,e,r)>0;eK.exports=WSe});var kI=k((sJe,tK)=>{var KSe=Aa(),YSe=(t,e,r)=>KSe(t,e,r)<0;tK.exports=YSe});var HL=k((aJe,rK)=>{var QSe=Aa(),XSe=(t,e,r)=>QSe(t,e,r)===0;rK.exports=XSe});var jL=k((cJe,nK)=>{var JSe=Aa(),ZSe=(t,e,r)=>JSe(t,e,r)!==0;nK.exports=ZSe});var OI=k((lJe,iK)=>{var eCe=Aa(),tCe=(t,e,r)=>eCe(t,e,r)>=0;iK.exports=tCe});var LI=k((uJe,oK)=>{var rCe=Aa(),nCe=(t,e,r)=>rCe(t,e,r)<=0;oK.exports=nCe});var GL=k((pJe,sK)=>{var iCe=HL(),oCe=jL(),sCe=tb(),aCe=OI(),cCe=kI(),lCe=LI(),uCe=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return iCe(t,r,n);case"!=":return oCe(t,r,n);case">":return sCe(t,r,n);case">=":return aCe(t,r,n);case"<":return cCe(t,r,n);case"<=":return lCe(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};sK.exports=uCe});var cK=k((dJe,aK)=>{var pCe=_o(),dCe=Uh(),{safeRe:MI,t:FI}=N0(),fCe=(t,e)=>{if(t instanceof pCe)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(MI[FI.COERCE]);else{let n;for(;(n=MI[FI.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),MI[FI.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;MI[FI.COERCERTL].lastIndex=-1}return r===null?null:dCe(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};aK.exports=fCe});var uK=k((fJe,lK)=>{"use strict";lK.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var dK=k((mJe,pK)=>{"use strict";pK.exports=dr;dr.Node=Bh;dr.create=dr;function dr(t){var e=this;if(e instanceof dr||(e=new dr),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}dr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};dr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};dr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};dr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)hCe(this,arguments[t]);return this.length};dr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)gCe(this,arguments[t]);return this.length};dr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};dr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};dr.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};dr.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};dr.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};dr.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};dr.prototype.map=function(t,e){e=e||this;for(var r=new dr,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};dr.prototype.mapReverse=function(t,e){e=e||this;for(var r=new dr,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};dr.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};dr.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};dr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};dr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};dr.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new dr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};dr.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new dr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};dr.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=mCe(this,i,r[n]);return o};dr.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function mCe(t,e,r){var n=e===t.head?new Bh(r,null,e,t):new Bh(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function hCe(t,e){t.tail=new Bh(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function gCe(t,e){t.head=new Bh(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Bh(t,e,r,n){if(!(this instanceof Bh))return new Bh(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{uK()(dr)}catch{}});var vK=k((hJe,gK)=>{"use strict";var vCe=dK(),qh=Symbol("max"),Ju=Symbol("length"),O0=Symbol("lengthCalculator"),nb=Symbol("allowStale"),Hh=Symbol("maxAge"),Xu=Symbol("dispose"),fK=Symbol("noDisposeOnSet"),Pi=Symbol("lruList"),Tc=Symbol("cache"),hK=Symbol("updateAgeOnGet"),VL=()=>1,$L=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[qh]=e.max||1/0,n=e.length||VL;if(this[O0]=typeof n!="function"?VL:n,this[nb]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Hh]=e.maxAge||0,this[Xu]=e.dispose,this[fK]=e.noDisposeOnSet||!1,this[hK]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[qh]=e||1/0,rb(this)}get max(){return this[qh]}set allowStale(e){this[nb]=!!e}get allowStale(){return this[nb]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Hh]=e,rb(this)}get maxAge(){return this[Hh]}set lengthCalculator(e){typeof e!="function"&&(e=VL),e!==this[O0]&&(this[O0]=e,this[Ju]=0,this[Pi].forEach(r=>{r.length=this[O0](r.value,r.key),this[Ju]+=r.length})),rb(this)}get lengthCalculator(){return this[O0]}get length(){return this[Ju]}get itemCount(){return this[Pi].length}rforEach(e,r){r=r||this;for(let n=this[Pi].tail;n!==null;){let i=n.prev;mK(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[Pi].head;n!==null;){let i=n.next;mK(this,e,n,r),n=i}}keys(){return this[Pi].toArray().map(e=>e.key)}values(){return this[Pi].toArray().map(e=>e.value)}reset(){this[Xu]&&this[Pi]&&this[Pi].length&&this[Pi].forEach(e=>this[Xu](e.key,e.value)),this[Tc]=new Map,this[Pi]=new vCe,this[Ju]=0}dump(){return this[Pi].map(e=>UI(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Pi]}set(e,r,n){if(n=n||this[Hh],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[O0](r,e);if(this[Tc].has(e)){if(o>this[qh])return L0(this,this[Tc].get(e)),!1;let l=this[Tc].get(e).value;return this[Xu]&&(this[fK]||this[Xu](e,l.value)),l.now=i,l.maxAge=n,l.value=r,this[Ju]+=o-l.length,l.length=o,this.get(e),rb(this),!0}let s=new WL(e,r,o,i,n);return s.length>this[qh]?(this[Xu]&&this[Xu](e,r),!1):(this[Ju]+=s.length,this[Pi].unshift(s),this[Tc].set(e,this[Pi].head),rb(this),!0)}has(e){if(!this[Tc].has(e))return!1;let r=this[Tc].get(e).value;return!UI(this,r)}get(e){return zL(this,e,!0)}peek(e){return zL(this,e,!1)}pop(){let e=this[Pi].tail;return e?(L0(this,e),e.value):null}del(e){L0(this,this[Tc].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Tc].forEach((e,r)=>zL(this,r,!1))}},zL=(t,e,r)=>{let n=t[Tc].get(e);if(n){let i=n.value;if(UI(t,i)){if(L0(t,n),!t[nb])return}else r&&(t[hK]&&(n.value.now=Date.now()),t[Pi].unshiftNode(n));return i.value}},UI=(t,e)=>{if(!e||!e.maxAge&&!t[Hh])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Hh]&&r>t[Hh]},rb=t=>{if(t[Ju]>t[qh])for(let e=t[Pi].tail;t[Ju]>t[qh]&&e!==null;){let r=e.prev;L0(t,e),e=r}},L0=(t,e)=>{if(e){let r=e.value;t[Xu]&&t[Xu](r.key,r.value),t[Ju]-=r.length,t[Tc].delete(r.key),t[Pi].removeNode(e)}},WL=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},mK=(t,e,r,n)=>{let i=r.value;UI(t,i)&&(L0(t,r),t[nb]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};gK.exports=$L});var Ra=k((gJe,bK)=>{var KL=class t{constructor(e,r){if(r=yCe(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof YL)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!yK(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&ICe(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&SCe)|(this.options.loose&&CCe))+":"+e,i=_K.get(n);if(i)return i;let o=this.options.loose,s=o?vs[Vo.HYPHENRANGELOOSE]:vs[Vo.HYPHENRANGE];e=e.replace(s,MCe(this.options.includePrerelease)),Zr("hyphen replace",e),e=e.replace(vs[Vo.COMPARATORTRIM],bCe),Zr("comparator trim",e),e=e.replace(vs[Vo.TILDETRIM],ECe),Zr("tilde trim",e),e=e.replace(vs[Vo.CARETTRIM],TCe),Zr("caret trim",e);let a=e.split(" ").map(p=>wCe(p,this.options)).join(" ").split(/\s+/).map(p=>LCe(p,this.options));o&&(a=a.filter(p=>(Zr("loose invalid filter",p,this.options),!!p.match(vs[Vo.COMPARATORLOOSE])))),Zr("range list",a);let l=new Map,c=a.map(p=>new YL(p,this.options));for(let p of c){if(yK(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return _K.set(n,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>xK(n,r)&&e.set.some(i=>xK(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new xCe(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(FCe(this.set[r],e,this.options))return!0;return!1}};bK.exports=KL;var _Ce=vK(),_K=new _Ce({max:1e3}),yCe=RI(),YL=ib(),Zr=eb(),xCe=_o(),{safeRe:vs,t:Vo,comparatorTrimReplace:bCe,tildeTrimReplace:ECe,caretTrimReplace:TCe}=N0(),{FLAG_INCLUDE_PRERELEASE:SCe,FLAG_LOOSE:CCe}=Zx(),yK=t=>t.value==="<0.0.0-0",ICe=t=>t.value==="",xK=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},wCe=(t,e)=>(Zr("comp",t,e),t=DCe(t,e),Zr("caret",t),t=ACe(t,e),Zr("tildes",t),t=NCe(t,e),Zr("xrange",t),t=OCe(t,e),Zr("stars",t),t),zo=t=>!t||t.toLowerCase()==="x"||t==="*",ACe=(t,e)=>t.trim().split(/\s+/).map(r=>RCe(r,e)).join(" "),RCe=(t,e)=>{let r=e.loose?vs[Vo.TILDELOOSE]:vs[Vo.TILDE];return t.replace(r,(n,i,o,s,a)=>{Zr("tilde",t,n,i,o,s,a);let l;return zo(i)?l="":zo(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:zo(s)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Zr("replaceTilde pr",a),l=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Zr("tilde return",l),l})},DCe=(t,e)=>t.trim().split(/\s+/).map(r=>PCe(r,e)).join(" "),PCe=(t,e)=>{Zr("caret",t,e);let r=e.loose?vs[Vo.CARETLOOSE]:vs[Vo.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,l)=>{Zr("caret",t,i,o,s,a,l);let c;return zo(o)?c="":zo(s)?c=`>=${o}.0.0${n} <${+o+1}.0.0-0`:zo(a)?o==="0"?c=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:l?(Zr("replaceCaret pr",l),o==="0"?s==="0"?c=`>=${o}.${s}.${a}-${l} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}-${l} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a}-${l} <${+o+1}.0.0-0`):(Zr("no pr"),o==="0"?s==="0"?c=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Zr("caret return",c),c})},NCe=(t,e)=>(Zr("replaceXRanges",t,e),t.split(/\s+/).map(r=>kCe(r,e)).join(" ")),kCe=(t,e)=>{t=t.trim();let r=e.loose?vs[Vo.XRANGELOOSE]:vs[Vo.XRANGE];return t.replace(r,(n,i,o,s,a,l)=>{Zr("xRange",t,n,i,o,s,a,l);let c=zo(o),u=c||zo(s),p=u||zo(a),d=p;return i==="="&&d&&(i=""),l=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(l="-0"),n=`${i+o}.${s}.${a}${l}`):u?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${s}.0${l} <${o}.${+s+1}.0-0`),Zr("xRange return",n),n})},OCe=(t,e)=>(Zr("replaceStars",t,e),t.trim().replace(vs[Vo.STAR],"")),LCe=(t,e)=>(Zr("replaceGTE0",t,e),t.trim().replace(vs[e.includePrerelease?Vo.GTE0PRE:Vo.GTE0],"")),MCe=t=>(e,r,n,i,o,s,a,l,c,u,p,d,f)=>(zo(n)?r="":zo(i)?r=`>=${n}.0.0${t?"-0":""}`:zo(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,zo(c)?l="":zo(u)?l=`<${+c+1}.0.0-0`:zo(p)?l=`<${c}.${+u+1}.0-0`:d?l=`<=${c}.${u}.${p}-${d}`:t?l=`<${c}.${u}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),FCe=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Zr(t[n].semver),t[n].semver!==YL.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ib=k((vJe,wK)=>{var ob=Symbol("SemVer ANY"),JL=class t{static get ANY(){return ob}constructor(e,r){if(r=EK(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),XL("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ob?this.value="":this.value=this.operator+this.semver.version,XL("comp",this)}parse(e){let r=this.options.loose?TK[SK.COMPARATORLOOSE]:TK[SK.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new CK(n[2],this.options.loose):this.semver=ob}toString(){return this.value}test(e){if(XL("Comparator.test",e,this.options.loose),this.semver===ob||e===ob)return!0;if(typeof e=="string")try{e=new CK(e,this.options)}catch{return!1}return QL(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new IK(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new IK(this.value,r).test(e.semver):(r=EK(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||QL(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||QL(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};wK.exports=JL;var EK=RI(),{safeRe:TK,t:SK}=N0(),QL=GL(),XL=eb(),CK=_o(),IK=Ra()});var sb=k((_Je,AK)=>{var UCe=Ra(),BCe=(t,e,r)=>{try{e=new UCe(e,r)}catch{return!1}return e.test(t)};AK.exports=BCe});var DK=k((yJe,RK)=>{var qCe=Ra(),HCe=(t,e)=>new qCe(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));RK.exports=HCe});var NK=k((xJe,PK)=>{var jCe=_o(),GCe=Ra(),VCe=(t,e,r)=>{let n=null,i=null,o=null;try{o=new GCe(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new jCe(n,r))}),n};PK.exports=VCe});var OK=k((bJe,kK)=>{var zCe=_o(),$Ce=Ra(),WCe=(t,e,r)=>{let n=null,i=null,o=null;try{o=new $Ce(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new zCe(n,r))}),n};kK.exports=WCe});var FK=k((EJe,MK)=>{var ZL=_o(),KCe=Ra(),LK=tb(),YCe=(t,e)=>{t=new KCe(t,e);let r=new ZL("0.0.0");if(t.test(r)||(r=new ZL("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new ZL(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||LK(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||LK(r,o))&&(r=o)}return r&&t.test(r)?r:null};MK.exports=YCe});var BK=k((TJe,UK)=>{var QCe=Ra(),XCe=(t,e)=>{try{return new QCe(t,e).range||"*"}catch{return null}};UK.exports=XCe});var BI=k((SJe,GK)=>{var JCe=_o(),jK=ib(),{ANY:ZCe}=jK,eIe=Ra(),tIe=sb(),qK=tb(),HK=kI(),rIe=LI(),nIe=OI(),iIe=(t,e,r,n)=>{t=new JCe(t,n),e=new eIe(e,n);let i,o,s,a,l;switch(r){case">":i=qK,o=rIe,s=HK,a=">",l=">=";break;case"<":i=HK,o=nIe,s=qK,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(tIe(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let u=e.set[c],p=null,d=null;if(u.forEach(f=>{f.semver===ZCe&&(f=new jK(">=0.0.0")),p=p||f,d=d||f,i(f.semver,p.semver,n)?p=f:s(f.semver,d.semver,n)&&(d=f)}),p.operator===a||p.operator===l||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===l&&s(t,d.semver))return!1}return!0};GK.exports=iIe});var zK=k((CJe,VK)=>{var oIe=BI(),sIe=(t,e,r)=>oIe(t,e,">",r);VK.exports=sIe});var WK=k((IJe,$K)=>{var aIe=BI(),cIe=(t,e,r)=>aIe(t,e,"<",r);$K.exports=cIe});var QK=k((wJe,YK)=>{var KK=Ra(),lIe=(t,e,r)=>(t=new KK(t,r),e=new KK(e,r),t.intersects(e,r));YK.exports=lIe});var JK=k((AJe,XK)=>{var uIe=sb(),pIe=Aa();XK.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,p)=>pIe(u,p,r));for(let u of s)uIe(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,p]of n)u===p?a.push(u):!p&&u===s[0]?a.push("*"):p?u===s[0]?a.push(`<=${p}`):a.push(`${u} - ${p}`):a.push(`>=${u}`);let l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e}});var iY=k((RJe,nY)=>{var ZK=Ra(),t5=ib(),{ANY:e5}=t5,ab=sb(),r5=Aa(),dIe=(t,e,r={})=>{if(t===e)return!0;t=new ZK(t,r),e=new ZK(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=mIe(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},fIe=[new t5(">=0.0.0-0")],eY=[new t5(">=0.0.0")],mIe=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===e5){if(e.length===1&&e[0].semver===e5)return!0;r.includePrerelease?t=fIe:t=eY}if(e.length===1&&e[0].semver===e5){if(r.includePrerelease)return!0;e=eY}let n=new Set,i,o;for(let f of t)f.operator===">"||f.operator===">="?i=tY(i,f,r):f.operator==="<"||f.operator==="<="?o=rY(o,f,r):n.add(f.semver);if(n.size>1)return null;let s;if(i&&o){if(s=r5(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of n){if(i&&!ab(f,String(i),r)||o&&!ab(f,String(o),r))return null;for(let m of e)if(!ab(f,String(m),r))return!1;return!0}let a,l,c,u,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator===">"||f.operator===">="){if(a=tY(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!ab(i.semver,String(f),r))return!1}if(o){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator==="<"||f.operator==="<="){if(l=rY(o,f,r),l===f&&l!==o)return!1}else if(o.operator==="<="&&!ab(o.semver,String(f),r))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&c&&!o&&s!==0||o&&u&&!i&&s!==0||d||p)},tY=(t,e,r)=>{if(!t)return e;let n=r5(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},rY=(t,e,r)=>{if(!t)return e;let n=r5(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};nY.exports=dIe});var cY=k((DJe,aY)=>{var n5=N0(),oY=Zx(),hIe=_o(),sY=BL(),gIe=Uh(),vIe=CW(),_Ie=wW(),yIe=DW(),xIe=kW(),bIe=LW(),EIe=FW(),TIe=BW(),SIe=HW(),CIe=Aa(),IIe=zW(),wIe=WW(),AIe=NI(),RIe=XW(),DIe=ZW(),PIe=tb(),NIe=kI(),kIe=HL(),OIe=jL(),LIe=OI(),MIe=LI(),FIe=GL(),UIe=cK(),BIe=ib(),qIe=Ra(),HIe=sb(),jIe=DK(),GIe=NK(),VIe=OK(),zIe=FK(),$Ie=BK(),WIe=BI(),KIe=zK(),YIe=WK(),QIe=QK(),XIe=JK(),JIe=iY();aY.exports={parse:gIe,valid:vIe,clean:_Ie,inc:yIe,diff:xIe,major:bIe,minor:EIe,patch:TIe,prerelease:SIe,compare:CIe,rcompare:IIe,compareLoose:wIe,compareBuild:AIe,sort:RIe,rsort:DIe,gt:PIe,lt:NIe,eq:kIe,neq:OIe,gte:LIe,lte:MIe,cmp:FIe,coerce:UIe,Comparator:BIe,Range:qIe,satisfies:HIe,toComparators:jIe,maxSatisfying:GIe,minSatisfying:VIe,minVersion:zIe,validRange:$Ie,outside:WIe,gtr:KIe,ltr:YIe,intersects:QIe,simplifyRange:XIe,subset:JIe,SemVer:hIe,re:n5.re,src:n5.src,tokens:n5.t,SEMVER_SPEC_VERSION:oY.SEMVER_SPEC_VERSION,RELEASE_TYPES:oY.RELEASE_TYPES,compareIdentifiers:sY.compareIdentifiers,rcompareIdentifiers:sY.rcompareIdentifiers}});var i5=k(qI=>{"use strict";Object.defineProperty(qI,"__esModule",{value:!0});qI.makePatchingRequire=void 0;var ZIe=require("path"),ewe=cY(),lY=Nn(),pY=require("module"),twe=Object.keys(process.binding("natives")),uY=pY.prototype.require;function rwe(t){var e={};return function(n){var i=uY.apply(this,arguments);if(t[n]){var o=pY._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(twe.indexOf(n)<0)try{s=uY.call(this,ZIe.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var l=i,c=0,u=t[n];c<u.length;c++){var p=u[c];if(ewe.satisfies(s,p.versionSpecifier)&&(l=p.patch(l,o),lY.channel)){var d=p.publisherName||n;lY.channel.addPatchedModule(d,s)}}return e[o]=l}return i}}qI.makePatchingRequire=rwe});var dY=k((NJe,nwe)=>{nwe.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var Nn=k(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.channel=Da.ContextPreservingEventEmitter=Da.trueFilter=Da.makePatchingRequire=void 0;var iwe=i5(),owe=i5();Object.defineProperty(Da,"makePatchingRequire",{enumerable:!0,get:function(){return owe.makePatchingRequire}});var swe=function(t){return!0};Da.trueFilter=swe;var mY=function(){function t(){this.version=dY().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,i){n===void 0&&(n=Da.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(e);o&&i&&i(o.name,o.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=Da.trueFilter);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,i=this.modulesPatched;n<i.length;n++){var o=i[n];if(o.name===e)return}this.modulesPatched.push({name:e,version:r});var s=this.subscribers[e];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var i=n[r];if(i.name===e)return i}return null},t}();Da.ContextPreservingEventEmitter=mY;global.diagnosticsSource||(global.diagnosticsSource=new mY,fY=require("module"),fY.prototype.require=iwe.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var fY;Da.channel=global.diagnosticsSource});var hY,gY=I(()=>{hY=typeof globalThis=="object"?globalThis:global});var vY=I(()=>{gY()});var _Y=I(()=>{vY()});var Zu,o5=I(()=>{Zu="1.6.0"});function awe(t){var e=new Set([t]),r=new Set,n=t.match(yY);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(l){return l===t};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(l){if(e.has(l))return!0;if(r.has(l))return!1;var c=l.match(yY);if(!c)return o(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||i.major!==u.major?o(l):i.major===0?i.minor===u.minor&&i.patch<=u.patch?s(l):o(l):i.minor<=u.minor?s(l):o(l)}}var yY,xY,bY=I(()=>{o5();yY=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;xY=awe(Zu)});function _l(t,e,r,n){var i;n===void 0&&(n=!1);var o=lb[cb]=(i=lb[cb])!==null&&i!==void 0?i:{version:Zu};if(!n&&o[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(o.version!==Zu){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+Zu);return r.error(s.stack||s.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Zu+"."),!0}function Xs(t){var e,r,n=(e=lb[cb])===null||e===void 0?void 0:e.version;if(!(!n||!xY(n)))return(r=lb[cb])===null||r===void 0?void 0:r[t]}function yl(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Zu+".");var r=lb[cb];r&&delete r[t]}var cwe,cb,lb,jh=I(()=>{_Y();o5();bY();cwe=Zu.split(".")[0],cb=Symbol.for("opentelemetry.js.api."+cwe),lb=hY});function ub(t,e,r){var n=Xs("diag");if(n)return r.unshift(e),n[t].apply(n,uwe([],lwe(r),!1))}var lwe,uwe,EY,TY=I(()=>{jh();lwe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},uwe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},EY=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ub("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ub("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ub("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ub("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ub("verbose",this._namespace,e)},t}()});var Hr,HI=I(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Hr||(Hr={}))});function SY(t,e){t<Hr.NONE?t=Hr.NONE:t>Hr.ALL&&(t=Hr.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",Hr.ERROR),warn:r("warn",Hr.WARN),info:r("info",Hr.INFO),debug:r("debug",Hr.DEBUG),verbose:r("verbose",Hr.VERBOSE)}}var CY=I(()=>{HI()});var pwe,dwe,fwe,yo,Gh=I(()=>{TY();CY();HI();jh();pwe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},dwe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},fwe="diag",yo=function(){function t(){function e(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=Xs("diag");if(a)return a[i].apply(a,dwe([],pwe(o),!1))}}var r=this,n=function(i,o){var s,a,l;if(o===void 0&&(o={logLevel:Hr.INFO}),i===r){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof o=="number"&&(o={logLevel:o});var u=Xs("diag"),p=SY((a=o.logLevel)!==null&&a!==void 0?a:Hr.INFO,i);if(u&&!o.suppressOverrideMessage){var d=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),p.warn("Current logger will overwrite one already registered from "+d)}return _l("diag",p,r,!0)};r.setLogger=n,r.disable=function(){yl(fwe,r)},r.createComponentLogger=function(i){return new EY(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}()});var mwe,hwe,IY,wY=I(()=>{mwe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},hwe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IY=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=mwe(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var s=hwe(n),a=s.next();!a.done;a=s.next()){var l=a.value;o._entries.delete(l)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}()});var AY,RY=I(()=>{AY=Symbol("BaggageEntryMetadata")});function DY(t){return t===void 0&&(t={}),new IY(new Map(Object.entries(t)))}function jI(t){return typeof t!="string"&&(gwe.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:AY,toString:function(){return t}}}var gwe,s5=I(()=>{Gh();wY();RY();gwe=yo.instance()});function xl(t){return Symbol.for(t)}var vwe,GI,pb=I(()=>{vwe=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),GI=new vwe});var a5,PY,NY=I(()=>{a5=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],PY=function(){function t(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[n];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var r=0;r<a5.length;r++)this[a5[r].n]=e(a5[r].c)}return t}()});function kY(){return u5}var M0,_we,c5,ywe,xwe,bwe,l5,Ewe,Twe,Swe,u5,Cwe,Iwe,wwe,Awe,Rwe,Dwe,p5=I(()=>{M0=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_we=function(){function t(){}return t.prototype.createHistogram=function(e,r){return Iwe},t.prototype.createCounter=function(e,r){return Cwe},t.prototype.createUpDownCounter=function(e,r){return wwe},t.prototype.createObservableGauge=function(e,r){return Rwe},t.prototype.createObservableCounter=function(e,r){return Awe},t.prototype.createObservableUpDownCounter=function(e,r){return Dwe},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),c5=function(){function t(){}return t}(),ywe=function(t){M0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(c5),xwe=function(t){M0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(c5),bwe=function(t){M0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(c5),l5=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),Ewe=function(t){M0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(l5),Twe=function(t){M0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(l5),Swe=function(t){M0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(l5),u5=new _we,Cwe=new ywe,Iwe=new bwe,wwe=new xwe,Awe=new Ewe,Rwe=new Twe,Dwe=new Swe});var VI,OY=I(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(VI||(VI={}))});var zI,$I,d5=I(()=>{zI={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},$I={set:function(t,e,r){t!=null&&(t[e]=r)}}});var Pwe,Nwe,LY,MY=I(()=>{pb();Pwe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Nwe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},LY=function(){function t(){}return t.prototype.active=function(){return GI},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,Nwe([n],Pwe(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}()});var kwe,Owe,f5,Lwe,Fd,db=I(()=>{MY();jh();Gh();kwe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Owe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},f5="context",Lwe=new LY,Fd=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return _l(f5,e,yo.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,Owe([e,r,n],kwe(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Xs(f5)||Lwe},t.prototype.disable=function(){this._getContextManager().disable(),yl(f5,yo.instance())},t}()});var Gn,m5=I(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Gn||(Gn={}))});var fb,mb,F0,WI=I(()=>{m5();fb="0000000000000000",mb="00000000000000000000000000000000",F0={traceId:mb,spanId:fb,traceFlags:Gn.NONE}});var Ud,KI=I(()=>{WI();Ud=function(){function t(e){e===void 0&&(e=F0),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}()});function YI(t){return t.getValue(h5)||void 0}function FY(){return YI(Fd.getInstance().active())}function hb(t,e){return t.setValue(h5,e)}function UY(t){return t.deleteValue(h5)}function BY(t,e){return hb(t,new Ud(e))}function QI(t){var e;return(e=YI(t))===null||e===void 0?void 0:e.spanContext()}var h5,g5=I(()=>{pb();KI();db();h5=xl("OpenTelemetry Context Key SPAN")});function Vh(t){return Mwe.test(t)&&t!==mb}function v5(t){return Fwe.test(t)&&t!==fb}function Pa(t){return Vh(t.traceId)&&v5(t.spanId)}function qY(t){return new Ud(t)}var Mwe,Fwe,XI=I(()=>{WI();KI();Mwe=/^([0-9a-f]{32})$/i,Fwe=/^[0-9a-f]{16}$/i});function Uwe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var _5,JI,y5=I(()=>{db();g5();KI();XI();_5=Fd.getInstance(),JI=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=_5.active());var i=!!r?.root;if(i)return new Ud;var o=n&&QI(n);return Uwe(o)&&Pa(o)?new Ud(o):new Ud},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var l=s??_5.active(),c=this.startSpan(e,o,l),u=hb(l,c);return _5.with(u,a,void 0,c)}},t}()});var Bwe,ZI,x5=I(()=>{y5();Bwe=new JI,ZI=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Bwe},t}()});var HY,jY=I(()=>{y5();HY=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new JI},t}()});var qwe,gb,b5=I(()=>{x5();jY();qwe=new HY,gb=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new ZI(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:qwe},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}()});var _s,GY=I(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(_s||(_s={}))});var U0,VY=I(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(U0||(U0={}))});var B0,zY=I(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(B0||(B0={}))});function $Y(t){return Gwe.test(t)}function WY(t){return Vwe.test(t)&&!zwe.test(t)}var E5,Hwe,jwe,Gwe,Vwe,zwe,KY=I(()=>{E5="[_0-9a-z-*/]",Hwe="[a-z]"+E5+"{0,255}",jwe="[a-z0-9]"+E5+"{0,240}@[a-z]"+E5+"{0,13}",Gwe=new RegExp("^(?:"+Hwe+"|"+jwe+")$"),Vwe=/^[ -~]{0,255}[!-~]$/,zwe=/,|=/});var YY,$we,QY,XY,JY,ZY=I(()=>{KY();YY=32,$we=512,QY=",",XY="=",JY=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+XY+e.get(n)),r},[]).join(QY)},t.prototype._parse=function(e){e.length>$we||(this._internalState=e.split(QY).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(XY);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);$Y(s)&&WY(a)&&r.set(s,a)}return r},new Map),this._internalState.size>YY&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,YY))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function eQ(t){return new JY(t)}var tQ=I(()=>{ZY()});var $o,rQ=I(()=>{db();$o=Fd.getInstance()});var at,nQ=I(()=>{Gh();at=yo.instance()});var Wwe,iQ,oQ=I(()=>{p5();Wwe=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return u5},t}(),iQ=new Wwe});var T5,sQ,aQ=I(()=>{oQ();jh();Gh();T5="metrics",sQ=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return _l(T5,e,yo.instance())},t.prototype.getMeterProvider=function(){return Xs(T5)||iQ},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){yl(T5,yo.instance())},t}()});var S5,cQ=I(()=>{aQ();S5=sQ.getInstance()});var lQ,uQ=I(()=>{lQ=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}()});function I5(t){return t.getValue(C5)||void 0}function pQ(){return I5(Fd.getInstance().active())}function dQ(t,e){return t.setValue(C5,e)}function fQ(t){return t.deleteValue(C5)}var C5,mQ=I(()=>{db();pb();C5=xl("OpenTelemetry Baggage Key")});var w5,Kwe,hQ,gQ=I(()=>{jh();uQ();d5();mQ();s5();Gh();w5="propagation",Kwe=new lQ,hQ=function(){function t(){this.createBaggage=DY,this.getBaggage=I5,this.getActiveBaggage=pQ,this.setBaggage=dQ,this.deleteBaggage=fQ}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return _l(w5,e,yo.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=$I),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=zI),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){yl(w5,yo.instance())},t.prototype._getGlobalPropagator=function(){return Xs(w5)||Kwe},t}()});var ep,vQ=I(()=>{gQ();ep=hQ.getInstance()});var A5,_Q,yQ=I(()=>{jh();b5();XI();g5();Gh();A5="trace",_Q=function(){function t(){this._proxyTracerProvider=new gb,this.wrapSpanContext=qY,this.isSpanContextValid=Pa,this.deleteSpan=UY,this.getSpan=YI,this.getActiveSpan=FY,this.getSpanContext=QI,this.setSpan=hb,this.setSpanContext=BY}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=_l(A5,this._proxyTracerProvider,yo.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Xs(A5)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){yl(A5,yo.instance()),this._proxyTracerProvider=new gb},t}()});var _i,xQ=I(()=>{yQ();_i=_Q.getInstance()});var q0={};Ri(q0,{DiagConsoleLogger:()=>PY,DiagLogLevel:()=>Hr,INVALID_SPANID:()=>fb,INVALID_SPAN_CONTEXT:()=>F0,INVALID_TRACEID:()=>mb,ProxyTracer:()=>ZI,ProxyTracerProvider:()=>gb,ROOT_CONTEXT:()=>GI,SamplingDecision:()=>_s,SpanKind:()=>U0,SpanStatusCode:()=>B0,TraceFlags:()=>Gn,ValueType:()=>VI,baggageEntryMetadataFromString:()=>jI,context:()=>$o,createContextKey:()=>xl,createNoopMeter:()=>kY,createTraceState:()=>eQ,default:()=>Ywe,defaultTextMapGetter:()=>zI,defaultTextMapSetter:()=>$I,diag:()=>at,isSpanContextValid:()=>Pa,isValidSpanId:()=>v5,isValidTraceId:()=>Vh,metrics:()=>S5,propagation:()=>ep,trace:()=>_i});var Ywe,Kt=I(()=>{s5();pb();NY();HI();p5();OY();d5();x5();b5();GY();VY();zY();m5();tQ();XI();WI();rQ();nQ();cQ();vQ();xQ();Ywe={context:$o,diag:at,metrics:S5,propagation:ep,trace:_i}});function vb(t){return t.setValue(R5,!0)}function Qwe(t){return t.deleteValue(R5)}function zh(t){return t.getValue(R5)===!0}var R5,_b=I(()=>{Kt();R5=xl("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var bQ,ew,H0,tw,EQ,TQ,SQ,D5=I(()=>{bQ="=",ew=";",H0=",",tw="baggage",EQ=180,TQ=4096,SQ=8192});var k5={};Ri(k5,{getKeyPairs:()=>N5,parseKeyPairsIntoRecord:()=>Jwe,parsePairKeyValue:()=>rw,serializeKeyPairs:()=>P5});function P5(t){return t.reduce(function(e,r){var n=""+e+(e!==""?H0:"")+r;return n.length>SQ?e:n},"")}function N5(t){return t.getAllEntries().map(function(e){var r=Xwe(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=ew+i.metadata.toString()),o})}function rw(t){var e=t.split(ew);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(bQ);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),s;return e.length>0&&(s=jI(e.join(ew))),{key:i,value:o,metadata:s}}}}}function Jwe(t){return typeof t!="string"||t.length===0?{}:t.split(H0).map(function(e){return rw(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var Xwe,O5=I(()=>{Kt();D5();Xwe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});var L5,CQ=I(()=>{Kt();_b();D5();O5();L5=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=ep.getBaggage(e);if(!(!i||zh(e))){var o=N5(i).filter(function(a){return a.length<=TQ}).slice(0,EQ),s=P5(o);s.length>0&&n.set(r,tw,s)}},t.prototype.extract=function(e,r,n){var i=n.get(r,tw),o=Array.isArray(i)?i.join(H0):i;if(!o)return e;var s={};if(o.length===0)return e;var a=o.split(H0);return a.forEach(function(l){var c=rw(l);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),s[c.key]=u}}),Object.entries(s).length===0?e:ep.setBaggage(e,ep.createBaggage(s))},t.prototype.fields=function(){return[tw]},t}()});var Zwe,IQ=I(()=>{Zwe=function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t}()});function $h(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=wQ(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=eAe(o.value,2),a=s[0],l=s[1];if(!AQ(a)){at.warn("Invalid attribute key: "+a);continue}if(!nw(l)){at.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(l)?n[a]=l.slice():n[a]=l}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function AQ(t){return typeof t=="string"&&t.length>0}function nw(t){return t==null?!0:Array.isArray(t)?tAe(t):RQ(t)}function tAe(t){var e,r,n;try{for(var i=wQ(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!n){if(RQ(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function RQ(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var wQ,eAe,DQ=I(()=>{Kt();wQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eAe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});function M5(){return function(t){at.error(rAe(t))}}function rAe(t){return typeof t=="string"?t:JSON.stringify(nAe(t))}function nAe(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var F5=I(()=>{Kt()});function iAe(t){PQ=t}function ys(t){try{PQ(t)}catch{}}var PQ,U5=I(()=>{F5();PQ=M5()});var Js,B5=I(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(Js||(Js={}))});var NQ,kQ=I(()=>{NQ=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function aAe(t){return sAe.indexOf(t)>-1}function lAe(t){return cAe.indexOf(t)>-1}function pAe(t){return uAe.indexOf(t)>-1}function dAe(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function fAe(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function mAe(t,e,r,n){n===void 0&&(n=oAe);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}function gAe(t,e,r){var n=r[t];if(typeof n=="string"){var i=hAe[n.toUpperCase()];i!=null&&(e[t]=i)}}function yb(t){var e={};for(var r in iw){var n=r;switch(n){case"OTEL_LOG_LEVEL":gAe(n,e,t);break;default:if(aAe(n))dAe(n,e,t);else if(lAe(n))fAe(n,e,t);else if(pAe(n))mAe(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function q5(){return typeof process<"u"&&process&&process.env?yb(process.env):yb(NQ)}var oAe,sAe,cAe,uAe,j0,G0,OQ,LQ,iw,hAe,H5=I(()=>{Kt();B5();kQ();oAe=",",sAe=["OTEL_SDK_DISABLED"];cAe=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];uAe=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];j0=1/0,G0=128,OQ=128,LQ=128,iw={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Hr.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:j0,OTEL_ATTRIBUTE_COUNT_LIMIT:G0,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:j0,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:G0,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:j0,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:G0,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:OQ,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:LQ,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Js.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};hAe={ALL:Hr.ALL,VERBOSE:Hr.VERBOSE,DEBUG:Hr.DEBUG,INFO:Hr.INFO,WARN:Hr.WARN,ERROR:Hr.ERROR,NONE:Hr.NONE}});function yi(){var t=yb(process.env);return Object.assign({HOSTNAME:MQ.hostname()},iw,t)}var MQ,FQ=I(()=>{MQ=Oe(require("os"));H5()});var vAe,UQ=I(()=>{vAe=typeof globalThis=="object"?globalThis:global});function BQ(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function xAe(t){var e;t.length===16?e=_Ae:t.length===32?e=yAe:e=Buffer.alloc(t.length/2);for(var r=0,n=0;n<t.length;n+=2){var i=BQ(t.charCodeAt(n)),o=BQ(t.charCodeAt(n+1));e.writeUInt8(i<<4|o,r++)}return e.toString("base64")}var _Ae,yAe,qQ=I(()=>{_Ae=Buffer.alloc(8),yAe=Buffer.alloc(16)});function HQ(t){return function(){for(var r=0;r<t/4;r++)ow.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(ow[r]>0);r++)r===t-1&&(ow[t-1]=1);return ow.toString("hex",0,t)}}var bAe,jQ,EAe,ow,GQ=I(()=>{bAe=8,jQ=16,EAe=function(){function t(){this.generateTraceId=HQ(jQ),this.generateSpanId=HQ(bAe)}return t}(),ow=Buffer.allocUnsafe(jQ)});var VQ,tp,zQ=I(()=>{VQ=require("perf_hooks"),tp=VQ.performance});var j5,sw=I(()=>{j5="1.17.0"});var rp,TAe,SAe,CAe,IAe,wAe,AAe,RAe,DAe,PAe,NAe,kAe,OAe,LAe,$Q=I(()=>{rp={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},TAe={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},SAe={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},CAe={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},IAe={INSERT:"insert",EDIT:"edit",DELETE:"delete"},wAe={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},AAe={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},RAe={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},DAe={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},PAe={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},NAe={QUEUE:"queue",TOPIC:"topic"},kAe={RECEIVE:"receive",PROCESS:"process"},OAe={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},LAe={SENT:"SENT",RECEIVED:"RECEIVED"}});var WQ=I(()=>{$Q()});var Bt,MAe,FAe,UAe,BAe,qAe,G5,KQ=I(()=>{Bt={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},MAe={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},FAe={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},UAe={EC2:"ec2",FARGATE:"fargate"},BAe={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},qAe={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},G5={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var YQ=I(()=>{KQ()});var V5={};Ri(V5,{AwsEcsLaunchtypeValues:()=>UAe,CloudPlatformValues:()=>FAe,CloudProviderValues:()=>MAe,DbCassandraConsistencyLevelValues:()=>SAe,DbSystemValues:()=>TAe,FaasDocumentOperationValues:()=>IAe,FaasInvokedProviderValues:()=>wAe,FaasTriggerValues:()=>CAe,HostArchValues:()=>BAe,HttpFlavorValues:()=>PAe,MessageTypeValues:()=>LAe,MessagingDestinationKindValues:()=>NAe,MessagingOperationValues:()=>kAe,NetHostConnectionSubtypeValues:()=>DAe,NetHostConnectionTypeValues:()=>RAe,NetTransportValues:()=>AAe,OsTypeValues:()=>qAe,RpcGrpcStatusCodeValues:()=>OAe,SemanticAttributes:()=>rp,SemanticResourceAttributes:()=>Bt,TelemetrySdkLanguageValues:()=>G5});var Sc=I(()=>{WQ();YQ()});var V0,xb,QQ=I(()=>{sw();Sc();xb=(V0={},V0[Bt.TELEMETRY_SDK_NAME]="opentelemetry",V0[Bt.PROCESS_RUNTIME_NAME]="node",V0[Bt.TELEMETRY_SDK_LANGUAGE]=G5.NODEJS,V0[Bt.TELEMETRY_SDK_VERSION]=j5,V0)});function z5(t){t.unref()}var XQ=I(()=>{});var JQ=I(()=>{FQ();UQ();qQ();GQ();zQ();QQ();XQ()});var $5=I(()=>{JQ()});function bl(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*jAe);return[r,n]}function bb(){var t=tp.timeOrigin;if(typeof t!="number"){var e=tp;t=e.timing&&e.timing.fetchStart}return t}function cw(t){var e=bl(bb()),r=bl(typeof t=="number"?t:tp.now());return pw(e,r)}function GAe(t){if(Eb(t))return t;if(typeof t=="number")return t<bb()?cw(t):bl(t);if(t instanceof Date)return bl(t.getTime());throw TypeError("Invalid input type")}function W5(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=aw),[r,n]}function VAe(t){var e=ZQ,r=""+"0".repeat(e)+t[1]+"Z",n=r.substr(r.length-e-1),i=new Date(t[0]*1e3).toISOString();return i.replace("000Z",n)}function zAe(t){return t[0]*aw+t[1]}function $Ae(t){return t[0]*1e3+t[1]/1e6}function lw(t){return t[0]*1e6+t[1]/1e3}function Eb(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function uw(t){return Eb(t)||typeof t=="number"||t instanceof Date}function pw(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=aw&&(r[1]-=aw,r[0]+=1),r}var ZQ,HAe,jAe,aw,eX=I(()=>{$5();ZQ=9,HAe=6,jAe=Math.pow(10,HAe),aw=Math.pow(10,ZQ)});var tX=I(()=>{});var Na,rX=I(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Na||(Na={}))});var WAe,K5,nX=I(()=>{Kt();WAe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K5=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var s=WAe(this._propagators),a=s.next();!a.done;a=s.next()){var l=a.value;try{l.inject(e,r,n)}catch(c){at.warn("Failed to inject with "+l.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){at.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}()});function iX(t){return QAe.test(t)}function oX(t){return XAe.test(t)&&!JAe.test(t)}var Y5,KAe,YAe,QAe,XAe,JAe,sX=I(()=>{Y5="[_0-9a-z-*/]",KAe="[a-z]"+Y5+"{0,255}",YAe="[a-z0-9]"+Y5+"{0,240}@[a-z]"+Y5+"{0,13}",QAe=new RegExp("^(?:"+KAe+"|"+YAe+")$"),XAe=/^[ -~]{0,255}[!-~]$/,JAe=/,|=/});var aX,ZAe,cX,lX,Q5,X5=I(()=>{sX();aX=32,ZAe=512,cX=",",lX="=",Q5=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+lX+e.get(n)),r},[]).join(cX)},t.prototype._parse=function(e){e.length>ZAe||(this._internalState=e.split(cX).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(lX);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);iX(s)&&oX(a)&&r.set(s,a)}return r},new Map),this._internalState.size>aX&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,aX))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function uX(t){var e=o2e.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var dw,fw,e2e,t2e,r2e,n2e,i2e,o2e,J5,pX=I(()=>{Kt();_b();X5();dw="traceparent",fw="tracestate",e2e="00",t2e="(?!ff)[\\da-f]{2}",r2e="(?![0]{32})[\\da-f]{32}",n2e="(?![0]{16})[\\da-f]{16}",i2e="[\\da-f]{2}",o2e=new RegExp("^\\s?("+t2e+")-("+r2e+")-("+n2e+")-("+i2e+")(-.*)?\\s?$");J5=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=_i.getSpanContext(e);if(!(!i||zh(e)||!Pa(i))){var o=e2e+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||Gn.NONE).toString(16);n.set(r,dw,o),i.traceState&&n.set(r,fw,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,dw);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var s=uX(o);if(!s)return e;s.isRemote=!0;var a=n.get(r,fw);if(a){var l=Array.isArray(a)?a.join(","):a;s.traceState=new Q5(typeof l=="string"?l:void 0)}return _i.setSpanContext(e,s)},t.prototype.fields=function(){return[dw,fw]},t}()});var dX=I(()=>{});function s2e(t,e){return t.setValue(e3,e)}function a2e(t){return t.deleteValue(e3)}function c2e(t){return t.getValue(e3)}var e3,Z5,fX=I(()=>{Kt();e3=xl("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(Z5||(Z5={}))});var mw,t3=I(()=>{Kt();mw=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:_s.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var Tb,r3=I(()=>{Kt();Tb=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:_s.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var l2e,mX=I(()=>{Kt();U5();t3();r3();l2e=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(ys(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Tb),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new Tb,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new mw,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new Tb,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new mw}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=_i.getSpanContext(e);return!a||!Pa(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&Gn.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&Gn.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var u2e,hX=I(()=>{Kt();u2e=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Vh(r)&&this._accumulate(r)<this._upperBound?_s.RECORD_AND_SAMPLED:_s.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function v2e(t,e){return function(r){return t(e(r))}}function n3(t){if(!_2e(t)||y2e(t)!==p2e)return!1;var e=g2e(t);if(e===null)return!0;var r=_X.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&gX.call(r)===h2e}function _2e(t){return t!=null&&typeof t=="object"}function y2e(t){return t==null?t===void 0?f2e:d2e:Wh&&Wh in Object(t)?x2e(t):b2e(t)}function x2e(t){var e=_X.call(t,Wh),r=t[Wh],n=!1;try{t[Wh]=void 0,n=!0}catch{}var i=yX.call(t);return n&&(e?t[Wh]=r:delete t[Wh]),i}function b2e(t){return yX.call(t)}var p2e,d2e,f2e,m2e,gX,h2e,g2e,vX,_X,Wh,yX,xX=I(()=>{p2e="[object Object]",d2e="[object Null]",f2e="[object Undefined]",m2e=Function.prototype,gX=m2e.toString,h2e=gX.call(Object),g2e=v2e(Object.getPrototypeOf,Object),vX=Object.prototype,_X=vX.hasOwnProperty,Wh=Symbol?Symbol.toStringTag:void 0,yX=vX.toString});function o3(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=EX(r,t.shift(),0,n);return r}function i3(t){return gw(t)?t.slice():t}function EX(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>E2e)){if(r++,hw(t)||hw(e)||TX(e))i=i3(e);else if(gw(t)){if(i=t.slice(),gw(e))for(var o=0,s=e.length;o<s;o++)i.push(i3(e[o]));else if(Sb(e))for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var l=a[o];i[l]=i3(e[l])}}else if(Sb(t))if(Sb(e)){if(!T2e(t,e))return e;i=Object.assign({},t);for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var l=a[o],c=e[l];if(hw(c))typeof c>"u"?delete i[l]:i[l]=c;else{var u=i[l],p=c;if(bX(t,l,n)||bX(e,l,n))delete i[l];else{if(Sb(u)&&Sb(p)){var d=n.get(u)||[],f=n.get(p)||[];d.push({obj:t,key:l}),f.push({obj:e,key:l}),n.set(u,d),n.set(p,f)}i[l]=EX(i[l],c,r,n)}}}}else i=e;return i}}function bX(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var s=n[i];if(s.key===e&&s.obj===t)return!0}return!1}function gw(t){return Array.isArray(t)}function TX(t){return typeof t=="function"}function Sb(t){return!hw(t)&&!gw(t)&&!TX(t)&&typeof t=="object"}function hw(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function T2e(t,e){return!(!n3(t)||!n3(e))}var E2e,SX=I(()=>{xX();E2e=20});function C2e(t,e){var r,n=new Promise(function(o,s){r=setTimeout(function(){s(new CX("Operation timed out."))},e)});return Promise.race([t,n]).then(function(i){return clearTimeout(r),i},function(i){throw clearTimeout(r),i})}var S2e,CX,IX=I(()=>{S2e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CX=function(t){S2e(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error)});function wX(t,e){return typeof e=="string"?t===e:!!t.match(e)}function w2e(t,e){var r,n;if(!e)return!1;try{for(var i=I2e(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(wX(t,s))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var I2e,AX=I(()=>{I2e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function A2e(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var RX=I(()=>{});var DX,PX=I(()=>{DX=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}()});var R2e,D2e,Cb,NX=I(()=>{PX();R2e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},D2e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Cb=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new DX}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,D2e([this._that],R2e(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}()});function kX(t,e){return new Promise(function(r){$o.with(vb($o.active()),function(){t.export(e,function(n){r(n)})})})}var OX=I(()=>{Kt();_b()});var LX={};Ri(LX,{AlwaysOffSampler:()=>mw,AlwaysOnSampler:()=>Tb,AnchoredClock:()=>Zwe,BindOnceFuture:()=>Cb,CompositePropagator:()=>K5,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>G0,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>j0,DEFAULT_ENVIRONMENT:()=>iw,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>OQ,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>LQ,ExportResultCode:()=>Na,ParentBasedSampler:()=>l2e,RPCType:()=>Z5,RandomIdGenerator:()=>EAe,SDK_INFO:()=>xb,TRACE_PARENT_HEADER:()=>dw,TRACE_STATE_HEADER:()=>fw,TimeoutError:()=>CX,TraceIdRatioBasedSampler:()=>u2e,TraceState:()=>Q5,TracesSamplerValues:()=>Js,VERSION:()=>j5,W3CBaggagePropagator:()=>L5,W3CTraceContextPropagator:()=>J5,_globalThis:()=>vAe,addHrTimes:()=>pw,baggageUtils:()=>k5,callWithTimeout:()=>C2e,deleteRPCMetadata:()=>a2e,getEnv:()=>yi,getEnvWithoutDefaults:()=>q5,getRPCMetadata:()=>c2e,getTimeOrigin:()=>bb,globalErrorHandler:()=>ys,hexToBase64:()=>xAe,hrTime:()=>cw,hrTimeDuration:()=>W5,hrTimeToMicroseconds:()=>lw,hrTimeToMilliseconds:()=>$Ae,hrTimeToNanoseconds:()=>zAe,hrTimeToTimeStamp:()=>VAe,internal:()=>s3,isAttributeKey:()=>AQ,isAttributeValue:()=>nw,isTimeInput:()=>uw,isTimeInputHrTime:()=>Eb,isTracingSuppressed:()=>zh,isUrlIgnored:()=>w2e,isWrapped:()=>A2e,loggingErrorHandler:()=>M5,merge:()=>o3,millisToHrTime:()=>bl,otperformance:()=>tp,parseEnvironment:()=>yb,parseTraceParent:()=>uX,sanitizeAttributes:()=>$h,setGlobalErrorHandler:()=>iAe,setRPCMetadata:()=>s2e,suppressTracing:()=>vb,timeInputToHrTime:()=>GAe,unrefTimer:()=>z5,unsuppressTracing:()=>Qwe,urlMatches:()=>wX});var s3,Wo=I(()=>{CQ();IQ();DQ();U5();F5();eX();tX();rX();sw();O5();$5();nX();pX();dX();fX();t3();r3();mX();hX();_b();X5();H5();SX();B5();IX();AX();RX();NX();sw();OX();s3={_export:kX}});var MX,FX=I(()=>{MX="exception"});var P2e,N2e,a3,c3=I(()=>{Kt();Wo();Sc();FX();P2e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N2e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},a3=function(){function t(e,r,n,i,o,s,a,l,c){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:B0.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a;var u=Date.now();this._performanceStartTime=tp.now(),this._performanceOffset=u-(this._performanceStartTime+bb()),this._startTimeProvided=l!=null,this.startTime=this._getTime(l??u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(at.warn("Invalid attribute key: "+e),this):nw(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(at.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=P2e(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=N2e(o.value,2),a=s[0],l=s[1];this.setAttribute(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return at.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(at.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),uw(r)&&(uw(n)||(n=r),r=void 0);var i=$h(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){at.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=W5(this.startTime,this.endTime),this._duration[0]<0&&(at.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<tp.now())return cw(e+this._performanceOffset);if(typeof e=="number")return bl(e);if(e instanceof Date)return bl(e.getTime());if(Eb(e))return e;if(this._startTimeProvided)return bl(Date.now());var r=tp.now()-this._performanceStartTime;return pw(this.startTime,bl(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[rp.EXCEPTION_MESSAGE]=e:e&&(e.code?n[rp.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[rp.EXCEPTION_TYPE]=e.name),e.message&&(n[rp.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[rp.EXCEPTION_STACKTRACE]=e.stack)),n[rp.EXCEPTION_TYPE]||n[rp.EXCEPTION_MESSAGE]?this.addEvent(MX,n,r):at.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&at.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(at.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}()});var El,Ib=I(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(El||(El={}))});var Kh,vw=I(()=>{Ib();Kh=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:El.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var np,_w=I(()=>{Ib();np=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:El.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var wb,l3=I(()=>{Kt();Wo();vw();_w();wb=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(ys(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new np),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new np,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new Kh,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new np,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new Kh}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=_i.getSpanContext(e);return!a||!Pa(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&Gn.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&Gn.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var yw,u3=I(()=>{Kt();Ib();yw=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Vh(r)&&this._accumulate(r)<this._upperBound?El.RECORD_AND_SAMPLED:El.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function xw(){return{sampler:p3(k2e),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:yi().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:yi().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:yi().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:yi().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:yi().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:yi().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:yi().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:yi().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function p3(t){switch(t===void 0&&(t=yi()),t.OTEL_TRACES_SAMPLER){case Js.AlwaysOn:return new np;case Js.AlwaysOff:return new Kh;case Js.ParentBasedAlwaysOn:return new wb({root:new np});case Js.ParentBasedAlwaysOff:return new wb({root:new Kh});case Js.TraceIdRatio:return new yw(UX(t));case Js.ParentBasedTraceIdRatio:return new wb({root:new yw(UX(t))});default:return at.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+O2e+'".'),new np}}function UX(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return at.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+z0+"."),z0;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(at.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+z0+"."),z0):e<0||e>1?(at.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+z0+"."),z0):e}var k2e,O2e,z0,d3=I(()=>{Kt();Wo();vw();_w();l3();u3();k2e=yi(),O2e=Js.AlwaysOn,z0=1});function BX(t){var e={sampler:p3()},r=xw(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function qX(t){var e,r,n,i,o,s,a,l,c,u,p,d,f=Object.assign({},t.spanLimits),m=q5();return f.attributeCountLimit=(s=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:G0,f.attributeValueLengthLimit=(d=(p=(u=(l=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&l!==void 0?l:(c=t.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&u!==void 0?u:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:j0,Object.assign({},t,{spanLimits:f})}var f3=I(()=>{d3();Wo()});var HX,jX=I(()=>{Kt();Wo();HX=function(){function t(e,r){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=yi();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Cb(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(at.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&Gn.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&at.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(at.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);$o.with(vb($o.active()),function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),s=function(){return e._exporter.export(o,function(l){var c;clearTimeout(i),l.code===Na.SUCCESS?r():n((c=l.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(l){return l.resource}).filter(function(l){return l.asyncAttributesPending});a.length===0?s():Promise.all(a.map(function(l){var c;return(c=l.waitForAsyncAttributes)===null||c===void 0?void 0:c.call(l)})).then(s,function(l){ys(l),n(l)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){ys(r)})},this._scheduledDelayMillis),z5(this._timer))},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}()});var L2e,m3,GX=I(()=>{jX();L2e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m3=function(t){L2e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e}(HX)});function VX(t){return function(){for(var r=0;r<t/4;r++)bw.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(bw[r]>0);r++)r===t-1&&(bw[t-1]=1);return bw.toString("hex",0,t)}}var M2e,zX,h3,bw,$X=I(()=>{M2e=8,zX=16,h3=function(){function t(){this.generateTraceId=VX(zX),this.generateSpanId=VX(M2e)}return t}(),bw=Buffer.allocUnsafe(zX)});var WX=I(()=>{GX();$X()});var Ew=I(()=>{WX()});var g3,KX=I(()=>{Kt();Wo();c3();f3();Ew();g3=function(){function t(e,r,n){this._tracerProvider=n;var i=BX(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new h3,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,s;r===void 0&&(r={}),n===void 0&&(n=$o.active()),r.root&&(n=_i.deleteSpan(n));var a=_i.getSpan(n);if(zh(n)){at.debug("Instrumentation suppressed, returning Noop Span");var l=_i.wrapSpanContext(F0);return l}var c=a?.spanContext(),u=this._idGenerator.generateSpanId(),p,d,f;!c||!_i.isSpanContextValid(c)?p=this._idGenerator.generateTraceId():(p=c.traceId,d=c.traceState,f=c.spanId);var m=(i=r.kind)!==null&&i!==void 0?i:U0.INTERNAL,h=((o=r.links)!==null&&o!==void 0?o:[]).map(function(P){return{context:P.context,attributes:$h(P.attributes)}}),g=$h(r.attributes),v=this._sampler.shouldSample(n,p,e,m,g,h);d=(s=v.traceState)!==null&&s!==void 0?s:d;var _=v.decision===_s.RECORD_AND_SAMPLED?Gn.SAMPLED:Gn.NONE,y={traceId:p,spanId:u,traceFlags:_,traceState:d};if(v.decision===_s.NOT_RECORD){at.debug("Recording is off, propagating context in a non-recording span");var l=_i.wrapSpanContext(y);return l}var b=new a3(this,n,e,y,m,f,h,r.startTime),x=$h(Object.assign(g,v.attributes));return b.setAttributes(x),b},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var l=s??$o.active(),c=this.startSpan(e,o,l),u=_i.setSpan(l,c);return $o.with(u,a,void 0,c)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}()});function YX(){return"unknown_service:"+process.argv0}var QX=I(()=>{});var XX,JX,v3=I(()=>{XX=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},JX=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});var ZX,eJ,$0,Tw=I(()=>{ZX=Oe(require("child_process")),eJ=Oe(require("util")),$0=eJ.promisify(ZX.exec)});var tJ={};Ri(tJ,{getMachineId:()=>B2e});function B2e(){return F2e(this,void 0,void 0,function(){var t,e,r,n;return U2e(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,$0('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return t=i.sent(),e=t.stdout.split(`
`).find(function(o){return o.includes("IOPlatformUUID")}),e?(r=e.split('" = "'),r.length===2?[2,r[1].slice(0,-1)]:[3,3]):[2,""];case 2:return n=i.sent(),at.debug("error reading machine id: "+n),[3,3];case 3:return[2,""]}})})}var F2e,U2e,rJ=I(()=>{Tw();Kt();F2e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},U2e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var iJ={};Ri(iJ,{getMachineId:()=>G2e});function G2e(){return q2e(this,void 0,void 0,function(){var t,e,r,n,i,o,s,a,l;return H2e(this,function(c){switch(c.label){case 0:t=["/etc/machine-id","/var/lib/dbus/machine-id"],c.label=1;case 1:c.trys.push([1,8,9,10]),e=j2e(t),r=e.next(),c.label=2;case 2:if(r.done)return[3,7];n=r.value,c.label=3;case 3:return c.trys.push([3,5,,6]),[4,nJ.promises.readFile(n,{encoding:"utf8"})];case 4:return i=c.sent(),[2,i.trim()];case 5:return o=c.sent(),at.debug("error reading machine id: "+o),[3,6];case 6:return r=e.next(),[3,2];case 7:return[3,10];case 8:return s=c.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(l=e.return)&&l.call(e)}finally{if(a)throw a.error}return[7];case 10:return[2,""]}})})}var nJ,q2e,H2e,j2e,oJ=I(()=>{nJ=require("fs");Kt();q2e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},H2e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},j2e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});var aJ={};Ri(aJ,{getMachineId:()=>$2e});function $2e(){return V2e(this,void 0,void 0,function(){var e,t,e,r;return z2e(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,sJ.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return e=n.sent(),[2,e.trim()];case 2:return t=n.sent(),at.debug("error reading machine id: "+t),[3,3];case 3:return n.trys.push([3,5,,6]),[4,$0("kenv -q smbios.system.uuid")];case 4:return e=n.sent(),[2,e.stdout.trim()];case 5:return r=n.sent(),at.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})})}var sJ,V2e,z2e,cJ=I(()=>{sJ=require("fs");Tw();Kt();V2e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},z2e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var lJ={};Ri(lJ,{getMachineId:()=>Y2e});function Y2e(){return W2e(this,void 0,void 0,function(){var t,e,r,n,i;return K2e(this,function(o){switch(o.label){case 0:t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe",Sw.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in Sw.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,$0(e+" "+t)];case 2:return r=o.sent(),n=r.stdout.split("REG_SZ"),n.length===2?[2,n[1].trim()]:[3,4];case 3:return i=o.sent(),at.debug("error reading machine id: "+i),[3,4];case 4:return[2,""]}})})}var Sw,W2e,K2e,uJ=I(()=>{Sw=Oe(require("process"));Tw();Kt();W2e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},K2e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var pJ={};Ri(pJ,{getMachineId:()=>J2e});function J2e(){return Q2e(this,void 0,void 0,function(){return X2e(this,function(t){return at.debug("could not read machine-id: unsupported platform"),[2,""]})})}var Q2e,X2e,dJ=I(()=>{Kt();Q2e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},X2e=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var fJ,Yh,mJ=I(()=>{fJ=Oe(require("process"));switch(fJ.platform){case"darwin":Yh=(rJ(),Xn(tJ)).getMachineId;break;case"linux":Yh=(oJ(),Xn(iJ)).getMachineId;break;case"freebsd":Yh=(cJ(),Xn(aJ)).getMachineId;break;case"win32":Yh=(uJ(),Xn(lJ)).getMachineId;break;default:Yh=(dJ(),Xn(pJ)).getMachineId}});var Cw,Z2e,hJ,_3=I(()=>{Sc();W0();Cw=require("os");v3();mJ();Z2e=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Bt.HOST_NAME]=(0,Cw.hostname)(),r[Bt.HOST_ARCH]=XX((0,Cw.arch)()),r);return new Ko(n,this._getAsyncAttributes())},t.prototype._getAsyncAttributes=function(){return Yh().then(function(e){var r={};return e&&(r[Bt.HOST_ID]=e),r})},t}(),hJ=new Z2e});var eRe,_it,gJ=I(()=>{_3();eRe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(hJ.detect(e))},t}(),_it=new eRe});var Iw,tRe,vJ,y3=I(()=>{Sc();W0();Iw=require("os");v3();tRe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Bt.OS_TYPE]=JX((0,Iw.platform)()),r[Bt.OS_VERSION]=(0,Iw.release)(),r);return new Ko(n)},t}(),vJ=new tRe});var rRe,Cit,_J=I(()=>{y3();rRe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(vJ.detect(e))},t}(),Cit=new rRe});var bJ,yJ,xJ,nRe,EJ,x3=I(()=>{Kt();Sc();W0();bJ=Oe(require("os")),yJ=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},xJ=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},nRe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Bt.PROCESS_PID]=process.pid,r[Bt.PROCESS_EXECUTABLE_NAME]=process.title,r[Bt.PROCESS_EXECUTABLE_PATH]=process.execPath,r[Bt.PROCESS_COMMAND_ARGS]=xJ(xJ([process.argv[0]],yJ(process.execArgv),!1),yJ(process.argv.slice(1)),!1),r[Bt.PROCESS_RUNTIME_VERSION]=process.versions.node,r[Bt.PROCESS_RUNTIME_NAME]="nodejs",r[Bt.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r);process.argv.length>1&&(n[Bt.PROCESS_COMMAND]=process.argv[1]);try{var i=bJ.userInfo();n[Bt.PROCESS_OWNER]=i.username}catch(o){at.debug("error obtaining process owner: "+o)}return new Ko(n)},t}(),EJ=new nRe});var iRe,Nit,TJ=I(()=>{x3();iRe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(EJ.detect(e))},t}(),Nit=new iRe});var SJ=I(()=>{QX();gJ();_J();_3();y3();TJ();x3()});var b3=I(()=>{SJ()});var Bd,oRe,sRe,aRe,Ko,W0=I(()=>{Kt();Sc();Wo();b3();Bd=function(){return Bd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bd.apply(this,arguments)},oRe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},sRe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},aRe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Ko=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return at.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[Bt.SERVICE_NAME]=YX(),e[Bt.TELEMETRY_SDK_LANGUAGE]=xb[Bt.TELEMETRY_SDK_LANGUAGE],e[Bt.TELEMETRY_SDK_NAME]=xb[Bt.TELEMETRY_SDK_NAME],e[Bt.TELEMETRY_SDK_VERSION]=xb[Bt.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&at.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return oRe(this,void 0,void 0,function(){return sRe(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=Bd(Bd({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,l=aRe(s,2),c=l[0],u=l[1];return Bd(Bd(Bd(Bd({},r._syncAttributes),c),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),u)});return new t(i,o)},t.EMPTY=new t({}),t}()});var CJ=I(()=>{});var IJ=I(()=>{});var wJ=I(()=>{});var cRe,Qit,AJ=I(()=>{ww();cRe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(RJ.detect(e))},t}(),Qit=new cRe});var lRe,uRe,pRe,DJ,E3=I(()=>{Kt();Wo();Sc();W0();lRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uRe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},pRe=function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(e){var r={},n=yi(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME;if(i)try{var s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(a){at.debug("EnvDetector failed: "+a.message)}return o&&(r[Bt.SERVICE_NAME]=o),new Ko(r)},t.prototype._parseResourceAttributes=function(e){var r,n;if(!e)return{};var i={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=lRe(o),a=s.next();!a.done;a=s.next()){var l=a.value,c=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(c.length===2){var u=uRe(c,2),p=u[0],d=u[1];if(p=p.trim(),d=d.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(p))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(d))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[p]=decodeURIComponent(d)}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},t.prototype._isBaggageOctetString=function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},t}(),DJ=new pRe});var dRe,iot,PJ=I(()=>{E3();dRe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(DJ.detect(e))},t}(),iot=new dRe});var T3,fRe,RJ,NJ=I(()=>{Sc();ww();Kt();T3=function(){return T3=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},T3.apply(this,arguments)},fRe=function(){function t(){}return t.prototype.detect=function(e){var r,n=typeof navigator<"u";if(!n)return Ko.empty();var i=(r={},r[Bt.PROCESS_RUNTIME_NAME]="browser",r[Bt.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",r[Bt.PROCESS_RUNTIME_VERSION]=navigator.userAgent,r);return this._getResourceAttributes(i,e)},t.prototype._getResourceAttributes=function(e,r){return e[Bt.PROCESS_RUNTIME_VERSION]===""?(at.debug("BrowserDetector failed: Unable to find required browser resources. "),Ko.empty()):new Ko(T3({},e))},t}(),RJ=new fRe});var kJ=I(()=>{AJ();PJ();NJ();E3()});var OJ=I(()=>{});var ww=I(()=>{W0();CJ();b3();IJ();wJ();kJ();OJ()});var Aw,LJ,MJ=I(()=>{Wo();Aw=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LJ=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=Aw(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(l){ys(l||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=Aw(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(e,r)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=Aw(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=Aw(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,l){Promise.all(n).then(function(){a()},l)})},t}()});var S3,C3=I(()=>{S3=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}()});var qd,mRe,FJ=I(()=>{Kt();Wo();ww();I3();d3();MJ();C3();Ew();f3();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(qd||(qd={}));mRe=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=o3({},xw(),qX(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Ko.empty(),this.resource=Ko.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new m3(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new S3}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new g3({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return at.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new LJ(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),_i.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&$o.setGlobalContextManager(e.contextManager),e.propagator&&ep.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=qd.timeout},e);n.forceFlush().then(function(){clearTimeout(s),o!==qd.timeout&&(o=qd.resolved,i(o))}).catch(function(a){clearTimeout(s),o=qd.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==qd.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(yi().OTEL_PROPAGATORS)),n=r.map(function(o){var s=e._getPropagator(o);return s||at.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new K5({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=yi().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||at.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new J5}],["baggage",function(){return new L5}]]),t._registeredExporters=new Map,t}()});var hRe,gRe,UJ=I(()=>{Wo();hRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gRe=function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:lw(e.startTime),duration:lw(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,i;try{for(var o=hRe(e),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return r({code:Na.SUCCESS})},t}()});var vRe,_Re,yRe,BJ=I(()=>{Wo();vRe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},_Re=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},yRe=function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:Na.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,_Re([],vRe(e),!1)),setTimeout(function(){return r({code:Na.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t}()});var qJ=I(()=>{});var xRe,bRe,ERe,HJ=I(()=>{Kt();Wo();xRe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},bRe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ERe=function(){function t(e){this._exporter=e,this._shutdownOnce=new Cb(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return xRe(this,void 0,void 0,function(){return bRe(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,i;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&Gn.SAMPLED){var o=function(){return s3._export(r._exporter,[e]).then(function(a){var l;a.code!==Na.SUCCESS&&ys((l=a.error)!==null&&l!==void 0?l:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){ys(a)})};if(e.resource.asyncAttributesPending){var s=(i=(n=e.resource).waitForAsyncAttributes)===null||i===void 0?void 0:i.call(n).then(function(){return s!=null&&r._unresolvedExports.delete(s),o()},function(a){return ys(a)});s!=null&&this._unresolvedExports.add(s)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}()});var jJ=I(()=>{});var GJ=I(()=>{});var VJ=I(()=>{});var zJ=I(()=>{});var $J=I(()=>{});var WJ={};Ri(WJ,{AlwaysOffSampler:()=>Kh,AlwaysOnSampler:()=>np,BasicTracerProvider:()=>mRe,BatchSpanProcessor:()=>m3,ConsoleSpanExporter:()=>gRe,ForceFlushState:()=>qd,InMemorySpanExporter:()=>yRe,NoopSpanProcessor:()=>S3,ParentBasedSampler:()=>wb,RandomIdGenerator:()=>h3,SamplingDecision:()=>El,SimpleSpanProcessor:()=>ERe,Span:()=>a3,TraceIdRatioBasedSampler:()=>yw,Tracer:()=>g3});var I3=I(()=>{KX();FJ();Ew();UJ();BJ();qJ();HJ();jJ();C3();vw();_w();l3();u3();Ib();c3();GJ();VJ();zJ();$J()});var YJ=k(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.enable=ka.azureCoreTracing=ka.AzureMonitorSymbol=void 0;var w3=Nn();ka.AzureMonitorSymbol="Azure_Monitor_Tracer";var A3="azure-coretracing",KJ=!1,TRe=function(t){if(KJ)return t;try{var e=(I3(),Xn(WJ)),r=(Kt(),Xn(q0)),n=new e.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(t.setTracer){var o=t.setTracer;t.setTracer=function(c){var u=c.startSpan;c.startSpan=function(p,d,f){var m=u.call(this,p,d,f),h=m.end;return m.end=function(){var g=h.apply(this,arguments);return w3.channel.publish(A3,m),g},m},c[ka.AzureMonitorSymbol]=!0,o.call(this,c)},r.trace.getSpan(r.context.active()),t.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(c){var u=c.getTracer;return c.getTracer=function(p,d){var f=u.call(this,p,d);if(!f[ka.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,g,v){var _=m.call(this,h,g,v),y=_.end;return _.end=function(){var b=y.apply(this,arguments);return w3.channel.publish(A3,_),b},_},f[ka.AzureMonitorSymbol]=!0}return f},s.call(this,c)},n.register(),r.trace.getSpan(r.context.active());var a=require("@opentelemetry/instrumentation"),l=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[l.createAzureSdkInstrumentation()]})}KJ=!0}catch{}return t};ka.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:TRe,publisherName:A3};function SRe(){w3.channel.registerMonkeyPatch("@azure/core-tracing",ka.azureCoreTracing)}ka.enable=SRe});var XJ=k(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.enable=Qh.bunyan=void 0;var QJ=Nn(),CRe=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),QJ.channel.publish("bunyan",{level:r.level,result:o})}return i},t};Qh.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:CRe};function IRe(){QJ.channel.registerMonkeyPatch("bunyan",Qh.bunyan)}Qh.enable=IRe});var ZJ=k(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.enable=Xh.console=void 0;var R3=Nn(),JJ=require("stream"),wRe=function(t){var e=new JJ.Writable,r=new JJ.Writable;e.write=function(c){if(!c)return!0;var u=c.toString();return R3.channel.publish("console",{message:u}),!0},r.write=function(c){if(!c)return!0;var u=c.toString();return R3.channel.publish("console",{message:u,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(c){var u=t[c];u&&(t[c]=function(){if(n[c])try{n[c].apply(n,arguments)}catch{}return u.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var l=a[s];o(l)}return t};Xh.console={versionSpecifier:">= 4.0.0",patch:wRe};function ARe(){R3.channel.registerMonkeyPatch("console",Xh.console),require("console")}Xh.enable=ARe});var eZ=k(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.enable=Jh.mongoCore=void 0;var D3=Nn(),RRe=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=D3.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=D3.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};Jh.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:RRe};function DRe(){D3.channel.registerMonkeyPatch("mongodb-core",Jh.mongoCore)}Jh.enable=DRe});var tZ=k(Yo=>{"use strict";var K0=Yo&&Yo.__assign||function(){return K0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},K0.apply(this,arguments)};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.enable=Yo.mongo330=Yo.mongo3=Yo.mongo2=void 0;var xo=Nn(),PRe=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return xo.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=K0(K0({},n),{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return xo.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):xo.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return xo.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):xo.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},NRe=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=xo.channel.bindToContext(function(o){return o()}),r[i.requestId]=K0(K0({},i),{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return xo.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return xo.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},kRe=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=xo.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=xo.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},ORe=function(t){kRe(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=xo.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return xo.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return xo.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};Yo.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:PRe};Yo.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:NRe};Yo.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:ORe};function LRe(){xo.channel.registerMonkeyPatch("mongodb",Yo.mongo2),xo.channel.registerMonkeyPatch("mongodb",Yo.mongo3),xo.channel.registerMonkeyPatch("mongodb",Yo.mongo330)}Yo.enable=LRe});var nZ=k(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.enable=Zh.mysql=void 0;var Rw=Nn(),rZ=require("path"),MRe=function(t,e){var r=function(l,c){return function(u,p){var d=l[u];d&&(l[u]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var g=arguments[m],v={result:null,startTime:null,startDate:null};typeof g=="function"&&(p?(v.startTime=process.hrtime(),v.startDate=new Date,arguments[m]=Rw.channel.bindToContext(p(v,g))):arguments[m]=Rw.channel.bindToContext(g));var _=d.apply(this,arguments);return v.result=_,_})}},n=function(l,c){return r(l.prototype,c+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(rZ.dirname(e)+"/lib/Connection");i.forEach(function(l){return n(o,"Connection")(l)}),r(o,"Connection")("createQuery",function(l,c){return function(u){var p=process.hrtime(l.startTime),d=p[0]*1e3+p[1]/1e6|0;Rw.channel.publish("mysql",{query:l.result,callbackArgs:arguments,err:u,duration:d,time:l.startDate}),c.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(rZ.dirname(e)+"/lib/Pool");return s.forEach(function(l){return n(a,"Pool")(l)}),t};Zh.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:MRe};function FRe(){Rw.channel.registerMonkeyPatch("mysql",Zh.mysql)}Zh.enable=FRe});var oZ=k(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});eg.enable=eg.postgresPool1=void 0;var iZ=Nn();function URe(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=iZ.channel.bindToContext(n)),e.apply(this,arguments)},t}eg.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:URe};function BRe(){iZ.channel.registerMonkeyPatch("pg-pool",eg.postgresPool1)}eg.enable=BRe});var aZ=k(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.enable=Tl.postgres=Tl.postgres6=void 0;var Y0=Nn(),sZ=require("events"),P3="postgres";function qRe(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime(),u;function p(d){d&&d[n]&&(d=d[n]);var f=Y0.channel.bindToContext(function(m,h){var g=process.hrtime(c);if(l.result=h&&{rowCount:h.rowCount,command:h.command},l.error=m,l.duration=Math.ceil(g[0]*1e3+g[1]/1e6),Y0.channel.publish(P3,l),m){if(d)return d.apply(this,arguments);u&&u instanceof sZ.EventEmitter&&u.emit("error",m)}else d&&d.apply(this,arguments)});try{return Object.defineProperty(f,n,{value:d}),f}catch{return d}}try{typeof o=="string"?s instanceof Array?(l.query.preparable={text:o,args:s},a=p(a)):(l.query.text=o,a?a=p(a):s=p(s)):(typeof o.name=="string"?l.query.plan=o.name:o.values instanceof Array?l.query.preparable={text:o.text,args:o.values}:l.query.text=o.text,a?a=p(a):s?s=p(s):o.callback=p(o.callback))}catch{return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,u=r.apply(this,arguments),u},t}function HRe(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var l=this,c,u,p=!!a,d={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f,m=process.hrtime();function h(_){_&&_[n]&&(_=_[n]);var y=Y0.channel.bindToContext(function(b,x){var P=process.hrtime(m);if(d.result=x&&{rowCount:x.rowCount,command:x.command},d.error=b,d.duration=Math.ceil(P[0]*1e3+P[1]/1e6),Y0.channel.publish(P3,d),b){if(_)return _.apply(this,arguments);f&&f instanceof sZ.EventEmitter&&f.emit("error",b)}else _&&_.apply(this,arguments)});try{return Object.defineProperty(y,n,{value:_}),y}catch{return _}}try{typeof o=="string"?s instanceof Array?(d.query.preparable={text:o,args:s},p=typeof a=="function",a=p?h(a):a):(d.query.text=o,a?(p=typeof a=="function",a=p?h(a):a):(p=typeof s=="function",s=p?h(s):s)):(typeof o.name=="string"?d.query.plan=o.name:o.values instanceof Array?d.query.preparable={text:o.text,args:o.values}:o.cursor?d.query.text=(c=o.cursor)===null||c===void 0?void 0:c.text:d.query.text=o.text,a?(p=typeof a=="function",a=h(a)):s?(p=typeof s=="function",s=p?h(s):s):(p=typeof o.callback=="function",o.callback=p?h(o.callback):o.callback))}catch{return r.apply(this,arguments)}arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3;try{f=r.apply(this,arguments)}catch(_){throw h()(_,void 0),_}if(!p){if(f instanceof Promise)return f.then(function(_){return h()(void 0,_),new l._Promise(function(y,b){y(_)})}).catch(function(_){return h()(_,void 0),new l._Promise(function(y,b){b(_)})});var g=f.text?f.text:"";if(f.cursor&&(g=(u=f.cursor)===null||u===void 0?void 0:u.text),g){var v={command:g,rowCount:0};h()(void 0,v)}}return f},t}Tl.postgres6={versionSpecifier:"6.*",patch:qRe};Tl.postgres={versionSpecifier:">=7.* <=8.*",patch:HRe,publisherName:P3};function jRe(){Y0.channel.registerMonkeyPatch("pg",Tl.postgres6),Y0.channel.registerMonkeyPatch("pg",Tl.postgres)}Tl.enable=jRe});var cZ=k(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});tg.enable=tg.redis=void 0;var N3=Nn(),GRe=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=N3.channel.bindToContext(function(a,l){var c=process.hrtime(o),u=c[0]*1e3+c[1]/1e6|0;N3.channel.publish("redis",{duration:u,address:i,commandObj:r,err:a,result:l,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};tg.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:GRe};function VRe(){N3.channel.registerMonkeyPatch("redis",tg.redis)}tg.enable=VRe});var lZ=k(ip=>{"use strict";var Dw=ip&&ip.__assign||function(){return Dw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dw.apply(this,arguments)};Object.defineProperty(ip,"__esModule",{value:!0});ip.enable=ip.tedious=void 0;var k3=Nn(),zRe=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return k3.channel.bindToContext(function(l,c,u){var p=process.hrtime(s);a=Dw(Dw({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!l&&{rowCount:c,rows:u},query:{text:this.parametersByName.statement.value},error:l,duration:Math.ceil(p[0]*1e3+p[1]/1e6)}),k3.channel.publish("tedious",a),o.call(this,l,c,u)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};ip.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:zRe};function $Re(){k3.channel.registerMonkeyPatch("tedious",ip.tedious)}ip.enable=$Re});var uZ=k(xs=>{"use strict";var WRe=xs&&xs.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KRe=xs&&xs.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(xs,"__esModule",{value:!0});xs.enable=xs.winston2=xs.winston3=void 0;var Pw=Nn(),YRe=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",Pw.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},QRe=function(t){var e=function(s,a){var l;return s.config.npm.levels[a]!=null?l="npm":s.config.syslog.levels[a]!=null?l="syslog":l="unknown",l},r=function(s){WRe(a,s);function a(l,c){var u=s.call(this,c)||this;return u.winston=l,u}return a.prototype.log=function(l,c){var u=l.message,p=l.level,d=l.meta,f=KRe(l,["message","level","meta"]);p=typeof Symbol.for=="function"?l[Symbol.for("level")]:p,u=l instanceof Error?l:u;var m=e(this.winston,p);d=d||{};for(var h in f)f.hasOwnProperty(h)&&(d[h]=f[h]);Pw.channel.publish("winston",{message:u,level:p,levelKind:m,meta:d}),c()},a}(t.Transport);function n(){var s=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var l in s)s.hasOwnProperty(l)&&(a=a===void 0||s[l]>s[a]?l:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var l;for(var c in a)a.hasOwnProperty(c)&&(l=l===void 0||a[c]>a[l]?c:l);var u=i.apply(this,arguments);u.add(new r(t,{level:l}));var p=u.configure;return u.configure=function(){p.apply(this,arguments),n.apply(this,arguments)},u};var o=t.configure;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};xs.winston3={versionSpecifier:"3.x",patch:QRe};xs.winston2={versionSpecifier:"2.x",patch:YRe};function XRe(){Pw.channel.registerMonkeyPatch("winston",xs.winston2),Pw.channel.registerMonkeyPatch("winston",xs.winston3)}xs.enable=XRe});var EZ=k(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.enable=jr.tedious=jr.pgPool=jr.pg=jr.winston=jr.redis=jr.mysql=jr.mongodb=jr.mongodbCore=jr.console=jr.bunyan=jr.azuresdk=void 0;var pZ=YJ();jr.azuresdk=pZ;var dZ=XJ();jr.bunyan=dZ;var fZ=ZJ();jr.console=fZ;var mZ=eZ();jr.mongodbCore=mZ;var hZ=tZ();jr.mongodb=hZ;var gZ=nZ();jr.mysql=gZ;var vZ=oZ();jr.pgPool=vZ;var _Z=aZ();jr.pg=_Z;var yZ=cZ();jr.redis=yZ;var xZ=lZ();jr.tedious=xZ;var bZ=uZ();jr.winston=bZ;function JRe(){dZ.enable(),fZ.enable(),mZ.enable(),hZ.enable(),gZ.enable(),_Z.enable(),vZ.enable(),yZ.enable(),bZ.enable(),pZ.enable(),xZ.enable()}jr.enable=JRe});var Ow=k(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.registerContextPreservation=Hd.IsInitialized=void 0;var O3=Jr(),SZ=AI();Hd.IsInitialized=!SZ.JsonConfig.getInstance().noDiagnosticChannel;var L3="DiagnosticChannel";if(Hd.IsInitialized){Cc=EZ(),TZ=SZ.JsonConfig.getInstance().noPatchModules,Nw=TZ.split(","),M3={bunyan:Cc.bunyan,console:Cc.console,mongodb:Cc.mongodb,mongodbCore:Cc.mongodbCore,mysql:Cc.mysql,redis:Cc.redis,pg:Cc.pg,pgPool:Cc.pgPool,winston:Cc.winston,azuresdk:Cc.azuresdk};for(kw in M3)Nw.indexOf(kw)===-1&&(M3[kw].enable(),O3.info(L3,"Subscribed to "+kw+" events"));Nw.length>0&&O3.info(L3,"Some modules will not be patched",Nw)}else O3.info(L3,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Cc,TZ,Nw,M3,kw;function ZRe(t){if(Hd.IsInitialized){var e=Nn();e.channel.addContextPreservation(t)}}Hd.registerContextPreservation=ZRe});var Q0=k((Est,CZ)=>{"use strict";CZ.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Ji=k((B3,IZ)=>{"use strict";var Gd=B3&&B3.__assign||function(){return Gd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gd.apply(this,arguments)},eDe=require("http"),F3=require("https"),U3=require("url"),jd=require("constants"),rg=Jr(),X0=Q0(),tDe=AI(),rDe=function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,l){return String.fromCharCode(a>>l&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){rg.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){rg.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(l){i=o.constructor.name.toString()+" (Error: "+l.message+")",rg.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new U3.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[X0.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var a=new U3.URL(r),l=Gd(Gd({},n),{host:a.hostname,port:a.port,path:a.pathname}),c=void 0;if(o&&(a.protocol==="https:"&&(c=e.proxyHttpsUrl||void 0),a.protocol==="http:"&&(c=e.proxyHttpUrl||void 0),c)){c.indexOf("//")===0&&(c="http:"+c);try{var u=new U3.URL(c);u.protocol==="https:"?(rg.info("Proxies that use HTTPS are not supported"),c=void 0):l=Gd(Gd({},l),{host:u.hostname,port:u.port||"80",path:r,headers:Gd(Gd({},l.headers),{Host:a.hostname})})}catch{rg.warn("Wrong proxy URL provided")}}var p=a.protocol==="https:"&&!c;return s&&(p&&e.httpsAgent!==void 0?l.agent=e.httpsAgent:!p&&e.httpAgent!==void 0?l.agent=e.httpAgent:p&&(l.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),p?F3.request(l,i):eDe.request(l,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){rg.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(X0.requestContextHeader,X0.requestContextSourceKey+"="+e.config.correlationId)},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){rg.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=X0.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(X0.requestContextHeader,n+","+X0.requestContextSourceKey+"="+e.config.correlationId)},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!tDe.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new F3.Agent({keepAlive:!0,maxSockets:25,secureOptions:jd.SSL_OP_NO_SSLv2|jd.SSL_OP_NO_SSLv3|jd.SSL_OP_NO_TLSv1|jd.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new F3.Agent({secureOptions:jd.SSL_OP_NO_SSLv2|jd.SSL_OP_NO_SSLv3|jd.SSL_OP_NO_TLSv1|jd.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t}();IZ.exports=rDe});var ng=k((Tst,wZ)=>{"use strict";var q3=Ji(),nDe=function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+q3.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=q3.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=q3.randomu32(),t}();wZ.exports=nDe});var Lw=k((Sst,AZ)=>{"use strict";var Zi=Ji(),iDe=ng(),oDe=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Zi.w3cTraceId(),this.spanId=Zi.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Zi.w3cTraceId(),this.spanId=Zi.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Zi.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Zi.w3cTraceId(),this.spanId=Zi.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Zi.w3cTraceId(),this.spanId=Zi.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Zi.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Zi.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Zi.w3cTraceId().substr(0,16),this.traceId=Zi.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=iDe.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=Zi.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Zi.w3cTraceId(),this.spanId=Zi.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Zi.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();AZ.exports=oDe});var H3=k((Cst,RZ)=>{"use strict";var sDe=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],l=a.trim();if(l.length!==0){var c=l.split("=");if(c.length!==2||!t.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(l)}}return r},t.strict=!0,t}();RZ.exports=sDe});var op=k((Ist,DZ)=>{"use strict";var aDe=function(){function t(){}return t}();DZ.exports=aDe});var NZ=k((j3,PZ)=>{"use strict";var cDe=j3&&j3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lDe=op(),uDe=function(t){cDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(lDe);PZ.exports=uDe});var G3=k((wst,kZ)=>{"use strict";var pDe=function(){function t(){}return t}();kZ.exports=pDe});var LZ=k((Ast,OZ)=>{"use strict";var dDe=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();OZ.exports=dDe});var FZ=k((V3,MZ)=>{"use strict";var fDe=V3&&V3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mDe=G3(),hDe=function(t){fDe(e,t);function e(){return t.call(this)||this}return e}(mDe);MZ.exports=hDe});var $3=k((Rst,UZ)=>{"use strict";var z3;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(z3||(z3={}));UZ.exports=z3});var qZ=k((Dst,BZ)=>{"use strict";var gDe=$3(),vDe=function(){function t(){this.kind=gDe.Measurement}return t}();BZ.exports=vDe});var jZ=k((Pst,HZ)=>{"use strict";var _De=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();HZ.exports=_De});var K3=k((W3,GZ)=>{"use strict";var yDe=W3&&W3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xDe=op(),bDe=function(t){yDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(xDe);GZ.exports=bDe});var zZ=k((Y3,VZ)=>{"use strict";var EDe=Y3&&Y3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TDe=op(),SDe=function(t){EDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(TDe);VZ.exports=SDe});var WZ=k((Nst,$Z)=>{"use strict";var CDe=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();$Z.exports=CDe});var YZ=k((Q3,KZ)=>{"use strict";var IDe=Q3&&Q3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wDe=op(),ADe=function(t){IDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(wDe);KZ.exports=ADe});var XZ=k((X3,QZ)=>{"use strict";var RDe=X3&&X3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DDe=op(),PDe=function(t){RDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(DDe);QZ.exports=PDe});var ZZ=k((J3,JZ)=>{"use strict";var NDe=J3&&J3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kDe=K3(),ODe=function(t){NDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(kDe);JZ.exports=ODe});var tee=k((Z3,eee)=>{"use strict";var LDe=Z3&&Z3.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MDe=op(),FDe=function(t){LDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(MDe);eee.exports=FDe});var nee=k((e8,ree)=>{"use strict";var UDe=e8&&e8.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BDe=op(),qDe=function(t){UDe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(BDe);ree.exports=qDe});var oee=k((kst,iee)=>{"use strict";var t8;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(t8||(t8={}));iee.exports=t8});var aee=k((Ost,see)=>{"use strict";var HDe=function(){function t(){}return t}();see.exports=HDe});var r8=k(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.AvailabilityData=NZ();ei.Base=G3();ei.ContextTagKeys=LZ();ei.Data=FZ();ei.DataPoint=qZ();ei.DataPointType=$3();ei.Domain=op();ei.Envelope=jZ();ei.EventData=K3();ei.ExceptionData=zZ();ei.ExceptionDetails=WZ();ei.MessageData=YZ();ei.MetricData=XZ();ei.PageViewData=ZZ();ei.RemoteDependencyData=tee();ei.RequestData=nee();ei.SeverityLevel=oee();ei.StackFrame=aee()});var cee=k(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});J0.domainSupportsProperties=J0.RemoteDependencyDataConstants=void 0;var ig=r8(),jDe=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();J0.RemoteDependencyDataConstants=jDe;function GDe(t){return"properties"in t||t instanceof ig.EventData||t instanceof ig.ExceptionData||t instanceof ig.MessageData||t instanceof ig.MetricData||t instanceof ig.PageViewData||t instanceof ig.RemoteDependencyData||t instanceof ig.RequestData}J0.domainSupportsProperties=GDe});var uee=k(lee=>{"use strict";Object.defineProperty(lee,"__esModule",{value:!0})});var dee=k(pee=>{"use strict";Object.defineProperty(pee,"__esModule",{value:!0})});var mee=k(fee=>{"use strict";Object.defineProperty(fee,"__esModule",{value:!0})});var gee=k(hee=>{"use strict";Object.defineProperty(hee,"__esModule",{value:!0})});var _ee=k(vee=>{"use strict";Object.defineProperty(vee,"__esModule",{value:!0})});var xee=k(yee=>{"use strict";Object.defineProperty(yee,"__esModule",{value:!0})});var Eee=k(bee=>{"use strict";Object.defineProperty(bee,"__esModule",{value:!0})});var See=k(Tee=>{"use strict";Object.defineProperty(Tee,"__esModule",{value:!0})});var Iee=k(Cee=>{"use strict";Object.defineProperty(Cee,"__esModule",{value:!0})});var Aee=k(wee=>{"use strict";Object.defineProperty(wee,"__esModule",{value:!0})});var Dee=k(Ree=>{"use strict";Object.defineProperty(Ree,"__esModule",{value:!0})});var Nee=k(Pee=>{"use strict";Object.defineProperty(Pee,"__esModule",{value:!0})});var kee=k(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.TelemetryType=Ic.TelemetryTypeString=Ic.baseTypeToTelemetryType=Ic.telemetryTypeToBaseType=void 0;function VDe(t){switch(t){case eo.Event:return"EventData";case eo.Exception:return"ExceptionData";case eo.Trace:return"MessageData";case eo.Metric:return"MetricData";case eo.Request:return"RequestData";case eo.Dependency:return"RemoteDependencyData";case eo.Availability:return"AvailabilityData";case eo.PageView:return"PageViewData"}}Ic.telemetryTypeToBaseType=VDe;function zDe(t){switch(t){case"EventData":return eo.Event;case"ExceptionData":return eo.Exception;case"MessageData":return eo.Trace;case"MetricData":return eo.Metric;case"RequestData":return eo.Request;case"RemoteDependencyData":return eo.Dependency;case"AvailabilityData":return eo.Availability;case"PageViewData":return eo.PageView}}Ic.baseTypeToTelemetryType=zDe;Ic.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var eo;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(eo=Ic.TelemetryType||(Ic.TelemetryType={}))});var Oee=k(xi=>{"use strict";var $De=xi&&xi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zs=xi&&xi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$De(e,t,r)};Object.defineProperty(xi,"__esModule",{value:!0});Zs(uee(),xi);Zs(dee(),xi);Zs(mee(),xi);Zs(gee(),xi);Zs(_ee(),xi);Zs(xee(),xi);Zs(Eee(),xi);Zs(See(),xi);Zs(Iee(),xi);Zs(Aee(),xi);Zs(Dee(),xi);Zs(Nee(),xi);Zs(kee(),xi)});var Mee=k(Lee=>{"use strict";Object.defineProperty(Lee,"__esModule",{value:!0})});var Uee=k(Fee=>{"use strict";Object.defineProperty(Fee,"__esModule",{value:!0})});var qee=k(Bee=>{"use strict";Object.defineProperty(Bee,"__esModule",{value:!0})});var jee=k(Hee=>{"use strict";Object.defineProperty(Hee,"__esModule",{value:!0})});var Vee=k(Gee=>{"use strict";Object.defineProperty(Gee,"__esModule",{value:!0})});var $ee=k(zee=>{"use strict";Object.defineProperty(zee,"__esModule",{value:!0})});var Kee=k(Wee=>{"use strict";Object.defineProperty(Wee,"__esModule",{value:!0})});var Qee=k(Yee=>{"use strict";Object.defineProperty(Yee,"__esModule",{value:!0})});var Xee=k(bs=>{"use strict";var WDe=bs&&bs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vd=bs&&bs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&WDe(e,t,r)};Object.defineProperty(bs,"__esModule",{value:!0});Vd(Mee(),bs);Vd(Uee(),bs);Vd(qee(),bs);Vd(jee(),bs);Vd(Vee(),bs);Vd($ee(),bs);Vd(Kee(),bs);Vd(Qee(),bs)});var bo=k(Sl=>{"use strict";var KDe=Sl&&Sl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mw=Sl&&Sl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&KDe(e,t,r)};Object.defineProperty(Sl,"__esModule",{value:!0});Mw(cee(),Sl);Mw(r8(),Sl);Mw(Oee(),Sl);Mw(Xee(),Sl)});var n8=k((aat,Jee)=>{"use strict";var YDe=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();Jee.exports=YDe});var vn=k(Me=>{"use strict";var wc;Object.defineProperty(Me,"__esModule",{value:!0});Me.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=Me.WEB_INSTRUMENTATION_DEFAULT_SOURCE=Me.TIME_SINCE_ENQUEUED=Me.ENQUEUED_TIME=Me.MessageBusDestination=Me.MicrosoftEventHub=Me.AzNamespace=Me.HttpRequestCookieNames=Me.StatsbeatNetworkCategory=Me.StatsbeatFeatureType=Me.StatsbeatInstrumentation=Me.StatsbeatFeature=Me.StatsbeatCounter=Me.StatsbeatAttach=Me.StatsbeatResourceProvider=Me.StatsbeatTelemetryName=Me.HeartBeatMetricName=Me.DependencyTypeName=Me.TelemetryTypeStringToQuickPulseDocumentType=Me.TelemetryTypeStringToQuickPulseType=Me.QuickPulseType=Me.QuickPulseDocumentType=Me.PerformanceToQuickPulseCounter=Me.MetricId=Me.PerformanceCounter=Me.QuickPulseCounter=Me.DEFAULT_LIVEMETRICS_HOST=Me.DEFAULT_LIVEMETRICS_ENDPOINT=Me.DEFAULT_BREEZE_ENDPOINT=Me.APPLICATION_INSIGHTS_SDK_VERSION=void 0;Me.APPLICATION_INSIGHTS_SDK_VERSION="2.9.0";Me.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Me.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Me.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Eo;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(Eo=Me.QuickPulseCounter||(Me.QuickPulseCounter={}));var Fw;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(Fw=Me.PerformanceCounter||(Me.PerformanceCounter={}));var QDe;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(QDe=Me.MetricId||(Me.MetricId={}));Me.PerformanceToQuickPulseCounter=(wc={},wc[Fw.PROCESSOR_TIME]=Eo.PROCESSOR_TIME,wc[Fw.REQUEST_RATE]=Eo.REQUEST_RATE,wc[Fw.REQUEST_DURATION]=Eo.REQUEST_DURATION,wc[Eo.COMMITTED_BYTES]=Eo.COMMITTED_BYTES,wc[Eo.REQUEST_FAILURE_RATE]=Eo.REQUEST_FAILURE_RATE,wc[Eo.DEPENDENCY_RATE]=Eo.DEPENDENCY_RATE,wc[Eo.DEPENDENCY_FAILURE_RATE]=Eo.DEPENDENCY_FAILURE_RATE,wc[Eo.DEPENDENCY_DURATION]=Eo.DEPENDENCY_DURATION,wc[Eo.EXCEPTION_RATE]=Eo.EXCEPTION_RATE,wc);Me.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};Me.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};Me.TelemetryTypeStringToQuickPulseType={EventData:Me.QuickPulseType.Event,ExceptionData:Me.QuickPulseType.Exception,MessageData:Me.QuickPulseType.Trace,MetricData:Me.QuickPulseType.Metric,RequestData:Me.QuickPulseType.Request,RemoteDependencyData:Me.QuickPulseType.Dependency,AvailabilityData:Me.QuickPulseType.Availability,PageViewData:Me.QuickPulseType.PageView};Me.TelemetryTypeStringToQuickPulseDocumentType={EventData:Me.QuickPulseDocumentType.Event,ExceptionData:Me.QuickPulseDocumentType.Exception,MessageData:Me.QuickPulseDocumentType.Trace,MetricData:Me.QuickPulseDocumentType.Metric,RequestData:Me.QuickPulseDocumentType.Request,RemoteDependencyData:Me.QuickPulseDocumentType.Dependency,AvailabilityData:Me.QuickPulseDocumentType.Availability,PageViewData:Me.QuickPulseDocumentType.PageView};Me.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};Me.HeartBeatMetricName="HeartbeatState";Me.StatsbeatTelemetryName="Statsbeat";Me.StatsbeatResourceProvider={appsvc:"appsvc",functions:"functions",vm:"vm",unknown:"unknown"};Me.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};Me.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var XDe;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.WEB_SNIPPET=4]="WEB_SNIPPET"})(XDe=Me.StatsbeatFeature||(Me.StatsbeatFeature={}));var JDe;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(JDe=Me.StatsbeatInstrumentation||(Me.StatsbeatInstrumentation={}));var ZDe;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})(ZDe=Me.StatsbeatFeatureType||(Me.StatsbeatFeatureType={}));var ePe;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(ePe=Me.StatsbeatNetworkCategory||(Me.StatsbeatNetworkCategory={}));var tPe;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(tPe=Me.HttpRequestCookieNames||(Me.HttpRequestCookieNames={}));Me.AzNamespace="az.namespace";Me.MicrosoftEventHub="Microsoft.EventHub";Me.MessageBusDestination="message_bus.destination";Me.ENQUEUED_TIME="enqueuedTime";Me.TIME_SINCE_ENQUEUED="timeSinceEnqueued";Me.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";Me.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var a8=k((s8,Zee)=>{"use strict";var rPe=s8&&s8.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uw=require("url"),nPe=bo(),i8=Ji(),ea=Q0(),iPe=n8(),zd=ng(),oPe=H3(),o8=Lw(),sPe=Jr(),Bw=vn(),aPe=function(t){rPe(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new Uw.URL(this.url).pathname}catch{}var i={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?i.time=r.time:this.startTime&&(i.time=new Date(this.startTime)),r){for(var o in r)i[o]||(i[o]=r[o]);if(r.properties)for(var o in r.properties)i.properties[o]=r.properties[o]}return i},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(Bw.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(Bw.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(Bw.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new Uw.URL(this.url).pathname}catch{}var i=this.method;return n&&(i+=" "+n),i},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s="",a="";try{var l=new Uw.URL(r.url,o);s=l.pathname,a=l.search}catch{}var c=Uw.format({protocol:i,host:r.headers.host,pathname:s,search:a});return c},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===Bw.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(o){n="",sPe.warn("Could not decode the auth cookie with error: ",i8.dumpObj(o))}var i=e.parseId(i8.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=i8.getCorrelationContextTarget(r,ea.requestContextSourceKey),r.headers){var i=r.headers[ea.traceStateHeader]?r.headers[ea.traceStateHeader].toString():null,o=r.headers[ea.traceparentHeader]?r.headers[ea.traceparentHeader].toString():null,s=r.headers[ea.requestIdHeader]?r.headers[ea.requestIdHeader].toString():null,a=r.headers[ea.parentIdHeader]?r.headers[ea.parentIdHeader].toString():null,l=r.headers[ea.rootIdHeader]?r.headers[ea.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[ea.correlationContextHeader]?r.headers[ea.correlationContextHeader].toString():null,zd.w3cEnabled&&(o||i)?(this.traceparent=new o8(o?o.toString():null),this.tracestate=o&&i&&new oPe(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?zd.w3cEnabled?(this.traceparent=new o8(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=zd.generateRequestId(this.parentId),this.operationId=zd.getRootId(this.requestId)):zd.w3cEnabled?(this.traceparent=new o8,this.traceparent.parentId=a,this.traceparent.legacyRootId=l||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=zd.generateRequestId(l||this.parentId),this.correlationContextHeader=null,this.operationId=zd.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=zd.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new nPe.ContextTagKeys,e}(iPe);Zee.exports=aPe});var gte=k((Tt,hte)=>{Tt=hte.exports=er;var Cr;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Cr=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Cr=function(){};Tt.SEMVER_SPEC_VERSION="2.0.0";var Ab=256,qw=Number.MAX_SAFE_INTEGER||9007199254740991,c8=16,cPe=Ab-6,Rb=Tt.re=[],Gr=Tt.safeRe=[],Re=Tt.src=[],Yt=0,f8="[a-zA-Z0-9-]",l8=[["\\s",1],["\\d",Ab],[f8,cPe]];function $w(t){for(var e=0;e<l8.length;e++){var r=l8[e][0],n=l8[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Z0=Yt++;Re[Z0]="0|[1-9]\\d*";var e_=Yt++;Re[e_]="\\d+";var m8=Yt++;Re[m8]="\\d*[a-zA-Z-]"+f8+"*";var tte=Yt++;Re[tte]="("+Re[Z0]+")\\.("+Re[Z0]+")\\.("+Re[Z0]+")";var rte=Yt++;Re[rte]="("+Re[e_]+")\\.("+Re[e_]+")\\.("+Re[e_]+")";var u8=Yt++;Re[u8]="(?:"+Re[Z0]+"|"+Re[m8]+")";var p8=Yt++;Re[p8]="(?:"+Re[e_]+"|"+Re[m8]+")";var h8=Yt++;Re[h8]="(?:-("+Re[u8]+"(?:\\."+Re[u8]+")*))";var g8=Yt++;Re[g8]="(?:-?("+Re[p8]+"(?:\\."+Re[p8]+")*))";var d8=Yt++;Re[d8]=f8+"+";var Pb=Yt++;Re[Pb]="(?:\\+("+Re[d8]+"(?:\\."+Re[d8]+")*))";var v8=Yt++,nte="v?"+Re[tte]+Re[h8]+"?"+Re[Pb]+"?";Re[v8]="^"+nte+"$";var _8="[v=\\s]*"+Re[rte]+Re[g8]+"?"+Re[Pb]+"?",y8=Yt++;Re[y8]="^"+_8+"$";var o_=Yt++;Re[o_]="((?:<|>)?=?)";var Hw=Yt++;Re[Hw]=Re[e_]+"|x|X|\\*";var jw=Yt++;Re[jw]=Re[Z0]+"|x|X|\\*";var og=Yt++;Re[og]="[v=\\s]*("+Re[jw]+")(?:\\.("+Re[jw]+")(?:\\.("+Re[jw]+")(?:"+Re[h8]+")?"+Re[Pb]+"?)?)?";var r_=Yt++;Re[r_]="[v=\\s]*("+Re[Hw]+")(?:\\.("+Re[Hw]+")(?:\\.("+Re[Hw]+")(?:"+Re[g8]+")?"+Re[Pb]+"?)?)?";var ite=Yt++;Re[ite]="^"+Re[o_]+"\\s*"+Re[og]+"$";var ote=Yt++;Re[ote]="^"+Re[o_]+"\\s*"+Re[r_]+"$";var ste=Yt++;Re[ste]="(?:^|[^\\d])(\\d{1,"+c8+"})(?:\\.(\\d{1,"+c8+"}))?(?:\\.(\\d{1,"+c8+"}))?(?:$|[^\\d])";var Ww=Yt++;Re[Ww]="(?:~>?)";var n_=Yt++;Re[n_]="(\\s*)"+Re[Ww]+"\\s+";Rb[n_]=new RegExp(Re[n_],"g");Gr[n_]=new RegExp($w(Re[n_]),"g");var lPe="$1~",ate=Yt++;Re[ate]="^"+Re[Ww]+Re[og]+"$";var cte=Yt++;Re[cte]="^"+Re[Ww]+Re[r_]+"$";var Kw=Yt++;Re[Kw]="(?:\\^)";var i_=Yt++;Re[i_]="(\\s*)"+Re[Kw]+"\\s+";Rb[i_]=new RegExp(Re[i_],"g");Gr[i_]=new RegExp($w(Re[i_]),"g");var uPe="$1^",lte=Yt++;Re[lte]="^"+Re[Kw]+Re[og]+"$";var ute=Yt++;Re[ute]="^"+Re[Kw]+Re[r_]+"$";var x8=Yt++;Re[x8]="^"+Re[o_]+"\\s*("+_8+")$|^$";var b8=Yt++;Re[b8]="^"+Re[o_]+"\\s*("+nte+")$|^$";var sg=Yt++;Re[sg]="(\\s*)"+Re[o_]+"\\s*("+_8+"|"+Re[og]+")";Rb[sg]=new RegExp(Re[sg],"g");Gr[sg]=new RegExp($w(Re[sg]),"g");var pPe="$1$2$3",pte=Yt++;Re[pte]="^\\s*("+Re[og]+")\\s+-\\s+("+Re[og]+")\\s*$";var dte=Yt++;Re[dte]="^\\s*("+Re[r_]+")\\s+-\\s+("+Re[r_]+")\\s*$";var fte=Yt++;Re[fte]="(<|>)?=?\\s*\\*";for(Cl=0;Cl<Yt;Cl++)Cr(Cl,Re[Cl]),Rb[Cl]||(Rb[Cl]=new RegExp(Re[Cl]),Gr[Cl]=new RegExp($w(Re[Cl])));var Cl;Tt.parse=ag;function ag(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof er)return t;if(typeof t!="string"||t.length>Ab)return null;var r=e.loose?Gr[y8]:Gr[v8];if(!r.test(t))return null;try{return new er(t,e)}catch{return null}}Tt.valid=dPe;function dPe(t,e){var r=ag(t,e);return r?r.version:null}Tt.clean=fPe;function fPe(t,e){var r=ag(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Tt.SemVer=er;function er(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof er){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Ab)throw new TypeError("version is longer than "+Ab+" characters");if(!(this instanceof er))return new er(t,e);Cr("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Gr[y8]:Gr[v8]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>qw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<qw)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}er.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};er.prototype.toString=function(){return this.version};er.prototype.compare=function(t){return Cr("SemVer.compare",this.version,this.options,t),t instanceof er||(t=new er(t,this.options)),this.compareMain(t)||this.comparePre(t)};er.prototype.compareMain=function(t){return t instanceof er||(t=new er(t,this.options)),t_(this.major,t.major)||t_(this.minor,t.minor)||t_(this.patch,t.patch)};er.prototype.comparePre=function(t){if(t instanceof er||(t=new er(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Cr("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return t_(r,n)}while(++e)};er.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Tt.inc=mPe;function mPe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new er(t,r).inc(e,n).version}catch{return null}}Tt.diff=hPe;function hPe(t,e){if(E8(t,e))return null;var r=ag(t),n=ag(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Tt.compareIdentifiers=t_;var ete=/^[0-9]+$/;function t_(t,e){var r=ete.test(t),n=ete.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Tt.rcompareIdentifiers=gPe;function gPe(t,e){return t_(e,t)}Tt.major=vPe;function vPe(t,e){return new er(t,e).major}Tt.minor=_Pe;function _Pe(t,e){return new er(t,e).minor}Tt.patch=yPe;function yPe(t,e){return new er(t,e).patch}Tt.compare=sp;function sp(t,e,r){return new er(t,r).compare(new er(e,r))}Tt.compareLoose=xPe;function xPe(t,e){return sp(t,e,!0)}Tt.rcompare=bPe;function bPe(t,e,r){return sp(e,t,r)}Tt.sort=EPe;function EPe(t,e){return t.sort(function(r,n){return Tt.compare(r,n,e)})}Tt.rsort=TPe;function TPe(t,e){return t.sort(function(r,n){return Tt.rcompare(r,n,e)})}Tt.gt=Db;function Db(t,e,r){return sp(t,e,r)>0}Tt.lt=Gw;function Gw(t,e,r){return sp(t,e,r)<0}Tt.eq=E8;function E8(t,e,r){return sp(t,e,r)===0}Tt.neq=mte;function mte(t,e,r){return sp(t,e,r)!==0}Tt.gte=T8;function T8(t,e,r){return sp(t,e,r)>=0}Tt.lte=S8;function S8(t,e,r){return sp(t,e,r)<=0}Tt.cmp=Vw;function Vw(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return E8(t,r,n);case"!=":return mte(t,r,n);case">":return Db(t,r,n);case">=":return T8(t,r,n);case"<":return Gw(t,r,n);case"<=":return S8(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Tt.Comparator=Oa;function Oa(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Oa){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Oa))return new Oa(t,e);t=t.trim().split(/\s+/).join(" "),Cr("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Nb?this.value="":this.value=this.operator+this.semver.version,Cr("comp",this)}var Nb={};Oa.prototype.parse=function(t){var e=this.options.loose?Gr[x8]:Gr[b8],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new er(r[2],this.options.loose):this.semver=Nb};Oa.prototype.toString=function(){return this.value};Oa.prototype.test=function(t){return Cr("Comparator.test",t,this.options.loose),this.semver===Nb?!0:(typeof t=="string"&&(t=new er(t,this.options)),Vw(t,this.operator,this.semver,this.options))};Oa.prototype.intersects=function(t,e){if(!(t instanceof Oa))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new _n(t.value,e),zw(this.value,r,e);if(t.operator==="")return r=new _n(this.value,e),zw(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=Vw(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=Vw(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||l};Tt.Range=_n;function _n(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof _n)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new _n(t.raw,e);if(t instanceof Oa)return new _n(t.value,e);if(!(this instanceof _n))return new _n(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}_n.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};_n.prototype.toString=function(){return this.range};_n.prototype.parseRange=function(t){var e=this.options.loose,r=e?Gr[dte]:Gr[pte];t=t.replace(r,kPe),Cr("hyphen replace",t),t=t.replace(Gr[sg],pPe),Cr("comparator trim",t,Gr[sg]),t=t.replace(Gr[n_],lPe),t=t.replace(Gr[i_],uPe);var n=e?Gr[x8]:Gr[b8],i=t.split(" ").map(function(o){return CPe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Oa(o,this.options)},this),i};_n.prototype.intersects=function(t,e){if(!(t instanceof _n))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Tt.toComparators=SPe;function SPe(t,e){return new _n(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function CPe(t,e){return Cr("comp",t,e),t=APe(t,e),Cr("caret",t),t=IPe(t,e),Cr("tildes",t),t=DPe(t,e),Cr("xrange",t),t=NPe(t,e),Cr("stars",t),t}function Qo(t){return!t||t.toLowerCase()==="x"||t==="*"}function IPe(t,e){return t.trim().split(/\s+/).map(function(r){return wPe(r,e)}).join(" ")}function wPe(t,e){var r=e.loose?Gr[cte]:Gr[ate];return t.replace(r,function(n,i,o,s,a){Cr("tilde",t,n,i,o,s,a);var l;return Qo(i)?l="":Qo(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Qo(s)?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Cr("replaceTilde pr",a),l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Cr("tilde return",l),l})}function APe(t,e){return t.trim().split(/\s+/).map(function(r){return RPe(r,e)}).join(" ")}function RPe(t,e){Cr("caret",t,e);var r=e.loose?Gr[ute]:Gr[lte];return t.replace(r,function(n,i,o,s,a){Cr("caret",t,n,i,o,s,a);var l;return Qo(i)?l="":Qo(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Qo(s)?i==="0"?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Cr("replaceCaret pr",a),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Cr("no pr"),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Cr("caret return",l),l})}function DPe(t,e){return Cr("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return PPe(r,e)}).join(" ")}function PPe(t,e){t=t.trim();var r=e.loose?Gr[ote]:Gr[ite];return t.replace(r,function(n,i,o,s,a,l){Cr("xRange",t,n,i,o,s,a,l);var c=Qo(o),u=c||Qo(s),p=u||Qo(a),d=p;return i==="="&&d&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):u?n=">="+o+".0.0 <"+(+o+1)+".0.0":p&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Cr("xRange return",n),n})}function NPe(t,e){return Cr("replaceStars",t,e),t.trim().replace(Gr[fte],"")}function kPe(t,e,r,n,i,o,s,a,l,c,u,p,d){return Qo(r)?e="":Qo(n)?e=">="+r+".0.0":Qo(i)?e=">="+r+"."+n+".0":e=">="+e,Qo(l)?a="":Qo(c)?a="<"+(+l+1)+".0.0":Qo(u)?a="<"+l+"."+(+c+1)+".0":p?a="<="+l+"."+c+"."+u+"-"+p:a="<="+a,(e+" "+a).trim()}_n.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new er(t,this.options));for(var e=0;e<this.set.length;e++)if(OPe(this.set[e],t,this.options))return!0;return!1};function OPe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Cr(t[n].semver),t[n].semver!==Nb&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Tt.satisfies=zw;function zw(t,e,r){try{e=new _n(e,r)}catch{return!1}return e.test(t)}Tt.maxSatisfying=LPe;function LPe(t,e,r){var n=null,i=null;try{var o=new _n(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new er(n,r))}),n}Tt.minSatisfying=MPe;function MPe(t,e,r){var n=null,i=null;try{var o=new _n(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new er(n,r))}),n}Tt.minVersion=FPe;function FPe(t,e){t=new _n(t,e);var r=new er("0.0.0");if(t.test(r)||(r=new er("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new er(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Db(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Tt.validRange=UPe;function UPe(t,e){try{return new _n(t,e).range||"*"}catch{return null}}Tt.ltr=BPe;function BPe(t,e,r){return C8(t,e,"<",r)}Tt.gtr=qPe;function qPe(t,e,r){return C8(t,e,">",r)}Tt.outside=C8;function C8(t,e,r,n){t=new er(t,n),e=new _n(e,n);var i,o,s,a,l;switch(r){case">":i=Db,o=S8,s=Gw,a=">",l=">=";break;case"<":i=Gw,o=T8,s=Db,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zw(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],p=null,d=null;if(u.forEach(function(f){f.semver===Nb&&(f=new Oa(">=0.0.0")),p=p||f,d=d||f,i(f.semver,p.semver,n)?p=f:s(f.semver,d.semver,n)&&(d=f)}),p.operator===a||p.operator===l||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===l&&s(t,d.semver))return!1}return!0}Tt.prerelease=HPe;function HPe(t,e){var r=ag(t,e);return r&&r.prerelease.length?r.prerelease:null}Tt.intersects=jPe;function jPe(t,e,r){return t=new _n(t,r),e=new _n(e,r),t.intersects(e)}Tt.coerce=GPe;function GPe(t){if(t instanceof er)return t;if(typeof t!="string")return null;var e=t.match(Gr[ste]);return e==null?null:ag(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Yw=k((lat,yte)=>{"use strict";function I8(t){return typeof t=="function"}var Xo=console.error.bind(console);function kb(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Ob(t){t&&t.logger&&(I8(t.logger)?Xo=t.logger:Xo("new logger isn't a function, not replacing"))}function vte(t,e,r){if(!t||!t[e]){Xo("no original function "+e+" to wrap");return}if(!r){Xo("no wrapper function"),Xo(new Error().stack);return}if(!I8(t[e])||!I8(r)){Xo("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return kb(i,"__original",n),kb(i,"__unwrap",function(){t[e]===i&&kb(t,e,n)}),kb(i,"__wrapped",!0),kb(t,e,i),i}function VPe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Xo("must provide one or more modules to patch"),Xo(new Error().stack);return}if(!(e&&Array.isArray(e))){Xo("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){vte(n,i,r)})})}function _te(t,e){if(!t||!t[e]){Xo("no function to unwrap."),Xo(new Error().stack);return}if(!t[e].__unwrap)Xo("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function zPe(t,e){if(t)Array.isArray(t)||(t=[t]);else{Xo("must provide one or more modules to patch"),Xo(new Error().stack);return}if(!(e&&Array.isArray(e))){Xo("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){_te(r,n)})})}Ob.wrap=vte;Ob.massWrap=VPe;Ob.unwrap=_te;Ob.massUnwrap=zPe;yte.exports=Ob});var Jw=k((uat,Tte)=>{"use strict";var bte=Yw(),s_=bte.wrap,Qw=bte.unwrap,ap="wrap@before";function Xw(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function $Pe(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[ap];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Ete(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function WPe(t,e,r){var n=Ete(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&$Pe(t,i)}function xte(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}Tte.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(l,c){var u=Ete(this,l).slice();try{var p=s.call(this,l,c);return WPe(this,l,u),p}finally{this.on.__wrapped||s_(this,"on",i),this.addListener.__wrapped||s_(this,"addListener",i)}}}function o(s){return function(l){if(!this._events||!this._events[l])return s.apply(this,arguments);var c=this._events[l];function u(p){return function(){this._events[l]=c;try{return p.apply(this,arguments)}finally{c=this._events[l],this._events[l]=xte(c,n)}}}s_(this,"removeListener",u);try{return this._events[l]=xte(c,n),s.apply(this,arguments)}finally{Qw(this,"removeListener"),this._events[l]=c}}}e[ap]?typeof e[ap]=="function"?Xw(e,ap,[e[ap],r]):Array.isArray(e[ap])&&e[ap].push(r):Xw(e,ap,r),e.__wrapped||(s_(e,"addListener",i),s_(e,"on",i),s_(e,"emit",o),Xw(e,"__unwrap",function(){Qw(e,"addListener"),Qw(e,"on"),Qw(e,"emit"),delete e[ap],delete e.__wrapped}),Xw(e,"__wrapped",!0))}});var wte=k((pat,Ite)=>{"use strict";var _r=require("util"),cp=require("assert"),KPe=Jw(),en=require("async_hooks"),Lb="cls@contexts",Mb="error@context",yn=process.env.DEBUG_CLS_HOOKED,vr=-1;Ite.exports={getNamespace:Ste,createNamespace:YPe,destroyNamespace:Cte,reset:QPe,ERROR_SYMBOL:Mb};function La(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}La.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,yn){let n=" ".repeat(this._indent<0?0:this._indent);un(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+vr+" active:"+_r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};La.prototype.get=function(e){if(!this.active){if(yn){let r=en.currentId(),n=en.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);un(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${vr} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(yn){let r=en.executionAsyncId(),n=en.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);un(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+vr+" active:"+_r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),un(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${vr} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${_r.inspect(this.active)}`)}return this.active[e]};La.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=vr,yn){let r=en.executionAsyncId(),n=en.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);un(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${vr} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${_r.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};La.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(yn){let n=en.triggerAsyncId(),i=en.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);un(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${vr} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${_r.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[Mb]=r),n}finally{if(yn){let n=en.triggerAsyncId(),i=en.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);un(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${vr} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${_r.inspect(r)}`)}this.exit(r)}};La.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};La.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return yn&&un("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+vr+" len:"+this._set.length+" "+_r.inspect(r)),n.then(i=>(yn&&un("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+vr+" len:"+this._set.length+" "+_r.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Mb]=r,yn&&un("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+vr+" len:"+this._set.length+" "+_r.inspect(r)),this.exit(r),i})};La.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[Mb]=r),o}finally{n.exit(r)}}};La.prototype.enter=function(e){if(cp.ok(e,"context must be provided for entering"),yn){let r=en.executionAsyncId(),n=en.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);un(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${vr} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${_r.inspect(e)}`)}this._set.push(this.active),this.active=e};La.prototype.exit=function(e){if(cp.ok(e,"context must be provided for exiting"),yn){let n=en.executionAsyncId(),i=en.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);un(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${vr} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${_r.inspect(e)}`)}if(this.active===e){cp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(yn&&un("??ERROR?? context exiting but not entered - ignoring: "+_r.inspect(e)),cp.ok(r>=0,`context not currently entered; can't exit. 
`+_r.inspect(this)+`
`+_r.inspect(e))):(cp.ok(r,"can't remove top context"),this._set.splice(r,1))};La.prototype.bindEmitter=function(e){cp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[Lb]||(s[Lb]=Object.create(null)),s[Lb][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[Lb]))return s;let a=s,l=s[Lb];return Object.keys(l).forEach(function(c){let u=l[c];a=u.namespace.bind(a,u.context)}),a}KPe(e,i,o)};La.prototype.fromException=function(e){return e[Mb]};function Ste(t){return process.namespaces[t]}function YPe(t){cp.ok(t,"namespace must be given a name."),yn&&un(`NS-CREATING NAMESPACE (${t})`);let e=new La(t);return e.id=vr,en.createHook({init(n,i,o,s){if(vr=en.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),yn){let a=" ".repeat(e._indent<0?0:e._indent);un(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${vr} triggerId:${o} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(vr===0){let a=en.triggerAsyncId(),l=e._contexts.get(a);if(l){if(e._contexts.set(n,l),yn){let c=" ".repeat(e._indent<0?0:e._indent);un(`${c}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${vr} triggerId:${a} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(yn){let c=" ".repeat(e._indent<0?0:e._indent);un(`${c}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${vr} triggerId:${a} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(yn&&i==="PROMISE"){un(_r.inspect(s,{showHidden:!0}));let a=s.parentId,l=" ".repeat(e._indent<0?0:e._indent);un(`${l}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${vr} triggerId:${o} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){vr=en.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(vr),i){if(yn){let o=en.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);un(`${s}BEFORE (${t}) asyncId:${n} currentUid:${vr} triggerId:${o} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${_r.inspect(i)}`),e._indent+=2}e.enter(i)}else if(yn){let o=en.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);un(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${vr} triggerId:${o} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${_r.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){vr=en.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(vr),i){if(yn){let o=en.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);un(`${s}AFTER (${t}) asyncId:${n} currentUid:${vr} triggerId:${o} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${_r.inspect(i)}`)}e.exit(i)}else if(yn){let o=en.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);un(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${vr} triggerId:${o} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${_r.inspect(i)}`)}},destroy(n){if(vr=en.executionAsyncId(),yn){let i=en.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);un(`${o}DESTROY (${t}) currentUid:${vr} asyncId:${n} triggerId:${i} active:${_r.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${_r.inspect(e._contexts.get(vr))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function Cte(t){let e=Ste(t);cp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),cp.ok(e.id,"don't assign to process.namespaces directly! "+_r.inspect(e)),process.namespaces[t]=null}function QPe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Cte(t)}),process.namespaces=Object.create(null)}process.namespaces={};function un(...t){yn&&process._rawDebug(`${_r.format(...t)}`)}});var Rte=k((dat,Ate)=>{"use strict";function XPe(){}Ate.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let l=0;l<arguments.length;l++)i[l]=arguments[l];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new XPe,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let l=!0;try{o.apply(this,arguments),l=!1}finally{l&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var Pte=k((fat,Dte)=>{"use strict";function JPe(){}Dte.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=l;function o(c,u,p,d){return typeof c!="function"?d?s(p):a(p):function(){e.pre.call(u,p);try{return c.apply(this,arguments)}finally{e.post.call(u,p,!1),e.destroy.call(null,p)}}}function s(c){return function(p){return e.destroy.call(null,c),p}}function a(c){return function(p){throw e.destroy.call(null,c),p}}function l(c,u){if(!r.enabled)return i.call(this,c,u);let p=new JPe,d=--r.counter;return e.init.call(p,d,0,null,null),i.call(this,o(c,p,d,!0),o(u,p,d,!1))}}});var kte=k((mat,Nte)=>{"use strict";var ta=require("timers");function ZPe(){}function eNe(){}function tNe(){}var rNe=new Map,nNe=new Map,iNe=new Map,w8=null,A8=!1;Nte.exports=function(){R8(this._hooks,this._state,"setTimeout","clearTimeout",ZPe,rNe,!0),R8(this._hooks,this._state,"setInterval","clearInterval",eNe,nNe,!1),R8(this._hooks,this._state,"setImmediate","clearImmediate",tNe,iNe,!0),global.setTimeout=ta.setTimeout,global.setInterval=ta.setInterval,global.setImmediate=ta.setImmediate,global.clearTimeout=ta.clearTimeout,global.clearInterval=ta.clearInterval,global.clearImmediate=ta.clearImmediate};function R8(t,e,r,n,i,o,s){let a=ta[r],l=ta[n];ta[r]=function(){if(!e.enabled)return a.apply(ta,arguments);let c=new Array(arguments.length);for(let m=0;m<arguments.length;m++)c[m]=arguments[m];let u=c[0];if(typeof u!="function")throw new TypeError('"callback" argument must be a function');let p=new i,d=--e.counter,f;return t.init.call(p,d,0,null,null),c[0]=function(){w8=f,t.pre.call(p,d);let m=!0;try{u.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(p,d,!0),o.delete(f),t.destroy.call(null,d)})}t.post.call(p,d,!1),w8=null,(s||A8)&&(A8=!1,o.delete(f),t.destroy.call(null,d))},f=a.apply(ta,c),o.set(f,d),f},ta[n]=function(c){if(w8===c&&c!==null)A8=!0;else if(o.has(c)){let u=o.get(c);o.delete(c),t.destroy.call(null,u)}l.apply(ta,arguments)}}});var D8=k((hat,oNe)=>{oNe.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var Mte=k((gat,Lte)=>{"use strict";var Ub=process.binding("async_wrap"),sNe=Ub.Providers.TIMERWRAP,Ote={nextTick:Rte(),promise:Pte(),timers:kte()},Fb=new Set;function aNe(){this.enabled=!1,this.counter=0}function P8(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===sNe){Fb.add(i);return}for(let l of t)l(i,this,o,s,a)},this.pre=function(i){if(!Fb.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!Fb.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(Fb.has(i)){Fb.delete(i);return}for(let o of n)o(i)}}P8.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function Zw(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}P8.prototype.remove=function(t){t.init&&Zw(this.initFns,t.init),t.pre&&Zw(this.preFns,t.pre),t.post&&Zw(this.postFns,t.post),t.destroy&&Zw(this.destroyFns,t.destroy)};function Bb(){this._state=new aNe,this._hooks=new P8,this.version=D8().version,this.providers=Ub.Providers;for(let t of Object.keys(Ote))Ote[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),Ub.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Lte.exports=Bb;Bb.prototype.addHooks=function(t){this._hooks.add(t)};Bb.prototype.removeHooks=function(t){this._hooks.remove(t)};Bb.prototype.enable=function(){this._state.enabled=!0,Ub.enable()};Bb.prototype.disable=function(){this._state.enabled=!1,Ub.disable()}});var N8=k((vat,cNe)=>{cNe.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var Ute=k((_at,Fte)=>{function lNe(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}Fte.exports=function(e,r){var n=[];n.push(lNe(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var jte=k((yat,Hte)=>{var eA=Ute();function qte(){this.extend=new qb,this.filter=new qb,this.format=new Hb,this.version=N8().version}var O8=!1;qte.prototype.callSite=function t(e){e||(e={}),O8=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return O8=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var $d=new qte;function qb(){this._modifiers=[]}qb.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};qb.prototype.attach=function(t){this._modifiers.push(t)};qb.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function Hb(){this._formater=eA,this._previous=void 0}Hb.prototype.replace=function(t){t?this._formater=t:this.restore()};Hb.prototype.restore=function(){this._formater=eA,this._previous=void 0};Hb.prototype._backup=function(){this._previous=this._formater};Hb.prototype._roolback=function(){this._previous===eA?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&$d.format.replace(Error.prepareStackTrace);var k8=!1;function Bte(t,e){if(O8)return e;if(k8)return eA(t,e);var r=e.concat();r=$d.extend._modify(t,r),r=$d.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),k8=!0;var n=$d.format._formater(t,r);return k8=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Bte},set:function(t){t===Bte?$d.format._roolback():($d.format._backup(),$d.format.replace(t))}});function uNe(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:uNe,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});Hte.exports=$d});var M8=k((xat,L8)=>{if(global._stackChain)if(global._stackChain.version===N8().version)L8.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else L8.exports=global._stackChain=jte()});var Gte=k((bat,F8)=>{"use strict";var pNe=Mte();if(global._asyncHook)if(global._asyncHook.version===D8().version)F8.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else M8().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),F8.exports=global._asyncHook=new pNe});var Yte=k((Eat,Kte)=>{"use strict";var zn=require("util"),lp=require("assert"),dNe=Jw(),a_=Gte(),jb="cls@contexts",Gb="error@context",zte=[];for(let t in a_.providers)zte[a_.providers[t]]=t;var kn=process.env.DEBUG_CLS_HOOKED,ti=-1;Kte.exports={getNamespace:$te,createNamespace:fNe,destroyNamespace:Wte,reset:mNe,ERROR_SYMBOL:Gb};function Ma(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Ma.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return kn&&Vn("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+ti+" active:"+zn.inspect(this.active,!0)),this.active[e]=r,r};Ma.prototype.get=function(e){if(!this.active){kn&&Vn("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+ti+" active:"+zn.inspect(this.active,!0));return}return kn&&Vn("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+ti+" active:"+zn.inspect(this.active,!0)),this.active[e]};Ma.prototype.createContext=function(){kn&&Vn("   CREATING Context: "+this.name+" uid:"+ti+" len:"+this._set.length+"  active:"+zn.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=ti,kn&&Vn("   CREATED Context: "+this.name+" uid:"+ti+" len:"+this._set.length+"  context:"+zn.inspect(e,!0,2,!0)),e};Ma.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return kn&&Vn(" BEFORE RUN: "+this.name+" uid:"+ti+" len:"+this._set.length+" "+zn.inspect(r)),e(r),r}catch(n){throw n&&(n[Gb]=r),n}finally{kn&&Vn(" AFTER RUN: "+this.name+" uid:"+ti+" len:"+this._set.length+" "+zn.inspect(r)),this.exit(r)}};Ma.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Ma.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return kn&&Vn(" BEFORE runPromise: "+this.name+" uid:"+ti+" len:"+this._set.length+" "+zn.inspect(r)),n.then(i=>(kn&&Vn(" AFTER runPromise: "+this.name+" uid:"+ti+" len:"+this._set.length+" "+zn.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Gb]=r,kn&&Vn(" AFTER runPromise: "+this.name+" uid:"+ti+" len:"+this._set.length+" "+zn.inspect(r)),this.exit(r),i})};Ma.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[Gb]=r),o}finally{n.exit(r)}}};Ma.prototype.enter=function(e){lp.ok(e,"context must be provided for entering"),kn&&Vn("  ENTER "+this.name+" uid:"+ti+" len:"+this._set.length+" context: "+zn.inspect(e)),this._set.push(this.active),this.active=e};Ma.prototype.exit=function(e){if(lp.ok(e,"context must be provided for exiting"),kn&&Vn("  EXIT "+this.name+" uid:"+ti+" len:"+this._set.length+" context: "+zn.inspect(e)),this.active===e){lp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(kn&&Vn("??ERROR?? context exiting but not entered - ignoring: "+zn.inspect(e)),lp.ok(r>=0,`context not currently entered; can't exit. 
`+zn.inspect(this)+`
`+zn.inspect(e))):(lp.ok(r,"can't remove top context"),this._set.splice(r,1))};Ma.prototype.bindEmitter=function(e){lp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[jb]||(s[jb]=Object.create(null)),s[jb][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[jb]))return s;let a=s,l=s[jb];return Object.keys(l).forEach(function(c){let u=l[c];a=u.namespace.bind(a,u.context)}),a}dNe(e,i,o)};Ma.prototype.fromException=function(e){return e[Gb]};function $te(t){return process.namespaces[t]}function fNe(t){lp.ok(t,"namespace must be given a name."),kn&&Vn("CREATING NAMESPACE "+t);let e=new Ma(t);return e.id=ti,a_.addHooks({init(r,n,i,o,s){ti=r,o?(e._contexts.set(r,e._contexts.get(o)),kn&&Vn("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(ti,e.active),kn&&Vn("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+zte[i]+" active:"+zn.inspect(e.active,!0))},pre(r,n){ti=r;let i=e._contexts.get(r);i?(kn&&Vn(" PRE "+t+" uid:"+r+" handle:"+tA(n)+" context:"+zn.inspect(i)),e.enter(i)):kn&&Vn(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+tA(n))},post(r,n){ti=r;let i=e._contexts.get(r);i?(kn&&Vn(" POST "+t+" uid:"+r+" handle:"+tA(n)+" context:"+zn.inspect(i)),e.exit(i)):kn&&Vn(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+tA(n))},destroy(r){ti=r,kn&&Vn("DESTROY "+t+" uid:"+r+" context:"+zn.inspect(e._contexts.get(ti))+" active:"+zn.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function Wte(t){let e=$te(t);lp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),lp.ok(e.id,"don't assign to process.namespaces directly! "+zn.inspect(e)),process.namespaces[t]=null}function mNe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Wte(t)}),process.namespaces=Object.create(null)}process.namespaces={};a_._state&&!a_._state.enabled&&a_.enable();function Vn(t){process.env.DEBUG&&process._rawDebug(t)}function tA(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(kn){U8=M8();for(Vte in U8.filter._modifiers)U8.filter.deattach(Vte)}var U8,Vte});var Qte=k((Tat,B8)=>{"use strict";var hNe=gte();process&&hNe.gte(process.versions.node,"8.0.0")?B8.exports=wte():B8.exports=Yte()});var fre=k((St,dre)=>{St=dre.exports=tr;var Ir;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Ir=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Ir=function(){};St.SEMVER_SPEC_VERSION="2.0.0";var Vb=256,rA=Number.MAX_SAFE_INTEGER||9007199254740991,q8=16,gNe=Vb-6,zb=St.re=[],Vr=St.safeRe=[],De=St.src=[],Qt=0,z8="[a-zA-Z0-9-]",H8=[["\\s",1],["\\d",Vb],[z8,gNe]];function cA(t){for(var e=0;e<H8.length;e++){var r=H8[e][0],n=H8[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var c_=Qt++;De[c_]="0|[1-9]\\d*";var l_=Qt++;De[l_]="\\d+";var $8=Qt++;De[$8]="\\d*[a-zA-Z-]"+z8+"*";var Jte=Qt++;De[Jte]="("+De[c_]+")\\.("+De[c_]+")\\.("+De[c_]+")";var Zte=Qt++;De[Zte]="("+De[l_]+")\\.("+De[l_]+")\\.("+De[l_]+")";var j8=Qt++;De[j8]="(?:"+De[c_]+"|"+De[$8]+")";var G8=Qt++;De[G8]="(?:"+De[l_]+"|"+De[$8]+")";var W8=Qt++;De[W8]="(?:-("+De[j8]+"(?:\\."+De[j8]+")*))";var K8=Qt++;De[K8]="(?:-?("+De[G8]+"(?:\\."+De[G8]+")*))";var V8=Qt++;De[V8]=z8+"+";var Wb=Qt++;De[Wb]="(?:\\+("+De[V8]+"(?:\\."+De[V8]+")*))";var Y8=Qt++,ere="v?"+De[Jte]+De[W8]+"?"+De[Wb]+"?";De[Y8]="^"+ere+"$";var Q8="[v=\\s]*"+De[Zte]+De[K8]+"?"+De[Wb]+"?",X8=Qt++;De[X8]="^"+Q8+"$";var m_=Qt++;De[m_]="((?:<|>)?=?)";var nA=Qt++;De[nA]=De[l_]+"|x|X|\\*";var iA=Qt++;De[iA]=De[c_]+"|x|X|\\*";var cg=Qt++;De[cg]="[v=\\s]*("+De[iA]+")(?:\\.("+De[iA]+")(?:\\.("+De[iA]+")(?:"+De[W8]+")?"+De[Wb]+"?)?)?";var p_=Qt++;De[p_]="[v=\\s]*("+De[nA]+")(?:\\.("+De[nA]+")(?:\\.("+De[nA]+")(?:"+De[K8]+")?"+De[Wb]+"?)?)?";var tre=Qt++;De[tre]="^"+De[m_]+"\\s*"+De[cg]+"$";var rre=Qt++;De[rre]="^"+De[m_]+"\\s*"+De[p_]+"$";var nre=Qt++;De[nre]="(?:^|[^\\d])(\\d{1,"+q8+"})(?:\\.(\\d{1,"+q8+"}))?(?:\\.(\\d{1,"+q8+"}))?(?:$|[^\\d])";var lA=Qt++;De[lA]="(?:~>?)";var d_=Qt++;De[d_]="(\\s*)"+De[lA]+"\\s+";zb[d_]=new RegExp(De[d_],"g");Vr[d_]=new RegExp(cA(De[d_]),"g");var vNe="$1~",ire=Qt++;De[ire]="^"+De[lA]+De[cg]+"$";var ore=Qt++;De[ore]="^"+De[lA]+De[p_]+"$";var uA=Qt++;De[uA]="(?:\\^)";var f_=Qt++;De[f_]="(\\s*)"+De[uA]+"\\s+";zb[f_]=new RegExp(De[f_],"g");Vr[f_]=new RegExp(cA(De[f_]),"g");var _Ne="$1^",sre=Qt++;De[sre]="^"+De[uA]+De[cg]+"$";var are=Qt++;De[are]="^"+De[uA]+De[p_]+"$";var J8=Qt++;De[J8]="^"+De[m_]+"\\s*("+Q8+")$|^$";var Z8=Qt++;De[Z8]="^"+De[m_]+"\\s*("+ere+")$|^$";var lg=Qt++;De[lg]="(\\s*)"+De[m_]+"\\s*("+Q8+"|"+De[cg]+")";zb[lg]=new RegExp(De[lg],"g");Vr[lg]=new RegExp(cA(De[lg]),"g");var yNe="$1$2$3",cre=Qt++;De[cre]="^\\s*("+De[cg]+")\\s+-\\s+("+De[cg]+")\\s*$";var lre=Qt++;De[lre]="^\\s*("+De[p_]+")\\s+-\\s+("+De[p_]+")\\s*$";var ure=Qt++;De[ure]="(<|>)?=?\\s*\\*";for(Il=0;Il<Qt;Il++)Ir(Il,De[Il]),zb[Il]||(zb[Il]=new RegExp(De[Il]),Vr[Il]=new RegExp(cA(De[Il])));var Il;St.parse=ug;function ug(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof tr)return t;if(typeof t!="string"||t.length>Vb)return null;var r=e.loose?Vr[X8]:Vr[Y8];if(!r.test(t))return null;try{return new tr(t,e)}catch{return null}}St.valid=xNe;function xNe(t,e){var r=ug(t,e);return r?r.version:null}St.clean=bNe;function bNe(t,e){var r=ug(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}St.SemVer=tr;function tr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof tr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Vb)throw new TypeError("version is longer than "+Vb+" characters");if(!(this instanceof tr))return new tr(t,e);Ir("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Vr[X8]:Vr[Y8]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>rA||this.major<0)throw new TypeError("Invalid major version");if(this.minor>rA||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>rA||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<rA)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}tr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};tr.prototype.toString=function(){return this.version};tr.prototype.compare=function(t){return Ir("SemVer.compare",this.version,this.options,t),t instanceof tr||(t=new tr(t,this.options)),this.compareMain(t)||this.comparePre(t)};tr.prototype.compareMain=function(t){return t instanceof tr||(t=new tr(t,this.options)),u_(this.major,t.major)||u_(this.minor,t.minor)||u_(this.patch,t.patch)};tr.prototype.comparePre=function(t){if(t instanceof tr||(t=new tr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Ir("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return u_(r,n)}while(++e)};tr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};St.inc=ENe;function ENe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new tr(t,r).inc(e,n).version}catch{return null}}St.diff=TNe;function TNe(t,e){if(eM(t,e))return null;var r=ug(t),n=ug(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}St.compareIdentifiers=u_;var Xte=/^[0-9]+$/;function u_(t,e){var r=Xte.test(t),n=Xte.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}St.rcompareIdentifiers=SNe;function SNe(t,e){return u_(e,t)}St.major=CNe;function CNe(t,e){return new tr(t,e).major}St.minor=INe;function INe(t,e){return new tr(t,e).minor}St.patch=wNe;function wNe(t,e){return new tr(t,e).patch}St.compare=up;function up(t,e,r){return new tr(t,r).compare(new tr(e,r))}St.compareLoose=ANe;function ANe(t,e){return up(t,e,!0)}St.rcompare=RNe;function RNe(t,e,r){return up(e,t,r)}St.sort=DNe;function DNe(t,e){return t.sort(function(r,n){return St.compare(r,n,e)})}St.rsort=PNe;function PNe(t,e){return t.sort(function(r,n){return St.rcompare(r,n,e)})}St.gt=$b;function $b(t,e,r){return up(t,e,r)>0}St.lt=oA;function oA(t,e,r){return up(t,e,r)<0}St.eq=eM;function eM(t,e,r){return up(t,e,r)===0}St.neq=pre;function pre(t,e,r){return up(t,e,r)!==0}St.gte=tM;function tM(t,e,r){return up(t,e,r)>=0}St.lte=rM;function rM(t,e,r){return up(t,e,r)<=0}St.cmp=sA;function sA(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return eM(t,r,n);case"!=":return pre(t,r,n);case">":return $b(t,r,n);case">=":return tM(t,r,n);case"<":return oA(t,r,n);case"<=":return rM(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}St.Comparator=Fa;function Fa(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Fa){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Fa))return new Fa(t,e);t=t.trim().split(/\s+/).join(" "),Ir("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Kb?this.value="":this.value=this.operator+this.semver.version,Ir("comp",this)}var Kb={};Fa.prototype.parse=function(t){var e=this.options.loose?Vr[J8]:Vr[Z8],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new tr(r[2],this.options.loose):this.semver=Kb};Fa.prototype.toString=function(){return this.value};Fa.prototype.test=function(t){return Ir("Comparator.test",t,this.options.loose),this.semver===Kb?!0:(typeof t=="string"&&(t=new tr(t,this.options)),sA(t,this.operator,this.semver,this.options))};Fa.prototype.intersects=function(t,e){if(!(t instanceof Fa))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new xn(t.value,e),aA(this.value,r,e);if(t.operator==="")return r=new xn(this.value,e),aA(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=sA(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=sA(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||l};St.Range=xn;function xn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof xn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new xn(t.raw,e);if(t instanceof Fa)return new xn(t.value,e);if(!(this instanceof xn))return new xn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}xn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};xn.prototype.toString=function(){return this.range};xn.prototype.parseRange=function(t){var e=this.options.loose,r=e?Vr[lre]:Vr[cre];t=t.replace(r,HNe),Ir("hyphen replace",t),t=t.replace(Vr[lg],yNe),Ir("comparator trim",t,Vr[lg]),t=t.replace(Vr[d_],vNe),t=t.replace(Vr[f_],_Ne);var n=e?Vr[J8]:Vr[Z8],i=t.split(" ").map(function(o){return kNe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Fa(o,this.options)},this),i};xn.prototype.intersects=function(t,e){if(!(t instanceof xn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};St.toComparators=NNe;function NNe(t,e){return new xn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function kNe(t,e){return Ir("comp",t,e),t=MNe(t,e),Ir("caret",t),t=ONe(t,e),Ir("tildes",t),t=UNe(t,e),Ir("xrange",t),t=qNe(t,e),Ir("stars",t),t}function Jo(t){return!t||t.toLowerCase()==="x"||t==="*"}function ONe(t,e){return t.trim().split(/\s+/).map(function(r){return LNe(r,e)}).join(" ")}function LNe(t,e){var r=e.loose?Vr[ore]:Vr[ire];return t.replace(r,function(n,i,o,s,a){Ir("tilde",t,n,i,o,s,a);var l;return Jo(i)?l="":Jo(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Jo(s)?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Ir("replaceTilde pr",a),l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Ir("tilde return",l),l})}function MNe(t,e){return t.trim().split(/\s+/).map(function(r){return FNe(r,e)}).join(" ")}function FNe(t,e){Ir("caret",t,e);var r=e.loose?Vr[are]:Vr[sre];return t.replace(r,function(n,i,o,s,a){Ir("caret",t,n,i,o,s,a);var l;return Jo(i)?l="":Jo(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Jo(s)?i==="0"?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Ir("replaceCaret pr",a),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Ir("no pr"),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Ir("caret return",l),l})}function UNe(t,e){return Ir("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return BNe(r,e)}).join(" ")}function BNe(t,e){t=t.trim();var r=e.loose?Vr[rre]:Vr[tre];return t.replace(r,function(n,i,o,s,a,l){Ir("xRange",t,n,i,o,s,a,l);var c=Jo(o),u=c||Jo(s),p=u||Jo(a),d=p;return i==="="&&d&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):u?n=">="+o+".0.0 <"+(+o+1)+".0.0":p&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Ir("xRange return",n),n})}function qNe(t,e){return Ir("replaceStars",t,e),t.trim().replace(Vr[ure],"")}function HNe(t,e,r,n,i,o,s,a,l,c,u,p,d){return Jo(r)?e="":Jo(n)?e=">="+r+".0.0":Jo(i)?e=">="+r+"."+n+".0":e=">="+e,Jo(l)?a="":Jo(c)?a="<"+(+l+1)+".0.0":Jo(u)?a="<"+l+"."+(+c+1)+".0":p?a="<="+l+"."+c+"."+u+"-"+p:a="<="+a,(e+" "+a).trim()}xn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new tr(t,this.options));for(var e=0;e<this.set.length;e++)if(jNe(this.set[e],t,this.options))return!0;return!1};function jNe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Ir(t[n].semver),t[n].semver!==Kb&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}St.satisfies=aA;function aA(t,e,r){try{e=new xn(e,r)}catch{return!1}return e.test(t)}St.maxSatisfying=GNe;function GNe(t,e,r){var n=null,i=null;try{var o=new xn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new tr(n,r))}),n}St.minSatisfying=VNe;function VNe(t,e,r){var n=null,i=null;try{var o=new xn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new tr(n,r))}),n}St.minVersion=zNe;function zNe(t,e){t=new xn(t,e);var r=new tr("0.0.0");if(t.test(r)||(r=new tr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new tr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||$b(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}St.validRange=$Ne;function $Ne(t,e){try{return new xn(t,e).range||"*"}catch{return null}}St.ltr=WNe;function WNe(t,e,r){return nM(t,e,"<",r)}St.gtr=KNe;function KNe(t,e,r){return nM(t,e,">",r)}St.outside=nM;function nM(t,e,r,n){t=new tr(t,n),e=new xn(e,n);var i,o,s,a,l;switch(r){case">":i=$b,o=rM,s=oA,a=">",l=">=";break;case"<":i=oA,o=tM,s=$b,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(aA(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],p=null,d=null;if(u.forEach(function(f){f.semver===Kb&&(f=new Fa(">=0.0.0")),p=p||f,d=d||f,i(f.semver,p.semver,n)?p=f:s(f.semver,d.semver,n)&&(d=f)}),p.operator===a||p.operator===l||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===l&&s(t,d.semver))return!1}return!0}St.prerelease=YNe;function YNe(t,e){var r=ug(t,e);return r&&r.prerelease.length?r.prerelease:null}St.intersects=QNe;function QNe(t,e,r){return t=new xn(t,r),e=new xn(e,r),t.intersects(e)}St.coerce=XNe;function XNe(t){if(t instanceof tr)return t;if(typeof t!="string")return null;var e=t.match(Vr[nre]);return e==null?null:ug(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var gre=k((Sat,hre)=>{var JNe=Yw().wrap,oM=1,sM=2,aM=4,dA=8,Lr=[],ZNe=0,To=!1,Wd=[],h_,cM;function lM(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(pA=!1,h_=function(e){var r=Lr.length;if(pA||r===0)return!1;var n=!1;pA=!0;for(var i=0;i<r;++i){var o=Lr[i];if(o.flags&dA){var s=g_&&g_[o.uid];n=o.error(s,e)||n}}return pA=!1,Wd.length>0&&(Lr=Wd.pop()),g_=void 0,n&&!To},cM=function(e,r,n){var i=[];To=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&oM)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return To=!1,function(){g_=i,Wd.push(Lr),Lr=lM(r,Lr),To=!0;for(var l=0;l<n;++l)(r[l].flags&sM)>0&&r[l].before(this,i[r[l].uid]);To=!1;var c=e.apply(this,arguments);for(To=!0,l=0;l<n;++l)(r[l].flags&aM)>0&&r[l].after(this,i[r[l].uid]);return To=!1,Lr=Wd.pop(),g_=void 0,c}},JNe(process,"_fatalException",function(t){return function(r){return h_(r)||t(r)}})):(iM=!1,h_=function(e){if(iM)throw e;for(var r=!1,n=Lr.length,i=0;i<n;++i){var o=Lr[i];o.flags&dA&&(r=o.error(null,e)||r)}if(!r&&To)throw e},cM=function(e,r,n){var i=[];To=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&oM)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return To=!1,function(){var l=!1,c=!1;Wd.push(Lr),Lr=lM(r,Lr),To=!0;for(var u=0;u<n;++u)(r[u].flags&sM)>0&&r[u].before(this,i[r[u].uid]);To=!1;var p;try{p=e.apply(this,arguments)}catch(d){l=!0;for(var u=0;u<n;++u)if(Lr[u].flags&dA)try{c=Lr[u].error(i[r[u].uid],d)||c}catch(m){throw iM=!0,m}if(!c)throw process.removeListener("uncaughtException",h_),process._originalNextTick(function(){process.addListener("uncaughtException",h_)}),d}finally{if(!l||c){for(To=!0,u=0;u<n;++u)(r[u].flags&aM)>0&&r[u].after(this,i[r[u].uid]);To=!1}Lr=Wd.pop()}return p}},process.addListener("uncaughtException",h_));var pA,g_,iM;function eke(t,e,r){To=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return To=!1,function(){Wd.push(Lr),Lr=lM(e,Lr);var o=t.apply(this,arguments);return Lr=Wd.pop(),o}}function tke(t){var e=Lr.length;if(e===0)return t;for(var r=Lr.slice(),n=0;n<e;++n)if(r[n].flags>0)return cM(t,r,e);return eke(t,r,e)}function wl(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=oM),typeof t.before=="function"&&(this.before=t.before,this.flags|=sM),typeof t.after=="function"&&(this.after=t.after,this.flags|=aM),typeof t.error=="function"&&(this.error=t.error,this.flags|=dA),this.uid=++ZNe,this.data=e===void 0?null:e}wl.prototype.create=void 0;wl.prototype.before=void 0;wl.prototype.after=void 0;wl.prototype.error=void 0;wl.prototype.data=void 0;wl.prototype.uid=0;wl.prototype.flags=0;function mre(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof wl?t:new wl(t,e)}function rke(t,e){var r;t instanceof wl?r=t:r=mre(t,e);for(var n=!1,i=0;i<Lr.length;i++)if(r===Lr[i]){n=!0;break}return n||Lr.push(r),r}function nke(t){for(var e=0;e<Lr.length;e++)if(t===Lr[e]){Lr.splice(e,1);break}}process.createAsyncListener=mre;process.addAsyncListener=rke;process.removeAsyncListener=nke;hre.exports=tke});var _re=k((Iat,vre)=>{"use strict";vre.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(l){o[1](l)}return s;function a(l,c){i=this,o=[u,p];function u(d){return e(s,!1),l(d)}function p(d){return e(s,!1),c(d)}}}}});var Cre=k(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Ere=Yw(),mA=fre(),Es=Ere.wrap,Kd=Ere.massWrap,bn=gre(),ike=require("util"),oke=mA.gte(process.version,"6.0.0"),dM=mA.gte(process.version,"7.0.0"),ske=mA.gte(process.version,"8.0.0"),ake=mA.gte(process.version,"11.0.0"),Al=require("net");dM&&!Al._normalizeArgs?Al._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:dke(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!dM&&!Al._normalizeConnectArgs&&(Al._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in Al.Server.prototype?Es(Al.Server.prototype,"_setUpListenHandle",yre):Es(Al.Server.prototype,"_listen2",yre);function yre(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=bn(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=bn(this._handle.onconnection))}}}function Tre(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=bn(e._originalOnread)}}Es(Al.Socket.prototype,"connect",function(t){return function(){var e;ske&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=dM?Al._normalizeArgs(arguments):Al._normalizeConnectArgs(arguments),e[1]&&(e[1]=bn(e[1]));var r=t.apply(this,e);return Tre(this),r}});var cke=require("http");Es(cke.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=bn(function(n){return Tre(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var uM=require("child_process");function xre(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=bn(e._handle.onread),Es(e._handle,"close",hA))}),t._handle&&(t._handle.onexit=bn(t._handle.onexit))}uM.ChildProcess?Es(uM.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return xre(this),e}}):Kd(uM,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return xre(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var hM=[];process._nextDomainTick&&hM.push("_nextDomainTick");process._tickDomainCallback&&hM.push("_tickDomainCallback");Kd(process,hM,Rl);Es(process,"nextTick",hA);var gM=["setTimeout","setInterval"];global.setImmediate&&gM.push("setImmediate");var Sre=require("timers"),lke=global.setTimeout===Sre.setTimeout;Kd(Sre,gM,hA);lke&&Kd(global,gM,hA);var fM=require("dns");Kd(fM,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Rl);fM.resolveNaptr&&Es(fM,"resolveNaptr",Rl);var dg=require("fs");Kd(dg,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Rl);dg.lchown&&Es(dg,"lchown",Rl);dg.lchmod&&Es(dg,"lchmod",Rl);dg.ftruncate&&Es(dg,"ftruncate",Rl);var Yb;try{Yb=require("zlib")}catch{}Yb&&Yb.Deflate&&Yb.Deflate.prototype&&(pg=Object.getPrototypeOf(Yb.Deflate.prototype),pg._transform?Es(pg,"_transform",Rl):pg.write&&pg.flush&&pg.end&&Kd(pg,["write","flush","end"],Rl));var pg,mM;try{mM=require("crypto")}catch{}mM&&(pM=["pbkdf2","randomBytes"],ake||pM.push("pseudoRandomBytes"),Kd(mM,pM,Rl));var pM,fA=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";fA&&(bre=process.addAsyncListener({create:function(){fA=!1}}),global.Promise.resolve(!0).then(function(){fA=!1}),process.removeAsyncListener(bre));var bre;fA&&uke();function uke(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,l,c=new t(u);c.__proto__=e.prototype;try{s.apply(a,l)}catch(p){l[1](p)}return c;function u(p,d){a=this,l=[f,m];function f(h){return n(c,!1),p(h)}function m(h){return n(c,!1),d(h)}}}if(ike.inherits(e,t),Es(t.prototype,"then",o),t.prototype.chain&&Es(t.prototype,"chain",o),oke)global.Promise=_re()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=bn(i))}function i(s,a,l,c){var u;try{return u=a.call(s,l),{returnVal:u,error:!1}}catch(p){return{errorVal:p,error:!0}}finally{u instanceof t?c.__asl_wrapper=function(){var d=u.__asl_wrapper||i;return d.apply(this,arguments)}:n(c,!0)}}function o(s){return function(){var l=this,c=s.apply(l,Array.prototype.map.call(arguments,u));return c.__asl_wrapper=function(d,f,m,h){return l.__asl_wrapper?(l.__asl_wrapper(d,function(){},null,c),c.__asl_wrapper(d,f,m,h)):i(d,f,m,h)},c;function u(p){return typeof p!="function"?p:bn(function(d){var f=(l.__asl_wrapper||i)(this,p,d,c);if(f.error)throw f.errorVal;return f.returnVal})}}}}function Rl(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=bn(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=bn(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=bn(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=bn(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=bn(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=bn(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function hA(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=bn(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=bn(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function pke(t){return(t=Number(t))>=0?t:!1}function dke(t){return typeof t=="string"&&pke(t)===!1}});var Dre=k((Rat,Rre)=>{"use strict";var pp=require("assert"),fke=Jw(),Qb="cls@contexts",vM="error@context";process.addAsyncListener||Cre();function Ac(t){this.name=t,this.active=null,this._set=[],this.id=null}Ac.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};Ac.prototype.get=function(t){if(this.active)return this.active[t]};Ac.prototype.createContext=function(){return Object.create(this.active)};Ac.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[vM]=e),r}finally{this.exit(e)}};Ac.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};Ac.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[vM]=e),n}finally{r.exit(e)}}};Ac.prototype.enter=function(t){pp.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};Ac.prototype.exit=function(t){if(pp.ok(t,"context must be provided for exiting"),this.active===t){pp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);pp.ok(e>=0,"context not currently entered; can't exit"),pp.ok(e,"can't remove top context"),this._set.splice(e,1)};Ac.prototype.bindEmitter=function(t){pp.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){o&&(o[Qb]||(o[Qb]=Object.create(null)),o[Qb][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[Qb]))return o;var s=o,a=o[Qb];return Object.keys(a).forEach(function(l){var c=a[l];s=c.namespace.bind(s,c.context)}),s}fke(t,n,i)};Ac.prototype.fromException=function(t){return t[vM]};function Ire(t){return process.namespaces[t]}function mke(t){pp.ok(t,"namespace must be given a name!");var e=new Ac(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function wre(t){var e=Ire(t);pp.ok(e,"can't delete nonexistent namespace!"),pp.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function Are(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){wre(t)}),process.namespaces=Object.create(null)}process.namespaces||Are();Rre.exports={getNamespace:Ire,createNamespace:mke,destroyNamespace:wre,reset:Are}});var Yd=k(vA=>{"use strict";Object.defineProperty(vA,"__esModule",{value:!0});vA.CorrelationContextManager=void 0;var v_=Jr(),hke=Ow(),fg=Lw(),_M=H3(),Pre=a8(),gA=Ji(),gke=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new vke(i)}:null},t.spanToContextObject=function(e,r,n){var i=new fg;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=fg.formatOpenTelemetryTraceFlags(e.traceFlags)||fg.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(i){v_.warn("Error binding to session context",gA.dumpObj(i))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){v_.warn("Error binding to session context",gA.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(i){v_.warn("Error binding to session context",gA.dumpObj(i))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=Qte():this.cls=Dre()),t.session=this.cls.createNamespace("AI-CLS-Session"),hke.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){v_.warn("Error binding to session context",gA.dumpObj(n))}})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.spanContext?e:null,o=e&&e.traceId?e:null,s=e&&e.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof r=="string"?r:"");var a=typeof r=="string"?r:"";if(n){var l=null,c=null;if(a=n.attributes.OperationName||a,r){var u=r;u.headers&&(u.headers.traceparent?l=new fg(u.headers.traceparent):u.headers["request-id"]&&(l=new fg(null,u.headers["request-id"])),u.headers.tracestate&&(c=new _M(u.headers.tracestate)))}l||(l=new fg(n.traceParent||n.traceparent)),c||(c=new _M(n.traceState||n.tracestate));var p=void 0;if(typeof r=="object"){var d=new Pre(r);p=d.getCorrelationContextHeader(),a=d.getOperationName({})}var f=t.generateContextObject(l.traceId,l.parentId,a,p,l,c);return f}if(s){var l=new fg(s.traceparent?s.traceparent.toString():null),c=new _M(s.tracestate?s.tracestate.toString():null),d=new Pre(e),f=t.generateContextObject(l.traceId,l.parentId,d.getOperationName({}),d.getCorrelationContextHeader(),l,c);return f}return v_.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();vA.CorrelationContextManager=gke;var vke=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){v_.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var Nre=k(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.dispose=__.enable=void 0;var _A=bo(),_ke=vn(),yA=Nn(),Qd=[],yM=function(t){var e=t.data.message;Qd.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?_A.SeverityLevel.Error:_A.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?_A.SeverityLevel.Warning:_A.SeverityLevel.Information}))})};function yke(t,e){if(t){var r=Qd.find(function(n){return n==e});if(r)return;Qd.length===0&&yA.channel.subscribe("console",yM,yA.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(_ke.StatsbeatInstrumentation.CONSOLE)}),Qd.push(e)}else Qd=Qd.filter(function(n){return n!=e}),Qd.length===0&&yA.channel.unsubscribe("console",yM)}__.enable=yke;function xke(){yA.channel.unsubscribe("console",yM),Qd=[]}__.dispose=xke});var kre=k(x_=>{"use strict";Object.defineProperty(x_,"__esModule",{value:!0});x_.dispose=x_.enable=void 0;var y_=bo(),bke=vn(),xA=Nn(),Xd=[],Eke={10:y_.SeverityLevel.Verbose,20:y_.SeverityLevel.Verbose,30:y_.SeverityLevel.Information,40:y_.SeverityLevel.Warning,50:y_.SeverityLevel.Error,60:y_.SeverityLevel.Critical},xM=function(t){var e=t.data.result,r=Eke[t.data.level];Xd.forEach(function(n){try{var i=JSON.parse(e);if(i.err){var o=new Error(i.err.message);if(o.name=i.err.name,o.stack=i.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:o});return}}catch{}n.trackTrace({message:e,severity:r})})};function Tke(t,e){if(t){var r=Xd.find(function(n){return n==e});if(r)return;Xd.length===0&&xA.channel.subscribe("bunyan",xM,xA.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(bke.StatsbeatInstrumentation.BUNYAN)}),Xd.push(e)}else Xd=Xd.filter(function(n){return n!=e}),Xd.length===0&&xA.channel.unsubscribe("bunyan",xM)}x_.enable=Tke;function Ske(){xA.channel.unsubscribe("bunyan",xM),Xd=[]}x_.dispose=Ske});var Ore=k(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});b_.dispose=b_.enable=void 0;var Cke=vn(),to=bo(),bA=Nn(),Jd=[],Ike={syslog:function(t){var e={emerg:to.SeverityLevel.Critical,alert:to.SeverityLevel.Critical,crit:to.SeverityLevel.Critical,error:to.SeverityLevel.Error,warning:to.SeverityLevel.Warning,notice:to.SeverityLevel.Information,info:to.SeverityLevel.Information,debug:to.SeverityLevel.Verbose};return e[t]===void 0?to.SeverityLevel.Information:e[t]},npm:function(t){var e={error:to.SeverityLevel.Error,warn:to.SeverityLevel.Warning,info:to.SeverityLevel.Information,verbose:to.SeverityLevel.Verbose,debug:to.SeverityLevel.Verbose,silly:to.SeverityLevel.Verbose};return e[t]===void 0?to.SeverityLevel.Information:e[t]},unknown:function(t){return to.SeverityLevel.Information}},bM=function(t){var e=t.data.message,r=Ike[t.data.levelKind](t.data.level);Jd.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function wke(t,e){if(t){var r=Jd.find(function(n){return n==e});if(r)return;Jd.length===0&&bA.channel.subscribe("winston",bM,bA.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Cke.StatsbeatInstrumentation.WINSTON)}),Jd.push(e)}else Jd=Jd.filter(function(n){return n!=e}),Jd.length===0&&bA.channel.unsubscribe("winston",bM)}b_.enable=wke;function Ake(){bA.channel.unsubscribe("winston",bM),Jd=[]}b_.dispose=Ake});var Mre=k((Oat,Lre)=>{"use strict";var Rke=Ow(),Dke=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){Rke.IsInitialized&&(Nre().enable(e&&r,this._client),kre().enable(e,this._client),Ore().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();Lre.exports=Dke});var Ure=k((Lat,Fre)=>{"use strict";var Pke=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(i,o,s){s===void 0&&(s=new Error(t._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,r._client.trackException(a),r._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();Fre.exports=Pke});var TA=k((Mat,Bre)=>{"use strict";var EA=require("os"),Ua=vn(),Nke=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=EA.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=EA.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var l=e[a],c=this._lastCpus[a],u="% cpu("+a+") ",p=l.model,d=l.speed,f=l.times,m=c.times,h=f.user-m.user||0;r+=h;var g=f.sys-m.sys||0;n+=g;var v=f.nice-m.nice||0;i+=v;var _=f.idle-m.idle||0;o+=_;var y=f.irq-m.irq||0;s+=y}var b=void 0;if(typeof process.cpuUsage=="function"){var x=process.cpuUsage(),P=process.hrtime(),U=x.user-this._lastAppCpuUsage.user+(x.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var H=(P[0]-this._lastHrtime[0])*1e6+(P[1]-this._lastHrtime[1])/1e3||0;b=100*U/(H*e.length)}this._lastAppCpuUsage=x,this._lastHrtime=P}var j=r+n+i+o+s||1;this._client.trackMetric({name:Ua.PerformanceCounter.PROCESSOR_TIME,value:(j-o)/j*100}),this._client.trackMetric({name:Ua.PerformanceCounter.PROCESS_TIME,value:b||r/j*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=EA.freemem(),r=process.memoryUsage().rss,n=EA.totalmem()-e;this._client.trackMetric({name:Ua.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Ua.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Ua.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var l=n/s,c=i/s;this._client.trackMetric({name:Ua.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Ua.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Ua.QuickPulseCounter.REQUEST_FAILURE_RATE,value:c})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var l=n/s,c=i/s;this._client.trackMetric({name:Ua.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:Ua.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Ua.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:Ua.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();Bre.exports=Nke});var qre=k(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0});SA.AggregatedMetricCounter=void 0;var kke=function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();SA.AggregatedMetricCounter=kke});var Hre=k(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});CA.PreaggregatedMetricPropertyNames=void 0;CA.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var TM=k((EM,jre)=>{"use strict";var wA=EM&&EM.__assign||function(){return wA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},wA.apply(this,arguments)},IA=vn(),Oke=qre(),Lke=Hre(),Mke=function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,i=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;i.intervalExecutionTime+=n,i.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof e=="string")i=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")i=e;else return;n.intervalExecutionTime+=i,n.totalCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,i=0;i<r.length;i++){if(e===r[i].dimensions)return r[i];if(Object.keys(e).length===Object.keys(r[i].dimensions).length){for(var o in e)if(e[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new Oke.AggregatedMetricCounter(e);return r.push(s),s},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:IA.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:IA.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:IA.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:IA.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[Lke.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=wA(wA({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();jre.exports=Mke});var E_=k((Bat,Gre)=>{"use strict";var dp=require("os"),Fke=require("fs"),Uke=require("path"),Bke=bo(),qke=vn(),Hke=Jr(),jke=function(){function t(e){this.keys=new Bke.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||Uke.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(Fke.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){Hke.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=dp&&dp.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=dp&&dp.type()+" "+dp.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=dp&&dp.arch(),this.tags["ai.device.osPlatform"]=dp&&dp.platform()},t.prototype._loadInternalContext=function(){t.sdkVersion=qke.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();Gre.exports=jke});var $re=k((qat,zre)=>{"use strict";var Gke=require("crypto"),Vre=require("os"),Vke=vn(),zke=E_(),$ke=function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},i=zke.sdkVersion;n.sdkVersion=i,n.osType=Vre.type(),n.osVersion=Vre.release(),this._uniqueProcessId||(this._uniqueProcessId=Gke.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:Vke.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();zre.exports=$ke});var Wre=k(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.isContentTypeHeaderHtml=Ct.insertSnippetByIndex=Ct.getContentEncodingFromHeaders=Ct.isSupportedContentEncoding=Ct.findBufferEncodingType=Ct.isBufferType=Ct.getBrotliDecompressSync=Ct.getBrotliDecompressAsync=Ct.getBrotliCompressSync=Ct.getBrotliCompressAsync=Ct.inflateAsync=Ct.deflateAsync=Ct.gunzipAsync=Ct.gzipAsync=Ct.isBrotliSupperted=Ct.bufferEncodingTypes=Ct.contentEncodingMethod=void 0;var RA=require("zlib"),T_=require("util"),AA;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(AA=Ct.contentEncodingMethod||(Ct.contentEncodingMethod={}));Ct.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var Wke=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};Ct.isBrotliSupperted=Wke;Ct.gzipAsync=T_.promisify(RA.gzip);Ct.gunzipAsync=T_.promisify(RA.gunzip);Ct.deflateAsync=T_.promisify(RA.deflate);Ct.inflateAsync=T_.promisify(RA.inflate);var Kke=function(t){var e=Ct.isBrotliSupperted();return e&&typeof t.brotliCompress=="function"?T_.promisify(t.brotliCompress):null};Ct.getBrotliCompressAsync=Kke;var Yke=function(t){var e=Ct.isBrotliSupperted();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};Ct.getBrotliCompressSync=Yke;var Qke=function(t){var e=Ct.isBrotliSupperted();return e&&typeof t.brotliDecompress=="function"?T_.promisify(t.brotliDecompress):null};Ct.getBrotliDecompressAsync=Qke;var Xke=function(t){var e=Ct.isBrotliSupperted();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};Ct.getBrotliDecompressSync=Xke;var Jke=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var i=Buffer.from(t.toString(r),r);n=i.toJSON().data.toString()===t.toJSON().data.toString()}return n};Ct.isBufferType=Jke;var Zke=function(t){var e=null;for(var r in Ct.bufferEncodingTypes){var n=Ct.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&Ct.isBufferType(t,n)){e=n;break}}return e};Ct.findBufferEncodingType=Zke;var e4e=function(t){var e=null;switch(t){case"gzip":e=AA.GZIP;break;case"br":e=AA.BR;break;case"deflate":e=AA.DEFLATE;break;default:}return e};Ct.isSupportedContentEncoding=e4e;var t4e=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=Ct.isSupportedContentEncoding(r);n&&e.push(n)}return e};Ct.getContentEncodingFromHeaders=t4e;var r4e=function(t,e,r){if(t<0)return null;var n=null,i=e.substring(0,t),o=e.substring(t);return n=i+'<script type="text/javascript">'+r+"</script>"+o,n};Ct.insertSnippetByIndex=r4e;var n4e=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};Ct.isContentTypeHeaderHtml=n4e});var Kre=k(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.getResourceProvider=Ni.getOsPrefix=Ni.isFunctionApp=Ni.isWebApp=Ni.isLinux=Ni.isWindows=void 0;var i4e=function(){return process.platform==="win32"};Ni.isWindows=i4e;var o4e=function(){return process.platform==="linux"};Ni.isLinux=o4e;var s4e=function(){return!!process.env.WEBSITE_SITE_NAME};Ni.isWebApp=s4e;var a4e=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};Ni.isFunctionApp=a4e;var c4e=function(){return Ni.isWindows()?"w":Ni.isLinux()?"l":"u"};Ni.getOsPrefix=c4e;var l4e=function(){return Ni.isWebApp()?"a":Ni.isFunctionApp()?"f":"u"};Ni.getResourceProvider=l4e});var SM=k((Gat,Qre)=>{"use strict";var Yre=vn(),u4e=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var l=a[0].toLowerCase(),c=a[1];o[l]=c}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||Yre.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||Yre.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();Qre.exports=u4e});var Xre={};Ri(Xre,{webSnippet:()=>p4e});var p4e,Jre=I(()=>{p4e=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var ine=k((Vat,nne)=>{"use strict";var Zre=require("http"),ene=require("https"),S_=require("zlib"),Dl=Jr(),Ba=Wre(),tne=Kre(),Xb=vn(),rne=SM(),d4e=(Jre(),Xn(Xre)),f4e=function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=Xb.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=Xb.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(Xb.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(Xb.StatsbeatFeature.WEB_SNIPPET)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=rne.parse(e),i=n.instrumentationkey||"";rne.isIkeyValid(i)?(this._isIkeyValid=!0,r=i):(this._isIkeyValid=!1,Dl.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){Dl.info("get web snippet ikey error: "+o)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=tne.getOsPrefix(),n=tne.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+e+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+n+r+"d_n_",o=d4e.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace(Xb.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var i=n.name;if(i!==void 0){var o=n.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,r+=s;break;default:s=" "+i+": "+o+`,\r
`,r+=s;break}}})}catch{this._isEnabled=!1,Dl.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=Zre.createServer,r=ene.createServer,n=this._isEnabled;Zre.createServer=function(i){var o=i;return o&&(i=function(s,a){var l=a.write,c=s.method=="GET";a.write=function(d,f,m){try{if(n&&c){var h=Ba.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,d)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,d,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,d,v)}}}catch(_){Dl.warn("Inject snippet error: "+_)}return l.apply(a,arguments)};var u=a.end;return a.end=function(d,f,m){if(n&&c)try{if(n&&c){var h=Ba.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,d)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,d,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,d,v)}}}catch(_){Dl.warn("Inject snipet error: "+_)}return u.apply(a,arguments)},o(s,a)}),e(i)},ene.createServer=function(i,o){var s=o;if(s)return o=function(a,l){var c=a.method=="GET",u=l.write,p=l.end;return l.write=function(f,m,h){try{if(n&&c){var g=Ba.getContentEncodingFromHeaders(l),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(l,f)&&(arguments[0]=this.InjectWebSnippet(l,f,void 0,v));else if(g.length){var _=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(l,f,_)}}}catch(y){Dl.warn("Inject snippet error: "+y)}return u.apply(l,arguments)},l.end=function(f,m,h){try{if(n&&c){var g=Ba.getContentEncodingFromHeaders(l),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(l,f)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(l,f,void 0,v));else if(g.length){var _=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(l,f,_)}}}catch(y){Dl.warn("Inject snippet error: "+y)}return p.apply(l,arguments)},s(a,l)},r(i,o)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=Ba.isContentTypeHeaderHtml(e);if(!n)return!1;var i=r.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(t._aiUrl)<0&&i.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(o){Dl.info("validate injections error: "+o)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,i){try{var o=!!n;if(o)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var s=r.toString(),a=s.indexOf("</head>");if(a<0)return r;var l=Ba.insertSnippetByIndex(a,s,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=l,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var c=i||"utf8",u=Ba.isBufferType(r,c);if(u){e.removeHeader("Content-Length");var p=Buffer.from(l).toString(c);r=Buffer.from(p,c),e.setHeader("Content-Length",r.length)}}}}catch(d){Dl.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+d)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case Ba.contentEncodingMethod.GZIP:var i=S_.gunzipSync(r);if(this.ValidateInjection(e,i)){var o=this.InjectWebSnippet(e,i);r=S_.gzipSync(o)}break;case Ba.contentEncodingMethod.DEFLATE:var s=S_.inflateSync(r);if(this.ValidateInjection(e,s)){var a=this.InjectWebSnippet(e,s);r=S_.deflateSync(a)}break;case Ba.contentEncodingMethod.BR:var l=Ba.getBrotliDecompressSync(S_),c=Ba.getBrotliCompressSync(S_);if(l&&c){var u=l(r);if(this.ValidateInjection(e,u)){var p=this.InjectWebSnippet(e,u);r=c(p)}break}}}catch(d){Dl.info("get web injection compress buffer error: "+d)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();nne.exports=f4e});var sne=k((IM,one)=>{"use strict";var m4e=IM&&IM.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qa=require("url"),CM=bo(),h4e=Ji(),g4e=Q0(),v4e=n8(),_4e=ng(),y4e=function(t){m4e(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=h4e.getCorrelationContextTarget(r,g4e.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=this.method.toUpperCase(),o=CM.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new qa.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=CM.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==_4e.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=CM.RemoteDependencyDataConstants.TYPE_HTTP;var l={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(r&&r.time?l.time=r.time:this.startTime&&(l.time=new Date(this.startTime)),r){for(var c in r)l[c]||(l[c]=r[c]);if(r.properties)for(var c in r.properties)l.properties[c]=r.properties[c]}return l},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new qa.URL(r)}catch{}else try{var i=new qa.URL("http://"+r);i.port==="443"?r=new qa.URL("https://"+r):r=new qa.URL("http://"+r)}catch{}else{if(r&&typeof qa.URL=="function"&&r instanceof qa.URL)return qa.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(l){r[l]=o[l]})}if(r.path&&r.host)try{var s=new qa.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.path&&r.hostname&&!r.host)try{var s=new qa.URL(r.path,"http://"+r.hostname+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.host&&r.port)try{var a=new qa.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",qa.format(r)},e}(v4e);one.exports=y4e});var ane=k(C_=>{"use strict";var DA=C_&&C_.__assign||function(){return DA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},DA.apply(this,arguments)};Object.defineProperty(C_,"__esModule",{value:!0});C_.parseEventHubSpan=void 0;var wM=(Kt(),Xn(q0)),x4e=(Wo(),Xn(LX)),b4e=(Sc(),Xn(V5)),Jb=vn(),E4e=function(t){var e=0,r=0,n=x4e.hrTimeToMilliseconds(t.startTime);return t.links.forEach(function(i){var o=i.attributes,s=o?.[Jb.ENQUEUED_TIME];s&&(e+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(e||1),0)},T4e=function(t,e){var r,n=t.attributes[Jb.AzNamespace],i=(t.attributes[b4e.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=t.attributes[Jb.MessageBusDestination]||"unknown";switch(t.kind){case wM.SpanKind.CLIENT:e.dependencyTypeName=n,e.target=i+"/"+o;break;case wM.SpanKind.PRODUCER:e.dependencyTypeName=Jb.DependencyTypeName.QueueMessage+" | "+n,e.target=i+"/"+o;break;case wM.SpanKind.CONSUMER:e.source=i+"/"+o,e.measurements=DA(DA({},e.measurements),(r={},r[Jb.TIME_SINCE_ENQUEUED]=E4e(t),r));break;default:}};C_.parseEventHubSpan=T4e});var une=k(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});PA.spanToTelemetryContract=void 0;var cne=require("url"),Rc=(Kt(),Xn(q0)),Ft=(Sc(),Xn(V5)),fp=vn(),S4e=ane(),C4e=Ji();function I4e(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(e[i]=t.attributes[i])}var o=t.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(e["_MS.links"]=C4e.stringify(o)),e}function w4e(t){return t===Ft.DbSystemValues.DB2||t===Ft.DbSystemValues.DERBY||t===Ft.DbSystemValues.MARIADB||t===Ft.DbSystemValues.MSSQL||t===Ft.DbSystemValues.ORACLE||t===Ft.DbSystemValues.SQLITE||t===Ft.DbSystemValues.OTHER_SQL||t===Ft.DbSystemValues.HSQLDB||t===Ft.DbSystemValues.H2}function lne(t){var e=t.attributes[Ft.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[Ft.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[Ft.SemanticAttributes.HTTP_SCHEME],i=t.attributes[Ft.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=t.attributes[Ft.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=t.attributes[Ft.SemanticAttributes.NET_PEER_PORT];if(s){var a=t.attributes[Ft.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var l=t.attributes[Ft.SemanticAttributes.NET_PEER_IP];if(l)return n+"://"+l+":"+s+i}}}return""}function AM(t){var e=t.attributes[Ft.SemanticAttributes.PEER_SERVICE],r=t.attributes[Ft.SemanticAttributes.HTTP_HOST],n=t.attributes[Ft.SemanticAttributes.HTTP_URL],i=t.attributes[Ft.SemanticAttributes.NET_PEER_NAME],o=t.attributes[Ft.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):i?String(i):o?String(o):""}function A4e(t){var e={name:t.name,success:t.status.code!=Rc.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===Rc.SpanKind.PRODUCER&&(e.dependencyTypeName=fp.DependencyTypeName.QueueMessage),t.kind===Rc.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=fp.DependencyTypeName.InProc);var r=t.attributes[Ft.SemanticAttributes.HTTP_METHOD],n=t.attributes[Ft.SemanticAttributes.DB_SYSTEM],i=t.attributes[Ft.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=fp.DependencyTypeName.Http;var o=t.attributes[Ft.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new cne.URL(String(o));s=a.pathname}catch{}e.name=r+" "+s}e.data=lne(t);var l=t.attributes[Ft.SemanticAttributes.HTTP_STATUS_CODE];l&&(e.resultCode=String(l));var c=AM(t);if(c){try{var u=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),p=u.exec(c);if(p!=null){var d=p[1],f=p[3];(d=="https"&&f==":443"||d=="http"&&f==":80")&&(c=p[1]+p[2]+p[4])}}catch{}e.target=""+c}}else if(n){String(n)===Ft.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===Ft.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===Ft.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===Ft.DbSystemValues.REDIS?e.dependencyTypeName="redis":w4e(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var m=t.attributes[Ft.SemanticAttributes.DB_STATEMENT],h=t.attributes[Ft.SemanticAttributes.DB_OPERATION];m?e.data=String(m):h&&(e.data=String(h));var c=AM(t),g=t.attributes[Ft.SemanticAttributes.DB_NAME];c?e.target=g?c+"|"+g:""+c:e.target=g?""+g:""+n}else if(i){e.dependencyTypeName=fp.DependencyTypeName.Grpc;var v=t.attributes[Ft.SemanticAttributes.RPC_GRPC_STATUS_CODE];v&&(e.resultCode=String(v));var c=AM(t);c?e.target=""+c:i&&(e.target=String(i))}return e}function R4e(t){var e={name:t.name,success:t.status.code!=Rc.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[Ft.SemanticAttributes.HTTP_METHOD],n=t.attributes[Ft.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==Rc.SpanKind.SERVER){var i=t.attributes[Ft.SemanticAttributes.HTTP_ROUTE],o=t.attributes[Ft.SemanticAttributes.HTTP_URL];if(i)e.name=r+" "+i;else if(o)try{var s=new cne.URL(String(o));e.name=r+" "+s.pathname}catch{}}e.url=lne(t);var a=t.attributes[Ft.SemanticAttributes.HTTP_STATUS_CODE];a&&(e.resultCode=String(a))}else n&&(e.resultCode=String(n));return e}function D4e(t){var e;switch(t.kind){case Rc.SpanKind.CLIENT:case Rc.SpanKind.PRODUCER:case Rc.SpanKind.INTERNAL:e=A4e(t);break;case Rc.SpanKind.SERVER:case Rc.SpanKind.CONSUMER:e=R4e(t);break}var r=t.spanContext?t.spanContext():t.context(),n=""+r.spanId,i=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=i,e.properties=I4e(t),t.attributes[fp.AzNamespace]&&(t.kind===Rc.SpanKind.INTERNAL&&(e.dependencyTypeName=fp.DependencyTypeName.InProc+" | "+t.attributes[fp.AzNamespace]),t.attributes[fp.AzNamespace]===fp.MicrosoftEventHub&&S4e.parseEventHubSpan(t,e)),e}PA.spanToTelemetryContract=D4e});var dne=k(ef=>{"use strict";var I_=ef&&ef.__assign||function(){return I_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},I_.apply(this,arguments)};Object.defineProperty(ef,"__esModule",{value:!0});ef.AsyncScopeManager=ef.OpenTelemetryScopeManagerWrapper=void 0;var Zd=Yd(),P4e=require("events"),pne=function(){function t(){}return t.prototype.active=function(){var e=this,r=Zd.CorrelationContextManager.getCurrentContext();return I_(I_({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,o=t._spanToContext(e,n,i);return Zd.CorrelationContextManager.runWithContext(o,r)()},t.prototype.bind=function(e){return typeof e=="function"?Zd.CorrelationContextManager.wrapCallback(e):(e instanceof P4e.EventEmitter&&Zd.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return Zd.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return Zd.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=e.spanContext?e.spanContext():e.context(),o=I_(I_({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),s=r?"|"+i.traceId+"."+r+".":i.traceId,a=Zd.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,r||(s=a.operation.parentId));var l=Zd.CorrelationContextManager.spanToContextObject(o,s,n);return l},t}();ef.OpenTelemetryScopeManagerWrapper=pne;ef.AsyncScopeManager=new pne});var fne=k(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.enable=tf.subscriber=void 0;var Zb=(Kt(),Xn(q0)),N4e=vn(),RM=Nn(),k4e=une(),O4e=dne(),mg=[],L4e=function(t){try{var e=t.data,r=k4e.spanToTelemetryContract(e);O4e.AsyncScopeManager.with(e,function(){mg.forEach(function(n){e.kind===Zb.SpanKind.SERVER||e.kind===Zb.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===Zb.SpanKind.CLIENT||e.kind===Zb.SpanKind.INTERNAL||e.kind===Zb.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};tf.subscriber=L4e;function M4e(t,e){if(t){var r=mg.find(function(n){return n==e});if(r)return;mg.length===0&&RM.channel.subscribe("azure-coretracing",tf.subscriber,RM.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(N4e.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),mg.push(e)}else mg=mg.filter(function(n){return n!=e}),mg.length===0&&RM.channel.unsubscribe("azure-coretracing",tf.subscriber)}tf.enable=M4e});var mne=k(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.enable=rf.subscriber=void 0;var F4e=vn(),DM=Nn(),hg=[],U4e=function(t){t.data.event.commandName!=="ismaster"&&hg.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};rf.subscriber=U4e;function B4e(t,e){if(t){var r=hg.find(function(n){return n==e});if(r)return;hg.length===0&&DM.channel.subscribe("mongodb",rf.subscriber,DM.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(F4e.StatsbeatInstrumentation.MONGODB)}),hg.push(e)}else hg=hg.filter(function(n){return n!=e}),hg.length===0&&DM.channel.unsubscribe("mongodb",rf.subscriber)}rf.enable=B4e});var hne=k(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.enable=nf.subscriber=void 0;var q4e=vn(),PM=Nn(),gg=[],H4e=function(t){gg.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};nf.subscriber=H4e;function j4e(t,e){if(t){var r=gg.find(function(n){return n==e});if(r)return;gg.length===0&&PM.channel.subscribe("mysql",nf.subscriber,PM.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(q4e.StatsbeatInstrumentation.MYSQL)}),gg.push(e)}else gg=gg.filter(function(n){return n!=e}),gg.length===0&&PM.channel.unsubscribe("mysql",nf.subscriber)}nf.enable=j4e});var gne=k(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.enable=of.subscriber=void 0;var G4e=vn(),NM=Nn(),vg=[],V4e=function(t){vg.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};of.subscriber=V4e;function z4e(t,e){if(t){var r=vg.find(function(n){return n==e});if(r)return;vg.length===0&&NM.channel.subscribe("redis",of.subscriber,NM.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(G4e.StatsbeatInstrumentation.REDIS)}),vg.push(e)}else vg=vg.filter(function(n){return n!=e}),vg.length===0&&NM.channel.unsubscribe("redis",of.subscriber)}of.enable=z4e});var vne=k(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.enable=sf.subscriber=void 0;var $4e=vn(),kM=Nn(),_g=[],W4e=function(t){_g.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};sf.subscriber=W4e;function K4e(t,e){if(t){var r=_g.find(function(n){return n==e});if(r)return;_g.length===0&&kM.channel.subscribe("postgres",sf.subscriber,kM.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation($4e.StatsbeatInstrumentation.POSTGRES)}),_g.push(e)}else _g=_g.filter(function(n){return n!=e}),_g.length===0&&kM.channel.unsubscribe("postgres",sf.subscriber)}sf.enable=K4e});var R_=k((LM,_ne)=>{"use strict";var NA=LM&&LM.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},w_=require("http"),A_=require("https"),kA=Jr(),OM=Ji(),af=Q0(),Y4e=sne(),eE=Yd(),OA=Lw(),Q4e=Ow(),tE=ng(),X4e=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),Q4e.IsInitialized&&(fne().enable(e,this._client),mne().enable(e,this._client),hne().enable(e,this._client),gne().enable(e,this._client),vne().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=w_.request,n=A_.request,i=function(o,s){try{var a=!s[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag],l=null;if(s.headers&&(l=s.headers["User-Agent"]||s.headers["user-agent"],l&&l.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(eE.CorrelationContextManager.wrapEmitter(o),e._isEnabled))if(o[t.alreadyAutoCollectedFlag]=!0,eE.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:s,request:o});else{var c=null;if(tE.w3cEnabled){var u=new OA;c=u.traceId}else{var p=tE.generateRequestId(null);c=tE.getRootId(p)}var d=eE.CorrelationContextManager.generateContextObject(c);eE.CorrelationContextManager.runWithContext(d,function(){t.trackRequest(e._client,{options:s,request:o})})}}catch(f){kA.warn("Failed to generate dependency telemetry.",OM.dumpObj(f))}};w_.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var l=r.call.apply(r,NA([w_,o],s));return i(l,o),l},A_.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var l=n.call.apply(n,NA([A_,o],s));return i(l,o),l},w_.get=function(o){for(var s,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=(s=w_.request).call.apply(s,NA([w_,o],a));return c.end(),c},A_.get=function(o){for(var s,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=(s=A_.request).call.apply(s,NA([A_,o],a));return c.end(),c}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){kA.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new Y4e(r.options,r.request),i=eE.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&OA.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(tE.w3cEnabled){var a=new OA;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(OM.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var l=r.request.getHeader(af.requestContextHeader);try{OM.safeIncludeCorrelationHeader(e,r.request,l)}catch(p){kA.warn("Request-Context header could not be set. Correlation of requests may be lost",p)}if(i&&i.operation)try{if(r.request.setHeader(af.requestIdHeader,o),e.config.ignoreLegacyHeaders||(r.request.setHeader(af.parentIdHeader,i.operation.id),r.request.setHeader(af.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(af.traceparentHeader,s||i.operation.traceparent.toString());else if(tE.w3cEnabled){var a=new OA().toString();r.request.setHeader(af.traceparentHeader,a)}if(i.operation.tracestate){var c=i.operation.tracestate.toString();c&&r.request.setHeader(af.traceStateHeader,c)}var u=i.customProperties.serializeToHeader();u&&r.request.setHeader(af.correlationContextHeader,u)}catch(p){kA.warn("Correlation headers could not be set. Correlation of requests may be lost.",p)}}r.request.on&&(r.request.on("response",function(p){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(p);var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects["http.ClientResponse"]=p,e.trackDependency(d)}}),r.request.on("error",function(p){if(!r.isProcessed){r.isProcessed=!0,n.onError(p);var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects.Error=p,e.trackDependency(d)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(p)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();_ne.exports=X4e});var FM=k((Zat,Tne)=>{"use strict";var yne=require("http"),xne=require("https"),bne=Jr(),Ene=Ji(),J4e=Q0(),MM=a8(),mp=Yd(),Z4e=TA(),eOe=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||Z4e.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?mp.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&mp.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return mp.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var i=this,o=new MM(e),s=this._generateCorrelationContext(o);mp.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(i._client,{request:e,response:r},o)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){mp.CorrelationContextManager.wrapEmitter(s),mp.CorrelationContextManager.wrapEmitter(a);var l=s&&!s[t.alreadyAutoCollectedFlag];s&&l&&t.INSTANCE?t.INSTANCE._registerRequest(s,a,o):o(s,a)}}},r=function(o){var s=o.addListener.bind(o);o.addListener=function(a,l){switch(a){case"request":case"checkContinue":return s(a,e(l));default:return s(a,l)}},o.on=o.addListener},n=yne.createServer;yne.createServer=function(o,s){if(s&&typeof s=="function"){var a=n(o,e(s));return r(a),a}else{var a=n(e(o));return r(a),a}};var i=xne.createServer;xne.createServer=function(o,s){var a=i(o,e(s));return r(a),a}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){bne.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=mp.CorrelationContextManager.getCurrentContext(),i=new MM(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){bne.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var i=mp.CorrelationContextManager.getCurrentContext(),o=n||new MM(r.request,i&&i.operation.parentId);Ene.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(J4e.requestContextHeader);Ene.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){if(!n.isProcessed){n.isProcessed=!0,o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var l=r.getLegacyRootId();l&&(s.properties.ai_legacyRootId=l),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,mp.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();Tne.exports=eOe});var Ine=k((BM,Cne)=>{"use strict";var Ha=BM&&BM.__assign||function(){return Ha=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ha.apply(this,arguments)},UM=require("os"),yg=bo(),Sne=vn(),tOe=Ji(),rOe=Jr(),nOe=tOe.w3cTraceId(),iOe=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=UM&&typeof UM.hostname=="function"&&UM.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,l={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:nOe,MachineName:o,Instance:s,RoleName:a};return l},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case yg.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case yg.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case yg.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case yg.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case yg.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=Ha(Ha({},r),{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=Ha(Ha({},r),{Message:e.data.baseData.message,SeverityLevel:yg.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(l){i+=l.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=Ha(Ha({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Ha(Ha({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=Ha(Ha({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=Sne.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=Sne.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):rOe.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new yg.ContextTagKeys,t}();Cne.exports=iOe});var Ane=k((ect,wne)=>{"use strict";var oOe=function(){return(Date.now()+621355968e5)*1e4};wne.exports={getTransmissionTime:oOe}});var Nne=k((rE,Pne)=>{"use strict";var Rne=rE&&rE.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Dne=rE&&rE.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},sOe=require("https"),aOe=R_(),qM=Jr(),cOe=Ane(),HM=Ji(),lOe=require("url"),ja={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},uOe=function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var i=[{name:ja.streamId,value:e.StreamId},{name:ja.machineName,value:e.MachineName},{name:ja.roleName,value:e.RoleName},{name:ja.instanceName,value:e.Instance},{name:ja.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",i)},t.prototype.post=function(e,r,n){return Rne(this,void 0,void 0,function(){return Dne(this,function(i){switch(i.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return i.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,i,o){return Rne(this,void 0,void 0,function(){var s,a,l,c,u,p,d,f,m=this;return Dne(this,function(h){switch(h.label){case 0:if(s=HM.stringify(e),a=(d={},d[aOe.disableCollectionRequestOption]=!0,d.host=r&&r.length>0?r:this._config.quickPulseHost,d.method=ja.method,d.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,d.headers=(f={Expect:"100-continue"},f[ja.time]=cOe.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),d),o&&o.length>0&&o.forEach(function(g){return a.headers[g.name]=g.value}),i!=="post")return[3,4];if(l=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!l)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,l.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return c=h.sent(),u="Failed to get AAD bearer token for the Application. Error:",qM.info(t.TAG,u,c),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=HM.tlsRestrictedAgent,p=sOe.request(a,function(g){if(g.statusCode==200){var v=g.headers[ja.subscribed]==="true",_=null;try{_=g.headers[ja.endpointRedirect]?new lOe.URL(g.headers[ja.endpointRedirect].toString()).host:null}catch(b){m._onError("Failed to parse redirect header from QuickPulse: "+HM.dumpObj(b))}var y=g.headers[ja.pollingIntervalHint]?parseInt(g.headers[ja.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,n(v,g,_,y)}else m._onError("StatusCode:"+g.statusCode+" StatusMessage:"+g.statusMessage),n()}),p.on("error",function(g){m._onError(g),n()}),p.write(s),p.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",qM.warn(t.TAG,r,e)):qM.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();Pne.exports=uOe});var Fne=k((nE,Mne)=>{"use strict";var kne=nE&&nE.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},One=nE&&nE.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Lne=Jr(),jM=Ine(),pOe=Nne(),dOe=vn(),fOe=E_(),mOe=function(){function t(e,r,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new fOe,this._sender=new pOe(this.config,n),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=jM.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=dOe.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=jM.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return kne(this,void 0,void 0,function(){var e,r,n,i,o=this;return One(this,function(s){switch(s.label){case 0:return e=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=jM.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,i=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return kne(this,void 0,void 0,function(){return One(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,i){e!=null?(this._isCollectingData!==e&&(Lne.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,Lne.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();Mne.exports=mOe});var Une=k(D_=>{"use strict";var LA=D_&&D_.__assign||function(){return LA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},LA.apply(this,arguments)};Object.defineProperty(D_,"__esModule",{value:!0});D_.AutoCollectNativePerformance=void 0;var iE=E_(),hOe=Jr(),gOe=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,hOe.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,i=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,l=o;a<l.length;a++){var c=l[a];s[c]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:LA(LA({},e),s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,n)})}},t}();D_.AutoCollectNativePerformance=gOe});var Hne=k(cf=>{"use strict";var Bne=cf&&cf.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},qne=cf&&cf.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(cf,"__esModule",{value:!0});cf.AzureFunctionsHook=void 0;var MA=Jr(),GM=Yd(),vOe=function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{MA.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new _Oe:e.version.startsWith("4.")&&(this._cachedModelHelper=new yOe)),this._cachedModelHelper||(this._cachedModelHelper=null,MA.warn('AzureFunctionsHook does not support model "'+e.name+'" version "'+e.version+'"'))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return Bne(e,void 0,void 0,function(){var n,i,o,s;return qne(this,function(a){try{n=this._getFuncModelHelper(),n&&(i=r.invocationContext,o=GM.CorrelationContextManager.startOperation(i),o&&(o.customProperties.setProperty("InvocationId",i.invocationId),s=i.traceContext,s.attributes&&(o.customProperties.setProperty("ProcessId",s.attributes.ProcessId),o.customProperties.setProperty("LogLevel",s.attributes.LogLevel),o.customProperties.setProperty("Category",s.attributes.Category),o.customProperties.setProperty("HostInstanceId",s.attributes.HostInstanceId),o.customProperties.setProperty("AzFuncLiveLogsSessionId",s.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=GM.CorrelationContextManager.wrapCallback(r.functionCallback,o),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=o,r.hookData.appInsightsStartTime=Date.now())))}catch(l){return MA.warn("Failed to propagate context in Azure Functions",l),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return Bne(e,void 0,void 0,function(){var n,i,o,s,a=this;return qne(this,function(l){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(i=r.inputs[0],i&&(o=r.hookData.appInsightsStartTime||Date.now(),s=r.hookData.appInsightsExtractedContext,s?GM.CorrelationContextManager.runWithContext(s,function(){a._createIncomingRequestTelemetry(i,r,o,s.operation.parentId)}):this._createIncomingRequestTelemetry(i,r,o,null)))}catch(c){MA.warn("Error creating automatic incoming request in Azure Functions",c)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,i){var o=this._getFuncModelHelper().getStatusCodes(r),s=200;if(o)for(var a=0,l=o;a<l.length;a++){var c=l[a];if(typeof c=="number"&&Number.isInteger(c)){s=c;break}else if(typeof c=="string"){var u=parseInt(c);if(!isNaN(u)){s=u;break}}}else s=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:s,success:typeof s=="number"?0<s&&s<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t}();cf.AzureFunctionsHook=vOe;var _Oe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,i=r.bindingDefinitions.find(function(o){return o.direction==="out"&&o.type.toLowerCase()==="http"});return i?.name==="$return"?n=e.result:i&&r.bindings&&r.bindings[i.name]!==void 0?n=r.bindings[i.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var i;return((i=n.type)===null||i===void 0?void 0:i.toLowerCase())==="httptrigger"})},t}(),yOe=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t}()});var VM=k((nct,Vne)=>{"use strict";var xOe=ng(),jne=SM(),bOe=Jr(),Gne=vn(),EOe=require("url"),TOe=AI(),SOe=function(){function t(e){this._endpointBase=Gne.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=jne.parse(e),i=jne.parse(r),o=!n.instrumentationkey&&Object.keys(n).length>0?null:e,s=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||n.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||i.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||i.liveendpoint||process.env[t.ENV_quickPulseHost]||Gne.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new EOe.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||i.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=xOe.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||bOe.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=TOe.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t}();Vne.exports=SOe});function FA(){return zM.create()}var zne,zM,$M=I(()=>{zne=new Set(["Deserialize","Serialize","Retry","Sign"]),zM=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!zne.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!zne.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),o=n("None"),s=n("Deserialize"),a=n("Retry"),l=n("Sign"),c=[i,o,s,a,l];function u(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?l:o}for(let m of this._policies){let h=m.policy,g=m.options,v=h.name;if(r.has(v))throw new Error("Duplicate policy names not allowed in pipeline");let _={policy:h,dependsOn:new Set,dependants:new Set};g.afterPhase&&(_.afterPhase=u(g.afterPhase),_.afterPhase.hasAfterPolicies=!0),r.set(v,_),u(g.phase).policies.add(_)}for(let m of this._policies){let{policy:h,options:g}=m,v=h.name,_=r.get(v);if(!_)throw new Error(`Missing node for policy ${v}`);if(g.afterPolicies)for(let y of g.afterPolicies){let b=r.get(y);b&&(_.dependsOn.add(b),b.dependants.add(_))}if(g.beforePolicies)for(let y of g.beforePolicies){let b=r.get(y);b&&(b.dependsOn.add(_),_.dependants.add(b))}}function p(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(let g of h.dependants)g.dependsOn.delete(h);r.delete(h.policy.name),m.policies.delete(h)}}function d(){for(let m of c){if(p(m),m.policies.size>0&&m!==o){o.hasRun||p(o);return}m.hasAfterPolicies&&p(o)}}let f=0;for(;r.size>0;){f++;let m=e.length;if(d(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}});function Kne(t,...e){process.stderr.write(`${Wne.default.format(t,...e)}${$ne.EOL}`)}var $ne,Wne,Yne=I(()=>{$ne=require("os"),Wne=Oe(require("util"))});function YM(t){Xne=t,WM=[],KM=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?KM.push(new RegExp(`^${n.substr(1)}$`)):WM.push(new RegExp(`^${n}$`));for(let n of UA)n.enabled=QM(n.namespace)}function QM(t){if(t.endsWith("*"))return!0;for(let e of KM)if(e.test(t))return!1;for(let e of WM)if(e.test(t))return!0;return!1}function COe(){let t=Xne||"";return YM(""),t}function Zne(t){let e=Object.assign(r,{enabled:QM(t),destroy:IOe,log:Jne.log,namespace:t,extend:wOe});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return UA.push(e),e}function IOe(){let t=UA.indexOf(this);return t>=0?(UA.splice(t,1),!0):!1}function wOe(t){let e=Zne(`${this.namespace}:${t}`);return e.log=this.log,e}var Qne,Xne,WM,KM,UA,Jne,P_,eie=I(()=>{Yne();Qne=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,WM=[],KM=[],UA=[];Qne&&YM(Qne);Jne=Object.assign(t=>Zne(t),{enable:YM,enabled:QM,disable:COe,log:Kne});P_=Jne});function AOe(t){if(t&&!oie(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${ZM.join(",")}`);XM=t;let e=[];for(let r of rie)iie(r)&&e.push(r.namespace);P_.enable(e.join(","))}function HA(t){let e=JM.extend(t);return nie(JM,e),{error:qA(e,"error"),warning:qA(e,"warning"),info:qA(e,"info"),verbose:qA(e,"verbose")}}function nie(t,e){e.log=(...r)=>{t.log(...r)}}function qA(t,e){let r=Object.assign(t.extend(e),{level:e});if(nie(t,r),iie(r)){let n=P_.disable();P_.enable(n+","+r.namespace)}return rie.add(r),r}function iie(t){return!!(XM&&tie[t.level]<=tie[XM])}function oie(t){return ZM.includes(t)}var rie,BA,XM,JM,ZM,tie,e6=I(()=>{eie();rie=new Set,BA=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,JM=P_("azure");JM.log=(...t)=>{P_.log(...t)};ZM=["verbose","info","warning","error"];BA&&(oie(BA)?AOe(BA):console.error(`AZURE_LOG_LEVEL set to unknown log level '${BA}'; logging is not enabled. Acceptable values: ${ZM.join(", ")}.`));tie={verbose:400,info:300,warning:200,error:100}});var ro,N_=I(()=>{e6();ro=HA("core-rest-pipeline")});var t6,jA,sie=I(()=>{jA=typeof process<"u"&&!!process.version&&!!(!((t6=process.versions)===null||t6===void 0)&&t6.node)});function r6(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);let e=k_.get(t);e&&e.slice().forEach(r=>{r.call(t,{type:"abort"})}),GA.set(t,!0)}var k_,GA,oE,aie=I(()=>{k_=new WeakMap,GA=new WeakMap,oE=class t{constructor(){this.onabort=null,k_.set(this,[]),GA.set(this,!1)}get aborted(){if(!GA.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return GA.get(this)}static get none(){return new t}addEventListener(e,r){if(!k_.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");k_.get(this).push(r)}removeEventListener(e,r){if(!k_.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=k_.get(this),i=n.indexOf(r);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var Pl,sE,cie=I(()=>{aie();Pl=class extends Error{constructor(e){super(e),this.name="AbortError"}},sE=class{constructor(e){if(this._signal=new oE,!!e){Array.isArray(e)||(e=arguments);for(let r of e)r.aborted?this.abort():r.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){r6(this._signal)}static timeout(e){let r=new oE,n=setTimeout(r6,e,r);return typeof n.unref=="function"&&n.unref(),r}}});var VA=I(()=>{cie()});function n6(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var lie=I(()=>{});function aE(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var i6=I(()=>{});function O_(t){if(aE(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}function L_(t){if(O_(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}var uie=I(()=>{i6()});var M_=I(()=>{sie();lie();i6();uie()});var o6,ROe,DOe,F_,s6=I(()=>{M_();o6="REDACTED",ROe=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],DOe=["api-version"],F_=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=ROe.concat(e),r=DOe.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||aE(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=o6;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=o6;return r}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,o6);return r.toString()}}});function zA(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:ro.info,n=new F_({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:a6,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let s=await o(i);return r(`Response status code: ${s.status}`),r(`Headers: ${n.sanitize(s.headers)}`),s}}}var a6,c6=I(()=>{N_();s6();a6="logPolicy"});function $A(t={}){let{maxRetries:e=20}=t;return{name:l6,async sendRequest(r,n){let i=await n(r);return die(n,i,e)}}}async function die(t,e,r,n=0){let{request:i,status:o,headers:s}=e,a=s.get("location");if(a&&(o===300||o===301&&pie.includes(i.method)||o===302&&pie.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(a,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let c=await t(i);return die(t,c,r,n+1)}return e}var l6,pie,u6=I(()=>{l6="redirectPolicy",pie=["GET","HEAD"]});function fie(){return"User-Agent"}function mie(t){t.set("Node",process.version),t.set("OS",`(${U_.arch()}-${U_.type()}-${U_.release()})`)}var U_,hie=I(()=>{U_=Oe(require("os"))});var WA,p6=I(()=>{WA="1.10.1"});function POe(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}function gie(){return fie()}function KA(t){let e=new Map;e.set("core-rest-pipeline",WA),mie(e);let r=POe(e);return t?`${t} ${r}`:r}var d6=I(()=>{hie();p6()});function YA(t={}){let e=KA(t.userAgentPrefix);return{name:f6,async sendRequest(r,n){return r.headers.has(vie)||r.headers.set(vie,e),n(r)}}}var vie,f6,m6=I(()=>{d6();vie=gie(),f6="userAgentPolicy"});function QA(){return{name:h6,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}var h6,g6=I(()=>{h6="decompressResponsePolicy"});function XA(t,e,r){return new Promise((n,i)=>{let o,s,a=()=>i(new Pl(r?.abortErrorMsg?r?.abortErrorMsg:NOe)),l=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),l(),a()),r?.abortSignal&&r.abortSignal.aborted)return a();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})}function _ie(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}var NOe,JA=I(()=>{VA();NOe="The operation was aborted."});function yie(t){if(t&&[429,503].includes(t.status))try{for(let i of kOe){let o=_ie(t,i);if(o===0||o)return o*(i===v6?1e3:1)}let e=t.headers.get(v6);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function xie(t){return Number.isFinite(yie(t))}function ZA(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=yie(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var v6,kOe,e2=I(()=>{JA();v6="Retry-After",kOe=["retry-after-ms","x-ms-retry-after-ms",v6]});function B_(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:OOe,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:LOe,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:l}){let c=FOe(l),u=c&&t.ignoreSystemErrors,p=MOe(a),d=p&&t.ignoreHttpStatusCodes;if(a&&(xie(a)||!p)||d||u)return{skipStrategy:!0};if(l&&!c&&!p)return{errorToThrow:l};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+n6(0,h/2),{retryAfterInMs:o}}}}function MOe(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function FOe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}var OOe,LOe,t2=I(()=>{M_();e2();OOe=1e3,LOe=1e3*64});function Nl(t,e={maxRetries:3}){let r=e.logger||bie;return{name:UOe,async sendRequest(n,i){var o,s;let a,l,c=-1;e:for(;;){c+=1,a=void 0,l=void 0;try{r.info(`Retry ${c}: Attempting to send request`,n.requestId),a=await i(n),r.info(`Retry ${c}: Received a response from request`,n.requestId)}catch(u){if(r.error(`Retry ${c}: Received an error from request`,n.requestId),l=u,!u||l.name!=="RestError")throw u;a=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${c}: Request aborted.`),new Pl;if(c>=((s=e.maxRetries)!==null&&s!==void 0?s:3)){if(r.info(`Retry ${c}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${c}: Processing ${t.length} retry strategies.`);t:for(let u of t){let p=u.logger||bie;p.info(`Retry ${c}: Processing retry strategy ${u.name}.`);let d=u.retry({retryCount:c,response:a,responseError:l});if(d.skipStrategy){p.info(`Retry ${c}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=d;if(f)throw p.error(`Retry ${c}: Retry strategy ${u.name} throws error:`,f),f;if(m||m===0){p.info(`Retry ${c}: Retry strategy ${u.name} retries after ${m}`),await XA(m,void 0,{abortSignal:n.abortSignal});continue e}if(h){p.info(`Retry ${c}: Retry strategy ${u.name} redirects to ${h}`),n.url=h;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(a)return r.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var bie,UOe,q_=I(()=>{JA();e6();VA();bie=HA("core-rest-pipeline retryPolicy"),UOe="retryPolicy"});function r2(t={}){var e;return{name:BOe,sendRequest:Nl([ZA(),B_(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var BOe,_6=I(()=>{t2();e2();q_();BOe="defaultRetryPolicy"});var Sie=k((rlt,Tie)=>{var Eie=require("stream").Stream,qOe=require("util");Tie.exports=Dc;function Dc(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}qOe.inherits(Dc,Eie);Dc.create=function(t,e){var r=new this;e=e||{};for(var n in e)r[n]=e[n];r.source=t;var i=t.emit;return t.emit=function(){return r._handleEmit(arguments),i.apply(t,arguments)},t.on("error",function(){}),r.pauseStream&&t.pause(),r};Object.defineProperty(Dc.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Dc.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Dc.prototype.resume=function(){this._released||this.release(),this.source.resume()};Dc.prototype.pause=function(){this.source.pause()};Dc.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};Dc.prototype.pipe=function(){var t=Eie.prototype.pipe.apply(this,arguments);return this.resume(),t};Dc.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};Dc.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var Aie=k((nlt,wie)=>{var HOe=require("util"),Iie=require("stream").Stream,Cie=Sie();wie.exports=On;function On(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}HOe.inherits(On,Iie);On.create=function(t){var e=new this;t=t||{};for(var r in t)e[r]=t[r];return e};On.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};On.prototype.append=function(t){var e=On.isStreamLike(t);if(e){if(!(t instanceof Cie)){var r=Cie.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};On.prototype.pipe=function(t,e){return Iie.prototype.pipe.call(this,t,e),this.resume(),t};On.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};On.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(r){var n=On.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};On.prototype._pipeNext=function(t){this._currentStream=t;var e=On.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var r=t;this.write(r),this._getNext()};On.prototype._handleErrors=function(t){var e=this;t.on("error",function(r){e._emitError(r)})};On.prototype.write=function(t){this.emit("data",t)};On.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};On.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};On.prototype.end=function(){this._reset(),this.emit("end")};On.prototype.destroy=function(){this._reset(),this.emit("close")};On.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};On.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};On.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};On.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var Rie=k((ilt,jOe)=>{jOe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var Pie=k((olt,Die)=>{Die.exports=Rie()});var Oie=k(Ts=>{"use strict";var n2=Pie(),GOe=require("path").extname,Nie=/^\s*([^;\s]*)(?:;|\s|$)/,VOe=/^text\//i;Ts.charset=kie;Ts.charsets={lookup:kie};Ts.contentType=zOe;Ts.extension=$Oe;Ts.extensions=Object.create(null);Ts.lookup=WOe;Ts.types=Object.create(null);KOe(Ts.extensions,Ts.types);function kie(t){if(!t||typeof t!="string")return!1;var e=Nie.exec(t),r=e&&n2[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&VOe.test(e[1])?"UTF-8":!1}function zOe(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Ts.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=Ts.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function $Oe(t){if(!t||typeof t!="string")return!1;var e=Nie.exec(t),r=e&&Ts.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function WOe(t){if(!t||typeof t!="string")return!1;var e=GOe("x."+t).toLowerCase().substr(1);return e&&Ts.types[e]||!1}function KOe(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(n2).forEach(function(i){var o=n2[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var l=s[a];if(e[l]){var c=r.indexOf(n2[e[l]].source),u=r.indexOf(o.source);if(e[l]!=="application/octet-stream"&&(c>u||c===u&&e[l].substr(0,12)==="application/"))continue}e[l]=i}}})}});var Mie=k((alt,Lie)=>{Lie.exports=YOe;function YOe(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var y6=k((clt,Uie)=>{var Fie=Mie();Uie.exports=QOe;function QOe(t){var e=!1;return Fie(function(){e=!0}),function(n,i){e?t(n,i):Fie(function(){t(n,i)})}}});var x6=k((llt,Bie)=>{Bie.exports=XOe;function XOe(t){Object.keys(t.jobs).forEach(JOe.bind(t)),t.jobs={}}function JOe(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var b6=k((ult,Hie)=>{var qie=y6(),ZOe=x6();Hie.exports=eLe;function eLe(t,e,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=tLe(e,i,t[i],function(o,s){i in r.jobs&&(delete r.jobs[i],o?ZOe(r):r.results[i]=s,n(o,r.results))})}function tLe(t,e,r,n){var i;return t.length==2?i=t(r,qie(n)):i=t(r,e,qie(n)),i}});var E6=k((plt,jie)=>{jie.exports=rLe;function rLe(t,e){var r=!Array.isArray(t),n={index:0,keyedList:r||e?Object.keys(t):null,jobs:{},results:r?{}:[],size:r?Object.keys(t).length:t.length};return e&&n.keyedList.sort(r?e:function(i,o){return e(t[i],t[o])}),n}});var T6=k((dlt,Gie)=>{var nLe=x6(),iLe=y6();Gie.exports=oLe;function oLe(t){Object.keys(this.jobs).length&&(this.index=this.size,nLe(this),iLe(t)(null,this.results))}});var zie=k((flt,Vie)=>{var sLe=b6(),aLe=E6(),cLe=T6();Vie.exports=lLe;function lLe(t,e,r){for(var n=aLe(t);n.index<(n.keyedList||t).length;)sLe(t,e,n,function(i,o){if(i){r(i,o);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return cLe.bind(n,r)}});var S6=k((mlt,i2)=>{var $ie=b6(),uLe=E6(),pLe=T6();i2.exports=dLe;i2.exports.ascending=Wie;i2.exports.descending=fLe;function dLe(t,e,r,n){var i=uLe(t,r);return $ie(t,e,i,function o(s,a){if(s){n(s,a);return}if(i.index++,i.index<(i.keyedList||t).length){$ie(t,e,i,o);return}n(null,i.results)}),pLe.bind(i,n)}function Wie(t,e){return t<e?-1:t>e?1:0}function fLe(t,e){return-1*Wie(t,e)}});var Yie=k((hlt,Kie)=>{var mLe=S6();Kie.exports=hLe;function hLe(t,e,r){return mLe(t,e,null,r)}});var Xie=k((glt,Qie)=>{Qie.exports={parallel:zie(),serial:Yie(),serialOrdered:S6()}});var Zie=k((vlt,Jie)=>{Jie.exports=function(t,e){return Object.keys(e).forEach(function(r){t[r]=t[r]||e[r]}),t}});var R6=k((_lt,toe)=>{var A6=Aie(),eoe=require("util"),C6=require("path"),gLe=require("http"),vLe=require("https"),_Le=require("url").parse,yLe=require("fs"),xLe=require("stream").Stream,I6=Oie(),bLe=Xie(),w6=Zie();toe.exports=sr;eoe.inherits(sr,A6);function sr(t){if(!(this instanceof sr))return new sr(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],A6.call(this),t=t||{};for(var e in t)this[e]=t[e]}sr.LINE_BREAK=`\r
`;sr.DEFAULT_CONTENT_TYPE="application/octet-stream";sr.prototype.append=function(t,e,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=A6.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),eoe.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(t,e,r),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,r)};sr.prototype._trackLength=function(t,e,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+sr.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof xLe))&&(r.knownLength||this._valuesToMeasure.push(e))};sr.prototype._lengthRetriever=function(t,e){t.hasOwnProperty("fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):yLe.stat(t.path,function(r,n){var i;if(r){e(r);return}i=n.size-(t.start?t.start:0),e(null,i)}):t.hasOwnProperty("httpVersion")?e(null,+t.headers["content-length"]):t.hasOwnProperty("httpModule")?(t.on("response",function(r){t.pause(),e(null,+r.headers["content-length"])}),t.resume()):e("Unknown stream")};sr.prototype._multiPartHeader=function(t,e,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(e,r),i=this._getContentType(e,r),o="",s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&w6(s,r.header);var a;for(var l in s)s.hasOwnProperty(l)&&(a=s[l],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=l+": "+a.join("; ")+sr.LINE_BREAK)));return"--"+this.getBoundary()+sr.LINE_BREAK+o+sr.LINE_BREAK};sr.prototype._getContentDisposition=function(t,e){var r,n;return typeof e.filepath=="string"?r=C6.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t.name||t.path?r=C6.basename(e.filename||t.name||t.path):t.readable&&t.hasOwnProperty("httpVersion")&&(r=C6.basename(t.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};sr.prototype._getContentType=function(t,e){var r=e.contentType;return!r&&t.name&&(r=I6.lookup(t.name)),!r&&t.path&&(r=I6.lookup(t.path)),!r&&t.readable&&t.hasOwnProperty("httpVersion")&&(r=t.headers["content-type"]),!r&&(e.filepath||e.filename)&&(r=I6.lookup(e.filepath||e.filename)),!r&&typeof t=="object"&&(r=sr.DEFAULT_CONTENT_TYPE),r};sr.prototype._multiPartFooter=function(){return function(t){var e=sr.LINE_BREAK,r=this._streams.length===0;r&&(e+=this._lastBoundary()),t(e)}.bind(this)};sr.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+sr.LINE_BREAK};sr.prototype.getHeaders=function(t){var e,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)t.hasOwnProperty(e)&&(r[e.toLowerCase()]=t[e]);return r};sr.prototype.setBoundary=function(t){this._boundary=t};sr.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};sr.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?t=Buffer.concat([t,this._streams[r]]):t=Buffer.concat([t,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(sr.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};sr.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;e<24;e++)t+=Math.floor(Math.random()*10).toString(16);this._boundary=t};sr.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};sr.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};sr.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}bLe.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){t(r);return}n.forEach(function(i){e+=i}),t(null,e)})};sr.prototype.submit=function(t,e){var r,n,i={method:"post"};return typeof t=="string"?(t=_Le(t),n=w6({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},i)):(n=w6(t,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(t.headers),n.protocol=="https:"?r=vLe.request(n):r=gLe.request(n),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&r.setHeader("Content-Length",s),this.pipe(r),e){var a,l=function(c,u){return r.removeListener("error",l),r.removeListener("response",a),e.call(this,c,u)};a=l.bind(this,null),r.on("error",l),r.on("response",a)}}.bind(this)),r};sr.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};sr.prototype.toString=function(){return"[object FormData]"}});function o2(){return{name:D6,async sendRequest(t,e){if(t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?(t.body=ELe(t.formData),t.formData=void 0):await TLe(t.formData,t)}return e(t)}}}function ELe(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}async function TLe(t,e){let r=new roe.default;for(let i of Object.keys(t)){let o=t[i];if(Array.isArray(o))for(let s of o)r.append(i,s);else r.append(i,o)}e.body=r,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${r.getBoundary()}`);try{let i=await new Promise((o,s)=>{r.getLength((a,l)=>{a?s(a):o(l)})});e.headers.set("Content-Length",i)}catch{}}var roe,D6,P6=I(()=>{roe=Oe(R6()),D6="formDataPolicy"});var ioe=k((xlt,noe)=>{var H_=1e3,j_=H_*60,G_=j_*60,xg=G_*24,SLe=xg*7,CLe=xg*365.25;noe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ILe(t);if(r==="number"&&isFinite(t))return e.long?ALe(t):wLe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ILe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*CLe;case"weeks":case"week":case"w":return r*SLe;case"days":case"day":case"d":return r*xg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*G_;case"minutes":case"minute":case"mins":case"min":case"m":return r*j_;case"seconds":case"second":case"secs":case"sec":case"s":return r*H_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wLe(t){var e=Math.abs(t);return e>=xg?Math.round(t/xg)+"d":e>=G_?Math.round(t/G_)+"h":e>=j_?Math.round(t/j_)+"m":e>=H_?Math.round(t/H_)+"s":t+"ms"}function ALe(t){var e=Math.abs(t);return e>=xg?s2(t,e,xg,"day"):e>=G_?s2(t,e,G_,"hour"):e>=j_?s2(t,e,j_,"minute"):e>=H_?s2(t,e,H_,"second"):t+" ms"}function s2(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var N6=k((blt,ooe)=>{function RLe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=ioe(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let p=0;for(let d=0;d<u.length;d++)p=(p<<5)-p+u.charCodeAt(d),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(u){let p,d=null,f,m;function h(...g){if(!h.enabled)return;let v=h,_=Number(new Date),y=_-(p||_);v.diff=y,v.prev=p,v.curr=_,p=_,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let b=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(P,U)=>{if(P==="%%")return"%";b++;let H=r.formatters[U];if(typeof H=="function"){let j=g[b];P=H.call(v,j),g.splice(b,1),b--}return P}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=u,h.useColors=r.useColors(),h.color=r.selectColor(u),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(f!==r.namespaces&&(f=r.namespaces,m=r.enabled(u)),m),set:g=>{d=g}}),typeof r.init=="function"&&r.init(h),h}function n(u,p){let d=r(this.namespace+(typeof p>"u"?":":p)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let p,d=(typeof u=="string"?u:"").split(/[\s,]+/),f=d.length;for(p=0;p<f;p++)d[p]&&(u=d[p].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let p,d;for(p=0,d=r.skips.length;p<d;p++)if(r.skips[p].test(u))return!1;for(p=0,d=r.names.length;p<d;p++)if(r.names[p].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ooe.exports=RLe});var soe=k((ra,a2)=>{ra.formatArgs=PLe;ra.save=NLe;ra.load=kLe;ra.useColors=DLe;ra.storage=OLe();ra.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ra.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function DLe(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function PLe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+a2.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ra.log=console.debug||console.log||(()=>{});function NLe(t){try{t?ra.storage.setItem("debug",t):ra.storage.removeItem("debug")}catch{}}function kLe(){let t;try{t=ra.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function OLe(){try{return localStorage}catch{}}a2.exports=N6()(ra);var{formatters:LLe}=a2.exports;LLe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var coe=k((Elt,aoe)=>{"use strict";aoe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var poe=k((Tlt,uoe)=>{"use strict";var MLe=require("os"),loe=require("tty"),Ga=coe(),{env:ki}=process,lf;Ga("no-color")||Ga("no-colors")||Ga("color=false")||Ga("color=never")?lf=0:(Ga("color")||Ga("colors")||Ga("color=true")||Ga("color=always"))&&(lf=1);"FORCE_COLOR"in ki&&(ki.FORCE_COLOR==="true"?lf=1:ki.FORCE_COLOR==="false"?lf=0:lf=ki.FORCE_COLOR.length===0?1:Math.min(parseInt(ki.FORCE_COLOR,10),3));function k6(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function O6(t,e){if(lf===0)return 0;if(Ga("color=16m")||Ga("color=full")||Ga("color=truecolor"))return 3;if(Ga("color=256"))return 2;if(t&&!e&&lf===void 0)return 0;let r=lf||0;if(ki.TERM==="dumb")return r;if(process.platform==="win32"){let n=MLe.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ki)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ki)||ki.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ki)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ki.TEAMCITY_VERSION)?1:0;if(ki.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ki){let n=parseInt((ki.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ki.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ki.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ki.TERM)||"COLORTERM"in ki?1:r}function FLe(t){let e=O6(t,t&&t.isTTY);return k6(e)}uoe.exports={supportsColor:FLe,stdout:k6(O6(!0,loe.isatty(1))),stderr:k6(O6(!0,loe.isatty(2)))}});var foe=k((no,l2)=>{var ULe=require("tty"),c2=require("util");no.init=zLe;no.log=jLe;no.formatArgs=qLe;no.save=GLe;no.load=VLe;no.useColors=BLe;no.destroy=c2.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");no.colors=[6,2,3,4,5,1];try{let t=poe();t&&(t.stderr||t).level>=2&&(no.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}no.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function BLe(){return"colors"in no.inspectOpts?!!no.inspectOpts.colors:ULe.isatty(process.stderr.fd)}function qLe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+l2.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=HLe()+e+" "+t[0]}function HLe(){return no.inspectOpts.hideDate?"":new Date().toISOString()+" "}function jLe(...t){return process.stderr.write(c2.format(...t)+`
`)}function GLe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function VLe(){return process.env.DEBUG}function zLe(t){t.inspectOpts={};let e=Object.keys(no.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=no.inspectOpts[e[r]]}l2.exports=N6()(no);var{formatters:doe}=l2.exports;doe.o=function(t){return this.inspectOpts.colors=this.useColors,c2.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};doe.O=function(t){return this.inspectOpts.colors=this.useColors,c2.inspect(t,this.inspectOpts)}});var Va=k((Slt,L6)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?L6.exports=soe():L6.exports=foe()});var moe=k(M6=>{"use strict";Object.defineProperty(M6,"__esModule",{value:!0});function $Le(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(o,s)=>{o?i(o):n(s)})})}}M6.default=$Le});var B6=k((U6,goe)=>{"use strict";var hoe=U6&&U6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},WLe=require("events"),KLe=hoe(Va()),YLe=hoe(moe()),lE=KLe.default("agent-base");function QLe(t){return!!t&&typeof t.addRequest=="function"}function F6(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function u2(t,e){return new u2.Agent(t,e)}(function(t){class e extends WLe.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:F6()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:F6()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=F6()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,a=null,l=o.timeout||this.timeout,c=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},u=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${l}ms`);f.code="ETIMEOUT",c(f)},p=f=>{s||(a!==null&&(clearTimeout(a),a=null),c(f))},d=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),QLe(f)){lE("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);c(m)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(lE("Converting legacy callback function to promise"),this.promisifiedCallback=YLe.default(this.callback)):this.promisifiedCallback=this.callback),typeof l=="number"&&l>0&&(a=setTimeout(u,l)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{lE("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(d,p)}catch(f){Promise.reject(f).catch(p)}}freeSocket(n,i){lE("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){lE("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(u2||(u2={}));goe.exports=u2});var voe=k(pE=>{"use strict";var XLe=pE&&pE.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pE,"__esModule",{value:!0});var JLe=XLe(Va()),uE=JLe.default("https-proxy-agent:parse-proxy-response");function ZLe(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let p=t.read();p?u(p):t.once("readable",o)}function s(){t.removeListener("end",l),t.removeListener("error",c),t.removeListener("close",a),t.removeListener("readable",o)}function a(p){uE("onclose had error %o",p)}function l(){uE("onend")}function c(p){s(),uE("onerror %o",p),r(p)}function u(p){i.push(p),n+=p.length;let d=Buffer.concat(i,n);if(d.indexOf(`\r
\r
`)===-1){uE("have not received end of HTTP headers yet..."),o();return}let m=d.toString("ascii",0,d.indexOf(`\r
`)),h=+m.split(" ")[1];uE("got proxy server response: %o",m),e({statusCode:h,buffered:d})}t.on("error",c),t.on("close",a),t.on("end",l),o()})}pE.default=ZLe});var xoe=k(bg=>{"use strict";var e5e=bg&&bg.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},V_=bg&&bg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bg,"__esModule",{value:!0});var _oe=V_(require("net")),yoe=V_(require("tls")),t5e=V_(require("url")),r5e=V_(require("assert")),n5e=V_(Va()),i5e=B6(),o5e=V_(voe()),dE=n5e.default("https-proxy-agent:agent"),q6=class extends i5e.Agent{constructor(e){let r;if(typeof e=="string"?r=t5e.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");dE("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||c5e(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return e5e(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(dE("Creating `tls.Socket`: %o",n),o=yoe.default.connect(n)):(dE("Creating `net.Socket`: %o",n),o=_oe.default.connect(n));let s=Object.assign({},n.headers),l=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:c,port:u,secureEndpoint:p}=r;a5e(u,p)||(c+=`:${u}`),s.Host=c,s.Connection="close";for(let g of Object.keys(s))l+=`${g}: ${s[g]}\r
`;let d=o5e.default(o);o.write(`${l}\r
`);let{statusCode:f,buffered:m}=yield d;if(f===200){if(e.once("socket",s5e),r.secureEndpoint){dE("Upgrading socket connection to TLS");let g=r.servername||r.host;return yoe.default.connect(Object.assign(Object.assign({},l5e(r,"host","hostname","path","port")),{socket:o,servername:g}))}return o}o.destroy();let h=new _oe.default.Socket({writable:!1});return h.readable=!0,e.once("socket",g=>{dE("replaying proxy buffer for failed request"),r5e.default(g.listenerCount("data")>0),g.push(m),g.push(null)}),h})}};bg.default=q6;function s5e(t){t.resume()}function a5e(t,e){return!!(!e&&t===80||e&&t===443)}function c5e(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function l5e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var Eoe=k((G6,boe)=>{"use strict";var u5e=G6&&G6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},H6=u5e(xoe());function j6(t){return new H6.default(t)}(function(t){t.HttpsProxyAgent=H6.default,t.prototype=H6.default.prototype})(j6||(j6={}));boe.exports=j6});var Toe=k(V6=>{"use strict";Object.defineProperty(V6,"__esModule",{value:!0});function p5e(t,e,{signal:r}={}){return new Promise((n,i)=>{function o(){r?.removeEventListener("abort",o),t.removeListener(e,s),t.removeListener("error",a)}function s(...l){o(),n(l)}function a(l){o(),i(l)}r?.addEventListener("abort",o),t.on(e,s),t.on("error",a)})}V6.default=p5e});var Soe=k(Eg=>{"use strict";var d5e=Eg&&Eg.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},fE=Eg&&Eg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Eg,"__esModule",{value:!0});var f5e=fE(require("net")),m5e=fE(require("tls")),z6=fE(require("url")),h5e=fE(Va()),g5e=fE(Toe()),v5e=B6(),uf=(0,h5e.default)("http-proxy-agent");function _5e(t){return typeof t=="string"?/^https:?$/i.test(t):!1}var $6=class extends v5e.Agent{constructor(e){let r;if(typeof e=="string"?r=z6.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");uf("Creating new HttpProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||_5e(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return d5e(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=z6.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=r.hostname||r.host||null),o.port==null&&typeof r.port&&(o.port=String(r.port)),o.port==="80"&&(o.port=""),e.path=z6.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let s;if(i?(uf("Creating `tls.Socket`: %o",n),s=m5e.default.connect(n)):(uf("Creating `net.Socket`: %o",n),s=f5e.default.connect(n)),e._header){let a,l;uf("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(uf("Patching connection write() output buffer with updated header"),a=e.output[0],l=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(l),uf("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(uf("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,l=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(l),uf("Output buffer: %o",e.outputData[0].data))}return yield(0,g5e.default)(s,"connect"),s})}};Eg.default=$6});var Ioe=k((Y6,Coe)=>{"use strict";var y5e=Y6&&Y6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},W6=y5e(Soe());function K6(t){return new W6.default(t)}(function(t){t.HttpProxyAgent=W6.default,t.prototype=W6.default.prototype})(K6||(K6={}));Coe.exports=K6});function p2(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function C5e(){if(!process)return;let t=p2(x5e),e=p2(E5e),r=p2(b5e);return t||e||r}function I5e(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}function w5e(){let t=p2(T5e);return Poe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function X6(t){if(!t&&(t=C5e(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function Aoe(t,{headers:e,tlsSettings:r}){let n;try{n=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}r&&ro.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:t.port,protocol:n.protocol,headers:e.toJSON()};return t.username&&t.password?i.auth=`${t.username}:${t.password}`:t.username&&(i.auth=`${t.username}`),i}function A5e(t,e){if(t.agent)return;let n=new URL(t.url).protocol!=="https:",i=t.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=Aoe(i,t);e.httpProxyAgent=new Doe.HttpProxyAgent(o)}t.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=Aoe(i,t);e.httpsProxyAgent=new Roe.HttpsProxyAgent(o)}t.agent=e.httpsProxyAgent}}function d2(t=X6(),e){Poe||woe.push(...w5e());let r={};return{name:Q6,async sendRequest(n,i){var o;return!n.proxySettings&&!I5e(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:woe,e?.customNoProxyList?void 0:S5e)&&(n.proxySettings=t),n.proxySettings&&A5e(n,r),i(n)}}}var Roe,Doe,x5e,b5e,E5e,T5e,Q6,woe,Poe,S5e,J6=I(()=>{Roe=Oe(Eoe()),Doe=Oe(Ioe());N_();x5e="HTTPS_PROXY",b5e="HTTP_PROXY",E5e="ALL_PROXY",T5e="NO_PROXY",Q6="proxyPolicy",woe=[],Poe=!1,S5e=new Map});function f2(t="x-ms-client-request-id"){return{name:Z6,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}var Z6,eF=I(()=>{Z6="setClientRequestIdPolicy"});function m2(t){return{name:tF,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}var tF,rF=I(()=>{tF="tlsPolicy"});function Noe(t={}){let e=new nF(t.parentContext);return t.span&&(e=e.setValue(z_.span,t.span)),t.namespace&&(e=e.setValue(z_.namespace,t.namespace)),e}var z_,nF,iF=I(()=>{z_={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};nF=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}}});function R5e(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function D5e(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:R5e(),tracingContext:Noe({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function mE(){return oF||(oF=D5e()),oF}var oF,koe=I(()=>{iF()});function sF(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(c,u,p){var d;let f=mE().startSpan(c,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(d=u?.tracingOptions)===null||d===void 0?void 0:d.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(z_.namespace)||(m=m.setValue(z_.namespace,e)),h.setAttribute("az.namespace",m.getValue(z_.namespace));let g=Object.assign({},u,{tracingOptions:Object.assign(Object.assign({},u?.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:g}}async function o(c,u,p,d){let{span:f,updatedOptions:m}=i(c,u,d);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(p(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(c,u,...p){return mE().withContext(c,u,...p)}function a(c){return mE().parseTraceparentHeader(c)}function l(c){return mE().createRequestHeaders(c)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:l}}var Ooe=I(()=>{koe();iF()});var Loe=I(()=>{Ooe()});var Moe,Foe,Uoe=I(()=>{Moe=require("util"),Foe=Moe.inspect.custom});function h2(t){return t instanceof na?!0:O_(t)&&t.name==="RestError"}var P5e,na,g2=I(()=>{M_();Uoe();s6();P5e=new F_,na=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,this.request=r.request,this.response=r.response,Object.setPrototypeOf(this,t.prototype)}[Foe](){return`RestError: ${this.message} 
 ${P5e.sanitize(this)}`}};na.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";na.PARSE_ERROR="PARSE_ERROR"});function v2(t={}){let e=KA(t.userAgentPrefix),r=N5e();return{name:aF,async sendRequest(n,i){var o,s;if(!r||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:a,tracingContext:l}=(s=k5e(r,n,e))!==null&&s!==void 0?s:{};if(!a||!l)return i(n);try{let c=await r.withContext(l,i,n);return L5e(a,c),c}catch(c){throw O5e(a,c),c}}}}function N5e(){try{return sF({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:WA})}catch(t){ro.warning(`Error when creating the TracingClient: ${L_(t)}`);return}}function k5e(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}r&&n.setAttribute("http.user_agent",r);let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))e.headers.set(s,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){ro.warning(`Skipping creating a tracing span due to an error: ${L_(n)}`);return}}function O5e(t,e){try{t.setStatus({status:"error",error:O_(e)?e:void 0}),h2(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){ro.warning(`Skipping tracing span processing due to an error: ${L_(r)}`)}}function L5e(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){ro.warning(`Skipping tracing span processing due to an error: ${L_(r)}`)}}var aF,cF=I(()=>{Loe();p6();d6();N_();M_();g2();aF="tracingPolicy"});function Boe(t){let e=FA();return jA&&(t.tlsOptions&&e.addPolicy(m2(t.tlsOptions)),e.addPolicy(d2(t.proxyOptions)),e.addPolicy(QA())),e.addPolicy(o2()),e.addPolicy(YA(t.userAgentOptions)),e.addPolicy(f2()),e.addPolicy(r2(t.retryOptions),{phase:"Retry"}),e.addPolicy(v2(t.userAgentOptions),{afterPhase:"Retry"}),jA&&e.addPolicy($A(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(zA(t.loggingOptions),{afterPhase:"Sign"}),e}var qoe=I(()=>{c6();$M();u6();m6();g6();_6();P6();M_();J6();eF();rF();cF()});function _2(t){return t.toLowerCase()}function*M5e(t){for(let e of t.values())yield[e.name,e.value]}function $_(t){return new lF(t)}var lF,y2=I(()=>{lF=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(_2(e),{name:e,value:String(r)})}get(e){var r;return(r=this._headersMap.get(_2(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(_2(e))}delete(e){this._headersMap.delete(_2(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return M5e(this._headersMap)}}});function hE(t){return t&&typeof t.pipe=="function"}function Hoe(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function Goe(t){return t&&typeof t.byteLength=="number"}function U5e(t){let e=$_();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function B5e(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=b2.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=b2.createInflate();return t.pipe(n),n}return t}function q5e(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new na(`Error reading response as text: ${i.message}`,{code:na.PARSE_ERROR}))})})}function H5e(t){return t?Buffer.isBuffer(t)?t.length:hE(t)?null:Goe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function Voe(){return new uF}var W_,K_,b2,joe,F5e,x2,uF,zoe=I(()=>{W_=Oe(require("http")),K_=Oe(require("https")),b2=Oe(require("zlib")),joe=require("stream");VA();y2();g2();N_();F5e={};x2=class extends joe.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},uF=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new sE,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new Pl("The operation was aborted.");s=p=>{p.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),l=a?.includes("gzip")||a?.includes("deflate"),c=typeof e.body=="function"?e.body():e.body;if(c&&!e.headers.has("Content-Length")){let p=H5e(c);p!==null&&e.headers.set("Content-Length",p)}let u;try{if(c&&e.onUploadProgress){let g=e.onUploadProgress,v=new x2(g);v.on("error",_=>{ro.error("Error in upload progress",_)}),hE(c)?c.pipe(v):v.end(c),c=v}let p=await this.makeRequest(e,o,c),d=U5e(p),m={status:(r=p.statusCode)!==null&&r!==void 0?r:0,headers:d,request:e};if(e.method==="HEAD")return p.resume(),m;u=l?B5e(p,d):p;let h=e.onDownloadProgress;if(h){let g=new x2(h);g.on("error",v=>{ro.error("Error in download progress",v)}),u.pipe(g),u=g}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=u:m.bodyAsText=await q5e(u),m}finally{if(e.abortSignal&&s){let p=Promise.resolve();hE(c)&&(p=Hoe(c));let d=Promise.resolve();hE(u)&&(d=Hoe(u)),Promise.all([p,d]).then(()=>{var f;s&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{ro.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),s=o.protocol!=="https:";if(s&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let l={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((c,u)=>{let p=s?W_.request(l,c):K_.request(l,c);p.once("error",d=>{var f;u(new na(d.message,{code:(f=d.code)!==null&&f!==void 0?f:na.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let d=new Pl("The operation was aborted.");p.destroy(d),u(d)}),n&&hE(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):Goe(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(ro.error("Unrecognized body type",n),u(new na("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?W_.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new W_.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return K_.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:F5e,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(ro.info("No cached TLS Agent exist, creating a new Agent"),s=new K_.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function $oe(){return Voe()}var Woe=I(()=>{zoe()});function pF(){return E2>T2.length-16&&(Koe.default.randomFillSync(T2),E2=0),T2.slice(E2,E2+=16)}var Koe,T2,E2,Yoe=I(()=>{Koe=Oe(require("crypto")),T2=new Uint8Array(256),E2=T2.length});var Qoe,Xoe=I(()=>{Qoe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function j5e(t){return typeof t=="string"&&Qoe.test(t)}var Joe,Zoe=I(()=>{Xoe();Joe=j5e});function G5e(t,e=0){let r=(io[t[e+0]]+io[t[e+1]]+io[t[e+2]]+io[t[e+3]]+"-"+io[t[e+4]]+io[t[e+5]]+"-"+io[t[e+6]]+io[t[e+7]]+"-"+io[t[e+8]]+io[t[e+9]]+"-"+io[t[e+10]]+io[t[e+11]]+io[t[e+12]]+io[t[e+13]]+io[t[e+14]]+io[t[e+15]]).toLowerCase();if(!Joe(r))throw TypeError("Stringified UUID is invalid");return r}var io,ese,tse=I(()=>{Zoe();io=[];for(let t=0;t<256;++t)io.push((t+256).toString(16).substr(1));ese=G5e});function V5e(t,e,r){t=t||{};let n=t.random||(t.rng||pF)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return ese(n)}var dF,rse=I(()=>{Yoe();tse();dF=V5e});var nse=I(()=>{rse()});function ise(){return dF()}var ose=I(()=>{nse()});function sse(t){return new fF(t)}var fF,ase=I(()=>{y2();ose();fF=class{constructor(e){var r,n,i,o,s,a,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:$_(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(s=e.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||ise(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1}}});function lse(t={}){var e;return Nl([B_(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3})}var cse,use=I(()=>{t2();q_();cse="exponentialRetryPolicy"});function pse(t={}){var e;return{name:mF,sendRequest:Nl([B_(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var mF,dse=I(()=>{t2();q_();mF="systemErrorRetryPolicy"});function fse(t={}){var e;return{name:hF,sendRequest:Nl([ZA()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var hF,mse=I(()=>{e2();q_();hF="throttlingRetryPolicy"});async function $5e(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await XA(e),i=await n();return i}function hse(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},z5e),e),s={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return!s.isRefreshing&&((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(l,c){var u;return s.isRefreshing||(r=$5e(()=>t.getToken(l,c),o.retryIntervalInMs,(u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then(d=>(r=null,n=d,i=c.tenantId,n)).catch(d=>{throw r=null,n=null,i=void 0,d})),r}return async(l,c)=>i!==c.tenantId||!!c.claims||s.mustRefresh?a(l,c):(s.shouldRefresh&&a(l,c),n)}var z5e,gse=I(()=>{JA();z5e={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function W5e(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}function K5e(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function vse(t){var e;let{credential:r,scopes:n,challengeCallbacks:i}=t,o=t.logger||ro,s=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:W5e,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=r?hse(r):()=>Promise.resolve(null);return{name:gF,async sendRequest(l,c){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:l,getAccessToken:a,logger:o});let u,p;try{u=await c(l)}catch(d){p=d,u=d.response}if(s.authorizeRequestOnChallenge&&u?.status===401&&K5e(u)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:l,response:u,getAccessToken:a,logger:o}))return c(l);if(p)throw p;return u}}}var gF,_se=I(()=>{gse();N_();gF="bearerTokenAuthenticationPolicy"});function yse(){return{name:vF,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}var vF,xse=I(()=>{vF="ndJsonPolicy"});var bse={};Ri(bse,{RestError:()=>na,bearerTokenAuthenticationPolicy:()=>vse,bearerTokenAuthenticationPolicyName:()=>gF,createDefaultHttpClient:()=>$oe,createEmptyPipeline:()=>FA,createHttpHeaders:()=>$_,createPipelineFromOptions:()=>Boe,createPipelineRequest:()=>sse,decompressResponsePolicy:()=>QA,decompressResponsePolicyName:()=>h6,defaultRetryPolicy:()=>r2,exponentialRetryPolicy:()=>lse,exponentialRetryPolicyName:()=>cse,formDataPolicy:()=>o2,formDataPolicyName:()=>D6,getDefaultProxySettings:()=>X6,isRestError:()=>h2,logPolicy:()=>zA,logPolicyName:()=>a6,ndJsonPolicy:()=>yse,ndJsonPolicyName:()=>vF,proxyPolicy:()=>d2,proxyPolicyName:()=>Q6,redirectPolicy:()=>$A,redirectPolicyName:()=>l6,retryPolicy:()=>Nl,setClientRequestIdPolicy:()=>f2,setClientRequestIdPolicyName:()=>Z6,systemErrorRetryPolicy:()=>pse,systemErrorRetryPolicyName:()=>mF,throttlingRetryPolicy:()=>fse,throttlingRetryPolicyName:()=>hF,tlsPolicy:()=>m2,tlsPolicyName:()=>tF,tracingPolicy:()=>v2,tracingPolicyName:()=>aF,userAgentPolicy:()=>YA,userAgentPolicyName:()=>f6});var Ese=I(()=>{$M();qoe();Woe();y2();ase();g2();g6();use();eF();c6();J6();u6();dse();mse();q_();cF();_6();m6();rF();P6();_se();xse()});var Cse=k((gE,Sse)=>{"use strict";var Y5e=gE&&gE.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},Q5e=gE&&gE.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Tse=(Ese(),Xn(bse)),X5e="https://monitor.azure.com//.default";function J5e(t){return null}var Z5e=function(){function t(e,r){var n=r?[r]:[X5e];this._azureTokenPolicy=Tse.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}return t.prototype.addAuthorizationHeader=function(e){return Y5e(this,void 0,void 0,function(){var r,n;return Q5e(this,function(i){switch(i.label){case 0:return r="authorization",n=Tse.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,J5e)];case 1:return i.sent(),e.headers[r]=n.headers.get(r),[2]}})})},t}();Sse.exports=Z5e});var wse=k((bpt,Ise)=>{"use strict";var e3e=Jr(),t3e=Ji(),r3e=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){e3e.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||t3e.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t}();Ise.exports=r3e});var Ase=k(S2=>{"use strict";Object.defineProperty(S2,"__esModule",{value:!0});S2.azureRoleEnvironmentTelemetryProcessor=void 0;function n3e(t,e){}S2.azureRoleEnvironmentTelemetryProcessor=n3e});var Pse=k(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0});Y_.getSamplingHashCode=Y_.samplingTelemetryProcessor=void 0;var Rse=bo();function i3e(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&Rse.TelemetryType.Metric===Rse.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=Dse(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Y_.samplingTelemetryProcessor=i3e;function Dse(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}Y_.getSamplingHashCode=Dse});var Nse=k(C2=>{"use strict";Object.defineProperty(C2,"__esModule",{value:!0});C2.performanceMetricsTelemetryProcessor=void 0;var _F=TA(),yF=bo();function o3e(t,e){switch(e&&e.addDocument(t),t.data.baseType){case yF.TelemetryTypeString.Exception:_F.countException();break;case yF.TelemetryTypeString.Request:var r=t.data.baseData;_F.countRequest(r.duration,r.success);break;case yF.TelemetryTypeString.Dependency:var n=t.data.baseData;_F.countDependency(n.duration,n.success);break}return!0}C2.performanceMetricsTelemetryProcessor=o3e});var kse=k(Q_=>{"use strict";var kl=Q_&&Q_.__assign||function(){return kl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kl.apply(this,arguments)};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.preAggregatedMetricsTelemetryProcessor=void 0;var s3e=bo(),vE=TM(),I2=bo();function a3e(t,e){if(vE.isEnabled())switch(t.data.baseType){case I2.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=kl(kl({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};vE.countException(n);break;case I2.TelemetryTypeString.Trace:var i=t.data.baseData;i.properties=kl(kl({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:s3e.SeverityLevel[i.severity]};vE.countTrace(o);break;case I2.TelemetryTypeString.Request:var s=t.data.baseData;s.properties=kl(kl({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};vE.countRequest(s.duration,a);break;case I2.TelemetryTypeString.Dependency:var l=t.data.baseData;l.properties=kl(kl({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var c={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:l.success,dependencyType:l.type,dependencyTarget:l.target,dependencyResultCode:l.resultCode};vE.countDependency(l.duration,c);break}return!0}Q_.preAggregatedMetricsTelemetryProcessor=a3e});var Ose=k(Ol=>{"use strict";var c3e=Ol&&Ol.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),w2=Ol&&Ol.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&c3e(e,t,r)};Object.defineProperty(Ol,"__esModule",{value:!0});w2(Ase(),Ol);w2(Pse(),Ol);w2(Nse(),Ol);w2(kse(),Ol)});var xF=k((wpt,Fse)=>{"use strict";var xt=bo(),Ss=Ji(),Lse=Yd(),l3e=Jr(),u3e=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case xt.TelemetryType.Trace:s=t.createTraceData(e);break;case xt.TelemetryType.Dependency:s=t.createDependencyData(e);break;case xt.TelemetryType.Event:s=t.createEventData(e);break;case xt.TelemetryType.Exception:s=t.createExceptionData(e);break;case xt.TelemetryType.Request:s=t.createRequestData(e);break;case xt.TelemetryType.Metric:s=t.createMetricData(e);break;case xt.TelemetryType.Availability:s=t.createAvailabilityData(e);break;case xt.TelemetryType.PageView:s=t.createPageViewData(e);break}if(s&&s.baseData&&xt.domainSupportsProperties(s.baseData)){if(n)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);t.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=Ss.validateStringMap(s.baseData.properties))}var l=o&&o.instrumentationKey||"",c=new xt.Envelope;return c.data=s,c.iKey=l,c.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,e.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=o?o.samplingPercentage:100,r===xt.TelemetryType.Metric&&(c.sampleRate=100),c},t.addAzureFunctionsCorrelationProperties=function(e){var r=Lse.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),i=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(Ss.isDate(i[o])||(i[o]==null&&(i[o]=""),typeof i[o]=="object"&&(i[o]=Ss.stringify(i[o])),r[n[o]]=String(i[o]).substring(0,8192)),r[n[o]]=i[o]);return r}catch(s){l3e.warn("Failed to properly truncate telemetry properties: ",s)}},t.createTraceData=function(e){var r,n=new xt.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=xt.SeverityLevel.Information:n.severityLevel=e.severity;var i=new xt.Data;return i.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Trace),i.baseData=n,i},t.createDependencyData=function(e){var r,n,i,o=new xt.RemoteDependencyData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),o.target=(i=e.target)===null||i===void 0?void 0:i.substring(0,1024),o.duration=Ss.msToTimeSpan(e.duration),o.success=e.success,o.type=e.dependencyTypeName,o.properties=this.truncateProperties(e),o.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?o.id=e.id:o.id=Ss.w3cTraceId();var s=new xt.Data;return s.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Dependency),s.baseData=o,s},t.createEventData=function(e){var r,n=new xt.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new xt.Data;return i.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Event),i.baseData=n,i},t.createExceptionData=function(e){var r,n,i=new xt.ExceptionData;i.properties=this.truncateProperties(e),isNaN(e.severity)?i.severityLevel=xt.SeverityLevel.Error:i.severityLevel=e.severity,i.measurements=e.measurements,i.exceptions=[];var o=e.exception.stack,s=new xt.ExceptionDetails;s.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),s.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),s.parsedStack=this.parseStack(o),s.hasFullStack=Ss.isArray(s.parsedStack)&&s.parsedStack.length>0,i.exceptions.push(s);var a=new xt.Data;return a.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Exception),a.baseData=i,a},t.createRequestData=function(e){var r,n,i,o,s=new xt.RequestData;e.id?s.id=e.id:s.id=Ss.w3cTraceId(),s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),s.source=(i=e.source)===null||i===void 0?void 0:i.substring(0,1024),s.duration=Ss.msToTimeSpan(e.duration),s.responseCode=(o=e.resultCode?e.resultCode.toString():"0")===null||o===void 0?void 0:o.substring(0,1024),s.success=e.success,s.properties=this.truncateProperties(e),s.measurements=e.measurements;var a=new xt.Data;return a.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Request),a.baseData=s,a},t.createMetricData=function(e){var r,n=new xt.MetricData;n.metrics=[];var i=new xt.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=xt.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new xt.Data;return o.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Metric),o.baseData=n,o},t.createAvailabilityData=function(e){var r,n,i=new xt.AvailabilityData;e.id?i.id=e.id:i.id=Ss.w3cTraceId(),i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Ss.msToTimeSpan(e.duration),i.success=e.success,i.runLocation=e.runLocation,i.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new xt.Data;return o.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Availability),o.baseData=i,o},t.createPageViewData=function(e){var r,n,i=new xt.PageViewData;i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=Ss.msToTimeSpan(e.duration),i.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new xt.Data;return o.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.PageView),o.baseData=i,o},t.getTags=function(e,r){var n=Lse.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(Mse.regex.test(a)){var l=new Mse(n[s],i++);o+=l.sizeInBytes,r.push(l)}}var c=32*1024;if(o>c)for(var u=0,p=r.length-1,d=0,f=u,m=p;u<p;){var h=r[u].sizeInBytes,g=r[p].sizeInBytes;if(d+=h+g,d>c){var v=m-f+1;r.splice(f,v);break}f=u,m=p,u++,p--}}return r},t}(),Mse=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Ss.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Ss.trim(n[2])||this.method,this.fileName=Ss.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();Fse.exports=u3e});var Use=k(pf=>{"use strict";var p3e=pf&&pf.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},d3e=pf&&pf.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(pf,"__esModule",{value:!0});pf.FileAccessControl=void 0;var f3e=require("fs"),m3e=require("os"),X_=require("child_process"),h3e=Jr(),g3e=function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=f3e.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||h3e.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return p3e(this,void 0,void 0,function(){var r,n;return d3e(this,function(i){switch(i.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=i.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return i.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=i.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var i=X_.spawn(t.ICACLS_PATH,e,{windowsHide:!0});i.on("error",function(o){return n(o)}),i.on("close",function(o,s){o===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},t._runICACLSSync=function(e){if(X_.spawnSync){var r=X_.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=X_.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";n.stdout.on("data",function(o){return i+=o}),n.on("error",function(o){return r(o)}),n.on("close",function(o,s){t.ACL_IDENTITY=i&&i.trim(),o===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(X_.spawnSync){var e=X_.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=m3e.type()==="Windows_NT",t}();pf.FileAccessControl=g3e});var EF=k((yE,qse)=>{"use strict";var A2=yE&&yE.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},R2=yE&&yE.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bF=require("fs"),v3e=require("os"),Tg=require("path"),_3e=require("zlib"),df=vn(),y3e=R_(),hp=kL(),Cs=Ji(),x3e=require("url"),Bse=Jr(),_E=Use(),b3e=439,E3e=402,T3e=[200,206,402,408,429,439,500],S3e=function(){function t(e,r,n,i,o,s,a){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=Tg.join(v3e.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var i=this;e&&_E.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=_E.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!_E.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(df.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(df.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return A2(this,void 0,void 0,function(){var n,i,o,s,a,l,c,u,p=this;return R2(this,function(d){switch(d.label){case 0:if(!e)return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,i=new x3e.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(df.StatsbeatFeature.AAD_HANDLING),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return d.sent(),[3,4];case 3:return a=d.sent(),l="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(l+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),l+="Error:"+a.toString(),this._logWarn(l),typeof r=="function"&&r(l),[2];case 4:c="",e.forEach(function(f){var m=Cs.stringify(f);typeof m=="string"&&(c+=m+`
`)}),c.length>0&&(c=c.substring(0,c.length-1)),u=Buffer.from?Buffer.from(c):new Buffer(c),_3e.gzip(u,function(f,m){var h=m;f?(p._logWarn(Cs.dumpObj(f)),h=u,o.headers["Content-Length"]=u.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),p._logInfo(Cs.dumpObj(o)),o[y3e.disableCollectionRequestOption]=!0;var g=+new Date,v=function(y){y.setEncoding("utf-8");var b="";y.on("data",function(x){b+=x}),y.on("end",function(){var x=+new Date,P=x-g;if(p._numConsecutiveFailures=0,p._isStatsbeatSender&&!p._statsbeatHasReachedIngestionAtLeastOnce&&(T3e.includes(y.statusCode)?p._statsbeatHasReachedIngestionAtLeastOnce=!0:p._statsbeatFailedToIngest()),p._statsbeat&&(y.statusCode==E3e||y.statusCode==b3e?p._statsbeat.countThrottle(df.StatsbeatNetworkCategory.Breeze,i,y.statusCode):p._statsbeat.countRequest(df.StatsbeatNetworkCategory.Breeze,i,P,y.statusCode===200,y.statusCode)),p._enableDiskRetryMode){if(y.statusCode===200)p._resendTimer||(p._resendTimer=setTimeout(function(){p._resendTimer=null,p._sendFirstFileOnDisk()},p._resendInterval),p._resendTimer.unref());else if(p._isRetriable(y.statusCode))try{p._statsbeat&&p._statsbeat.countRetry(df.StatsbeatNetworkCategory.Breeze,i,y.statusCode);var U=JSON.parse(b),H=[];U.errors&&(U.errors.forEach(function(F){(F.statusCode==429||F.statusCode==500||F.statusCode==503)&&H.push(e[F.index])}),H.length>0&&p._storeToDisk(H))}catch{p._storeToDisk(e)}}if(y.statusCode===307||y.statusCode===308)if(p._numConsecutiveRedirects++,p._numConsecutiveRedirects<10){var j=y.headers.location?y.headers.location.toString():null;j&&(p._redirectedHost=j,p.send(e,r))}else{var M={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};p._statsbeat&&p._statsbeat.countException(df.StatsbeatNetworkCategory.Breeze,i,M),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else p._numConsecutiveRedirects=0,typeof r=="function"&&r(b),p._logInfo(b),typeof p._onSuccess=="function"&&p._onSuccess(b)})},_=Cs.makeRequest(p._config,n,o,v);_.setTimeout(t.HTTP_TIMEOUT,function(){p._requestTimedOut=!0,_.abort()}),_.on("error",function(y){if(p._isStatsbeatSender&&!p._statsbeatHasReachedIngestionAtLeastOnce&&p._statsbeatFailedToIngest(),p._numConsecutiveFailures++,p._statsbeat&&p._statsbeat.countException(df.StatsbeatNetworkCategory.Breeze,i,y),!p._enableDiskRetryMode||p._numConsecutiveFailures>0&&p._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var b="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";p._enableDiskRetryMode&&(b="Ingestion endpoint could not be reached "+p._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),p._logWarn(b,Cs.dumpObj(y))}else{var b="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";p._logInfo(b,Cs.dumpObj(y))}p._onErrorHelper(y),typeof r=="function"&&(y?(p._requestTimedOut&&(y.name="telemetry timeout",y.message="telemetry request timed out"),r(Cs.dumpObj(y))):r("Error sending telemetry")),p._enableDiskRetryMode&&p._storeToDisk(e)}),_.write(h),_.end()}),d.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(Cs.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||Bse.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||Bse.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return A2(this,void 0,void 0,function(){var r,n,i,o,s,a,l;return R2(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,hp.confirmDirExists(this._tempDir)];case 1:return c.sent(),[3,3];case 2:return r=c.sent(),this._logWarn("Failed to create folder to put telemetry: "+Cs.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return c.trys.push([3,5,,6]),[4,_E.FileAccessControl.applyACLRules(this._tempDir)];case 4:return c.sent(),[3,6];case 5:return n=c.sent(),this._logWarn("Failed to apply file access control to folder: "+Cs.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return c.trys.push([6,8,,9]),[4,hp.getShallowDirectorySize(this._tempDir)];case 7:return i=c.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=c.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+Cs.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return c.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=Tg.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,hp.writeFileAsync(a,Cs.stringify(e),{mode:384})];case 10:return c.sent(),[3,12];case 11:return l=c.sent(),this._logWarn("Failed to persist telemetry to disk: "+Cs.dumpObj(l)),this._onErrorHelper(l),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),bF.existsSync(this._tempDir)||bF.mkdirSync(this._tempDir),_E.FileAccessControl.applyACLRulesSync(this._tempDir);var r=hp.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Tg.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),bF.writeFileSync(i,e,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+Cs.dumpObj(o)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){return A2(this,void 0,void 0,function(){var e,r,n,i,o,s;return R2(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,hp.readdirAsync(this._tempDir)];case 1:return e=a.sent(),e=e.filter(function(l){return Tg.basename(l).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=Tg.join(this._tempDir,r),[4,hp.readFileAsync(n)]):[3,5];case 2:return i=a.sent(),[4,hp.unlinkAsync(n)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return A2(this,void 0,void 0,function(){var e,r,n,i,o,s,a=this;return R2(this,function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),[4,hp.readdirAsync(this._tempDir)];case 1:if(e=l.sent(),e=e.filter(function(c){return Tg.basename(c).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,l.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),i=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,i?(o=Tg.join(this._tempDir,e[r]),[4,hp.unlinkAsync(o).catch(function(c){a._onErrorHelper(c)})]):[3,4]):[3,5];case 3:l.sent(),l.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return s=l.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=60*60*1e3,t.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t}();qse.exports=S3e});var jse=k(D2=>{"use strict";Object.defineProperty(D2,"__esModule",{value:!0});D2.AzureVirtualMachine=void 0;var Hse=Jr(),C3e=Ji(),I3e=R_(),w3e="http://169.254.169.254/metadata/instance/compute",A3e="api-version=2017-12-01",R3e="format=json",D3e="UNREACH",P3e=function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,i=this,o={},s=w3e+"?"+A3e+"&"+R3e,a=(n={method:"GET"},n[I3e.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),l=C3e.makeRequest(e,s,a,function(c){if(c.statusCode===200){o.isVM=!0;var u="";c.on("data",function(p){u+=p}),c.on("end",function(){try{var p=JSON.parse(u);o.id=p.vmId||"",o.subscriptionId=p.subscriptionId||"",o.osType=p.osType||""}catch(d){Hse.info(t.TAG,d)}r(o)})}else r(o)},!1,!1);l&&(setTimeout(function(){i._requestTimedOut=!0,l.abort()},t.HTTP_TIMEOUT),l.on("error",function(c){i._requestTimedOut&&c&&(c.name="telemetry timeout",c.message="telemetry request timed out"),c&&c.message&&c.message.indexOf(D3e)>-1?o.isVM=!1:Hse.info(t.TAG,c),r(o)}),l.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t}();D2.AzureVirtualMachine=P3e});var Gse=k(P2=>{"use strict";Object.defineProperty(P2,"__esModule",{value:!0});P2.NetworkStatsbeat=void 0;var N3e=function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t}();P2.NetworkStatsbeat=N3e});var Kse=k((Sg,Wse)=>{"use strict";var Ll=Sg&&Sg.__assign||function(){return Ll=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ll.apply(this,arguments)},TF=Sg&&Sg.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})},SF=Sg&&Sg.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},k3e=require("os"),O3e=xF(),Vse=Jr(),L3e=EF(),pn=vn(),M3e=bo(),F3e=jse(),U3e=VM(),zse=E_(),B3e=Gse(),$se=Ji(),q3e="node",H3e=function(){function t(e,r){this._attach=pn.StatsbeatAttach.sdk,this._feature=pn.StatsbeatFeature.NONE,this._instrumentation=pn.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new zse;var n=this._getConnectionString(e);this._statsbeatConfig=new U3e(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new L3e(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=pn.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(e,r);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=n,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(l){return o===l.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.exceptionCount.find(function(s){return n.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.throttleCount.find(function(s){return n===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.retryCount.find(function(s){return n===s.statusCode});o?o.count++:i.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return TF(this,void 0,void 0,function(){var e,r;return SF(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),Vse.info(t.TAG,"Failed to send Statsbeat metrics: "+$se.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return TF(this,void 0,void 0,function(){var e,r,n,i,o;return SF(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:pn.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=pn.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:pn.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:pn.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=pn.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:pn.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:pn.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),Vse.info(t.TAG,"Failed to send Statsbeat metrics: "+$se.dumpObj(o)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new B3e.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(o),o},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:pn.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=n.exec(e);i!=null&&i.length>1&&(r=i[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(a){o=i._networkStatsbeatCollection[a];var l=Object.assign({endpoint:o.endpoint,host:o.host},e);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:pn.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:l}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(c){l=Object.assign(Ll(Ll({},l),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:pn.StatsbeatCounter.REQUEST_FAILURE,value:c.count,properties:l})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(c){l=Object.assign(Ll(Ll({},l),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:pn.StatsbeatCounter.RETRY_COUNT,value:c.count,properties:l})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(c){l=Object.assign(Ll(Ll({},l),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:pn.StatsbeatCounter.THROTTLE_COUNT,value:c.count,properties:l})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(c){l=Object.assign(Ll(Ll({},l),{exceptionType:c.exceptionType})),r._statbeatMetrics.push({name:pn.StatsbeatCounter.EXCEPTION_COUNT,value:c.count,properties:l})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)n(s)},t.prototype._sendStatsbeats=function(){return TF(this,void 0,void 0,function(){var e,r,n,i;return SF(this,function(o){switch(o.label){case 0:for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=O3e.createEnvelope(n,M3e.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=pn.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return o.sent(),[2]}})})},t.prototype._getCustomProperties=function(){this._language=q3e,this._cikey=this._config.instrumentationKey,this._sdkVersion=zse.sdkVersion,this._os=k3e.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var i=!1;e._resourceProvider=pn.StatsbeatResourceProvider.unknown,e._resourceIdentifier=pn.StatsbeatResourceProvider.unknown,process.env.WEBSITE_SITE_NAME?(e._resourceProvider=pn.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=pn.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(i=!0,F3e.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(o){e._isVM=o.isVM,e._isVM&&(e._resourceProvider=pn.StatsbeatResourceProvider.vm,e._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(e._os=o.osType)),r()})):e._resourceProvider=pn.StatsbeatResourceProvider.unknown),i||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<n.length;i++)if(r.indexOf(n[i])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.TAG="Statsbeat",t}();Wse.exports=H3e});var Xse=k((Ppt,Qse)=>{"use strict";var j3e=require("url"),G3e=VM(),V3e=Cse(),z3e=E_(),gp=bo(),$3e=wse(),CF=Ose(),Yse=Yd(),W3e=Kse(),K3e=EF(),IF=Ji(),N2=Jr(),Y3e=xF(),Q3e=function(){function t(e){this._telemetryProcessors=[];var r=new G3e(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new z3e,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new W3e(this.config,this.context),this._statsbeat.enable(!0));var n=new K3e(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new $3e(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,gp.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,gp.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,gp.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,gp.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!IF.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,gp.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,gp.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,gp.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new j3e.URL(e.data).host}catch(r){e.target=null,N2.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,gp.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&gp.telemetryTypeToBaseType(r)){var n=Y3e.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&CF.samplingTelemetryProcessor(n,{correlationContext:Yse.CorrelationContextManager.getCurrentContext()}),CF.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(CF.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else N2.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(N2.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new V3e(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=Yse.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,N2.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,e)}return n&&(e&&e.tags&&(e.tags=IF.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=IF.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t}();Qse.exports=Q3e});var eae=k((wF,Zse)=>{"use strict";var X3e=wF&&wF.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J3e=Xse(),Jse=FM(),Z3e=R_(),k2=Jr(),e8e=function(t){X3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?Jse.trackRequestSync(this,r):k2.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&k2.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?Jse.trackRequest(this,r):k2.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?Z3e.trackRequest(this,r):k2.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(J3e);Zse.exports=e8e});var rae=k(tae=>{"use strict";Object.defineProperty(tae,"__esModule",{value:!0})});var aae=k(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.dispose=de.Configuration=de.wrapWithCorrelationContext=de.startOperation=de.getCorrelationContext=de.start=de.setup=de.liveMetricsClient=de.defaultClient=de.DistributedTracingModes=void 0;var AF=Yd(),t8e=Mre(),r8e=Ure(),RF=TA(),n8e=TM(),i8e=$re(),o8e=ine(),s8e=R_(),a8e=FM(),nae=ng(),xE=Jr(),iae=Fne(),DF=Une(),c8e=Hne();de.TelemetryClient=eae();de.Contracts=bo();de.azureFunctionsTypes=rae();var oae;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(oae=de.DistributedTracingModes||(de.DistributedTracingModes={}));var bE,EE,TE,SE,CE,J_,Z_,Cg,IE,wE,ia=!1,O2;function l8e(t){return de.defaultClient?xE.info("The default client is already setup"):(de.defaultClient=new de.TelemetryClient(t),bE=new t8e(de.defaultClient),EE=new r8e(de.defaultClient),TE=new RF(de.defaultClient),SE=new n8e(de.defaultClient),CE=new i8e(de.defaultClient),J_=new o8e(de.defaultClient),Cg=new a8e(de.defaultClient),IE=new s8e(de.defaultClient),Z_||(Z_=new DF.AutoCollectNativePerformance(de.defaultClient)),wE=new c8e.AzureFunctionsHook(de.defaultClient)),PF}de.setup=l8e;function u8e(){de.defaultClient&&(de.defaultClient.config.enableAutoCollectExternalLoggers==null&&(de.defaultClient.config.enableAutoCollectExternalLoggers=!0),de.defaultClient.config.enableAutoCollectConsole==null&&(de.defaultClient.config.enableAutoCollectConsole=!1),de.defaultClient.config.enableAutoCollectExceptions==null&&(de.defaultClient.config.enableAutoCollectExceptions=!0),de.defaultClient.config.enableAutoCollectPerformance==null&&(de.defaultClient.config.enableAutoCollectPerformance=!0),de.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&(de.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),de.defaultClient.config.enableAutoCollectHeartbeat==null&&(de.defaultClient.config.enableAutoCollectHeartbeat=!0),de.defaultClient.config.enableAutoCollectRequests==null&&(de.defaultClient.config.enableAutoCollectRequests=!0),de.defaultClient.config.enableAutoCollectDependencies==null&&(de.defaultClient.config.enableAutoCollectDependencies=!0),de.defaultClient.config.enableUseDiskRetryCaching==null&&(de.defaultClient.config.enableUseDiskRetryCaching=!0),de.defaultClient.config.enableAutoDependencyCorrelation==null&&(de.defaultClient.config.enableAutoDependencyCorrelation=!0),de.defaultClient.config.enableSendLiveMetrics==null&&(de.defaultClient.config.enableSendLiveMetrics=!1),de.defaultClient.config.enableAutoCollectExtendedMetrics==null&&(de.defaultClient.config.enableAutoCollectExtendedMetrics=!0),de.defaultClient.config.enableWebInstrumentation==null&&(de.defaultClient.config.enableWebInstrumentation=!1),de.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&(de.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function sae(){if(de.defaultClient){ia=!0,u8e(),bE.enable(de.defaultClient.config.enableAutoCollectExternalLoggers,de.defaultClient.config.enableAutoCollectConsole),EE.enable(de.defaultClient.config.enableAutoCollectExceptions),TE.enable(de.defaultClient.config.enableAutoCollectPerformance),SE.enable(de.defaultClient.config.enableAutoCollectPreAggregatedMetrics),CE.enable(de.defaultClient.config.enableAutoCollectHeartbeat),Cg.useAutoCorrelation(de.defaultClient.config.enableAutoDependencyCorrelation,de.defaultClient.config.enableUseAsyncHooks),Cg.enable(de.defaultClient.config.enableAutoCollectRequests),IE.enable(de.defaultClient.config.enableAutoCollectDependencies),J_.enable(de.defaultClient.config.enableWebInstrumentation,de.defaultClient.config.webInstrumentationConnectionString),de.defaultClient.config.enableSendLiveMetrics&&(de.liveMetricsClient||(de.liveMetricsClient=new iae(de.defaultClient.config,de.defaultClient.context,de.defaultClient.getAuthorizationHandler),O2=new RF(de.liveMetricsClient,1e3,!0),de.liveMetricsClient.addCollector(O2),de.defaultClient.quickPulseClient=de.liveMetricsClient)),wE.enable(de.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=DF.AutoCollectNativePerformance.parseEnabled(de.defaultClient.config.enableAutoCollectExtendedMetrics,de.defaultClient.config);Z_.enable(de.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),de.defaultClient&&de.defaultClient.channel&&de.defaultClient.channel.setUseDiskRetryCaching(de.defaultClient.config.enableUseDiskRetryCaching,de.defaultClient.config.enableResendInterval,de.defaultClient.config.enableMaxBytesOnDisk)}else xE.warn("Start cannot be called before setup");return PF}de.start=sae;function p8e(){return AF.CorrelationContextManager.getCurrentContext()}de.getCorrelationContext=p8e;function d8e(t,e){return AF.CorrelationContextManager.startOperation(t,e)}de.startOperation=d8e;function f8e(t,e){return AF.CorrelationContextManager.wrapCallback(t,e)}de.wrapWithCorrelationContext=f8e;var PF=function(){function t(){}return t.setDistributedTracingMode=function(e){return nae.w3cEnabled=e===oae.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),de.defaultClient&&(de.defaultClient.config.enableAutoCollectExternalLoggers=e,de.defaultClient.config.enableAutoCollectConsole=r,ia&&bE.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return de.defaultClient&&(de.defaultClient.config.enableAutoCollectExceptions=e,ia&&EE.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),de.defaultClient){de.defaultClient.config.enableAutoCollectPerformance=e;var n=DF.AutoCollectNativePerformance.parseEnabled(r,de.defaultClient.config);de.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,ia&&(TE.enable(e),Z_.enable(de.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return de.defaultClient&&(de.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,ia&&SE.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return de.defaultClient&&(de.defaultClient.config.enableAutoCollectHeartbeat=e,ia&&CE.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return de.defaultClient&&(de.defaultClient.config.enableWebInstrumentation=e,de.defaultClient.config.webInstrumentationConnectionString=r,ia&&J_.enable(de.defaultClient.config.enableAutoWebSnippetInjection,de.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return de.defaultClient&&(de.defaultClient.config.enableWebInstrumentation=e,de.defaultClient.config.webInstrumentationConnectionString=r,ia&&J_.enable(de.defaultClient.config.enableWebInstrumentation,de.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return de.defaultClient&&(de.defaultClient.config.enableAutoCollectRequests=e,ia&&Cg.enable(e)),t},t.setAutoCollectDependencies=function(e){return de.defaultClient&&(de.defaultClient.config.enableAutoCollectDependencies=e,ia&&IE.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return de.defaultClient&&(de.defaultClient.config.enableAutoDependencyCorrelation=e,de.defaultClient.config.enableUseAsyncHooks=r,ia&&Cg.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return de.defaultClient&&(de.defaultClient.config.enableUseDiskRetryCaching=e,de.defaultClient.config.enableResendInterval=r,de.defaultClient.config.enableMaxBytesOnDisk=n,de.defaultClient.channel&&de.defaultClient.channel.setUseDiskRetryCaching(de.defaultClient.config.enableUseDiskRetryCaching,de.defaultClient.config.enableResendInterval,de.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),xE.enableDebug=e,xE.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return de.defaultClient&&(de.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,ia&&wE.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),de.defaultClient?(!de.liveMetricsClient&&e?(de.liveMetricsClient=new iae(de.defaultClient.config,de.defaultClient.context,de.defaultClient.getAuthorizationHandler),O2=new RF(de.liveMetricsClient,1e3,!0),de.liveMetricsClient.addCollector(O2),de.defaultClient.quickPulseClient=de.liveMetricsClient):de.liveMetricsClient&&de.liveMetricsClient.enable(e),de.defaultClient.config.enableSendLiveMetrics=e,t):(xE.warn("Live metrics client cannot be setup without the default client"),t)},t.start=sae,t}();de.Configuration=PF;function m8e(){nae.w3cEnabled=!0,de.defaultClient=null,ia=!1,bE&&bE.dispose(),EE&&EE.dispose(),TE&&TE.dispose(),SE&&SE.dispose(),CE&&CE.dispose(),J_&&J_.dispose(),Z_&&Z_.dispose(),Cg&&Cg.dispose(),IE&&IE.dispose(),de.liveMetricsClient&&(de.liveMetricsClient.enable(!1),de.liveMetricsClient=void 0),wE&&wE.dispose()}de.dispose=m8e});var fae=k((Hpt,NF)=>{"use strict";var v8e=require("net"),U2=class extends Error{constructor(e){super(`${e} is locked`)}},ey={old:new Set,young:new Set},_8e=1e3*15,F2,dae=t=>new Promise((e,r)=>{let n=v8e.createServer();n.unref(),n.on("error",r),n.listen(t,()=>{let{port:i}=n.address();n.close(()=>{e(i)})})}),y8e=function*(t){t&&(yield*t),yield 0};NF.exports=async t=>{let e;t&&(e=typeof t.port=="number"?[t.port]:t.port),F2===void 0&&(F2=setInterval(()=>{ey.old=ey.young,ey.young=new Set},_8e),F2.unref&&F2.unref());for(let r of y8e(e))try{let n=await dae({...t,port:r});for(;ey.old.has(n)||ey.young.has(n);){if(r!==0)throw new U2(r);n=await dae({...t,port:r})}return ey.young.add(n),n}catch(n){if(!["EADDRINUSE","EACCES"].includes(n.code)&&!(n instanceof U2))throw n}throw new Error("No available ports found")};NF.exports.makeRange=(t,e)=>{if(!Number.isInteger(t)||!Number.isInteger(e))throw new TypeError("`from` and `to` must be integer numbers");if(t<1024||t>65535)throw new RangeError("`from` must be between 1024 and 65535");if(e<1024||e>65536)throw new RangeError("`to` must be between 1024 and 65536");if(e<t)throw new RangeError("`to` must be greater than or equal to `from`");return function*(n,i){for(let o=n;o<=i;o++)yield o}(t,e)}});var Dae=k(W2=>{"use strict";Object.defineProperty(W2,"__esModule",{value:!0});W2.LRUCache=void 0;var DE=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,wae=new Set,UF=typeof process=="object"&&process?process:{},Aae=(t,e,r,n)=>{typeof UF.emitWarning=="function"?UF.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},$2=globalThis.AbortController,Iae=globalThis.AbortSignal;if(typeof $2>"u"){Iae=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},$2=class{constructor(){e()}signal=new Iae;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=UF.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,Aae("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var D8e=t=>!wae.has(t),Vdt=Symbol("type"),yf=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Rae=t=>yf(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?iy:null:null,iy=class extends Array{constructor(e){super(e),this.fill(0)}},BF=class t{heap;length;static#c=!1;static create(e){let r=Rae(e);if(!r)return[];t.#c=!0;let n=new t(e,r);return t.#c=!1,n}constructor(e,r){if(!t.#c)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},qF=class t{#c;#p;#_;#m;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#h;#i;#r;#e;#l;#d;#a;#o;#g;#s;#E;#T;#v;#y;#C;#u;static unsafeExposeInternals(e){return{starts:e.#T,ttls:e.#v,sizes:e.#E,keyMap:e.#i,keyList:e.#r,valList:e.#e,next:e.#l,prev:e.#d,get head(){return e.#a},get tail(){return e.#o},free:e.#g,isBackgroundFetch:r=>e.#t(r),backgroundFetch:(r,n,i,o)=>e.#N(r,n,i,o),moveToTail:r=>e.#A(r),indexes:r=>e.#x(r),rindexes:r=>e.#b(r),isStale:r=>e.#f(r)}}get max(){return this.#c}get maxSize(){return this.#p}get calculatedSize(){return this.#h}get size(){return this.#n}get fetchMethod(){return this.#R}get dispose(){return this.#_}get disposeAfter(){return this.#m}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:p,noUpdateTTL:d,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:h,fetchMethod:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:b,ignoreFetchAbort:x}=e;if(r!==0&&!yf(r))throw new TypeError("max option must be a nonnegative integer");let P=r?Rae(r):Array;if(!P)throw new Error("invalid max value: "+r);if(this.#c=r,this.#p=f,this.maxEntrySize=m||this.#p,this.sizeCalculation=h,this.sizeCalculation){if(!this.#p&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=g,this.#C=!!g,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#l=new P(r),this.#d=new P(r),this.#a=0,this.#o=0,this.#g=BF.create(r),this.#n=0,this.#h=0,typeof c=="function"&&(this.#_=c),typeof u=="function"?(this.#m=u,this.#s=[]):(this.#m=void 0,this.#s=void 0),this.#y=!!this.#_,this.#u=!!this.#m,this.noDisposeOnSet=!!p,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!x,this.maxEntrySize!==0){if(this.#p!==0&&!yf(this.#p))throw new TypeError("maxSize must be a positive integer if specified");if(!yf(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=yf(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!yf(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#k()}if(this.#c===0&&this.ttl===0&&this.#p===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#c&&!this.#p){let U="LRU_CACHE_UNBOUNDED";D8e(U)&&(wae.add(U),Aae("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",U,t))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#k(){let e=new iy(this.#c),r=new iy(this.#c);this.#v=e,this.#T=r,this.#O=(o,s,a=DE.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#f(o)&&this.delete(this.#r[o])},s+1);l.unref&&l.unref()}},this.#I=o=>{r[o]=e[o]!==0?DE.now():0},this.#S=(o,s)=>{if(e[s]){let a=e[s],l=r[s];o.ttl=a,o.start=l,o.now=n||i();let c=o.now-l;o.remainingTTL=a-c}};let n=0,i=()=>{let o=DE.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#i.get(o);if(s===void 0)return 0;let a=e[s],l=r[s];if(a===0||l===0)return 1/0;let c=(n||i())-l;return a-c},this.#f=o=>e[o]!==0&&r[o]!==0&&(n||i())-r[o]>e[o]}#I=()=>{};#S=()=>{};#O=()=>{};#f=()=>!1;#U(){let e=new iy(this.#c);this.#h=0,this.#E=e,this.#w=r=>{this.#h-=e[r],e[r]=0},this.#L=(r,n,i,o)=>{if(this.#t(n))return 0;if(!yf(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!yf(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#D=(r,n,i)=>{if(e[r]=n,this.#p){let o=this.#p-e[r];for(;this.#h>o;)this.#P(!0)}this.#h+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#h)}}#w=e=>{};#D=(e,r,n)=>{};#L=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#M(r)||((e||!this.#f(r))&&(yield r),r===this.#a));)r=this.#d[r]}*#b({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#a;!(!this.#M(r)||((e||!this.#f(r))&&(yield r),r===this.#o));)r=this.#l[r]}#M(e){return e!==void 0&&this.#i.get(this.#r[e])===e}*entries(){for(let e of this.#x())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#x()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#b()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*values(){for(let e of this.#x())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.#x()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#r[n],this))return this.get(this.#r[n],r)}}forEach(e,r=this){for(let n of this.#x()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}rforEach(e,r=this){for(let n of this.#b()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}purgeStale(){let e=!1;for(let r of this.#b({allowStale:!0}))this.#f(r)&&(this.delete(this.#r[r]),e=!0);return e}dump(){let e=[];for(let r of this.#x({allowStale:!0})){let n=this.#r[r],i=this.#e[r],o=this.#t(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#v&&this.#T){s.ttl=this.#v[r];let a=DE.now()-this.#T[r];s.start=Math.floor(Date.now()-a)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=DE.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#L(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(e),this;let p=this.#n===0?void 0:this.#i.get(e);if(p===void 0)p=this.#n===0?this.#o:this.#g.length!==0?this.#g.pop():this.#n===this.#c?this.#P(!1):this.#n,this.#r[p]=e,this.#e[p]=r,this.#i.set(e,p),this.#l[this.#o]=p,this.#d[p]=this.#o,this.#o=p,this.#n++,this.#D(p,u,l),l&&(l.set="add"),c=!1;else{this.#A(p);let d=this.#e[p];if(r!==d){if(this.#C&&this.#t(d)?d.__abortController.abort(new Error("replaced")):s||(this.#y&&this.#_?.(d,e,"set"),this.#u&&this.#s?.push([d,e,"set"])),this.#w(p),this.#D(p,u,l),this.#e[p]=r,l){l.set="replace";let f=d&&this.#t(d)?d.__staleWhileFetching:d;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#v&&this.#k(),this.#v&&(c||this.#O(p,i,o),l&&this.#S(l,p)),!s&&this.#u&&this.#s){let d=this.#s,f;for(;f=d?.shift();)this.#m?.(...f)}return this}pop(){try{for(;this.#n;){let e=this.#e[this.#a];if(this.#P(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#u&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#m?.(...r)}}}#P(e){let r=this.#a,n=this.#r[r],i=this.#e[r];return this.#C&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#y||this.#u)&&(this.#y&&this.#_?.(i,n,"evict"),this.#u&&this.#s?.push([i,n,"evict"])),this.#w(r),e&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#g.push(r)),this.#n===1?(this.#a=this.#o=0,this.#g.length=0):this.#a=this.#l[r],this.#i.delete(n),this.#n--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#i.get(e);if(o!==void 0){let s=this.#e[o];if(this.#t(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#f(o))i&&(i.has="stale",this.#S(i,o));else return n&&this.#I(o),i&&(i.has="hit",this.#S(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#i.get(e);if(i!==void 0&&(n||!this.#f(i))){let o=this.#e[i];return this.#t(o)?o.__staleWhileFetching:o}}#N(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#t(o))return o;let s=new $2,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let l={signal:s.signal,options:n,context:i},c=(h,g=!1)=>{let{aborted:v}=s.signal,_=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(v&&!g?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,_&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!_&&!g)return p(s.signal.reason);let y=f;return this.#e[r]===f&&(h===void 0?y.__staleWhileFetching?this.#e[r]=y.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),p(h)),p=h=>{let{aborted:g}=s.signal,v=g&&n.allowStaleOnFetchAbort,_=v||n.allowStaleOnFetchRejection,y=_||n.noDeleteOnFetchRejection,b=f;if(this.#e[r]===f&&(!y||b.__staleWhileFetching===void 0?this.delete(e):v||(this.#e[r]=b.__staleWhileFetching)),_)return n.status&&b.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),b.__staleWhileFetching;if(b.__returned===b)throw h},d=(h,g)=>{let v=this.#R?.(e,o,l);v&&v instanceof Promise&&v.then(_=>h(_),g),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(),n.allowStaleOnFetchAbort&&(h=_=>c(_,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(d).then(c,u),m=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,m,{...l.options,status:void 0}),r=this.#i.get(e)):this.#e[r]=m,m}#t(e){if(!this.#C)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof $2}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:h,forceRefresh:g=!1,status:v,signal:_}=r;if(!this.#C)return v&&(v.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:v});let y={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:v,signal:_},b=this.#i.get(e);if(b===void 0){v&&(v.fetch="miss");let x=this.#N(e,b,y,h);return x.__returned=x}else{let x=this.#e[b];if(this.#t(x)){let M=n&&x.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",M&&(v.returnedStale=!0)),M?x.__staleWhileFetching:x.__returned=x}let P=this.#f(b);if(!g&&!P)return v&&(v.fetch="hit"),this.#A(b),i&&this.#I(b),v&&this.#S(v,b),x;let U=this.#N(e,b,y,h),j=U.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=P?"stale":"refresh",j&&P&&(v.returnedStale=!0)),j?U.__staleWhileFetching:U.__returned=U}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#i.get(e);if(a!==void 0){let l=this.#e[a],c=this.#t(l);return s&&this.#S(s,a),this.#f(a)?(s&&(s.get="stale"),c?(s&&n&&l.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?l.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?l:void 0)):(s&&(s.get="hit"),c?l.__staleWhileFetching:(this.#A(a),i&&this.#I(a),l))}else s&&(s.get="miss")}#F(e,r){this.#d[r]=e,this.#l[e]=r}#A(e){e!==this.#o&&(e===this.#a?this.#a=this.#l[e]:this.#F(this.#d[e],this.#l[e]),this.#F(this.#o,e),this.#o=e)}delete(e){let r=!1;if(this.#n!==0){let n=this.#i.get(e);if(n!==void 0)if(r=!0,this.#n===1)this.clear();else{this.#w(n);let i=this.#e[n];this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#y||this.#u)&&(this.#y&&this.#_?.(i,e,"delete"),this.#u&&this.#s?.push([i,e,"delete"])),this.#i.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#o?this.#o=this.#d[n]:n===this.#a?this.#a=this.#l[n]:(this.#l[this.#d[n]]=this.#l[n],this.#d[this.#l[n]]=this.#d[n]),this.#n--,this.#g.push(n)}}if(this.#u&&this.#s?.length){let n=this.#s,i;for(;i=n?.shift();)this.#m?.(...i)}return r}clear(){for(let e of this.#b({allowStale:!0})){let r=this.#e[e];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#y&&this.#_?.(r,n,"delete"),this.#u&&this.#s?.push([r,n,"delete"])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#v&&this.#T&&(this.#v.fill(0),this.#T.fill(0)),this.#E&&this.#E.fill(0),this.#a=0,this.#o=0,this.#g.length=0,this.#h=0,this.#n=0,this.#u&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#m?.(...r)}}};W2.LRUCache=qF});var Pae=k(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.bytePairEncode=oy.uint8ArrayToString=void 0;function HF(t){return Array.from(t).map(e=>e.toString()).join("_")}oy.uint8ArrayToString=HF;function P8e(t,e){if(t.length===1)return[e.get(t[0].toString())];let r=[];for(let o=0;o<t.length+1;o++)r.push([o,Number.MAX_SAFE_INTEGER]);function n(o,s=0){if(o+s+2<r.length){let a=t.slice(r[o][0],r[o+s+2][0]),l=e.get(HF(a));if(l!==void 0)return l}return Number.MAX_SAFE_INTEGER}for(let o=0;o<r.length-2;o++){let s=n(o);s!==Number.MAX_SAFE_INTEGER&&(r[o][1]=s)}for(;r.length>1;){let o=[0,Number.MAX_SAFE_INTEGER];for(let s=0;s<r.length-1;s++)r[s][1]<o[1]&&(o=[s,r[s][1]]);if(o[1]!==Number.MAX_SAFE_INTEGER){let s=o[0];r[s][1]=n(s,1),s>0&&(r[s-1][1]=n(s-1,1)),r.splice(s+1,1)}else break}let i=[];for(let o=0;o<r.length-1;o++)i.push(e.get(HF(t.slice(r[o][0],r[o+1][0]))));return i}oy.bytePairEncode=P8e});var VF=k(K2=>{"use strict";Object.defineProperty(K2,"__esModule",{value:!0});K2.TikTokenizer=void 0;var N8e=require("fs"),k8e=Dae(),jF=require("util"),Ag=Pae();function O8e(t){let e=new Map;try{let n=N8e.readFileSync(t,"utf-8");return r(n),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let s=new Uint8Array(Buffer.from(o[0],"base64")),a=parseInt(o[1]);if(!isNaN(a))e.set(s,a);else throw new Error(`Can't parse ${o[1]} to integer`)}}}function L8e(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var GF=class{constructor(e,r,n,i=8192){this.textEncoder=new jF.TextEncoder,this.textDecoder=new jF.TextDecoder("utf-8");let o={max:i};this.cache=new k8e.LRUCache(o);let s=O8e(e);this.init(s,r,n)}init(e,r,n){this.encoder=new Map;for(let[i,o]of e)this.encoder.set((0,Ag.uint8ArrayToString)(i),o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>L8e(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(this.encoder.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let s=o?i+o.index:e.length;return[o,s]}encode(e,r){let n=[],i=0;for(;;){let o,s;if([o,s]=this.findNextSpecialToken(e,i,r),s>i&&this.encodeByIndex(e,n,i,s),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,s=Array.from(e.substring(n,i).matchAll(this.regex));for(var a=0;a<s.length&&(o=s[a],o!==void 0);a++)if(this.cache.has(o[0]))r.push(...this.cache.get(o[0]));else{let l=this.textEncoder.encode(o[0]),c=this.encoder?.get((0,Ag.uint8ArrayToString)(l));if(c!==void 0)r.push(c),this.cache.set(o[0],[c]);else{let u=(0,Ag.bytePairEncode)(l,this.encoder);r.push(...u),this.cache.set(o[0],u)}}}encodeTrimSuffixByIndex(e,r,n,i,o,s,a){let l,c=Array.from(e.substring(n,i).matchAll(this.regex));for(var u=0;u<c.length;u++){l=c[u];let p=l[0];if(this.cache.has(p)){let d=this.cache.get(p);if(s+=d.length,s<=o)a+=p.length,r.push(...d);else break}else{let d=this.textEncoder.encode(p),f=this.encoder.get((0,Ag.uint8ArrayToString)(d));if(f!==void 0)if(s++,s<=o)a+=p.length,r.push(f);else break;else{let m=(0,Ag.bytePairEncode)(d,this.encoder);if(this.cache.set(p,m),s+=m.length,s<=o)a+=p.length,r.push(...m);else break}}if(s>=o)break}return{tokenCount:s,encodeLength:a}}encodeTrimSuffix(e,r,n){let i=[],o=0,s=0,a=0;for(;;){let c,u;if([c,u]=this.findNextSpecialToken(e,o,n),u>o){let{tokenCount:p,encodeLength:d}=this.encodeTrimSuffixByIndex(e,i,o,u,r,s,a);if(s=p,a=d,s>=r)break}if(c!==null){if(s++,s<=r&&(o=o+this.encodeSpecialToken(i,c),a+=c[0].length,o>=e.length)||s>=r)break}else break}let l=a===e.length?e:e.slice(0,a);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,s=0,a=0,l=new Map;for(l.set(s,a);;){let f,m;if([f,m]=this.findNextSpecialToken(e,o,n),m>o){let h,g=Array.from(e.substring(o,m).matchAll(this.regex));for(var c=0;c<g.length;c++){h=g[c];let v=h[0];if(this.cache.has(v)){let _=this.cache.get(v);s+=_.length,a+=v.length,i.push(..._),l.set(s,a)}else{let _=new jF.TextEncoder().encode(v),y=this.encoder.get((0,Ag.uint8ArrayToString)(_));if(y!==void 0)s++,a+=v.length,i.push(y),l.set(s,a);else{let b=(0,Ag.bytePairEncode)(_,this.encoder);this.cache.set(v,b),s+=b.length,a+=v.length,i.push(...b),l.set(s,a)}}}}if(f!==null){if(o=o+this.encodeSpecialToken(i,f),s++,a+=f[0].length,l.set(s,a),o>=e.length)break}else break}if(s<=r)return{tokenIds:i,text:e};let u=s-r,p=0,d=0;for(let[f,m]of l)if(f>=u){p=f,d=m;break}return{tokenIds:i.slice(p),text:e.slice(d)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let s=this.specialTokensDecoder?.get(n);s!==void 0&&(i=Array.from(this.textEncoder.encode(s)))}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};K2.TikTokenizer=GF});var Bae=k(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.createTokenizer=ri.createByEncoderName=ri.createByModelName=ri.getRegexByModel=ri.getRegexByEncoder=ri.getSpecialTokensByModel=ri.getSpecialTokensByEncoder=ri.MODEL_TO_ENCODING=void 0;var Y2=require("fs"),zF=require("path"),M8e=VF(),F8e=new Map([["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"]]);ri.MODEL_TO_ENCODING=new Map([["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var $F="<|endoftext|>",Nae="<|fim_prefix|>",kae="<|fim_middle|>",Oae="<|fim_suffix|>",U8e="<|endofprompt|>",PE="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",Lae="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+";function WF(t){let e="";if(ri.MODEL_TO_ENCODING.has(t))e=ri.MODEL_TO_ENCODING.get(t);else for(let[r,n]of F8e)if(t.startsWith(r)){e=n;break}return e}async function B8e(t,e){let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let n=await r.text();Y2.writeFileSync(e,n)}function KF(t){let e=new Map([[$F,50256]]);switch(t){case"cl100k_base":e=new Map([[$F,100257],[Nae,100258],[kae,100259],[Oae,100260],[U8e,100276]]);break;case"p50k_edit":e=new Map([[$F,50256],[Nae,50281],[kae,50282],[Oae,50283]]);break;default:break}return e}ri.getSpecialTokensByEncoder=KF;function q8e(t){let e=WF(t);return KF(e)}ri.getSpecialTokensByModel=q8e;function Mae(t){switch(t){case"cl100k_base":return Lae;default:break}return PE}ri.getRegexByEncoder=Mae;function H8e(t){let e=WF(t);return Mae(e)}ri.getRegexByModel=H8e;async function j8e(t,e=null){return Fae(WF(t),e)}ri.createByModelName=j8e;async function Fae(t,e=null){let r,n,i=KF(t);switch(t){case"cl100k_base":r=Lae,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=PE,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=PE,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=PE,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=PE,n="https://pythia.blob.core.windows.net/public/encoding/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=zF.basename(n),s=zF.resolve(__dirname,"..","model");Y2.existsSync(s)||Y2.mkdirSync(s,{recursive:!0});let a=zF.resolve(s,o);return Y2.existsSync(a)||(console.log(`Downloading file from ${n}`),await B8e(n,a),console.log(`Saved file to ${a}`)),Uae(a,i,r)}ri.createByEncoderName=Fae;function Uae(t,e,r,n=8192){return new M8e.TikTokenizer(t,e,r,n)}ri.createTokenizer=Uae});var qae=k(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.createTokenizer=ni.createByEncoderName=ni.createByModelName=ni.getSpecialTokensByModel=ni.getSpecialTokensByEncoder=ni.getRegexByModel=ni.getRegexByEncoder=ni.MODEL_TO_ENCODING=ni.TikTokenizer=void 0;var G8e=VF();Object.defineProperty(ni,"TikTokenizer",{enumerable:!0,get:function(){return G8e.TikTokenizer}});var xf=Bae();Object.defineProperty(ni,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return xf.MODEL_TO_ENCODING}});Object.defineProperty(ni,"getRegexByEncoder",{enumerable:!0,get:function(){return xf.getRegexByEncoder}});Object.defineProperty(ni,"getRegexByModel",{enumerable:!0,get:function(){return xf.getRegexByModel}});Object.defineProperty(ni,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return xf.getSpecialTokensByEncoder}});Object.defineProperty(ni,"getSpecialTokensByModel",{enumerable:!0,get:function(){return xf.getSpecialTokensByModel}});Object.defineProperty(ni,"createByModelName",{enumerable:!0,get:function(){return xf.createByModelName}});Object.defineProperty(ni,"createByEncoderName",{enumerable:!0,get:function(){return xf.createByEncoderName}});Object.defineProperty(ni,"createTokenizer",{enumerable:!0,get:function(){return xf.createTokenizer}})});var dce=k((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if((224&s)!=192){var l=63&t[e++];if((s=(240&s)==224?(15&s)<<12|a<<6|l:(7&s)<<18|a<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}return e[r]=0,r-i}function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var s=i.exports;s=relocateExports(s,1024);var a=getDylinkMetadata(o);a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(s,"main"),Module.asm=s,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function r(i){e(i.instance,i.module)}function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,r=0;function n(){for(var v=0,_=1;;){var y=t[e++];if(v+=(127&y)*_,_*=128,!(128&y))break}return v}function i(){var v=n();return UTF8ArrayToString(t,(e+=v)-v,v)}function o(v,_){if(v)throw new Error(_)}var s="dylink.0";if(t instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(t,s);a.length===0&&(s="dylink",a=WebAssembly.Module.customSections(t,s)),o(a.length===0,"need dylink section"),r=(t=new Uint8Array(a[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,s=i()}var c={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(s=="dylink"){c.memorySize=n(),c.memoryAlign=n(),c.tableSize=n(),c.tableAlign=n();for(var u=n(),p=0;p<u;++p){var d=i();c.neededDynlibs.push(d)}}else for(o(s!=="dylink.0");e<r;){var f=t[e++],m=n();if(f===1)c.memorySize=n(),c.memoryAlign=n(),c.tableSize=n(),c.tableAlign=n();else if(f===2)for(u=n(),p=0;p<u;++p)d=i(),c.neededDynlibs.push(d);else if(f===3)for(var h=n();h--;){var g=i();256&n()&&c.tlsExports.add(g)}else if(f===4)for(h=n();h--;)i(),g=i(),(3&n())==1&&c.weakImports.add(g);else e+=m}return c}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(a){if(e.fs&&e.fs.findObject(a)){var l=e.fs.readFile(a,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(a=locateFile(a),e.loadAsync)return new Promise(function(c,u){readAsync(a,p=>c(new Uint8Array(p)),u)});if(!readBinary)throw new Error(a+": file not found, and synchronous loading of external files is not available");return readBinary(a)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var a=preloadedWasm[t];return e.loadAsync?Promise.resolve(a):a}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}function s(a){n.global&&mergeLibSymbols(a,t),n.module=a}return n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(a){return s(a),!0}):(s(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((s=65536)-o%s)%s)))return!0}var o,s;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},doStat:function(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(a.node)))return-54;throw a}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=s%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(t);return FS.llseek(s,o,n),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var s=HEAPU32[e>>2],a=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,s,a,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var s=t.charCodeAt(o);HEAP16[e>>1]=s,e+=2}return HEAP16[e>>1]=0,e-n}function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(s=>{HEAP32[i++]=allocateUTF8OnStack(s)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(s){return handleException(s)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(l,c,u)=>e.slice(l,u);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let c=0;c<i;c++)marshalRange(l,n.includedRanges[c]),l+=SIZE_OF_RANGE}let s=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let s=0;s<r;s++)i[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let u=0,p=o.length;u<p;u++)e.includes(o[u])&&i.push(u);let s=C._malloc(SIZE_OF_INT*i.length);for(let u=0,p=i.length;u<p;u++)setValue(s+u*SIZE_OF_INT,i[u],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,i.length,r.row,r.column,n.row,n.column);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=new Array(a);if(a>0){let u=l;for(let p=0;p<a;p++)c[p]=unmarshalNode(this.tree,u),u+=SIZE_OF_NODE}return C._free(l),C._free(s),c}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,v=e.substr(g,100).split(`
`)[0],_,y=v.match(QUERY_WORD_REGEX)[0];switch(h){case 2:_=new RangeError(`Bad node name '${y}'`);break;case 3:_=new RangeError(`Bad field name '${y}'`);break;case 4:_=new RangeError(`Bad capture name @${y}`);break;case 5:_=new TypeError(`Bad pattern structure at offset ${g}: '${v}'...`),y="";break;default:_=new SyntaxError(`Bad syntax at offset ${g}: '${v}'...`),y=""}throw _.index=g,_.length=y.length,C._free(n),_}let o=C._ts_query_string_count(i),s=C._ts_query_capture_count(i),a=C._ts_query_pattern_count(i),l=new Array(s),c=new Array(o);for(let h=0;h<s;h++){let g=C._ts_query_capture_name_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");l[h]=UTF8ToString(g,v)}for(let h=0;h<o;h++){let g=C._ts_query_string_value_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");c[h]=UTF8ToString(g,v)}let u=new Array(a),p=new Array(a),d=new Array(a),f=new Array(a),m=new Array(a);for(let h=0;h<a;h++){let g=C._ts_query_predicates_for_pattern(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");f[h]=[],m[h]=[];let _=[],y=g;for(let b=0;b<v;b++){let x=getValue(y,"i32");y+=SIZE_OF_INT;let P=getValue(y,"i32");if(y+=SIZE_OF_INT,x===PREDICATE_STEP_TYPE_CAPTURE)_.push({type:"capture",name:l[P]});else if(x===PREDICATE_STEP_TYPE_STRING)_.push({type:"string",value:c[P]});else if(_.length>0){if(_[0].type!=="string")throw new Error("Predicates must begin with a literal value");let U=_[0].value,H=!0;switch(U){case"not-eq?":H=!1;case"eq?":if(_.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(_.length-1));if(_[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${_[1].value}"`);if(_[2].type==="capture"){let z=_[1].name,q=_[2].name;m[h].push(function(L){let S,T;for(let A of L)A.name===z&&(S=A.node),A.name===q&&(T=A.node);return S===void 0||T===void 0||S.text===T.text===H})}else{let z=_[1].name,q=_[2].value;m[h].push(function(L){for(let S of L)if(S.name===z)return S.node.text===q===H;return!0})}break;case"not-match?":H=!1;case"match?":if(_.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${_.length-1}.`);if(_[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${_[1].value}".`);if(_[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${_[2].value}.`);let j=_[1].name,M=new RegExp(_[2].value);m[h].push(function(z){for(let q of z)if(q.name===j)return M.test(q.node.text)===H;return!0});break;case"set!":if(_.length<2||_.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${_.length-1}.`);if(_.some(z=>z.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[h]||(u[h]={}),u[h][_[1].value]=_[2]?_[2].value:null;break;case"is?":case"is-not?":if(_.length<2||_.length>3)throw new Error(`Wrong number of arguments to \`#${U}\` predicate. Expected 1 or 2. Got ${_.length-1}.`);if(_.some(z=>z.type!=="string"))throw new Error(`Arguments to \`#${U}\` predicate must be a strings.".`);let F=U==="is?"?p:d;F[h]||(F[h]={}),F[h][_[1].value]=_[2]?_[2].value:null;break;default:f[h].push({operator:U,operands:_.slice(1)})}_.length=0}}Object.freeze(u[h]),Object.freeze(p[h]),Object.freeze(d[h])}return C._free(n),new Query(INTERNAL,i,l,m,f,Object.freeze(u),Object.freeze(p),Object.freeze(d))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),s=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=i[s]();return new Language(INTERNAL,a)})}}class Query{constructor(e,r,n,i,o,s,a,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=new Array(s);this.exceededMatchLimit=!!l;let u=0,p=a;for(let d=0;d<s;d++){let f=getValue(p,"i32");p+=SIZE_OF_INT;let m=getValue(p,"i32");p+=SIZE_OF_INT;let h=new Array(m);if(p=unmarshalCaptures(this,e.tree,p,h),this.textPredicates[f].every(g=>g(h))){c[u++]={pattern:f,captures:h};let g=this.setProperties[f];g&&(c[d].setProperties=g);let v=this.assertedProperties[f];v&&(c[d].assertedProperties=v);let _=this.refutedProperties[f];_&&(c[d].refutedProperties=_)}}return c.length=u,C._free(a),c}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=[];this.exceededMatchLimit=!!l;let u=[],p=a;for(let d=0;d<s;d++){let f=getValue(p,"i32");p+=SIZE_OF_INT;let m=getValue(p,"i32");p+=SIZE_OF_INT;let h=getValue(p,"i32");if(p+=SIZE_OF_INT,u.length=m,p=unmarshalCaptures(this,e.tree,p,u),this.textPredicates[f].every(g=>g(u))){let g=u[h],v=this.setProperties[f];v&&(g.setProperties=v);let _=this.assertedProperties[f];_&&(g.assertedProperties=_);let y=this.refutedProperties[f];y&&(g.refutedProperties=y),c.push(g)}}return C._free(a),c}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let s=getValue(r,"i32"),a=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[s],node:a}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,t);return a.id=r,a.startIndex=n,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var HE=k((ygt,ale)=>{"use strict";var i6e=require("path"),Gl="\\\\/",nle=`[^${Gl}]`,Cp="\\.",o6e="\\+",s6e="\\?",fR="\\/",a6e="(?=.)",ile="[^/]",w9=`(?:${fR}|$)`,ole=`(?:^|${fR})`,A9=`${Cp}{1,2}${w9}`,c6e=`(?!${Cp})`,l6e=`(?!${ole}${A9})`,u6e=`(?!${Cp}{0,1}${w9})`,p6e=`(?!${A9})`,d6e=`[^.${fR}]`,f6e=`${ile}*?`,sle={DOT_LITERAL:Cp,PLUS_LITERAL:o6e,QMARK_LITERAL:s6e,SLASH_LITERAL:fR,ONE_CHAR:a6e,QMARK:ile,END_ANCHOR:w9,DOTS_SLASH:A9,NO_DOT:c6e,NO_DOTS:l6e,NO_DOT_SLASH:u6e,NO_DOTS_SLASH:p6e,QMARK_NO_DOT:d6e,STAR:f6e,START_ANCHOR:ole},m6e={...sle,SLASH_LITERAL:`[${Gl}]`,QMARK:nle,STAR:`${nle}*?`,DOTS_SLASH:`${Cp}{1,2}(?:[${Gl}]|$)`,NO_DOT:`(?!${Cp})`,NO_DOTS:`(?!(?:^|[${Gl}])${Cp}{1,2}(?:[${Gl}]|$))`,NO_DOT_SLASH:`(?!${Cp}{0,1}(?:[${Gl}]|$))`,NO_DOTS_SLASH:`(?!${Cp}{1,2}(?:[${Gl}]|$))`,QMARK_NO_DOT:`[^.${Gl}]`,START_ANCHOR:`(?:^|[${Gl}])`,END_ANCHOR:`(?:[${Gl}]|$)`},h6e={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ale.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:h6e,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:i6e.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?m6e:sle}}});var mR=k(Is=>{"use strict";var g6e=require("path"),v6e=process.platform==="win32",{REGEX_BACKSLASH:_6e,REGEX_REMOVE_BACKSLASH:y6e,REGEX_SPECIAL_CHARS:x6e,REGEX_SPECIAL_CHARS_GLOBAL:b6e}=HE();Is.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Is.hasRegexChars=t=>x6e.test(t);Is.isRegexChar=t=>t.length===1&&Is.hasRegexChars(t);Is.escapeRegex=t=>t.replace(b6e,"\\$1");Is.toPosixSlashes=t=>t.replace(_6e,"/");Is.removeBackslashes=t=>t.replace(y6e,e=>e==="\\"?"":e);Is.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};Is.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:v6e===!0||g6e.sep==="\\";Is.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?Is.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};Is.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Is.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var hle=k((bgt,mle)=>{"use strict";var cle=mR(),{CHAR_ASTERISK:R9,CHAR_AT:E6e,CHAR_BACKWARD_SLASH:jE,CHAR_COMMA:T6e,CHAR_DOT:D9,CHAR_EXCLAMATION_MARK:P9,CHAR_FORWARD_SLASH:fle,CHAR_LEFT_CURLY_BRACE:N9,CHAR_LEFT_PARENTHESES:k9,CHAR_LEFT_SQUARE_BRACKET:S6e,CHAR_PLUS:C6e,CHAR_QUESTION_MARK:lle,CHAR_RIGHT_CURLY_BRACE:I6e,CHAR_RIGHT_PARENTHESES:ule,CHAR_RIGHT_SQUARE_BRACKET:w6e}=HE(),ple=t=>t===fle||t===jE,dle=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},A6e=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],l=t,c=-1,u=0,p=0,d=!1,f=!1,m=!1,h=!1,g=!1,v=!1,_=!1,y=!1,b=!1,x=!1,P=0,U,H,j={value:"",depth:0,isGlob:!1},M=()=>c>=n,F=()=>l.charCodeAt(c+1),z=()=>(U=H,l.charCodeAt(++c));for(;c<n;){H=z();let A;if(H===jE){_=j.backslashes=!0,H=z(),H===N9&&(v=!0);continue}if(v===!0||H===N9){for(P++;M()!==!0&&(H=z());){if(H===jE){_=j.backslashes=!0,z();continue}if(H===N9){P++;continue}if(v!==!0&&H===D9&&(H=z())===D9){if(d=j.isBrace=!0,m=j.isGlob=!0,x=!0,i===!0)continue;break}if(v!==!0&&H===T6e){if(d=j.isBrace=!0,m=j.isGlob=!0,x=!0,i===!0)continue;break}if(H===I6e&&(P--,P===0)){v=!1,d=j.isBrace=!0,x=!0;break}}if(i===!0)continue;break}if(H===fle){if(o.push(c),s.push(j),j={value:"",depth:0,isGlob:!1},x===!0)continue;if(U===D9&&c===u+1){u+=2;continue}p=c+1;continue}if(r.noext!==!0&&(H===C6e||H===E6e||H===R9||H===lle||H===P9)===!0&&F()===k9){if(m=j.isGlob=!0,h=j.isExtglob=!0,x=!0,H===P9&&c===u&&(b=!0),i===!0){for(;M()!==!0&&(H=z());){if(H===jE){_=j.backslashes=!0,H=z();continue}if(H===ule){m=j.isGlob=!0,x=!0;break}}continue}break}if(H===R9){if(U===R9&&(g=j.isGlobstar=!0),m=j.isGlob=!0,x=!0,i===!0)continue;break}if(H===lle){if(m=j.isGlob=!0,x=!0,i===!0)continue;break}if(H===S6e){for(;M()!==!0&&(A=z());){if(A===jE){_=j.backslashes=!0,z();continue}if(A===w6e){f=j.isBracket=!0,m=j.isGlob=!0,x=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&H===P9&&c===u){y=j.negated=!0,u++;continue}if(r.noparen!==!0&&H===k9){if(m=j.isGlob=!0,i===!0){for(;M()!==!0&&(H=z());){if(H===k9){_=j.backslashes=!0,H=z();continue}if(H===ule){x=!0;break}}continue}break}if(m===!0){if(x=!0,i===!0)continue;break}}r.noext===!0&&(h=!1,m=!1);let q=l,L="",S="";u>0&&(L=l.slice(0,u),l=l.slice(u),p-=u),q&&m===!0&&p>0?(q=l.slice(0,p),S=l.slice(p)):m===!0?(q="",S=l):q=l,q&&q!==""&&q!=="/"&&q!==l&&ple(q.charCodeAt(q.length-1))&&(q=q.slice(0,-1)),r.unescape===!0&&(S&&(S=cle.removeBackslashes(S)),q&&_===!0&&(q=cle.removeBackslashes(q)));let T={prefix:L,input:t,start:u,base:q,glob:S,isBrace:d,isBracket:f,isGlob:m,isExtglob:h,isGlobstar:g,negated:y,negatedExtglob:b};if(r.tokens===!0&&(T.maxDepth=0,ple(H)||s.push(j),T.tokens=s),r.parts===!0||r.tokens===!0){let A;for(let J=0;J<o.length;J++){let me=A?A+1:u,ce=o[J],ae=t.slice(me,ce);r.tokens&&(J===0&&u!==0?(s[J].isPrefix=!0,s[J].value=L):s[J].value=ae,dle(s[J]),T.maxDepth+=s[J].depth),(J!==0||ae!=="")&&a.push(ae),A=ce}if(A&&A+1<t.length){let J=t.slice(A+1);a.push(J),r.tokens&&(s[s.length-1].value=J,dle(s[s.length-1]),T.maxDepth+=s[s.length-1].depth)}T.slashes=o,T.parts=a}return T};mle.exports=A6e});var _le=k((Egt,vle)=>{"use strict";var hR=HE(),ua=mR(),{MAX_LENGTH:gR,POSIX_REGEX_SOURCE:R6e,REGEX_NON_SPECIAL_CHARS:D6e,REGEX_SPECIAL_CHARS_BACKREF:P6e,REPLACEMENTS:gle}=hR,N6e=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>ua.escapeRegex(i)).join("..")}return r},gy=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,O9=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=gle[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(gR,r.maxLength):gR,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",l=ua.isWindows(e),c=hR.globChars(l),u=hR.extglobChars(c),{DOT_LITERAL:p,PLUS_LITERAL:d,SLASH_LITERAL:f,ONE_CHAR:m,DOTS_SLASH:h,NO_DOT:g,NO_DOT_SLASH:v,NO_DOTS_SLASH:_,QMARK:y,QMARK_NO_DOT:b,STAR:x,START_ANCHOR:P}=c,U=ve=>`(${a}(?:(?!${P}${ve.dot?h:p}).)*?)`,H=r.dot?"":g,j=r.dot?y:b,M=r.bash===!0?U(r):x;r.capture&&(M=`(${M})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let F={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=ua.removePrefix(t,F),i=t.length;let z=[],q=[],L=[],S=o,T,A=()=>F.index===i-1,J=F.peek=(ve=1)=>t[F.index+ve],me=F.advance=()=>t[++F.index]||"",ce=()=>t.slice(F.index+1),ae=(ve="",W=0)=>{F.consumed+=ve,F.index+=W},se=ve=>{F.output+=ve.output!=null?ve.output:ve.value,ae(ve.value)},je=()=>{let ve=1;for(;J()==="!"&&(J(2)!=="("||J(3)==="?");)me(),F.start++,ve++;return ve%2===0?!1:(F.negated=!0,F.start++,!0)},Ye=ve=>{F[ve]++,L.push(ve)},Ze=ve=>{F[ve]--,L.pop()},ke=ve=>{if(S.type==="globstar"){let W=F.braces>0&&(ve.type==="comma"||ve.type==="brace"),ne=ve.extglob===!0||z.length&&(ve.type==="pipe"||ve.type==="paren");ve.type!=="slash"&&ve.type!=="paren"&&!W&&!ne&&(F.output=F.output.slice(0,-S.output.length),S.type="star",S.value="*",S.output=M,F.output+=S.output)}if(z.length&&ve.type!=="paren"&&(z[z.length-1].inner+=ve.value),(ve.value||ve.output)&&se(ve),S&&S.type==="text"&&ve.type==="text"){S.value+=ve.value,S.output=(S.output||"")+ve.value;return}ve.prev=S,s.push(ve),S=ve},st=(ve,W)=>{let ne={...u[W],conditions:1,inner:""};ne.prev=S,ne.parens=F.parens,ne.output=F.output;let ye=(r.capture?"(":"")+ne.open;Ye("parens"),ke({type:ve,value:W,output:F.output?"":m}),ke({type:"paren",extglob:!0,value:me(),output:ye}),z.push(ne)},et=ve=>{let W=ve.close+(r.capture?")":""),ne;if(ve.type==="negate"){let ye=M;if(ve.inner&&ve.inner.length>1&&ve.inner.includes("/")&&(ye=U(r)),(ye!==M||A()||/^\)+$/.test(ce()))&&(W=ve.close=`)$))${ye}`),ve.inner.includes("*")&&(ne=ce())&&/^\.[^\\/.]+$/.test(ne)){let Te=O9(ne,{...e,fastpaths:!1}).output;W=ve.close=`)${Te})${ye})`}ve.prev.type==="bos"&&(F.negatedExtglob=!0)}ke({type:"paren",extglob:!0,value:T,output:W}),Ze("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let ve=!1,W=t.replace(P6e,(ne,ye,Te,Ne,qe,bt)=>Ne==="\\"?(ve=!0,ne):Ne==="?"?ye?ye+Ne+(qe?y.repeat(qe.length):""):bt===0?j+(qe?y.repeat(qe.length):""):y.repeat(Te.length):Ne==="."?p.repeat(Te.length):Ne==="*"?ye?ye+Ne+(qe?M:""):M:ye?ne:`\\${ne}`);return ve===!0&&(r.unescape===!0?W=W.replace(/\\/g,""):W=W.replace(/\\+/g,ne=>ne.length%2===0?"\\\\":ne?"\\":"")),W===t&&r.contains===!0?(F.output=t,F):(F.output=ua.wrapOutput(W,F,e),F)}for(;!A();){if(T=me(),T==="\0")continue;if(T==="\\"){let ne=J();if(ne==="/"&&r.bash!==!0||ne==="."||ne===";")continue;if(!ne){T+="\\",ke({type:"text",value:T});continue}let ye=/^\\+/.exec(ce()),Te=0;if(ye&&ye[0].length>2&&(Te=ye[0].length,F.index+=Te,Te%2!==0&&(T+="\\")),r.unescape===!0?T=me():T+=me(),F.brackets===0){ke({type:"text",value:T});continue}}if(F.brackets>0&&(T!=="]"||S.value==="["||S.value==="[^")){if(r.posix!==!1&&T===":"){let ne=S.value.slice(1);if(ne.includes("[")&&(S.posix=!0,ne.includes(":"))){let ye=S.value.lastIndexOf("["),Te=S.value.slice(0,ye),Ne=S.value.slice(ye+2),qe=R6e[Ne];if(qe){S.value=Te+qe,F.backtrack=!0,me(),!o.output&&s.indexOf(S)===1&&(o.output=m);continue}}}(T==="["&&J()!==":"||T==="-"&&J()==="]")&&(T=`\\${T}`),T==="]"&&(S.value==="["||S.value==="[^")&&(T=`\\${T}`),r.posix===!0&&T==="!"&&S.value==="["&&(T="^"),S.value+=T,se({value:T});continue}if(F.quotes===1&&T!=='"'){T=ua.escapeRegex(T),S.value+=T,se({value:T});continue}if(T==='"'){F.quotes=F.quotes===1?0:1,r.keepQuotes===!0&&ke({type:"text",value:T});continue}if(T==="("){Ye("parens"),ke({type:"paren",value:T});continue}if(T===")"){if(F.parens===0&&r.strictBrackets===!0)throw new SyntaxError(gy("opening","("));let ne=z[z.length-1];if(ne&&F.parens===ne.parens+1){et(z.pop());continue}ke({type:"paren",value:T,output:F.parens?")":"\\)"}),Ze("parens");continue}if(T==="["){if(r.nobracket===!0||!ce().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(gy("closing","]"));T=`\\${T}`}else Ye("brackets");ke({type:"bracket",value:T});continue}if(T==="]"){if(r.nobracket===!0||S&&S.type==="bracket"&&S.value.length===1){ke({type:"text",value:T,output:`\\${T}`});continue}if(F.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(gy("opening","["));ke({type:"text",value:T,output:`\\${T}`});continue}Ze("brackets");let ne=S.value.slice(1);if(S.posix!==!0&&ne[0]==="^"&&!ne.includes("/")&&(T=`/${T}`),S.value+=T,se({value:T}),r.literalBrackets===!1||ua.hasRegexChars(ne))continue;let ye=ua.escapeRegex(S.value);if(F.output=F.output.slice(0,-S.value.length),r.literalBrackets===!0){F.output+=ye,S.value=ye;continue}S.value=`(${a}${ye}|${S.value})`,F.output+=S.value;continue}if(T==="{"&&r.nobrace!==!0){Ye("braces");let ne={type:"brace",value:T,output:"(",outputIndex:F.output.length,tokensIndex:F.tokens.length};q.push(ne),ke(ne);continue}if(T==="}"){let ne=q[q.length-1];if(r.nobrace===!0||!ne){ke({type:"text",value:T,output:T});continue}let ye=")";if(ne.dots===!0){let Te=s.slice(),Ne=[];for(let qe=Te.length-1;qe>=0&&(s.pop(),Te[qe].type!=="brace");qe--)Te[qe].type!=="dots"&&Ne.unshift(Te[qe].value);ye=N6e(Ne,r),F.backtrack=!0}if(ne.comma!==!0&&ne.dots!==!0){let Te=F.output.slice(0,ne.outputIndex),Ne=F.tokens.slice(ne.tokensIndex);ne.value=ne.output="\\{",T=ye="\\}",F.output=Te;for(let qe of Ne)F.output+=qe.output||qe.value}ke({type:"brace",value:T,output:ye}),Ze("braces"),q.pop();continue}if(T==="|"){z.length>0&&z[z.length-1].conditions++,ke({type:"text",value:T});continue}if(T===","){let ne=T,ye=q[q.length-1];ye&&L[L.length-1]==="braces"&&(ye.comma=!0,ne="|"),ke({type:"comma",value:T,output:ne});continue}if(T==="/"){if(S.type==="dot"&&F.index===F.start+1){F.start=F.index+1,F.consumed="",F.output="",s.pop(),S=o;continue}ke({type:"slash",value:T,output:f});continue}if(T==="."){if(F.braces>0&&S.type==="dot"){S.value==="."&&(S.output=p);let ne=q[q.length-1];S.type="dots",S.output+=T,S.value+=T,ne.dots=!0;continue}if(F.braces+F.parens===0&&S.type!=="bos"&&S.type!=="slash"){ke({type:"text",value:T,output:p});continue}ke({type:"dot",value:T,output:p});continue}if(T==="?"){if(!(S&&S.value==="(")&&r.noextglob!==!0&&J()==="("&&J(2)!=="?"){st("qmark",T);continue}if(S&&S.type==="paren"){let ye=J(),Te=T;if(ye==="<"&&!ua.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(S.value==="("&&!/[!=<:]/.test(ye)||ye==="<"&&!/<([!=]|\w+>)/.test(ce()))&&(Te=`\\${T}`),ke({type:"text",value:T,output:Te});continue}if(r.dot!==!0&&(S.type==="slash"||S.type==="bos")){ke({type:"qmark",value:T,output:b});continue}ke({type:"qmark",value:T,output:y});continue}if(T==="!"){if(r.noextglob!==!0&&J()==="("&&(J(2)!=="?"||!/[!=<:]/.test(J(3)))){st("negate",T);continue}if(r.nonegate!==!0&&F.index===0){je();continue}}if(T==="+"){if(r.noextglob!==!0&&J()==="("&&J(2)!=="?"){st("plus",T);continue}if(S&&S.value==="("||r.regex===!1){ke({type:"plus",value:T,output:d});continue}if(S&&(S.type==="bracket"||S.type==="paren"||S.type==="brace")||F.parens>0){ke({type:"plus",value:T});continue}ke({type:"plus",value:d});continue}if(T==="@"){if(r.noextglob!==!0&&J()==="("&&J(2)!=="?"){ke({type:"at",extglob:!0,value:T,output:""});continue}ke({type:"text",value:T});continue}if(T!=="*"){(T==="$"||T==="^")&&(T=`\\${T}`);let ne=D6e.exec(ce());ne&&(T+=ne[0],F.index+=ne[0].length),ke({type:"text",value:T});continue}if(S&&(S.type==="globstar"||S.star===!0)){S.type="star",S.star=!0,S.value+=T,S.output=M,F.backtrack=!0,F.globstar=!0,ae(T);continue}let ve=ce();if(r.noextglob!==!0&&/^\([^?]/.test(ve)){st("star",T);continue}if(S.type==="star"){if(r.noglobstar===!0){ae(T);continue}let ne=S.prev,ye=ne.prev,Te=ne.type==="slash"||ne.type==="bos",Ne=ye&&(ye.type==="star"||ye.type==="globstar");if(r.bash===!0&&(!Te||ve[0]&&ve[0]!=="/")){ke({type:"star",value:T,output:""});continue}let qe=F.braces>0&&(ne.type==="comma"||ne.type==="brace"),bt=z.length&&(ne.type==="pipe"||ne.type==="paren");if(!Te&&ne.type!=="paren"&&!qe&&!bt){ke({type:"star",value:T,output:""});continue}for(;ve.slice(0,3)==="/**";){let Jt=t[F.index+4];if(Jt&&Jt!=="/")break;ve=ve.slice(3),ae("/**",3)}if(ne.type==="bos"&&A()){S.type="globstar",S.value+=T,S.output=U(r),F.output=S.output,F.globstar=!0,ae(T);continue}if(ne.type==="slash"&&ne.prev.type!=="bos"&&!Ne&&A()){F.output=F.output.slice(0,-(ne.output+S.output).length),ne.output=`(?:${ne.output}`,S.type="globstar",S.output=U(r)+(r.strictSlashes?")":"|$)"),S.value+=T,F.globstar=!0,F.output+=ne.output+S.output,ae(T);continue}if(ne.type==="slash"&&ne.prev.type!=="bos"&&ve[0]==="/"){let Jt=ve[1]!==void 0?"|$":"";F.output=F.output.slice(0,-(ne.output+S.output).length),ne.output=`(?:${ne.output}`,S.type="globstar",S.output=`${U(r)}${f}|${f}${Jt})`,S.value+=T,F.output+=ne.output+S.output,F.globstar=!0,ae(T+me()),ke({type:"slash",value:"/",output:""});continue}if(ne.type==="bos"&&ve[0]==="/"){S.type="globstar",S.value+=T,S.output=`(?:^|${f}|${U(r)}${f})`,F.output=S.output,F.globstar=!0,ae(T+me()),ke({type:"slash",value:"/",output:""});continue}F.output=F.output.slice(0,-S.output.length),S.type="globstar",S.output=U(r),S.value+=T,F.output+=S.output,F.globstar=!0,ae(T);continue}let W={type:"star",value:T,output:M};if(r.bash===!0){W.output=".*?",(S.type==="bos"||S.type==="slash")&&(W.output=H+W.output),ke(W);continue}if(S&&(S.type==="bracket"||S.type==="paren")&&r.regex===!0){W.output=T,ke(W);continue}(F.index===F.start||S.type==="slash"||S.type==="dot")&&(S.type==="dot"?(F.output+=v,S.output+=v):r.dot===!0?(F.output+=_,S.output+=_):(F.output+=H,S.output+=H),J()!=="*"&&(F.output+=m,S.output+=m)),ke(W)}for(;F.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(gy("closing","]"));F.output=ua.escapeLast(F.output,"["),Ze("brackets")}for(;F.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(gy("closing",")"));F.output=ua.escapeLast(F.output,"("),Ze("parens")}for(;F.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(gy("closing","}"));F.output=ua.escapeLast(F.output,"{"),Ze("braces")}if(r.strictSlashes!==!0&&(S.type==="star"||S.type==="bracket")&&ke({type:"maybe_slash",value:"",output:`${f}?`}),F.backtrack===!0){F.output="";for(let ve of F.tokens)F.output+=ve.output!=null?ve.output:ve.value,ve.suffix&&(F.output+=ve.suffix)}return F};O9.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(gR,r.maxLength):gR,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=gle[t]||t;let o=ua.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:l,DOTS_SLASH:c,NO_DOT:u,NO_DOTS:p,NO_DOTS_SLASH:d,STAR:f,START_ANCHOR:m}=hR.globChars(o),h=r.dot?p:u,g=r.dot?d:u,v=r.capture?"":"?:",_={negated:!1,prefix:""},y=r.bash===!0?".*?":f;r.capture&&(y=`(${y})`);let b=H=>H.noglobstar===!0?y:`(${v}(?:(?!${m}${H.dot?c:s}).)*?)`,x=H=>{switch(H){case"*":return`${h}${l}${y}`;case".*":return`${s}${l}${y}`;case"*.*":return`${h}${y}${s}${l}${y}`;case"*/*":return`${h}${y}${a}${l}${g}${y}`;case"**":return h+b(r);case"**/*":return`(?:${h}${b(r)}${a})?${g}${l}${y}`;case"**/*.*":return`(?:${h}${b(r)}${a})?${g}${y}${s}${l}${y}`;case"**/.*":return`(?:${h}${b(r)}${a})?${s}${l}${y}`;default:{let j=/^(.*?)\.(\w+)$/.exec(H);if(!j)return;let M=x(j[1]);return M?M+s+j[2]:void 0}}},P=ua.removePrefix(t,_),U=x(P);return U&&r.strictSlashes!==!0&&(U+=`${a}?`),U};vle.exports=O9});var xle=k((Tgt,yle)=>{"use strict";var k6e=require("path"),O6e=hle(),L9=_le(),M9=mR(),L6e=HE(),M6e=t=>t&&typeof t=="object"&&!Array.isArray(t),$n=(t,e,r=!1)=>{if(Array.isArray(t)){let u=t.map(d=>$n(d,e,r));return d=>{for(let f of u){let m=f(d);if(m)return m}return!1}}let n=M6e(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=M9.isWindows(e),s=n?$n.compileRe(t,e):$n.makeRe(t,e,!1,!0),a=s.state;delete s.state;let l=()=>!1;if(i.ignore){let u={...e,ignore:null,onMatch:null,onResult:null};l=$n(i.ignore,u,r)}let c=(u,p=!1)=>{let{isMatch:d,match:f,output:m}=$n.test(u,s,e,{glob:t,posix:o}),h={glob:t,state:a,regex:s,posix:o,input:u,output:m,match:f,isMatch:d};return typeof i.onResult=="function"&&i.onResult(h),d===!1?(h.isMatch=!1,p?h:!1):l(u)?(typeof i.onIgnore=="function"&&i.onIgnore(h),h.isMatch=!1,p?h:!1):(typeof i.onMatch=="function"&&i.onMatch(h),p?h:!0)};return r&&(c.state=a),c};$n.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?M9.toPosixSlashes:null),a=t===n,l=a&&s?s(t):t;return a===!1&&(l=s?s(t):t,a=l===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=$n.matchBase(t,e,r,i):a=e.exec(l)),{isMatch:!!a,match:a,output:l}};$n.matchBase=(t,e,r,n=M9.isWindows(r))=>(e instanceof RegExp?e:$n.makeRe(e,r)).test(k6e.basename(t));$n.isMatch=(t,e,r)=>$n(e,r)(t);$n.parse=(t,e)=>Array.isArray(t)?t.map(r=>$n.parse(r,e)):L9(t,{...e,fastpaths:!1});$n.scan=(t,e)=>O6e(t,e);$n.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let l=$n.toRegex(a,e);return n===!0&&(l.state=t),l};$n.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=L9.fastpaths(t,e)),i.output||(i=L9(t,e)),$n.compileRe(i,e,r,n)};$n.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};$n.constants=L6e;yle.exports=$n});var Ele=k((Sgt,ble)=>{"use strict";ble.exports=xle()});var Fle=k((ER,Mle)=>{"use strict";(function(t,e){typeof define=="function"&&define.amd?define(["exports"],e):typeof ER=="object"&&typeof Mle<"u"?e(ER):(t=typeof globalThis<"u"?globalThis:t||self,e(t.marked={}))})(ER,function(t){"use strict";function e(le,ee){for(var te=0;te<ee.length;te++){var N=ee[te];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(le,N.key,N)}}function r(le,ee,te){return ee&&e(le.prototype,ee),te&&e(le,te),Object.defineProperty(le,"prototype",{writable:!1}),le}function n(le,ee){if(le){if(typeof le=="string")return i(le,ee);var te=Object.prototype.toString.call(le).slice(8,-1);if(te==="Object"&&le.constructor&&(te=le.constructor.name),te==="Map"||te==="Set")return Array.from(le);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return i(le,ee)}}function i(le,ee){(ee==null||ee>le.length)&&(ee=le.length);for(var te=0,N=new Array(ee);te<ee;te++)N[te]=le[te];return N}function o(le,ee){var te=typeof Symbol<"u"&&le[Symbol.iterator]||le["@@iterator"];if(te)return(te=te.call(le)).next.bind(te);if(Array.isArray(le)||(te=n(le))||ee&&le&&typeof le.length=="number"){te&&(le=te);var N=0;return function(){return N>=le.length?{done:!0}:{done:!1,value:le[N++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}t.defaults=s();function a(le){t.defaults=le}var l=/[&<>"']/,c=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=function(ee){return d[ee]};function m(le,ee){if(ee){if(l.test(le))return le.replace(c,f)}else if(u.test(le))return le.replace(p,f);return le}var h=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function g(le){return le.replace(h,function(ee,te){return te=te.toLowerCase(),te==="colon"?":":te.charAt(0)==="#"?te.charAt(1)==="x"?String.fromCharCode(parseInt(te.substring(2),16)):String.fromCharCode(+te.substring(1)):""})}var v=/(^|[^\[])\^/g;function _(le,ee){le=typeof le=="string"?le:le.source,ee=ee||"";var te={replace:function(O,K){return K=K.source||K,K=K.replace(v,"$1"),le=le.replace(O,K),te},getRegex:function(){return new RegExp(le,ee)}};return te}var y=/[^\w:]/g,b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function x(le,ee,te){if(le){var N;try{N=decodeURIComponent(g(te)).replace(y,"").toLowerCase()}catch{return null}if(N.indexOf("javascript:")===0||N.indexOf("vbscript:")===0||N.indexOf("data:")===0)return null}ee&&!b.test(te)&&(te=M(ee,te));try{te=encodeURI(te).replace(/%25/g,"%")}catch{return null}return te}var P={},U=/^[^:]+:\/*[^/]*$/,H=/^([^:]+:)[\s\S]*$/,j=/^([^:]+:\/*[^/]*)[\s\S]*$/;function M(le,ee){P[" "+le]||(U.test(le)?P[" "+le]=le+"/":P[" "+le]=L(le,"/",!0)),le=P[" "+le];var te=le.indexOf(":")===-1;return ee.substring(0,2)==="//"?te?ee:le.replace(H,"$1")+ee:ee.charAt(0)==="/"?te?ee:le.replace(j,"$1")+ee:le+ee}var F={exec:function(){}};function z(le){for(var ee=1,te,N;ee<arguments.length;ee++){te=arguments[ee];for(N in te)Object.prototype.hasOwnProperty.call(te,N)&&(le[N]=te[N])}return le}function q(le,ee){var te=le.replace(/\|/g,function(K,G,pe){for(var be=!1,E=G;--E>=0&&pe[E]==="\\";)be=!be;return be?"|":" |"}),N=te.split(/ \|/),O=0;if(N[0].trim()||N.shift(),N.length>0&&!N[N.length-1].trim()&&N.pop(),N.length>ee)N.splice(ee);else for(;N.length<ee;)N.push("");for(;O<N.length;O++)N[O]=N[O].trim().replace(/\\\|/g,"|");return N}function L(le,ee,te){var N=le.length;if(N===0)return"";for(var O=0;O<N;){var K=le.charAt(N-O-1);if(K===ee&&!te)O++;else if(K!==ee&&te)O++;else break}return le.slice(0,N-O)}function S(le,ee){if(le.indexOf(ee[1])===-1)return-1;for(var te=le.length,N=0,O=0;O<te;O++)if(le[O]==="\\")O++;else if(le[O]===ee[0])N++;else if(le[O]===ee[1]&&(N--,N<0))return O;return-1}function T(le){le&&le.sanitize&&!le.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function A(le,ee){if(ee<1)return"";for(var te="";ee>1;)ee&1&&(te+=le),ee>>=1,le+=le;return te+le}function J(le,ee,te,N){var O=ee.href,K=ee.title?m(ee.title):null,G=le[1].replace(/\\([\[\]])/g,"$1");if(le[0].charAt(0)!=="!"){N.state.inLink=!0;var pe={type:"link",raw:te,href:O,title:K,text:G,tokens:N.inlineTokens(G)};return N.state.inLink=!1,pe}return{type:"image",raw:te,href:O,title:K,text:m(G)}}function me(le,ee){var te=le.match(/^(\s+)(?:```)/);if(te===null)return ee;var N=te[1];return ee.split(`
`).map(function(O){var K=O.match(/^\s+/);if(K===null)return O;var G=K[0];return G.length>=N.length?O.slice(N.length):O}).join(`
`)}var ce=function(){function le(te){this.options=te||t.defaults}var ee=le.prototype;return ee.space=function(N){var O=this.rules.block.newline.exec(N);if(O&&O[0].length>0)return{type:"space",raw:O[0]}},ee.code=function(N){var O=this.rules.block.code.exec(N);if(O){var K=O[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:O[0],codeBlockStyle:"indented",text:this.options.pedantic?K:L(K,`
`)}}},ee.fences=function(N){var O=this.rules.block.fences.exec(N);if(O){var K=O[0],G=me(K,O[3]||"");return{type:"code",raw:K,lang:O[2]?O[2].trim():O[2],text:G}}},ee.heading=function(N){var O=this.rules.block.heading.exec(N);if(O){var K=O[2].trim();if(/#$/.test(K)){var G=L(K,"#");(this.options.pedantic||!G||/ $/.test(G))&&(K=G.trim())}return{type:"heading",raw:O[0],depth:O[1].length,text:K,tokens:this.lexer.inline(K)}}},ee.hr=function(N){var O=this.rules.block.hr.exec(N);if(O)return{type:"hr",raw:O[0]}},ee.blockquote=function(N){var O=this.rules.block.blockquote.exec(N);if(O){var K=O[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:O[0],tokens:this.lexer.blockTokens(K,[]),text:K}}},ee.list=function(N){var O=this.rules.block.list.exec(N);if(O){var K,G,pe,be,E,B,Y,Q,fe,ge,oe,V,ie=O[1].trim(),re=ie.length>1,xe={type:"list",raw:"",ordered:re,start:re?+ie.slice(0,-1):"",loose:!1,items:[]};ie=re?"\\d{1,9}\\"+ie.slice(-1):"\\"+ie,this.options.pedantic&&(ie=re?ie:"[*+-]");for(var Ie=new RegExp("^( {0,3}"+ie+")((?:[	 ][^\\n]*)?(?:\\n|$))");N&&(V=!1,!(!(O=Ie.exec(N))||this.rules.block.hr.test(N)));){if(K=O[0],N=N.substring(K.length),Q=O[2].split(`
`,1)[0],fe=N.split(`
`,1)[0],this.options.pedantic?(be=2,oe=Q.trimLeft()):(be=O[2].search(/[^ ]/),be=be>4?1:be,oe=Q.slice(be),be+=O[1].length),B=!1,!Q&&/^ *$/.test(fe)&&(K+=fe+`
`,N=N.substring(fe.length+1),V=!0),!V)for(var We=new RegExp("^ {0,"+Math.min(3,be-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),ft=new RegExp("^ {0,"+Math.min(3,be-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Et=new RegExp("^ {0,"+Math.min(3,be-1)+"}(?:```|~~~)"),It=new RegExp("^ {0,"+Math.min(3,be-1)+"}#");N&&(ge=N.split(`
`,1)[0],Q=ge,this.options.pedantic&&(Q=Q.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Et.test(Q)||It.test(Q)||We.test(Q)||ft.test(N)));){if(Q.search(/[^ ]/)>=be||!Q.trim())oe+=`
`+Q.slice(be);else if(!B)oe+=`
`+Q;else break;!B&&!Q.trim()&&(B=!0),K+=ge+`
`,N=N.substring(ge.length+1)}xe.loose||(Y?xe.loose=!0:/\n *\n *$/.test(K)&&(Y=!0)),this.options.gfm&&(G=/^\[[ xX]\] /.exec(oe),G&&(pe=G[0]!=="[ ] ",oe=oe.replace(/^\[[ xX]\] +/,""))),xe.items.push({type:"list_item",raw:K,task:!!G,checked:pe,loose:!1,text:oe}),xe.raw+=K}xe.items[xe.items.length-1].raw=K.trimRight(),xe.items[xe.items.length-1].text=oe.trimRight(),xe.raw=xe.raw.trimRight();var Hn=xe.items.length;for(E=0;E<Hn;E++){this.lexer.state.top=!1,xe.items[E].tokens=this.lexer.blockTokens(xe.items[E].text,[]);var Zt=xe.items[E].tokens.filter(function(Rn){return Rn.type==="space"}),br=Zt.every(function(Rn){for(var wd=Rn.raw.split(""),BC=0,lbe=o(wd),fz;!(fz=lbe()).done;){var ube=fz.value;if(ube===`
`&&(BC+=1),BC>1)return!0}return!1});!xe.loose&&Zt.length&&br&&(xe.loose=!0,xe.items[E].loose=!0)}return xe}},ee.html=function(N){var O=this.rules.block.html.exec(N);if(O){var K={type:"html",raw:O[0],pre:!this.options.sanitizer&&(O[1]==="pre"||O[1]==="script"||O[1]==="style"),text:O[0]};if(this.options.sanitize){var G=this.options.sanitizer?this.options.sanitizer(O[0]):m(O[0]);K.type="paragraph",K.text=G,K.tokens=this.lexer.inline(G)}return K}},ee.def=function(N){var O=this.rules.block.def.exec(N);if(O){O[3]&&(O[3]=O[3].substring(1,O[3].length-1));var K=O[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:K,raw:O[0],href:O[2],title:O[3]}}},ee.table=function(N){var O=this.rules.block.table.exec(N);if(O){var K={type:"table",header:q(O[1]).map(function(Y){return{text:Y}}),align:O[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:O[3]&&O[3].trim()?O[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(K.header.length===K.align.length){K.raw=O[0];var G=K.align.length,pe,be,E,B;for(pe=0;pe<G;pe++)/^ *-+: *$/.test(K.align[pe])?K.align[pe]="right":/^ *:-+: *$/.test(K.align[pe])?K.align[pe]="center":/^ *:-+ *$/.test(K.align[pe])?K.align[pe]="left":K.align[pe]=null;for(G=K.rows.length,pe=0;pe<G;pe++)K.rows[pe]=q(K.rows[pe],K.header.length).map(function(Y){return{text:Y}});for(G=K.header.length,be=0;be<G;be++)K.header[be].tokens=this.lexer.inline(K.header[be].text);for(G=K.rows.length,be=0;be<G;be++)for(B=K.rows[be],E=0;E<B.length;E++)B[E].tokens=this.lexer.inline(B[E].text);return K}}},ee.lheading=function(N){var O=this.rules.block.lheading.exec(N);if(O)return{type:"heading",raw:O[0],depth:O[2].charAt(0)==="="?1:2,text:O[1],tokens:this.lexer.inline(O[1])}},ee.paragraph=function(N){var O=this.rules.block.paragraph.exec(N);if(O){var K=O[1].charAt(O[1].length-1)===`
`?O[1].slice(0,-1):O[1];return{type:"paragraph",raw:O[0],text:K,tokens:this.lexer.inline(K)}}},ee.text=function(N){var O=this.rules.block.text.exec(N);if(O)return{type:"text",raw:O[0],text:O[0],tokens:this.lexer.inline(O[0])}},ee.escape=function(N){var O=this.rules.inline.escape.exec(N);if(O)return{type:"escape",raw:O[0],text:m(O[1])}},ee.tag=function(N){var O=this.rules.inline.tag.exec(N);if(O)return!this.lexer.state.inLink&&/^<a /i.test(O[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(O[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(O[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(O[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:O[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(O[0]):m(O[0]):O[0]}},ee.link=function(N){var O=this.rules.inline.link.exec(N);if(O){var K=O[2].trim();if(!this.options.pedantic&&/^</.test(K)){if(!/>$/.test(K))return;var G=L(K.slice(0,-1),"\\");if((K.length-G.length)%2===0)return}else{var pe=S(O[2],"()");if(pe>-1){var be=O[0].indexOf("!")===0?5:4,E=be+O[1].length+pe;O[2]=O[2].substring(0,pe),O[0]=O[0].substring(0,E).trim(),O[3]=""}}var B=O[2],Y="";if(this.options.pedantic){var Q=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(B);Q&&(B=Q[1],Y=Q[3])}else Y=O[3]?O[3].slice(1,-1):"";return B=B.trim(),/^</.test(B)&&(this.options.pedantic&&!/>$/.test(K)?B=B.slice(1):B=B.slice(1,-1)),J(O,{href:B&&B.replace(this.rules.inline._escapes,"$1"),title:Y&&Y.replace(this.rules.inline._escapes,"$1")},O[0],this.lexer)}},ee.reflink=function(N,O){var K;if((K=this.rules.inline.reflink.exec(N))||(K=this.rules.inline.nolink.exec(N))){var G=(K[2]||K[1]).replace(/\s+/g," ");if(G=O[G.toLowerCase()],!G||!G.href){var pe=K[0].charAt(0);return{type:"text",raw:pe,text:pe}}return J(K,G,K[0],this.lexer)}},ee.emStrong=function(N,O,K){K===void 0&&(K="");var G=this.rules.inline.emStrong.lDelim.exec(N);if(G&&!(G[3]&&K.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var pe=G[1]||G[2]||"";if(!pe||pe&&(K===""||this.rules.inline.punctuation.exec(K))){var be=G[0].length-1,E,B,Y=be,Q=0,fe=G[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(fe.lastIndex=0,O=O.slice(-1*N.length+be);(G=fe.exec(O))!=null;)if(E=G[1]||G[2]||G[3]||G[4]||G[5]||G[6],!!E){if(B=E.length,G[3]||G[4]){Y+=B;continue}else if((G[5]||G[6])&&be%3&&!((be+B)%3)){Q+=B;continue}if(Y-=B,!(Y>0)){if(B=Math.min(B,B+Y+Q),Math.min(be,B)%2){var ge=N.slice(1,be+G.index+B);return{type:"em",raw:N.slice(0,be+G.index+B+1),text:ge,tokens:this.lexer.inlineTokens(ge)}}var oe=N.slice(2,be+G.index+B-1);return{type:"strong",raw:N.slice(0,be+G.index+B+1),text:oe,tokens:this.lexer.inlineTokens(oe)}}}}}},ee.codespan=function(N){var O=this.rules.inline.code.exec(N);if(O){var K=O[2].replace(/\n/g," "),G=/[^ ]/.test(K),pe=/^ /.test(K)&&/ $/.test(K);return G&&pe&&(K=K.substring(1,K.length-1)),K=m(K,!0),{type:"codespan",raw:O[0],text:K}}},ee.br=function(N){var O=this.rules.inline.br.exec(N);if(O)return{type:"br",raw:O[0]}},ee.del=function(N){var O=this.rules.inline.del.exec(N);if(O)return{type:"del",raw:O[0],text:O[2],tokens:this.lexer.inlineTokens(O[2])}},ee.autolink=function(N,O){var K=this.rules.inline.autolink.exec(N);if(K){var G,pe;return K[2]==="@"?(G=m(this.options.mangle?O(K[1]):K[1]),pe="mailto:"+G):(G=m(K[1]),pe=G),{type:"link",raw:K[0],text:G,href:pe,tokens:[{type:"text",raw:G,text:G}]}}},ee.url=function(N,O){var K;if(K=this.rules.inline.url.exec(N)){var G,pe;if(K[2]==="@")G=m(this.options.mangle?O(K[0]):K[0]),pe="mailto:"+G;else{var be;do be=K[0],K[0]=this.rules.inline._backpedal.exec(K[0])[0];while(be!==K[0]);G=m(K[0]),K[1]==="www."?pe="http://"+G:pe=G}return{type:"link",raw:K[0],text:G,href:pe,tokens:[{type:"text",raw:G,text:G}]}}},ee.inlineText=function(N,O){var K=this.rules.inline.text.exec(N);if(K){var G;return this.lexer.state.inRawBlock?G=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(K[0]):m(K[0]):K[0]:G=m(this.options.smartypants?O(K[0]):K[0]),{type:"text",raw:K[0],text:G}}},le}(),ae={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:F,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ae._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ae._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ae.def=_(ae.def).replace("label",ae._label).replace("title",ae._title).getRegex(),ae.bullet=/(?:[*+-]|\d{1,9}[.)])/,ae.listItemStart=_(/^( *)(bull) */).replace("bull",ae.bullet).getRegex(),ae.list=_(ae.list).replace(/bull/g,ae.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ae.def.source+")").getRegex(),ae._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ae._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ae.html=_(ae.html,"i").replace("comment",ae._comment).replace("tag",ae._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ae.paragraph=_(ae._paragraph).replace("hr",ae.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ae._tag).getRegex(),ae.blockquote=_(ae.blockquote).replace("paragraph",ae.paragraph).getRegex(),ae.normal=z({},ae),ae.gfm=z({},ae.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ae.gfm.table=_(ae.gfm.table).replace("hr",ae.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ae._tag).getRegex(),ae.gfm.paragraph=_(ae._paragraph).replace("hr",ae.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ae.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ae._tag).getRegex(),ae.pedantic=z({},ae.normal,{html:_(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ae._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:F,paragraph:_(ae.normal._paragraph).replace("hr",ae.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ae.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var se={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:F,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:F,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};se._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",se.punctuation=_(se.punctuation).replace(/punctuation/g,se._punctuation).getRegex(),se.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,se.escapedEmSt=/\\\*|\\_/g,se._comment=_(ae._comment).replace("(?:-->|$)","-->").getRegex(),se.emStrong.lDelim=_(se.emStrong.lDelim).replace(/punct/g,se._punctuation).getRegex(),se.emStrong.rDelimAst=_(se.emStrong.rDelimAst,"g").replace(/punct/g,se._punctuation).getRegex(),se.emStrong.rDelimUnd=_(se.emStrong.rDelimUnd,"g").replace(/punct/g,se._punctuation).getRegex(),se._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,se._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,se._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,se.autolink=_(se.autolink).replace("scheme",se._scheme).replace("email",se._email).getRegex(),se._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,se.tag=_(se.tag).replace("comment",se._comment).replace("attribute",se._attribute).getRegex(),se._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,se._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,se._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,se.link=_(se.link).replace("label",se._label).replace("href",se._href).replace("title",se._title).getRegex(),se.reflink=_(se.reflink).replace("label",se._label).replace("ref",ae._label).getRegex(),se.nolink=_(se.nolink).replace("ref",ae._label).getRegex(),se.reflinkSearch=_(se.reflinkSearch,"g").replace("reflink",se.reflink).replace("nolink",se.nolink).getRegex(),se.normal=z({},se),se.pedantic=z({},se.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_(/^!?\[(label)\]\((.*?)\)/).replace("label",se._label).getRegex(),reflink:_(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",se._label).getRegex()}),se.gfm=z({},se.normal,{escape:_(se.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),se.gfm.url=_(se.gfm.url,"i").replace("email",se.gfm._extended_email).getRegex(),se.breaks=z({},se.gfm,{br:_(se.br).replace("{2,}","*").getRegex(),text:_(se.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function je(le){return le.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Ye(le){var ee="",te,N,O=le.length;for(te=0;te<O;te++)N=le.charCodeAt(te),Math.random()>.5&&(N="x"+N.toString(16)),ee+="&#"+N+";";return ee}var Ze=function(){function le(te){this.tokens=[],this.tokens.links=Object.create(null),this.options=te||t.defaults,this.options.tokenizer=this.options.tokenizer||new ce,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var N={block:ae.normal,inline:se.normal};this.options.pedantic?(N.block=ae.pedantic,N.inline=se.pedantic):this.options.gfm&&(N.block=ae.gfm,this.options.breaks?N.inline=se.breaks:N.inline=se.gfm),this.tokenizer.rules=N}le.lex=function(N,O){var K=new le(O);return K.lex(N)},le.lexInline=function(N,O){var K=new le(O);return K.inlineTokens(N)};var ee=le.prototype;return ee.lex=function(N){N=N.replace(/\r\n|\r/g,`
`),this.blockTokens(N,this.tokens);for(var O;O=this.inlineQueue.shift();)this.inlineTokens(O.src,O.tokens);return this.tokens},ee.blockTokens=function(N,O){var K=this;O===void 0&&(O=[]),this.options.pedantic?N=N.replace(/\t/g,"    ").replace(/^ +$/gm,""):N=N.replace(/^( *)(\t+)/gm,function(Y,Q,fe){return Q+"    ".repeat(fe.length)});for(var G,pe,be,E;N;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Y){return(G=Y.call({lexer:K},N,O))?(N=N.substring(G.raw.length),O.push(G),!0):!1}))){if(G=this.tokenizer.space(N)){N=N.substring(G.raw.length),G.raw.length===1&&O.length>0?O[O.length-1].raw+=`
`:O.push(G);continue}if(G=this.tokenizer.code(N)){N=N.substring(G.raw.length),pe=O[O.length-1],pe&&(pe.type==="paragraph"||pe.type==="text")?(pe.raw+=`
`+G.raw,pe.text+=`
`+G.text,this.inlineQueue[this.inlineQueue.length-1].src=pe.text):O.push(G);continue}if(G=this.tokenizer.fences(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.heading(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.hr(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.blockquote(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.list(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.html(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.def(N)){N=N.substring(G.raw.length),pe=O[O.length-1],pe&&(pe.type==="paragraph"||pe.type==="text")?(pe.raw+=`
`+G.raw,pe.text+=`
`+G.raw,this.inlineQueue[this.inlineQueue.length-1].src=pe.text):this.tokens.links[G.tag]||(this.tokens.links[G.tag]={href:G.href,title:G.title});continue}if(G=this.tokenizer.table(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.lheading(N)){N=N.substring(G.raw.length),O.push(G);continue}if(be=N,this.options.extensions&&this.options.extensions.startBlock&&function(){var Y=1/0,Q=N.slice(1),fe=void 0;K.options.extensions.startBlock.forEach(function(ge){fe=ge.call({lexer:this},Q),typeof fe=="number"&&fe>=0&&(Y=Math.min(Y,fe))}),Y<1/0&&Y>=0&&(be=N.substring(0,Y+1))}(),this.state.top&&(G=this.tokenizer.paragraph(be))){pe=O[O.length-1],E&&pe.type==="paragraph"?(pe.raw+=`
`+G.raw,pe.text+=`
`+G.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=pe.text):O.push(G),E=be.length!==N.length,N=N.substring(G.raw.length);continue}if(G=this.tokenizer.text(N)){N=N.substring(G.raw.length),pe=O[O.length-1],pe&&pe.type==="text"?(pe.raw+=`
`+G.raw,pe.text+=`
`+G.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=pe.text):O.push(G);continue}if(N){var B="Infinite loop on byte: "+N.charCodeAt(0);if(this.options.silent){console.error(B);break}else throw new Error(B)}}return this.state.top=!0,O},ee.inline=function(N,O){return O===void 0&&(O=[]),this.inlineQueue.push({src:N,tokens:O}),O},ee.inlineTokens=function(N,O){var K=this;O===void 0&&(O=[]);var G,pe,be,E=N,B,Y,Q;if(this.tokens.links){var fe=Object.keys(this.tokens.links);if(fe.length>0)for(;(B=this.tokenizer.rules.inline.reflinkSearch.exec(E))!=null;)fe.includes(B[0].slice(B[0].lastIndexOf("[")+1,-1))&&(E=E.slice(0,B.index)+"["+A("a",B[0].length-2)+"]"+E.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(B=this.tokenizer.rules.inline.blockSkip.exec(E))!=null;)E=E.slice(0,B.index)+"["+A("a",B[0].length-2)+"]"+E.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(B=this.tokenizer.rules.inline.escapedEmSt.exec(E))!=null;)E=E.slice(0,B.index)+"++"+E.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;N;)if(Y||(Q=""),Y=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(oe){return(G=oe.call({lexer:K},N,O))?(N=N.substring(G.raw.length),O.push(G),!0):!1}))){if(G=this.tokenizer.escape(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.tag(N)){N=N.substring(G.raw.length),pe=O[O.length-1],pe&&G.type==="text"&&pe.type==="text"?(pe.raw+=G.raw,pe.text+=G.text):O.push(G);continue}if(G=this.tokenizer.link(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.reflink(N,this.tokens.links)){N=N.substring(G.raw.length),pe=O[O.length-1],pe&&G.type==="text"&&pe.type==="text"?(pe.raw+=G.raw,pe.text+=G.text):O.push(G);continue}if(G=this.tokenizer.emStrong(N,E,Q)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.codespan(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.br(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.del(N)){N=N.substring(G.raw.length),O.push(G);continue}if(G=this.tokenizer.autolink(N,Ye)){N=N.substring(G.raw.length),O.push(G);continue}if(!this.state.inLink&&(G=this.tokenizer.url(N,Ye))){N=N.substring(G.raw.length),O.push(G);continue}if(be=N,this.options.extensions&&this.options.extensions.startInline&&function(){var oe=1/0,V=N.slice(1),ie=void 0;K.options.extensions.startInline.forEach(function(re){ie=re.call({lexer:this},V),typeof ie=="number"&&ie>=0&&(oe=Math.min(oe,ie))}),oe<1/0&&oe>=0&&(be=N.substring(0,oe+1))}(),G=this.tokenizer.inlineText(be,je)){N=N.substring(G.raw.length),G.raw.slice(-1)!=="_"&&(Q=G.raw.slice(-1)),Y=!0,pe=O[O.length-1],pe&&pe.type==="text"?(pe.raw+=G.raw,pe.text+=G.text):O.push(G);continue}if(N){var ge="Infinite loop on byte: "+N.charCodeAt(0);if(this.options.silent){console.error(ge);break}else throw new Error(ge)}}return O},r(le,null,[{key:"rules",get:function(){return{block:ae,inline:se}}}]),le}(),ke=function(){function le(te){this.options=te||t.defaults}var ee=le.prototype;return ee.code=function(N,O,K){var G=(O||"").match(/\S*/)[0];if(this.options.highlight){var pe=this.options.highlight(N,G);pe!=null&&pe!==N&&(K=!0,N=pe)}return N=N.replace(/\n$/,"")+`
`,G?'<pre><code class="'+this.options.langPrefix+m(G,!0)+'">'+(K?N:m(N,!0))+`</code></pre>
`:"<pre><code>"+(K?N:m(N,!0))+`</code></pre>
`},ee.blockquote=function(N){return`<blockquote>
`+N+`</blockquote>
`},ee.html=function(N){return N},ee.heading=function(N,O,K,G){if(this.options.headerIds){var pe=this.options.headerPrefix+G.slug(K);return"<h"+O+' id="'+pe+'">'+N+"</h"+O+`>
`}return"<h"+O+">"+N+"</h"+O+`>
`},ee.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},ee.list=function(N,O,K){var G=O?"ol":"ul",pe=O&&K!==1?' start="'+K+'"':"";return"<"+G+pe+`>
`+N+"</"+G+`>
`},ee.listitem=function(N){return"<li>"+N+`</li>
`},ee.checkbox=function(N){return"<input "+(N?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ee.paragraph=function(N){return"<p>"+N+`</p>
`},ee.table=function(N,O){return O&&(O="<tbody>"+O+"</tbody>"),`<table>
<thead>
`+N+`</thead>
`+O+`</table>
`},ee.tablerow=function(N){return`<tr>
`+N+`</tr>
`},ee.tablecell=function(N,O){var K=O.header?"th":"td",G=O.align?"<"+K+' align="'+O.align+'">':"<"+K+">";return G+N+("</"+K+`>
`)},ee.strong=function(N){return"<strong>"+N+"</strong>"},ee.em=function(N){return"<em>"+N+"</em>"},ee.codespan=function(N){return"<code>"+N+"</code>"},ee.br=function(){return this.options.xhtml?"<br/>":"<br>"},ee.del=function(N){return"<del>"+N+"</del>"},ee.link=function(N,O,K){if(N=x(this.options.sanitize,this.options.baseUrl,N),N===null)return K;var G='<a href="'+m(N)+'"';return O&&(G+=' title="'+O+'"'),G+=">"+K+"</a>",G},ee.image=function(N,O,K){if(N=x(this.options.sanitize,this.options.baseUrl,N),N===null)return K;var G='<img src="'+N+'" alt="'+K+'"';return O&&(G+=' title="'+O+'"'),G+=this.options.xhtml?"/>":">",G},ee.text=function(N){return N},le}(),st=function(){function le(){}var ee=le.prototype;return ee.strong=function(N){return N},ee.em=function(N){return N},ee.codespan=function(N){return N},ee.del=function(N){return N},ee.html=function(N){return N},ee.text=function(N){return N},ee.link=function(N,O,K){return""+K},ee.image=function(N,O,K){return""+K},ee.br=function(){return""},le}(),et=function(){function le(){this.seen={}}var ee=le.prototype;return ee.serialize=function(N){return N.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ee.getNextSafeSlug=function(N,O){var K=N,G=0;if(this.seen.hasOwnProperty(K)){G=this.seen[N];do G++,K=N+"-"+G;while(this.seen.hasOwnProperty(K))}return O||(this.seen[N]=G,this.seen[K]=0),K},ee.slug=function(N,O){O===void 0&&(O={});var K=this.serialize(N);return this.getNextSafeSlug(K,O.dryrun)},le}(),ve=function(){function le(te){this.options=te||t.defaults,this.options.renderer=this.options.renderer||new ke,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new st,this.slugger=new et}le.parse=function(N,O){var K=new le(O);return K.parse(N)},le.parseInline=function(N,O){var K=new le(O);return K.parseInline(N)};var ee=le.prototype;return ee.parse=function(N,O){O===void 0&&(O=!0);var K="",G,pe,be,E,B,Y,Q,fe,ge,oe,V,ie,re,xe,Ie,We,ft,Et,It,Hn=N.length;for(G=0;G<Hn;G++){if(oe=N[G],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[oe.type]&&(It=this.options.extensions.renderers[oe.type].call({parser:this},oe),It!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(oe.type))){K+=It||"";continue}switch(oe.type){case"space":continue;case"hr":{K+=this.renderer.hr();continue}case"heading":{K+=this.renderer.heading(this.parseInline(oe.tokens),oe.depth,g(this.parseInline(oe.tokens,this.textRenderer)),this.slugger);continue}case"code":{K+=this.renderer.code(oe.text,oe.lang,oe.escaped);continue}case"table":{for(fe="",Q="",E=oe.header.length,pe=0;pe<E;pe++)Q+=this.renderer.tablecell(this.parseInline(oe.header[pe].tokens),{header:!0,align:oe.align[pe]});for(fe+=this.renderer.tablerow(Q),ge="",E=oe.rows.length,pe=0;pe<E;pe++){for(Y=oe.rows[pe],Q="",B=Y.length,be=0;be<B;be++)Q+=this.renderer.tablecell(this.parseInline(Y[be].tokens),{header:!1,align:oe.align[be]});ge+=this.renderer.tablerow(Q)}K+=this.renderer.table(fe,ge);continue}case"blockquote":{ge=this.parse(oe.tokens),K+=this.renderer.blockquote(ge);continue}case"list":{for(V=oe.ordered,ie=oe.start,re=oe.loose,E=oe.items.length,ge="",pe=0;pe<E;pe++)Ie=oe.items[pe],We=Ie.checked,ft=Ie.task,xe="",Ie.task&&(Et=this.renderer.checkbox(We),re?Ie.tokens.length>0&&Ie.tokens[0].type==="paragraph"?(Ie.tokens[0].text=Et+" "+Ie.tokens[0].text,Ie.tokens[0].tokens&&Ie.tokens[0].tokens.length>0&&Ie.tokens[0].tokens[0].type==="text"&&(Ie.tokens[0].tokens[0].text=Et+" "+Ie.tokens[0].tokens[0].text)):Ie.tokens.unshift({type:"text",text:Et}):xe+=Et),xe+=this.parse(Ie.tokens,re),ge+=this.renderer.listitem(xe,ft,We);K+=this.renderer.list(ge,V,ie);continue}case"html":{K+=this.renderer.html(oe.text);continue}case"paragraph":{K+=this.renderer.paragraph(this.parseInline(oe.tokens));continue}case"text":{for(ge=oe.tokens?this.parseInline(oe.tokens):oe.text;G+1<Hn&&N[G+1].type==="text";)oe=N[++G],ge+=`
`+(oe.tokens?this.parseInline(oe.tokens):oe.text);K+=O?this.renderer.paragraph(ge):ge;continue}default:{var Zt='Token with "'+oe.type+'" type was not found.';if(this.options.silent){console.error(Zt);return}else throw new Error(Zt)}}}return K},ee.parseInline=function(N,O){O=O||this.renderer;var K="",G,pe,be,E=N.length;for(G=0;G<E;G++){if(pe=N[G],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[pe.type]&&(be=this.options.extensions.renderers[pe.type].call({parser:this},pe),be!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(pe.type))){K+=be||"";continue}switch(pe.type){case"escape":{K+=O.text(pe.text);break}case"html":{K+=O.html(pe.text);break}case"link":{K+=O.link(pe.href,pe.title,this.parseInline(pe.tokens,O));break}case"image":{K+=O.image(pe.href,pe.title,pe.text);break}case"strong":{K+=O.strong(this.parseInline(pe.tokens,O));break}case"em":{K+=O.em(this.parseInline(pe.tokens,O));break}case"codespan":{K+=O.codespan(pe.text);break}case"br":{K+=O.br();break}case"del":{K+=O.del(this.parseInline(pe.tokens,O));break}case"text":{K+=O.text(pe.text);break}default:{var B='Token with "'+pe.type+'" type was not found.';if(this.options.silent){console.error(B);return}else throw new Error(B)}}}return K},le}();function W(le,ee,te){if(typeof le>"u"||le===null)throw new Error("marked(): input parameter is undefined or null");if(typeof le!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(le)+", string expected");if(typeof ee=="function"&&(te=ee,ee=null),ee=z({},W.defaults,ee||{}),T(ee),te){var N=ee.highlight,O;try{O=Ze.lex(le,ee)}catch(E){return te(E)}var K=function(B){var Y;if(!B)try{ee.walkTokens&&W.walkTokens(O,ee.walkTokens),Y=ve.parse(O,ee)}catch(Q){B=Q}return ee.highlight=N,B?te(B):te(null,Y)};if(!N||N.length<3||(delete ee.highlight,!O.length))return K();var G=0;W.walkTokens(O,function(E){E.type==="code"&&(G++,setTimeout(function(){N(E.text,E.lang,function(B,Y){if(B)return K(B);Y!=null&&Y!==E.text&&(E.text=Y,E.escaped=!0),G--,G===0&&K()})},0))}),G===0&&K();return}function pe(E){if(E.message+=`
Please report this to https://github.com/markedjs/marked.`,ee.silent)return"<p>An error occurred:</p><pre>"+m(E.message+"",!0)+"</pre>";throw E}try{var be=Ze.lex(le,ee);if(ee.walkTokens){if(ee.async)return Promise.all(W.walkTokens(be,ee.walkTokens)).then(function(){return ve.parse(be,ee)}).catch(pe);W.walkTokens(be,ee.walkTokens)}return ve.parse(be,ee)}catch(E){pe(E)}}W.options=W.setOptions=function(le){return z(W.defaults,le),a(W.defaults),W},W.getDefaults=s,W.defaults=t.defaults,W.use=function(){for(var le=arguments.length,ee=new Array(le),te=0;te<le;te++)ee[te]=arguments[te];var N=z.apply(void 0,[{}].concat(ee)),O=W.defaults.extensions||{renderers:{},childTokens:{}},K;ee.forEach(function(G){if(G.extensions&&(K=!0,G.extensions.forEach(function(be){if(!be.name)throw new Error("extension name required");if(be.renderer){var E=O.renderers?O.renderers[be.name]:null;E?O.renderers[be.name]=function(){for(var B=arguments.length,Y=new Array(B),Q=0;Q<B;Q++)Y[Q]=arguments[Q];var fe=be.renderer.apply(this,Y);return fe===!1&&(fe=E.apply(this,Y)),fe}:O.renderers[be.name]=be.renderer}if(be.tokenizer){if(!be.level||be.level!=="block"&&be.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");O[be.level]?O[be.level].unshift(be.tokenizer):O[be.level]=[be.tokenizer],be.start&&(be.level==="block"?O.startBlock?O.startBlock.push(be.start):O.startBlock=[be.start]:be.level==="inline"&&(O.startInline?O.startInline.push(be.start):O.startInline=[be.start]))}be.childTokens&&(O.childTokens[be.name]=be.childTokens)})),G.renderer&&function(){var be=W.defaults.renderer||new ke,E=function(Q){var fe=be[Q];be[Q]=function(){for(var ge=arguments.length,oe=new Array(ge),V=0;V<ge;V++)oe[V]=arguments[V];var ie=G.renderer[Q].apply(be,oe);return ie===!1&&(ie=fe.apply(be,oe)),ie}};for(var B in G.renderer)E(B);N.renderer=be}(),G.tokenizer&&function(){var be=W.defaults.tokenizer||new ce,E=function(Q){var fe=be[Q];be[Q]=function(){for(var ge=arguments.length,oe=new Array(ge),V=0;V<ge;V++)oe[V]=arguments[V];var ie=G.tokenizer[Q].apply(be,oe);return ie===!1&&(ie=fe.apply(be,oe)),ie}};for(var B in G.tokenizer)E(B);N.tokenizer=be}(),G.walkTokens){var pe=W.defaults.walkTokens;N.walkTokens=function(be){var E=[];return E.push(G.walkTokens.call(this,be)),pe&&(E=E.concat(pe.call(this,be))),E}}K&&(N.extensions=O),W.setOptions(N)})},W.walkTokens=function(le,ee){for(var te=[],N=function(){var pe=K.value;switch(te=te.concat(ee.call(W,pe)),pe.type){case"table":{for(var be=o(pe.header),E;!(E=be()).done;){var B=E.value;te=te.concat(W.walkTokens(B.tokens,ee))}for(var Y=o(pe.rows),Q;!(Q=Y()).done;)for(var fe=Q.value,ge=o(fe),oe;!(oe=ge()).done;){var V=oe.value;te=te.concat(W.walkTokens(V.tokens,ee))}break}case"list":{te=te.concat(W.walkTokens(pe.items,ee));break}default:W.defaults.extensions&&W.defaults.extensions.childTokens&&W.defaults.extensions.childTokens[pe.type]?W.defaults.extensions.childTokens[pe.type].forEach(function(ie){te=te.concat(W.walkTokens(pe[ie],ee))}):pe.tokens&&(te=te.concat(W.walkTokens(pe.tokens,ee)))}},O=o(le),K;!(K=O()).done;)N();return te},W.parseInline=function(le,ee){if(typeof le>"u"||le===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof le!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(le)+", string expected");ee=z({},W.defaults,ee||{}),T(ee);try{var te=Ze.lexInline(le,ee);return ee.walkTokens&&W.walkTokens(te,ee.walkTokens),ve.parseInline(te,ee)}catch(N){if(N.message+=`
Please report this to https://github.com/markedjs/marked.`,ee.silent)return"<p>An error occurred:</p><pre>"+m(N.message+"",!0)+"</pre>";throw N}},W.Parser=ve,W.parser=ve.parse,W.Renderer=ke,W.TextRenderer=st,W.Lexer=Ze,W.lexer=Ze.lex,W.Tokenizer=ce,W.Slugger=et,W.parse=W;var ne=W.options,ye=W.setOptions,Te=W.use,Ne=W.walkTokens,qe=W.parseInline,bt=W,Jt=ve.parse,qr=Ze.lex;t.Lexer=Ze,t.Parser=ve,t.Renderer=ke,t.Slugger=et,t.TextRenderer=st,t.Tokenizer=ce,t.getDefaults=s,t.lexer=qr,t.marked=W,t.options=ne,t.parse=bt,t.parseInline=qe,t.parser=Jt,t.setOptions=ye,t.use=Te,t.walkTokens=Ne,Object.defineProperty(t,"__esModule",{value:!0})})});var iue=k(Mf=>{"use strict";var lFe=Mf&&Mf.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(p){s(p)}}function l(u){try{c(n.throw(u))}catch(p){s(p)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.isBinaryFileSync=Mf.isBinaryFile=void 0;var Lf=require("fs"),E7=require("util"),uFe=E7.promisify(Lf.stat),pFe=E7.promisify(Lf.open),dFe=E7.promisify(Lf.close),JE=512,b7=class{constructor(e,r){this.fileBuffer=e,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(e){let r=new Array;for(let n=0;n<e;n++)r[n]=this.nextByte();return r}};function x7(t){let e=0,r=0;for(;!t.hasError();){let n=t.nextByte();if(r=r|(n&127)<<7*e,!(n&128))break;e++}return r}function fFe(t){switch(x7(t)&7){case 0:return x7(t),!0;case 1:return t.next(8),!0;case 2:let n=x7(t);return t.next(n),!0;case 5:return t.next(4),!0}return!1}function mFe(t,e){let r=new b7(t,e),n=0;for(;;){if(!fFe(r)&&!r.hasError())return!1;if(r.hasError())break;n++}return n>0}function hFe(t,e){return lFe(this,void 0,void 0,function*(){if(rue(t)){let r=yield uFe(t);nue(r);let n=yield pFe(t,"r"),i=Buffer.alloc(JE);return new Promise((o,s)=>{Lf.read(n,i,0,JE,0,(a,l,c)=>{dFe(n),a?s(a):o(DR(i,l))})})}else return e===void 0&&(e=t.length),DR(t,e)})}Mf.isBinaryFile=hFe;function gFe(t,e){if(rue(t)){let r=Lf.statSync(t);nue(r);let n=Lf.openSync(t,"r"),i=Buffer.alloc(JE),o=Lf.readSync(n,i,0,JE,0);return Lf.closeSync(n),DR(i,o)}else return e===void 0&&(e=t.length),DR(t,e)}Mf.isBinaryFileSync=gFe;function DR(t,e){if(e===0)return!1;let r=0,n=Math.min(e,JE);if(e>=3&&t[0]===239&&t[1]===187&&t[2]===191||e>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||e>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||e>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(n>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(e>=2&&t[0]===254&&t[1]===255||e>=2&&t[0]===255&&t[1]===254)return!1;for(let i=0;i<n;i++){if(t[i]===0)return!0;if((t[i]<7||t[i]>14)&&(t[i]<32||t[i]>127)){if(t[i]>193&&t[i]<224&&i+1<n){if(i++,t[i]>127&&t[i]<192)continue}else if(t[i]>223&&t[i]<240&&i+2<n&&(i++,t[i]>127&&t[i]<192&&t[i+1]>127&&t[i+1]<192)){i++;continue}if(r++,i>=32&&r*100/n>10)return!0}}return!!(r*100/n>10||r>1&&mFe(t,n))}function rue(t){return typeof t=="string"}function nue(t){if(!t.isFile())throw new Error("Path provided was not a file!")}});var uue=k((Rxt,lue)=>{var C7=class{constructor(e){this.value=e,this.next=void 0}},I7=class{constructor(){this.clear()}enqueue(e){let r=new C7(e);this._head?(this._tail.next=r,this._tail=r):(this._head=r,this._tail=r),this._size++}dequeue(){let e=this._head;if(e)return this._head=this._head.next,this._size--,e.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let e=this._head;for(;e;)yield e.value,e=e.next}};lue.exports=I7});var w7=k((Dxt,pue)=>{"use strict";var SFe=uue(),CFe=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let e=new SFe,r=0,n=()=>{r--,e.size>0&&e.dequeue()()},i=async(a,l,...c)=>{r++;let u=(async()=>a(...c))();l(u);try{await u}catch{}n()},o=(a,l,...c)=>{e.enqueue(i.bind(null,a,l,...c)),(async()=>(await Promise.resolve(),r<t&&e.size>0&&e.dequeue()()))()},s=(a,...l)=>new Promise(c=>{o(a,c,...l)});return Object.defineProperties(s,{activeCount:{get:()=>r},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),s};pue.exports=CFe});var fU=k((sRt,hpe)=>{var gT=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,$9e=typeof AbortController=="function",uD=$9e?AbortController:class{constructor(){this.signal=new dpe}abort(){this.signal.dispatchEvent("abort")}},W9e=typeof AbortSignal=="function",K9e=typeof uD.AbortSignal=="function",dpe=W9e?AbortSignal:K9e?uD.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},pU=new Set,cU=(t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;pD(r)&&dU(r,`${t} option`,`options.${e}`,ky)},lU=(t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(pD(r)){let{prototype:n}=ky,{get:i}=Object.getOwnPropertyDescriptor(n,t);dU(r,`${t} method`,`cache.${e}()`,i)}},Y9e=(t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(pD(r)){let{prototype:n}=ky,{get:i}=Object.getOwnPropertyDescriptor(n,t);dU(r,`${t} property`,`cache.${e}`,i)}},fpe=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},pD=t=>!pU.has(t),dU=(t,e,r,n)=>{pU.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;fpe(i,"DeprecationWarning",t,n)},ev=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),mpe=t=>ev(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Ny:null:null,Ny=class extends Array{constructor(e){super(e),this.fill(0)}},uU=class{constructor(e){if(e===0)return[];let r=mpe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},ky=class t{constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:p,noUpdateTTL:d,maxSize:f=0,sizeCalculation:m,fetchMethod:h,fetchContext:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_}=e,{length:y,maxAge:b,stale:x}=e instanceof t?{}:e;if(r!==0&&!ev(r))throw new TypeError("max option must be a nonnegative integer");let P=r?mpe(r):Array;if(!P)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=f,this.sizeCalculation=m||y,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=h||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new P(r),this.prev=new P(r),this.head=0,this.tail=0,this.free=new uU(r),this.initialFill=1,this.size=0,typeof c=="function"&&(this.dispose=c),typeof u=="function"?(this.disposeAfter=u,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!v,this.maxSize!==0){if(!ev(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!x,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=ev(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||b||0,this.ttl){if(!ev(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let U="LRU_CACHE_UNBOUNDED";pD(U)&&(pU.add(U),fpe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",U,t))}x&&cU("stale","allowStale"),b&&cU("maxAge","ttl"),y&&cU("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Ny(this.max),this.starts=new Ny(this.max),this.setItemTTL=(n,i,o=gT.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let s=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);s.unref&&s.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?gT.now():0};let e=0,r=()=>{let n=gT.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n};this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Ny(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!ev(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!ev(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return lU("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[r];let a=gT.now()-this.starts[r];s.start=Math.floor(Date.now()-a)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=gT.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(s=this.requireSize(e,r,s,a),this.maxSize&&s>this.maxSize)return this;let c=this.size===0?void 0:this.keyMap.get(e);if(c===void 0)c=this.newIndex(),this.keyList[c]=e,this.valList[c]=r,this.keyMap.set(e,c),this.next[this.tail]=c,this.prev[c]=this.tail,this.tail=c,this.size++,this.addItemSize(c,s),l=!1;else{let u=this.valList[c];r!==u&&(this.isBackgroundFetch(u)?u.__abortController.abort():o||(this.dispose(u,e,"set"),this.disposeAfter&&this.disposed.push([u,e,"set"])),this.removeItemSize(c),this.valList[c]=r,this.addItemSize(c,s)),this.moveToTail(c)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(c,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let s=new uD,a={signal:s.signal,options:n,context:i},l=d=>(s.signal.aborted||this.set(e,d,a.options),d),c=d=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw d},u=d=>d(this.fetchMethod(e,o,a)),p=new Promise(u).then(l,c);return p.__abortController=s,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,a.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:d=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let f={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u},m=this.keyMap.get(e);if(m===void 0){let h=this.backgroundFetch(e,m,f,p);return h.__returned=h}else{let h=this.valList[m];if(this.isBackgroundFetch(h))return r&&h.__staleWhileFetching!==void 0?h.__staleWhileFetching:h.__returned=h;if(!d&&!this.isStale(m))return this.moveToTail(m),n&&this.updateItemAge(m),h;let g=this.backgroundFetch(e,m,f,p);return r&&g.__staleWhileFetching!==void 0?g.__staleWhileFetching:g.__returned=g}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let s=this.valList[o],a=this.isBackgroundFetch(s);return this.isStale(o)?a?r?s.__staleWhileFetching:void 0:(i||this.delete(e),r?s:void 0):a?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),s)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return lU("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return lU("reset","clear"),this.clear}get length(){return Y9e("length","size"),this.size}static get AbortController(){return uD}static get AbortSignal(){return dpe}};hpe.exports=ky});var gU=k((aRt,gpe)=>{"use strict";var vT=class extends Error{constructor(e,r){super(e),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},mU=class extends vT{constructor(e,r,n){super(e,r),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},hU=class extends vT{constructor(e,r="aborted"){super(e,r)}};gpe.exports={FetchBaseError:vT,FetchError:mU,AbortError:hU}});var Np=k((cRt,_pe)=>{"use strict";var{constants:{MAX_LENGTH:Q9e}}=require("buffer"),{pipeline:dD,PassThrough:X9e}=require("stream"),{promisify:J9e}=require("util"),{createGunzip:Z9e,createInflate:e7e,createBrotliDecompress:t7e,constants:{Z_SYNC_FLUSH:vpe}}=require("zlib"),r7e=Va()("helix-fetch:utils"),n7e=J9e(dD),i7e=(t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),o7e=(t,e,r,n)=>{if(!i7e(t,e))return r;let i=o=>{o&&(r7e(`encountered error while decoding stream: ${o}`),n(o))};switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return dD(r,Z9e({flush:vpe,finishFlush:vpe}),i);case"deflate":case"x-deflate":return dD(r,e7e(),i);case"br":return dD(r,t7e(),i);default:return r}},s7e=t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},fD=(t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?a7e(t,e):c7e(t,e);default:return 0}},a7e=(t,e)=>(e.add(t),t.map(r=>e.has(r)?0:fD(r,e)).reduce((r,n)=>r+n,0)),c7e=(t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=fD(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=fD(t[i],e)}),r},l7e=t=>fD(t,new WeakSet),u7e=async t=>{let e=new X9e,r=0,n=[];return e.on("data",i=>{if(r+i.length>Q9e)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await n7e(t,e),Buffer.concat(n,r)};_pe.exports={decodeStream:o7e,isPlainObject:s7e,sizeof:l7e,streamToBuffer:u7e}});var hD=k((lRt,Epe)=>{"use strict";var{PassThrough:ype,Readable:kp}=require("stream"),{types:{isAnyArrayBuffer:bpe}}=require("util"),{FetchError:p7e,FetchBaseError:d7e}=gU(),{streamToBuffer:f7e}=Np(),m7e=Buffer.alloc(0),Xa=Symbol("Body internals"),h7e=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),xpe=async t=>{if(t[Xa].disturbed)throw new TypeError("Already read");if(t[Xa].error)throw new TypeError(`Stream had error: ${t[Xa].error.message}`);t[Xa].disturbed=!0;let{stream:e}=t[Xa];return e===null?m7e:f7e(e)},mD=class{constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=kp.from(e.toString()):e instanceof kp?r=e:Buffer.isBuffer(e)?r=kp.from(e):bpe(e)?r=kp.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=kp.from(e):r=kp.from(String(e)),this[Xa]={stream:r,disturbed:!1,error:null},e instanceof kp&&r.on("error",n=>{let i=n instanceof d7e?n:new p7e(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Xa].error=i})}get body(){return this[Xa].stream}get bodyUsed(){return this[Xa].disturbed}async buffer(){return xpe(this)}async arrayBuffer(){return h7e(await this.buffer())}async text(){return(await xpe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(mD.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var g7e=t=>{if(t[Xa].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Xa],r=e;if(e instanceof kp){r=new ype;let n=new ype;e.pipe(r),e.pipe(n),t[Xa].stream=n}return r},v7e=t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||bpe(t)||t instanceof kp?null:"text/plain; charset=utf-8";Epe.exports={Body:mD,cloneStream:g7e,guessContentType:v7e}});var Oy=k((uRt,Ipe)=>{"use strict";var{validateHeaderName:Tpe,validateHeaderValue:Spe}=require("http"),{isPlainObject:_7e}=Np(),Op=Symbol("Headers internals"),_T=t=>{let e=typeof t!="string"?String(t):t;if(typeof Tpe=="function")Tpe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},Cpe=(t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof Spe=="function")Spe(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},gD=class t{constructor(e={}){if(this[Op]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(_7e(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[Op].map.set(_T(e),Cpe(r,e))}has(e){return this[Op].map.has(_T(e))}get(e){let r=this[Op].map.get(_T(e));return r===void 0?null:r}append(e,r){let n=_T(e),i=Cpe(r,e),o=this[Op].map.get(n);this[Op].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[Op].map.delete(_T(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[Op].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Op].map)}};Object.defineProperties(gD.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Ipe.exports={Headers:gD}});var vU=k((pRt,wpe)=>{"use strict";var{EventEmitter:y7e}=require("events"),qc=Symbol("AbortSignal internals"),Ly=class{constructor(){this[qc]={eventEmitter:new y7e,onabort:null,aborted:!1}}get aborted(){return this[qc].aborted}get onabort(){return this[qc].onabort}set onabort(e){this[qc].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[qc].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[qc].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[qc][n]=="function"&&this[n](r),this[qc].eventEmitter.emit(e,r)}fire(){this[qc].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(Ly.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var _D=class extends Ly{constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[qc].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[qc].timerId)}};Object.defineProperties(_D.prototype,{clear:{enumerable:!0}});var vD=Symbol("AbortController internals"),yD=class{constructor(){this[vD]={signal:new Ly}}get signal(){return this[vD].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[vD].signal.aborted||this[vD].signal.fire()}};Object.defineProperties(yD.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});wpe.exports={AbortController:yD,AbortSignal:Ly,TimeoutSignal:_D}});var yT=k((dRt,Dpe)=>{"use strict";var{randomBytes:x7e}=require("crypto"),{Readable:b7e}=require("stream"),yU=t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),E7e=t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData",Ape=t=>`--${t}--\r
\r
`,Rpe=(t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,yU(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`};async function*T7e(t,e){for(let[r,n]of t)yield Rpe(e,r,n),yU(n)?yield*n.stream():yield n,yield`\r
`;yield Ape(e)}var S7e=(t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(Rpe(e,n,i)),r+=yU(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(Ape(e)),r},_U=class{constructor(e){this.fd=e,this.boundary=x7e(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=S7e(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return b7e.from(T7e(this.fd,this.boundary))}};Dpe.exports={isFormData:E7e,FormDataSerializer:_U}});var Npe=k((fRt,Ppe)=>{"use strict";var{AbortSignal:C7e}=vU(),{Body:I7e,cloneStream:w7e,guessContentType:A7e}=hD(),{Headers:R7e}=Oy(),{isPlainObject:D7e}=Np(),{isFormData:P7e,FormDataSerializer:N7e}=yT(),k7e=20,$f=Symbol("Request internals"),xD=class t extends I7e{constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body||(n&&n.body?w7e(n):null),a=new R7e(r.headers||n&&n.headers||{});if(P7e(s)&&!a.has("content-type")){let p=new N7e(s);s=p.stream(),a.set("content-type",p.contentType()),!a.has("transfer-encoding")&&!a.has("content-length")&&a.set("content-length",p.length())}if(!a.has("content-type"))if(D7e(s))s=JSON.stringify(s),a.set("content-type","application/json");else{let p=A7e(s);p&&a.set("content-type",p)}super(s);let l=n?n.signal:null;if("signal"in r&&(l=r.signal),l&&!(l instanceof C7e))throw new TypeError("signal needs to be an instance of AbortSignal");let c=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(c))throw new TypeError(`'${c}' is not a valid redirect option`);let u=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(u))throw new TypeError(`'${u}' is not a valid cache option`);this[$f]={init:{...r},method:o,redirect:c,cache:u,headers:a,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=k7e:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[$f].method}get url(){return this[$f].parsedURL.toString()}get headers(){return this[$f].headers}get redirect(){return this[$f].redirect}get cache(){return this[$f].cache}get signal(){return this[$f].signal}clone(){return new t(this)}get init(){return this[$f].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(xD.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});Ppe.exports={Request:xD}});var xU=k((mRt,kpe)=>{"use strict";var{Body:O7e,cloneStream:L7e,guessContentType:M7e}=hD(),{Headers:F7e}=Oy(),{isPlainObject:U7e}=Np(),{isFormData:B7e,FormDataSerializer:q7e}=yT(),Hc=Symbol("Response internals"),bD=class t extends O7e{constructor(e=null,r={}){let n=new F7e(r.headers),i=e;if(B7e(i)&&!n.has("content-type")){let o=new q7e(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(U7e(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=M7e(i);o&&n.set("content-type",o)}super(i),this[Hc]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Hc].url||""}get status(){return this[Hc].status}get statusText(){return this[Hc].statusText}get ok(){return this[Hc].status>=200&&this[Hc].status<300}get redirected(){return this[Hc].counter>0}get headers(){return this[Hc].headers}get httpVersion(){return this[Hc].httpVersion}get decoded(){return this[Hc].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(L7e(this),{...this[Hc]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(bD.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});kpe.exports={Response:bD}});var Lpe=k((gRt,Ope)=>{"use strict";var H7e=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),j7e=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),G7e=new Set([500,502,503,504]),V7e={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},z7e={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function tv(t){let e=parseInt(t,10);return isFinite(e)?e:0}function $7e(t){return t?G7e.has(t.status):!0}function bU(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function W7e(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}Ope.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=bU(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=bU(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":W7e(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&j7e.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||H7e.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=bU(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)V7e[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return tv(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return tv(this._rescc["s-maxage"])}if(this._rescc["max-age"])return tv(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+tv(this._rescc["stale-if-error"]),n=e+tv(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+tv(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+tv(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&$7e(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!z7e[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Bpe=k((vRt,Upe)=>{"use strict";var K7e=Lpe(),{Headers:Y7e}=Oy(),Mpe=t=>({url:t.url,method:t.method,headers:t.headers.plain()}),Fpe=t=>({status:t.status,headers:t.headers.plain()}),EU=class{constructor(e,r,n){this.policy=new K7e(Mpe(e),Fpe(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Mpe(e))}responseHeaders(e){return new Y7e(this.policy.responseHeaders(Fpe(e)))}timeToLive(){return this.policy.timeToLive()}};Upe.exports=EU});var jpe=k((_Rt,Hpe)=>{"use strict";var{Readable:Q7e}=require("stream"),{Headers:qpe}=Oy(),{Response:X7e}=xU(),Wf=Symbol("CacheableResponse internals"),J7e=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),TU=class t extends X7e{constructor(e,r){super(e,r);let n=new qpe(r.headers);this[Wf]={headers:n,bufferedBody:e}}get headers(){return this[Wf].headers}set headers(e){if(e instanceof qpe)this[Wf].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return Q7e.from(this[Wf].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Wf].bufferedBody}async arrayBuffer(){return J7e(this[Wf].bufferedBody)}async text(){return this[Wf].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a}=this;return new t(this[Wf].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a})}get[Symbol.toStringTag](){return this.constructor.name}},Z7e=async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:l}=t;return new TU(e,{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:l})};Hpe.exports={cacheableResponse:Z7e}});var ED=k((yRt,Gpe)=>{"use strict";var SU=class extends Error{get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};Gpe.exports={RequestAbortedError:SU}});var Kpe=k((xRt,Wpe)=>{"use strict";var zpe=require("http"),$pe=require("https"),{Readable:eUe}=require("stream"),Lp=Va()("helix-fetch:h1"),{RequestAbortedError:Vpe}=ED(),{decodeStream:tUe}=Np(),rUe=(t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new $pe.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new zpe.Agent(n),r.httpAgent):void 0},nUe=t=>{t.h1={}},iUe=async({h1:t})=>{t.httpAgent&&(Lp("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Lp("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},oUe=(t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:l}=t,c=e?tUe(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:l,readable:c,decoded:!!(e&&c!==t)}},sUe=async(t,e,r)=>{let{request:n}=e.protocol==="https:"?$pe:zpe,i=rUe(t,e.protocol),o={...r,agent:i},{socket:s,body:a}=o;return s&&(delete o.socket,s.assigned||(s.assigned=!0,i?o.agent=new Proxy(i,{get:(l,c)=>c==="createConnection"&&!s.inUse?(u,p)=>{Lp(`agent reusing socket #${s.id} (${s.servername})`),s.inUse=!0,p(null,s)}:l[c]}):o.createConnection=(l,c)=>{Lp(`reusing socket #${s.id} (${s.servername})`),s.inUse=!0,c(null,s)})),new Promise((l,c)=>{Lp(`${o.method} ${e.href}`);let u,{signal:p}=o,d=()=>{p.removeEventListener("abort",d),s&&!s.inUse&&(Lp(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),c(new Vpe),u&&u.abort()};if(p){if(p.aborted){c(new Vpe);return}p.addEventListener("abort",d)}u=n(e,o),u.once("response",f=>{p&&p.removeEventListener("abort",d),s&&!s.inUse&&(Lp(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),l(oUe(f,o.decode,c))}),u.once("error",f=>{p&&p.removeEventListener("abort",d),s&&!s.inUse&&(Lp(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),u.aborted||(Lp(`${o.method} ${e.href} failed with: ${f.message}`),u.abort(),c(f))}),a instanceof eUe?a.pipe(u):(a&&u.write(a),u.end())})};Wpe.exports={request:sUe,setupContext:nUe,resetContext:iUe}});var Jpe=k((bRt,Xpe)=>{"use strict";var{connect:aUe,constants:cUe}=require("http2"),{Readable:lUe}=require("stream"),on=Va()("helix-fetch:h2"),{RequestAbortedError:Ype}=ED(),{decodeStream:uUe}=Np(),{NGHTTP2_CANCEL:xT}=cUe,pUe=5*60*1e3,dUe=5e3,fUe=t=>{t.h2={sessionCache:{}}},mUe=async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),on(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),Qpe=(t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let s=r?uUe(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:s,decoded:!!(r&&s!==e)}},hUe=(t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:s,pushHandler:a,pushedStreamIdleTimeout:l=dUe}}}=t,c=i[":path"],u=`${e}${c}`;on(`received PUSH_PROMISE: ${u}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),s&&s(u,i,()=>{n.close(xT)}),n.on("push",(p,d)=>{on(`received push headers for ${e}${c}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${d}`),n.setTimeout(l,()=>{on(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(xT)}),a&&a(u,i,Qpe(p,n,r))}),n.on("aborted",()=>{on(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{on(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,d,f)=>{on(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${d}, id: ${f}`)})},gUe=async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:s}=e,a=`${i}${o}${s}`,{options:{h2:l={}},h2:{sessionCache:c}}=t,{idleSessionTimeout:u=pUe,pushPromiseHandler:p,pushHandler:d}=l,f={...r},{method:m,headers:h,socket:g,body:v,decode:_}=f;return g&&delete f.socket,h.host&&(h[":authority"]=h.host,delete h.host),new Promise((y,b)=>{let x=c[n];if(!x||x.closed||x.destroyed){let M=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),F={...l,rejectUnauthorized:M};g&&!g.inUse&&(F.createConnection=()=>(on(`reusing socket #${g.id} (${g.servername})`),g.inUse=!0,g)),x=aUe(n,{...F,settings:{enablePush:!!(p||d)}}),x.setMaxListeners(1e3),x.setTimeout(u,()=>{on(`closing session ${n} after ${u} ms of inactivity`),x.close()}),x.once("connect",()=>{on(`session ${n} established`),on(`caching session ${n}`),c[n]=x}),x.on("localSettings",q=>{on(`session ${n} localSettings: ${JSON.stringify(q)}`)}),x.on("remoteSettings",q=>{on(`session ${n} remoteSettings: ${JSON.stringify(q)}`)}),x.once("close",()=>{on(`session ${n} closed`),c[n]===x&&(on(`discarding cached session ${n}`),delete c[n])}),x.once("error",q=>{on(`session ${n} encountered error: ${q}`),c[n]===x&&(on(`discarding cached session ${n}`),delete c[n])}),x.on("frameError",(q,L,S)=>{on(`session ${n} encountered frameError: type: ${q}, code: ${L}, id: ${S}`)}),x.once("goaway",(q,L,S)=>{on(`session ${n} received GOAWAY frame: errorCode: ${q}, lastStreamID: ${L}, opaqueData: ${S?S.toString():void 0}`)}),x.on("stream",(q,L,S)=>{hUe(t,n,_,q,L,S)})}else g&&g.id!==x.socket.id&&!g.inUse&&(on(`discarding redundant socket used for ALPN: #${g.id} ${g.servername}`),g.destroy());on(`${m} ${e.host}${a}`);let P,{signal:U}=f,H=()=>{U.removeEventListener("abort",H),b(new Ype),P&&P.close(xT)};if(U){if(U.aborted){b(new Ype);return}U.addEventListener("abort",H)}let j=M=>{on(`session ${n} encountered error during ${f.method} ${e.href}: ${M}`),b(M)};x.once("error",j),P=x.request({":method":m,":path":a,...h}),P.once("response",M=>{x.off("error",j),U&&U.removeEventListener("abort",H),y(Qpe(M,P,f.decode,b))}),P.once("error",M=>{x.off("error",j),U&&U.removeEventListener("abort",H),P.rstCode!==xT&&(on(`${f.method} ${e.href} failed with: ${M.message}`),P.close(xT),b(M))}),P.once("frameError",(M,F,z)=>{x.off("error",j),on(`encountered frameError during ${f.method} ${e.href}: type: ${M}, code: ${F}, id: ${z}`)}),P.on("push",(M,F)=>{on(`received 'push' event: headers: ${JSON.stringify(M)}, flags: ${F}`)}),v instanceof lUe?v.pipe(P):(v&&P.write(v),P.end())})};Xpe.exports={request:gUe,setupContext:fUe,resetContext:mUe}});var ede=k((ERt,Zpe)=>{"use strict";var{EventEmitter:vUe}=require("events"),_Ue=()=>{let t={},e=new vUe;return e.setMaxListeners(0),{acquire:r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))};e.on(r,i)}),release:(r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))}}};Zpe.exports=_Ue});var tde=k((TRt,yUe)=>{yUe.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var sde=k((SRt,ode)=>{"use strict";var{Readable:xUe}=require("stream"),bUe=require("tls"),{types:{isAnyArrayBuffer:EUe}}=require("util"),TUe=fU(),CU=Va()("helix-fetch:core"),{RequestAbortedError:TD}=ED(),IU=Kpe(),SD=Jpe(),SUe=ede(),{isPlainObject:CUe}=Np(),{isFormData:IUe,FormDataSerializer:wUe}=yT(),{version:AUe}=tde(),wU="h2",AU="h2c",RU="http/1.0",rv="http/1.1",RUe=100,DUe=60*60*1e3,PUe=[wU,rv,RU],NUe=`helix-fetch/${AUe}`,kUe={method:"GET",compress:!0,decode:!0},rde=0,nde=SUe(),ide=(t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,s=()=>{i.removeEventListener("abort",s);let c=new TD;n(c),o&&o.destroy(c)};if(i){if(i.aborted){n(new TD);return}i.addEventListener("abort",s)}let a=+t.port||443,l=c=>{i&&i.removeEventListener("abort",s),c instanceof TD||(CU(`connecting to ${t.hostname}:${a} failed with: ${c.message}`),n(c))};o=bUe.connect(a,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",s),o.off("error",l),rde+=1,o.id=rde,o.secureConnecting=!1,CU(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),OUe=async(t,e)=>{let r=await nde.acquire(t.origin);try{return r||(r=await ide(t,e)),r}finally{nde.release(t.origin,r)}},LUe=async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=rv,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=AU,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:s={},h2:a={}}}=t,l=!(o===!1||s.rejectUnauthorized===!1||a.rejectUnauthorized===!1),c={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(c.ca=t.options.ca);let u=await OUe(e,c);return i=u.alpnProtocol,i||(i=rv),t.alpnCache.set(n,i),{protocol:i,socket:u}},MUe=t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},FUe=async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let s={...r,host:e.host,hostname:e.hostname,port:o},a=await t(s);if(i){let c={...s,ALPNProtocols:n};c.socket=a,c.servername=s.host;let u=await ide(e,c);return{protocol:u.alpnProtocol||rv,socket:u}}return{protocol:a.alpnProtocol||rv,socket:a}},UUe=async(t,e,r)=>{let n=new URL(e),i={...kUe,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=MUe(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(IUe(i.body)){let c=new wUe(i.body);o=c.contentType(),i.body=c.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(c.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":CUe(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):EUe(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof xUe||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:s}=i,{protocol:a,socket:l=null}=t.socketFactory?await FUe(t.socketFactory,n,i,t.alpnProtocols):await LUe(t,n,s);switch(CU(`${n.host} -> ${a}`),a){case wU:try{return await SD.request(t,n,l?{...i,socket:l}:i)}catch(c){let{code:u,message:p}=c;throw u==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),c}case AU:return SD.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case RU:case rv:return IU.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${a}`)}},BUe=async t=>(t.alpnCache.clear(),Promise.all([IU.resetContext(t),SD.resetContext(t)])),qUe=t=>{let{options:{alpnProtocols:e=PUe,alpnCacheTTL:r=DUe,alpnCacheSize:n=RUe,userAgent:i=NUe,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new TUe({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,IU.setupContext(t),SD.setupContext(t)};ode.exports={request:UUe,setupContext:qUe,resetContext:BUe,RequestAbortedError:TD,ALPN_HTTP2:wU,ALPN_HTTP2C:AU,ALPN_HTTP1_1:rv,ALPN_HTTP1_0:RU}});var cde=k((CRt,ade)=>{"use strict";var HUe=Va()("helix-fetch:core"),{request:jUe,setupContext:GUe,resetContext:VUe,RequestAbortedError:zUe,ALPN_HTTP2:$Ue,ALPN_HTTP2C:WUe,ALPN_HTTP1_1:KUe,ALPN_HTTP1_0:YUe}=sde(),DU=class t{constructor(e){this.options={...e||{}},GUe(this)}api(){return{request:async(e,r)=>this.request(e,r),context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),reset:async()=>this.reset(),RequestAbortedError:zUe,ALPN_HTTP2:$Ue,ALPN_HTTP2C:WUe,ALPN_HTTP1_1:KUe,ALPN_HTTP1_0:YUe}}async request(e,r){return jUe(this,e,r)}setCA(e){this.options.ca=e}async reset(){return HUe("resetting context"),VUe(this)}};ade.exports=new DU().api()});var fde=k((IRt,dde)=>{"use strict";var{EventEmitter:QUe}=require("events"),{Readable:bT}=require("stream"),PU=Va()("helix-fetch"),XUe=fU(),{Body:JUe}=hD(),{Headers:LU}=Oy(),{Request:nv}=Npe(),{Response:kU}=xU(),{FetchBaseError:ZUe,FetchError:ET,AbortError:CD}=gU(),{AbortController:eBe,AbortSignal:tBe,TimeoutSignal:rBe}=vU(),nBe=Bpe(),{cacheableResponse:iBe}=jpe(),{sizeof:oBe}=Np(),{isFormData:sBe}=yT(),{context:aBe,RequestAbortedError:cBe}=cde(),lde=["GET","HEAD"],lBe=500,uBe=100*1024*1024,NU="push",ude=async(t,e,r)=>{let{request:n}=t.context,i=e instanceof nv&&typeof r>"u"?e:new nv(e,r),{method:o,body:s,signal:a,compress:l,decode:c,follow:u,redirect:p,init:{body:d}}=i,f;if(a&&a.aborted){let x=new CD("The operation was aborted.");throw i.init.body instanceof bT&&i.init.body.destroy(x),x}try{f=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:d&&!(d instanceof bT)&&!sBe(d)?d:s,compress:l,decode:c,follow:u,redirect:p,signal:a})}catch(x){throw d instanceof bT&&d.destroy(x),x instanceof TypeError?x:x instanceof cBe?new CD("The operation was aborted."):new ET(x.message,"system",x)}let m=()=>{a.removeEventListener("abort",m);let x=new CD("The operation was aborted.");i.init.body instanceof bT&&i.init.body.destroy(x),f.readable.emit("error",x)};a&&a.addEventListener("abort",m);let{statusCode:h,statusText:g,httpVersion:v,headers:_,readable:y,decoded:b}=f;if([301,302,303,307,308].includes(h)){let{location:x}=_,P=x==null?null:new URL(x,i.url);switch(i.redirect){case"manual":break;case"error":throw a&&a.removeEventListener("abort",m),new ET(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(P===null)break;if(i.counter>=i.follow)throw a&&a.removeEventListener("abort",m),new ET(`maximum redirect reached at: ${i.url}`,"max-redirect");let U={headers:new LU(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(h!==303&&i.body&&i.init.body instanceof bT)throw a&&a.removeEventListener("abort",m),new ET("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(h===303||(h===301||h===302)&&i.method==="POST")&&(U.method="GET",U.body=void 0,U.headers.delete("content-length")),a&&a.removeEventListener("abort",m),ude(t,new nv(P,U))}default:}}return a&&(y.once("end",()=>{a.removeEventListener("abort",m)}),y.once("error",()=>{a.removeEventListener("abort",m)})),new kU(y,{url:i.url,status:h,statusText:g,headers:_,httpVersion:v,decoded:b,counter:i.counter})},pde=async(t,e,r)=>{if(t.options.maxCacheSize===0||!lde.includes(e.method))return r;let n=new nBe(e,r,{shared:!1});if(n.storable()){let i=await iBe(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},pBe=async(t,e,r)=>{let n=new nv(e,r);if(t.options.maxCacheSize!==0&&lde.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:s,response:a}=t.cache.get(n.url)||{};if(s&&s.satisfiesWithoutRevalidation(n)){a.headers=new LU(s.responseHeaders(a));let l=a.clone();return l.fromCache=!0,l}}let o=await ude(t,n);return n.cache!=="no-store"?pde(t,n,o):o},dBe=(t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},fBe=t=>new rBe(t),OU=class t{constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:uBe,i=lBe;n===0&&(n=1,i=1);let o=({response:a},l)=>oBe(a);this.cache=new XUe({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new QUe,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:s}=this.options.h2;s&&(this.options.h2.pushPromiseHandler=(a,l,c)=>{let u={...l};Object.keys(u).filter(p=>p.startsWith(":")).forEach(p=>delete u[p]),this.pushPromiseHandler(a,u,c)},this.options.h2.pushHandler=(a,l,c)=>{let u={...l};Object.keys(u).filter(v=>v.startsWith(":")).forEach(v=>delete u[v]);let{statusCode:p,statusText:d,httpVersion:f,headers:m,readable:h,decoded:g}=c;this.pushHandler(a,u,new kU(h,{url:a,status:p,statusText:d,headers:m,httpVersion:f,decoded:g}))}),this.context=aBe(this.options)}api(){return{fetch:async(e,r)=>this.fetch(e,r),Body:JUe,Headers:LU,Request:nv,Response:kU,AbortController:eBe,AbortSignal:tBe,FetchBaseError:ZUe,FetchError:ET,AbortError:CD,context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),noCache:(e={})=>new t({...e,maxCacheSize:0}).api(),h1:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAlive:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),h1NoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAliveNoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),reset:async()=>this.context.reset(),onPush:e=>this.onPush(e),offPush:e=>this.offPush(e),createUrl:dBe,timeoutSignal:fBe,clearCache:()=>this.clearCache(),cacheStats:()=>this.cacheStats(),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return pBe(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(NU,e)}offPush(e){return this.eventEmitter.off(NU,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){PU(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new nv(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(PU(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){PU(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await pde(this,new nv(e,{headers:r}),n);this.eventEmitter.emit(NU,e,i)}};dde.exports=new OU().api()});var hde=k((wRt,mde)=>{"use strict";mde.exports=fde()});var Ut=k((eDt,yde)=>{yde.exports={options:{usePureJavaScript:!1}}});var Ede=k((tDt,bde)=>{var FU={};bde.exports=FU;var xde={};FU.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=hBe(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var l=0,c=t[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%o,c=c/o|0;for(;c>0;)a.push(c%o),c=c/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};FU.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=xde[e];if(!r){r=xde[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var l=0,c=a;l<s.length;++l)c+=s[l]*i,s[l]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var u=0;t[u]===o&&u<t.length-1;++u)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function hBe(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}});var lr=k((rDt,Ide)=>{var Tde=Ut(),Sde=Ede(),Z=Ide.exports=Tde.util=Tde.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Z.nextTick=process.nextTick,typeof setImmediate=="function"?Z.setImmediate=setImmediate:Z.setImmediate=Z.nextTick;return}if(typeof setImmediate=="function"){Z.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Z.nextTick=function(a){return setImmediate(a)};return}if(Z.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(u){u()})}};var s=a,t="forge.setImmediate",e=[];Z.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(c){c()})}).observe(i,{attributes:!0});var o=Z.setImmediate;Z.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Z.nextTick=Z.setImmediate})();Z.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Z.globalScope=function(){return Z.isNodejs?global:typeof self>"u"?window:self}();Z.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Z.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Z.isArrayBufferView=function(t){return t&&Z.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function TT(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}Z.ByteBuffer=UU;function UU(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Z.isArrayBuffer(t)||Z.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof UU||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}Z.ByteStringBuffer=UU;var gBe=4096;Z.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>gBe&&(this.data.substr(0,1),this._constructedStringLength=0)};Z.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Z.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Z.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Z.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Z.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Z.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Z.encodeUtf8(t))};Z.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Z.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Z.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Z.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Z.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Z.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Z.ByteStringBuffer.prototype.putInt=function(t,e){TT(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Z.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Z.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Z.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Z.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Z.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Z.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Z.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Z.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Z.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Z.ByteStringBuffer.prototype.getInt=function(t){TT(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Z.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Z.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Z.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Z.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Z.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Z.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Z.ByteStringBuffer.prototype.copy=function(){var t=Z.createBuffer(this.data);return t.read=this.read,t};Z.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Z.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Z.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Z.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Z.ByteStringBuffer.prototype.toString=function(){return Z.decodeUtf8(this.bytes())};function vBe(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Z.isArrayBuffer(t),n=Z.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}Z.DataBuffer=vBe;Z.DataBuffer.prototype.length=function(){return this.write-this.read};Z.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Z.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Z.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Z.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Z.DataBuffer.prototype.putBytes=function(t,e){if(Z.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Z.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Z.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Z.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Z.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Z.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Z.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Z.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Z.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Z.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Z.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Z.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Z.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Z.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Z.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Z.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Z.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Z.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Z.DataBuffer.prototype.putInt=function(t,e){TT(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Z.DataBuffer.prototype.putSignedInt=function(t,e){return TT(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Z.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Z.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Z.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Z.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Z.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Z.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Z.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Z.DataBuffer.prototype.getInt=function(t){TT(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Z.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Z.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Z.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Z.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Z.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Z.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Z.DataBuffer.prototype.copy=function(){return new Z.DataBuffer(this)};Z.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Z.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Z.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Z.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Z.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Z.binary.raw.encode(e);if(t==="hex")return Z.binary.hex.encode(e);if(t==="base64")return Z.binary.base64.encode(e);if(t==="utf8")return Z.text.utf8.decode(e);if(t==="utf16")return Z.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Z.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Z.encodeUtf8(t)),new Z.ByteBuffer(t)};Z.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Z.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};Z.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Z.bytesToHex=function(t){return Z.createBuffer(t).toHex()};Z.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Qf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Xf=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Cde="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Z.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=Qf.charAt(i>>2),r+=Qf.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Qf.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":Qf.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Z.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=Xf[t.charCodeAt(s++)-43],n=Xf[t.charCodeAt(s++)-43],i=Xf[t.charCodeAt(s++)-43],o=Xf[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Z.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Z.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Z.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Sde.encode,decode:Sde.decode}};Z.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Z.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Z.binary.hex.encode=Z.bytesToHex;Z.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Z.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=Qf.charAt(i>>2),r+=Qf.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Qf.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":Qf.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Z.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,l=0,c=r;l<t.length;)i=Xf[t.charCodeAt(l++)-43],o=Xf[t.charCodeAt(l++)-43],s=Xf[t.charCodeAt(l++)-43],a=Xf[t.charCodeAt(l++)-43],n[c++]=i<<2|o>>4,s!==64&&(n[c++]=(o&15)<<4|s>>2,a!==64&&(n[c++]=(s&3)<<6|a));return e?c-r:n.subarray(0,c)};Z.binary.base58.encode=function(t,e){return Z.binary.baseN.encode(t,Cde,e)};Z.binary.base58.decode=function(t,e){return Z.binary.baseN.decode(t,Cde,e)};Z.text={utf8:{},utf16:{}};Z.text.utf8.encode=function(t,e,r){t=Z.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Z.text.utf8.decode=function(t){return Z.decodeUtf8(String.fromCharCode.apply(null,t))};Z.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};Z.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Z.deflate=function(t,e,r){if(e=Z.decode64(t.deflate(Z.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Z.inflate=function(t,e,r){var n=t.inflate(Z.encode64(e)).rval;return n===null?null:Z.decode64(n)};var BU=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Z.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},qU=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Z.decode64(r))),r},_Be=function(t,e,r,n){var i=qU(t,e);i===null&&(i={}),i[r]=n,BU(t,e,i)},yBe=function(t,e,r){var n=qU(t,e);return n!==null&&(n=r in n?n[r]:null),n},xBe=function(t,e,r){var n=qU(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),BU(t,e,n)}},bBe=function(t,e){BU(t,e,null)},ID=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){s=l}if(o)break}if(!o)throw s;return n};Z.setItem=function(t,e,r,n,i){ID(_Be,arguments,i)};Z.getItem=function(t,e,r,n){return ID(yBe,arguments,n)};Z.removeItem=function(t,e,r,n){ID(xBe,arguments,n)};Z.clearItems=function(t,e,r){ID(bBe,arguments,r)};Z.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Z.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};Z.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")};Z.formatSize=function(t){return t>=1073741824?t=Z.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Z.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Z.formatNumber(t/1024,0)+" KiB":t=Z.formatNumber(t,0)+" bytes",t};Z.bytesFromIP=function(t){return t.indexOf(".")!==-1?Z.bytesFromIPv4(t):t.indexOf(":")!==-1?Z.bytesFromIPv6(t):null};Z.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Z.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Z.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Z.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Z.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Z.bytesToIP=function(t){return t.length===4?Z.bytesToIPv4(t):t.length===16?Z.bytesToIPv6(t):null};Z.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Z.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Z.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Z.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Z&&!t.update)return e(null,Z.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Z.cores=navigator.hardwareConcurrency,e(null,Z.cores);if(typeof Worker>"u")return Z.cores=1,e(null,Z.cores);if(typeof Blob>"u")return Z.cores=2,e(null,Z.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),l=a+4;Date.now()<l;);self.postMessage({st:a,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,l){if(a===0){var c=Math.floor(s.reduce(function(u,p){return u+p},0)/s.length);return Z.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,Z.cores)}i(l,function(u,p){s.push(o(l,p)),n(s,a-1,l)})}function i(s,a){for(var l=[],c=[],u=0;u<s;++u){var p=new Worker(r);p.addEventListener("message",function(d){if(c.push(d.data),c.length===s){for(var f=0;f<s;++f)l[f].terminate();a(null,c)}}),l.push(p)}for(var u=0;u<s;++u)l[u].postMessage(u)}function o(s,a){for(var l=[],c=0;c<s;++c)for(var u=a[c],p=l[c]=[],d=0;d<s;++d)if(c!==d){var f=a[d];(u.st>f.st&&u.st<f.et||f.st>u.st&&f.st<u.et)&&p.push(d)}return l.reduce(function(m,h){return Math.max(m,h.length)},0)}}});var wD=k((nDt,wde)=>{var Fi=Ut();lr();wde.exports=Fi.cipher=Fi.cipher||{};Fi.cipher.algorithms=Fi.cipher.algorithms||{};Fi.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Fi.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Fi.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Fi.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Fi.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Fi.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Fi.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Fi.cipher.algorithms[t]=e};Fi.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Fi.cipher.algorithms?Fi.cipher.algorithms[t]:null};var HU=Fi.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};HU.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Fi.util.createBuffer(),this.output=t.output||Fi.util.createBuffer(),this.mode.start(e)};HU.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};HU.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var GU=k((iDt,Ade)=>{var Ui=Ut();lr();Ui.cipher=Ui.cipher||{};var Vt=Ade.exports=Ui.cipher.modes=Ui.cipher.modes||{};Vt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Vt.ecb.prototype.start=function(t){};Vt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Vt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Vt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Vt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Vt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Vt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=AD(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Vt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Vt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Vt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Vt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Vt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Ui.util.createBuffer(),this._partialBytes=0};Vt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=AD(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Vt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Vt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Vt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ui.util.createBuffer(),this._partialBytes=0};Vt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=AD(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Vt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Vt.ofb.prototype.decrypt=Vt.ofb.prototype.encrypt;Vt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ui.util.createBuffer(),this._partialBytes=0};Vt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=AD(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Vt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}RD(this._inBlock)};Vt.ctr.prototype.decrypt=Vt.ctr.prototype.encrypt;Vt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Ui.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Vt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Ui.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Ui.util.createBuffer(t.additionalData):r=Ui.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Ui.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(jU(n*8)))}this._inBlock=this._j0.slice(0),RD(this._inBlock),this._partialBytes=0,r=Ui.util.createBuffer(r),this._aDataLength=jU(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Vt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),RD(this._inBlock)};Vt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),RD(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Vt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Ui.util.createBuffer();var n=this._aDataLength.concat(jU(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Vt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Vt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Vt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Vt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Vt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],l=s/n|0,c=(n-1-s%n)*e;a[l]=1<<e-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};Vt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],l=i[s];i[o+s]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var c=i[o^n];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i};function AD(t,e){if(typeof t=="string"&&(t=Ui.util.createBuffer(t)),Ui.util.isArray(t)&&t.length>4){var r=t;t=Ui.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Ui.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function RD(t){t[t.length-1]=t[t.length-1]+1&4294967295}function jU(t){return[t/4294967296|0,t&4294967295]}});var Jf=k((oDt,Nde)=>{var zr=Ut();wD();GU();lr();Nde.exports=zr.aes=zr.aes||{};zr.aes.startEncrypting=function(t,e,r,n){var i=DD({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};zr.aes.createEncryptionCipher=function(t,e){return DD({key:t,output:null,decrypt:!1,mode:e})};zr.aes.startDecrypting=function(t,e,r,n){var i=DD({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};zr.aes.createDecryptionCipher=function(t,e){return DD({key:t,output:null,decrypt:!0,mode:e})};zr.aes.Algorithm=function(t,e){$U||Dde();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return zU(r._w,n,i,!1)},decrypt:function(n,i){return zU(r._w,n,i,!0)}}}),r._init=!1};zr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=zr.util.createBuffer(e);else if(zr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=zr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!zr.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!zr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Pde(e,t.decrypt&&!s),this._init=!0}};zr.aes._expandKey=function(t,e){return $U||Dde(),Pde(t,e)};zr.aes._updateBlock=zU;Uy("AES-ECB",zr.cipher.modes.ecb);Uy("AES-CBC",zr.cipher.modes.cbc);Uy("AES-CFB",zr.cipher.modes.cfb);Uy("AES-OFB",zr.cipher.modes.ofb);Uy("AES-CTR",zr.cipher.modes.ctr);Uy("AES-GCM",zr.cipher.modes.gcm);function Uy(t,e){var r=function(){return new zr.aes.Algorithm(t,e)};zr.cipher.registerAlgorithm(t,r)}var $U=!1,Fy=4,ts,VU,Rde,iv,jc;function Dde(){$U=!0,Rde=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;ts=new Array(256),VU=new Array(256),iv=new Array(4),jc=new Array(4);for(var e=0;e<4;++e)iv[e]=new Array(256),jc[e]=new Array(256);for(var r=0,n=0,i,o,s,a,l,c,u,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,ts[r]=a,VU[a]=r,l=t[a],i=t[r],o=t[i],s=t[o],c=l<<24^a<<16^a<<8^(a^l),u=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var p=0;p<4;++p)iv[p][r]=c,jc[p][a]=u,c=c<<24|c>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function Pde(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=Fy*s,l=o;l<a;++l)n=r[l-1],l%o===0?(n=ts[n>>>16&255]<<24^ts[n>>>8&255]<<16^ts[n&255]<<8^ts[n>>>24]^Rde[i]<<24,i++):o>6&&l%o===4&&(n=ts[n>>>24]<<24^ts[n>>>16&255]<<16^ts[n>>>8&255]<<8^ts[n&255]),r[l]=r[l-o]^n;if(e){var c,u=jc[0],p=jc[1],d=jc[2],f=jc[3],m=r.slice(0);a=r.length;for(var l=0,h=a-Fy;l<a;l+=Fy,h-=Fy)if(l===0||l===a-Fy)m[l]=r[h],m[l+1]=r[h+3],m[l+2]=r[h+2],m[l+3]=r[h+1];else for(var g=0;g<Fy;++g)c=r[h+g],m[l+(3&-g)]=u[ts[c>>>24]]^p[ts[c>>>16&255]]^d[ts[c>>>8&255]]^f[ts[c&255]];r=m}return r}function zU(t,e,r,n){var i=t.length/4-1,o,s,a,l,c;n?(o=jc[0],s=jc[1],a=jc[2],l=jc[3],c=VU):(o=iv[0],s=iv[1],a=iv[2],l=iv[3],c=ts);var u,p,d,f,m,h,g;u=e[0]^t[0],p=e[n?3:1]^t[1],d=e[2]^t[2],f=e[n?1:3]^t[3];for(var v=3,_=1;_<i;++_)m=o[u>>>24]^s[p>>>16&255]^a[d>>>8&255]^l[f&255]^t[++v],h=o[p>>>24]^s[d>>>16&255]^a[f>>>8&255]^l[u&255]^t[++v],g=o[d>>>24]^s[f>>>16&255]^a[u>>>8&255]^l[p&255]^t[++v],f=o[f>>>24]^s[u>>>16&255]^a[p>>>8&255]^l[d&255]^t[++v],u=m,p=h,d=g;r[0]=c[u>>>24]<<24^c[p>>>16&255]<<16^c[d>>>8&255]<<8^c[f&255]^t[++v],r[n?3:1]=c[p>>>24]<<24^c[d>>>16&255]<<16^c[f>>>8&255]<<8^c[u&255]^t[++v],r[2]=c[d>>>24]<<24^c[f>>>16&255]<<16^c[u>>>8&255]<<8^c[p&255]^t[++v],r[n?1:3]=c[f>>>24]<<24^c[u>>>16&255]<<16^c[p>>>8&255]<<8^c[d&255]^t[++v]}function DD(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=zr.cipher.createDecipher(r,t.key):n=zr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof zr.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Zf=k((sDt,kde)=>{var ST=Ut();ST.pki=ST.pki||{};var WU=kde.exports=ST.pki.oids=ST.oids=ST.oids||{};function Pe(t,e){WU[t]=e,WU[e]=t}function Sr(t,e){WU[t]=e}Pe("1.2.840.113549.1.1.1","rsaEncryption");Pe("1.2.840.113549.1.1.4","md5WithRSAEncryption");Pe("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Pe("1.2.840.113549.1.1.7","RSAES-OAEP");Pe("1.2.840.113549.1.1.8","mgf1");Pe("1.2.840.113549.1.1.9","pSpecified");Pe("1.2.840.113549.1.1.10","RSASSA-PSS");Pe("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Pe("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Pe("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Pe("1.3.101.112","EdDSA25519");Pe("1.2.840.10040.4.3","dsa-with-sha1");Pe("1.3.14.3.2.7","desCBC");Pe("1.3.14.3.2.26","sha1");Pe("1.3.14.3.2.29","sha1WithRSASignature");Pe("2.16.840.1.101.3.4.2.1","sha256");Pe("2.16.840.1.101.3.4.2.2","sha384");Pe("2.16.840.1.101.3.4.2.3","sha512");Pe("2.16.840.1.101.3.4.2.4","sha224");Pe("2.16.840.1.101.3.4.2.5","sha512-224");Pe("2.16.840.1.101.3.4.2.6","sha512-256");Pe("1.2.840.113549.2.2","md2");Pe("1.2.840.113549.2.5","md5");Pe("1.2.840.113549.1.7.1","data");Pe("1.2.840.113549.1.7.2","signedData");Pe("1.2.840.113549.1.7.3","envelopedData");Pe("1.2.840.113549.1.7.4","signedAndEnvelopedData");Pe("1.2.840.113549.1.7.5","digestedData");Pe("1.2.840.113549.1.7.6","encryptedData");Pe("1.2.840.113549.1.9.1","emailAddress");Pe("1.2.840.113549.1.9.2","unstructuredName");Pe("1.2.840.113549.1.9.3","contentType");Pe("1.2.840.113549.1.9.4","messageDigest");Pe("1.2.840.113549.1.9.5","signingTime");Pe("1.2.840.113549.1.9.6","counterSignature");Pe("1.2.840.113549.1.9.7","challengePassword");Pe("1.2.840.113549.1.9.8","unstructuredAddress");Pe("1.2.840.113549.1.9.14","extensionRequest");Pe("1.2.840.113549.1.9.20","friendlyName");Pe("1.2.840.113549.1.9.21","localKeyId");Pe("1.2.840.113549.1.9.22.1","x509Certificate");Pe("1.2.840.113549.1.12.10.1.1","keyBag");Pe("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Pe("1.2.840.113549.1.12.10.1.3","certBag");Pe("1.2.840.113549.1.12.10.1.4","crlBag");Pe("1.2.840.113549.1.12.10.1.5","secretBag");Pe("1.2.840.113549.1.12.10.1.6","safeContentsBag");Pe("1.2.840.113549.1.5.13","pkcs5PBES2");Pe("1.2.840.113549.1.5.12","pkcs5PBKDF2");Pe("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Pe("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Pe("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Pe("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Pe("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Pe("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Pe("1.2.840.113549.2.7","hmacWithSHA1");Pe("1.2.840.113549.2.8","hmacWithSHA224");Pe("1.2.840.113549.2.9","hmacWithSHA256");Pe("1.2.840.113549.2.10","hmacWithSHA384");Pe("1.2.840.113549.2.11","hmacWithSHA512");Pe("1.2.840.113549.3.7","des-EDE3-CBC");Pe("2.16.840.1.101.3.4.1.2","aes128-CBC");Pe("2.16.840.1.101.3.4.1.22","aes192-CBC");Pe("2.16.840.1.101.3.4.1.42","aes256-CBC");Pe("2.5.4.3","commonName");Pe("2.5.4.4","surname");Pe("2.5.4.5","serialNumber");Pe("2.5.4.6","countryName");Pe("2.5.4.7","localityName");Pe("2.5.4.8","stateOrProvinceName");Pe("2.5.4.9","streetAddress");Pe("2.5.4.10","organizationName");Pe("2.5.4.11","organizationalUnitName");Pe("2.5.4.12","title");Pe("2.5.4.13","description");Pe("2.5.4.15","businessCategory");Pe("2.5.4.17","postalCode");Pe("2.5.4.42","givenName");Pe("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Pe("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Pe("2.16.840.1.113730.1.1","nsCertType");Pe("2.16.840.1.113730.1.13","nsComment");Sr("2.5.29.1","authorityKeyIdentifier");Sr("2.5.29.2","keyAttributes");Sr("2.5.29.3","certificatePolicies");Sr("2.5.29.4","keyUsageRestriction");Sr("2.5.29.5","policyMapping");Sr("2.5.29.6","subtreesConstraint");Sr("2.5.29.7","subjectAltName");Sr("2.5.29.8","issuerAltName");Sr("2.5.29.9","subjectDirectoryAttributes");Sr("2.5.29.10","basicConstraints");Sr("2.5.29.11","nameConstraints");Sr("2.5.29.12","policyConstraints");Sr("2.5.29.13","basicConstraints");Pe("2.5.29.14","subjectKeyIdentifier");Pe("2.5.29.15","keyUsage");Sr("2.5.29.16","privateKeyUsagePeriod");Pe("2.5.29.17","subjectAltName");Pe("2.5.29.18","issuerAltName");Pe("2.5.29.19","basicConstraints");Sr("2.5.29.20","cRLNumber");Sr("2.5.29.21","cRLReason");Sr("2.5.29.22","expirationDate");Sr("2.5.29.23","instructionCode");Sr("2.5.29.24","invalidityDate");Sr("2.5.29.25","cRLDistributionPoints");Sr("2.5.29.26","issuingDistributionPoint");Sr("2.5.29.27","deltaCRLIndicator");Sr("2.5.29.28","issuingDistributionPoint");Sr("2.5.29.29","certificateIssuer");Sr("2.5.29.30","nameConstraints");Pe("2.5.29.31","cRLDistributionPoints");Pe("2.5.29.32","certificatePolicies");Sr("2.5.29.33","policyMappings");Sr("2.5.29.34","policyConstraints");Pe("2.5.29.35","authorityKeyIdentifier");Sr("2.5.29.36","policyConstraints");Pe("2.5.29.37","extKeyUsage");Sr("2.5.29.46","freshestCRL");Sr("2.5.29.54","inhibitAnyPolicy");Pe("1.3.6.1.4.1.11129.2.4.2","timestampList");Pe("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Pe("1.3.6.1.5.5.7.3.1","serverAuth");Pe("1.3.6.1.5.5.7.3.2","clientAuth");Pe("1.3.6.1.5.5.7.3.3","codeSigning");Pe("1.3.6.1.5.5.7.3.4","emailProtection");Pe("1.3.6.1.5.5.7.3.8","timeStamping")});var Gc=k((aDt,Lde)=>{var sn=Ut();lr();Zf();var He=Lde.exports=sn.asn1=sn.asn1||{};He.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};He.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};He.create=function(t,e,r,n,i){if(sn.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||sn.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=He.copy(a)),a};He.copy=function(t,e){var r;if(sn.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(He.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:He.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};He.equals=function(t,e,r){if(sn.util.isArray(t)){if(!sn.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!He.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&He.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};He.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function CT(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var EBe=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;CT(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};He.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=sn.util.createBuffer(t));var r=t.length(),n=PD(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function PD(t,e,r,n){var i;CT(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var l=EBe(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=l,c}l=e}var u,p,d=(o&32)===32;if(d)if(u=[],l===void 0)for(;;){if(CT(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),u.push(PD(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),u.push(PD(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(u===void 0&&s===He.Class.UNIVERSAL&&a===He.Type.BITSTRING&&(p=t.bytes(l)),u===void 0&&n.decodeBitStrings&&s===He.Class.UNIVERSAL&&a===He.Type.BITSTRING&&l>1){var f=t.read,m=e,h=0;if(a===He.Type.BITSTRING&&(CT(t,e,1),h=t.getByte(),e--),h===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},v=PD(t,e,r+1,g),_=i-t.length();e-=_,a==He.Type.BITSTRING&&_++;var y=v.tagClass;_===l&&(y===He.Class.UNIVERSAL||y===He.Class.CONTEXT_SPECIFIC)&&(u=[v])}catch{}u===void 0&&(t.read=f,e=m)}if(u===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(a===He.Type.BMPSTRING)for(u="";l>0;l-=2)CT(t,e,2),u+=String.fromCharCode(t.getInt16()),e-=2;else u=t.getBytes(l),e-=l}var b=p===void 0?null:{bitStringContents:p};return He.create(s,a,d,u,b)}He.toDer=function(t){var e=sn.util.createBuffer(),r=t.tagClass|t.type,n=sn.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=He.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(He.toDer(t.value[o]))}else if(t.type===He.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===He.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};He.oidToDer=function(t){var e=t.split("."),r=sn.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};He.derToOid=function(t){var e;typeof t=="string"&&(t=sn.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};He.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var l=t.charAt(10),c=10;l!=="+"&&l!=="-"&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),c&&(l=t.charAt(c),l==="+"||l==="-")){var u=parseInt(t.substr(c+1,2),10),p=parseInt(t.substr(c+4,2),10),d=u*60+p;d*=6e4,l==="+"?e.setTime(+e-d):e.setTime(+e+d)}return e};He.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),l=0,c=0,u=!1;t.charAt(t.length-1)==="Z"&&(u=!0);var p=t.length-5,d=t.charAt(p);if(d==="+"||d==="-"){var f=parseInt(t.substr(p+1,2),10),m=parseInt(t.substr(p+4,2),10);c=f*60+m,c*=6e4,d==="+"&&(c*=-1),u=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),u?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,l),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(o,s,a,l)),e};He.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};He.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};He.integerToDer=function(t){var e=sn.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};He.derToInteger=function(t){typeof t=="string"&&(t=sn.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};He.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&sn.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=He.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Ode=/[^\\u0000-\\u00ff]/;He.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case He.Class.UNIVERSAL:n+="Universal:";break;case He.Class.APPLICATION:n+="Application:";break;case He.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case He.Class.PRIVATE:n+="Private:";break}if(t.tagClass===He.Class.UNIVERSAL)switch(n+=t.type,t.type){case He.Type.NONE:n+=" (None)";break;case He.Type.BOOLEAN:n+=" (Boolean)";break;case He.Type.INTEGER:n+=" (Integer)";break;case He.Type.BITSTRING:n+=" (Bit string)";break;case He.Type.OCTETSTRING:n+=" (Octet string)";break;case He.Type.NULL:n+=" (Null)";break;case He.Type.OID:n+=" (Object Identifier)";break;case He.Type.ODESC:n+=" (Object Descriptor)";break;case He.Type.EXTERNAL:n+=" (External or Instance of)";break;case He.Type.REAL:n+=" (Real)";break;case He.Type.ENUMERATED:n+=" (Enumerated)";break;case He.Type.EMBEDDED:n+=" (Embedded PDV)";break;case He.Type.UTF8:n+=" (UTF8)";break;case He.Type.ROID:n+=" (Relative Object Identifier)";break;case He.Type.SEQUENCE:n+=" (Sequence)";break;case He.Type.SET:n+=" (Set)";break;case He.Type.PRINTABLESTRING:n+=" (Printable String)";break;case He.Type.IA5String:n+=" (IA5String (ASCII))";break;case He.Type.UTCTIME:n+=" (UTC time)";break;case He.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case He.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=He.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===He.Type.OID){var l=He.derToOid(t.value);n+=l,sn.pki&&sn.pki.oids&&l in sn.pki.oids&&(n+=" ("+sn.pki.oids[l]+") ")}if(t.type===He.Type.INTEGER)try{n+=He.derToInteger(t.value)}catch{n+="0x"+sn.util.bytesToHex(t.value)}else if(t.type===He.Type.BITSTRING){if(t.value.length>1?n+="0x"+sn.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(t.type===He.Type.OCTETSTRING)Ode.test(t.value)||(n+="("+t.value+") "),n+="0x"+sn.util.bytesToHex(t.value);else if(t.type===He.Type.UTF8)try{n+=sn.util.decodeUtf8(t.value)}catch(u){if(u.message==="URI malformed")n+="0x"+sn.util.bytesToHex(t.value)+" (malformed UTF8)";else throw u}else t.type===He.Type.PRINTABLESTRING||t.type===He.Type.IA5String?n+=t.value:Ode.test(t.value)?n+="0x"+sn.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Zl=k((cDt,Mde)=>{var ND=Ut();Mde.exports=ND.md=ND.md||{};ND.md.algorithms=ND.md.algorithms||{}});var By=k((lDt,Fde)=>{var Mp=Ut();Zl();lr();var TBe=Fde.exports=Mp.hmac=Mp.hmac||{};TBe.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Mp.md.algorithms)e=Mp.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=Mp.util.createBuffer(s);else if(Mp.util.isArray(s)){var a=s;s=Mp.util.createBuffer();for(var l=0;l<a.length;++l)s.putByte(a[l])}var c=s.length();c>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=Mp.util.createBuffer(),n=Mp.util.createBuffer(),c=s.length();for(var l=0;l<c;++l){var a=s.at(l);r.putByte(54^a),n.putByte(92^a)}if(c<e.blockLength)for(var a=e.blockLength-c,l=0;l<a;++l)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var OD=k((uDt,Hde)=>{var eu=Ut();Zl();lr();var Bde=Hde.exports=eu.md5=eu.md5||{};eu.md.md5=eu.md.algorithms.md5=Bde;Bde.create=function(){qde||SBe();var t=null,e=eu.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=eu.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=eu.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Ude(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=eu.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(KU.substr(0,n.blockLength-s));for(var a,l=0,c=n.fullMessageLength.length-1;c>=0;--c)a=n.fullMessageLength[c]*8+l,l=a/4294967296>>>0,i.putInt32Le(a>>>0);var u={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};Ude(u,r,i);var p=eu.util.createBuffer();return p.putInt32Le(u.h0),p.putInt32Le(u.h1),p.putInt32Le(u.h2),p.putInt32Le(u.h3),p},n};var KU=null,kD=null,IT=null,qy=null,qde=!1;function SBe(){KU=String.fromCharCode(128),KU+=eu.util.fillString(String.fromCharCode(0),64),kD=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],IT=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],qy=new Array(64);for(var t=0;t<64;++t)qy[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);qde=!0}function Ude(t,e,r){for(var n,i,o,s,a,l,c,u,p=r.length();p>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,u=0;u<16;++u)e[u]=r.getInt32Le(),l=a^o&(s^a),n=i+l+qy[u]+e[u],c=IT[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;u<32;++u)l=s^a&(o^s),n=i+l+qy[u]+e[kD[u]],c=IT[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;u<48;++u)l=o^s^a,n=i+l+qy[u]+e[kD[u]],c=IT[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;u<64;++u)l=s^(o|~a),n=i+l+qy[u]+e[kD[u]],c=IT[u],i=a,a=s,s=o,o+=n<<c|n>>>32-c;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,p-=64}}});var ov=k((pDt,Gde)=>{var MD=Ut();lr();var jde=Gde.exports=MD.pem=MD.pem||{};jde.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=LD(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=LD(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=LD(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=LD(t.headers[i]);return t.procType&&(r+=`\r
`),r+=MD.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};jde.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:MD.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var l=o[2].split(i),c=0;o&&c<l.length;){for(var u=l[c].replace(/\s+$/,""),p=c+1;p<l.length;++p){var d=l[p];if(!/\s/.test(d[0]))break;u+=d,c=p}if(o=u.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),h=0;h<m.length;++h)f.values.push(CBe(m[h]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function LD(t){for(var e=t.name+": ",r=[],n=function(l,c){return" "+c},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function CBe(t){return t.replace(/^\s+/,"")}});var wT=k((dDt,zde)=>{var dn=Ut();wD();GU();lr();zde.exports=dn.des=dn.des||{};dn.des.startEncrypting=function(t,e,r,n){var i=FD({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};dn.des.createEncryptionCipher=function(t,e){return FD({key:t,output:null,decrypt:!1,mode:e})};dn.des.startDecrypting=function(t,e,r,n){var i=FD({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};dn.des.createDecryptionCipher=function(t,e){return FD({key:t,output:null,decrypt:!0,mode:e})};dn.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Vde(r._keys,n,i,!1)},decrypt:function(n,i){return Vde(r._keys,n,i,!0)}}}),r._init=!1};dn.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=dn.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=OBe(e),this._init=!0}};tu("DES-ECB",dn.cipher.modes.ecb);tu("DES-CBC",dn.cipher.modes.cbc);tu("DES-CFB",dn.cipher.modes.cfb);tu("DES-OFB",dn.cipher.modes.ofb);tu("DES-CTR",dn.cipher.modes.ctr);tu("3DES-ECB",dn.cipher.modes.ecb);tu("3DES-CBC",dn.cipher.modes.cbc);tu("3DES-CFB",dn.cipher.modes.cfb);tu("3DES-OFB",dn.cipher.modes.ofb);tu("3DES-CTR",dn.cipher.modes.ctr);function tu(t,e){var r=function(){return new dn.des.Algorithm(t,e)};dn.cipher.registerAlgorithm(t,r)}var IBe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],wBe=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],ABe=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],RBe=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],DBe=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],PBe=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],NBe=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],kBe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function OBe(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,y,b=0;b<h;b++){var x=t.getInt32(),P=t.getInt32();y=(x>>>4^P)&252645135,P^=y,x^=y<<4,y=(P>>>-16^x)&65535,x^=y,P^=y<<-16,y=(x>>>2^P)&858993459,P^=y,x^=y<<2,y=(P>>>-16^x)&65535,x^=y,P^=y<<-16,y=(x>>>1^P)&1431655765,P^=y,x^=y<<1,y=(P>>>8^x)&16711935,x^=y,P^=y<<8,y=(x>>>1^P)&1431655765,P^=y,x^=y<<1,y=x<<8|P>>>20&240,x=P<<24|P<<8&16711680|P>>>8&65280|P>>>24&240,P=y;for(var U=0;U<v.length;++U){v[U]?(x=x<<2|x>>>26,P=P<<2|P>>>26):(x=x<<1|x>>>27,P=P<<1|P>>>27),x&=-15,P&=-15;var H=e[x>>>28]|r[x>>>24&15]|n[x>>>20&15]|i[x>>>16&15]|o[x>>>12&15]|s[x>>>8&15]|a[x>>>4&15],j=l[P>>>28]|c[P>>>24&15]|u[P>>>20&15]|p[P>>>16&15]|d[P>>>12&15]|f[P>>>8&15]|m[P>>>4&15];y=(j>>>16^H)&65535,g[_++]=H^y,g[_++]=j^y<<16}}return g}function Vde(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],l=e[1];s=(a>>>4^l)&252645135,l^=s,a^=s<<4,s=(a>>>16^l)&65535,l^=s,a^=s<<16,s=(l>>>2^a)&858993459,a^=s,l^=s<<2,s=(l>>>8^a)&16711935,a^=s,l^=s<<8,s=(a>>>1^l)&1431655765,l^=s,a^=s<<1,a=a<<1|a>>>31,l=l<<1|l>>>31;for(var c=0;c<i;c+=3){for(var u=o[c+1],p=o[c+2],d=o[c];d!=u;d+=p){var f=l^t[d],m=(l>>>4|l<<28)^t[d+1];s=a,a=l,l=s^(wBe[f>>>24&63]|RBe[f>>>16&63]|PBe[f>>>8&63]|kBe[f&63]|IBe[m>>>24&63]|ABe[m>>>16&63]|DBe[m>>>8&63]|NBe[m&63])}s=a,a=l,l=s}a=a>>>1|a<<31,l=l>>>1|l<<31,s=(a>>>1^l)&1431655765,l^=s,a^=s<<1,s=(l>>>8^a)&16711935,a^=s,l^=s<<8,s=(l>>>2^a)&858993459,a^=s,l^=s<<2,s=(a>>>16^l)&65535,l^=s,a^=s<<16,s=(a>>>4^l)&252645135,l^=s,a^=s<<4,r[0]=a,r[1]=l}function FD(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=dn.cipher.createDecipher(r,t.key):n=dn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof dn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var UD=k((fDt,$de)=>{var rs=Ut();By();Zl();lr();var LBe=rs.pkcs5=rs.pkcs5||{},Fp;rs.util.isNodejs&&!rs.options.usePureJavaScript&&(Fp=require("crypto"));$de.exports=rs.pbkdf2=LBe.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),rs.util.isNodejs&&!rs.options.usePureJavaScript&&Fp.pbkdf2&&(i===null||typeof i!="object")&&(Fp.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?Fp.pbkdf2Sync.length===4?Fp.pbkdf2(t,e,r,n,function(y,b){if(y)return o(y);o(null,b.toString("binary"))}):Fp.pbkdf2(t,e,r,n,i,function(y,b){if(y)return o(y);o(null,b.toString("binary"))}):Fp.pbkdf2Sync.length===4?Fp.pbkdf2Sync(t,e,r,n).toString("binary"):Fp.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in rs.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=rs.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var l=Math.ceil(n/s),c=n-(l-1)*s,u=rs.hmac.create();u.start(i,t);var p="",d,f,m;if(!o){for(var h=1;h<=l;++h){u.start(null,null),u.update(e),u.update(rs.util.int32ToBytes(h)),d=m=u.digest().getBytes();for(var g=2;g<=r;++g)u.start(null,null),u.update(m),f=u.digest().getBytes(),d=rs.util.xorBytes(d,f,s),m=f;p+=h<l?d:d.substr(0,c)}return p}var h=1,g;function v(){if(h>l)return o(null,p);u.start(null,null),u.update(e),u.update(rs.util.int32ToBytes(h)),d=m=u.digest().getBytes(),g=2,_()}function _(){if(g<=r)return u.start(null,null),u.update(m),f=u.digest().getBytes(),d=rs.util.xorBytes(d,f,s),m=f,++g,rs.util.setImmediate(_);p+=h<l?d:d.substr(0,c),++h,v()}v()}});var QU=k((mDt,Xde)=>{var ru=Ut();Zl();lr();var Kde=Xde.exports=ru.sha256=ru.sha256||{};ru.md.sha256=ru.md.algorithms.sha256=Kde;Kde.create=function(){Yde||MBe();var t=null,e=ru.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=ru.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=ru.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Wde(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=ru.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(YU.substr(0,n.blockLength-s));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Wde(p,r,i);var d=ru.util.createBuffer();return d.putInt32(p.h0),d.putInt32(p.h1),d.putInt32(p.h2),d.putInt32(p.h3),d.putInt32(p.h4),d.putInt32(p.h5),d.putInt32(p.h6),d.putInt32(p.h7),d},n};var YU=null,Yde=!1,Qde=null;function MBe(){YU=String.fromCharCode(128),YU+=ru.util.fillString(String.fromCharCode(0),64),Qde=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Yde=!0}function Wde(t,e,r){for(var n,i,o,s,a,l,c,u,p,d,f,m,h,g,v,_=r.length();_>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=e[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(u=t.h0,p=t.h1,d=t.h2,f=t.h3,m=t.h4,h=t.h5,g=t.h6,v=t.h7,c=0;c<64;++c)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=g^m&(h^g),o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),l=u&p|d&(u^p),n=v+s+a+Qde[c]+e[c],i=o+l,v=g,g=h,h=m,m=f+n>>>0,f=d,d=p,p=u,u=n+i>>>0;t.h0=t.h0+u|0,t.h1=t.h1+p|0,t.h2=t.h2+d|0,t.h3=t.h3+f|0,t.h4=t.h4+m|0,t.h5=t.h5+h|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,_-=64}}});var XU=k((hDt,Jde)=>{var nu=Ut();lr();var BD=null;nu.util.isNodejs&&!nu.options.usePureJavaScript&&!process.versions["node-webkit"]&&(BD=require("crypto"));var FBe=Jde.exports=nu.prng=nu.prng||{};FBe.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(c,u){if(!u)return e.generateSync(c);var p=e.plugin.cipher,d=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,h=nu.util.createBuffer();e.key=null,g();function g(v){if(v)return u(v);if(h.length()>=c)return u(null,h.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return nu.util.nextTick(function(){o(g)});var _=p(e.key,e.seed);e.generated+=_.length,h.putBytes(_),e.key=f(p(e.key,d(e.seed))),e.seed=m(p(e.key,e.seed)),nu.util.setImmediate(g)}},e.generateSync=function(c){var u=e.plugin.cipher,p=e.plugin.increment,d=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=nu.util.createBuffer();m.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&s();var h=u(e.key,e.seed);e.generated+=h.length,m.putBytes(h),e.key=d(u(e.key,p(e.seed))),e.seed=f(u(e.key,e.seed))}return m.getBytes(c)};function o(c){if(e.pools[0].messageLength>=32)return a(),c();var u=32-e.pools[0].messageLength<<5;e.seedFile(u,function(p,d){if(p)return c(p);e.collect(d),a(),c()})}function s(){if(e.pools[0].messageLength>=32)return a();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var u=1,p=0;p<32;++p)e.reseeds%u===0&&(c.update(e.pools[p].digest().getBytes()),e.pools[p].start()),u=u<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var d=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(d),e.generated=0}function l(c){var u=null,p=nu.util.globalScope,d=p.crypto||p.msCrypto;d&&d.getRandomValues&&(u=function(x){return d.getRandomValues(x)});var f=nu.util.createBuffer();if(u)for(;f.length()<c;){var m=Math.max(1,Math.min(c-f.length(),65536)/4),h=new Uint32Array(Math.floor(m));try{u(h);for(var g=0;g<h.length;++g)f.putInt32(h[g])}catch(x){if(!(typeof QuotaExceededError<"u"&&x instanceof QuotaExceededError))throw x}}if(f.length()<c)for(var v,_,y,b=Math.floor(Math.random()*65536);f.length()<c;){_=16807*(b&65535),v=16807*(b>>16),_+=(v&32767)<<16,_+=v>>15,_=(_&2147483647)+(_>>31),b=_&4294967295;for(var g=0;g<3;++g)y=b>>>(g<<3),y^=Math.floor(Math.random()*256),f.putByte(y&255)}return f.getBytes(c)}return BD?(e.seedFile=function(c,u){BD.randomBytes(c,function(p,d){if(p)return u(p);u(null,d.toString())})},e.seedFileSync=function(c){return BD.randomBytes(c).toString()}):(e.seedFile=function(c,u){try{u(null,l(c))}catch(p){u(p)}},e.seedFileSync=l),e.collect=function(c){for(var u=c.length,p=0;p<u;++p)e.pools[e.pool].update(c.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,u){for(var p="",d=0;d<u;d+=8)p+=String.fromCharCode(c>>d&255);e.collect(p)},e.registerWorker=function(c){if(c===self)e.seedFile=function(p,d){function f(m){var h=m.data;h.forge&&h.forge.prng&&(self.removeEventListener("message",f),d(h.forge.prng.err,h.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:p}}})};else{var u=function(p){var d=p.data;d.forge&&d.forge.prng&&e.seedFile(d.forge.prng.needed,function(f,m){c.postMessage({forge:{prng:{err:f,bytes:m}}})})};c.addEventListener("message",u)}},e}});var Ja=k((gDt,JU)=>{var Bi=Ut();Jf();QU();XU();lr();(function(){if(Bi.random&&Bi.random.getBytes){JU.exports=Bi.random;return}(function(t){var e={},r=new Array(4),n=Bi.util.createBuffer();e.formatKey=function(p){var d=Bi.util.createBuffer(p);return p=new Array(4),p[0]=d.getInt32(),p[1]=d.getInt32(),p[2]=d.getInt32(),p[3]=d.getInt32(),Bi.aes._expandKey(p,!1)},e.formatSeed=function(p){var d=Bi.util.createBuffer(p);return p=new Array(4),p[0]=d.getInt32(),p[1]=d.getInt32(),p[2]=d.getInt32(),p[3]=d.getInt32(),p},e.cipher=function(p,d){return Bi.aes._updateBlock(p,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Bi.md.sha256;function i(){var p=Bi.prng.create(e);return p.getBytes=function(d,f){return p.generate(d,f)},p.getBytesSync=function(d){return p.generate(d)},p}var o=i(),s=null,a=Bi.util.globalScope,l=a.crypto||a.msCrypto;if(l&&l.getRandomValues&&(s=function(p){return l.getRandomValues(p)}),Bi.options.usePureJavaScript||!Bi.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var u in navigator)try{typeof navigator[u]=="string"&&(c+=navigator[u])}catch{}o.collect(c),c=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Bi.random)Bi.random=o;else for(var u in o)Bi.random[u]=o[u];Bi.random.createInstance=i,JU.exports=Bi.random})(typeof jQuery<"u"?jQuery:null)})()});var eB=k((vDt,tfe)=>{var Ps=Ut();lr();var ZU=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Zde=[1,2,3,5],UBe=function(t,e){return t<<e&65535|(t&65535)>>16-e},BBe=function(t,e){return(t&65535)>>e|t<<16-e&65535};tfe.exports=Ps.rc2=Ps.rc2||{};Ps.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Ps.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(ZU[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,ZU[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,ZU[r.at(a+1)^r.at(a+o)]);return r};var efe=function(t,e,r){var n=!1,i=null,o=null,s=null,a,l,c,u,p=[];for(t=Ps.rc2.expandKey(t,e),c=0;c<64;c++)p.push(t.getInt16Le());r?(a=function(m){for(c=0;c<4;c++)m[c]+=p[u]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),m[c]=UBe(m[c],Zde[c]),u++},l=function(m){for(c=0;c<4;c++)m[c]+=p[m[(c+3)%4]&63]}):(a=function(m){for(c=3;c>=0;c--)m[c]=BBe(m[c],Zde[c]),m[c]-=p[u]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),u--},l=function(m){for(c=3;c>=0;c--)m[c]-=p[m[(c+3)%4]&63]});var d=function(m){var h=[];for(c=0;c<4;c++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),h.push(g&65535)}u=r?0:63;for(var v=0;v<m.length;v++)for(var _=0;_<m[v][0];_++)m[v][1](h);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(h[c]):h[c]^=s.getInt16Le()),o.putInt16Le(h[c])},f=null;return f={start:function(m,h){m&&typeof m=="string"&&(m=Ps.util.createBuffer(m)),n=!1,i=Ps.util.createBuffer(),o=h||new Ps.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)d([[5,a],[1,l],[6,a],[1,l],[5,a]])},finish:function(m){var h=!0;if(r)if(m)h=m(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(h&&(n=!0,f.update()),!r&&(h=i.length()===0,h))if(m)h=m(8,o,!r);else{var v=o.length(),_=o.at(v-1);_>v?h=!1:o.truncate(_)}return h}},f};Ps.rc2.startEncrypting=function(t,e,r){var n=Ps.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Ps.rc2.createEncryptionCipher=function(t,e){return efe(t,e,!0)};Ps.rc2.startDecrypting=function(t,e,r){var n=Ps.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Ps.rc2.createDecryptionCipher=function(t,e){return efe(t,e,!1)}});var RT=k((_Dt,lfe)=>{var tB=Ut();lfe.exports=tB.jsbn=tB.jsbn||{};var Up,qBe=0xdeadbeefcafe,rfe=(qBe&16777215)==15715070;function Se(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}tB.jsbn.BigInteger=Se;function ur(){return new Se(null)}function HBe(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function jBe(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var l=this.data[t]&32767,c=this.data[t++]>>15,u=a*l+c*s;l=s*l+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(u>>>15)+a*c+(i>>>30),r.data[n++]=l&1073741823}return i}function nfe(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var l=this.data[t]&16383,c=this.data[t++]>>14,u=a*l+c*s;l=s*l+((u&16383)<<14)+r.data[n]+i,i=(l>>28)+(u>>14)+a*c,r.data[n++]=l&268435455}return i}typeof navigator>"u"?(Se.prototype.am=nfe,Up=28):rfe&&navigator.appName=="Microsoft Internet Explorer"?(Se.prototype.am=jBe,Up=30):rfe&&navigator.appName!="Netscape"?(Se.prototype.am=HBe,Up=26):(Se.prototype.am=nfe,Up=28);Se.prototype.DB=Up;Se.prototype.DM=(1<<Up)-1;Se.prototype.DV=1<<Up;var rB=52;Se.prototype.FV=Math.pow(2,rB);Se.prototype.F1=rB-Up;Se.prototype.F2=2*Up-rB;var GBe="0123456789abcdefghijklmnopqrstuvwxyz",qD=new Array,Hy,Za;Hy="0".charCodeAt(0);for(Za=0;Za<=9;++Za)qD[Hy++]=Za;Hy="a".charCodeAt(0);for(Za=10;Za<36;++Za)qD[Hy++]=Za;Hy="A".charCodeAt(0);for(Za=10;Za<36;++Za)qD[Hy++]=Za;function ife(t){return GBe.charAt(t)}function ofe(t,e){var r=qD[t.charCodeAt(e)];return r??-1}function VBe(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function zBe(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function em(t){var e=ur();return e.fromInt(t),e}function $Be(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:ofe(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Se.ZERO.subTo(this,this)}function WBe(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function KBe(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=ife(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=ife(n));return i?o:"0"}function YBe(){var t=ur();return Se.ZERO.subTo(this,t),t}function QBe(){return this.s<0?this.negate():this}function XBe(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function HD(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function JBe(){return this.t<=0?0:this.DB*(this.t-1)+HD(this.data[this.t-1]^this.s&this.DM)}function ZBe(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function eqe(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function tqe(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function rqe(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function nqe(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function iqe(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Se.ZERO.subTo(e,e)}function oqe(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function sqe(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=ur());var o=ur(),s=this.s,a=t.s,l=this.DB-HD(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var c=o.t,u=o.data[c-1];if(u!=0){var p=u*(1<<this.F1)+(c>1?o.data[c-2]>>this.F2:0),d=this.FV/p,f=(1<<this.F1)/p,m=1<<this.F2,h=r.t,g=h-c,v=e??ur();for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),Se.ONE.dlShiftTo(c,v),v.subTo(o,o);o.t<c;)o.data[o.t++]=0;for(;--g>=0;){var _=r.data[--h]==u?this.DM:Math.floor(r.data[h]*d+(r.data[h-1]+m)*f);if((r.data[h]+=o.am(0,_,r,g,0,c))<_)for(o.dlShiftTo(g,v),r.subTo(v,r);r.data[h]<--_;)r.subTo(v,r)}e!=null&&(r.drShiftTo(c,e),s!=a&&Se.ZERO.subTo(e,e)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&Se.ZERO.subTo(r,r)}}}function aqe(t){var e=ur();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Se.ZERO)>0&&t.subTo(e,e),e}function sv(t){this.m=t}function cqe(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function lqe(t){return t}function uqe(t){t.divRemTo(this.m,null,t)}function pqe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function dqe(t,e){t.squareTo(e),this.reduce(e)}sv.prototype.convert=cqe;sv.prototype.revert=lqe;sv.prototype.reduce=uqe;sv.prototype.mulTo=pqe;sv.prototype.sqrTo=dqe;function fqe(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function av(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function mqe(t){var e=ur();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Se.ZERO)>0&&this.m.subTo(e,e),e}function hqe(t){var e=ur();return t.copyTo(e),this.reduce(e),e}function gqe(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function vqe(t,e){t.squareTo(e),this.reduce(e)}function _qe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}av.prototype.convert=mqe;av.prototype.revert=hqe;av.prototype.reduce=gqe;av.prototype.mulTo=_qe;av.prototype.sqrTo=vqe;function yqe(){return(this.t>0?this.data[0]&1:this.s)==0}function xqe(t,e){if(t>4294967295||t<1)return Se.ONE;var r=ur(),n=ur(),i=e.convert(this),o=HD(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function bqe(t,e){var r;return t<256||e.isEven()?r=new sv(e):r=new av(e),this.exp(t,r)}Se.prototype.copyTo=VBe;Se.prototype.fromInt=zBe;Se.prototype.fromString=$Be;Se.prototype.clamp=WBe;Se.prototype.dlShiftTo=ZBe;Se.prototype.drShiftTo=eqe;Se.prototype.lShiftTo=tqe;Se.prototype.rShiftTo=rqe;Se.prototype.subTo=nqe;Se.prototype.multiplyTo=iqe;Se.prototype.squareTo=oqe;Se.prototype.divRemTo=sqe;Se.prototype.invDigit=fqe;Se.prototype.isEven=yqe;Se.prototype.exp=xqe;Se.prototype.toString=KBe;Se.prototype.negate=YBe;Se.prototype.abs=QBe;Se.prototype.compareTo=XBe;Se.prototype.bitLength=JBe;Se.prototype.mod=aqe;Se.prototype.modPowInt=bqe;Se.ZERO=em(0);Se.ONE=em(1);function Eqe(){var t=ur();return this.copyTo(t),t}function Tqe(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Sqe(){return this.t==0?this.s:this.data[0]<<24>>24}function Cqe(){return this.t==0?this.s:this.data[0]<<16>>16}function Iqe(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function wqe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Aqe(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=em(r),i=ur(),o=ur(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function Rqe(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var l=ofe(t,a);if(l<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&Se.ZERO.subTo(this,this)}function Dqe(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Se.ONE.shiftLeft(t-1),nB,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Se.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Pqe(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Nqe(t){return this.compareTo(t)==0}function kqe(t){return this.compareTo(t)<0?this:t}function Oqe(t){return this.compareTo(t)>0?this:t}function Lqe(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Mqe(t,e){return t&e}function Fqe(t){var e=ur();return this.bitwiseTo(t,Mqe,e),e}function nB(t,e){return t|e}function Uqe(t){var e=ur();return this.bitwiseTo(t,nB,e),e}function sfe(t,e){return t^e}function Bqe(t){var e=ur();return this.bitwiseTo(t,sfe,e),e}function afe(t,e){return t&~e}function qqe(t){var e=ur();return this.bitwiseTo(t,afe,e),e}function Hqe(){for(var t=ur(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function jqe(t){var e=ur();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Gqe(t){var e=ur();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Vqe(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function zqe(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Vqe(this.data[t]);return this.s<0?this.t*this.DB:-1}function $qe(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function Wqe(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=$qe(this.data[r]^e);return t}function Kqe(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function Yqe(t,e){var r=Se.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Qqe(t){return this.changeBit(t,nB)}function Xqe(t){return this.changeBit(t,afe)}function Jqe(t){return this.changeBit(t,sfe)}function Zqe(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function eHe(t){var e=ur();return this.addTo(t,e),e}function tHe(t){var e=ur();return this.subTo(t,e),e}function rHe(t){var e=ur();return this.multiplyTo(t,e),e}function nHe(t){var e=ur();return this.divRemTo(t,e,null),e}function iHe(t){var e=ur();return this.divRemTo(t,null,e),e}function oHe(t){var e=ur(),r=ur();return this.divRemTo(t,e,r),new Array(e,r)}function sHe(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function aHe(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function AT(){}function cfe(t){return t}function cHe(t,e,r){t.multiplyTo(e,r)}function lHe(t,e){t.squareTo(e)}AT.prototype.convert=cfe;AT.prototype.revert=cfe;AT.prototype.mulTo=cHe;AT.prototype.sqrTo=lHe;function uHe(t){return this.exp(t,new AT)}function pHe(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function dHe(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function jy(t){this.r2=ur(),this.q3=ur(),Se.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function fHe(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ur();return t.copyTo(e),this.reduce(e),e}function mHe(t){return t}function hHe(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function gHe(t,e){t.squareTo(e),this.reduce(e)}function vHe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}jy.prototype.convert=fHe;jy.prototype.revert=mHe;jy.prototype.reduce=hHe;jy.prototype.mulTo=vHe;jy.prototype.sqrTo=gHe;function _He(t,e){var r=t.bitLength(),n,i=em(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new sv(e):e.isEven()?o=new jy(e):o=new av(e);var s=new Array,a=3,l=n-1,c=(1<<n)-1;if(s[1]=o.convert(this),n>1){var u=ur();for(o.sqrTo(s[1],u);a<=c;)s[a]=ur(),o.mulTo(u,s[a-2],s[a]),a+=2}var p=t.t-1,d,f=!0,m=ur(),h;for(r=HD(t.data[p])-1;p>=0;){for(r>=l?d=t.data[p]>>r-l&c:(d=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(d|=t.data[p-1]>>this.DB+r-l)),a=n;!(d&1);)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--p),f)s[d].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(h=i,i=m,m=h),o.mulTo(m,s[d],i)}for(;p>=0&&!(t.data[p]&1<<r);)o.sqrTo(i,m),h=i,i=m,m=h,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}function yHe(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function xHe(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function bHe(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Se.ZERO;for(var r=t.clone(),n=this.clone(),i=em(1),o=em(0),s=em(0),a=em(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(Se.ONE)!=0)return Se.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Vc=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],EHe=(1<<26)/Vc[Vc.length-1];function THe(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Vc[Vc.length-1]){for(e=0;e<Vc.length;++e)if(r.data[0]==Vc[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Vc.length;){for(var n=Vc[e],i=e+1;i<Vc.length&&n<EHe;)n*=Vc[i++];for(n=r.modInt(n);e<i;)if(n%Vc[e++]==0)return!1}return r.millerRabin(t)}function SHe(t){var e=this.subtract(Se.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=CHe(),o,s=0;s<t;++s){do o=new Se(this.bitLength(),i);while(o.compareTo(Se.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(Se.ONE)!=0&&a.compareTo(e)!=0){for(var l=1;l++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(Se.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function CHe(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}Se.prototype.chunkSize=Iqe;Se.prototype.toRadix=Aqe;Se.prototype.fromRadix=Rqe;Se.prototype.fromNumber=Dqe;Se.prototype.bitwiseTo=Lqe;Se.prototype.changeBit=Yqe;Se.prototype.addTo=Zqe;Se.prototype.dMultiply=sHe;Se.prototype.dAddOffset=aHe;Se.prototype.multiplyLowerTo=pHe;Se.prototype.multiplyUpperTo=dHe;Se.prototype.modInt=xHe;Se.prototype.millerRabin=SHe;Se.prototype.clone=Eqe;Se.prototype.intValue=Tqe;Se.prototype.byteValue=Sqe;Se.prototype.shortValue=Cqe;Se.prototype.signum=wqe;Se.prototype.toByteArray=Pqe;Se.prototype.equals=Nqe;Se.prototype.min=kqe;Se.prototype.max=Oqe;Se.prototype.and=Fqe;Se.prototype.or=Uqe;Se.prototype.xor=Bqe;Se.prototype.andNot=qqe;Se.prototype.not=Hqe;Se.prototype.shiftLeft=jqe;Se.prototype.shiftRight=Gqe;Se.prototype.getLowestSetBit=zqe;Se.prototype.bitCount=Wqe;Se.prototype.testBit=Kqe;Se.prototype.setBit=Qqe;Se.prototype.clearBit=Xqe;Se.prototype.flipBit=Jqe;Se.prototype.add=eHe;Se.prototype.subtract=tHe;Se.prototype.multiply=rHe;Se.prototype.divide=nHe;Se.prototype.remainder=iHe;Se.prototype.divideAndRemainder=oHe;Se.prototype.modPow=_He;Se.prototype.modInverse=bHe;Se.prototype.pow=uHe;Se.prototype.gcd=yHe;Se.prototype.isProbablePrime=THe});var Gy=k((yDt,ffe)=>{var iu=Ut();Zl();lr();var pfe=ffe.exports=iu.sha1=iu.sha1||{};iu.md.sha1=iu.md.algorithms.sha1=pfe;pfe.create=function(){dfe||IHe();var t=null,e=iu.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=iu.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=iu.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),ufe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=iu.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(iB.substr(0,n.blockLength-s));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};ufe(p,r,i);var d=iu.util.createBuffer();return d.putInt32(p.h0),d.putInt32(p.h1),d.putInt32(p.h2),d.putInt32(p.h3),d.putInt32(p.h4),d},n};var iB=null,dfe=!1;function IHe(){iB=String.fromCharCode(128),iB+=iu.util.fillString(String.fromCharCode(0),64),dfe=!0}function ufe(t,e,r){for(var n,i,o,s,a,l,c,u,p=r.length();p>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,c=o^s^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,c=o^s^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,c=o&s|a&(o^s),n=(i<<5|i>>>27)+c+l+2400959708+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,c=o^s^a,n=(i<<5|i>>>27)+c+l+3395469782+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+l|0,p-=64}}});var oB=k((xDt,hfe)=>{var ou=Ut();lr();Ja();Gy();var mfe=hfe.exports=ou.pkcs1=ou.pkcs1||{};mfe.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=ou.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),l=a-2*o.digestLength-2;if(e.length>l){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=l,c}n||(n=""),o.update(n,"raw");for(var u=o.digest(),p="",d=l-e.length,f=0;f<d;f++)p+="\0";var m=u.getBytes()+p+""+e;if(!i)i=ou.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=o.digestLength,c}var h=jD(i,a-o.digestLength-1,s),g=ou.util.xorBytes(m,h,m.length),v=jD(g,o.digestLength,s),_=ou.util.xorBytes(i,v,i.length);return"\0"+_+g};mfe.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=ou.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),l=e.charAt(0),c=e.substring(1,i.digestLength+1),u=e.substring(1+i.digestLength),p=jD(u,i.digestLength,o),d=ou.util.xorBytes(c,p,c.length),f=jD(d,s-i.digestLength-1,o),m=ou.util.xorBytes(u,f,u.length),h=m.substring(0,i.digestLength),g=l!=="\0",v=0;v<i.digestLength;++v)g|=a.charAt(v)!==h.charAt(v);for(var _=1,y=i.digestLength,b=i.digestLength;b<m.length;b++){var x=m.charCodeAt(b),P=x&1^1,U=_?65534:0;g|=x&U,_=_&P,y+=_}if(g||m.charCodeAt(y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(y+1)};function jD(t,e,r){r||(r=ou.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var aB=k((bDt,sB)=>{var tm=Ut();lr();RT();Ja();(function(){if(tm.prime){sB.exports=tm.prime;return}var t=sB.exports=tm.prime=tm.prime||{},e=tm.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(p,d){return p|d};t.generateProbablePrime=function(p,d,f){typeof d=="function"&&(f=d,d={}),d=d||{};var m=d.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var h=d.prng||tm.random,g={nextBytes:function(v){for(var _=h.getBytesSync(v.length),y=0;y<v.length;++y)v[y]=_.charCodeAt(y)}};if(m.name==="PRIMEINC")return o(p,g,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(p,d,f,m){return"workers"in f?l(p,d,f,m):s(p,d,f,m)}function s(p,d,f,m){var h=c(p,d),g=0,v=u(h.bitLength());"millerRabinTests"in f&&(v=f.millerRabinTests);var _=10;"maxBlockTime"in f&&(_=f.maxBlockTime),a(h,p,d,g,v,_,m)}function a(p,d,f,m,h,g,v){var _=+new Date;do{if(p.bitLength()>d&&(p=c(d,f)),p.isProbablePrime(h))return v(null,p);p.dAddOffset(r[m++%8],0)}while(g<0||+new Date-_<g);tm.util.setImmediate(function(){a(p,d,f,m,h,g,v)})}function l(p,d,f,m){if(typeof Worker>"u")return s(p,d,f,m);var h=c(p,d),g=f.workers,v=f.workLoad||100,_=v*30/8,y=f.workerScript||"forge/prime.worker.js";if(g===-1)return tm.util.estimateCores(function(x,P){x&&(P=2),g=P-1,b()});b();function b(){g=Math.max(1,g);for(var x=[],P=0;P<g;++P)x[P]=new Worker(y);for(var U=g,P=0;P<g;++P)x[P].addEventListener("message",j);var H=!1;function j(M){if(!H){--U;var F=M.data;if(F.found){for(var z=0;z<x.length;++z)x[z].terminate();return H=!0,m(null,new e(F.prime,16))}h.bitLength()>p&&(h=c(p,d));var q=h.toString(16);M.target.postMessage({hex:q,workLoad:v}),h.dAddOffset(_,0)}}}}function c(p,d){var f=new e(p,d),m=p-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function u(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}})()});var DT=k((EDt,Efe)=>{var lt=Ut();Gc();RT();Zf();oB();aB();Ja();lr();typeof nr>"u"&&(nr=lt.jsbn.BigInteger);var nr,cB=lt.util.isNodejs?require("crypto"):null,ue=lt.asn1,ec=lt.util;lt.pki=lt.pki||{};Efe.exports=lt.pki.rsa=lt.rsa=lt.rsa||{};var Dt=lt.pki,wHe=[6,4,2,4,2,4,6,2],AHe={name:"PrivateKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},RHe={name:"RSAPrivateKey",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},DHe={name:"RSAPublicKey",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ue.Class.UNIVERSAL,type:ue.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},PHe=lt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ue.Class.UNIVERSAL,type:ue.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},NHe={name:"DigestInfo",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ue.Class.UNIVERSAL,type:ue.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ue.Class.UNIVERSAL,type:ue.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ue.Class.UNIVERSAL,type:ue.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},kHe=function(t){var e;if(t.algorithm in Dt.oids)e=Dt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ue.oidToDer(e).getBytes(),i=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[]),o=ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[]);o.value.push(ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,n)),o.value.push(ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,""));var s=ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),ue.toDer(i).getBytes()},xfe=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(nr.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(nr.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new nr(lt.util.bytesToHex(lt.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(nr.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};Dt.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=bfe(t,e,r)):(i=lt.util.createBuffer(),i.putBytes(t));for(var s=new nr(i.toHex(),16),a=xfe(s,e,n),l=a.toString(16),c=lt.util.createBuffer(),u=o-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(lt.util.hexToBytes(l)),c.getBytes()};Dt.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new nr(lt.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=xfe(s,e,r),l=a.toString(16),c=lt.util.createBuffer(),u=i-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(lt.util.hexToBytes(l)),n!==!1?GD(c.getBytes(),e,r):c.getBytes()};Dt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||lt.random,i={nextBytes:function(a){for(var l=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=l.charCodeAt(c)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new nr(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};Dt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new nr(null);r.fromInt(30);for(var n=0,i=function(p,d){return p|d},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,c=l-1;t.pqState===0?(t.num=new nr(l,t.rng),t.num.testBit(c)||t.num.bitwiseTo(nr.ONE.shiftLeft(c),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(LHe(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(wHe[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(nr.ONE).gcd(t.e).compareTo(nr.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(nr.ONE),t.q1=t.q.subtract(nr.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(nr.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var u=t.e.modInverse(t.phi);t.keys={privateKey:Dt.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:Dt.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};Dt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!lt.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(gfe("generateKeyPair"))return cB.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,l,c){if(a)return n(a);n(null,{privateKey:Dt.privateKeyFromPem(c),publicKey:Dt.publicKeyFromPem(l)})});if(vfe("generateKey")&&vfe("exportKey"))return ec.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:yfe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return ec.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var l=Dt.privateKeyFromAsn1(ue.fromDer(lt.util.createBuffer(a)));n(null,{privateKey:l,publicKey:Dt.setRsaPublicKey(l.n,l.e)})}});if(_fe("generateKey")&&_fe("exportKey")){var i=ec.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:yfe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var l=a.target.result,c=ec.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(u){var p=u.target.result,d=Dt.privateKeyFromAsn1(ue.fromDer(lt.util.createBuffer(p)));n(null,{privateKey:d,publicKey:Dt.setRsaPublicKey(d.n,d.e)})},c.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(gfe("generateKeyPairSync")){var o=cB.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Dt.privateKeyFromPem(o.privateKey),publicKey:Dt.publicKeyFromPem(o.publicKey)}}}var s=Dt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Dt.rsa.stepKeyPairGenerationState(s,0),s.keys;OHe(s,r,n)};Dt.setRsaPublicKey=Dt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,l,c){return bfe(a,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,l){return lt.pkcs1.encode_rsa_oaep(l,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return Dt.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(l,c){c=GD(c,r,!0);var u=ue.fromDer(c,{parseAllBytes:s._parseAllDigestBytes}),p={},d=[];if(!ue.validate(u,NHe,p,d)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=d,f}var m=ue.derToOid(p.algorithmIdentifier);if(!(m===lt.oids.md2||m===lt.oids.md5||m===lt.oids.sha1||m===lt.oids.sha224||m===lt.oids.sha256||m===lt.oids.sha384||m===lt.oids.sha512||m===lt.oids["sha512-224"]||m===lt.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===lt.oids.md2||m===lt.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(l,c){return c=GD(c,r,!0),l===c}});var a=Dt.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};Dt.setRsaPrivateKey=Dt.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return l.decrypt=function(c,u,p){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var d=Dt.rsa.decrypt(c,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:GD};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(f,m){return lt.pkcs1.decode_rsa_oaep(m,f,p)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(d,l,!1)},l.sign=function(c,u){var p=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:kHe},p=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return c}},p=1);var d=u.encode(c,l.n.bitLength());return Dt.rsa.encrypt(d,l,p)},l};Dt.wrapRsaPrivateKey=function(t){return ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,ue.integerToDer(0).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Dt.oids.rsaEncryption).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,"")]),ue.create(ue.Class.UNIVERSAL,ue.Type.OCTETSTRING,!1,ue.toDer(t).getBytes())])};Dt.privateKeyFromAsn1=function(t){var e={},r=[];if(ue.validate(t,AHe,e,r)&&(t=ue.fromDer(lt.util.createBuffer(e.privateKey))),e={},r=[],!ue.validate(t,RHe,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,l,c,u,p;return i=lt.util.createBuffer(e.privateKeyModulus).toHex(),o=lt.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=lt.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=lt.util.createBuffer(e.privateKeyPrime1).toHex(),l=lt.util.createBuffer(e.privateKeyPrime2).toHex(),c=lt.util.createBuffer(e.privateKeyExponent1).toHex(),u=lt.util.createBuffer(e.privateKeyExponent2).toHex(),p=lt.util.createBuffer(e.privateKeyCoefficient).toHex(),Dt.setRsaPrivateKey(new nr(i,16),new nr(o,16),new nr(s,16),new nr(a,16),new nr(l,16),new nr(c,16),new nr(u,16),new nr(p,16))};Dt.privateKeyToAsn1=Dt.privateKeyToRSAPrivateKey=function(t){return ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,ue.integerToDer(0).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.n)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.e)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.d)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.p)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.q)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.dP)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.dQ)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.qInv))])};Dt.publicKeyFromAsn1=function(t){var e={},r=[];if(ue.validate(t,PHe,e,r)){var n=ue.derToOid(e.publicKeyOid);if(n!==Dt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ue.validate(t,DHe,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=lt.util.createBuffer(e.publicKeyModulus).toHex(),s=lt.util.createBuffer(e.publicKeyExponent).toHex();return Dt.setRsaPublicKey(new nr(o,16),new nr(s,16))};Dt.publicKeyToAsn1=Dt.publicKeyToSubjectPublicKeyInfo=function(t){return ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.OID,!1,ue.oidToDer(Dt.oids.rsaEncryption).getBytes()),ue.create(ue.Class.UNIVERSAL,ue.Type.NULL,!1,"")]),ue.create(ue.Class.UNIVERSAL,ue.Type.BITSTRING,!1,[Dt.publicKeyToRSAPublicKey(t)])])};Dt.publicKeyToRSAPublicKey=function(t){return ue.create(ue.Class.UNIVERSAL,ue.Type.SEQUENCE,!0,[ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.n)),ue.create(ue.Class.UNIVERSAL,ue.Type.INTEGER,!1,su(t.e))])};function bfe(t,e,r){var n=lt.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var l=0;l<s;++l)n.putByte(a)}else for(;s>0;){for(var c=0,u=lt.random.getBytes(s),l=0;l<s;++l)a=u.charCodeAt(l),a===0?++c:n.putByte(a);s=c}return n.putByte(0),n.putBytes(t),n}function GD(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=lt.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(a===0){l=i-3-n;for(var c=0;c<l;++c)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(a===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var u=o.getByte();if(u!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function OHe(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,l){if(a)return r(a);if(t.p=l,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,l){lt.prime.generateProbablePrime(a,n,l)}function s(a,l){if(a)return r(a);if(t.q=l,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(nr.ONE).gcd(t.e).compareTo(nr.ONE)!==0){t.p=null,i();return}if(t.q.subtract(nr.ONE).gcd(t.e).compareTo(nr.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(nr.ONE),t.q1=t.q.subtract(nr.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(nr.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var u=t.e.modInverse(t.phi);t.keys={privateKey:Dt.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:Dt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function su(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=lt.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function LHe(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function gfe(t){return lt.util.isNodejs&&typeof cB[t]=="function"}function vfe(t){return typeof ec.globalScope<"u"&&typeof ec.globalScope.crypto=="object"&&typeof ec.globalScope.crypto.subtle=="object"&&typeof ec.globalScope.crypto.subtle[t]=="function"}function _fe(t){return typeof ec.globalScope<"u"&&typeof ec.globalScope.msCrypto=="object"&&typeof ec.globalScope.msCrypto.subtle=="object"&&typeof ec.globalScope.msCrypto.subtle[t]=="function"}function yfe(t){for(var e=lt.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var lB=k((TDt,wfe)=>{var Ke=Ut();Jf();Gc();wT();Zl();Zf();UD();ov();Ja();eB();DT();lr();typeof Tfe>"u"&&(Tfe=Ke.jsbn.BigInteger);var Tfe,_e=Ke.asn1,Ot=Ke.pki=Ke.pki||{};wfe.exports=Ot.pbe=Ke.pbe=Ke.pbe||{};var cv=Ot.oids,MHe={name:"EncryptedPrivateKeyInfo",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},FHe={name:"PBES2Algorithms",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},UHe={name:"pkcs-12PbeParams",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ot.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ke.random.getBytesSync(r.saltSize),i=r.count,o=_e.integerToDer(i),s,a,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,u,p;switch(r.algorithm){case"aes128":s=16,c=16,u=cv["aes128-CBC"],p=Ke.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,u=cv["aes192-CBC"],p=Ke.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,u=cv["aes256-CBC"],p=Ke.aes.createEncryptionCipher;break;case"des":s=8,c=8,u=cv.desCBC,p=Ke.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var f="hmacWith"+r.prfAlgorithm.toUpperCase(),m=Ife(f),h=Ke.pkcs5.pbkdf2(e,n,i,s,m),g=Ke.random.getBytesSync(c),v=p(h);v.start(g),v.update(_e.toDer(t)),v.finish(),l=v.output.getBytes();var _=BHe(n,o,s,f);a=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(cv.pkcs5PBES2).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(cv.pkcs5PBKDF2).getBytes()),_]),_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(u).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var y=new Ke.util.ByteBuffer(n),h=Ot.pbe.generatePkcs12Key(e,y,1,i,s),g=Ot.pbe.generatePkcs12Key(e,y,2,i,s),v=Ke.des.createEncryptionCipher(h);v.start(g),v.update(_e.toDer(t)),v.finish(),l=v.output.getBytes(),a=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(cv["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,n),_e.create(_e.Class.UNIVERSAL,_e.Type.INTEGER,!1,o.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var b=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[a,_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,l)]);return b};Ot.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!_e.validate(t,MHe,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=_e.derToOid(n.encryptionOid),a=Ot.pbe.getCipher(s,n.encryptionParams,e),l=Ke.util.createBuffer(n.encryptedData);return a.update(l),a.finish()&&(r=_e.fromDer(a.output)),r};Ot.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:_e.toDer(t).getBytes()};return Ke.pem.encode(r,{maxline:e})};Ot.encryptedPrivateKeyFromPem=function(t){var e=Ke.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return _e.fromDer(e.body)};Ot.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Ot.wrapRsaPrivateKey(Ot.privateKeyToAsn1(t));return n=Ot.encryptPrivateKeyInfo(n,e,r),Ot.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=Ke.random.getBytesSync(16),a=Ke.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=Ke.random.getBytesSync(16),a=Ke.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=Ke.random.getBytesSync(16),a=Ke.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=Ke.random.getBytesSync(8),a=Ke.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=Ke.random.getBytesSync(8),a=Ke.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var c=Ke.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(c);u.start(o),u.update(_e.toDer(Ot.privateKeyToAsn1(t))),u.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ke.util.bytesToHex(o).toUpperCase()},body:u.output.getBytes()};return Ke.pem.encode(p)};Ot.decryptRsaPrivateKey=function(t,e){var r=null,n=Ke.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=Ke.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=Ke.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=Ke.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=Ke.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=Ke.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(p){return Ke.rc2.createDecryptionCipher(p,40)};break;case"RC2-64-CBC":o=8,s=function(p){return Ke.rc2.createDecryptionCipher(p,64)};break;case"RC2-128-CBC":o=16,s=function(p){return Ke.rc2.createDecryptionCipher(p,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Ke.util.hexToBytes(n.dekInfo.parameters),l=Ke.pbe.opensslDeriveBytes(e,a.substr(0,8),o),c=s(l);if(c.start(a),c.update(Ke.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ot.decryptPrivateKeyInfo(_e.fromDer(r),e):r=_e.fromDer(r),r!==null&&(r=Ot.privateKeyFromAsn1(r)),r};Ot.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in Ke.md))throw new Error('"sha1" hash algorithm unavailable.');o=Ke.md.sha1.create()}var l=o.digestLength,c=o.blockLength,u=new Ke.util.ByteBuffer,p=new Ke.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)p.putInt16(t.charCodeAt(a));p.putInt16(0)}var d=p.length(),f=e.length(),m=new Ke.util.ByteBuffer;m.fillWithByte(r,c);var h=c*Math.ceil(f/c),g=new Ke.util.ByteBuffer;for(a=0;a<h;a++)g.putByte(e.at(a%f));var v=c*Math.ceil(d/c),_=new Ke.util.ByteBuffer;for(a=0;a<v;a++)_.putByte(p.at(a%d));var y=g;y.putBuffer(_);for(var b=Math.ceil(i/l),x=1;x<=b;x++){var P=new Ke.util.ByteBuffer;P.putBytes(m.bytes()),P.putBytes(y.bytes());for(var U=0;U<n;U++)o.start(),o.update(P.getBytes()),P=o.digest();var H=new Ke.util.ByteBuffer;for(a=0;a<c;a++)H.putByte(P.at(a%l));var j=Math.ceil(f/c)+Math.ceil(d/c),M=new Ke.util.ByteBuffer;for(s=0;s<j;s++){var F=new Ke.util.ByteBuffer(y.getBytes(c)),z=511;for(a=H.length()-1;a>=0;a--)z=z>>8,z+=H.at(a)+F.at(a),F.setAt(a,z&255);M.putBuffer(F)}y=M,u.putBuffer(P)}return u.truncate(u.length()-i),u};Ot.pbe.getCipher=function(t,e,r){switch(t){case Ot.oids.pkcs5PBES2:return Ot.pbe.getCipherForPBES2(t,e,r);case Ot.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ot.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ot.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ot.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!_e.validate(e,FHe,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=_e.derToOid(n.kdfOid),t!==Ot.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=_e.derToOid(n.encOid),t!==Ot.oids["aes128-CBC"]&&t!==Ot.oids["aes192-CBC"]&&t!==Ot.oids["aes256-CBC"]&&t!==Ot.oids["des-EDE3-CBC"]&&t!==Ot.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=Ke.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var l,c;switch(Ot.oids[t]){case"aes128-CBC":l=16,c=Ke.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,c=Ke.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,c=Ke.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,c=Ke.des.createDecryptionCipher;break;case"desCBC":l=8,c=Ke.des.createDecryptionCipher;break}var u=Cfe(n.prfOid),p=Ke.pkcs5.pbkdf2(r,s,a,l,u),d=n.encIv,f=c(p);return f.start(d),f};Ot.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!_e.validate(e,UHe,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=Ke.util.createBuffer(n.salt),a=Ke.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var l,c,u;switch(t){case Ot.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,c=8,u=Ke.des.startDecrypting;break;case Ot.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,c=8,u=function(h,g){var v=Ke.rc2.createDecryptionCipher(h,40);return v.start(g,null),v};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=Cfe(n.prfOid),d=Ot.pbe.generatePkcs12Key(r,s,1,a,l,p);p.start();var f=Ot.pbe.generatePkcs12Key(r,s,2,a,c,p);return u(d,f)};Ot.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Ke.md))throw new Error('"md5" hash algorithm unavailable.');n=Ke.md.md5.create()}e===null&&(e="");for(var i=[Sfe(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(Sfe(n,i[s-1]+t+e));return i.join("").substr(0,r)};function Sfe(t,e){return t.start().update(e).digest().getBytes()}function Cfe(t){var e;if(!t)e="hmacWithSHA1";else if(e=Ot.oids[_e.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Ife(e)}function Ife(t){var e=Ke.md;switch(t){case"hmacWithSHA224":e=Ke.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function BHe(t,e,r,n){var i=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,t),_e.create(_e.Class.UNIVERSAL,_e.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(_e.create(_e.Class.UNIVERSAL,_e.Type.INTEGER,!1,Ke.util.hexToBytes(r.toString(16))),_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Ot.oids[n]).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.NULL,!1,"")])),i}});var uB=k((SDt,Dfe)=>{var Vy=Ut();Gc();lr();var Ve=Vy.asn1,zy=Dfe.exports=Vy.pkcs7asn1=Vy.pkcs7asn1||{};Vy.pkcs7=Vy.pkcs7||{};Vy.pkcs7.asn1=zy;var Afe={name:"ContentInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};zy.contentInfoValidator=Afe;var Rfe={name:"EncryptedContentInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};zy.envelopedDataValidator={name:"EnvelopedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Rfe)};zy.encryptedDataValidator={name:"EncryptedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"}].concat(Rfe)};var qHe={name:"SignerInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};zy.signedDataValidator={name:"SignedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Afe,{name:"SignedData.Certificates",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,capture:"signerInfos",optional:!0,value:[qHe]}]};zy.recipientInfoValidator={name:"RecipientInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var pB=k((CDt,Pfe)=>{var lv=Ut();lr();lv.mgf=lv.mgf||{};var HHe=Pfe.exports=lv.mgf.mgf1=lv.mgf1=lv.mgf1||{};HHe.create=function(t){var e={generate:function(r,n){for(var i=new lv.util.ByteBuffer,o=Math.ceil(n/t.digestLength),s=0;s<o;s++){var a=new lv.util.ByteBuffer;a.putInt32(s),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var kfe=k((IDt,Nfe)=>{var VD=Ut();pB();Nfe.exports=VD.mgf=VD.mgf||{};VD.mgf.mgf1=VD.mgf1});var zD=k((wDt,Ofe)=>{var uv=Ut();Ja();lr();var jHe=Ofe.exports=uv.pss=uv.pss||{};jHe.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=uv.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||uv.random,a={};return a.encode=function(l,c){var u,p=c-1,d=Math.ceil(p/8),f=l.digest().getBytes();if(d<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var h=new uv.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(m),e.start(),e.update(h.getBytes());var g=e.digest().getBytes(),v=new uv.util.ByteBuffer;v.fillWithByte(0,d-o-n-2),v.putByte(1),v.putBytes(m);var _=v.getBytes(),y=d-n-1,b=r.generate(g,y),x="";for(u=0;u<y;u++)x+=String.fromCharCode(_.charCodeAt(u)^b.charCodeAt(u));var P=65280>>8*d-p&255;return x=String.fromCharCode(x.charCodeAt(0)&~P)+x.substr(1),x+g+String.fromCharCode(188)},a.verify=function(l,c,u){var p,d=u-1,f=Math.ceil(d/8);if(c=c.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,h=c.substr(0,m),g=c.substr(m,n),v=65280>>8*f-d&255;if(h.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var _=r.generate(g,m),y="";for(p=0;p<m;p++)y+=String.fromCharCode(h.charCodeAt(p)^_.charCodeAt(p));y=String.fromCharCode(y.charCodeAt(0)&~v)+y.substr(1);var b=f-n-o-2;for(p=0;p<b;p++)if(y.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(y.charCodeAt(b)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var x=y.substr(-o),P=new uv.util.ByteBuffer;P.fillWithByte(0,8),P.putBytes(l),P.putBytes(x),e.start(),e.update(P.getBytes());var U=e.digest().getBytes();return g===U},a}});var KD=k((ADt,Bfe)=>{var ut=Ut();Jf();Gc();wT();Zl();kfe();Zf();ov();zD();DT();lr();var w=ut.asn1,Fe=Bfe.exports=ut.pki=ut.pki||{},ir=Fe.oids,Mn={};Mn.CN=ir.commonName;Mn.commonName="CN";Mn.C=ir.countryName;Mn.countryName="C";Mn.L=ir.localityName;Mn.localityName="L";Mn.ST=ir.stateOrProvinceName;Mn.stateOrProvinceName="ST";Mn.O=ir.organizationName;Mn.organizationName="O";Mn.OU=ir.organizationalUnitName;Mn.organizationalUnitName="OU";Mn.E=ir.emailAddress;Mn.emailAddress="E";var Mfe=ut.pki.rsa.publicKeyValidator,GHe={name:"Certificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Mfe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},VHe={name:"rsapss",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},zHe={name:"CertificationRequestInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Mfe,{name:"CertificationRequestInfo.attributes",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:w.Class.UNIVERSAL,type:w.Type.SET,constructed:!0}]}]}]},$He={name:"CertificationRequest",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[zHe,{name:"CertificationRequest.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Fe.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,s=0;s<t.value.length;++s){n=t.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=w.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in ir&&(o.name=ir[o.type],o.name in Mn&&(o.shortName=Mn[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Fe.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=w.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in ir&&(a.name=ir[a.type],a.name in Mn&&(a.shortName=Mn[a.name])),a.type===ir.extensionRequest){a.extensions=[];for(var l=0;l<a.value.length;++l)a.extensions.push(Fe.certificateExtensionFromAsn1(a.value[l]))}e.push(a)}return e};function rm(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var $D=function(t,e,r){var n={};if(t!==ir["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:ir.sha1},mgf:{algorithmOid:ir.mgf1,hash:{algorithmOid:ir.sha1}},saltLength:20});var i={},o=[];if(!w.validate(e,VHe,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=w.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=w.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=w.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},WD=function(t){switch(ir[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return ut.md.sha1.create();case"md5WithRSAEncryption":return ut.md.md5.create();case"sha256WithRSAEncryption":return ut.md.sha256.create();case"sha384WithRSAEncryption":return ut.md.sha384.create();case"sha512WithRSAEncryption":return ut.md.sha512.create();case"RSASSA-PSS":return ut.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},Ffe=function(t){var e=t.certificate,r;switch(e.signatureOid){case ir.sha1WithRSAEncryption:case ir.sha1WithRSASignature:break;case ir["RSASSA-PSS"]:var n,i;if(n=ir[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||ut.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=ir[e.signatureParameters.mgf.algorithmOid],i===void 0||ut.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=ut.mgf[i].create(ut.md[n].create()),n=ir[e.signatureParameters.hash.algorithmOid],n===void 0||ut.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=ut.pss.create(ut.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Fe.certificateFromPem=function(t,e,r){var n=ut.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=w.fromDer(n.body,r);return Fe.certificateFromAsn1(o,e)};Fe.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:w.toDer(Fe.certificateToAsn1(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Fe.publicKeyFromPem=function(t){var e=ut.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=w.fromDer(e.body);return Fe.publicKeyFromAsn1(n)};Fe.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:w.toDer(Fe.publicKeyToAsn1(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Fe.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:w.toDer(Fe.publicKeyToRSAPublicKey(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Fe.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||ut.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=w.toDer(Fe.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=w.toDer(Fe.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Fe.certificationRequestFromPem=function(t,e,r){var n=ut.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=w.fromDer(n.body,r);return Fe.certificationRequestFromAsn1(o,e)};Fe.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:w.toDer(Fe.certificationRequestToAsn1(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Fe.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return rm(t.issuer,e)},t.issuer.addField=function(e){tc([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return rm(t.subject,e)},t.subject.addField=function(e){tc([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){tc(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){tc(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Ufe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||ut.md.sha1.create();var n=ir[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Fe.getTBSCertificate(t);var o=w.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=WD({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||Fe.getTBSCertificate(e),l=w.toDer(a);s.update(l.getBytes())}return s!==null&&(r=Ffe({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,s,a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Fe.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=ir.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return ut.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Fe.certificateFromAsn1=function(t,e){var r={},n=[];if(!w.validate(t,GHe,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=w.derToOid(r.publicKeyOid);if(o!==Fe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Fe.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=ut.util.createBuffer(r.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=ut.asn1.derToOid(r.certSignatureOid),s.signatureParameters=$D(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=ut.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=$D(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(w.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(w.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(w.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(w.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=l[0],s.validity.notAfter=l[1],s.tbsCertificate=r.tbsCertificate,e){s.md=WD({signatureOid:s.signatureOid,type:"certificate"});var c=w.toDer(s.tbsCertificate);s.md.update(c.getBytes())}var u=ut.md.sha1.create(),p=w.toDer(r.certIssuer);u.update(p.getBytes()),s.issuer.getField=function(m){return rm(s.issuer,m)},s.issuer.addField=function(m){tc([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Fe.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=u.digest().toHex();var d=ut.md.sha1.create(),f=w.toDer(r.certSubject);return d.update(f.getBytes()),s.subject.getField=function(m){return rm(s.subject,m)},s.subject.addField=function(m){tc([m]),s.subject.attributes.push(m)},s.subject.attributes=Fe.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=d.digest().toHex(),r.certExtensions?s.extensions=Fe.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Fe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Fe.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Fe.certificateExtensionFromAsn1(n.value[i]));return e};Fe.certificateExtensionFromAsn1=function(t){var e={};if(e.id=w.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===w.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in ir){if(e.name=ir[e.id],e.name==="keyUsage"){var r=w.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=w.fromDer(e.value);r.value.length>0&&r.value[0].type===w.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===w.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=w.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=w.fromDer(e.value),s=0;s<r.value.length;++s){var a=w.derToOid(r.value[s].value);a in ir?e[ir[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=w.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=w.fromDer(e.value),c=0;c<r.value.length;++c){l=r.value[c];var u={type:l.type,value:l.value};switch(e.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=ut.util.bytesToIP(l.value);break;case 8:u.oid=w.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=w.fromDer(e.value);e.subjectKeyIdentifier=ut.util.bytesToHex(r.value)}}return e};Fe.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!w.validate(t,$He,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=w.derToOid(r.publicKeyOid);if(o!==Fe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Fe.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=ut.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=$D(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=ut.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=$D(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=WD({signatureOid:s.signatureOid,type:"certification request"});var a=w.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var l=ut.md.sha1.create();return s.subject.getField=function(c){return rm(s.subject,c)},s.subject.addField=function(c){tc([c]),s.subject.attributes.push(c)},s.subject.attributes=Fe.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),s.subject.hash=l.digest().toHex(),s.publicKey=Fe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(c){return rm(s,c)},s.addAttribute=function(c){tc([c]),s.attributes.push(c)},s.attributes=Fe.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Fe.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return rm(t.subject,e)},t.subject.addField=function(e){tc([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return rm(t,e)},t.addAttribute=function(e){tc([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){tc(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){tc(e),t.attributes=e},t.sign=function(e,r){t.md=r||ut.md.sha1.create();var n=ir[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Fe.getCertificationRequestInfo(t);var o=w.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=WD({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Fe.getCertificationRequestInfo(t),i=w.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Ffe({certificate:t,md:r,signature:t.signature})),e},t};function $y(t){for(var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var s=r.value,a=w.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===w.Type.UTF8&&(s=ut.util.encodeUtf8(s))),n=w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(r.type).getBytes()),w.create(w.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function tc(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Fe.oids?e.name=Fe.oids[e.type]:e.shortName&&e.shortName in Mn&&(e.name=Fe.oids[Mn[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Fe.oids)e.type=Fe.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Mn&&(e.shortName=Mn[e.name]),e.type===ir.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=w.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Fe.certificateExtensionToAsn1(Ufe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function Ufe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Fe.oids&&(t.name=Fe.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Fe.oids)t.id=Fe.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),t.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var l in t)t[l]===!0&&(l in ir?a.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(ir[l]).getBytes())):l.indexOf(".")!==-1&&a.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var c,u=0;u<t.altNames.length;++u){c=t.altNames[u];var s=c.value;if(c.type===7&&c.ip){if(s=ut.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else c.type===8&&(c.oid?s=w.oidToDer(w.oidToDer(c.oid)):s=w.oidToDer(s));t.value.value.push(w.create(w.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=w.create(w.Class.UNIVERSAL,w.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var d=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!1,d))}if(t.authorityCertIssuer){var f=[w.create(w.Class.CONTEXT_SPECIFIC,4,!0,[$y(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,f))}if(t.serialNumber){var m=ut.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var a=t.value.value,h=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),g=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]),c,u=0;u<t.altNames.length;++u){c=t.altNames[u];var s=c.value;if(c.type===7&&c.ip){if(s=ut.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else c.type===8&&(c.oid?s=w.oidToDer(w.oidToDer(c.oid)):s=w.oidToDer(s));g.value.push(w.create(w.Class.CONTEXT_SPECIFIC,c.type,!1,s))}h.value.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[g])),a.push(h)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function dB(t,e){switch(t){case ir["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.mgf.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.mgf.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.saltLength).getBytes())])),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,r);default:return w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")}}function WHe(t){var e=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,s=w.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===w.Type.UTF8&&(o=ut.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var l=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(i.type).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,s,a,o)])]);e.value.push(l)}return e}var KHe=new Date("1950-01-01T00:00:00Z"),YHe=new Date("2050-01-01T00:00:00Z");function Lfe(t){return t>=KHe&&t<YHe?w.create(w.Class.UNIVERSAL,w.Type.UTCTIME,!1,w.dateToUtcTime(t)):w.create(w.Class.UNIVERSAL,w.Type.GENERALIZEDTIME,!1,w.dateToGeneralizedTime(t))}Fe.getTBSCertificate=function(t){var e=Lfe(t.validity.notBefore),r=Lfe(t.validity.notAfter),n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.version).getBytes())]),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,ut.util.hexToBytes(t.serialNumber)),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.siginfo.algorithmOid).getBytes()),dB(t.siginfo.algorithmOid,t.siginfo.parameters)]),$y(t.issuer),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,r]),$y(t.subject),Fe.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Fe.certificateExtensionsToAsn1(t.extensions)),n};Fe.getCertificationRequestInfo=function(t){var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.version).getBytes()),$y(t.subject),Fe.publicKeyToAsn1(t.publicKey),WHe(t)]);return e};Fe.distinguishedNameToAsn1=function(t){return $y(t)};Fe.certificateToAsn1=function(t){var e=t.tbsCertificate||Fe.getTBSCertificate(t);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.signatureOid).getBytes()),dB(t.signatureOid,t.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Fe.certificateExtensionsToAsn1=function(t){var e=w.create(w.Class.CONTEXT_SPECIFIC,3,!0,[]),r=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Fe.certificateExtensionToAsn1(t[n]));return e};Fe.certificateExtensionToAsn1=function(t){var e=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);e.value.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.id).getBytes())),t.critical&&e.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=w.toDer(r).getBytes()),e.value.push(w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,r)),e};Fe.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Fe.getCertificationRequestInfo(t);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[e,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.signatureOid).getBytes()),dB(t.signatureOid,t.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Fe.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var a=r(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=ut.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];ut.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=ut.pki.certificateFromPem(s));var a=r(s.subject);if(!a)return!1;ut.util.isArray(a)||(a=[a]);for(var l=w.toDer(Fe.certificateToAsn1(s)).getBytes(),c=0;c<a.length;++c){var u=w.toDer(Fe.certificateToAsn1(a[c])).getBytes();if(l===u)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var l=e.certs[a];if(!ut.util.isArray(l))s.push(l);else for(var c=0;c<l.length;++c)s.push(l[c])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=ut.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var l=r(s.subject);if(!ut.util.isArray(l))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var c=w.toDer(Fe.certificateToAsn1(s)).getBytes(),u=0;u<l.length;++u){var p=w.toDer(Fe.certificateToAsn1(l[u])).getBytes();c===p&&(a=l[u],l.splice(u,1))}return l.length===0&&delete e.certs[s.subject.hash],a};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=ut.md.sha1.create();s.attributes=Fe.RDNAttributesAsArray($y(s),a),s.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Fe.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Fe.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var l=e.shift(),c=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Fe.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),s===null){if(c=e[0]||t.getIssuer(l),c===null&&l.isIssuer(l)&&(u=!0,c=l),c){var p=c;ut.util.isArray(p)||(p=[p]);for(var d=!1;!d&&p.length>0;){c=p.shift();try{d=c.verify(l)}catch{}}d||(s={message:"Certificate signature is invalid.",error:Fe.certificateError.bad_certificate})}s===null&&(!c||u)&&!t.hasCertificate(l)&&(s={message:"Certificate is not trusted.",error:Fe.certificateError.unknown_ca})}if(s===null&&c&&!l.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:Fe.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<l.extensions.length;++m){var h=l.extensions[m];h.critical&&!(h.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:Fe.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!c||u))){var g=l.getExtension("basicConstraints"),v=l.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||g===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Fe.certificateError.bad_certificate}),s===null&&g!==null&&!g.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Fe.certificateError.bad_certificate}),s===null&&v!==null&&"pathLenConstraint"in g){var _=a-1;_>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Fe.certificateError.bad_certificate})}}var y=s===null?!0:s.error,b=r.verify?r.verify(y,a,n):y;if(b===!0)s=null;else throw y===!0&&(s={message:"The application rejected the certificate.",error:Fe.certificateError.bad_certificate}),(b||b===0)&&(typeof b=="object"&&!ut.util.isArray(b)?(b.message&&(s.message=b.message),b.error&&(s.error=b.error)):typeof b=="string"&&(s.error=b)),s;o=!1,++a}while(e.length>0);return!0}});var mB=k((RDt,Hfe)=>{var $r=Ut();Gc();By();Zf();uB();lB();Ja();DT();Gy();lr();KD();var $=$r.asn1,zt=$r.pki,NT=Hfe.exports=$r.pkcs12=$r.pkcs12||{},qfe={name:"ContentInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:$.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},QHe={name:"PFX",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"version"},qfe,{name:"PFX.macData",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},XHe={name:"SafeBag",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:$.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:$.Class.UNIVERSAL,type:$.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},JHe={name:"Attribute",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:$.Class.UNIVERSAL,type:$.Type.SET,constructed:!0,capture:"values"}]},ZHe={name:"CertBag",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:$.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:$.Class.UNIVERSAL,type:$.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function PT(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];if(!(n!==void 0&&a.type!==n)){if(e===null){i.push(a);continue}a.attributes[e]!==void 0&&a.attributes[e].indexOf(r)>=0&&i.push(a)}}return i}NT.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!$.validate(t,QHe,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v={},_;return"localKeyId"in g?_=g.localKeyId:"localKeyIdHex"in g&&(_=$r.util.hexToBytes(g.localKeyIdHex)),_===void 0&&!("friendlyName"in g)&&"bagType"in g&&(v[g.bagType]=PT(s.safeContents,null,null,g.bagType)),_!==void 0&&(v.localKeyId=PT(s.safeContents,"localKeyId",_,g.bagType)),"friendlyName"in g&&(v.friendlyName=PT(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),v},getBagsByFriendlyName:function(g,v){return PT(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return PT(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if($.derToOid(n.contentType)!==zt.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=$.derToOid(n.contentType),o}var a=n.content.value[0];if(a.tagClass!==$.Class.UNIVERSAL||a.type!==$.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=fB(a),n.mac){var l=null,c=0,u=$.derToOid(n.macAlgorithm);switch(u){case zt.oids.sha1:l=$r.md.sha1.create(),c=20;break;case zt.oids.sha256:l=$r.md.sha256.create(),c=32;break;case zt.oids.sha384:l=$r.md.sha384.create(),c=48;break;case zt.oids.sha512:l=$r.md.sha512.create(),c=64;break;case zt.oids.md5:l=$r.md.md5.create(),c=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var p=new $r.util.ByteBuffer(n.macSalt),d="macIterations"in n?parseInt($r.util.bytesToHex(n.macIterations),16):1,f=NT.generateKey(r,p,3,d,c,l),m=$r.hmac.create();m.start(l,f),m.update(a.value);var h=m.getMac();if(h.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return eje(s,a.value,e,r),s};function fB(t){if(t.composed||t.constructed){for(var e=$r.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function eje(t,e,r,n){if(e=$.fromDer(e,r),e.tagClass!==$.Class.UNIVERSAL||e.type!==$.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],s={},a=[];if(!$.validate(o,qfe,s,a)){var l=new Error("Cannot read ContentInfo.");throw l.errors=a,l}var c={encrypted:!1},u=null,p=s.content.value[0];switch($.derToOid(s.contentType)){case zt.oids.data:if(p.tagClass!==$.Class.UNIVERSAL||p.type!==$.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=fB(p).value;break;case zt.oids.encryptedData:u=tje(p,n),c.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=$.derToOid(s.contentType),l}c.safeBags=rje(u,r,n),t.safeContents.push(c)}}function tje(t,e){var r={},n=[];if(!$.validate(t,$r.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=$.derToOid(r.contentType);if(o!==zt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=$.derToOid(r.encAlgorithm);var s=zt.pbe.getCipher(o,r.encParameter,e),a=fB(r.encryptedContentAsn1),l=$r.util.createBuffer(a.value);if(s.update(l),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function rje(t,e,r){if(!e&&t.length===0)return[];if(t=$.fromDer(t,e),t.tagClass!==$.Class.UNIVERSAL||t.type!==$.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],s={},a=[];if(!$.validate(o,XHe,s,a)){var l=new Error("Cannot read SafeBag.");throw l.errors=a,l}var c={type:$.derToOid(s.bagId),attributes:nje(s.bagAttributes)};n.push(c);var u,p,d=s.bagValue.value[0];switch(c.type){case zt.oids.pkcs8ShroudedKeyBag:if(d=zt.decryptPrivateKeyInfo(d,r),d===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case zt.oids.keyBag:try{c.key=zt.privateKeyFromAsn1(d)}catch{c.key=null,c.asn1=d}continue;case zt.oids.certBag:u=ZHe,p=function(){if($.derToOid(s.certId)!==zt.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=$.derToOid(s.certId),m}var h=$.fromDer(s.cert,e);try{c.cert=zt.certificateFromAsn1(h,!0)}catch{c.cert=null,c.asn1=h}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=c.type,l}if(u!==void 0&&!$.validate(d,u,s,a)){var l=new Error("Cannot read PKCS#12 "+u.name);throw l.errors=a,l}p()}return n}function nje(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!$.validate(t[r],JHe,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var s=$.derToOid(n.oid);if(zt.oids[s]!==void 0){e[zt.oids[s]]=[];for(var a=0;a<n.values.length;++a)e[zt.oids[s]].push(n.values[a].value)}}return e}NT.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=$r.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=$r.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=zt.certificateFromPem(s));var a=$r.md.sha1.create();a.update($.toDer(zt.certificateToAsn1(s)).getBytes()),i=a.digest().getBytes()}else i=$r.random.getBytes(20);var l=[];i!==null&&l.push($.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.localKeyId).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push($.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.friendlyName).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,[$.create($.Class.UNIVERSAL,$.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=$.create($.Class.UNIVERSAL,$.Type.SET,!0,l));var c=[],u=[];e!==null&&($r.util.isArray(e)?u=e:u=[e]);for(var p=[],d=0;d<u.length;++d){e=u[d],typeof e=="string"&&(e=zt.certificateFromPem(e));var f=d===0?o:void 0,m=zt.certificateToAsn1(e),h=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.certBag).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.x509Certificate).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(m).getBytes())])])]),f]);p.push(h)}if(p.length>0){var g=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,p),v=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.data).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(g).getBytes())])]);c.push(v)}var _=null;if(t!==null){var y=zt.wrapRsaPrivateKey(zt.privateKeyToAsn1(t));r===null?_=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.keyBag).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[y]),o]):_=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.pkcs8ShroudedKeyBag).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[zt.encryptPrivateKeyInfo(y,r,n)]),o]);var b=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[_]),x=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.data).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(b).getBytes())])]);c.push(x)}var P=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,c),U;if(n.useMac){var a=$r.md.sha1.create(),H=new $r.util.ByteBuffer($r.random.getBytes(n.saltSize)),j=n.count,t=NT.generateKey(r,H,3,j,20),M=$r.hmac.create();M.start(a,t),M.update($.toDer(P).getBytes());var F=M.getMac();U=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.sha1).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,F.getBytes())]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,H.getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(j).getBytes())])}return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(3).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(zt.oids.data).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(P).getBytes())])]),U])};NT.generateKey=$r.pbe.generatePkcs12Key});var gB=k((DDt,jfe)=>{var nm=Ut();Gc();Zf();lB();ov();UD();mB();zD();DT();lr();KD();var hB=nm.asn1,Wy=jfe.exports=nm.pki=nm.pki||{};Wy.pemToDer=function(t){var e=nm.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return nm.util.createBuffer(e.body)};Wy.privateKeyFromPem=function(t){var e=nm.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=hB.fromDer(e.body);return Wy.privateKeyFromAsn1(n)};Wy.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:hB.toDer(Wy.privateKeyToAsn1(t)).getBytes()};return nm.pem.encode(r,{maxline:e})};Wy.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:hB.toDer(t).getBytes()};return nm.pem.encode(r,{maxline:e})}});var EB=k((PDt,Qfe)=>{var Ce=Ut();Gc();By();OD();ov();gB();Ja();Gy();lr();var JD=function(t,e,r,n){var i=Ce.util.createBuffer(),o=t.length>>1,s=o+(t.length&1),a=t.substr(0,s),l=t.substr(o,s),c=Ce.util.createBuffer(),u=Ce.hmac.create();r=e+r;var p=Math.ceil(n/16),d=Math.ceil(n/20);u.start("MD5",a);var f=Ce.util.createBuffer();c.putBytes(r);for(var m=0;m<p;++m)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),f.putBuffer(u.digest());u.start("SHA1",l);var h=Ce.util.createBuffer();c.clear(),c.putBytes(r);for(var m=0;m<d;++m)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),h.putBuffer(u.digest());return i.putBytes(Ce.util.xorBytes(f.getBytes(),h.getBytes(),n)),i},ije=function(t,e,r){var n=Ce.hmac.create();n.start("SHA1",t);var i=Ce.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},oje=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=Ce.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},sje=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=Ce.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},ha=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return Ce.util.createBuffer(t.getBytes(r))},rc=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},D={};D.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};D.SupportedVersions=[D.Versions.TLS_1_1,D.Versions.TLS_1_0];D.Version=D.SupportedVersions[0];D.MaxFragment=16384-1024;D.ConnectionEnd={server:0,client:1};D.PRFAlgorithm={tls_prf_sha256:0};D.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};D.CipherType={stream:0,block:1,aead:2};D.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};D.CompressionMethod={none:0,deflate:1};D.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};D.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};D.Alert={};D.Alert.Level={warning:1,fatal:2};D.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};D.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};D.CipherSuites={};D.getCipherSuite=function(t){var e=null;for(var r in D.CipherSuites){var n=D.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};D.handleUnexpected=function(t,e){var r=!t.open&&t.entity===D.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.unexpected_message}})};D.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(D.queue(t,D.createAlert(t,{level:D.Alert.Level.warning,description:D.Alert.Description.no_renegotiation})),D.flush(t)),t.process()};D.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===D.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.illegal_parameter}});else{var o=e.fragment,s=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:Ce.util.createBuffer(o.getBytes(32)),session_id:ha(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=ha(o,2),n.compression_methods=ha(o,1)),s=r-(s-o.length()),s>0){for(var a=ha(o,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:ha(a,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var c=n.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var u=ha(c.data,2);u.length()>0;){var p=u.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(ha(u,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=D.getCipherSuite(n.cipher_suite);else for(var d=Ce.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(t.session.cipherSuite=D.getCipherSuite(d.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.handshake_failure},cipherSuite:Ce.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=D.CompressionMethod.none}return n};D.createSecurityParameters=function(t,e){var r=t.entity===D.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:D.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:D.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};D.handleServerHello=function(t,e,r){var n=D.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=zfe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=cje,t.session.resuming=!1,D.createSecurityParameters(t,n)),t.session.id=i,t.process()}};D.handleClientHello=function(t,e,r){var n=D.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=Ce.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var s,a=1;a<D.SupportedVersions.length&&(s=D.SupportedVersions[a],!(s.minor<=n.version.minor));++a);t.version={major:s.major,minor:s.minor},t.session.version=t.version}o!==null?(t.expect=xB,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?hje:yB,t.session.resuming=!1,D.createSecurityParameters(t,n)),t.open=!0,D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createServerHello(t)})),t.session.resuming?(D.queue(t,D.createRecord(t,{type:D.ContentType.change_cipher_spec,data:D.createChangeCipherSpec()})),t.state.pending=D.createConnectionState(t),t.state.current.write=t.state.pending.write,D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createFinished(t)}))):(D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createCertificate(t)})),t.fail||(D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createServerKeyExchange(t)})),t.verifyClient!==!1&&D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createCertificateRequest(t)})),D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createServerHelloDone(t)})))),D.flush(t),t.process()}};D.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:ha(n,3)},o,s,a=[];try{for(;i.certificate_list.length()>0;)o=ha(i.certificate_list,3),s=Ce.asn1.fromDer(o),o=Ce.pki.certificateFromAsn1(s,!0),a.push(o)}catch(c){return t.error(t,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.bad_certificate}})}var l=t.entity===D.ConnectionEnd.client;(l||t.verifyClient===!0)&&a.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.illegal_parameter}}):a.length===0?t.expect=l?Gfe:yB:(l?t.session.serverCertificate=a[0]:t.session.clientCertificate=a[0],D.verifyCertificateChain(t,a)&&(t.expect=l?Gfe:yB)),t.process()};D.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.unsupported_certificate}});t.expect=lje,t.process()};D.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:ha(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=Ce.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==s.pre_master_secret.charCodeAt(0)||a.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=Ce.random.getBytes(48)}t.expect=xB,t.session.clientCertificate!==null&&(t.expect=gje),t.process()};D.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:ha(n,1),certificate_authorities:ha(n,2)};t.session.certificateRequest=i,t.expect=uje,t.process()};D.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:ha(n,2).getBytes()},s=Ce.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var a=t.session.clientCertificate;if(!a.publicKey.verify(s,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.handshake_failure}})}t.expect=xB,t.process()};D.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!Ce.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=D.createRecord(t,{type:D.ContentType.handshake,data:D.createCertificate(t)}),D.queue(t,e)),e=D.createRecord(t,{type:D.ContentType.handshake,data:D.createClientKeyExchange(t)}),D.queue(t,e),t.expect=fje;var s=function(a,l){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&D.queue(a,D.createRecord(a,{type:D.ContentType.handshake,data:D.createCertificateVerify(a,l)})),D.queue(a,D.createRecord(a,{type:D.ContentType.change_cipher_spec,data:D.createChangeCipherSpec()})),a.state.pending=D.createConnectionState(a),a.state.current.write=a.state.pending.write,D.queue(a,D.createRecord(a,{type:D.ContentType.handshake,data:D.createFinished(a)})),a.expect=zfe,D.flush(a),a.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);D.getClientSignature(t,s)};D.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.illegal_parameter}});var r=t.entity===D.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=D.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?pje:vje,t.process()};D.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=Ce.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===D.ConnectionEnd.client,a=s?"server finished":"client finished",l=t.session.sp,c=12,u=JD;if(n=u(l.master_secret,a,n.getBytes(),c),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(D.queue(t,D.createRecord(t,{type:D.ContentType.change_cipher_spec,data:D.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,D.queue(t,D.createRecord(t,{type:D.ContentType.handshake,data:D.createFinished(t)}))),t.expect=s?dje:_je,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,D.flush(t),t.isConnected=!0,t.connected(t),t.process()};D.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case D.Alert.Description.close_notify:i="Connection closed.";break;case D.Alert.Description.unexpected_message:i="Unexpected message.";break;case D.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case D.Alert.Description.decryption_failed:i="Decryption failed.";break;case D.Alert.Description.record_overflow:i="Record overflow.";break;case D.Alert.Description.decompression_failure:i="Decompression failed.";break;case D.Alert.Description.handshake_failure:i="Handshake failure.";break;case D.Alert.Description.bad_certificate:i="Bad certificate.";break;case D.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case D.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case D.Alert.Description.certificate_expired:i="Certificate expired.";break;case D.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case D.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case D.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case D.Alert.Description.access_denied:i="Access denied.";break;case D.Alert.Description.decode_error:i="Decode error.";break;case D.Alert.Description.decrypt_error:i="Decrypt error.";break;case D.Alert.Description.export_restriction:i="Export restriction.";break;case D.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case D.Alert.Description.insufficient_security:i="Insufficient security.";break;case D.Alert.Description.internal_error:i="Internal error.";break;case D.Alert.Description.user_canceled:i="User canceled.";break;case D.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===D.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===D.ConnectionEnd.client?"server":"client",alert:n}),t.process()};D.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=Ce.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in XD[t.entity][t.expect]?(t.entity===D.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Ce.md.md5.create(),sha1:Ce.md.sha1.create()}),n!==D.HandshakeType.hello_request&&n!==D.HandshakeType.certificate_verify&&n!==D.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),XD[t.entity][t.expect][n](t,e,i)):D.handleUnexpected(t,e)};D.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};D.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===D.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();D.queue(t,D.createRecord(t,{type:D.ContentType.heartbeat,data:D.createHeartbeat(D.HeartbeatMessageType.heartbeat_response,o)})),D.flush(t)}else if(n===D.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,Ce.util.createBuffer(o))}t.process()};var aje=0,cje=1,Gfe=2,lje=3,uje=4,zfe=5,pje=6,dje=7,fje=8,mje=0,hje=1,yB=2,gje=3,xB=4,vje=5,_je=6,R=D.handleUnexpected,$fe=D.handleChangeCipherSpec,co=D.handleAlert,ns=D.handleHandshake,Wfe=D.handleApplicationData,lo=D.handleHeartbeat,bB=[];bB[D.ConnectionEnd.client]=[[R,co,ns,R,lo],[R,co,ns,R,lo],[R,co,ns,R,lo],[R,co,ns,R,lo],[R,co,ns,R,lo],[$fe,co,R,R,lo],[R,co,ns,R,lo],[R,co,ns,Wfe,lo],[R,co,ns,R,lo]];bB[D.ConnectionEnd.server]=[[R,co,ns,R,lo],[R,co,ns,R,lo],[R,co,ns,R,lo],[R,co,ns,R,lo],[$fe,co,R,R,lo],[R,co,ns,R,lo],[R,co,ns,Wfe,lo],[R,co,ns,R,lo]];var im=D.handleHelloRequest,yje=D.handleServerHello,Kfe=D.handleCertificate,Vfe=D.handleServerKeyExchange,vB=D.handleCertificateRequest,YD=D.handleServerHelloDone,Yfe=D.handleFinished,XD=[];XD[D.ConnectionEnd.client]=[[R,R,yje,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,Kfe,Vfe,vB,YD,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,R,Vfe,vB,YD,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,R,R,vB,YD,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,R,R,R,YD,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Yfe],[im,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[im,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];var xje=D.handleClientHello,bje=D.handleClientKeyExchange,Eje=D.handleCertificateVerify;XD[D.ConnectionEnd.server]=[[R,xje,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,Kfe,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,bje,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Eje,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Yfe],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];D.generateKeys=function(t,e){var r=JD,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===D.Versions.TLS_1_0.major&&t.version.minor===D.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),a={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return o&&(a.client_write_IV=s.getBytes(e.fixed_iv_length),a.server_write_IV=s.getBytes(e.fixed_iv_length)),a};D.createConnectionState=function(t){var e=t.entity===D.ConnectionEnd.client,r=function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]}};return o},n={read:r(),write:r()};if(n.read.update=function(o,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(o,s,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,s){return n.write.compressFunction(o,s,n.write)?n.write.cipherFunction(s,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=D.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case D.CompressionMethod.none:break;case D.CompressionMethod.deflate:n.read.compressFunction=sje,n.write.compressFunction=oje;break;default:throw new Error("Unsupported compression algorithm.")}}return n};D.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=Ce.util.createBuffer();return r.putInt32(e),r.putBytes(Ce.random.getBytes(28)),r};D.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};D.createAlert=function(t,e){var r=Ce.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),D.createRecord(t,{type:D.ContentType.alert,data:r})};D.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=Ce.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=Ce.util.createBuffer();o.putByte(D.CompressionMethod.none);var s=o.length(),a=Ce.util.createBuffer();if(t.virtualHost){var l=Ce.util.createBuffer();l.putByte(0),l.putByte(0);var c=Ce.util.createBuffer();c.putByte(0),rc(c,2,Ce.util.createBuffer(t.virtualHost));var u=Ce.util.createBuffer();rc(u,2,c),rc(l,2,u),a.putBuffer(l)}var p=a.length();p>0&&(p+=2);var d=t.session.id,f=d.length+1+2+4+28+2+i+1+s+p,m=Ce.util.createBuffer();return m.putByte(D.HandshakeType.client_hello),m.putInt24(f),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),rc(m,1,Ce.util.createBuffer(d)),rc(m,2,e),rc(m,1,o),p>0&&rc(m,2,a),m};D.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=Ce.util.createBuffer();return n.putByte(D.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),rc(n,1,Ce.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};D.createCertificate=function(t){var e=t.entity===D.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=Ce.util.createBuffer();if(r!==null)try{Ce.util.isArray(r)||(r=[r]);for(var o=null,s=0;s<r.length;++s){var a=Ce.pem.decode(r[s])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=a.type,l}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=Ce.util.createBuffer(a.body);o===null&&(o=Ce.asn1.fromDer(c.bytes(),!1));var u=Ce.util.createBuffer();rc(u,3,c),i.putBuffer(u)}r=Ce.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(f){return t.error(t,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.bad_certificate}})}var p=3+i.length(),d=Ce.util.createBuffer();return d.putByte(D.HandshakeType.certificate),d.putInt24(p),rc(d,3,i),d};D.createClientKeyExchange=function(t){var e=Ce.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(Ce.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=Ce.util.createBuffer();return o.putByte(D.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};D.createServerKeyExchange=function(t){var e=0,r=Ce.util.createBuffer();return e>0&&(r.putByte(D.HandshakeType.server_key_exchange),r.putInt24(e)),r};D.getClientSignature=function(t,e){var r=Ce.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=Ce.pki.privateKeyFromPem(s)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.internal_error}}):i=s.sign(i,null),o(n,i)},t.getSignature(t,r,e)};D.createCertificateVerify=function(t,e){var r=e.length+2,n=Ce.util.createBuffer();return n.putByte(D.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};D.createCertificateRequest=function(t){var e=Ce.util.createBuffer();e.putByte(1);var r=Ce.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=Ce.pki.distinguishedNameToAsn1(i.subject),s=Ce.asn1.toDer(o);r.putInt16(s.length()),r.putBuffer(s)}var a=1+e.length()+2+r.length(),l=Ce.util.createBuffer();return l.putByte(D.HandshakeType.certificate_request),l.putInt24(a),rc(l,1,e),rc(l,2,r),l};D.createServerHelloDone=function(t){var e=Ce.util.createBuffer();return e.putByte(D.HandshakeType.server_hello_done),e.putInt24(0),e};D.createChangeCipherSpec=function(){var t=Ce.util.createBuffer();return t.putByte(1),t};D.createFinished=function(t){var e=Ce.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===D.ConnectionEnd.client,n=t.session.sp,i=12,o=JD,s=r?"client finished":"server finished";e=o(n.master_secret,s,e.getBytes(),i);var a=Ce.util.createBuffer();return a.putByte(D.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a};D.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=Ce.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(Ce.random.getBytes(o)),n};D.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===D.ContentType.handshake||e.type===D.ContentType.alert||e.type===D.ContentType.change_cipher_spec))){if(e.type===D.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=D.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>D.MaxFragment;)n.push(D.createRecord(t,{type:e.type,data:Ce.util.createBuffer(i.slice(0,D.MaxFragment))})),i=i.slice(D.MaxFragment);i.length>0&&n.push(D.createRecord(t,{type:e.type,data:Ce.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var s=n[o],a=t.state.current.write;a.update(t,s)&&t.records.push(s)}}};D.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var _B=function(t){switch(t){case!0:return!0;case Ce.pki.certificateError.bad_certificate:return D.Alert.Description.bad_certificate;case Ce.pki.certificateError.unsupported_certificate:return D.Alert.Description.unsupported_certificate;case Ce.pki.certificateError.certificate_revoked:return D.Alert.Description.certificate_revoked;case Ce.pki.certificateError.certificate_expired:return D.Alert.Description.certificate_expired;case Ce.pki.certificateError.certificate_unknown:return D.Alert.Description.certificate_unknown;case Ce.pki.certificateError.unknown_ca:return D.Alert.Description.unknown_ca;default:return D.Alert.Description.bad_certificate}},Tje=function(t){switch(t){case!0:return!0;case D.Alert.Description.bad_certificate:return Ce.pki.certificateError.bad_certificate;case D.Alert.Description.unsupported_certificate:return Ce.pki.certificateError.unsupported_certificate;case D.Alert.Description.certificate_revoked:return Ce.pki.certificateError.certificate_revoked;case D.Alert.Description.certificate_expired:return Ce.pki.certificateError.certificate_expired;case D.Alert.Description.certificate_unknown:return Ce.pki.certificateError.certificate_unknown;case D.Alert.Description.unknown_ca:return Ce.pki.certificateError.unknown_ca;default:return Ce.pki.certificateError.bad_certificate}};D.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,s,a){var l=_B(o),c=t.verify(t,o,s,a);if(c!==!0){if(typeof c=="object"&&!Ce.util.isArray(c)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:D.Alert.Level.fatal,description:D.Alert.Description.bad_certificate},c.message&&(u.message=c.message),c.alert&&(u.alert.description=c.alert),u}c!==o&&(c=Tje(c))}return c},Ce.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||Ce.util.isArray(i))&&(i={send:!0,alert:{level:D.Alert.Level.fatal,description:_B(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:D.Alert.Level.fatal,description:_B(i.error)}),t.error(t,i)}return!t.fail};D.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,s=null;if(i?s=Ce.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){o=r.cache[s],delete r.cache[s];for(var a in r.order)if(r.order[a]===s){r.order.splice(a,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=Ce.util.bytesToHex(i);r.order.push(s),r.cache[s]=o}}return r};D.createConnection=function(t){var e=null;t.caStore?Ce.util.isArray(t.caStore)?e=Ce.pki.createCaStore(t.caStore):e=t.caStore:e=Ce.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in D.CipherSuites)r.push(D.CipherSuites[n])}var i=t.server?D.ConnectionEnd.server:D.ConnectionEnd.client,o=t.sessionCache?D.createSessionCache(t.sessionCache):null,s={version:{major:D.Version.major,minor:D.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(u,p,d,f){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:Ce.util.createBuffer(),tlsData:Ce.util.createBuffer(),data:Ce.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(u,p){p.origin=p.origin||(u.entity===D.ConnectionEnd.client?"client":"server"),p.send&&(D.queue(u,D.createAlert(u,p.alert)),D.flush(u));var d=p.fatal!==!1;d&&(u.fail=!0),t.error(u,p),d&&u.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(u){s.version={major:D.Version.major,minor:D.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===D.ConnectionEnd.client?aje:mje,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(u||typeof u>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=D.createConnectionState(s)},s.reset();var a=function(u,p){var d=p.type-D.ContentType.change_cipher_spec,f=bB[u.entity][u.expect];d in f?f[d](u,p):D.handleUnexpected(u,p)},l=function(u){var p=0,d=u.input,f=d.length();if(f<5)p=5-f;else{u.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:Ce.util.createBuffer(),ready:!1};var m=u.record.version.major===u.version.major;m&&u.session&&u.session.version&&(m=u.record.version.minor===u.version.minor),m||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.protocol_version}})}return p},c=function(u){var p=0,d=u.input,f=d.length();if(f<u.record.length)p=u.record.length-f;else{u.record.fragment.putBytes(d.getBytes(u.record.length)),d.compact();var m=u.state.current.read;m.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:D.Alert.Level.fatal,description:D.Alert.Description.unexpected_message}})),u.record.ready=!0)}return p};return s.handshake=function(u){if(s.entity!==D.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,u=u||"";var p=null;u.length>0&&(s.sessionCache&&(p=s.sessionCache.getSession(u)),p===null&&(u="")),u.length===0&&s.sessionCache&&(p=s.sessionCache.getSession(),p!==null&&(u=p.id)),s.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Ce.md.md5.create(),sha1:Ce.md.sha1.create()},p&&(s.version=p.version,s.session.sp=p.sp),s.session.sp.client_random=D.createRandom().getBytes(),s.open=!0,D.queue(s,D.createRecord(s,{type:D.ContentType.handshake,data:D.createClientHello(s)})),D.flush(s)}},s.process=function(u){var p=0;return u&&s.input.putBytes(u),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(p=l(s)),!s.fail&&s.record!==null&&!s.record.ready&&(p=c(s)),!s.fail&&s.record!==null&&s.record.ready&&a(s,s.record)),p},s.prepare=function(u){return D.queue(s,D.createRecord(s,{type:D.ContentType.application_data,data:Ce.util.createBuffer(u)})),D.flush(s)},s.prepareHeartbeatRequest=function(u,p){return u instanceof Ce.util.ByteBuffer&&(u=u.bytes()),typeof p>"u"&&(p=u.length),s.expectedHeartbeatPayload=u,D.queue(s,D.createRecord(s,{type:D.ContentType.heartbeat,data:D.createHeartbeat(D.HeartbeatMessageType.heartbeat_request,u,p)})),D.flush(s)},s.close=function(u){if(!s.fail&&s.sessionCache&&s.session){var p={id:s.session.id,version:s.session.version,sp:s.session.sp};p.sp.keys=null,s.sessionCache.setSession(p.id,p)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,D.queue(s,D.createAlert(s,{level:D.Alert.Level.warning,description:D.Alert.Description.close_notify})),D.flush(s)),s.closed(s)),s.reset(u)},s};Qfe.exports=Ce.tls=Ce.tls||{};for(QD in D)typeof D[QD]!="function"&&(Ce.tls[QD]=D[QD]);var QD;Ce.tls.prf_tls1=JD;Ce.tls.hmac_sha1=ije;Ce.tls.createSessionCache=D.createSessionCache;Ce.tls.createConnection=D.createConnection});var Zfe=k((NDt,Jfe)=>{var om=Ut();Jf();EB();var nc=Jfe.exports=om.tls;nc.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=nc.BulkCipherAlgorithm.aes,t.cipher_type=nc.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=nc.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:Xfe};nc.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=nc.BulkCipherAlgorithm.aes,t.cipher_type=nc.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=nc.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:Xfe};function Xfe(t,e,r){var n=e.entity===om.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:om.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:om.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=wje,t.write.cipherFunction=Sje,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=nc.hmac_sha1}function Sje(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===nc.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=om.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=nc.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Cje)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}function Cje(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function Ije(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function wje(t,e){var r=!1,n;t.version.minor===nc.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Ije);var o=e.macLength,s=om.random.getBytesSync(o),a=i.output.length();a>=o?(t.fragment=i.output.getBytes(a-o),s=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=om.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Aje(e.macKey,s,l)&&r,r}function Aje(t,e,r){var n=om.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var CB=k((kDt,nme)=>{var an=Ut();Zl();lr();var kT=nme.exports=an.sha512=an.sha512||{};an.md.sha512=an.md.algorithms.sha512=kT;var tme=an.sha384=an.sha512.sha384=an.sha512.sha384||{};tme.create=function(){return kT.create("SHA-384")};an.md.sha384=an.md.algorithms.sha384=tme;an.sha512.sha256=an.sha512.sha256||{create:function(){return kT.create("SHA-512/256")}};an.md["sha512/256"]=an.md.algorithms["sha512/256"]=an.sha512.sha256;an.sha512.sha224=an.sha512.sha224||{create:function(){return kT.create("SHA-512/224")}};an.md["sha512/224"]=an.md.algorithms["sha512/224"]=an.sha512.sha224;kT.create=function(t){if(rme||Rje(),typeof t>"u"&&(t="SHA-512"),!(t in pv))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=pv[t],r=null,n=an.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var l=a.messageLengthSize/4,c=0;c<l;++c)a.fullMessageLength.push(0);n=an.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return a},a.start(),a.update=function(l,c){c==="utf8"&&(l=an.util.encodeUtf8(l));var u=l.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var p=a.fullMessageLength.length-1;p>=0;--p)a.fullMessageLength[p]+=u[1],u[1]=u[0]+(a.fullMessageLength[p]/4294967296>>>0),a.fullMessageLength[p]=a.fullMessageLength[p]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(l),eme(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var l=an.util.createBuffer();l.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=c&a.blockLength-1;l.putBytes(TB.substr(0,a.blockLength-u));for(var p,d,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)p=a.fullMessageLength[m+1]*8,d=p/4294967296>>>0,f+=d,l.putInt32(f>>>0),f=p>>>0;l.putInt32(f);for(var h=new Array(r.length),m=0;m<r.length;++m)h[m]=r[m].slice(0);eme(h,i,l);var g=an.util.createBuffer(),v;t==="SHA-512"?v=h.length:t==="SHA-384"?v=h.length-2:v=h.length-4;for(var m=0;m<v;++m)g.putInt32(h[m][0]),(m!==v-1||t!=="SHA-512/224")&&g.putInt32(h[m][1]);return g},a};var TB=null,rme=!1,SB=null,pv=null;function Rje(){TB=String.fromCharCode(128),TB+=an.util.fillString(String.fromCharCode(0),128),SB=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],pv={},pv["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],pv["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],pv["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],pv["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],rme=!0}function eme(t,e,r){for(var n,i,o,s,a,l,c,u,p,d,f,m,h,g,v,_,y,b,x,P,U,H,j,M,F,z,q,L,S,T,A,J,me,ce,ae,se=r.length();se>=128;){for(S=0;S<16;++S)e[S][0]=r.getInt32()>>>0,e[S][1]=r.getInt32()>>>0;for(;S<80;++S)J=e[S-2],T=J[0],A=J[1],n=((T>>>19|A<<13)^(A>>>29|T<<3)^T>>>6)>>>0,i=((T<<13|A>>>19)^(A<<3|T>>>29)^(T<<26|A>>>6))>>>0,ce=e[S-15],T=ce[0],A=ce[1],o=((T>>>1|A<<31)^(T>>>8|A<<24)^T>>>7)>>>0,s=((T<<31|A>>>1)^(T<<24|A>>>8)^(T<<25|A>>>7))>>>0,me=e[S-7],ae=e[S-16],A=i+me[1]+s+ae[1],e[S][0]=n+me[0]+o+ae[0]+(A/4294967296>>>0)>>>0,e[S][1]=A>>>0;for(h=t[0][0],g=t[0][1],v=t[1][0],_=t[1][1],y=t[2][0],b=t[2][1],x=t[3][0],P=t[3][1],U=t[4][0],H=t[4][1],j=t[5][0],M=t[5][1],F=t[6][0],z=t[6][1],q=t[7][0],L=t[7][1],S=0;S<80;++S)c=((U>>>14|H<<18)^(U>>>18|H<<14)^(H>>>9|U<<23))>>>0,u=((U<<18|H>>>14)^(U<<14|H>>>18)^(H<<23|U>>>9))>>>0,p=(F^U&(j^F))>>>0,d=(z^H&(M^z))>>>0,a=((h>>>28|g<<4)^(g>>>2|h<<30)^(g>>>7|h<<25))>>>0,l=((h<<4|g>>>28)^(g<<30|h>>>2)^(g<<25|h>>>7))>>>0,f=(h&v|y&(h^v))>>>0,m=(g&_|b&(g^_))>>>0,A=L+u+d+SB[S][1]+e[S][1],n=q+c+p+SB[S][0]+e[S][0]+(A/4294967296>>>0)>>>0,i=A>>>0,A=l+m,o=a+f+(A/4294967296>>>0)>>>0,s=A>>>0,q=F,L=z,F=j,z=M,j=U,M=H,A=P+i,U=x+n+(A/4294967296>>>0)>>>0,H=A>>>0,x=y,P=b,y=v,b=_,v=h,_=g,A=i+s,h=n+o+(A/4294967296>>>0)>>>0,g=A>>>0;A=t[0][1]+g,t[0][0]=t[0][0]+h+(A/4294967296>>>0)>>>0,t[0][1]=A>>>0,A=t[1][1]+_,t[1][0]=t[1][0]+v+(A/4294967296>>>0)>>>0,t[1][1]=A>>>0,A=t[2][1]+b,t[2][0]=t[2][0]+y+(A/4294967296>>>0)>>>0,t[2][1]=A>>>0,A=t[3][1]+P,t[3][0]=t[3][0]+x+(A/4294967296>>>0)>>>0,t[3][1]=A>>>0,A=t[4][1]+H,t[4][0]=t[4][0]+U+(A/4294967296>>>0)>>>0,t[4][1]=A>>>0,A=t[5][1]+M,t[5][0]=t[5][0]+j+(A/4294967296>>>0)>>>0,t[5][1]=A>>>0,A=t[6][1]+z,t[6][0]=t[6][0]+F+(A/4294967296>>>0)>>>0,t[6][1]=A>>>0,A=t[7][1]+L,t[7][0]=t[7][0]+q+(A/4294967296>>>0)>>>0,t[7][1]=A>>>0,se-=128}}});var ime=k(IB=>{var Dje=Ut();Gc();var qi=Dje.asn1;IB.privateKeyValidator={name:"PrivateKeyInfo",tagClass:qi.Class.UNIVERSAL,type:qi.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qi.Class.UNIVERSAL,type:qi.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qi.Class.UNIVERSAL,type:qi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qi.Class.UNIVERSAL,type:qi.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qi.Class.UNIVERSAL,type:qi.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};IB.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qi.Class.UNIVERSAL,type:qi.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qi.Class.UNIVERSAL,type:qi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qi.Class.UNIVERSAL,type:qi.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:qi.Class.UNIVERSAL,type:qi.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var vme=k((LDt,gme)=>{var uo=Ut();RT();Ja();CB();lr();var ume=ime(),Pje=ume.publicKeyValidator,Nje=ume.privateKeyValidator;typeof ome>"u"&&(ome=uo.jsbn.BigInteger);var ome,RB=uo.util.ByteBuffer,Ns=typeof Buffer>"u"?Uint8Array:Buffer;uo.pki=uo.pki||{};gme.exports=uo.pki.ed25519=uo.ed25519=uo.ed25519||{};var $t=uo.ed25519;$t.constants={};$t.constants.PUBLIC_KEY_BYTE_LENGTH=32;$t.constants.PRIVATE_KEY_BYTE_LENGTH=64;$t.constants.SEED_BYTE_LENGTH=32;$t.constants.SIGN_BYTE_LENGTH=64;$t.constants.HASH_BYTE_LENGTH=64;$t.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=uo.random.getBytesSync($t.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==$t.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+$t.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Bp({message:e,encoding:"binary"});for(var r=new Ns($t.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Ns($t.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Mje(r,n),{publicKey:r,privateKey:n}};$t.privateKeyFromAsn1=function(t){var e={},r=[],n=uo.asn1.validate(t,Nje,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=uo.asn1.derToOid(e.privateKeyOid),s=uo.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.privateKey,l=Bp({message:uo.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:l}};$t.publicKeyFromAsn1=function(t){var e={},r=[],n=uo.asn1.validate(t,Pje,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=uo.asn1.derToOid(e.publicKeyOid),s=uo.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.ed25519PublicKey;if(a.length!==$t.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Bp({message:a,encoding:"binary"})};$t.publicKeyFromPrivateKey=function(t){t=t||{};var e=Bp({message:t.privateKey,encoding:"binary"});if(e.length!==$t.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+$t.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Ns($t.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};$t.sign=function(t){t=t||{};var e=Bp(t),r=Bp({message:t.privateKey,encoding:"binary"});if(r.length===$t.constants.SEED_BYTE_LENGTH){var n=$t.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==$t.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+$t.constants.SEED_BYTE_LENGTH+" or "+$t.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Ns($t.constants.SIGN_BYTE_LENGTH+e.length);Fje(i,e,e.length,r);for(var o=new Ns($t.constants.SIGN_BYTE_LENGTH),s=0;s<o.length;++s)o[s]=i[s];return o};$t.verify=function(t){t=t||{};var e=Bp(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Bp({message:t.signature,encoding:"binary"});if(r.length!==$t.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+$t.constants.SIGN_BYTE_LENGTH);var n=Bp({message:t.publicKey,encoding:"binary"});if(n.length!==$t.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+$t.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Ns($t.constants.SIGN_BYTE_LENGTH+e.length),o=new Ns($t.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<$t.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+$t.constants.SIGN_BYTE_LENGTH]=e[s];return Uje(o,i,i.length,n)>=0};function Bp(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Ns)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new RB(e,r)}else if(!(e instanceof RB))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Ns(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var DB=ht(),ZD=ht([1]),kje=ht([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Oje=ht([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),sme=ht([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ame=ht([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),wB=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Lje=ht([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function OT(t,e){var r=uo.md.sha512.create(),n=new RB(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Ns($t.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=i.charCodeAt(s);return o}function Mje(t,e){var r=[ht(),ht(),ht(),ht()],n,i=OT(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,OB(r,i),kB(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function Fje(t,e,r,n){var i,o,s=new Float64Array(64),a=[ht(),ht(),ht(),ht()],l=OT(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var c=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var u=OT(t.subarray(32),r+32);for(PB(u),OB(a,u),kB(t,a),i=32;i<64;++i)t[i]=n[i];var p=OT(t,r+64);for(PB(p),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=u[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=p[i]*l[o];return pme(t.subarray(32),s),c}function Uje(t,e,r,n){var i,o,s=new Ns(32),a=[ht(),ht(),ht(),ht()],l=[ht(),ht(),ht(),ht()];if(o=-1,r<64||Bje(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var c=OT(t,r);if(PB(c),mme(a,l,c),OB(l,e.subarray(32)),NB(a,l),kB(s,a),r-=64,dme(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}function pme(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*wB[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*wB[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*wB[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function PB(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;pme(t,e)}function NB(t,e){var r=ht(),n=ht(),i=ht(),o=ht(),s=ht(),a=ht(),l=ht(),c=ht(),u=ht();Yy(r,t[1],t[0]),Yy(u,e[1],e[0]),Ur(r,r,u),Ky(n,t[0],t[1]),Ky(u,e[0],e[1]),Ur(n,n,u),Ur(i,t[3],e[3]),Ur(i,i,Oje),Ur(o,t[2],e[2]),Ky(o,o,o),Yy(s,n,r),Yy(a,o,i),Ky(l,o,i),Ky(c,n,r),Ur(t[0],s,a),Ur(t[1],c,l),Ur(t[2],l,a),Ur(t[3],s,c)}function cme(t,e,r){for(var n=0;n<4;++n)hme(t[n],e[n],r)}function kB(t,e){var r=ht(),n=ht(),i=ht();Gje(i,e[2]),Ur(r,e[0],i),Ur(n,e[1],i),eP(t,n),t[31]^=fme(r)<<7}function eP(t,e){var r,n,i,o=ht(),s=ht();for(r=0;r<16;++r)s[r]=e[r];for(AB(s),AB(s),AB(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,hme(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function Bje(t,e){var r=ht(),n=ht(),i=ht(),o=ht(),s=ht(),a=ht(),l=ht();return sm(t[2],ZD),qje(t[1],e),dv(i,t[1]),Ur(o,i,kje),Yy(i,i,t[2]),Ky(o,t[2],o),dv(s,o),dv(a,s),Ur(l,a,s),Ur(r,l,i),Ur(r,r,o),Hje(r,r),Ur(r,r,i),Ur(r,r,o),Ur(r,r,o),Ur(t[0],r,o),dv(n,t[0]),Ur(n,n,o),lme(n,i)&&Ur(t[0],t[0],Lje),dv(n,t[0]),Ur(n,n,o),lme(n,i)?-1:(fme(t[0])===e[31]>>7&&Yy(t[0],DB,t[0]),Ur(t[3],t[0],t[1]),0)}function qje(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Hje(t,e){var r=ht(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)dv(r,r),n!==1&&Ur(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function lme(t,e){var r=new Ns(32),n=new Ns(32);return eP(r,t),eP(n,e),dme(r,0,n,0)}function dme(t,e,r,n){return jje(t,e,r,n,32)}function jje(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function fme(t){var e=new Ns(32);return eP(e,t),e[0]&1}function mme(t,e,r){var n,i;for(sm(t[0],DB),sm(t[1],ZD),sm(t[2],ZD),sm(t[3],DB),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,cme(t,e,n),NB(e,t),NB(t,t),cme(t,e,n)}function OB(t,e){var r=[ht(),ht(),ht(),ht()];sm(r[0],sme),sm(r[1],ame),sm(r[2],ZD),Ur(r[3],sme,ame),mme(t,r,e)}function sm(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function Gje(t,e){var r=ht(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)dv(r,r),n!==2&&n!==4&&Ur(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function AB(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function hme(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function ht(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function Ky(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function Yy(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function dv(t,e){Ur(t,e,e)}function Ur(t,e,r){var n,i,o=0,s=0,a=0,l=0,c=0,u=0,p=0,d=0,f=0,m=0,h=0,g=0,v=0,_=0,y=0,b=0,x=0,P=0,U=0,H=0,j=0,M=0,F=0,z=0,q=0,L=0,S=0,T=0,A=0,J=0,me=0,ce=r[0],ae=r[1],se=r[2],je=r[3],Ye=r[4],Ze=r[5],ke=r[6],st=r[7],et=r[8],ve=r[9],W=r[10],ne=r[11],ye=r[12],Te=r[13],Ne=r[14],qe=r[15];n=e[0],o+=n*ce,s+=n*ae,a+=n*se,l+=n*je,c+=n*Ye,u+=n*Ze,p+=n*ke,d+=n*st,f+=n*et,m+=n*ve,h+=n*W,g+=n*ne,v+=n*ye,_+=n*Te,y+=n*Ne,b+=n*qe,n=e[1],s+=n*ce,a+=n*ae,l+=n*se,c+=n*je,u+=n*Ye,p+=n*Ze,d+=n*ke,f+=n*st,m+=n*et,h+=n*ve,g+=n*W,v+=n*ne,_+=n*ye,y+=n*Te,b+=n*Ne,x+=n*qe,n=e[2],a+=n*ce,l+=n*ae,c+=n*se,u+=n*je,p+=n*Ye,d+=n*Ze,f+=n*ke,m+=n*st,h+=n*et,g+=n*ve,v+=n*W,_+=n*ne,y+=n*ye,b+=n*Te,x+=n*Ne,P+=n*qe,n=e[3],l+=n*ce,c+=n*ae,u+=n*se,p+=n*je,d+=n*Ye,f+=n*Ze,m+=n*ke,h+=n*st,g+=n*et,v+=n*ve,_+=n*W,y+=n*ne,b+=n*ye,x+=n*Te,P+=n*Ne,U+=n*qe,n=e[4],c+=n*ce,u+=n*ae,p+=n*se,d+=n*je,f+=n*Ye,m+=n*Ze,h+=n*ke,g+=n*st,v+=n*et,_+=n*ve,y+=n*W,b+=n*ne,x+=n*ye,P+=n*Te,U+=n*Ne,H+=n*qe,n=e[5],u+=n*ce,p+=n*ae,d+=n*se,f+=n*je,m+=n*Ye,h+=n*Ze,g+=n*ke,v+=n*st,_+=n*et,y+=n*ve,b+=n*W,x+=n*ne,P+=n*ye,U+=n*Te,H+=n*Ne,j+=n*qe,n=e[6],p+=n*ce,d+=n*ae,f+=n*se,m+=n*je,h+=n*Ye,g+=n*Ze,v+=n*ke,_+=n*st,y+=n*et,b+=n*ve,x+=n*W,P+=n*ne,U+=n*ye,H+=n*Te,j+=n*Ne,M+=n*qe,n=e[7],d+=n*ce,f+=n*ae,m+=n*se,h+=n*je,g+=n*Ye,v+=n*Ze,_+=n*ke,y+=n*st,b+=n*et,x+=n*ve,P+=n*W,U+=n*ne,H+=n*ye,j+=n*Te,M+=n*Ne,F+=n*qe,n=e[8],f+=n*ce,m+=n*ae,h+=n*se,g+=n*je,v+=n*Ye,_+=n*Ze,y+=n*ke,b+=n*st,x+=n*et,P+=n*ve,U+=n*W,H+=n*ne,j+=n*ye,M+=n*Te,F+=n*Ne,z+=n*qe,n=e[9],m+=n*ce,h+=n*ae,g+=n*se,v+=n*je,_+=n*Ye,y+=n*Ze,b+=n*ke,x+=n*st,P+=n*et,U+=n*ve,H+=n*W,j+=n*ne,M+=n*ye,F+=n*Te,z+=n*Ne,q+=n*qe,n=e[10],h+=n*ce,g+=n*ae,v+=n*se,_+=n*je,y+=n*Ye,b+=n*Ze,x+=n*ke,P+=n*st,U+=n*et,H+=n*ve,j+=n*W,M+=n*ne,F+=n*ye,z+=n*Te,q+=n*Ne,L+=n*qe,n=e[11],g+=n*ce,v+=n*ae,_+=n*se,y+=n*je,b+=n*Ye,x+=n*Ze,P+=n*ke,U+=n*st,H+=n*et,j+=n*ve,M+=n*W,F+=n*ne,z+=n*ye,q+=n*Te,L+=n*Ne,S+=n*qe,n=e[12],v+=n*ce,_+=n*ae,y+=n*se,b+=n*je,x+=n*Ye,P+=n*Ze,U+=n*ke,H+=n*st,j+=n*et,M+=n*ve,F+=n*W,z+=n*ne,q+=n*ye,L+=n*Te,S+=n*Ne,T+=n*qe,n=e[13],_+=n*ce,y+=n*ae,b+=n*se,x+=n*je,P+=n*Ye,U+=n*Ze,H+=n*ke,j+=n*st,M+=n*et,F+=n*ve,z+=n*W,q+=n*ne,L+=n*ye,S+=n*Te,T+=n*Ne,A+=n*qe,n=e[14],y+=n*ce,b+=n*ae,x+=n*se,P+=n*je,U+=n*Ye,H+=n*Ze,j+=n*ke,M+=n*st,F+=n*et,z+=n*ve,q+=n*W,L+=n*ne,S+=n*ye,T+=n*Te,A+=n*Ne,J+=n*qe,n=e[15],b+=n*ce,x+=n*ae,P+=n*se,U+=n*je,H+=n*Ye,j+=n*Ze,M+=n*ke,F+=n*st,z+=n*et,q+=n*ve,L+=n*W,S+=n*ne,T+=n*ye,A+=n*Te,J+=n*Ne,me+=n*qe,o+=38*x,s+=38*P,a+=38*U,l+=38*H,c+=38*j,u+=38*M,p+=38*F,d+=38*z,f+=38*q,m+=38*L,h+=38*S,g+=38*T,v+=38*A,_+=38*J,y+=38*me,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=l,t[4]=c,t[5]=u,t[6]=p,t[7]=d,t[8]=f,t[9]=m,t[10]=h,t[11]=g,t[12]=v,t[13]=_,t[14]=y,t[15]=b}});var bme=k((MDt,xme)=>{var ga=Ut();lr();Ja();RT();xme.exports=ga.kem=ga.kem||{};var _me=ga.jsbn.BigInteger;ga.kem.rsa={};ga.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||ga.random,n={};return n.encrypt=function(i,o){var s=Math.ceil(i.n.bitLength()/8),a;do a=new _me(ga.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(a.compareTo(_me.ONE)<=0);a=ga.util.hexToBytes(a.toString(16));var l=s-a.length;l>0&&(a=ga.util.fillString(String.fromCharCode(0),l)+a);var c=i.encrypt(a,"NONE"),u=t.generate(a,o);return{encapsulation:c,key:u}},n.decrypt=function(i,o,s){var a=i.decrypt(o,"NONE");return t.generate(a,s)},n};ga.kem.kdf1=function(t,e){yme(this,t,0,e||t.digestLength)};ga.kem.kdf2=function(t,e){yme(this,t,1,e||t.digestLength)};function yme(t,e,r,n){t.generate=function(i,o){for(var s=new ga.util.ByteBuffer,a=Math.ceil(o/n)+r,l=new ga.util.ByteBuffer,c=r;c<a;++c){l.putInt32(c),e.start(),e.update(i+l.getBytes());var u=e.digest();s.putBytes(u.getBytes(n))}return s.truncate(s.length()-o),s.getBytes()}}});var Cme=k((FDt,Sme)=>{var Xt=Ut();lr();Sme.exports=Xt.log=Xt.log||{};Xt.log.levels=["none","error","warning","info","debug","verbose","max"];var tP={},FB=[],MT=null;Xt.log.LEVEL_LOCKED=2;Xt.log.NO_LEVEL_CHECK=4;Xt.log.INTERPOLATE=8;for(au=0;au<Xt.log.levels.length;++au)LB=Xt.log.levels[au],tP[LB]={index:au,name:LB.toUpperCase()};var LB,au;Xt.log.logMessage=function(t){for(var e=tP[t.level].index,r=0;r<FB.length;++r){var n=FB[r];if(n.flags&Xt.log.NO_LEVEL_CHECK)n.f(t);else{var i=tP[n.level].index;e<=i&&n.f(n,t)}}};Xt.log.prepareStandard=function(t){"standard"in t||(t.standard=tP[t.level].name+" ["+t.category+"] "+t.message)};Xt.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Xt.util.format.apply(this,e)}};Xt.log.prepareStandardFull=function(t){"standardFull"in t||(Xt.log.prepareStandard(t),t.standardFull=t.standard)};for(MB=["error","warning","info","debug","verbose"],au=0;au<MB.length;++au)(function(e){Xt.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};Xt.log.logMessage(o)}})(MB[au]);var MB,au;Xt.log.makeLogger=function(t){var e={flags:0,f:t};return Xt.log.setLevel(e,"none"),e};Xt.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Xt.log.LEVEL_LOCKED))for(var n=0;n<Xt.log.levels.length;++n){var i=Xt.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};Xt.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Xt.log.LEVEL_LOCKED:t.flags&=~Xt.log.LEVEL_LOCKED};Xt.log.addLogger=function(t){FB.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Eme={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},FT=function(t,e){Xt.log.prepareStandard(e);var r=Eme[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},Qy=Xt.log.makeLogger(FT)):(FT=function(e,r){Xt.log.prepareStandardFull(r),console.log(r.standardFull)},Qy=Xt.log.makeLogger(FT)),Xt.log.setLevel(Qy,"debug"),Xt.log.addLogger(Qy),MT=Qy):console={log:function(){}};var Qy,Eme,FT;MT!==null&&typeof window<"u"&&window.location&&(LT=new URL(window.location.href).searchParams,LT.has("console.level")&&Xt.log.setLevel(MT,LT.get("console.level").slice(-1)[0]),LT.has("console.lock")&&(Tme=LT.get("console.lock").slice(-1)[0],Tme=="true"&&Xt.log.lock(MT)));var LT,Tme;Xt.log.consoleLogger=MT});var wme=k((UDt,Ime)=>{Ime.exports=Zl();OD();Gy();QU();CB()});var Dme=k((BDt,Rme)=>{var Be=Ut();Jf();Gc();wT();Zf();ov();uB();Ja();lr();KD();var X=Be.asn1,is=Rme.exports=Be.pkcs7=Be.pkcs7||{};is.messageFromPem=function(t){var e=Be.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=X.fromDer(e.body);return is.messageFromAsn1(n)};is.messageToPem=function(t,e){var r={type:"PKCS7",body:X.toDer(t.toAsn1()).getBytes()};return Be.pem.encode(r,{maxline:e})};is.messageFromAsn1=function(t){var e={},r=[];if(!X.validate(t,is.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=X.derToOid(e.contentType),o;switch(i){case Be.pki.oids.envelopedData:o=is.createEnvelopedData();break;case Be.pki.oids.encryptedData:o=is.createEncryptedData();break;case Be.pki.oids.signedData:o=is.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};is.createSignedData=function(){var t=null;return t={type:Be.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(BB(t,n,is.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Be.pki.certificateFromAsn1(i[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Be.pki.certificateToAsn1(t.certificates[i]));var o=[],s=X.create(X.Class.CONTEXT_SPECIFIC,0,!0,[X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.INTEGER,!1,X.integerToDer(t.version).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(X.create(X.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(X.create(X.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(X.create(X.Class.UNIVERSAL,X.Type.SET,!0,t.signerInfos)),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Be.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Be.pki.privateKeyFromPem(a));var l=n.digestAlgorithm||Be.pki.oids.sha1;switch(l){case Be.pki.oids.sha1:case Be.pki.oids.sha256:case Be.pki.oids.sha384:case Be.pki.oids.sha512:case Be.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var u=!1,p=!1,d=0;d<c.length;++d){var f=c[d];if(!u&&f.type===Be.pki.oids.contentType){if(u=!0,p)break;continue}if(!p&&f.type===Be.pki.oids.messageDigest){if(p=!0,u)break;continue}}if(!u||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:Be.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(Be.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Be.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Be.util.encodeUtf8(t.content)),n.detached?t.detachedContent=X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(X.create(X.Class.CONTEXT_SPECIFIC,0,!0,[X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Be.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],s=o.digestAlgorithm;s in n||(n[s]=Be.md[Be.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=Be.md[Be.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(s).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=X.derToOid(t.contentInfo.value[0].value),s=X.toDer(i);s.getByte(),X.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var l=new Date,c=0;c<t.signers.length;++c){var u=t.signers[c];if(u.authenticatedAttributes.length===0){if(o!==Be.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=X.create(X.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=X.create(X.Class.UNIVERSAL,X.Type.SET,!0,[]),d=0;d<u.authenticatedAttributes.length;++d){var f=u.authenticatedAttributes[d];f.type===Be.pki.oids.messageDigest?f.value=n[u.digestAlgorithm].digest():f.type===Be.pki.oids.signingTime&&(f.value||(f.value=l)),p.value.push(UB(f)),u.authenticatedAttributesAsn1.value.push(UB(f))}s=X.toDer(p).getBytes(),u.md.start().update(s)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Yje(t.signers)}};is.createEncryptedData=function(){var t=null;return t={type:Be.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Be.pki.oids["aes256-CBC"]},fromAsn1:function(e){BB(t,e,is.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Ame(t)}},t};is.createEnvelopedData=function(){var t=null;return t={type:Be.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Be.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=BB(t,e,is.asn1.envelopedDataValidator);t.recipients=$je(r.recipientInfos.value)},toAsn1:function(){return X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.type).getBytes()),X.create(X.Class.CONTEXT_SPECIFIC,0,!0,[X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.INTEGER,!1,X.integerToDer(t.version).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.SET,!0,Wje(t.recipients)),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,Qje(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Be.pki.oids.rsaEncryption:case Be.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Be.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Ame(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Be.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Be.pki.oids["aes128-CBC"]:n=16,i=16,o=Be.aes.createEncryptionCipher;break;case Be.pki.oids["aes192-CBC"]:n=24,i=16,o=Be.aes.createEncryptionCipher;break;case Be.pki.oids["aes256-CBC"]:n=32,i=16,o=Be.aes.createEncryptionCipher;break;case Be.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Be.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Be.util.createBuffer(Be.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Be.util.createBuffer(Be.random.getBytes(i));var s=o(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var a=0;a<t.recipients.length;++a){var l=t.recipients[a];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case Be.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},t};function Vje(t){var e={},r=[];if(!X.validate(t,is.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Be.pki.RDNAttributesAsArray(e.issuer),serialNumber:Be.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:X.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function zje(t){return X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.INTEGER,!1,X.integerToDer(t.version).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[Be.pki.distinguishedNameToAsn1({attributes:t.issuer}),X.create(X.Class.UNIVERSAL,X.Type.INTEGER,!1,Be.util.hexToBytes(t.serialNumber))]),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.encryptedContent.algorithm).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.NULL,!1,"")]),X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function $je(t){for(var e=[],r=0;r<t.length;++r)e.push(Vje(t[r]));return e}function Wje(t){for(var e=[],r=0;r<t.length;++r)e.push(zje(t[r]));return e}function Kje(t){var e=X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.INTEGER,!1,X.integerToDer(t.version).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[Be.pki.distinguishedNameToAsn1({attributes:t.issuer}),X.create(X.Class.UNIVERSAL,X.Type.INTEGER,!1,Be.util.hexToBytes(t.serialNumber))]),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.digestAlgorithm).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.signatureAlgorithm).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.NULL,!1,"")])),e.value.push(X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=X.create(X.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(UB(i))}e.value.push(r)}return e}function Yje(t){for(var e=[],r=0;r<t.length;++r)e.push(Kje(t[r]));return e}function UB(t){var e;if(t.type===Be.pki.oids.contentType)e=X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.value).getBytes());else if(t.type===Be.pki.oids.messageDigest)e=X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Be.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=X.utcTimeToDate(i):i=X.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=X.create(X.Class.UNIVERSAL,X.Type.UTCTIME,!1,X.dateToUtcTime(i)):e=X.create(X.Class.UNIVERSAL,X.Type.GENERALIZEDTIME,!1,X.dateToGeneralizedTime(i))}return X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.type).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.SET,!0,[e])])}function Qje(t){return[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(Be.pki.oids.data).getBytes()),X.create(X.Class.UNIVERSAL,X.Type.SEQUENCE,!0,[X.create(X.Class.UNIVERSAL,X.Type.OID,!1,X.oidToDer(t.algorithm).getBytes()),t.parameter?X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),X.create(X.Class.CONTEXT_SPECIFIC,0,!0,[X.create(X.Class.UNIVERSAL,X.Type.OCTETSTRING,!1,t.content.getBytes())])]}function BB(t,e,r){var n={},i=[];if(!X.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=X.derToOid(n.contentType);if(s!==Be.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Be.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==X.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[l].value}else a=n.encryptedContent;t.encryptedContent={algorithm:X.derToOid(n.encAlgorithm),parameter:Be.util.createBuffer(n.encParameter.value),content:Be.util.createBuffer(a)}}if(n.content){var a="";if(Be.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==X.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[l].value}else a=n.content;t.content=Be.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Ame(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Be.pki.oids["aes128-CBC"]:case Be.pki.oids["aes192-CBC"]:case Be.pki.oids["aes256-CBC"]:e=Be.aes.createDecryptionCipher(t.encryptedContent.key);break;case Be.pki.oids.desCBC:case Be.pki.oids["des-EDE3-CBC"]:e=Be.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Nme=k((qDt,Pme)=>{var si=Ut();Jf();By();OD();Gy();lr();var nP=Pme.exports=si.ssh=si.ssh||{};nP.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var s=si.util.createBuffer();Xy(s,n),cu(s,t.e),cu(s,t.n);var a=si.util.encode64(s.bytes(),64),l=Math.floor(a.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=a;var c=si.util.createBuffer();cu(c,t.d),cu(c,t.p),cu(c,t.q),cu(c,t.qInv);var u;if(!e)u=si.util.encode64(c.bytes(),64);else{var p=c.length()+16-1;p-=p%16;var d=rP(c.bytes());d.truncate(d.length()-p+c.length()),c.putBuffer(d);var f=si.util.createBuffer();f.putBuffer(rP("\0\0\0\0",e)),f.putBuffer(rP("\0\0\0",e));var m=si.aes.createEncryptionCipher(f.truncate(8),"CBC");m.start(si.util.createBuffer().fillWithByte(0,16)),m.update(c.copy()),m.finish();var h=m.output;h.truncate(16),u=si.util.encode64(h.bytes(),64)}l=Math.floor(u.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=u;var g=rP("putty-private-key-file-mac-key",e),v=si.util.createBuffer();Xy(v,n),Xy(v,i),Xy(v,r),v.putInt32(s.length()),v.putBuffer(s),v.putInt32(c.length()),v.putBuffer(c);var _=si.hmac.create();return _.start("sha1",g),_.update(v.bytes()),o+=`\r
Private-MAC: `+_.digest().toHex()+`\r
`,o};nP.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=si.util.createBuffer();return Xy(n,r),cu(n,t.e),cu(n,t.n),r+" "+si.util.encode64(n.bytes())+" "+e};nP.privateKeyToOpenSSH=function(t,e){return e?si.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):si.pki.privateKeyToPem(t)};nP.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||si.md.md5.create(),n="ssh-rsa",i=si.util.createBuffer();Xy(i,n),cu(i,t.e),cu(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function cu(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=si.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function Xy(t,e){t.putInt32(e.length),t.putString(e)}function rP(){for(var t=si.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var Ome=k((HDt,kme)=>{kme.exports=Ut();Jf();Zfe();Gc();wD();wT();vme();By();bme();Cme();wme();pB();UD();ov();oB();mB();Dme();gB();aB();XU();zD();Ja();eB();Nme();EB();lr()});var Lme=k((jDt,Xje)=>{Xje.exports={name:"@roamhq/mac-ca",version:"1.0.7",description:"Get Mac OS Root certificates",main:"index.js",repository:{type:"git",url:"https://github.com/WonderInventions/mac-ca.git"},scripts:{test:'echo "Error: no test specified" && exit 1',lint:"eslint ."},license:"BSD-3-Clause",dependencies:{"node-forge":"^1.3.1"},devDependencies:{eslint:"^8.22.0"}}});var Ume=k((GDt,qB)=>{var oP=Ome(),Mme=Lme(),iP=qB.exports.validFormats={der:0,pem:1,txt:2,asn1:3};function Fme(t){let e=oP.pki.pemToDer(t),r=oP.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,s=n.slice(o);return{serial:s[0],issuer:s[2],valid:s[3],subject:s[4]}}function Jje(t){let e=Fme(t),r=new Date,n=e.subject.value.map(s=>s.value[0].value[1].value).join("/"),i=e.valid.value.map(s=>s.value).join(" - "),o=r.toTimeString().replace(/\s*\(.*\)\s*/,"");return[`Subject	${n}`,`Valid	${i}`,`Saved	${r.toLocaleDateString()} ${o} by ${Mme.name}@${Mme.version}`,String(t)].join(`
`)}qB.exports.transform=function(t){return function(e){try{switch(t){case iP.der:return oP.pki.pemToDer(e);case iP.pem:return e;case iP.txt:return Jje(e);case iP.asn1:return Fme(e);default:return oP.pki.certificateFromPem(e)}}catch{return}}}});var Bme=k((VDt,Jy)=>{var HB=require("https"),jB=Ume();if(process.platform!=="darwin")Jy.exports.all=()=>[],Jy.exports.each=()=>{};else{let a=function(c,u,p){return p.indexOf(c)===u};Zje=a;let t=require("child_process"),e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r="/System/Library/Keychains/SystemRootCertificates.keychain",n=["find-certificate","-a","-p"],i=t.spawnSync("/usr/bin/security",n).stdout.toString().split(e),o=t.spawnSync("/usr/bin/security",n.concat(r)).stdout.toString().split(e);HB.globalAgent.options.ca=HB.globalAgent.options.ca||[];let s=HB.globalAgent.options.ca,l=i.concat(o);l.filter(a).forEach(c=>s.push(c)),Jy.exports.der2=jB.validFormats,Jy.exports.all=function(c){return l.map(jB.transform(c)).filter(u=>u)},Jy.exports.each=function(c,u){return typeof c=="function"&&(u=c,c=void 0),l.map(jB.transform(c)).filter(p=>p).forEach(u)}}var Zje});var ahe=k((aNt,she)=>{function Jme(t){return Array.isArray(t)?t:[t]}var rhe="",Zme=" ",cq="\\",pGe=/^\s+$/,dGe=/(?:[^\\]|^)\\$/,fGe=/^\\!/,mGe=/^\\#/,hGe=/\r?\n/g,gGe=/^\.*\/|^\.+$/,lq="/",nhe="node-ignore";typeof Symbol<"u"&&(nhe=Symbol.for("node-ignore"));var ehe=nhe,vGe=(t,e,r)=>Object.defineProperty(t,e,{value:r}),_Ge=/([0-z])-([0-z])/g,ihe=()=>!1,yGe=t=>t.replace(_Ge,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:rhe),xGe=t=>{let{length:e}=t;return t.slice(0,e-e%2)},bGe=[[/\\?\s+$/,t=>t.indexOf("\\")===0?Zme:rhe],[/\\\s/g,()=>Zme],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>cq],[/\\\\/g,()=>cq],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===cq?`\\[${r}${xGe(n)}${i}`:i==="]"&&n.length%2===0?`[${yGe(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],the=Object.create(null),EGe=(t,e)=>{let r=the[t];return r||(r=bGe.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),the[t]=r),e?new RegExp(r,"i"):new RegExp(r)},dq=t=>typeof t=="string",TGe=t=>t&&dq(t)&&!pGe.test(t)&&!dGe.test(t)&&t.indexOf("#")!==0,SGe=t=>t.split(hGe),uq=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},CGe=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(fGe,"!").replace(mGe,"#");let i=EGe(t,e);return new uq(r,t,n,i)},IGe=(t,e)=>{throw new e(t)},Hp=(t,e,r)=>dq(t)?t?Hp.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),ohe=t=>gGe.test(t);Hp.isNotRelative=ohe;Hp.convert=t=>t;var pq=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){vGe(this,ehe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[ehe]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(TGe(e)){let r=CGe(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,Jme(dq(e)?SGe(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!r)return;o.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let o=e&&Hp.convert(e);return Hp(o,e,this._allowRelativePaths?ihe:IGe),this._t(o,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(lq)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let o=this._t(i.join(lq)+lq,r,n,i);return r[e]=o.ignored?o:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return Jme(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},vP=t=>new pq(t),wGe=t=>Hp(t&&Hp.convert(t),t,ihe);vP.isPathValid=wGe;vP.default=vP;she.exports=vP;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Hp.convert=t;let e=/^[a-z]:\//i;Hp.isNotRelative=r=>e.test(r)||ohe(r)}});var kq=k(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.TargetPopulation=hm.Filters=hm.VSCodeFilterProvider=void 0;var nN=require("vscode"),Nq=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case lu.ApplicationVersion:return t.trimVersionSuffix(nN.version);case lu.Build:return nN.env.appName;case lu.ClientId:return nN.env.machineId;case lu.ExtensionName:return this.extensionName;case lu.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case lu.Language:return nN.env.language;case lu.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(lu);for(let n of r)e.set(n,this.getFilterValue(n));return e}};hm.VSCodeFilterProvider=Nq;var lu;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(lu||(hm.Filters=lu={}));var tge;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(tge||(hm.TargetPopulation=tge={}))});var rge=k(iN=>{"use strict";Object.defineProperty(iN,"__esModule",{value:!0});iN.BaseFeatureProvider=void 0;var Oq=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};iN.BaseFeatureProvider=Oq});var nge=k(oN=>{"use strict";Object.defineProperty(oN,"__esModule",{value:!0});oN.FilteredFeatureProvider=void 0;var sVe=rge(),Lq=class extends sVe.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};oN.FilteredFeatureProvider=Lq});var ige=k(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});gm.TasApiFeatureProvider=gm.TASAPI_FETCHERROR_EVENTNAME=void 0;var aVe=nge();gm.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var Mq="ErrorType",Fq=class extends aVe.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let l=e.get(a);r[a]=l}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let l=a,c=new Map;l.response?c.set(Mq,"ServerError"):l.request?c.set(Mq,"NoResponse"):c.set(Mq,"GenericError"),this.telemetry.postEvent(gm.TASAPI_FETCHERROR_EVENTNAME,c)}if(!n)throw Error(gm.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let l of Object.keys(a.Parameters)){let c=l+(a.Parameters[l]?"":"cf");s.includes(c)||s.push(c)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};gm.TasApiFeatureProvider=Fq});var sge=k(oge=>{"use strict";var cVe=require("url").parse,lVe={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},uVe=String.prototype.endsWith||function(t){return t.length<=this.length&&this.indexOf(t,this.length-t.length)!==-1};function pVe(t){var e=typeof t=="string"?cVe(t):t||{},r=e.protocol,n=e.host,i=e.port;if(typeof n!="string"||!n||typeof r!="string"||(r=r.split(":",1)[0],n=n.replace(/:\d*$/,""),i=parseInt(i)||lVe[r]||0,!dVe(n,i)))return"";var o=a1("npm_config_"+r+"_proxy")||a1(r+"_proxy")||a1("npm_config_proxy")||a1("all_proxy");return o&&o.indexOf("://")===-1&&(o=r+"://"+o),o}function dVe(t,e){var r=(a1("npm_config_no_proxy")||a1("no_proxy")).toLowerCase();return r?r==="*"?!1:r.split(/[,\s]/).every(function(n){if(!n)return!0;var i=n.match(/^(.+):(\d+)$/),o=i?i[1]:n,s=i?parseInt(i[2]):0;return s&&s!==e?!0:/^[.*]/.test(o)?(o.charAt(0)==="*"&&(o=o.slice(1)),!uVe.call(t,o)):t!==o}):!0}function a1(t){return process.env[t.toLowerCase()]||process.env[t.toUpperCase()]||""}oge.getProxyForUrl=pVe});var cge=k((B3t,age)=>{var QT;age.exports=function(){if(!QT){try{QT=Va()("follow-redirects")}catch{}typeof QT!="function"&&(QT=function(){})}QT.apply(null,arguments)}});var hge=k((q3t,Vq)=>{var bv=require("url"),Uq=bv.URL,fVe=require("http"),mVe=require("https"),qq=require("stream").Writable,pge=require("assert"),dge=cge(),Hq=["abort","aborted","connect","error","socket","timeout"],jq=Object.create(null);Hq.forEach(function(t){jq[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var hVe=JT("ERR_INVALID_URL","Invalid URL",TypeError),lge=JT("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),gVe=JT("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),vVe=JT("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),_Ve=JT("ERR_STREAM_WRITE_AFTER_END","write after end"),yVe=qq.prototype.destroy||mge;function Os(t,e){qq.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Os.prototype=Object.create(qq.prototype);Os.prototype.abort=function(){Gq(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Os.prototype.destroy=function(t){return Gq(this._currentRequest,t),yVe.call(this,t),this};Os.prototype.write=function(t,e,r){if(this._ending)throw new _Ve;if(!Ev(t)&&!bVe(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(XT(e)&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new vVe),this.abort())};Os.prototype.end=function(t,e,r){if(XT(t)?(r=t,t=e=null):XT(e)&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Os.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Os.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Os.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),r.removeListener("close",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this.on("close",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Os.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Os.prototype,t,{get:function(){return this._currentRequest[t]}})});Os.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Os.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Hq)n.on(i,jq[i]);if(this._currentUrl=/^\//.test(this._options.path)?bv.format(this._options):this._options.path,this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function l(c){if(n===s._currentRequest)if(c)s.emit("error",c);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,l)}else s._ended&&n.end()})()}};Os.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(Gq(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new gVe);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var o=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Bq(/^content-/i,this._options.headers));var s=Bq(/^host$/i,this._options.headers),a=bv.parse(this._currentUrl),l=s||a.host,c=/^\w+:/.test(r)?this._currentUrl:bv.format(Object.assign(a,{host:l})),u;try{u=bv.resolve(c,r)}catch(m){this.emit("error",new lge({cause:m}));return}dge("redirecting to",u),this._isRedirect=!0;var p=bv.parse(u);if(Object.assign(this._options,p),(p.protocol!==a.protocol&&p.protocol!=="https:"||p.host!==l&&!xVe(p.host,l))&&Bq(/^(?:authorization|cookie)$/i,this._options.headers),XT(i)){var d={headers:t.headers,statusCode:e},f={url:c,method:o,headers:n};try{i(this._options,d,f)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new lge({cause:m}))}};function fge(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(c,u,p){if(Ev(c)){var d;try{d=uge(new Uq(c))}catch{d=bv.parse(c)}if(!Ev(d.protocol))throw new hVe({input:c});c=d}else Uq&&c instanceof Uq?c=uge(c):(p=u,u=c,c={protocol:i});return XT(u)&&(p=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},c,u),u.nativeProtocols=r,!Ev(u.host)&&!Ev(u.hostname)&&(u.hostname="::1"),pge.equal(u.protocol,i,"protocol mismatch"),dge("options",u),new Os(u,p)}function l(c,u,p){var d=s.request(c,u,p);return d.end(),d}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:l,configurable:!0,enumerable:!0,writable:!0}})}),e}function mge(){}function uge(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Bq(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function JT(t,e,r){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(r||Error),n.prototype.constructor=n,n.prototype.name="Error ["+t+"]",n}function Gq(t,e){for(var r of Hq)t.removeListener(r,jq[r]);t.on("error",mge),t.destroy(e)}function xVe(t,e){pge(Ev(t)&&Ev(e));var r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}function Ev(t){return typeof t=="string"||t instanceof String}function XT(t){return typeof t=="function"}function bVe(t){return typeof t=="object"&&"length"in t}Vq.exports=fge({http:fVe,https:mVe});Vq.exports.wrap=fge});var ove=k((H3t,ive)=>{"use strict";var EVe=R6(),TVe=require("url"),SVe=sge(),CVe=require("http"),IVe=require("https"),kge=require("util"),wVe=hge(),AVe=require("zlib"),Oge=require("stream"),RVe=require("events");function Vp(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Lge=Vp(EVe),DVe=Vp(TVe),PVe=Vp(CVe),NVe=Vp(IVe),kVe=Vp(kge),OVe=Vp(wVe),xm=Vp(AVe),_m=Vp(Oge),LVe=Vp(RVe);function Mge(t,e){return function(){return t.apply(e,arguments)}}var{toString:MVe}=Object.prototype,{getPrototypeOf:oH}=Object,pN=(t=>e=>{let r=MVe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),uu=t=>(t=t.toLowerCase(),e=>pN(e)===t),dN=t=>e=>typeof e===t,{isArray:p1}=Array,tS=dN("undefined");function FVe(t){return t!==null&&!tS(t)&&t.constructor!==null&&!tS(t.constructor)&&oc(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var Fge=uu("ArrayBuffer");function UVe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Fge(t.buffer),e}var BVe=dN("string"),oc=dN("function"),Uge=dN("number"),fN=t=>t!==null&&typeof t=="object",qVe=t=>t===!0||t===!1,aN=t=>{if(pN(t)!=="object")return!1;let e=oH(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},HVe=uu("Date"),jVe=uu("File"),GVe=uu("Blob"),VVe=uu("FileList"),zVe=t=>fN(t)&&oc(t.pipe),$Ve=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||oc(t.append)&&((e=pN(t))==="formdata"||e==="object"&&oc(t.toString)&&t.toString()==="[object FormData]"))},WVe=uu("URLSearchParams"),KVe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nS(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),p1(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{let o=r?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length,a;for(n=0;n<s;n++)a=o[n],e.call(null,t[a],a,t)}}function Bge(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}var qge=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Hge=t=>!tS(t)&&t!==qge;function Yq(){let{caseless:t}=Hge(this)&&this||{},e={},r=(n,i)=>{let o=t&&Bge(e,i)||i;aN(e[o])&&aN(n)?e[o]=Yq(e[o],n):aN(n)?e[o]=Yq({},n):p1(n)?e[o]=n.slice():e[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&nS(arguments[n],r);return e}var YVe=(t,e,r,{allOwnKeys:n}={})=>(nS(e,(i,o)=>{r&&oc(i)?t[o]=Mge(i,r):t[o]=i},{allOwnKeys:n}),t),QVe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),XVe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},JVe=(t,e,r,n)=>{let i,o,s,a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],(!n||n(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=r!==!1&&oH(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},ZVe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},eze=t=>{if(!t)return null;if(p1(t))return t;let e=t.length;if(!Uge(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},tze=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&oH(Uint8Array)),rze=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),i;for(;(i=n.next())&&!i.done;){let o=i.value;e.call(t,o[0],o[1])}},nze=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},ize=uu("HTMLFormElement"),oze=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),gge=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),sze=uu("RegExp"),jge=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};nS(r,(i,o)=>{let s;(s=e(i,o,t))!==!1&&(n[o]=s||i)}),Object.defineProperties(t,n)},aze=t=>{jge(t,(e,r)=>{if(oc(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(oc(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},cze=(t,e)=>{let r={},n=i=>{i.forEach(o=>{r[o]=!0})};return p1(t)?n(t):n(String(t).split(e)),r},lze=()=>{},uze=(t,e)=>(t=+t,Number.isFinite(t)?t:e),zq="abcdefghijklmnopqrstuvwxyz",vge="0123456789",Gge={DIGIT:vge,ALPHA:zq,ALPHA_DIGIT:zq+zq.toUpperCase()+vge},pze=(t=16,e=Gge.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function dze(t){return!!(t&&oc(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var fze=t=>{let e=new Array(10),r=(n,i)=>{if(fN(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;let o=p1(n)?[]:{};return nS(n,(s,a)=>{let l=r(s,i+1);!tS(l)&&(o[a]=l)}),e[i]=void 0,o}}return n};return r(t,0)},mze=uu("AsyncFunction"),hze=t=>t&&(fN(t)||oc(t))&&oc(t.then)&&oc(t.catch),he={isArray:p1,isArrayBuffer:Fge,isBuffer:FVe,isFormData:$Ve,isArrayBufferView:UVe,isString:BVe,isNumber:Uge,isBoolean:qVe,isObject:fN,isPlainObject:aN,isUndefined:tS,isDate:HVe,isFile:jVe,isBlob:GVe,isRegExp:sze,isFunction:oc,isStream:zVe,isURLSearchParams:WVe,isTypedArray:tze,isFileList:VVe,forEach:nS,merge:Yq,extend:YVe,trim:KVe,stripBOM:QVe,inherits:XVe,toFlatObject:JVe,kindOf:pN,kindOfTest:uu,endsWith:ZVe,toArray:eze,forEachEntry:rze,matchAll:nze,isHTMLForm:ize,hasOwnProperty:gge,hasOwnProp:gge,reduceDescriptors:jge,freezeMethods:aze,toObjectSet:cze,toCamelCase:oze,noop:lze,toFiniteNumber:uze,findKey:Bge,global:qge,isContextDefined:Hge,ALPHABET:Gge,generateString:pze,isSpecCompliantForm:dze,toJSONObject:fze,isAsyncFn:mze,isThenable:hze};function ot(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}he.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Vge=ot.prototype,zge={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zge[t]={value:t}});Object.defineProperties(ot,zge);Object.defineProperty(Vge,"isAxiosError",{value:!0});ot.from=(t,e,r,n,i,o)=>{let s=Object.create(Vge);return he.toFlatObject(t,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ot.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};function Qq(t){return he.isPlainObject(t)||he.isArray(t)}function $ge(t){return he.endsWith(t,"[]")?t.slice(0,-2):t}function _ge(t,e,r){return t?t.concat(e).map(function(i,o){return i=$ge(i),!r&&o?"["+i+"]":i}).join(r?".":""):e}function gze(t){return he.isArray(t)&&!t.some(Qq)}var vze=he.toFlatObject(he,{},null,function(e){return/^is[A-Z]/.test(e)});function mN(t,e,r){if(!he.isObject(t))throw new TypeError("target must be an object");e=e||new(Lge.default||FormData),r=he.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,g){return!he.isUndefined(g[h])});let n=r.metaTokens,i=r.visitor||u,o=r.dots,s=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(e);if(!he.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(he.isDate(m))return m.toISOString();if(!l&&he.isBlob(m))throw new ot("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(m)||he.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,h,g){let v=m;if(m&&!g&&typeof m=="object"){if(he.endsWith(h,"{}"))h=n?h:h.slice(0,-2),m=JSON.stringify(m);else if(he.isArray(m)&&gze(m)||(he.isFileList(m)||he.endsWith(h,"[]"))&&(v=he.toArray(m)))return h=$ge(h),v.forEach(function(y,b){!(he.isUndefined(y)||y===null)&&e.append(s===!0?_ge([h],b,o):s===null?h:h+"[]",c(y))}),!1}return Qq(m)?!0:(e.append(_ge(g,h,o),c(m)),!1)}let p=[],d=Object.assign(vze,{defaultVisitor:u,convertValue:c,isVisitable:Qq});function f(m,h){if(!he.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+h.join("."));p.push(m),he.forEach(m,function(v,_){(!(he.isUndefined(v)||v===null)&&i.call(e,v,he.isString(_)?_.trim():_,h,d))===!0&&f(v,h?h.concat(_):[_])}),p.pop()}}if(!he.isObject(t))throw new TypeError("data must be an object");return f(t),e}function yge(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Wge(t,e){this._pairs=[],t&&mN(t,this,e)}var Kge=Wge.prototype;Kge.append=function(e,r){this._pairs.push([e,r])};Kge.toString=function(e){let r=e?function(n){return e.call(this,n,yge)}:yge;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function _ze(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sH(t,e,r){if(!e)return t;let n=r&&r.encode||_ze,i=r&&r.serialize,o;if(i?o=i(e,r):o=he.isURLSearchParams(e)?e.toString():new Wge(e,r).toString(n),o){let s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}var Xq=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){he.forEach(this.handlers,function(n){n!==null&&e(n)})}},xge=Xq,aH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yze=DVe.default.URLSearchParams,xze={isNode:!0,classes:{URLSearchParams:yze,FormData:Lge.default,Blob:typeof Blob<"u"&&Blob||null},protocols:["http","https","file","data"]},Yge=typeof window<"u"&&typeof document<"u",bze=(t=>Yge&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Eze=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Tze=Object.freeze({__proto__:null,hasBrowserEnv:Yge,hasStandardBrowserWebWorkerEnv:Eze,hasStandardBrowserEnv:bze}),ic={...Tze,...xze};function Sze(t,e){return mN(t,new ic.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return ic.isNode&&he.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Cze(t){return he.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ize(t){let e={},r=Object.keys(t),n,i=r.length,o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}function Qge(t){function e(r,n,i,o){let s=r[o++],a=Number.isFinite(+s),l=o>=r.length;return s=!s&&he.isArray(i)?i.length:s,l?(he.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a):((!i[s]||!he.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],o)&&he.isArray(i[s])&&(i[s]=Ize(i[s])),!a)}if(he.isFormData(t)&&he.isFunction(t.entries)){let r={};return he.forEachEntry(t,(n,i)=>{e(Cze(n),i,r,0)}),r}return null}function wze(t,e,r){if(he.isString(t))try{return(e||JSON.parse)(t),he.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var cH={transitional:aH,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=he.isObject(e);if(o&&he.isHTMLForm(e)&&(e=new FormData(e)),he.isFormData(e))return i&&i?JSON.stringify(Qge(e)):e;if(he.isArrayBuffer(e)||he.isBuffer(e)||he.isStream(e)||he.isFile(e)||he.isBlob(e))return e;if(he.isArrayBufferView(e))return e.buffer;if(he.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Sze(e,this.formSerializer).toString();if((a=he.isFileList(e))||n.indexOf("multipart/form-data")>-1){let l=this.env&&this.env.FormData;return mN(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),wze(e)):e}],transformResponse:[function(e){let r=this.transitional||cH.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&he.isString(e)&&(n&&!this.responseType||i)){let s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?ot.from(a,ot.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ic.classes.FormData,Blob:ic.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],t=>{cH.headers[t]={}});var lH=cH,Aze=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rze=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&Aze[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},bge=Symbol("internals");function ZT(t){return t&&String(t).trim().toLowerCase()}function cN(t){return t===!1||t==null?t:he.isArray(t)?t.map(cN):String(t)}function Dze(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var Pze=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $q(t,e,r,n,i){if(he.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!he.isString(e)){if(he.isString(n))return e.indexOf(n)!==-1;if(he.isRegExp(n))return n.test(e)}}function Nze(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function kze(t,e){let r=he.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,o,s){return this[n].call(this,e,i,o,s)},configurable:!0})})}var c1=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function o(a,l,c){let u=ZT(l);if(!u)throw new Error("header name must be a non-empty string");let p=he.findKey(i,u);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=cN(a))}let s=(a,l)=>he.forEach(a,(c,u)=>o(c,u,l));return he.isPlainObject(e)||e instanceof this.constructor?s(e,r):he.isString(e)&&(e=e.trim())&&!Pze(e)?s(Rze(e),r):e!=null&&o(r,e,n),this}get(e,r){if(e=ZT(e),e){let n=he.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return Dze(i);if(he.isFunction(r))return r.call(this,i,n);if(he.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ZT(e),e){let n=he.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||$q(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function o(s){if(s=ZT(s),s){let a=he.findKey(n,s);a&&(!r||$q(n,n[a],a,r))&&(delete n[a],i=!0)}}return he.isArray(e)?e.forEach(o):o(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let o=r[n];(!e||$q(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){let r=this,n={};return he.forEach(this,(i,o)=>{let s=he.findKey(n,o);if(s){r[s]=cN(i),delete r[o];return}let a=e?Nze(o):String(o).trim();a!==o&&delete r[o],r[a]=cN(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return he.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&he.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[bge]=this[bge]={accessors:{}}).accessors,i=this.prototype;function o(s){let a=ZT(s);n[a]||(kze(i,s),n[a]=!0)}return he.isArray(e)?e.forEach(o):o(e),this}};c1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(c1.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});he.freezeMethods(c1);var sc=c1;function Wq(t,e){let r=this||lH,n=e||r,i=sc.from(n.headers),o=n.data;return he.forEach(t,function(a){o=a.call(r,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function Xge(t){return!!(t&&t.__CANCEL__)}function Tv(t,e,r){ot.call(this,t??"canceled",ot.ERR_CANCELED,e,r),this.name="CanceledError"}he.inherits(Tv,ot,{__CANCEL__:!0});function eS(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ot("Request failed with status code "+r.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Oze(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Lze(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function uH(t,e){return t&&!Oze(e)?Lze(t,e):e}var uN="1.6.1";function Jge(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}var Mze=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function Fze(t,e,r){let n=r&&r.Blob||ic.classes.Blob,i=Jge(t);if(e===void 0&&n&&(e=!0),i==="data"){t=i.length?t.slice(i.length+1):t;let o=Mze.exec(t);if(!o)throw new ot("Invalid URL",ot.ERR_INVALID_URL);let s=o[1],a=o[2],l=o[3],c=Buffer.from(decodeURIComponent(l),a?"base64":"utf8");if(e){if(!n)throw new ot("Blob is not supported",ot.ERR_NOT_SUPPORT);return new n([c],{type:s})}return c}throw new ot("Unsupported protocol "+i,ot.ERR_NOT_SUPPORT)}function Uze(t,e){let r=0,n=1e3/e,i=null;return function(s,a){let l=Date.now();if(s||l-r>n)return i&&(clearTimeout(i),i=null),r=l,t.apply(null,a);i||(i=setTimeout(()=>(i=null,r=Date.now(),t.apply(null,a)),n-(l-r)))}}function Zge(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,o=0,s;return e=e!==void 0?e:1e3,function(l){let c=Date.now(),u=n[o];s||(s=c),r[i]=l,n[i]=c;let p=o,d=0;for(;p!==i;)d+=r[p++],p=p%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),c-s<e)return;let f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}var sN=Symbol("internals"),Jq=class extends _m.default.Transform{constructor(e){e=he.toFlatObject(e,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(a,l)=>!he.isUndefined(l[a])),super({readableHighWaterMark:e.chunkSize});let r=this,n=this[sN]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},i=Zge(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",a=>{a==="progress"&&(n.isCaptured||(n.isCaptured=!0))});let o=0;n.updateProgress=Uze(function(){let l=n.length,c=n.bytesSeen,u=c-o;if(!u||r.destroyed)return;let p=i(u);o=c,process.nextTick(()=>{r.emit("progress",{loaded:c,total:l,progress:l?c/l:void 0,bytes:u,rate:p||void 0,estimated:p&&l&&c<=l?(l-c)/p:void 0})})},n.ticksRate);let s=()=>{n.updateProgress(!0)};this.once("end",s),this.once("error",s)}_read(e){let r=this[sN];return r.onReadCallback&&r.onReadCallback(),super._read(e)}_transform(e,r,n){let i=this,o=this[sN],s=o.maxRate,a=this.readableHighWaterMark,l=o.timeWindow,c=1e3/l,u=s/c,p=o.minChunkSize!==!1?Math.max(o.minChunkSize,u*.01):0;function d(m,h){let g=Buffer.byteLength(m);o.bytesSeen+=g,o.bytes+=g,o.isCaptured&&o.updateProgress(),i.push(m)?process.nextTick(h):o.onReadCallback=()=>{o.onReadCallback=null,process.nextTick(h)}}let f=(m,h)=>{let g=Buffer.byteLength(m),v=null,_=a,y,b=0;if(s){let x=Date.now();(!o.ts||(b=x-o.ts)>=l)&&(o.ts=x,y=u-o.bytes,o.bytes=y<0?-y:0,b=0),y=u-o.bytes}if(s){if(y<=0)return setTimeout(()=>{h(null,m)},l-b);y<_&&(_=y)}_&&g>_&&g-_>p&&(v=m.subarray(_),m=m.subarray(0,_)),d(m,v?()=>{process.nextTick(h,null,v)}:h)};f(e,function m(h,g){if(h)return n(h);g?f(g,m):n(null)})}setLength(e){return this[sN].length=+e,this}},Ege=Jq,{asyncIterator:Tge}=Symbol,Bze=async function*(t){t.stream?yield*t.stream():t.arrayBuffer?yield await t.arrayBuffer():t[Tge]?yield*t[Tge]():yield t},eve=Bze,qze=he.ALPHABET.ALPHA_DIGIT+"-_",rS=new kge.TextEncoder,ym=`\r
`,Hze=rS.encode(ym),jze=2,Zq=class{constructor(e,r){let{escapeName:n}=this.constructor,i=he.isString(r),o=`Content-Disposition: form-data; name="${n(e)}"${!i&&r.name?`; filename="${n(r.name)}"`:""}${ym}`;i?r=rS.encode(String(r).replace(/\r?\n|\r\n?/g,ym)):o+=`Content-Type: ${r.type||"application/octet-stream"}${ym}`,this.headers=rS.encode(o+ym),this.contentLength=i?r.byteLength:r.size,this.size=this.headers.byteLength+this.contentLength+jze,this.name=e,this.value=r}async*encode(){yield this.headers;let{value:e}=this;he.isTypedArray(e)?yield e:yield*eve(e),yield Hze}static escapeName(e){return String(e).replace(/[\r\n"]/g,r=>({"\r":"%0D","\n":"%0A",'"':"%22"})[r])}},Gze=(t,e,r)=>{let{tag:n="form-data-boundary",size:i=25,boundary:o=n+"-"+he.generateString(i,qze)}=r||{};if(!he.isFormData(t))throw TypeError("FormData instance required");if(o.length<1||o.length>70)throw Error("boundary must be 10-70 characters long");let s=rS.encode("--"+o+ym),a=rS.encode("--"+o+"--"+ym+ym),l=a.byteLength,c=Array.from(t.entries()).map(([p,d])=>{let f=new Zq(p,d);return l+=f.size,f});l+=s.byteLength*c.length,l=he.toFiniteNumber(l);let u={"Content-Type":`multipart/form-data; boundary=${o}`};return Number.isFinite(l)&&(u["Content-Length"]=l),e&&e(u),Oge.Readable.from(async function*(){for(let p of c)yield s,yield*p.encode();yield a}())},Vze=Gze,eH=class extends _m.default.Transform{__transform(e,r,n){this.push(e),n()}_transform(e,r,n){if(e.length!==0&&(this._transform=this.__transform,e[0]!==120)){let i=Buffer.alloc(2);i[0]=120,i[1]=156,this.push(i,r)}this.__transform(e,r,n)}},zze=eH,$ze=(t,e)=>he.isAsyncFn(t)?function(...r){let n=r.pop();t.apply(this,r).then(i=>{try{e?n(null,...e(i)):n(null,i)}catch(o){n(o)}},n)}:t,Wze=$ze,Sge={flush:xm.default.constants.Z_SYNC_FLUSH,finishFlush:xm.default.constants.Z_SYNC_FLUSH},Kze={flush:xm.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:xm.default.constants.BROTLI_OPERATION_FLUSH},Cge=he.isFunction(xm.default.createBrotliDecompress),{http:Yze,https:Qze}=OVe.default,Xze=/https:?/,Ige=ic.protocols.map(t=>t+":");function Jze(t){t.beforeRedirects.proxy&&t.beforeRedirects.proxy(t),t.beforeRedirects.config&&t.beforeRedirects.config(t)}function tve(t,e,r){let n=e;if(!n&&n!==!1){let i=SVe.getProxyForUrl(r);i&&(n=new URL(i))}if(n){if(n.username&&(n.auth=(n.username||"")+":"+(n.password||"")),n.auth){(n.auth.username||n.auth.password)&&(n.auth=(n.auth.username||"")+":"+(n.auth.password||""));let o=Buffer.from(n.auth,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+o}t.headers.host=t.hostname+(t.port?":"+t.port:"");let i=n.hostname||n.host;t.hostname=i,t.host=i,t.port=n.port,t.path=r,n.protocol&&(t.protocol=n.protocol.includes(":")?n.protocol:`${n.protocol}:`)}t.beforeRedirects.proxy=function(o){tve(o,e,o.href)}}var Zze=typeof process<"u"&&he.kindOf(process)==="process",e$e=t=>new Promise((e,r)=>{let n,i,o=(l,c)=>{i||(i=!0,n&&n(l,c))},s=l=>{o(l),e(l)},a=l=>{o(l,!0),r(l)};t(s,a,l=>n=l).catch(a)}),t$e=({address:t,family:e})=>{if(!he.isString(t))throw TypeError("address must be a string");return{address:t,family:e||(t.indexOf(".")<0?6:4)}},wge=(t,e)=>t$e(he.isObject(t)?t:{address:t,family:e}),r$e=Zze&&function(e){return e$e(async function(n,i,o){let{data:s,lookup:a,family:l}=e,{responseType:c,responseEncoding:u}=e,p=e.method.toUpperCase(),d,f=!1,m;if(a){let A=Wze(a,J=>he.isArray(J)?J:[J]);a=(J,me,ce)=>{A(J,me,(ae,se,je)=>{let Ye=he.isArray(se)?se.map(Ze=>wge(Ze)):[wge(se,je)];me.all?ce(ae,Ye):ce(ae,Ye[0].address,Ye[0].family)})}}let h=new LVe.default,g=()=>{e.cancelToken&&e.cancelToken.unsubscribe(v),e.signal&&e.signal.removeEventListener("abort",v),h.removeAllListeners()};o((A,J)=>{d=!0,J&&(f=!0,g())});function v(A){h.emit("abort",!A||A.type?new Tv(null,e,m):A)}h.once("abort",i),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(v),e.signal&&(e.signal.aborted?v():e.signal.addEventListener("abort",v)));let _=uH(e.baseURL,e.url),y=new URL(_,"http://localhost"),b=y.protocol||Ige[0];if(b==="data:"){let A;if(p!=="GET")return eS(n,i,{status:405,statusText:"method not allowed",headers:{},config:e});try{A=Fze(e.url,c==="blob",{Blob:e.env&&e.env.Blob})}catch(J){throw ot.from(J,ot.ERR_BAD_REQUEST,e)}return c==="text"?(A=A.toString(u),(!u||u==="utf8")&&(A=he.stripBOM(A))):c==="stream"&&(A=_m.default.Readable.from(A)),eS(n,i,{data:A,status:200,statusText:"OK",headers:new sc,config:e})}if(Ige.indexOf(b)===-1)return i(new ot("Unsupported protocol "+b,ot.ERR_BAD_REQUEST,e));let x=sc.from(e.headers).normalize();x.set("User-Agent","axios/"+uN,!1);let P=e.onDownloadProgress,U=e.onUploadProgress,H=e.maxRate,j,M;if(he.isSpecCompliantForm(s)){let A=x.getContentType(/boundary=([-_\w\d]{10,70})/i);s=Vze(s,J=>{x.set(J)},{tag:`axios-${uN}-boundary`,boundary:A&&A[1]||void 0})}else if(he.isFormData(s)&&he.isFunction(s.getHeaders)){if(x.set(s.getHeaders()),!x.hasContentLength())try{let A=await kVe.default.promisify(s.getLength).call(s);Number.isFinite(A)&&A>=0&&x.setContentLength(A)}catch{}}else if(he.isBlob(s))s.size&&x.setContentType(s.type||"application/octet-stream"),x.setContentLength(s.size||0),s=_m.default.Readable.from(eve(s));else if(s&&!he.isStream(s)){if(!Buffer.isBuffer(s))if(he.isArrayBuffer(s))s=Buffer.from(new Uint8Array(s));else if(he.isString(s))s=Buffer.from(s,"utf-8");else return i(new ot("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",ot.ERR_BAD_REQUEST,e));if(x.setContentLength(s.length,!1),e.maxBodyLength>-1&&s.length>e.maxBodyLength)return i(new ot("Request body larger than maxBodyLength limit",ot.ERR_BAD_REQUEST,e))}let F=he.toFiniteNumber(x.getContentLength());he.isArray(H)?(j=H[0],M=H[1]):j=M=H,s&&(U||j)&&(he.isStream(s)||(s=_m.default.Readable.from(s,{objectMode:!1})),s=_m.default.pipeline([s,new Ege({length:F,maxRate:he.toFiniteNumber(j)})],he.noop),U&&s.on("progress",A=>{U(Object.assign(A,{upload:!0}))}));let z;if(e.auth){let A=e.auth.username||"",J=e.auth.password||"";z=A+":"+J}if(!z&&y.username){let A=y.username,J=y.password;z=A+":"+J}z&&x.delete("authorization");let q;try{q=sH(y.pathname+y.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(A){let J=new Error(A.message);return J.config=e,J.url=e.url,J.exists=!0,i(J)}x.set("Accept-Encoding","gzip, compress, deflate"+(Cge?", br":""),!1);let L={path:q,method:p,headers:x.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:z,protocol:b,family:l,beforeRedirect:Jze,beforeRedirects:{}};!he.isUndefined(a)&&(L.lookup=a),e.socketPath?L.socketPath=e.socketPath:(L.hostname=y.hostname,L.port=y.port,tve(L,e.proxy,b+"//"+y.hostname+(y.port?":"+y.port:"")+L.path));let S,T=Xze.test(L.protocol);if(L.agent=T?e.httpsAgent:e.httpAgent,e.transport?S=e.transport:e.maxRedirects===0?S=T?NVe.default:PVe.default:(e.maxRedirects&&(L.maxRedirects=e.maxRedirects),e.beforeRedirect&&(L.beforeRedirects.config=e.beforeRedirect),S=T?Qze:Yze),e.maxBodyLength>-1?L.maxBodyLength=e.maxBodyLength:L.maxBodyLength=1/0,e.insecureHTTPParser&&(L.insecureHTTPParser=e.insecureHTTPParser),m=S.request(L,function(J){if(m.destroyed)return;let me=[J],ce=+J.headers["content-length"];if(P){let Ze=new Ege({length:he.toFiniteNumber(ce),maxRate:he.toFiniteNumber(M)});P&&Ze.on("progress",ke=>{P(Object.assign(ke,{download:!0}))}),me.push(Ze)}let ae=J,se=J.req||m;if(e.decompress!==!1&&J.headers["content-encoding"])switch((p==="HEAD"||J.statusCode===204)&&delete J.headers["content-encoding"],(J.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":me.push(xm.default.createUnzip(Sge)),delete J.headers["content-encoding"];break;case"deflate":me.push(new zze),me.push(xm.default.createUnzip(Sge)),delete J.headers["content-encoding"];break;case"br":Cge&&(me.push(xm.default.createBrotliDecompress(Kze)),delete J.headers["content-encoding"])}ae=me.length>1?_m.default.pipeline(me,he.noop):me[0];let je=_m.default.finished(ae,()=>{je(),g()}),Ye={status:J.statusCode,statusText:J.statusMessage,headers:new sc(J.headers),config:e,request:se};if(c==="stream")Ye.data=ae,eS(n,i,Ye);else{let Ze=[],ke=0;ae.on("data",function(et){Ze.push(et),ke+=et.length,e.maxContentLength>-1&&ke>e.maxContentLength&&(f=!0,ae.destroy(),i(new ot("maxContentLength size of "+e.maxContentLength+" exceeded",ot.ERR_BAD_RESPONSE,e,se)))}),ae.on("aborted",function(){if(f)return;let et=new ot("maxContentLength size of "+e.maxContentLength+" exceeded",ot.ERR_BAD_RESPONSE,e,se);ae.destroy(et),i(et)}),ae.on("error",function(et){m.destroyed||i(ot.from(et,null,e,se))}),ae.on("end",function(){try{let et=Ze.length===1?Ze[0]:Buffer.concat(Ze);c!=="arraybuffer"&&(et=et.toString(u),(!u||u==="utf8")&&(et=he.stripBOM(et))),Ye.data=et}catch(et){return i(ot.from(et,null,e,Ye.request,Ye))}eS(n,i,Ye)})}h.once("abort",Ze=>{ae.destroyed||(ae.emit("error",Ze),ae.destroy())})}),h.once("abort",A=>{i(A),m.destroy(A)}),m.on("error",function(J){i(ot.from(J,null,e,m))}),m.on("socket",function(J){J.setKeepAlive(!0,1e3*60)}),e.timeout){let A=parseInt(e.timeout,10);if(Number.isNaN(A)){i(new ot("error trying to parse `config.timeout` to int",ot.ERR_BAD_OPTION_VALUE,e,m));return}m.setTimeout(A,function(){if(d)return;let me=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",ce=e.transitional||aH;e.timeoutErrorMessage&&(me=e.timeoutErrorMessage),i(new ot(me,ce.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,e,m)),v()})}if(he.isStream(s)){let A=!1,J=!1;s.on("end",()=>{A=!0}),s.once("error",me=>{J=!0,m.destroy(me)}),s.on("close",()=>{!A&&!J&&v(new Tv("Request stream has been aborted",e,m))}),s.pipe(m)}else m.end(s)})},n$e=ic.hasStandardBrowserEnv?function(){return{write:function(r,n,i,o,s,a){let l=[];l.push(r+"="+encodeURIComponent(n)),he.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),he.isString(o)&&l.push("path="+o),he.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){let n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),i$e=ic.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){let s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){let a=he.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function Age(t,e){let r=0,n=Zge(50,250);return i=>{let o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-r,l=n(a),c=o<=s;r=o;let u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&c?(s-o)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}var o$e=typeof XMLHttpRequest<"u",s$e=o$e&&function(t){return new Promise(function(r,n){let i=t.data,o=sc.from(t.headers).normalize(),s=t.responseType,a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;if(he.isFormData(i)){if(ic.hasStandardBrowserEnv||ic.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((c=o.getContentType())!==!1){let[m,...h]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([m||"multipart/form-data",...h].join("; "))}}let u=new XMLHttpRequest;if(t.auth){let m=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(m+":"+h))}let p=uH(t.baseURL,t.url);u.open(t.method.toUpperCase(),sH(p,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function d(){if(!u)return;let m=sc.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!s||s==="text"||s==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:t,request:u};eS(function(_){r(_),l()},function(_){n(_),l()},g),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(n(new ot("Request aborted",ot.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new ot("Network Error",ot.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let h=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",g=t.transitional||aH;t.timeoutErrorMessage&&(h=t.timeoutErrorMessage),n(new ot(h,g.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,t,u)),u=null},ic.hasStandardBrowserEnv){let m=i$e(p)&&t.xsrfCookieName&&n$e.read(t.xsrfCookieName);m&&o.set(t.xsrfHeaderName,m)}i===void 0&&o.setContentType(null),"setRequestHeader"in u&&he.forEach(o.toJSON(),function(h,g){u.setRequestHeader(g,h)}),he.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),s&&s!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Age(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Age(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=m=>{u&&(n(!m||m.type?new Tv(null,t,u):m),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));let f=Jge(p);if(f&&ic.protocols.indexOf(f)===-1){n(new ot("Unsupported protocol "+f+":",ot.ERR_BAD_REQUEST,t));return}u.send(i||null)})},tH={http:r$e,xhr:s$e};he.forEach(tH,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var Rge=t=>`- ${t}`,a$e=t=>he.isFunction(t)||t===null||t===!1,rve={getAdapter:t=>{t=he.isArray(t)?t:[t];let{length:e}=t,r,n,i={};for(let o=0;o<e;o++){r=t[o];let s;if(n=r,!a$e(r)&&(n=tH[(s=String(r)).toLowerCase()],n===void 0))throw new ot(`Unknown adapter '${s}'`);if(n)break;i[s||"#"+o]=n}if(!n){let o=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build")),s=e?o.length>1?`since :
`+o.map(Rge).join(`
`):" "+Rge(o[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:tH};function Kq(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tv(null,t)}function Dge(t){return Kq(t),t.headers=sc.from(t.headers),t.data=Wq.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),rve.getAdapter(t.adapter||lH.adapter)(t).then(function(n){return Kq(t),n.data=Wq.call(t,t.transformResponse,n),n.headers=sc.from(n.headers),n},function(n){return Xge(n)||(Kq(t),n&&n.response&&(n.response.data=Wq.call(t,t.transformResponse,n.response),n.response.headers=sc.from(n.response.headers))),Promise.reject(n)})}var Pge=t=>t instanceof sc?t.toJSON():t;function l1(t,e){e=e||{};let r={};function n(c,u,p){return he.isPlainObject(c)&&he.isPlainObject(u)?he.merge.call({caseless:p},c,u):he.isPlainObject(u)?he.merge({},u):he.isArray(u)?u.slice():u}function i(c,u,p){if(he.isUndefined(u)){if(!he.isUndefined(c))return n(void 0,c,p)}else return n(c,u,p)}function o(c,u){if(!he.isUndefined(u))return n(void 0,u)}function s(c,u){if(he.isUndefined(u)){if(!he.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,p){if(p in e)return n(c,u);if(p in t)return n(void 0,c)}let l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(c,u)=>i(Pge(c),Pge(u),!0)};return he.forEach(Object.keys(Object.assign({},t,e)),function(u){let p=l[u]||i,d=p(t[u],e[u],u);he.isUndefined(d)&&p!==a||(r[u]=d)}),r}var pH={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pH[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Nge={};pH.transitional=function(e,r,n){function i(o,s){return"[Axios v"+uN+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,a)=>{if(e===!1)throw new ot(i(s," has been removed"+(r?" in "+r:"")),ot.ERR_DEPRECATED);return r&&!Nge[s]&&(Nge[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function c$e(t,e,r){if(typeof t!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-- >0;){let o=n[i],s=e[o];if(s){let a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new ot("option "+o+" must be "+l,ot.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ot("Unknown option "+o,ot.ERR_BAD_OPTION)}}var rH={assertOptions:c$e,validators:pH},vm=rH.validators,u1=class{constructor(e){this.defaults=e,this.interceptors={request:new xge,response:new xge}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=l1(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&rH.assertOptions(n,{silentJSONParsing:vm.transitional(vm.boolean),forcedJSONParsing:vm.transitional(vm.boolean),clarifyTimeoutError:vm.transitional(vm.boolean)},!1),i!=null&&(he.isFunction(i)?r.paramsSerializer={serialize:i}:rH.assertOptions(i,{encode:vm.function,serialize:vm.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s=o&&he.merge(o.common,o[r.method]);o&&he.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),r.headers=sc.concat(s,o);let a=[],l=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(l=l&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});let c=[];this.interceptors.response.forEach(function(h){c.push(h.fulfilled,h.rejected)});let u,p=0,d;if(!l){let m=[Dge.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),d=m.length,u=Promise.resolve(r);p<d;)u=u.then(m[p++],m[p++]);return u}d=a.length;let f=r;for(p=0;p<d;){let m=a[p++],h=a[p++];try{f=m(f)}catch(g){h.call(this,g);break}}try{u=Dge.call(this,f)}catch(m){return Promise.reject(m)}for(p=0,d=c.length;p<d;)u=u.then(c[p++],c[p++]);return u}getUri(e){e=l1(this.defaults,e);let r=uH(e.baseURL,e.url);return sH(r,e.params,e.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(e){u1.prototype[e]=function(r,n){return this.request(l1(n||{},{method:e,url:r,data:(n||{}).data}))}});he.forEach(["post","put","patch"],function(e){function r(n){return function(o,s,a){return this.request(l1(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}u1.prototype[e]=r(),u1.prototype[e+"Form"]=r(!0)});var lN=u1,nH=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});let n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o,s=new Promise(a=>{n.subscribe(a),o=a}).then(i);return s.cancel=function(){n.unsubscribe(o)},s},e(function(o,s,a){n.reason||(n.reason=new Tv(o,s,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},l$e=nH;function u$e(t){return function(r){return t.apply(null,r)}}function p$e(t){return he.isObject(t)&&t.isAxiosError===!0}var iH={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(iH).forEach(([t,e])=>{iH[e]=t});var d$e=iH;function nve(t){let e=new lN(t),r=Mge(lN.prototype.request,e);return he.extend(r,lN.prototype,e,{allOwnKeys:!0}),he.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return nve(l1(t,i))},r}var ai=nve(lH);ai.Axios=lN;ai.CanceledError=Tv;ai.CancelToken=l$e;ai.isCancel=Xge;ai.VERSION=uN;ai.toFormData=mN;ai.AxiosError=ot;ai.Cancel=ai.CanceledError;ai.all=function(e){return Promise.all(e)};ai.spread=u$e;ai.isAxiosError=p$e;ai.mergeConfig=l1;ai.AxiosHeaders=sc;ai.formToJSON=t=>Qge(he.isHTMLForm(t)?new FormData(t):t);ai.getAdapter=rve.getAdapter;ai.HttpStatusCode=d$e;ai.default=ai;ive.exports=ai});var sve=k(hN=>{"use strict";Object.defineProperty(hN,"__esModule",{value:!0});hN.AxiosHttpClient=void 0;var f$e=ove(),dH=class{constructor(e){this.endpoint=e}get(e){return f$e.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};hN.AxiosHttpClient=dH});var ave=k(gN=>{"use strict";Object.defineProperty(gN,"__esModule",{value:!0});gN.MemoryKeyValueStorage=void 0;var fH=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};gN.MemoryKeyValueStorage=fH});var cve=k(vN=>{"use strict";Object.defineProperty(vN,"__esModule",{value:!0});vN.ExperimentationServiceBase=void 0;var m$e=ave(),mH=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new m$e.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`);let n=this.features.configs.find(i=>i.Id===e);return n?.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};vN.ExperimentationServiceBase=mH});var lve=k(_N=>{"use strict";Object.defineProperty(_N,"__esModule",{value:!0});_N.PollingService=void 0;var hH=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};_N.PollingService=hH});var uve=k(yN=>{"use strict";Object.defineProperty(yN,"__esModule",{value:!0});yN.ExperimentationServiceAutoPolling=void 0;var h$e=cve(),g$e=lve(),gH=class extends h$e.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new g$e.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};yN.ExperimentationServiceAutoPolling=gH});var pve=k(bN=>{"use strict";Object.defineProperty(bN,"__esModule",{value:!0});bN.ExperimentationService=void 0;var v$e=ige(),_$e=sve(),y$e=uve(),xN=class extends y$e.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new v$e.TasApiFeatureProvider(new _$e.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};bN.ExperimentationService=xN;xN.REFRESH_RATE_IN_MINUTES=30});var dve=k(EN=>{"use strict";Object.defineProperty(EN,"__esModule",{value:!0});EN.ExperimentationService=void 0;var x$e=pve();Object.defineProperty(EN,"ExperimentationService",{enumerable:!0,get:function(){return x$e.ExperimentationService}})});var fve=k(TN=>{"use strict";Object.defineProperty(TN,"__esModule",{value:!0});TN.MementoKeyValueStorage=void 0;var vH=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};TN.MementoKeyValueStorage=vH});var mve=k(yH=>{"use strict";Object.defineProperty(yH,"__esModule",{value:!0});var _H=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};yH.default=_H});var gve=k(d1=>{"use strict";Object.defineProperty(d1,"__esModule",{value:!0});d1.getExperimentationServiceAsync=d1.getExperimentationService=void 0;var b$e=kq(),E$e=dve(),xH=require("vscode"),T$e=fve(),S$e=mve(),C$e="https://default.exp-tas.com/vscode/ab",I$e="query-expfeature",w$e="abexp.assignmentcontext",A$e="VSCode.ABExp.FeatureData",R$e=1e3*60*30;function hve(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=xH.workspace.getConfiguration("telemetry");if(!(xH.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):xH.env.isTelemetryEnabled))return new S$e.default;let c=[new b$e.VSCodeFilterProvider(t,e,r),...o],u=new T$e.MementoKeyValueStorage(i);return new E$e.ExperimentationService({filterProviders:c,telemetry:n,storageKey:A$e,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:w$e,telemetryEventName:I$e,endpoint:C$e,refetchInterval:R$e})}d1.getExperimentationService=hve;async function D$e(t,e,r,n,i,...o){let s=hve(t,e,r,n,i,...o);return await s.initializePromise,s}d1.getExperimentationServiceAsync=D$e});var _ve=k(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.TargetPopulation=bm.getExperimentationServiceAsync=bm.getExperimentationService=void 0;var vve=gve();Object.defineProperty(bm,"getExperimentationService",{enumerable:!0,get:function(){return vve.getExperimentationService}});Object.defineProperty(bm,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return vve.getExperimentationServiceAsync}});var P$e=kq();Object.defineProperty(bm,"TargetPopulation",{enumerable:!0,get:function(){return P$e.TargetPopulation}})});var xve=k(SN=>{"use strict";Object.defineProperty(SN,"__esModule",{value:!0});SN.BaseTelemetryReporter=void 0;var bH=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let o of Object.keys(i??{})){let s=i[o];typeof o=="string"&&s!==void 0&&(i[o]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};SN.BaseTelemetryReporter=bH});var bve=k(CN=>{"use strict";Object.defineProperty(CN,"__esModule",{value:!0});CN.BaseTelemetrySender=void 0;var zp;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(zp||(zp={}));var EH=class{constructor(e,r){this._instantiationStatus=zp.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==zp.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==zp.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};r?r.properties={...r.properties,...n}:r={properties:n},this._telemetryClient.logEvent("unhandlederror",r)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===zp.NOT_INSTANTIATED&&(this._instantiationStatus=zp.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=zp.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=zp.INSTANTIATED}))}};CN.BaseTelemetrySender=EH});var SH=k(IN=>{"use strict";Object.defineProperty(IN,"__esModule",{value:!0});IN.TelemetryUtil=void 0;var TH=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.0"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};IN.TelemetryUtil=TH});var f1,$p,pu,Qc,m1,oS,CH=I(()=>{f1="function",$p="object",pu="undefined",Qc="prototype",m1=Object,oS=m1[Qc]});var Po,ln,h1,IH,Em,wH,Wp,ac,sS,AH,Kp,aS,cS,Eve,wN,AN,Xc,RH,RN,DN,g1,Fn,PN,DH,No,PH,NH,va,qt=I(()=>{Po=void 0,ln=null,h1="",IH="boolean",Em="function",wH="number",Wp="object",ac="prototype",sS="__proto__",AH="string",Kp="undefined",aS="constructor",cS="Symbol",Eve="_polyfill",wN="indexOf",AN="lastIndexOf",Xc="length",RH="done",RN="value",DN="name",g1="slice",Fn=Object,PN=Fn[ac],DH=String,No=DH[ac],PH=Math,NH=Array,va=NH[ac]});function lS(t,e){var r=e;try{r=t()}catch{}return r}var kH=I(()=>{});function v1(t){return function(e){return typeof e===t}}function Sv(t){var e="[object "+t+"]";return function(r){return!!(r&&Cv(r)===e)}}function Cv(t){return PN.toString.call(t)}function NN(t,e){return typeof t===e}function vt(t){return typeof t===Kp||t===Kp}function we(t){return t===ln||vt(t)}function OH(t){return t===ln||!kN(t)}function kN(t){return!!t||t!==Po}function Br(t){return!t&&we(t)?!1:!!t&&typeof t===Wp}function Tm(t){return!!t&&mt(t.then)}function ON(t){return!t||!lS(function(){return t&&0+t},t)}function Zc(t){return!(!t||lS(function(){return!(t&&0+t)},!t))}var k$e,LH,gt,mt,Xe,_1,Gi,Jc,O$e,L$e,M$e,F$e,U$e,du,as=I(()=>{qt();kH();k$e=[AH,wH,IH,Kp,"symbol","bigint"];LH=function(t){return t!==Wp&&k$e.indexOf(t)!==-1},gt=v1(AH),mt=v1(Em);Xe=NH.isArray,_1=Sv("Date"),Gi=v1(wH),Jc=v1(IH),O$e=Sv("RegExp"),L$e=Sv("File"),M$e=Sv("FormData"),F$e=Sv("Blob"),U$e=Sv("ArrayBuffer"),du=Sv("Error")});var Iv,LN=I(()=>{qt();Iv=Fn.getOwnPropertyDescriptor});function Wn(t,e){return t&&PN.hasOwnProperty.call(t,e)}var MN=I(()=>{qt()});function Tve(t,e){return Wn(t,e)||!!Iv(t,e)}var Ls,FN=I(()=>{qt();LN();MN();Ls=Fn.hasOwn||Tve});function ze(t,e,r){if(t&&Br(t)){for(var n in t)if(Ls(t,n)&&e.call(r||t,n,t[n])===-1)break}}var Sm=I(()=>{as();FN()});function MH(t,e,r,n){var i={};return ze(t,function(o,s){i[o]=e?s:o,i[s]=r?s:o}),n(i)}var Sve=I(()=>{Sm()});function Cn(t){throw new Error(t)}function fn(t){throw new TypeError(t)}var Cm=I(()=>{});function Cve(t){var e=[];return ze(t,function(r,n){e.push([r,n])}),e}function Ive(t){var e=[];return ze(t,function(r,n){e.push(n)}),e}var wve=I(()=>{Sm()});function Si(t){return(!Br(t)||t===ln)&&fn("objKeys called on non-object"),Fn.keys(t)}function cs(t){return FH&&ze(t,function(e,r){(Xe(r)||Br(r))&&FH(r)}),fu(t)}var FH,Ave,B$e,wv,fu,UN,y1,q$e,P8t,x1=I(()=>{qt();as();Cm();Sm();wve();FH=Fn.freeze,Ave=function(t){return t},B$e=function(t){return t[sS]||ln},wv=Fn.assign;fu=FH||Ave,UN=Fn.seal||Ave,y1=Fn.getPrototypeOf||B$e,q$e=Fn.entries||Cve,P8t=Fn.values||Ive});function UH(t){return MH(t,1,0,cs)}function BH(t){return MH(t,0,0,cs)}function Rve(t){var e={};return ze(t,function(r,n){e[r]=n[1],e[n[0]]=n[1]}),cs(e)}function qH(t){return Rve(t)}var HH=I(()=>{Sve();Sm();x1()});var BN,jH=I(()=>{HH();BN=BH({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12})});var ci,b1=I(()=>{qt();ci=DH});function VH(){var t;return typeof globalThis!==Kp&&(t=globalThis),!t&&typeof self!==Kp&&(t=self),!t&&typeof window!==Kp&&(t=window),!t&&typeof global!==Kp&&(t=global),t}function qN(){if(!GH){var t=VH()||{};GH=t[Dve]=t[Dve]||{}}return GH}var Dve,GH,HN=I(()=>{qt();Dve="__tsUtils$gblCfg"});function $e(t,e){var r=h1;if(du(t))r="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'";else try{r=JSON.stringify(t,ln,e?Gi(e)?e:4:Po)}catch(n){r=" - "+$e(n,e)}return Cv(t)+": "+r}var Im=I(()=>{qt();as()});function Nve(t){return function(e){return e[t]}}var zH,Pve,jN,ko,cc,ls=I(()=>{Im();Cm();b1();qt();zH=va[g1],Pve=function(t,e){fn("'"+ci(t)+"' not defined for "+$e(e))},jN=function(t){return function(e){return e[t].apply(e,zH.call(arguments,1))}},ko=function(t,e){var r=e&&e[t];return function(n){var i=n&&n[t]||r;if(i)return i.apply(n,zH.call(arguments,1));Pve(t,n)}},cc=function(t,e,r){var n=e&&e[t];return function(i){var o=i&&i[t]||n;if(o||r){var s=arguments;return(o||r).apply(i,o?zH.call(s,1):s)}Pve(t,i)}}});var J8t,kve,Ove=I(()=>{qt();J8t=PH.min,kve=PH.max});var $H,Lve=I(()=>{qt();ls();$H=ko(g1,No)});function Mve(t,e,r){return we(t)&&fn("'polyStrSubstr called with invalid "+$e(t)),r<0?h1:(e=e||0,e<0&&(e=kve(e+t[Xc],0)),vt(r)?$H(t,e):$H(t,e,e+r))}function wm(t,e){return Un(t,0,e)}var Un,el,GN=I(()=>{as();Im();Cm();qt();ls();Ove();Lve();Un=ko("substring",No),el=cc("substr",No,Mve)});function H$e(t,e,r){gt(t)||fn("'"+$e(t)+"' is not a string");var n=gt(e)?e:ci(e),i=n[Xc],o=r>0?r:0;return Un(t,o,o+i)===n}var Av,Fve=I(()=>{as();Im();Cm();qt();ls();b1();GN();Av=cc("startsWith",No,H$e)});function j$e(){if(!WH){var t=qN();WH=t.gblSym=t.gblSym||{k:{},s:{}}}return WH}function VN(t){var e={description:ci(t),toString:function(){return cS+"("+t+")"}};return e[Eve]=!0,e}function qve(t){var e=j$e();if(!Ls(e.k,t)){var r=VN(t),n=Si(e.s).length;r[Uve]=function(){return n+"_"+r.toString()},e.k[t]=r,e.s[r[Uve]()]=ci(t)}return e.k[t]}function Hve(t){var e,r=BN[t];return r&&(e=Bve[r]=Bve[r]||VN(cS+"."+r)),e}var Uve,WH,Bve,jve=I(()=>{jH();qt();FN();b1();HN();x1();Uve="_urid";Bve={}});function Gve(t){var e={};if(e[zN.c]=!0,e[zN.e]=!0,t.l){e.get=function(){return t.l.v};var r=Iv(t.l,"v");r&&r.set&&(e.set=function(n){t.l.v=n})}return ze(t,function(n,i){e[zN[n]]=vt(i)?e[zN[n]]:i}),e}function $N(t,e,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),li(t,e,Gve(s))}function yr(t,e,r){return li(t,e,Gve(r))}var zN,li,G$e,E1=I(()=>{qt();as();Sm();LN();zN={e:"enumerable",c:"configurable",v:RN,w:"writable",g:"get",s:"set"};li=Fn.defineProperty,G$e=Fn.defineProperties});function tl(t){var e={};return KH&&KH(),e.b=Wr.lzy,li(e,"v",{configurable:!0,get:function(){var r=t();return Wr.lzy||(li(e,"v",{value:r}),e.b&&delete e.b),Wr.lzy&&e.b!==Wr.lzy&&(e.b=Wr.lzy),r}}),e}var Wr,KH,Am=I(()=>{qt();HN();E1();KH=function(){Wr=qN(),KH=ln}});function Yp(t,e){return tl(function(){return lS(t,e)})}var WN=I(()=>{Am();kH()});var Vve,T1,S1,KN,YN,QN,YH,_a,Oo,Kr,Rm,In,Dm,Bn,C1,ui,XN,uS,QH,pS=I(()=>{qt();HN();WN();Am();Vve="window",_a=function(t){return Yp(function(){return Kr(t)||Po},Po)},Oo=function(t){return(!T1||t===!1||Wr&&Wr.lzy&&!T1.b)&&(T1=Yp(VH,ln)),T1.v},Kr=function(t,e){var r=!T1||e===!1?Oo(e):T1.v;return r&&r[t]?r[t]:t===Vve&&S1?S1.v:ln},Rm=function(){return!!In()},In=function(){return(!KN||Wr&&Wr.lzy&&!KN.b)&&(KN=_a("document")),KN.v},Dm=function(){return!!Bn()},Bn=function(){return(!S1||Wr&&Wr.lzy&&!S1.b)&&(S1=_a(Vve)),S1.v},C1=function(){return!!ui()},ui=function(){return(!YN||Wr&&Wr.lzy&&!YN.b)&&(YN=_a("navigator")),YN.v},XN=function(){return!!uS()},uS=function(){return(!QN||Wr&&Wr.lzy&&!QN.b)&&(QN=_a("history")),QN.v},QH=function(){return!YH&&(YH=Yp(function(){return!!(process&&(process.versions||{}).node)},!1)),YH.v}});function $ve(t){return Yp(function(){return us.v?us.v[t]:Po},Po)}function XH(){return!!dS()}function dS(){var t=!us||Wr&&Wr.lzy&&!us.b;return t&&(us=_a(cS)),(!JN||t)&&(JN=$ve("for")),(!zve||t)&&(zve=$ve("keyFor")),us.v}function Rv(t,e){var r=BN[t];return(!us||Wr.lzy&&!us.b)&&dS(),us.v?us.v[r||t]:e?Po:Hve(t)}function Dv(t,e){return(!us||Wr.lzy&&!us.b)&&dS(),us.v?us.v(t):e?ln:VN(t)}function fS(t){return(!JN||Wr.lzy&&!us.b)&&dS(),(JN.v||qve)(t)}var us,JN,zve,Wve,ZN=I(()=>{qt();jve();jH();as();Am();WN();pS();Wve=v1("symbol")});function mS(t){return!!t&&mt(t.next)}function Kve(t){return!OH(t)&&mt(t[Rv(3)])}var JH=I(()=>{ZN();as()});function Yve(t,e,r){if(t&&(mS(t)||(!ek&&(ek=tl(function(){return Rv(3)})),t=t[ek.v]?t[ek.v]():null),mS(t))){var n=void 0,i=void 0;try{for(var o=0;!(i=t.next())[RH]&&e.call(r||t,i[RN],o,t)!==-1;)o++}catch(s){n={e:s},t.throw&&(i=null,t.throw(n))}finally{try{i&&!i[RH]&&t.return&&t.return(i)}finally{if(n)throw n.e}}}}var ek,Qve=I(()=>{Am();qt();ZN();JH()});var Qp,tk=I(()=>{ls();Qp=jN("apply")});function lc(t,e){return!vt(e)&&t&&(Xe(e)?Qp(t.push,t,e):mS(e)||Kve(e)?Yve(e,function(r){t.push(r)}):t.push(e)),t}var Xve=I(()=>{as();JH();Qve();tk()});function Ae(t,e,r){if(t)for(var n=t[Xc]>>>0,i=0;i<n&&!(i in t&&e.call(r||t,t[i],i,t)===-1);i++);}var rk=I(()=>{qt()});var or,V$e,ZH=I(()=>{qt();ls();or=ko(wN,va),V$e=ko(AN,va)});var mu,Jve=I(()=>{qt();ls();mu=ko("map",va)});var po,hS=I(()=>{qt();ls();po=ko(g1,va)});var gS,ej=I(()=>{ls();gS=jN("call")});function Zve(t,e,r){return or(t,e,r)!==-1}var e0e=I(()=>{ZH()});var nk,t0e=I(()=>{qt();ls();e0e();nk=cc("includes",va,Zve)});var I1,r0e=I(()=>{qt();ls();I1=ko("reduce",va)});function $$e(t){if(!t)return{};var e=typeof t;if(e!==Wp&&e!==Em)throw new TypeError("Prototype must be an Object or function: "+$e(t));function r(){}return r[ac]=t,new r}var z$e,vS,tj=I(()=>{qt();Im();z$e=Fn.create,vS=z$e||$$e});function nj(t,e){var r=Fn.setPrototypeOf||function(n,i){!rj&&(rj=tl(function(){var o;return o={},o[sS]=[],o instanceof Array})),rj.v?n[sS]=i:ze(i,function(o,s){return n[o]=s})};return r(t,e)}var rj,n0e=I(()=>{Am();qt();Sm()});function ij(t,e,r){var n=r||Error,i=n[ac][DN],o=Error.captureStackTrace;return W$e(t,function(){var s=this;try{i0e(n,t);var a=Qp(n,s,po(arguments))||s;if(a!==s){var l=y1(s);l!==y1(a)&&nj(a,l)}return o&&o(a,s[aS]),e&&e(a,arguments),a}finally{i0e(n,i)}},n)}var W$e,i0e,o0e,s0e=I(()=>{hS();tk();qt();tj();E1();x1();n0e();W$e=function(t,e,r){o0e(e,t),e=nj(e,r);function n(){this.constructor=e,o0e(this,t)}return e[ac]=r===ln?vS(r):(n[ac]=r[ac],new n),e},i0e=function(t,e){try{e&&(t[DN]=e)}catch{}},o0e=function(t,e){try{yr(t,DN,{v:e,c:!0,e:!1})}catch{}}});function wn(){return(Date.now||a0e)()}function a0e(){return new Date().getTime()}var oj=I(()=>{});function sj(t){return function(r){return we(r)&&fn("strTrim called ["+$e(r)+"]"),r&&r.replace&&(r=r.replace(t,h1)),r}}var c0e,l0e,u0e,p0e=I(()=>{as();Im();Cm();qt();c0e=sj(/^\s+|(?=\s)\s+$/g),l0e=sj(/^\s+/g),u0e=sj(/(?=\s)\s+$/g)});var pr,K$e,Y$e,d0e=I(()=>{qt();ls();p0e();pr=cc("trim",No,c0e),K$e=cc("trimStart",No,l0e),Y$e=cc("trimEnd",No,u0e)});function Ci(t){if(!t||typeof t!==Wp)return!1;lj||(lj=Dm()?Bn():!0);var e=!1;if(t!==lj){cj||(aj=Function[ac].toString,cj=gS(aj,Fn));try{var r=y1(t);e=!r,e||(Wn(r,aS)&&(r=r[aS]),e=r&&typeof r===Em&&aj.call(r)===cj)}catch{}}return e}var aj,cj,lj,uj=I(()=>{ej();pS();qt();MN();x1()});function X$e(t,e,r,n){var i;return Ae(t,function(o){if(o.k===e)return i=o,-1}),i||(i={k:e,v:e},t.push(i),n(i)),i.v}function pj(t,e,r,n){var i=r.handler,o=r.path?n?r.path.concat(n):r.path:[],s={handler:r.handler,src:r.src,path:o},a=typeof e,l=!1,c=!1;e&&a===Wp?l=Ci(e):c=e===ln||LH(a);var u={type:a,isPrim:c,isPlain:l,value:e,result:e,path:o,origin:r.src,copy:function(p,d){return pj(t,p,d?s:r,d)},copyTo:function(p,d){return m0e(t,p,d,s)}};return u.isPrim?i&&gS(i,r,u)?u.result:e:X$e(t,e,o,function(p){yr(u,"result",{g:function(){return p.v},s:function(m){p.v=m}});for(var d=0,f=i;!gS(f||(d<f0e.length?f0e[d++]:Q$e),r,u);)f=ln})}function m0e(t,e,r,n){if(!we(r))for(var i in r)e[i]=pj(t,r[i],n,i);return e}function h0e(t,e,r){var n={handler:r,src:e,path:[]};return m0e([],t,e,n)}function g0e(t,e){var r={handler:e,src:t};return pj([],t,r)}function J$e(t){var e=t.value;if(Xe(e)){var r=t.result=[];return r.length=e.length,t.copyTo(r,e),!0}return!1}function Z$e(t){var e=t.value;return _1(e)?(t.result=new Date(e.getTime()),!0):!1}function eWe(t){return t.type===Em}function v0e(t){var e=t.value;if(e&&t.isPlain){var r=t.result={};return t.copyTo(r,e),!0}return!1}var Q$e,f0e,_0e=I(()=>{rk();ej();as();qt();E1();uj();Q$e=function(t){return t.value&&v0e(t),!0},f0e=[J$e,v0e,eWe,Z$e]});function tWe(t,e){return Ae(e,function(r){h0e(t,r)}),t}function ik(t,e,r,n,i,o,s){return tWe(g0e(t)||{},po(arguments))}var y0e=I(()=>{rk();hS();_0e()});var w1,x0e=I(()=>{qt();ls();w1=Nve(Xc)});function Xp(){return(!ok||!ok.b&&Wr&&Wr.lzy)&&(ok=_a("performance")),ok.v}function A1(){var t=Xp();return t&&t.now?t.now():wn()}var ok,b0e=I(()=>{oj();pS();Am()});function rWe(t,e,r){gt(t)||fn("'"+$e(t)+"' is not a string");var n=gt(e)?e:ci(e),i=n[Xc],o=t[Xc],s=!vt(r)&&r<o?r:o;return Un(t,s-i,s)===n}var Pm,E0e=I(()=>{as();Im();Cm();qt();ls();b1();GN();Pm=cc("endsWith",No,rWe)});var ps,nWe,T0e=I(()=>{qt();ls();ps=ko(wN,No),nWe=ko(AN,No)});function C0e(t,e,r){var n,i=!0,o=t?e(ln):ln,s,a=function(){return i=!1,o&&o[dj]&&o[dj](),s},l=function(){return i=!0,o&&o[sk]&&o[sk](),s},c=function(){return o&&o[fj]?o[fj]():i},u=function(){return o=e(o),i||a(),s},p=function(){o&&r(o),o=ln},d=function(f){!f&&o&&p(),f&&!o&&u()};return s=(n={cancel:p,refresh:u},n[fj]=c,n[sk]=l,n[dj]=a,n[S0e]=!1,n),li(s,S0e,{get:function(){return!!o},set:d}),{h:s,dn:function(){o=ln}}}var sk,dj,fj,S0e,I0e=I(()=>{qt();E1();sk="ref",dj="un"+sk,fj="hasRef",S0e="enabled"});function mj(t,e,r,n){var i=Xe(r),o=i?r.length:0,s=(o>0?r[0]:i?Po:r)||setTimeout,a=(o>1?r[1]:Po)||clearTimeout,l=n[0];n[0]=function(){c.dn(),Qp(l,t,po(arguments))};var c=C0e(e,function(u){if(u){if(u.refresh)return u.refresh(),u;Qp(a,t,[u])}return Qp(s,t,n)},function(u){Qp(a,t,[u])});return c.h}function Ms(t,e){return mj(this,!0,Po,po(arguments))}function hj(t,e,r){return mj(this,!0,t,po(arguments,1))}function gj(t,e){return mj(this,!1,Po,po(arguments))}var w0e=I(()=>{hS();tk();as();qt();I0e()});var pt=I(()=>{Xve();rk();t0e();ZH();Jve();r0e();hS();as();s0e();oj();Im();HH();pS();y0e();Am();x0e();b0e();WN();Cm();tj();E1();Sm();LN();FN();MN();uj();x1();E0e();T0e();Fve();GN();b1();d0e();ZN();w0e()});function Fs(t,e){typeof e!==f1&&e!==null&&fn("Class extends value "+String(e)+" is not a constructor or null"),vj(t,e);function r(){this.constructor=t}t[Qc]=e===null?vS(e):(r[Qc]=e[Qc],new r)}function ak(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var e7t,t7t,A0e,oWe,uc,vj,R0e=I(()=>{pt();CH();e7t=(Oo()||{}).Symbol,t7t=(Oo()||{}).Reflect,A0e="hasOwnProperty",oWe=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)oS[A0e].call(e,i)&&(t[i]=e[i])}return t},uc=wv||oWe,vj=function(t,e){return vj=m1.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[A0e](i)&&(r[i]=n[i])},vj(t,e)}});var D0e=I(()=>{});var Us=I(()=>{CH();R0e();D0e();pt()});function F0e(t){return t&&(t===Sj[Nm]||t===Array[Nm])}function Cj(t){return F0e(t)||t===Function[Nm]}function Pv(t){var e;if(t){if(yS)return yS(t);var r=t[M0e]||t[Nm]||(t[pk]?t[pk][Nm]:null);e=t[lk]||r,Wn(t,lk)||(delete t[_j],e=t[lk]=t[_j]||t[lk],t[_j]=r)}return e}function mk(t,e){var r=[];if(k0e)r=k0e(t);else for(var n in t)typeof n=="string"&&Wn(t,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)e(r[i])}function Ij(t,e,r){return e!==pk&&typeof t[e]===dk&&(r||Wn(t,e))}function hk(t){fn("DynamicProto: "+t)}function aWe(t){var e={};return mk(t,function(r){!e[r]&&Ij(t,r,!1)&&(e[r]=t[r])}),e}function wj(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function cWe(t,e,r,n){function i(l,c,u){var p=c[u];if(p[xj]&&n){var d=l[fk]||{};d[_S]!==!1&&(p=(d[c[R1]]||{})[u]||p)}return function(){return p.apply(l,arguments)}}var o={};mk(r,function(l){o[l]=i(e,r,l)});for(var s=Pv(t),a=[];s&&!Cj(s)&&!wj(a,s);)mk(s,function(l){!o[l]&&Ij(s,l,!yS)&&(o[l]=i(e,s,l))}),a.push(s),s=Pv(s);return o}function lWe(t,e,r,n){var i=null;if(t&&Wn(r,R1)){var o=t[fk]||{};if(i=(o[r[R1]]||{})[e],i||hk("Missing ["+e+"] "+dk),!i[bj]&&o[_S]!==!1){for(var s=!Wn(t,e),a=Pv(t),l=[];s&&a&&!Cj(a)&&!wj(l,a);){var c=a[e];if(c){s=c===n;break}l.push(a),a=Pv(a)}try{s&&(t[e]=i),i[bj]=1}catch{o[_S]=!1}}}return i}function uWe(t,e,r){var n=e[t];return n===r&&(n=Pv(e)[t]),typeof n!==dk&&hk("["+t+"] is not a "+dk),n}function pWe(t,e,r,n,i){function o(l,c){var u=function(){var p=lWe(this,c,l,u)||uWe(c,l,u);return p.apply(this,arguments)};return u[xj]=1,u}if(!F0e(t)){var s=r[fk]=r[fk]||{},a=s[e]=s[e]||{};s[_S]!==!1&&(s[_S]=!!i),mk(r,function(l){Ij(r,l,!1)&&r[l]!==n[l]&&(a[l]=r[l],delete r[l],(!Wn(t,l)||t[l]&&!t[l][xj])&&(t[l]=o(t,l)))})}}function dWe(t,e){if(yS){for(var r=[],n=Pv(e);n&&!Cj(n)&&!wj(r,n);){if(n===t)return!0;r.push(n),n=Pv(n)}return!1}return!0}function yj(t,e){return Wn(t,Nm)?t.name||e||P0e:((t||{})[pk]||{}).name||e||P0e}function Wt(t,e,r,n){Wn(t,Nm)||hk("theClass is an invalid class definition.");var i=t[Nm];dWe(i,e)||hk("["+yj(t)+"] not in hierarchy of ["+yj(e)+"]");var o=null;Wn(i,R1)?o=i[R1]:(o=sWe+yj(t,"_")+"$"+Tj.n,Tj.n++,i[R1]=o);var s=Wt[L0e],a=!!s[uk];a&&n&&n[uk]!==void 0&&(a=!!n[uk]);var l=aWe(e),c=cWe(i,e,l,a);r(e,c);var u=!!yS&&!!s[Ej];u&&n&&(u=!!n[Ej]),pWe(i,o,e,l,u!==!1)}var ck,pk,Nm,dk,fk,xj,R1,sWe,bj,_S,L0e,P0e,M0e,lk,N0e,_j,uk,Ej,Sj,yS,k0e,O0e,Tj,fo=I(()=>{pt();pk="constructor",Nm="prototype",dk="function",fk="_dynInstFuncs",xj="_isDynProxy",R1="_dynClass",sWe="_dynCls$",bj="_dynInstChk",_S=bj,L0e="_dfOpts",P0e="_unknown_",M0e="__proto__",lk="_dyn"+M0e,N0e="__dynProto$Gbl",_j="_dynInstProto",uk="useBaseInst",Ej="setInstFuncs",Sj=Object,yS=Sj.getPrototypeOf,k0e=Sj.getOwnPropertyNames,O0e=Oo(),Tj=O0e[N0e]||(O0e[N0e]={o:(ck={},ck[Ej]=!0,ck[uk]=!0,ck),n:1e3});Wt[L0e]=Tj.o});var Aj,U0e=I(()=>{"use strict";Aj=100});var Vi,Rj,gk=I(()=>{pt();Vi=UH,Rj=qH});var rl,B0e=I(()=>{gk();rl=Vi({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})});var hu,km,ct,Nv,kv,D1,Jp,nl,pc,kr,Om,Ht,gu,vk,Ov,Lv,vu,Bs,Lm,Dj,Lo,Mm,Ii,_k,P1,N1,k1,Fm,Pj,qs,xS,Mv,yk,_u,ya,O1,Um,il,Hs,L1,Fv,xa,Bm,bS,yu,xk,Zp,Nj,js,ES,TS,Uv,ol,bk,M1,F1,qm,Yr=I(()=>{hu="toLowerCase",km="blkVal",ct="length",Nv="rdOnly",kv="notify",D1="warnToConsole",Jp="throwInternal",nl="setDf",pc="watch",kr="logger",Om="apply",Ht="push",gu="splice",vk="hdlr",Ov="cancel",Lv="initialize",vu="identifier",Bs="isInitialized",Lm="getPlugin",Dj="pollInternalLogs",Lo="name",Mm="time",Ii="processNext",_k="getProcessTelContext",P1="getNotifyMgr",N1="addNotificationListener",k1="removeNotificationListener",Fm="enabled",Pj="stopPollingInternalLogs",qs="unload",xS="onComplete",Mv="version",yk="loggingLevelConsole",_u="createNew",ya="teardown",O1="messageId",Um="message",il="isAsync",Hs="diagLog",L1="_doTeardown",Fv="update",xa="getNext",Bm="setNextPlugin",bS="userAgent",yu="split",xk="nodeType",Zp="replace",Nj="logInternalMessage",js="type",ES="handler",TS="isChildEvt",Uv="getCtx",ol="setCtx",bk="complete",M1="traceId",F1="spanId",qm="traceFlags"});function q0e(t,e){kj||(kj=ij("AggregationError",function(n,i){i[ct]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw Ae(e,function(n,i){r+=`
`.concat(i," > ").concat($e(n))}),new kj(r,e||[])}var kj,H0e=I(()=>{pt();Yr()});function Hm(t,e){return Ek(t,function(r){e&&e({value:r,rejected:!1})},function(r){e&&e({rejected:!0,reason:r})})}function Ek(t,e,r,n){var i=t;return Tm(t)?(e||r)&&(i=t.then(e,r)):e&&e(t),n&&(i=j0e(i,n)),i}function j0e(t,e){var r=t;return e&&(Tm(t)?t.finally?r=t.finally(e):r=t.then(function(n){return e(),n},function(n){throw e(),n}):e()),r}var Oj=I(()=>{pt()});function G0e(t,e,r,n){Lj=Lj||{toString:function(){return"[[PromiseState]]"}},Mj=Mj||{toString:function(){return"[[PromiseResult]]"}},Fj=Fj||{toString:function(){return"[[PromiseIsHandled]]"}},li(t,Lj,{get:e}),li(t,Mj,{get:r}),li(t,Fj,{get:n})}var Lj,Mj,Fj,Uj,V0e=I(()=>{pt();Uj=!1});var Tk,Bj=I(()=>{Tk=["pending","resolving","resolved","rejected"]});function $0e(t,e,r,n){var i=In();!Sk&&(Sk=Yp(function(){var l;return i&&i.createEvent&&(l=i.createEvent("Event")),!!l&&l.initEvent},null));var o=Sk.v?i.createEvent("Event"):n?new Event(e):{};if(r&&r(o),Sk.v&&o.initEvent(e,!1,!0),o&&t[z0e])t[z0e](o);else{var s=t["on"+e];if(s)s(o);else{var a=Kr("console");a&&(a.error||a.log)(e,$e(o))}}}var z0e,Sk,W0e=I(()=>{pt();z0e="dispatchEvent"});var U1,qj=I(()=>{U1="Promise"});function K0e(t){return mt(t)?t.toString():$e(t)}function Q0e(t,e,r){var n=po(arguments,3),i=0,o=!1,s,a=[],l=mWe++,c=SS.length>0?SS[SS.length-1]:void 0,u=!1,p=null,d;!Hj&&(Hj=_a(U1+"RejectionEvent"));var f=function(x,P){try{SS.push(l),u=!0,p&&p.cancel(),p=null;var U=t(function(H,j){a.push(function(){try{var M=i===2?x:P,F=vt(M)?s:mt(M)?M(s):M;Tm(F)?F.then(H,j):M?H(F):i===3?j(F):H(F)}catch(z){j(z)}}),o&&v()},n);return U}finally{SS.pop()}},m=function(x){return f(void 0,x)},h=function(x){var P=x,U=x;return mt(x)&&(P=function(H){return x&&x(),H},U=function(H){throw x&&x(),H}),f(P,U)},g=function(){return Tk[i]},v=function(){if(a.length>0){var x=a.slice();a=[],u=!0,e(x),p&&p.cancel(),p=null}},_=function(x,P){return function(U){if(i===P){if(x===2&&Tm(U)){i=1,U.then(_(2,1),_(3,1));return}i=x,o=!0,s=U,v(),!u&&x===3&&!p&&(p=Ms(y,hWe))}}},y=function(){if(!u)if(QH())process.emit(Y0e,s,d);else{var x=Bn()||Oo();$0e(x,fWe,function(P){return yr(P,"promise",{g:function(){return d}}),P.reason=s,P},!!Hj.v)}};d={then:f,catch:m,finally:h},li(d,"state",{get:g}),Uj&&G0e(d,g,function(){return Cv(s)},function(){return u}),XH()&&(d[Rv(11)]="IPromise");var b=function(){return"IPromise"+(Uj?"["+l+(vt(c)?"":":"+c)+"]":"")+" "+g()+(o?" - "+K0e(s):"")};return d.toString=b,function(){mt(r)||fn(U1+": executor is not a function - "+K0e(r));var P=_(3,0);try{r.call(d,_(2,0),P)}catch(U){P(U)}}(),d}function B1(t){return function(e){var r=po(arguments,1);return t(function(n,i){try{var o=[],s=1;Ae(e,function(a,l){a&&(s++,Ek(a,function(c){o[l]=c,--s===0&&n(o)},i))}),s--,s===0&&n(o)}catch(a){i(a)}},r)}}function q1(t){return function(e){var r=po(arguments,1);return Tm(e)?e:t(function(n){n(e)},r)}}function H1(t){return function(e){var r=po(arguments,1);return t(function(n,i){i(e)},r)}}var Y0e,fWe,SS,mWe,hWe,Hj,Ck=I(()=>{pt();Oj();V0e();Bj();W0e();qj();Y0e="unhandledRejection",fWe=Y0e.toLowerCase(),SS=[],mWe=0,hWe=10});function X0e(t){var e=Gi(t)?t:0;return function(r){Ms(function(){gWe(r)},e)}}var gWe,J0e=I(()=>{pt();gWe=function(t){Ae(t,function(e){try{e()}catch{}})}});function j1(t,e){return Q0e(j1,X0e(e),t,e)}var Z7t,eUt,tUt,Z0e=I(()=>{Ck();J0e();Z7t=B1(j1),eUt=q1(j1),tUt=H1(j1)});function CS(t,e){!jj&&(jj=_a(U1));var r=jj.v;if(!r)return j1(t);mt(t)||fn(U1+": executor is not a function - "+$e(t));var n=0;function i(){return Tk[n]}var o=new r(function(s,a){function l(u){n=2,s(u)}function c(u){n=3,a(u)}t(l,c)});return li(o,"state",{get:i}),o}var jj,cUt,lUt,uUt,e_e=I(()=>{Z0e();Ck();Bj();pt();qj();cUt=B1(CS),lUt=q1(CS),uUt=H1(CS)});function ds(t,e){return!Gj&&(Gj=tl(function(){return CS})),Gj.v.call(this,t,e)}var Gj,Vj,vWe,_We,t_e=I(()=>{pt();Ck();e_e();Vj=B1(ds),vWe=q1(ds),_We=H1(ds)});var G1=I(()=>{Oj();t_e()});var ba,_t,jm,An,Ik,IS,ed,Bv,Gs,qv,V1,Gm,z1,xu,$1,wk,Ak,r_e,pi=I(()=>{ba=void 0,_t="",jm="channels",An="core",Ik="createPerfMgr",IS="disabled",ed="extensionConfig",Bv="extensions",Gs="processTelemetry",qv="priority",V1="eventsSent",Gm="eventsDiscarded",z1="eventsSendRequest",xu="perfEvent",$1="getPerfMgr",wk="domain",Ak="path",r_e="Not dynamic - "});function bu(t){return!we(t)}function Hv(t){var e=t;return e&&gt(e)&&(e=e[Zp](xWe,function(r,n){return n.toUpperCase()}),e=e[Zp](bWe,"_"),e=e[Zp](EWe,function(r,n){return"_"+n})),e}function Kn(t,e){return t&&e?ps(t,e)!==-1:!1}function Ea(t){return t&&t.toISOString()||""}function Qr(t){return du(t)?t[Lo]:_t}function dc(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function wS(t,e,r){var n;return t?(n=t[e],!n&&we(n)&&(n=vt(r)?{}:r,t[e]=n)):n=vt(r)?{}:r,n}function n_e(t,e){var r=null,n=null;return mt(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][Om](n,i)}}function zj(t,e,r){if(t&&e&&Br(t)&&Br(e)){var n=function(o){if(gt(o)){var s=e[o];mt(s)?(!r||r(o,!0,e,t))&&(t[o]=n_e(e,o)):(!r||r(o,!1,e,t))&&(Ls(t,o)&&delete t[o],yr(t,o,{g:function(){return e[o]},s:function(a){e[o]=a}}))}};for(var i in e)n(i)}return t}function td(t,e,r,n,i){t&&e&&r&&(i!==!1||vt(t[e]))&&(t[e]=n_e(r,n))}function Ta(t,e,r,n){return t&&e&&Br(t)&&Xe(r)&&Ae(r,function(i){gt(i)&&td(t,i,e,i,n)}),t}function $j(t){return function(){function e(){var r=this;t&&ze(t,function(n,i){r[n]=i})}return e}()}function fc(t){return t&&wv&&(t=m1(wv({},t))),t}function Rk(t,e,r,n,i,o){var s=arguments,a=s[0]||{},l=s[ct],c=!1,u=1;for(l>0&&Jc(a)&&(c=a,a=s[u]||{},u++),Br(a)||(a={});u<l;u++){var p=s[u],d=Xe(p),f=Br(p);for(var m in p){var h=d&&m in p||f&&Ls(p,m);if(h){var g=p[m],v=void 0;if(c&&g&&((v=Xe(g))||Ci(g))){var _=a[m];v?Xe(_)||(_=[]):Ci(_)||(_={}),g=Rk(c,_,g)}g!==void 0&&(a[m]=g)}}}return a}var yWe,xWe,bWe,EWe,CUt,rd=I(()=>{Us();pt();Yr();pi();yWe="getPrototypeOf",xWe=/-([a-z])/g,bWe=/([^\w\d_$])/g,EWe=/^(\d+[\w\d_$])/,CUt=Object[yWe]});function a_e(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[Qc];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!vt(i[e])}catch{}}return r}function Jj(t){s_e=t}function jv(t){if(t&&s_e){var e=Kr("__mockLocation");if(e)return e}return typeof location===$p&&location?location:Kr(SWe)}function AS(){return typeof console!==pu?console:Kr(CWe)}function Eu(){return!!(typeof JSON===$p&&JSON||Kr(i_e)!==null)}function mo(){return Eu()?JSON||Kr(i_e):null}function RS(){return Kr(IWe)}function DS(){return Kr(wWe)}function Vm(){var t=ui();return t&&t.product?t.product===AWe:!1}function zm(){var t=ui();if(t&&(t[bS]!==Kj||Wj===null)){Kj=t[bS];var e=(Kj||_t)[hu]();Wj=Kn(e,Qj)||Kn(e,Xj)}return Wj}function PS(t){if(t===void 0&&(t=null),!t){var e=ui()||{};t=e?(e.userAgent||_t)[hu]():_t}var r=(t||_t)[hu]();if(Kn(r,Qj)){var n=In()||{};return Math.max(parseInt(r[yu](Qj)[1]),n[TWe]||0)}else if(Kn(r,Xj)){var i=parseInt(r[yu](Xj)[1]);if(i)return i+4}return null}function Sa(t){return(Yj===null||t===!1)&&(Yj=C1()&&!!ui().sendBeacon),Yj}function nd(t){var e=!1;try{e=!!Kr("fetch");var r=Kr("Request");e&&t&&r&&(e=a_e(r,"keepalive"))}catch{}return e}function Gv(){return W1===null&&(W1=typeof XDomainRequest!==pu,W1&&$m()&&(W1=W1&&!a_e(Kr(o_e),"withCredentials"))),W1}function $m(){var t=!1;try{var e=Kr(o_e);t=!!e}catch{}return t}function c_e(t,e){if(t)for(var r=0;r<t[ct];r++){var n=t[r];if(n[Lo]&&n[Lo]===e)return n}return{}}function Zj(t){var e=In();return e&&t?c_e(e.querySelectorAll("meta"),t).content:null}function eG(t){var e,r=Xp();if(r){var n=r.getEntriesByType("navigation")||[];e=c_e((n[ct]>0?n[0]:{}).serverTiming,t).description}return e}var TWe,SWe,CWe,i_e,IWe,wWe,AWe,Qj,Xj,o_e,Wj,Kj,s_e,W1,Yj,K1=I(()=>{"use strict";Us();pt();Yr();rd();pi();TWe="documentMode",SWe="location",CWe="console",i_e="JSON",IWe="crypto",wWe="msCrypto",AWe="ReactNative",Qj="msie",Xj="trident/",o_e="XMLHttpRequest",Wj=null,Kj=null,s_e=!1,W1=null,Yj=null});function RWe(t){t<0&&(t>>>=0),NS=u_e+t&Wm,kS=p_e-t&Wm,d_e=!0}function DWe(){try{var t=wn()&2147483647;RWe((Math.random()*l_e^t)+t)}catch{}}function OS(t){return t>0?Math.floor(id()/Wm*(t+1))>>>0:0}function id(t){var e=0,r=RS()||DS();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&Wm),e===0&&zm()&&(d_e||DWe(),e=f_e()&Wm),e===0&&(e=Math.floor(l_e*Math.random()|0)),t||(e>>>=0),e}function f_e(t){kS=36969*(kS&65535)+(kS>>16)&Wm,NS=18e3*(NS&65535)+(NS>>16)&Wm;var e=(kS<<16)+(NS&65535)>>>0&Wm|0;return t||(e>>>=0),e}function LS(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=id()>>>0,n=0,i=_t;i[ct]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(id()<<2&4294967295|r&3)>>>0,n=0);return i}var l_e,Wm,u_e,p_e,d_e,NS,kS,Dk=I(()=>{pt();Yr();K1();pi();l_e=4294967296,Wm=4294967295,u_e=123456789,p_e=987654321,d_e=!1,NS=u_e,kS=p_e});function h_e(t){return t[xk]===1||t[xk]===9||!+t[xk]}function kWe(t,e){var r=e[t.id];if(!r){r={};try{h_e(e)&&yr(e,t.id,{e:!1,v:r})}catch{}}return r}function ho(t,e){return e===void 0&&(e=!1),Hv(t+NWe+++(e?"."+m_e:_t)+PWe)}function Pk(t){var e={id:ho("_aiData-"+(t||_t)+"."+m_e),accept:function(r){return h_e(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[Hv(n)]:(o&&(s=kWe(e,r),s[Hv(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var m_e,PWe,NWe,Y1=I(()=>{pt();Yr();rd();pi();Dk();m_e="3.0.5",PWe="."+LS(6),NWe=0});function Nk(t){return t&&Br(t)&&(t.isVal||t.fb||Ls(t,"v")||Ls(t,"mrg")||Ls(t,"ref")||t.set)}function g_e(t,e,r){var n,i=r.dfVal||kN;if(e&&r.fb){var o=r.fb;Xe(o)||(o=[o]);for(var s=0;s<o[ct];s++){var a=o[s],l=e[a];if(i(l)?n=l:t&&(l=t.cfg[a],i(l)&&(n=l),t.set(t.cfg,ci(a),l)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function tG(t,e,r){var n=r;if(r&&Nk(r)&&(n=g_e(t,e,r)),n){Nk(n)&&(n=tG(t,e,n));var i;Xe(n)?(i=[],i[ct]=n[ct]):Ci(n)&&(i={}),i&&(ze(n,function(o,s){s&&Nk(s)&&(s=tG(t,e,s)),i[o]=s}),n=i)}return n}function MS(t,e,r,n){var i,o,s,a=n,l,c,u,p;Nk(a)?(i=a.isVal,o=a.set,u=a[Nv],p=a[km],l=a.mrg,c=a.ref,!c&&vt(c)&&(c=!!l),s=g_e(t,e,a)):s=n,p&&t[km](e,r);var d,f=!0,m=e[r];(m||!we(m))&&(d=m,f=!1,i&&d!==s&&!i(d)&&(d=s,f=!0),o&&(d=o(d,s,e),f=d===s)),f?s?d=tG(t,e,s):d=s:(Ci(d)||Xe(s))&&l&&s&&(Ci(s)||Xe(s))&&ze(s,function(h,g){MS(t,d,h,g)}),t.set(e,r,d),c&&t.ref(e,r),u&&t[Nv](e,r)}var rG=I(()=>{pt();Yr()});function nG(t){if(t){var e;if(Xe(t)?(e=[],e[ct]=t[ct]):Ci(t)&&(e={}),e)return ze(t,function(r,n){e[r]=nG(n)}),e}return t}function US(t){if(t){var e=t[Tu]||t;if(e.cfg&&(e.cfg===t||e.cfg[Tu]===e))return e}return null}function BS(t){if(t&&(Ci(t)||Xe(t)))try{t[v_e]=!0}catch{}return t}function iG(t){if(t)try{t[__e]=!0}catch{}return t}function kk(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[__e],!n&&!r[v_e]&&(n=Ci(r)||Xe(r))),n}function Ok(t){fn("InvalidAccess:"+t)}var Tu,v_e,__e,Lk=I(()=>{pt();Yr();Tu=fS("[[ai_dynCfg_1]]"),v_e=fS("[[ai_blkDynCfg_1]]"),__e=fS("[[ai_frcDynCfg_1]]")});function LWe(t,e,r){Xe(e)&&Ae(OWe,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[Om](this,o);return qS(t,e,r,"Patching"),a}})}function Mk(t,e){var r=Iv(t,e);return r&&r.get}function MWe(t,e,r,n){var i={n:r,h:[],trk:function(c){c&&c.fn&&(or(i.h,c)===-1&&i.h[Ht](c),t.trk(c,i))},clr:function(c){var u=or(i.h,c);u!==-1&&i.h[gu](u,1)}},o=!0,s=!1;function a(){o&&(s=s||kk(a,t,n),n&&!n[Tu]&&s&&(n=qS(t,n,r,"Converting")),o=!1);var c=t.act;return c&&i.trk(c),n}a[t.prop]={chng:function(){t.add(i)}};function l(c){if(n!==c){a[t.ro]&&!t.upd&&Ok("["+r+"] is read-only:"+$e(e)),o&&(s=s||kk(a,t,n),o=!1);var u=s&&a[t.rf];if(s)if(u){ze(n,function(d){n[d]=c?c[d]:ba});try{ze(c,function(d,f){HS(t,n,d,f)}),c=n}catch(d){Q1((t.hdlr||{})[kr],r,"Assigning",d),s=!1}}else n&&n[Tu]&&ze(n,function(d){var f=Mk(n,d);if(f){var m=f[t.prop];m&&m.chng()}});if(c!==n){var p=c&&kk(a,t,c);!u&&p&&(c=qS(t,c,r,"Converting")),n=c,s=p}t.add(i)}}yr(e,i.n,{g:a,s:l})}function HS(t,e,r,n){if(e){var i=Mk(e,r),o=i&&!!i[t.prop];o?e[r]=n:MWe(t,e,r,n)}return e}function Fk(t,e,r,n){if(e){var i=Mk(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],l=n&&n[2];if(!o){if(l)try{BS(e)}catch(c){Q1((t.hdlr||{})[kr],r,"Blocking",c)}try{HS(t,e,r,e[r]),i=Mk(e,r)}catch(c){Q1((t.hdlr||{})[kr],r,"State",c)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),l&&(i[t.blkVal]=!0)}return e}function qS(t,e,r,n){try{ze(e,function(i,o){HS(t,e,i,o)}),e[Tu]||(li(e,Tu,{get:function(){return t[vk]}}),LWe(t,e,r))}catch(i){Q1((t.hdlr||{})[kr],r,n,i)}return e}var OWe,Q1,y_e=I(()=>{pt();pi();Yr();Lk();OWe=["push","pop","shift","unshift","splice"],Q1=function(t,e,r,n){t&&t[Jp](3,108,"".concat(r," [").concat(e,"] failed - ")+$e(n))}});function x_e(t){var e,r=Dv(jS+"get"+t.uid+GS),n=Dv(jS+"ro"+t.uid+GS),i=Dv(jS+"rf"+t.uid+GS),o=Dv(jS+"blkVal"+t.uid+GS),s=Dv(jS+"dtl"+t.uid+GS),a=null,l=null,c;function u(m,h){var g=c.act;try{c.act=m,m&&m[s]&&(Ae(m[s],function(_){_.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[nl].bind(t),ref:t.ref.bind(t),rdOnly:t[Nv].bind(t)})}catch(_){var v=t[kr];throw v&&v[Jp](1,107,$e(_)),_}finally{c.act=g||null}}function p(){if(a){var m=a;a=null,l&&l[Ov](),l=null;var h=[];if(Ae(m,function(g){if(g&&(g[s]&&(Ae(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{u(g,g.fn)}catch(v){h[Ht](v)}}),a)try{p()}catch(g){h[Ht](g)}h[ct]>0&&q0e("Watcher error(s): ",h)}}function d(m){if(m&&m.h[ct]>0){a||(a=[]),l||(l=Ms(function(){l=null,p()},0));for(var h=0;h<m.h[ct];h++){var g=m.h[h];g&&or(a,g)===-1&&a[Ht](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];or(g,h)===-1&&g[Ht](h)}}return c=(e={prop:r,ro:n,rf:i},e[km]=o,e[vk]=t,e.add=d,e[kv]=p,e.use=u,e.trk=f,e),c}var jS,GS,b_e=I(()=>{pt();H0e();Yr();jS="[[ai_",GS="]]"});function FWe(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function UWe(t,e,r){var n,i=US(e);if(i)return i;var o=ho("dyncfg",!0),s=e&&r!==!1?e:nG(e),a;function l(){a[kv]()}function c(v,_,y){try{v=HS(a,v,_,y)}catch(b){Q1(t,_,"Setting value",b)}return v[_]}function u(v){return FWe(a,v)}function p(v,_){a.use(null,function(y){var b=a.upd;try{vt(_)||(a.upd=_),v(y)}finally{a.upd=b}})}function d(v,_){var y;return Fk(a,v,_,(y={},y[0]=!0,y))[_]}function f(v,_){var y;return Fk(a,v,_,(y={},y[1]=!0,y))[_]}function m(v,_){var y;return Fk(a,v,_,(y={},y[2]=!0,y))[_]}function h(v,_){return _&&ze(_,function(y,b){MS(g,v,y,b)}),v}var g=(n={uid:null,cfg:s},n[kr]=t,n[kv]=l,n.set=c,n[nl]=h,n[pc]=u,n.ref=d,n[Nv]=f,n[km]=m,n._block=p,n);return yr(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=x_e(g),qS(a,s,"config","Creating"),g}function BWe(t,e){t?(t[D1](e),t[Jp](2,108,e)):Ok(e)}function mn(t,e,r,n){var i=UWe(r,t||{},n);return e&&i[nl](i.cfg,e),i}function di(t,e,r){var n=t[Tu]||t;return n.cfg&&(n.cfg===t||n.cfg[Tu]===n)?n[pc](e):(BWe(r,r_e+$e(t)),mn(t,null,r)[pc](e))}var Km=I(()=>{pt();Y1();pi();Yr();rG();y_e();b_e();Lk()});function od(t,e){if(t&&t[qs])return t[qs](e)}function Uk(t,e,r){var n;return r||(n=ds(function(i){r=i})),t&&w1(t)>0?Hm(od(t[0],e),function(){Uk(po(t,1),e,r)}):r(),n}var oG=I(()=>{G1();pt();Yr()});var E_e,T_e=I(()=>{E_e=500});function qWe(t,e,r){return!t&&we(t)?e:Jc(t)?t:ci(t)[hu]()==="true"}function sG(t){return{mrg:!0,v:t}}function X1(t,e,r){return{fb:r,isVal:t,v:e}}function sl(t,e){return{fb:e,set:qWe,v:!!t}}var aG=I(()=>{pt();Yr()});function HWe(t,e){return function(){var r=arguments,n=lG(e);if(n){var i=n.listener;i&&i[t]&&i[t][Om](i,r)}}}function jWe(){var t=Kr("Microsoft");return t&&(qk=t.ApplicationInsights),qk}function lG(t){var e=qk;return!e&&t.disableDbgExt!==!0&&(e=qk||jWe()),e?e.ChromeDbgExt:null}function S_e(t){if(!Bk){Bk={};for(var e=0;e<cG[ct];e++)Bk[cG[e]]=HWe(cG[e],t)}return Bk}var cG,qk,Bk,uG=I(()=>{pt();Yr();pi();cG=[V1,Gm,z1,xu],qk=null});function C_e(t){return t?'"'+t[Zp](/\"/g,_t)+'"':_t}function pG(t,e){var r=AS();if(r){var n="log";r[t]&&(n=t),mt(r[n])&&r[n](e)}}function al(t,e){return(t||{})[kr]||new Ym(e)}function dG(t){return t||new Ym}function Ue(t,e,r,n,i,o){o===void 0&&(o=!1),dG(t)[Jp](e,r,n,i,o)}function Ca(t,e){dG(t)[D1](e)}function fG(t,e,r){dG(t)[Nj](e,r)}var J1,I_e,GWe,VWe,zWe,$We,WWe,Vv,Ym,sd=I(()=>{"use strict";fo();pt();Km();Yr();uG();K1();pi();I_e="warnToConsole",GWe="AI (Internal): ",VWe="AI: ",zWe="AITR_",$We={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},WWe=(J1={},J1[0]=null,J1[1]="errorToConsole",J1[2]=I_e,J1[3]="debugToConsole",J1);Vv=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[O1]=e,o[Um]=(n?VWe:GWe)+e;var s=_t;Eu()&&(s=mo().stringify(i));var a=(r?" message:"+C_e(r):_t)+(i?" props:"+C_e(s):_t);o[Um]+=a}return t.dataType="MessageData",t}();Ym=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,l;Wt(t,this,function(c){l=p(e||{}),c.consoleLoggingLevel=function(){return i},c[Jp]=function(m,h,g,v,_){_===void 0&&(_=!1);var y=new Vv(h,g,_,v);if(a)throw $e(y);var b=WWe[m]||I_e;if(vt(y[Um]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(_){var x=+y[O1];!n[x]&&i>=m&&(c[b](y[Um]),n[x]=!0)}else i>=m&&c[b](y[Um]);u(m,y)}},c.debugToConsole=function(m){pG("debug",m),f("warning",m)},c[D1]=function(m){pG("warn",m),f("warning",m)},c.errorToConsole=function(m){pG("error",m),f("error",m)},c.resetInternalMessageCount=function(){r=0,n={}},c[Nj]=u,c[qs]=function(m){l&&l.rm(),l=null};function u(m,h){if(!d()){var g=!0,v=zWe+h[O1];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(c.queue[Ht](h),r++,f(m===1?"error":"warn",h)),r===s)){var _="Internal events throttle limit per PageView reached for this app.",y=new Vv(23,_,!1);c.queue[Ht](y),m===1?c.errorToConsole(_):c[D1](_)}}}function p(m){return di(mn(m,$We,c).cfg,function(h){var g=h.cfg;i=g[yk],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function d(){return r>=s}function f(m,h){var g=lG(e||{});g&&g[Hs]&&g[Hs](m,h)}})}return t.__ieDyn=1,t}()});function yG(){!Su&&(Su=tl(function(){return In()}))}function YWe(t,e){var r=ad[Qm]||Gk[Qm];return r||(r=ad[Qm]=ad(t,e),Gk[Qm]=r),r}function jk(t){return t?t.isEnabled():!0}function M_e(t,e){return e&&t&&Xe(t.ignoreCookies)?or(t.ignoreCookies,e)!==-1:!1}function QWe(t,e){return e&&t&&Xe(t.blockedCookies)&&or(t.blockedCookies,e)!==-1?!0:M_e(t,e)}function N_e(t,e){var r=e[Fm];if(we(r)){var n=void 0;vt(t[R_e])||(n=!t[R_e]),vt(t[vG])||(n=!t[vG]),r=n}return r}function xG(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n&&n[Qm]?r=n[Qm]:r=ad(e)}return r||(r=YWe(e,(t||{})[kr])),r}function ad(t,e){var r,n,i,o,s,a,l,c,u;t=mn(t||Gk,null,e).cfg,s=di(t,function(d){d[nl](d.cfg,KWe),n=d.ref(d.cfg,"cookieCfg"),i=n[Ak]||"/",o=n[wk],a=N_e(t,n)!==!1,l=n.getCookie||XWe,c=n.setCookie||L_e,u=n.delCookie||L_e},e);var p=(r={isEnabled:function(){var d=N_e(t,n)!==!1&&a&&Z1(e),f=Gk[Qm];return d&&f&&p!==f&&(d=jk(f)),d},setEnabled:function(d){a=d!==!1,n[Fm]=d},set:function(d,f,m,h,g){var v=!1;if(jk(p)&&!QWe(n,d)){var _={},y=pr(f||_t),b=ps(y,";");if(b!==-1&&(y=pr(wm(f,b)),_=F_e(Un(f,b+1))),dc(_,wk,h||o,Zc,vt),!we(m)){var x=zm();if(vt(_[hG])){var P=wn(),U=P+m*1e3;if(U>0){var H=new Date;H.setTime(U),dc(_,hG,k_e(H,x?w_e:A_e)||k_e(H,x?w_e:A_e)||_t,Zc)}}x||dc(_,"max-age",_t+m,null,vt)}var j=jv();j&&j.protocol==="https:"&&(dc(_,"secure",null,null,vt),gG===null&&(gG=!Vk((ui()||{})[bS])),gG&&dc(_,"SameSite","None",null,vt)),dc(_,Ak,g||i,null,vt),c(d,O_e(y,_)),v=!0}return v},get:function(d){var f=_t;return jk(p)&&!M_e(n,d)&&(f=l(d)),f},del:function(d,f){var m=!1;return jk(p)&&(m=p.purge(d,f)),m},purge:function(d,f){var m,h=!1;if(Z1(e)){var g=(m={},m[Ak]=f||"/",m[hG]="Thu, 01 Jan 1970 00:00:01 GMT",m);zm()||(g["max-age"]="0"),u(d,O_e(_t,g)),h=!0}return h}},r[qs]=function(d){s&&s.rm(),s=null},r);return p[Qm]=p,p}function Z1(t){if(Hk===null){Hk=!1,!Su&&yG();try{var e=Su.v||{};Hk=e[_G]!==void 0}catch(r){Ue(t,2,68,"Cannot access document.cookie - "+Qr(r),{exception:$e(r)})}}return Hk}function F_e(t){var e={};if(t&&t[ct]){var r=pr(t)[yu](";");Ae(r,function(n){if(n=pr(n||_t),n){var i=ps(n,"=");i===-1?e[n]=null:e[pr(wm(n,i))]=pr(Un(n,i+1))}})}return e}function k_e(t,e){return mt(t[e])?t[e]():null}function O_e(t,e){var r=t||_t;return ze(e,function(n,i){r+="; "+n+(we(i)?_t:"="+i)}),r}function XWe(t){var e=_t;if(!Su&&yG(),Su.v){var r=Su.v[_G]||_t;D_e!==r&&(P_e=F_e(r),D_e=r),e=pr(P_e[t]||_t)}return e}function L_e(t,e){!Su&&yG(),Su.v&&(Su.v[_G]=t+"="+e)}function Vk(t){return gt(t)?!!(Kn(t,"CPU iPhone OS 12")||Kn(t,"iPad; CPU OS 12")||Kn(t,"Macintosh; Intel Mac OS X 10_14")&&Kn(t,"Version/")&&Kn(t,"Safari")||Kn(t,"Macintosh; Intel Mac OS X 10_14")&&Pm(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Kn(t,"Chrome/5")||Kn(t,"Chrome/6")||Kn(t,"UnrealEngine")&&!Kn(t,"Chrome")||Kn(t,"UCBrowser/12")||Kn(t,"UCBrowser/11")):!1}var mG,zv,w_e,A_e,_G,hG,R_e,vG,Qm,Hk,gG,D_e,Su,P_e,Gk,KWe,bG=I(()=>{pt();aG();Km();Yr();sd();K1();rd();pi();w_e="toGMTString",A_e="toUTCString",_G="cookie",hG="expires",R_e="isCookieUseDisabled",vG="disableCookiesUsage",Qm="_ckMgr",Hk=null,gG=null,D_e=null,P_e={},Gk={},KWe=(mG={cookieCfg:sG((zv={},zv[wk]={fb:"cookieDomain",dfVal:bu},zv.path={fb:"cookiePath",dfVal:bu},zv.enabled=ba,zv.ignoreCookies=ba,zv.blockedCookies=ba,zv)),cookieDomain:ba,cookiePath:ba},mG[vG]=ba,mG)});function VS(t,e,r,n){Ae(t,function(i){if(i&&i[e])if(r)Ms(function(){return n(i)},0);else try{n(i)}catch{}})}var JWe,zS,EG=I(()=>{fo();G1();pt();Km();Yr();pi();JWe={perfEvtsSendAll:!1};zS=function(){function t(e){this.listeners=[];var r,n,i=[],o=mn(e,JWe);n=o[pc](function(s){r=!!s.cfg.perfEvtsSendAll}),Wt(t,this,function(s){yr(s,"listeners",{g:function(){return i}}),s[N1]=function(a){i[Ht](a)},s[k1]=function(a){for(var l=or(i,a);l>-1;)i[gu](l,1),l=or(i,a)},s[V1]=function(a){VS(i,V1,!0,function(l){l[V1](a)})},s[Gm]=function(a,l){VS(i,Gm,!0,function(c){c[Gm](a,l)})},s[z1]=function(a,l){VS(i,z1,l,function(c){c[z1](a,l)})},s[xu]=function(a){a&&(r||!a[TS]())&&VS(i,xu,!1,function(l){a[il]?Ms(function(){return l[xu](a)},0):l[xu](a)})},s[qs]=function(a){var l=function(){n&&n.rm(),n=null,i=[]},c;if(VS(i,"unload",!1,function(u){var p=u[qs](a);p&&(c||(c=[]),c[Ht](p))}),c)return ds(function(u){return Hm(Vj(c),function(){l(),u()})});l()}})}return t.__ieDyn=1,t}()});function qn(t,e,r,n,i){if(t){var o=t;if(o[$1]&&(o=o[$1]()),o){var s=void 0,a=o[Uv](TG);try{if(s=o.create(e(),n,i),s){if(a&&s[ol]&&(s[ol]($v[SG],a),a[Uv]&&a[ol])){var l=a[Uv]($v[$S]);l||(l=[],a[ol]($v[$S],l)),l[Ht](s)}return o[ol](TG,s),r(s)}}catch(c){s&&s[ol]&&s[ol]("exception",c)}finally{s&&o.fire(s),o[ol](TG,a)}}}return r()}function CG(){return ZWe}var ex,SG,$S,ZWe,$v,WS,TG,zk=I(()=>{fo();pt();Yr();pi();ex="ctx",SG="ParentContextKey",$S="ChildrenContextKey",ZWe=null,$v=function(){function t(e,r,n){var i=this;if(i.start=wn(),i[Lo]=e,i[il]=n,i[TS]=function(){return!1},mt(r)){var o;yr(i,"payload",{g:function(){return!o&&mt(r)&&(o=r(),r=null),o}})}i[Uv]=function(s){return s?s===t[SG]||s===t[$S]?i[s]:(i[ex]||{})[s]:null},i[ol]=function(s,a){if(s)if(s===t[SG])i[s]||(i[TS]=function(){return!0}),i[s]=a;else if(s===t[$S])i[s]=a;else{var l=i[ex]=i[ex]||{};l[s]=a}},i[bk]=function(){var s=0,a=i[Uv](t[$S]);if(Xe(a))for(var l=0;l<a[ct];l++){var c=a[l];c&&(s+=c[Mm])}i[Mm]=wn()-i.start,i.exTime=i[Mm]-s,i[bk]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),WS=function(){function t(e){this.ctx={},Wt(t,this,function(r){r.create=function(n,i,o){return new $v(n,i,o)},r.fire=function(n){n&&(n[bk](),e&&mt(e[xu])&&e[xu](n))},r[ol]=function(n,i){if(n){var o=r[ex]=r[ex]||{};o[n]=i}},r[Uv]=function(n){return(r[ex]||{})[n]}})}return t.__ieDyn=1,t}(),TG="CoreUtils.doPerf"});function KS(){var t=Wv();return Un(t,0,8)+"-"+Un(t,8,12)+"-"+Un(t,12,16)+"-"+Un(t,16,20)+"-"+Un(t,20)}function Wv(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=_t,r,n=0;n<4;n++)r=id(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(id()&3)|0];return el(e,0,8)+el(e,9,4)+"4"+el(e,13,3)+i+el(e,16,3)+el(e,19,12)}var IG=I(()=>{"use strict";pt();pi();Dk()});function cd(t,e,r){return t&&t[ct]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function B_e(t,e,r){return cd(t,e)?t:r}function q_e(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[ct]<2;)e="0"+e;return e}function YS(t,e,r,n){var i;return i={},i[Mv]=cd(n,2,AG)?n:wG,i[M1]=Cu(t)?t:Wv(),i[F1]=Iu(e)?e:wm(Wv(),16),i.traceFlags=r>=0&&r<=255?r:1,i}function Kv(t,e){var r;if(!t||(Xe(t)&&(t=t[0]||""),!t||!gt(t)||t[ct]>8192))return null;if(t.indexOf(",")!==-1){var n=t[yu](",");t=n[e>0&&n[ct]>e?e:0]}var i=eKe.exec(pr(t));return!i||i[1]===AG||i[2]===$k||i[3]===Wk?null:(r={version:(i[1]||_t)[hu](),traceId:(i[2]||_t)[hu](),spanId:(i[3]||_t)[hu]()},r[qm]=parseInt(i[4],16),r)}function Cu(t){return cd(t,32,$k)}function Iu(t){return cd(t,16,Wk)}function tx(t){return!(!t||!cd(t[Mv],2,AG)||!cd(t[M1],32,$k)||!cd(t[F1],16,Wk)||!cd(q_e(t[qm]),2))}function QS(t){return tx(t)?(t[qm]&U_e)===U_e:!1}function XS(t){if(t){var e=q_e(t[qm]);cd(e,2)||(e="01");var r=t[Mv]||wG;return r!=="00"&&r!=="ff"&&(r=wG),"".concat(r.toLowerCase(),"-").concat(B_e(t.traceId,32,$k).toLowerCase(),"-").concat(B_e(t.spanId,16,Wk).toLowerCase(),"-").concat(e.toLowerCase())}return""}function JS(t){var e="traceparent",r=Kv(Zj(e),t);return r||(r=Kv(eG(e),t)),r}var eKe,wG,AG,$k,Wk,U_e,RG=I(()=>{pt();Yr();IG();K1();pi();eKe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,wG="00",AG="ff",$k="00000000000000000000000000000000",Wk="0000000000000000",U_e=1});function ld(t){return tKe.get(t,"state",{},!0)}function DG(t,e){for(var r=[],n=null,i=t[xa](),o;i;){var s=i[Lm]();if(s){n&&n[Bm]&&s[Gs]&&n[Bm](s),o=ld(s);var a=!!o[Bs];s[Bs]&&(a=s[Bs]()),a||r[Ht](s),n=s,i=i[xa]()}}Ae(r,function(l){var c=t[An]();l[Lv](t.getCfg(),c,e,t[xa]()),o=ld(l),!l[An]&&!o[An]&&(o[An]=c),o[Bs]=!0,delete o[ya]})}function Kk(t){return t.sort(function(e,r){var n=0;if(r){var i=r[Gs];e[Gs]?n=i?e[qv]-r[qv]:1:i&&(n=-1)}else n=e?1:-1;return n})}function H_e(t){var e={};return{getName:function(){return e[Lo]},setName:function(r){t&&t.setName(r),e[Lo]=r},getTraceId:function(){return e[M1]},setTraceId:function(r){t&&t.setTraceId(r),Cu(r)&&(e[M1]=r)},getSpanId:function(){return e[F1]},setSpanId:function(r){t&&t.setSpanId(r),Iu(r)&&(e[F1]=r)},getTraceFlags:function(){return e[qm]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[qm]=r}}}var tKe,PG=I(()=>{"use strict";pt();Yr();Y1();pi();RG();tKe=Pk("plugin")});function nKe(t,e,r){for(;t;){if(t[Lm]()===r)return t;t=t[xa]()}return Xm([r],e.config||{},e)}function NG(t,e,r,n){var i=null,o=[];e||(e=mn({},null,r[kr])),n!==null&&(i=n?nKe(t,r,n):t);var s={_next:l,ctx:{core:function(){return r},diagLog:function(){return al(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:u,getConfig:p,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:d,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[Ht]({func:f,self:vt(m)?s.ctx:m,args:h})}function l(){var f=i;if(i=f?f[xa]():null,!f){var m=o;m&&m[ct]>0&&(Ae(m,function(h){try{h.func.call(h.self,h.args)}catch(g){Ue(r[kr],2,73,"Unexpected Exception during onComplete - "+$e(g))}}),o=[])}return f}function c(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[ed];!v&&m&&(v={}),g[ed]=v,v=e.ref(g,ed),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function u(f,m){var h=c(f,!0);return m&&ze(m,function(g,v){if(we(h[g])){var _=e.cfg[g];(_||!we(_))&&(h[g]=_)}MS(e,h,g,v)}),e[nl](h,m)}function p(f,m,h){h===void 0&&(h=!1);var g,v=c(f,!1),_=e.cfg;return v&&(v[m]||!we(v[m]))?g=v[m]:(_[m]||!we(_[m]))&&(g=_[m]),g||!we(g)?g:h}function d(f){for(var m;m=s._next();){var h=m[Lm]();h&&f(h)}}return s}function ms(t,e,r,n){var i=mn(e),o=NG(t,i,r,n),s=o.ctx;function a(c){var u=o._next();return u&&u[Gs](c,s),!u}function l(c,u){return c===void 0&&(c=null),Xe(c)&&(c=Xm(c,i.cfg,r,u)),ms(c||s[xa](),i.cfg,r,u)}return s[Ii]=a,s[_u]=l,s}function rx(t,e,r){var n=mn(e.config),i=NG(t,n,e,r),o=i.ctx;function s(l){var c=i._next();return c&&c[qs](o,l),!c}function a(l,c){return l===void 0&&(l=null),Xe(l)&&(l=Xm(l,n.cfg,e,c)),rx(l||o[xa](),e,c)}return o[Ii]=s,o[_u]=a,o}function ZS(t,e,r){var n=mn(e.config),i=NG(t,n,e,r),o=i.ctx;function s(l){return o.iterate(function(c){mt(c[Fv])&&c[Fv](o,l)})}function a(l,c){return l===void 0&&(l=null),Xe(l)&&(l=Xm(l,n.cfg,e,c)),ZS(l||o[xa](),e,c)}return o[Ii]=s,o[_u]=a,o}function Xm(t,e,r,n){var i=null,o=!n;if(Xe(t)&&t[ct]>0){var s=null;Ae(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&mt(a[Gs])){var l=iKe(a,e,r);i||(i=l),s&&s._setNext(l),s=l}})}return n&&!i?Xm([n],e,r):i}function iKe(t,e,r){var n=null,i=mt(t[Gs]),o=mt(t[Bm]),s;t?s=t[vu]+"-"+t[qv]+"-"+V_e++:s="Unknown-0-"+V_e++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:u,unload:p,update:d,_id:s,_setNext:function(f){n=f}};function l(){var f;return t&&mt(t[G_e])&&(f=t[G_e]()),f||(f=ms(a,e,r)),f}function c(f,m,h,g,v){var _=!1,y=t?t[vu]:rKe,b=f[j_e];return b||(b=f[j_e]={}),f.setNext(n),t&&qn(f[An](),function(){return y+":"+h},function(){b[s]=!0;try{var x=n?n._id:_t;x&&(b[x]=!1),_=m(f)}catch(U){var P=n?b[n._id]:!0;P&&(_=!0),(!n||!P)&&Ue(f[Hs](),1,73,"Plugin ["+y+"] failed during "+h+" - "+$e(U)+", run flags: "+$e(b))}},g,v),_}function u(f,m){m=m||l();function h(g){if(!t||!i)return!1;var v=ld(t);return v[ya]||v[IS]?!1:(o&&t[Bm](n),t[Gs](f,g),!0)}c(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[Ii](f)}function p(f,m){function h(){var g=!1;if(t){var v=ld(t),_=t[An]||v[An];t&&(!_||_===f.core())&&!v[ya]&&(v[An]=null,v[ya]=!0,v[Bs]=!1,t[ya]&&t[ya](f,m)===!0&&(g=!0))}return g}c(f,h,"unload",function(){},m[il])||f[Ii](m)}function d(f,m){function h(){var g=!1;if(t){var v=ld(t),_=t[An]||v[An];t&&(!_||_===f.core())&&!v[ya]&&t[Fv]&&t[Fv](f,m)===!0&&(g=!0)}return g}c(f,h,"update",function(){},!1)||f[Ii](m)}return fu(a)}var rKe,j_e,G_e,V_e,kG,Yk=I(()=>{"use strict";pt();rG();Km();Yr();sd();rd();pi();zk();PG();rKe="TelemetryPluginChain",j_e="_hasRun",G_e="_getTelCtx",V_e=0;kG=function(){function t(e,r,n,i){var o=this,s=ms(e,r,n,i);Ta(o,s,Si(s))}return t}()});function Yv(){var t=[];function e(n){n&&t[Ht](n)}function r(n,i){Ae(t,function(o){try{o(n,i)}catch(s){Ue(n[Hs](),2,73,"Unexpected error calling unload handler - "+$e(s))}}),t=[]}return{add:e,run:r}}var Qk=I(()=>{pt();Yr();sd()});function Xk(){var t=[];function e(n){var i=t;t=[],Ae(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){Ue(n,2,73,"Unloading:"+$e(s))}})}function r(n){n&&lc(t,n)}return{run:e,add:r}}var OG=I(()=>{pt();sd()});var LG,Jm,oKe,ud,MG=I(()=>{"use strict";fo();pt();Km();Yr();sd();rd();pi();Yk();Qk();OG();Jm="getPlugin",oKe=(LG={},LG[ed]={isVal:bu,v:{}},LG),ud=function(){function t(){var e=this,r,n,i,o,s;c(),Wt(t,e,function(u){u[Lv]=function(p,d,f,m){l(p,d,m),r=!0},u[ya]=function(p,d){var f,m=u[An];if(!m||p&&m!==p[An]())return;var h,g=!1,v=p||rx(null,m,i&&i[Jm]?i[Jm]():i),_=d||(f={reason:0},f[il]=!1,f);function y(){g||(g=!0,o.run(v,d),s.run(v[Hs]()),h===!0&&v[Ii](_),c())}return!u[L1]||u[L1](v,_,y)!==!0?y():h=!0,h},u[Fv]=function(p,d){var f=u[An];if(!f||p&&f!==p[An]())return;var m,h=!1,g=p||ZS(null,f,i&&i[Jm]?i[Jm]():i),v=d||{reason:0};function _(){h||(h=!0,l(g.getCfg(),g.core(),g[xa]()))}return!u._doUpdate||u._doUpdate(g,v,_)!==!0?_():m=!0,m},td(u,"_addUnloadCb",function(){return o},"add"),td(u,"_addHook",function(){return s},"add"),yr(u,"_unloadHooks",{g:function(){return s}})}),e[Hs]=function(u){return a(u)[Hs]()},e[Bs]=function(){return r},e.setInitialized=function(u){r=u},e[Bm]=function(u){i=u},e[Ii]=function(u,p){p?p[Ii](u):i&&mt(i[Gs])&&i[Gs](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var p=u;if(!p){var d=n||ms(null,{},e[An]);i&&i[Jm]?p=d[_u](null,i[Jm]):p=d[_u](null,i)}return p}function l(u,p,d){mn(u,oKe,al(p)),!d&&p&&(d=p[_k]()[xa]());var f=i;i&&i[Jm]&&(f=i[Jm]()),e[An]=p,n=ms(d,u,p,f)}function c(){r=!1,e[An]=null,n=null,i=null,s=Xk(),o=Yv()}}return t.__ieDyn=1,t}()});function sKe(t,e,r){var n={id:e,fn:r};lc(t,n);var i={remove:function(){Ae(t,function(o,s){if(o.id===n.id)return t[gu](s,1),-1})}};return i}function aKe(t,e,r){for(var n=!1,i=t[ct],o=0;o<i;++o){var s=t[o];if(s)try{if(s.fn[Om](null,[e])===!1){n=!0;break}}catch(a){Ue(r,2,64,"Telemetry initializer failed: "+Qr(a),{exception:$e(a)},!0)}}return!n}var z_e,$_e=I(()=>{Us();fo();pt();Yr();MG();sd();rd();pi();z_e=function(t){Fs(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),Wt(e,r,function(s,a){s.addTelemetryInitializer=function(l){return sKe(i,n++,l)},s[Gs]=function(l,c){aKe(i,l,c?c[Hs]():s[Hs]())&&s[Ii](l,c)},s[L1]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(ud)});function uKe(t,e){return new WS(e)}function pKe(t,e,r){var n,i=[],o=[],s={};return Ae(r,function(a){(we(a)||we(a[Lv]))&&Cn(Q_e);var l=a[qv],c=a[vu];a&&l&&(we(s[l])?s[l]=c:Ca(t,"Two extensions have same priority #"+l+" - "+s[l]+", "+c)),!l||l<e?i[Ht](a):o[Ht](a)}),n={},n[An]=i,n[jm]=o,n}function K_e(t,e){var r=!1;return Ae(e,function(n){if(n===t)return r=!0,-1}),r}function UG(t,e,r,n){r&&ze(r,function(i,o){n&&Ci(o)&&Ci(e[i])&&UG(t,e[i],o,n),n&&Ci(o)&&Ci(e[i])?UG(t,e[i],o,n):t.set(e,i,o)})}function Y_e(t,e){var r=null,n=-1;return Ae(t,function(i,o){if(i.w===e)return r=i,n=o,-1}),{i:n,l:r}}function dKe(t,e){var r=Y_e(t,e).l;return r||(r={w:e,rm:function(){var n=Y_e(t,e);n.i!==-1&&t[gu](n.i,1)}},t[Ht](r)),r}function fKe(t,e,r){Ae(e,function(n){var i=di(t,n.w,r);delete n.w,n.rm=function(){i.rm()}})}var Zm,Q_e,cKe,W_e,lKe,FG,pd,X_e=I(()=>{"use strict";Us();fo();G1();pt();Km();Yr();oG();T_e();bG();Y1();uG();sd();rd();pi();EG();zk();Yk();PG();$_e();Qk();OG();Q_e="Plugins must provide initialize method",cKe="_notificationManager",W_e="SDK is still unloading...",lKe="SDK is not initialized",FG=cs((Zm={cookieCfg:{}},Zm[Bv]={rdOnly:!0,ref:!0,v:[]},Zm[jm]={rdOnly:!0,ref:!0,v:[]},Zm[ed]={ref:!0,v:{}},Zm[Ik]=ba,Zm.loggingLevelConsole=0,Zm.diagnosticLogInterval=ba,Zm));pd=function(){function t(){var e,r,n,i,o,s,a,l,c,u,p,d,f,m,h,g,v,_,y,b,x,P,U,H,j,M,F,z;Wt(t,this,function(q){T(),q._getDbgPlgTargets=function(){return[U]},q[Bs]=function(){return r},q[Lv]=function(W,ne,ye,Te){f&&Cn(W_e),q[Bs]()&&Cn("Core cannot be initialized more than once"),e=mn(W,FG,ye||q[kr],!1),W=e.cfg,ve(e[pc](function(bt){x=bt.cfg.instrumentationKey;var Jt=bt.ref(bt.cfg,ed);ze(Jt,function(qr){bt.ref(Jt,qr)}),we(x)&&Cn("Please provide instrumentation key")})),o=Te,Ye(),Ze(),q[kr]=ye;var Ne=W[Bv];if(u=[],u[Ht].apply(u,ak(ak([],ne,!1),Ne,!1)),p=W[jm],J(null),(!d||d[ct]===0)&&Cn("No "+jm+" available"),p&&p[ct]>1){var qe=q[Lm]("TeeChannelController");(!qe||!qe.plugin)&&Ue(n,1,28,"TeeChannel required")}fKe(W,P,n),P=null,r=!0,q.releaseQueue(),q[Dj]()},q.getChannels=function(){var W=[];return d&&Ae(d,function(ne){W[Ht](ne)}),fu(W)},q.track=function(W){qn(q[$1](),function(){return"AppInsightsCore:track"},function(){W===null&&(et(W),Cn("Invalid telemetry item")),!W[Lo]&&we(W[Lo])&&(et(W),Cn("telemetry name required")),W.iKey=W.iKey||x,W[Mm]=W[Mm]||Ea(new Date),W.ver=W.ver||"4.0",!f&&q[Bs]()?A()[Ii](W):i[Ht](W)},function(){return{item:W}},!W.sync)},q[_k]=A,q[P1]=function(){return o||(o=new zS(e.cfg),q[cKe]=o),o},q[N1]=function(W){q[P1]()[N1](W)},q[k1]=function(W){o&&o[k1](W)},q.getCookieMgr=function(){return l||(l=ad(e.cfg,q[kr])),l},q.setCookieMgr=function(W){l!==W&&(od(l,!1),l=W)},q[$1]=function(){return!s&&!a&&ve(e[pc](function(W){if(W.cfg.enablePerfMgr){var ne=W.cfg[Ik];mt(ne)&&(a=ne(q,q[P1]()))}})),s||a||CG()},q.setPerfMgr=function(W){s=W},q.eventCnt=function(){return i[ct]},q.releaseQueue=function(){if(r&&i[ct]>0){var W=i;i=[],Ae(W,function(ne){A()[Ii](ne)})}},q[Dj]=function(W){return h=W||null,z=!1,M&&M[Ov](),L(!0)};function L(W){if((!M||!M[Fm])&&!z){var ne=W||n&&n.queue[ct]>0;ne&&(F||(F=!0,ve(e[pc](function(ye){var Te=ye.cfg.diagnosticLogInterval;(!Te||!(Te>0))&&(Te=1e4);var Ne=!1;M&&(Ne=M[Fm],M[Ov]()),M=gj(se,Te),M.unref(),M[Fm]=Ne}))),M[Fm]=!0)}return M}q[Pj]=function(){z=!0,M&&M[Ov](),se()},Ta(q,function(){return m},["addTelemetryInitializer"]),q[qs]=function(W,ne,ye){var Te;W===void 0&&(W=!0),r||Cn(lKe),f&&Cn(W_e);var Ne=(Te={reason:50},Te[il]=W,Te.flushComplete=!1,Te),qe;W&&!ne&&(qe=ds(function(qr){ne=qr}));var bt=rx(ce(),q);bt[xS](function(){_.run(q[kr]),Uk([l,o,n],W,function(){T(),ne&&ne(Ne)})},q);function Jt(qr){Ne.flushComplete=qr,f=!0,v.run(bt,Ne),q[Pj](),bt[Ii](Ne)}return se(),je(W,Jt,6,ye)||Jt(!1),qe},q[Lm]=me,q.addPlugin=function(W,ne,ye,Te){if(!W){Te&&Te(!1),st(Q_e);return}var Ne=me(W[vu]);if(Ne&&!ne){Te&&Te(!1),st("Plugin ["+W[vu]+"] is already loaded!");return}var qe={reason:16};function bt(le){u[Ht](W),qe.added=[W],J(qe),Te&&Te(!0)}if(Ne){var Jt=[Ne.plugin],qr={reason:2,isAsync:!!ye};ae(Jt,qr,function(le){le?(qe.removed=Jt,qe.reason|=32,bt(!0)):Te&&Te(!1)})}else bt(!1)},q.updateCfg=function(W,ne){ne===void 0&&(ne=!0);var ye;if(q[Bs]()){ye={reason:1,cfg:e.cfg,oldCfg:ik({},e.cfg),newConfig:ik({},W),merge:ne},W=ye.newConfig;var Te=e.cfg;W[Bv]=Te[Bv],W[jm]=Te[jm]}e._block(function(Ne){var qe=Ne.cfg;UG(Ne,qe,W,ne),ne||ze(qe,function(bt){Ls(W,bt)||Ne.set(qe,bt,ba)}),Ne[nl](qe,FG)},!0),e[kv](),ye&&ke(ye)},q.evtNamespace=function(){return g},q.flush=je,q.getTraceCtx=function(W){return b||(b=H_e()),b},q.setTraceCtx=function(W){b=W||null},q.addUnloadHook=ve,td(q,"addUnloadCb",function(){return v},"add"),q.onCfgChange=function(W){var ne;return r?ne=di(e.cfg,W,q[kr]):ne=dKe(P,W),{rm:function(){ne.rm()}}},q.getWParam=function(){return Rm()||e.cfg.enableWParam?0:-1};function S(){var W={};H=[];var ne=function(ye){ye&&Ae(ye,function(Te){if(Te[vu]&&Te[Mv]&&!W[Te.identifier]){var Ne=Te[vu]+"="+Te[Mv];H[Ht](Ne),W[Te.identifier]=Te}})};ne(d),p&&Ae(p,function(ye){ne(ye)}),ne(u)}function T(){r=!1,e=mn({},FG,q[kr]),e.cfg[yk]=1,yr(q,"config",{g:function(){return e.cfg},s:function(ne){q.updateCfg(ne,!1)}}),yr(q,"pluginVersionStringArr",{g:function(){return H||S(),H}}),yr(q,"pluginVersionString",{g:function(){return j||(H||S(),j=H.join(";")),j||_t}}),yr(q,"logger",{g:function(){return n||(n=new Ym(e.cfg),e[kr]=n),n},s:function(ne){e[kr]=ne,n!==ne&&(od(n,!1),n=ne)}}),q[kr]=new Ym(e.cfg),U=[];var W=q.config[Bv]||[];W.splice(0,W[ct]),lc(W,U),m=new z_e,i=[],od(o,!1),o=null,s=null,a=null,od(l,!1),l=null,c=null,u=[],p=null,d=null,f=!1,h=null,g=ho("AIBaseCore",!0),v=Yv(),b=null,x=null,_=Xk(),P=[],j=null,H=null,z=!1}function A(){var W=ms(ce(),e.cfg,q);return W[xS](L),W}function J(W){var ne=pKe(q[kr],E_e,u);c=null,j=null,H=null,d=(p||[])[0]||[],d=Kk(lc(d,ne[jm]));var ye=lc(Kk(ne[An]),d);U=fu(ye);var Te=q.config[Bv]||[];Te.splice(0,Te[ct]),lc(Te,U);var Ne=A();d&&d[ct]>0&&DG(Ne[_u](d),ye),DG(Ne,ye),W&&ke(W)}function me(W){var ne=null,ye=null,Te=[];return Ae(U,function(Ne){if(Ne[vu]===W&&Ne!==m)return ye=Ne,-1;Ne.getChannel&&Te[Ht](Ne)}),!ye&&Te[ct]>0&&Ae(Te,function(Ne){if(ye=Ne.getChannel(W),!ye)return-1}),ye&&(ne={plugin:ye,setEnabled:function(Ne){ld(ye)[IS]=!Ne},isEnabled:function(){var Ne=ld(ye);return!Ne[ya]&&!Ne[IS]},remove:function(Ne,qe){var bt;Ne===void 0&&(Ne=!0);var Jt=[ye],qr=(bt={reason:1},bt[il]=Ne,bt);ae(Jt,qr,function(le){le&&J({reason:32,removed:Jt}),qe&&qe(le)})}}),ne}function ce(){if(!c){var W=(U||[]).slice();or(W,m)===-1&&W[Ht](m),c=Xm(Kk(W),e.cfg,q)}return c}function ae(W,ne,ye){if(W&&W[ct]>0){var Te=Xm(W,e.cfg,q),Ne=rx(Te,q);Ne[xS](function(){var qe=!1,bt=[];Ae(u,function(qr,le){K_e(qr,W)?qe=!0:bt[Ht](qr)}),u=bt,j=null,H=null;var Jt=[];p&&(Ae(p,function(qr,le){var ee=[];Ae(qr,function(te){K_e(te,W)?qe=!0:ee[Ht](te)}),Jt[Ht](ee)}),p=Jt),ye&&ye(qe),L()}),Ne[Ii](ne)}else ye(!1)}function se(){if(n&&n.queue){var W=n.queue.slice(0);n.queue[ct]=0,Ae(W,function(ne){var ye,Te=(ye={},ye[Lo]=h||"InternalMessageId: "+ne[O1],ye.iKey=x,ye[Mm]=Ea(new Date),ye.baseType=Vv.dataType,ye.baseData={message:ne[Um]},ye);q.track(Te)})}}function je(W,ne,ye,Te){var Ne=1,qe=!1,bt=null;Te=Te||5e3;function Jt(){Ne--,qe&&Ne===0&&(bt&&bt[Ov](),bt=null,ne&&ne(qe),ne=null)}if(d&&d[ct]>0){var qr=A()[_u](d);qr.iterate(function(le){if(le.flush){Ne++;var ee=!1;le.flush(W,function(){ee=!0,Jt()},ye)||ee||(W&&bt==null?bt=Ms(function(){bt=null,Jt()},Te):Jt())}})}return qe=!0,Jt(),!0}function Ye(){!o&&q[P1](),ve(e[pc](function(W){var ne=W.cfg.disableDbgExt;ne===!0&&y&&(o[k1](y),y=null),o&&!y&&ne!==!0&&(y=S_e(W.cfg),o[N1](y))}))}function Ze(){ve(e[pc](function(W){var ne=W.cfg.enablePerfMgr;!ne&&a&&(a=null),ne&&wS(W.cfg,Ik,uKe)}))}function ke(W){var ne=ZS(ce(),q);ne[xS](L),(!q._updateHook||q._updateHook(ne,W)!==!0)&&ne[Ii](W)}function st(W){var ne=q[kr];ne?(Ue(ne,2,73,W),L()):Cn(W)}function et(W){var ne=q[P1]();ne&&ne[Gm]([W],2)}function ve(W){_.add(W)}})}return t.__ieDyn=1,t}()});function rye(t){return t&&t[Zp]?t[Zp](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_t):t}function e4(t,e){var r;if(e){var n=_t;Xe(e)?(n=_t,Ae(e,function(o){o=rye(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=rye(e),n&&(n[0]!=="."&&(n="."+n),t=(t||_t)+n)}var i=vKe.exec(t||_t)||[];return r={},r[js]=i[1],r.ns=(i[2]||_t).replace(mKe,".").replace(hKe,_t)[yu](".").sort().join("."),r}function BG(t,e,r){var n=[],i=tC.get(t,Jk,{},!1),o=e4(e,r);return ze(i,function(s,a){Ae(a,function(l){var c;(!o[js]||o[js]===l.evtName[js])&&(!o.ns||o.ns===o.ns)&&n[Ht]((c={},c[Lo]=l.evtName[js]+(l.evtName.ns?"."+l.evtName.ns:_t),c.handler=l[ES],c))})}),n}function uye(t,e,r){r===void 0&&(r=!0);var n=tC.get(t,Jk,{},r),i=n[e];return i||(i=n[e]=[]),i}function pye(t,e,r,n){t&&e&&e[js]&&(t[tye]?t[tye](e[js],r,n):t[eye]&&t[eye](iye+e[js],r))}function _Ke(t,e,r,n){var i=!1;return t&&e&&e[js]&&r&&(t[Z_e]?(t[Z_e](e[js],r,n),i=!0):t[J_e]&&(t[J_e](iye+e[js],r),i=!0)),i}function nye(t,e,r,n){for(var i=e[ct];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(pye(t,o.evtName,o[ES],o.capture),e[gu](i,1))}}function yKe(t,e,r){if(e[js])nye(t,uye(t,e[js]),e,r);else{var n=tC.get(t,Jk,{});ze(n,function(i,o){nye(t,o,e,r)}),Si(n)[ct]===0&&tC.kill(t,Jk)}}function Ia(t,e){var r;return e?(Xe(e)?r=[t].concat(e):r=[t,e],r=e4("xx",r).ns[yu](".")):r=t,r}function wu(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=e4(e,n);if(s=_Ke(t,a,r,i),s&&tC.accept(t)){var l=(o={guid:gKe++,evtName:a},o[ES]=r,o.capture=i,o);uye(t,a.type)[Ht](l)}}catch{}return s}function dd(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=e4(e,n),s=!1;yKe(t,o,function(a){return o.ns&&!r||a[ES]===r?(s=!0,!0):!1}),s||pye(t,o,r,i)}catch{}}function qG(t,e,r,n){return n===void 0&&(n=!1),wu(t,e,r,null,n)}function HG(t,e,r,n){n===void 0&&(n=!1),dd(t,e,r,null,n)}function t4(t,e,r){var n=!1,i=Bn();i&&(n=wu(i,t,e,r),n=wu(i.body,t,e,r)||n);var o=In();return o&&(n=wu(o,t,e,r)||n),n}function r4(t,e,r){var n=Bn();n&&(dd(n,t,e,r),dd(n.body,t,e,r));var i=In();i&&dd(i,t,e,r)}function nx(t,e,r,n){var i=!1;return e&&t&&t[ct]>0&&Ae(t,function(o){o&&(!r||or(r,o)===-1)&&(i=t4(o,e,n)||i)}),i}function n4(t,e,r,n){var i=!1;return e&&t&&Xe(t)&&(i=nx(t,e,r,n),!i&&r&&r[ct]>0&&(i=nx(t,e,null,n))),i}function eh(t,e,r){t&&Xe(t)&&Ae(t,function(n){n&&r4(n,e,r)})}function rC(t,e,r){return n4([aye,sye,Zk],t,e,r)}function nC(t,e){eh([aye,sye,Zk],t,e)}function ix(t,e,r){function n(s){var a=In();t&&a&&a.visibilityState==="hidden"&&t(s)}var i=Ia(cye,r),o=nx([Zk],t,e,i);return(!e||or(e,eC)===-1)&&(o=nx([eC],n,e,i)||o),!o&&e&&(o=ix(t,null,r)),o}function iC(t,e){var r=Ia(cye,e);eh([Zk],t,r),eh([eC],null,r)}function ox(t,e,r){function n(s){var a=In();t&&a&&a.visibilityState==="visible"&&t(s)}var i=Ia(lye,r),o=nx([oye],t,e,i);return o=nx([eC],n,e,i)||o,!o&&e&&(o=ox(t,null,r)),o}function oC(t,e){var r=Ia(lye,e);eh([oye],t,r),eh([eC],null,r)}var iye,J_e,Z_e,eye,tye,Jk,eC,Zk,oye,sye,aye,cye,lye,mKe,hKe,gKe,tC,vKe,dye=I(()=>{pt();Yr();Y1();pi();iye="on",J_e="attachEvent",Z_e="addEventListener",eye="detachEvent",tye="removeEventListener",Jk="events",eC="visibilitychange",Zk="pagehide",oye="pageshow",sye="unload",aye="beforeunload",cye=ho("aiEvtPageHide"),lye=ho("aiEvtPageShow"),mKe=/\.[\.]+/g,hKe=/[\.]+$/,gKe=1,tC=Pk("events"),vKe=/^([^.]*)(?:\.(.+)|)/});var jG,fye=I(()=>{gk();jG=Vi({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var xr=I(()=>{U0e();B0e();X_e();MG();Dk();IG();oG();rd();pt();gk();dye();K1();Us();EG();zk();sd();Yk();fye();bG();Y1();Qk();RG();Km();Lk();aG()});var Au,mye,GG,i4,o4=I(()=>{Au="",mye="https://browser.events.data.microsoft.com/OneCollector/1.0/",GG="version",i4="properties"});var VG,zG,sx,Ru,$G,hn,Qv,fd,s4,a4,c4,l4,sC,u4=I(()=>{VG="initialize",zG="logger",sx="indexOf",Ru="timings",$G="pollInternalLogs",hn="value",Qv="kind",fd="length",s4="processTelemetryStart",a4="handleField",c4="rmSanitizer",l4="rmFieldSanitizer",sC="canHandle"});function zi(t){return!(t===Au||we(t))}function p4(t){if(t){var e=ps(t,"-");if(e>-1)return wm(t,e)}return Au}function yye(){return WG===null&&(WG=!vt(Uint8Array)&&!SKe()&&!Vm()),WG}function d4(t){return!!(t&&Gi(t)&&t>=1&&t<=4)}function f4(t,e,r){if(!e&&!zi(e)||typeof t!="string")return null;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||Xe(e))e={value:e};else if(n==="object"&&!gye.call(e,"value"))e={value:r?JSON.stringify(e):e};else if(we(e[hn])||e[hn]===Au||!gt(e[hn])&&!Gi(e[hn])&&!Jc(e[hn])&&!Xe(e[hn]))return null;if(Xe(e[hn])&&!YG(e[hn]))return null;if(!we(e[Qv])){if(Xe(e[hn])||!aC(e[Qv]))return null;e[hn]=e[hn].toString()}return e}function m4(t,e,r){var n=-1;if(!vt(t))if(e>0&&(e===32?n=8192:e<=13&&(n=e<<5)),TKe(r))n===-1&&(n=0),n|=r;else{var i=EKe[Du(t)]||-1;n!==-1&&i!==-1?n|=i:i===6&&(n=i)}return n}function xye(t,e,r){r===void 0&&(r=!0);var n;return t&&(n=t.get(e),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||Au}function bye(t){t===void 0&&(t="D");var e=KS();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Au)),e}function Xv(t,e,r,n,i){var o={},s=!1,a=0,l=arguments[fd],c=arguments;for(Jc(c[0])&&(s=c[0],a++);a<l;a++){var t=c[a];ze(t,function(p,d){s&&d&&Br(d)?Xe(d)?(o[p]=o[p]||[],Ae(d,function(f,m){f&&Br(f)?o[p][m]=Xv(!0,o[p][m],f):o[p][m]=f})):o[p]=Xv(!0,o[p],d):o[p]=d})}return o}function aC(t){return t===0||t>0&&t<=13||t===32}function TKe(t){return t>=0&&t<=9}function SKe(){var t=ui();if(!vt(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[sx]("safari")>=0||e[sx]("firefox")>=0)&&e[sx]("chrome")<0)return!0}return!1}function YG(t){return t[fd]>0}function cC(t,e){var r=t;r[Ru]=r[Ru]||{},r[Ru][s4]=r[Ru][s4]||{},r[Ru][s4][e]=Vs()}function Du(t){var e=0;if(t!=null){var r=typeof t;r==="string"?e=1:r==="number"?e=2:r==="boolean"?e=3:r===$p&&(e=4,Xe(t)?(e=4096,t[fd]>0&&(e|=Du(t[0]))):gye.call(t,"value")&&(e=8192|Du(t[hn])))}return e}function h4(){return!!Kr("chrome")}function g4(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(l,c,u){try{l[c]=u}catch{}}var a=new XMLHttpRequest;return n&&s(a,xKe,n),r&&s(a,hye,r),a.open(t,e,!i),r&&s(a,hye,r),!i&&o&&s(a,bKe,o),a}function th(t){return t>0}var md,KG,ax,gye,xKe,hye,bKe,EKe,WG,vye,_ye,Vs,v4=I(()=>{xr();Us();pt();o4();u4();KG="4.0.4",ax="1DS-Web-JS-"+KG,gye=oS.hasOwnProperty,xKe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",hye="withCredentials",bKe="timeout",EKe=(md={},md[0]=0,md[2]=6,md[1]=1,md[3]=7,md[4098]=6,md[4097]=1,md[4099]=7,md),WG=null,vye=Rm(),_ye=Dm();Vs=A1});function IKe(t){return t&&(!t.getProperty||!t.setProperty)&&Cn("Invalid property storage override passed."),!0}var CKe,Eye,Tye=I(()=>{Us();fo();xr();pt();o4();v4();u4();CKe=cs({endpointUrl:mye,propertyStorageOverride:{isVal:IKe}});Eye=function(t){Fs(e,t);function e(){var r=t.call(this)||this;return Wt(e,r,function(n,i){n[VG]=function(o,s,a,l){qn(n,function(){return"AppInsightsCore.initialize"},function(){try{i[VG](mn(o,CKe,a||n[zG],!1).cfg,s,a,l)}catch(p){var c=n[zG],u=$e(p);u[sx]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),Ue(c,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:o,extensions:s,logger:a,notificationManager:l}})},n.track=function(o){qn(n,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s[Ru]=s[Ru]||{},s[Ru].trackStart=Vs(),d4(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=ax;var l=s.baseData=s.baseData||{};l[i4]=l[i4]||{};var c=l[i4];c[GG]=c[GG]||n.pluginVersionString||Au}i.track(s)},function(){return{item:o}},!o.sync)},n[$G]=function(o){return i[$G](o||"InternalLog")}}),r}return e.__ieDyn=1,e}(pd)});var Sye,Cye,Iye,wye,Aye,Rye=I(()=>{xr();Sye=Vi({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),Cye=Vi({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Iye=Vi({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),wye=Vi({Normal:1,Critical:2}),Aye=Vi({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});var Dye,Pye=I(()=>{xr();pt();o4();v4();u4();Dye=function(){function t(e){var r=this,n={},i=[],o=[];e&&o.push(e);function s(u,p){var d,f=n[u];if(f&&(d=f[p]),!d&&d!==null){if(gt(u)&&gt(p))if(o[fd]>0){for(var m=0;m<o[fd];m++)if(o[m][a4](u,p)){d={canHandle:!0,fieldHandler:o[m]};break}}else i[fd]===0&&(d={canHandle:!0});if(!d&&d!==null){d=null;for(var m=0;m<i[fd];m++)if(i[m][a4](u,p)){d={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=n[u]={}),f[p]=d}return d}r.clearCache=function(){n={}},r.addSanitizer=function(u){u&&(nk(i,u)||i.push(u),n={})},r.addFieldSanitizer=function(u){u&&(nk(o,u)||o.push(u),n={})},r[c4]=function(u){if(u){var p=or(i,u);p!==-1&&(i.splice(p,1),n={}),Ae(i,function(d){d&&d[c4]&&d[c4](u)})}},r[l4]=function(u){if(u){var p=or(o,u);p!==-1&&(o.splice(p,1),n={}),Ae(i,function(d){d&&d[l4]&&d[l4](u)})}},r.isEmpty=function(){return w1(i)+w1(o)===0},r[a4]=function(u,p){var d=s(u,p);return d?d[sC]:!1},r[hn]=function(u,p,d,f){var m=s(u,p);if(m&&m[sC]){if(!m||!m[sC])return null;if(m.handler)return m.handler[hn](u,p,d,f);if(!gt(p)||we(d)||d===Au)return null;var h=null,g=Du(d);if((g&8192)===8192){var v=g&-8193;if(h=d,!zi(h[hn])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=l(u,p,d):g===4&&(h=l(u,p,f?JSON.stringify(d):d));if(h)return a(m,u,p,g,h,f)}return null},r.property=function(u,p,d,f){var m=s(u,p);if(!m||!m[sC]||!gt(p)||we(d)||!zi(d[hn]))return null;var h=Du(d[hn]);return h===0?null:a(m,u,p,h,d,f)};function a(u,p,d,f,m,h){if(u.handler)return u.handler.property(p,d,m,h);if(!we(m[Qv])){if((f&4096)===4096||!aC(m[Qv]))return null;m[hn]=m[hn].toString()}return c(u.fieldHandler,p,d,f,m)}function l(u,p,d){return zi(d)?{value:d}:null}function c(u,p,d,f,m){if(m&&u){var h=u.getSanitizer(p,d,f,m[Qv],m.propertyType);if(h)if(f===4){var g={},v=m[hn];ze(v,function(y,b){var x=p+"."+d;if(zi(b)){var P=l(x,y,b);P=c(u,x,y,Du(b),P),P&&(g[y]=P[hn])}}),m[hn]=g}else{var _={path:p,name:d,type:f,prop:m,sanitizer:r};m=h.call(r,_)}}return m}}return t.getFieldType=Du,t}()});var Nye={};Ri(Nye,{AppInsightsCore:()=>Eye,BaseTelemetryPlugin:()=>ud,DiagnosticLogger:()=>Ym,EventLatency:()=>Cye,EventPersistence:()=>wye,EventPropertyType:()=>Iye,EventsDiscardedReason:()=>rl,FullVersionString:()=>ax,InternalAppInsightsCore:()=>pd,LoggingSeverity:()=>jG,MinChannelPriorty:()=>Aj,NotificationManager:()=>zS,PerfEvent:()=>$v,PerfManager:()=>WS,ProcessTelemetryContext:()=>kG,TraceLevel:()=>Aye,Undefined:()=>pu,ValueKind:()=>Sye,ValueSanitizer:()=>Dye,Version:()=>KG,_InternalLogMessage:()=>Vv,__getRegisteredEvents:()=>BG,_logInternalMessage:()=>fG,_throwInternal:()=>Ue,_warnToConsole:()=>Ca,addEventHandler:()=>t4,addEventListeners:()=>n4,addPageHideEventListener:()=>ix,addPageShowEventListener:()=>ox,addPageUnloadEventListener:()=>rC,areCookiesSupported:()=>Z1,arrForEach:()=>Ae,arrIndexOf:()=>or,arrMap:()=>mu,arrReduce:()=>I1,attachEvent:()=>qG,blockDynamicConversion:()=>BS,cookieAvailable:()=>Z1,createCookieMgr:()=>ad,createDynamicConfig:()=>mn,createEnumStyle:()=>Vi,createGuid:()=>bye,createProcessTelemetryContext:()=>ms,createTraceParent:()=>YS,createUniqueNamespace:()=>ho,createUnloadHandlerContainer:()=>Yv,dateNow:()=>wn,detachEvent:()=>HG,disallowsSameSiteNone:()=>Vk,doPerf:()=>qn,dumpObj:()=>$e,eventOff:()=>dd,eventOn:()=>wu,extend:()=>Xv,findW3cTraceParent:()=>JS,forceDynamicConversion:()=>iG,formatTraceParent:()=>XS,generateW3CId:()=>Wv,getCommonSchemaMetaData:()=>m4,getConsole:()=>AS,getCookieValue:()=>xye,getCrypto:()=>RS,getDocument:()=>In,getDynamicConfigHandler:()=>US,getExceptionName:()=>Qr,getFieldValueType:()=>Du,getGlobal:()=>Oo,getGlobalInst:()=>Kr,getHistory:()=>uS,getIEVersion:()=>PS,getISOString:()=>Ea,getJSON:()=>mo,getLocation:()=>jv,getMsCrypto:()=>DS,getNavigator:()=>ui,getPerformance:()=>Xp,getSetValue:()=>wS,getTenantId:()=>p4,getTime:()=>Vs,getWindow:()=>Bn,hasDocument:()=>Rm,hasHistory:()=>XN,hasJSON:()=>Eu,hasNavigator:()=>C1,hasOwnProperty:()=>Wn,hasWindow:()=>Dm,isArray:()=>Xe,isArrayValid:()=>YG,isBeaconsSupported:()=>Sa,isBoolean:()=>Jc,isChromium:()=>h4,isDate:()=>_1,isDocumentObjectAvailable:()=>vye,isError:()=>du,isFetchSupported:()=>nd,isFunction:()=>mt,isGreaterThanZero:()=>th,isIE:()=>zm,isLatency:()=>d4,isNotTruthy:()=>ON,isNullOrUndefined:()=>we,isNumber:()=>Gi,isObject:()=>Br,isReactNative:()=>Vm,isSampledFlag:()=>QS,isString:()=>gt,isTruthy:()=>Zc,isTypeof:()=>NN,isUint8ArrayAvailable:()=>yye,isUndefined:()=>vt,isValidSpanId:()=>Iu,isValidTraceId:()=>Cu,isValidTraceParent:()=>tx,isValueAssigned:()=>zi,isValueKind:()=>aC,isWindowObjectAvailable:()=>_ye,isXhrSupported:()=>$m,mergeEvtNamespace:()=>Ia,newGuid:()=>KS,newId:()=>LS,normalizeJsName:()=>Hv,objDefineAccessors:()=>$N,objForEachKey:()=>ze,objFreeze:()=>fu,objKeys:()=>Si,objSeal:()=>UN,onConfigChange:()=>di,openXhr:()=>g4,optimizeObject:()=>fc,parseTraceParent:()=>Kv,perfNow:()=>A1,proxyAssign:()=>zj,proxyFunctionAs:()=>td,proxyFunctions:()=>Ta,random32:()=>id,randomValue:()=>OS,removeEventHandler:()=>r4,removeEventListeners:()=>eh,removePageHideEventListener:()=>iC,removePageShowEventListener:()=>oC,removePageUnloadEventListener:()=>nC,safeGetCookieMgr:()=>xG,safeGetLogger:()=>al,sanitizeProperty:()=>f4,setEnableEnvMocks:()=>Jj,setProcessTelemetryTimings:()=>cC,setValue:()=>dc,strContains:()=>Kn,strEndsWith:()=>Pm,strFunction:()=>f1,strObject:()=>$p,strPrototype:()=>Qc,strStartsWith:()=>Av,strTrim:()=>pr,strUndefined:()=>pu,throwError:()=>Cn,toISOString:()=>Ea,useXDomainRequest:()=>Gv});var Jv=I(()=>{Tye();Rye();Pye();xr();v4()});var Zv,_4,y4,QG=I(()=>{Zv="REAL_TIME",_4="NEAR_REAL_TIME",y4="BEST_EFFORT"});var cl,x4,kye,b4,Oye,XG,Lye,Mye,Fye,JG,ZG,E4,Uye,eV,Bye,tV,T4,rV,S4,C4,I4,lC,nV,qye,cx,iV,w4,uC=I(()=>{cl="",x4="POST",kye="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",b4="drop",Oye="send",XG="requeue",Lye="rspFail",Mye="oth",Fye="no-cache, no-store",JG="application/x-json-stream",ZG="cache-control",E4="content-type",Uye="kill-tokens",eV="kill-duration",Bye="kill-duration-seconds",tV="time-delta-millis",T4="client-version",rV="client-id",S4="time-delta-to-apply-millis",C4="upload-time",I4="apikey",lC="AuthMsaDeviceTicket",nV="AuthXToken",qye="NoResponseBody",cx="msfpc",iV="trace",w4="user"});var pC,A4,R4,D4,dC,Nt,mc,hc,Yn,Pu,$i,ll,e0,lx,ux,P4,px,N4,k4,Hye,oV,sV,jye,Gye,O4,L4,aV,cV,lV,Vye,dx,rh,uV,ul,fC,Nu,pV,dV,fx,Mo,zs,mC,mx,M4,hC,zye,F4,U4,hx,fV,gC,B4,q4,H4,j4,G4,vC,$ye,Wye,mV,hV,Kye,Yye,Qye,_C,nh,V4,t0,gx=I(()=>{pC="allowRequestSending",A4="firstRequestSent",R4="shouldAddClockSkewHeaders",D4="getClockSkewHeaderValue",dC="setClockSkew",Nt="length",mc="concat",hc="iKey",Yn="count",Pu="events",$i="push",ll="split",e0="splice",lx="toLowerCase",ux="hdrs",P4="useHdrs",px="initialize",N4="setTimeoutOverride",k4="clearTimeoutOverride",Hye="payloadPreprocessor",oV="overrideEndpointUrl",sV="avoidOptions",jye="disableEventTimings",Gye="stringifyObjects",O4="enableCompoundKey",L4="disableXhrSync",aV="disableFetchKeepAlive",cV="useSendBeacon",lV="alwaysUseXhrOverride",Vye="unloadTransports",dx="urlString",rh="timeout",uV="ontimeout",ul="data",fC="_sendReason",Nu="headers",pV="getResponseHeader",dV="getAllResponseHeaders",fx="_thePayload",Mo="batches",zs="sendType",mC="canSendRequest",mx="sendQueuedRequests",M4="isCompletelyIdle",hC="setUnloading",zye="isTenantKilled",F4="sendSynchronousBatch",U4="_transport",hx="getWParam",fV="isBeacon",gC="timings",B4="isTeardown",q4="isSync",H4="sendPOST",j4="setKillSwitchTenants",G4="_backOffTransmission",vC="identifier",$ye="disableOptimizeObj",Wye="ignoreMc1Ms0CookieProcessing",mV="eventsLimitInMem",hV="autoFlushEventsLimit",Kye="disableAutoBatchFlushLimit",Yye="overrideInstrumentationKey",Qye="disableTelemetry",_C="sendAttempt",nh="latency",V4="baseData",t0="sync"});function Jye(t){var e=(t.ext||{}).intweb;return e&&zi(e[cx])?e[cx]:null}function Xye(t){for(var e=null,r=0;e===null&&r<t[Nt];r++)e=Jye(t[r]);return e}var vx,gV=I(()=>{Jv();uC();gx();vx=function(){function t(e,r){var n=r?[][mc](r):[],i=this,o=Xye(n);i[hc]=function(){return e},i.Msfpc=function(){return o||cl},i[Yn]=function(){return n[Nt]},i[Pu]=function(){return n},i.addEvent=function(s){return s?(n[$i](s),o||(o=Jye(s)),!0):!1},i[ll]=function(s,a){var l;if(s<n[Nt]){var c=n[Nt]-s;we(a)||(c=a<c?a:c),l=n[e0](s,c),o=Xye(n)}return new t(e,l)}}return t.create=function(e,r){return new t(e,r)},t}()});var vV,Zye=I(()=>{fo();gx();vV=function(){function t(){var e=!0,r=!0,n=!0,i="use-collector-delta",o=!1;Wt(t,this,function(s){s[pC]=function(){return e},s[A4]=function(){n&&(n=!1,o||(e=!1))},s[R4]=function(){return r},s[D4]=function(){return i},s[dC]=function(a){o||(a?(i=a,r=!0,o=!0):r=!1,e=!0)}})}return t.__ieDyn=1,t}()});var wKe,_V,e1e=I(()=>{fo();Jv();gx();wKe=1e3,_V=function(){function t(){var e={};function r(n){var i=[];return n&&Ae(n,function(o){i[$i](pr(o))}),i}Wt(t,this,function(n){n[j4]=function(i,o){if(i&&o)try{var s=r(i[ll](","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*wKe,l=0;l<s[Nt];++l)e[s[l]]=wn()+a}catch{return[]}return[]},n[zye]=function(i){var o=e,s=pr(i);return o[s]!==void 0&&o[s]>wn()?!0:(delete o[s],!1)}})}return t.__ieDyn=1,t}()});function r1e(t){return!(t>=300&&t<500&&t!=408&&t!=429||t==501||t==505)}function z4(t){var e=0,r=t1e*AKe,n=t1e*RKe,i=Math.floor(Math.random()*(n-r))+r;return e=Math.pow(2,t)*i,Math.min(e,DKe)}var AKe,RKe,t1e,DKe,yV=I(()=>{AKe=.8,RKe=1.2,t1e=3e3,DKe=6e5});function i1e(t,e,r,n){if(n&&t){var i=m4(n.value,n.kind,n.propertyType);if(i>-1){var o=t[n1e];o||(o=t[n1e]={f:{}});var s=o[$4];if(s||(s=o[$4]={}),e)for(var a=0;a<e.length;a++){var l=e[a];s[l]||(s[l]={f:{}});var c=s[l][$4];c||(c=s[l][$4]={}),s=c}s=s[r]={},Xe(n.value)?s.a={t:i}:s.t=i}}}var PKe,NKe,o1e,s1e,kKe,n1e,$4,OKe,a1e,c1e=I(()=>{fo();Jv();gV();uC();pt();PKe=20,NKe=3984588,o1e=65e3,s1e=2e6,kKe=Math.min(s1e,o1e),n1e="metadata",$4="f",OKe=/\./,a1e=function(){function t(e,r,n,i){var o="data",s="baseData",a="ext",l=!!i,c=!0,u=r,p={};Wt(t,this,function(d){d.createPayload=function(h,g,v,_,y,b){return{apiKeys:[],payloadBlob:cl,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:h,isTeardown:g,isSync:v,isBeacon:_,sendType:b,sendReason:y}},d.appendPayload=function(h,g,v){var _=h&&g&&!h.overflow;return _&&qn(e,function(){return"Serializer:appendPayload"},function(){for(var y=g.events(),b=h.payloadBlob,x=h.numEvents,P=!1,U=[],H=[],j=h.isBeacon,M=j?o1e:NKe,F=j?kKe:s1e,z=0,q=0;z<y.length;){var L=y[z];if(L){if(x>=v){h.overflow=g.split(z);break}var S=d.getEventBlob(L);if(S&&S.length<=F){var T=S.length,A=b.length;if(A+T>M){h.overflow=g.split(z);break}b&&(b+=`
`),b+=S,q++,q>PKe&&(el(b,0,1),q=0),P=!0,x++}else S?U.push(L):H.push(L),y.splice(z,1),z--}z++}if(U.length>0&&h.sizeExceed.push(vx.create(g.iKey(),U)),H.length>0&&h.failedEvts.push(vx.create(g.iKey(),H)),P){h.batches.push(g),h.payloadBlob=b,h.numEvents=x;var J=g.iKey();or(h.apiKeys,J)===-1&&h.apiKeys.push(J)}},function(){return{payload:h,theBatch:{iKey:g.iKey(),evts:g.events()},max:v}}),_},d.getEventBlob=function(h){try{return qn(e,function(){return"Serializer.getEventBlob"},function(){var g={};g.name=h.name,g.time=h.time,g.ver=h.ver,g.iKey="o:"+p4(h.iKey);var v={},_=h[a];_&&(g[a]=v,ze(_,function(x,P){var U=v[x]={};m(P,U,"ext."+x,!0,null,null,!0)}));var y=g[o]={};y.baseType=h.baseType;var b=y[s]={};return m(h.baseData,b,s,!1,[s],function(x,P,U){i1e(v,x,P,U)},c),m(h.data,y,o,!1,[],function(x,P,U){i1e(v,x,P,U)},c),JSON.stringify(g)},function(){return{item:h}})}catch{return null}};function f(h,g){var v=p[h];return v===void 0&&(h.length>=7&&(v=Av(h,"ext.metadata")||Av(h,"ext.web")),p[h]=v),v}function m(h,g,v,_,y,b,x){ze(h,function(P,U){var H=null;if(U||zi(U)){var j=v,M=P,F=y,z=g;if(l&&!_&&OKe.test(P)){var q=P.split("."),L=q.length;if(L>1){F&&(F=F.slice());for(var S=0;S<L-1;S++){var T=q[S];z=z[T]=z[T]||{},j+="."+T,F&&F.push(T)}M=q[L-1]}}var A=_&&f(j,M);if(!A&&u&&u.handleField(j,M)?H=u.value(j,M,U,n):H=f4(M,U,n),H){var J=H.value;if(z[M]=J,b&&b(F,M,H),x&&typeof J=="object"&&!Xe(J)){var me=F;me&&(me=me.slice(),me.push(M)),m(U,J,j+"."+M,_,me,b,x)}}}})}})}return t.__ieDyn=1,t}()});function _x(t,e){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return hj([t,e],r,n,i)}}}var xV=I(()=>{pt()});function n0(t,e,r){EV[t]=e,r!==!1&&(TV[e]=t)}function u1e(t){try{return t.responseText}catch{}return cl}function p1e(t,e){var r=!1;if(t&&e){var n=Si(t);if(n&&n[Nt]>0)for(var i=e[lx](),o=0;o<n[Nt];o++){var s=n[o];if(s&&Wn(e,s)&&s[lx]()===i){r=!0;break}}}return r}function yx(t,e,r,n){e&&r&&r[Nt]>0&&(n&&EV[e]?(t[ux][EV[e]]=r,t[P4]=!0):t.url+="&"+e+"="+r)}function d1e(t,e){return e&&(Gi(e)?t=[e][mc](t):Xe(e)&&(t=e[mc](t))),t}function FKe(t,e,r){for(var n=0;n<t[Nt];n++)if(t[n].name===e){t[n].value=r;return}t[$i]({name:e,value:r})}function UKe(t,e){for(var r=0;r<t[Nt];r++)if(t[r].name===e){t[e0](r,1);return}}var r0,bV,l1e,LKe,MKe,EV,TV,f1e,m1e=I(()=>{fo();Jv();pt();Zye();uC();e1e();yV();c1e();xV();gx();bV="sendAttempt",l1e="&"+qye+"=true",LKe="?cors=true&"+E4[lx]()+"="+JG,MKe=(r0={},r0[1]=XG,r0[100]=XG,r0[200]="sent",r0[8004]=b4,r0[8003]=b4,r0),EV={},TV={};n0(lC,lC,!1);n0(T4,T4);n0(rV,"Client-Id");n0(I4,I4);n0(S4,S4);n0(C4,C4);n0(nV,nV);f1e=function(){function t(e,r,n,i){var o,s=new _V,a=!1,l=new vV,c=!1,u=0,p,d,f,m,h=!0,g=[],v={},_=[],y=null,b=!1,x,P=!1,U=!1,H,j,M,F,z,q=[],L,S,T=[],A,J;Wt(t,this,function(me){je();var ce=!0;me[px]=function(E,B,Y){A||(m=B,x=B.getCookieMgr(),p=Y,d=p.diagLog(),lc(q,di(E,function(Q){var fe,ge=Q.cfg,oe=Q.cfg.extensionConfig[Y.identifier];J=_x(oe[N4],oe[k4]),zi(ge.anonCookieName)?FKe(g,"anoncknm",ge.anonCookieName):UKe(g,"anoncknm"),L=oe[Hye],S=oe.payloadListener;var V=oe.httpXHROverride,ie=oe[oV]?oe[oV]:ge.endpointUrl;o=ie+LKe,U=vt(oe[sV])?!0:!oe[sV],b=!oe[jye];var re=oe.valueSanitizer,xe=oe[Gye],Ie=!!ge[O4];vt(oe[O4])||(Ie=!!oe[O4]),H=oe.xhrTimeout,j=!!oe[L4],M=!!oe[aV],z=oe.addNoResponse!==!1,B.getPlugin("LocalStorage")&&(M=!0),c=!Vm(),y=new a1e(m,re,xe,Ie),we(oe[cV])||(c=!!oe[cV]);var We=V,ft=oe[lV]?V:null,Et=oe[lV]?V:null,It=[3,2];if(!V){h=!1;var Hn=jv();Hn&&Hn.protocol&&Hn.protocol[lx]()==="file:"&&(ce=!1);var Zt=[];Vm()?(Zt=[2,1],It=[2,1,3]):Zt=[1,2,3],Zt=d1e(Zt,oe.transports),V=ae(Zt,!1),V||Ca(d,"No available transport to send events"),We=ae(Zt,!0)}ft||(It=d1e(It,oe[Vye]),ft=ae(It,!0)),F=!h&&(c&&Sa()||!M&&nd(!0)),f=(fe={},fe[0]=V,fe[1]=We||ae([1,2,3],!0),fe[2]=ft||We||ae([1],!0),fe[3]=Et||ae([2,3],!0)||We||ae([1],!0),fe)})),A=!0)},me.addResponseHandler=function(E){return T[$i](E),{rm:function(){var B=T.indexOf(E);B>=0&&T[e0](B,1)}}};function ae(E,B){for(var Y=0,Q=null,fe=0;Q==null&&fe<E[Nt];)Y=E[fe],Y===1?Gv()?Q=se:$m()&&(Q=Ze):Y===2&&nd(B)&&(!B||B&&!M)?Q=Ye:c&&Y===3&&Sa()&&(Q=st),fe++;return Q?{_transport:Y,_isSync:B,sendPOST:Q}:null}me._getDbgPlgTargets=function(){return[f[0],s,y,f]};function se(E,B,Y){var Q=new XDomainRequest;Q.open(x4,E[dx]),E[rh]&&(Q[rh]=E[rh]),Q.onload=function(){var fe=u1e(Q);ke(B,200,{},fe),G(fe)},Q.onerror=function(){ke(B,400,{})},Q[uV]=function(){ke(B,500,{})},Q.onprogress=function(){},Y?Q.send(E[ul]):J.set(function(){Q.send(E[ul])},0)}function je(){var E;o=null,s=new _V,a=!1,l=new vV,c=!1,u=0,p=null,d=null,f=null,m=null,h=!0,g=[],v={},_=[],y=null,b=!1,x=null,P=!1,U=!1,H=E,j=E,M=E,F=E,z=E,q=[],L=E,S=E,T=[],A=!1,J=_x()}function Ye(E,B,Y){var Q,fe=E[dx],ge=!1,oe=!1,V=(Q={body:E[ul],method:x4},Q[kye]=!0,Q);Y&&(V.keepalive=!0,E[fC]===2&&(ge=!0,z&&(fe+=l1e))),ce&&(V.credentials="include"),E.headers&&Si(E.headers)[Nt]>0&&(V[Nu]=E[Nu]);var ie=function(xe,Ie,We){oe||(oe=!0,ke(B,xe,Ie,We),G(We))},re=function(){oe||(oe=!0,ke(B,0,{}))};fetch(fe,V).then(function(xe){var Ie={},We=cl,ft=xe[Nu];ft&&ft.forEach(function(Et,It){Ie[It]=Et}),xe.body?xe.text().then(function(Et){We=Et,ie(xe.status,Ie,We)},re):ie(xe.status,Ie,"")}).catch(re),ge&&!oe&&(oe=!0,ke(B,200,{})),!oe&&E[rh]>0&&J.set(function(){oe||(oe=!0,ke(B,500,{}))},E[rh])}function Ze(E,B,Y){var Q=E[dx];function fe(ie,re,xe){if(!ie[xe]&&re&&re[pV]){var Ie=re[pV](xe);Ie&&(ie[xe]=pr(Ie))}return ie}function ge(ie){var re={};return ie[dV]?re=O(ie[dV]()):(re=fe(re,ie,tV),re=fe(re,ie,eV),re=fe(re,ie,Bye)),re}function oe(ie,re){ke(B,ie.status,ge(ie),re)}Y&&E[L4]&&(Y=!1);var V=g4(x4,Q,ce,!0,Y,E[rh]);ze(E[Nu],function(ie,re){V.setRequestHeader(ie,re)}),V.onload=function(){var ie=u1e(V);oe(V,ie),G(ie)},V.onerror=function(){oe(V)},V[uV]=function(){oe(V)},V.send(E[ul])}function ke(E,B,Y,Q){try{E(B,Y,Q)}catch(fe){Ue(d,2,518,$e(fe))}}function st(E,B,Y){var Q=E,fe=200,ge=Q[fx],oe=E[dx]+(z?l1e:cl);try{var V=ui();if(!V.sendBeacon(oe,E[ul]))if(ge){var ie=!!m.getPlugin("LocalStorage"),re=[],xe=[];Ae(ge[Mo],function(Ie){if(re&&Ie&&Ie[Yn]()>0)for(var We=Ie[Pu](),ft=0;ft<We[Nt];ft++)if(V.sendBeacon(oe,y.getEventBlob(We[ft])))xe[$i](Ie[ft]);else{re[$i](Ie[ll](ft));break}else re[$i](Ie[ll](0))}),xe[Nt]>0&&(ge.sentEvts=xe),ie||pe(re,8003,ge[zs],!0)}else fe=0}catch(Ie){Ca(d,"Failed to send telemetry using sendBeacon API. Ex:"+$e(Ie)),fe=0}finally{ke(B,fe,{},cl)}}function et(E){return E===2||E===3}function ve(E){return P&&et(E)&&(E=2),E}me.addHeader=function(E,B){v[E]=B},me[mC]=function(){return W()&&l[pC]()},me[mx]=function(E,B){vt(E)&&(E=0),P&&(E=ve(E),B=2),ye(_,E,0)&&Ne(ne(),0,!1,E,B||0)},me[M4]=function(){return!a&&u===0&&_[Nt]===0},me[hC]=function(E){P=E},me.addBatch=function(E){if(E&&E[Yn]()>0){if(s.isTenantKilled(E[hc]()))return!1;_[$i](E)}return!0},me.teardown=function(){_[Nt]>0&&Ne(ne(),0,!0,2,2),Ae(q,function(E){E&&E.rm&&E.rm()}),q=[]},me.pause=function(){a=!0},me.resume=function(){a=!1,me[mx](0,4)},me[F4]=function(E,B,Y){E&&E[Yn]()>0&&(we(B)&&(B=1),P&&(B=ve(B),Y=2),Ne([E],0,!1,B,Y||0))};function W(){return!a&&u<r}function ne(){var E=_;return _=[],E}function ye(E,B,Y){var Q=!1;return E&&E[Nt]>0&&!a&&f[B]&&y&&(Q=B!==0||W()&&(Y>0||l[pC]())),Q}function Te(E){var B={};return E&&Ae(E,function(Y,Q){B[Q]={iKey:Y[hc](),evts:Y[Pu]()}}),B}function Ne(E,B,Y,Q,fe){if(!(!E||E[Nt]===0)){if(a){pe(E,1,Q);return}Q=ve(Q);try{var ge=E,oe=Q!==0;qn(m,function(){return"HttpManager:_sendBatches"},function(V){V&&(E=E.slice(0));for(var ie=[],re=null,xe=Vs(),Ie=f[Q]||(oe?f[1]:f[0]),We=Ie&&Ie[U4],ft=F&&(P||et(Q)||We===3||Ie._isSync&&We===2);ye(E,Q,B);){var Et=E.shift();Et&&Et[Yn]()>0&&(s.isTenantKilled(Et[hc]())?ie[$i](Et):(re=re||y.createPayload(B,Y,oe,ft,fe,Q),y.appendPayload(re,Et,e)?re.overflow!==null&&(E=[re.overflow][mc](E),re.overflow=null,Jt(re,xe,Vs(),fe),xe=Vs(),re=null):(Jt(re,xe,Vs(),fe),xe=Vs(),E=[Et][mc](E),re=null)))}re&&Jt(re,xe,Vs(),fe),E[Nt]>0&&(_=E[mc](_)),pe(ie,8004,Q)},function(){return{batches:Te(ge),retryCount:B,isTeardown:Y,isSynchronous:oe,sendReason:fe,useSendBeacon:et(Q),sendType:Q}},!oe)}catch(V){Ue(d,2,48,"Unexpected Exception sending batch: "+$e(V))}}}function qe(E,B){var Y={url:o,hdrs:{},useHdrs:!1};B?(Y[ux]=Xv(Y[ux],v),Y.useHdrs=Si(Y.hdrs)[Nt]>0):ze(v,function(V,ie){TV[V]?yx(Y,TV[V],ie,!1):(Y[ux][V]=ie,Y[P4]=!0)}),yx(Y,rV,"NO_AUTH",B),yx(Y,T4,ax,B);var Q=cl;Ae(E.apiKeys,function(V){Q[Nt]>0&&(Q+=","),Q+=V}),yx(Y,I4,Q,B),yx(Y,C4,wn().toString(),B);var fe=K(E);if(zi(fe)&&(Y.url+="&ext.intweb.msfpc="+fe),l[R4]()&&yx(Y,S4,l[D4](),B),m[hx]){var ge=m[hx]();ge>=0&&(Y.url+="&w="+ge)}for(var oe=0;oe<g[Nt];oe++)Y.url+="&"+g[oe].name+"="+g[oe].value;return Y}function bt(E,B,Y){E[B]=E[B]||{},E[B][p.identifier]=Y}function Jt(E,B,Y,Q){if(E&&E.payloadBlob&&E.payloadBlob[Nt]>0){var fe=!!L,ge=f[E.sendType];!et(E[zs])&&E[fV]&&E.sendReason===2&&(ge=f[2]||f[3]||ge);var oe=U;(E.isBeacon||ge[U4]===3)&&(oe=!1);var V=qe(E,oe);oe=oe||V[P4];var ie=Vs();qn(m,function(){return"HttpManager:_doPayloadSend"},function(){for(var re=0;re<E.batches[Nt];re++)for(var xe=E[Mo][re],Ie=xe[Pu](),We=0;We<Ie[Nt];We++){var ft=Ie[We];if(b){var Et=ft[gC]=ft[gC]||{};bt(Et,"sendEventStart",ie),bt(Et,"serializationStart",B),bt(Et,"serializationCompleted",Y)}ft[bV]>0?ft[bV]++:ft[bV]=1}pe(E[Mo],1e3+(Q||0),E[zs],!0);var It={data:E.payloadBlob,urlString:V.url,headers:V[ux],_thePayload:E,_sendReason:Q,timeout:H,disableXhrSync:j,disableFetchKeepAlive:M};oe&&(p1e(It[Nu],ZG)||(It[Nu][ZG]=Fye),p1e(It[Nu],E4)||(It[Nu][E4]=JG));var Hn=null;ge&&(Hn=function(Zt){l[A4]();var br=function(wd,BC){le(wd,BC,E,Q)},Rn=E[B4]||E[q4];try{ge[H4](Zt,br,Rn),S&&S(It,Zt,Rn,E[fV])}catch(wd){Ca(d,"Unexpected exception sending payload. Ex:"+$e(wd)),ke(br,0,{})}}),qn(m,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Hn)if(E[zs]===0&&u++,fe&&!E.isBeacon&&ge[U4]!==3){var Zt={data:It[ul],urlString:It[dx],headers:Xv({},It[Nu]),timeout:It[rh],disableXhrSync:It[L4],disableFetchKeepAlive:It[aV]},br=!1;qn(m,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{L(Zt,function(Rn){br=!0,!h&&!Rn[fx]&&(Rn[fx]=Rn[fx]||It[fx],Rn[fC]=Rn[fC]||It[fC]),Hn(Rn)},E.isSync||E[B4])}catch{br||Hn(It)}})}else Hn(It)})},function(){return{thePayload:E,serializationStart:B,serializationCompleted:Y,sendReason:Q}},E[q4])}E.sizeExceed&&E.sizeExceed[Nt]>0&&pe(E.sizeExceed,8003,E[zs]),E.failedEvts&&E.failedEvts[Nt]>0&&pe(E.failedEvts,8002,E[zs])}function qr(E,B){b&&Ae(E,function(Y){var Q=Y[gC]=Y[gC]||{};bt(Q,"sendEventCompleted",B)})}function le(E,B,Y,Q){var fe=9e3,ge=null,oe=!1,V=!1;try{var ie=!0;if(typeof E!==pu){if(B){l[dC](B[tV]);var re=B[eV]||B["kill-duration-seconds"];Ae(s[j4](B[Uye],re),function(Ie){Ae(Y[Mo],function(We){if(We[hc]()===Ie){ge=ge||[];var ft=We[ll](0);Y.numEvents-=ft[Yn](),ge[$i](ft)}})})}if(E==200||E==204){fe=200;return}(!r1e(E)||Y.numEvents<=0)&&(ie=!1),fe=9e3+E%1e3}if(ie){fe=100;var xe=Y.retryCnt;Y[zs]===0&&(xe<n?(oe=!0,N(function(){Y[zs]===0&&u--,Ne(Y[Mo],xe+1,Y[B4],P?2:Y[zs],5)},P,z4(xe))):(V=!0,P&&(fe=8001)))}}finally{oe||(l[dC](),ee(Y,fe,Q,V)),pe(ge,8004,Y[zs])}}function ee(E,B,Y,Q){try{Q&&p[G4]();var fe=E[Mo];B===200&&(fe=E.sentEvts||E[Mo],!Q&&!E[q4]&&p._clearBackOff(),te(fe)),pe(fe,B,E[zs],!0)}finally{E[zs]===0&&(u--,Y!==5&&me.sendQueuedRequests(E[zs],Y))}}function te(E){if(b){var B=Vs();Ae(E,function(Y){Y&&Y[Yn]()>0&&qr(Y[Pu](),B)})}}function N(E,B,Y){B?E():J.set(E,Y)}function O(E){var B={};if(gt(E)){var Y=pr(E)[ll](/[\r\n]+/);Ae(Y,function(Q){if(Q){var fe=Q.indexOf(": ");if(fe!==-1){var ge=pr(Q.substring(0,fe))[lx](),oe=pr(Q.substring(fe+1));B[ge]=oe}else B[pr(Q)]=1}})}return B}function K(E){for(var B=0;B<E.batches[Nt];B++){var Y=E[Mo][B].Msfpc();if(Y)return encodeURIComponent(Y)}return cl}function G(E){var B=T;try{for(var Y=0;Y<B[Nt];Y++)try{B[Y](E)}catch(fe){Ue(d,1,519,"Response handler failed: "+fe)}if(E){var Q=JSON.parse(E);zi(Q.webResult)&&zi(Q.webResult[cx])&&x.set("MSFPC",Q.webResult[cx],365*86400)}}catch{}}function pe(E,B,Y,Q){if(E&&E[Nt]>0&&i){var fe=i[be(B)];if(fe){var ge=Y!==0;qn(m,function(){return"HttpManager:_sendBatchesNotification"},function(){N(function(){try{fe.call(i,E,B,ge,Y)}catch(oe){Ue(d,1,74,"send request notification failed: "+oe)}},Q||ge,0)},function(){return{batches:Te(E),reason:B,isSync:ge,sendSync:Q,sendType:Y}},!ge)}}}function be(E){var B=MKe[E];return zi(B)||(B=Mye,E>=9e3&&E<=9999?B=Lye:E>=8e3&&E<=8999?B=b4:E>=1e3&&E<=1999&&(B=Oye)),B}})}return t.__ieDyn=1,t}()});function VKe(t){return t&&t[H4]}var BKe,h1e,qKe,v1e,_1e,HKe,g1e,jKe,SV,i0,Wi,GKe,y1e,x1e=I(()=>{Us();fo();Jv();G1();pt();QG();gV();m1e();uC();yV();xV();gx();BKe=.25,h1e=500,qKe=20,v1e=6,_1e=2,HKe=4,g1e=2,jKe=1,SV=1e4,i0="eventsDiscarded",Wi=void 0,GKe=cs({eventsLimitInMem:{isVal:th,v:SV},immediateEventLimit:{isVal:th,v:500},autoFlushEventsLimit:{isVal:th,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:VKe,v:Wi},overrideInstrumentationKey:Wi,overrideEndpointUrl:Wi,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Wi,clearTimeoutOverride:Wi,payloadPreprocessor:Wi,payloadListener:Wi,disableEventTimings:Wi,valueSanitizer:Wi,stringifyObjects:Wi,enableCompoundKey:Wi,disableOptimizeObj:!1,transports:Wi,unloadTransports:Wi,useSendBeacon:Wi,disableFetchKeepAlive:Wi,avoidOptions:!1,xhrTimeout:Wi,disableXhrSync:Wi,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Gi,v:v1e},maxUnloadEventRetryAttempts:{isVal:Gi,v:_1e},addNoResponse:Wi});y1e=function(t){Fs(e,t);function e(){var r=t.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="4.0.4";var n,i=!1,o=[],s,a=!1,l=0,c,u=0,p,d={},f=Zv,m,h,g,v,_,y,b,x,P,U,H,j,M,F,z,q,L,S,T,A,J,me;return Wt(e,r,function(ce,ae){W(),ce._getDbgPlgTargets=function(){return[_,n]},ce[px]=function(V,ie,re){qn(ie,function(){return"PostChannel:initialize"},function(){ae[px](V,ie,re),T=ie.getNotifyMgr();try{z=Ia(ho(ce[vC]),ie.evtNamespace&&ie.evtNamespace()),ce._addHook(di(V,function(xe){var Ie=xe.cfg,We=ms(null,Ie,ie);n=We.getExtCfg(ce[vC],GKe),q=_x(n[N4],n[k4]),H=!n[$ye]&&h4(),L=n[Wye],je(ie),p=n[mV],c=n.immediateEventLimit,b=n[hV],M=n.maxEventRetryAttempts,F=n.maxUnloadEventRetryAttempts,S=n[Kye],oe(),J=n[Yye],me=!!n[Qye],A&&se();var ft=Ie.disablePageUnloadEvents||[];A=rC(Ye,ft,z),A=ix(Ye,ft,z)||A,A=ox(Ze,Ie.disablePageShowEvents,z)||A})),_[px](V,ce.core,ce)}catch(xe){throw ce.setInitialized(!1),xe}},function(){return{theConfig:V,core:ie,extensions:re}})},ce.processTelemetry=function(V,ie){cC(V,ce[vC]),ie=ie||ce._getTelCtx(ie);var re=V;!me&&!i&&(J&&(re[hc]=J),ke(re,!0),j?Te(2,2):ve()),ce.processNext(re,ie)},ce._doTeardown=function(V,ie){Te(2,2),i=!0,_.teardown(),se(),W()};function se(){nC(null,z),iC(null,z),oC(null,z)}function je(V){var ie=V[hx];V[hx]=function(){var re=0;return L&&(re=re|2),re|ie.call(V)}}function Ye(V){var ie=V||Bn().event;ie.type!=="beforeunload"&&(j=!0,_[hC](j)),Te(2,2)}function Ze(V){j=!1,_[hC](j)}function ke(V,ie){if(V[_C]||(V[_C]=0),V[nh]||(V[nh]=1),V.ext&&V.ext[iV]&&delete V.ext[iV],V.ext&&V.ext[w4]&&V.ext[w4].id&&delete V.ext[w4].id,H&&(V.ext=fc(V.ext),V[V4]&&(V[V4]=fc(V[V4])),V[ul]&&(V[ul]=fc(V[ul]))),V[t0]){if(g||a)V[nh]=3,V[t0]=!1;else if(_){H&&(V=fc(V)),_[F4](vx.create(V[hc],[V]),V[t0]===!0?1:V[t0],3);return}}var re=V[nh],xe=u,Ie=p;re===4&&(xe=l,Ie=c);var We=!1;if(xe<Ie)We=!Jt(V,ie);else{var ft=1,Et=qKe;re===4&&(ft=4,Et=1),We=!0,qr(V[hc],V[nh],ft,Et)&&(We=!Jt(V,ie))}We&&be(i0,[V],rl.QueueFull)}ce.setEventQueueLimits=function(V,ie){n[mV]=p=th(V)?V:SV,n[hV]=b=th(ie)?ie:0,oe();var re=u>V;if(!re&&x>0)for(var xe=1;!re&&xe<=3;xe++){var Ie=y[xe];Ie&&Ie[Mo]&&Ae(Ie[Mo],function(We){We&&We[Yn]()>=x&&(re=!0)})}bt(!0,re)},ce.pause=function(){ye(),a=!0,_.pause()},ce.resume=function(){a=!1,_.resume(),ve()},ce._loadTransmitProfiles=function(V){O(),ze(V,function(ie,re){var xe=re[Nt];if(xe>=2){var Ie=xe>2?re[2]:0;if(re[e0](0,xe-2),re[1]<0&&(re[0]=-1),re[1]>0&&re[0]>0){var We=re[0]/re[1];re[0]=Math.ceil(We)*re[1]}Ie>=0&&re[1]>=0&&Ie>re[1]&&(Ie=re[1]),re[$i](Ie),d[ie]=re}})},ce.flush=function(V,ie,re){V===void 0&&(V=!0);var xe;if(!a)if(re=re||1,V)ie||(xe=ds(function(We){ie=We})),s==null?(ye(),ee(1,0,re),s=ne(function(){s=null,te(ie,re)},0)):o[$i](ie);else{var Ie=ye();st(1,1,re),ie&&ie(),Ie&&ve()}return xe},ce.setMsaAuthTicket=function(V){_.addHeader(lC,V)},ce.hasEvents=et,ce._setTransmitProfile=function(V){f!==V&&d[V]!==void 0&&(ye(),f=V,ve())},Ta(ce,function(){return _},["addResponseHandler"]);function st(V,ie,re){var xe=ee(V,ie,re);return _[mx](ie,re),xe}function et(){return u>0}function ve(){if(P>=0&&ee(P,0,U)&&_[mx](0,U),l>0&&!h&&!a){var V=d[f][2];V>=0&&(h=ne(function(){h=null,st(4,0,1),ve()},V))}var ie=d[f][1];!m&&!s&&ie>=0&&!a&&(et()?m=ne(function(){m=null,st(v===0?3:1,0,1),v++,v%=2,ve()},ie):v=0)}ce[G4]=function(){g<HKe&&(g++,ye(),ve())},ce._clearBackOff=function(){g&&(g=0,ye(),ve())};function W(){n=null,i=!1,o=[],s=null,a=!1,l=0,c=500,u=0,p=SV,d={},f=Zv,m=null,h=null,g=0,v=0,y={},b=0,A=!1,x=0,P=-1,U=null,H=!0,j=!1,M=v1e,F=_1e,z=null,J=null,me=!1,q=_x(),_=new f1e(h1e,g1e,jKe,{requeue:G,send:B,sent:Y,drop:Q,rspFail:fe,oth:ge}),K(),Ne(),oe()}function ne(V,ie){ie===0&&g&&(ie=1);var re=1e3;return g&&(re=z4(g-1)),q.set(V,ie*re)}function ye(){return m!==null?(m.cancel(),m=null,v=0,!0):!1}function Te(V,ie){ye(),s&&(s.cancel(),s=null),a||st(1,V,ie)}function Ne(){y[4]={batches:[],iKeyMap:{}},y[3]={batches:[],iKeyMap:{}},y[2]={batches:[],iKeyMap:{}},y[1]={batches:[],iKeyMap:{}}}function qe(V,ie,re){var xe=y[ie];xe||(ie=1,xe=y[ie]);var Ie=xe.iKeyMap[V];return!Ie&&re&&(Ie=vx.create(V),xe.batches[$i](Ie),xe.iKeyMap[V]=Ie),Ie}function bt(V,ie){_[mC]()&&!g&&(b>0&&u>b&&(ie=!0),ie&&s==null&&ce.flush(V,function(){},20))}function Jt(V,ie){H&&(V=fc(V));var re=V[nh],xe=qe(V[hc],re,!0);return xe.addEvent(V)?(re!==4?(u++,ie&&V[_C]===0&&bt(!V.sync,x>0&&xe[Yn]()>=x)):l++,!0):!1}function qr(V,ie,re,xe){for(;re<=ie;){var Ie=qe(V,ie,!0);if(Ie&&Ie[Yn]()>0){var We=Ie[ll](0,xe),ft=We[Yn]();if(ft>0)return re===4?l-=ft:u-=ft,E(i0,[We],rl.QueueFull),!0}re++}return le(),!1}function le(){for(var V=0,ie=0,re=function(Ie){var We=y[Ie];We&&We[Mo]&&Ae(We[Mo],function(ft){Ie===4?V+=ft[Yn]():ie+=ft[Yn]()})},xe=1;xe<=4;xe++)re(xe);u=ie,l=V}function ee(V,ie,re){var xe=!1,Ie=ie===0;return!Ie||_[mC]()?qn(ce.core,function(){return"PostChannel._queueBatches"},function(){for(var We=[],ft=4;ft>=V;){var Et=y[ft];Et&&Et.batches&&Et.batches[Nt]>0&&(Ae(Et[Mo],function(It){_.addBatch(It)?xe=xe||It&&It[Yn]()>0:We=We[mc](It[Pu]()),ft===4?l-=It[Yn]():u-=It[Yn]()}),Et[Mo]=[],Et.iKeyMap={}),ft--}We[Nt]>0&&be(i0,We,rl.KillSwitch),xe&&P>=V&&(P=-1,U=0)},function(){return{latency:V,sendType:ie,sendReason:re}},!Ie):(P=P>=0?Math.min(P,V):V,U=Math.max(U,re)),xe}function te(V,ie){st(1,0,ie),le(),N(function(){V&&V(),o[Nt]>0?s=ne(function(){s=null,te(o.shift(),ie)},0):(s=null,ve())})}function N(V){_[M4]()?V():s=ne(function(){s=null,N(V)},BKe)}function O(){ye(),K(),f=Zv,ve()}function K(){d={},d[Zv]=[2,1,0],d[_4]=[6,3,0],d[y4]=[18,9,0]}function G(V,ie){var re=[],xe=M;j&&(xe=F),Ae(V,function(Ie){Ie&&Ie[Yn]()>0&&Ae(Ie[Pu](),function(We){We&&(We[t0]&&(We[nh]=4,We[t0]=!1),We[_C]<xe?(cC(We,ce[vC]),ke(We,!1)):re[$i](We))})}),re[Nt]>0&&be(i0,re,rl.NonRetryableStatus),j&&Te(2,2)}function pe(V,ie){var re=T||{},xe=re[V];if(xe)try{xe.apply(re,ie)}catch(Ie){Ue(ce.diagLog(),1,74,V+" notification failed: "+Ie)}}function be(V,ie){for(var re=[],xe=2;xe<arguments.length;xe++)re[xe-2]=arguments[xe];ie&&ie[Nt]>0&&pe(V,[ie][mc](re))}function E(V,ie){for(var re=[],xe=2;xe<arguments.length;xe++)re[xe-2]=arguments[xe];ie&&ie[Nt]>0&&Ae(ie,function(Ie){Ie&&Ie[Yn]()>0&&pe(V,[Ie.events()][mc](re))})}function B(V,ie,re){V&&V[Nt]>0&&pe("eventsSendRequest",[ie>=1e3&&ie<=1999?ie-1e3:0,re!==!0])}function Y(V,ie){E("eventsSent",V,ie),ve()}function Q(V,ie){E(i0,V,ie>=8e3&&ie<=8999?ie-8e3:rl.Unknown)}function fe(V){E(i0,V,rl.NonRetryableStatus),ve()}function ge(V,ie){E(i0,V,rl.Unknown),ve()}function oe(){S?x=0:x=Math.max(h1e*(g1e+1),p/6)}}),r}return e.__ieDyn=1,e}(ud)});var b1e={};Ri(b1e,{BE_PROFILE:()=>y4,NRT_PROFILE:()=>_4,PostChannel:()=>y1e,RT_PROFILE:()=>Zv});var E1e=I(()=>{QG();x1e()});var S1e=k(ku=>{"use strict";var zKe=ku&&ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$Ke=ku&&ku.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),T1e=ku&&ku.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zKe(e,t,r);return $Ke(e,t),e};Object.defineProperty(ku,"__esModule",{value:!0});ku.oneDataSystemClientFactory=void 0;var WKe=async(t,e,r)=>{let n=await Promise.resolve().then(()=>T1e((Jv(),Xn(Nye)))),i=await Promise.resolve().then(()=>T1e((E1e(),Xn(b1e)))),o=new n.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=u}let c=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(u=>{c&&(u.ext=u.ext??{},u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),o},KKe=async(t,e,r)=>{let n=await WKe(t,e,r);return{logEvent:(s,a)=>{try{n?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(l){throw new Error(`Failed to log event to app insights!
`+l.message)}},flush:async()=>{try{return new Promise((a,l)=>{if(!n){a();return}n.flush(!0,c=>{if(!c){l("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!n){a();return}n.unload(!1,()=>{a(),n=void 0},1e3)})}};ku.oneDataSystemClientFactory=KKe});var xx,bx,Ex,yC,ih,Ou,wi,W4,gc=I(()=>{xx="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",bx="sampleRate",Ex="ProcessLegacy",yC="http.method",ih="https://dc.services.visualstudio.com",Ou="/v2/track",wi="not_specified",W4="iKey"});var hd,CV=I(()=>{xr();hd=Rj({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var gd,yt,Lu,oh,vd,K4,fi,pl,sh,Y4,Q4,X4,IV,J4,Z4,o0,Tx,wV,xC,s0,vc,Fo,Uo,a0,Mu,c0,eO,tO,AV,l0,ah,bC,EC,u0,Sx,p0,RV,Ki=I(()=>{gd="split",yt="length",Lu="toLowerCase",oh="ingestionendpoint",vd="toString",K4="removeItem",fi="name",pl="message",sh="count",Y4="preTriggerDate",Q4="disabled",X4="interval",IV="daysOfMonth",J4="date",Z4="getUTCDate",o0="stringify",Tx="pathname",wV="correlationHeaderExcludePatterns",xC="extensionConfig",s0="exceptions",vc="parsedStack",Fo="properties",Uo="measurements",a0="sizeInBytes",Mu="typeName",c0="severityLevel",eO="problemGroup",tO="isManual",AV="CreateFromInterface",l0="assembly",ah="fileName",bC="hasFullStack",EC="level",u0="method",Sx="line",p0="duration",RV="receivedResponse"});function rO(t,e,r){var n=e[yt],i=DV(t,e);if(i[yt]!==n){for(var o=0,s=i;r[s]!==void 0;)o++,s=Un(i,0,150-3)+PV(o);i=s}return i}function DV(t,e){var r;return e&&(e=pr(ci(e)),e[yt]>150&&(r=Un(e,0,150),Ue(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),r||e}function Pr(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=pr(ci(e)),e[yt]>r&&(n=Un(e,0,r),Ue(t,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}function ch(t,e){return oO(t,e,2048,66)}function Cx(t,e){var r;return e&&e[yt]>32768&&(r=Un(e,0,32768),Ue(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),r||e}function nO(t,e){var r;if(e){var n=""+e;n[yt]>32768&&(r=Un(n,0,32768),Ue(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return r||e}function Bo(t,e){if(e){var r={};ze(e,function(n,i){if(Br(i)&&Eu())try{i=mo()[o0](i)}catch(o){Ue(t,2,49,"custom property is not valid",{exception:o},!0)}i=Pr(t,i,8192),n=rO(t,n,r),r[n]=i}),e=r}return e}function qo(t,e){if(e){var r={};ze(e,function(n,i){n=rO(t,n,r),r[n]=i}),e=r}return e}function iO(t,e){return e&&oO(t,e,128,69)[vd]()}function oO(t,e,r,n){var i;return e&&(e=pr(ci(e)),e[yt]>r&&(i=Un(e,0,r),Ue(t,2,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}function PV(t){var e="00"+t;return el(e,e[yt]-3)}var _c=I(()=>{xr();pt();Ki()});function d0(t){var e=I1e,r=YKe,n=r[e];return C1e.createElement?r[e]||(n=r[e]=C1e.createElement("a")):n={host:NV(t,!0)},n.href=t,e++,e>=r[yt]&&(e=0),I1e=e,n}function w1e(t){var e,r=d0(t);return r&&(e=r.href),e}function A1e(t){var e,r=d0(t);return r&&(e=r[Tx]),e}function R1e(t,e){return t?t.toUpperCase()+" "+e:e}function NV(t,e){var r=TC(t,e)||"";if(r){var n=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[yt]>3&&gt(n[2])&&n[2][yt]>0)return n[2]+(n[3]||"")}return r}function TC(t,e){var r=null;if(t){var n=t.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[yt]>2&&gt(n[2])&&n[2][yt]>0&&(r=n[2]||"",e&&n[yt]>2)){var i=(n[1]||"")[Lu](),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}var C1e,I1e,YKe,kV=I(()=>{xr();Ki();C1e=In()||{},I1e=0,YKe=[null,null,null,null,null]});function Ix(t){return or(QKe,t[Lu]())!==-1}function D1e(t){OV=t}function P1e(){return OV}function N1e(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t[wV]){for(var n=0;n<t.correlationHeaderExcludePatterns[yt];n++)if(t[wV][n].test(e))return!1}var i=d0(e).host[Lu]();if(i&&(ps(i,":443")!==-1||ps(i,":80")!==-1)&&(i=(TC(e,!0)||"")[Lu]()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var s;if(Ae(o,function(c){var u=new RegExp(c.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||u.test(i)}),!s)return!1}var a=t&&t.correlationHeaderExcludedDomains;if(!a||a[yt]===0)return!0;for(var n=0;n<a[yt];n++){var l=new RegExp(a[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(l.test(i))return!1}return i&&i[yt]>0}function k1e(t){if(t){var e=LV(t,hd[1]);if(e&&e!==OV)return e}}function LV(t,e){if(t)for(var r=t[gd](","),n=0;n<r[yt];++n){var i=r[n][gd]("=");if(i[yt]===2&&i[0]===e)return i[1]}}function O1e(t,e,r,n){var i,o=n,s=n;if(e&&e[yt]>0){var a=d0(e);if(i=a.host,!o)if(a[Tx]!=null){var l=a.pathname[yt]===0?"/":a[Tx];l.charAt(0)!=="/"&&(l="/"+l),s=a[Tx],o=Pr(t,r?r+" "+l:l)}else o=Pr(t,e)}else i=n,o=n;return{target:i,name:o,data:s}}function L1e(){var t=Xp();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return wn()}function M1e(t,e){var r=null;return t!==0&&e!==0&&!we(t)&&!we(e)&&(r=e-t),r}function F1e(t,e){var r=t||{};return{getName:function(){return r[fi]},setName:function(n){e&&e.setName(n),r[fi]=n},getTraceId:function(){return r.traceID},setTraceId:function(n){e&&e.setTraceId(n),Cu(n)&&(r.traceID=n)},getSpanId:function(){return r.parentID},setSpanId:function(n){e&&e.setSpanId(n),Iu(n)&&(r.parentID=n)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(n){e&&e.setTraceFlags(n),r.traceFlags=n}}}var QKe,OV,MV=I(()=>{xr();pt();gc();CV();_c();kV();Ki();QKe=[ih+Ou,"https://breeze.aimon.applicationinsights.io"+Ou,"https://dc-int.services.visualstudio.com"+Ou],OV="cid-v1:"});var wx,U1e,FV=I(()=>{xr();wx=Vi({LocalStorage:0,SessionStorage:1}),U1e=Vi({AI:0,AI_AND_W3C:1,W3C:2})});function UV(){return Ax()?sO(wx.LocalStorage):null}function sO(t){try{if(we(Oo()))return null;var e=new Date()[vd](),r=Kr(t===wx.LocalStorage?"localStorage":"sessionStorage"),n=B1e+e;r.setItem(n,e);var i=r.getItem(n)!==e;if(r[K4](n),!i)return r}catch{}return null}function BV(){return f0()?sO(wx.SessionStorage):null}function q1e(){lh=!1,uh=!1}function aO(t){B1e=t||""}function H1e(){lh=Ax(!0),uh=f0(!0)}function Ax(t){return(t||lh===void 0)&&(lh=!!sO(wx.LocalStorage)),lh}function cO(t,e){var r=UV();if(r!==null)try{return r.getItem(e)}catch(n){lh=!1,Ue(t,2,1,"Browser failed read of local storage. "+Qr(n),{exception:$e(n)})}return null}function lO(t,e,r){var n=UV();if(n!==null)try{return n.setItem(e,r),!0}catch(i){lh=!1,Ue(t,2,3,"Browser failed write to local storage. "+Qr(i),{exception:$e(i)})}return!1}function j1e(t,e){var r=UV();if(r!==null)try{return r[K4](e),!0}catch(n){lh=!1,Ue(t,2,5,"Browser failed removal of local storage item. "+Qr(n),{exception:$e(n)})}return!1}function f0(t){return(t||uh===void 0)&&(uh=!!sO(wx.SessionStorage)),uh}function G1e(){var t=[];return f0()&&ze(Kr("sessionStorage"),function(e){t.push(e)}),t}function uO(t,e){var r=BV();if(r!==null)try{return r.getItem(e)}catch(n){uh=!1,Ue(t,2,2,"Browser failed read of session storage. "+Qr(n),{exception:$e(n)})}return null}function pO(t,e,r){var n=BV();if(n!==null)try{return n.setItem(e,r),!0}catch(i){uh=!1,Ue(t,2,4,"Browser failed write to session storage. "+Qr(i),{exception:$e(i)})}return!1}function V1e(t,e){var r=BV();if(r!==null)try{return r[K4](e),!0}catch(n){uh=!1,Ue(t,2,6,"Browser failed removal of session storage item. "+Qr(n),{exception:$e(n)})}return!1}var lh,uh,B1e,qV=I(()=>{xr();FV();Ki();lh=void 0,uh=void 0,B1e=""});var XKe,z1e,$1e=I(()=>{xr();pt();qV();Ki();XKe="appInsightsThrottle",z1e=function(){function t(e,r){var n=this,i,o,s,a,l,c,u,p=!1,d=!1;m(),n._getDbgPlgTargets=function(){return[u]},n.getConfig=function(){return s},n.canThrottle=function(L){var S=F(L),T=h(L);return _(T,i,S)},n.isTriggered=function(L){return z(L)},n.isReady=function(){return p},n.flush=function(L){try{var S=q(L);if(S&&S[yt]>0){var T=S.slice(0);return u[L]=[],Ae(T,function(A){f(A.msgID,A[pl],A.severity,!1)}),!0}}catch{}return!1},n.flushAll=function(){try{if(u){var L=!0;return ze(u,function(S){var T=n.flush(parseInt(S));L=L&&T}),L}}catch{}return!1},n.onReadyState=function(L,S){return S===void 0&&(S=!0),p=we(L)?!0:L,p&&S?n.flushAll():null},n.sendMessage=function(L,S,T){return f(L,S,T,!0)};function f(L,S,T,A){if(p){var J=M(L);if(!J)return;var me=h(L),ce=F(L),ae=_(me,i,ce),se=!1,je=0,Ye=z(L);try{ae&&!Ye?(je=Math.min(me.limit.maxSendNumber,ce[sh]+1),ce[sh]=0,se=!0,l[L]=!0,ce[Y4]=new Date):(l[L]=ae,ce[sh]+=1);var Ze=y(L);U(o,Ze,ce);for(var ke=0;ke<je;ke++)j(L,o,S,T)}catch{}return{isThrottled:se,throttleNum:je}}else if(A){var st=q(L);st.push({msgID:L,message:S,severity:T})}return null}function m(){o=al(e),l={},a={},u={},s={},g(109),c=bu(r)?r:"",e.addUnloadHook(di(e.config,function(L){var S=L.cfg;i=Ax();var T=S.throttleMgrCfg||{};ze(T,function(A,J){g(parseInt(A),J)})}))}function h(L){return s[L]||s[109]}function g(L,S){var T,A;try{var J=S||{},me={};me[Q4]=!!J[Q4];var ce=J[X4]||{};d=ce?.daysOfMonth&&ce?.daysOfMonth[yt]>0,me[X4]=v(ce);var ae={samplingRate:((T=J.limit)===null||T===void 0?void 0:T.samplingRate)||100,maxSendNumber:((A=J.limit)===null||A===void 0?void 0:A.maxSendNumber)||1};me.limit=ae,s[L]=me}catch{}}function v(L){L=L||{};var S=L?.monthInterval,T=L?.dayInterval;return we(S)&&we(T)&&(L.monthInterval=3,d||(L[IV]=[28],d=!0)),L={monthInterval:L?.monthInterval,dayInterval:L?.dayInterval,daysOfMonth:L?.daysOfMonth},L}function _(L,S,T){if(L&&!L[Q4]&&S&&bu(T)){var A=P(),J=T[J4],me=L[X4],ce=1;if(me?.monthInterval){var ae=(A.getUTCFullYear()-J.getUTCFullYear())*12+A.getUTCMonth()-J.getUTCMonth();ce=H(me.monthInterval,0,ae)}var se=1;if(d)se=or(me[IV],A[Z4]());else if(me?.dayInterval){var je=Math.floor((A.getTime()-J.getTime())/864e5);se=H(me.dayInterval,0,je)}return ce>=0&&se>=0}return!1}function y(L,S){var T=bu(S)?S:"";return L?XKe+T+"-"+L:null}function b(L){try{if(L){var S=new Date;return L.getUTCFullYear()===S.getUTCFullYear()&&L.getUTCMonth()===S.getUTCMonth()&&L[Z4]()===S[Z4]()}}catch{}return!1}function x(L,S,T){try{var A={date:P(),count:0};if(L){var J=JSON.parse(L),me={date:P(J[J4])||A[J4],count:J[sh]||A[sh],preTriggerDate:J.preTriggerDate?P(J[Y4]):void 0};return me}else return U(S,T,A),A}catch{}return null}function P(L){try{if(L){var S=new Date(L);if(!isNaN(S.getDate()))return S}else return new Date}catch{}return null}function U(L,S,T){try{return lO(L,S,pr(JSON[o0](T)))}catch{}return!1}function H(L,S,T){return L<=0?1:T>=S&&(T-S)%L==0?Math.floor((T-S)/L)+1:-1}function j(L,S,T,A){Ue(S,A||1,L,T)}function M(L){try{var S=h(L);return OS(1e6)<=S.limit.samplingRate}catch{}return!1}function F(L){try{var S=a[L];if(!S){var T=y(L,c);S=x(cO(o,T),o,T),a[L]=S}return a[L]}catch{}return null}function z(L){var S=l[L];if(we(S)){S=!1;var T=F(L);T&&(S=b(T[Y4])),l[L]=S}return l[L]}function q(L){return u=u||{},we(u[L])&&(u[L]=[]),u[L]}}return t}()});function SC(t){if(!t)return{};var e=t[gd](JKe),r=I1(e,function(i,o){var s=o[gd](ZKe);if(s[yt]===2){var a=s[0][Lu](),l=s[1];i[a]=l}return i},{});if(Si(r)[yt]>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r[oh]=r[oh]||"https://"+n+"dc."+r.endpointsuffix}r[oh]=r[oh]||ih,Pm(r[oh],"/")&&(r[oh]=r[oh].slice(0,-1))}return r}var JKe,ZKe,W1e,K1e=I(()=>{xr();gc();Ki();JKe=";",ZKe="=";W1e={parse:SC}});var dO,Y1e=I(()=>{xr();gc();Ki();_c();dO=function(){function t(e,r,n){var i=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[fi]=Pr(e,n)||wi,o.data=r,o.time=Ea(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return i.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Fu,Q1e=I(()=>{gc();Ki();_c();Fu=function(){function t(e,r,n,i){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var o=this;o.ver=2,o[fi]=Pr(e,r)||wi,o[Fo]=Bo(e,n),o[Uo]=qo(e,i)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function VV(t,e){var r=t;return r&&!gt(r)&&(JSON&&JSON[o0]?(r=JSON[o0](t),e&&(!r||r==="{}")&&(mt(t[vd])?r=t[vd]():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}function txe(t,e){var r=t;return t&&(r&&!gt(r)&&(r=t[GV]||t[exe]||r),r&&!gt(r)&&(r=VV(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&ps(r||"",e)===-1&&(r=e+": "+r),r||""}function tYe(t){try{if(Br(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function rYe(t){try{if(Br(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function J1e(t){return t&&t.src&&gt(t.src)&&t.obj&&Xe(t.obj)}function m0(t){var e=t||"";gt(e)||(gt(e[$s])?e=e[$s]:e=""+e);var r=e[gd](`
`);return{src:e,obj:r}}function nYe(t){for(var e=[],r=t[gd](`
`),n=0;n<r[yt];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e.push(i)}return{src:t,obj:e}}function rxe(t){var e=null;if(t)try{if(t[$s])e=m0(t[$s]);else if(t[Rx]&&t[Rx][$s])e=m0(t[Rx][$s]);else if(t.exception&&t.exception[$s])e=m0(t.exception[$s]);else if(J1e(t))e=t;else if(J1e(t[jV]))e=t[jV];else if(Bn()&&Bn().opera&&t[GV])e=nYe(t[pl]);else if(t.reason&&t.reason[$s])e=m0(t.reason[$s]);else if(gt(t))e=m0(t);else{var r=t[GV]||t[exe]||"";gt(t[X1e])&&(r&&(r+=`
`),r+=" from "+t[X1e]),r&&(e=m0(r))}}catch(n){e=m0(n)}return e||{src:"",obj:null}}function iYe(t){var e="";return t&&(t.obj?Ae(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}function oYe(t){var e,r=t.obj;if(r&&r[yt]>0){e=[];var n=0,i=0;Ae(r,function(m){var h=m[vd]();if(zV.regex.test(h)){var g=new zV(h,n++);i+=g[a0],e.push(g)}});var o=32*1024;if(i>o)for(var s=0,a=e[yt]-1,l=0,c=s,u=a;s<a;){var p=e[s][a0],d=e[a][a0];if(l+=p+d,l>o){var f=u-c+1;e.splice(c,f);break}c=s,u=a,s++,a--}}return e}function fO(t){var e="";if(t&&(e=t.typeName||t[fi]||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor[vd]());e=n&&n[yt]>1?n[1]:""}catch{}return e}function HV(t){if(t)try{if(!gt(t)){var e=fO(t),r=VV(t,!1);return(!r||r==="{}")&&(t[Rx]&&(t=t[Rx],e=fO(t)),r=VV(t,!0)),ps(r,e)!==0&&e!=="String"?e+":"+r:r}}catch{}return""+(t||"")}var eYe,Rx,$s,jV,X1e,GV,exe,ph,Z1e,zV,nxe=I(()=>{Us();xr();pt();gc();Ki();_c();eYe="<no_method>",Rx="error",$s="stack",jV="stackDetails",X1e="errorSrc",GV="message",exe="description";ph=function(){function t(e,r,n,i,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,rYe(r)?(a[s0]=r[s0]||[],a[Fo]=r[Fo],a[Uo]=r[Uo],r[c0]&&(a[c0]=r[c0]),r.id&&(a.id=r.id),r[eO]&&(a[eO]=r[eO]),we(r[tO])||(a[tO]=r[tO])):(n||(n={}),a[s0]=[new Z1e(e,r,n)],a[Fo]=Bo(e,n),a[Uo]=qo(e,i),o&&(a[c0]=o),s&&(a.id=s))}return t.CreateAutoException=function(e,r,n,i,o,s,a,l){var c,u=fO(o||s||e);return c={},c[pl]=txe(e,u),c.url=r,c.lineNumber=n,c.columnNumber=i,c.error=HV(o||s||e),c.evt=HV(s||e),c[Mu]=u,c.stackDetails=rxe(a||o||s),c.errorSrc=l,c},t.CreateFromInterface=function(e,r,n,i){var o=r[s0]&&mu(r[s0],function(a){return Z1e[AV](e,a)}),s=new t(e,uc(uc({},r),{exceptions:o}),n,i);return s},t.prototype.toInterface=function(){var e,r=this,n=r.exceptions,i=r.properties,o=r.measurements,s=r.severityLevel,a=r.problemGroup,l=r.id,c=r.isManual,u=n instanceof Array&&mu(n,function(p){return p.toInterface()})||void 0;return e={ver:"4.0"},e[s0]=u,e.severityLevel=s,e.properties=i,e.measurements=o,e.problemGroup=a,e.id=l,e.isManual=c,e},t.CreateSimpleException=function(e,r,n,i,o,s){var a;return{exceptions:[(a={},a[bC]=!0,a.message=e,a.stack=o,a.typeName=r,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=HV,t}(),Z1e=function(){function t(e,r,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var i=this;if(tYe(r))i[Mu]=r[Mu],i[pl]=r[pl],i[$s]=r[$s],i[vc]=r[vc]||[],i[bC]=r[bC];else{var o=r,s=o&&o.evt;du(o)||(o=o[Rx]||s||o),i[Mu]=Pr(e,fO(o))||wi,i[pl]=Cx(e,txe(r||o,i[Mu]))||wi;var a=r[jV]||rxe(r);i[vc]=oYe(a),Xe(i[vc])&&mu(i[vc],function(l){l[l0]=Pr(e,l[l0]),l[ah]=Pr(e,l[ah])}),i[$s]=nO(e,iYe(a)),i.hasFullStack=Xe(i.parsedStack)&&i.parsedStack[yt]>0,n&&(n[Mu]=n[Mu]||i[Mu])}}return t.prototype.toInterface=function(){var e,r=this,n=r[vc]instanceof Array&&mu(r[vc],function(o){return o.toInterface()}),i=(e={id:r.id,outerId:r.outerId,typeName:r[Mu],message:r[pl],hasFullStack:r[bC],stack:r[$s]},e[vc]=n||void 0,e);return i},t.CreateFromInterface=function(e,r){var n=r[vc]instanceof Array&&mu(r[vc],function(o){return zV[AV](o)})||r[vc],i=new t(e,uc(uc({},r),{parsedStack:n}));return i},t}(),zV=function(){function t(e,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[a0]=0,typeof e=="string"){var i=e;n[EC]=r,n[u0]=eYe,n[l0]=pr(i),n[ah]="",n[Sx]=0;var o=i.match(t.regex);o&&o[yt]>=5&&(n[u0]=pr(o[2])||n[u0],n[ah]=pr(o[4]),n[Sx]=parseInt(o[5])||0)}else n[EC]=e[EC],n[u0]=e[u0],n[l0]=e[l0],n[ah]=e[ah],n[Sx]=e[Sx],n[a0]=0;n.sizeInBytes+=n.method[yt],n.sizeInBytes+=n.fileName[yt],n.sizeInBytes+=n.assembly[yt],n[a0]+=t.baseSize,n.sizeInBytes+=n.level.toString()[yt],n.sizeInBytes+=n.line.toString()[yt]}return t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){var e=this;return{level:e[EC],method:e[u0],assembly:e[l0],fileName:e[ah],line:e[Sx]}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}()});var ixe,oxe=I(()=>{ixe=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var Uu,sxe=I(()=>{gc();Ki();oxe();_c();Uu=function(){function t(e,r,n,i,o,s,a,l,c){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var p=new ixe;p[sh]=i>0?i:void 0,p.max=isNaN(s)||s===null?void 0:s,p.min=isNaN(o)||o===null?void 0:o,p[fi]=Pr(e,r)||wi,p.value=n,p.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[p],u[Fo]=Bo(e,l),u[Uo]=qo(e,c)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function axe(t,e){return e===void 0&&(e=!1),t==null?e:t.toString()[Lu]()==="true"}function Dx(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=CC+t%1e3,r=CC+Math.floor(t/1e3)%60,n=CC+Math.floor(t/(1e3*60))%60,i=CC+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e[yt]===1?"00"+e:e[yt]===2?"0"+e:e,r=r[yt]<2?"0"+r:r,n=n[yt]<2?"0"+n:n,i=i[yt]<2?"0"+i:i,(o>0?o+".":CC)+i+":"+n+":"+r+"."+e}function cxe(t,e){var r=null;return Ae(t,function(n){if(n.identifier===e)return r=n,-1}),r}function lxe(t,e,r,n,i){return!i&&gt(t)&&(t==="Script error."||t==="Script error")}var CC,mO=I(()=>{xr();Ki();CC=""});var dh,uxe=I(()=>{gc();mO();Ki();_c();dh=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var l=this;l.ver=2,l.id=iO(e,a),l.url=ch(e,n),l[fi]=Pr(e,r)||wi,isNaN(i)||(l[p0]=Dx(i)),l[Fo]=Bo(e,o),l[Uo]=qo(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var fh,pxe=I(()=>{mO();MV();Ki();_c();fh=function(){function t(e,r,n,i,o,s,a,l,c,u,p,d){c===void 0&&(c="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var f=this;f.ver=2,f.id=r,f[p0]=Dx(o),f.success=s,f.resultCode=a+"",f.type=Pr(e,c);var m=O1e(e,n,l,i);f.data=ch(e,i)||m.data,f.target=Pr(e,m.target),u&&(f.target="".concat(f.target," | ").concat(u)),f[fi]=Pr(e,m[fi]),f[Fo]=Bo(e,p),f[Uo]=qo(e,d)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var mh,dxe=I(()=>{gc();Ki();_c();mh=function(){function t(e,r,n,i,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,r=r||wi,s[pl]=Cx(e,r),s[Fo]=Bo(e,i),s[Uo]=qo(e,o),n&&(s[c0]=n)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var hh,fxe=I(()=>{gc();Ki();_c();hh=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=ch(e,n),l[fi]=Pr(e,r)||wi,l[Fo]=Bo(e,o),l[Uo]=qo(e,s),a&&(l.domProcessing=a.domProcessing,l[p0]=a[p0],l.networkConnect=a.networkConnect,l.perfTotal=a.perfTotal,l[RV]=a[RV],l.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var Bu,mxe=I(()=>{Bu=function(){function t(e,r){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=r}return t}()});var hO,hxe=I(()=>{xr();hO=Vi({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});var gxe,vxe=I(()=>{xr();Ki();gxe=function(){function t(){}return t.getConfig=function(e,r,n,i){i===void 0&&(i=!1);var o;return n&&e[xC]&&e[xC][n]&&!we(e[xC][n][r])?o=e[xC][n][r]:o=e[r],we(o)?i:o},t}()});function vh(t){var e="ai."+t+".";return function(r){return e+r}}var IC,Ai,gO,Px,$V,gh,h0,wC,Nx,WV=I(()=>{Us();xr();IC=vh("application"),Ai=vh("device"),gO=vh("location"),Px=vh("operation"),$V=vh("session"),gh=vh("user"),h0=vh("cloud"),wC=vh("internal"),Nx=function(t){Fs(e,t);function e(){return t.call(this)||this}return e}($j({applicationVersion:IC("ver"),applicationBuild:IC("build"),applicationTypeId:IC("typeId"),applicationId:IC("applicationId"),applicationLayer:IC("layer"),deviceId:Ai("id"),deviceIp:Ai("ip"),deviceLanguage:Ai("language"),deviceLocale:Ai("locale"),deviceModel:Ai("model"),deviceFriendlyName:Ai("friendlyName"),deviceNetwork:Ai("network"),deviceNetworkName:Ai("networkName"),deviceOEMName:Ai("oemName"),deviceOS:Ai("os"),deviceOSVersion:Ai("osVersion"),deviceRoleInstance:Ai("roleInstance"),deviceRoleName:Ai("roleName"),deviceScreenResolution:Ai("screenResolution"),deviceType:Ai("type"),deviceMachineName:Ai("machineName"),deviceVMName:Ai("vmName"),deviceBrowser:Ai("browser"),deviceBrowserVersion:Ai("browserVersion"),locationIp:gO("ip"),locationCountry:gO("country"),locationProvince:gO("province"),locationCity:gO("city"),operationId:Px("id"),operationName:Px("name"),operationParentId:Px("parentId"),operationRootId:Px("rootId"),operationSyntheticSource:Px("syntheticSource"),operationCorrelationVector:Px("correlationVector"),sessionId:$V("id"),sessionIsFirst:$V("isFirst"),sessionIsNew:$V("isNew"),userAccountAcquisitionDate:gh("accountAcquisitionDate"),userAccountId:gh("accountId"),userAgent:gh("userAgent"),userId:gh("id"),userStoreRegion:gh("storeRegion"),userAuthUserId:gh("authUserId"),userAnonymousUserAcquisitionDate:gh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:gh("authUserAcquisitionDate"),cloudName:h0("name"),cloudRole:h0("role"),cloudRoleVer:h0("roleVer"),cloudRoleInstance:h0("roleInstance"),cloudEnvironment:h0("environment"),cloudLocation:h0("location"),cloudDeploymentUnit:h0("deploymentUnit"),internalNodeName:wC("nodeName"),internalSdkVersion:wC("sdkVersion"),internalAgentVersion:wC("agentVersion"),internalSnippet:wC("snippet"),internalSdkSrc:wC("sdkSrc")}))});function KV(t,e,r,n,i,o){var s;r=Pr(n,r)||wi,(we(t)||we(e)||we(r))&&Cn("Input doesn't contain all required fields");var a="";t[W4]&&(a=t[W4],delete t[W4]);var l=(s={},s[fi]=r,s.time=Ea(new Date),s.iKey=a,s.ext=o||{},s.tags=[],s.data={},s.baseType=e,s.baseData=t,s);return we(i)||ze(i,function(c,u){l.data[c]=u}),l}var _xe,yxe=I(()=>{xr();gc();_c();Ki();_xe=function(){function t(){}return t.create=KV,t}()});var xxe,mi,bxe=I(()=>{WV();xxe={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},mi=new Nx});function Exe(t){var e=null;if(mt(Event))e=new Event(t);else{var r=In();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}var Txe=I(()=>{xr()});var Sxe={};Ri(Sxe,{AnalyticsPluginIdentifier:()=>aYe,BreezeChannelIdentifier:()=>YV,ConfigurationManager:()=>gxe,ConnectionStringParser:()=>W1e,ContextTagKeys:()=>Nx,CtxTagKeys:()=>mi,DEFAULT_BREEZE_ENDPOINT:()=>ih,DEFAULT_BREEZE_PATH:()=>Ou,Data:()=>Bu,DisabledPropertyName:()=>xx,DistributedTracingModes:()=>U1e,Envelope:()=>dO,Event:()=>Fu,Exception:()=>ph,Extensions:()=>xxe,HttpMethod:()=>yC,Metric:()=>Uu,PageView:()=>dh,PageViewPerformance:()=>hh,ProcessLegacy:()=>Ex,PropertiesPluginIdentifier:()=>sYe,RemoteDependencyData:()=>fh,RequestHeaders:()=>hd,SampleRate:()=>bx,SeverityLevel:()=>hO,TelemetryItemCreator:()=>_xe,ThrottleMgr:()=>z1e,Trace:()=>mh,correlationIdCanIncludeCorrelationHeader:()=>N1e,correlationIdGetCorrelationContext:()=>k1e,correlationIdGetCorrelationContextValue:()=>LV,correlationIdGetPrefix:()=>P1e,correlationIdSetPrefix:()=>D1e,createDistributedTraceContextFromTrace:()=>F1e,createDomEvent:()=>Exe,createTelemetryItem:()=>KV,createTraceParent:()=>YS,dataSanitizeException:()=>nO,dataSanitizeId:()=>iO,dataSanitizeInput:()=>oO,dataSanitizeKey:()=>DV,dataSanitizeKeyAndAddUniqueness:()=>rO,dataSanitizeMeasurements:()=>qo,dataSanitizeMessage:()=>Cx,dataSanitizeProperties:()=>Bo,dataSanitizeString:()=>Pr,dataSanitizeUrl:()=>ch,dateTimeUtilsDuration:()=>M1e,dateTimeUtilsNow:()=>L1e,dsPadNumber:()=>PV,findW3cTraceParent:()=>JS,formatTraceParent:()=>XS,getExtensionByName:()=>cxe,isBeaconApiSupported:()=>Sa,isCrossOriginError:()=>lxe,isInternalApplicationInsightsEndpoint:()=>Ix,isSampledFlag:()=>QS,isValidSpanId:()=>Iu,isValidTraceId:()=>Cu,isValidTraceParent:()=>tx,msToTimeSpan:()=>Dx,parseConnectionString:()=>SC,parseTraceParent:()=>Kv,strNotSpecified:()=>wi,stringToBoolOrDefault:()=>axe,urlGetAbsoluteUrl:()=>w1e,urlGetCompleteUrl:()=>R1e,urlGetPathName:()=>A1e,urlParseFullHost:()=>TC,urlParseHost:()=>NV,urlParseUrl:()=>d0,utlCanUseLocalStorage:()=>Ax,utlCanUseSessionStorage:()=>f0,utlDisableStorage:()=>q1e,utlEnableStorage:()=>H1e,utlGetLocalStorage:()=>cO,utlGetSessionStorage:()=>uO,utlGetSessionStorageKeys:()=>G1e,utlRemoveSessionStorage:()=>V1e,utlRemoveStorage:()=>j1e,utlSetLocalStorage:()=>lO,utlSetSessionStorage:()=>pO,utlSetStoragePrefix:()=>aO});var sYe,YV,aYe,_d=I(()=>{MV();$1e();K1e();CV();gc();Y1e();Q1e();nxe();sxe();uxe();pxe();dxe();fxe();mxe();hxe();vxe();WV();_c();yxe();bxe();FV();mO();xr();Txe();qV();kV();sYe="AppInsightsPropertiesPlugin",YV="AppInsightsChannelPlugin",aYe="ApplicationInsightsAnalytics"});var _h,Cxe=I(()=>{_h="duration"});var hi,vO,gi,qu,g0,Pt,yh,xh,yc,bh,yd,AC,RC,kx,xd,Eh,_O,bd,DC,Ed,PC,NC,Ox,v0,kC,yO,Td,Lx,xO,Mx,go,Fx,bO,QV,XV,EO,JV,ZV,Th,ez,tz,rz,nz,TO,Ux,Ixe,Sh,SO,OC,LC,wxe,Bx,CO,iz,IO,Axe,Sd=I(()=>{hi="tags",vO="deviceType",gi="data",qu="name",g0="traceID",Pt="length",yh="stringify",xh="measurements",yc="dataType",bh="envelopeType",yd="toString",AC="onLine",RC="isOnline",kx="_get",xd="enqueue",Eh="count",_O="eventsLimitInMem",bd="push",DC="emitLineDelimitedJson",Ed="clear",PC="batchPayloads",NC="createNew",Ox="markAsSent",v0="clearSent",kC="bufferOverride",yO="BUFFER_KEY",Td="SENT_BUFFER_KEY",Lx="MAX_BUFFER_SIZE",xO="sendPOST",Mx="triggerSend",go="diagLog",Fx="_sender",bO="customHeaders",QV="maxBatchSizeInBytes",XV="onunloadDisableBeacon",EO="isBeaconApiDisabled",JV="alwaysUseXhrOverride",ZV="enableSessionStorageBuffer",Th="_buffer",ez="onunloadDisableFetch",tz="instrumentationKey",rz="convertUndefined",nz="maxBatchInterval",TO="baseType",Ux="sampleRate",Ixe="_xhrReadyStateChange",Sh="_onError",SO="_onPartialSuccess",OC="_onSuccess",LC="itemsAccepted",wxe="itemsReceived",Bx="oriPayload",CO="setRequestHeader",iz="eventsSendRequest",IO="getSamplingScore",Axe="getHashCodeScore"});function vi(t,e,r){return dc(t,e,r,Zc)}function cYe(t,e,r){var n=r[hi]=r[hi]||{},i=e.ext=e.ext||{},o=e[hi]=e[hi]||[],s=i.user;s&&(vi(n,mi.userAuthUserId,s.authId),vi(n,mi.userId,s.id||s.localId));var a=i.app;a&&vi(n,mi.sessionId,a.sesId);var l=i.device;l&&(vi(n,mi.deviceId,l.id||l.localId),vi(n,mi[vO],l.deviceClass),vi(n,mi.deviceIp,l.ip),vi(n,mi.deviceModel,l.model),vi(n,mi[vO],l[vO]));var c=e.ext.web;if(c){vi(n,mi.deviceLanguage,c.browserLang),vi(n,mi.deviceBrowserVersion,c.browserVer),vi(n,mi.deviceBrowser,c.browser);var u=r[gi]=r[gi]||{},p=u[gn]=u[gn]||{},d=p[Yi]=p[Yi]||{};vi(d,"domain",c.domain),vi(d,"isManual",c.isManual?Rxe:null),vi(d,"screenRes",c.screenRes),vi(d,"userConsent",c.userConsent?Rxe:null)}var f=i.os;f&&vi(n,mi.deviceOS,f[qu]);var m=i.trace;m&&(vi(n,mi.operationParentId,m.parentID),vi(n,mi.operationName,Pr(t,m[qu])),vi(n,mi.operationId,m[g0]));for(var h={},g=o[Pt]-1;g>=0;g--){var v=o[g];ze(v,function(y,b){h[y]=b}),o.splice(g,1)}ze(o,function(y,b){h[y]=b});var _=uc(uc({},n),h);_[mi.internalSdkVersion]||(_[mi.internalSdkVersion]=Pr(t,"javascript:".concat(lYe.Version),64)),r[hi]=fc(_)}function Ch(t,e,r){we(t)||ze(t,function(n,i){Gi(i)?r[n]=i:gt(i)?e[n]=i:Eu()&&(e[n]=mo()[yh](i))})}function _0(t,e){we(t)||ze(t,function(r,n){t[r]=n||e})}function y0(t,e,r,n){var i=new dO(t,n,e);vi(i,"sampleRate",r[bx]),(r[gn]||{}).startTime&&(i.time=Ea(r[gn].startTime)),i.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return i[qu]=i[qu].replace("{0}",o),cYe(t,r,i),r[hi]=r[hi]||[],fc(i)}function x0(t,e){we(e[gn])&&Ue(t,1,46,"telemetryItem.baseData cannot be null.")}function Dxe(t,e,r){x0(t,e);var n=e[gn][xh]||{},i=e[gn][Yi]||{};Ch(e[gi],i,n),we(r)||_0(i,r);var o=e[gn];if(we(o))return Ca(t,"Invalid input for dependency data"),null;var s=o[Yi]&&o[Yi][yC]?o[Yi][yC]:"GET",a=new fh(t,o.id,o.target,o[qu],o[_h],o.success,o.responseCode,s,o.type,o.correlationContext,i,n),l=new Bu(fh[yc],a);return y0(t,fh[bh],e,l)}function sz(t,e,r){x0(t,e);var n={},i={};e[oz]!==Fu[yc]&&(n.baseTypeSource=e[oz]),e[oz]===Fu[yc]?(n=e[gn][Yi]||{},i=e[gn][xh]||{}):e[gn]&&Ch(e[gn],n,i),Ch(e[gi],n,i),we(r)||_0(n,r);var o=e[gn][qu],s=new Fu(t,o,n,i),a=new Bu(Fu[yc],s);return y0(t,Fu[bh],e,a)}function Pxe(t,e,r){x0(t,e);var n=e[gn][xh]||{},i=e[gn][Yi]||{};Ch(e[gi],i,n),we(r)||_0(i,r);var o=e[gn],s=ph.CreateFromInterface(t,o,i,n),a=new Bu(ph[yc],s);return y0(t,ph[bh],e,a)}function Nxe(t,e,r){x0(t,e);var n=e[gn],i=n[Yi]||{},o=n[xh]||{};Ch(e[gi],i,o),we(r)||_0(i,r);var s=new Uu(t,n[qu],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new Bu(Uu[yc],s);return y0(t,Uu[bh],e,a)}function kxe(t,e,r){x0(t,e);var n,i=e[gn];!we(i)&&!we(i[Yi])&&!we(i[Yi][_h])?(n=i[Yi][_h],delete i[Yi][_h]):!we(e[gi])&&!we(e[gi][_h])&&(n=e[gi][_h],delete e[gi][_h]);var o=e[gn],s;((e.ext||{}).trace||{})[g0]&&(s=e.ext.trace[g0]);var a=o.id||s,l=o[qu],c=o.uri,u=o[Yi]||{},p=o[xh]||{};if(we(o.refUri)||(u.refUri=o.refUri),we(o.pageType)||(u.pageType=o.pageType),we(o.isLoggedIn)||(u.isLoggedIn=o.isLoggedIn[yd]()),!we(o[Yi])){var d=o[Yi];ze(d,function(h,g){u[h]=g})}Ch(e[gi],u,p),we(r)||_0(u,r);var f=new dh(t,l,c,n,u,p,a),m=new Bu(dh[yc],f);return y0(t,dh[bh],e,m)}function Oxe(t,e,r){x0(t,e);var n=e[gn],i=n[qu],o=n.uri||n.url,s=n[Yi]||{},a=n[xh]||{};Ch(e[gi],s,a),we(r)||_0(s,r);var l=new hh(t,i,o,void 0,s,a,n),c=new Bu(hh[yc],l);return y0(t,hh[bh],e,c)}function Lxe(t,e,r){x0(t,e);var n=e[gn].message,i=e[gn].severityLevel,o=e[gn][Yi]||{},s=e[gn][xh]||{};Ch(e[gi],o,s),we(r)||_0(o,r);var a=new mh(t,n,i,o,s),l=new Bu(mh[yc],a);return y0(t,mh[bh],e,l)}var oz,gn,Yi,Rxe,lYe,Mxe=I(()=>{Us();_d();xr();Cxe();Sd();oz="baseType",gn="baseData",Yi="properties",Rxe="true";lYe={Version:"3.0.5"}});function Fxe(t,e){dd(t,null,null,e)}function Uxe(t){var e,r=In(),n=ui(),i=!1,o=!0,s=Ia(ho("OfflineListener"),t);try{if(l(Bn())&&(i=!0),r){var a=r.body||r;a.ononline&&l(a)&&(i=!0)}i&&n&&!we(n[AC])&&(o=n[AC])}catch{i=!1}function l(f){var m=!1;return f&&(m=wu(f,"online",c,s),m&&wu(f,"offline",u,s)),m}function c(){o=!0}function u(){o=!1}function p(){var f=!0;return i?f=o:n&&!we(n[AC])&&(f=n[AC]),f}function d(){var f=Bn();if(f&&i){if(Fxe(f,s),r){var m=r.body||r;vt(m.ononline)||Fxe(m,s)}i=!1}}return e={},e[RC]=p,e.isListening=function(){return i},e.unload=d,e}var Bxe=I(()=>{xr();Sd()});var qxe,wO,az,Hxe=I(()=>{Us();fo();_d();xr();Sd();qxe=function(){function t(e,r){var n=[],i=!1;this[kx]=function(){return n},this._set=function(o){return n=o,n},Wt(t,this,function(o){o[xd]=function(s){if(o[Eh]()>=r[_O]){i||(Ue(e,2,105,"Maximum in-memory buffer size reached: "+o[Eh](),!0),i=!0);return}n[bd](s)},o[Eh]=function(){return n[Pt]},o.size=function(){for(var s=n[Pt],a=0;a<n[Pt];a++)s+=n[a][Pt];return r[DC]||(s+=2),s},o[Ed]=function(){n=[],i=!1},o.getItems=function(){return n.slice(0)},o[PC]=function(s){if(s&&s[Pt]>0){var a=r[DC]?s.join(`
`):"["+s.join(",")+"]";return a}return null},o[NC]=function(s,a,l){var c=n.slice(0);s=s||e,a=a||{};var u=l?new az(s,a):new wO(s,a);return Ae(c,function(p){u[xd](p)}),u}})}return t.__ieDyn=1,t}(),wO=function(t){Fs(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Wt(e,i,function(o,s){o[Ox]=function(a){s[Ed]()},o[v0]=function(a){}}),i}return e.__ieDyn=1,e}(qxe),az=function(t){Fs(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=!1,s=n?.namePrefix,a=n[kC]||{getItem:uO,setItem:pO},l=a.getItem,c=a.setItem;return Wt(e,i,function(u,p){var d=g(e[yO]),f=g(e[Td]),m=u._set(d.concat(f));m[Pt]>e[Lx]&&(m[Pt]=e[Lx]),v(e[Td],[]),v(e[yO],m),u[xd]=function(_){if(u[Eh]()>=e[Lx]){o||(Ue(r,2,67,"Maximum buffer size reached: "+u[Eh](),!0),o=!0);return}p[xd](_),v(e.BUFFER_KEY,u[kx]())},u[Ed]=function(){p[Ed](),v(e.BUFFER_KEY,u[kx]()),v(e[Td],[]),o=!1},u[Ox]=function(_){v(e[yO],u._set(h(_,u[kx]())));var y=g(e[Td]);y instanceof Array&&_ instanceof Array&&(y=y.concat(_),y[Pt]>e[Lx]&&(Ue(r,1,67,"Sent buffer reached its maximum size: "+y[Pt],!0),y[Pt]=e[Lx]),v(e[Td],y))},u[v0]=function(_){var y=g(e[Td]);y=h(_,y),v(e[Td],y)},u[NC]=function(_,y,b){b=!!b;var x=u[kx]().slice(0),P=g(e[Td]).slice(0);_=_||r,y=y||{},u[Ed]();var U=b?new e(_,y):new wO(_,y);return Ae(x,function(H){U[xd](H)}),b&&U[Ox](P),U};function h(_,y){var b=[];return Ae(y,function(x){!mt(x)&&or(_,x)===-1&&b[bd](x)}),b}function g(_){var y=_;try{y=s?s+"_"+y:y;var b=l(r,y);if(b){var x=mo().parse(b);if(gt(x)&&(x=mo().parse(x)),x&&Xe(x))return x}}catch(P){Ue(r,1,42," storage key: "+y+", "+Qr(P),{exception:$e(P)})}return[]}function v(_,y){var b=_;try{b=s?s+"_"+b:b;var x=JSON[yh](y);c(r,b,x)}catch(P){c(r,b,JSON[yh]([])),Ue(r,2,41," storage key: "+b+", "+Qr(P)+". Buffer cleared",{exception:$e(P)})}}}),i}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(qxe)});var jxe,Gxe=I(()=>{fo();xr();Sd();jxe=function(){function t(e){Wt(t,this,function(r){r.serialize=function(s){var a=n(s,"root");try{return mo()[yh](a)}catch(l){Ue(e,1,48,l&&mt(l[yd])?l[yd]():"Error serializing object",null,!0)}};function n(s,a){var l="__aiCircularRefCheck",c={};if(!s)return Ue(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),c;if(s[l])return Ue(e,2,50,"Circular reference detected while serializing object",{name:a},!0),c;if(!s.aiDataContract){if(a==="measurements")c=o(s,"number",a);else if(a==="properties")c=o(s,"string",a);else if(a==="tags")c=o(s,"string",a);else if(Xe(s))c=i(s,a);else{Ue(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{mo()[yh](s),c=s}catch(u){Ue(e,1,48,u&&mt(u[yd])?u[yd]():"Error serializing object",null,!0)}}return c}return s[l]=!0,ze(s.aiDataContract,function(u,p){var d=mt(p)?p()&1:p&1,f=mt(p)?p()&4:p&4,m=p&2,h=s[u]!==void 0,g=Br(s[u])&&s[u]!==null;if(d&&!h&&!m)Ue(e,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!f){var v=void 0;g?m?v=i(s[u],u):v=n(s[u],u):v=s[u],v!==void 0&&(c[u]=v)}}),delete s[l],c}function i(s,a){var l;if(s)if(!Xe(s))Ue(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{l=[];for(var c=0;c<s[Pt];c++){var u=s[c],p=n(u,a+"["+c+"]");l[bd](p)}}return l}function o(s,a,l){var c;return s&&(c={},ze(s,function(u,p){if(a==="string")p===void 0?c[u]="undefined":p===null?c[u]="null":p[yd]?c[u]=p[yd]():c[u]="invalid field: toString() is not defined.";else if(a==="number")if(p===void 0)c[u]="undefined";else if(p===null)c[u]="null";else{var d=parseFloat(p);isNaN(d)?c[u]="NaN":c[u]=d}else c[u]="invalid field: "+l+" is of unknown type.",Ue(e,1,c[u],null,!0)})),c}})}return t.__ieDyn=1,t}()});var uYe,Vxe,zxe=I(()=>{Sd();uYe=8,Vxe=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Pt]<uYe;)e=e.concat(e);for(var r=5381,n=0;n<e[Pt];++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t}()});var $xe,Wxe=I(()=>{_d();Sd();zxe();$xe=function(){function t(){var e=this,r=new Vxe,n=new Nx;e[IO]=function(i){var o=0;return i[hi]&&i[hi][n.userId]?o=r.getHashCodeScore(i[hi][n.userId]):i.ext&&i.ext.user&&i.ext.user.id?o=r[Axe](i.ext.user.id):i[hi]&&i[hi][n.operationId]?o=r.getHashCodeScore(i[hi][n.operationId]):i.ext&&i.ext.telemetryTrace&&i.ext.telemetryTrace[g0]?o=r.getHashCodeScore(i.ext.telemetryTrace[g0]):o=Math.random()*100,o}}return t}()});var Kxe,Yxe=I(()=>{_d();xr();Sd();Wxe();Kxe=function(){function t(e,r){this.INT_MAX_VALUE=2147483647;var n=r||al(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Ux]=e,this.samplingScoreGenerator=new $xe}return t.prototype.isSampledIn=function(e){var r=this[Ux],n=!1;return r==null||r>=100||e.baseType===Uu[yc]?!0:(n=this.samplingScoreGenerator[IO](e)<r,n)},t}()});function AO(t){try{return t.responseText}catch{}return null}function dYe(t){return t&&t[xO]}function fYe(t){return!isNaN(t)&&t>0&&t<=100}var Qn,Cd,Ih,pYe,Qxe,mYe,MC,Xxe=I(()=>{Us();fo();_d();xr();G1();pt();Mxe();Bxe();Hxe();Gxe();Yxe();Sd();Ih=void 0,pYe=65e3;Qxe=cs((Qn={endpointUrl:X1(Zc,ih+Ou)},Qn[DC]=sl(),Qn[nz]=15e3,Qn[QV]=102400,Qn.disableTelemetry=sl(),Qn[ZV]=sl(!0),Qn.isRetryDisabled=sl(),Qn[EO]=sl(!0),Qn.disableXhr=sl(),Qn[ez]=sl(),Qn[XV]=sl(),Qn[tz]=Ih,Qn.namePrefix=Ih,Qn.samplingPercentage=X1(fYe,100),Qn[bO]=Ih,Qn[rz]=Ih,Qn[_O]=1e4,Qn[kC]=!1,Qn.httpXHROverride={isVal:dYe,v:Ih},Qn[JV]=sl(),Qn));mYe=(Cd={},Cd[Fu.dataType]=sz,Cd[mh.dataType]=Lxe,Cd[dh.dataType]=kxe,Cd[hh.dataType]=Oxe,Cd[ph.dataType]=Pxe,Cd[Uu.dataType]=Nxe,Cd[fh.dataType]=Dxe,Cd),MC=function(t){Fs(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=YV;var n,i,o,s,a,l,c,u,p=0,d,f,m,h,g,v,_,y,b,x,P,U,H,j,M,F,z,q,L,S,T;return Wt(e,r,function(A,J){be(),A.pause=function(){le(),s=!0},A.resume=function(){s&&(s=!1,i=null,Ze(),qr())},A.flush=function(E,B,Y){if(E===void 0&&(E=!0),!s){le();try{return A[Mx](E,null,Y||1)}catch(Q){Ue(A[go](),1,22,"flush failed, telemetry will not be collected: "+Qr(Q),{exception:$e(Q)})}}},A.onunloadFlush=function(){if(!s)if(_||q)try{return A[Mx](!0,ve,2)}catch(E){Ue(A[go](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Qr(E),{exception:$e(E)})}else A.flush(!1)},A.addHeader=function(E,B){u[E]=B},A.initialize=function(E,B,Y,Q){A.isInitialized()&&Ue(A[go](),1,28,"Sender is already initialized"),J.initialize(E,B,Y,Q);var fe=A.identifier;l=new jxe(B.logger),n=0,i=null,o=0,A[Fx]=null,c=0;var ge=A[go]();m=Ia(ho("Sender"),B.evtNamespace&&B.evtNamespace()),f=Uxe(m),A._addHook(di(E,function(oe){var V=oe.cfg;V.storagePrefix&&aO(V.storagePrefix);var ie=ms(null,V,B),re=ie.getExtCfg(fe,Qxe);yr(A,"_senderConfig",{g:function(){return re}}),g!==re.endpointUrl&&(h=g=re.endpointUrl),y&&y!==re[bO]&&Ae(y,function(br){delete u[br.header]}),v=re[QV],_=(re[XV]===!1||re[EO]===!1)&&Sa(),q=re[JV],L=!!re.disableXhr;var xe=re[kC],Ie=!!re[ZV]&&(!!xe||f0()),We=re.namePrefix,ft=Ie!==j||Ie&&F!==We||Ie&&M!==xe;if(A[Th]){if(ft)try{A._buffer=A._buffer[NC](ge,re,Ie)}catch(br){Ue(A[go](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Qr(br),{exception:$e(br)})}Ze()}else A[Th]=Ie?new az(ge,re):new wO(ge,re);F=We,j=Ie,M=xe,S=!re[ez]&&nd(!0),A._sample=new Kxe(re.samplingPercentage,ge),x=re[tz],pe(x,V)||Ue(ge,1,100,"Invalid Instrumentation key "+x),y=re[bO],!Ix(h)&&y&&y[Pt]>0?Ae(y,function(br){r.addHeader(br.header,br.value)}):y=null,z=re.enableSendPromise;var Et=re.httpXHROverride,It=null,Hn=null;It=ce([1,2],!1);var Zt={sendPOST:ye};T=function(br,Rn){return se(Zt,br,Rn)},!re[EO]&&Sa()&&(It=ce([3],!1)),It=q?Et:It||Et||Zt,A[Fx]=function(br,Rn){return se(It,br,Rn)},S&&(d=Te),Hn=q?Et:ce([3,1],!0)||Et,(q||!d)&&Hn&&(d=function(br,Rn){return se(Hn,br,Rn)}),d||(d=T),b=re.disableTelemetry,P=re[rz]||Ih,U=re.isRetryDisabled,H=re[nz]}))},A.processTelemetry=function(E,B){B=A._getTelCtx(B);var Y=B[go]();try{if(b)return;if(!E){Ue(Y,1,7,"Cannot send empty telemetry");return}if(E.baseData&&!E[TO]){Ue(Y,1,70,"Cannot send telemetry without baseData and baseType");return}if(E[TO]||(E[TO]="EventData"),!A[Fx]){Ue(Y,1,28,"Sender was not initialized");return}if(me(E))E[bx]=A._sample[Ux];else{Ue(Y,2,33,"Telemetry item was sampled out and not sent",{SampleRate:A._sample[Ux]});return}var Q=E.iKey||x,fe=e.constructEnvelope(E,Q,Y,P);if(!fe){Ue(Y,1,47,"Unable to create an AppInsights envelope");return}var ge=!1;if(E[hi]&&E[hi][Ex]&&(Ae(E[hi][Ex],function(ie){try{ie&&ie(fe)===!1&&(ge=!0,Ca(Y,"Telemetry processor check returns false"))}catch(re){Ue(Y,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Qr(re),{exception:$e(re)},!0)}}),delete E[hi][Ex]),ge)return;var oe=l.serialize(fe),V=A[Th];Ze(oe),V[xd](oe),qr()}catch(ie){Ue(Y,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Qr(ie),{exception:$e(ie)})}A.processNext(E,B)},A[Ixe]=function(E,B,Y){E.readyState===4&&ke(E.status,B,E.responseURL,Y,te(E),AO(E)||E.response)},A[Mx]=function(E,B,Y){E===void 0&&(E=!0);var Q;if(!s)try{var fe=A[Th];if(b)fe[Ed]();else{if(fe[Eh]()>0){var ge=fe.getItems();G(Y||0,E),B?Q=B.call(A,ge,E):Q=A[Fx](ge,E)}o=+new Date}le()}catch(V){var oe=PS();(!oe||oe>9)&&Ue(A[go](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Qr(V),{exception:$e(V)})}return Q},A._doTeardown=function(E,B){A.onunloadFlush(),od(f,!1),be()},A[Sh]=function(E,B,Y){Ue(A[go](),2,26,"Failed to send telemetry.",{message:B}),A._buffer&&A._buffer[v0](E)},A[SO]=function(E,B){for(var Y=[],Q=[],fe=B.errors.reverse(),ge=0,oe=fe;ge<oe.length;ge++){var V=oe[ge],ie=E.splice(V.index,1)[0];ee(V.statusCode)?Q[bd](ie):Y[bd](ie)}E[Pt]>0&&A[OC](E,B[LC]),Y[Pt]>0&&A[Sh](Y,te(null,["partial success",B[LC],"of",B.itemsReceived].join(" "))),Q[Pt]>0&&(bt(Q),Ue(A[go](),2,40,"Partial success. Delivered: "+E[Pt]+", Failed: "+Y[Pt]+". Will retry to send "+Q[Pt]+" our of "+B[wxe]+" items"))},A[OC]=function(E,B){A._buffer&&A._buffer[v0](E)},A._xdrOnLoad=function(E,B){var Y=AO(E);if(E&&(Y+""=="200"||Y===""))n=0,A[OC](B,0);else{var Q=qe(Y);Q&&Q.itemsReceived&&Q.itemsReceived>Q[LC]&&!U?A[SO](B,Q):A[Sh](B,O(E))}};function me(E){return A._sample.isSampledIn(E)}function ce(E,B){for(var Y,Q=null,fe=null,ge=0;fe==null&&ge<E[Pt];)Q=E[ge],!L&&Q===1?Gv()?fe=N:$m()&&(fe=ye):Q===2&&nd(B)?fe=Ye:Sa()&&Q===3&&(fe=ne),ge++;return fe?(Y={},Y[xO]=fe,Y):null}function ae(E,B,Y,Q){B===200&&E&&A._onSuccess(E,E[Pt]),Q&&A[Sh](E,Q)}function se(E,B,Y){var Q=function(oe,V,ie){return ae(B,oe,V,ie)},fe=je(B),ge=E&&E[xO];return ge&&fe?(A._buffer[Ox](B),ge(fe,Q,!Y)):null}function je(E){var B;if(Xe(E)&&E[Pt]>0){var Y=A._buffer[PC](E),Q=(B={},B[gi]=Y,B.urlString=h,B.headers=u,B.disableXhrSync=L,B.disableFetchKeepAlive=!S,B[Bx]=E,B);return Q}return null}function Ye(E,B,Y){return Ne(E,B,!1)}function Ze(E){var B=E?E[Pt]:0;return A[Th].size()+B>v?((!f||f[RC]())&&A[Mx](!0,null,10),!0):!1}function ke(E,B,Y,Q,fe,ge){var oe=null;if(A._appId||(oe=qe(ge),oe&&oe.appId&&(A._appId=oe.appId)),(E<200||E>=300)&&E!==0){if((E===301||E===307||E===308)&&!st(Y)){A[Sh](B,fe);return}!U&&ee(E)?(bt(B),Ue(A[go](),2,40,". Response code "+E+". Will retry to send "+B[Pt]+" items.")):A[Sh](B,fe)}else if(f&&!f[RC]()){if(!U){var V=10;bt(B,V),Ue(A[go](),2,40,". Offline - Response Code: ".concat(E,". Offline status: ").concat(!f.isOnline(),". Will retry to send ").concat(B.length," items."))}}else st(Y),E===206?(oe||(oe=qe(ge)),oe&&!U?A[SO](B,oe):A[Sh](B,fe)):(n=0,A[OC](B,Q))}function st(E){return c>=10?!1:!we(E)&&E!==""&&E!==h?(h=E,++c,!0):!1}function et(E,B,Y,Q){try{E(B,Y,Q)}catch{}}function ve(E,B){var Y=function(fe,ge,oe){return ae(E,fe,ge,oe)};if(d)d(E,!1);else{var Q=je(E);ne(Q,Y,!B)}}function W(E,B){var Y=ui(),Q=h,fe=new Blob([E],{type:"text/plain;charset=UTF-8"}),ge=Y.sendBeacon(Q,fe);return ge&&B(200,{},E),ge}function ne(E,B,Y){var Q=E,fe=Q&&Q[gi];if(gt(fe)&&fe[Pt]>0&&!W(fe,B)){var ge=[],oe=Q[Bx];if(oe[Pt]>0)for(var V=0;V<fe[Pt];V++){var ie=E[V],re=A._buffer[PC](ie);W(re,B)||ge[bd](ie)}ge[Pt]>0&&(T&&T(ge,!0),Ue(A[go](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function ye(E,B,Y){var Q=E,fe,ge,oe,V=new XMLHttpRequest,ie=h;try{V[xx]=!0}catch{}return V.open("POST",ie,!Y),V[CO]("Content-type","application/json"),Ix(ie)&&V[CO](hd[6],hd[7]),Ae(Si(u),function(re){V[CO](re,u[re])}),V.onreadystatechange=function(){var re=Q[Bx];A._xhrReadyStateChange(V,re,re[Pt]),V.readyState===4&&ge&&ge(!0)},V.onerror=function(re){et(B,400,{},te(V)),oe&&oe(re)},!Y&&z&&(fe=ds(function(re,xe){ge=re,oe=xe})),V.send(E[gi]),fe}function Te(E,B){var Y=function(oe,V,ie){return ae(E,oe,V,ie)};if(Xe(E)){for(var Q=E[Pt],fe=0;fe<E[Pt];fe++)Q+=E[fe][Pt];var ge=je(E);p+Q<=pYe?Ne(ge,Y,!0):Sa()?ne(ge,Y,!B):(T&&T(E,!0),Ue(A[go](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function Ne(E,B,Y){var Q,fe=h,ge=E,oe=ge[gi],V=new Blob([oe],{type:"application/json"}),ie,re,xe,Ie=new Headers,We=oe[Pt],ft=!1,Et=!1;Ix(fe)&&Ie.append(hd[6],hd[7]),Ae(Si(u),function(Zt){Ie.append(Zt,u[Zt])});var It=(Q={method:"POST",headers:Ie,body:V},Q[xx]=!0,Q);Y&&(It.keepalive=!0,ft=!0,p+=We);var Hn=new Request(fe,It);try{Hn[xx]=!0}catch{}!Y&&z&&(ie=ds(function(Zt,br){re=Zt,xe=br}));try{Hm(fetch(Hn),function(Zt){if(Y&&(p-=We,We=0),!Et)if(Et=!0,Zt.rejected)et(B,400,{},Zt.reason&&Zt.reason.message),xe&&xe(Zt.reason);else{var br=Zt.value;br.ok?Hm(br.text(),function(Rn){var wd=ge[Bx];ke(br.status,wd,br.url,wd[Pt],br.statusText,Rn.value||""),re&&re(!0)}):(et(B,400,{},br.statusText),re&&re(!1))}})}catch(Zt){Et||(et(B,400,{},$e(Zt)),xe&&xe(Zt))}return ft&&!Et&&(Et=!0,et(B,200,{}),re&&re(!0)),ie}function qe(E){try{if(E&&E!==""){var B=mo().parse(E);if(B&&B.itemsReceived&&B.itemsReceived>=B[LC]&&B.itemsReceived-B.itemsAccepted===B.errors[Pt])return B}}catch(Y){Ue(A[go](),1,43,"Cannot parse the response. "+Qr(Y),{response:E})}return null}function bt(E,B){if(B===void 0&&(B=1),!(!E||E[Pt]===0)){var Y=A[Th];Y[v0](E),n++;for(var Q=0,fe=E;Q<fe.length;Q++){var ge=fe[Q];Y[xd](ge)}Jt(B),qr()}}function Jt(E){var B=10,Y;if(n<=1)Y=B;else{var Q=(Math.pow(2,n)-1)/2,fe=Math.floor(Math.random()*Q*B)+1;fe=E*fe,Y=Math.max(Math.min(fe,3600),B)}var ge=wn()+Y*1e3;i=ge}function qr(){if(!a&&!s){var E=i?Math.max(0,i-wn()):0,B=Math.max(H,E);a=Ms(function(){a=null,A[Mx](!0,null,1)},B)}}function le(){a&&a.cancel(),a=null,i=null}function ee(E){return E===401||E===403||E===408||E===429||E===500||E===502||E===503||E===504}function te(E,B){return E?"XMLHttpRequest,Status:"+E.status+",Response:"+AO(E)||E.response||"":B}function N(E,B,Y){var Q=E,fe=Bn(),ge=new XDomainRequest,oe=Q[gi];ge.onload=function(){var re=Q[Bx];A._xdrOnLoad(ge,re)},ge.onerror=function(){et(B,400,{},O(ge))};var V=fe&&fe.location&&fe.location.protocol||"";if(h.lastIndexOf(V,0)!==0){Ue(A[go](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),A._buffer[Ed]();return}var ie=h.replace(/^(https?:)/,"");ge.open("POST",ie),ge.send(oe)}function O(E,B){return E?"XDomainRequest,Response:"+AO(E)||"":B}function K(){var E="getNotifyMgr";return A.core[E]?A.core[E]():A.core._notificationManager}function G(E,B){var Y=K();if(Y&&Y[iz])try{Y[iz](E,B)}catch(Q){Ue(A[go](),1,74,"send request notification failed: "+Qr(Q),{exception:$e(Q)})}}function pe(E,B){var Y=B.disableInstrumentationKeyValidation,Q=we(Y)?!1:Y;if(Q)return!0;var fe="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",ge=new RegExp(fe);return ge.test(E)}function be(){A[Fx]=null,A[Th]=null,A._appId=null,A._sample=null,u={},f=null,n=0,i=null,o=null,s=!1,a=null,l=null,c=0,p=0,d=null,m=null,h=null,g=null,v=0,_=!1,y=null,b=!1,x=null,P=Ih,U=!1,j=null,F=Ih,L=!1,S=!1,T=null,yr(A,"_senderConfig",{g:function(){return Rk({},Qxe)}})}}),r}return e.constructEnvelope=function(r,n,i,o){var s;n!==r.iKey&&!we(n)?s=uc(uc({},r),{iKey:n}):s=r;var a=mYe[s.baseType]||sz;return a(i,s,o)},e}(ud)});var cz=I(()=>{Xxe()});var RO,DO,Jxe=I(()=>{RO="instrumentationKey",DO="connectionString"});var Zxe={};Ri(Zxe,{AppInsightsCore:()=>pd,ApplicationInsights:()=>vYe,Sender:()=>MC,SeverityLevel:()=>hO,arrForEach:()=>Ae,isNullOrUndefined:()=>we,proxyFunctions:()=>Ta,throwError:()=>Cn});function gYe(t){return t&&t>0}var hYe,vYe,ebe=I(()=>{fo();cz();_d();xr();pt();Jxe();xr();_d();cz();hYe={diagnosticLogInterval:X1(gYe,1e4)};vYe=function(){function t(e){var r=new pd,n;(we(e)||we(e[RO])&&we(e[DO]))&&Cn("Invalid input configuration"),Wt(t,this,function(o){yr(o,"config",{g:function(){return n}}),s(),o.initialize=s,o.track=i,Ta(o,r,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"]);function s(){var a=mn(e||{},hYe);n=a.cfg,r.addUnloadHook(di(a,function(){if(n[DO]){var l=SC(n[DO]),c=l.ingestionendpoint;n.endpointUrl=c?c+Ou:n.endpointUrl,n[RO]=l.instrumentationkey||n[RO]}})),r.initialize(n,[new MC])}});function i(o){o&&(o.baseData=o.baseData||{},o.baseType=o.baseType||"EventData"),r.track(o)}}return t.__ieDyn=1,t}()});var tbe=k(Hu=>{"use strict";var _Ye=Hu&&Hu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yYe=Hu&&Hu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xYe=Hu&&Hu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_Ye(e,t,r);return yYe(e,t),e};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.appInsightsClientFactory=void 0;var bYe=(_d(),Xn(Sxe)),EYe=SH(),TYe=async(t,e,r)=>{let n;try{let o=await Promise.resolve().then(()=>xYe((ebe(),Xn(Zxe))));if(n=new o.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),e){n.config.extensionConfig={};let s={alwaysUseXhrOverride:!0,httpXHROverride:e};n.config.extensionConfig[bYe.BreezeChannelIdentifier]=s}}catch(o){return Promise.reject(o)}return{logEvent:(o,s)=>{let a={...s?.properties,...s?.measurements};r?.length&&EYe.TelemetryUtil.applyReplacements(a,r),n?.track({name:o,data:a,baseType:"EventData",baseData:{name:o,properties:s?.properties,measurements:s?.measurements}})},flush:async()=>{n?.flush(!1)},dispose:async()=>new Promise(s=>{n?.unload(!0,()=>{s(),n=void 0},1e3)})}};Hu.appInsightsClientFactory=TYe});var obe=k(Id=>{"use strict";var SYe=Id&&Id.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CYe=Id&&Id.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pz=Id&&Id.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SYe(e,t,r);return CYe(e,t),e};Object.defineProperty(Id,"__esModule",{value:!0});var lz=pz(require("os")),rbe=pz(require("vscode")),IYe=pz(require("https")),wYe=xve(),AYe=bve(),nbe=SH(),RYe=S1e(),DYe=tbe();function ibe(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=IYe.request(e.urlString,n,o=>{o.on("data",function(s){r(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){r(0,{})})});i.write(e.data,o=>{o&&r(0,{})}),i.end()}catch{r(0,{})}}}}var uz=class extends wYe.BaseTelemetryReporter{constructor(e,r){let n=s=>(0,DYe.appInsightsClientFactory)(s,ibe(),r);nbe.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=s=>(0,RYe.oneDataSystemClientFactory)(s,rbe,ibe()));let i={release:lz.release(),platform:lz.platform(),architecture:lz.arch()},o=new AYe.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,rbe,{additionalCommonProperties:nbe.TelemetryUtil.getAdditionalCommonProperties(i)})}};Id.default=uz});var LYe={};Ri(LYe,{activate:()=>NYe,createExtensionContext:()=>abe,onDeactivate:()=>cbe});module.exports=Xn(LYe);var qx=Oe(jn());t$().install();var hr=require("vscode");var OF=require("events");var eL=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?YC.isErrorNoTelemetry(e)?new YC(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},hEe=new eL;function QC(t){gEe(t)||hEe.onUnexpectedError(t)}var tL="Canceled";function gEe(t){return t instanceof I0?!0:t instanceof Error&&t.name===tL&&t.message===tL}var I0=class extends Error{constructor(){super(tL),this.name=this.message}};function Gu(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}var YC=class t extends Error{constructor(r){super(r);this.name="CodeExpectedError"}static fromError(r){if(r instanceof t)return r;let n=new t;return n.message=r.message,n.stack=r.stack,n}static isErrorNoTelemetry(r){return r.name==="CodeExpectedError"}};function _Ee(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?i=s+1:o=s}return i-1}var r$=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=_Ee(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};function Zn(t){return t.filter(e=>!!e)}function i$(t,e){let r;if(typeof e=="number"){let n=e;r=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else r=Math.random;for(let n=t.length-1;n>0;n-=1){let i=Math.floor(r()*(n+1)),o=t[n];t[n]=t[i],t[i]=o}}var o$;(a=>{function t(l){return l<0}a.isLessThan=t;function e(l){return l<=0}a.isLessThanOrEqual=e;function r(l){return l>0}a.isGreaterThan=r;function n(l){return l===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(o$||={});function s$(t,e){return(r,n)=>e(t(r),t(n))}var a$=(t,e)=>t-e;var n$=class t{constructor(e){this.iterate=e}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||o$.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function c$(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}var rL=class{constructor(e,r){this.uri=e;this.value=r}};function yEe(t){return Array.isArray(t)}var xEe,Xi=class t{constructor(e,r){this[xEe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(yEe(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{this.defaultToKey=e=>e.toString()}set(e,r){return this.map.set(this.toKey(e),new rL(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(xEe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},bEe,XC=class{constructor(e,r){this[bEe]="ResourceSet";!e||typeof e=="function"?this._map=new Xi(e):(this._map=new Xi(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(bEe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var EEe,nL=class{constructor(){this[EEe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(EEe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},w0=class extends nL{constructor(r,n=1){super();this._limit=r,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,n=2){return super.get(r,n)}peek(r){return super.get(r,0)}set(r,n){return super.set(r,n,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};var JC=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};function iL(t){let e=this,r=!1,n;return function(){return r||(r=!0,n=t.apply(e,arguments)),n}}var oL;(v=>{function t(_){return _&&typeof _=="object"&&typeof _[Symbol.iterator]=="function"}v.is=t;let e=Object.freeze([]);function r(){return e}v.empty=r;function*n(_){yield _}v.single=n;function i(_){return t(_)?_:n(_)}v.wrap=i;function o(_){return _||e}v.from=o;function*s(_){for(let y=_.length-1;y>=0;y--)yield _[y]}v.reverse=s;function a(_){return!_||_[Symbol.iterator]().next().done===!0}v.isEmpty=a;function l(_){return _[Symbol.iterator]().next().value}v.first=l;function c(_,y){for(let b of _)if(y(b))return!0;return!1}v.some=c;function u(_,y){for(let b of _)if(y(b))return b}v.find=u;function*p(_,y){for(let b of _)y(b)&&(yield b)}v.filter=p;function*d(_,y){let b=0;for(let x of _)yield y(x,b++)}v.map=d;function*f(..._){for(let y of _)for(let b of y)yield b}v.concat=f;function m(_,y,b){let x=b;for(let P of _)x=y(x,P);return x}v.reduce=m;function*h(_,y,b=_.length){for(y<0&&(y+=_.length),b<0?b+=_.length:b>_.length&&(b=_.length);y<b;y++)yield _[y]}v.slice=h;function g(_,y=Number.POSITIVE_INFINITY){let b=[];if(y===0)return[b,_];let x=_[Symbol.iterator]();for(let P=0;P<y;P++){let U=x.next();if(U.done)return[b,v.empty()];b.push(U.value)}return[b,{[Symbol.iterator](){return x}}]}v.consume=g})(oL||={});var TEe=!1,A0=null,l$=class t{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,c=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(c.length===0)return;let u=new Set(c.map(p=>p.value));if(n=c.filter(p=>!(p.parent&&u.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function c(p,d){for(;p.length>0&&d.some(f=>typeof f=="string"?f===p[0]:p[0].match(f));)p.shift()}let u=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return c(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}let o=new JC;for(let l of n){let c=i(l);for(let u=0;u<=c.length;u++)o.add(c.slice(0,u).join(`
`),l)}n.sort(s$(l=>l.idx,a$));let s="",a=0;for(let l of n.slice(0,e)){a++;let c=i(l),u=[];for(let p=0;p<c.length;p++){let d=c[p];d=`(shared with ${o.get(c.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${d}`;let m=o.get(c.slice(0,p).join(`
`)),h=c$([...m].map(g=>i(g)[p]),g=>g);delete h[c[p]];for(let[g,v]of Object.entries(h))u.unshift(`    - stacktraces of ${v.length} other leaks continue with ${g}`);u.unshift(d)}s+=`


==================== Leaking disposable ${a}/${n.length}: ${l.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return n.length>e&&(s+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:s}}};function SEe(t){A0=t}if(TEe){let t="__is_disposable_tracked__";SEe(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ks.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ks.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function eI(t){return A0?.trackDisposable(t),t}function tI(t){A0?.markAsDisposed(t)}function sL(t,e){A0?.setParent(t,e)}function CEe(t,e){if(A0)for(let r of t)A0.setParent(r,e)}function aL(t){if(oL.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function u$(...t){let e=Ph(()=>aL(t));return CEe(t,e),e}function Ph(t){let e=eI({dispose:iL(()=>{tI(e),t()})});return e}var fl=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;eI(this)}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(tI(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{aL(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return sL(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),sL(e,null))}},Ks=class{constructor(){this._store=new fl;eI(this),sL(this._store,this)}static{this.None=Object.freeze({dispose(){}})}dispose(){tI(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var ZC=class{constructor(){this._store=new Map;this._isDisposed=!1;eI(this)}dispose(){tI(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{aL(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,r,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,r)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}keys(){return this._store.keys()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var Ys=p$(),cL=Ys.buildType!=="dev",rI=Ys.isPreRelease||!cL;function wEe(t){return typeof t=="string"}function d$(t){return Array.isArray(t)&&t.every(e=>wEe(e))}function lL(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var Dd="github.copilot",Ge=class{getConfigMixedWithDefaults(e){if(this.isDefaultSettingOverwritten(e)){let r=this.getConfig(e);return lL(r)&&lL(e.defaultValue)?{...e.defaultValue,...r}:r}return e.defaultValue}},nI;function REe(){if(!nI){nI=new Map;let t=Ys.contributes.configuration.properties;for(let e of Object.keys(t))typeof t[e].default<"u"&&nI.set(e,t[e].default)}return nI}function rr(t,e){let r=REe().get(`${Dd}.${t}`);if(typeof r<"u"&&e!==r)throw new Error(`The default value for setting ${t} is different in package.json and in code`);let n=t.indexOf("."),i=t.substring(0,n);if(i!=="editor"&&i!=="chat"&&i!=="advanced"&&i!=="notebook")throw new Error(`Unexpected setting section ${i} in setting ${t}`);let o=t.substring(n+1);return{id:t,firstPart:i,secondPart:o,defaultValue:e}}var Qe={EnableCodeActions:rr("editor.enableCodeActions",!0),LocaleOverride:rr("chat.localeOverride","auto"),WelcomeMessage:rr("chat.welcomeMessage","first"),AuthProvider:rr("advanced.authProvider","github"),NotebookIterativeImproving:rr("notebook.iterativeImproving",!1),DebugOverrideProxyUrl:rr("advanced.debug.overrideProxyUrl",""),DebugChatOverrideProxyUrl:rr("advanced.debug.chatOverrideProxyUrl",""),DebugTestOverrideProxyUrl:rr("advanced.debug.testOverrideProxyUrl",""),DebugOverrideEngine:rr("advanced.debug.overrideEngine",""),DebugOverrideChatEngine:rr("advanced.debug.overrideChatEngine","gpt-3.5-turbo"),DebugOverrideChatMaxTokenNum:rr("advanced.debug.overrideChatMaxTokenNum",0),DebugOverrideChatOffTopicModel:rr("advanced.debug.overrideChatOffTopicModel",""),DebugOverrideChatOffTopicModelTokenizer:rr("advanced.debug.overrideChatOffTopicModelTokenizer",""),DebugOverrideChatOffTopicModelThreshold:rr("advanced.debug.overrideChatOffTopicModelThreshold",0),DebugOverrideLogLevels:rr("advanced.debug.overrideLogLevels",{}),DebugFilterLogCategories:rr("advanced.debug.filterLogCategories",[]),DebugReportFeedback:rr("advanced.debug.reportFeedback",!1),DebugUseNodeFetcher:rr("advanced.debug.useNodeFetcher",!1),ConversationSlashCommandEnablements:rr("advanced.slashCommands",{"*":!1}),ConversationVariablesEnablements:rr("advanced.variables",{"*":rI}),ConversationAdditionalPromptContext:rr("advanced.conversationAdditionalPromptContext","firstTurn"),ConversationLoggingEnabled:rr("advanced.conversationLoggingEnabled",!1),ConversationIntentDetection:rr("advanced.conversationIntentDetection",!1),KerberosServicePrincipal:rr("advanced.kerberosServicePrincipal",""),AgentsEndpointUrl:rr("advanced.agentsEndpointUrl","https://api.githubcopilot.com"),EnableRemoteAgents:rr("advanced.enableRemoteAgents",!1),EnableRemoteSkills:rr("advanced.enableRemoteSkills",!1),ExplainIntentRefer:rr("advanced.explain.refer",!0),FixUseGPT4InInlineChat:rr("advanced.fix.useGPT4InInlineChat",!1),WorkspaceNewFlowEnabled:rr("advanced.workspace.useNewFlow",!0),WorkspaceCodeSearchEnabled:rr("advanced.workspace.codeSearchEnabled",void 0),WorkspaceUseAdaEnabled:rr("advanced.workspace.useAda",void 0),WorkspaceExperimentalFileLimit:rr("advanced.workspace.experimental.fileLimit",0),InlineChatStreaming:rr("advanced.inlineChatStreaming","progressive")};var Le=class t{constructor(e,r){this.logTargets=e;this.configurationService=r;this.loggers=new Map;this.promptResponseLoggers=new Map;this.myLogTarget={logIt:(n,i,...o)=>{this.logTargets.forEach(s=>s.logIt(n,i,...o))}}}get defaultLogger(){return this.getLogger("extension")}getLogger(e){return t._getLogger(e,this.loggers,r=>new sI(r,this.myLogTarget,this.configurationService))}getPromptResponseLogger(e){return t._getLogger(e,this.promptResponseLoggers,r=>new uL(r,this.myLogTarget,this.configurationService))}registerAppender(e){return this.logTargets.push(e),Ph(()=>{let r=this.logTargets.indexOf(e);r!==-1&&this.logTargets.splice(r,1)})}static _getLogger(e,r,n){let i=r.get(e);return typeof i>"u"&&(i=n(e),r.set(e,i)),i}},Wx=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Wx||{}),iI=class{logIt(e,r,...n){e===3?console.error(r,...n):e===2&&console.warn(r,...n)}},oI=class{constructor(e){this.output=e}logIt(e,r,...n){this.output.appendLine(`${r} ${n.map(DEe)}`)}},sI=class{constructor(e,r,n){this.category=e;this.target=r;this.configurationService=n}stringToLevel(e){return Wx[e]}log(e,...r){if(!this.shouldLog(e,this.category))return;let n=`[${this.category}]`;this.target.logIt(e,n,...r)}shouldLog(e,r){let n=this.configurationService.getConfig(Qe.DebugFilterLogCategories);if(n.length>0&&!n.includes(r))return!1;let i=this.configurationService.getConfig(Qe.DebugOverrideLogLevels),o=this.stringToLevel(i[this.category])??this.stringToLevel(i["*"])??1;return e>=o}debug(...e){this.log(0,...e)}info(...e){this.log(1,...e)}warn(...e){this.log(2,...e)}error(...e){this.log(3,...e)}exception(e,r){let n=r?`${r}: `:"",i=e instanceof Error?e:new Error("Non-error thrown: "+e);this.log(3,`${n}${i.stack}`)}},uL=class extends sI{logPrompt(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;super.info(r+e.map(n=>`${n.role.toUpperCase()}:
${n.content}`).join(r)+r)}logResponse(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;if(typeof e!="string"){if(e.type!=="success"){super.info(`${r}RESPONSE FAILED DUE TO ${e.type}${r}`);return}Array.isArray(e.value)?e.value.length===1?e=e.value[0]:e=`${e.value.map(n=>`<<${n}>>`).join(", ")}`:e=e.value}super.info(`${r}ASSISTANT:
${e}${r}`)}debug(e,...r){this.conversationLoggingEnabled()&&super.debug(e,...r)}info(e,...r){this.conversationLoggingEnabled()&&super.info(e,...r)}warn(e,...r){this.conversationLoggingEnabled()&&super.warn(e,...r)}error(e,...r){this.conversationLoggingEnabled()&&super.error(e,...r)}conversationLoggingEnabled(){return this.configurationService.getConfig(Qe.ConversationLoggingEnabled)}};function DEe(t){switch(typeof t){case"object":return JSON.stringify(t);default:return String(t)}}var jt=class{isProduction(){return cL}isPreRelease(){return rI}getBuildType(){return Ys.buildType}getVersion(){return Ys.version}getBuild(){return Ys.build}getName(){return Ys.name}getEditorVersionHeaders(){return{"Editor-Version":this.getEditorInfo().format(),"Editor-Plugin-Version":this.getEditorPluginInfo().format()}}},Kx=class{constructor(e,r){this.name=e;this.version=r}format(){return`${this.name}/${this.version}`}};var jEe=I$(),Pd=class{},pI=class{async open(e){await jEe(e)}};var Nh=class{};var GEe=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],kh=class{constructor(){this.notifiedErrorCodes=[]}async notifyUser(e,r){GEe.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.displayCertificateErrorNotification(e,r),this.notifiedErrorCodes.push(r.code))}displayCertificateErrorNotification(e,r){let n="https://aka.ms/copilot-ssc",i="Your current Copilot license doesn't support proxy connections with self-signed certificates.";e.get(Le).getLogger("certificates").error(`${i} Please visit ${n} to learn more. Original cause: ${JSON.stringify(r)}`),this.showCertificateWarningMessage(e,i,n)}showCertificateWarningMessage(e,r,n){let i={title:"Learn more"};e.get(Nh).showWarningMessage(r,i).then(o=>{o?.title===i.title&&e.get(Pd).open(n)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};function VEe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}function w$(t,e,...r){return VEe(e,r)}var D0="en",mI=!1,hI=!1,Yx=!1,$Ee=!1,R$=!1,yL=!1,WEe=!1,KEe=!1,YEe=!1,QEe=!1,dI,fI=D0,A$=D0,XEe,Vu,zu=globalThis,Qs;typeof zu.vscode<"u"&&typeof zu.vscode.process<"u"?Qs=zu.vscode.process:typeof process<"u"&&(Qs=process);var D$=typeof Qs?.versions?.electron=="string",JEe=D$&&Qs?.type==="renderer";if(typeof navigator=="object"&&!JEe)Vu=navigator.userAgent,mI=Vu.indexOf("Windows")>=0,hI=Vu.indexOf("Macintosh")>=0,KEe=(Vu.indexOf("Macintosh")>=0||Vu.indexOf("iPad")>=0||Vu.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Yx=Vu.indexOf("Linux")>=0,QEe=Vu?.indexOf("Mobi")>=0,yL=!0,dI=(w$({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),void 0)||D0,fI=dI,A$=navigator.language;else if(typeof Qs=="object"){mI=Qs.platform==="win32",hI=Qs.platform==="darwin",Yx=Qs.platform==="linux",$Ee=Yx&&!!Qs.env.SNAP&&!!Qs.env.SNAP_REVISION,WEe=D$,YEe=!!Qs.env.CI||!!Qs.env.BUILD_ARTIFACTSTAGINGDIRECTORY,dI=D0,fI=D0;let t=Qs.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];dI=e.locale,A$=e.osLocale,fI=r||D0,XEe=e._translationsConfigFile}catch{}R$=!0}else console.error("Unable to resolve platform.");var _L=0;hI?_L=1:mI?_L=3:Yx&&(_L=2);var hl=mI,P$=hI,N$=Yx;var k$=R$;var O$=yL,ZEe=yL&&typeof zu.importScripts=="function",L$=ZEe?zu.origin:void 0;var ml=Vu,Nd=fI,eTe;(n=>{function t(){return Nd}n.value=t;function e(){return Nd.length===2?Nd==="en":Nd.length>=3?Nd[0]==="e"&&Nd[1]==="n"&&Nd[2]==="-":!1}n.isDefaultVariant=e;function r(){return Nd==="en"}n.isDefault=r})(eTe||={});var tTe=typeof zu.postMessage=="function"&&!zu.importScripts,M$=(()=>{if(tTe){let t=[];zu.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),zu.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var rTe=!!(ml&&ml.indexOf("Chrome")>=0),MQe=!!(ml&&ml.indexOf("Firefox")>=0),FQe=!!(!rTe&&ml&&ml.indexOf("Safari")>=0),UQe=!!(ml&&ml.indexOf("Edg/")>=0),BQe=!!(ml&&ml.indexOf("Android")>=0);var Oh,xL=globalThis.vscode;if(typeof xL<"u"&&typeof xL.process<"u"){let t=xL.process;Oh={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?Oh={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Oh={get platform(){return hl?"win32":P$?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Qx=Oh.cwd,F$=Oh.env,U$=Oh.platform,jQe=Oh.arch;var oTe=65,sTe=97,aTe=90,cTe=122,Ld=46,Di=47,hs=92,kd=58,lTe=63,gI=class extends Error{constructor(r,n,i){let o;typeof n=="string"&&n.indexOf("not ")===0?(o="must not be",n=n.replace(/^not /,"")):o="must be";let s=r.indexOf(".")!==-1?"property":"argument",a=`The "${r}" ${s} ${o} of type ${n}`;a+=`. Received type ${typeof i}`;super(a);this.code="ERR_INVALID_ARG_TYPE"}};function uTe(t,e){if(t===null||typeof t!="object")throw new gI(e,"Object",t)}function Dn(t,e){if(typeof t!="string")throw new gI(e,"string",t)}var gs=U$==="win32";function kt(t){return t===Di||t===hs}function bL(t){return t===Di}function Od(t){return t>=oTe&&t<=aTe||t>=sTe&&t<=cTe}function vI(t,e,r,n){let i="",o=0,s=-1,a=0,l=0;for(let c=0;c<=t.length;++c){if(c<t.length)l=t.charCodeAt(c);else{if(n(l))break;l=Di}if(n(l)){if(!(s===c-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Ld||i.charCodeAt(i.length-2)!==Ld){if(i.length>2){let u=i.lastIndexOf(r);u===-1?(i="",o=0):(i=i.slice(0,u),o=i.length-1-i.lastIndexOf(r)),s=c,a=0;continue}else if(i.length!==0){i="",o=0,s=c,a=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(s+1,c)}`:i=t.slice(s+1,c),o=c-s-1;s=c,a=0}else l===Ld&&a!==-1?++a:a=-1}return i}function B$(t,e){uTe(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}var Pn={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Dn(o,"path"),o.length===0)continue}else e.length===0?o=Qx():(o=F$[`=${e}`]||Qx(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===hs)&&(o=`${e}\\`));let s=o.length,a=0,l="",c=!1,u=o.charCodeAt(0);if(s===1)kt(u)&&(a=1,c=!0);else if(kt(u))if(c=!0,kt(o.charCodeAt(1))){let p=2,d=p;for(;p<s&&!kt(o.charCodeAt(p));)p++;if(p<s&&p!==d){let f=o.slice(d,p);for(d=p;p<s&&kt(o.charCodeAt(p));)p++;if(p<s&&p!==d){for(d=p;p<s&&!kt(o.charCodeAt(p));)p++;(p===s||p!==d)&&(l=`\\\\${f}\\${o.slice(d,p)}`,a=p)}}}else a=1;else Od(u)&&o.charCodeAt(1)===kd&&(l=o.slice(0,2),a=2,s>2&&kt(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(a)}\\${r}`,n=c,c&&e.length>0)break}return r=vI(r,!n,"\\",kt),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Dn(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return bL(o)?"\\":t;if(kt(o))if(i=!0,kt(t.charCodeAt(1))){let a=2,l=a;for(;a<e&&!kt(t.charCodeAt(a));)a++;if(a<e&&a!==l){let c=t.slice(l,a);for(l=a;a<e&&kt(t.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!kt(t.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${t.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${t.slice(l,a)}`,r=a)}}}else r=1;else Od(o)&&t.charCodeAt(1)===kd&&(n=t.slice(0,2),r=2,e>2&&kt(t.charCodeAt(2))&&(i=!0,r=3));let s=r<e?vI(t.slice(r),!i,"\\",kt):"";return s.length===0&&!i&&(s="."),s.length>0&&kt(t.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(t){Dn(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return kt(r)||e>2&&Od(r)&&t.charCodeAt(1)===kd&&kt(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let s=t[o];Dn(s,"path"),s.length>0&&(e===void 0?e=r=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&kt(r.charCodeAt(0))){++i;let o=r.length;o>1&&kt(r.charCodeAt(1))&&(++i,o>2&&(kt(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&kt(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Pn.normalize(e)},relative(t,e){if(Dn(t,"from"),Dn(e,"to"),t===e)return"";let r=Pn.resolve(t),n=Pn.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===hs;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===hs;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===hs;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===hs;)l--;let c=l-a,u=s<c?s:c,p=-1,d=0;for(;d<u;d++){let m=t.charCodeAt(i+d);if(m!==e.charCodeAt(a+d))break;m===hs&&(p=d)}if(d!==u){if(p===-1)return n}else{if(c>u){if(e.charCodeAt(a+d)===hs)return n.slice(a+d+1);if(d===2)return n.slice(a+d)}s>u&&(t.charCodeAt(i+d)===hs?p=d:d===2&&(p=3)),p===-1&&(p=0)}let f="";for(d=i+p+1;d<=o;++d)(d===o||t.charCodeAt(d)===hs)&&(f+=f.length===0?"..":"\\..");return a+=p,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===hs&&++a,n.slice(a,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Pn.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===hs){if(e.charCodeAt(1)===hs){let r=e.charCodeAt(2);if(r!==lTe&&r!==Ld)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Od(e.charCodeAt(0))&&e.charCodeAt(1)===kd&&e.charCodeAt(2)===hs)return`\\\\?\\${e}`;return t},dirname(t){Dn(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return kt(i)?t:".";if(kt(i)){if(r=n=1,kt(t.charCodeAt(1))){let a=2,l=a;for(;a<e&&!kt(t.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&kt(t.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!kt(t.charCodeAt(a));)a++;if(a===e)return t;a!==l&&(r=n=a+1)}}}}else Od(i)&&t.charCodeAt(1)===kd&&(r=e>2&&kt(t.charCodeAt(2))?3:2,n=r);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(kt(t.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Dn(e,"ext"),Dn(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Od(t.charCodeAt(0))&&t.charCodeAt(1)===kd&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(kt(l)){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(kt(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Dn(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,s=0;t.length>=2&&t.charCodeAt(1)===kd&&Od(t.charCodeAt(0))&&(e=n=2);for(let a=t.length-1;a>=e;--a){let l=t.charCodeAt(a);if(kt(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===Ld?r===-1?r=a:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||i===-1||s===0||s===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:B$.bind(null,"\\"),parse(t){Dn(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return kt(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(kt(i)){if(n=1,kt(t.charCodeAt(1))){let p=2,d=p;for(;p<r&&!kt(t.charCodeAt(p));)p++;if(p<r&&p!==d){for(d=p;p<r&&kt(t.charCodeAt(p));)p++;if(p<r&&p!==d){for(d=p;p<r&&!kt(t.charCodeAt(p));)p++;p===r?n=p:p!==d&&(n=p+1)}}}}else if(Od(i)&&t.charCodeAt(1)===kd){if(r<=2)return e.root=e.dir=t,e;if(n=2,kt(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,s=n,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){if(i=t.charCodeAt(c),kt(i)){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===Ld?o===-1?o=c:u!==1&&(u=1):o!==-1&&(u=-1)}return a!==-1&&(o===-1||u===0||u===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(s,a):(e.name=t.slice(s,o),e.base=t.slice(s,a),e.ext=t.slice(o,a))),s>0&&s!==n?e.dir=t.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},pTe=(()=>{if(gs){let t=/\\/g;return()=>{let e=Qx().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>Qx()})(),gr={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:pTe();Dn(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Di)}return e=vI(e,!r,"/",bL),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Dn(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Di,r=t.charCodeAt(t.length-1)===Di;return t=vI(t,!e,"/",bL),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Dn(t,"path"),t.length>0&&t.charCodeAt(0)===Di},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Dn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":gr.normalize(e)},relative(t,e){if(Dn(t,"from"),Dn(e,"to"),t===e||(t=gr.resolve(t),e=gr.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,s=e.length-o,a=i<s?i:s,l=-1,c=0;for(;c<a;c++){let p=t.charCodeAt(r+c);if(p!==e.charCodeAt(o+c))break;p===Di&&(l=c)}if(c===a)if(s>a){if(e.charCodeAt(o+c)===Di)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else i>a&&(t.charCodeAt(r+c)===Di?l=c:c===0&&(l=0));let u="";for(c=r+l+1;c<=n;++c)(c===n||t.charCodeAt(c)===Di)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(Dn(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Di,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Di){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Dn(e,"ext"),Dn(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Di){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Di){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Dn(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let s=t.length-1;s>=0;--s){let a=t.charCodeAt(s);if(a===Di){if(!i){r=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===Ld?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:B$.bind(null,"/"),parse(t){Dn(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Di,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,l=t.length-1,c=0;for(;l>=n;--l){let u=t.charCodeAt(l);if(u===Di){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),u===Ld?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(s!==-1){let u=o===0&&r?1:o;i===-1||c===0||c===1&&i===s-1&&i===o+1?e.base=e.name=t.slice(u,s):(e.name=t.slice(u,i),e.base=t.slice(u,s),e.ext=t.slice(i,s))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};gr.win32=Pn.win32=Pn;gr.posix=Pn.posix=gr;var EL=gs?Pn.normalize:gr.normalize,dTe=gs?Pn.isAbsolute:gr.isAbsolute,fTe=gs?Pn.join:gr.join,q$=gs?Pn.resolve:gr.resolve,H$=gs?Pn.relative:gr.relative,j$=gs?Pn.dirname:gr.dirname,GQe=gs?Pn.basename:gr.basename,VQe=gs?Pn.extname:gr.extname,zQe=gs?Pn.format:gr.format,$Qe=gs?Pn.parse:gr.parse,WQe=gs?Pn.toNamespacedPath:gr.toNamespacedPath,P0=gs?Pn.sep:gr.sep,KQe=gs?Pn.delimiter:gr.delimiter;var mTe=/^\w[\w\d+.-]*$/,hTe=/^\//,gTe=/^\/\//;function vTe(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!mTe.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!hTe.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(gTe.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function _Te(t,e){return!t&&!e?"file":t}function yTe(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==bc&&(e=bc+e):e=bc;break}return e}var Or="",bc="/",xTe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,wt=class t{static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Or,this.authority=e.authority||Or,this.path=e.path||Or,this.query=e.query||Or,this.fragment=e.fragment||Or):(this.scheme=_Te(e,s),this.authority=r||Or,this.path=yTe(this.scheme,n||Or),this.query=i||Or,this.fragment=o||Or,vTe(this,s))}get fsPath(){return Xx(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:s}=e;return r===void 0?r=this.scheme:r===null&&(r=Or),n===void 0?n=this.authority:n===null&&(n=Or),i===void 0?i=this.path:i===null&&(i=Or),o===void 0?o=this.query:o===null&&(o=Or),s===void 0?s=this.fragment:s===null&&(s=Or),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new Md(r,n,i,o,s)}static parse(e,r=!1){let n=xTe.exec(e);return n?new Md(n[2]||Or,_I(n[4]||Or),_I(n[5]||Or),_I(n[7]||Or),_I(n[9]||Or),r):new Md(Or,Or,Or,Or,Or)}static file(e){let r=Or;if(hl&&(e=e.replace(/\\/g,bc)),e[0]===bc&&e[1]===bc){let n=e.indexOf(bc,2);n===-1?(r=e.substring(2),e=bc):(r=e.substring(2,n),e=e.substring(n)||bc)}return new Md("file",r,e,Or,Or)}static from(e,r){return new Md(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return hl&&e.scheme==="file"?n=t.file(Pn.join(Xx(e,!0),...r)).path:n=gr.join(e.path,...r),e.with({path:n})}toString(e=!1){return TL(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Md(e);return r._formatted=e.external??null,r._fsPath=e._sep===$$?e.fsPath??null:null,r}}else return e}};var $$=hl?1:void 0,Md=class extends wt{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Xx(this,!1)),this._fsPath}toString(r=!1){return r?TL(this,!0):(this._formatted||(this._formatted=TL(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=$$),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},W$={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function V$(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||r&&s===91||r&&s===93||r&&s===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let a=W$[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}function bTe(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=W$[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function Xx(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,hl&&(r=r.replace(/\//g,"\\")),r}function TL(t,e){let r=e?bTe:V$,n="",{scheme:i,authority:o,path:s,query:a,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=bc,n+=bc),o){let c=o.indexOf("@");if(c!==-1){let u=o.substr(0,c);o=o.substr(c+1),c=u.lastIndexOf(":"),c===-1?n+=r(u,!1,!1):(n+=r(u.substr(0,c),!1,!1),n+=":",n+=r(u.substr(c+1),!1,!0)),n+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,c),!1,!0),n+=o.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let c=s.charCodeAt(1);c>=65&&c<=90&&(s=`/${String.fromCharCode(c+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let c=s.charCodeAt(0);c>=65&&c<=90&&(s=`${String.fromCharCode(c+32)}:${s.substr(2)}`)}n+=r(s,!0,!1)}return a&&(n+="?",n+=r(a,!1,!1)),l&&(n+="#",n+=e?l:V$(l,!1,!1)),n}function K$(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+K$(t.substr(3)):t}}var z$=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function _I(t){return t.match(z$)?t.replace(z$,e=>K$(e)):t}var Y$="github.com",ETe=`https://${Y$}`,$u=class{},yI=class extends $u{constructor(r=ETe){super();this.recalculateUrls(r)}isGitHubEnterprise(){return this.isEnterprise}getTokenUrl(r){return r.devOverride?.copilotTokenUrl??this.tokenUrl}getNotificationUrl(r){return r.devOverride?.notificationUrl??this.notificationUrl}updateBaseUrl(r,n){if(!n)return;let i=this.baseUri;this.recalculateUrls(n),i.toString()!==this.baseUri.toString()&&r.get(Lt).resetCopilotToken(r)}recalculateUrls(r){this.baseUri=wt.parse(r);let n=wt.parse(`${this.baseUri.scheme}://api.${this.baseUri.authority}`);this.isEnterprise=this.baseUri.authority!==Y$,this.tokenUrl=wt.joinPath(n,"/copilot_internal/v2/token").toString(),this.notificationUrl=wt.joinPath(n,"/copilot_internal/notification").toString()}};var hae=Oe(require("util"));var Lh=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};var mae=require("crypto");function Q$(t){return t.replace(/([\s|(]|file:\/\/)(\/[^\s]+)/g,"$1[redacted]").replace(/([\s|(]|file:\/\/)([a-zA-Z]:[(\\|/){1,2}][^\s]+)/gi,"$1[redacted]").replace(/([\s|(]|file:\/\/)(\\[^\s]+)/gi,"$1[redacted]")}var TTe=require("events"),Ho=class extends TTe{constructor(){super()}emit(e,r,n){return super.emit(e,r,n)}};var Wu=class t{constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return e.get(dt).sendExpProblemTelemetry({reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};var gl=class{},xI=class extends gl{async fetchExperiments(e,r){let n=e.get(Nr),i;try{i=await n.fetch("https://default.exp-tas.com/vscode/ab",{method:"GET",headers:r})}catch(l){return Wu.createFallbackConfig(e,`Error fetching ExP config: ${l}`)}if(!i.ok)return Wu.createFallbackConfig(e,`ExP responded with ${i.status}`);let o=await i.json(),s=o.Configs.find(l=>l.Id==="vscode")??{Id:"vscode",Parameters:{}},a=Object.entries(s.Parameters).map(([l,c])=>l+(c?"":"cf"));return new Wu(s.Parameters,o.AssignmentContext,a.join(";"))}},bI=class extends gl{async fetchExperiments(e,r){return Wu.createEmptyConfig()}};var CTe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},EI=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=CTe[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};var TI=class{constructor(e){this.prefix=e}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},CL=class extends TI{getValue(e){return this.prefix}getUpcomingValues(e){return[]}},X$=t=>new CL(t),SI=class extends TI{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let s of i)for(let a of o)n.push(this.prefix+s+a);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets===void 0?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs===void 0?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var J$="X-Copilot-ClientTimeBucket",IL=class{now(){return new Date}},CI=class{constructor(e,r=new IL){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=X$(e)}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new SI(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(J$,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(J$,o))}}};var wL=class{constructor(e){this.accessor=e;this.cache=new w0(200)}async fetchExpConfig(e){let r=this.cache.get(e.stringify());return r||(r=new AL(()=>this.accessor.get(gl).fetchExperiments(this.accessor,e.toHeaders()),1e3*60*60),this.cache.set(e.stringify(),r)),r.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},AL=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}},jo=class t{constructor(e){this.accessor=e;this.staticFilters={};this.dynamicFilters={};this.upcomingDynamicFilters={};this.assignments=new wL(this.accessor)}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}getDynamicFilterValues(){let e={};for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}async getAssignment(e,r={},n){let i=this.getGranularityDirectory(),o=this.makeFilterSettings(r),s=i.extendFilters(o),a=await this.getExpConfig(s.newFilterSettings);i.update(o,+(a.variables.copilotbycallbuckets??NaN),+(a.variables.copilottimeperiodsizeinh??NaN));let l=i.extendFilters(o),c=l.newFilterSettings,u=await this.getExpConfig(c),p=new Promise(d=>setTimeout(d,t.upcomingDynamicFilterCheckDelayMs));for(let d of l.otherFilterSettingsToPrefetch)p=p.then(async()=>{await new Promise(f=>setTimeout(f,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(d)});return this.prepareForUpcomingFilters(c),n&&(n.filtersAndExp={exp:u,filters:c}),u.variables[e]}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.accessor.get(jt).machineId;this.granularityDirectory=new CI(e)}return this.granularityDirectory}makeFilterSettings(e){return new EI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e){try{return this.assignments.fetchExpConfig(e)}catch(r){return Wu.createFallbackConfig(this.accessor,`Error fetching ExP config: ${r}`)}}async prepareForUpcomingFilters(e){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,n]of Object.entries(this.upcomingDynamicFilters))await new Promise(i=>setTimeout(i,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,n()))}async fastCancellation(){return await this.getAssignment("copilotoverridefastcancellation")??!0}async chatExpModel(){return await this.getAssignment("copilotchatexpmodel")??""}async chatMaxNumTokens(){return await this.getAssignment("copilotchatmaxnumtokens")??0}async chatOffTopicModel(){return await this.getAssignment("copilotchatofftopicmodel")??""}async chatOffTopicModelTokenizer(){return await this.getAssignment("copilotchatofftopicmodeltokenizer")??""}async chatOffTopicModelThreshold(){return await this.getAssignment("copilotchatofftopicmodelthreshold")??0}async addExpAndFilterToTelemetry(e){let r=this.makeFilterSettings({});e.filtersAndExp={filters:r,exp:await this.getExpConfig(r)}}};function Go(t){return{name:t,_serviceIdentifierBrand:!0}}var Jx=class{constructor(e,r){this.constructionStack=[];this.instances=new Map;this.isSealed=!1;this.base=r;let n=new Error().stack?.split(`
`);if(n&&this.constructionStack.push(...n.slice(1)),e)for(let[i,o]of e)this.instances.set(i,o)}get(e){let r=this.tryGet(e);if(r)return r;throw new Error(`No instance of ${eW(e)} has been registered.
${this}`)}safeGet(e){return this.tryGet(e)}tryGet(e){let r=this.instances.get(e);if(r)return r;if(this.base)return this.base.tryGet(e)}define(e,r){if(this.isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");let n=this.instances.get(e);return this.instances.set(e,r),n}defineIfNotDefined(e,r){if(!(typeof this.tryGet(e)<"u"))return this.define(e,r())}seal(){this.isSealed=!0}toString(){let e=`    Accessor created at:
`;for(let r of this.constructionStack||[])e+=`    ${r}
`;return e+=this.base?.toString()??"",e}get debug(){let e={};for(let[r,n]of this.instances)e[eW(r)]=n;return e}};function eW(t){return t.name}var Ku=class t{constructor(e){this.flags=e}static fromEnvironment(e){return new t({debug:ITe(process.argv,process.env),telemetryLogging:wTe(process.env),testMode:e,recordInput:ATe(process.argv,process.env)})}};function RL(t){return t.get(Ku).flags.testMode}function tW(t){return RL(t)}function ITe(t,e){return t.includes("--debug")||DL(e,"GITHUB_COPILOT_DEBUG")}function wTe(t){return DL(t,"COPILOT_LOG_TELEMETRY")}function ATe(t,e){return t.includes("--record")||DL(e,"GITHUB_COPILOT_RECORD")}function DL(t,e){if(e in t){let r=t[e];return r==="1"||r?.toLowerCase()==="true"}return!1}var cae=Oe(aae()),L2=Oe(require("os"));var AE=class{constructor(e,r,n){this.namespace=r;this.client=h8e(e,n),lae(e,this.client)}separateData(e){let r={},n={};for(let[i,o]of Object.entries(e))typeof o=="number"?n[i]=o:r[i]=o;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackEvent({name:this.qualifyEventName(e),properties:n,measurements:i})}sendErrorData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:i})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function h8e(t,e){let r=new cae.TelemetryClient(e);return r.config.enableAutoCollectRequests=!1,r.config.enableAutoCollectPerformance=!1,r.config.enableAutoCollectExceptions=!1,r.config.enableAutoCollectConsole=!1,r.config.enableAutoCollectDependencies=!1,r.config.noDiagnosticChannel=!0,lae(t,r),r}function lae(t,e){e.commonProperties=g8e(e.commonProperties,t);let r=t.get(jt);e.context.tags[e.context.keys.sessionId]=r.sessionId,e.context.tags[e.context.keys.userId]=r.machineId,e.context.tags[e.context.keys.cloudRoleInstance]="REDACTED",e.config.endpointUrl=t.get(ff).getUrl()}function g8e(t,e){t=t||{},t.common_os=L2.platform(),t.common_platformversion=L2.release();let r=e.get(jt);return t.common_vscodemachineid=r.machineId,t.common_vscodesessionid=r.sessionId,t.common_uikind="desktop",t.common_remotename="none",t.common_isnewappinstall="",t}var uae="7d7048df-6dd0-4048-bb23-b716c1461f8f",pae="3fdd7f28-937a-48c8-9a21-ba337db23bd1";async function M2(t,e,r){let n=t.get(dt);if(await n.deactivate(),!r)return;let i=new AE(t,e,uae),o=new AE(t,e,pae);return n.setReporter(i),n.setSecureReporter(o),{dispose(){n.setReporter(void 0),n.setSecureReporter(void 0),i.flush(),o.flush()}}}var jpt=fae();var B2=class{sendEventData(e,r){throw new Error("Telemetry disabled")}sendErrorData(e,r){throw new Error("Telemetry disabled")}flush(){return Promise.resolve()}};var RE=class{constructor(e){this.accessor=e;this.reporters=new kF;this.openPromises=void 0}withPromise(e){return this.openPromises?(this.openPromises.add(e),e.then(r=>{this.openPromises?.delete(e)})):e}async enablePromiseTracking(e){e?this.openPromises||(this.openPromises=new Set):await this.awaitOpenPromises(void 0)}setSecureReporter(e){this.reporters.setSecureReporter(e)}setReporter(e){this.reporters.setReporter(e)}async sendTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!1))}async sendRestrictedTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!0))}async sendErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!1))}async sendRestrictedErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!0))}async sendExpProblemTelemetry(e){await this.withPromise(this._sendExpProblemTelemetry(e))}async sendExceptionTelemetry(e,r){await this.withPromise(this._sendExceptionTelemetry(e,r))}async deactivate(){await this.awaitOpenPromises(new Set),await this.reporters.deactivate()}async awaitOpenPromises(e){if(this.openPromises){let r=[...this.openPromises.values()];this.openPromises=e,await Promise.all(r)}}async _sendTelemetry(e,r,n){if(n&&!q2(this.accessor))return;let i=r||Er.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor,n??!1,"IncludeExp"),this.sendTelemetryEvent(n??!1,e,i)}async _sendExpProblemTelemetry(e){let r="expProblem",n=Er.createAndMarkAsIssued(e,{});await n.makeReadyForSending(this.accessor,!1,"SkipExp"),this.sendTelemetryEvent(!1,r,n)}async _sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=q2(this.accessor),o=Er.createAndMarkAsIssued({origin:Q$(r),reason:i?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await o.makeReadyForSending(this.accessor,!1,"IncludeExp"),this.sendTelemetryEvent(!1,"exception",o),!i)return;let s=Er.createAndMarkAsIssued({origin:r});await s.makeReadyForSending(this.accessor,!0,"IncludeExp"),this.sendTelemetryException(!0,n,s)}async _sendErrorTelemetry(e,r,n){if(n&&!q2(this.accessor))return;let i=r||Er.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor,n??!1,"IncludeExp"),this.sendTelemetryErrorEvent(n??!1,e,i)}sendTelemetryEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Er.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}sendTelemetryException(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Er.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendErrorData(r,{...o,...n.measurements})}}sendTelemetryErrorEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Er.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}},kF=class{getReporter(e,r){if(!r)return this.reporter;if(q2(e))return this.reporterSecure;if(tW(e))return new B2}setReporter(e){this.reporter=e}setSecureReporter(e){this.reporterSecure=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.flush?this.reporter.flush():void 0,this.reporter=void 0);let r=Promise.resolve();this.reporterSecure&&(r=this.reporterSecure.flush?this.reporterSecure.flush():void 0,this.reporterSecure=void 0),await Promise.all([e,r])}},Ig=class{constructor(e,r,n){this.trackingId=r,this.optedIn=n??!1,this.setupUpdateOnToken(e)}setupUpdateOnToken(e){e.get(Ho).on("onCopilotToken",r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("tid"),o=r.organization_list;i!==void 0&&(this.trackingId=i,this.organizationsList=o?.toString(),this.optedIn=n)})}},Er=class t{static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},mf())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o.filtersAndExp=this.filtersAndExp,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=mf())}async extendWithExpTelemetry(e){this.filtersAndExp||await e.get(jo).addExpAndFilterToTelemetry(this),this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}extendWithEditorAgnosticFields(e){let r=e.get(jt);this.properties.editor_version=r.getEditorInfo().format(),this.properties.editor_plugin_version=r.getEditorPluginInfo().format(),this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${r.getVersion()}`,this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=r.getEditorInfo().format()}extendWithConfigProperties(e){let r=e.get(jt),n=e.get(Ge).dumpConfig();n["copilot.build"]=r.getBuild(),n["copilot.buildType"]=r.getBuildType();let i=e.get(Ig);i.trackingId&&(n["copilot.trackingId"]=i.trackingId),i.organizationsList&&(n.organizations_list=i.organizationsList),this.properties={...this.properties,...n}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=mf()-this.issuedTime;if(this.measurements.timeSinceIssuedMs=e,this.displayedTime!==void 0){let r=mf()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}async makeReadyForSending(e,r,n){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateTimeSinceIssuedAndDisplayed();for(let i in this.properties)this.properties[i]===void 0&&delete this.properties[i];b8e(e,this.properties)}};function mf(){return new Date().getTime()}var x8e="https://copilot-telemetry.githubusercontent.com/telemetry",ff=class{constructor(e=x8e){this.url=e}getUrl(){return this.url}};function q2(t){return t.get(Ig).optedIn}function b8e(t,e){e.unique_id=(0,mae.randomUUID)();let r=t.get(jt);e.common_extname=r.getEditorPluginInfo().name,e.common_extversion=r.getEditorPluginInfo().version,e.common_vscodeversion=r.getEditorInfo().format()}var wr=Go("IMSTelemetryService"),dt=Go("IGHTelemetryService");var Nr=class{set rejectUnauthorized(e){this._rejectUnauthorized=e}get rejectUnauthorized(){return this._rejectUnauthorized}},ty=class{constructor(e,r,n,i,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getJson=o;this.getBody=s;this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}},E8e=30*1e3;function hf(t,e,r,n,i,o,s){let a=t.get(jt),l={Authorization:hae.format("Bearer %s",r),"X-Request-Id":i,"VScode-SessionId":a.sessionId,"VScode-MachineId":a.machineId,...a.getEditorVersionHeaders(),...e.getExtraHeaders?e.getExtraHeaders():{}};e.interceptBody&&e.interceptBody(o),t.get(Lh).contributeHeaders(l),n&&(l["OpenAI-Intent"]=n);let c={method:"POST",headers:l,json:o,timeout:E8e},u=t.get(dt),p=t.get(Nr);if(s){let f=p.makeAbortController();s.onCancellationRequested(()=>{u.sendTelemetry("networking.cancelRequest",Er.createAndMarkAsIssued({headerRequestId:i})),f.abort()}),c.signal=f.signal}return p.fetch(e.url,c).catch(f=>{if(f.code==="ECONNRESET"||f.code==="ETIMEDOUT"||f.code==="ERR_HTTP2_INVALID_SESSION"||f.message==="ERR_HTTP2_GOAWAY_SESSION")return u.sendTelemetry("networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e.url,c));throw f})}function vae(t){return t.get(Le).getLogger("auth")}var T8e=60,S8e="token_refreshed",C8e="github_token_changed";function gf(){return Math.floor(Date.now()/1e3)}async function H2(t,e){let r=vae(t),n=t.get(dt);n.sendTelemetry("auth.new_login");let i=await I8e(t,e);if(!i)return r.info("Failed to get copilot token"),n.sendErrorTelemetry("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let o=await i.json();if(!o)return r.info("Failed to get copilot token"),n.sendErrorTelemetry("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(i.status===401)return r.info("Failed to get copilot token due to 401 status"),n.sendErrorTelemetry("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(!i.ok||!o.token)return r.info(`Invalid copilot token: missing token: ${i.status} ${i.statusText}`),n.sendErrorTelemetry("auth.invalid_token",Er.createAndMarkAsIssued({status:i.status.toString(),status_text:i.statusText})),{kind:"failure",reason:"NotAuthorized",...o.error_details};let s=o.expires_at;o.expires_at=gf()+o.refresh_in+T8e;let{token:a,organization_list:l,...c}=o,u=new vf(a,l);return t.get(Ho).emit("onCopilotToken",u,c),n.sendTelemetry("auth.new_token",Er.createAndMarkAsIssued({},{adjusted_expires_at:o.expires_at,expires_at:s,current_time:gf()})),{kind:"success",...o}}async function I8e(t,e){let r=t.get($u).getTokenUrl(e);try{return await t.get(Nr).fetch(r,{headers:{Authorization:`token ${e.token}`,...t.get(jt).getEditorVersionHeaders()}})}catch(n){throw t.get(kh).notifyUser(t,n),n}}var vf=class{constructor(e,r){this.token=e;this.organization_list=r;this.tokenMap=this.parseToken(e)}parseToken(e){let r=new Map,i=e?.split(":")[0]?.split(";");for(let o of i){let[s,a]=o.split("=");r.set(s,a)}return r}get isInternal(){let e=["4535c7beffc844b46bb1ed4aa04d759a","a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225"];if(!this.organization_list)return!1;for(let r of this.organization_list)if(e.includes(r))return!0;return!1}getTokenValue(e){return this.tokenMap.get(e)}},Lt=class{constructor(){this.copilotTokenRefreshEventEmitter=new OF.EventEmitter;this.githubTokenChangedEventEmitter=new OF.EventEmitter}},ry=class extends Lt{constructor(r,n){super();this.completionsToken=r;this.embeddingsToken=n;this.wasReset=!1}getBasicGitHubToken(){return Promise.resolve("token")}getPermissiveGitHubToken(){return Promise.resolve("token")}async getCopilotToken(r,n){return new vf(this.completionsToken)}async getEmbeddingsToken(r,n){return new vf(this.embeddingsToken??this.completionsToken)}resetCopilotToken(r,n){this.wasReset=!0}async checkCopilotToken(r){return{status:"OK"}}},j2=class extends Lt{constructor(r){super();this.githubToken=r;this.copilotToken=void 0}getBasicGitHubToken(){return Promise.resolve(this.githubToken.token)}getPermissiveGitHubToken(){return Promise.resolve(this.githubToken.token)}async getCopilotToken(r,n){if(!this.copilotToken||this.copilotToken.expires_at<gf()||n){let i=await H2(r,this.githubToken);if(i.kind==="failure")throw Error(`Failed to get copilot token: ${i.reason.toString()} ${i.message??""}`);this.copilotToken={...i},G2(r,this,i.refresh_in)}return new vf(this.copilotToken.token,this.copilotToken.organization_list)}async checkCopilotToken(r){if(!this.copilotToken||this.copilotToken.expires_at<gf()){let i=await H2(r,this.githubToken);if(i.kind==="failure")return i;this.copilotToken={...i},G2(r,this,i.refresh_in)}return{status:"OK"}}resetCopilotToken(r,n){n!==void 0&&r.get(dt).sendTelemetry("auth.reset_token_"+n),vae(r).debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}},gae=new WeakMap;function G2(t,e,r){let n=gf(),i=gae.get(e)??gae.set(e,{value:0}).get(e);i.value>0||(i.value++,setTimeout(async()=>{let o,s="";try{i.value--,await e.getCopilotToken(t,!0),o="success",e.copilotTokenRefreshEventEmitter.emit(S8e)}catch(l){o="failure",s=l.toString()}let a=Er.createAndMarkAsIssued({result:o},{time_taken:gf()-n,refresh_count:i.value});s&&(a.properties.reason=s),t.get(dt).sendTelemetry("auth.token_refresh",a)},r*1e3))}function _ae(t,e){t.provider.id==="github"&&e.githubTokenChangedEventEmitter.emit(C8e,t)}var _f=new class{constructor(){this.contributions=new Set}start(t){for(let e of this.contributions)e(t)}registerContribution(t){this.contributions.add(t)}};var V2=Go("IChatAgentService"),yae="workspace",xae="vscode",Ml="terminal";var lce=require("crypto");function ny(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function bae(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function Eae(t){if(typeof t!="object"||t===null||!("details"in t))return!1;let{details:e}=t;return typeof e=="object"&&e!==null&&"type"in e&&"description"in e&&typeof e.type=="string"&&typeof e.description=="string"}var LF=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.newText=[];this.tokens=[];this.text_offset=[]}append(e){e.text&&(this.text.push(e.text),this.newText.push(e.text)),e.delta?.content&&(this.text.push(e.delta.content),this.newText.push(e.delta.content)),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[]))}flush(){let e=this.newText.join("");return this.newText=[],e}};function w8e(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var z2=class t{constructor(e,r,n,i,o,s,a,l,c){this.expectedNumChoices=r;this.ourRequestId=n;this.response=i;this.body=o;this.telemetryData=s;this.dropCompletionReasons=a;this.fastCancellation=l;this.cancellationToken=c;this.requestId=ny(this.response);this.stats=new MF(this.expectedNumChoices);this.solutions={};this.logger=e.get(Le).getLogger("streamChoices"),this.ghTelemetry=e.get(dt)}static async create(e,r,n,i,o,s,a){let l=await i.body();l.setEncoding("utf8");let c=await e.get(jo).fastCancellation();return new t(e,r,n,i,l,o,s??["content_filter"],c,a)}async*processSSE(e=async()=>{}){try{yield*this.processSSEInner(e)}finally{this.fastCancellation&&this.cancel(),this.logger.info(`request done: requestId: [${this.ourRequestId}] responseId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),this.logger.debug(`request stats: ${this.stats}`)}}async*processSSEInner(e){let r="",n=!1;e:for await(let i of this.body){if(this.maybeCancel("after awaiting body chunk"))return;this.logger.debug("chunk",i.toString());let[o,s]=w8e(r+i.toString());r=s;for(let a of o){let l=a.slice(5).trim();if(l==="[DONE]"){yield*this.finishSolutions();return}let c;try{c=JSON.parse(l)}catch{this.logger.error(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a),vp(this.ghTelemetry,`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a);continue}if(c.choices===void 0){c.error!==void 0?(this.logger.error(`Error in response for request id ${this.requestId.headerRequestId}:`,c.error.message),vp(this.ghTelemetry,`Error in response for request id ${this.requestId.headerRequestId}:`,c.error.message)):(this.logger.error(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`),vp(this.ghTelemetry,`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`));continue}if(this.requestId.created===0&&(this.requestId=ny(this.response,c),this.requestId.created===0&&c.choices?.length&&(this.logger.error(`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId),vp(this.ghTelemetry,`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId))),this.allSolutionsDone()&&this.fastCancellation)break e;for(let u=0;u<c.choices.length;u++){let p=c.choices[u];this.logger.debug("choice",p),this.stats.add(p.index),p.index in this.solutions||(this.solutions[p.index]=new LF);let d=this.solutions[p.index];if(d===null)continue;let f,m=async v=>(v&&(!Array.isArray(v)||!v.every(_=>Eae(_)))&&(v=void 0),f=await e(d.text.join(""),p.index,{text:d.flush(),annotations:v}),f!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb"));if(p.delta?.annotations?.CodeVulnerability){if(await m()||!n&&(d.append(p),await m(p.delta.annotations.CodeVulnerability)))continue}else{d.append(p);let v=p.text?.indexOf(`
`)>-1||p.delta?.content?.includes(`
`);if((p.finish_reason||v)&&await m())continue}if(!(!!p.finish_reason||f!==void 0))continue;let g=p.finish_reason??"client-trimmed";if(this.ghTelemetry.sendTelemetry("completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:g})),this.dropCompletionReasons.includes(p.finish_reason)?this.solutions[p.index]=null:(this.stats.markYielded(p.index),yield{solution:d,finishOffset:f,reason:p.finish_reason??"client-trimmed",requestId:this.requestId,index:p.index}),this.maybeCancel("after yielding finished choice"))return;this.solutions[p.index]=null}}}for(let[i,o]of Object.entries(this.solutions)){let s=Number(i);if(o!==null&&(this.stats.markYielded(s),yield{solution:o,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let i=JSON.parse(r);i.error!==void 0&&(this.logger.error(`Error in response: ${i.error.message}`,i.error),vp(this.ghTelemetry,`Error in response: ${i.error.message}`,i.error))}catch{this.logger.error(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`),vp(this.ghTelemetry,`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null&&(this.stats.markYielded(n),yield{solution:r,finishOffset:void 0,reason:"DONE",requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logger.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};function Tae(t,e){let n={text:e.text.join(""),tokens:e.text};if(e.logprobs.length===0)return n;let i=e.logprobs.reduce((l,c)=>l.concat(c),[]),o=e.top_logprobs.reduce((l,c)=>l.concat(c),[]),s=e.text_offset.reduce((l,c)=>l.concat(c),[]),a=e.tokens.reduce((l,c)=>l.concat(c),[]);return{...n,logprobs:{token_logprobs:i,top_logprobs:o,text_offset:s,tokens:a}}}var MF=class{constructor(e){this.choices=new Map;for(let r=0;r<e;r++)this.choices.set(r,new FF)}add(e){this.choices.get(e).increment()}markYielded(e){this.choices.get(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},FF=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};function vp(t,e,r){let n=[e,r],i=n.length>0?JSON.stringify(n):"no msg";t.sendRestrictedErrorTelemetry("log",Er.createAndMarkAsIssued({context:"fetch",level:Wx[3],message:i})),t.sendErrorTelemetry("log",Er.createAndMarkAsIssued({context:"fetch",level:Wx[3],message:"[redacted]"}))}var A8e=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function Cae(t,e="client"){if(e==="proxy")return!1;let r=t.slice();return r.reverse(),Sae(r)||Sae(r.filter(n=>n.trim().length>0))}function Sae(t){let e=R8e(t);for(let r of A8e){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function R8e(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}function wg(t){switch(t){case 1:return"conversationInline";case 2:return"conversationPanel";default:return"none"}}var sy=Oe(qae()),Hae=require("path"),tn=class{constructor(){}tokenize(e){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encode(e)}leadingString(e,r){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encodeTrimPrefix(e,r).text}tokenLength(e){return e?this.tokenize(e).length:0}initTokenizer(){return(0,sy.createTokenizer)((0,Hae.join)(__dirname,"./cl100k_base.tiktoken"),(0,sy.getSpecialTokensByEncoder)("cl100k_base"),(0,sy.getRegexByEncoder)("cl100k_base"),64e3)}};function za(t,e){let r=t.get(tn),n=3,i=3,o=-1,s=0;for(let a of e){s+=i;for(let[l,c]of Object.entries(a))c&&(s+=r.tokenLength(c),l==="name"&&(s+=o))}return s+=n,s}var rn=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},YF=class{constructor(){this._first=rn.Undefined;this._last=rn.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===rn.Undefined}clear(){let e=this._first;for(;e!==rn.Undefined;){let r=e.next;e.prev=rn.Undefined,e.next=rn.Undefined,e=r}this._first=rn.Undefined,this._last=rn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new rn(e);if(this._first===rn.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==rn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==rn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==rn.Undefined&&e.next!==rn.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===rn.Undefined&&e.next===rn.Undefined?(this._first=rn.Undefined,this._last=rn.Undefined):e.next===rn.Undefined?(this._last=this._last.prev,this._last.next=rn.Undefined):e.prev===rn.Undefined&&(this._first=this._first.next,this._first.prev=rn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==rn.Undefined;)yield e.element,e=e.next}};var V8e=globalThis.performance&&typeof globalThis.performance.now=="function",Q2=class t{static create(e){return new t(e)}constructor(e){this._now=V8e&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var jae=!1,z8e=!1,_p;(q=>{q.None=()=>Ks.None;function e(L){if(z8e){let{onDidAddListener:S}=L,T=NE.create(),A=0;L.onDidAddListener=()=>{++A===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),T.print()),S?.()}}}function r(L,S){return d(L,()=>{},0,void 0,!0,void 0,S)}q.defer=r;function n(L){return(S,T=null,A)=>{let J=!1,me;return me=L(ce=>{if(!J)return me?me.dispose():J=!0,S.call(T,ce)},null,A),J&&me.dispose(),me}}q.once=n;function i(L,S,T){return u((A,J=null,me)=>L(ce=>A.call(J,S(ce)),null,me),T)}q.map=i;function o(L,S,T){return u((A,J=null,me)=>L(ce=>{S(ce),A.call(J,ce)},null,me),T)}q.forEach=o;function s(L,S,T){return u((A,J=null,me)=>L(ce=>S(ce)&&A.call(J,ce),null,me),T)}q.filter=s;function a(L){return L}q.signal=a;function l(...L){return(S,T=null,A)=>{let J=u$(...L.map(me=>me(ce=>S.call(T,ce))));return p(J,A)}}q.any=l;function c(L,S,T,A){let J=T;return i(L,me=>(J=S(J,me),J),A)}q.reduce=c;function u(L,S){let T,A={onWillAddFirstListener(){T=L(J.fire,J)},onDidRemoveLastListener(){T?.dispose()}};S||e(A);let J=new oa(A);return S?.add(J),J.event}function p(L,S){return S instanceof Array?S.push(L):S&&S.add(L),L}function d(L,S,T=100,A=!1,J=!1,me,ce){let ae,se,je,Ye=0,Ze,ke={leakWarningThreshold:me,onWillAddFirstListener(){ae=L(et=>{Ye++,se=S(se,et),A&&!je&&(st.fire(se),se=void 0),Ze=()=>{let ve=se;se=void 0,je=void 0,(!A||Ye>1)&&st.fire(ve),Ye=0},typeof T=="number"?(clearTimeout(je),je=setTimeout(Ze,T)):je===void 0&&(je=0,queueMicrotask(Ze))})},onWillRemoveListener(){J&&Ye>0&&Ze?.()},onDidRemoveLastListener(){Ze=void 0,ae.dispose()}};ce||e(ke);let st=new oa(ke);return ce?.add(st),st.event}q.debounce=d;function f(L,S=0,T){return q.debounce(L,(A,J)=>A?(A.push(J),A):[J],S,void 0,!0,void 0,T)}q.accumulate=f;function m(L,S=(A,J)=>A===J,T){let A=!0,J;return s(L,me=>{let ce=A||!S(me,J);return A=!1,J=me,ce},T)}q.latch=m;function h(L,S,T){return[q.filter(L,S,T),q.filter(L,A=>!S(A),T)]}q.split=h;function g(L,S=!1,T=[],A){let J=T.slice(),me=L(se=>{J?J.push(se):ae.fire(se)});A&&A.add(me);let ce=()=>{J?.forEach(se=>ae.fire(se)),J=null},ae=new oa({onWillAddFirstListener(){me||(me=L(se=>ae.fire(se)),A&&A.add(me))},onDidAddFirstListener(){J&&(S?setTimeout(ce):ce())},onDidRemoveLastListener(){me&&me.dispose(),me=null}});return A&&A.add(ae),ae.event}q.buffer=g;function v(L,S){return(A,J,me)=>{let ce=S(new y);return L(function(ae){let se=ce.evaluate(ae);se!==_&&A.call(J,se)},void 0,me)}}q.chain=v;let _=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(S){return this.steps.push(S),this}forEach(S){return this.steps.push(T=>(S(T),T)),this}filter(S){return this.steps.push(T=>S(T)?T:_),this}reduce(S,T){let A=T;return this.steps.push(J=>(A=S(A,J),A)),this}latch(S=(T,A)=>T===A){let T=!0,A;return this.steps.push(J=>{let me=T||!S(J,A);return T=!1,A=J,me?J:_}),this}evaluate(S){for(let T of this.steps)if(S=T(S),S===_)break;return S}}function b(L,S,T=A=>A){let A=(...ae)=>ce.fire(T(...ae)),J=()=>L.on(S,A),me=()=>L.removeListener(S,A),ce=new oa({onWillAddFirstListener:J,onDidRemoveLastListener:me});return ce.event}q.fromNodeEventEmitter=b;function x(L,S,T=A=>A){let A=(...ae)=>ce.fire(T(...ae)),J=()=>L.addEventListener(S,A),me=()=>L.removeEventListener(S,A),ce=new oa({onWillAddFirstListener:J,onDidRemoveLastListener:me});return ce.event}q.fromDOMEventEmitter=x;function P(L){return new Promise(S=>n(L)(S))}q.toPromise=P;function U(L){let S=new oa;return L.then(T=>{S.fire(T)},()=>{S.fire(void 0)}).finally(()=>{S.dispose()}),S.event}q.fromPromise=U;function H(L,S,T){return S(T),L(A=>S(A))}q.runAndSubscribe=H;function j(L,S){let T=null;function A(me){T?.dispose(),T=new fl,S(me,T)}A(void 0);let J=L(me=>A(me));return Ph(()=>{J.dispose(),T?.dispose()})}q.runAndSubscribeWithStore=j;class M{constructor(S,T){this._observable=S;this._counter=0;this._hasChanged=!1;let A={onWillAddFirstListener:()=>{S.addObserver(this)},onDidRemoveLastListener:()=>{S.removeObserver(this)}};T||e(A),this.emitter=new oa(A),T&&T.add(this.emitter)}beginUpdate(S){this._counter++}handlePossibleChange(S){}handleChange(S,T){this._hasChanged=!0}endUpdate(S){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function F(L,S){return new M(L,S).emitter.event}q.fromObservable=F;function z(L){return S=>{let T=0,A=!1,J={beginUpdate(){T++},endUpdate(){T--,T===0&&(L.reportChanges(),A&&(A=!1,S()))},handlePossibleChange(){},handleChange(){A=!0}};return L.addObserver(J),L.reportChanges(),{dispose(){L.removeObserver(J)}}}}q.fromObservableLight=z})(_p||={});var QF=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new Q2,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},Gae=-1;var XF=class{constructor(e,r=Math.random().toString(18).slice(2,5)){this.threshold=e;this.name=r;this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let o,s=0;for(let[a,l]of this._stacks)(!o||s<l)&&(o=a,s=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${s}):`),console.warn(o)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}},NE=class t{constructor(e){this.value=e}static create(){return new t(new Error().stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},$8e=0,ay=class{constructor(e){this.value=e;this.id=$8e++}},W8e=2,K8e=(t,e)=>{if(t instanceof ay)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},oa=class{constructor(e){this._size=0;this._options=e,this._leakageMon=Gae>0||this._options?.leakWarningThreshold?new XF(this._options?.leakWarningThreshold??Gae):void 0,this._perfMon=this._options?._profName?new QF(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(jae){let e=this._listeners;queueMicrotask(()=>{K8e(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Ks.None;if(this._disposed)return Ks.None;r&&(e=e.bind(r));let i=new ay(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=NE.create(),o=this._leakageMon.check(i.stack,this._size+1)),jae&&(i.stack=s??NE.create()),this._listeners?this._listeners instanceof ay?(this._deliveryQueue??=new JF,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=Ph(()=>{o?.(),this._removeListener(i)});return n instanceof fl?n.add(a):Array.isArray(n)&&n.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*W8e<=r.length){let o=0;for(let s=0;s<r.length;s++)r[s]?r[o++]=r[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||QC;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof ay)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var JF=class{constructor(){this.i=-1;this.end=0}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var Vae=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),bf;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof cy?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:_p.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Vae})})(bf||={});var cy=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Vae:(this._emitter||(this._emitter=new oa),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},ly=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new cy),this._token}cancel(){this._token?this._token instanceof cy&&this._token.cancel():this._token=bf.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof cy&&this._token.dispose():this._token=bf.None}};var X2=class{constructor(e){this.fn=e;this.lastCache=void 0;this.lastArgKey=void 0}get(e){let r=JSON.stringify(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this.fn(e)),this.lastCache}};var yp=class{constructor(e){this.executor=e;this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function J2(t,e,r){let n=[],i=0;for(let o of t.matchAll(e)){if(n.push(t.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,n.push(r(o[0],...o.slice(1),o.index,t,o.groups))}return n.push(t.slice(i)),Promise.all(n).then(o=>o.join(""))}function Yae(t,e){return t<e?-1:t>e?1:0}function Y8e(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),c=e.charCodeAt(i);if(l<c)return-1;if(l>c)return 1}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function Qae(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),c=e.charCodeAt(i);if(l===c)continue;if(l>=128||c>=128)return Y8e(t.toLowerCase(),e.toLowerCase(),r,n,i,o);zae(l)&&(l-=32),zae(c)&&(c-=32);let u=l-c;if(u!==0)return u}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function zae(t){return t>=97&&t<=122}function ZF(t,e){return t.length===e.length&&Qae(t,e)===0}function Xae(t,e){let r=e.length;return e.length>t.length?!1:Qae(t,e,0,r)===0}var bft=String.fromCharCode(65279);var $ae=class t{static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=Q8e()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function Q8e(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var Wae=class t{constructor(e){this.confusableDictionary=e}static{this.ambiguousCharacterData=new yp(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new X2(e=>{function r(u){let p=new Map;for(let d=0;d<u.length;d+=2)p.set(u[d],u[d+1]);return p}function n(u,p){let d=new Map(u);for(let[f,m]of p)d.set(f,m);return d}function i(u,p){if(!u)return p;let d=new Map;for(let[f,m]of u)p.has(f)&&d.set(f,m);return d}let o=this.ambiguousCharacterData.value,s=e.filter(u=>!u.startsWith("_")&&u in o);s.length===0&&(s=["_default"]);let a;for(let u of s){let p=r(o[u]);a=i(a,p)}let l=r(o._common),c=n(l,a);return new t(c)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new yp(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},Kae=class t{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static get codePoints(){return t.getData()}};function Ef(t){return t===47||t===92}function e9(t){return t.replace(/[\\/]/g,gr.sep)}function Jae(t){return t.indexOf("/")===-1&&(t=e9(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}function t9(t,e=gr.sep){if(!t)return"";let r=t.length,n=t.charCodeAt(0);if(Ef(n)){if(Ef(t.charCodeAt(1))&&!Ef(t.charCodeAt(2))){let o=3,s=o;for(;o<r&&!Ef(t.charCodeAt(o));o++);if(s!==o&&!Ef(t.charCodeAt(o+1))){for(o+=1;o<r;o++)if(Ef(t.charCodeAt(o)))return t.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(X8e(n)&&t.charCodeAt(1)===58)return Ef(t.charCodeAt(2))?t.slice(0,2)+e:t.slice(0,2);let i=t.indexOf("://");if(i!==-1){for(i+=3;i<r;i++)if(Ef(t.charCodeAt(i)))return t.slice(0,i+1)}return""}function r9(t,e,r,n=P0){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!Xae(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}function X8e(t){return t>=65&&t<=90||t>=97&&t<=122}var En;(T=>(T.inMemory="inmemory",T.vscode="vscode",T.internal="private",T.walkThrough="walkThrough",T.walkThroughSnippet="walkThroughSnippet",T.http="http",T.https="https",T.file="file",T.mailto="mailto",T.untitled="untitled",T.data="data",T.command="command",T.vscodeRemote="vscode-remote",T.vscodeRemoteResource="vscode-remote-resource",T.vscodeManagedRemoteResource="vscode-managed-remote-resource",T.vscodeUserData="vscode-userdata",T.vscodeCustomEditor="vscode-custom-editor",T.vscodeNotebookCell="vscode-notebook-cell",T.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",T.vscodeNotebookCellOutput="vscode-notebook-cell-output",T.vscodeInteractiveInput="vscode-interactive-input",T.vscodeSettings="vscode-settings",T.vscodeWorkspaceTrust="vscode-workspace-trust",T.vscodeTerminal="vscode-terminal",T.vscodeChatSesssion="vscode-chat-editor",T.webviewPanel="webview-panel",T.vscodeWebview="vscode-webview",T.extension="extension",T.vscodeFileResource="vscode-file",T.tmp="tmp",T.vsls="vsls",T.vscodeSourceControl="vscode-scm"))(En||={});var Z8e="tkn",n9=class{constructor(){this._hosts=Object.create(null);this._ports=Object.create(null);this._connectionTokens=Object.create(null);this._preferredWebSchema="http";this._delegate=null;this._remoteResourcesPath=`/${En.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e){this._remoteResourcesPath=`${e}/${En.vscodeRemoteResource}`}set(e,r,n){this._hosts[e]=r,this._ports[e]=n}setConnectionToken(e,r){this._connectionTokens[e]=r}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return QC(a),e}let r=e.authority,n=this._hosts[r];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[r],o=this._connectionTokens[r],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${Z8e}=${encodeURIComponent(o)}`),wt.from({scheme:O$?this._preferredWebSchema:En.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},eMe=new n9;var tMe="vscode-app",i9=class t{static{this.FALLBACK_AUTHORITY=tMe}asBrowserUri(e){let r=this.toUri(e,require);return this.uriToBrowserUri(r)}uriToBrowserUri(e){return e.scheme===En.vscodeRemote?eMe.rewrite(e):e.scheme===En.file&&(k$||L$===`${En.vscodeFileResource}://${t.FALLBACK_AUTHORITY}`)?e.with({scheme:En.vscodeFileResource,authority:e.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let r=this.toUri(e,require);return this.uriToFileUri(r)}uriToFileUri(e){return e.scheme===En.vscodeFileResource?e.with({scheme:En.file,authority:e.authority!==t.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,r){return wt.isUri(e)?e:wt.parse(r.toUrl(e))}},Pft=new i9,rMe;(o=>{let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(t.get("3"));let r="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:wt.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let l=a?.get(r);if(l)return t.get(l)}o.getHeadersFromQuery=n;function i(s,a,l){if(!globalThis.crossOriginIsolated)return;let c=a&&l?"3":l?"2":"1";s instanceof URLSearchParams?s.set(r,c):s[r]=c}o.addSearchParam=i})(rMe||={});function xp(t){return Xx(t,!0)}var kE=class{constructor(e){this._ignorePathCasing=e}compare(e,r,n=!1){return e===r?0:Yae(this.getComparisonKey(e,n),this.getComparisonKey(r,n))}isEqual(e,r,n=!1){return e===r?!0:!e||!r?!1:this.getComparisonKey(e,n)===this.getComparisonKey(r,n)}getComparisonKey(e,r=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,r,n=!1){if(e.scheme===r.scheme){if(e.scheme===En.file)return r9(xp(e),xp(r),this._ignorePathCasing(e))&&e.query===r.query&&(n||e.fragment===r.fragment);if(Zae(e.authority,r.authority))return r9(e.path,r.path,this._ignorePathCasing(e),"/")&&e.query===r.query&&(n||e.fragment===r.fragment)}return!1}joinPath(e,...r){return wt.joinPath(e,...r)}basenameOrAuthority(e){return Pc(e)||e.authority}basename(e){return gr.basename(e.path)}extname(e){return gr.extname(e.path)}dirname(e){if(e.path.length===0)return e;let r;return e.scheme===En.file?r=wt.file(j$(xp(e))).path:(r=gr.dirname(e.path),e.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),r="/")),e.with({path:r})}normalizePath(e){if(!e.path.length)return e;let r;return e.scheme===En.file?r=wt.file(EL(xp(e))).path:r=gr.normalize(e.path),e.with({path:r})}relativePath(e,r){if(e.scheme!==r.scheme||!Zae(e.authority,r.authority))return;if(e.scheme===En.file){let o=H$(xp(e),xp(r));return hl?e9(o):o}let n=e.path||"/",i=r.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return gr.relative(n,i)}resolvePath(e,r){if(e.scheme===En.file){let n=wt.file(q$(xp(e),r));return e.with({authority:n.authority,path:n.path})}return r=Jae(r),e.with({path:gr.resolve(e.path,r)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,r){return e===r||e!==void 0&&r!==void 0&&ZF(e,r)}hasTrailingPathSeparator(e,r=P0){if(e.scheme===En.file){let n=xp(e);return n.length>t9(n).length&&n[n.length-1]===r}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,r=P0){return ece(e,r)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,r=P0){let n=!1;if(e.scheme===En.file){let i=xp(e);n=i!==void 0&&i.length===t9(i).length&&i[i.length-1]===r}else{r="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!ece(e,r)?e.with({path:e.path+"/"}):e}},ar=new kE(()=>!1),Uft=new kE(t=>t.scheme===En.file?!N$:!0),Bft=new kE(t=>!0),tce=ar.isEqual.bind(ar),qft=ar.isEqualOrParent.bind(ar),Hft=ar.getComparisonKey.bind(ar),jft=ar.basenameOrAuthority.bind(ar),Pc=ar.basename.bind(ar),sa=ar.extname.bind(ar),Gft=ar.dirname.bind(ar),Vft=ar.joinPath.bind(ar),zft=ar.normalizePath.bind(ar),rce=ar.relativePath.bind(ar),$ft=ar.resolvePath.bind(ar),Wft=ar.isAbsolutePath.bind(ar),Zae=ar.isEqualAuthority.bind(ar),ece=ar.hasTrailingPathSeparator.bind(ar),Kft=ar.removeTrailingPathSeparator.bind(ar),Yft=ar.addTrailingPathSeparator.bind(ar);var nMe;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(u=>{let[p,d]=u.split(":");p&&d&&a.set(p,d)});let c=s.path.substring(0,s.path.indexOf(";"));return c&&a.set(o.META_DATA_MIME,c),a}o.parseMetaData=i})(nMe||={});var oMe=Symbol("MicrotaskDelay");function Z2(t,e,r){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(r)});t.then(n,i).finally(()=>o.dispose())})}function bp(t,e,r){let n,i=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(i)),new Promise(o=>n=o)])}var sMe,o9;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?o9=(t,e)=>{M$(()=>{if(r)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:o9=(t,e,r)=>{let n=t.requestIdleCallback(e,typeof r=="number"?{timeout:r}:void 0),i=!1;return{dispose(){i||(i=!0,t.cancelIdleCallback(n))}}},sMe=t=>o9(globalThis,t)})();var Nc=class{get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new I0)}},aMe;(r=>{async function t(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}r.settled=t;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}r.withAsyncBody=e})(aMe||={});var Fl=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromises(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new oa,queueMicrotask(async()=>{let r={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(r)),this.resolve()}catch(n){this.reject(n)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await _p.toPromise(this._onStateChanged.event)}while(!0)}}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var Rg=class{constructor(){this._deferred=new Nc;this._asyncIterable=new Fl(n=>{if(e){n.reject(e);return}return r&&n.emitMany(r),this._errorFn=i=>n.reject(i),this._emitFn=i=>n.emitOne(i),this._deferred.p});let e,r;this._emitFn=n=>{r||(r=[]),r.push(n)},this._errorFn=n=>{e||(e=n)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var ice=require("crypto");function Ul(){let t=(0,ice.randomUUID)(),e=Er.createAndMarkAsIssued({messageId:t});return new s9(e)}var s9=class t{constructor(e){this.raw=e}get properties(){return this.raw.properties}get measurements(){return this.raw.measurements}markAsDisplayed(){this.raw.markAsDisplayed()}extendedBy(e,r){let n=this.raw.extendedBy(e,r);return new t(n)}};function eR(t,e,r,n,i,o,s){let a=t.turns[t.turns.length-1].contextParts.map(u=>u.kind).sort(),l={source:"user",turnIndex:(t.turns.length-1).toString(),conversationId:e,uiKind:r,inputSources:a.join(",")},c={promptTokenLen:i,messageCharLen:n.length};return o&&(l.suggestion=o),s=s.extendedBy(l,c),s}function tR(t,e,r,n,i,o){n!==void 0&&(o=o.extendedBy({offTopic:n.toString()})),a9(t,i,e,r,{},{},o)}function rR(t,e,r,n,i,o,s,a){let l=c9(i);a9(t,s,n,i,{source:"model",turnIndex:e.turns.length.toString(),conversationId:r,headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:i.length,numCodeBlocks:l.length},a)}function nR(t,e,r,n,i,o,s,a){a9(t,s,n,i,{source:"offTopic",turnIndex:e.turns.length.toString(),conversationId:r,userMessageId:o,uiKind:n},{messageCharLen:i.length},a)}function a9(t,e,r,n,i,o,s){let a={...n?{messageText:n}:{},...i};e&&(i.languageId=e.languageId,o.documentLength=e.getText().length);let l=s.extendedBy(i,o),c=s.extendedBy(a),u=cMe(r),p=t.get(dt);return p.sendTelemetry(`${u}.message`,l.raw),p.sendRestrictedTelemetry(`${u}.messageText`,c.raw),l.raw}function iR(t,e,r,n,i){return uy(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionShown")}function uy(t,e,r,n,i,o){let s=o??Er.createAndMarkAsIssued();e&&(r.languageId=e.languageId,n.documentLength=e.getText().length);let a=s.extendedBy(r,n);return t.get(dt).sendTelemetry(i,a),a}async function oR(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});await t.get(dt).sendRestrictedTelemetry("engine.messages",n)}function cMe(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}function c9(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}var Ep=class{};async function l9(t,e,r,n){let i=null,o=!1;i=setTimeout(()=>{o||t.report(e)},n);try{let s=await r;return o=!0,s}finally{i&&clearTimeout(i)}}function oce(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}function sce(t,e,r,n,i,o,s,a){return oR(t,[e],a),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:s,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a}}function ace(t,e,r){let n=t.get(Le).getLogger("streamMessages"),i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(n.debug(`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),n.info(`message ${e.index} returned. finish reason: [${e.reason}]`),n.debug(`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let s=Tae(t,e.solution),a={role:"assistant",content:i};return sce(t,a,s,e.index,e.requestId,o,e.reason,r)}async function cce(t,e,r,n,i,o,s){let a=t.get(Le).getLogger("chat fetch"),l=pMe(t,r);if(o?.isCancellationRequested)return{type:"canceled",reason:"before fetch request"};a.info(`engine ${e.engineUrl}`),a.info(`modelMaxTokenWindow ${e.modelMaxTokenWindow}`),a.info(`chat model ${r.model}`),r.intent_model&&a.info(`intent model ${r.intent_model}`),r.intent_tokenizer&&a.info(`intent tokenizer ${r.intent_tokenizer}`),r.intent_threshold&&a.info(`intent threshold ${r.intent_threshold}`);let c=t.get(Ep),u=r.secretKey??(await t.get(Lt).getCopilotToken(t)).token;if(!u)return a.error(`Failed to send request to ${e.url} due to missing key`),vp(t.get(dt),`Failed to send request to ${e.url} due to missing key`),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:"key is missing"};let p=await fMe(t,e,r.ourRequestId,l,u,r.location,o,s);if(o?.isCancellationRequested){let g=await p.body();try{g.destroy()}catch(v){a.exception(v,"Error destroying stream"),t.get(dt).sendExceptionTelemetry(v,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(p.status!==200){let g=uMe(e,t,r.location,r.ourRequestId);return a.info("Request ID for failed request: ",r.ourRequestId),dMe(t,c,g,p)}let d=r.postOptions?.n??1,m=(await z2.create(t,d,r.ourRequestId,p,n,[],o)).processSSE(i);return{type:"success",chatCompletions:Fl.map(m,g=>ace(t,g,n)),getProcessingTime:()=>bae(p)}}function uMe(t,e,r,n){return Er.createAndMarkAsIssued({endpoint:t.endpoint,engineName:t.engineName,uiKind:wg(r),headerRequestId:n})}function pMe(t,e){let r={messages:e.messages,model:e.model};e.postOptions&&Object.assign(r,e.postOptions);let n=oce(e.repoInfo);return n!==void 0&&(r.nwo=n),e.intent&&(r.intent=e.intent,e.intent_model&&(r.intent_model=e.intent_model),e.intent_tokenizer&&(r.intent_tokenizer=e.intent_tokenizer),e.intent_threshold&&(r.intent_threshold=e.intent_threshold)),r}async function dMe(t,e,r,n){let i=t.get(Le).getLogger("chat fetch"),o=t.get(dt);if(e.setWarning(),r.properties.error=`Response status was ${n.status}`,r.properties.status=String(n.status),o.sendTelemetry("request.shownWarning",r),n.status===401||n.status===403)return t.get(Lt).resetCopilotToken(t,n.status),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:`token expired or invalid: ${n.status}`};if(n.status===499)return i.info("Cancelled by server"),{type:"failed",failKind:"serverCanceled",reason:"canceled by server"};let s=await n.text();return n.status===466?(e.setError(s),i.info(s),{type:"failed",failKind:"clientNotSupported",reason:`client not supported: ${s}`}):n.status===400&&s.includes("off_topic")?{type:"failed",failKind:"offTopic",reason:"filtered as off_topic by intent classifier: message was not programming related"}:n.status===429?{type:"failed",failKind:"rateLimited",reason:s}:n.status>=500&&n.status<600?{type:"failed",failKind:"serverError",reason:`${n.status} ${s}`}:n.status===422?{type:"failed",failKind:"contentFilter",reason:"Filtered by Responsible AI Service"}:(i.error("Unhandled status from server:",n.status,s),vp(t.get(dt),"Unhandled status from server: "+n.status,s),{type:"failed",failKind:"unknown",reason:`unhandled status from server: ${n.status} ${s}`})}function fMe(t,e,r,n,i,o,s,a){let l=t.get(Le).getLogger("chat fetch"),c=t.get(dt),u=Er.createAndMarkAsIssued({endpoint:e.endpoint,engineName:e.engineName,uiKind:wg(o),...a},{maxTokenWindow:e.modelMaxTokenWindow});for(let[f,m]of Object.entries(n))f!=="messages"&&(u.properties[`request.option.${f}`]=JSON.stringify(m)??"undefined");u.properties.headerRequestId=r,c.sendTelemetry("request.sent",u);let p=mf(),d=mMe(o);return hf(t,e,i,d,r,n,s).then(f=>{let m=ny(f,void 0);u.extendWithRequestId(m);let h=mf()-p;return u.measurements.totalTimeMs=h,l.info(`request.response: [${e.url}], took ${h} ms`),l.debug("request.response properties",u.properties),l.debug("request.response measurements",u.measurements),l.debug(`messages: ${JSON.stringify(n.messages)}`),c.sendTelemetry("request.response",u),f}).catch(f=>{if(t.get(Nr).isAbortError(f))throw f;t.get(Ep).setWarning(f.message);let g=u.extendedBy({error:"Network exception"});c.sendTelemetry("request.shownWarning",g),u.properties.code=String(f.code??""),u.properties.errno=String(f.errno??""),u.properties.message=String(f.message??""),u.properties.type=String(f.type??"");let v=mf()-p;throw u.measurements.totalTimeMs=v,l.debug(`request.response: [${e.url}] took ${v} ms`),l.debug("request.error properties",u.properties),l.debug("request.error measurements",u.measurements),c.sendTelemetry("request.error",u),f}).finally(()=>{oR(t,n.messages,u)})}function mMe(t){switch(t){case 2:return"conversation-panel";case 1:return"conversation-inline"}}var fr=class{async fetchOne(e,r,n,i,o,s,a,l){let c=await this.fetchMany(e,r,n,i,o,{...s,n:1},a,l);return c.type==="success"?{...c,value:c.value[0]}:c}},sR=class t extends fr{constructor(r){super();this.accessor=r;this.logger=r.get(Le).getPromptResponseLogger("ChatMLFetcher")}async fetchMany(r,n,i,o,s,a,l,c){let u=l?.messageId??(0,lce.randomUUID)(),p=za(this.accessor,r);a={max_tokens:Math.max(s.modelMaxTokenWindow-p,1024),...a};let f=t.preparePostOptions(a),m=s.model;c&&(c.intent_model=await this.getOffTopicModelName(),c.intent_tokenizer=await this.getOffTopicModelTokenizer(),c.intent_threshold=await this.getOffTopicModelThreshold());let h={messages:r.filter(v=>v.content&&v.content!==""),model:m,repoInfo:void 0,ourRequestId:u,location:o,postOptions:f,secretKey:a.secretKey,...c},g=Er.createAndMarkAsIssued({...l,uiKind:wg(o)});try{let v=await cce(this.accessor,s,h,g,n||(async()=>{}),i,l),_;switch(v.type){case"success":return await this.processSuccessfulResponse(v,h.ourRequestId,l,s);case"canceled":return this.processCanceledResponse(v,h.ourRequestId);case"failed":return _=this.processFailedResponse(v,h.ourRequestId),this.accessor.get(wr).sendTelemetryEvent("response.error",{type:_.type,source:l?.messageSource??"unknown",requestId:h.ourRequestId,model:s.model},{maxTokenCount:s.modelMaxTokenWindow??-1}),_}}catch(v){return this.processError(v,h.ourRequestId)}}static preparePostOptions(r){return{...r,stream:!0}}async processSuccessfulResponse(r,n,i,o){let s=[];for await(let c of r.chatCompletions)this.accessor.get(wr).sendTelemetryEvent("response.success",{reason:c.finishReason,source:i?.messageSource??"unknown",model:o?.model,requestId:n},{tokenCount:c.numTokens,maxTokenCount:o?.modelMaxTokenWindow??-1,processingTime:r.getProcessingTime()}),this.isRepetitive(c,i)||s.push(c);this.logger.debug(`Received choices: ${JSON.stringify(s,null,2)}`);let a=s.filter(c=>c.finishReason==="stop"||c.finishReason==="client-trimmed");if(a.length>=1)return{type:"success",value:a.map(c=>c.message.content),requestId:n};switch(s[0]?.finishReason){case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n}}return{type:"unknown",reason:"Response contained no choices.",requestId:n}}async getOffTopicModelName(){let r=this.accessor.get(Ge).getConfig(Qe.DebugOverrideChatOffTopicModel);if(r)return r;let n=await this.accessor.get(jo).chatOffTopicModel();return n||""}async getOffTopicModelTokenizer(){let r=this.accessor.get(Ge).getConfig(Qe.DebugOverrideChatOffTopicModelTokenizer);if(r)return r;let n=await this.accessor.get(jo).chatOffTopicModelTokenizer();return n||""}async getOffTopicModelThreshold(){let r=this.accessor.get(Ge).getConfig(Qe.DebugOverrideChatOffTopicModelThreshold);if(r!==0)return r;let n=await this.accessor.get(jo).chatOffTopicModelThreshold();return n!==0?n:0}isRepetitive(r,n){let i=Cae(r.tokens);if(i){let o=Er.createAndMarkAsIssued();o.extendWithRequestId(r.requestId);let s=o.extendedBy(n);this.accessor.get(dt).sendRestrictedTelemetry("conversation.repetition.detected",s),this.logger.info("Filtered out repetitive conversation result")}return i}processCanceledResponse(r,n){return this.logger.debug("Cancelled after awaiting fetchConversation"),{type:"canceled",reason:r.reason,requestId:n}}processFailedResponse(r,n){return r.failKind==="rateLimited"?{type:"rateLimited",reason:r.reason,requestId:n}:r.failKind==="offTopic"?{type:"offTopic",reason:r.reason,requestId:n}:r.failKind==="tokenExpiredOrInvalid"||r.failKind==="clientNotSupported"||r.reason.includes("Bad request: ")?{type:"badRequest",reason:r.reason,requestId:n}:r.failKind==="serverError"?{type:"failed",reason:r.reason,requestId:n}:r.failKind==="contentFilter"?{type:"filtered",reason:r.reason,requestId:n}:{type:"failed",reason:r.reason,requestId:n}}processError(r,n){let i=this.accessor.get(Nr);return i.isAbortError(r)?{type:"canceled",reason:"network request aborted",requestId:n}:(this.accessor.get(Le).defaultLogger.exception(r,"Error on conversation request"),this.accessor.get(dt).sendExceptionTelemetry(r,"Error on conversation request"),i.isDNSLookupFailedError(r)?{type:"failed",reason:"It appears you're not connected to the internet, please check your network connection and try again.",requestId:n}:i.isFetcherError(r)?{type:"failed",reason:`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`,requestId:n}:{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};var aR=Go("IGitContextModel");var cr=Oe(require("vscode")),Tr=cr.Position,tt=cr.Range,u9=cr.Selection,uce=cr.EventEmitter,Dg=cr.CancellationTokenSource;var $a=cr.TextEdit,p9=cr.WorkspaceEdit,Tf=cr.Uri,kc=cr.MarkdownString,aa=cr.InteractiveEditorResponseFeedbackKind;var OE=cr.DiagnosticSeverity,py=cr.ExtensionMode,dy=cr.Location;var d9={t:cr.l10n.t};var Oce=Oe(require("path"));var pce=require("worker_threads"),f9=class{constructor(e,r){this.logger=r;this.handlers=new Map;this.nextId=1;this.worker=new pce.Worker(e),this.worker.on("message",({id:n,err:i,res:o})=>{let s=this.handlers.get(n);s&&(this.handlers.delete(n),i?s.reject(i):s.resolve(o))}),this.worker.on("error",n=>this.handleError(n)),this.worker.on("exit",n=>{n!==0&&this.handleError(new Error(`Worker thread exited with code ${n}.`))})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.handlers.clear()}handleError(e){this.logger?.exception(e);for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}remoteCall(e,r){let n=this.nextId++,i,o,s=new Promise((a,l)=>{i=a,o=l});return this.handlers.set(n,{resolve:i,reject:o}),this.worker.postMessage({id:n,fn:e,args:r}),s}},fy=class{constructor(e,r){this.worker=new f9(e,r);let n={get:(i,o)=>(typeof o=="string"&&!i[o]&&(i[o]=(...s)=>{if(!this.worker)throw new Error("Worker was terminated!");return this.worker.remoteCall(o,s)}),i[o])};this.proxy=new Proxy(Object.create(null),n)}terminate(){this.worker.terminate()}};var pR={};Ri(pR,{TreeSitterOffsetRange:()=>oo,_clean:()=>y9,_extractDoc:()=>qMe,_getCallExpressions:()=>wMe,_getClassDeclarations:()=>RMe,_getCoarseParentScope:()=>MMe,_getDocumentableNodeIfOnIdentifier:()=>UMe,_getFixSelectionOfInterest:()=>FMe,_getFunctionBodies:()=>LMe,_getFunctionDefinitions:()=>AMe,_getFunctionPositions:()=>OMe,_getNewExpressions:()=>NMe,_getNodeMatchingSelection:()=>kce,_getNodeToDocument:()=>BMe,_getSemanticChunkTree:()=>kMe,_getTypeDeclarations:()=>DMe,_getTypeReferences:()=>PMe,_parse:()=>Zo});var FE=Oe(require("path")),uR=Oe(dce());function fce(t,e,r){let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n}function mce(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let i=t[n];e(i,r)>0&&(r=i)}return r}var m9=class{constructor(e=10){this.values=new Map;this.lruKeys=[];if(e<1)throw new Error("Cache size must be at least 1");this.size=e}removeKeyFromLRU(e){let r=this.lruKeys.indexOf(e);r!==-1&&this.lruKeys.splice(r,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}clear(){this.values.clear(),this.lruKeys=[]}deleteKey(e){this.removeKeyFromLRU(e);let r=this.values.get(e);return r!==void 0&&this.values.delete(e),r}get(e){if(this.values.has(e)){let r=this.values.get(e);return this.touchKeyInLRU(e),r}}keys(){return this.lruKeys.slice()}getValues(){return this.values.values()}put(e,r){let n;if(!this.values.has(e)&&this.lruKeys.length===this.size){let i=this.lruKeys.shift(),o=this.deleteKey(i);n=[i,o]}return this.values.set(e,r),this.touchKeyInLRU(e),n}},cR=class{constructor(e){this.actual=new m9(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};var oo={doesContain:(t,e)=>t.startIndex<=e.startIndex&&e.endIndex<=t.endIndex,ofSyntaxNode:t=>({startIndex:t.startIndex,endIndex:t.endIndex}),compare:(t,e)=>t.startIndex-e.startIndex||e.endIndex-t.endIndex,doIntersect:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return r<n},len:t=>t.endIndex-t.startIndex,intersectionSize:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return Math.max(n-r,0)},isTreeSitterOffsetRange(t){return typeof t.startIndex=="number"&&typeof t.endIndex=="number"},toTreeSitterOffsetRange(t,e){return{startIndex:e.offsetAt(t.start),endIndex:e.offsetAt(t.end)}}},Oc={isEqual(t,e){return t.row===e.row&&t.column===e.column},isBefore(t,e){return t.row<e.row||t.row===e.row&&t.column<e.column},isAfter(t,e){return Oc.isBefore(e,t)},isBeforeOrEqual(t,e){let r=Oc.isBefore(t,e),n=Oc.isEqual(t,e);return!!(r||n)},equals(t,e){return t.column===e.column&&t.row===e.row},isAfterOrEqual(t,e){return Oc.isBeforeOrEqual(e,t)},ofPoint:t=>({row:t.row,column:t.column})},Sf={doesContain:(t,e)=>Oc.isBeforeOrEqual(t.startPosition,e.startPosition)&&Oc.isAfterOrEqual(t.endPosition,e.endPosition),equals:(t,e)=>Oc.equals(t.startPosition,e.startPosition)&&Oc.equals(t.endPosition,e.endPosition),ofSyntaxNode:t=>({startPosition:t.startPosition,endPosition:t.endPosition})},h9={ofSyntaxNode:t=>({type:t.type,startIndex:t.startIndex,endIndex:t.endIndex})},Lc={ofSyntaxNode:t=>({range:Sf.ofSyntaxNode(t),startIndex:t.startIndex,text:t.text,endIndex:t.endIndex})};var lR=class{constructor(e,r){this.syntaxTreeRoot=r;this.roots=[];this.formTree(e)}formTree(e){e.sort((o,s)=>o.mainBlock.startIndex-s.mainBlock.startIndex||o.mainBlock.endIndex-s.mainBlock.endIndex);let r=[],n=()=>r[r.length-1],i=(o,s)=>o.mainBlock.startIndex===s.mainBlock.startIndex&&o.mainBlock.endIndex===s.mainBlock.endIndex;for(let o of e){let s={info:o,children:[]},a=n();if(!a){this.roots.push(s),r.push(s);continue}if(!i(a.info,o)){for(;a&&!oo.doesContain(a.info.mainBlock,o.mainBlock);)r.pop(),a=n();a?a.children.push(s):this.roots.push(s),r.push(s)}}}};var LE=class extends Error{constructor(e){super(`Unrecognized language: ${e}`)}},hce={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",tsx:"tsx",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java",rust:"rust"};function Bl(t){return t in hce}function Oi(t){if(Bl(t))return hce[t];throw new LE(t)}function Tp(t,e){return Object.fromEntries(t.map(r=>[r,e]))}var gce={...Tp(["javascript","typescript","tsx"],[[`[
				(call_expression
					function: (identifier) @identifier)
				(call_expression
					function: (member_expression
						(property_identifier) @identifier))
			] @call_expression`]]),python:[[`[
				(call
					function: (identifier) @identifier)
				(call
					function: (attribute
						attribute: (identifier) @identifier))
			] @call_expression`]],csharp:[[`[
				(invocation_expression
					function: (identifier) @identifier)
				(invocation_expression
					function: (member_access_expression
						name: (identifier) @identifier))
			  ] @call_expression`]],go:[[`[
				(call_expression
					((selector_expression
						(field_identifier) @identifier)))
				(call_expression
					(identifier) @identifier)
			] @call_expression`]],java:[[`[
				(method_invocation
				  name: (identifier) @identifier)
			] @call_expression`]],ruby:[[`[
				(call (identifier) @identifier
					(#not-match? @identifier "new|send|public_send|method"))
				(call
					receiver: (identifier)
					method: (identifier) @method
					(#match? @method "^(send|public_send|method)")
					arguments: (argument_list
						(simple_symbol) @symbol))
			] @call_expression`]],cpp:[[`[
				(call_expression (identifier) @identifier)
				(call_expression
					(field_expression
						field: (field_identifier) @identifier))
				(call_expression
					(call_expression
						(primitive_type)
						(argument_list
							(pointer_expression
							(identifier) @identifier))))
			] @call_expression`]],rust:[[`[
				(call_expression (identifier) @identifier)
				(call_expression (field_expression (identifier) (field_identifier) @identifier))
				(call_expression (scoped_identifier (identifier) (identifier) @identifier (#not-match? @identifier "new")))
			] @call_expression`]]},vce={...Tp(["javascript","typescript","tsx"],[["(class_declaration) @class_declaration"]]),java:[["(class_declaration) @class_declaration"]],csharp:[["(class_declaration) @class_declaration"]],python:[["(class_definition) @class_declaration"]],cpp:[["(class_specifier) @class_declaration"]],ruby:[["(class) @class_declaration"]],go:[[`(type_declaration
				(type_spec
					(type_identifier) @type_identifier)) @class_declaration`]],rust:[["(impl_item (type_identifier) @type_identifier) @class_declaration"]]},_ce={typescript:[[`[
				(interface_declaration)
				(type_alias_declaration)
			] @type_declaration`]],csharp:[[`(interface_declaration
				(identifier) @type_identifier) @type_declaration`]],cpp:[[`[
				(struct_specifier
					(type_identifier) @type_identifier)
				(union_specifier
					(type_identifier) @type_identifier)
				(enum_specifier
					(type_identifier) @type_identifier)
			] @type_declaration`]],java:[[`(interface_declaration
				(identifier) @type_identifier) @type_declaration`]],go:[[`(type_declaration
				(type_spec
					(type_identifier) @type_identifier)) @type_declaration`]],ruby:[["((constant) @type_identifier) @type_declaration"]],python:[[`(class_definition
				(identifier) @type_identifier) @type_declaration`]]},yce={typescript:[["(type_identifier) @type_identifier"]],go:[["(type_identifier) @type_identifier"]],ruby:[["(constant) @type_identifier"]],csharp:[[`[
				(base_list
					(identifier) @type_identifier)
				(variable_declaration
					(identifier) @type_identifier)
			]`]],cpp:[["(type_identifier) @type_identifier"]],java:[["(type_identifier) @type_identifier"]],python:[[`[
				(type (identifier) @type_identifier)
				(argument_list
					(identifier) @type_identifier)
			]`]]},xce={...Tp(["javascript","typescript","tsx"],[[`(new_expression
				constructor: (identifier) @new_expression)`]]),python:[[`(call
				function: (identifier) @new_expression)`]],csharp:[[`(object_creation_expression
				(identifier) @new_expression)`]],java:[[`(object_creation_expression
				(type_identifier) @new_expression)`]],cpp:[[`(declaration
				(type_identifier) @new_expression)`]],go:[["(composite_literal (type_identifier) @new_expression)"]],ruby:[[`((call
				receiver: ((constant) @new_expression)
				method: (identifier) @method)
					(#eq? @method "new"))`]],rust:[[`(call_expression
				(scoped_identifier
					(identifier) @new_expression
					(identifier) @identifier
					(#eq? @identifier "new")))`]]},bce={python:[[`[
				(function_definition
					name: (identifier) @identifier
					body: (block
							(expression_statement (string))? @docstring) @body)
				(assignment
					left: (identifier) @identifier
					right: (lambda) @body)
			] @function`],['(ERROR ("def" (identifier) (parameters))) @function']],...Tp(["javascript","typescript","tsx"],[[`[
				(function
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(function_declaration
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(generator_function
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(generator_function_declaration
					name: (identifier)? @identifier
					body: (statement_block) @body)
				(method_definition
					name: (property_identifier)? @identifier
					body: (statement_block) @body)
				(arrow_function
					body: (statement_block) @body)
			] @function`]]),go:[[`[
				(function_declaration
					name: (identifier) @identifier
					body: (block) @body)
				(method_declaration
					name: (field_identifier) @identifier
					body: (block) @body)
			] @function`]],ruby:[[`[
				(method
					name: (_) @identifier
					parameters: (method_parameters)? @params
					[(_)+ "end"] @body)
				(singleton_method
					name: (_) @identifier
					parameters: (method_parameters)? @params
					[(_)+ "end"] @body)
			] @function`]],csharp:[[`[
				(constructor_declaration
					(identifier) @identifier
					(block) @body)
				(destructor_declaration
					(identifier) @identifier
					(block) @body)
				(operator_declaration
					(block) @body)
				(method_declaration
					(identifier) @identifier
					(block) @body)
				(local_function_statement
					(identifier) @identifier
					(block) @body)
			] @function`]],cpp:[[`(function_definition
					(_
					(identifier) @identifier)
				(compound_statement) @body) @function`]],java:[[`[
				(constructor_declaration
					name: (identifier) @identifier
					body: (constructor_body) @body)
				(method_declaration
					name: (_) @identifier
					body: (block) @body)
				(lambda_expression
					body: (block) @body)
			] @function`]],rust:[[`[
				(function_item (identifier) @identifier)
				(let_declaration (identifier) @identifier)
			] @function`]]},Ece={...Tp(["javascript","typescript","tsx"],[[`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]]),java:[[`((block_comment) @block_comment
			(#match? @block_comment "^\\\\/\\\\*\\\\*")) @docComment`]],cpp:[[`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]],csharp:[[`(
			((comment) @c
				(#match? @c "^\\\\/\\\\/\\\\/"))+
		) @docComment`]],rust:[[`((line_comment) @comment
			(#match? @comment "^///|^//!"))+ @docComment`]],go:[["((comment)+) @docComment"]],ruby:[["((comment)+) @docComment"]],python:[[`(expression_statement
			(string) @docComment)`]]},Tce={...Tp(["typescript","tsx"],["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"]),javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"],rust:["source_file","function_item","impl_item","let_declaration"]},Sce={typescript:[[ql("typescript")]],tsx:[[ql("tsx")]],javascript:[[ql("javascript")]],java:[[ql("java")]],cpp:[[ql("cpp")]],csharp:[[ql("csharp")]],python:[[ql("python")]],go:[[ql("go")]],ruby:[[ql("ruby")]],rust:[[ql("rust")]]},gMe={...Tp(["typescript","tsx","javascript"],["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"]),java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"],rust:["for_statement","if_statement","while_statement","loop_statement","match_expression"]},vMe={...Tp(["typescript","tsx"],["lexical_declaration","expression_statement","public_field_definition"]),javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"],rust:["expression_statement","let_declaration","use_declaration","assignment_expression","macro_definition","extern_crate_declaration"]},_Me={...Tp(["typescript","tsx"],["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition"]),javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:["class","method","module"],rust:["function_item","impl_item","mod_item","struct_item","trait_item","union_item"]},Cce={typescript:[[Hl("typescript")]],tsx:[[Hl("tsx")]],javascript:[[Hl("javascript")]],java:[[Hl("java")]],cpp:[[Hl("cpp")]],csharp:[[Hl("csharp")]],python:[[Hl("python")]],go:[[Hl("go")]],rust:[[Hl("rust")]],ruby:[[Hl("ruby")]]};function ql(t){return Tce[Oi(t)].map(e=>`(${e}) @scope`).join(`
`)}function Hl(t){return`[
		${_Me[Oi(t)].map(r=>`(${r})`).join(`
`)}
	] @definition`}function ME(t,e){return Tce[Oi(t)].includes(e.type)||gMe[Oi(t)].includes(e.type)}function g9(t,e){return vMe[Oi(t)].includes(e.type)}var v9=class{constructor(){this.loadedLanguagesCache=new Map}loadLanguage(e){return this.loadedLanguagesCache.has(e)||this.loadedLanguagesCache.set(e,this._doLoadLanguage(e)),this.loadedLanguagesCache.get(e)}_doLoadLanguage(e){let n=`tree-sitter-${e==="csharp"?"c-sharp":e}.wasm`,i=FE.basename(__dirname)==="dist"?FE.resolve(__dirname,n):FE.resolve(__dirname,"../../../dist",n);return uR.default.Language.load(i)}};function yMe(t){return{tree:t,dispose:()=>t.delete()}}var _9=class t{static{this.CACHE_SIZE_PER_LANGUAGE=5}constructor(){this.caches=new Map,this.languageLoader=new v9,this._parser=null}get parser(){return this._parser||(this._parser=new uR.default),this._parser}async parse(e,r){await uR.default.init();let n=this.getParseTreeCache(e),i=n.get(r);if(i)return i.tree;let o=await this.languageLoader.loadLanguage(e);this.parser.setLanguage(o);let s=this.parser.parse(r);return n.put(r,yMe(s)),s}delete(){this._parser&&(this.parser.delete(),this._parser=null);for(let e of this.caches.values())e.dispose()}getParseTreeCache(e){let r=this.caches.get(e);return r||(r=new cR(t.CACHE_SIZE_PER_LANGUAGE),this.caches.set(e,r)),r}},Rce=new _9;function y9(){Rce.delete()}function Zo(t,e){return Rce.parse(Oi(t),e)}function Sp(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}function xMe(t,e){let r=Sce[Oi(t)];return Sp(r,e)}function x9(t,e){let r=bce[Oi(t)];return Sp(r,e)}function bMe(t,e){let r=gce[Oi(t)];return r?Sp(r,e):[]}function EMe(t,e){let r=vce[Oi(t)];return r?Sp(r,e):[]}function TMe(t,e){let r=_ce[Oi(t)];return r?Sp(r,e):[]}function SMe(t,e){let r=yce[Oi(t)];return r?Sp(r,e):[]}function CMe(t,e){let r=xce[Oi(t)];return r?Sp(r,e):[]}function IMe(t,e){let r=Cce[Oi(t)];return Sp(r,e)}async function wMe(t,e,r){let n=await Zo(t,e);return bMe(t,n.rootNode).reduce((s,a)=>{let l=a.captures.find(c=>c.name==="call_expression").node;if(oo.doIntersect(r,l)){let c,u;t==="ruby"&&(u=a.captures.find(p=>p.name==="symbol")?.node,c=u?.text?.slice(1)),u??=a.captures.find(p=>p.name==="identifier")?.node,c??=u?.text,s.push({identifier:c??"",text:l.text,startIndex:(u??l).startIndex,endIndex:(u??l).endIndex})}return s},[])}async function AMe(t,e){let r=await Zo(t,e);return x9(t,r.rootNode).map(o=>{let s=o.captures.find(l=>l.name==="function").node;return{identifier:o.captures.find(l=>l.name==="identifier")?.node.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function RMe(t,e){let r=await Zo(t,e);return EMe(t,r.rootNode).map(o=>{let s=o.captures.find(l=>l.name==="class_declaration").node;return{identifier:s?.children.find(l=>l.type==="type_identifier"||l.type==="identifier"||l.type==="constant")?.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function DMe(t,e){let r=await Zo(t,e);return TMe(t,r.rootNode).map(o=>{let s=o.captures.find(l=>l.name==="type_declaration").node,a=o.captures.find(l=>l.name==="type_identifier")?.node.text;return a||(a=s?.children.find(l=>l.type==="type_identifier")?.text),{identifier:a??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}async function PMe(t,e,r){let n=await Zo(t,e);return SMe(t,n.rootNode).reduce((s,a)=>{let l=a.captures.find(c=>c.name==="type_identifier").node;return oo.doIntersect(r,l)&&s.push({identifier:l.text,text:l.text,startIndex:l.startIndex,endIndex:l.endIndex}),s},[])}async function NMe(t,e,r){let n=await Zo(t,e);return CMe(t,n.rootNode).reduce((s,a)=>{let l=a.captures.find(c=>c.name==="new_expression").node;return oo.doIntersect(r,l)&&s.push({identifier:l.text,text:l.text,startIndex:l.startIndex,endIndex:l.endIndex}),s},[])}async function kMe(t,e){let r=await Zo(t,e),n=IMe(t,r.rootNode);return jMe(t,n,r.rootNode)}async function OMe(t,e){let r=await Zo(t,e);return x9(t,r.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="function").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}async function LMe(t,e){let r=await Zo(t,e);return x9(t,r.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="body").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}async function MMe(t,e,r){let n=await Zo(t,e),i=xMe(t,n.rootNode),o;for(let s of i){let a=s.captures[0].node,l=Sf.ofSyntaxNode(a);if(Sf.doesContain(l,r)&&(o=a),Oc.isBefore(r.endPosition,l.startPosition))break}if(o)return Sf.ofSyntaxNode(o);throw new Error("No parent node found")}async function FMe(t,e,r,n){let o=(await Zo(t,e)).rootNode.descendantForPosition(r.startPosition,r.endPosition),s={startPosition:o.startPosition,endPosition:o.endPosition},a=Pce(t,o,n,r,!0);return Sf.equals(s,a)?Dce(t,o):a}function Dce(t,e){let r=e.parent,n={startPosition:e.startPosition,endPosition:e.endPosition};if(ME(t,e)||!r)return n;let{filteredRanges:i,indexOfInterest:o}=Nce(t,r.children,n,!1);if(o-1>=0&&o+1<=i.length-1){let s=i[o-1],a=i[o+1];return{startPosition:s.startPosition,endPosition:a.endPosition}}return Dce(t,r)}function Pce(t,e,r,n,i){let o=e.children;if(e.endPosition.row-e.startPosition.row+1<=r){let a=ME(t,e)?{startPosition:e.startPosition,endPosition:e.endPosition}:wce(t,o,r,n,i),l=e.parent;return l?Pce(t,l,r,a,!1):a}return wce(t,o,r,n,i)}function Ice(t,e){return e.endPosition.row-t.startPosition.row+1}function wce(t,e,r,n,i){if(e.length===0)return n;let{filteredRanges:o,indexOfInterest:s}=Nce(t,e,n,i),a=0,l=o.length-1,c=o[a],u=o[l];for(;Ice(c,u)>r&&a!==l;)s-a<l-s?(l--,u=o[l]):(a++,c=o[a]);return Ice(c,u)<=r?{startPosition:c.startPosition,endPosition:u.endPosition}:n}function Nce(t,e,r,n){let i,o;if(n?(i=e.filter(s=>ME(t,s)||g9(t,s)),o=fce(i,r,(s,a)=>Oc.isBefore(s.startPosition,a.startPosition)),i.splice(o,0,r)):(i=e.filter(s=>Sf.doesContain(s,r)||ME(t,s)||g9(t,s)),o=i.findIndex(s=>Sf.doesContain(s,r))),o===-1)throw new Error("Valid index not found");return{filteredRanges:i,indexOfInterest:o}}function kce(t,e,r){let n=[t.rootNode],i=[];for(;;){let o=n.map(s=>[s,oo.intersectionSize(s,e)]).filter(([s,a])=>a>0).sort(([s,a],[l,c])=>c-a);if(o.length===0)return i.length===0?void 0:mce(i,([s,a],[l,c])=>a-c)[0];{let s=o.map(([a,l])=>{let c=oo.len(a),u=Math.abs(oo.len(e)-l),d=(l-u)/c;return[a,d]});i.push(...s.filter(([a,l])=>b9(a,r))),n=[],n.push(...s.flatMap(([a,l])=>a.children))}}}async function UMe(t,e,r){if(!Bl(t))return;let i=(await Zo(t,e)).rootNode.descendantForIndex(r.startIndex,r.endIndex);if(i.type.match(/identifier/)&&(i.parent===null||b9(i.parent,t))){let o=i.parent,s=o===null?void 0:{startIndex:o.startIndex,endIndex:o.endIndex};return{identifier:i.text,nodeRange:s}}}async function BMe(t,e,r){if(!Bl(t))return;let n=await Zo(t,e),o=r.startIndex===r.endIndex?void 0:kce(n,r,t);if(o)return{nodeIdentifier:Ace(o,t),nodeToDocument:h9.ofSyntaxNode(o),nodeSelectionBy:"matchingSelection"};let a=n.rootNode.descendantForIndex(r.startIndex,r.endIndex),l=0;for(;!b9(a,t)&&a.parent!==null;)a=a.parent,++l;return{nodeIdentifier:Ace(a,t),nodeToDocument:h9.ofSyntaxNode(a),nodeSelectionBy:"expanding"}}function Ace(t,e){switch(e){case"python":case"csharp":return t.children.find(r=>r.type.match(/identifier/))?.text;case"golang":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/spec/))?.children.find(i=>i.type.match(/identifier/))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":case"java":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/declarator/))?.children.find(i=>i.type.match(/identifier/))?.text}case"ruby":return t.children.find(r=>r.type.match(/constant|identifier/))?.text;default:return t.children.find(r=>r.type.match(/identifier/))?.text}}function b9(t,e){switch(e){case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return t.type.match(/definition|declaration|declarator|export_statement/);case"golang":return t.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return t.type.match(/definition|declaration|declarator|class_specifier/);case"ruby":return t.type.match(/module|class|method|assignment/);default:return t.type.match(/definition|declaration|declarator/)}}async function qMe(t,e){if(!new Set(["javascript","typescript","java","cpp","csharp","go","ruby"]).has(t)||!Bl(t))return;let n=await Zo(t,e),i=Ece[Oi(t)],o=Sp(i,n.rootNode).flatMap(a=>a.captures.filter(l=>l.name==="docComment")),s=HMe(o);if(s.length>1&&(s=s.filter(a=>a.includes(`
`)||!a.match(/(code implementation|implementation details)/i))),s.length===1)return s[0]}function HMe(t){let e=[];for(let r=0;r<t.length;++r){let n=[t[r].node.text];for(;r+1<t.length&&t[r].node.endPosition.row+1===t[r+1].node.startPosition.row;)++r,n.push(t[r].node.text);e.push(n.join(`
`))}return e}function jMe(t,e,r){let n=Oi(t),i;switch(n){case"python":i=$Me(e);break;case"ruby":i=zMe(e);break;default:{i=GMe(e,n);break}}return new lR(i,Lc.ofSyntaxNode(r))}function GMe(t,e){let r=new Map;return t.forEach(n=>{let o=n.captures.find(a=>a.name==="definition")?.node,s=o?.childForFieldName("body");if(o&&s){let a;switch(e){case"typescript":case"javascript":a=WMe(o);break;case"java":case"rust":a=KMe(o);break;default:{a=UE(o);break}}r.get(o.id)||r.set(o.id,{mainBlock:Lc.ofSyntaxNode(o),detailBlocks:{comments:a.map(c=>Lc.ofSyntaxNode(c)),body:Lc.ofSyntaxNode(s)}})}}),Array.from(r.values())}function VMe(t){if(!(t.length<2))for(let e=1;e<t.length;e++){let r=t[e];if(!r.type.includes("parameters"))return r}}function zMe(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(o=>o.name==="definition")?.node;if(i){let o=i.namedChildren,s=VMe(o);if(s){let a=o[o.length-1],l=i.text.substring(s.startIndex-i.startIndex,a.endIndex-i.startIndex),c=UE(i);e.get(i.id)||e.set(i.id,{mainBlock:Lc.ofSyntaxNode(i),detailBlocks:{comments:c.map(p=>Lc.ofSyntaxNode(p)),body:{range:{startPosition:{row:s.startPosition.row,column:s.startPosition.column},endPosition:{row:a.endPosition.row,column:a.endPosition.column}},startIndex:s.startIndex,text:l,endIndex:a.endIndex}}})}}}),Array.from(e.values())}function $Me(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(s=>s.name==="definition")?.node,o=i?.childForFieldName("body");if(i&&o){let s=QMe(o),a=YMe(i);e.set(i.id,{mainBlock:Lc.ofSyntaxNode(i),detailBlocks:{docstring:s?Lc.ofSyntaxNode(s):void 0,decorator:a?Lc.ofSyntaxNode(a):void 0,body:Lc.ofSyntaxNode(o)}});return}}),Array.from(e.values())}function UE(t,e=["comment"]){let r=[],n=t.previousNamedSibling;for(;n&&e.some(i=>i===n?.type);)r.push(n),n=n.previousNamedSibling;return r.reverse()}function WMe(t){let e=t.parent;return e?.type==="export_statement"?UE(e):UE(t)}function KMe(t){return UE(t,["block_comment","line_comment"])}function YMe(t){let e=t.previousNamedSibling;return e?.type==="decorator"?e:void 0}function QMe(t){let e=t.firstChild;if(!e||e.type!=="expression_statement")return;let r=e.firstChild;return r?.type==="string"?r:void 0}var XMe=Oce.join(__dirname,"worker2.js"),BE=null,Co=pR;function Lce(t,e){t&&(BE=new fy(XMe,e),Co=BE.proxy)}function Mce(){BE&&(BE.terminate(),BE=null,Co=pR),y9()}async function Fce(t,e){return Co._getFunctionPositions(t,e)}async function Uce(t,e){return Co._getFunctionBodies(t,e)}async function Bce(t,e,r){return Co._getCoarseParentScope(t,e,r)}async function qce(t,e,r,n){return Co._getFixSelectionOfInterest(t,e,r,n)}async function Hce(t,e,r){return Co._getCallExpressions(t,e,r)}async function E9(t,e){return Co._getFunctionDefinitions(t,e)}async function jce(t,e,r){return Co._getNewExpressions(t,e,r)}async function T9(t,e){return Co._getClassDeclarations(t,e)}async function Gce(t,e){return Co._getTypeDeclarations(t,e)}async function Vce(t,e,r){return Co._getTypeReferences(t,e,r)}async function S9(t,e){return Co._getSemanticChunkTree(t,e)}async function zce(t,e,r){return Co._getDocumentableNodeIfOnIdentifier(t,e,r)}async function $ce(t,e,r){return Co._getNodeToDocument(t,e,r)}async function Wce(t,e){return Co._extractDoc(t,e)}var Wa=Go("ConversationOptions");var so=class{constructor(e){this.anchor=e}},bi=class{constructor(e,r){this.request=e;this.sessionId=r;this.status="in-progress";this.contextParts=[];this.references=[]}},my=class extends bi{constructor(r,n){super(r);this._getShorterMessage=n}getShorterMessage(){return this._getShorterMessage()}},Io=class t{constructor(e=[]){this.turns=e}copy(){let e=JSON.parse(JSON.stringify(this.turns));return new t(e)}getLatestTurn(){return this.turns[this.turns.length-1]}addTurn(e){this.turns.forEach(r=>r.chatMessages=[]),this.turns.push(e)}removeTurn(e){let r=this.turns.findIndex(n=>n.requestId===e);if(r!==-1)return this.turns.splice(r,1)[0]}insertBeforeLatestTurn(e){this.turns.splice(this.turns.length-1,0,...e)}getState(){return{turns:this.turns}}};var ca=class{};function C9(t){return typeof t=="object"&&t!==null&&"targetUri"in t}var At=class{getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>r.scheme===e.scheme&&r.authority===e.authority&&e.fsPath.startsWith(r.fsPath))}};var mr=class{};var Yce={abap:{start:'"',end:""},bat:{start:"REM",end:""},bibtex:{start:"%",end:""},blade:{start:"#",end:""},c:{start:"//",end:""},clojure:{start:";",end:""},coffeescript:{start:"//",end:""},cpp:{start:"//",end:""},csharp:{start:"//",end:""},css:{start:"/*",end:"*/"},dart:{start:"//",end:""},dockerfile:{start:"#",end:""},elixir:{start:"#",end:""},erb:{start:"<%#",end:"%>"},erlang:{start:"%",end:""},fsharp:{start:"//",end:""},go:{start:"//",end:""},groovy:{start:"//",end:""},haml:{start:"-#",end:""},handlebars:{start:"{{!",end:"}}"},haskell:{start:"--",end:""},html:{start:"<!--",end:"-->"},ini:{start:";",end:""},java:{start:"//",end:""},javascript:{start:"//",end:""},javascriptreact:{start:"//",end:""},jsonc:{start:"//",end:""},jsx:{start:"//",end:""},julia:{start:"#",end:""},kotlin:{start:"//",end:""},latex:{start:"%",end:""},less:{start:"//",end:""},lua:{start:"--",end:""},makefile:{start:"#",end:""},markdown:{start:"[]: #",end:""},"objective-c":{start:"//",end:""},"objective-cpp":{start:"//",end:""},perl:{start:"#",end:""},php:{start:"//",end:""},powershell:{start:"#",end:""},pug:{start:"//",end:""},python:{start:"#",end:""},ql:{start:"//",end:""},r:{start:"#",end:""},razor:{start:"<!--",end:"-->"},ruby:{start:"#",end:""},rust:{start:"//",end:""},sass:{start:"//",end:""},scala:{start:"//",end:""},scss:{start:"//",end:""},shellscript:{start:"#",end:""},slim:{start:"/",end:""},solidity:{start:"//",end:""},sql:{start:"--",end:""},stylus:{start:"//",end:""},svelte:{start:"<!--",end:"-->"},swift:{start:"//",end:""},terraform:{start:"#",end:""},tex:{start:"%",end:""},typescript:{start:"//",end:""},typescriptreact:{start:"//",end:""},vb:{start:"'",end:""},verilog:{start:"//",end:""},"vue-html":{start:"<!--",end:"-->"},vue:{start:"//",end:""},xml:{start:"<!--",end:"-->"},xsl:{start:"<!--",end:"-->"},yaml:{start:"#",end:""}};function JMe(t,e){let r=Math.abs(t.start.line-e.start.line),n=Math.abs(t.end.line-e.end.line);return r+n>30?t:e}function ZMe(t,e,r){let n=Qce(t,e,r.start),i=Qce(t,e,r.end),o=t.offsetAt(r.start),s=t.offsetAt(r.end);return n&&(o=Math.min(o,n.startIndex),s=Math.max(s,n.endIndex)),i&&(o=Math.min(o,i.startIndex),s=Math.max(s,i.endIndex)),new tt(t.positionAt(o),t.positionAt(s))}async function Xce(t,e,r,n){let i=oo.toTreeSitterOffsetRange(r,e),o=await jl(t,e,n,()=>Hce(e.languageId,e.getText(),i),[]),s=await jl(t,e,n*3,async()=>await Promise.all(o.map(async p=>{let d=e.positionAt(p.startIndex),f=t.get(ca);try{let m=await f.getImplementations(e.uri,d);return m.length?m:await f.getDefinitions(e.uri,d)}catch{return[]}})),[]),a=[];for(let p=0;p<s.length;p++){let d=o[p],f=s[p];for(let m of f){let{uri:h,range:g}=C9(m)?{uri:m.targetUri,range:m.targetRange}:m,v=await t.get(At).openTextDocument(h),y=(await E9(v.languageId,v.getText())).find(b=>b.identifier===d.identifier);if(y){let b=oo.toTreeSitterOffsetRange(g,v);a.push({uri:h,range:g,version:v.version,identifier:d.identifier,startIndex:b.startIndex,endIndex:b.endIndex,text:y.text})}}}if(a.length!==0)return a;let l=e.getText(),c=await jl(t,e,n,()=>E9(e.languageId,l),[]),u=[];for(let p of c)for(let d of o)p.identifier===d.identifier&&u.push(p);return u.sort((p,d)=>p.startIndex-d.startIndex)}async function Jce(t,e,r,n){let i=oo.toTreeSitterOffsetRange(r,e),o=await jl(t,e,n,()=>jce(e.languageId,e.getText(),i),[]),s=await jl(t,e,n*3,async()=>await Promise.all(o.map(async p=>{try{let d=e.positionAt(p.startIndex),f=t.get(ca),m=await f.getImplementations(e.uri,d);return m.length?m:await f.getDefinitions(e.uri,d)}catch{return[]}})),[]),a=[];for(let p=0;p<s.length;p++){let d=o[p],f=s[p];for(let m of f){let{uri:h,range:g}=C9(m)?{uri:m.targetUri,range:m.targetRange}:m,v=await t.get(At).openTextDocument(h),_=(await T9(v.languageId,v.getText())).find(y=>y.identifier===d.identifier);if(_){let y=oo.toTreeSitterOffsetRange(g,v);a.push({uri:h,range:g,version:v.version,identifier:d.identifier,startIndex:y.startIndex,endIndex:y.endIndex,text:_.text})}}}if(a.length!==0)return a;let l=e.getText(),c=await jl(t,e,n,()=>T9(e.languageId,l),[]),u=[];for(let p of c)for(let d of o)p.identifier===d.identifier&&u.push(p);return u.sort((p,d)=>p.startIndex-d.startIndex)}async function Zce(t,e,r,n){let i=oo.toTreeSitterOffsetRange(r,e),o=await jl(t,e,n,()=>Vce(e.languageId,e.getText(),i),[]),s=e.getText(),a=await jl(t,e,n,()=>Gce(e.languageId,s),[]),l=[];for(let c of a)for(let u of o)c.identifier===u.identifier&&l.push(c);return l.sort((c,u)=>c.startIndex-u.startIndex)}function Qce(t,e,r){let n=t.offsetAt(r),i=null;for(let o of e)if(!(o.endIndex<n)){if(o.startIndex>n)break;i=o}return i}function e6e(t,e){return e===0?t.then(r=>({type:"success",value:r})):new Promise((r,n)=>{let i=setTimeout(()=>r({type:"timeout"}),e);t.then(o=>{clearTimeout(i),r({type:"success",value:o})}).catch(o=>{clearTimeout(i),n(o)})})}async function t6e(t,e,r){let n=await jl(t,e,r,()=>Fce(e.languageId,e.getText()),[]);return n.sort((i,o)=>i.startIndex-o.startIndex),n}async function qE(t,e,r){let n=await jl(t,e,r,()=>Uce(e.languageId,e.getText()),[]);return n.sort((i,o)=>i.startIndex-o.startIndex),r6e(n)}function r6e(t){t.sort((r,n)=>r.startIndex-n.startIndex||n.endIndex-r.endIndex);let e=[];for(let r=0,n=t.length;r<n;){e.push(t[r]);let i=r+1;for(;i<t.length&&oo.doesContain(t[r],t[i]);)++i;r=i}return e}async function jl(t,e,r,n,i){let o=t.get(Le).getLogger("asyncCompute");try{let s=await e6e(ele(e,n,i),r);return s.type==="success"?s.value:(o.info(`Computing async parser based result took longer than ${r}ms`),i)}catch(s){return s instanceof LE||(o.exception(s,"Failed to compute async parser based result"),t.get(dt).sendExceptionTelemetry(s,"Failed to compute async parser based result")),i}}async function ele(t,e,r,n=0){let i=t.version,o=await e();return t.version!==i?n<3?ele(t,e,r,n+1):r:o}function Cf(t){let e=Yce[t.languageId];return e?e.end?{languageId:t.languageId,lineCommentToken:"//"}:{languageId:t.languageId,lineCommentToken:e.start}:{languageId:t.languageId,lineCommentToken:"//"}}var Tn=class t{static forDocument(e,r){return this.forUri(e,r.uri)}static forUri(e,r){return`${this.forLanguage(e)}: ${r.path}`}static forLanguage(e){return`${e.lineCommentToken} FILEPATH`}static testLine(e,r){let n=t.forLanguage(e);return r.trimStart().startsWith(n)}};var ii=class{static begin(e,r){return typeof r>"u"?`${e.lineCommentToken} BEGIN:`:`${e.lineCommentToken} BEGIN: ${r}`}static end(e,r){return typeof r>"u"?`${e.lineCommentToken} END:`:`${e.lineCommentToken} END: ${r}`}};function hy(t){return/```[\s\S]+\n```/m.test(t)}var n6e={analysisTimeoutMs:100};async function dR(t,e,r){let n=t.get(mr).extensionMode===py.Test?0:n6e.analysisTimeoutMs,i=Date.now(),o=await t6e(t,e,n),s=Date.now()-i,a=n===0?0:Math.max(10,n-s),l=await qE(t,e,a),c=ZMe(e,o,r);return{expandedRange:e.validateRange(JMe(r,c)),rangeExpandedToFunction:c,functionBodies:l}}var I9;(e=>{function t(r){return r&&r.expandedRange&&r.contextInfo}e.is=t})(I9||={});var la=class{constructor(e){this.charLimit=e;this._totalChars=0}get totalChars(){return this._totalChars}addLine(e){this._totalChars+=e.length+1}lineWouldFit(e){return this._totalChars+e.length+1<this.charLimit}},wo=class t{constructor(e,r,n,i){this.tracker=e;this.document=r;this.language=n;this.kindOrUniqueStr=i;this.lines=[];this.firstLineIndex=this.document.lineCount;this.lastLineIndex=-1;this.isComplete=!1;this.nonTrimWhitespaceCharCount=0;this._startMarker=ii.begin(n,i),this._endMarker=ii.end(n,i),this.lines=[],this.firstLineIndex=r.lineCount,this.lastLineIndex=-1}get startMarker(){return this._startMarker}get endMarker(){return this._endMarker}get lineCount(){return this.lines.length}get isVerySmallOrEmpty(){return this.nonTrimWhitespaceCharCount<10}get hasContent(){return this.lines.length===0||this.nonTrimWhitespaceCharCount===0?!1:this.lines.length>0}clone(){let e=new t(this.tracker,this.document,this.language,this.kindOrUniqueStr);return e._startMarker=this.startMarker,e._endMarker=this.endMarker,e.lines.push(...this.lines),e.firstLineIndex=this.firstLineIndex,e.lastLineIndex=this.lastLineIndex,e.nonTrimWhitespaceCharCount=this.nonTrimWhitespaceCharCount,e}clear(){this.lines.length=0,this.firstLineIndex=this.document.lineCount,this.lastLineIndex=-1,this.nonTrimWhitespaceCharCount=0}generatePrompt(e){if(!this.hasContent)return[];let r=[];return r.push("```"+this.language.languageId),r.push(Tn.forDocument(this.language,this.document)),e&&r.push(`${this.startMarker}`),r.push(...this.lines),e&&r.push(`${this.endMarker}`),r.push("```"),r}prependLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.unshift(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}appendLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.push(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}trim(e){let r=e?Math.min(this.lastLineIndex,e.start.line):this.lastLineIndex;for(;this.firstLineIndex<r&&this.lines.length>0&&this.lines[0].trim().length===0;)this.firstLineIndex++,this.lines.shift();let n=e?Math.max(this.firstLineIndex,e.end.line):this.firstLineIndex;for(;n<this.lastLineIndex&&this.lines.length>0&&this.lines[this.lines.length-1].trim().length===0;)this.lastLineIndex--,this.lines.pop()}removeFirstNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(0,e),n=0;for(let i of r)n+=i.trim().length;return this.firstLineIndex+=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}removeLastNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(this.lines.length-e,e),n=0;for(let i of r)n+=i.trim().length;return this.lastLineIndex-=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}takeFromAbove(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeLastNLines(r);this.lines.unshift(...n),this.firstLineIndex-=n.length,this.nonTrimWhitespaceCharCount+=i}takeFromBelow(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeFirstNLines(r);this.lines.push(...n),this.lastLineIndex+=n.length,this.nonTrimWhitespaceCharCount+=i}mergeFromAbove(e){e.hasContent&&(this.lines.unshift(...e.lines),this.firstLineIndex=e.firstLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}mergeFromBelow(e){e.hasContent&&(this.lines.push(...e.lines),this.lastLineIndex=e.lastLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}toRange(){try{let e=this.lastLineIndex===-1?this.document.lineCount-1:this.lastLineIndex,r=new tt(this.firstLineIndex,0,e,this.document.lineAt(e).text.length);if(this.document.validateRange(r)===r)return r}catch{return}}toString(){return`{${this.firstLineIndex} -> ${this.lastLineIndex}}`}};var Rt=new class{constructor(){this._contextResolvers=new Map}get contextResolvers(){return this._contextResolvers.values()}getContextResolver(t){return this._contextResolvers.get(t)}register(t){return this._contextResolvers.set(t.kind,t),t}};var Pg=class t{constructor(e=void 0){this.nodeToDocument=e;this.kind="doc-selection"}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=i.wholeRange,s=this.nodeToDocument??await t.determineNodeToDocument(e,i),a=await t.generateDocContext(r.endpoint,i,s),l=[];{let u=[];u.push("I have the following code in the selection:"),u.push(...a.range.generatePrompt(!1)),l.push(u.join(`
`))}let c=[{uri:i.document.uri,version:i.document.version,ranges:Zn([a.range.toRange()])}];return{kind:this.kind,userMessages:l,usedContext:c,metadata:{expandedRange:o,contextInfo:a}}}static async determineNodeToDocument(e,r){let n=t.toTreeSitterOffsetRange(r.selection,r.document),i=Date.now(),o=await $ce(r.language.languageId,r.document.getText(),n),s=Date.now()-i;if(o){let a=t.toTreeSitterOffsetRange(r.wholeRange,r.document);t.sendNodeToDocumentTelemetry(e,n,a,o,r.document.languageId,s);let l=new tt(r.document.positionAt(o.nodeToDocument.startIndex),r.document.positionAt(o.nodeToDocument.endIndex));return{identifier:o.nodeIdentifier,range:l}}else return{range:r.wholeRange}}static toTreeSitterOffsetRange(e,r){return{startIndex:r.offsetAt(e.start),endIndex:r.offsetAt(e.end)}}static async generateDocContext(e,r,n){let{range:i}=n,o=new la(e.modelMaxTokenWindow*4/3),s=new wo(o,r.document,r.language,"ed8c6549bwf9"),a=new wo(new la(0),r.document,r.language,"abpxx6d04wxr"),l=new wo(new la(0),r.document,r.language,"be15d9bcejpp");for(let c=i.start.line,u=i.end.line;c<=u&&!(c===u&&i.end.character===0||!s.appendLine(c));++c);return s.trim(r.selection),{language:r.language,above:a,range:s,below:l,outlineAbove:"",outlineBelow:""}}static sendNodeToDocumentTelemetry(e,r,n,i,o,s){e.get(wr).sendTelemetryEvent("getNodeToDocument",{languageId:o,typeOfNodeToDocument:i.nodeToDocument.type,nodeToDocumentStart:i.nodeToDocument.startIndex.toString(),nodeToDocumentEnd:i.nodeToDocument.endIndex.toString(),selectionOffsetRangeStart:r.startIndex.toString(),selectionOffsetRangeEnd:r.endIndex.toString(),wholeRangeOffsetRangeStart:n.startIndex.toString(),wholeRangeOffsetRangeEnd:n.endIndex.toString()},{timeSpentMs:s})}},rle=Rt.register(new Pg);var K9=require("util");var Mr=class{};var Mc=Go("IIgnoreService");var es=class{constructor(e){this._accessor=e}async findFilesWithDefaultExcludes(e,r,n){let o=this._accessor?.safeGet(Mc)?.asMinimatchPattern({includeCopilotIgnore:!0,includeGitIgnore:!1}),s={include:e,maxResults:r,exclude:o,useDefaultExcludes:!0},a=[],l={report(c){a.push(c.uri)}};return await this.findTextInFiles({pattern:".",isRegExp:!0},s,l,n),r===1?a[0]:a}};var Rr=class{};var F9=Oe(Ele());function Tle(t,e){return typeof e=="string"?F9.default.isMatch(t.fsPath,e,{dot:!0}):F9.default.isMatch(t.fsPath,e.pattern,{dot:!0})}var vy={location:"sameFolder",prefix:"test_",suffixes:[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"]},_y={csharp:{suffixes:["Test"],location:"testFolder"},dart:{suffixes:["_test"],location:"testFolder"},go:{suffixes:["_test"],location:"sameFolder"},java:{suffixes:["Test"],location:"testFolder"},javascript:{suffixes:[".test",".spec"],location:"sameFolder"},kotlin:{suffixes:["Test"],location:"testFolder"},php:{suffixes:["Test"],location:"testFolder"},powershell:{suffixes:[".Tests"],location:"testFolder"},python:{prefix:"test_",location:"testFolder"},ruby:{suffixes:["_test","_spec"],location:"testFolder"},rust:{suffixes:[""],location:"testFolder"},swift:{suffixes:["Tests"],location:"testFolder"},typescript:{suffixes:[".test",".spec"],location:"sameFolder"}},F6e={cs:"csharp",dart:"dart",go:"go",java:"java",js:"javascript",kt:"kotlin",php:"php",ps1:"powershell",py:"python",rb:"ruby",rs:"rust",swift:"swift",ts:"typescript"},U6e=function(){let t={};for(let[e,r]of Object.entries(F6e))t[e]=_y[r];return t}(),GE=class{constructor(e,r){this._search=e;this._tabs=r}_findTabMatchingPattern(e){return this._tabs.tabs.find(n=>n.uri&&n.uri.scheme!==En.untitled&&Tle(n.uri,e))?.uri}async findTestFileForSourceFile(e,r){if(e.isUntitled)return;let n=Pc(e.uri),i=sa(e.uri),o=_y[e.languageId]??vy,s=[];if(o.prefix&&s.push(o.prefix+n),o.suffixes)for(let c of o.suffixes??[]){let u=n.replace(`${i}`,`${c}${i}`);s.push(u)}let a=`**/{${s.join(",")}}`,l=this._findTabMatchingPattern(a);return l||(l=await this._search.findFilesWithDefaultExcludes(a,1,r)),l}async findAnyTestFileForSourceFile(e,r){let n=_y[e.languageId]??vy,i=[];if(n.prefix&&i.push(`${n.prefix}*`),n.suffixes){let a=sa(e.uri);for(let l of n.suffixes??[])i.push(`*${l}${a}`)}let o=`**/{${i.join(",")}}`,s=this._findTabMatchingPattern(o);return s||(s=await this._search.findFilesWithDefaultExcludes(o,1,r)),s}async findFileForTestFile(e,r){let n=_y[e.languageId]??vy,i=Pc(e.uri),o=[];n.suffixes&&o.splice(0,0,...n.suffixes),n.prefix&&o.splice(0,0,n.prefix);for(let s of o){let a=i.replace(s,"");if(a!==i){let l=`**/${a}`,c=this._findTabMatchingPattern(l);if(c||(c=await this._search.findFilesWithDefaultExcludes(l,1,r)),c)return c}}}};function VE(t){let e;wt.isUri(t)||(e=_y[t.languageId],t=t.uri);let r=Pc(t),n=sa(t);return e??=U6e[n.replace(".","")],e?!(e.suffixes&&!e.suffixes.some(o=>r.endsWith(o+n))||e.prefix&&!r.startsWith(e.prefix)):!!(vy.suffixes.some(o=>r.endsWith(o+n))||r.startsWith(vy.prefix))}function Sle(t){let e=_y[t.languageId]??vy,r=Pc(t.uri);if(e.prefix)return e.prefix+r;let n=sa(t.uri),i=e.suffixes&&e.suffixes.length>0?e.suffixes[0]:".test";return r.replace(`${n}`,`${i}${n}`)}var B6e="vscode-notebook-cell";function Ln(t){return t.scheme===B6e}var pa=class{};var Li=new class{constructor(){this.commands=new Set}registerCommand(t){this.commands.add(t)}getCommand(t,e){return this.getCommands(e).find(r=>r.commandId===t)}getCommands(t){return Array.from(this.commands.values()).filter(e=>e.locations.includes(t))}};var If={workspace:["explain","tests","fix","new","newNotebook"],vscode:["search","api"],terminal:[]};function Cle(t){if(Object.keys(If).includes(t))return{agent:t};for(let[e,r]of Object.entries(If))if(r.includes(t))return{agent:e,command:t}}function U9(){return`
You are an AI programming assistant.
`.trim()}function Ng(){return`
When asked for your name, you must respond with "GitHub Copilot".
Follow the user's requirements carefully & to the letter.`.trim()}function Ip(){return`
Your expertise is strictly limited to software development topics.
Follow Microsoft content policies.
Avoid content that violates copyrights.
For questions not related to software development, simply give a reminder that you are an AI programming assistant.
Keep your answers short and impersonal.`.trim()}async function q6e(t,e,r){let n=Object.entries(If).reduce((i,[o,s])=>{let a=Li.getCommand(o,e)?.intent?.description;i+=`
* ${a}`;for(let l of s){let c=Li.getCommand(l,e)?.intent?.description;i+=`
* ${c}`}return i},"You can answer general programming questions and perform the following tasks:");try{n+=`
You use the ${r.model.toUpperCase()} version of OpenAI's GPT models.`}catch{}return n}function H6e(){return`
First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.
Then output the code in a single code block.
Minimize any other prose.
`.trim()}function j6e(){return`
Use Markdown formatting in your answers.
Make sure to include the programming language name at the start of the Markdown code blocks.
Avoid wrapping the whole response in triple backticks.
The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.
The active document is the source code the user is looking at right now.
You can only give one reply for each conversation turn.
`.trim()}async function yy(t,e,r,n={includeCodeGenerationRules:!0,includeCapabilities:!1}){let i=`
${n.roleplay??U9()}
${Ng()}
${Ip()}
`;return n.roleplay||(i+=`
${(await q6e(t,e,r)).trim()}
`),i+=`
${n.includeCodeGenerationRules?H6e():""}
${j6e()}
${zE(t)}
`.trim(),i}var G6e=["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"];function zE(t){let r=t.get(Ge).getConfig(Qe.LocaleOverride);if(!G6e.find(i=>r===i))return"";let n=r!=="auto"?r:t.get(pa).language;return n==="en"?"":`Respond in the following locale: ${n}`}function V6e(t,e,...r){return{ctor:t,props:e,children:r.flat()}}function Ile(){throw new Error("This should not be invoked!")}Ile.isFragment=!0;globalThis.vscpp=V6e;globalThis.vscppf=Ile;var Dr=class{get priority(){return this.props.priority??0}get supportsResizing(){return!1}constructor(e,r){this.props=e,this.accessor=r}};var kg=class extends Dr{render(){return vscpp(vscppf,null,this.props.children)}},wf=class extends kg{constructor(e,r){e.role="system",super(e,r)}},nn=class extends kg{constructor(e,r){e.role="user",super(e,r)}};var Af=class extends Dr{render(){return vscpp(vscppf,null,Ip())}};var Og=class{constructor(e,r,n){this._accessor=e;this._tokenBudget=r;this._endpoint=n;this._meta=new Map;this._usedContext=[]}getAllMeta(){return this._meta}getMeta(e){return this._meta.get(e)}getUsedContext(){return this._usedContext}async render(e,r){let n={tokenBudget:this._tokenBudget,zoomLevel:0,endpoint:this._endpoint},i=new B9,o=[{kind:"obj",node:i,minp:0,maxp:1e3,ctor:e,props:r,children:void 0}],s=()=>{o.sort((u,p)=>p.maxp-u.maxp)},a={meta:(u,p)=>{this._addMeta(p.key,p.value)},br:(u,p)=>{u.appendLineBreak()},usedContext:(u,p)=>{this._addUsedContext(p.value)}},l=u=>a.hasOwnProperty(u),c=(u,p,d)=>{if(!l(p))throw new Error(`Unknown intrinsic element ${p}!`);return a[p](u,d)};for(;o.length>0;){let u=o.shift();if(u.kind==="obj"){Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children);let p=new u.ctor(u.props,this._accessor);u.node.setObj(p);let d=await p.prepare?.();u.node.setState(d);let f=p.render(u.node.getState(),n);if(!f)continue;if(wle(f)){let m=g=>g.reduce((v,_)=>typeof _>"u"||typeof _=="boolean"?v:typeof _=="string"||typeof _=="number"?(v.push(String(_)),v):(wle(_)?v.push(...m(_.children)):v.push(_),v),[]),h=m(f.children);for(let g of h){if(typeof g=="string"){u.node.appendStringChild(g);continue}if(typeof g.ctor=="string"){c(u.node,g.ctor,g.props);continue}if(typeof g.ctor>"u")throw new Error("Unexpected result from render(), unexpected child!");let v=u.node.createChild();o.push({kind:"obj",node:v,minp:0,maxp:1e3,ctor:g.ctor,props:g.props,children:g.children})}}else{if(typeof f.ctor=="string"){c(u.node,f.ctor,f.props);continue}if(typeof f.ctor>"u")throw new Error("Unexpected result from render() invocation!");let m=u.node.createChild();o.push({kind:"obj",node:m,minp:0,maxp:1e3,ctor:f.ctor,props:f.props,children:f.children})}s()}}return i.materialize()}_addUsedContext(e){this._usedContext.push(...e)}_addMeta(e,r){if(this._meta.has(e))throw new Error(`Duplicate meta key ${e}!`);this._meta.set(e,r)}};async function _R(t,e,r,n){let i=new Og(t,8192,e),o=await i.render(r,n),s=i.getAllMeta(),a=i.getUsedContext();return{messages:o,metadatas:s,usedContext:a}}var B9=class t{constructor(e=null){this.parent=e;this.kind=0;this._obj=null;this._state=void 0;this._children=[]}setObj(e){this._obj=e}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this);return this._children.push(e),e}appendStringChild(e){this._children.push(new q9(this,e))}appendLineBreak(){this._children.push(new vR(this,!0))}materialize(){let e=[];return this._materialize(e),e}_materialize(e){if(this._obj instanceof kg){if(!this._obj.props.role)throw new Error("Invalid ChatMessage!");let r=[];for(let i of this._children)i.collectLeafs(r);let n=[];for(let i of r)i.kind===1?n.push(i.text):(i.isExplicit||n.length>0&&n[n.length-1]!==`
`)&&n.push(`
`);e.push({role:this._obj.props.role,content:n.join("")})}else for(let r of this._children){if(r.kind===1||r.kind===2)throw new Error("Cannot have a text node or line break node outside a ChatMessage!");r._materialize(e)}}collectLeafs(e){if(this._obj instanceof kg)throw new Error("Cannot have a ChatMessage nested inside a ChatMessage!");e.push(new vR(this,!1));for(let r of this._children)r.collectLeafs(e)}},q9=class{constructor(e,r){this.parent=e;this.text=r;this.kind=1}collectLeafs(e){e.push(this)}},vR=class{constructor(e,r){this.parent=e;this.isExplicit=r;this.kind=2}collectLeafs(e){e.push(this)}};function wle(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}var Fc=class extends Dr{render(){return vscpp(vscppf,null,"```",this.props.language.languageId,vscpp("br",null),this.props.document&&vscpp(vscppf,null,Tn.forDocument(this.props.language,this.props.document),vscpp("br",null)),this.props.code&&vscpp(vscppf,null,this.props.code,vscpp("br",null)),"```")}};var da=class extends Dr{render(){if(!this.props.codeRegion.hasContent)return;let e=[];return this.props.useMarkers&&e.push(this.props.codeRegion.startMarker),e.push(...this.props.codeRegion.lines),this.props.useMarkers&&e.push(this.props.codeRegion.endMarker),vscpp(Fc,{language:this.props.codeRegion.language,document:this.props.codeRegion.document,code:e.join(`
`)})}};var wp=class t extends Dr{static{this.METADATA_ID="inlineNotebookSelection"}async prepare(){return await dR(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(!Ln(this.props.documentContext.document.uri))throw Gu("InlineChatNotebookSelection should be used only with a notebook!");let{expandedRange:n}=e,i=z6e(this.accessor,r.endpoint,this.props.documentContext,n,void 0),o=this.props.documentContext.document,s={expandedRange:n,contextInfo:i},a=[{uri:o.uri,version:o.version,ranges:Zn([i.range.toRange(),i.above.toRange(),i.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{key:t.METADATA_ID,value:s}),vscpp($E,{documentContext:this.props.documentContext,above:i.above,range:i.range,below:i.below,aboveCells:i.aboveCells,belowCells:i.belowCells}))}},$E=class extends Dr{static{this.METADATA_ID="inlineNotebookSelection"}render(e,r){if(!Ln(this.props.documentContext.document.uri))throw Gu("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=this.props.includeDelimeters??!1,{below:i,above:o,range:s,aboveCells:a,belowCells:l}=this.props,c=a||[],u=l||[],p=this.props.documentContext.language;return vscpp(vscppf,null,(c.length>0||u.length>0)&&vscpp(nn,null,"I am working on a Jupyter notebook.",vscpp("br",null),"This Jupyter Notebook already contains multiple cells.",vscpp("br",null),"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",p.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.",vscpp("br",null),"For the same reason, if a variable is defined in a cell, it can be used in other cells as well.",vscpp("br",null),"We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),"## Examples starts here",vscpp("br",null),"Here are the cells in this Jupyter Notebook:",vscpp("br",null),"`CELL INDEX: 0",vscpp("br",null),"```python",vscpp("br",null),"import pandas as pd",vscpp("br",null),vscpp("br",null),"# create a dataframe with sample data",vscpp("br",null),"df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})",vscpp("br",null),"print(df)",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"Now I create a new cell in this Jupyter Notebook document at index 1.",vscpp("br",null),"In this new cell, I am working with the following code:",vscpp("br",null),"```python",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"plot the data frame",vscpp("br",null),vscpp("br",null),"---------------------------------",vscpp("br",null),"ChatGPT Answer",vscpp("br",null),"---------------------------------",vscpp("br",null),"To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:",vscpp("br",null),vscpp("br",null),"```python",vscpp("br",null),"df.plot(x='Name', y='Age', kind='bar')",vscpp("br",null),"```",vscpp("br",null),"## Example ends here",vscpp("br",null),c.length>0&&vscpp(yR,{cells:c,title:`Here are the cells in this Jupyter Notebook:
`}),u.length>0&&vscpp(yR,{cells:u,cellIndexDelta:c.length+1,title:`Here are the cells below the current cell that I am editing in this Jupyter Notebook:
`})),p.languageId==="markdown"?vscpp(H9,{cellIndex:c.length,selected:s,above:o,below:i,includeDelimeters:n}):vscpp(j9,{cellIndex:c.length,selected:s,above:o,below:i,includeDelimeters:n}))}},H9=class extends Dr{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(nn,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describte and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(da,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Fc,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(nn,null,"In this new cell, I have the following markdown content above the selection:",vscpp(da,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(nn,null,"In this new cell, I have the following markdown content below the selection:",vscpp(da,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},j9=class extends Dr{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(nn,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(da,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Fc,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(nn,null,"In this new cell, I have the following code above the selection:",vscpp(da,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(nn,null,"In this new cell, I have the following code below the selection:",vscpp(da,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},yR=class extends Dr{render(){return vscpp(vscppf,null,this.props.title,vscpp("br",null),this.props.cells.map((e,r)=>vscpp(G9,{index:r+(this.props.cellIndexDelta??0),cell:e})))}},G9=class extends Dr{render(){return vscpp(vscppf,null,"CELL INDEX: ",this.props.index,vscpp("br",null),"```",this.props.cell.language.languageId,vscpp("br",null),this.props.cell.lines.join(`
`),vscpp("br",null),"```")}};function z6e(t,e,r,n,i){i=i??e.modelMaxTokenWindow*4/3;let o=new la(i),s=WE(r.document,r.selection,n,new tt(0,0,r.document.lineCount,0),r.language,o);return xR(t.get(At),r,s,o)}var Ap=class t extends Dr{static{this.METADATA_ID="inlineDocumentSelection"}async prepare(){return await dR(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(Ln(this.props.documentContext.document.uri))throw Gu("InlineChatSelection should not be used with a notebook!");let{expandedRange:n,rangeExpandedToFunction:i,functionBodies:o}=e,s=$6e(this.accessor,r.endpoint,this.props.documentContext,n,i,o,void 0),a=this.props.documentContext.document,l=this.props.documentContext.language,c={expandedRange:n,contextInfo:s},u=[{uri:a.uri,version:a.version,ranges:Zn([s.range.toRange(),s.above.toRange(),s.below.toRange()])}],p=s.above.hasContent||s.below.hasContent||s.outlineAbove.length>0||s.outlineBelow.length>0;return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{key:t.METADATA_ID,value:c}),s.outlineAbove.length>0&&vscpp(nn,null,"I have the following code above:",vscpp(Fc,{language:l,document:a,code:s.outlineAbove})),s.above.hasContent&&vscpp(nn,null,"I have the following code above the selection:",vscpp(da,{codeRegion:s.above,useMarkers:p})),s.below.hasContent&&vscpp(nn,null,"I have the following code below the selection:",vscpp(da,{codeRegion:s.below,useMarkers:p})),s.outlineBelow.length>0&&vscpp(nn,null,"I have the following code below:",vscpp(Fc,{language:l,document:a,code:s.outlineBelow})),s.range.hasContent&&vscpp(nn,null,"I have the following code in the selection:",vscpp(da,{codeRegion:s.range,useMarkers:p})),!s.range.hasContent&&!p&&vscpp(nn,null,"I am in an empty file:",vscpp(Fc,{language:l,document:a,code:""})))}};function $6e(t,e,r,n,i,o,s){s=s??e.modelMaxTokenWindow*4/3;let a=new la(s),l=WE(r.document,r.selection,n,new tt(0,0,r.document.lineCount,0),r.language,a);if(!(l.above.hasContent&&!l.above.isComplete))return{language:l.language,above:l.above,range:l.range,below:l.below,outlineAbove:"",outlineBelow:""};let u=new la(s),p=new tt(i.start.line,0,i.end.line,r.document.lineAt(i.end.line).range.end.character),d=WE(r.document,r.selection,n,p,r.language,u),f="",m="";if(d.above.isComplete&&d.below.isComplete){let h=Ale({document:r.document,functionBodies:o,rangeExpandedToFunctionWholeLines:p}),g=Rle(h,u);f=g.outlineAbove,m=g.outlineBelow}return{language:d.language,above:d.above,range:d.range,below:d.below,outlineAbove:f,outlineBelow:m}}var V9=class{constructor(){this.kind="inline-chat-selection"}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=Ln(i.document.uri)?wp:Ap,{messages:s,metadatas:a,usedContext:l}=await _R(e,r.endpoint,o,{documentContext:i}),c=a.get(Ap.METADATA_ID)||a.get(wp.METADATA_ID);return{kind:this.kind,userMessages:s.map(u=>u.content),usedContext:l,metadata:c}}},bR=Rt.register(new V9);function WE(t,e,r,n,i,o){let s=new wo(o,t,i,"ed8c6549bwf9"),a=new wo(o,t,i,"abpxx6d04wxr"),l=new wo(o,t,i,"be15d9bcejpp"),c=()=>(a.trim(),s.trim(e),l.trim(),{language:i,above:a,range:s,below:l});for(let p=r.end.line;p>=r.start.line;p--)if(!s.prependLine(p))return c();let u={aboveLineIndex:r.start.line-1,belowLineIndex:r.end.line+1,minimumLineIndex:Math.max(0,n.start.line),maximumLineIndex:Math.min(t.lineCount-1,n.end.line)};return z9(u,a,l),c()}function z9(t,e,r){let n=t.aboveLineIndex,i=!0,o=t.belowLineIndex,s=!0;for(let a=0;a<100&&(i||s);a++)!i||s&&a%4===3?o<=t.maximumLineIndex&&r.appendLine(o)?o++:s=!1:n>=t.minimumLineIndex&&e.prependLine(n)?n--:i=!1;e.isComplete=n<t.minimumLineIndex,r.isComplete=o>t.maximumLineIndex}function Ale({document:t,functionBodies:e,rangeExpandedToFunctionWholeLines:r}){let n="";t.languageId==="typescript"&&(n=";");let i=p=>{let f=new tt(t.positionAt(p.startIndex),t.positionAt(p.endIndex));return f.end.line<r.start.line?r.start.line-f.start.line>50:f.start.line>r.end.line?f.end.line-r.end.line>50:!0},o=e.filter(i),s=t.offsetAt(r.start),a=t.offsetAt(r.end),l={startOffset:s,endOffset:a},{outlineAbove:c,outlineBelow:u}=$9(t.getText(),o,l,n);return{outlineAboveRange:c,outlineBelowRange:u}}function $9(t,e,r,n){let i=0,o="",s=r.endOffset,a="";for(let l of e)if(l.endIndex<r.startOffset)o+=t.substring(i,l.startIndex),o+=n,i=l.endIndex;else if(l.startIndex>r.endOffset)a+=t.substring(s,l.startIndex),a+=n,s=l.endIndex;else continue;return o+=t.substring(i,r.startOffset),a+=t.substring(s,t.length),{outlineAbove:o,outlineBelow:a}}function Rle(t,e){let r=/\r\n|\r|\n/g,n=t.outlineAboveRange===""?[]:t.outlineAboveRange.split(r),i=t.outlineBelowRange===""?[]:t.outlineBelowRange.split(r),o=[],s=[],a=f=>e.lineWouldFit(f)?(e.addLine(f),o.unshift(f),!0):!1,l=f=>e.lineWouldFit(f)?(e.addLine(f),s.push(f),!0):!1,c=n.length-1,u=!0,p=0,d=!0;for(let f=0;f<100&&(u||d);f++)!u||d&&f%4===3?p<i.length&&l(i[p])?p++:d=!1:c>=0&&a(n[c])?c--:u=!1;return{outlineAbove:o.join(`
`),outlineBelow:s.join(`
`)}}function xR(t,e,r,n){let i=t.notebookDocuments.find(_=>_.uri.fsPath===e.document.uri.fsPath&&_.getCells().find(y=>y.document===e.document));if(!i)return{...r,outlineAbove:"",outlineBelow:"",aboveCells:[],belowCells:[]};let{language:o,above:s,range:a,below:l}=r,c=s.lines.length+a.lines.length+l.lines.length,u=i.getCells().findIndex(_=>_.document===e.document),p=[],d=[],f=()=>(p.forEach(_=>_.trim()),d.forEach(_=>_.trim()),{language:o,above:s,range:a,below:l,outlineAbove:"",outlineBelow:"",aboveCells:p,belowCells:d}),m=!0,h=!0,g=u-1,v=u+1;for(let _=c;_<100&&(m||h);_++)if(m)if(g>=0){let b=i.cellAt(g).document,x=new wo(n,b,e.language,"CELL:"+b.uri.fragment);for(let P=0;P<b.lineCount;P++)x.appendLine(P);p.unshift(x),g--}else m=!1;else if(v<i.cellCount){let b=i.cellAt(v).document,x=new wo(n,b,e.language,"CELL:"+b.uri.fragment);for(let P=0;P<b.lineCount;P++)x.appendLine(P);d.push(x),v++}else h=!1;return f()}var KE=class{constructor(){this.kind="tests/impl2test";this._onDidFindCandidate=new uce;this.onDidFindCandidate=this._onDidFindCandidate.event;this.metaContextResolverInfo={description:"Information about existing or related files containing tests."};this._decoder=new K9.TextDecoder}async resolveContext(e,r,n){let i=r.documentContext;if(!i||VE(i.document))return;let o=e.get(Mr),s=new GE(e.get(es),e.get(Rr)),a=r.endpoint.modelMaxTokenWindow*4/3,l=async(d,f=a)=>{let h=this._decoder.decode(await o.readFile(d)).substring(0,f);return`${Tn.forUri(i.language,d)}

${h}`},c=await s.findTestFileForSourceFile(i.document,n);if(c){this._onDidFindCandidate.fire(c);let d=new kc;return d.appendMarkdown(`

Excerpt of the existing test file:

`),d.appendCodeblock(await l(c),i.document.languageId),d.appendMarkdown(`
Because a test file exists:`),d.appendMarkdown(`
- Do not generate preambles, like imports, copyright headers etc.`),d.appendMarkdown(`
- Do generate code that can be appended to the existing test file.`),{kind:this.kind,userMessages:[d.value],references:[new so(c)]}}let u=await s.findAnyTestFileForSourceFile(i.document,n);if(!u)return;let p=new kc(`This is sample test file:

`);return p.appendCodeblock(await l(u),i.document.languageId),{kind:this.kind,userMessages:[p.value],references:[new so(u)]}}},W9=class{constructor(){this.kind="tests/test2impl";this.metaContextResolverInfo={description:"Information about existing or related files containing tests."};this._decoder=new K9.TextDecoder}async resolveContext(e,r,n){let i=r.documentContext;if(!i||!VE(i.document))return;let o=e.get(Mr),s=new GE(e.get(es),e.get(Rr)),a=r.endpoint.modelMaxTokenWindow*4/3;function l(d,f,m=a){return`${Tn.forUri(i.language,d)}

${f.substring(0,m)}`}let c=async d=>{let f=this._decoder.decode(await o.readFile(d));return l(d,f)},u=await s.findFileForTestFile(i.document,n);if(!u)return;let p;try{let d=await e.get(At).openTextDocument(u),f=d.getText(),m=await qE(e,d,100),{outlineAbove:h,outlineBelow:g}=$9(f,m,{startOffset:f.length,endOffset:f.length},""),v=`${h}
${g}`;p=new kc(`
This is an excerpt of the file that this test is covering:

`),p.appendCodeblock(l(u,v),i.document.languageId)}catch{}return p||(p=new kc(`
This is an excerpt of the file that this test is covering:

`),p.appendCodeblock(await c(u),i.document.languageId)),{kind:this.kind,userMessages:[p.value],references:[new so(u)]}}},Zvt=Rt.register(new KE),Dle=Rt.register(new W9);var W6e=require("path"),YE=class{constructor(){this.kind="current-editor";this.variableInfo={name:"editor",description:"The source code in the active editor",defaultEnablement:!1};this.metaContextResolverInfo={description:"Source code in the active document."}}async resolveContext(e,r){let n=e.get(Rr).activeTextEditor,i=n?.visibleRanges[0];if(i){if(!n.selection.isEmpty)return;let o="";n.selection.isSingleLine&&(o=`The cursor is on line: ${n.selection.start.line}`);let s="Excerpt from active file "+W6e.basename(n.document.uri.path)+", lines "+(i.start.line+1)+" to "+(i.end.line+1)+":\n```"+n.document.languageId+`
`+n.document.getText(i)+"\n```\n\n"+o,a=[{uri:n.document.uri,version:n.document.version,ranges:[i]}];return{kind:this.kind,userMessages:[s],usedContext:a,references:[new so({uri:n.document.uri,range:i})]}}}},Ple=Rt.register(new YE);var Nle=Oe(require("path"));var Rf=class t{constructor(){this.kind="current-selection";this.variableInfo={name:"selection",description:"The current selection"};this.metaContextResolverInfo={description:"Active selection."}}async resolveContext(e,r){let n=t.getCurrentSelection(e.get(Rr));if(n){let i=t.formatSelection(n),o=[{uri:n.activeDocument.uri,version:n.activeDocument.version,ranges:[n.range]}];return{kind:this.kind,userMessages:[`Active selection:
${i}`],usedContext:o,references:[new so(new dy(n.activeDocument.uri,n.range))]}}else return new YE().resolveContext(e,r)}static formatSelection(e){return`

${e.fileName?`From the file: ${Nle.basename(e.fileName)}
`:""}\`\`\`${e.languageId}
${e.selectedText}
\`\`\`

`}static getCurrentSelection(e){let r=e.activeTextEditor,n=r?.document;if(n){let i=r.selection;if(i&&!i.isEmpty){let o=n.languageId,s=n.getText(i);return{languageId:o,selectedText:s,activeDocument:n,range:i,fileName:n.fileName}}}}},ws=Rt.register(new Rf);var Y9=class{constructor(){this.kind="current-selection-implementations";this.metaContextResolverInfo={description:"Relevant implementations referenced in active selection."}}async resolveContext(e,r,n,i){let o=Rf.getCurrentSelection(e.get(Rr));if(!o)return;let s=o.activeDocument,a=e.get(mr).extensionMode===py.Test?0:200,l=[],c=[],u=[];for(let{header:p,findImpls:d}of[{header:"Relevant function implementations",findImpls:Xce},{header:"Relevant class declarations",findImpls:Jce},{header:"Relevant type declarations",findImpls:Zce}]){let f=await d(e,s,o.range,a);if(!f.length)continue;let{references:m,usedContext:h,text:g}=K6e(s,f),v=`${p}:

${g.map(_=>`\`\`\`${o.languageId}
${_}
\`\`\``).join(`
`)}
`;l.push(v),c.push(...m),u.push(...h)}return{kind:this.kind,references:c,userMessages:l,usedContext:u}}};function K6e(t,e){let r=[],n=new Map,i=new Set,o=[];for(let s of e){let a=s.uri??t.uri,l=s.range??new tt(t.positionAt(s.startIndex),t.positionAt(s.endIndex)),c=`${a.toString()}-${l.start.line}-${l.start.character}-${l.end.line}-${l.end.character}`;if(i.has(c))continue;i.add(c),r.push(new so(new dy(a,l))),o.push(s.text);let[u,p]=n.get(a)??[s.version??t.version,[]];p.push(l),n.set(a,[u,p])}return{references:r,usedContext:[...n.entries()].map(([s,[a,l]])=>({uri:s,version:a,ranges:l})),text:o}}var kle=Rt.register(new Y9);var Vl=class extends Ks{};var Q9=class{constructor(){this.kind="debug-console-output";this.variableInfo={name:"debugConsole",description:"The output in the debug console",defaultEnablement:!1};this.metaContextResolverInfo={description:"Debug console output."}}async resolveContext(e){return{kind:this.kind,userMessages:[`Debug console output:
`+e.get(Vl).consoleOutput]}}},R0t=Rt.register(new Q9);var Ao=class{waitForNewDiagnostics(e,r,n=5e3){let i,o,s;return new Promise(a=>{i=r.onCancellationRequested(()=>a([])),s=setTimeout(()=>a(this.getDiagnostics(e)),n),o=this.onDidChangeDiagnostics(l=>{for(let c of l.uris)if(tce(c,e)){a(this.getDiagnostics(e));break}})}).finally(()=>{i.dispose(),o.dispose(),clearTimeout(s)})}};function Ole(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function Lle(t){return t.severity===OE.Error}var Ule=Oe(Fle());function fa(t,e){let r=e.matchAll(/^\s*(```+)/gm),n=Math.max(3,...Array.from(r,o=>o[1].length+1)),i="`".repeat(n);return`${i}${t}
${e.trim()}
${i}`}function Ble(t){if(!t)return[];let e=Ule.marked.lexer(t);return qle(e).filter(r=>r.type==="code")}function qle(t){let e=[];for(let r of t)r.type==="list"&&e.push(...qle(r.items.map(n=>n.tokens).flat())),e.push(r);return e}var Y6e=15,X9=class{constructor(){this.kind="fix-selection"}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;if(!Bl(i.language.languageId))return bR.resolveContext(e,r,n);let s=await X6e(e.get(Ao),r.message,i.document,i.wholeRange),a=r.endpoint,l,c;Ln(i.document.uri)?(l=await this.generateFixContextInNotebook(e,a,i,s),c=await this.generateFixContextPromptsForNotebook(e,a,i,l)):({contextInfo:l}=await this.generateFixContext(e,a,i,s),c=this.generateFixContextPrompts(l));let u=i.document,p=[{uri:u.uri,version:u.version,ranges:Zn([l.range.toRange(),l.above.toRange(),l.below.toRange()])}];return{kind:this.kind,userMessages:c,usedContext:p,metadata:{expandedRange:s.range,contextInfo:l}}}async generateFixContext(e,r,n,i){let o=r.modelMaxTokenWindow*4/3,s=new la(o),a=n.document,l=n.language,c=new wo(s,a,l,"ed8c6549bwf9"),u=new wo(s,a,l,"abpxx6d04wxr"),p=new wo(s,a,l,"be15d9bcejpp"),d=()=>(u.trim(),c.trim(),p.trim(),{contextInfo:{language:l,above:u,range:c,below:p,outlineAbove:"",outlineBelow:""},tracker:s});if(!Q6e(c,i))return d();let m={aboveLineIndex:i.rangeOfInterest.start.line-1,belowLineIndex:i.rangeOfInterest.end.line+1,minimumLineIndex:0,maximumLineIndex:a.lineCount-1};return z9(m,u,p),d()}generateFixContextPrompts(e){let r=[];if(e.above.hasContent){let n=[];n.push("I have the following code above the selection:"),n.push(...e.above.generatePrompt(!0)),r.push(n.join(`
`))}if(e.below.hasContent){let n=[];n.push("I have the following code below the selection:"),n.push(...e.below.generatePrompt(!0)),r.push(n.join(`
`))}if(e.range.hasContent){let n=[];n.push("I have the following code in the selection:"),n.push(...e.range.generatePrompt(!0)),r.push(n.join(`
`))}else r.push("There is no code in the selection.");return r.push([`Only change the code inside of the selection, delimited by markers '${e.range.startMarker}' and '${e.range.endMarker}'. The code block with the suggested changes should also contain the markers.`].join(`
`)),r}async generateFixContextInNotebook(e,r,n,i){let{contextInfo:o,tracker:s}=await this.generateFixContext(e,r,n,i);return xR(e.get(At),n,o,s)}async generateFixContextPromptsForNotebook(e,r,n,i){let o={...i,documentContext:n,includeDelimeters:!0},{messages:s}=await _R(e,r,$E,o);return s.map(a=>a.content)}},Hle=Rt.register(new X9);function Q6e(t,e){let r=e.range,n=e.rangeOfInterest,i=Math.floor((r.start.line+r.end.line)/2),o=Math.max(i-n.start.line,n.end.line-i);t.appendLine(i);for(let s=1;s<=o;s++){let a=i-s,l=i+s;if(a>=n.start.line&&!t.prependLine(a)||l<=n.end.line&&!t.appendLine(l))return!1}return!0}async function X6e(t,e,r,n){let i=await J9(t.getDiagnostics(r.uri),e,n),s=Bl(r.languageId)?await J6e(i,r,Y6e):i.range;return{range:i.range,rangeOfInterest:s}}async function J9(t,e,r){let n=t.filter(i=>!!i.range.intersection(r));if(e){let i=n.filter(o=>e.includes(o.message));n=i.length>0?i:n}return{range:n.length>0?Ole(n):r,diagnostics:n}}async function J6e(t,e,r){let n=t.range,i=Z9(n),o=Math.max(r,n.end.line-n.start.line+r),s=await qce(e.languageId,e.getText(),i,o);return e7(s)}function Z9(t){return{startPosition:{row:t.start.line,column:t.start.character},endPosition:{row:t.end.line,column:t.end.character}}}function e7(t){return new tt(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}var t7=class{constructor(){this.kind="diagnostics";this.metaContextResolverInfo={description:"Diagnostics in the active editor."}}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let{diagnostics:o}=await J9(e.get(Ao).getDiagnostics(i.document.uri),r.message,i.wholeRange),s=await this.getDiagnosticsContextPrompts(e.get(At),o,i.document);return{kind:this.kind,userMessages:s}}async getRelatedInfo(e,r){if(r.relatedInformation){let n=[];for(let i of r.relatedInformation)try{let o=i.location,s=await e.openTextDocument(o.uri),a=o.range,l=Bl(s.languageId),c=Z9(a),u=l?await Bce(s.languageId,s.getText(),c):c,p=s.getText(e7(u));n.push(fa("",p))}catch{}return n.join(`
`)}}async getDiagnosticsContextPrompts(e,r,n){let i=[];if(r.length>0){let o=r[0].source;i.push(`The code has the following ${o?o+" ":""}problems`);for(let s=0;s<r.length;s++){i.push(`Problem ${s+1}:`);let a=r[s],l=n.getText(new tt(a.range.start.line,0,a.range.end.line+1,0)).trim();l.length>0&&l.length<200&&(i.push("This code"),i.push(fa("",l)),i.push("has the problem reported:")),i.push(fa("",`${a.message}`));let c=await this.getRelatedInfo(e,a);c&&(i.push("This diagnostic has some related code:"),i.push(`${c}`))}}return i.length>0?[i.join(`
`)]:[]}},r7=Rt.register(new t7);var Mi=Go("IEmbeddingsComputer"),Z6e=.72;function jle(t,e,r,n=Z6e){return e.flatMap(i=>{let o=0;for(let s of t){let a=i.embedding.reduce((l,c,u)=>l+c*s[u],0);o=Math.max(o,a)}return{score:o,item:i}}).filter(i=>i.score>n).sort((i,o)=>o.score-i.score).slice(0,r).map(i=>i.item)}function Df(t,e){let r=t.reduce((o,s,a)=>o+s*e[a],0),n=Math.sqrt(t.reduce((o,s)=>o+s*s,0)),i=Math.sqrt(e.reduce((o,s)=>o+s*s,0));return r/(n*i)}var xy=class{constructor(e,r,n,i){this.accessor=e;this.cacheType=r;this.cacheKey=n;this.cacheVersion=i;this.cacheVersionKey=`${n}-version`,this.fileSystem=e.get(Mr)}get cacheStorageUri(){return this.cacheType===2?this.accessor.get(mr).storageUri:this.accessor.get(mr).globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.accessor.get(mr).workspaceState:this.accessor.get(mr).globalState}async updateCache(e){if(!this.cacheStorageUri||!this.fileSystem.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystem.stat(this.cacheStorageUri)}catch{await this.fileSystem.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion),this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let n=wt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await(e===void 0?this.fileSystem.delete(n,{useTrash:!1}):this.fileSystem.writeFile(n,Buffer.from(JSON.stringify(e))))}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${n}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let r=await this.fileSystem.readFile(wt.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return JSON.parse(r.toString())}catch{return}}async clearCache(){return this.updateCache(void 0)}},Pf=class t extends xy{constructor(r,n,i,o,s){super(r,n,i,o);this.fetcher=r.get(Nr),this.remoteCacheVersionKey=`${i}-version-remote`,this.remoteCacheURL=t.calculateRemoteCDNURL(s,o),this.remoteCacheLatestUpdateURL=t.calculateRemoteCDNLatestURL(s,o)}async fetchRemoteCache(){if(this._remoteCache)return this._remoteCache;try{let r=await this.fetcher.fetch(this.remoteCacheURL,{method:"GET"});if(r.ok)return this._remoteCache=await r.json(),this._remoteCache;console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}}async fetchRemoteCacheLatest(){try{let r=await this.fetcher.fetch(this.remoteCacheLatestUpdateURL,{method:"GET"});if(r.ok)return r.text();console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}}async getCache(){let r=await this.fetchRemoteCacheLatest(),n=await super.getCache();if(n&&r===this.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return n;let i=await this.fetchRemoteCache();return await this.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,r),await this.updateCache(i),i}async updateCache(r,n){if(r===void 0)return super.updateCache(r);if(!await super.getCache()||n)return super.updateCache(r)}static calculateRemoteCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/core.json`}static calculateRemoteCDNLatestURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/latest.txt`}},n7=class t extends Pf{constructor(r,n,i,o,s){super(r,n,i,o,s);this._wasRemoteExtensionCacheUpdated=!1;this.baseExtensionCDNURL=t.calculateBaseRemoteExtensionCDNURL(s,o)}constructExposedCache(){if(!this._remoteExtensionCache)return;let r={...this._remoteExtensionCache.core};for(let n in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[n];for(let o in i)r[o]=i[o]}return r}async fetchRemoteExtensionCache(r){let n=`${this.baseExtensionCDNURL}/${r}.json`;try{let i=await this.fetcher.fetch(n,{method:"GET"});if(i.ok)return await i.json();if(i.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${n}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${n}`);return}}async getCache(){let r=await super.getCache();if(r===void 0)return;let n={core:{},extensions:{}};r&&t.isEmbeddingsCacheEntriesWithExtensions(r)?n=r:n={core:r,extensions:{}};let i=t.getInstalledExtensionIds(this.accessor),o=!1;for(let a in n.extensions)i.includes(a)||(delete n.extensions[a],o=!0);let s=i.filter(a=>!(a in n.extensions)||n.extensions[a]===void 0);for(let a of s){let l=await this.fetchRemoteExtensionCache(a);l&&(n.extensions[a]=l)}return this._remoteExtensionCache=n,this._wasRemoteExtensionCacheUpdated=s.length>0||o,this.constructExposedCache()}async updateCache(r,n){let i=r?super.updateCache(this._remoteExtensionCache,n||this._wasRemoteExtensionCacheUpdated):super.updateCache(r,n||this._wasRemoteExtensionCacheUpdated);return this._wasRemoteExtensionCacheUpdated=!1,i}static isEmbeddingsCacheEntriesWithExtensions(r){return"core"in r&&"extensions"in r}static getInstalledExtensionIds(r){return r.get(pa).getAllExtensions().filter(n=>!n.id.startsWith("vscode")).map(n=>n.id)}static calculateBaseRemoteExtensionCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}`}},TR=class{constructor(e,r,n,i,o,s,a){this.cacheKey=i;this.embeddingsComputer=s;this._isIndexLoaded=!1;this._logger=r.get(Le).getPromptResponseLogger(e),this._items=new Map,a?.type&&!a.supportsExtensions?this._embeddingsCache=new Pf(r,n,i,o,a.type):a?.type&&a.supportsExtensions?this._embeddingsCache=new n7(r,n,i,o,a.type):this._embeddingsCache=new xy(r,n,i,o)}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,r){let n=Array.from(this._items.values()).map(i=>{if(!i.embedding)return{item:i,similarity:0};let o=Df(e,i.embedding);return{item:i,similarity:o}});return n=n.filter(i=>i.similarity>0),n.sort((i,o)=>o.similarity-i.similarity),n.slice(0,r).map(i=>i.item)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),r=await this.getLatestItems(),n=await this._embeddingsCache.getCache(),i=new Map;for(let o of r){let s=o,a=this._items.get(o.key),l=o.key;a?.embedding?s=a:n&&n[l]&&(s={...o,...n[l]}),i.set(l,s)}this._items=i,await this._embeddingsCache.updateCache(n),this._logger.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}async fetchEmbeddingsForItems(e){return this.embeddingsComputer.computeEmbeddings(e.map(r=>this.getEmbeddingQueryString(r)),void 0)}};function Lg(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var i7=class{constructor(e){let r=Lg(e.get(jt).getEditorInfo().version);this.embeddingsCache=new Pf(e,1,"api",r,"api")}async updateIndex(){this.apiChunks=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this.apiChunks)return[];let i=this.apiChunks.map(o=>{if(!o.embedding)return{text:o.text,similarity:0};let s=Df(e,o.embedding);return{text:this.toContextString(o),similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.text)}toContextString(e){return e.type==="code"?`Snippet from vscode.d.ts:
${fa(e.lang,e.text)}`:e.type==="command"?`${e.text}`:e.type==="documentationCodeBlock"?`Example code from documentation:
${fa(e.lang,e.text)}`:""}},o7=class{constructor(){this.kind="extension-api"}async resolveContext(e,r,n){this.embeddingComputer??=e.get(Mi);let i=r.message;if(!i||(this.apiEmbeddingsIndex||(this.apiEmbeddingsIndex=new i7(e)),await this.apiEmbeddingsIndex.updateIndex(),n.isCancellationRequested))return;let o=await this.embeddingComputer?.computeEmbeddings([i],n);if(!n.isCancellationRequested&&o&&o.length>0){let s=this.apiEmbeddingsIndex.nClosestValues(o[0],5,.7);if(s.length){let a=["Below are some potentially relevant code samples related to VS Code extension development. You may use information from these samples to help you answer the question if you believe it is relevant:",s.join(`

`)].join(`
`);return{kind:this.kind,userMessages:[a]}}}}},Gle=Rt.register(new o7);var a7=class{constructor(e){let r=Lg(e.get(jt).getEditorInfo().version);this.embeddingsCache=new Pf(e,1,"extensionEmbeddings",r,"extensions")}async updateIndex(){this._embeddings=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[1].name}(${o[0]})`,similarity:0};let s=Df(e,o[1].embedding);return{key:`${o[1].name}(${o[0]})`,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}},eFe=`
The current question is related to VS Code extensions. The application is currently open.
If an extension is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all extension IDs you referenced in your response.
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),c7=class{constructor(){this.kind="extensions"}async resolveContext(e,r,n){let i=eFe+`

`;this._embeddingCompute??=e.get(Mi);let o=r.message;if(!o||(this._extensionsIndex||(this._extensionsIndex=new a7(e),await this._extensionsIndex.updateIndex()),n.isCancellationRequested))return;let s=await this._embeddingCompute?.computeEmbeddings([o],n);if(!(!s||n.isCancellationRequested)&&s&&s.length>0){let a=this._extensionsIndex.nClosestValues(s[0],5);if(a.length)return i+=`Here are some possible extensions:
`,i+=a.join(`

`),{kind:this.kind,userMessages:[`Relevant information about extensions for VS Code:
`+i]}}}},q_t=Rt.register(new c7);var Vle=Oe(require("path"));var Ka=class{};var l7=class{constructor(){this.kind="git-metadata";this.variableInfo={name:"git",description:"Information about the current git repository"};this.metaContextResolverInfo={description:"Metadata about the current git repository."}}async resolveContext(e,r,n){let i=e.get(At),s=e.get(Ka).repositories,a=i.getWorkspaceFolders();if(!s||!a)return;if(a.length>1){let c=r.documentContext?.document.uri??e.get(Rr).activeTextEditor?.document.uri;if(c){let u=i.getWorkspaceFolder(c);if(u){let p=a.findIndex(d=>d.toString()===u.toString());p!==-1&&(s=[s[p]],a=[a[p]])}}}let l=[];for(let c=0;c<s.length;c++){if(n.isCancellationRequested)return;let u=s[c],p=a[c];if(!u)continue;let d=[];d.push(`Workspace Folder: ${Vle.basename(p.path)}`),d.push("```"),u.headBranchName?(d.push(`Current Branch name: ${u.headBranchName}`),d.push(`Upstream: ${u.upstreamBranchName?u.upstreamBranchName:"none"}`)):d.push("Detached HEAD?: yes"),d.push(`Is currently rebasing?: ${u.isRebasing?"yes":"no"}`),d.push(`Remotes: ${(u.remotes??[]).join(", ")}`),d.push("```"),l.push(d.join(`
`))}return{kind:this.kind,userMessages:[`Metadata about the current git repository:
`+l.join(`
`)]}}},Y_t=Rt.register(new l7);var Ro=class extends Ks{};var u7=class{constructor(){this.kind="terminal-buffer";this.variableInfo={name:"terminalBuffer",description:"The active terminal's buffer",defaultEnablement:!1};this.metaContextResolverInfo={description:"The active terminal's buffer."}}async resolveContext(e){let r=e.get(Ro).terminalBuffer;return{kind:this.kind,userMessages:[`The active terminal's buffer:
`+r]}}},zle=Rt.register(new u7);var p7=class{constructor(){this.kind="terminal-last-command";this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's last run command."}}async resolveContext(e){let r=e.get(Ro).terminalLastCommand;if(!r)return;let n=[];r.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(r.commandLine)),r.cwd&&(n.push("It was run in the directory:"),n.push(typeof r.cwd=="object"?r.cwd.toString():r.cwd)),r.output&&(n.push("It has the following output:"),n.push(r.output));let i=n.join(`
`);return{kind:this.kind,userMessages:[`The active terminal's last run command:
`+i]}}},$le=Rt.register(new p7);var d7=class{constructor(){this.kind="terminal-selection";this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's selection."}}async resolveContext(e){let r=e.get(Ro).terminalSelection;return{kind:this.kind,userMessages:[`The active terminal's selection:
`+r]}}},Wle=Rt.register(new d7);var f7=class{constructor(){this.kind="terminal-shell-type";this.variableInfo={name:"terminalShellType"}}async resolveContext(e){let r=e.get(Ro).terminalShellType;return{kind:this.kind,userMessages:[`The active terminal's shell type:
`+r]}}},Kle=Rt.register(new f7);var P7=Oe(jn());var Yle=Oe(require("util"));var Uc=Go("IExperimentationService"),SR=class{constructor(){this.initializePromise=Promise.resolve();this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};async function rFe(t){let e=t.get(Ge),r=e.getConfig(Qe.DebugTestOverrideProxyUrl);return RL(t)&&r.length>0?r:e.getConfig(Qe.DebugChatOverrideProxyUrl)??e.getConfig(Qe.DebugOverrideProxyUrl)}async function nFe(t,e){let r=await rFe(t);return r.length===0?(r="https://api.githubcopilot.com",`${r}${e}`):r}async function iFe(t){return nFe(t,"/chat")}async function oFe(t){return"https://api.githubcopilot.com/embeddings"}async function Fr(t,e,r,n){let i=t.get(Uc),o;if(n)o=n;else if(e===2)await i.getTreatmentVariableAsync("vscode","copilotchat.panelGpt4",!0)!==!1&&(o="gpt-4");else if(e===1&&r==="fix"){let s=t.get(Ge).getConfig(Qe.FixUseGPT4InInlineChat);(await i.getTreatmentVariableAsync("vscode","copilotchat.fixInlineGpt4",!0)||s)&&(o="gpt-4")}return t.get(Ya).getChatEndpointInfo(o)}async function by(t){return t.get(Ya).getChatEndpointInfo(void 0)}async function sFe(t,e){let n=(await t.get(Lt).getCopilotToken(t)).isInternal?t.get(Ge).getConfig(Qe.DebugOverrideChatMaxTokenNum):0;if(n>0)return n;let o=await t.get(Uc).getTreatmentVariableAsync("vscode","copilotchat.panelGpt4Context",!0);switch(e){case"gpt-3.5-turbo":return 8192;case"gpt-4":return o||4096;default:return 8192}}var Ya=class{constructor(e){this.accessor=e;this._chatEndpoints=new Map}async getChatEndpointInfo(e){let r=(await this.accessor.get(Lt).getCopilotToken(this.accessor)).isInternal;this._defaultModel??=r?this.accessor.get(Ge).getConfig(Qe.DebugOverrideChatEngine):"gpt-3.5-turbo";let n=e??this._defaultModel,i=this._chatEndpoints.get(n);if(i)return i;let o=await iFe(this.accessor),s=await sFe(this.accessor,n),a=await this.shouldDisableSnippy();return i=new QE(o,"completions",n,s,a),this._chatEndpoints.set(n,i),i}async shouldDisableSnippy(){let e=await this.accessor.get(Lt).getCopilotToken(this.accessor),r=this.accessor.get(mr).extensionMode===py.Development;return e.isInternal&&r}async getEmbeddingsEndpointInfo(){if(this._embeddingsEndpoint)return this._embeddingsEndpoint;let e=await this.shouldDisableSnippy(),r=await oFe(this.accessor);return this._embeddingsEndpoint=new m7(r,16,e),this._embeddingsEndpoint}},QE=class{constructor(e,r,n,i,o){this.engineUrl=e;this.endpoint=r;this.disableSnippy=o;this._maxTokens=i,this.model=n}get modelMaxTokenWindow(){return this._maxTokens}get engineName(){let e=this.engineUrl.split("/").pop();return e||this.engineUrl}get url(){return Yle.format("%s/%s",this.engineUrl,this.endpoint)}interceptBody(e){e&&this.disableSnippy&&(e.snippy={enabled:!1},Object.keys(e).forEach(r=>{r.startsWith("intent")&&delete e[r]}))}getExtraHeaders(){let e={};return this.disableSnippy&&(e["Editor-Plugin-Version"]="simulation-tests-plugin/2",e["Editor-Version"]="simulation-tests-editor/1.85"),{"Openai-Organization":"github-copilot","Copilot-Integration-Id":this.disableSnippy?"vscode-chat-dev":"vscode-chat",...e}}},m7=class{constructor(e,r=1,n){this.url=e;this.maxBatchSize=r;this.isDev=n;this.modelMaxTokenWindow=8192}getExtraHeaders(){return{"Openai-Organization":"github-copilot","Copilot-Integration-Id":this.isDev?"vscode-chat-dev":"vscode-chat"}}};var tT=Oe(jn()),xue=Oe(require("path"));var mue=Oe(jn());var Mg=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG"}},h7=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE"}},g7=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_MAX_RETRIES_EXCEEDED"}},v7=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_NO_ACCESS_TO_SKILL"}};function CR({error:t,message:e}){switch(t){case"ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG":return new Mg(e);case"ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE":return new h7(e);case"ERROR_TYPE_MAX_RETRIES_EXCEEDED":return new g7(e);case"ERROR_TYPE_NO_ACCESS_TO_SKILL":return new v7(e);default:return new Error(e)}}var Zle=require("crypto");function Qle(t){let e=[`repo:${t.repo}`];return t.lang&&e.push(`(lang:${t.lang.join(" OR lang:")})`),t.notLang&&e.push(`NOT (lang:${t.notLang.join(" OR lang:")})`),t.path&&e.push(`(path:${t.path.join(" OR path:")})`),t.notPath&&e.push(`NOT (path:${t.notPath.join(" OR path:")})`),e.join(" ")}function Xle(t){t=t.replace(/^git@/,""),t=t.replace(/\.git$/,"");try{let e=wt.parse(t);return e.authority!=="github.com"&&e.scheme!=="github.com"?void 0:e.path.replace(/^\//,"")}catch{return}}function Jle(t,e){return`${t.get(Ge).getConfig(Qe.AgentsEndpointUrl)}/skills/${e}`}var IR=class{constructor(e){this.accessor=e;this._logger=this.accessor.get(Le).getLogger("CodeOrDocsSearchSkill")}async isAvailable(){try{return this._logger.debug("Trying to use API to see if it is available"),await this.search("the",{repo:"microsoft/vscode"},1,.1,void 0),!0}catch{return!1}}async search(e,r,n=6,i=.766,o){let s=this.accessor.get(Lt),a=await s.getPermissiveGitHubToken({silent:!0})??await s.getBasicGitHubToken(),l=Jle(this.accessor,this.slug),c=5,u=0,p=new Set,d;for(;u<c;)try{let f={url:l,modelMaxTokenWindow:0,getExtraHeaders(){return{Accept:"application/json","Copilot-Integration-Id":"vscode-chat"}}},m=await hf(this.accessor,f,a??"",void 0,(0,Zle.randomUUID)(),{query:e,scopingQuery:Qle(r),similarity:i,limit:n},o),h=await m.text();if(m.status===404||m.status===400&&h.includes("unknown integration")){d=CR({error:"ERROR_TYPE_NO_ACCESS_TO_SKILL",message:`${this.slug}: ${h}`});break}let g;try{g=JSON.parse(h)}catch{throw new Error(`Status: ${m.status}. Error: ${h}`)}if(!g)return this._logger.debug(`[repo:${r.repo}] Got 0 results from remote skill for query: ${e}`),[];if(Array.isArray(g))return this._logger.debug(`[repo:${r.repo}] Got ${g.length} results from remote skill for query: ${e}`),g;this._logger.debug(`[repo:${r.repo}] Error thrown when querying '${e}': ${h}`),d=CR(g);break}catch(f){u++;let m=u*1e3;p.add(`Error fetching remote skill. ${f.message??f}`),this._logger.warn(`[repo:${r.repo}] Error fetching remote skill. Retrying in ${u} seconds. Query: ${e}`),await new Promise(h=>setTimeout(h,m))}throw u>=c&&(this._logger.warn(`[repo:${r.repo}] Max Retry Error thrown while querying '${e}'`),d=CR({error:"ERROR_TYPE_MAX_RETRIES_EXCEEDED",message:`Skill timed out after ${c} retries. ${Array.from(p).join(`
`)}`})),d}},Fg=class extends IR{constructor(){super(...arguments);this.slug="codesearch"}},Ug=class extends IR{constructor(){super(...arguments);this.slug="docssearch"}};var XE=250;function Nf(t){return new Tr(t.row,t.column)}function kf(t){return new tt(Nf(t.range.startPosition),Nf(t.range.endPosition))}function zl(t){return t.replace(/\s+$/,"")}function eue(t,e=2e4){return t.length>e?t.slice(0,e):t}var Of=class{constructor(e){this._accessor=e}genericWholeFileChunking({text:e,maxTokenLength:r=XE,removeEmptyLines:n=!0}){let i=e.split(/\n/),o=new Tr(0,0),s=[],a=[],l=0,c,u=()=>{let h=this._trimCommonLeadingWhitespace(a);c=h.shortestLeadingCommonWhitespace,a=h.trimmedLines},p=(h,g)=>{a.push(h),l+=g},d=()=>l,f=h=>{let g=a.map(y=>y||`
`);if(g.length===1)g[0]=g[0]?.trim();else if(g.length===0)return;let v=new Tr(h,g[g.length-1].length),_=new tt(o,v);s.push({text:g.reduce((y,b)=>y+b,""),range:_}),a=[],l=0,o=new Tr(v.line+1,0),c=void 0},m=new tt(0,0,i.length-1,i[i.length-1].length);return this._processLinesIntoChunks(i,m,r,"",f,u,p,d,()=>c,n),a&&(c===void 0&&u(),f(m.end.line)),s.filter(h=>!n||h.text.length&&/[\w\d]{2}/.test(h.text))}_processLinesIntoChunks(e,r,n,i,o,s,a,l,c,u,p=()=>!1,d=0){let f=this._accessor.get(tn),m=r.start.line,h=(v,_)=>{let y=n-(p()?d:0),b=c(),x=eue(v);x=zl(x),b!==void 0&&(x.startsWith(b)?x=i+x.substring(b.length):o(m+_));let P=l(),U=f.tokenLength(x);P+U>y?b===void 0&&s?(s(),h(x,_)):(o(m+_),x.length&&h(f.leadingString(x,y),_)):x.length&&a(x+(_===e.length-1?"":`
`),U)},g="";for(let v=0;v<e.length;v++){let _=zl(e[v]);if(_.length===0&&v!==e.length-1){u||a(void 0,1);continue}h(g+_,v),g=""}}genericChunking({lineRangeText:e,maxTokenLength:r=XE,removeEmptyLines:n=!0,extraLineRangeSeparator:i="",numTokensInEllipsis:o=0}){let s=!0;if(r<0)throw Error("Cannot chunk text, not enough chunk room");if(e.length===0)return[];let a=e[0].range.start,l=[],c=this._accessor.get(tn),u=c.tokenLength(i),p=[],d=0,f=(v,_)=>{p.push(v),d+=_},m=()=>d,h=v=>{s=!1;let _=p.map(x=>x||`
`);if(_.length===0){p=[],d=0;return}let y=new Tr(v,_[_.length-1].length),b=new tt(a,y);l.push({text:zl(_.reduce((x,P)=>x+P,"")),range:b}),p=[],d=0,_[_.length-1].endsWith(`
`)?a=new Tr(y.line+1,0):a=new Tr(y.line,_[_.length-1].length)};for(let v=0;v<e.length;v++){let _=e[v];if(d>0&&v>0){let y=r-d;_.text.length>2e4||c.tokenLength(_.text)>y?(f(i,u),h(e[v-1].range.end.line)):u>0&&f(i,u)}this._processLinesIntoChunks(_.text.split(/\n/),_.range,r,"",h,void 0,f,m,()=>{},n,()=>s,o)}p&&h(e[e.length-1].range.end.line);let g=l[l.length-1];return l.pop(),this._processLinesIntoChunks(g.text.split(/\n/),g.range,r-o,"",h,void 0,f,m,()=>{},n,()=>s,o),p&&h(e[e.length-1].range.end.line),l.filter(v=>!n||v.text.length&&/[^\s]/.test(v.text))}_trimCommonLeadingWhitespace(e){let r=e.map(s=>{if(!s)return;let a=s.match(/^\s+/),l=a?a[0]:"",c=s.substring(l?.length);return[l,c]}),n=r.filter(s=>!!s),i=this._getCommonLeadingWhitespace(n)??"",o=i.length;return{trimmedLines:r.map(s=>s?s[0].substring(o)+s[1]:void 0),shortestLeadingCommonWhitespace:i}}_getCommonLeadingWhitespace(e){let r;for(let n of e){if(r===void 0){r=n[0];continue}r=this._commonLeadingStr(r,n[0])}return r??""}_commonLeadingStr(e,r){let n=e.length<r.length?e:r;if(n.length===0)return"";for(let i=1;i<n.length;i++)e.substring(0,i)!==r.substring(0,i)&&n.substring(0,i-1);return n}};var Ey=class{constructor(e,r,n){this._queryTree=e;this.accessor=r;this._naiveChunker=new Of(r);let i=this.accessor.get(tn);this._inlineComment=n?.blockWrap??{start:"",end:""},this._elipsisPlaceholder=n?.elipsisPlaceholder??"...",this._lookForIndentInHeader=n?.lookForIndentInHeader??!0,this._numTokensInEllipsis=i.tokenLength(this._elipsisPlaceholder)+1}get _summaryPlaceHolder(){return this._inlineComment.start+this._elipsisPlaceholder+this._inlineComment.end}async parse(e,r){let n=await this._queryTree,i=this._parseBlocks(n.roots,"",e,r),o=i.content.flat(),s=i.outline??[],a=this.createOutlineSummary("","",e,{text:n.syntaxTreeRoot.text,range:kf(n.syntaxTreeRoot)},s,new tt(0,0,n.syntaxTreeRoot.range.endPosition.row,n.syntaxTreeRoot.range.endPosition.column),"");return a.length===1&&(a[0]={...a[0],isFullFile:!0}),o.push(...a),o}_parseBlocks(e,r,n,i){return this._parseSemanticStructure(e,r,n,i,(o,s,a,l)=>{let c=l+s.text,u=()=>{if(c.trim().length===0)return{content:{text:[],isFull:!0}};let h;try{h=this._naiveChunker.genericChunking({lineRangeText:[{range:s.range,text:c}],maxTokenLength:a,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return{content:{text:[],isFull:!1},outline:[]}}return{content:{text:h,isFull:!0}}};if(this.accessor.get(tn).tokenLength(c)<=a)return{content:{text:[{range:s.range,text:c.replace(/(^\s*\n)|(\n\s*$)/g,"")}],isFull:!0}};if(o.length===0)return u();let d=this._parseBlocks(o,l,a,i),f=d.content,m=d.outline;return{content:{text:f,isFull:!1},outline:m}})}_parseSemanticStructure(e,r,n,i,o){return{outline:void 0,content:[]}}_createOutlineBody(e,r,n){let i=(n+e.text).split(`
`),o=e.range.start,s=[],a=o,l=d=>{let f=d.line-o.line,m=d.character;return o.line===d.line&&(m=d.character-o.character),new Tr(f,m)},c=d=>{let f=d.character===i[d.line-o.line].length-1;return{newPosition:new Tr(d.line,d.character+1),isNewLine:f}},u=(d,f)=>{let m=[],h=l(d),g=l(f),v=i[h.line].substring(h.character);if(h.line===g.line){let y=v.substring(0,g.character-h.character),b=c(f);a=b.newPosition,b.isNewLine&&(y+=`
`),m.push(y)}else{let y=i[g.line].substring(0,g.character);y=y.replace(new RegExp(`${n}$`),"");let b=c(f);a=b.newPosition,b.isNewLine&&(y+=`
`),m.push(v+`
`);for(let x=h.line+1;x<g.line;x++)m.push(i[x]+`
`);m.push(y)}let _=m.join("");s.push({text:_.replace(/(^\s+\n)/,""),range:new tt(d,f)})},p=d=>{s.push({text:d.summary+`

`,range:d.range})};return r.sort((d,f)=>d.range.start.line-f.range.start.line||d.range.end.line-f.range.end.line),r.forEach(d=>{u(a,d.range.start),p(d),a=c(d.range.end).newPosition}),u(a,e.range.end),s}createOutlineSummary(e,r,n,i,o,s,a){let l=this._createOutlineBody(i,o.map(u=>({summary:zl(u.summary),range:u.range})),a),c;try{c=this._naiveChunker.genericChunking({lineRangeText:l,removeEmptyLines:!1,maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return[]}return this._createSummary(e,r,c,s,a)}_createSummary(e,r,n,i,o){return n.length===0?[]:Zn(n.map((s,a)=>{let l=e.length===0?"":`${e}`;a!==0&&(l+=`${o}${this._elipsisPlaceholder}
`);let c="";if(a!==n.length-1&&(c+=`
${o}${this._elipsisPlaceholder}`),r.length>0&&(c+=r),Array.isArray(s))return Zn(s.map(u=>{if(u.text.trim().length!==0)return{range:u.range,text:l+u.text+c}}));if(s.text.trim().length!==0)return{range:new tt(a===0?i.start:s.range.start,s.range.end),text:l+s.text+c}})).flat()}findNewIndent(e,r,n){let o=(this._lookForIndentInHeader?r.text.substring(0,n.startIndex-r.startIndex):n.text).match(new RegExp(`\\n+(\\s*)${e}${this._lookForIndentInHeader?"$":""}`));return o&&o.length>1?o[1]:""}};var Qa=class extends Ey{_parseSemanticStructure(e,r,n,i,o){let s=[],a=c=>{let u=[],p=c.info,d=p.mainBlock,f=p.detailBlocks.comments,m=p.detailBlocks.body,h=this._getInnerLineRangeText({text:m.text,range:kf(m)}),g=m.startIndex-d.startIndex+h.prefix.length,v=this.findNewIndent(r,d,m),_="";for(let S of f)_+=r+S.text+`
`;let y=r+d.text.substring(0,g),b=_+y,x=kf(d);f.length>0&&(x=x.with(Nf(f[0].range.startPosition)));let P=this.accessor.get(tn),U=i*n,H=b.replace(/(\n*)(\n\s*)$/g,`
`),j=P.tokenLength(H);j>U&&(H=y,j=P.tokenLength(y),j>U&&(H="",j=0));let M=h.suffix+d.text.substring(m.endIndex-d.startIndex),F=P.tokenLength(H+`
`+M),z=n-F,q=o(c.children,h.body,z,r+v);x=new tt(x.start,Nf(d.range.endPosition)),u.push(...this._createSummary(H,M,q.content.text,x,r+v));let L=zl(_+r+d.text.substring(0,m.startIndex-d.startIndex));return s.push({summary:L+" "+this._summaryPlaceHolder,range:x}),q.outline!==void 0&&u.push(...this.createOutlineSummary(H,M,z,h.body,q.outline,x,r+v)),u},l=e.map(c=>a(c));return{outline:s,content:l}}_getInnerLineRangeText(e){let r=e.text.replace(/(^\s*\{\s*)|(\s*\}\s*$)/g,""),n=e.text.indexOf(r),i=e.text.substring(0,n),o=e.text.substring(n+r.length),s=(i.match(/\n/g)||[]).length,a=i.match(/\n(.*)$/g)?.length??0,l=(r.match(/\n/g)||[]).length,c=r.match(/\n(.*)$/g)?.length??0,u=new Tr(e.range.start.line+s,s===0?e.range.start.character+a:a),p=new Tr(e.range.start.line+l,l===0?e.range.start.character+c:c),d=i.replace(/\{[^\S\r\n]*/g,"{"),f=o.replace(/\}[^\S\r\n]*/g,"}");return{prefix:d,body:{text:r,range:new tt(u,p)},suffix:f}}};var wR=class{constructor(e,r){this._text=e;this.accessor=r;this.naiveChunker=new Of(r)}parse(e){let r=this._getLineRangeText();return this.naiveChunker.genericChunking({lineRangeText:r,maxTokenLength:e,extraLineRangeSeparator:`

`})}_getLineRangeText(){let e=this._text.split(`
`),r=[],n=new Tr(0,0),i=[];for(let o=0;o<e.length;o++)if(e[o].trim().length===0){r.length>0&&(i.push({text:r.join(`
`),range:new tt(n,new Tr(o,e[o].length))}),r.length=0,n=new Tr(o+1,0));continue}else r.push(e[o]);return r.length>0&&i.push({text:r.join(`
`),range:new tt(n,new Tr(e.length-1,e[e.length-1].length-1))}),i}};var AR=class extends Ey{_parseSemanticStructure(e,r,n,i,o){let s=[],a=c=>{let u=[],p=c.info,d=p.mainBlock,f=p.detailBlocks.decorator,m=p.detailBlocks.docstring,h=p.detailBlocks.body,g=d.text.length-1;m?g=m.endIndex-d.startIndex:h&&(g=h.startIndex-d.startIndex);let v=this.findNewIndent(r,d,h),_=f?r+f.text+`
`:"",y=r+d.text.substring(0,g),b=_+y+`
`,x=kf(d);f&&(x=x.with(Nf(f.range.startPosition)));let P=this.accessor.get(tn),U=i*n,H=b.replace(/\n+\s*$/g,`
`),j=zl(b),M=P.tokenLength(H);M>U&&(H=r+b.substring(0,h.startIndex-d.startIndex),M=P.tokenLength(H),M>U&&(H="",M=0)),x=new tt(x.start,Nf(d.range.endPosition)),s.push({summary:m?j+`
${v}`+this._summaryPlaceHolder:j+" "+this._summaryPlaceHolder,range:x});let F={text:h.text,range:kf(h)},z=o(c.children,F,n-M,r+v),q=r+d.text.substring(0,h.startIndex-d.startIndex).replace(/\n+\s*$/g,`
`);return z.content.isFull&&(H=q),u.push(...this._createSummary(H,"",z.content.text,x,r+v)),z.outline!==void 0&&u.push(...this.createOutlineSummary(q,"",n-M,F,z.outline,x,r+v)),u},l=e.map(c=>a(c));return{outline:s,content:l}}};var aFe=.6;function $l(t){return t!=="python"&&t!=="ruby"?{elipsisPlaceholder:"/*...*/",blockWrap:{start:"{",end:"}"},lookForIndentInHeader:!1}:{}}var cFe=[{fileExtensions:["ts","mts","cts"],parse:(t,e,r)=>new Qa(Wl(t,"typescript"),r,$l("typescript")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["tsx"],parse:(t,e,r)=>new Qa(Wl(t,"tsx"),r,$l("tsx")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["js","mjs","cjs","jsx"],parse:(t,e,r)=>new Qa(Wl(t,"javascript"),r,$l("javascript")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["py"],parse:(t,e,r)=>new AR(Wl(t,"python"),r,$l("python")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["java"],parse:(t,e,r)=>new Qa(Wl(t,"java"),r,$l("java")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["cpp","cc","c++","cp","cxx","cppm","hpp","h","c"],parse:(t,e,r)=>new Qa(Wl(t,"cpp"),r,$l("cpp")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["cs"],parse:(t,e,r)=>new Qa(Wl(t,"csharp"),r,$l("csharp")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["go"],parse:(t,e,r)=>new Qa(Wl(t,"go"),r,$l("go")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["md"],parse:(t,e,r)=>Promise.resolve(new wR(t,r).parse(e.maxTokenLength))},{fileExtensions:["rb"],parse:(t,e,r)=>new Qa(Wl(t,"ruby"),r,$l("ruby")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["rs"],parse:(t,e,r)=>new Qa(Wl(t,"rust"),r,$l("rust")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)}];function tue(t){let e=sa(t).toLowerCase().replace(/\./,"");return cFe.find(r=>r.fileExtensions.includes(e))}function RR(t){return!!tue(t)}var _7;async function Wl(t,e){return _7=_7?.then(async()=>await S9(e,t))??S9(e,t),await _7}async function y7({text:t,accessor:e,maxTokenLength:r=XE,uri:n,maxHeaderLengthFactor:i=aFe,shouldSemanticChunk:o=!1}){let s=[];try{if(o){let a=await tue(n)?.parse(t,{maxTokenLength:r,maxHeaderLengthFactor:i},e);a&&s.push(...a.map(l=>({file:n,text:l.text,range:l.range,isFullFile:l.isFullFile})))}}catch{s=[]}if(!s.length){let a=new Of(e).genericWholeFileChunking({text:t,maxTokenLength:r});s.push(...a.map(l=>({file:n,text:l.text,range:l.range,isFullFile:a.length===1})))}return s.filter(a=>a.text)}var oue=require("crypto"),sue=Oe(iue()),aue=require("util");var Bg=class{constructor(e,r){this.baseUri=e;this.pattern=r}get base(){throw new Error("Not implemented")}};var vFe=new Set(["jpg","jpeg","jpe","png","gif","bmp","tif","tiff","tga","ico","webp","svg","eps","heif","heic","pdf","raw","mp4","m4v","mkv","webm","mov","avi","wmv","flv","mp3","wav","m4a","flac","ogg","wma","weba","aac","7z","bz2","gz","gz","rar","tar","xz","zip","vsix","db","bin","dat","hex","map","wasm","pyc","pdb","sym","git"]),_Fe=["node_modules","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],yFe=[".DS_Store","Thumbs.db","package-lock.json","yarn.lock"],xFe=["vscode","vscode-userdata","output","inmemory","private","git"];function qg(t,e){if(xFe.includes(t.scheme)||e&&!["file","untitled"].includes(t.scheme)&&!e.getWorkspaceFolders().some(i=>t.scheme===i.scheme))return!1;let r=sa(t).replace(/\./,"").toLowerCase();return!(vFe.has(r)||yFe.includes(Pc(t).toLowerCase())||t.fsPath.toLowerCase().split(/[/\\]/g).some(i=>_Fe.includes(i)))}async function bFe(t,e=1e5,r){let n=t.get(At),i=t.get(es),o=t.get(Mc);if(await o.init(),r?.isCancellationRequested)return[];let s=new Xi;for(let a of n.getWorkspaceFolders()??[]){if(s.size>=e)break;let l=await i.findFiles(new Bg(a,"**/*"),void 0,e-s.size);if(r?.isCancellationRequested)return[];for(let c of l)qg(c,n)&&!o.isIgnored(c)&&s.set(c)}return s.keys()}var PR=class{constructor(e,r){this._uri=e;this._accessor=r;this._isDisposed=!1;this._disposedCts=new Dg}dispose(){this._isDisposed=!0,this._disposedCts.cancel(),this._disposedCts.dispose()}get uri(){return this._uri}async getHash(e){if(this._hash===void 0){let r=await this.getText(e);r!==void 0&&(this._hash=(0,oue.createHash)("sha256").update(r).digest("hex"))}return this._hash}async getBasicChunks(e){return this._basicChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:y7({text:r,accessor:this._accessor,uri:this._uri,shouldSemanticChunk:!1})),await Z2(this._basicChunks,e)??[]}async getSemanticChunks(e){return RR(this.uri)?(this._semanticChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:y7({text:r,accessor:this._accessor,uri:this._uri,shouldSemanticChunk:!0})),await Z2(this._semanticChunks,e)??[]):this.getBasicChunks(e)}},T7=class extends PR{constructor(r,n,i){super(r,n);this._fs=i}async getText(r){return this._text??=this._fs.readFile(this.uri).then(async n=>this._isDisposed||await(0,sue.isBinaryFile)(Buffer.from(n))||this._isDisposed?"":new aue.TextDecoder().decode(n),n=>""),await Z2(this._text,r)??""}},NR=class extends PR{constructor(r,n){super(r.uri,n);this._textDocument=r}async getText(r){return this._textDocument.getText()}},ma=class{constructor(e){this._textDocumentFiles=new Xi;this._fsFiles=new Xi;this._disposables=[];this._listeners=new Set;this._accessor=e,this._fileSystem=e.get(Mr)}get size(){return this._fsFiles.size}dispose(){this._disposables.forEach(e=>e.dispose());for(let e of this._fsFiles.values())e.dispose();this._fsFiles.clear();for(let e of this._textDocumentFiles.values())e.dispose();this._textDocumentFiles.clear()}get(e){return this._textDocumentFiles.get(e)||this._fsFiles.get(e)}*entries(){let e=new Xi;for(let[r,n]of this._textDocumentFiles.entries())yield[r,n],e.set(r);for(let[r,n]of this._fsFiles.entries())e.has(r)||(e.set(r),yield[r,n])}*keys(){for(let[e]of this.entries())yield e}*values(){for(let[e,r]of this.entries())yield r}addListener(e){return this._listeners.has(e)?{dispose:()=>{}}:(this._listeners.add(e),{dispose:()=>{this._listeners.delete(e)}})}registerListeners(){let e=this._accessor.get(At),r=this._accessor.get(Mr),n=this._accessor.get(At),i=s=>{if(!qg(s.uri,n))return;let a=this._textDocumentFiles.get(s.uri),l=this._fsFiles.get(s.uri);a&&a.dispose(),this._textDocumentFiles.set(s.uri,new NR(s,this._accessor)),!a&&!l?this._listeners.forEach(c=>c.onDidCreateFile?.(s.uri)):this._listeners.forEach(c=>c.onDidChangeFile?.(s.uri))};this._disposables.push(e.onDidOpenTextDocument(i)),this._disposables.push(e.onDidChangeTextDocument(s=>i(s.document))),this._disposables.push(e.onDidCloseTextDocument(s=>{let a=this._textDocumentFiles.get(s.uri);if(!a)return;this._textDocumentFiles.delete(s.uri),a.dispose(),this._fsFiles.get(s.uri)?this._listeners.forEach(c=>c.onDidChangeFile?.(s.uri)):this._listeners.forEach(c=>c.onDidDeleteFile?.(s.uri))}));let o=r.createFileSystemWatcher("**/*");this._disposables.push(o),this._disposables.push(o.onDidChange(s=>{if(!qg(s,n))return;let a=this._fsFiles.has(s);this.createOrUpdateFsEntry(s),a?this._listeners.forEach(l=>l.onDidChangeFile?.(s)):this._listeners.forEach(l=>l.onDidCreateFile?.(s))})),this._disposables.push(o.onDidCreate(s=>{qg(s,n)&&(this._fsFiles.has(s)||(this.createOrUpdateFsEntry(s),this._listeners.forEach(a=>a.onDidCreateFile?.(s))))})),this._disposables.push(o.onDidDelete(s=>{let a=this._fsFiles.get(s);a&&(a.dispose(),this._fsFiles.delete(s),this._listeners.forEach(l=>l.onDidDeleteFile?.(s)))}))}initialize(){return this._initializedWorkspacePromise??=(async()=>{this.registerListeners();let e=this._accessor.get(At);for(let n of e.textDocuments)qg(n.uri,e)&&this._textDocumentFiles.set(n.uri,new NR(n,this._accessor));let r=await bFe(this._accessor);for(let n of r)this.createOrUpdateFsEntry(n)})(),this._initializedWorkspacePromise}createOrUpdateFsEntry(e){let r=this._fsFiles.get(e);r&&r.dispose();let n=new T7(e,this._accessor,this._fileSystem);this._fsFiles.set(e,n)}};var Ff=class{constructor(e){this._accessor=e;this.disposables=new Array}dispose(){for(;this.disposables.length;)this.disposables.pop()?.dispose()}_register(e){return this.disposables.push(e),e}async toSemanticChunks(e,r){let n=this._accessor.get(ma),i=new Xi;for(let s of e){let a=i.get(s.file);a?a.push(s):i.set(s.file,[s])}let o=await Promise.all(Array.from(i,async([s,a])=>{let l=n.get(s);if(l&&RR(s)){let c=await l.getSemanticChunks(r);if(r.isCancellationRequested)return[];let u=new Set;for(let p of a){let d=!1;for(let f of c)f.range.intersection(p.range)&&(u.add(f),d=!0);d||u.add(p)}return Array.from(u)}else return a}));return Array.from(new Set(o.flat()))}};var cue=require("path");var EFe="1.0.8",Bc=class t{constructor(e){this._accessor=e;this._embeddingsMemoryCache=new Map;this.shouldSearchTimeout=!0;this._embeddingsComputer=e.get(Mi),this._workspaceIndex=e.get(ma),this._embeddingsStorageCache=new xy(e,2,"workspaceEmbeddingsCache",EFe),this._logger=e.get(Le).getLogger("WorkspaceChunkEmbeddingsIndex"),this.loadCacheFromStorage()}static{this._MAX_EMBEDDINGS_COMPUTATION_TIME=1e4}static{this._MAX_CHUNK_LENGTH=2e3}get size(){return this._workspaceIndex.size}workspaceEmbeddingsInitialized(){return this._initializedWorkspacePromise??=this._workspaceIndex.initialize(),this._initializedWorkspacePromise}async triggerIndexing(e){let r=Array.from(this._workspaceIndex.values()),n=new Array;for(let o of r){let s=await o.getSemanticChunks(e);s=s.filter(a=>a.text.length<t._MAX_CHUNK_LENGTH),n.push(...s)}if(e.isCancellationRequested)return;let i=await this.getEmbeddings(n,e);this._logger.debug(`Indexed ${i.length} chunks`)}async searchFileChunks(e,r,n,i){let o;if(i)o=i;else{o=new Array;let l=(await Promise.all(Array.from(this._workspaceIndex.values(),c=>c.getSemanticChunks(n)))).flat();if(n.isCancellationRequested)return[];o.push(...l)}o=o.filter(l=>l.text.length<t._MAX_CHUNK_LENGTH);let s=this.shouldSearchTimeout?await bp(this.getEmbeddings(o,n),t._MAX_EMBEDDINGS_COMPUTATION_TIME):await this.getEmbeddings(o,n);if(!s)throw new Error("Timeout computing embeddings");return jle(e,s,r)}async loadCacheFromStorage(){let e=await this._embeddingsStorageCache.getCache();e||await this._embeddingsStorageCache.clearCache(),this._embeddingsMemoryCache.clear();for(let[r,n]of Object.entries(e??{}))this._embeddingsMemoryCache.set(r,n)}async getEmbeddings(e,r){let n=new Array;for(let s of e){let a=this._embeddingsMemoryCache.get(s.text);a?s.embedding=a:n.push(s)}if(n.length===0)return e;let i=n.map(s=>{let a=this._accessor.get(At).getWorkspaceFolder(s.file),l=a?(0,cue.relative)(a.path,s.file.path):s.file.fsPath;return TFe(s,l)}),o=await this.computeEmbeddingsWithRetry(i,r);for(let s=0;s<n.length;s++){let a=n[s];a.embedding=o[s],this._embeddingsMemoryCache.set(a.text,a.embedding)}return e}async computeEmbeddingsWithRetry(e,r){let i=0,o;for(;i<3;)try{if(o=await this._embeddingsComputer.computeEmbeddings(e,r),!o)throw new Error("Failed to compute embeddings");return o}catch(s){if(i++,i===3)throw s;if(r.isCancellationRequested)throw new Error("Cancelled computing embeddings");this._logger.warn(`Error computing embeddings. Retrying in ${i} seconds. Error: ${s}`),await new Promise(a=>setTimeout(a,1e3*i))}throw new Error("Failed to compute embeddings")}};function TFe(t,e){return`File: \`${e}\`
\`\`\`${sa(t.file).replace(".","")}
${t.text}
\`\`\``}var ZE=class extends Ff{constructor(r,n=!1){super(r);this._throwOnCodeSearchError=n;this.id="codesearch";this._codeSearchSkill=r.get(Fg),this._workspaceChunkIndex=r.get(ma),this._embeddingsIndex=r.get(Bc),this._logger=r.get(Le).getLogger("CodeSearchChunkSearch")}async searchFileChunks(r,n,i){if(!r.length||i.isCancellationRequested)return[];if(await this.initialized(),i.isCancellationRequested)return[];this._logger.debug("Fetching related workspace chunks in repository...");let o=await this.getSimilarFilesFromCodeSearch(r);return o?(this._logger.debug("Remapping chunks to semantic chunks..."),await this.toSemanticChunks(o,i)):[]}async isAvailable(){let r=this._accessor.get(Ge).getConfig(Qe.WorkspaceCodeSearchEnabled);return r===!1||r===void 0&&await this._accessor.get(Uc).getTreatmentVariableAsync("vscode","copilotchat.useCodeSearch",!0)!==!0?!1:(this._isAvailable===void 0&&(this._isAvailable=this._codeSearchSkill.isAvailable()),this._isAvailable)}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}async getSimilarFilesFromCodeSearch(r){let n=this._accessor.get(At).getWorkspaceFolders(),i=this._accessor.safeGet(Ka)?.repositories;if(!n.length||!i)return;let o=[];for(let l=0;l<i.length;l++){let c=i[l];if(!c)continue;let u=n[l],p=this.getRepoNamesFromContext(c);for(let d of r)for(let f of p)o.push(this.doCodeSearch(d.fullText,u,{repo:f}))}let s=await Promise.allSettled(o),a=new Array;for(let l of s)if(l.status==="fulfilled")a.push(...l.value);else{if(l.reason instanceof Mg)throw l.reason;if(this._throwOnCodeSearchError)throw this._logger.exception(l.reason),this._accessor.get(dt).sendExceptionTelemetry(l.reason,"Error"),l.reason}return a.sort((l,c)=>c.score-l.score)}async doCodeSearch(r,n,i){return(await this._codeSearchSkill.search(r,i)).map(s=>{let a=this._workspaceChunkIndex.get(wt.joinPath(n,s.path));if(a)return{file:a.uri,score:s.score,text:s.contents,range:new tt(s.range.start,0,s.range.end+1,0)}}).filter(s=>!!s)}getRepoNamesFromContext(r){return r.remoteFetchUrls?r.remoteFetchUrls.filter(n=>!!n).map(n=>Xle(n)).filter(n=>!!n):[]}};var kR=class t extends Ff{constructor(r,n=!1){super(r);this._inTests=n;this.id="ada";this._embeddingsComputer=r.get(Mi),this._embeddingsIndex=r.get(Bc),this._logger=r.get(Le).getLogger("EmbeddingsCacheChunkSearch"),n&&(this._embeddingsIndex.shouldSearchTimeout=!1)}static{this.FILE_CAP=200}async searchFileChunks(r,n,i){if(!r.length||i.isCancellationRequested)return[];this._logger.debug("Computing embeddings for query...");let o=await this._embeddingsComputer.computeEmbeddings(r.map(s=>s.fullText),i);if(!o){if(this._inTests)throw new Error("Failed to compute query embeddings");return[]}return i.isCancellationRequested?[]:(await this.initialized(),i.isCancellationRequested?[]:(this._logger.debug("Fetching related workspace chunks in repository..."),await this._embeddingsIndex.searchFileChunks(o,n,i)))}async isAvailable(){return this._isAvailable===void 0&&(this._isAvailable=this.doIsAvailable()),this._isAvailable}async doIsAvailable(){return await this.initialized(),this._embeddingsIndex.size<t.FILE_CAP&&this.triggerIndexing(),!1}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}triggerIndexing(){this._initializedWorkspacePromise||(this._initializedWorkspacePromise=this._embeddingsIndex.triggerIndexing(bf.None).then(()=>{this._isAvailable=Promise.resolve(!0),this._logger.debug("Workspace Chunk Embeddings Index initialized.")}).catch(r=>{this._logger.warn(`Failed to index workspace: ${r}`),this._initializedWorkspacePromise=void 0}))}};var due=Oe(w7()),fue=Oe(require("path"));function eT(t,e){if(!t)return t;if(Array.isArray(t))return t.map(r=>eT(r,e));if(typeof t=="object"){let r=e(t);if(r)return r;let n={};for(let i in t)n[i]=eT(t[i],e);return n}return t}var IFe=fue.default.join(__dirname,"tfidfWorker.js"),OR=class{constructor(e){this.id="tfidf";this._disposables=[];this._tfIdfWorker=new yp(()=>new fy(IFe));let r=n=>{let i=this._workspaceIndex.get(n);i&&this.addOrUpdateTfidfEntries([i])};this._workspaceIndex=e.get(ma),this._disposables.push(this._workspaceIndex.addListener({onDidChangeFile:r,onDidCreateFile:r,onDidDeleteFile:n=>{this._tfIdfWorker.value.proxy.delete(n)}}))}dispose(){this._disposables.forEach(e=>e.dispose()),this._tfIdfWorker.hasValue&&this._tfIdfWorker.value.terminate()}initialized(){return this._initializePromise??=this._initializeWorkspaceFiles(),this._initializePromise}async searchFileChunks(e,r,n){if(await this.initialized(),n.isCancellationRequested)return[];let i=await this._tfIdfWorker.value.proxy.search(e.map(o=>o.keywords.join(", ")),r,-1/0);return AFe(i)}async isAvailable(){return!0}async _initializeWorkspaceFiles(){await this._workspaceIndex.initialize(),await this.addOrUpdateTfidfEntries(this._workspaceIndex.values())}async addOrUpdateTfidfEntries(e){let r=(0,due.default)(20);this._tfIdfWorker.value.proxy.addOrUpdate(wFe(await Promise.all(Array.from(e,n=>r(async()=>({uri:n.uri,text:await n.getText(bf.None),chunks:await n.getBasicChunks(bf.None)}))))))}};function wFe(t){return eT(t,e=>{if(wt.isUri(e))return{$mid:"uri",...e};if(e instanceof tt)return{$mid:"range",start:{line:e.start.line,character:e.start.character},end:{line:e.end.line,character:e.end.character}}})}function AFe(t){return eT(t,e=>{if(e.$mid==="range")return new tt(e.start.line,e.start.character,e.end.line,e.end.character);if(e.$mid==="uri")return wt.revive(e)})}var LR=class extends Ff{constructor(r){super(r);this.id="tfidf";this._tfidf=this._register(new OR(r)),this._logger=r.get(Le).getLogger("TfIdfWithRerankChunkSearch")}async searchFileChunks(r,n,i){this._logger.debug("Performing full workspace search for chunks...");let s=await this._tfidf.searchFileChunks(r,n*2,i);if(i.isCancellationRequested||!s.length)return[];this._logger.debug("Remapping chunks to semantic chunks...");let a=await this.toSemanticChunks(s,i);return i.isCancellationRequested||!a.length?[]:a}isAvailable(){return Promise.resolve(!0)}};var Hg=class t{constructor(e,r){this._accessor=e;this._forcedChunkSearchStrategy=r;this._workspaceChunkEmbeddingsIndex=this._accessor.get(Bc);this._embeddingsComputer=this._accessor.get(Mi);this._logger=this._accessor.get(Le).getLogger("WorkspaceChunkSearch");this._inTests=!!this._forcedChunkSearchStrategy,this._embeddingsCacheChunkSearch=new kR(e,this._inTests),this._codeSearchChunkSearch=new ZE(e,this._inTests),this._tfIdfWithSemanticChunkSearch=new LR(e)}static{this.ADDITIONAL_RESULTS_TIMEOUT=5e3}dispose(){this._embeddingsCacheChunkSearch.dispose(),this._codeSearchChunkSearch.dispose(),this._tfIdfWithSemanticChunkSearch.dispose()}async searchFileChunks(e,r,n){let i=await this.getStrategies();if(n.isCancellationRequested)return[];let o=i.map(()=>new Nc);for(let u=0;u<i.length;u++){let p=i[u],d=o[u];p.searchFileChunks(e,r,n).then(f=>{d.isSettled||d.complete(f)}).catch(f=>{d.isSettled||d.error(f)})}let s=o.map(u=>u.p);try{await Promise.any(s)}catch(u){let p=u;throw p.errors.length===1?p.errors[0]:u}if(n.isCancellationRequested)return[];let a=await bp(Promise.allSettled(s),t.ADDITIONAL_RESULTS_TIMEOUT);if(n.isCancellationRequested)return[];if(!a){for(let u of o)u.isSettled||await u.cancel();a=await Promise.allSettled(s)}if(n.isCancellationRequested)return[];let l=new Array,c;for(let u=0;u<a.length;u++){let p=a[u],d=i[u];if(p.status==="fulfilled"){c||(c=d.id),l.push(...p.value);continue}if(p.reason instanceof Mg&&d instanceof ZE)try{if(await this._accessor.get(Lt).getPermissiveGitHubToken({silent:!0}))continue;if(await this._accessor.get(Lt).getPermissiveGitHubToken({forceNewSession:{detail:mue.t("More permissions are required to search private repositories")}})){let m=await d.searchFileChunks(e,r,n);c=d.id,l.unshift(...m)}}catch{}}return this.reportTopSuccessfulFlow(c),this.rerankChunks(e,l,r,n)}async rerankChunks(e,r,n,i){if(!await this.getShouldUseAda())return r.slice(0,n);if(i.isCancellationRequested)return[];let o=await this._embeddingsComputer.computeEmbeddings(e.map(s=>s.fullText),i);if(i.isCancellationRequested)return[];if(!o){if(this._inTests){let s=new Error("Failed to compute query embeddings");throw this._logger.exception(s),this._accessor.get(dt).sendExceptionTelemetry(s,"Error"),s}return this._logger.warn("Failed to compute query embeddings"),r.slice(0,n)}try{return await this._workspaceChunkEmbeddingsIndex.searchFileChunks(o,n,i,r)}catch(s){return this._logger.warn("Failed to search chunk embeddings index: ",s),r.slice(0,n)}}async getStrategies(){let e=new Array;switch(this._forcedChunkSearchStrategy){case"codesearch":e.push(this._codeSearchChunkSearch);break;case"ada":e.push(this._embeddingsCacheChunkSearch);break;case"tfidf":e.push(this._tfIdfWithSemanticChunkSearch);break;default:await this._codeSearchChunkSearch.isAvailable()&&e.push(this._codeSearchChunkSearch),await this.getShouldUseAda()&&await this._embeddingsCacheChunkSearch.isAvailable()&&e.push(this._embeddingsCacheChunkSearch),e.push(this._tfIdfWithSemanticChunkSearch);break}return this._logger.debug(`Using ${e.map(r=>r.id).join(", ")} for chunk search`),e}async getShouldUseAda(){let e=this._accessor.get(Ge).getConfig(Qe.WorkspaceUseAdaEnabled);return e!==void 0?e:await this._accessor.get(Uc).getTreatmentVariableAsync("vscode","copilotchat.workspaceUseAda",!0)??!0}reportTopSuccessfulFlow(e){this._logger.debug(`'${e}' was the top working workspace chunk search strategy`),this._accessor.get(wr).sendTelemetryEvent("workspaceChunkSearchStrategy",{strategy:e??"none"})}};function hue(t,e,r){return Math.min(Math.max(t,e),r)}function gue(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}async function DFe(t,e=1/0,r){let n=vue(0,t,e),i=e-gue(n);for(;;){let o=!1,s=[];for(let a of n)if(a.type==="text")s.push(a);else if(a.type==="dir"){s.push({type:"text",value:a.value});let l=await a.getChildren();if(r?.isCancellationRequested)return"";let c=vue(a.level+1,l,i-1);c.length&&(o=!0,i-=gue(c)+1,s.push(...c))}if(n=s,!o)break}return n.map(o=>o.value).join(`
`)}function vue(t,e,r){let n="	".repeat(t),i=[],o=r;for(let s=0;s<e.length;++s){let a=e[s],l=n+a.name+(a.type===2?"/":"");if(l.length>o){let c=n+"...";for(;c.length>o&&i.length>0;)o+=i.pop().value.length+1;c.length<=o&&i.push({type:"text",value:c});break}a.type===2?i.push({type:"dir",level:t,value:l,getChildren:a.getChildren}):i.push({type:"text",value:l}),o-=l.length,s!==e.length-1&&(o-=1)}return i}async function _ue(t,e,r,n){let i=t.get(Mr),o=t.get(Mc);async function s(l){let c;try{c=await i.readDirectory(l)}catch(u){return console.error(u),[]}return n.isCancellationRequested?[]:c.filter(u=>{let p=wt.joinPath(l,u[0]);return qg(p)&&!o.isIgnored(p)}).map(u=>u[1]===2?{type:2,name:u[0],getChildren:()=>s(wt.joinPath(l,u[0]))}:{type:1,name:u[0]})}if(await o.init(),n.isCancellationRequested)return"";let a=await s(e);return n.isCancellationRequested?"":DFe(a,r,n)}var A7=class{constructor(){this.kind="workspace";this.keywordLineRegexp=/^[\*\-]\s*(.+)/m}async resolveContext(e,r,n,i){let o=r.message;if(!o)return;let s=e.get(fr);this.logger||(this.logger=e.get(Le).getLogger("workspaceResolver")),this.logger.debug("Collecting workspace structure..."),i.report({message:tT.t("Collecting workspace structure")});let a=await yue(e,1e3,n);if(n.isCancellationRequested)return;this.logger.debug("Asking the model to update the user question and provide queries..."),i.report({message:tT.t("Deciding which workspace information to collect")});let l=await s.fetchOne(Zn([...this.getHistory(r.conversation),{role:"system",content:PFe},a?{role:"user",content:a}:void 0,{role:"user",content:o}]),async u=>{},n,2,r.endpoint,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceIntent"});if(n.isCancellationRequested)return;if(l.type!=="success")throw new Error(tT.t("Encountered an error while deciding what workspace information to collect: {0}",l.type));let c=this.parseMetaPromptResponse(o,l.value);return this.logger.debug("Running all tools..."),i.report({message:tT.t("Collecting workspace info")}),this.runTools(e,c,n)}getHistory(e){return e?e.turns.slice(0,-1).flatMap(r=>r.request.type==="user"?Zn([{role:"user",content:r.request.message},r.response?{role:"assistant",content:r.response.message}:void 0]):[]):[]}parseMetaPromptResponse(e,r){let n=r.trim().split(`
`),i=0,o=[];for(let a of Array.from(n).reverse()){let l=a.match(this.keywordLineRegexp);if(l){let c=l[1].split(/,/g).map(u=>u.trim());c.length&&o.unshift({keyword:c[0],variations:c.slice(1)})}else if(o.length)break;i++}return{rephrasedQuestion:n.slice(0,-i).join(`
`).trim()||e.trim(),keywords:o}}async runTools(e,r,n){let i={kind:this.kind,fullQuestionText:r.rephrasedQuestion,keywords:r.keywords};return(await Promise.all([yue(e,500,n).then(s=>s?{kind:this.kind,userMessages:[s]}:void 0),...LFe.map(s=>s.resolve(e,i,n))])).reduce((s,a)=>({kind:this.kind,userMessages:[...s.userMessages,...a?.userMessages??[]],references:[...s.references??[],...a?.references??[]],usedContext:[...s.usedContext??[],...a?.usedContext??[]]}),{kind:this.kind,userMessages:[]})}};async function yue(t,e=500,r){let n=t.get(At).getWorkspaceFolders().at(0);if(!n)return;let i=await _ue(t,n,e,r);return rT("I am working in a workspace that has the following structure:","",fa("",i))}var PFe=`
You are a coding assistant who help the user answer questions about code in their workspace by providing a list of relevant keywords they can search for to answer the question.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.
DO NOT ask the user for additional information or clarification.
DO NOT try to answer the user's question directly.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.

2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.

3. Output a precise version of question that resolves all pronouns to the nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns.

4. Then output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.

5. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.

# Examples

User: Where's the code for base64 encoding?

Response:

Where's the code for base64 encoding?

- base64 encoding, base64 encoder, base64 encode
- base64, base 64
- encode, encoded, encoder, encoders
`.trim(),NFe=new class{constructor(){this.timeout=15e3}async resolve(t,e,r){let n=t.get(At),i=await D7(t,{valueFor4096:8,maxMultiplier:4});if(r.isCancellationRequested)return;let o=await this.getSymbols(t,e);if(!(!o.length||r.isCancellationRequested))return{kind:e.kind,userMessages:[rT("Here are some potentially relevant symbols from the current workspace:","",...bue(o.map(s=>`- ${s.name} \u2014 ${R7(n,s.location.uri)}`)).slice(0,i))]}}async getSymbols(t,e){let r=t.get(Mc),n=await Promise.all(e.keywords.flatMap(i=>[i.keyword,...i.variations]).map(i=>bp(t.get(ca).getWorkspaceSymbols(i),this.timeout)));return Zn(n.flat()).filter(i=>!r.isIgnored(i.location.uri))}},kFe=new class{constructor(){this.timeout=15e3}async resolve(t,e,r){let n=t.get(At),i=await D7(t,{valueFor4096:8,maxMultiplier:4});if(r.isCancellationRequested)return;let o=await this.findFiles(t,e,i,r);if(!(!o.length||r.isCancellationRequested))return{kind:e.kind,userMessages:[rT("Here are some potentially relevant file names from the workspace:","",...bue(o.map(s=>`- ${R7(n,s)}`)).slice(0,i))]}}async findFiles(t,e,r,n){let i=t.get(Mc),o=t.get(es),s=await Promise.all(e.keywords.flatMap(a=>[a.keyword,...a.variations]).map(a=>bp(Promise.resolve(o.findFiles(`**/*${a}*`,"**/node_modules/**",r,n)),this.timeout)));return Zn(s.flat()).filter(a=>!i.isIgnored(a))}},OFe=new class{async resolve(t,e,r){let n=t.get(At),i=t.get(Hg),o=await D7(t,{valueFor4096:8,maxMultiplier:4});if(r.isCancellationRequested)return;let s={fullText:e.fullQuestionText,keywords:e.keywords.flatMap(c=>[c.keyword,...c.variations])},a=(await i.searchFileChunks([s],o,r)).slice(0,o);if(r.isCancellationRequested||!a.length)return;let l=a.sort((c,u)=>c.file.fsPath.localeCompare(u.file.fsPath)||c.range.start.compareTo(u.range.start)||c.range.end.compareTo(u.range.end)).filter((c,u)=>{for(let[p,d]of a.entries())if(u!==p&&c.file.fsPath===d.file.fsPath&&(d.isFullFile||c.range===d.range||d.range.contains(c.range)))return!1;return!0}).map(c=>new so(c.isFullFile?c.file:new dy(c.file,c.range)));return{kind:e.kind,userMessages:[rT("Here are some potentially relevant code excerpts from the workspace:","",a.map(c=>{let u=R7(n,c.file);return rT(`\`${u}\``,fa(sa(c.file).replace(/\./g,""),c.text))}).join(`

`))],references:l}}},LFe=[NFe,kFe,OFe];function R7(t,e){let r=t.getWorkspaceFolder(e);return r?xue.relative(r.path,e.path):e.fsPath}function bue(t){return[...new Set(t)]}function rT(...t){return t.join(`
`)}async function D7(t,e){let n=(await t.get(Ya).getChatEndpointInfo()).modelMaxTokenWindow/4096;return hue(Math.round(e.valueFor4096*n),e.valueFor4096,e.valueFor4096*e.maxMultiplier)}var MR=Rt.register(new A7);var N7=class{constructor(){this.kind="terminal-workspace"}async resolveContext(e,r,n,i){let o=r.message;if(!o)return;let s=e.get(fr);this.logger||(this.logger=e.get(Le).getLogger("workspaceResolver")),this.logger.debug("Determining whether workspace info is needed..."),i.report({message:P7.t("Determining whether to fetch info on the workspace")});let a=await s.fetchOne(Zn([{role:"system",content:MFe},{role:"user",content:o}]),async l=>{},n,2,await by(e),{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceIntent"});if(!n.isCancellationRequested){if(a.type!=="success")throw new Error(P7.t("Encountered an error while deciding what workspace information to collect: {0}",a.type));return a.value.trim()!=="0"?MR.resolveContext(e,r,n,i):{kind:this.kind,userMessages:[]}}}},MFe=`
# Additional Rules

Think step by step:
1. Read the user's question to understand whether the question likely requires knowledge of the workspace.

2. Respond with 0 for general terminal questions unrelated to the workspace, or respond with 1 if workspace knowledge is required. If unsure, respond with 1.

# Examples

User: build the project

Response:

1

User: print hello world

Response:

0`.trim(),Eue=Rt.register(new N7);function FR(t,e=!1){let r=t.length,n=0,i="",o=0,s=16,a=0,l=0,c=0,u=0,p=0;function d(y,b){let x=0,P=0;for(;x<y||!b;){let U=t.charCodeAt(n);if(U>=48&&U<=57)P=P*16+U-48;else if(U>=65&&U<=70)P=P*16+U-65+10;else if(U>=97&&U<=102)P=P*16+U-97+10;else break;n++,x++}return x<y&&(P=-1),P}function f(y){n=y,i="",o=0,s=16,p=0}function m(){let y=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&Ty(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&Ty(t.charCodeAt(n)))for(n++;n<t.length&&Ty(t.charCodeAt(n));)n++;else return p=3,t.substring(y,n);let b=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&Ty(t.charCodeAt(n))){for(n++;n<t.length&&Ty(t.charCodeAt(n));)n++;b=n}else p=3;return t.substring(y,b)}function h(){let y="",b=n;for(;;){if(n>=r){y+=t.substring(b,n),p=2;break}let x=t.charCodeAt(n);if(x===34){y+=t.substring(b,n),n++;break}if(x===92){if(y+=t.substring(b,n),n++,n>=r){p=2;break}switch(t.charCodeAt(n++)){case 34:y+='"';break;case 92:y+="\\";break;case 47:y+="/";break;case 98:y+="\b";break;case 102:y+="\f";break;case 110:y+=`
`;break;case 114:y+="\r";break;case 116:y+="	";break;case 117:let U=d(4,!0);U>=0?y+=String.fromCharCode(U):p=4;break;default:p=5}b=n;continue}if(x>=0&&x<=31)if(nT(x)){y+=t.substring(b,n),p=2;break}else p=6;n++}return y}function g(){if(i="",p=0,o=n,l=a,u=c,n>=r)return o=r,s=17;let y=t.charCodeAt(n);if(k7(y)){do n++,i+=String.fromCharCode(y),y=t.charCodeAt(n);while(k7(y));return s=15}if(nT(y))return n++,i+=String.fromCharCode(y),y===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,s=14;switch(y){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=h(),s=10;case 47:let b=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!nT(t.charCodeAt(n));)n++;return i=t.substring(b,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;let x=r-1,P=!1;for(;n<x;){let U=t.charCodeAt(n);if(U===42&&t.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,nT(U)&&(U===13&&t.charCodeAt(n)===10&&n++,a++,c=n)}return P||(n++,p=1),i=t.substring(b,n),s=13}return i+=String.fromCharCode(y),n++,s=16;case 45:if(i+=String.fromCharCode(y),n++,n===r||!Ty(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;n<r&&v(y);)n++,y=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(y),n++,s=16}}function v(y){if(k7(y)||nT(y))return!1;switch(y){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function _(){let y;do y=g();while(y>=12&&y<=15);return y}return{setPosition:f,getPosition:()=>n,scan:e?_:g,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>l,getTokenStartCharacter:()=>o-u,getTokenError:()=>p}}function k7(t){return t===32||t===9}function nT(t){return t===10||t===13}function Ty(t){return t>=48&&t<=57}var Tue;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(Tue||(Tue={}));var UR;(function(t){t.DEFAULT={allowTrailingComma:!1}})(UR||(UR={}));function Sue(t,e=[],r=UR.DEFAULT){let n=null,i=[],o=[];function s(l){Array.isArray(i)?i.push(l):n!==null&&(i[n]=l)}return Cue(t,{onObjectBegin:()=>{let l={};s(l),o.push(i),i=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let l=[];s(l),o.push(i),i=l,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(l,c,u)=>{e.push({error:l,offset:c,length:u})}},r),i[0]}function Cue(t,e,r=UR.DEFAULT){let n=FR(t,!1),i=[];function o(z){return z?()=>z(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(z){return z?()=>z(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(z){return z?q=>z(q,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function l(z){return z?q=>z(q,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=s(e.onObjectBegin),u=l(e.onObjectProperty),p=o(e.onObjectEnd),d=s(e.onArrayBegin),f=o(e.onArrayEnd),m=l(e.onLiteralValue),h=a(e.onSeparator),g=o(e.onComment),v=a(e.onError),_=r&&r.disallowComments,y=r&&r.allowTrailingComma;function b(){for(;;){let z=n.scan();switch(n.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:_||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(z){case 12:case 13:_?x(10):g();break;case 16:x(1);break;case 15:case 14:break;default:return z}}}function x(z,q=[],L=[]){if(v(z),q.length+L.length>0){let S=n.getToken();for(;S!==17;){if(q.indexOf(S)!==-1){b();break}else if(L.indexOf(S)!==-1)break;S=b()}}}function P(z){let q=n.getTokenValue();return z?m(q):(u(q),i.push(q)),b(),!0}function U(){switch(n.getToken()){case 11:let z=n.getTokenValue(),q=Number(z);isNaN(q)&&(x(2),q=0),m(q);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return b(),!0}function H(){return n.getToken()!==10?(x(3,[],[2,5]),!1):(P(!1),n.getToken()===6?(h(":"),b(),F()||x(4,[],[2,5])):x(5,[],[2,5]),i.pop(),!0)}function j(){c(),b();let z=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(z||x(4,[],[]),h(","),b(),n.getToken()===2&&y)break}else z&&x(6,[],[]);H()||x(4,[],[2,5]),z=!0}return p(),n.getToken()!==2?x(7,[2],[]):b(),!0}function M(){d(),b();let z=!0,q=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(q||x(4,[],[]),h(","),b(),n.getToken()===4&&y)break}else q&&x(6,[],[]);z?(i.push(0),z=!1):i[i.length-1]++,F()||x(4,[],[4,5]),q=!0}return f(),z||i.pop(),n.getToken()!==4?x(8,[4],[]):b(),!0}function F(){switch(n.getToken()){case 3:return M();case 1:return j();case 10:return P(!0);default:return U()}}return b(),n.getToken()===17?r.allowEmptyContent?!0:(x(4,[],[]),!1):F()?(n.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}var Iue;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(Iue||(Iue={}));var wue;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(wue||(wue={}));var iT=Sue;var Aue;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(Aue||(Aue={}));function O7(t){let e=`Setting Id: ${t.key}
`;if(e+=`Type: ${t.type}
`,e+=`Description: ${t.description??t.markdownDescription??""}
`,t.enum){e+=`Possible values:
`;for(let r=0;r<t.enum.length;r++)e+=` - ${t.enum[r]} - ${t.enumDescriptions?.[r]??""}
`}return e+=`
`,e}var BR=class extends TR{constructor(r,n,i,o,s,a,l,c){super(r,n,i,o,s,a,c);this.relatedInformationConfig=l;this.isIndexLoaded=!1}async provideRelatedInformation(r,n){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logger.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(n.isCancellationRequested)return this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this.embeddingsComputer.computeEmbeddings([r],n);if(this._logger.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),n.isCancellationRequested||!s||!s[0])return this._logger.debug(`Related Information: Request cancelled or no match found, returning ${Date.now()-i}ms`),[];let a=[];for(let c of this._items.values()){if(n.isCancellationRequested){this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(c.embedding){let u=Df(s[0],c.embedding);u>this.relatedInformationConfig.threshold&&a.push(this.toRelatedInformation(c,u))}}return this._logger.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),a.sort((c,u)=>u.weight-c.weight).slice(0,this.relatedInformationConfig.maxResults)}},Uf=class extends BR{constructor(r,n){super("CommandIdIndex",r,1,"commandEmbeddings",Lg(r.get(jt).getEditorInfo().version),n,{type:2,threshold:.7,maxResults:100},{type:"commands",supportsExtensions:!0});this.accessor=r}async getLatestItems(){let r=await this.accessor.get(pa).getAllCommands();return r.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),r.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),r.map(n=>({key:n.command,label:n.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:n.label,keybinding:n.keybinding??"Not set"}))}getEmbeddingQueryString(r){return`${r.label} - ${r.key}`}toRelatedInformation(r,n){return{type:2,weight:n,command:r.key}}},Bf=class extends BR{constructor(r,n){super("SettingsIndex",r,1,"settingEmbeddings",Lg(r.get(jt).getEditorInfo().version),n,{type:4,threshold:.7,maxResults:100},{type:"settings",supportsExtensions:!0});this.accessor=r;this.isIndexLoaded=!1}async getLatestItems(){let r=await this.accessor.get(pa).getAllSettings(),n=[];for(let i of Object.keys(r)){let o=r[i];o.deprecationMessage||o.markdownDeprecationMessage||n.push({...o,key:i})}return n}getEmbeddingQueryString(r){return O7(r)}toRelatedInformation(r,n){return{type:4,weight:n,setting:r.key}}},qf=class{constructor(e){this._commandIdIndex=e.get(Uf),this._settingsIndex=e.get(Bf)}async loadIndexes(){await Promise.all([this._commandIdIndex.isIndexLoaded?Promise.resolve():this._commandIdIndex.calculateEmbeddings(),this._settingsIndex.isIndexLoaded?Promise.resolve():this._settingsIndex.calculateEmbeddings()])}async nClosestValues(e,r){return await this.loadIndexes(),{commands:this._commandIdIndex.nClosestValues(e,r),settings:this._settingsIndex.nClosestValues(e,r)}}hasSetting(e){return this._settingsIndex.hasItem(e)}hasCommand(e){return this._commandIdIndex.hasItem(e)}getSetting(e){return this._settingsIndex.getItem(e)}getCommand(e){return this._commandIdIndex.getItem(e)}};async function Rue(t,e){let r=t.get(qf);await r.loadIndexes();let n=VFe(r,e.response?.message??"");return zFe(r,n.settings,n.commands)}function VFe(t,e){let r=[];e=e.replace(/\n/g,"");let n=/```(json)?\s*([\s\S]+?)\s*```/g,i=e.match(n);for(let u of i??[]){let p=u.replace(/```(json)?\s*|\s*```/g,""),d;try{d=iT(p)}catch{}d&&!Array.isArray(d)&&r.push(d)}let o=[],s=/\[COMMANDS START\]```(?:json)?(.+)\[COMMANDS END\]/g,a;for(a of e.matchAll(s)){let u=a[1].trim(),p;try{p=iT(u)}catch{}p&&Array.isArray(p)&&o.push(...p)}let l=r.map(u=>{for(let p of Object.keys(u))if(!t.hasSetting(p))return!1;return!0}).some(u=>u===!1),c=o.map(u=>{if(u.command&&!t.hasCommand(u.command))return!1}).some(u=>u===!1);return{settings:r,commands:o,validationFailed:l||c}}async function zFe(t,e,r){let n=[],i=r.length;for(let o of e){let s="";for(let a of Object.keys(o))n.some(l=>l.args&&l.args[0].includes(`@id:${a}`))||t.hasSetting(a)&&(s+=`@id:${a} `);s=s.trimEnd(),s&&n.push({commandId:"workbench.action.openSettings",args:[s],title:"Show in Settings Editor"})}for(let o of r)if(o.command==="workbench.extensions.search"||o.command==="workbench.extensions.installExtension"){let s=(Array.isArray(o.args)?o.args:[o.args]).filter(a=>typeof a=="string");if(s.length===1){let a=["featured","popular","recentlyPublished","recommended","updates","builtin","enabled","disabled","installed","workspaceUnsupported"];s[0].includes(":")&&!s[0].startsWith("@")?s[0]=`@${s[0]}`:a.includes(s[0])&&(s[0]=`@${s[0]}`)}n.push({commandId:"workbench.extensions.search",args:s,title:"Search Extension Marketplace"})}else{let s=t.getCommand(o.command);if(!s)continue;n.push({commandId:"workbench.action.quickOpen",args:[`>${s.originalLabel}`],title:i>1?`Show "${s.originalLabel}"`:"Show in Command Palette"})}return n}var $Fe=`
The current question is related to VS Code. The application is currently open.
If a command or setting is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, if you reference a command, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all commands you referenced in your response.
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),L7=class{constructor(){this.kind="vscode";this.metaContextResolverInfo={description:"Relevant information about VS Code."};this._docSearchSkillAvailable=!1}async searchDocSkillForContext(e,r,n,i){this._docSearchSkill||(this._docSearchSkill=e.get(Ug),this._docSearchSkillAvailable=await this._docSearchSkill.isAvailable());let o=`

Below is a list of information from the VS Code documentation which might be relevant to the question. Feel free to use this context to help you formulate your response, but you are not required to.
`;if(this._docSearchSkillAvailable){let s=await this._docSearchSkill.search(r,{repo:"microsoft/vscode-docs"},n,.75,i);for(let a of s)o+=`
##${a?.title?.trim()} - ${a.path}
${a.contents}`}}async resolveContext(e,r,n,i){let o=$Fe+`

`;this._embeddingCompute??=e.get(Mi);let s=r.message;if(!s||!i)return;let a=await l9(i,{message:"Searching doc index...."},this.searchDocSkillForContext(e,s,10,n),1e3);this._commandsAndSettingsIndex||(this._commandsAndSettingsIndex=e.get(qf));let l=await this._embeddingCompute?.computeEmbeddings([s],n);if(!l||n.isCancellationRequested)return;o+='Below is a list of commands and settings we found which might be relevant to the question. For view related commands "Toggle" often means Show or Hide. A setting may reference another setting, that will appear as `#setting.id#`, you must return the referenced setting as well. You may use this context to help you formulate your response, but are not required to.';let c=await l9(i,{message:"Searching command and setting index...."},this._commandsAndSettingsIndex.nClosestValues(l[0],5),500);return c.commands.length&&(o+=`Here are some possible commands:
`,o+=c.commands.map(u=>`- ${u.label} ("${u.key}") (Keybinding: "${u.keybinding}")`).join(`
`)),c.settings.length&&(c.commands.length&&(o+=`

`),o+=`Here are some possible settings:
`,o+=c.settings.map(u=>O7(u)).join(`
`)),this._docSearchSkillAvailable&&(o+=a),{kind:this.kind,userMessages:[`Relevant information about VS Code:
`+o]}}},Due=Rt.register(new L7);var Pue=require("util");var qR=class{constructor(){this.indicators=new Map;this.contentIndicators=new Map;this._labels=[];this.initIndicators()}get labels(){if(this._labels.includes("javascript")&&this._labels.includes("typescript")){let e=this._labels.indexOf("javascript");this._labels.splice(e,1)}return this._labels}async collectContext(e){let r=e.get(At).getWorkspaceFolders();if(r)for(let n=0;n<r.length;n++)await this.addContextForFolders(e,r[n])}async addContextForFolders(e,r){for(let[n,i]of this.indicators.entries())await this.addLabelIfApplicable(e,r,n,i)}async addLabelIfApplicable(e,r,n,i){let o=Tf.joinPath(r,n);try{await e.get(Mr).stat(o),i.forEach(a=>this._labels.push(a));let s=this.contentIndicators.get(n);if(s){let a=await e.get(Mr).readFile(o);try{s(new Pue.TextDecoder().decode(a)).forEach(c=>this._labels.push(c))}catch{}}}catch{}}initIndicators(){this.addIndicator("package.json","javascript","npm"),this.addIndicator("tsconfig.json","typescript"),this.addIndicator("pom.xml","java","maven"),this.addIndicator("build.gradle","java","gradle"),this.addIndicator("requirements.txt","python","pip"),this.addIndicator("Pipfile","python","pip"),this.addIndicator("Cargo.toml","rust","cargo"),this.addIndicator("go.mod","go","go.mod"),this.addIndicator("pubspec.yaml","dart","pub"),this.addIndicator("build.sbt","scala","sbt"),this.addIndicator("build.boot","clojure","boot"),this.addIndicator("project.clj","clojure","lein"),this.addIndicator("mix.exs","elixir","mix"),this.addIndicator("composer.json","php","composer"),this.addIndicator("Gemfile","ruby","bundler"),this.addIndicator("build.xml","java","ant"),this.addIndicator("build.gradle.kts","java","gradle"),this.addIndicator("yarn.lock","yarn"),this.addContentIndicator("package.json",this.collectPackageJsonIndicators)}addIndicator(e,...r){this.indicators.set(e,r)}addContentIndicator(e,r){this.contentIndicators.set(e,r)}collectPackageJsonIndicators(e){let r=[],n=JSON.parse(e),i=n.dependencies,o=n.devDependencies;i&&(i["@angular/core"]&&r.push("angular"),i.react&&r.push("react"),i.vue&&r.push("vue")),o&&o.typescript&&r.push("typescript");let s=n.engines;return s&&(s.node&&r.push("node"),s.vscode&&r.push("vscode extension")),r}};var M7=class{constructor(e){this.workspaceLabels=e;this.kind="project-labels"}async resolveContext(e,r){if(await this.workspaceLabels.collectContext(e),this.workspaceLabels.labels.length>0){let i=[...new Set(this.workspaceLabels.labels)].sort().reduce((o,s)=>`${o}
- ${s}`,"").trim();return{kind:this.kind,userMessages:[`I am working on a project of the following nature:
`+i]}}}},WFe=new qR,Rs=Rt.register(new M7(WFe));var Kl=class{async reportInline(e,r,n){}async reportChat(e){}};var KFe=["code","doc","edit","search","workspace","tests","fix","explain","terminal","unknown","api","newNotebook","new"],Sn=new class{constructor(){this.intents=new Set}registerIntent(t){t.locations.every(e=>this.getIntent(t.id,e))||(this.intents.add(t),(!t.commandInfo||!t.commandInfo.hiddenFromUser)&&Li.registerCommand({commandId:t.id,intent:t,details:t.description,locations:t.locations}))}getIntents(t){let e=r=>{let n=KFe.indexOf(r);return n===-1?Number.MAX_SAFE_INTEGER:n};return Array.from(this.intents.values()).filter(r=>r.locations.includes(t)).sort((r,n)=>e(r.id)-e(n.id))}getIntent(t,e){return this.getIntents(e).find(r=>r.id===t)}};var QR=Oe(jn());var Sy=class{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},oT=class{constructor(e){this.lines=e}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.lines[r].trim();return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},Hf=class{static Assert(e,r){if(!e)throw new Error(r)}},jf=class{static Copy(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}static Copy2(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}};var HR=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Sy(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},jR=class t{constructor(e,r){let[n,i]=t._getElements(e),[o,s]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=s,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let u;return n<=i?(Hf.Assert(e===r+1,"originalStart should only be one more than originalEnd"),u=[new Sy(e,0,n,i-n+1)]):e<=r?(Hf.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Sy(e,r-e+1,n,0)]):(Hf.Assert(e===r+1,"originalStart should only be one more than originalEnd"),Hf.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}let o=[0],s=[0],a=this.ComputeRecursionPoint(e,r,n,i,o,s),l=o[0],c=s[0];if(a!==null)return a;{let u=this.ComputeDiffRecursive(e,l,n,c),p=this.ComputeDiffRecursive(l+1,r,c+1,i);return this.ConcatenateChanges(u,p)}}WALKTRACE(e,r,n,i,o,s,a,l,c,u,p,d,f,m,h,g,v){let _=null,y=null,b=new HR,x=r,P=n,U=f[0]-g[0]-i,H=-1073741824,j=this.m_forwardHistory.length-1;do{let M=U+e;M===x||M<P&&c[M-1]<c[M+1]?(p=c[M+1],m=p-U-i,p<H&&b.MarkNextChange(),H=p,b.AddModifiedElement(p+1,m),U=M+1-e):(p=c[M-1]+1,m=p-U-i,p<H&&b.MarkNextChange(),H=p-1,b.AddOriginalElement(p,m+1),U=M-1-e),j>=0&&(c=this.m_forwardHistory[j],e=c[0],x=1,P=c.length-1)}while(--j>=-1);_=b.getReverseChanges(),b=new HR,x=s,P=a,U=f[0]-g[0]-l,H=1073741824,j=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let M=U+o;M===x||M<P&&u[M-1]>=u[M+1]?(p=u[M+1]-1,m=p-U-l,p>H&&b.MarkNextChange(),H=p+1,b.AddOriginalElement(p+1,m+1),U=M+1-o):(p=u[M-1],m=p-U-l,p>H&&b.MarkNextChange(),H=p,b.AddModifiedElement(p+1,m+1),U=M-1-o),j>=0&&(u=this.m_reverseHistory[j],o=u[0],x=1,P=u.length-1)}while(--j>=-1);return y=b.getChanges(),this.ConcatenateChanges(_,y)}ComputeRecursionPoint(e,r,n,i,o,s){let a=0,l=0,c=0,u=0,p=0,d=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=r-e+(i-n),m=f+1,h=new Int32Array(m),g=new Int32Array(m),v=i-n,_=r-e,y=e-n,b=r-i,P=(_-v)%2===0;h[v]=e,g[_]=r;for(let U=1;U<=f/2+1;U++){let H=0,j=0;c=this.ClipDiagonalBound(v-U,U,v,m),u=this.ClipDiagonalBound(v+U,U,v,m);for(let M=c;M<=u;M+=2){M===c||M<u&&h[M-1]<h[M+1]?a=h[M+1]:a=h[M-1]+1,l=a-(M-v)-y;let F=a;for(;a<r&&l<i&&this.ElementsAreEqual(a+1,l+1);)a++,l++;if(h[M]=a,a+l>H+j&&(H=a,j=l),!P&&Math.abs(M-_)<=U-1&&a>=g[M])return o[0]=a,s[0]=l,F<=g[M]&&1447>0&&U<=1447+1?this.WALKTRACE(v,c,u,y,_,p,d,b,h,g,a,r,o,l,i,s,P):null}p=this.ClipDiagonalBound(_-U,U,_,m),d=this.ClipDiagonalBound(_+U,U,_,m);for(let M=p;M<=d;M+=2){M===p||M<d&&g[M-1]>=g[M+1]?a=g[M+1]-1:a=g[M-1],l=a-(M-_)-b;let F=a;for(;a>e&&l>n&&this.ElementsAreEqual(a,l);)a--,l--;if(g[M]=a,P&&Math.abs(M-v)<=U&&a<=h[M])return o[0]=a,s[0]=l,F>=h[M]&&1447>0&&U<=1447+1?this.WALKTRACE(v,c,u,y,_,p,d,b,h,g,a,r,o,l,i,s,P):null}if(U<=1447){let M=new Int32Array(u-c+2);M[0]=v-c+1,jf.Copy2(h,c,M,1,u-c+1),this.m_forwardHistory.push(M),M=new Int32Array(d-p+2),M[0]=_-p+1,jf.Copy2(g,p,M,1,d-p+1),this.m_reverseHistory.push(M)}}return this.WALKTRACE(v,c,u,y,_,p,d,b,h,g,a,r,o,l,i,s,P)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return jf.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],jf.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return jf.Copy(e,0,i,0,e.length),jf.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(Hf.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),Hf.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(a=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new Sy(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=r%2===0;if(e<0){let l=o%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?i-1:i-2}}};var F7=class{constructor(){this.spacesDiff=0;this.looksLikeAlignment=!1}};function YFe(t,e,r,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let d=t.charCodeAt(o),f=r.charCodeAt(o);if(d!==f)break}let s=0,a=0;for(let d=o;d<e;d++)t.charCodeAt(d)===32?s++:a++;let l=0,c=0;for(let d=o;d<n;d++)r.charCodeAt(d)===32?l++:c++;if(s>0&&a>0||l>0&&c>0)return;let u=Math.abs(a-c),p=Math.abs(s-l);if(u===0){i.spacesDiff=p,p>0&&0<=l-1&&l-1<t.length&&l<r.length&&r.charCodeAt(l)!==32&&t.charCodeAt(l-1)===32&&t.charCodeAt(t.length-1)===44&&(i.looksLikeAlignment=!0);return}if(p%u===0){i.spacesDiff=p/u;return}}function Nue(t,e,r){let n=Math.min(t.getLineCount(),1e4),i=0,o=0,s="",a=0,l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],p=new F7;for(let m=1;m<=n;m++){let h=t.getLineLength(m),g=t.getLineContent(m),v=!1,_=0,y=0,b=0;for(let P=0,U=h;P<U;P++){let H=g.charCodeAt(P);if(H===9)b++;else if(H===32)y++;else{v=!0,_=P;break}}if(!v||(b>0?i++:y>1&&o++,YFe(s,a,g,_,p),p.looksLikeAlignment&&!(r&&e===p.spacesDiff)))continue;let x=p.spacesDiff;x<=c&&u[x]++,s=g,a=_}let d=r;i!==o&&(d=i<o);let f=e;if(d){let m=d?0:.1*n;l.forEach(h=>{let g=u[h];g>m&&(m=g,f=h)}),f===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}var Ql=class{constructor(e,r,n){this.firstLineIndex=e;this.endLineIndex=r;this.lines=n}toTextEdit(){let e=this.lines.length>0?this.lines.join(`
`)+`
`:"";return $a.replace(new tt(this.firstLineIndex,0,this.endLineIndex,0),e)}},Fue;(e=>{function t(r){return r.length===0?[]:r.split(/\r\n|\r|\n/g)}e.fromString=t})(Fue||={});var jg=class t{constructor(e,r){this.text=e;this.languageId=r}static fromDocumentContext(e){return new t(e.document.getText(),e.language.languageId)}};function Gg(t,e,r,n,i,o){let s=Fue.fromString(r);if(s.length===e.range.lines.length&&e.range.lines.every((f,m)=>f===s[m]))return[];let a=XFe(e,s,i),l=[],c=!1;for(let f of s){let m=GR(e,f);m===null?l.push(f):(m.type==="fakestart"||m.type==="fakend")&&(c=!0)}let u=o9e(t,e,l,i),p;if(!a)p=u;else if(!u)p=a;else{let f=kue(a);kue(u)<f?p=u:p=a}p||(p=QFe(t,e,n,i,c,l));let d=[p];return o&&(d=JFe(o,d)),d.map(f=>f.toTextEdit())}function QFe(t,e,r,n,i,o){let s=t.get(Le).getLogger("editGeneration");return i?(s.info("(case 6) Appending to selected code"),Mue(e.range,o,n)):r===3?(s.info("(case 7) Appending to selected code"),Mue(e.range,o,n)):r===1?(s.info("(case 8) Prepending to selected code"),c9e(e.range,Vg(o,e.range.lines.filter(a=>a.trim()!=="").length>0?{whichLine:"topMost",lines:e.range.lines}:{whichLine:"bottomMost",lines:e.above.lines},n))):(s.info("(Default) Replacing selected code"),Yl(e.range,o,n))}function kue(t){let e=t.endLineIndex-t.firstLineIndex,r=t.lines.length;return e+r}function XFe(t,e,r){let n=null,i=[];for(let o of e){let s=GR(t,o);if(s===null)i.push(o);else if(n){if(s.type==="end"&&s.endMarker===n)return Yl(n,i,r);if(s.type==="end"&&n===t.above&&s.endMarker===t.range){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),Yl(a,i,r)}else if(s.type==="end"&&n===t.above&&s.endMarker===t.below){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),a.mergeFromBelow(t.below.clone()),Yl(a,i,r)}else i.push(o)}else s.type==="start"&&(n=s.startMarker,i=[])}if(i.length>0&&n)return Yl(n,i,r)}function JFe(t,e){let r=[],n=t.text.split(/\r\n|\r|\n/g),i=ZFe(n,a=>Oue(a,t.languageId)),o=[];for(let a of e){if(a.endLineIndex<=i+1)return e;let l=!1,c=[],u=a.lines;for(let p of u)Oue(p,t.languageId)?(o.push(e9e(p)),l=!0):l&&p.length===0||(c.push(p),l=!1);if(!l&&c.length>0){if(a.firstLineIndex<i+1)return e;r.push(new Ql(a.firstLineIndex,a.endLineIndex,c))}}if(o.length===0)return e;let s=i+1;return r.unshift(new Ql(s,s,o)),r}function ZFe(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}function e9e(t){return t.replace(/^\s+/g,"")}function Oue(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"javascript":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}var t9e=/^(\t+)/,U7=new Map;function r9e(t){return U7.has(t)||U7.set(t,new RegExp(`^(( {${t}})+)`)),U7.get(t)}function sT(t,e,r){let n=e?r9e(r):t9e,i=t.match(n);return i?[i[0],i[0].length/(e?r:1)]:["",0]}function n9e(t){let e={getLineCount:function(){return t.length},getLineLength:function(o){return t[o-1].length},getLineContent:function(o){return t[o-1]}},{insertSpaces:r,tabSize:n}=Nue(e,4,!1),i=Number.MAX_VALUE;for(let o of t){if(/^\s*$/.test(o))continue;let[,s]=sT(o,r,n);i=Math.min(i,s)}return{insertSpaces:r,tabSize:n,minIndentLevel:i}}function Lue(t,e){if(e===0)return"";if(t===" ")switch(e){case 2:return"  ";case 4:return"    ";case 8:return"        ";case 12:return"            "}if(t==="	")switch(e){case 1:return"	";case 2:return"		";case 3:return"			"}return new Array(e).fill(t).join("")}function i9e(t,e){let r=t.lines,n;if(t.whichLine==="topMost")n=r.find(i=>i!=="");else for(let i=r.length-1;i>=0;--i)if(r[i]!==""){n=r[i];break}return n===void 0?0:sT(n,e.insertSpaces,e.tabSize)[1]}function Vg(t,e,r){if(r===void 0)return t;let n=i9e(e,r),i=n9e(t),o=r.insertSpaces?Lue(" ",r.tabSize):"	";return t.map(s=>{if(s==="")return"";{let[a,l]=sT(s,i.insertSpaces,i.tabSize),c=s.substring(a.length);return Lue(o,n+(l-i.minIndentLevel))+c}})}function GR(t,e){switch(e){case t.above.startMarker:return{type:"start",startMarker:t.above};case t.above.endMarker:return{type:"end",endMarker:t.above};case t.range.startMarker:return{type:"start",startMarker:t.range};case t.range.endMarker:return{type:"end",endMarker:t.range};case t.below.startMarker:return{type:"start",startMarker:t.below};case t.below.endMarker:return{type:"end",endMarker:t.below}}return e.trimStart().startsWith(ii.begin(t.language))?{type:"fakestart"}:e.trimStart().startsWith(ii.end(t.language))?{type:"fakend"}:null}function o9e(t,e,r,n){let i=(f,m,h)=>{let g=0;for(let b of f)for(let x=b.originalStart;x<b.originalStart+b.originalLength;x++){let P=m.lines[x];g+=P.length}let v=m.getCharCount(),_=h.getCharCount(),y=v-g;return{equalCharCount:y,originalCharCount:v,modifiedCharCount:_,originalCharRatio:v>0?y/v:0,modifiedCharRatio:_>0?y/_:0}},o=f=>{let m=new oT(f.lines),h=new oT(r),v=new jR(m,h).ComputeDiff();return i(v,m,h)},s=e.range.clone();s.mergeFromAbove(e.above.clone()),s.mergeFromBelow(e.below.clone());let a=o(s),l=o(e.range),c={diffToEntireScore:a,diffToRangeScore:l},u=t.get(Le).getLogger("editGeneration");if(u.info(`Diff metrics: ${JSON.stringify(c,null,"	")}`),a.originalCharCount>30&&a.originalCharRatio>.7)return u.info("(case 1) Replacing entire code"),Yl(s,r,n);if(l.originalCharCount>20&&l.originalCharRatio>.7)return u.info("(case 2) Replacing selected code"),Yl(e.range,r,n);let p=Math.min(a.originalCharRatio,a.modifiedCharRatio),d=Math.min(l.originalCharRatio,l.modifiedCharRatio);if(p>.2&&p>d)return u.info("(case 3) Replacing entire code"),Yl(s,r,n);if(d>.2)return u.info("(case 4) Replacing selected code"),Yl(e.range,r,n);if(!e.range.hasContent)return u.info("(case 5) Replacing empty selected code"),Yl(e.range,r,n,{whichLine:"bottomMost",lines:e.above.lines})}function Yl(t,e,r,n){let o=Vg(e,n??{whichLine:"topMost",lines:t.lines},r).slice(0),s=t.lines.slice(0),a=t.firstLineIndex,l=t.lastLineIndex;if(s.length===1&&s[0]==="")return new Ql(l,l,o);let c=s9e(s,o);if(a+=c,s.splice(0,c),o.splice(0,c),s.length===0)return new Ql(l+1,l+1,o);let u=a9e(s,o);return l-=u,s.splice(s.length-u,u),o.splice(o.length-u,u),s.length===0?new Ql(a,a,o):new Ql(a,l+1,o)}function s9e(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[n]!==e[n])return n;return r}function a9e(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[t.length-1-n]!==e[e.length-1-n])return n;return r}function c9e(t,e){return new Ql(t.firstLineIndex,t.firstLineIndex,e)}function Mue(t,e,r){let n=Vg(e,{whichLine:"bottomMost",lines:t.lines},r),i=t.lastLineIndex+1;return new Ql(i,i,n)}var ao=Oe(jn());function zg(t,e,r,n){return{type:"inlineEdit",edits:t,newWholeRange:e,content:r,followUp:n}}function Rp(t,e,r){let n=l9e(t,e);if(!n)return null;let{code:i,contentBeforeCode:o,language:s}=n;if(Tn.testLine(r,i)){let a=i.indexOf(`
`);i=i.substring(a).trim()}return{code:i,contentBeforeCode:o,language:s}}function l9e(t,e){e=e.trim();let r=e.startsWith("```")?0:e.indexOf("```");if(r!==-1){let a=e.indexOf("\n```",r+1);a===-1&&(a=e.indexOf("```",r+1));let l=a!==-1?a:e.length,c=e.indexOf(`
`,r+1),u=e.substring(c,l);u=u.trim();let p=e.substring(0,r).trim(),d=e.substring(r+3,c).trim();return{code:u,contentBeforeCode:p,language:d}}let n=e.split(/\r\n|\r|\n/g),i=!1,o=[],s=[];for(let a of n){let l=GR(t,a);if(i){if(l)return s.push(a),{code:s.join(`
`),contentBeforeCode:o.join(`
`),language:""};s.push(a)}else l?(i=!0,s.push(a)):o.push(a)}return null}var Xl=class{};async function Uue(t,e,r,n,i){let o=await Promise.all(e.map(s=>s.resolveContext(t,r,n,i)));return Zn(o)}function Bue(t,e){let r=[],n=new Map;for(let o of t)e.has(o.kind)||n.has(o.kind)||(n.set(o.kind,r.length),r.push(o));let i=n.get(Ple.kind);return i!==void 0&&n.has(ws.kind)&&r.splice(i,1),r}var Cy=class{constructor(e,r,n){this.accessor=e;this.maxResponseTokens=r;this.maxTokenTestOverride=n}async toChatMessages(e,r,n,i=!1){let o=await this.computeMaxRequestTokens(n),s=e.turns.filter(u=>u.status==="success"||u.status==="in-progress"),a=[{role:"system",content:r}],l=za(this.accessor,a),c=[];for(let u=s.length-1;u>=0;u--){let p=u===s.length-1,d=s[u],f=await this.turnToMessages(d,p),m=za(this.accessor,f);for(;l+m>=o&&f.length>=1;)f.shift(),m=za(this.accessor,f);if(!f.length&&d instanceof my){let h=await d.getShorterMessage();for(f.push({role:"user",content:h,isContext:!0}),m=za(this.accessor,f);l+m>=o&&f.length>=1;)f.shift(),m=za(this.accessor,f);if(!f.length)throw new Error(d9.t("Sorry, the included context is too long."))}if(p&&!f.length)throw new Error(d9.t("Sorry, this message is too long. Please try a shorter question."));if(l+m<o)c=[...f,...c],l+=m;else break}if(a.push(...c),i){let u=a[a.length-1];for(let p=a.length-2;p>=0;p--){let d=a[p];if(d.isContext)u.content=d.content+`

`+u.content,a.splice(p,1);else break}}return{messages:a.map(u=>({role:u.role,content:u.content})),tokenCount:l}}async computeMaxRequestTokens(e){let r=this.maxTokenTestOverride??e.modelMaxTokenWindow;if(this.maxResponseTokens!==void 0)return r-this.maxResponseTokens;let n=r<8192?.25:r<16384?.15:.1;return Math.floor(r*(1-n))}async turnToMessages(e,r){let n=[];return r&&e.contextParts.forEach(i=>{i.userMessages.forEach(o=>{n.push({role:"user",content:o+`

`})})}),n.push({role:"user",content:e.request.message,isContext:e.request.isContext}),e.response&&e.response.type!=="meta"&&n.push({role:"assistant",content:e.response.message}),n}};var Ei=class{constructor(e,r,n,i){this.accessor=e;this.options=r;this.location=n;this.context=i;this._promptVariablesService=e.get(Xl)}get selectionContextMetadata(){return this._selectionContextMetadata}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn(),l=await this._promptVariablesService.resolveVariablesInPrompt(a.request.message,n),c=new Set(l.parts.map(_=>_.kind));a.request.message=l.message;let u=this.options.contextResolvers;Array.isArray(u)||(u=await u.provideResolvers(e,o,s)),u=Bue(u,c);let p={conversation:e,endpoint:r,message:a.request.message,documentContext:this.context},d=await Uue(this.accessor,u,p,s,i),f=[],m=[];for(let{userMessages:_,usedContext:y,references:b,metadata:x,getShorterMessage:P}of[l.parts,d].flat()){for(let U of _)P?f.push(new my({message:U,type:"user",isContext:!0},P)):f.push(new bi({message:U,type:"user",isContext:!0}));y&&i.report({documents:y}),b&&m.push(...b),!this._selectionContextMetadata&&I9.is(x)&&(this._selectionContextMetadata=x)}let h=que(m);for(let _ of h)i.report({reference:_.anchor});e=new Io(e.turns),f.length>0&&e.insertBeforeLatestTurn(f);let g;if(this.location===1){let _=this.options.rules??(this.context&&B7(this.context));g=this.createInlineChatSystemMessage(_??"")}else this.location===2&&(g=await this.createPanelChatSystemMessage(r));if(g??=await yy(this.accessor,this.location,r),this.options.turnFilter&&this.location===2){let _=this.options.turnFilter(e.turns);e=new Io(_)}let v=e.getLatestTurn();return v&&(v.references=h,this.options.queryPrefix&&(v.request.message=`${this.options.queryPrefix} ${v.request.message}`.trim())),new Cy(this.accessor,this.accessor.get(Wa).maxResponseTokens).toChatMessages(e,g,r,!1)}async createPanelChatSystemMessage(e){let r=this.options.systemPromptOptions?.roleplay||this.options.systemPromptOptions?await yy(this.accessor,this.location,e,this.options.systemPromptOptions):await yy(this.accessor,this.location,e,{includeCodeGenerationRules:!0,includeCapabilities:!0}),n=this.options.rules??"";return`
${r}

${n?"Additional Rules":""}
${n??""}

${this.options.systemPromptOptions?.examples?"Examples:":""}
${this.options.systemPromptOptions?.examples??""}
`.trim()}createInlineChatSystemMessage(e){return`
${this.options.systemPromptOptions?.roleplay??U9()}
${Ng()}
${e}
${Ip()}
${zE(this.accessor)}
`.trim()}},B7=t=>`
The user has a ${t.language.languageId} file opened in a code editor.
The user includes some code snippets from the file.
Each code block starts with \`\`\` and ${Tn.forLanguage(t.language)}.
Answer with a single ${t.language.languageId} code block.
If you modify existing code, you will use the ${ii.begin(t.language)} and ${ii.end(t.language)} markers.
${Ln(t.document.uri)?u9e():""}
`.trim();function u9e(){return`
When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well
When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.
When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.
`.trim()}var VR=class{constructor(e,r,n,i){this.myDocument=e;this.language=r;this.selection=n;this.defaultEditStrategy=i;this.replyIndentationTracker=null}async processStream(e){e=d9e(e),e=p9e(e,this.language);let r=this.myDocument.firstSentLineIndex;for await(let n of this.findInitialAnchor(e))typeof n!="string"?r=this.handleFirstReplyLine(n.anchor,n.line):r=this.handleSubsequentReplyLine(r,n);return this.myDocument.didEdits}handleFirstReplyLine(e,r){if(e){this.replyIndentationTracker=new zR(this.myDocument,e.lineIndex,r);let o=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);return this.myDocument.replaceLine(e.lineIndex,o)}let n=this.myDocument.firstRangeLine.lineIndex;this.replyIndentationTracker=new zR(this.myDocument,n,r);let i=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);return this.selection.isEmpty&&this.myDocument.getLine(this.selection.active.line).content===""&&this.selection.active.line===this.myDocument.firstRangeLine.lineIndex?this.myDocument.insertLineBefore(n,i):this.defaultEditStrategy===1?this.myDocument.insertLineBefore(n,i):this.defaultEditStrategy===3?this.myDocument.insertLineAfter(n,i):this.myDocument.replaceLine(n,i)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle),i=this.matchReplyLine(n,e);if(i)return this.myDocument.replaceLines(e,i.lineIndex,n);if(e>=this.myDocument.getLineCount())return this.myDocument.appendLineAtEndOfDocument(n);let o=this.myDocument.getLine(e);return!o.isSent||o.content===""||n.adjustedContent===""?this.myDocument.insertLineBefore(e,n):o.indentLevel<n.adjustedIndentLevel?this.myDocument.insertLineBefore(e,n):o.indentLevel===n.adjustedIndentLevel&&!this.myDocument.didReplaceEdits?this.myDocument.insertLineBefore(e,n):this.myDocument.replaceLine(e,n)}matchReplyLine(e,r){if(e.adjustedContent==="")return null;let n=e.adjustedContent.trim().length<=3;for(let i=r;i<this.myDocument.getLineCount();i++){let o=this.myDocument.getLine(i);if(o.isSent){if(o.content===e.adjustedContent)return new aT(i);if(o.trimmedContent.length>0&&o.indentLevel<e.adjustedIndentLevel||n&&o.trimmedContent.length>0)return null}}return null}findInitialAnchor(e){return new Fl(async r=>{let n=[],i=0,o=!1;for await(let s of e)if(o)r.emitOne(s);else if(n.push(s),i+=s.trim().length,i>10){let a=this.searchForEqualSentLines(n);o=!0,r.emitOne(new q7(n[0],a)),r.emitMany(n.slice(1))}})}searchForEqualSentLines(e){let r=e.map(n=>n.trim());for(let n=this.myDocument.firstSentLineIndex,i=this.myDocument.getLineCount()-e.length;n<=i;n++){if(!this.myDocument.getLine(n).isSent)continue;let o=!0;for(let s=0;s<r.length;s++){let a=this.myDocument.getLine(n+s);if(!a.isSent||a.trimmedContent!==r[s]){o=!1;break}}if(o)return new aT(n)}return null}},zR=class{constructor(e,r,n){let i=0;for(let s=r;s>=0;s--){let a=e.getLine(s);if(!/^\s*$/.test(a.content)){i=a.indentLevel;break}}let[,o]=this.guessIndentLevel(n);this.indentDelta=o-i}reindent(e,r){if(e==="")return new WR("",0,"",0);let[n,i]=this.guessIndentLevel(e),o=Math.max(i-this.indentDelta,0),a=this.getIndentString(r).repeat(o)+e.substring(n.length);return new WR(e,i,a,o)}guessIndentLevel(e){let r=$g.getLeadingWhitespace(e);return r===""||r===" "?["",0]:(this._replyIndentStyle||(this._replyIndentStyle=$g.guessIndentStyleFromLeadingWhitespace(r)),$g.guessIndentLevel(e,this._replyIndentStyle))}getIndentString(e){return e.kind==="tabs"?"	":" ".repeat(e.indentSize)}},q7=class{constructor(e,r){this.line=e;this.anchor=r}},$R=class{constructor(e,r,n,i){this.progress=e;this.lines=[];this._didEdits=!1;this._didReplaceEdits=!1;this.indentStyle=$g.getDocumentIndentStyle(n,i);let o=r.getText().split(/\r\n|\r|\n/g);for(let a=0;a<o.length;a++)this.lines[a]=new Gf(o[a],this.indentStyle);let s=[n.above,n.range,n.below];for(let a of s)for(let l=0;l<a.lines.length;l++){let c=a.firstLineIndex+l;this.lines[c].markSent()}this.firstSentLineIndex=n.above.hasContent?n.above.firstLineIndex:n.range.firstLineIndex,this.firstRangeLine=new aT(n.range.firstLineIndex)}get didEdits(){return this._didEdits}get didReplaceEdits(){return this._didReplaceEdits}getText(){return this.lines.map(e=>e.content).join(`
`)}getLineCount(){return this.lines.length}getLine(e){return this.lines[e]}replaceLine(e,r){return this.lines[e]=new Gf(r.adjustedContent,this.indentStyle),this.progress.report({edits:[new $a(new tt(e,0,e,1e3),r.adjustedContent)]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1}replaceLines(e,r,n){return e===r?this.replaceLine(e,n):(this.lines.splice(e,r-e+1,new Gf(n.adjustedContent,this.indentStyle)),this.progress.report({edits:[new $a(new tt(e,0,r,1e3),n.adjustedContent)]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1)}appendLineAtEndOfDocument(e){return this.lines.push(new Gf(e.adjustedContent,this.indentStyle)),this.progress.report({edits:[new $a(new tt(this.lines.length-1,1e3,this.lines.length-1,1e3),`
`+e.adjustedContent)]}),this._didEdits=!0,this.lines.length}insertLineAfter(e,r){return this.lines.splice(e+1,0,new Gf(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new $a(new tt(e,1e3,e,1e3),`
`+r.adjustedContent)]}),this._didEdits=!0,e+2}insertLineBefore(e,r){return this.lines.splice(e,0,new Gf(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new $a(new tt(e,0,e,0),r.adjustedContent+`
`)]}),this._didEdits=!0,e+1}},WR=class{constructor(e,r,n,i){this.originalContent=e;this.originalIndentLevel=r;this.adjustedContent=n;this.adjustedIndentLevel=i}},aT=class{constructor(e){this.lineIndex=e}},Gf=class{constructor(e,r){this.content=e;this._indentStyle=r;this._isSent=!1;this._trimmedContent=null;this._indentLevel=-1}get isSent(){return this._isSent}get trimmedContent(){return this._trimmedContent===null&&(this._trimmedContent=this.content.trim()),this._trimmedContent}get indentLevel(){if(this._indentLevel===-1){let[e,r]=$g.guessIndentLevel(this.content,this._indentStyle);this._indentLevel=r}return this._indentLevel}markSent(){this._isSent=!0}},$g=class{static getDocumentIndentStyle(e,r){if(r)return r.insertSpaces?{kind:"spaces",indentSize:r.tabSize}:{kind:"tabs"};let n=[e.range,e.above,e.below];for(let i of n)for(let o of i.lines){let s=this.guessIndentStyleFromLine(o);if(s)return s}return{kind:"tabs"}}static guessIndentStyleFromLine(e){let r=this.getLeadingWhitespace(e);return this.guessIndentStyleFromLeadingWhitespace(r)}static guessIndentStyleFromLeadingWhitespace(e){if(e===""||e===" ")return;if(/\t/.test(e))return{kind:"tabs"};let r=e.match(/( +)/);if(r){let n=r[1].length;return{kind:"spaces",indentSize:n===2?n:4}}}static guessIndentLevel(e,r){return sT(e,r.kind==="spaces",r.kind==="spaces"?r.indentSize:1)}static getLeadingWhitespace(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(0,r)}return e}};function H7(t){return new Fl(async e=>{let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;for await(let i of t){if(n===0){if(/^```/.test(i)){n=1,e.emitOne({value:i,kind:2});continue}}else n===1&&/^```/.test(i)&&(n=2);e.emitOne({value:i,kind:n===1?1:2})}})}function p9e(t,e){return new Fl(async r=>{let n=ii.begin(e),i=ii.end(e),o=!0,s=!1;for await(let a of t){if(o&&Tn.testLine(e,a)){o=!1;continue}!s&&/^\s*$/.test(a)||a.startsWith(n)||a.startsWith(i)||(s=!0,r.emitOne(a))}})}function d9e(t){let e=f9e(t);return H7(e).filter(n=>n.kind===1).map(n=>n.value)}function f9e(t){return new Fl(async e=>{let r="";for await(let n of t){r+=n;do{let i=r.indexOf(`
`);if(i===-1)break;let o=r.substring(0,i);r=r.substring(i+1),e.emitOne(o)}while(!0)}r.length>0&&e.emitOne(r)})}var cT=class t{constructor(){this._data=new Map;this._messages={0:t._shuffleArray(t._progressMessages[0]),1:t._shuffleArray(t._progressMessages[1]),2:t._shuffleArray(t._progressMessages[2]),3:t._shuffleArray(t._progressMessages[3])}}static{this._progressMessages={0:[ao.t("Fetching response, it won't be long now."),ao.t("Working hard to get your response..."),ao.t("Request is being processed, sit tight!"),ao.t("Response is being prepared, please be patient.")],1:[ao.t("Data is on its way, please wait a moment."),ao.t("Request is being processed, sit tight!"),ao.t("Response is being prepared, please be patient.")],2:[ao.t("Data is on its way, please wait a moment."),ao.t("Source code arriving..."),ao.t("Hold on tight, we're almost there!"),ao.t("Response is being prepared, please be patient."),ao.t("Code chunks incoming..."),ao.t("Receiving code, please wait..."),ao.t("Code is being processed, please wait...")],3:[ao.t("Almost done, just a few more seconds..."),ao.t("Processing response, please wait...")]}}next(e){let r=this._data.get(e);if(r){if(Date.now()-r.time<3579)return this._messages[e][r.index];r.index+=1,r.time=Date.now();let n=this._messages[e];return n[Math.min(n.length-1,r.index)]}else return this._data.set(e,{index:0,time:Date.now()}),this._messages[e][0]}static _shuffleArray(e){return i$(e),e}},KR=class{constructor(e){this.progress=e;this._progressMessages=new cT;this._lastText=void 0}_reportProgress(e){let r=this._progressMessages.next(e);this.progress.report({message:r})}update(e){return this._reportProgress(this._lastText?e.includes("```")?2:1:0),this._lastText=e,{shouldFinish:hy(e)}}async finish(){if(!this._lastText)throw new Error("No text");return this._reportProgress(3),await this.interpretReply(this._lastText)}},Vf=class t extends KR{constructor(r,n){super(n);this.replyInterpreter=r}static createFactory(r){return n=>new t(r,n)}interpretReply(r){return this.replyInterpreter(r,this.progress)}},Wg=class t extends KR{constructor(r,n,i,o,s){super(s);this.accessor=r;this.selectionContextMetadata=n;this.context=i;this.editStrategy=o}static createFactory(r,n,i,o=2){return s=>{if(!n.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");return new t(r,n.selectionContextMetadata,i,o,s)}}interpretReply(r){if(!this.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let{contextInfo:n,expandedRange:i}=this.selectionContextMetadata,o=Rp(n,r,this.context.language);if(!o)return{type:"conversational",content:r};let{code:s}=o,a=Gg(this.accessor,n,s,this.editStrategy,this.context.fileIndentInfo,jg.fromDocumentContext(this.context));return zg(a,i)}},YR=class t{constructor(e){this._progress=e;this._responseStream=new Rg;this._lastLength=0;this._lastText=void 0;this._promise=void 0;this._progressMessages=new cT}static createFactory(){return e=>new t(e)}_reportProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(1);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._lastText=e,this._responseStream.emitOne(r),{shouldFinish:!1}}async finish(){return this._responseStream.resolve(),{type:"conversational",content:this._lastText??""}}async processStream(e,r){for await(let n of e.asyncIterable)r.report({content:n});return!1}};function m9e(t,e){let r=new j7(t),n=e.map(i=>{let o=i.range;return{startOffset:r.getOffset(o.start),endOffset:r.getOffset(o.end),text:i.newText}});n.sort((i,o)=>o.startOffset-i.startOffset||o.endOffset-i.endOffset);for(let i of n)t=t.substring(0,i.startOffset)+i.text+t.substring(i.endOffset);return t}var j7=class{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&this.lineStartOffsetByLineIdx.push(r+1);this.lineStartOffsetByLineIdx.push(e.length)}getOffset(e){return this.lineStartOffsetByLineIdx[e.line]+e.character}},Kg=class t{constructor(e,r,n,i,o){this._accessor=e;this._selectionContextMetadata=r;this._context=n;this._editStrategy=i;this._progress=o;this._responseStream=new Rg;this._lastLength=0;this._lastText=void 0;this._streamingPromise=void 0;this._initialDocText=this._context.document.getText();this._progressMessages=new cT;this._documentInfo=jg.fromDocumentContext(this._context);if(!this._selectionContextMetadata)throw new Error("code reply NEEDS a selection context");this._streamingWorkingCopyDocument=new $R(o,this._context.document,this._selectionContextMetadata.contextInfo,this._context.fileIndentInfo);let s=new VR(this._streamingWorkingCopyDocument,this._context.language,this._context.selection,this._editStrategy);this._streamingPromise=s.processStream(this._responseStream.asyncIterable)}static createFactory(e,r,n,i=2){return(o,s)=>{if(!r.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");return s?new t(e,r.selectionContextMetadata,n,i,o):new Wg(e,r.selectionContextMetadata,n,i,o)}}update(e){this._reportMessageProgress(this._lastText?2:0),this._lastText=e;let r=e.slice(this._lastLength);return this._lastLength=e.length,this._responseStream.emitOne(r),{shouldFinish:hy(e)}}_reportMessageProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}async finish(){if(!this._lastText)throw new Error("No text");this._responseStream.resolve();let e=await this._streamingPromise,r=await this._interpretReply(this._lastText);if(r.type==="inlineEdit"){let n=m9e(this._initialDocText,r.edits);return{type:"inlineEdit",edits:[{range:new tt(new Tr(0,0),new Tr(Number.MAX_SAFE_INTEGER,0)),newText:n}],newWholeRange:r.newWholeRange}}return e&&this._progress.report({edits:[{range:new tt(new Tr(0,0),new Tr(Number.MAX_SAFE_INTEGER,0)),newText:this._initialDocText}]}),r}_interpretReply(e){let{contextInfo:r,expandedRange:n}=this._selectionContextMetadata,i=Rp(r,e,this._context.language);if(!i)return{type:"conversational",content:e};let{code:o}=i,s=Gg(this._accessor,r,o,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return zg(s,n)}},Ds=class{constructor(e){this.opts=e;this.id=e.id,this.locations=Array.isArray(e.location)?e.location:[e.location],this.description=e.description,this.intentDetectionInput={sampleQuestion:e.modelSampleQuestion,modelDescription:e.modelDescription??e.description},this.commandInfo=e.commandInfo}async invoke(e,r){let n=r.location,i=r.documentContext,o=new Ei(e,this.opts,n,i),s=this.opts.endpoint??await Fr(e,n,this.id);return{intent:this,location:n,promptCrafter:o,endpoint:s,followUps:this.opts.followUps,responseProcessor:this.opts.responseProcessor,createReplyInterpreter:i&&Kg.createFactory(e,o,i)}}};function que(t){let e=new Xi,r=(i,o)=>{if(i.contains(o))return i;if(o.contains(i))return o;let[s,a]=i.start.line<o.start.line?[i,o]:[o,i];if(s.end.line>=a.start.line-1)return new tt(s.start,a.end)};return t.forEach(i=>{let o=i.anchor;if(!Hue(o))e.set(o,i);else{let s=e.get(o.uri);if(!s)e.set(o.uri,[i]);else if(!(s instanceof so)){let a=[],l=o.range;s.forEach(u=>{if(!Hue(u.anchor))return;let p=r(l,u.anchor.range);p?l=p:a.push(u.anchor)});let c={uri:o.uri,range:l};e.set(o.uri,[...a,c].sort((u,p)=>u.range.start.line-p.range.start.line||u.range.end.line-p.range.end.line).map(u=>new so(u)))}}}),Array.from(e.keys()).sort((i,o)=>i.fsPath.localeCompare(o.fsPath)).map(i=>{let o=e.get(i);return o||[]}).flat()}function Hue(t){return"uri"in t&&"range"in t}var h9e=6e4,g9e=1500,Yg=class t{constructor(){this.id=t.ID;this.description=QR.t("Add documentation comment for this symbol");this.intentDetectionInput={sampleQuestion:"Add jsdoc to this method"};this.locations=[1];this.commandInfo={executeImmediately:!0}}static{this.ID="doc"}async asSlashCommand(e,r){if(r.document.lineCount>g9e||r.document.getText().length>h9e)return new lT("Add documentation comment for this symbol");let n=await Pg.determineNodeToDocument(e,r),i=n.identifier?QR.t("Add documentation comment for '{0}'",n.identifier):QR.t("Add documentation comment for this symbol");return new lT(i,n)}async invoke(e,r,n){let i=r.documentContext;if(!i)throw new Error("Open a file to add documentation.");let o;n instanceof lT?o=n.nodeToDocument:e.get(Le).getLogger("InlineDocIntent#invoke").warn("Unexpected: SlashCommand given to intent invocation is not a DocSlashCommand");let s=await Fr(e,r.location,this.id);return new G7(e,s,i,this,o)}},lT=class{constructor(e,r=void 0){this.detail=e;this.nodeToDocument=r;this.command=Yg.ID;this.executeImmediately=!0}},G7=class t{constructor(e,r,n,i,o=void 0){this.accessor=e;this.endpoint=r;this.context=n;this.intent=i;this.nodeToDocument=o;this.location=1;this.createReplyInterpreter=Vf.createFactory(async e=>{if(!this.contextInfo||!this.expandedRange)throw new Error("doc intent NEEDS a selection context");let r=Rp(this.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=r.code,i=Date.now(),o=await Wce(this.context.document.languageId,n),s=Date.now()-i;t._sendExtractDocTelemetry(this.accessor.get(wr),this.context.document.languageId,n.length,o,s),o&&(n=o);let a=Gg(this.accessor,this.contextInfo,n,1,this.context.fileIndentInfo);return zg(a,this.expandedRange)});let s=this,a=this.computeRules(n);this.promptCrafter=new class extends Ei{constructor(){super(e,{rules:a,contextResolvers:[]},1,n)}async buildPrompt(l,c,u,p,d,f){s.nodeToDocument||(s.nodeToDocument=await Pg.determineNodeToDocument(s.accessor,s.context));let m=await new Pg(s.nodeToDocument).resolveContext(s.accessor,{endpoint:c,conversation:l,documentContext:s.context,message:void 0},void 0);if(m){s.contextInfo=m?.metadata.contextInfo,s.expandedRange=m?.metadata.expandedRange;let h=await s.computeQueryPrefix(e,n),g=[];for(let _ of m.userMessages)g.push(new bi({message:_,type:"user"}));let v=l.getLatestTurn();if(!v)throw new Error("No last message");v.request.message=`${h} ${v.request.message}`.trim(),l=new Io([g,l.turns].flat())}return super.buildPrompt(l,c,u,p,d,f)}}}computeRules(e){return`
- Each code block starts with \`\`\` and ${Tn.forLanguage(e.language)}.
- You always answer with ${e.language.languageId} code.
- When the user asks you to document something, you must answer in the form of a ${e.language.languageId} code block.`.trim()}async computeQueryPrefix(e,r){let n,i;this.nodeToDocument===void 0||!this.nodeToDocument.identifier?(n=!1,i="the selection"):(n=!0,i=this.nodeToDocument.identifier);let o;switch(r.document.languageId){case"typescript":case"typescriptreact":o=n?"a TSDoc comment":"TSDoc comment";break;case"javascript":case"javascriptreact":o=n?"a JSDoc comment":"JSDoc comment";break;case"python":o="docstring";break;default:o="documentation comment"}return`Please add ${o} for ${i}.`}static _sendExtractDocTelemetry(e,r,n,i,o){e.sendTelemetryEvent("extractDoc",{languageId:r,couldExtractDoc:i===void 0?"false":"true"},{codeBlockLen:n,timeSpentMs:o})}};var jue=Oe(jn());var wy=class extends Dr{render(){let e=this.props.language;return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"The user has a ",e.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",Tn.forLanguage(e),".",vscpp("br",null),"Answer with a single ",e.languageId," code block.",vscpp("br",null),"If you modify existing code, you will use the ",ii.begin(e)," and ",ii.end(e)," markers.")}};var XR=class extends Dr{render(){if(Ln(this.props.documentContext.document.uri))throw Gu("InlineChatBasePrompt should not be used with a notebook!");let e=this.props.documentContext.language;return vscpp(vscppf,null,vscpp(wf,null,vscpp(wy,{language:e}),vscpp(Af,null)),this.props.history&&vscpp(nn,null,this.props.history),vscpp(Ap,{documentContext:this.props.documentContext}),vscpp(nn,null,this.props.query))}};var JR=class extends Dr{render(){if(!Ln(this.props.documentContext.document.uri))throw Gu("InlineChatNotebookBasePrompt should be used only with a notebook!");let e=this.props.documentContext.language;return vscpp(vscppf,null,vscpp(wf,null,vscpp(wy,{language:e}),vscpp("br",null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp(Af,null)),this.props.history&&vscpp(nn,null,this.props.history),vscpp(wp,{documentContext:this.props.documentContext}),vscpp(nn,null,this.props.query))}};var zf=class t{constructor(e,r,n){this.accessor=e;this.documentContext=r;this.editStrategy=n}static async createIntentInvocation(e,r,n,i){let{location:o,documentContext:s}=n;if(!s)throw new Error("Open a file to add code.");let a=new t(r,s,i),l=await Fr(r,o,e.id);return{intent:e,location:o,endpoint:l,promptCrafter:a,createReplyInterpreter:(c,u)=>a.createReplyInterpreter(c,u)}}async buildPrompt(e,r,n,i,o,s){let l=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns[e.turns.length-2].request.message:void 0,u=new Og(this.accessor,8192,r),p=Ln(this.documentContext.document.uri)?JR:XR,d=await u.render(p,{documentContext:this.documentContext,query:l,history:c});return this.selectionContextMetadata=u.getMeta(Ap.METADATA_ID)||u.getMeta(wp.METADATA_ID),{messages:d,tokenCount:100}}createReplyInterpreter(e,r){if(!this.selectionContextMetadata)throw new Error("Could not create reply interpreter without selection context metadata");return r?new Kg(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e):new Wg(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e)}};var Ay=class t{constructor(){this.id=t.ID;this.description=jue.t("Make changes to existing code");this.intentDetectionInput={sampleQuestion:"Change this method to use async/await",modelDescription:"Make changes to existing code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="edit"}async invoke(e,r){return zf.createIntentInvocation(this,e,r,2)}};var Gue=Oe(jn());var uT="Write an explanation for the active selection as paragraphs of text.",Vue={systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a world-class coding tutor. Your code explanations perfectly balance high-level concepts and granular details. Your approach ensures that students not only understand how to write code, but also grasp the underlying principles that guide effective programming."},rules:`
Think step by step:
1. Examine the provided code selection and any other context like user question, related errors, project details, class definitions, etc.
2. If you are unsure about the code, concepts, or the user's question, ask clarifying questions.
3. If the user provided a specific question or error, answer it based on the selected code and additional provided context. Otherwise focus on explaining the selected code.
4. Provide suggestions if you see opportunities to improve code readability, performance, etc.

Focus on being clear, helpful, and thorough without assuming extensive prior knowledge.
Use developer-friendly terms and analogies in your explanations.
Identify 'gotchas' or less obvious parts of the code that might trip up someone new.
Provide clear and relevant examples aligned with any provided context.
`.trim(),contextResolvers:[ws,kle,Rs],turnFilter:t=>t.map(e=>(e.request.message.startsWith(uT)&&(e.request.message=uT),e))},V7=class{constructor(e){this.defaultPanelPromptCrafter=new Ei(e,Vue,2,void 0)}async buildPrompt(e,r,n,i,o,s){return this.defaultPanelPromptCrafter.buildPrompt(e,r,n,i,o,s)}},ZR=class{constructor(){this.id="explain";this.locations=[2,1];this.description=Gue.t("Explain how the selected code works");this.intentDetectionInput={sampleQuestion:"Write an explanation for the code above as paragraphs of text."}}static{this.ID="explain"}async invoke(e,r,n){let i=r.location,o=await Fr(e,i,this.id);if(i===1){let s=r.documentContext,a=new class extends Ei{async buildPrompt(c,u,p,d,f,m){let h=c.getLatestTurn();return h?.request.message===""&&(h.request={message:uT,type:"user"}),super.buildPrompt(c,u,p,d,f,m)}}(e,Vue,1,s),l=s&&YR.createFactory();return{intent:this,location:i,endpoint:o,promptCrafter:a,createReplyInterpreter:l}}return{intent:this,location:i,endpoint:o,promptCrafter:new V7(e)}}async asSlashCommand(e,r){return{command:this.id,detail:this.description,refer:e.get(Ge).getConfig(Qe.ExplainIntentRefer)}}};var z7=Oe(jn());var eD=class extends Ds{constructor(){super({location:2,id:"api",description:z7.t("Ask about VS Code extension development"),systemPromptOptions:{roleplay:"You are an expert in VS Code extension development. You know how to use the VS Code API to extend the editor. Your task is to help the Developer with their VS Code extension development."},modelSampleQuestion:"How do I add text to the status bar?",commandInfo:{sampleRequest:z7.t("How do I add text to the status bar?")},rules:`
Assume the question is about VS Code extension development.
Politely decline to answer if the question is not about VS Code extension development.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the API related context given to you is incorrect or not relevant you may ignore it.
The user cannot see the API context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
Do not talk about initial setup of creating an extension unless the user asks about it.
Only provide information to related VS Code extension development.`.trim(),contextResolvers:[Gle,Rs]})}};var pT=Oe(jn());function zue(t,e){let r=t;for(let n of e){let i=n.range.start,o=n.range.end,s=r.start,a=r.end,l=n.newText.split(`
`).length,c=l-(o.line-i.line)-1,u=s.line,p=s.line;o.isBefore(s)?(u=s.line+c,p=a.line+c):i.isBefore(s)&&o.isAfterOrEqual(s)&&o.isBeforeOrEqual(a)?(u=i.line,p=a.line+c):i.isAfterOrEqual(s)&&i.isBeforeOrEqual(a)&&o.isAfter(a)?(u=s.line,p=o.line+c):i.isAfter(a)?(u=s.line,p=a.line):r.contains(n.range)?(u=s.line,p=a.line+c):n.range.contains(r)&&(u=i.line,p=i.line+l-1),r=new tt(u,0,p,0)}return r}var v9e={3:"gpt-3.5-turbo",4:"gpt-4",cl:"code-llama"},tD=class{constructor(){this.id="fix";this.locations=[1,2];this.description=pT.t("Propose a fix for the problems in the selected code");this.intentDetectionInput={sampleQuestion:"There is a problem in this code. Rewrite the code to show it with the bug fixed."};this.commandInfo={sampleRequest:pT.t("There is a problem in this code. Rewrite the code to show it with the bug fixed.")}}static{this.ID="fix"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to fix an issue");let i=r.location,o=r.intentArgument,s=await Fr(e,i,this.id,o?v9e[o]:void 0);return Ln(n.document.uri)&&n.document.languageId==="python"?new $7(this,s,i,e,n):new rD(this,s,i,e,n)}},rD=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.documentContext=o;let s={queryPrefix:this.getQueryPrefix(),rules:this.getRules(),contextResolvers:this.getContextResolvers()};this.promptCrafter=new Ei(i,s,n,o),this.createReplyInterpreter=a=>new class extends Vf{constructor(l){super(l,{report:c=>{a.report({...c,editsShouldBeInstant:!0})}})}_reportProgress(){}}(this.interpretCodeReply.bind(this))}getContextResolvers(){return this.location===1?[Hle,r7]:[ws,r7,Rs]}getQueryPrefix(){return this.location===1?`Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.
`:"Please fix my code."}getRules(){return this.location===1?`First think step-by-step how you would fix the issue.
You are expected to either edit the selected code or propose a bash command to install missing packages.
If you propose a code change, use a single code block that starts with \`\`\` and ${Tn.forLanguage(this.documentContext.language)}.
If you propose to run a bash command, use a code block that starts with \`\`\`bash.
When adding missing imports, always insert them inside of the selected code at the top, do not replace the rest of the selected code. 
Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.`:`You specialize in being a highly skilled code generator. Your task is to help the Developer fix an issue.
If context is provided, try to match the style of the provided code as best as possible.
Generated code is readable and properly indented.
Markdown blocks are used to denote code.
Preserve user's code comment blocks, do not exclude them when refactoring code.
Pay especially close attention to the selection or exception context.
Given a description of what to do you can refactor, fix or enhance the existing code.`}async interpretCodeReply(e){let r=this.promptCrafter.selectionContextMetadata;if(!r)throw new Error("code reply NEEDS a selection context");let n=Rp(this.promptCrafter.selectionContextMetadata.contextInfo,e,this.documentContext.language);if(!n||n.language==="bash"||n.language==="ps1")return{type:"conversational",content:e};let i=n.contentBeforeCode.match(/^.+/)?.[0],o=this.generateEdits(r,n.code),s=this.documentContext.document.version,a=l=>this.generateFollowUps(o,r.expandedRange,s,l);return zg(o,r.expandedRange,i,a)}generateEdits(e,r){return Gg(this.accessor,e.contextInfo,r,2,this.documentContext.fileIndentInfo,jg.fromDocumentContext(this.documentContext))}async generateFollowUps(e,r,n,i){let s=await this.accessor.get(Ao).waitForNewDiagnostics(this.documentContext.document.uri,i);if(!i.isCancellationRequested&&s.length&&this.documentContext.document.version!==n){let a=zue(r,e),l=s.filter(c=>Lle(c)&&c.range.intersection(a));if(l.length)return l.length===1?[{title:pT.t("An error remains after applying the change, click here to iterate."),message:`/fix ${l[0].message}`}]:[{title:pT.t("{0} errors remain after applying the change, click here to iterate.",l.length),message:"/fix Fix the remaining errors"}]}}},$7=class extends rD{getRules(){return this.location===1?B7(this.documentContext)+'\nIf you suggest to run a terminal command, use a code block that starts with ```bash.\nWhen fixing "ModuleNotFoundError" or "Import could not be resolved" errors, always use magic command "%pip install" to add the missing packages. The imports MUST be inserted at the top of the code block and it should not replace existing code.\nYou should not import the same module twice.':super.getRules()}generateEdits(e,r){let n=r.split(`
`),i=[],o=[];for(let l of n)l.match(/^[%\!]pip/)?i.push(l):o.push(l);if(!i.length)return super.generateEdits(e,r);let s=[],a=Vg(i,{whichLine:"topMost",lines:e.contextInfo.range.lines},this.documentContext.fileIndentInfo).join(`
`)+`
`;return s.push(new $a(new tt(e.expandedRange.start,e.expandedRange.start),a)),o.length&&s.push(...super.generateEdits(e,o.join(`
`))),s}};var $ue=Oe(jn());var Ry=class t{constructor(){this.id=t.ID;this.description=$ue.t("Generate new code");this.intentDetectionInput={sampleQuestion:"Add a function that returns the sum of two numbers",modelDescription:"Generate new code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="generate"}async invoke(e,r){return zf.createIntentInvocation(this,e,r,3)}};var Xg=Oe(jn());var Dp=class{constructor(e){this.deltaApplier=e;this._appliedLength=0;this._appliedText=""}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){let r=e.substring(this._appliedLength,e.length);this.append(r)}async append(e){this.deltaApplier(e),this._appliedLength+=e.length,this._appliedText+=e}},nD=class extends Dp{constructor(){super(r=>this._source.emitOne(r));this._source=new Rg}get asyncIterable(){return this._source.asyncIterable}finish(){this._source.resolve()}};var Qg=class{constructor(e){this.accessor=e;this.commandPrefix="/";this.readConfig()}readConfig(){this._enabledCommands=this.accessor.get(Ge).getConfigMixedWithDefaults(Qe.ConversationSlashCommandEnablements)}isCommandEnabled(e,r){if(this._enabledCommands===void 0)return!1;if(this._enabledCommands[e]===void 0){if(this._enabledCommands["*"])return!0;let n=Li.getCommand(e,r)?.intent?.commandInfo?.defaultEnablement;return typeof n=="boolean"?n:!0}return!!this._enabledCommands[e]}parse(e,r){if(e=e.trimStart(),e.startsWith(this.commandPrefix)){let n=/\/(?<intentId>\w+)(?::(?<intentArgument>\w*))?(?<restOfQuery>\s.*)?/s.exec(e)?.groups,i=n?.intentId??"",o=n?.intentArgument??"",s=(n?.restOfQuery??"").trim(),a=Li.getCommand(i,r);if(this.readConfig(),a&&this.isCommandEnabled(i,r))return{command:a,intentArgument:o,restOfQuery:s}}return{restOfQuery:e}}getCommand(e,r){return this.allCommands(r).find(n=>n.commandId===e)}allCommands(e){return this.readConfig(),Li.getCommands(e).filter(r=>this.isCommandEnabled(r.commandId,e))}};var Jl=class t{constructor(){this.id=t.ID;this.locations=[1,2];this.description="Intent of this command is unclear or is not related to information technologies";this.commandInfo={hiddenFromUser:!0};this.intentDetectionInput={sampleQuestion:"Add a dog to this comment."}}static{this.ID="unknown"}static{this.Instance=new t}async invoke(e,r){if(r.location===1)return zf.createIntentInvocation(this,e,r,2);let n=r.location,i=r.documentContext,o=await Fr(e,n,this.id),s=new Ei(e,{contextResolvers:[ws]},n,r.documentContext);return{intent:this,location:n,promptCrafter:s,endpoint:o,createReplyInterpreter:i&&Kg.createFactory(e,s,i)}}};var Dy=class t{constructor(e,r){this.accessor=e;this.location=r;this.logger=e.get(Le).getPromptResponseLogger("intent detection"),this.ghTelemetry=e.get(dt),this.options=e.get(Wa)}async detectIntent(e,r,n,i,o){let s;try{if(e){let f=e.selection,m=new tt(new Tr(Math.max(f.start.line-5,0),0),new Tr(Math.min(f.end.line+5,e.document.lineCount),e.document.lineAt(f.end.line).text.length));s=e.document.getText(m)}}catch{}let a=e?.document.uri.fsPath,l=this.createIntentDetectionPrompt(r,o,a,s),c=[{role:"system",content:l}];this.logger.logPrompt(c);let u=await by(this.accessor),p=await this.accessor.get(fr).fetchMany(c,void 0,n,this.location,u,{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"],n:1},{messageSource:"chat.intentprompt"}),d=this.handleResult(p,i,r);return this.sendInternalTelemetry(r,o,a,s,d?.id,e?.language.languageId),d}handleResult(e,r,n){if(this.logger.logResponse(e),e.type!=="success"){this.sendPromptIntentErrorTelemetry(r,e);return}let i=e.value.map(l=>l.trimStart().split(`
`)[0].replace(/function id:|response:/i,"").trim()),o=i.map(l=>Sn.getIntent(l,this.location)).filter(l=>l!==void 0&&l.id!==Jl.ID),s=t.pickMostFrequent(o);this.logger.info(`picked intent "${s?.id}" from ${JSON.stringify(e.value,null,"	")}`);let a=r.extendedBy({messageText:n,promptContext:i.join(),intent:s?.id||"unknown"});return this.ghTelemetry.sendRestrictedTelemetry("conversation.promptIntent",a.raw),s}sendPromptIntentErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.ghTelemetry.sendRestrictedTelemetry("conversation.promptIntentError",n.raw)}static pickMostFrequent(e){if(e.length===0)return;let r=new Map;for(let i of e){let o=r.get(i.id)??[0,i];o[0]+=1,r.set(i.id,o)}let[,n]=[...r.values()].reduce((i,o)=>i[0]>o[0]?i:o);return n}createIntentDetectionPrompt(e,r,n,i){let o=Sn.getIntents(this.location),s=n?` in file ${n}`:"",a=i?`Current active file contains following excerpt:
\`\`\`
${i}
\`\`\``:"";return`
${Ng()}

A software developer is using an AI chatbot in a code editor${s}.
${a}
The developer added the following request to the chat and your goal is to select a function to perform the request.
${r?`The developer probably wants Function Id '${r}', pick different only if you're certain.`:""}
Request: ${e}

Available functions:
${o.map(l=>`Function Id: ${l.id}
Function Description: ${l.intentDetectionInput.modelDescription||l.description}
`).join(`
`)}

Here are some examples to make the instructions clearer:
${o.map(l=>`Request: ${l.intentDetectionInput.sampleQuestion}
Response: ${l.id}
`).join(`
`)}
Request: ${e}
Response:
`.trim()}sendInternalTelemetry(e,r,n,i,o,s){i=i&&i.length<5e3?i:void 0,this.accessor.safeGet(wr)?.sendInternalTelemetryEvent("intentDetection",{chatLocation:wg(this.location),request:e,preferredIntent:r??"<none>",filePath:n??"<none>",fileExerpt:i??"<none>",detectedIntent:o??"<none>",languageId:s??"<none>"},{})}};async function dT(t,e,r,n,i,o){let s=new Qg(t),a,l,c="",u=s.parse(e,1);if(u.command)l=u.command.intent,c=u.restOfQuery,a=u.intentArgument;else{let f=t.get(Ge);(f.isDefaultSettingOverwritten(Qe.ConversationIntentDetection)?f.getConfig(Qe.ConversationIntentDetection):!0)&&(l=await new Dy(t,1).detectIntent(r,e,o,i,n?.preferredIntent)),c=e}let p;l&&n&&(p=n.slashCommands.find(f=>f.command===l.id)),l??=Jl.Instance;let d=await l.invoke(t,{location:1,documentContext:r,intentArgument:a},p);return{queryWithoutCommand:c,intentInvocation:d,slashCommand:p}}async function fT(t,e,r,n){let i=new Io;if(e&&e.length>0){let a=`The current code is a result of a previous interaction with you. Here are my previous messages: 
- ${e.join(`
- `)}`,l=new bi({message:a,type:"user"});i.addTurn(l)}let o=new bi({message:t.queryWithoutCommand,type:"user"});o.intentInvocation=t.intentInvocation,i.addTurn(o);let{messages:s}=await t.intentInvocation.promptCrafter.buildPrompt(i,t.intentInvocation.endpoint,{},{report(){}},r,n);return s}var Wue=Oe(w7());var iD=class{constructor(e,r,n,i,o,s,a){this.accessor=e;this.id=r;this.description=n;this.roleplay=i;this.rules=o;this.sampleQuestion=s;this.options=a;this.pLimit=(0,Wue.default)(1);this.logger=e.get(Le).getLogger("GenerateFileContentsPrompt")}turnFilter(e){return e.filter(r=>r.intentInvocation?.intent.id==="new"||r.request.type!=="user"&&r.request.type!=="follow-up")}buildPrompt(){return[this.roleplay,this.rules,this.sampleQuestion].join(`
`)}async run(e,r,n){return this.pLimit(()=>this.doRun(e,r,n))}async doRun(e,r,n){let i=this.buildPrompt();for(let[a,l]of Object.entries(r))i=i.replace(`{${a}}`,l);this.logger.info("prompt: "+i);let o=await Fr(this.accessor,2,this.id),s=await this.accessor.get(fr).fetchOne([{role:"system",content:Ip()},...e,{role:"user",content:i}],async a=>{},n,2,o,{temperature:this.options.temperature,top_p:this.options.topP,stop:["stopIt"]},{messageSource:"newIntent"});return s.type!=="success"?(this.logError("fetch failure type: "+s.type+", reason: "+s.reason),""):(this.log("fetch response: "+s.value),s.value)}logError(e){this.logger.error(`[newIntent] ${this.id} `,e)}log(...e){this.logger.info(`[newIntent] ${this.id} `,...e)}};function _9e(t,e,r={}){let n=`Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

	## Valid question

	User: ${t}
	Assistant: ${e}`;for(let[i,o]of Object.entries(r))n=n.replace(`{${i}}`,o);return n}var oD=class extends iD{constructor(e,r){let n="I want to set up the following project: {PROJECT_DESCRIPTION}.\n		This is the project tree structure:\n		```markdown\n		{PROJECT_TREE_STRUCTURE}\n		```\n		",i=`
		Think step by step and respond with a text description that lists and summarizes each file inside this project.
		List the classes, types, interfaces, functions, and constants it exports and imports if it is a code file.
		You should be as specific as possible when listing the public properties and methods for each exported class.
		Do not use code blocks or backticks. Do not include any text before or after the file contents.
		Do not include product names such as Visual Studio in the comments.`.trim(),o="The project has the following files:\n		`src/app.ts`: This file is the entry point of the application. It creates an instance of the express app and sets up middleware and routes.\n		`src/controllers/index.ts`: This file exports a class `IndexController` which has a method `getIndex` that handles the root route of the application.\n		`src/routes/index.ts`: This file exports a function `setRoutes` which sets up the routes for the application. It uses the `IndexController` to handle the root route.\n		`src/types/index.ts`: This file exports interfaces `Request` and `Response` which extend the interfaces from the `express` library.\n		`tsconfig.json`: This file is the configuration file for TypeScript. It specifies the compiler options and the files to include in the compilation.\n		`package.json`: This file is the configuration file for npm. It lists the dependencies and scripts for the project.\n		`README.md`: This file contains the documentation for the project.",s=_9e(n+i,o,{PROJECT_DESCRIPTION:"Create a TypeScript Express app",PROJECT_TREE_STRUCTURE:`
		my-express-app
		\u251C\u2500\u2500 src
		\u2502   \u251C\u2500\u2500 app.ts
		\u2502   \u251C\u2500\u2500 controllers
		\u2502   \u2502   \u2514\u2500\u2500 index.ts
		\u2502   \u251C\u2500\u2500 routes
		\u2502   \u2502   \u2514\u2500\u2500 index.ts
		\u2502   \u2514\u2500\u2500 types
		\u2502       \u2514\u2500\u2500 index.ts
		\u251C\u2500\u2500 package.json
		\u251C\u2500\u2500 tsconfig.json
		\u2514\u2500\u2500 README.md`});super(e,"generateProjectPlan","Generate a plan for the contents of a project",n,i,s,r)}async run(e,r,n){return super.run(e,r,n)}},sD=class extends iD{constructor(e,r){super(e,"generateFile","Generate the contents of a file","I want to set up the following project: {PROJECT_DESCRIPTION}.\n			This is the project tree structure:\n			```markdown\n			{PROJECT_TREE_STRUCTURE}\n			```\n			The project should adhere to the following specification:\n			{PROJECT_SPECIFICATION}",`
Think step by step and give me just the file {FILEPATH} within this project. The code should not contain bugs.
If the file is supposed to be empty, please respond with a code comment saying that this file is intentionally left blank.
Do not include comments in json files.
Do not use code blocks or backticks.
Do not include product names such as Visual Studio in the comments.`.trim(),"",r)}async run(e,r,n){let i=await super.run(e,r,n),o=y9e(r.FILEPATH,i);return i.length!==0&&o.length===0&&(this.logError("failed to parse content"),this.log(`failed to parse ${r.FILEPATH} content 
 ${i}`)),o.startsWith("Sorry, I cannot generate file contents")?(this.logError("AI failed to generate file contents"),this.log(`failed to generate ${r.FILEPATH} content 
 ${i}`),""):o}};function y9e(t,e){e=e.trimEnd().replace("[RESPONSE END]","");function r(n,i){try{let o=i.exec(n.trim());if(o&&o.length>2)return o[2]}catch(o){console.error(o)}return n}if(t.endsWith(".md")){let n=r(e,/^```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/),[i,...o]=n.split("#");return i.length?["",...o].join("#"):n}else return r(e,/```([^\n]+)?\s*\n([\s\S]+?)\s*```/g)}var Pp=class{constructor(e){this.accessor=e;this.promises=[];this.responseScopedData=new Map;this.generatePlanPrompt=new oD(this.accessor,{maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:"none",rejectionMessage:""});this.generateFilePrompt=new sD(this.accessor,{maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:"none",rejectionMessage:""})}set(e,r,n,i,o,s){let a=this.generatePlanPrompt.run(s,{PROJECT_DESCRIPTION:n,PROJECT_TREE_STRUCTURE:i},new Dg().token);this.promises.push(a),this._getResponseScopedData(e).set(r,{userPrompt:n,projectStructure:i,projectSpecification:a,chatMessages:s,fileTreeData:this._prefetch(n,i,a,o.treeData,s)})}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTreeData;for(let l of i)a=a?.children?.find(c=>c.label===l);if(a&&!a?.content&&!a?.children){let l=a;l.content=this._getFileContent(s.userPrompt,s.projectStructure,s.projectSpecification,r,s.chatMessages).catch(()=>l.content=void 0)}return a}_prefetch(e,r,n,i,o){let s=Date.now();return i.children?{...i,children:i.children.map(a=>this._prefetch(e,r,n,a,o)),ctime:s}:{...i,content:void 0,ctime:s}}async _getFileContent(e,r,n,i,o,s=new Dg().token){return this.generateFilePrompt.run(o,{PROJECT_DESCRIPTION:e,PROJECT_TREE_STRUCTURE:r,PROJECT_SPECIFICATION:await n,FILEPATH:i},s).then(a=>Buffer.from(a))}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}},x9e=`
Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

## Valid setup question

User: Create a TypeScript express app
Assistant:

Sure, here's a proposed directory structure for a TypeScript Express app:

\`\`\`filetree
my-express-app
\u251C\u2500\u2500 src
\u2502   \u251C\u2500\u2500 app.ts
\u2502   \u251C\u2500\u2500 controllers
\u2502   \u2502   \u2514\u2500\u2500 index.ts
\u2502   \u251C\u2500\u2500 routes
\u2502   \u2502   \u2514\u2500\u2500 index.ts
\u2502   \u2514\u2500\u2500 types
\u2502       \u2514\u2500\u2500 index.ts
\u251C\u2500\u2500 package.json
\u251C\u2500\u2500 tsconfig.json
\u2514\u2500\u2500 README.md
\`\`\`

## Invalid setup question

User: Create a horse project
Assistant: Sorry, I don't know how to set up a horse project.`,b9e="new";function E9e(){let t=new Ds({location:2,id:"new",description:Xg.t("Scaffold code for a new workspace"),modelDescription:"Scaffolds a new project from scratch based on requirements from the user.",modelSampleQuestion:"Create a RESTful API server using typescript",commandInfo:{followupPlaceholder:"Provide additional instructions to refine the proposed workspace",shouldRepopulate:!0,allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:Xg.t("Create a RESTful API server using typescript")},systemPromptOptions:{examples:x9e,roleplay:"You are a VS Code assistant. Your job is to suggest a filetree directory structure for a project that a user wants to create. If a step does not relate to filetree directory structures, do not respond. Please do not guess a response and instead just respond with a polite apology if you are unsure. Please end your response with [RESPONSE END] and do not include any other text."},rules:`
You should generate a markdown file tree structure for the same project and include it in your response.
You should only list common files for the user's desired project type.
You should always include a README.md file which describes the project.
Do not include folders and files generated after compiling, building or running the project such as node_modules, dist, build, out
Do not include image files such as png, jpg, ico, etc
Do not include any descriptions or explanations in your response.`.trim(),turnFilter:e=>e.filter(r=>r.intentInvocation?.intent.id===b9e||r.request.type!=="user"&&r.request.type!=="follow-up"),responseProcessor:T9e,followUps:S9e,contextResolvers:[]});Sn.registerIntent(t)}_f.registerContribution(E9e);function T9e(t,e,r,n){let i=!1,o="",s="",a,l=/```filetree\n/,c=/```[^\n]*/,u=n.filter(d=>d.role!=="system"),p=new Dp(d=>{let f=e.requestId??"";if(e.response||(e.response={message:o,type:"model"}),d=d.replace("[RESPONSE END]",""),e.response.message+=d,o+=d,!d)return;let m=e.request.message,h=d.match(/```filetree\n([\s\S]+?)\n```/);if(h){let[g,v]=d.split(h[0]);s=h[1];let _=W7(s),y={treeData:K7(f,_)};r.report({content:g}),r.report({placeholder:Xg.t("Generating workspace preview..."),resolvedContent:Promise.resolve(y)}),r.report({content:v}),t.get(Pp).set(f,y.treeData.label,m,s,y,u)}else if(d.trim().match(c)&&i&&a){s=s.trim(),i=!1;let g=W7(s),v={treeData:K7(f,g)};v.treeData.children?.length===0?a.complete({content:Xg.t("Sorry, something went wrong. Please try asking your question again.")}):(a.complete(v),t.get(Pp).set(f,v.treeData.label,m,s,v,u))}else d.match(l)&&!i&&!a?(i=!0,a=new Nc,r.report({placeholder:Xg.t("Generating workspace preview..."),resolvedContent:a.p})):i?s+=d:r.report({content:d})});return{get appliedText(){return Promise.resolve(o)},apply:d=>p.apply(d)}}async function S9e(t,e){let r=t.get(Le).getPromptResponseLogger("new");if(!e.response?.message)return[];let n=/```[^\n]*\n([\s\S]+?)\n```/,i=e.response.message.match(n),o=i&&i[1].trim();if(!o)return r.info(`[workspaceIntent] Response validation failed for response: 
`+JSON.stringify(e.response.message)),[];let s=W7(o),a=[];if(Que(s,"",a),a.length===0)return r.info(`[workspaceIntent] Failed to fetch project items for 
`+o),[];let l=[],c={commandId:"github.copilot.createProject",args:[e.request.message,a,o.replace(/\n/g,""),e.sessionId,e.requestId],title:Xg.t("Create Workspace")};return l.push(c),l}function C9e(t){let e=t.indexOf("\u2500\u2500 "),r=e-t.indexOf(`
`,e)-1;return r===-1?0:r}var I9e=["node_modules","out","bin","debug","obj","lib",".dll",".pdb",".lib",".jpg",".png",".ico",".gif",".svg",".jpeg",".tiff",".bmp",".webp",".jpeg",".gitignore","LICENSE.txt","yarn.lock","package-lock.json"];function Kue(t){let e=[];for(let r of t.children)I9e.some(n=>r.name.endsWith(n))||e.push(r);t.children=e;for(let r of t.children)Kue(r);return t}function W7(t){let e=t.trim().split(`
`),r={name:"",depth:0,parent:void 0,children:[]},n=r;for(let i of e){let o=C9e(i),s=i.lastIndexOf("\u2500\u2500 "),l={name:s>=0?i.substring(s+3):i,depth:o,parent:void 0,children:[]};if(o===0){r.name=i;continue}else if(n.depth<o)l.parent=n,n.children.push(l);else if(n.depth===o)l.parent=n.parent,n.parent?.children.push(l);else{for(;n.depth!==o&&n.parent;)n=n.parent;l.parent=n.parent,n.parent?.children.push(l)}n=l}return Kue(r)}function Yue(t){return/\.[^/.]+$/.test(t)}function Que(t,e="",r){let n=e===""?t.name:`${e}/${t.name}`;r.push({type:t.children.length||!Yue(n)?"folder":"file",path:n});for(let i of t.children)Que(i,n,r)}function K7(t,e,r=""){let n=r===""?e.name:`${r}/${e.name}`,i=[],o=e.children.sort((s,a)=>s.children.length&&a.children.length?s.name.localeCompare(a.name):s.children.length?-1:1);for(let s of o)i.push(K7(t,s,n));return{label:e.name,uri:Y7(t,n),children:i.length||!Yue(n)?i:void 0}}async function Xue(t,e,r,n,i){let o=n.code?typeof n.code=="string"||typeof n.code=="number"?n.code:n.code.value:"",s=`${n.message}. ${o}`,a={messageSource:"slash.new"},l=n.range,c={document:r,fileIndentInfo:void 0,language:Cf(r),wholeRange:l,selection:new u9(l.start,l.end)},u=await dT(t,`/fix ${s}`,c,void 0,Ul(),i),p=u.intentInvocation.endpoint,d=await fT(u,void 0,Ul(),i),f=t.get(fr),m=async g=>hy(g)?g.length:void 0,h=await f.fetchOne(d,m,i,2,p,{temperature:e.temperature,top_p:e.topP},a);if(h.type==="success"&&h.value.length>0){let g=u.intentInvocation.createReplyInterpreter({report(){}},!1);g.update(h.value);let v=await g.finish();return v.type==="inlineEdit"?v.edits:void 0}}function Y7(t,e){return Tf.from({scheme:"vscode-copilot-workspace",authority:t??"",path:`/${e}`})}var Q7=Oe(jn());var X7=class{constructor(e,r,n){this.turn=r;this.progress=n;this.stagedTextToApply="";this.reporting=!0;this._appliedText="";this._resolvedContentDeferredPromise=new Nc;this._incodeblock=!1;this.conversationCallback=new Dp(i=>this.applyDelta(i))}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){this.conversationCallback.apply(e)}applyDeltaToTurn(e){this.turn.response||(this.turn.response={message:e,type:"model"}),this._appliedText+=e,this.turn.response.message+=e}applyDeltaToProgress(e){this.progress.report({content:e})}applyDelta(e){if(!this.reporting){this.applyDeltaToTurn(e);return}if(e=this.stagedTextToApply+e,this._incodeblock){let n=e.indexOf("```");if(n===-1){this.stagedTextToApply=e,this.applyDeltaToProgress(""),this.applyDeltaToTurn("");return}else{this._incodeblock=!1,e=e.substring(0,n)+"```";try{this.applyDeltaToTurn(e)}catch{}finally{this.reporting=!1,this.stagedTextToApply="",this._resolvedContentDeferredPromise.complete({content:""})}return}}let r=e.indexOf("```");if(r!==-1){this._incodeblock=!0;let n=e.indexOf("```",r+3);if(n!==-1){this._incodeblock=!1,this.applyDeltaToProgress(e.substring(0,r)),this.applyDeltaToProgress(e.substring(n+3)),this.applyDeltaToTurn(e),this.reporting=!1,this.stagedTextToApply="";return}else{let i=e.substring(0,r);this.applyDeltaToProgress(i),this.applyDeltaToTurn(e),this.stagedTextToApply="",this.progress.report({placeholder:"Thinking ...",resolvedContent:this._resolvedContentDeferredPromise.p});return}}this.applyDeltaToProgress(e),this.applyDeltaToTurn(e),this.stagedTextToApply=""}},w9e=`
DO NOT include Introduction or Conclusion section in the outline!
Focus only on sections that will need code!

Generate the outline as two parts:
- First part is markdown bullet list of section titles
- Second part is the JSON data that will validate against this JSON schema, wrap the response in code block. We assume that a code block begins with \`\`\`[optionally the language] and ends with \`\`\`

The JSON schema is:
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
	"description": {
	  "type": "string"
	},
	"sections": {
	  "type": "array",
	  "items": {
		"type": "object",
		"properties": {
		  "title": {
			"type": "string"
		  },
		  "content": {
			"type": "string"
		  }
		},
		"required": ["title", "content"]
	  }
	}
  },
  "required": ["sections"]
}`,A9e=`
Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

## Valid notebook creation question

user: Creating Random Arrays with Numpy

assistant: Here's an outline for a Jupyter notebook that creates Random Arrays with Numpy:

* **Import Required Libraries**
* **Create Random Arrays**
* **Seed the Random Number Generator**
* **Generate Random Integers**

\`\`\`json
{
  "description": "A Jupyter notebook that creates Random Arrays with Numpy.",
  "sections": [
    {
      "title": "Import Required Libraries",
      "content": "Import the necessary libraries, including NumPy."
    },
    {
      "title": "Create Random Arrays",
      "content": "Use NumPy to create random arrays of various shapes and sizes, including 1D, 2D, and 3D arrays."
    },
    {
      "title": "Seed the Random Number Generator",
      "content": "Use the seed() function to seed the random number generator for reproducibility."
    },
	{
	  "title": "Generate Random Integers",
	  "content": "Use the randint() function to generate random integers within a specified range."
	}
  ]
}
\`\`\`
`;function R9e(){let t=new Ds({location:2,id:"newNotebook",description:Q7.t("Create a new Jupyter Notebook"),modelDescription:"Creates a new Jupyter Notebook for tasks such as data analysis, scientific computing, and machine learning.",modelSampleQuestion:"How do I create a notebook to load data from a csv file?",commandInfo:{allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:Q7.t("How do I create a notebook to load data from a csv file?")},systemPromptOptions:{examples:A9e,roleplay:"You are an AI that creates a detailed content outline for a Jupyter notebook on a given topic."},rules:w9e,turnFilter:e=>e.filter(r=>r.intentInvocation?.intent.id==="newNotebook"||r.request.type!=="user"&&r.request.type!=="follow-up"),responseProcessor:(e,r,n)=>new X7(e,r,n),followUps:async(e,r)=>{let n=(r.response?.message??"").replace(/\n/g,""),o=/```(?:json)?(.+)/g.exec(n);if(o)try{let s=o[1],a=s.indexOf("```"),l=a===-1?s:s.substring(0,a);return[{commandId:"github.copilot.newNotebook",args:[JSON.parse(l)],title:"Create Notebook"}]}catch{}return[]},contextResolvers:[Rs,ws]});Sn.registerIntent(t)}_f.registerContribution(R9e);async function Jue(t,e,r,n,i,o,s){let a={messageSource:"slash.newNotebook"},l=`
	You are an AI that writes Python code for a single section of a Jupyter notebook.
	Overall topic of the notebook: ${n}
	Title of the notebook section: ${i.title}
	Description of the notebok section: ${i.content}
	Given this information, write all the code for this section and this section only.
	Your output should be valid Python code with inline comments.
	You should return the code directly without any explantion.
	You should not print message to explain the code or purpose of the code.

	Code in the notebook so far:

	${o}

	Please make sure the new code you generate works fine with the code above.
	You should return the code directly, without wrapping it inside \`\`\`.

	Please make sure that the new code is syntactically valid Python code. It can be validated by running it in a Python interpreter.
	For example, it should pass the validation through builtin module codeop \`codeop.compile_command(statement)\`.
	`,u=await t.get(fr).fetchOne([{content:l,role:"user"}],void 0,s,2,e,{temperature:r.temperature,top_p:r.topP},a);if(u.type==="success")return u.value}async function Zue(t,e,r,n,i,o,s,a){let l={messageSource:"slash.newNotebook"},c=`
You are an AI that improves Python code with respect to readability and performance for a single section of a Jupyter notebook.
You MUST return Python code as your answer.
DO NOT explain in inline comments for your the improvements
Overall topic of the notebook: ${n}
Title of the notebook section: ${i.title}
Description of the notebok section: ${i.content}

Code in the notebook so far:

${o}

Given this information, improve the following code.

Make sure the new code you generate works fine with the code above.
Make sure if a module is already imported in the code above, it can be used in the new code directly without importing it again. For the same reason, if a variable is defined above, it can be used in new code as well.
Make sure to return the code only - don't give an explanation of the improvements.

${s}
	`,p=await t.get(fr).fetchOne([{content:c,role:"user"}],void 0,a,2,e,{temperature:r.temperature,top_p:r.topP},l);if(p.type==="success")return p.value}var J7=Oe(jn());var Py=class{constructor(e,r,n){this.stopStartMappings=e;this.progress=r;this.processNonReportedDelta=n;this.stagedDeltasToApply=[];this.currentStartStop=void 0;this._appliedText="";this.nonReportedDeltas=[]}get appliedText(){return Promise.resolve(this._appliedText)}apply(e,r){return this.applyDelta(r)}applyDeltaToProgress(e){let r=e.annotations?.map(n=>({title:n.details.type,description:n.details.description}));(e.text||r?.length)&&this.progress.report({content:e.text,vulnerabilities:r?.length?r:void 0})}updateStagedDeltasUpToIndex(e,r){let n=[];for(let i=0;i<e+r;){let o=this.stagedDeltasToApply.shift();if(o){if(i+o.text.length<=e)n.push(o);else if(i<e||i<e+r){if(i<e){let a={...o};a.text=o.text.substring(0,e-i),n.push(a)}let s={...o};s.text=o.text.substring(e-i+r),s.text&&this.stagedDeltasToApply.unshift(s)}i+=o.text.length}else break}return n}checkForKeyWords(e,r,n=this.applyDeltaToProgress.bind(this)){let i=this.stagedDeltasToApply.map(o=>o.text).join("")+r.text;for(let o of e){let s=i.indexOf(o);if(s===-1)continue;return this.stagedDeltasToApply.push(r),this.updateStagedDeltasUpToIndex(s,o.length).forEach(l=>n(l)),o}for(let o of e)for(let s=o.length-1;s>0;s--){let a=o.substring(0,s);if(i.endsWith(a)){this.stagedDeltasToApply=[...this.stagedDeltasToApply,r];return}}[...this.stagedDeltasToApply,r].forEach(o=>{n(o)}),this.stagedDeltasToApply=[]}postReportRecordProgress(e){this.nonReportedDeltas.push(e)}applyDelta(e){if(this._appliedText+=e.text,this.currentStartStop===void 0){let r=this.checkForKeyWords(this.stopStartMappings.map(n=>n.stop),e);r&&(this.currentStartStop=this.stopStartMappings.find(n=>n.stop===r));return}else{if(!this.currentStartStop.start)return;this.checkForKeyWords([this.currentStartStop.start],e,this.postReportRecordProgress.bind(this))&&(this.processNonReportedDelta&&this.processNonReportedDelta(this.nonReportedDeltas).forEach(i=>this.applyDeltaToProgress({text:i})),this.currentStartStop=void 0,this.stagedDeltasToApply.length>0&&this.applyDelta({text:""}))}}};var D9e=`
### Question:
Search for 'foo' in all files under my 'src' directory.

### Answer:
Populate the query field with 'foo' and specify the files to include as 'src/'.

[ARGS START]
\`\`\`json
{
    "query": "foo",
    "filesToInclude": "src" ,
}
\`\`\`
[ARGS END]

### Question:
Find all CamelCase words in all files under the 'src/extensions' directory.

### Answer:
Perform a regex search for camelCase variables by checking for any word that has a lowercase letter followed by an uppercase letter, followed by any number of lowercase letters. You can use \`\\b[a-z]+[A-Z][a-z]+\\b\` to acheive this.
This must be case-sensitive since the capitalization of the letters in our regex matters.

[ARGS START]
\`\`\`json
{
    "query": "\\\\b[a-z]+[A-Z][a-z]+\\\\b",
    "filesToInclude": "src/extensions" ,
    "isRegex": true,
    "isCaseSensitive": true,
}
\`\`\`
[ARGS END]

### Question:
Find all hex color codes in css files

### Answer:
Perform a search for 6-digit or 3-digit hex color codes using the regex \`#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\b\`.

[ARGS START]
\`\`\`json
{
    "query": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\\\b",
    "filesToInclude": "*.css" ,
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Find all HTTPS links in markdown.

### Answer:
Search all URLs that have the HTTPS protocol in a markdown file. Make sure to include all valid URL characters in their respective places. This regex should achieve this: \`https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#()?&//=]*)\`.

[ARGS START]
\`\`\`json
{
    "query": "https?:\\\\/\\\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#()?&//=]*)",
    "filesToInclude": "*.md" ,
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Replace all YYYY-MM-DD dates with MM/DD/YYYY dates. Don't do this in typescript files.

### Answer:
You will need to use the regex \`\\b(\\d{4})-(\\d{2})-(\\d{2})\\b\` to match the YYYY-MM-DD date format. Then, you will need to use the replace string \`$2/$3/$1\` to replace the date with the MM/DD/YYYY format.

[ARGS START]
\`\`\`json
{
    "query": "\\\\b(\\\\d{4})-(\\\\d{2})-(\\\\d{2})\\\\b",
    "replace: "$2/$3/$1",
    "filesToExclude": "*.ts",
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Replace all camel case variable names with snake case variable names.

### Answer:
To replace all camel case variables with snake case, we will need to:
1. Find all sequences of lowercase letters succeeded by uppercase letters. Use \`([a-z]+)([A-Z])\` to capture these sequences.
2. Separate them with an underscore character. \`$1_$2\` does this.
3. Convert both characters to lowercase. Adjust the previous replace text to be \`\\l$1_\\l$2\`.

[ARGS START]
\`\`\`json
{
    "query": "([a-z]+)([A-Z])",
    "replace: "\\\\l$1_\\\\l$2",
    "isRegex": true,
    "isCaseSensitive": true,
}
\`\`\`
[ARGS END]

### Question:
alphanumeric

### Answer:
To find all alphanumeric characters, you can use the regex \`[a-zA-Z0-9]\`.

[ARGS START]
\`\`\`json
{
    "query": "[a-zA-Z0-9]",
    "isRegex": true,
    "isCaseSensitive": true,
}
\`\`\`
[ARGS END]

### Question:
link

### Answer:
To find all web links, use the regex \`https?:\\/\\/\\S+\`.

[ARGS START]
\`\`\`json
{
    "query": "https?:\\\\/\\\\/\\\\S+",
    "isRegex": true,
}
\`\`\`
[ARGS END]

### Question:
Search for actionbar files outside of my "extensions" directoy

### Answer:
To do this, use the query \`actionbar\` in all files except the ones in \`extensions\`.

[ARGS START]
\`\`\`json
{
    "query": "actionbar",
    "filesToExclude": "extensions",
}
\`\`\`
[ARGS END]

### Question:
typescript for loop

### Answer:
To look for "for" loops in most languages, use the query \`for\\s*\\(\`.

[ARGS START]
\`\`\`json
{
    "query": "for\\s*\\(",
	"isRegex: true,
	"filesToInclude: "*.ts"
}
\`\`\`
[ARGS END]

`;function P9e(t){if(!t)return[];let e=[],r={query:t.query??"",replace:t.replace??"",filesToInclude:t.filesToInclude??"",filesToExclude:t.filesToExclude??"",isRegex:t.isRegex??!1,isCaseSensitive:t.isRegex??!1};return e.push({commandId:"github.copilot.executeSearch",args:[r],title:"Search"}),e}function epe(t){let e=/```(?:json)\s*([\s\S]+?\s*)```/g,r=Array.from(t.matchAll(e),o=>o[1]),n=r&&r.length>0?r[0]:void 0,i;if(n){let o;try{o=iT(n)}catch{}o&&(i=o)}return i}function N9e(t){if(!t)return[];let e=[`| Parameter  | Value |
`,`| ------ | ----- |
`];for(let[r,n]of Object.entries(t)){if(n==="")continue;let i=n;(typeof n=="string"||n instanceof String)&&(i=n.replace(/\|/g,"\\|")),e.push(`| ${r} | \`${i}\` |
`)}return e.push(`
`),e}function k9e(t){let e=new Ds({location:2,id:"search",description:J7.t("Generate query parameters for workspace search"),modelSampleQuestion:"Search for 'foo' in all files under my 'src' directory",systemPromptOptions:{examples:D9e,roleplay:"You are a VS Code search expert who helps to write search queries for text in a workspace. Users want to search across a whole workspace. Your response will contain parameters to use in the search that targets what the user wants."},commandInfo:{allowsEmptyArgs:!1,defaultEnablement:t,sampleRequest:J7.t("Search for 'foo' in all files under my 'src' directory")},rules:`
The user's question is ALWAYS related to search or replace. When the user's question does not seem to be related to searching or replacing, you MUST assume that they're searching for or replacing what they are describing.
For example, if the user says "emojis", try appending "I'm looking for _____" to the beginning (e.g. I'm looking for emojis) to make more sense of it.

For all valid questions, you MUST respond with a JSON object with search parameters to use.
- Your answer MUST wrap the JSON object in "[ARGS START]" and "[ARGS END]". "[ARGS START]" must be on a new line.
- Your answer MUST have an explanation in full, human-readable sentences. This goes before the "[ARGS START]" line.

If you put a regex in the "query" parameter, make sure to set "isRegex" to true.
If you put a regex in the "query" parameter, do not start and/or end with forward slashes to denote a regex literal.
You MUST NOT give an answer with an empty-string query parameter.

The "replace" string will be used to replace the query-matched search results.

If you want to target certain files, set "filesToInclude" to a glob pattern. DO NOT assume the "filesToInclude" and "filesToExclude" without being very sure that the user wants to target these files!

If the query is case sensitive, set "isCaseSensitive" to true.

By default, all string fields are the empty string, and all boolean fields are false. Only list the fields you want to change.

I want the JSON object of search parameters to be in this format:
[ARGS START]
\`\`\`json
{
	"query": ...,
	"replace": ...,
	"filesToInclude": ...,
	"filesToExclude": ...,
	"isRegex": ...,
	"isCaseSensitive": ...,
}
\`\`\`
[ARGS END]
`.trim(),responseProcessor:(r,n,i)=>new Py([{start:"[ARGS END]",stop:"[ARGS START]"}],i,o=>N9e(epe(o.join("")))),followUps:async(r,n)=>{let i=epe(n.response?.message??"");return P9e(i)},contextResolvers:[Rs,ws]});Sn.registerIntent(e)}_f.registerContribution(k9e);var Z7=Oe(jn()),tpe=require("process");var O9e=`
User: How do I revert a specific commit?
Assistant:
\`\`\`sh
git revert {commit_id}
\`\`\`

User: How do I print all files recursively within a directory?
Assistant:
\`\`\`sh
ls -lR
\`\`\`

User: How do I delete a directory?
Assistant:
\`\`\`pwsh
rmdir {dir_name}
\`\`\`

User: Print all files starting with "pre"
\`\`\`bash
find . -type f -name 'pre*'
\`\`\`
`.trim(),L9e=`
Think step by step:

1. Read the provided relevant workspace information (file names, project files in the project root) to understand the user's workspace.

2. Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
    - Prefer single line commands.
    - Omit an explanation unless the suggestion is complex, if an explanation is included then be concise.
    - Provide the command suggestions using the active terminal's shell type for the ${B9e()} operating system.
    - Only use a tool like python or perl when it is not possible with the shell.
    - When there is text that needs to be replaced in the suggestion, prefix the text with '{', suffix the text with '}' and use underscores instead of whitespace.
    - Say "I'm not quite sure how to do that." when you aren't confident in your explanation

3. At the end of the response, list all text that needs to be replaced with associated descriptions in the form of a markdown list
`.trim(),M9e={terminalSelection:{location:2,id:"explainTerminal",description:"Explain the terminal selection if it exists, otherwise explain what is happening in the terminal buffer",modelSampleQuestion:"Can you explain what is happening in the terminal selection",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. You are an expert at explaining code to anyone. Your task is to help the Developer understand what is happening in the terminal."},rules:`
Provide well thought out examples
Utilize provided context in examples
Match the style of provided context when using examples
Say "I'm not quite sure how to explain that." when you aren't confident in your explanation`.trim(),contextResolvers:[Wle,zle],commandInfo:{executeImmediately:!0}},terminalLastCommand:{location:2,id:"explainTerminalLastCommand",description:"Explain the command that was last run in the terminal",modelSampleQuestion:"Can you explain what is happening in the last terminal command",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. You are an expert at explaining code to anyone. Your task is to help the Developer understand what is happening in the terminal.",examples:'\nBelow you will find a set of examples of how to suggest to fix the command. Please follow these examples as closely as possible.\n```sh\necho "hello world"\n```'},rules:`
Provide well thought out examples
Utilize provided context in examples
Match the style of provided context when using examples
Say "I'm not quite sure how to explain that." when you aren't confident in your explanation
If the command can be fixed, make a suggestion wrapped in a markdown codefenced block`.trim(),contextResolvers:[$le]}},F9e={systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. Your task is to help the Developer craft a command to run on the command line.",examples:O9e},rules:L9e,contextResolvers:[Rs,Kle,Eue]},eU=class{constructor(e){this.accessor=e;this.defaultPanelPromptCrafter=new Ei(e,F9e,2,void 0)}async buildPrompt(e,r,n,i,o,s){let a;for(let c of Object.keys(n))if(a=M9e[c],a)break;return a?new Ei(this.accessor,a,2,void 0).buildPrompt(e,r,n,i,o,s):this.defaultPanelPromptCrafter.buildPrompt(e,r,n,i,o,s)}};async function U9e(t,e){let r=`@${Ml} Explain the suggested command`,n=!1,i=e.response?.message;if(i){let o=Ble(i);if(o.length===0)return[];o.length===1?r=`@${Ml} Explain this command:

${o[0].raw}`:(n=!0,r=`@${Ml} Explain these commands:${o.map(s=>`

${s.raw}`).join("")}`)}return[{message:r,title:n?"Explain the suggested commands":"Explain the suggested command"}]}function B9e(){switch(tpe.platform){case"win32":return"Windows";case"darwin":return"macOS";default:return"Linux"}}var aD=class{constructor(){this.locations=[2];this.id="terminal";this.description=Z7.t("Ask how to do something in the terminal");this.intentDetectionInput={sampleQuestion:"How do I view all files within a directory including sub-directories"};this.commandInfo={sampleRequest:Z7.t("How do I view all files within a directory including sub-directories")}}async invoke(e,r,n){let i=r.location,o=await Fr(e,i,this.id);return{intent:this,location:2,endpoint:o,promptCrafter:new eU(e),followUps:U9e}}};var rpe=Oe(jn());var cD=class{constructor(){this.id="tests";this.locations=[2,1];this.description=rpe.t("Generate unit tests for the selected code");this.intentDetectionInput={sampleQuestion:"Write a set of detailed unit test functions for the code above."};this.commandInfo=void 0}static{this.ID="tests"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to generate tests.");let i=r.location,o=await Fr(e,i,this.id);return VE(n.document)?new tU(this,o,i,e,n):new rU(this,o,i,e,n)}},tU=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.context=o;this.promptCrafter=new Ei(this.accessor,{queryPrefix:"Please generate tests for my code.",contextResolvers:[bR,Dle]},this.location,this.context);this.createReplyInterpreter=Wg.createFactory(this.accessor,this.promptCrafter,this.context);this.responseProcessor=(e,r,n)=>{let i=new nD;return(async()=>{let o=[ii.begin(this.context.language),ii.end(this.context.language),Tn.forLanguage(this.context.language)];for await(let s of H7(i.asyncIterable))s.kind===1&&o.some(a=>s.value.startsWith(a))||n.report({content:s.value})})().catch(o=>console.error(o)),i}}},rU=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.documentContext=o;this.createReplyInterpreter=Vf.createFactory(async(e,r)=>{let n=Rp(this.promptCrafter.selectionContextMetadata.contextInfo,e,this.documentContext.language);if(!n)return{type:"conversational",content:e};r.report({content:n.contentBeforeCode});let i=n.code,o=this.documentContext.document;if(this.existingTestFile){let c=await this.accessor.get(At).openTextDocument(this.existingTestFile),u=new p9;return u.set(this.existingTestFile,[$a.insert(new Tr(c.lineCount,0),i)]),{type:"workspaceEdit",workspaceEdit:u}}let s=Sle(o),a=Tf.joinPath(o.uri,`../${s}`).with({scheme:En.untitled}),l=new p9;return l.createFile(a,{ignoreIfExists:!0}),l.replace(a,new tt(0,0,0,0),i),{type:"workspaceEdit",workspaceEdit:l}});let s=this;this.promptCrafter=new class extends Ei{constructor(){super(i,{queryPrefix:"Please generate tests for my code.",contextResolvers:[rle]},n,o)}async buildPrompt(a,l,c,u,p,d){let f=new KE,m=f.onDidFindCandidate(g=>{s.existingTestFile=g}),h=await f.resolveContext(i,{endpoint:l,conversation:a,documentContext:o,message:void 0},d);if(m.dispose(),h){h.references?.forEach(v=>u.report({reference:v.anchor}));let g=[];for(let v of h.userMessages)g.push(new bi({message:v,type:"user"}));a=new Io([a.turns.slice(0,-1),g,a.turns.slice(-1)].flat())}return super.buildPrompt(a,l,c,u,p,d)}}}};var npe=Oe(jn());var q9e=`
[EXAMPLES START]
Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.

## Settings response
Question: How do I disable telemetry?

Response:
\`\`\`json
{
    "telemetry.telemetryLevel": "off"
}
\`\`\`
is a setting which can be used to disable telemetry.

## Command response
Question: How do I close all editors?

Response:
You can use the **Close All Editors** command to close all editors.

[COMMANDS START]
\`\`\`json
[
    { "command": "workbench.action.closeAllEditors" }
]
\`\`\`
[COMMANDS END]

## No such command
Question: How do I move the terminal to a new window?

Response:
There is no such command.

## Invalid Question
Question: How do I bake a potato?

Response:
Sorry this question isn't related to VS Code.

## Marketplace search
Question: How do I add PHP support?

Response:
You can use the **Search marketplace** command to search for extensions that add PHP support.

[COMMANDS START]
\`\`\`json
[
    { "command": "workbench.extensions.search", "args": "php" }
]
\`\`\`
[COMMANDS END]
`,nU="vscode";Sn.registerIntent(new Ds({location:2,id:nU,description:"Ask questions about VS Code",modelDescription:"Looks up information about VS Code via commands, settings, and documentation to accomplish the given editor-specific task.",modelSampleQuestion:"What is the command to open the integrated terminal?",systemPromptOptions:{examples:q9e,roleplay:"You are a VS Code assistant. Your job is to assist users in using VS Code by providing knowledge to accomplish their task. This knowledge should focus on settings and commands, but also includes documentation. Please do not guess a response and instead just respond with a polite apology if you are unsure."},commandInfo:{allowsEmptyArgs:!1,sampleRequest:npe.t("What is the command to open the integrated terminal?")},rules:`
You must respond with either a setting to set or a command to execute when applicable.
When referring to a command, you must use the command name in markdown bold syntax.
When referring to any commands, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] at the end of your response which lists all commands you referenced in your response in the order they were referenced in a JSON code block containing a JSON array.
If a command or setting references another command or setting, you must respond with the original setting or command and the referenced setting or command.
All referenced settings must be properly formatted in a JSON markdown code block to allow copying them into the user's settings.json file.
You must not respond with a setting that is not in a properly formatted JSON markdown code block.
If a setting and command will accomplish the same thing, you must suggest the command instead.
You must not suggest opening the settings editor.
You must not suggest pressing any keybindings or keyboard shortcuts to execute commands.
You must not suggest opening the command palette to execute commands.
You must not suggest commands or settings identifiers that do not exist.
If you believe the context given to you is incorrect or not relevant you may ignore it.
If an extension might help the user, you may suggest a search query for the extension marketplace. You must also include the command **Search marketplace** (\`workbench.extensions.search\`) with args set to the suggested query in the commands section at the end of your response. The query can also contain the tags "@popular", "@recommended", or "@featured" to filter the results.`.trim(),contextResolvers:[Due],followUps:Rue}));var sU=Oe(jn());var spe=require("path");var mT="_github.copilot.openRelativePath",hT="_github.copilot.openSymbolInFile";function ipe(t,e){return`[\`${t}\`](${ape(mT,[e.replace(/\\/g,"/")])} "${cpe(e)}")`}function oU(t,e){return`[\`${t}\`](${ape(hT,[e.replace(/\\/g,"/"),t])} "${cpe(e)}")`}function ape(t,e){return`command:${t}?${encodeURIComponent(JSON.stringify(e))}`}function cpe(t){return t.replace(/"/g,'\\"')}var iU=new Set;function lpe(t){return iU.add(t),{dispose:()=>iU.delete(t)}}var lD=class{constructor(e,r,n){this.references=e;this.workspaceFolders=r;this.fileSystem=n;this.additionalLinkifiers=Array.from(iU,i=>i(e,r,n))}async linkify(e,r){if(e=await J2(e,/\[`([^`\[\]]+?)`]\((\S+?\.\w+)\)/g,async(i,o,s)=>{let a=wt.joinPath(this.workspaceFolders[0],s);return await ope(this.fileSystem,a)?oU(o,s):"`"+o+"`"}),r?.isCancellationRequested)return"";let n=async(i,o,s)=>{if(/^\w+:/.test(s)||!this.workspaceFolders.length)return i;let a=wt.joinPath(this.workspaceFolders[0],s);if(await ope(this.fileSystem,a))return ipe(s,s);let l=Pc(a),c=this.references.map(u=>wt.isUri(u.anchor)?u.anchor:u.anchor.uri).find(u=>Pc(u)===l);if(c){let u=(0,spe.relative)(this.workspaceFolders[0].fsPath,c.fsPath);return ipe(s,u)}return o};if(e=await J2(e,/\[([^`\s]+)\]\((\1)\)/g,n),r?.isCancellationRequested)return"";e=await J2(e,/(?<!\[)(`([^`\s]+)`)(?!\])/g,n);for(let i of this.additionalLinkifiers)if(e=await i.linkify(e,r),r?.isCancellationRequested)return"";return e=e.replace(/\[([^\[\]]+)]\((\S+?\.\w+)\)/g,(i,o,s)=>/^\w+:/.test(s)?i:o),e}};async function ope(t,e){try{return await t.stat(e),!0}catch{return!1}}var H9e=`
Think step by step:

1. Read the provided relevant workspace information (code excerpts, file names, and symbols) to understand the user's workspace.

2. Consider how to answer the user's prompt based on the provided information and your specialized coding knowledge. Always assume that the user is asking about the code in their workspace instead of asking a general programming question. Prefer using variables, functions, types, and classes from the workspace over those from the standard library.

3. Generate a response that clearly and accurately answers the user's question. In your response, add fully qualified links for referenced symbols (example: [\`namespace.VariableName\`](path/to/file.ts)) and links for files (example: [path/to/file](path/to/file.ts)) so that the user can open them. If you do not have enough information to answer the question, respond with "I'm sorry, I can't answer that question with what I currently know about your workspace".

Remember that you MUST add links for all referenced symbols from the workspace and fully qualify the symbol name in the link, for example: [\`namespace.functionName\`](path/to/util.ts).
Remember that you MUST add links for all workspace files, for example: [path/to/file.js](path/to/file.js)
`.trim(),j9e=`
Question:
What file implements base64 encoding?

Response:
Base64 encoding is implemented in [src/base64.ts](src/base64.ts) as [\`encode\`](src/base64.ts) function.


Question:
How can I join strings with newlines?

Response:
You can use the [\`joinLines\`](src/utils/string.ts) function from [src/utils/string.ts](src/utils/string.ts) to join multiple strings with newlines.


Question:
How do I build this project?

Response:
To build this TypeScript project, run the \`build\` script in the [package.json](package.json) file:

\`\`\`sh
npm run build
\`\`\`


Question:
How do I read a file?

Response:
To read a file, you can use a [\`FileReader\`](src/fs/fileReader.ts) class from [src/fs/fileReader.ts](src/fs/fileReader.ts).
`.trim(),Jg="workspace",G9e=new Ds({location:2,id:Jg,description:sU.t("Ask a question about the files in your current workspace"),modelSampleQuestion:"How do I build this project?",commandInfo:{allowsEmptyArgs:!1,defaultEnablement:!0,sampleRequest:sU.t("How do I build this project?")},systemPromptOptions:{roleplay:"You are a software engineer with expert knowledge of the codebase the user has open in their workspace.",examples:j9e},rules:H9e,contextResolvers:[Rs,ws,MR],responseProcessor:(t,e,r,n,i)=>new aU(t,e,r,i)});Sn.registerIntent(G9e);var aU=class{constructor(e,r,n,i){this._appliedText="";this._isInCodeBlock=!1;this._p=Promise.resolve("");let o=e.get(Mr),s=e.get(At);this._appliesTextPromise=new Nc,i.onCancellationRequested(()=>this._appliesTextPromise.cancel());let a=r.references,l=new lD(a,s.getWorkspaceFolders(),o);this._deltaCallback=new Dp(c=>{this._p=this._p.then(async()=>{c.startsWith("```")&&(this._isInCodeBlock=!this._isInCodeBlock),this._isInCodeBlock||(c=await l.linkify(c,i));let u=new kc(c);return u.isTrusted={enabledCommands:[mT,hT]},this._appliedText+=c,n.report({markdownContent:u}),this._appliedText})})}get appliedText(){return this._appliesTextPromise.p}apply(e){this._deltaCallback.apply(e)}finish(){this._p.then(e=>this._appliesTextPromise.complete(e),e=>this._appliesTextPromise.error(e))}};Sn.registerIntent(new Ry);Sn.registerIntent(new Yg);Sn.registerIntent(new Ay);Sn.registerIntent(new cD);Sn.registerIntent(new tD);Sn.registerIntent(new ZR);Sn.registerIntent(new aD);Sn.registerIntent(Jl.Instance);Sn.registerIntent(new eD);var Zg=class{};function ppe(t){let e=t.get(jo),r=t.get(Ge);e.registerStaticFilters(V9e(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>r.getConfig(Qe.DebugOverrideEngine))}function V9e(t){let e=z9e(t),r=t.get(Zg).addEditorSpecificFilters();return{...e,...r}}function z9e(t){let e=t.get(jt),r=e.getEditorInfo();return{"X-VSCode-AppVersion":upe(r.version),"X-MSEdge-ClientId":e.machineId,"X-VSCode-ExtensionName":e.getName(),"X-VSCode-ExtensionVersion":upe(e.getVersion()),"X-VSCode-TargetPopulation":"public"}}function upe(t){return t.split("-")[0]}var My=Oe(hde(),1),ARt={ALPN_HTTP2:My.default.ALPN_HTTP2,ALPN_HTTP2C:My.default.ALPN_HTTP2C,ALPN_HTTP1_1:My.default.ALPN_HTTP1_1,ALPN_HTTP1_0:My.default.ALPN_HTTP1_0},{fetch:RRt,context:gde,reset:DRt,noCache:PRt,h1:NRt,keepAlive:kRt,h1NoCache:ORt,keepAliveNoCache:LRt,cacheStats:MRt,clearCache:FRt,offPush:URt,onPush:BRt,createUrl:qRt,timeoutSignal:HRt,Body:jRt,Headers:GRt,Request:VRt,Response:zRt,AbortController:vde,AbortError:_de,AbortSignal:$Rt,FetchBaseError:WRt,FetchError:MU,ALPN_HTTP2:KRt,ALPN_HTTP2C:YRt,ALPN_HTTP1_1:QRt,ALPN_HTTP1_0:XRt}=My.default;var Gme=Oe(require("tls"));var qme=Oe(require("fs"));var Kf=class{constructor(){this.cache=new Map}get(e){return this.cache.get(e)}set(e,r){this.cache.set(e,r)}};var Yf=class{async loadCaCerts(){}};var os=class{},Hme=(t,e=process.platform)=>new GB(t.get(Ho),eGe(e,t),new XB),GB=class extends os{constructor(r,n,i){super();this.realReader=n;this.noopReader=i;this.delegate=n,r.on("onCopilotToken",o=>{this.delegate=o.getTokenValue("ssc")==="1"?this.realReader:this.noopReader})}getAllRootCAs(){return this.delegate.getAllRootCAs()}},eGe=(t,e)=>{let r=e.get(Kf).get(t);if(r)return r;let n=tGe(t,e),i=new $B(n),o=new zB(i),s=new VB(e,o);return e.get(Kf).set(t,s),s},tGe=(t,e)=>{switch(t){case"linux":return new WB;case"darwin":return new KB;case"win32":return new YB(e);default:return new QB}},VB=class extends os{constructor(r,n){super();this.accessor=r;this.delegate=n}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return this.accessor.get(Le).getLogger("certificates").warn(`Failed to read root certificates: ${r}`),[]}}},zB=class extends os{constructor(r){super();this.delegate=r}async getAllRootCAs(){return this.certificates||(this.certificates=await this.delegate.getAllRootCAs()),this.certificates}},$B=class extends os{constructor(r){super();this.delegate=r}async getAllRootCAs(){let r=await this.delegate.getAllRootCAs(),n=process.env.NODE_EXTRA_CA_CERTS;if(!n)return r;let i=await jme(n);return r.concat(i)}},WB=class extends os{async getAllRootCAs(){let e=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let n=await jme(r);e=e.concat(n)}return e}},KB=class extends os{async getAllRootCAs(){let e=Bme();return e.all(e.der2.pem).filter(r=>r!==void 0)}},YB=class extends os{constructor(r){super();this.accessor=r}async getAllRootCAs(){return await this.accessor.get(Yf).loadCaCerts()||[]}},QB=class extends os{async getAllRootCAs(){throw new Error("No certificate reader available for unsupported platform")}},XB=class extends os{async getAllRootCAs(){return[]}};async function jme(t){try{let n=(await qme.promises.readFile(t,{encoding:"utf8"})).split(/(?=-----BEGIN CERTIFICATE-----)/g).filter(o=>o.length>0),i=new Set(n);return Array.from(i)}catch(e){if(e?.code!=="ENOENT")throw e}return[]}var sP=class{constructor(e){this._certificateReader=e.get(os)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async applyToRequestOptions(e){let r=await this._certificateReader.getAllRootCAs(),n={_vscodeAdditionalCaCerts:r};e.secureContext=Gme.createSecureContext(n),e.ca=r,e.cert=r,r.map(i=>{e.secureContext.context.addCACert(i)})}};var Vme=Oe(require("http"));var am=class{async loadKerberos(){}};var rGe=407,cm=class{},qp=class extends Error{constructor(r,n,i){super(r);this.cause=n;this.responseStatus=i}};function zme(t){return new JB(t,new ZB(t))}var JB=class extends cm{constructor(r,n,i=process.platform){super();this.accessor=r;this.delegate=n;this.platform=i;this.successfullyAuthorized=new w0(20);this.logger=r.get(Le).getLogger("proxy-socket-factory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(this.logger.debug("Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof qp&&i.responseStatus===rGe){this.logger.debug("Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return this.logger.debug("Proxy authorization successful, caching result"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(this.logger.debug("Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(this.logger.debug("Proxy authorization successful, received token"),i)return this.logger.debug("Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){this.logger.debug("Loading kerberos module");let n=await nGe(this.accessor);if(!n){this.logger.debug("Could not load kerberos module");return}let i=this.computeSpn(r);this.logger.debug("Initializing kerberos client using spn",i);let o=await n.initializeClient(i);this.logger.debug("Perform client side kerberos step");let s=await o.step("");return this.logger.debug("Received kerberos server response"),s}computeSpn(r){let n=this.accessor.get(Ge),i=n.isDefaultSettingOverwritten(Qe.KerberosServicePrincipal)?n.getConfig(Qe.KerberosServicePrincipal):r.kerberosServicePrincipal;if(i)return this.logger.debug("Using configured kerberos spn",i),i;let o=this.platform==="win32"?`HTTP/${r.host}`:`HTTP@${r.host}`;return this.logger.debug("Using default kerberos spn",o),o}getProxyCacheKey(r){return r.host+":"+r.port}},ZB=class extends cm{constructor(r){super();this.logger=r.get(Le).getLogger("proxy-socket-factory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,s)=>{this.logger.debug("Attempting to establish connection to proxy");let a=Vme.request(i);a.useChunkedEncodingByDefault=!1,a.once("connect",(l,c,u)=>{this.logger.debug("Socket Connect returned status code",l.statusCode),a.removeAllListeners(),c.removeAllListeners(),l.statusCode!==200?(c.destroy(),s(new qp("tunneling socket could not be established",void 0,l.statusCode))):u.length>0?(c.destroy(),s(new qp("got illegal response body from proxy"))):(this.logger.debug("Successfully established tunneling connection to proxy"),o(c))}),a.once("error",l=>{this.logger.debug("Proxy socket connection error",l.message),a.removeAllListeners(),s(new qp("tunneling socket could not be established",l))}),a.on("timeout",()=>{this.logger.debug("Proxy socket connection timeout"),s(new qp(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.host}:${i.port}`))}),a.end()})}createConnectRequestOptions(r,n){let i={...n,method:"CONNECT",path:r.host+":"+r.port,agent:!1,headers:{host:r.host+":"+r.port,"Proxy-Connection":"keep-alive"},timeout:r.timeout};return r.localAddress&&(i.localAddress=r.localAddress),this.configureProxyAuthorization(i,r),i}configureProxyAuthorization(r,n){r.headers["Proxy-Authorization"]=[],r.proxyAuth&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(r.proxyAuth).toString("base64")),n.headers&&n.headers["Proxy-Authorization"]&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}};async function nGe(t){try{return t.get(am).loadKerberos()}catch{return}}var Zy=class extends Nr{constructor(r){super();this.accessor=r;this.createSocketFactory=(r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);try{return await this.proxySocketFactory.createSocket(i,o)}catch(s){throw s instanceof qp&&s.cause?new Error(`${s.message}, cause=${s.cause.message}`):new Error(s.message)}};this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new sP(r),this.proxySocketFactory=r.get(cm)}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.accessor)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.accessor)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(r){let n=r.get(jt);return gde({userAgent:`GitHubCopilotChat/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(r,n){let i={...n,body:n.body?n.body:n.json,signal:n.signal};await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(o);let s=await this.fetchApi.fetch(r,i);return new ty(s.status,s.statusText,s.headers,()=>s.text(),()=>s.json(),async()=>s.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new vde}isAbortError(r){return r instanceof _de}isDNSLookupFailedError(r){return r instanceof MU&&r.code==="ENOTFOUND"}isFetcherError(r){return r instanceof MU}};var iGe=Oe(require("http")),oGe=Oe(require("https"));var e1=class extends Nr{constructor(r){super();this._runtimeInfoService=r}fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._runtimeInfoService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}_fetch(r,n,i,o,s){return new Promise((a,l)=>{let u=(r.startsWith("https:")?oGe:iGe).request(r,{method:n,headers:i},p=>{if(s.aborted){p.destroy(),u.destroy(),l(eq(s));return}let d=new tq(u,p,s);a(new ty(p.statusCode||0,p.statusMessage||"",d.headers,async()=>d.text(),async()=>d.json(),async()=>d.body()))});u.setTimeout(60*1e3),u.on("error",l),o&&u.write(o),u.end()})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return sGe(r)}isDNSLookupFailedError(r){return r&&r.code==="ENOTFOUND"}isFetcherError(r){return r&&["EADDRINUSE","ECONNREFUSED","ECONNRESET","ENOTFOUND","EPIPE","ETIMEDOUT"].includes(r.code)}set proxySettings(r){}get proxySettings(){}};function eq(t){return t.reason}function sGe(t){return t&&t.name==="AbortError"}var tq=class{constructor(e,r,n){this.req=e;this.res=r;this.signal=n;this.headers=new class{get(i){let o=r.headers[i];return Array.isArray(o)?o[0]:o??null}[Symbol.iterator](){let i=Object.keys(r.headers),o=0;return{next:()=>{if(o>=i.length)return{done:!0,value:void 0};let s=i[o++];return{done:!1,value:[s,this.get(s)]}}}}}}text(){return new Promise((e,r)=>{let n=[];this.res.on("data",i=>n.push(i)),this.res.on("end",()=>e(Buffer.concat(n).toString())),this.res.on("error",r),this.signal.addEventListener("abort",()=>{this.res.destroy(),this.req.destroy(),r(eq(this.signal))})})}async json(){let e=await this.text();return JSON.parse(e)}async body(){return this.signal.addEventListener("abort",()=>{this.res.emit("error",eq(this.signal)),this.res.destroy(),this.req.destroy()}),this.res}};var aP=class{sendInternalTelemetryEvent(e,r,n){}postEvent(e,r){}setSharedProperty(e,r){}sendTelemetryErrorEvent(e,r,n){}sendTelemetryEvent(e,r,n){}};var cP=Oe(require("fs"));var nq=`${process.env.HOME||process.env.USERPROFILE}/.copilot-testing-gh-token`,rq;function $me(){return rq||(rq=aGe()),rq}var aGe=()=>{if(process.env.GITHUB_PAT)return new ry(process.env.GITHUB_PAT);let t=cGe();if(t)return new j2({token:t.trim()});throw new Error(`Tests: either GITHUB_PAT must be set, or there must be a GitHub token from an app with access to Copilot in ${nq}. Run "npm run get_token" to get one.`)};function cGe(){if(cP.existsSync(nq))return cP.readFileSync(nq).toString()}var lP=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var uP=Oe(require("vscode"));function Wme(t){return typeof t=="string"?t:JSON.stringify(t)}var pP=class extends Ge{constructor(){super();this.config=uP.workspace.getConfiguration(Dd),uP.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(Dd)&&(this.config=uP.workspace.getConfiguration(Dd))})}getConfig(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0?this.config[r.firstPart][r.secondPart]:r.defaultValue}isDefaultSettingOverwritten(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0}dumpConfig(){let r={};try{let n=Ys.contributes.configuration?.properties??{};for(let i in n){let s=i.replace(`${Dd}.`,"").split(".").reduce((a,l)=>a[l],this.config);typeof s=="object"&&s!==null?Object.keys(s).filter(a=>a!=="secret_key").forEach(a=>r[`${i}.${a}`]=Wme(s[a])):r[i]=Wme(s)}}catch(n){console.error(`Failed to retrieve configuration properties ${n}`)}return r}};var sq=require("vscode"),Kme=[];function Yme(){return Kme.join(`
`)}function lGe(t,e){t.push(uGe(e)),t.length>40&&t.shift()}var iq=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(sq.debug.activeDebugSession!==this.session)return;let r=this.extractOutput(e);r&&lGe(Kme,r)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,r){}};function uGe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function Qme(){return[sq.debug.registerDebugAdapterTrackerFactory("*",new oq)]}var oq=class{createDebugAdapterTracker(e){return new iq(e)}};var dP=class extends Vl{constructor(){super();for(let e of Qme())this._register(e)}get consoleOutput(){return Yme()}};var aq=require("crypto");var t1=class{constructor(e){this.accessor=e}async computeEmbeddings(e,r){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(Ya).getEmbeddingsEndpointInfo());let n=this._embeddingEndpoint.maxBatchSize,i=this._embeddingEndpoint.modelMaxTokenWindow;return this.fetchResponseWithBatches(e,r,i,n)}async fetchResponseWithBatches(e,r,n,i){let o=[],s=this.accessor.get(tn),a=[],l=0;for(let c of e){let u=s.tokenLength(c);if(l+u>=n||a.length>=i){let p=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,(0,aq.randomUUID)(),a,r);if(p.type==="failed")return;o.push(...p.embeddings),a=[],l=0}a.push(c),l+=u}if(a.length>0){let c=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,(0,aq.randomUUID)(),a,r);if(c.type==="failed")return;o.push(...c.embeddings)}return o.length===0?void 0:o}async rawEmbeddingsFetchWithTelemetry(e,r,n,i){let o=Date.now(),s=this.accessor.get(wr),a=await this.rawEmbeddingsFetch(e,r,n,i);return a.type==="failed"?(s.sendTelemetryEvent("embedding.error",{type:a.type,reason:a.reason}),a):(s.sendTelemetryEvent("embedding.success",{},{batchSize:n.length,inputTokenCount:n.reduce((l,c)=>l+this.accessor.get(tn).tokenLength(c),0),timeToComplete:Date.now()-o}),a)}async rawEmbeddingsFetch(e,r,n,i){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(Ya).getEmbeddingsEndpointInfo());try{let o=e.get(Lt),s=o instanceof ry?await o.getEmbeddingsToken(e):await o.getCopilotToken(e),a={input:n,model:"copilot-text-embedding-ada-002"};this._embeddingEndpoint.interceptBody?.(a);let l=await hf(e,this._embeddingEndpoint,s.token,"copilot-panel",r,a,i),c=await l.json();return l.status===200&&c.data?{type:"success",embeddings:c.data.map(u=>u.embedding)}:{type:"failed",reason:c.error}}catch(o){let s=o?.message??"Unknown error";return s.match(/Unexpected.*JSON/i)&&(s="timeout"),{type:"failed",reason:s}}}};var fv=Oe(require("vscode"));var fP=class extends pa{get language(){return fv.env.language}getAllExtensions(){return fv.extensions.all}async getAllCommands(){return fv.commands.executeCommand("_getAllCommands")}async getAllSettings(){return fv.commands.executeCommand("_getAllSettings")}};var zc=Oe(require("vscode"));var mP=class extends Mr{async stat(e){return zc.workspace.fs.stat(e)}async readDirectory(e){return zc.workspace.fs.readDirectory(e)}async createDirectory(e){return zc.workspace.fs.createDirectory(e)}async readFile(e){return zc.workspace.fs.readFile(e)}async writeFile(e,r){return zc.workspace.fs.writeFile(e,r)}async delete(e,r){return zc.workspace.fs.delete(e,r)}async rename(e,r,n){return zc.workspace.fs.rename(e,r,n)}async copy(e,r,n){return zc.workspace.fs.copy(e,r,n)}isWritableFileSystem(e){return!!zc.workspace.fs.isWritableFileSystem(e)}createFileSystemWatcher(e){return zc.workspace.createFileSystemWatcher(e)}};var lm=class{};var mv=Oe(require("vscode"));var hP=class extends lm{constructor(r){super();this.accessor=r;this._onDidChange=new mv.EventEmitter;this.onDidChange=this._onDidChange.event;this._disposables=[];this._logger=r.get(Le).getLogger("gitExtensionService"),this._logger.info("Initializing Git extension service."),this._disposables.push(...this._initializeExtensionApi())}getExtensionApi(){return this._api}_initializeExtensionApi(){let r=[],n=mv.extensions.getExtension("vscode.git"),i=async()=>{let o=await n.activate();this._logger.info("Successfully activated the vscode.git extension.");let s=a=>{this._logger.info(`Enablement state of the vscode.git extension: ${a}.`),a&&(this._api=o.getAPI(1),this._onDidChange.fire(),this._logger.info("Successfully registered Git commit message provider."))};r.push(o.onDidChangeEnablement(s)),s(o.enabled)};if(n)i();else{this._logger.info("vscode.git extension is not yet activated.");let o=mv.extensions.onDidChange(()=>{!n&&mv.extensions.getExtension("vscode.git")&&(n=mv.extensions.getExtension("vscode.git"),i(),o.dispose())})}return r}};var UT=Oe(require("vscode"));var gP=class extends Ka{constructor(r){super();this.tabsAndEditors=r}get repositories(){let r=UT.extensions.getExtension("vscode.git");if(!r)return;let n=UT.workspace.workspaceFolders;if(!n)return;let i=r.exports.getAPI(1);return n.map(o=>{let s=i.getRepository(o.uri);if(s)return{headBranchName:s.state.HEAD?.name,upstreamBranchName:s.state.HEAD?.upstream?.name,isRebasing:s.state.rebaseCommit!==null,remotes:s.state.remotes.map(a=>a.name),remoteFetchUrls:s.state.remotes.map(a=>a.fetchUrl)}})}get currentRepository(){let r=UT.extensions.getExtension("vscode.git");if(r){let n=r.exports.getAPI(1),i=this.selectRepository(n);return i?{headBranchName:i.state.HEAD?.name,upstreamBranchName:i.state.HEAD?.upstream?.name,isRebasing:i.state.rebaseCommit!==null,remotes:i.state.remotes.map(o=>o.name),remoteFetchUrls:i.state.remotes.map(o=>o.fetchUrl)}:void 0}}selectRepository(r){if(r.repositories.length===0)return;if(r.repositories.length===1)return r.repositories[0];let n=this.tabsAndEditors.activeTextEditor;return r.repositories.filter(i=>n?.document.uri.fsPath.startsWith(i.rootUri.fsPath))[0]}};var hv=require("vscode");function Xme(t){if(typeof t!="string")throw new TypeError("Argument must be a string.");if(!t)return t;let e=t.startsWith("!"),r=e?t.slice(1):t,n=r,i=!1;switch(r[0]==="/"&&(i=!0,n=r.slice(1)),n[0]){case"*":r[1]!=="*"&&(n="**/"+n);break;default:if((!i&&!n.includes("/")||n.endsWith("/"))&&(n="**/"+n),n.endsWith("*")||n.endsWith("?"))break;/\.[a-z\d_-]+$/.test(n)||(n.endsWith("/")||(n+="/"),n+="**")}return e?"!"+n:n}var lhe=Oe(ahe()),$c=require("path"),BT=class{constructor(){this._ignoreMap=new Map;this._ignoreCache=new Map;this._searchRankCache=null}setIgnoreFile(e,r){this._ignoreMap.set(e.fsPath,{ignore:(0,lhe.default)().add(r),patterns:r.split(/\r?\n/).filter(Boolean).map(Xme)}),this._searchRankCache=null,this._ignoreCache.clear()}removeIgnoreFile(e){this._ignoreMap.delete(e.fsPath),this._searchRankCache=null,this._ignoreCache.clear()}removeWorkspace(e){let r=0;for(let n of this._ignoreMap.keys())che(e.fsPath,n)&&(this._ignoreMap.delete(n),r+=1);r>0&&(this._searchRankCache=null,this._ignoreCache.clear())}asMinimatchPatterns(){return[...this._ignoreMap.values()].flatMap(e=>e.patterns)}isIgnored(e){if(this._ignoreMap.size===0)return!1;let r=e.fsPath;if(this._ignoreCache.has(r))return this._ignoreCache.get(r);let n=0,i={ignored:!1,unignored:!1};try{let o=this._searchRank;for(let s of o){n+=1;let a=(0,$c.dirname)(s),l=(0,$c.relative)(a,r);if(!l.startsWith("..")&&a!==r&&che(a,r)){let c=this._ignoreMap.get(s);if(!c)throw new Error(`No ignore patterns found for ${s}`);if(i=c.ignore.test(l),i.ignored||i.unignored)break}}return this._ignoreCache.set(r,i.ignored),i.ignored}catch{return!1}}get _searchRank(){if(this._searchRankCache!==null)return this._searchRankCache;let e={},r=n=>n.split($c.sep).length;return this._searchRankCache=[...this._ignoreMap.keys()].sort((n,i)=>(e[i]||=r(i))-(e[n]||=r(n)))}};function che(t,e){return t===e?!0:(t.charAt(t.length-1)!==$c.sep&&(t+=$c.sep),(0,$c.normalize)(e).startsWith((0,$c.normalize)(t)))}var _P=".copilotignore",yP=".gitignore",xP=class{constructor(e){this.accessor=e;this._gitIgnoreFiles=new BT;this._copilotIgnoreFiles=new BT;this._disposables=[];this.fs=e.get(Mr)}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}isIgnored(e,r){let n=this._gitIgnoreFiles.isIgnored(e),i=this._copilotIgnoreFiles.isIgnored(e);return!r||r.includeGitIgnore&&r.includeCopilotIgnore?n||i:r.includeGitIgnore&&!r.includeCopilotIgnore?n:!r.includeGitIgnore&&r.includeCopilotIgnore?i:!1}asMinimatchPattern(e){let r=[];e.includeCopilotIgnore&&r.push(this._copilotIgnoreFiles.asMinimatchPatterns()),e.includeGitIgnore&&r.push(this._gitIgnoreFiles.asMinimatchPatterns());let n=r.flat();if(n.length!==0)return n.length===1?n[0]:`{${n.join(",")}}`}init(){return this._init??=(async()=>{for(let e of this.accessor.get(At).getWorkspaceFolders())await this.addWorkspace(e)})(),this._init}trackIgnoreFile(e,r){e.path.endsWith(yP)?this._gitIgnoreFiles.setIgnoreFile(e,r):e.path.endsWith(_P)&&this._copilotIgnoreFiles.setIgnoreFile(e,r)}removeIgnoreFile(e){e.path.endsWith(yP)?this._gitIgnoreFiles.removeIgnoreFile(e):e.path.endsWith(_P)&&this._copilotIgnoreFiles.removeIgnoreFile(e)}removeWorkspace(e){this._gitIgnoreFiles.removeWorkspace(e),this._copilotIgnoreFiles.removeWorkspace(e)}isIgnoreFile(e){return e.path.endsWith(yP)?!0:!!e.path.endsWith(_P)}async addWorkspace(e){let r=[];if(e.scheme!=="file")return;let n=this.accessor.get(es);r=r.concat(await n.findFiles(new Bg(e,`**/${_P}`))),r=r.concat(await n.findFiles(new Bg(e,`**/${yP}`)));for(let i of r){let o=(await this.fs.readFile(i)).toString();this.trackIgnoreFile(i,o)}}};var bP=class extends xP{constructor(e){super(e),this.installListeners()}installListeners(){this._disposables.push(hv.workspace.onDidChangeWorkspaceFolders(e=>{for(let r of e.removed)this.removeWorkspace(r.uri);for(let r of e.added)this.addWorkspace(r.uri)})),this._disposables.push(hv.workspace.onDidSaveTextDocument(async e=>{if(this.isIgnoreFile(e.uri)){let r=(await hv.workspace.fs.readFile(e.uri)).toString();this.trackIgnoreFile(e.uri,r)}}),hv.workspace.onDidDeleteFiles(e=>{for(let r of e.files)this.removeIgnoreFile(r)}),hv.workspace.onDidRenameFiles(async e=>{for(let r of e.files)if(this.isIgnoreFile(r.newUri)){let n=(await hv.workspace.fs.readFile(r.newUri)).toString();this.removeIgnoreFile(r.oldUri),this.trackIgnoreFile(r.newUri,n)}}))}};var fq=Oe(require("vscode"));var EP=class extends Ao{constructor(){super(...arguments);this.onDidChangeDiagnostics=fq.languages.onDidChangeDiagnostics}getDiagnostics(r){return fq.languages.getDiagnostics(r)}};var qT=Oe(require("vscode"));var TP=class extends ca{async getDefinitions(e,r){return await qT.commands.executeCommand("vscode.executeDefinitionProvider",e,r)}async getImplementations(e,r){return await qT.commands.executeCommand("vscode.executeImplementationProvider",e,r)}async getReferences(e,r){return await qT.commands.executeCommand("vscode.executeReferenceProvider",e,r)}async getWorkspaceSymbols(e){return await qT.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}};var phe=Oe(require("fs")),dhe=Oe(require("vscode"));var jp=class{constructor(e){this._variableEnablements=e.get(Ge).getConfigMixedWithDefaults(Qe.ConversationVariablesEnablements)}isVariableEnabled(e){return typeof this._variableEnablements[e.name]=="boolean"?this._variableEnablements[e.name]:typeof e.defaultEnablement=="boolean"?e.defaultEnablement:!!this._variableEnablements["*"]}getVariables(){let e=[];for(let r of Rt.contextResolvers)r.variableInfo&&this.isVariableEnabled(r.variableInfo)&&e.push({name:r.variableInfo.name,kind:r.kind,description:r.variableInfo.description,resolve:r.resolveContext.bind(r)});return e}getVariable(e){return this.getVariables().find(r=>r.name===e)}};var SP=class extends Xl{constructor(r){super();this.accessor=r;this._chatVariableService=r.get(jp)}async resolveVariablesInPrompt(r,n){let i=/(^|\s)\[([^\]]+)\]\(values:([^\)]+)\)/ig,o=[];for(;;){let s=i.exec(r);if(!s)return{parts:o,message:r};let[a,l,c,u]=s,p=n[u];if(!p||p.length===0)continue;let d=u.replace(/^#/,""),f,m=p.find(h=>h.level===3)??p[0];if(m.value instanceof Tf){let h=m.value;m.value=fa("",(await phe.promises.readFile(m.value.fsPath)).toString()),f=async()=>uhe(d)+fa("",await this.shortenUriVariableValue(h))}if(m.kind==="github.docset")r=r.slice(0,s.index)+l+m.value+r.slice(s.index+a.length);else{let h=this._chatVariableService.getVariable(u);o.push({kind:h?.kind??"variable",userMessages:[uhe(d)+m.value],getShorterMessage:f}),r=r.slice(0,s.index)+l+`[${c}](#${d}-context)`+r.slice(s.index+a.length)}}}async shortenUriVariableValue(r){let n=await dhe.workspace.openTextDocument(r),i=n.getText(),o=await qE(this.accessor,n,1e3),s=n.languageId==="typescript"?";":"";return AGe(i,o,s)}};function uhe(t){return`# ${t.toUpperCase()} CONTEXT
`}function AGe(t,e,r){let n=0,i="";for(let o of e)n<o.startIndex&&(i+=t.substring(n,o.startIndex),i+=r,n=o.endIndex);return i}var mq=Oe(require("vscode"));var CP=class extends es{findTextInFiles(e,r,n,i){return Promise.resolve(mq.workspace.findTextInFiles(e,r,o=>n.report(o),i))}findFiles(e,r,n,i){return mq.workspace.findFiles(e,r,n,i)}};var Do=Oe(require("vscode"));var IP=class extends Rr{constructor(){super();this._store=new fl;this._tabGroupsUseInfo=new Map;this._tabClock=0;this.onDidChangeActiveTextEditor=Do.window.onDidChangeActiveTextEditor;this.onDidChangeTabs=Do.window.tabGroups.onDidChangeTabs;this._store.add(Do.window.tabGroups.onDidChangeTabGroups(r=>{r.closed.forEach(n=>this._tabGroupsUseInfo.delete(n)),this._tabGroupsUseInfo.set(Do.window.tabGroups.activeTabGroup,this._tabClock++)}))}dispose(){this._store.dispose()}get activeTextEditor(){let r=Do.window.activeTextEditor;if(r&&r.document.uri.scheme!=="output")return r;let n=new Xi;Do.window.visibleTextEditors.forEach(o=>n.set(o.document.uri,o));let i=[...this._tabGroupsUseInfo];i.sort((o,s)=>s[1]-o[1]);for(let[o]of i)if(o.activeTab){let s=this._asTabInfo(o.activeTab);if(s.uri&&n.has(s.uri))return n.get(s.uri)}}get tabs(){return Do.window.tabGroups.all.flatMap(r=>r.tabs).map(this._asTabInfo,this)}_asTabInfo(r){let n;return r.input instanceof Do.TabInputText||r.input instanceof Do.TabInputNotebook?n=r.input.uri:(r.input instanceof Do.TabInputTextDiff||r.input instanceof Do.TabInputNotebookDiff)&&(n=r.input.modified),{tab:r,uri:n}}};var mhe=require("path"),hhe=require("process"),um=require("vscode"),wP=new Map,gq=new Map;function ghe(){let t=um.window.activeTerminal;return t===void 0?"":wP.get(t)?.join(`
`)||""}function vhe(){let t=um.window.activeTerminal;if(t!==void 0)return gq.get(t)?.at(-1)}function _he(){try{return um.window.activeTerminal?.selection??""}catch{return""}}var hq;function yhe(){let t=um.window.activeTerminal;if(t&&"shellPath"in t.creationOptions){let e=t.creationOptions.shellPath;if(e){let r,n=(0,mhe.basename)(e);if(n==="bash.exe")r="Git Bash";else{let i=n.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":r="powershell";case"":break;default:r=i}}if(r)return hq=r,r}}return hq||(hhe.platform==="win32"?"powershell":"bash")}function fhe(t,e){t.push(e),t.length>40&&t.shift()}function RGe(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function xhe(){return[um.window.onDidWriteTerminalData(t=>{let e=wP.get(t.terminal);e||(e=[],wP.set(t.terminal,e)),fhe(e,RGe(t.data))}),um.window.onDidExecuteTerminalCommand(t=>{let e=gq.get(t.terminal);e||(e=[],gq.set(t.terminal,e)),fhe(e,t)}),um.window.onDidCloseTerminal(t=>{wP.delete(t)})]}var AP=class extends Ro{constructor(){super();for(let e of xhe())this._register(e)}get terminalBuffer(){return ghe()}get terminalLastCommand(){return vhe()}get terminalSelection(){return _he()}get terminalShellType(){return yhe()}};var pm=require("vscode");var RP=class extends At{constructor(r){super();this.onDidOpenTextDocument=pm.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=pm.workspace.onDidChangeTextDocument;this.onDidCloseTextDocument=pm.workspace.onDidCloseTextDocument}get textDocuments(){return pm.workspace.textDocuments}async openTextDocument(r){return await pm.workspace.openTextDocument(r)}get notebookDocuments(){return pm.workspace.notebookDocuments}getWorkspaceFolders(){return pm.workspace.workspaceFolders?.map(r=>r.uri)??[]}};var vv=require("vscode");var HT=require("vscode");var PGe=["read:user"],bhe=["user:email"],NGe=["read:user","user:email","repo","workflow"],vq="You are not signed in to GitHub. Please sign in to use Copilot.";function _q(t){return t.getConfig(Qe.AuthProvider)==="github-enterprise"?"github-enterprise":"github"}async function Ehe(t,e){let r=t.provider,n=_q(e.get(Ge));if(r.id===n){let i=e.get(Ep);if(await HT.authentication.getSession(n,bhe,{silent:!0}))return i.forceNormal(),await e.get(Lt).getCopilotToken(e,!0);e.get(Lt).resetCopilotToken(e),i.setWarning(vq)}}async function gv(t){let e=_q(t);return await HT.authentication.getSession(e,bhe,{silent:!0})??await HT.authentication.getSession(e,PGe,{silent:!0})}async function The(t,e){let r=_q(t);return await HT.authentication.getSession(r,NGe,e)}var She=!1;async function kGe(t){let e=t.get(Le).getLogger("auth"),r=await gv(t.get(Ge));if(!r)return e.info("GitHub login failed"),t.get(dt).sendErrorTelemetry("auth.github_login_failed"),{kind:"failure",reason:"GitHubLoginFailed"};e.info(`Logged in as ${r.account.label}`);let n=await H2(t,{token:r.accessToken});return n.kind==="success"&&e.info(`Got Copilot token for ${r.account.label}`),n}var DP=class{async showWarningMessage(e,...r){return{title:await vv.window.showWarningMessage(e,...r.map(i=>i.title))}}},jT=class extends Error{},GT=class extends Error{},VT=class extends Error{};async function OGe(t){let e=await kGe(t);if(e.kind==="failure"&&e.reason==="NotAuthorized"){let r=e.message;if(r?.includes("No access to GitHub Copilot found"))throw new jT(r??"User not authorized");if(r?.includes("Your subscription has ended"))throw new GT(r)}if(e.kind==="failure"){let r=e.message;if(r?.includes("Please contact your enterprise admin to enable your managed account for Copilot for Business"))throw new VT(r)}if(e.kind==="failure"&&e.reason==="HTTP401"){let r="Your GitHub token is invalid. Please sign out from your GitHub account using the VS Code accounts menu and try again.";throw She||(She=!0,vv.window.showWarningMessage(r)),Error(r)}if(e.kind==="failure"&&e.reason==="GitHubLoginFailed")throw Error("GitHubLoginFailed");if(e.kind==="failure")throw Error("Failed to get copilot token");return e}var PP=class extends Lt{constructor(r){super();this.configurationService=r;this.copilotToken=void 0,this._disposable=vv.Disposable.from(vv.authentication.onDidChangeSessions(n=>_ae(n,this)))}dispose(){this._disposable.dispose()}async getBasicGitHubToken(){return(await gv(this.configurationService))?.accessToken}async getPermissiveGitHubToken(r){return(await The(this.configurationService,r))?.accessToken}async getCopilotToken(r,n){return(!this.copilotToken||this.copilotToken.expires_at<gf()||n)&&(this.copilotToken=await OGe(r),G2(r,this,this.copilotToken.refresh_in)),new vf(this.copilotToken.token,this.copilotToken.organization_list)}resetCopilotToken(r,n){n!==void 0&&r.get(dt).sendTelemetry("auth.reset_token_"+n),r.get(Le).getLogger("auth").debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}};var ss=Oe(require("vscode"));var r1=class t{constructor(e,r){this.accessor=e;this.outputChannelProvider=r;this.requestCount=-1;this.logger=e.get(Le).getPromptResponseLogger("chat")}logRequest(e){this.requestCount++,this.logInfo("REQUEST",`User:${this.headerSeparator()}${this.printMessageContent(e.message)}`)}logMessages(e){this.logInfo("PROMPT MESSAGES",e.map(r=>`${this.getDisplayRole(r.role)}:${this.headerSeparator()}${this.printMessageContent(r.content)}`).join(`
`))}logProgress(e,r){let n="markdownContent"in e?e.markdownContent.value:"content"in e?e.content:void 0;n&&(r?this.logInfo("RESPONSE",`Assistant:	${n}`):this.logInfo("",`${this.bodySeparator()}${n}`,!1))}logResponse(e){this.logInfo("",""),e.errorDetails&&this.logInfo("ERROR DETAILS",JSON.stringify(e.errorDetails,void 0,4))}logFollowups(e){this.logInfo("FOLLOWUPS","Followups:	"+e.map((r,n)=>`${r.title}
${this.bodySeparator()}`).join(`
${this.bodySeparator()}`))}logThrownError(e){this.logInfo("THROWN ERROR",e.stack?e.stack:e.message)}logIntent(e,r){this.logInfo("INTENT",e!==void 0?`User intent determined to be '${e}' via the ${r?"user":"model"}`:"Intent could not be determined")}logInfo(e,r,n=!0){if(!this.accessor.get(Ge).getConfig(Qe.ConversationLoggingEnabled))return;let o=new Date().toISOString();e&&(r=`[${e} ${this.requestCount}]
${r}`,r=`${o} [info] ${r}`),t.outputChannel===void 0&&(t.outputChannel=this.outputChannelProvider()),n?(this.logger.info(r+`
`),t.outputChannel.appendLine(r+`
`)):(this.logger.info(r),t.outputChannel.append(r))}printMessageContent(e){return e.split(`
`).join(`
${this.bodySeparator()}`)}headerSeparator(){return"		"}bodySeparator(){return"			"}getDisplayRole(e){switch(e){case"system":return"System";case"user":return"User";case"assistant":return"Assistant"}}};var Wc=Oe(jn()),Che=require("crypto");var NP=class{constructor(e,r,n){this.accessor=e;this.messageConverter=r;this.options=n;this.logger=e.get(Le).getLogger("ConversationFollowUp")}async followUp(e,r,n){let i=e.copy();i.addTurn(new bi({type:"meta",message:`Write a short one-sentence question that the user can ask that naturally follows from the previous few questions and answers. It should not ask a question which is already answered in the conversation. It should be a question that you are capable of answering. Reply with only the text of the question and nothing else.
					${zE(this.accessor)}`.trim()}));let o=n?{...n}:{};o.messageSource="chat.followup";let s=await by(this.accessor),a=await yy(this.accessor,2,s),{messages:l}=await this.messageConverter.toChatMessages(i,a,s),c=await this.accessor.get(fr).fetchOne(l,void 0,r,2,s,{temperature:this.options.temperature,top_p:this.options.topP},o);if(c.type==="success"){let u=[];return c.value&&u.push(c.value.trim()),u}else return this.logger.error(`Failed to fetch followups because of response type (${c.type}) and reason (${c.reason})`,c),[]}};var yq;(e=>{function t(r,n,i){let{options:o,document:s,selection:a,visibleRanges:l}=n,c={insertSpaces:o.insertSpaces,tabSize:o.tabSize},u=Cf(s);return i||(l.length===1?i=l[0]:l.length>1?i=l[0].union(l[l.length-1]):i=a),{document:s,fileIndentInfo:c,language:u,selection:a,wholeRange:i}}e.fromEditor=t})(yq||={});var n1=class{constructor(e,r,n,i,o,s){this.options=r;this.username=n;this.conversationLogger=i;this.isInternal=o;this.sessionId=s;this.inputPlaceholder=Wc.t("Ask Copilot or type / for commands");this._microsoftTelemetryService=e.get(wr),this.accessor=e,this.conversation=new Io,this.intentDetector=new Dy(e,2),this.conversation=this.intializeConversation(),this.messageConverter=new Cy(this.accessor,this.options.maxResponseTokens),this.conversationFollowUp=new NP(this.accessor,this.messageConverter,this.options)}get responder(){return{name:"GitHub Copilot"}}get requester(){return{name:this.username??Wc.t("You"),icon:this.username?wt.parse(`https://avatars.githubusercontent.com/${this.username}`):void 0}}addHistory(e){for(let r=0;r<e.length;r++){let n=e[r],i;if(n.role===1){let s=e[r+1];s&&s.role===2&&(i=s,r++)}let o=new bi({message:n.content,type:n.role===1?"user":"model"});i&&(o.response={message:i.content,type:"model"}),this.conversation.addTurn(o)}}intializeConversation(){return new Io}async provideResponseWithProgress(e,r,n,i){this.refreshFollowupsCancellationToken();try{let o=!0,s={report:u=>{"responseId"in u||(this.conversationLogger?.logProgress(u,o),o=!1),r.report(u)}},a=this.newTurn(e),l=Ul();l.markAsDisplayed();let c=await this._provideResponseWithProgress(a,e,s,n,l,i);return this.conversationLogger?.logResponse(c),this._microsoftTelemetryService.sendInternalTelemetryEvent("interactiveSessionResponse",{chatLocation:"panel",intent:a.intentInvocation?.intent.id??"",request:e.prompt,response:a.response?.message??"",sessionId:this.sessionId},{turnNumber:this.conversation.turns.length}),{...c,responseId:a.requestId,session:this}}catch(o){throw this.conversationLogger?.logThrownError(o),o}}newTurn(e){let r={message:e.prompt,type:"user"},n=new bi(r,this.sessionId);return this.conversation.addTurn(n),n}async _provideResponseWithProgress(e,r,n,i,o,s){if(i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:Wc.t("Cancelled")}};try{let a=this.accessor.get(Rr).activeTextEditor,l=e.request.message;this.conversationLogger?.logRequest(e.request);let c={command:s.intentId?Li.getCommand(s.intentId,2):void 0,restOfQuery:l};if(c.command?.intent&&!(c.command.intent.commandInfo?.allowsEmptyArgs??!0)&&!c.restOfQuery){let y=Cle(c.command.intent.id),b="";return y&&(b=`@${y.agent} `,y.command&&(b+=` /${y.command}`),b+=` ${c.command.details}`),e.response={message:Wc.t(`Please specify a question when using this command.

Usage: {0}`,b),type:"meta"},e.status="error",{errorDetails:{message:e.response.message,responseIsFiltered:!1,responseIsIncomplete:!1}}}let u=c?.command?.intent,p;u&&(e.request={message:c.restOfQuery||u.intentDetectionInput.sampleQuestion,type:"user"},this.conversationLogger?.logIntent(u.id,!0)),!u&&this.accessor.get(Ge).getConfig(Qe.ConversationIntentDetection)?(u=p=await this.intentDetector.detectIntent(void 0,l,i,o,void 0),this.conversationLogger?.logIntent(u?.id,!1)):this.isInternal&&(p=u||this.conversation.turns.length!==1?void 0:await this.intentDetector.detectIntent(void 0,l,i,o,void 0)),u??=Jl.Instance;let d=a?yq.fromEditor(this.accessor,a):void 0,f=await u.invoke(this.accessor,{location:2,documentContext:d},void 0);e.intentInvocation=f;let m=f.endpoint,{messages:h,tokenCount:g}=await f.promptCrafter.buildPrompt(this.conversation,m,r.variables,n,o,i),v=this.conversation.getLatestTurn()?.contextParts.map(y=>y.kind)??[];if(this._microsoftTelemetryService.sendInternalTelemetryEvent("interactiveSessionMessage",{intent:u?.id??"none",detectedIntent:p?.id??"none",contextTypes:v.join(","),query:c.restOfQuery},{}),e.chatMessages=h,this.conversationLogger?.logMessages(h),o=eR(this.conversation,this.sessionId,"conversationPanel",l,g,u?.id,o),i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:Wc.t("Cancelled")}};let _=f?.responseProcessor?f.responseProcessor(this.accessor,e,n,h,i):new Py([{stop:"[COMMANDS START]"}],n);return await this.fetchConversationResponse(e,m,l,h,i,n,_,o,{messageId:o.properties.messageId,messageSource:"chat.user"})}catch(a){this.accessor.get(Le).defaultLogger.exception(a),this.accessor.get(dt).sendExceptionTelemetry(a,"Error"),this.conversationLogger?.logThrownError(a);let l=a.message;return e.status="error",e.response={message:l,type:"meta"},{errorDetails:{message:l,responseIsIncomplete:!0}}}}async fetchConversationResponse(e,r,n,i,o,s,a,l,c){let u=Ul();e.requestId=u.properties.messageId;let p=Date.now(),d=0,f=new Set,m=await this.accessor.get(fr).fetchOne(i,async(x,P,U)=>{d===0&&(d=Date.now()),U.annotations&&(!((x.match(/(^|\n)```/g)?.length??0)%2===1)||x.match(/(^|\n)```\w*\s*$/))&&(U.annotations=void 0),U.annotations&&(U.annotations=U.annotations.filter(H=>!f.has(H.details.type)),U.annotations.forEach(H=>f.add(H.details.type))),a.apply(x,U)},o,2,r,{temperature:this.options.temperature,top_p:this.options.topP},c,{intent:!0});a.finish?.();let h=await a.appliedText,g=h?c9(h):[],v=l.raw.displayedTime??p,_=["programming-related tasks","programming related questions","related to programming"],y=0;m.type==="success"&&!h.trim().includes(`
`)&&_.some(x=>h.toLowerCase().includes(x))&&(y=1);let b=this.accessor.get(tn);switch(this._microsoftTelemetryService.sendTelemetryEvent("panel.request",{command:e.intentInvocation?.intent.id??"none",contextTypes:e.contextParts.map(x=>x.kind).join(",")??"none",promptTypes:i.map(x=>`${x.role}${x.name?`-${x.name}`:""}:${x.content.length}`).join(","),conversationId:this.sessionId,requestId:e.requestId,responseId:m.requestId,responseType:m.type,codeBlocks:g.join(","),model:r.model},{turn:this.conversation.turns.length,textBlocks:g.length?-1:h.split(/\n{2,}/).length??0,maybeOffTopic:y,messageTokenCount:b.tokenLength(e.request.message),promptTokenCount:za(this.accessor,i),userPromptCount:i.filter(x=>x.role==="user").length,responseTokenCount:b.tokenLength(h)??0,timeToRequest:p-v,timeToFirstToken:d?d-v:-1,timeToComplete:Date.now()-v}),tR(this.accessor,"conversationPanel",n,m.type==="offTopic",this.accessor.get(Rr).activeTextEditor?.document,l),m.type){case"success":return await this.processSuccessfulFetchResult(r,e,a,m.requestId,u);case"offTopic":return this.processOffTopicFetchResult(s,e,n,l);case"canceled":return e.status="cancelled",e.response={message:"Cancelled",type:"user"},{errorDetails:e.response};case"rateLimited":return e.status="error",{errorDetails:{message:Wc.t("Sorry, your request was rate-limited. Please wait and try sending again later."),responseIsFiltered:!0}};case"badRequest":case"failed":return e.status="error",e.response={message:m.reason,type:"server"},{errorDetails:e.response};case"filtered":return e.status="filtered",{errorDetails:{message:Wc.t({message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}),responseIsFiltered:!0}};case"length":return e.status="error",{errorDetails:{message:Wc.t("Sorry, the response hit the length limit. Please rephrase your prompt.")}};case"unknown":return e.status="error",{errorDetails:{message:Wc.t("Sorry, no response was returned."),responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o){let s=await n.appliedText;return s.length>0?(r.status="success",r.response={message:s,type:"model"},o.markAsDisplayed(),rR(this.accessor,this.conversation,this.sessionId,"conversationPanel",s,i,this.accessor.get(Rr).activeTextEditor?.document,o),{followupsPromise:this.computeFollowups(!0,{messageId:o.properties.messageId})}):(r.status="error",r.response={message:Wc.t("The model returned successful but did not contain any response text."),type:"meta"},{errorDetails:r.response})}processOffTopicFetchResult(e,r,n,i){let o=Ul();return e.report({content:this.options.rejectionMessage}),r.response={message:this.options.rejectionMessage,type:"offtopic-detection"},r.status="off-topic",o.markAsDisplayed(),nR(this.accessor,this.conversation,this.sessionId,"conversationPanel",n,i.properties.messageId,this.accessor.get(Rr).activeTextEditor?.document,o),{followupsPromise:this.computeFollowups(!1)}}getLatestTurn(){return this.conversation.getLatestTurn()}removeRequest(e){let r=this.conversation.removeTurn(e);this._microsoftTelemetryService.sendTelemetryEvent("panel.action.remove",{command:r?.intentInvocation?.intent.id,contextTypes:r?.contextParts.map(n=>n.kind).join(",")??"none",responseType:r?.response?.type,conversationId:this.sessionId,requestId:e})}refreshFollowupsCancellationToken(){this.lastResponseFollowupsCancellation?.cancel(),this.lastResponseFollowupsCancellation?.dispose(),this.lastResponseFollowupsCancellation=new Dg}async computeFollowups(e=!0,r){let n=this.lastResponseFollowupsCancellation.token,o=(e?await this.conversationFollowUp.followUp(this.conversation,n,r):[]).map(c=>LGe(c,this.accessor,r));n.isCancellationRequested||this.conversationLogger?.logFollowups(o);let s=this.conversation.getLatestTurn(),a=[],l=s?.intentInvocation;return l?.followUps&&(a=await l.followUps(this.accessor,s)),o.concat(a)}};function LGe(t,e,r){let n=r??{};return n.suggestionId=(0,Che.randomUUID)(),n.suggestionType="Follow-up from model",iR(e,n.suggestionType,n.messageId,n.suggestionId,e.get(Rr).activeTextEditor?.document),{message:t,title:t,metadata:n}}var dm=Oe(require("vscode"));function Ihe(t,e){let r=dm.window.activeTextEditor?.document,n=dm.window.activeTextEditor?.selection,i=e.result,o=t.get(wr);switch(e.action.kind){case"copy":o.sendTelemetryEvent("panel.action.copy",{languageId:r?.languageId,requestId:i.responseId},{codeBlockIndex:e.action.codeBlockIndex,copyType:e.action.copyType,characterCount:e.action.copiedCharacters,lineCount:e.action.copiedText.split(`
`).length});break;case"insert":o.sendTelemetryEvent("panel.action.insert",{languageId:r?.languageId,requestId:i.responseId},{codeBlockIndex:e.action.codeBlockIndex,characterCount:e.action.totalCharacters});break;case"runInTerminal":o.sendTelemetryEvent("panel.action.runinterminal",{languageId:r?.languageId,requestId:i.responseId,blockLanguage:e.action.languageId},{codeBlockIndex:e.action.codeBlockIndex});break;case"followUp":break;case"bug":t.get(Kl)?.reportChat(i.session);break}if(e.action.kind==="copy"||e.action.kind==="insert"){let s={};s={totalCharacters:e.action.totalCharacters},e.action.kind==="copy"&&(s={...s,copiedCharacters:e.action.copiedCharacters}),r&&n&&(s={...s,cursorLocation:r.offsetAt(n.active)}),uy(t,dm.window.activeTextEditor?.document,{codeBlockIndex:e.action.codeBlockIndex.toString(),messageId:i.responseId},s,e.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}}function whe(t,e){let r=dm.window.activeTextEditor?.document,n=e.result;t.get(wr).sendTelemetryEvent("panel.action.vote",{languageId:r?.languageId,requestId:n.responseId},{direction:e.kind===dm.ChatAgentResultFeedbackKind.Helpful?1:2}),uy(t,r,{rating:e.kind===dm.ChatAgentResultFeedbackKind.Helpful?"positive":"negative",messageId:n.responseId},{},"conversation.messageRating")}var kP=class{constructor(e){this.accessor=e}async register(e){return new xq(this.accessor,e).register()}},xq=class{constructor(e,r){this.accessor=e;this.options=r;this._logger=new r1(this.accessor,()=>ss.window.createOutputChannel("GitHub Copilot Chat Conversation","log"))}async register(){this._isInternal=(await this.accessor.get(Lt).getCopilotToken(this.accessor))?.isInternal,this.accessor.get(mr).subscriptions.push(this.registerWorkspaceAgent(),this.registerVSCodeAgent(),this.registerTerminalAgent(),this.registerDefaultAgent())}createAgent(e,r){let n=ss.chat.createChatAgent(e,this.getChatAgentHandler(r));return n.onDidPerformAction(i=>Ihe(this.accessor,i)),n.onDidReceiveFeedback(i=>whe(this.accessor,i)),n.supportIssueReporting=this.accessor.get(Ge).getConfig(Qe.DebugReportFeedback),n}registerWorkspaceAgent(){let e=this.createAgent(yae,Jg);return e.fullName="Workspace",e.description="Ask about your workspace",e.followupProvider={provideFollowups:(r,n)=>"followupsPromise"in r?r.followupsPromise:[]},e.iconPath=new ss.ThemeIcon("code"),e.slashCommandProvider={provideSlashCommands:r=>this.getSlashCommands(If.workspace)},e.isSecondary=!0,e.sampleRequest=Li.getCommand("workspace",2)?.intent?.commandInfo?.sampleRequest,e}registerVSCodeAgent(){let e=this.createAgent(xae,nU);e.fullName="VS Code",e.description="Ask about VS Code",e.followupProvider={provideFollowups:(n,i)=>"followupsPromise"in n?n.followupsPromise:[]},e.slashCommandProvider={provideSlashCommands:n=>this.getSlashCommands(If.vscode)};let r=ss.env.appName.includes("Insiders")||ss.env.appName.includes("OSS");return e.iconPath=wt.joinPath(this.accessor.get(mr).extensionUri,"assets",r?"vscode-chat-avatar-insiders.svg":"vscode-chat-avatar-stable.svg"),e.sampleRequest=Li.getCommand("vscode",2)?.intent?.commandInfo?.sampleRequest,e}registerTerminalAgent(){let e=this.createAgent(Ml,"terminal");return e.fullName="Terminal",e.description="Ask how to do something in the terminal",e.followupProvider={provideFollowups:(r,n)=>"followupsPromise"in r?r.followupsPromise:[]},e.iconPath=new ss.ThemeIcon("terminal"),e.slashCommandProvider={provideSlashCommands:r=>this.getSlashCommands(If.terminal)},e.sampleRequest=Li.getCommand("terminal",2)?.intent?.commandInfo?.sampleRequest,e}registerDefaultAgent(){let e=this.createAgent("","");e.isDefault=!0,e.helpTextPrefix=ss.l10n.t("You can ask me general programming questions, or chat with the following agents which have specialized expertise and can perform actions:");let r=ss.l10n.t({message:`To have a great conversation, ask me questions as if I was a real programmer:

* **Show me the code** you want to talk about by having the files open and selecting the most important lines.
* **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
* **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.

You can also ask me questions about your editor selection by [starting an inline chat session](command:inlineChat.start).

Learn more about [GitHub Copilot](https://docs.github.com/copilot/getting-started-with-github-copilot?tool=vscode) in [Visual Studio Code](https://code.visualstudio.com/docs/editor/artificial-intelligence).`,comment:"{Locked='](command:inlineChat.start)'}"}),n=new ss.MarkdownString(r);return n.isTrusted={enabledCommands:["inlineChat.start"]},e.helpTextPostfix=n,e.fullName="GitHub Copilot",e.description="",e.followupProvider={provideFollowups:(i,o)=>"followupsPromise"in i?i.followupsPromise:[]},e.slashCommandProvider={provideSlashCommands:i=>[]},e}getSlashCommands(e){let r=[];return e.forEach(n=>{let i=Li.getCommand(n,2)?.intent;i&&r.push({name:i.id,description:i.description,followupPlaceholder:i.commandInfo?.followupPlaceholder,shouldRepopulate:i.commandInfo?.shouldRepopulate,sampleRequest:i.commandInfo?.sampleRequest})}),r}getChatAgentHandler(e){return async(r,n,i,o)=>{let s=new n1(this.accessor,this.options,"",this._logger,this._isInternal,"");s.addHistory(n.history);let a=r.slashCommand?.name??e;return await s.provideResponseWithProgress(r,i,o,{intentId:a})}}};var Ee=Oe(require("vscode"));var OP=class extends Dr{render(){return vscpp(vscppf,null,vscpp(wf,null,vscpp(bq,null),vscpp(Af,null)),vscpp(nn,null,vscpp(Tq,{diff:this.props.diff}),vscpp(Eq,null)))}},bq=class extends Dr{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to commit some changes to a Git repository.")}},Eq=class extends Dr{render(){return vscpp(vscppf,null,"The commit message should be short and concise that describes the changes in the code.",vscpp("br",null),"The commit message should start with *** and end with ***.")}},Tq=class extends Dr{render(){return vscpp(vscppf,null,"Below is a git diff that contains the changes that the developer has made:",vscpp("br",null),this.props.diff.join(`

`),vscpp("br",null),"Based on the git diff, please suggest a commit message for the developer to use.")}};var i1=class{constructor(e){this.accessor=e;this.microsoftTelemetryService=e.get(wr),this.logger=e.get(Le).getPromptResponseLogger("git commit message generator"),this.options=e.get(Wa)}async generateGitCommitMessage(e,r,n){let i=Date.now(),o=await Fr(this.accessor,3),s=Math.floor(o.modelMaxTokenWindow*4/3),a=this.processDiff(e,s),c=await new Og(this.accessor,o.modelMaxTokenWindow,o).render(OP,{diff:e}),u=Math.min(this.options.temperature*(1+r),2),p=Date.now(),d=await this.accessor.get(fr).fetchOne(c,void 0,n,3,o,{temperature:u,top_p:this.options.topP},{messageSource:"command.generateGitCommitMessagePrompt"});if(this.logger.logResponse(d),this.microsoftTelemetryService.sendTelemetryEvent("git.generateCommitMessage",{model:o.model,requestId:d.requestId,responseType:d.type},{attemptCount:r,originalDiffFileCount:e.length,originalDiffLength:e.join("").length,processedDiffFileCount:a.length,processedDiffLength:a.join("").length,timeToRequest:p-i,timeToComplete:Date.now()-i}),d.type==="success")return this.processGeneratedCommitMessage(d.value)}processDiff(e,r){let n=r-Math.floor(r*.1),i=e.join(`

`).length;if(i>n)for(e.sort((o,s)=>o.length-s.length);i>n&&e.length>0;){let o=e.pop();i-=o.length}return e}processGeneratedCommitMessage(e){return e.replace(/\*\*\*/gm,"").trim()}};var fm=Oe(jn()),Rhe=require("crypto");var LP={top_p:1,temperature:.1};var Sq=class{constructor(e,r,n,i,o,s,a,l){this.placeholder=e;this.slashCommands=r;this.wholeRange=n;this.document=i;this.formattingOptions=o;this.message=s;this.input=a;this.preferredIntent=l;this._requests=[];this.sessionId=(0,Rhe.randomUUID)(),this.conversation=void 0}addRequest(e){this._requests.push(e)}getRequests(){return this._requests}},MP=class t{constructor(e,r){this.accessor=e;this.rejectionMessage=r;this.logger=e.get(Le).getPromptResponseLogger("interactiveEditor"),this.tabAndEditorsService=e.get(Rr),this.languageDiagnosticService=e.get(Ao),this._microsoftTelemetryService=e.get(wr),this.logger.info(`CopilotInteractiveEditorSessionProvider created, with rejection message: ${this.rejectionMessage}`)}async prepareInteractiveEditorSession(e){let r;if(this.tabAndEditorsService.activeTextEditor?.document.uri.toString()===e.document.uri.toString()){let d=this.tabAndEditorsService.activeTextEditor.options;r={insertSpaces:d.insertSpaces,tabSize:d.tabSize}}let n,i=this.languageDiagnosticService.getDiagnostics(e.document.uri).find(d=>d.range.contains(e.selection));i&&(i.severity===OE.Warning||i.severity===OE.Error)&&(n=`/fix ${i.message}`);let o={document:e.document,fileIndentInfo:r,language:Cf(e.document),selection:e.selection,wholeRange:e.selection},s=[];for(let d of Li.getCommands(1))d.intent?.asSlashCommand?s.push(await d.intent.asSlashCommand(this.accessor,o)):s.push({command:d.commandId,detail:d.details,executeImmediately:d.executeImmediately});let a=[fm.t({message:"{0} Copilot generated code may be incorrect",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})],l=fm.t({message:"{0} You can also type / for commands",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]}),c,u;e.selection.isEmpty&&e.document.lineAt(e.selection.start.line).text.trim()===""?(a.push(l,fm.t({message:"{0} You can also select code to make an edit",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})),u=fm.t("Ask Copilot to generate code..."),c=Ry.ID):!e.selection.isEmpty&&e.selection.start.line!==e.selection.end.line?(a.push(l),u=fm.t("Ask Copilot to edit code..."),c=Ay.ID):u=fm.t("Ask Copilot or type / for commands");let p=a[Math.floor(Math.random()*a.length)];return new Sq(u,s,e.selection,e.document,r,p,n,c)}async provideInteractiveEditorResponse(e,r,n,i){this.logger.info(`CopilotInteractiveEditorSessionProvider query: ${r.prompt}`),n.report({message:fm.t("Fetching response..."),edits:[]}),r.attempt===0&&e.addRequest(r.prompt);let o=this.accessor.get(Ge).getConfig(Qe.InlineChatStreaming),s=r.live;if(o==="off")s=!1;else if(o==="instant"){let l=n;n={report:c=>{l.report({...c,editsShouldBeInstant:!0})}}}let a=await this.fetchResponse(e,r,n,s,i);if(a)return MGe(a,s)}async provideFollowups(e,r,n){return r.reply.followUp?.(n)}handleInteractiveEditorResponseFeedback(e,r,n){if(this.logger.debug("CopilotInteractiveEditorSessionProvider feedback received"),n===aa.Bug&&e.conversation){this.accessor.get(Kl)?.reportInline(e.conversation,r.promptQuery,r.reply);return}let i={messageId:r.messageId},o,{selection:s,wholeRange:a,intent:l,query:c}=r.promptQuery,u=e.conversation?.getLatestTurn()?.requestId??"",p=e.sessionId,d=l?.id,f=e.document.languageId,m=r.reply.type,h=m==="inlineEdit"?r.reply.edits:null,g=Ahe(s,this.languageDiagnosticService.getDiagnostics(e.document.uri)),v=Ln(e.document.uri)?1:0,_={languageId:f,replyType:m,conversationId:p,requestId:u,command:d},y={selectionLineCount:s?Math.abs(s.end.line-s.start.line):-1,wholeRangeLineCount:a?Math.abs(a.end.line-a.start.line):-1,editCount:h?.length??-1,editLineCount:h?.reduce((x,P)=>x+P.newText.split(`
`).length,0)??-1,isNotebook:v,problemsCount:g.fileDiagnosticsTelemetry.problemsCount,selectionProblemsCount:g.selectionDiagnosticsTelemetry.problemsCount,diagnosticsCount:g.fileDiagnosticsTelemetry.diagnosticsCount,selectionDiagnosticsCount:g.selectionDiagnosticsTelemetry.diagnosticsCount},b=(x,P)=>{this._microsoftTelemetryService.sendInternalTelemetryEvent(x,{language:f,intent:d,query:c,conversationId:p,requestId:u,replyType:m,problems:g.fileDiagnosticsTelemetry.problems,selectionProblems:g.selectionDiagnosticsTelemetry.problems,diagnosticCodes:g.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:g.selectionDiagnosticsTelemetry.diagnosticCodes},{isNotebook:v,...P})};if(n===aa.Helpful||n===aa.Unhelpful){let x=n===aa.Helpful?1:0;this._microsoftTelemetryService.sendTelemetryEvent("inline.action.vote",_,{...y,vote:x}),b("interactiveSessionVote",{vote:x})}else if(n===aa.Undone||n===aa.Accepted){let x=n===aa.Accepted?1:0;this._microsoftTelemetryService.sendTelemetryEvent("inline.done",_,{...y,accepted:x}),b("interactiveSessionDone",{accepted:x})}switch(n){case aa.Helpful:i.rating="positive",o="inlineConversation.messageRating";break;case aa.Unhelpful:i.rating="negative",o="inlineConversation.messageRating";break;case aa.Undone:i.action="undo",o="inlineConversation.undo";break;case aa.Accepted:i.action="accept",o="inlineConversation.accept";break;case aa.Bug:o="";break}o&&uy(this.accessor,e.document,i,{},o)}async fetchResponse(e,r,n,i,o){let s=Ul(),a=Date.now(),l={document:e.document,fileIndentInfo:e.formattingOptions,language:Cf(e.document),selection:r.selection,wholeRange:r.wholeRange};(e.getRequests().length>1||r.attempt>0)&&(e.preferredIntent=void 0);let c=await dT(this.accessor,r.prompt,l,e,s,o),u=c.intentInvocation;n.report({slashCommand:c.slashCommand});let p=await fT(c,e.getRequests().slice(0,-1),s,o);if(o.isCancellationRequested)return;let d=e.conversation,f=d===void 0;d||(d=e.conversation=new Io);let m=p.map(T=>T.content).join(`
`),h=new bi({message:m,type:"user"});h.chatMessages=p,d.addTurn(h),s=eR(d,e.sessionId,"conversationInline",r.prompt,FGe(this.accessor,p),u.intent.id,s);let g=s.properties.messageId;h.requestId=g,this.logger.logPrompt(p);let v,_,y=0,b=u.createReplyInterpreter(n,i),x=async T=>(y===0&&(y=Date.now()),b.update(T).shouldFinish?T.length:void 0),P=Date.now(),U=u.endpoint;try{v=await this.accessor.get(fr).fetchOne(p,x,o,1,U,{temperature:t.pickTemperature(r),top_p:LP.top_p},{messageId:g,messageSource:"inline.user"},{intent:!0})}catch(T){throw this.logger.exception(T,"Fetching failed: "),this.accessor.get(dt).sendExceptionTelemetry(T,"Fetching failed: "),h.status="error",h.response={message:T.message,type:"server"},new Error("Failed to make request")}this.logger.logResponse(v),tR(this.accessor,"conversationInline",r.prompt,v.type==="offTopic",this.tabAndEditorsService.activeTextEditor?.document,s);let H=Ln(e.document.uri)?1:0,j=Ahe(r.selection,this.languageDiagnosticService.getDiagnostics(e.document.uri)),M=this.accessor.get(tn),F=T=>{this._microsoftTelemetryService.sendTelemetryEvent("inline.request",{command:u.intent.id??"",contextTypes:"none",promptTypes:p.map(A=>`${A.role}${A.name?`-${A.name}`:""}:${A.content.length}`).join(","),conversationId:e.sessionId,requestId:g,languageId:this.tabAndEditorsService.activeTextEditor?.document?.languageId,responseType:v.type,replyType:T?.type,model:U.model,diagnosticsProvider:j.diagnosticsProvider},{firstTurn:f?1:0,isNotebook:H,messageTokenCount:M.tokenLength(c.queryWithoutCommand),promptTokenCount:za(this.accessor,p),responseTokenCount:v.type==="success"?M.tokenLength(v.value):-1,implicitCommand:r.prompt.trim().startsWith(`/${u.intent.id}`)?0:1,attemptCount:r.attempt||0,selectionLineCount:r.selection?Math.abs(r.selection.end.line-r.selection.start.line)+1:-1,wholeRangeLineCount:r.wholeRange?Math.abs(r.wholeRange.end.line-r.wholeRange.start.line)+1:-1,editCount:T?.type==="inlineEdit"?T.edits.length:-1,editLineCount:T?.type==="inlineEdit"?T.edits.reduce((A,J)=>A+J.newText.split(`
`).length,0):-1,problemsCount:j.fileDiagnosticsTelemetry.problemsCount,selectionProblemsCount:j.selectionDiagnosticsTelemetry.problemsCount,diagnosticsCount:j.fileDiagnosticsTelemetry.diagnosticsCount,selectionDiagnosticsCount:j.selectionDiagnosticsTelemetry.diagnosticsCount,timeToRequest:P-a,timeToFirstToken:y?y-a:-1,timeToComplete:Date.now()-a})},z=(T,A)=>{this._microsoftTelemetryService.sendInternalTelemetryEvent("interactiveSessionResponse",{chatLocation:"inline",intent:u.intent.id??"",problems:j.fileDiagnosticsTelemetry.problems,selectionProblems:j.selectionDiagnosticsTelemetry.problems,diagnosticCodes:j.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:j.selectionDiagnosticsTelemetry.diagnosticCodes,diagnosticsProvider:j.diagnosticsProvider,language:this.tabAndEditorsService.activeTextEditor?.document?.languageId,request:r.prompt,responseType:T,response:A},{isNotebook:H})};switch(v.type){case"rateLimited":{let T=`Response failed ${v.type}: ${v.reason}`;throw h.status="error",h.response={message:T,type:"server"},F(),z(v.type,T),new Error("Oops, your request failed due to a rate limit. Please try again later.")}case"badRequest":{let T=`Response failed ${v.type}: ${v.reason}`;throw h.status="error",h.response={message:T,type:"server"},F(),z(v.type,T),new Error("Failed to make request")}case"failed":{this.logger.error(`Response failed: ${v.reason}`),h.status="error";let T=v.reason;throw h.response={message:T,type:"server"},F(),z(v.type,T),new Error("Failed to make request")}case"canceled":{this.logger.debug(`Response canceled: ${v.reason}`),h.status="error";let T="Cancelled";h.response={message:T,type:"user"},F(),z(v.type,T);return}case"unknown":{let T=`Response is empty: ${v.reason}`;this.logger.info(T),h.status="error",h.response={message:T,type:"server"},F(),z(v.type,T);return}case"filtered":{let T=`Response got filtered: ${v.reason}`;throw this.logger.info(T),h.status="filtered",h.response={message:T,type:"server"},F(),z(v.type,T),new Error("Oops, response got filtered. Please rephrase your prompt.")}case"offTopic":{this.logger.info(`Response marked as offtopic: ${v.reason}`),h.status="off-topic";let T=this.rejectionMessage;h.response={message:T,type:"offtopic-detection"},F(),z(v.type,T),nR(this.accessor,d,e.sessionId,"conversationInline",r.prompt,g,e.document,s);return}case"length":{let T=`Response was too long: ${v.reason}`;this.logger.info(T),h.status="error",h.response={message:T,type:"server"},F(),z(v.type,T);return}case"success":break;default:{this.logger.error("Unexpected response type"),this.logger.info(JSON.stringify(v)),h.status="error";let T=`Unexpected response type: ${JSON.stringify(v)}`;h.response={message:T,type:"server"},F(),z("unknown",T);return}}if(_=v.value,_.length===0){this.logger.info("Response is empty."),F(),z("unknown","Empty response");return}b.update(_);let q=await b.finish();h.status="success";let L=_;return h.response={message:L,type:"model"},F(q),z("success",L),s=s.extendedBy({replyType:q.type}),rR(this.accessor,d,e.sessionId,"conversationInline",_,g,e.document,s),this.logger.info(`Parsed response: ${JSON.stringify(q,null,"	")}`),{promptQuery:{query:c.queryWithoutCommand,...l,intent:u.intent},parsedReply:q,messageId:s.properties.messageId}}static pickTemperature(e){return"attempt"in e&&typeof e.attempt=="number"?Math.min(LP.temperature*(e.attempt+1),2):LP.temperature}};function MGe(t,e){let{promptQuery:r,parsedReply:n,messageId:i}=t;if(n.type==="conversational")return{contents:new kc(n.content),promptQuery:r,reply:n,messageId:i};let o=n.content!==void 0?new kc(n.content):void 0;return n.type==="workspaceEdit"?{edits:n.workspaceEdit,promptQuery:r,reply:n,messageId:i,contents:o}:{edits:n.edits,wholeRange:n.newWholeRange,reply:n,promptQuery:r,messageId:i,contents:n.content!==void 0?new kc(n.content):void 0}}function FGe(t,e){let r=t.get(tn),n=0;for(let i of e)n+=r.tokenLength(i.content);return n}function Ahe(t,e){let r=e.filter(c=>t.intersection(c.range)),n={problems:e.map(c=>c.message).join(", "),problemsCount:e.length,diagnosticCodes:"",diagnosticsCount:0},i={problems:r.map(c=>c.message).join(", "),problemsCount:r.length,diagnosticCodes:"",diagnosticsCount:0},o=new Map,s=new Map;e.forEach(c=>{let u=c.code,p=typeof u=="string"||typeof u=="number"?u.toString():u?u.value.toString():"";o.set(p,(o.get(p)||0)+1),t.intersection(c.range)&&s.set(p,(s.get(p)||0)+1)});let a=c=>{let u="";return c.forEach((p,d)=>{u+=`${d}:${p},`}),u};n.diagnosticCodes=a(o),n.diagnosticsCount=o.size,i.diagnosticCodes=a(s),i.diagnosticsCount=s.size;let l=e.length>0?e[0].source??"":"";return{fileDiagnosticsTelemetry:n,selectionDiagnosticsTelemetry:i,diagnosticsProvider:l}}var FP=Oe(require("vscode"));var UP=class{constructor(e){this.ctx=e}async provideChatResponse(e,r,n,i){let o=e.map(c=>{let u={content:c.content,name:c.name,role:"user"};switch(c.role){case FP.ChatMessageRole.System:u.role="system";break;case FP.ChatMessageRole.Assistant:u.role="assistant";break;case FP.ChatMessageRole.User:u.role="user";break}return u}),s=await Fr(this.ctx,3),a=this.ctx.get(fr),l=0;await a.fetchMany(o,async(c,u)=>{let p=c.substring(l);l+=p.length,n.report({part:p,index:u})},i,3,s,{n:r.n,stream:!0})}};var qP=Oe(require("vscode"));var BP=class{constructor(e){this.accessor=e;this._changesMap=new Map}async run(e,r){if(r.isCancellationRequested||!e)return;let i=this.accessor.get(lm).getExtensionApi();if(!i)return;let o=i.getRepository(e);o&&await qP.window.withProgress({location:qP.ProgressLocation.SourceControl},async()=>{let s=await o.getDiff(),a=this._getAttemptCount(o,s),c=await new i1(this.accessor).generateGitCommitMessage(s,a,r);c&&(o.inputBox.value=c,this._changesMap.set(o.rootUri.fsPath,[s,a]))})}_getAttemptCount(e,r){let[n,i]=this._changesMap.get(e.rootUri.fsPath)??[[],1];if(n.length!==r.length)return 1;for(let o=0;o<r.length;o++)if(n[o]!==r[o])return 1;return i+1}};var zT=Oe(require("vscode"));var HP=class t{constructor(e){this.accessor=e;this.disposables=new fl;this.lastContext={commitMessages:[],patches:[]};this.internalLogger=e.get(Le).getPromptResponseLogger("GitHub pull request title and description generator"),this.logger=e.get(Le).getLogger("githubTitleAndDescriptionProvider"),this.logger.info("Initializing GitHub PR title and description provider provider."),this.options=e.get(Wa)}dispose(){this.disposables.dispose()}isRegenerate(e,r){if(e.length!==this.lastContext.commitMessages.length||r.length!==this.lastContext.patches.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==this.lastContext.commitMessages[n])return!1;for(let n=0;n<r.length;n++)if(r[n]!==this.lastContext.patches[n])return!1;return!0}async provideTitleAndDescription(e,r,n){let i,o,s,a;if(d$(e))i=e,o=r,a=n;else{let f=e;i=f.commitMessages,o=f.patches,s=f.issues,a=r}let l=await Fr(this.accessor,3),c=Math.floor(l.modelMaxTokenWindow*4/3),u=this.createPRTitleAndDescriptionPrompt(i,o,s,c),p=[{role:"system",content:u}];this.internalLogger.logPrompt(p);let d=await this.accessor.get(fr).fetchOne(p,void 0,a,3,l,{temperature:this.isRegenerate(i,o)?this.options.temperature+.1:this.options.temperature,top_p:this.options.topP},{messageSource:"extension.providePullRequestTitleAndDescription"});if(this.internalLogger.logResponse(d),this.lastContext={commitMessages:i,patches:o},d.type==="success")return t.parseFetchResult(d.value)}static parseFetchResult(e,r=!0){e=e.trim();let n=e,i=n.indexOf("+++");if(i===-1)return;let o=n.lastIndexOf("+++");n=n.substring(i+3,o>i+3?o:void 0).trim().replace(/\+\+\+?(\n)\+\+\+/,"+++");let s=n.split("+++").filter(u=>u.trim().length>0),a;if(s.length===1)a=s[0].split(`
`);else if(s.length>1){let u=s.slice(1).map(p=>p.split(`
`)).flat().filter(p=>p.trim().length>0);a=[s[0],...u]}else return;let l,c;if(a.length===1){if(l=a[0].trim(),r&&e.includes(`
`)&&e.split("+++").length===3)return this.parseFetchResult(e+"+++",!1)}else if(a.length>1){l=a[0].trim(),c="";let u=a.slice(1);for(let p of u)p.includes("commit message")||(c+=`${p.trim()}

`)}if(l)return l=l.replace(/Title\:\s/,"").trim(),c&&(c=c.replace(/Description\:\s/,"").trim()),{title:l,description:c}}createPRTitleAndDescriptionPrompt(e,r,n,i){let o=e.map(u=>`* ${u}`).join(`
`),s=i-Math.floor(i*.1)-o.length,a=r.join(`

`).length;if(a>s)for(r.sort((u,p)=>u.length-p.length);a>s&&r.length>0;){let u=r.pop();a-=u.length}let l;n&&n.length>0?l=`You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository to fix the following issues:
${n.map(p=>`
-------
Issue ${p.reference}:
${p.content}`).join()}
-------
`:l=`You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository.
`;let c;return n&&n.length>0?c=`Example One:
	+++Batch mark/unmark files as viewed
	+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.
	Fixes #4520+++
Example two:
	+++Fallback to hybrid after 20 process ports
	+++Additionally the \`remote.autoForwardPortsSource\` setting has been updated to remove the \`markdownDescription\` reference to a reload being required for changes to take effect.
	Fixes microsoft/vscode-internalbacklog#4533+++`:c=`Example One:
	+++Batch mark/unmark files as viewed
	+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.+++
Example two:
	+++Fallback to hybrid after 20 process ports
	+++Additionally the \`remote.autoForwardPortsSource\` setting has been updated to remove the \`markdownDescription\` reference to a reload being required for changes to take effect.+++`,`
${Ng()}
${Ip()}

${l}
Pull requests have a short and concise title that describes the changes in the code and a slightly longer description.
The description can be more detailed but should still be concise. Do not list commits, files or patches. Do not make up an issue reference if the pull request isn't fixing an issue.
The title and description of a pull request should be markdown and start with +++ and end with +++. Here are two good examples.
--------
${c}
--------
These are the commits that will be included in the pull request you are about to make:
${o}
Below is a list of git patches that contain the file changes for all the files that will be included in the pull request:
${r.join(`

`)}

Based on the git patches and on the git commit messages above, the title and description of the pull request should be:
`}};var jP=class extends HP{constructor(r){super(r);this.initializeGitHubPRExtensionApi()}getExtension(){return zT.extensions.getExtension("github.vscode-pull-request-github")}initializeGitHubPRExtensionApi(){let r=this.getExtension(),n=async()=>{if(r){let i=await r.activate();this.logger.info("Successfully activated the GitHub.vscode-pull-request-github extension."),this.gitHubExtensionApi=i,this.registerTitleAndDescriptionProvider()}};if(r)n();else{this.logger.info("GitHub.vscode-pull-request-github extension is not yet activated.");let i=zT.extensions.onDidChange(()=>{r=this.getExtension(),r&&(n(),i.dispose())});this.disposables.add(i)}}async registerTitleAndDescriptionProvider(){if(this.gitHubExtensionApi)try{this.disposables.add(this.gitHubExtensionApi.registerTitleAndDescriptionProvider(zT.l10n.t("Generate with Copilot"),this)),this.logger.info("Successfully registered GitHub PR title and description provider.")}catch{}}};var Kc=Oe(require("vscode"));var GP=class{provideMappedEdits(e,r,n,i){if(n.documents.length===0)return null;let o=n.documents[0],s=e.uri.toString(),a=o.find(_=>_.uri.toString()===s);if(!a)return null;let l=a.ranges;if(l.length!==1||r.length!==1)return null;let c=l[0],u=r[0];if(!e.getText(new Kc.Range(new Kc.Position(c.start.line,0),new Kc.Position(c.start.line,c.start.character))).match(/^\s*$/))return null;let d=Kc.window.activeTextEditor,f;if(d&&d.options&&e.languageId===d.document.languageId){let _=d.options,y=typeof _.tabSize=="number"?_.tabSize:4,b=typeof _.insertSpaces=="boolean"?_.insertSpaces:!0;f={tabSize:y,insertSpaces:b}}let m=new Kc.Range(new Kc.Position(c.start.line,0),c.end),h=e.getText(m),g=Vg(u.split(`
`),{whichLine:"topMost",lines:h.split(`
`)},f).join(`
`),v=new Kc.WorkspaceEdit;return v.replace(e.uri,m,g),v}};var Ti=Oe(require("vscode"));var Dhe=require("vscode");function o1(t,e,r){let n=Dhe.commands.registerCommand(e,async(...i)=>{try{return await r(...i)}catch(o){t.get(dt).sendExceptionTelemetry(o,e)}});t.get(mr).subscriptions.push(n)}var cn=Oe(require("vscode"));var _v=class extends cn.CodeAction{constructor(){super(...arguments);this.isAI=!0}},yv=class t{constructor(e){this.accessor=e}static{this.providedCodeActionKinds=[cn.CodeActionKind.QuickFix]}static getSevereDiagnostics(e){let r=e.filter(n=>n.severity<=cn.DiagnosticSeverity.Warning);return r.length===0?[]:r}static getDiagnosticsAsText(e){return e.map(r=>r.message).join(", ")}async provideCodeActions(e,r,n){if(!cn.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions"))return;let o=[];if(!cn.window.activeTextEditor)return o;let a=t.getSevereDiagnostics(n.diagnostics);if(a.length===0)return o;let l=a.map(m=>m.range).reduce((m,h)=>m.union(h)),c=new cn.Selection(l.start,l.end),u=t.getDiagnosticsAsText(a),p=new _v(cn.l10n.t("Fix using Copilot"),cn.CodeActionKind.QuickFix);p.diagnostics=a,p.command={title:p.title,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${u}`,position:l.start,initialSelection:c,initialRange:l}]};let d=new _v(cn.l10n.t("Explain using Copilot"),cn.CodeActionKind.QuickFix);d.diagnostics=a;let f=`/explain ${u}`;return this.accessor.get(Ge).getConfig(Qe.ExplainIntentRefer)&&(f=`@${Jg} ${f}`),d.command={title:d.title,command:"github.copilot.interactiveEditor.explain",arguments:[f]},o.push(p,d),o}},$T=class{static{this.providedCodeActionKinds=[cn.CodeActionKind.RefactorRewrite]}constructor(e){this.logger=e.get(Le).getLogger("RefactorsProvider"),this.ghTelemetryService=e.get(dt)}async provideCodeActions(e,r,n){if(!cn.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions"))return;let o=this.provideGenerateUsingCopilotCodeAction(e,r);return[...await this.provideDocumentUsingCopilotCodeAction(e,r),...o]}provideGenerateUsingCopilotCodeAction(e,r){let n;if(r.isEmpty){let i=e.lineAt(r.start.line).text;/^\s*$/g.test(i)&&(n=new _v(cn.l10n.t("Generate using Copilot"),cn.CodeActionKind.RefactorRewrite))}else{let i=e.getText(r);/^\s*$/g.test(i)||(n=new _v(cn.l10n.t("Modify using Copilot"),cn.CodeActionKind.RefactorRewrite))}return n===void 0?[]:(n.command={title:n.title,command:"vscode.editorChat.start",arguments:[{position:r.start,initialSelection:r,initialRange:r}]},[n])}async provideDocumentUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s;try{s=await zce(e.languageId,e.getText(),o)}catch(u){this.logger.exception(u,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed"),this.ghTelemetryService.sendExceptionTelemetry(u,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed")}if(s===void 0)return[];let a=cn.l10n.t("Document using Copilot: {0}",s.identifier),l=new _v(a,cn.CodeActionKind.RefactorRewrite),c=s.nodeRange===void 0?void 0:new tt(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return l.command={title:a,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/doc",initialRange:c}]},[l]}};var Phe=require("util"),Nhe=Oe(require("vscode"));var UGe="application/vnd.code.notebook.error",VP=class{constructor(e){this.accessor=e}async provideCellStatusBarItems(e,r){let n=e.outputs.flatMap(o=>o.items).find(o=>o.mime===UGe);if(!n)return[];let i;try{let o=new Phe.TextDecoder;if(i=JSON.parse(o.decode(n.data)),!i.name&&!i.message)return[];let s="Fix using Copilot",a=[i.name,i.message].filter(Boolean).join(": ").replace(/\s*\(\S+,\s*line\s*\d+\)/,"");return[{text:"$(sparkle)",alignment:Nhe.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:s,command:{title:s,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${a}`}]}}]}catch(o){this.accessor.get(Le).defaultLogger.error(`Failed to parse error output ${o}`)}return[]}};function khe(t){let e=a=>{let l=`@${Jg} /explain `;if(typeof a=="string"&&a)l=a;else{let c=Rf.getCurrentSelection(t.get(Rr));if(c){let u=Ti.languages.getDiagnostics(c.activeDocument.uri),p=u.filter(f=>!!f.range.intersection(c.range));yv.getSevereDiagnostics(p).length?l+=yv.getDiagnosticsAsText(u):(l+=uT,l+=Rf.formatSelection({languageId:c.languageId,selectedText:c.selectedText}))}}Ti.interactive.sendInteractiveRequestToProvider("copilot",{message:l})},r=()=>Ti.commands.executeCommand("vscode.editorChat.start",{message:"/generate "}),n=()=>Ti.commands.executeCommand("vscode.editorChat.start",{message:`/${Yg.ID} `,autoSend:!0,initialRange:Ti.window.activeTextEditor?.selection}),i=()=>Ti.commands.executeCommand("vscode.editorChat.start",{message:"/tests ",autoSend:!0,initialRange:Ti.window.activeTextEditor?.selection}),o=()=>{let a=Ti.window.activeTextEditor;if(!a)return;let l=a.selection,c=Ti.languages.getDiagnostics(a.document.uri).filter(u=>!!l.intersection(u.range)).map(u=>u.message).join(", ");return Ti.commands.executeCommand("vscode.editorChat.start",{message:`/fix ${c}`,autoSend:!0,initialRange:Ti.window.activeTextEditor?.selection})};try{o1(t,"github.copilot.interactiveEditor.explain",e),o1(t,"github.copilot.interactiveEditor.generate",r),o1(t,"github.copilot.interactiveEditor.generateDocs",n),o1(t,"github.copilot.interactiveEditor.generateTests",i),o1(t,"github.copilot.interactiveEditor.fix",o)}catch(a){t.get(Le).defaultLogger.exception(a,"Could not register explain command"),t.get(dt).sendExceptionTelemetry(a,"Could not register explain command")}t.get(mr).subscriptions.push(Ti.languages.registerCodeActionsProvider("*",new yv(t),{providedCodeActionKinds:yv.providedCodeActionKinds}),Ti.languages.registerCodeActionsProvider("*",new $T(t),{providedCodeActionKinds:$T.providedCodeActionKinds}),Ti.notebooks.registerNotebookCellStatusBarItemProvider("jupyter-notebook",new VP(t)))}var Iq=require("crypto"),Hi=Oe(require("vscode"));var Ohe=require("crypto"),Lhe=Oe(require("util")),mm=require("vscode");var WT=new Map;async function Mhe(t){t.get(mr).subscriptions.push(new mm.Disposable(()=>WT.forEach(r=>r.dispose()))),Cq(t)}var BGe=["docs","datastax"],zP;async function Cq(t){return zP||(zP=qGe(t)),zP.finally(()=>zP=void 0)}async function qGe(t){let e=t.get(Le).getLogger("RemoteAgents");if(!t.get(Ge).getConfig(Qe.EnableRemoteAgents))return;let n=t.get(Ge).getConfig(Qe.AgentsEndpointUrl),i=new Set(WT.keys());try{let o=await t.get(Lt).getBasicGitHubToken(),a=await(await t.get(Nr).fetch(`${n}/agents`,{method:"GET",headers:{Authorization:Lhe.format("Bearer %s",o),...t.get(jt).getEditorVersionHeaders()}})).text(),l;try{l=JSON.parse(a).agents}catch(c){e.warn(`Invalid remote agent response: ${a} (${c})`);return}for(let c of l)BGe.includes(c.slug)&&(i.delete(c.slug)||WT.set(c.slug,HGe(t,e,c,n)))}catch(o){e.warn(`Failed to load remote slash commands: ${o}`)}for(let o of i)WT.get(o).dispose(),WT.delete(o)}function HGe(t,e,r,n){let i=mm.chat.createChatAgent(r.slug,async(o,s,a,l)=>{try{let c=new QE(n,`agents/${r.slug}?chat`,"copilot-chat",4096),p=await t.get(Xl).resolveVariablesInPrompt(o.prompt,o.variables),d=await t.get(fr).fetchMany([{role:"user",content:p.message,intent:"conversation"}],async(f,m,h)=>{a.report({content:h.text})},l,2,c,{secretKey:await t.get(Lt).getBasicGitHubToken()});return d.type!=="success"?(e.warn(`Bad response from /agents/${r.slug}: ${d.type} ${d.reason}`),d.reason.includes("400 no docs found")?{errorDetails:{message:"No docs found"}}:{errorDetails:{message:d.reason}}):{}}catch(c){return e.warn(`/agents/${r.slug} failed: ${c}`),{}}});return i.description=r.description,i.fullName=r.name,i.agentVariableProvider={triggerCharacters:["#"],provider:{async provideCompletionItems(o,s){return(await jGe(t,r.slug,o,e,s)).map(l=>{let c=new mm.ChatAgentCompletionItem("#"+l,[{value:"#"+l,level:mm.ChatVariableLevel.Full,description:"",kind:"github.docset"}]);return c.insertText="#"+l.replace(/ /g,""),c})}}},i}async function jGe(t,e,r,n,i){let a={url:`${t.get(Ge).getConfig(Qe.AgentsEndpointUrl)}/agents/autocomplete`,modelMaxTokenWindow:0};r.startsWith("#")&&(r=r.substring(1));let c=await t.get(Lt).getBasicGitHubToken(),p=await(await hf(t,a,c??"",void 0,(0,Ohe.randomUUID)(),{agents:[e],query:r},i)).text();try{let d=JSON.parse(p);if(d===null)return[];if(!Array.isArray(d))throw new Error("Expected array");return d.map(f=>f.metadata.display_name)}catch(d){return n.warn(`Invalid autocomplete response (${d.toString()}): ${p}`),[]}}var $P=class{constructor(e,r){this.accessor=e;this.options=r;this.hasShownWelcomeMessage=!1;this.isInternal=!1}getLastSession(){return this.lastSession}async prepareSession(e){if(!this.username){let o=await gv(this.accessor.get(Ge));this.isInternal=(await this.accessor.get(Lt).getCopilotToken(this.accessor))?.isInternal,this.username=o?.account?.label}Cq(this.accessor);let r=(0,Iq.randomUUID)(),n=new r1(this.accessor,()=>Hi.window.createOutputChannel("GitHub Copilot Chat Conversation",{log:!0})),i=new n1(this.accessor,this.options,this.username,n,this.isInternal,r);return this.lastSession=i,i}async provideSampleQuestions(e){let r=Hi.window.activeNotebookEditor||Hi.window.activeTextEditor?VGe():Fhe([["","/help",Hi.l10n.t("What can you do?")]]);return GGe([...r],this.accessor,"welcome"),r}async provideWelcomeMessage(e){let r=wq(),i=this.accessor.get(Ge).getConfig(Qe.WelcomeMessage),o=Hi.l10n.t({message:"I'm powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and [share feedback]({0}) so that we can learn and improve. Check out the [{1} documentation]({2}) to learn more.",args:[r,"Copilot","https://code.visualstudio.com/docs/editor/github-copilot#_chat-view"],comment:["{Locked=']({'}","the [text](url) is a markdown link syntax. Do not add any additional spaces between ] and ("]}),s=this.username?" **@"+this.username+"**":"";if(i==="never"||this.hasShownWelcomeMessage&&i==="first")return[Hi.l10n.t("Hi{0}, how can I help you?",s)];this.hasShownWelcomeMessage=!0;let a="workbench.action.quickchat.launchInlineChat",l=Hi.window.activeNotebookEditor||Hi.window.activeTextEditor?Hi.l10n.t("You can also [start an inline chat session]({0}).",`command:${a}`):"",c=new Hi.MarkdownString(Hi.l10n.t("Welcome,{0}, I'm your {1} and I'm here to help you get things done faster. {2}",s,"Copilot",l));return c.isTrusted={enabledCommands:[a]},[c,o]}};function GGe(t,e,r){t.map(n=>{iR(e,n.message,r,n.metadata.suggestionId,Hi.window.activeTextEditor?.document)})}function wq(){return"https://aka.ms/microsoft/vscode-copilot-release"}function VGe(){let t="@workspace ";return Fhe([[t,"/fix",Hi.l10n.t("the problems in my code")],[t,"/tests",Hi.l10n.t("add unit tests for my code")],[t,"/explain",Hi.l10n.t("how the selected code works")]])}function Fhe(t){return t.map(([e,r,n])=>({message:e+r+" ",title:r+" "+n,metadata:{messageId:"welcome",suggestionId:(0,Iq.randomUUID)(),suggestionType:"Follow-up from model"}}))}var Uhe=require("path"),Bhe=require("util"),Je=require("vscode");var ji=require("vscode"),WP=class{constructor(e){this.contentManager=e;this._onDidChangeFile=new ji.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event}async stat(e){let r=this.contentManager.get(e.authority,e.path);if(!r)throw ji.FileSystemError.FileNotFound(e);let n=await r.content?.then(i=>i?.length)??0;return{ctime:r.ctime??0,mtime:r.ctime??0,size:n,type:r.children?ji.FileType.Directory:ji.FileType.File,permissions:ji.FilePermission.Readonly}}readDirectory(e){let r=this.contentManager.get(e.authority,e.path);if(!r)throw ji.FileSystemError.FileNotFound(e);return r.children?.map(n=>[n.label,n.children?ji.FileType.Directory:ji.FileType.File])??[]}async readFile(e){let r=this.contentManager.get(e.authority,e.path);if(!r)throw ji.FileSystemError.FileNotFound(e);let n;try{n=await r.content}catch{}return n??new Uint8Array}watch(e,r){return{dispose(){}}}createDirectory(e){throw ji.FileSystemError.NoPermissions(e)}writeFile(e,r,n){throw ji.FileSystemError.NoPermissions(e)}delete(e,r){throw ji.FileSystemError.NoPermissions(e)}rename(e,r,n){throw ji.FileSystemError.NoPermissions(r)}copy(e,r,n){throw ji.FileSystemError.NoPermissions(r)}};function qhe(t,e){return zGe(t,e),Je.Disposable.from(Je.workspace.registerFileSystemProvider("vscode-copilot-workspace",new WP(t.get(Pp)),{isReadonly:new Je.MarkdownString(Je.l10n.t(`This file preview was generated by Copilot and may contain surprises or mistakes.

Ask followup questions to refine it, then press Create Workspace.`))}),Je.commands.registerCommand("github.copilot.createProject",async(r,n,i,o,s)=>{let a=t.get(xv).getLastInteractiveSession(),l=(await Je.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select as Parent Folder"}))?.[0];if(!l)return;let c=n[0].path,u=await YGe(l,c),p=new RegExp(c,"g"),d=[];Je.window.tabGroups.all.forEach(f=>{f.tabs.forEach(m=>{m.input instanceof Je.TabInputText&&m.input.uri.scheme==="vscode-copilot-workspace"&&d.push(m)})}),Je.window.tabGroups.close(d,!0),await Je.window.withProgress({location:Je.ProgressLocation.Notification,cancellable:!0},async(f,m)=>{for(let _ of n){let y=_.path.replace(p,u),b=Je.Uri.joinPath(l,y);switch(_.type){case"folder":{f.report({message:Je.l10n.t("Creating folder {0}...",y)}),await Je.workspace.fs.createDirectory(b);break}case"file":{f.report({message:Je.l10n.t("Creating file {0}...",y)});let x=Y7(s,_.path),P=await Je.workspace.fs.readFile(x),U=Je.Uri.joinPath(l,y);await Je.workspace.fs.writeFile(U,Buffer.from(P));break}default:break}}let h=Je.Uri.joinPath(l,u);a!==void 0&&Je.interactive.transferChatSession(a,h),t.get(Le).getLogger("newIntent").info("Opening folder: "+h.fsPath);let g=t.get(mr),v=g.globalState.get("CopilotGeneratedWorkspaceUris",[]);await g.globalState.update("CopilotGeneratedWorkspaceUris",[...v,h.toString()]);try{await XGe(h)}catch{}await Je.commands.executeCommand("vscode.openFolder",h)})}))}async function zGe(t,e){let r=t.get(mr),n=r.globalState.get("CopilotGeneratedWorkspaceUris",[]),i=Je.workspace.workspaceFolders?.[0]?.uri.toString();if(!i)return;let[o,s]=n.reduce(([a,l],c)=>c===i?[a,!0]:[[...a,c],l],[[],!1]);if(s){let a=t.get(Ge).getConfig(Qe.WorkspaceExperimentalFileLimit);if(a<=0)return;let l=await Hhe(Je.Uri.parse(i),a),c=new Je.WorkspaceEdit,u=new Je.CancellationTokenSource().token;for(let d of l){let f=await $Ge(d.uri,u);if(!f.length)continue;let m=await Xue(t,e,d,f[0],u);m&&c.set(d.uri,m)}let p=Je.l10n.t("Apply Fixes");if(c.size>0){if(await Je.window.showInformationMessage(Je.l10n.t("We detected errors in your project. Would you like to apply the suggested fixes?"),p)!==p)return;await Je.workspace.applyEdit(c)}await r.globalState.update("CopilotGeneratedWorkspaceUris",o)}}async function $Ge(t,e,r=5e3){let n,i;return new Promise(o=>{n=e.onCancellationRequested(o);let s;i=setTimeout(()=>{s?.dispose(),o([])},r),new Promise(a=>{s=Je.languages.onDidChangeDiagnostics(async l=>{if(l.uris.map(String).includes(t.toString())){let c=Je.languages.getDiagnostics(t);if(c.length>0){let u=c.filter(p=>KGe(p));a(u)}}else a([])})}).then(a=>{s?.dispose(),o(a)})}).finally(()=>{n.dispose(),clearTimeout(i)})}var WGe=[".txt",".md",".json",".ini",".lock",".gitignore",".gitattributes",".env"];async function Hhe(t,e,r=[]){let n=await Je.workspace.fs.readDirectory(t);for(let[i,o]of n){if(r.length>e)break;if(o===Je.FileType.File&&!WGe.includes((0,Uhe.extname)(i))){let s=Je.Uri.joinPath(t,i),a=await Je.window.showTextDocument(s);r.push(a.document)}else o===Je.FileType.Directory&&await Hhe(Je.Uri.joinPath(t,i),e,r)}return r}function KGe(t){return t.severity===Je.DiagnosticSeverity.Error&&t.message.includes("Did you mean")}async function YGe(t,e){let r=0,n=!0,i=e;for(;n;)try{await Je.workspace.fs.stat(Je.Uri.joinPath(t,i)),i=e+"-"+ ++r}catch{n=!1}return i}async function QGe(t){try{return await Je.workspace.fs.stat(t),!0}catch{return!1}}async function XGe(t){let e=JGe();if(e)if(await QGe(e)){let r=await Je.workspace.fs.readFile(e).then(i=>new Bhe.TextDecoder().decode(i)),n=JSON.parse(r);n.push(t.toString()),await Je.workspace.fs.writeFile(e,Buffer.from(JSON.stringify(n,null,2)))}else await Je.workspace.fs.writeFile(e,Buffer.from(JSON.stringify([t.toString()],null,2)))}function JGe(){let t=Je.env.appName.indexOf("Insider")>0||Je.env.appName.indexOf("Code - OSS Dev")>=0?"Code - Insiders":"Code",e=Je.Uri.file(process.env.HOME||(process.env.USERPROFILE?process.env.USERPROFILE:""));switch(process.platform){case"darwin":return Je.Uri.joinPath(e,"Library","Application Support",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"linux":return Je.Uri.joinPath(e,".config",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"win32":return process.env.APPDATA?Je.Uri.joinPath(Je.Uri.file(process.env.APPDATA),t,"User","workspaceStorage","aiGeneratedWorkspaces.json"):void 0;default:return}}async function jhe(t,e){let r=t.get(Rr),n=t.get(Ao),i=t.get(ca),o=t.get(At),s=t.get(Ro),a=t.get(Vl),l=t.get(Ka),c=o.getWorkspaceFolders().map(v=>v.fsPath+"/"),u=o.notebookDocuments.map(v=>v.uri.fsPath),d=(await Promise.all(e.map(v=>i.getWorkspaceSymbols(v)))).flat().map(v=>({name:v.name,kind:v.kind,containerName:v.containerName,filePath:v.location.uri.fsPath,start:v.location.range.start,end:v.location.range.end})),f=r.activeTextEditor?n.getDiagnostics(r.activeTextEditor.document.uri).map(v=>({start:v.range.start,end:v.range.end,message:v.message,severity:v.severity,relatedInformation:v.relatedInformation?.map(ZGe)})):[],m=r.activeTextEditor?{selections:r.activeTextEditor?.selections.map(v=>({anchor:v.anchor,active:v.active,isReversed:v.isReversed}))??[],documentFilePath:r.activeTextEditor?.document.uri.fsPath??"",visibleRanges:r.activeTextEditor?.visibleRanges.map(v=>({start:v.start,end:v.end}))??[],languageId:r.activeTextEditor?.document.languageId??"javascript"}:void 0,h=s.terminalLastCommand?{commandLine:s.terminalLastCommand.commandLine,cwd:typeof s.terminalLastCommand.cwd=="object"?s.terminalLastCommand.cwd.toString():s.terminalLastCommand.cwd,exitCode:s.terminalLastCommand.exitCode,output:s.terminalLastCommand.output}:void 0;return{workspaceFoldersFilePaths:c,symbols:d,activeFileDiagnostics:f,activeTextEditor:m,debugConsoleOutput:a.consoleOutput,terminalBuffer:s.terminalBuffer,terminalLastCommand:h,terminalSelection:s.terminalSelection,terminalShellType:s.terminalShellType,repoContexts:l.repositories,notebookDocumentFilePaths:u}}function ZGe(t){return{filePath:t.location.uri.fsPath,start:t.location.range.start,end:t.location.range.end,message:t.message}}var xv=class{constructor(e){this.accessor=e;if(this.logger=e.get(Le).getLogger("chat"),this._enabled=!1,this._activated=!1,Ee.interactive?._version!==1){this.logger.warn("Not activating ConversationFeature- api version mismatch");return}this.registerCopilotTokenListener(e)}get enabled(){return this._enabled}set enabled(e){e&&!this.activated&&(this.activated=!0),Ee.commands.executeCommand("setContext","github.copilot.interactiveSession.disabled",!e),this._enabled=e}get activated(){return this._activated}set activated(e){if(!this._activated){if(!this._activated&&e){let r=this.accessor.get(Wa);this.registerProviders(r),this.registerCommands(r),this.registerRelatedInformationProviders(),this.registerChatVariables()}this._activated=e}}getLastInteractiveSession(){return this.interactiveSessionProvider?.getLastSession()}registerProviders(e){try{let r=Ee.chat.registerChatResponseProvider("copilot",new UP(this.accessor),{name:"gpt-3.5-turbo"});this.interactiveSessionProvider=new $P(this.accessor,e);let n=Ee.interactive.registerInteractiveSessionProvider("copilot",this.interactiveSessionProvider);this.interactiveEditorSessionProvider=new MP(this.accessor,e.rejectionMessage);let i=Ee.interactive.registerInteractiveEditorSessionProvider(this.interactiveEditorSessionProvider,{supportReportIssue:this.accessor.get(Ge).getConfig(Qe.DebugReportFeedback)});khe(this.accessor),this.accessor.get(mr).subscriptions.push(r,n,i),"registerMappedEditsProvider"in Ee.chat&&Ee.chat.registerMappedEditsProvider("*",new GP),this.accessor.get(V2).register(e).catch(o=>{this.logger.error("Registration of chat agents failed:",o.toString())})}catch(r){this.logger.error("Registration of interactive providers failed:",r.toString())}}registerCommands(e){let r=i=>"body"in i&&(i.body instanceof Ee.MarkdownString||typeof i.body=="string"),n=i=>"range"in i&&i.range instanceof Ee.Range;this.accessor.get(mr).subscriptions.push(Ee.commands.registerCommand("github.copilot.interactiveSession.feedback",async()=>Ee.env.openExternal(Ee.Uri.parse(wq()))),Ee.commands.registerCommand("github.copilot.ghpr.applySuggestion",async(i,o)=>{if(!r(i)||!n(o))return;let s=i.body instanceof Ee.MarkdownString?i.body.value:i.body;await Ee.commands.executeCommand("vscode.editorChat.start",{initialRange:o.range,message:s,autoSend:!0})}),Ee.commands.registerCommand("github.copilot.debug.workbenchState",async()=>{let i=await Ee.window.showInputBox({prompt:"Enter a comma-separated list of symbol queries. Can be left blank if not using WorkspaceSymbols"}),o=await Ee.window.showInputBox({prompt:"Enter a file name - .state.json will be appended as the extension",value:"workspaceState"});if(!o)return;let s=await jhe(this.accessor,i?.split(",")??[]);if(!s)return;let a=Ee.workspace.workspaceFolders?.[0].uri;if(!a)return;let l=Ee.Uri.joinPath(a,`${o}.state.json`),c=JSON.stringify(s,null,2);c=c.replace(new RegExp(`${a.fsPath}/`,"g"),"./"),Ee.workspace.fs.writeFile(l,Buffer.from(c))}),Ee.commands.registerCommand("github.copilot.terminal.explainTerminalSelection",async()=>await Ee.commands.executeCommand("workbench.action.quickchat.toggle",{query:`@${Ml} #terminalSelection`})),Ee.commands.registerCommand("github.copilot.terminal.explainTerminalSelectionContextMenu",()=>Ee.commands.executeCommand("github.copilot.terminal.explainTerminalSelection")),Ee.commands.registerCommand("github.copilot.terminal.explainTerminalLastCommand",async()=>await Ee.commands.executeCommand("workbench.action.quickchat.toggle",{query:`@${Ml} #terminalLastCommand`})),Ee.commands.registerCommand("github.copilot.terminal.suggestCommand",async()=>{await Ee.commands.executeCommand("workbench.action.quickchat.toggle",{query:`@${Ml} `,isPartialQuery:!0})}),Ee.commands.registerCommand("github.copilot.terminal.generateCommitMessage",async()=>{let i=this.accessor.get(aR),o=Ee.workspace.workspaceFolders;if(!o?.length)return;let s=o.length===1?o[0].uri:await Ee.window.showWorkspaceFolderPick().then(f=>f?.uri);if(!s)return;let a=await i.getRepositoryDiff(s);if(!a?.length){Ee.window.showInformationMessage("No changes to commit.");return}let l=new ly,u=await new i1(this.accessor).generateGitCommitMessage(a,3,l.token);if(!u||l.token.isCancellationRequested)return;let d=`git commit -m "${u.replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}"`;Ee.window.activeTerminal?.sendText(d,!1)}),Ee.commands.registerCommand("github.copilot.git.generateCommitMessage",async(i,o,s)=>{await new BP(this.accessor).run(i,s)}),Ee.commands.registerCommand(mT,async i=>{let o=Ee.workspace.workspaceFolders?.[0].uri;if(!o)return;let s=Ee.Uri.joinPath(o,i);if(this.accessor.get(wr).sendTelemetryEvent("panel.action.filelink"),await a(s))await Ee.commands.executeCommand("revealInExplorer",s);else return Ee.commands.executeCommand("vscode.open",s);async function a(l){if(s.path.endsWith("/"))return!0;try{return(await Ee.workspace.fs.stat(l)).type===Ee.FileType.Directory}catch{return!1}}}),Ee.commands.registerCommand(hT,async(i,o,s)=>{if(s??=Ee.workspace.workspaceFolders?.[0].uri,!s)return;let a=Ee.Uri.joinPath(s,i),l=await Ee.commands.executeCommand("vscode.executeDocumentSymbolProvider",a);if(l){let c=Ghe(l,o);if(this.accessor.get(wr).sendTelemetryEvent("panel.action.symbollink",{},{hadMatch:c?1:0}),c){let u=c instanceof Ee.SymbolInformation?c.location.range:c.selectionRange;return Ee.commands.executeCommand("vscode.open",a,{selection:new Ee.Range(u.start,u.start)})}}return Ee.commands.executeCommand("vscode.open",a)}),lpe((i,o,s)=>{let a=/(?<!\[)`([^`\s]+)`(?!\])/g;return new class{constructor(){this.fileSymbols=new yp(async()=>{let c=new XC;for(let p of i)c.add(wt.isUri(p.anchor)?p.anchor:p.anchor.uri);let u=new Xi;return await Promise.all(Array.from(c,async p=>{let d=await bp(Promise.resolve(Ee.commands.executeCommand("vscode.executeDocumentSymbolProvider",p)),5e3);d&&u.set(p,d)})),u});this.resolvedSymbols=new Map}async linkify(c,u){if(!o.length)return c;let p=new Set;for(let[d,f]of c.matchAll(a))this.resolvedSymbols.has(f)||p.add(f);if(p.size){let d=await this.fileSymbols.value;if(u?.isCancellationRequested)return c;for(let f of p){let m;for(let[h,g]of d){let v=g&&Ghe(g,f);if(v){m=v instanceof Ee.SymbolInformation?v.location:new Ee.Location(h,v.range);break}}this.resolvedSymbols.set(f,m)}}return c.replace(a,(d,f)=>{let m=this.resolvedSymbols.get(f);if(m){let h=rce(o[0],m.uri);if(h)return oU(f,h)}return d})}}}),eVe(this.accessor,e),qhe(this.accessor,e),rVe(this.accessor),tVe())}registerRelatedInformationProviders(){this.accessor.get(mr).subscriptions.push(Ee.ai.registerRelatedInformationProvider(Ee.RelatedInformationType.CommandInformation,this.accessor.get(Uf)),Ee.ai.registerRelatedInformationProvider(Ee.RelatedInformationType.SettingInformation,this.accessor.get(Bf)))}registerChatVariables(){this.accessor.get(jp).getVariables().forEach(e=>{this.accessor.get(mr).subscriptions.push(Ee.chat.registerVariable(e.name,e.description??"",{resolve:async(r,n,i)=>{let o={endpoint:await Fr(this.accessor,3),message:n.message},s=await e.resolve(this.accessor,o,i);return s?[{level:Ee.ChatVariableLevel?Ee.ChatVariableLevel.Full:"full",value:s.userMessages.join(`

`),description:""}]:[]}}))})}registerCopilotTokenListener(e){e.get(Ho).on("onCopilotToken",(r,n)=>{this.logger.info(`copilot token chat_enabled: ${n.chat_enabled}`),this.enabled=n.chat_enabled??!1})}};function eVe(t,e){let r=t.get(Ge);return Ee.commands.registerCommand("github.copilot.newNotebook",async n=>{let i=r.getConfig(Qe.NotebookIterativeImproving);await Ee.window.withProgress({location:Ee.ProgressLocation.Notification},async o=>{let s=new Ee.NotebookData([]);s.metadata={custom:{cells:[],metadata:{orig_nbformat:4},nbformat:4,nbformat_minor:2}};let a=await Ee.workspace.openNotebookDocument("jupyter-notebook",s),l=await Ee.window.showNotebookDocument(a);o.report({message:Ee.l10n.t("Generating notebook...")});let c=n.description,u=n.sections,p=await Fr(t,2);for(let d of u){let f=l.notebook.getCells().filter(b=>b.kind===Ee.NotebookCellKind.Code).map(b=>b.document.getText()).join(`
`),m=new Ee.CancellationTokenSource;o.report({message:Ee.l10n.t('Generating section "{0}"...',d.title)});let h=await Jue(t,p,e,c,d,f,m.token);if(!h)return;if(i){o.report({message:Ee.l10n.t('Improving code for section "{0}"...',d.title)});let b=await Zue(t,p,e,c,d,f,h,m.token);if(!b)return;h=b}let g=new Ee.NotebookCellData(Ee.NotebookCellKind.Markup,`# ${d.title}
${d.content}`,"markdown"),v=new Ee.NotebookCellData(Ee.NotebookCellKind.Code,h,"python"),_=Ee.NotebookEdit.insertCells(a.cellCount,[g,v]),y=new Ee.WorkspaceEdit;y.set(a.uri,[_]),await Ee.workspace.applyEdit(y),l.revealRange(new Ee.NotebookRange(a.cellCount-1,a.cellCount),Ee.NotebookEditorRevealType.Default),l.selection=new Ee.NotebookRange(a.cellCount-1,a.cellCount)}o.report({increment:100})})})}function tVe(){return Ee.commands.registerCommand("github.copilot.executeSearch",async t=>{let e=t.filesToExclude.length>0||t.filesToInclude.length>0;Ee.commands.executeCommand("workbench.view.search.focus").then(()=>Ee.commands.executeCommand("workbench.action.search.toggleQueryDetails",{show:e})),Ee.commands.executeCommand("workbench.action.findInFiles",t)})}function rVe(t){return new jP(t)}function KP(t,e){if(!e.length)return;let r;for(let n of t)if(n.children){let i=n.name===e[0]?{symbol:n,matchCount:1}:void 0;if(i){let a=KP(n.children,e.slice(1));a&&(i={symbol:a.symbol,matchCount:i.matchCount+a.matchCount})}let o=KP(n.children,e),s;i&&o?s=i.matchCount>=o.matchCount?i:o:s=i??o,s&&(!r||s.matchCount>r?.matchCount)&&(r=s)}else n.name===e[0]&&(r??={symbol:n,matchCount:1});return r}function Ghe(t,e){function r(n){return Array.from(n.matchAll(/[\w$][\w\d$]*/g),i=>i[0])}return(KP(t,[e])??KP(t,r(e)))?.symbol}var Yc=Oe(require("vscode"));var Aq="---------------------------------",YP=class extends Kl{constructor(r){super();this.accessor=r}async _canReport(){return!(!this.accessor.get(Ge).getConfig(Qe.DebugReportFeedback)||!(await this.accessor.get(Lt).getCopilotToken(this.accessor))?.isInternal)}async reportInline(r,n,i){if(!await this._canReport())return;let o=r.getLatestTurn();if(!o)return;let s=n.intent?this._embedCodeblock("INTENT",JSON.stringify(n.intent,null,"	")):"",a=this._embedCodeblock("CONTEXT",JSON.stringify({document:n.document.uri.toString(),fileIndentInfo:n.fileIndentInfo,language:n.language,wholeRange:n.wholeRange,selection:n.selection},null,"	")),l="",c=o.chatMessages;if(c&&c.length>0){let m=c.map(h=>this._embedCodeblock(h.role.toUpperCase(),h.content)).join(`
`);l=`	${Aq}
${this._headerSeparator()}PROMPT MESSAGES:
${m}`}else l=this._embedCodeblock(o.request.type.toUpperCase(),o.request.message);let u=this._embedCodeblock("ASSISTANT",o.response?.message||""),p=this._embedCodeblock("Parsed response",JSON.stringify(i,null,"	")),d=`${s}
${a}
${l}
${u}
${p}
`,f=`
* VS Code version: ${Yc.version}
* Language: ${Yc.env.language}

<details><summary>Details</summary>
<p>

${d}

</p>
</details>
`;await this._reportIssue("Feedback for inline chat",f)}async reportChat(r){if(!await this._canReport())return;let n=r.getLatestTurn();if(!n)return;let i="",o=n.chatMessages;if(o&&o.length>0){let u=o.map(p=>this._embedCodeblock(p.role.toUpperCase(),p.content)).join(`
`);i=`	${Aq}
${this._headerSeparator()}PROMPT MESSAGES:
${u}`}else i=this._embedCodeblock(n.request.type.toUpperCase(),n.request.message);let s=n.intentInvocation?.intent?this._embedCodeblock("INTENT",`[${n.intentInvocation.intent.id}] ${n.intentInvocation.intent.description}`):"",a=this._embedCodeblock("ASSISTANT",n.response?.message||""),l=`${s}
${i}
${a}
`,c=`
* VS Code version: ${Yc.version}
* Language: ${Yc.env.language}

<details><summary>Details</summary>
<p>

${l}

</p>
</details>`;await this._reportIssue("Feedback for sidebar chat",c)}_embedCodeblock(r,n){let i=this._bodySeparator()+n.split(`
`).join(`
${this._bodySeparator()}`);return`	${Aq}
${this._headerSeparator()}${r}:
${i}`}_headerSeparator(){return"	"}_bodySeparator(){return"		"}async _reportIssue(r,n){let i=encodeURIComponent(r);await Yc.env.clipboard.writeText(n);let o=encodeURIComponent("We have written the needed data into your clipboard because it was too large to send. Please paste."),s=`https://github.com/microsoft/vscode-copilot/issues/new?title=${i}&body=${o}`;Yc.env.clipboard.writeText(n),Yc.env.openExternal(Yc.Uri.parse(s))}};var KT=Oe(require("vscode")),QP=class{constructor(){this._disposables=[];this._disposables.push(...this.initializeGitExtensionApi())}initializeGitExtensionApi(){let e=[],r=KT.extensions.getExtension("vscode.git"),n=async()=>{let i=await r.activate(),o=s=>{this._gitExtensionApi=s?i.getAPI(1):void 0};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{let i=KT.extensions.onDidChange(()=>{!r&&KT.extensions.getExtension("vscode.git")&&(r=KT.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}async getRepositoryDiff(e){let r=await this._getRepository(e);if(!r)return;let n=[];if(r.state.indexChanges.length!==0)for(let i of r.state.indexChanges.map(o=>o.uri.fsPath))n.push(await r.diffIndexWithHEAD(i));else for(let i of r.state.workingTreeChanges.map(o=>o.uri.fsPath))n.push(await r.diffWithHEAD(i));return n}async _getRepository(e){return await this._gitExtensionApi?.openRepository(e)??void 0}dispose(){this._disposables.forEach(e=>e.dispose())}};var Rq=Oe(require("vscode"));var XP=class extends Zg{addEditorSpecificFilters(){return{"X-VSCode-Build":Rq.env.appName,"X-VSCode-Language":Rq.env.language}}};var $he=require("vscode");var Whe="github-enterprise",Vhe="https://github.com";function zhe(t){return t.getConfig(Qe.AuthProvider)==="github-enterprise"?$he.workspace.getConfiguration(Whe).get("uri")??Vhe:Vhe}var JP=class extends yI{constructor(r){super(zhe(r));this.configurationService=r}updateBaseUrl(r,n){super.updateBaseUrl(r,zhe(this.configurationService))}};function Khe(t,e){(t.affectsConfiguration(`${Dd}.advanced`)||t.affectsConfiguration(`${Whe}.uri`))&&e.get($u).updateBaseUrl(e)}var Dq=Oe(require("vscode"));var ZP=class extends am{async loadKerberos(){try{return require(`${Dq.env.appRoot}/node_modules.asar/kerberos`)}catch{}try{return require(`${Dq.env.appRoot}/node_modules/kerberos`)}catch{}}};var Yhe=Oe(require("os")),Pq=Oe(require("vscode"));var eN=class extends Yf{async loadCaCerts(){let e=await this.loadBuiltInWinCAModule(),r=new Set,n=new e.Crypt32;try{let i;for(;i=n.next();)r.add(nVe(i))}finally{n.done()}return Array.from(r)}async loadBuiltInWinCAModule(){try{return require(`${Pq.env.appRoot}/node_modules.asar/@vscode/windows-ca-certs`)}catch{}try{return require(`${Pq.env.appRoot}/node_modules/@vscode/windows-ca-certs`)}catch{}}};function nVe(t){let e=["-----BEGIN CERTIFICATE-----"],r=t.toString("base64");for(let n=0;n<r.length;n+=64)e.push(r.substr(n,64));return e.push("-----END CERTIFICATE-----",""),e.join(Yhe.EOL)}var Xhe=require("net"),Jhe=require("url"),s1=require("vscode");function iVe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy||null}function Zhe(t,e){s1.workspace.onDidChangeConfiguration(r=>{let n=r.affectsConfiguration("http.proxy");(r.affectsConfiguration("http.proxyStrictSSL")||r.affectsConfiguration("http.proxyAuthorization")||r.affectsConfiguration("http.proxyKerberosServicePrincipal")||n)&&Qhe(t,e,n)}),Qhe(t,e)}var Qhe=(t,e,r)=>{let i=s1.workspace.getConfiguration("http").get("proxy")||iVe(e);if(i){let o={},s=s1.workspace.getConfiguration("http").get("proxyAuthorization"),a=s1.workspace.getConfiguration("http").get("proxyStrictSSL",!0);s&&(o["Proxy-Authorization"]=s);let l=i,c=i.split(":");if(c.length>2){if(i.includes("[")){let v=i.indexOf("["),_=i.indexOf("]");l=i.substring(v+1,_)}}else l=c[0];let u=(0,Xhe.isIP)(l);u===4?i=`https://${i}`:u===6&&(i.includes("[")?i.startsWith("https://")||(i=`https://${i}`):i=`https://[${i}]`);let{hostname:p,port:d,username:f,password:m}=oVe(i),h=f&&m&&`${decodeURIComponent(f)}:${decodeURIComponent(m)}`;t.proxySettings={host:p,port:parseInt(d),proxyAuth:h,headers:o};let g=s1.workspace.getConfiguration("http").get("proxyKerberosServicePrincipal");g&&(t.proxySettings.kerberosServicePrincipal=g),t.rejectUnauthorized=a}else r&&!i&&(t.proxySettings=void 0)};function oVe(t){try{return new Jhe.URL(t)}catch{throw new Error(`Invalid proxy URL: '${t}'`)}}var ks=Oe(require("fs"));var tN=class extends Mr{async stat(e){let r=await ks.promises.stat(e.fsPath);return{type:r.isFile()?1:2,ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size}}async readDirectory(e){Gp(e);let r=await ks.promises.readdir(e.fsPath,{withFileTypes:!0}),n=[];for(let i of r)n.push([i.name,i.isFile()?1:2]);return n}async createDirectory(e){return Gp(e),ks.promises.mkdir(e.fsPath)}async readFile(e){return Gp(e),ks.promises.readFile(e.fsPath)}async writeFile(e,r){return Gp(e),ks.promises.writeFile(e.fsPath,r)}async delete(e,r){return Gp(e),ks.promises.rm(e.fsPath,{recursive:r?.recursive??!1})}async rename(e,r,n){if(Gp(e),Gp(r),!(!n?.overwrite&&ks.existsSync(r.fsPath)))return ks.promises.rename(e.fsPath,r.fsPath)}async copy(e,r,n){Gp(e),Gp(r);let i=n?.overwrite?ks.constants.COPYFILE_FICLONE:ks.constants.COPYFILE_EXCL;return ks.promises.copyFile(e.fsPath,r.fsPath,i)}isWritableFileSystem(e){return!0}createFileSystemWatcher(e){return new class{constructor(){this.ignoreCreateEvents=!1;this.ignoreChangeEvents=!1;this.ignoreDeleteEvents=!1;this.onDidCreate=_p.None;this.onDidChange=_p.None;this.onDidDelete=_p.None}dispose(){}}}};function Gp(t){if(t.scheme!=="file")throw new Error(`URI must be of file scheme, received ${t.scheme}`)}var YT=Oe(require("vscode"));var rN=class extends jt{get sessionId(){return YT.env.sessionId}get machineId(){return YT.env.machineId}getEditorInfo(){return new Kx("vscode",YT.version)}getEditorPluginInfo(){return new Kx("copilot-chat",Ys.version)}};function ege(t){t.define(Ya,new Ya(t)),t.define(jt,new rN),t.define(dt,new RE(t)),t.define(Ku,Ku.fromEnvironment(!1)),t.define(Ho,new Ho),t.define(Kf,new Kf),t.define(os,Hme(t)),t.define(cm,zme(t));let e=t.get(Ge).getConfig(Qe.DebugUseNodeFetcher);t.define(Nr,e?new e1(t.get(jt)):new Zy(t)),t.define(Ig,new Ig(t)),t.define(ff,new ff),t.define(Lh,new Lh),t.define(kh,new kh),t.define(Pd,new pI),t.define(gl,new bI),t.define(Mr,new tN),t.define(Mi,new t1(t)),t.define(ma,new ma(t)),t.define(Qg,new Qg(t)),t.define(jp,new jp(t)),t.define(Fg,new Fg(t)),t.define(Ug,new Ug(t))}var iS=Oe(_ve());function N$e(t){return t?iS.TargetPopulation.Insiders:iS.TargetPopulation.Public}async function yve(t,e,r){let n=t.extension.id,i=t.extension.packageJSON.version,o=N$e(r);return(0,iS.getExperimentationService)(n,i,o,e,t.globalState)}var dz=Oe(obe());var PO=class{constructor(e,r,n,i,o){this._sharedProperties={};this._isInternal=!1;i.on("onCopilotToken",async(s,a)=>{if(this._username=(await gv(e))?.account?.label,this._sku=s.getTokenValue("sku"),this._isInternal=s.isInternal,this.sendTelemetryEvent("token",{},{chatEnabled:a.chat_enabled?1:0}),!s.organization_list||!a.chat_enabled){this._internalTelemetryReporter=void 0;return}s.isInternal&&(this._internalTelemetryReporter=new dz.default(r),o.subscriptions.push(this._internalTelemetryReporter))}),this._externalTelemetryReporter=new dz.default(n),o.subscriptions.push(this._externalTelemetryReporter)}setSharedProperty(e,r){this._sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this._isInternal&&this.sendInternalTelemetryEvent(e,n),this.sendTelemetryEvent(e,n)}sendInternalTelemetryEvent(e,r,n){this._internalTelemetryReporter&&(r={...r,"common.userName":this._username??"undefined",...this._sharedProperties},this._internalTelemetryReporter.sendRawTelemetryEvent(e,r,n))}sendTelemetryEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined",...this._sharedProperties},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryEvent(e,r,n)}sendTelemetryErrorEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryErrorEvent(e,r,n)}};var PYe=hr.window.createOutputChannel("GitHub Copilot Chat",{log:!0});async function NYe(t,e){if(t.extensionMode===hr.ExtensionMode.Test&&!e)return t;hr.l10n.bundle&&qx.config({contents:hr.l10n.bundle});let r=await abe(t);t.subscriptions.push(cbe(r)),t.subscriptions.push(hr.window.registerTerminalQuickFixProvider("copilot-chat.fixWithCopilot",{provideTerminalQuickFixes(o,s){return[{command:"github.copilot.terminal.explainTerminalLastCommand",title:qx.t("Explain using Copilot")}]}})),t.subscriptions.push(hr.window.registerTerminalQuickFixProvider("copilot-chat.generateCommitMessage",{async provideTerminalQuickFixes(o,s){return[{command:"github.copilot.terminal.generateCommitMessage",title:qx.t("Generate Commit Message")}]}}));let n=r.get(dt);if(await(async()=>{let o=a=>{let l=a.message||a;n.sendErrorTelemetry("activationFailed",Er.createAndMarkAsIssued({reason:l})),n.deactivate();let c=l==="GitHubLoginFailed"?vq:`GitHub Copilot could not connect to server. Extension activation failed: "${l}"`;r.get(Le).defaultLogger.error(c),hr.commands.executeCommand("setContext","github.copilot.activated",!1);let u=hr.authentication.onDidChangeSessions(async p=>{try{await Ehe(p,r)!==void 0&&(hr.commands.executeCommand("setContext","github.copilot.activated",!0),UC(r),u.dispose())}catch(d){UC(r,d),o(d)}})};try{await r.get(Lt).getCopilotToken(r),hr.commands.executeCommand("setContext","github.copilot.activated",!0)}catch(a){r.get(Nr).isDNSLookupFailedError(a)&&t.subscriptions.push(OYe(r,o)),UC(r,a),o(a)}t.subscriptions.push(hr.workspace.onDidChangeConfiguration(a=>Khe(a,r)));let s=t.extensionMode!==hr.ExtensionMode.Development;Lce(s,r.get(Le).getLogger("parser proxy")),Mhe(r),_f.start(r.get(jt).isPreRelease()),n.sendTelemetry("extension.activate")})(),hr.ExtensionMode.Test===t.extensionMode)return r}async function abe(t){let e=new Jx;e.define(Ge,new pP),e.define(Le,new Le([new iI,new oI(PYe)],e.get(Ge))),ege(e),e.define(Mr,new mP),e.define(mr,t),e.define(Bc,new Bc(e)),e.define(es,new CP(e));let r=new IP;e.define(Rr,r),e.define(lm,new hP(e)),e.define(Ka,new gP(r)),e.define(Ao,new EP),e.define(pa,new fP),e.define(ca,new TP),e.define(am,new ZP),e.define(Yf,new eN),e.define(Ro,new AP),e.define(Vl,new dP),e.define(Ep,new class{setProgress(){}removeProgress(){}setWarning(){}setError(a){console.error(a)}setInactive(){}forceNormal(){}}),e.define(jo,new jo(e)),e.define(V2,new kP(e));let n=t.extension.packageJSON.internalAIKey??"",i=t.extension.packageJSON.ariaKey??"";if(t.extensionMode===hr.ExtensionMode.Test)e.define(Ku,Ku.fromEnvironment(!0)),e.define(Lt,$me()),e.define(Pd,new lP),await sbe(e,t,n,i,"copilot-test",!0);else{let a=new PP(e.get(Ge));t.subscriptions.push(a),e.define(Lt,a),e.define(gl,new xI),await sbe(e,t,n,i,t.extension.packageJSON.name,hr.env.isTelemetryEnabled);let l=await e.get(Uc).getTreatmentVariableAsync("vscode","copilotchat.useNodeFetcher",!0),c=e.get(Ge).getConfig(Qe.DebugUseNodeFetcher)||l;e.define(Nr,c?new e1(e.get(jt)):new Zy(e))}e.define(fr,new sR(e)),e.define(tn,new tn),e.define(Mi,new t1(e)),e.define(Kl,new YP(e)),e.define(Nh,new DP),e.define(Zg,new XP),e.define($u,new JP(e.get(Ge))),e.define(Wa,{maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:e.get(Ge).getConfig(Qe.ConversationAdditionalPromptContext),rejectionMessage:qx.t("Sorry, but I can only assist with programming related questions.")}),Zhe(e.get(Nr),process.env),ppe(e);let o=new RP(e);e.define(At,o),e.define(Uf,new Uf(e,e.get(Mi))),e.define(Bf,new Bf(e,e.get(Mi))),e.define(qf,new qf(e)),e.define(Hg,new Hg(e)),e.define(Pp,new Pp(e)),e.define(xv,new xv(e)),e.define(aR,new QP),e.define(Xl,new SP(e));let s=new bP(e);return e.define(Mc,s),t.subscriptions.push(s),s.init(),e.seal(),e}async function kYe(t,e){if(hr.ExtensionMode.Production===e.extensionMode){let r=t.get(wr),n=await yve(e,r,t.get(jt).isPreRelease());t.define(Uc,n)}else t.define(Uc,new SR)}async function sbe(t,e,r,n,i,o){let s=await M2(t,i,o),a=hr.env.onDidChangeTelemetryEnabled(async l=>{s?.dispose(),s=await M2(t,e.extension.packageJSON.name,l&&hr.env.isTelemetryEnabled)});e.subscriptions.push(a),e.subscriptions.push(new hr.Disposable(()=>s?.dispose())),hr.ExtensionMode.Production===e.extensionMode?t.define(wr,new PO(t.get(Ge),r,n,t.get(Ho),e)):t.define(wr,new aP),kYe(t,e)}function cbe(t){return{dispose:async()=>{let e=t.get(dt);await e.sendTelemetry("extension.deactivate"),e.deactivate(),Mce()}}}var FC={Offline:"github.copilot.offline",IndividualDisabled:"github.copilot.interactiveSession.individual.disabled",IndividualExpired:"github.copilot.interactiveSession.individual.expired",EnterpriseDisabled:"github.copilot.interactiveSession.enterprise.disabled"};function UC(t,e){let r=Object.values(FC),n;t.get(Nr).isDNSLookupFailedError(e)?n=FC.Offline:e instanceof jT?n=FC.IndividualDisabled:e instanceof GT?n=FC.IndividualExpired:e instanceof VT&&(n=FC.EnterpriseDisabled),n&&hr.commands.executeCommand("setContext",n,!0);for(let o of r)o!==n&&hr.commands.executeCommand("setContext",o,!1)}function OYe(t,e){return hr.commands.registerCommand("github.copilot.offline",async()=>{try{await t.get(Lt).getCopilotToken(t),hr.commands.executeCommand("setContext","github.copilot.activated",!0),UC(t)}catch(r){if(t.get(Nr).isDNSLookupFailedError(r))return;UC(t,r),e(r)}})}0&&(module.exports={activate,createExtensionContext,onDeactivate});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
