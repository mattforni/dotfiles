"use strict";var b3e=Object.create;var WS=Object.defineProperty;var tie=Object.getOwnPropertyDescriptor;var x3e=Object.getOwnPropertyNames;var E3e=Object.getPrototypeOf,T3e=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(t&&(e=t(t=0)),e);var P=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Fn=(t,e)=>{for(var r in e)WS(t,r,{get:e[r],enumerable:!0})},rie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of x3e(e))!T3e.call(t,i)&&i!==r&&WS(t,i,{get:()=>e[i],enumerable:!(n=tie(e,i))||n.enumerable});return t};var we=(t,e,r)=>(r=t!=null?b3e(E3e(t)):{},rie(e||!t||!t.__esModule?WS(r,"default",{value:t,enumerable:!0}):r,t)),ki=t=>rie(WS({},"__esModule",{value:!0}),t),Bl=(t,e,r,n)=>{for(var i=n>1?void 0:n?tie(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&WS(e,r,i),i},aP=(t,e)=>(r,n)=>e(r,n,t);var xn=P((qmt,sie)=>{"use strict";var rU=Object.defineProperty,S3e=Object.getOwnPropertyDescriptor,I3e=Object.getOwnPropertyNames,C3e=Object.prototype.hasOwnProperty,w3e=(t,e)=>{for(var r in e)rU(t,r,{get:e[r],enumerable:!0})},R3e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of I3e(e))!C3e.call(t,i)&&i!==r&&rU(t,i,{get:()=>e[i],enumerable:!(n=S3e(e,i))||n.enumerable});return t},A3e=t=>R3e(rU({},"__esModule",{value:!0}),t),iie={};w3e(iie,{config:()=>L3e,t:()=>oie});sie.exports=A3e(iie);var P3e=require("fs"),N3e=require("fs/promises");async function D3e(t){if(t.protocol==="file:")return await(0,N3e.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let n=`Unexpected ${e.status} response while trying to read ${t}`;try{n+=`: ${await e.text()}`}catch{}throw new Error(n)}return await e.text()}throw new Error("Unsupported protocol")}function k3e(t){return(0,P3e.readFileSync)(t,"utf8")}var KS;function L3e(t){if("contents"in t){typeof t.contents=="string"?KS=JSON.parse(t.contents):KS=t.contents;return}if("fsPath"in t){let e=k3e(t.fsPath),r=JSON.parse(e);KS=nie(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=D3e(e).then(o=>{try{let s=JSON.parse(o);KS=nie(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function oie(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let u=1;u<e.length;u++)a+=`{${u-1}}`+e[u];return oie(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=KS?.[r];return o?typeof o=="string"?cP(o,i):o.comment?cP(o.message,i):cP(n,i):cP(n,i)}var O3e=/{([^}]+)}/g;function cP(t,e){return Object.keys(e).length===0?t:t.replace(O3e,(r,n)=>e[n]??r)}function nie(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var cie=P(nU=>{var aie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");nU.encode=function(t){if(0<=t&&t<aie.length)return aie[t];throw new TypeError("Must be between 0 and 63: "+t)};nU.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+c:o<=t&&t<=s?t-o+l:t==a?62:t==u?63:-1}});var sU=P(oU=>{var uie=cie(),iU=5,lie=1<<iU,die=lie-1,pie=lie;function M3e(t){return t<0?(-t<<1)+1:(t<<1)+0}function F3e(t){var e=(t&1)===1,r=t>>1;return e?-r:r}oU.encode=function(e){var r="",n,i=M3e(e);do n=i&die,i>>>=iU,i>0&&(n|=pie),r+=uie.encode(n);while(i>0);return r};oU.decode=function(e,r,n){var i=e.length,o=0,s=0,a,u;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(u=uie.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&pie),u&=die,o=o+(u<<s),s+=iU}while(a);n.value=F3e(o),n.rest=r}});var ab=P(_s=>{function U3e(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}_s.getArg=U3e;var fie=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,B3e=/^data:.+\,.+$/;function XS(t){var e=t.match(fie);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}_s.urlParse=XS;function ob(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}_s.urlGenerate=ob;function aU(t){var e=t,r=XS(t);if(r){if(!r.path)return t;e=r.path}for(var n=_s.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,ob(r)):e}_s.normalize=aU;function mie(t,e){t===""&&(t="."),e===""&&(e=".");var r=XS(e),n=XS(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),ob(r);if(r||e.match(B3e))return e;if(n&&!n.host&&!n.path)return n.host=e,ob(n);var i=e.charAt(0)==="/"?e:aU(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,ob(n)):i}_s.join=mie;_s.isAbsolute=function(t){return t.charAt(0)==="/"||fie.test(t)};function q3e(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}_s.relative=q3e;var hie=function(){var t=Object.create(null);return!("__proto__"in t)}();function gie(t){return t}function G3e(t){return vie(t)?"$"+t:t}_s.toSetString=hie?gie:G3e;function H3e(t){return vie(t)?t.slice(1):t}_s.fromSetString=hie?gie:H3e;function vie(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function j3e(t,e,r){var n=sb(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:sb(t.name,e.name)}_s.compareByOriginalPositions=j3e;function V3e(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=sb(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:sb(t.name,e.name)}_s.compareByGeneratedPositionsDeflated=V3e;function sb(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function z3e(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=sb(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:sb(t.name,e.name)}_s.compareByGeneratedPositionsInflated=z3e;function Y3e(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}_s.parseSourceMapInput=Y3e;function $3e(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=XS(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=mie(ob(n),e)}return aU(e)}_s.computeSourceURL=$3e});var lU=P(_ie=>{var cU=ab(),uU=Object.prototype.hasOwnProperty,z0=typeof Map<"u";function Sp(){this._array=[],this._set=z0?new Map:Object.create(null)}Sp.fromArray=function(e,r){for(var n=new Sp,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};Sp.prototype.size=function(){return z0?this._set.size:Object.getOwnPropertyNames(this._set).length};Sp.prototype.add=function(e,r){var n=z0?e:cU.toSetString(e),i=z0?this.has(e):uU.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(z0?this._set.set(e,o):this._set[n]=o)};Sp.prototype.has=function(e){if(z0)return this._set.has(e);var r=cU.toSetString(e);return uU.call(this._set,r)};Sp.prototype.indexOf=function(e){if(z0){var r=this._set.get(e);if(r>=0)return r}else{var n=cU.toSetString(e);if(uU.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};Sp.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Sp.prototype.toArray=function(){return this._array.slice()};_ie.ArraySet=Sp});var xie=P(bie=>{var yie=ab();function W3e(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||yie.compareByGeneratedPositionsInflated(t,e)<=0}function uP(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}uP.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};uP.prototype.add=function(e){W3e(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};uP.prototype.toArray=function(){return this._sorted||(this._array.sort(yie.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};bie.MappingList=uP});var dU=P(Eie=>{var QS=sU(),Li=ab(),lP=lU().ArraySet,K3e=xie().MappingList;function Fc(t){t||(t={}),this._file=Li.getArg(t,"file",null),this._sourceRoot=Li.getArg(t,"sourceRoot",null),this._skipValidation=Li.getArg(t,"skipValidation",!1),this._sources=new lP,this._names=new lP,this._mappings=new K3e,this._sourcesContents=null}Fc.prototype._version=3;Fc.fromSourceMap=function(e){var r=e.sourceRoot,n=new Fc({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Li.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Li.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};Fc.prototype.addMapping=function(e){var r=Li.getArg(e,"generated"),n=Li.getArg(e,"original",null),i=Li.getArg(e,"source",null),o=Li.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};Fc.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Li.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Li.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Li.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Fc.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Li.relative(o,i));var s=new lP,a=new lP;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=Li.join(n,u.source)),o!=null&&(u.source=Li.relative(o,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!s.has(l)&&s.add(l);var d=u.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=s,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Li.join(n,u)),o!=null&&(u=Li.relative(o,u)),this.setSourceContent(u,c))},this)};Fc.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};Fc.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",u,c,l,d,p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(c=p[f],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(f>0){if(!Li.compareByGeneratedPositionsInflated(c,p[f-1]))continue;u+=","}u+=QS.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),u+=QS.encode(d-s),s=d,u+=QS.encode(c.originalLine-1-i),i=c.originalLine-1,u+=QS.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=QS.encode(l-o),o=l)),a+=u}return a};Fc.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Li.relative(r,n));var i=Li.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Fc.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Fc.prototype.toString=function(){return JSON.stringify(this.toJSON())};Eie.SourceMapGenerator=Fc});var Tie=P(Y0=>{Y0.GREATEST_LOWER_BOUND=1;Y0.LEAST_UPPER_BOUND=2;function pU(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?pU(s,e,r,n,i,o):o==Y0.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?pU(t,s,r,n,i,o):o==Y0.LEAST_UPPER_BOUND?s:t<0?-1:t}Y0.search=function(e,r,n,i){if(r.length===0)return-1;var o=pU(-1,r.length,e,r,n,i||Y0.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var Iie=P(Sie=>{function fU(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function X3e(t,e){return Math.round(t+Math.random()*(e-t))}function mU(t,e,r,n){if(r<n){var i=X3e(r,n),o=r-1;fU(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,fU(t,o,a));fU(t,o+1,a);var u=o+1;mU(t,e,r,u-1),mU(t,e,u+1,n)}}Sie.quickSort=function(t,e){mU(t,e,0,t.length-1)}});var wie=P(dP=>{var Je=ab(),hU=Tie(),cb=lU().ArraySet,Q3e=sU(),JS=Iie().quickSort;function En(t,e){var r=t;return typeof t=="string"&&(r=Je.parseSourceMapInput(t)),r.sections!=null?new Gu(r,e):new jo(r,e)}En.fromSourceMap=function(t,e){return jo.fromSourceMap(t,e)};En.prototype._version=3;En.prototype.__generatedMappings=null;Object.defineProperty(En.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});En.prototype.__originalMappings=null;Object.defineProperty(En.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});En.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};En.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};En.GENERATED_ORDER=1;En.ORIGINAL_ORDER=2;En.GREATEST_LOWER_BOUND=1;En.LEAST_UPPER_BOUND=2;En.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||En.GENERATED_ORDER,s;switch(o){case En.GENERATED_ORDER:s=this._generatedMappings;break;case En.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=Je.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,i)};En.prototype.allGeneratedPositionsFor=function(e){var r=Je.getArg(e,"line"),n={source:Je.getArg(e,"source"),originalLine:r,originalColumn:Je.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Je.compareByOriginalPositions,hU.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:Je.getArg(s,"generatedLine",null),column:Je.getArg(s,"generatedColumn",null),lastColumn:Je.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var u=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==u;)i.push({line:Je.getArg(s,"generatedLine",null),column:Je.getArg(s,"generatedColumn",null),lastColumn:Je.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};dP.SourceMapConsumer=En;function jo(t,e){var r=t;typeof t=="string"&&(r=Je.parseSourceMapInput(t));var n=Je.getArg(r,"version"),i=Je.getArg(r,"sources"),o=Je.getArg(r,"names",[]),s=Je.getArg(r,"sourceRoot",null),a=Je.getArg(r,"sourcesContent",null),u=Je.getArg(r,"mappings"),c=Je.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=Je.normalize(s)),i=i.map(String).map(Je.normalize).map(function(l){return s&&Je.isAbsolute(s)&&Je.isAbsolute(l)?Je.relative(s,l):l}),this._names=cb.fromArray(o.map(String),!0),this._sources=cb.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(l){return Je.computeSourceURL(s,l,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}jo.prototype=Object.create(En.prototype);jo.prototype.consumer=En;jo.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Je.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};jo.fromSourceMap=function(e,r){var n=Object.create(jo.prototype),i=n._names=cb.fromArray(e._names.toArray(),!0),o=n._sources=cb.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Je.computeSourceURL(n.sourceRoot,f,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=s.length;c<l;c++){var d=s[c],p=new Cie;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=o.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=i.indexOf(d.name)),u.push(p)),a.push(p)}return JS(n.__originalMappings,Je.compareByOriginalPositions),n};jo.prototype._version=3;Object.defineProperty(jo.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Cie(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}jo.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,u=0,c=e.length,l=0,d={},p={},f=[],m=[],h,g,v,_,y;l<c;)if(e.charAt(l)===";")n++,l++,i=0;else if(e.charAt(l)===",")l++;else{for(h=new Cie,h.generatedLine=n,_=l;_<c&&!this._charIsMappingSeparator(e,_);_++);if(g=e.slice(l,_),v=d[g],v)l+=g.length;else{for(v=[];l<_;)Q3e.decode(e,l,p),y=p.value,l=p.rest,v.push(y);if(v.length===2)throw new Error("Found a source, but no line and column");if(v.length===3)throw new Error("Found a source and line, but no column");d[g]=v}h.generatedColumn=i+v[0],i=h.generatedColumn,v.length>1&&(h.source=a+v[1],a+=v[1],h.originalLine=o+v[2],o=h.originalLine,h.originalLine+=1,h.originalColumn=s+v[3],s=h.originalColumn,v.length>4&&(h.name=u+v[4],u+=v[4])),m.push(h),typeof h.originalLine=="number"&&f.push(h)}JS(m,Je.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,JS(f,Je.compareByOriginalPositions),this.__originalMappings=f};jo.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return hU.search(e,r,o,s)};jo.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};jo.prototype.originalPositionFor=function(e){var r={generatedLine:Je.getArg(e,"line"),generatedColumn:Je.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Je.compareByGeneratedPositionsDeflated,Je.getArg(e,"bias",En.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Je.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Je.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=Je.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:Je.getArg(i,"originalLine",null),column:Je.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};jo.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};jo.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Je.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Je.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};jo.prototype.generatedPositionFor=function(e){var r=Je.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Je.getArg(e,"line"),originalColumn:Je.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Je.compareByOriginalPositions,Je.getArg(e,"bias",En.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Je.getArg(o,"generatedLine",null),column:Je.getArg(o,"generatedColumn",null),lastColumn:Je.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};dP.BasicSourceMapConsumer=jo;function Gu(t,e){var r=t;typeof t=="string"&&(r=Je.parseSourceMapInput(t));var n=Je.getArg(r,"version"),i=Je.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new cb,this._names=new cb;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=Je.getArg(s,"offset"),u=Je.getArg(a,"line"),c=Je.getArg(a,"column");if(u<o.line||u===o.line&&c<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new En(Je.getArg(s,"map"),e)}})}Gu.prototype=Object.create(En.prototype);Gu.prototype.constructor=En;Gu.prototype._version=3;Object.defineProperty(Gu.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Gu.prototype.originalPositionFor=function(e){var r={generatedLine:Je.getArg(e,"line"),generatedColumn:Je.getArg(e,"column")},n=hU.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Gu.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Gu.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Gu.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Je.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};Gu.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],u=i.consumer._sources.at(a.source);u=Je.computeSourceURL(i.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=i.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}JS(this.__generatedMappings,Je.compareByGeneratedPositionsDeflated),JS(this.__originalMappings,Je.compareByOriginalPositions)};dP.IndexedSourceMapConsumer=Gu});var Aie=P(Rie=>{var J3e=dU().SourceMapGenerator,pP=ab(),Z3e=/(\r?\n)/,eOe=10,ub="$$$isSourceNode$$$";function Ja(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[ub]=!0,n!=null&&this.add(n)}Ja.fromStringWithSourceMap=function(e,r,n){var i=new Ja,o=e.split(Z3e),s=0,a=function(){var p=m(),f=m()||"";return p+f;function m(){return s<o.length?o[s++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(p){if(l!==null)if(u<p.generatedLine)d(l,a()),u++,c=0;else{var f=o[s]||"",m=f.substr(0,p.generatedColumn-c);o[s]=f.substr(p.generatedColumn-c),c=p.generatedColumn,d(l,m),l=p;return}for(;u<p.generatedLine;)i.add(a()),u++;if(c<p.generatedColumn){var f=o[s]||"";i.add(f.substr(0,p.generatedColumn)),o[s]=f.substr(p.generatedColumn),c=p.generatedColumn}l=p},this),s<o.length&&(l&&d(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=pP.join(n,p)),i.setSourceContent(p,f))}),i;function d(p,f){if(p===null||p.source===void 0)i.add(f);else{var m=n?pP.join(n,p.source):p.source;i.add(new Ja(p.originalLine,p.originalColumn,m,f,p.name))}}};Ja.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[ub]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Ja.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[ub]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Ja.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[ub]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Ja.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};Ja.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[ub]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};Ja.prototype.setSourceContent=function(e,r){this.sourceContents[pP.toSetString(e)]=r};Ja.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][ub]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(pP.fromSetString(i[r]),this.sourceContents[i[r]])};Ja.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};Ja.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new J3e(e),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,u=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var d=0,p=c.length;d<p;d++)c.charCodeAt(d)===eOe?(r.line++,r.column=0,d+1===p?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};Rie.SourceNode=Ja});var Pie=P(fP=>{fP.SourceMapGenerator=dU().SourceMapGenerator;fP.SourceMapConsumer=wie().SourceMapConsumer;fP.SourceNode=Aie().SourceNode});var Die=P((Jmt,Nie)=>{var tOe=Object.prototype.toString,gU=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function rOe(t){return tOe.call(t).slice(8,-1)==="ArrayBuffer"}function nOe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return gU?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function iOe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return gU?Buffer.from(t,e):new Buffer(t,e)}function oOe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return rOe(t)?nOe(t,e,r):typeof t=="string"?iOe(t,e):gU?Buffer.from(t):new Buffer(t)}Nie.exports=oOe});var qie=P((W0,bU)=>{var sOe=Pie().SourceMapConsumer,vU=require("path"),ql;try{ql=require("fs"),(!ql.existsSync||!ql.readFileSync)&&(ql=null)}catch{}var aOe=Die();function kie(t,e){return t.require(e)}var Lie=!1,Oie=!1,_U=!1,ZS="auto",$0={},eI={},cOe=/^data:application\/json[^,]+base64,/,Sm=[],Im=[];function xU(){return ZS==="browser"?!0:ZS==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function uOe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function lOe(){return typeof process=="object"&&process!==null?process.version:""}function dOe(){if(typeof process=="object"&&process!==null)return process.stderr}function pOe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function mP(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var EU=mP(Sm);Sm.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in $0)return $0[t];var e="";try{if(ql)ql.existsSync(t)&&(e=ql.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return $0[t]=e});function yU(t,e){if(!t)return e;var r=vU.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+vU.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+vU.resolve(r.slice(i.length),e)}function fOe(t){var e;if(xU())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=EU(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var TU=mP(Im);Im.push(function(t){var e=fOe(t);if(!e)return null;var r;if(cOe.test(e)){var n=e.slice(e.indexOf(",")+1);r=aOe(n,"base64").toString(),e=t}else e=yU(t,e),r=EU(e);return r?{url:e,map:r}:null});function SU(t){var e=eI[t.source];if(!e){var r=TU(t.source);r?(e=eI[t.source]={url:r.url,map:new sOe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=yU(e.url,i);$0[a]=s}})):e=eI[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=yU(e.url,n.source),n}return t}function Fie(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=SU({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Fie(e[2])+")":t}function mOe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),u=!(this.isToplevel()||a);if(u){var c=this.getTypeName();c==="[object Object]"&&(c="null");var l=this.getMethodName();o?(c&&o.indexOf(c)!=0&&(i+=c+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=c+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function Mie(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=mOe,e}function Uie(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(lOe())?0:62;n===1&&i>s&&!xU()&&!t.isEval()&&(i-=s);var a=SU({source:r,line:n,column:i});e.curPosition=a,t=Mie(t);var u=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=Fie(c),t=Mie(t),t.getEvalOrigin=function(){return c}),t}function hOe(t,e){_U&&($0={},eI={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+Uie(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function Bie(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=$0[r];if(!o&&ql&&ql.existsSync(r))try{o=ql.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function gOe(t){var e=Bie(t),r=dOe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),pOe(1)}function vOe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return gOe(arguments[1])}return t.apply(this,arguments)}}var _Oe=Sm.slice(0),yOe=Im.slice(0);W0.wrapCallSite=Uie;W0.getErrorSource=Bie;W0.mapSourcePosition=SU;W0.retrieveSourceMap=TU;W0.install=function(t){if(t=t||{},t.environment&&(ZS=t.environment,["node","browser","auto"].indexOf(ZS)===-1))throw new Error("environment "+ZS+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Sm.length=0),Sm.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Im.length=0),Im.unshift(t.retrieveSourceMap)),t.hookRequire&&!xU()){var e=kie(bU,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return $0[s]=o,eI[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(_U||(_U="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Lie||(Lie=!0,Error.prepareStackTrace=hOe),!Oie){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=kie(bU,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&uOe()&&(Oie=!0,vOe())}};W0.resetRetrieveHandlers=function(){Sm.length=0,Im.length=0,Sm=_Oe.slice(0),Im=yOe.slice(0),TU=mP(Im),EU=mP(Sm)}});var Boe=P((_0t,P5e)=>{P5e.exports={name:"copilot-chat",displayName:"GitHub Copilot Chat",description:"AI chat features powered by Copilot",version:"0.13.0",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"prod",publisher:"GitHub",homepage:"https://github.com/features/copilot",license:"SEE LICENSE IN LICENSE.txt",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-release"},bugs:{url:"https://aka.ms/microsoft/vscode-copilot-release"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/Copilot-App-Icon.png",pricing:"Trial",engines:{vscode:"^1.87.0-20240219",npm:">=9.0.0",node:">=18.0.0"},categories:["Programming Languages","Machine Learning","Education","Snippets"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup",description:"%github.copilot.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%github.copilot.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%github.copilot.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%github.copilot.badge.twitter%"}],activationEvents:["onStartupFinished","onLanguageModelAccess:copilot-gpt-3.5-turbo","onLanguageModelAccess:copilot-gpt-4"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["newSymbolNamesProvider","interactive","chatProvider","codeActionAI","findTextInFiles","findFiles2","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","mappedEditsProvider","aiRelatedInformation","chatParticipant","chatParticipantAdditions","defaultChatParticipant","chatVariableResolver","contribSourceControlInputBoxMenu"],contributes:{interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!github.copilot.interactiveSession.disabled"}],viewsWelcome:[{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.signIn%",when:"!github.copilot.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual%",when:"github.copilot.interactiveSession.individual.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.individual.expired%",when:"github.copilot.interactiveSession.individual.expired"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.enterprise%",when:"github.copilot.interactiveSession.enterprise.disabled"},{view:"workbench.panel.chat.view.copilot",contents:"%github.copilot.viewsWelcome.offline%",when:"github.copilot.offline"}],commands:[{command:"github.copilot.interactiveEditor.explain",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generate",title:"%github.copilot.command.generateThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateDocs",title:"%github.copilot.command.generateDocs%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.generateTests",title:"%github.copilot.command.generateTests%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveEditor.fix",title:"%github.copilot.command.fixThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"GitHub Copilot"},{command:"github.copilot.interactiveSession.feedback",title:"%github.copilot.command.sendChatFeedback%",enablement:"github.copilot.activated && !github.copilot.interactiveSession.disabled",icon:"$(feedback)",category:"GitHub Copilot"},{command:"github.copilot.debug.workbenchState",title:"%github.copilot.command.logWorkbenchState%",category:"Developer"},{command:"github.copilot.ghpr.applySuggestion",title:"%github.copilot.command.applySuggestionWithCopilot%",icon:"$(sparkle)",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelection",title:"%github.copilot.command.explainTerminalSelection%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",title:"%github.copilot.command.explainTerminalSelectionContextMenu%",category:"GitHub Copilot"},{command:"github.copilot.terminal.explainTerminalLastCommand",title:"%github.copilot.command.explainTerminalLastCommand%",category:"GitHub Copilot"},{command:"github.copilot.terminal.suggestCommand",title:"%github.copilot.command.suggestCommand%",category:"GitHub Copilot"},{command:"github.copilot.git.generateCommitMessage",title:"%github.copilot.git.generateCommitMessage%",icon:"$(sparkle)",category:"GitHub Copilot"},{command:"github.copilot.devcontainer.generateDevContainerConfig",title:"%github.copilot.devcontainer.generateDevContainerConfig%",category:"GitHub Copilot"},{command:"github.copilot.debug.contentExclusions",title:"%github.copilot.command.contentExclusions%",category:"GitHub Copilot",enablement:"github.copilot.copilotIgnoreEnabled"}],configuration:{title:"Copilot",properties:{"github.copilot.editor.enableCodeActions":{type:"boolean",default:!0,description:"%github.copilot.config.enableCodeActions%"},"github.copilot.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%github.copilot.config.localeOverride%"},"github.copilot.chat.welcomeMessage":{type:"string",default:"first",markdownDescription:"%github.copilot.config.welcomeMessage%",markdownEnumDescriptions:["%github.copilot.config.welcomeMessage.first%","%github.copilot.config.welcomeMessage.always%","%github.copilot.config.welcomeMessage.never%"],enum:["first","always","never"]},"github.copilot.chat.terminalChatLocation":{type:"string",default:"chatView",markdownDescription:"%github.copilot.config.terminalChatLocation%",markdownEnumDescriptions:["%github.copilot.config.terminalChatLocation.chatView%","%github.copilot.config.terminalChatLocation.quickChat%"],enum:["chatView","quickChat"]}}},configurationDefaults:{"terminal.integrated.commandsToSkipShell":["github.copilot.terminal.suggestCommand"]},keybindings:[{command:"github.copilot.terminal.suggestCommand",key:"ctrl+i",mac:"cmd+i",when:"terminalFocus"}],submenus:[{id:"copilot",label:"Copilot"}],menus:{"editor/context":[{submenu:"copilot",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"1_copilot@0"}],copilot:[{command:"inlineChat.start",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilot@1"},{command:"github.copilot.interactiveEditor.explain",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"github.copilot.interactiveEditor.fix",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@2"},{command:"github.copilot.interactiveEditor.generateDocs",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@3"},{command:"github.copilot.interactiveEditor.generateTests",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@4"}],"terminal/context":[{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",group:"1_copilot@0"}],commandPalette:[{command:"github.copilot.interactiveSession.feedback",when:"github.copilot.activated && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.debug.workbenchState",when:"true"},{command:"github.copilot.terminal.explainTerminalSelectionContextMenu",when:"false"},{command:"github.copilot.git.generateCommitMessage",when:"false"},{command:"github.copilot.devcontainer.generateDevContainerConfig",when:"false"}],"view/title":[{command:"github.copilot.interactiveSession.feedback",when:"view == workbench.panel.chat.view.copilot"},{command:"github.copilot.debug.contentExclusions",when:"view == workbench.panel.chat.view.copilot && github.copilot.copilotIgnoreEnabled"}],"comments/comment/title":[{command:"github.copilot.ghpr.applySuggestion",title:"Apply Suggestion with Copilot",group:"inline@0",when:"commentController =~ /^github-review/ && !(comment =~ /hasSuggestion/)"}],"scm/inputBox":[{command:"github.copilot.git.generateCommitMessage",when:"scmProvider == git"}]},icons:{"copilot-logo":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"},{id:"copilot-chat.generateCommitMessage",commandLineMatcher:"git add .+",commandExitResult:"success",kind:"explain",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0}}],languages:[{id:"ignore",filenamePatterns:[".copilotignore"]}]},extensionPack:["GitHub.copilot"],scripts:{postinstall:"tsx ./script/postinstall.ts",prepare:"tsx script/setup/prepare.ts","husky:install":"husky install","vscode:prepublish":"npm run build","vscode-dts:dev":"npx vscode-dts dev && mv vscode.proposed.*.ts src/extension",build:"tsx .esbuild.ts",compile:"tsx .esbuild.ts --dev",watch:"npm-run-all -p watch:*","watch:esbuild":"tsx .esbuild.ts --watch --dev","watch:tsc-extension":"tsc --noEmit --watch --project tsconfig.json","watch:tsc-simulation-workbench":"tsc --noEmit --watch --project test/simulation/workbench/tsconfig.json",typecheck:"tsc --noEmit -project tsconfig.json && tsc --noEmit --project test/simulation/workbench/tsconfig.json",lint:"eslint src test --max-warnings=0 --ext ts --ext tsx","lint-staged":"eslint src test --ext ts --ext tsx",tsfmt:"npx tsfmt -r --verify",test:"npm-run-all test:*","test:extension":"vscode-test","test:unit":"mocha -u tdd dist/test-unit.js --require source-map-support/register --exit --timeout=5000","test:unit_jest":"jest",get_token:"tsx script/setup/getToken.mts","patch-release":"tsx script/build/applyPatchForRelease.ts","patch-prerelease":"tsx script/build/applyPatchForRelease.ts -- --prerelease",prettier:"prettier --list-different --write --cache .",simulate:"node dist/simulationMain.js","simulate-ci":"node dist/simulationMain.js --ci --require-cache","simulate-baseline":"node dist/simulationMain.js --update-baseline",setup:"python script/setup/setup.py && npm run get_token","setup:dotnet":"run-script-os","setup:dotnet:darwin:linux":"curl -O https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.sh && chmod u+x dotnet-install.sh && ./dotnet-install.sh --version latest --quality GA --channel STS && rm dotnet-install.sh","setup:dotnet:win32":"Invoke-WebRequest -Uri https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.ps1 && chmod u+x dotnet-install.ps1 && ./dotnet-install.ps1 --version latest --quality GA --channel STS && rm dotnet-install.ps1",aml:"python test/aml/run.py",package:"vsce package"},devDependencies:{"@fluentui/react-components":"^9.44.4","@fluentui/react-icons":"^2.0.224","@jest/globals":"^29.7.0","@nteract/messaging":"^7.0.20","@types/eslint":"8.44.8","@types/kerberos":"^1.1.5","@types/markdown-it":"^13.0.7","@types/minimist":"^1.2.5","@types/mocha":"^10.0.6","@types/node":"^20.10.3","@types/picomatch":"^2.3.3","@types/react":"17.0.44","@types/react-dom":"^18.2.17","@types/sinon":"^17.0.2","@types/tar":"^6.1.10","@types/vscode":"^1.85.0","@typescript-eslint/eslint-plugin":"^6.13.2","@typescript-eslint/parser":"^6.13.2","@typescript-eslint/typescript-estree":"^6.13.2","@vscode/dts":"^0.4.0","@vscode/test-cli":"^0.0.4","@vscode/test-electron":"^2.3.8","@vscode/vsce":"2.22.0","@vscode/zeromq":"0.2.0","csv-parse":"^5.5.2",dotenv:"^16.3.1",electron:"^27.1.3",esbuild:"^0.19.8",eslint:"^8.55.0","eslint-import-resolver-typescript":"^3.6.1","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.29.0","eslint-plugin-jsdoc":"^46.9.0","eslint-plugin-local":"^1.0.0","eslint-plugin-no-only-tests":"^3.1.0",glob:"^10.3.10",husky:"^8.0.3",jest:"^29.7.0","lint-staged":"^15.2.0",minimist:"^1.2.8",mobx:"^6.12.0","mobx-react-lite":"^4.0.5",mocha:"^10.2.0","monaco-editor":"0.44.0","npm-run-all":"^4.1.5",open:"^9.1.0",outdent:"^0.8.0",picomatch:"^3.0.1",prettier:"^2.8.7",react:"^17.0.2","react-dom":"17.0.2","run-script-os":"^1.1.6",sinon:"^17.0.1",tar:"^6.2.0","tree-sitter-c-sharp":"^0.20.0","tree-sitter-cli":"^0.20.8","tree-sitter-cpp":"^0.20.3","tree-sitter-go":"^0.20.0","tree-sitter-java":"^0.20.2","tree-sitter-javascript":"^0.20.1","tree-sitter-python":"^0.20.4","tree-sitter-ruby":"^0.19.0","tree-sitter-rust":"^0.20.4","tree-sitter-typescript":"^0.20.3","ts-dedent":"^2.2.0","ts-jest":"^29.1.1","ts-node":"^10.9.1",tsx:"^4.6.2",typescript:"^5.3.2","typescript-formatter":"7.2.2",zeromq:"github:rebornix/zeromq.js#a19e8e373b3abc677f91b936d3f00d49b1b61792",zlib:"^1.0.5"},dependencies:{"@adobe/helix-fetch":"github:devm33/helix-fetch#eaa2f1344d93625e1bddb83d6846be5eea007e94","@humanwhocodes/gitignore-to-minimatch":"1.0.2","@microsoft/tiktokenizer":"^1.0.3","@roamhq/mac-ca":"^1.0.7","@vscode/extension-telemetry":"^0.9.1","@vscode/l10n":"^0.0.17",applicationinsights:"^2.9.1",ignore:"^5.3.0",isbinaryfile:"^5.0.0","jsonc-parser":"^3.2.0","markdown-it":"^14.0.0",minimatch:"^9.0.3","source-map-support":"^0.5.21","vscode-tas-client":"^0.1.84","web-tree-sitter":"^0.20.8"},"lint-staged":{"!(test/simulation/fixtures/**|.test-scenarios/**)*.{ts,js}":["npm run tsfmt --","npm run lint-staged --"]},isPreRelease:!1}});var use=P(kN=>{"use strict";Object.defineProperty(kN,"__esModule",{value:!0});kN.LRUCache=void 0;var bI=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,sse=new Set,mB=typeof process=="object"&&process?process:{},ase=(t,e,r,n)=>{typeof mB.emitWarning=="function"?mB.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},DN=globalThis.AbortController,ose=globalThis.AbortSignal;if(typeof DN>"u"){ose=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},DN=class{constructor(){e()}signal=new ose;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=mB.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,ase("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Q5e=t=>!sse.has(t),Ryt=Symbol("type"),Fm=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),cse=t=>Fm(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Pb:null:null,Pb=class extends Array{constructor(e){super(e),this.fill(0)}},hB=class t{heap;length;static#r=!1;static create(e){let r=cse(e);if(!r)return[];t.#r=!0;let n=new t(e,r);return t.#r=!1,n}constructor(e,r){if(!t.#r)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},gB=class t{#r;#i;#p;#t;#c;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#m;#a;#n;#e;#d;#h;#l;#u;#v;#f;#T;#S;#y;#b;#C;#g;static unsafeExposeInternals(e){return{starts:e.#S,ttls:e.#y,sizes:e.#T,keyMap:e.#a,keyList:e.#n,valList:e.#e,next:e.#d,prev:e.#h,get head(){return e.#l},get tail(){return e.#u},free:e.#v,isBackgroundFetch:r=>e.#o(r),backgroundFetch:(r,n,i,o)=>e.#D(r,n,i,o),moveToTail:r=>e.#A(r),indexes:r=>e.#x(r),rindexes:r=>e.#E(r),isStale:r=>e.#_(r)}}get max(){return this.#r}get maxSize(){return this.#i}get calculatedSize(){return this.#m}get size(){return this.#s}get fetchMethod(){return this.#c}get dispose(){return this.#p}get disposeAfter(){return this.#t}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:u,dispose:c,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:h,fetchMethod:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x}=e;if(r!==0&&!Fm(r))throw new TypeError("max option must be a nonnegative integer");let S=r?cse(r):Array;if(!S)throw new Error("invalid max value: "+r);if(this.#r=r,this.#i=f,this.maxEntrySize=m||this.#i,this.sizeCalculation=h,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#c=g,this.#C=!!g,this.#a=new Map,this.#n=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#d=new S(r),this.#h=new S(r),this.#l=0,this.#u=0,this.#v=hB.create(r),this.#s=0,this.#m=0,typeof c=="function"&&(this.#p=c),typeof l=="function"?(this.#t=l,this.#f=[]):(this.#t=void 0,this.#f=void 0),this.#b=!!this.#p,this.#g=!!this.#t,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!x,this.maxEntrySize!==0){if(this.#i!==0&&!Fm(this.#i))throw new TypeError("maxSize must be a positive integer if specified");if(!Fm(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Fm(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Fm(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#k()}if(this.#r===0&&this.ttl===0&&this.#i===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#r&&!this.#i){let O="LRU_CACHE_UNBOUNDED";Q5e(O)&&(sse.add(O),ase("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#k(){let e=new Pb(this.#r),r=new Pb(this.#r);this.#y=e,this.#S=r,this.#L=(o,s,a=bI.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#_(o)&&this.delete(this.#n[o])},s+1);u.unref&&u.unref()}},this.#w=o=>{r[o]=e[o]!==0?bI.now():0},this.#I=(o,s)=>{if(e[s]){let a=e[s],u=r[s];o.ttl=a,o.start=u,o.now=n||i();let c=o.now-u;o.remainingTTL=a-c}};let n=0,i=()=>{let o=bI.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#a.get(o);if(s===void 0)return 0;let a=e[s],u=r[s];if(a===0||u===0)return 1/0;let c=(n||i())-u;return a-c},this.#_=o=>e[o]!==0&&r[o]!==0&&(n||i())-r[o]>e[o]}#w=()=>{};#I=()=>{};#L=()=>{};#_=()=>!1;#U(){let e=new Pb(this.#r);this.#m=0,this.#T=e,this.#R=r=>{this.#m-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#o(n))return 0;if(!Fm(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Fm(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(e[r]=n,this.#i){let o=this.#i-e[r];for(;this.#m>o;)this.#N(!0)}this.#m+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#m)}}#R=e=>{};#P=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:e=this.allowStale}={}){if(this.#s)for(let r=this.#u;!(!this.#M(r)||((e||!this.#_(r))&&(yield r),r===this.#l));)r=this.#h[r]}*#E({allowStale:e=this.allowStale}={}){if(this.#s)for(let r=this.#l;!(!this.#M(r)||((e||!this.#_(r))&&(yield r),r===this.#u));)r=this.#d[r]}#M(e){return e!==void 0&&this.#a.get(this.#n[e])===e}*entries(){for(let e of this.#x())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#o(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#o(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#x()){let r=this.#n[e];r!==void 0&&!this.#o(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#E()){let r=this.#n[e];r!==void 0&&!this.#o(this.#e[e])&&(yield r)}}*values(){for(let e of this.#x())this.#e[e]!==void 0&&!this.#o(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#o(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.#x()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#n[n],this))return this.get(this.#n[n],r)}}forEach(e,r=this){for(let n of this.#x()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#n[n],this)}}rforEach(e,r=this){for(let n of this.#E()){let i=this.#e[n],o=this.#o(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#n[n],this)}}purgeStale(){let e=!1;for(let r of this.#E({allowStale:!0}))this.#_(r)&&(this.delete(this.#n[r]),e=!0);return e}dump(){let e=[];for(let r of this.#x({allowStale:!0})){let n=this.#n[r],i=this.#e[r],o=this.#o(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#y&&this.#S){s.ttl=this.#y[r];let a=bI.now()-this.#S[r];s.start=Math.floor(Date.now()-a)}this.#T&&(s.size=this.#T[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=bI.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:u}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,l=this.#O(e,r,n.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.delete(e),this;let d=this.#s===0?void 0:this.#a.get(e);if(d===void 0)d=this.#s===0?this.#u:this.#v.length!==0?this.#v.pop():this.#s===this.#r?this.#N(!1):this.#s,this.#n[d]=e,this.#e[d]=r,this.#a.set(e,d),this.#d[this.#u]=d,this.#h[d]=this.#u,this.#u=d,this.#s++,this.#P(d,l,u),u&&(u.set="add"),c=!1;else{this.#A(d);let p=this.#e[d];if(r!==p){if(this.#C&&this.#o(p)?p.__abortController.abort(new Error("replaced")):s||(this.#b&&this.#p?.(p,e,"set"),this.#g&&this.#f?.push([p,e,"set"])),this.#R(d),this.#P(d,l,u),this.#e[d]=r,u){u.set="replace";let f=p&&this.#o(p)?p.__staleWhileFetching:p;f!==void 0&&(u.oldValue=f)}}else u&&(u.set="update")}if(i!==0&&!this.#y&&this.#k(),this.#y&&(c||this.#L(d,i,o),u&&this.#I(u,d)),!s&&this.#g&&this.#f){let p=this.#f,f;for(;f=p?.shift();)this.#t?.(...f)}return this}pop(){try{for(;this.#s;){let e=this.#e[this.#l];if(this.#N(!0),this.#o(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#g&&this.#f){let e=this.#f,r;for(;r=e?.shift();)this.#t?.(...r)}}}#N(e){let r=this.#l,n=this.#n[r],i=this.#e[r];return this.#C&&this.#o(i)?i.__abortController.abort(new Error("evicted")):(this.#b||this.#g)&&(this.#b&&this.#p?.(i,n,"evict"),this.#g&&this.#f?.push([i,n,"evict"])),this.#R(r),e&&(this.#n[r]=void 0,this.#e[r]=void 0,this.#v.push(r)),this.#s===1?(this.#l=this.#u=0,this.#v.length=0):this.#l=this.#d[r],this.#a.delete(n),this.#s--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let s=this.#e[o];if(this.#o(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#_(o))i&&(i.has="stale",this.#I(i,o));else return n&&this.#w(o),i&&(i.has="hit",this.#I(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i!==void 0&&(n||!this.#_(i))){let o=this.#e[i];return this.#o(o)?o.__staleWhileFetching:o}}#D(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#o(o))return o;let s=new DN,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},c=(h,g=!1)=>{let{aborted:v}=s.signal,_=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(v&&!g?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,_&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),v&&!_&&!g)return d(s.signal.reason);let y=f;return this.#e[r]===f&&(h===void 0?y.__staleWhileFetching?this.#e[r]=y.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,u.options))),h},l=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:g}=s.signal,v=g&&n.allowStaleOnFetchAbort,_=v||n.allowStaleOnFetchRejection,y=_||n.noDeleteOnFetchRejection,E=f;if(this.#e[r]===f&&(!y||E.__staleWhileFetching===void 0?this.delete(e):v||(this.#e[r]=E.__staleWhileFetching)),_)return n.status&&E.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw h},p=(h,g)=>{let v=this.#c?.(e,o,u);v&&v instanceof Promise&&v.then(_=>h(_),g),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(),n.allowStaleOnFetchAbort&&(h=_=>c(_,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(c,l),m=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,m,{...u.options,status:void 0}),r=this.#a.get(e)):this.#e[r]=m,m}#o(e){if(!this.#C)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof DN}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:u=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:h,forceRefresh:g=!1,status:v,signal:_}=r;if(!this.#C)return v&&(v.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:v});let y={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:u,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:v,signal:_},E=this.#a.get(e);if(E===void 0){v&&(v.fetch="miss");let x=this.#D(e,E,y,h);return x.__returned=x}else{let x=this.#e[E];if(this.#o(x)){let L=n&&x.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",L&&(v.returnedStale=!0)),L?x.__staleWhileFetching:x.__returned=x}let S=this.#_(E);if(!g&&!S)return v&&(v.fetch="hit"),this.#A(E),i&&this.#w(E),v&&this.#I(v,E),x;let O=this.#D(e,E,y,h),W=O.__staleWhileFetching!==void 0&&n;return v&&(v.fetch=S?"stale":"refresh",W&&S&&(v.returnedStale=!0)),W?O.__staleWhileFetching:O.__returned=O}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#a.get(e);if(a!==void 0){let u=this.#e[a],c=this.#o(u);return s&&this.#I(s,a),this.#_(a)?(s&&(s.get="stale"),c?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),c?u.__staleWhileFetching:(this.#A(a),i&&this.#w(a),u))}else s&&(s.get="miss")}#F(e,r){this.#h[r]=e,this.#d[e]=r}#A(e){e!==this.#u&&(e===this.#l?this.#l=this.#d[e]:this.#F(this.#h[e],this.#d[e]),this.#F(this.#u,e),this.#u=e)}delete(e){let r=!1;if(this.#s!==0){let n=this.#a.get(e);if(n!==void 0)if(r=!0,this.#s===1)this.clear();else{this.#R(n);let i=this.#e[n];this.#o(i)?i.__abortController.abort(new Error("deleted")):(this.#b||this.#g)&&(this.#b&&this.#p?.(i,e,"delete"),this.#g&&this.#f?.push([i,e,"delete"])),this.#a.delete(e),this.#n[n]=void 0,this.#e[n]=void 0,n===this.#u?this.#u=this.#h[n]:n===this.#l?this.#l=this.#d[n]:(this.#d[this.#h[n]]=this.#d[n],this.#h[this.#d[n]]=this.#h[n]),this.#s--,this.#v.push(n)}}if(this.#g&&this.#f?.length){let n=this.#f,i;for(;i=n?.shift();)this.#t?.(...i)}return r}clear(){for(let e of this.#E({allowStale:!0})){let r=this.#e[e];if(this.#o(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#n[e];this.#b&&this.#p?.(r,n,"delete"),this.#g&&this.#f?.push([r,n,"delete"])}}if(this.#a.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#y&&this.#S&&(this.#y.fill(0),this.#S.fill(0)),this.#T&&this.#T.fill(0),this.#l=0,this.#u=0,this.#v.length=0,this.#m=0,this.#s=0,this.#g&&this.#f){let e=this.#f,r;for(;r=e?.shift();)this.#t?.(...r)}}};kN.LRUCache=gB});var lse=P(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});Nb.bytePairEncode=Nb.uint8ArrayToString=void 0;function vB(t){return Array.from(t).map(e=>e.toString()).join("_")}Nb.uint8ArrayToString=vB;function J5e(t,e){if(t.length===1)return[e.get(t[0].toString())];let r=[];for(let o=0;o<t.length+1;o++)r.push([o,Number.MAX_SAFE_INTEGER]);function n(o,s=0){if(o+s+2<r.length){let a=t.slice(r[o][0],r[o+s+2][0]),u=e.get(vB(a));if(u!==void 0)return u}return Number.MAX_SAFE_INTEGER}for(let o=0;o<r.length-2;o++){let s=n(o);s!==Number.MAX_SAFE_INTEGER&&(r[o][1]=s)}for(;r.length>1;){let o=[0,Number.MAX_SAFE_INTEGER];for(let s=0;s<r.length-1;s++)r[s][1]<o[1]&&(o=[s,r[s][1]]);if(o[1]!==Number.MAX_SAFE_INTEGER){let s=o[0];r[s][1]=n(s,1),s>0&&(r[s-1][1]=n(s-1,1)),r.splice(s+1,1)}else break}let i=[];for(let o=0;o<r.length-1;o++)i.push(e.get(vB(t.slice(r[o][0],r[o+1][0]))));return i}Nb.bytePairEncode=J5e});var bB=P(LN=>{"use strict";Object.defineProperty(LN,"__esModule",{value:!0});LN.TikTokenizer=void 0;var Z5e=require("fs"),e6e=use(),_B=require("util"),Z0=lse();function t6e(t){let e=new Map;try{let n=Z5e.readFileSync(t,"utf-8");return r(n),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let s=new Uint8Array(Buffer.from(o[0],"base64")),a=parseInt(o[1]);if(!isNaN(a))e.set(s,a);else throw new Error(`Can't parse ${o[1]} to integer`)}}}function r6e(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var yB=class{constructor(e,r,n,i=8192){this.textEncoder=new _B.TextEncoder,this.textDecoder=new _B.TextDecoder("utf-8");let o={max:i};this.cache=new e6e.LRUCache(o);let s=t6e(e);this.init(s,r,n)}init(e,r,n){this.encoder=new Map;for(let[i,o]of e)this.encoder.set((0,Z0.uint8ArrayToString)(i),o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>r6e(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(this.encoder.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let s=o?i+o.index:e.length;return[o,s]}encode(e,r){let n=[],i=0;for(;;){let o,s;if([o,s]=this.findNextSpecialToken(e,i,r),s>i&&this.encodeByIndex(e,n,i,s),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,s=Array.from(e.substring(n,i).matchAll(this.regex));for(var a=0;a<s.length&&(o=s[a],o!==void 0);a++)if(this.cache.has(o[0]))r.push(...this.cache.get(o[0]));else{let u=this.textEncoder.encode(o[0]),c=this.encoder?.get((0,Z0.uint8ArrayToString)(u));if(c!==void 0)r.push(c),this.cache.set(o[0],[c]);else{let l=(0,Z0.bytePairEncode)(u,this.encoder);r.push(...l),this.cache.set(o[0],l)}}}encodeTrimSuffixByIndex(e,r,n,i,o,s,a){let u,c=Array.from(e.substring(n,i).matchAll(this.regex));for(var l=0;l<c.length;l++){u=c[l];let d=u[0];if(this.cache.has(d)){let p=this.cache.get(d);if(s+=p.length,s<=o)a+=d.length,r.push(...p);else break}else{let p=this.textEncoder.encode(d),f=this.encoder.get((0,Z0.uint8ArrayToString)(p));if(f!==void 0)if(this.cache.set(d,[f]),s++,s<=o)a+=d.length,r.push(f);else break;else{let m=(0,Z0.bytePairEncode)(p,this.encoder);if(this.cache.set(d,m),s+=m.length,s<=o)a+=d.length,r.push(...m);else break}}if(s>=o)break}return{tokenCount:s,encodeLength:a}}encodeTrimSuffix(e,r,n){let i=[],o=0,s=0,a=0;for(;;){let c,l;if([c,l]=this.findNextSpecialToken(e,o,n),l>o){let{tokenCount:d,encodeLength:p}=this.encodeTrimSuffixByIndex(e,i,o,l,r,s,a);if(s=d,a=p,s>=r)break}if(c!==null){if(s++,s<=r&&(o=o+this.encodeSpecialToken(i,c),a+=c[0].length,o>=e.length)||s>=r)break}else break}let u=a===e.length?e:e.slice(0,a);return{tokenIds:i,text:u}}encodeTrimPrefix(e,r,n){let i=[],o=0,s=0,a=0,u=new Map;for(u.set(s,a);;){let f,m;if([f,m]=this.findNextSpecialToken(e,o,n),m>o){let h,g=Array.from(e.substring(o,m).matchAll(this.regex));for(var c=0;c<g.length;c++){h=g[c];let v=h[0];if(this.cache.has(v)){let _=this.cache.get(v);s+=_.length,a+=v.length,i.push(..._),u.set(s,a)}else{let _=new _B.TextEncoder().encode(v),y=this.encoder.get((0,Z0.uint8ArrayToString)(_));if(y!==void 0)this.cache.set(v,[y]),s++,a+=v.length,i.push(y),u.set(s,a);else{let E=(0,Z0.bytePairEncode)(_,this.encoder);this.cache.set(v,E),s+=E.length,a+=v.length,i.push(...E),u.set(s,a)}}}}if(f!==null){if(o=o+this.encodeSpecialToken(i,f),s++,a+=f[0].length,u.set(s,a),o>=e.length)break}else break}if(s<=r)return{tokenIds:i,text:e};let l=s-r,d=0,p=0;for(let[f,m]of u)if(f>=l){d=f,p=m;break}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let s=this.specialTokensDecoder?.get(n);s!==void 0&&(i=Array.from(this.textEncoder.encode(s)))}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};LN.TikTokenizer=yB});var _se=P(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.createTokenizer=Oi.createByEncoderName=Oi.createByModelName=Oi.getRegexByModel=Oi.getRegexByEncoder=Oi.getSpecialTokensByModel=Oi.getSpecialTokensByEncoder=Oi.MODEL_TO_ENCODING=void 0;var ON=require("fs"),xB=require("path"),n6e=bB(),i6e=new Map([["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"]]);Oi.MODEL_TO_ENCODING=new Map([["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var EB="<|endoftext|>",dse="<|fim_prefix|>",pse="<|fim_middle|>",fse="<|fim_suffix|>",o6e="<|endofprompt|>",xI="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",mse="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+";function TB(t){let e="";if(Oi.MODEL_TO_ENCODING.has(t))e=Oi.MODEL_TO_ENCODING.get(t);else for(let[r,n]of i6e)if(t.startsWith(r)){e=n;break}return e}async function s6e(t,e){let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let n=await r.text();ON.writeFileSync(e,n)}function SB(t){let e=new Map([[EB,50256]]);switch(t){case"cl100k_base":e=new Map([[EB,100257],[dse,100258],[pse,100259],[fse,100260],[o6e,100276]]);break;case"p50k_edit":e=new Map([[EB,50256],[dse,50281],[pse,50282],[fse,50283]]);break;default:break}return e}Oi.getSpecialTokensByEncoder=SB;function a6e(t){let e=TB(t);return SB(e)}Oi.getSpecialTokensByModel=a6e;function hse(t){switch(t){case"cl100k_base":return mse;default:break}return xI}Oi.getRegexByEncoder=hse;function c6e(t){let e=TB(t);return hse(e)}Oi.getRegexByModel=c6e;async function u6e(t,e=null){return gse(TB(t),e)}Oi.createByModelName=u6e;async function gse(t,e=null){let r,n,i=SB(t);switch(t){case"cl100k_base":r=mse,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=xI,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=xI,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=xI,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=xI,n="https://pythia.blob.core.windows.net/public/encoding/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=xB.basename(n),s=xB.resolve(__dirname,"..","model");ON.existsSync(s)||ON.mkdirSync(s,{recursive:!0});let a=xB.resolve(s,o);return ON.existsSync(a)||(console.log(`Downloading file from ${n}`),await s6e(n,a),console.log(`Saved file to ${a}`)),vse(a,i,r)}Oi.createByEncoderName=gse;function vse(t,e,r,n=8192){return new n6e.TikTokenizer(t,e,r,n)}Oi.createTokenizer=vse});var yse=P(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.createTokenizer=Mi.createByEncoderName=Mi.createByModelName=Mi.getSpecialTokensByModel=Mi.getSpecialTokensByEncoder=Mi.getRegexByModel=Mi.getRegexByEncoder=Mi.MODEL_TO_ENCODING=Mi.TikTokenizer=void 0;var l6e=bB();Object.defineProperty(Mi,"TikTokenizer",{enumerable:!0,get:function(){return l6e.TikTokenizer}});var Um=_se();Object.defineProperty(Mi,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return Um.MODEL_TO_ENCODING}});Object.defineProperty(Mi,"getRegexByEncoder",{enumerable:!0,get:function(){return Um.getRegexByEncoder}});Object.defineProperty(Mi,"getRegexByModel",{enumerable:!0,get:function(){return Um.getRegexByModel}});Object.defineProperty(Mi,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return Um.getSpecialTokensByEncoder}});Object.defineProperty(Mi,"getSpecialTokensByModel",{enumerable:!0,get:function(){return Um.getSpecialTokensByModel}});Object.defineProperty(Mi,"createByModelName",{enumerable:!0,get:function(){return Um.createByModelName}});Object.defineProperty(Mi,"createByEncoderName",{enumerable:!0,get:function(){return Um.createByEncoderName}});Object.defineProperty(Mi,"createTokenizer",{enumerable:!0,get:function(){return Um.createTokenizer}})});var Use=P((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),readBinary=t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},readAsync=(t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=t=>document.title=t);var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if((224&s)!=192){var u=63&t[e++];if((s=(240&s)==224?(15&s)<<12|a<<6|u:(7&s)<<18|a<<12|u<<6|63&t[e++])<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,s=0;s<t.length;++s){var a=t.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}return e[r]=0,r-i}function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}function isFileURI(t){return t.startsWith("file://")}function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var s=i.exports;s=relocateExports(s,1024);var a=getDylinkMetadata(o);a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(s,"main"),Module.asm=s,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function r(i){e(i.instance,i.module)}function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r}};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}function getDylinkMetadata(t){var e=0,r=0;function n(){for(var v=0,_=1;;){var y=t[e++];if(v+=(127&y)*_,_*=128,!(128&y))break}return v}function i(){var v=n();return UTF8ArrayToString(t,(e+=v)-v,v)}function o(v,_){if(v)throw new Error(_)}var s="dylink.0";if(t instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(t,s);a.length===0&&(s="dylink",a=WebAssembly.Module.customSections(t,s)),o(a.length===0,"need dylink section"),r=(t=new Uint8Array(a[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var u=n();r=e+u,s=i()}var c={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(s=="dylink"){c.memorySize=n(),c.memoryAlign=n(),c.tableSize=n(),c.tableAlign=n();for(var l=n(),d=0;d<l;++d){var p=i();c.neededDynlibs.push(p)}}else for(o(s!=="dylink.0");e<r;){var f=t[e++],m=n();if(f===1)c.memorySize=n(),c.memoryAlign=n(),c.tableSize=n(),c.tableAlign=n();else if(f===2)for(l=n(),d=0;d<l;++d)p=i(),c.neededDynlibs.push(p);else if(f===3)for(var h=n();h--;){var g=i();256&n()&&c.tlsExports.add(g)}else if(f===4)for(h=n();h--;)i(),g=i(),(3&n())==1&&c.weakImports.add(g);else e+=m}return c}function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}function alignMemory(t,e){return Math.ceil(t/e)*e}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(a){if(e.fs&&e.fs.findObject(a)){var u=e.fs.readFile(a,{encoding:"binary"});return u instanceof Uint8Array||(u=new Uint8Array(u)),e.loadAsync?Promise.resolve(u):u}if(a=locateFile(a),e.loadAsync)return new Promise(function(c,l){readAsync(a,d=>c(new Uint8Array(d)),l)});if(!readBinary)throw new Error(a+": file not found, and synchronous loading of external files is not available");return readBinary(a)}function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var a=preloadedWasm[t];return e.loadAsync?Promise.resolve(a):a}return e.loadAsync?i(t).then(function(u){return loadWebAssemblyModule(u,e,r)}):loadWebAssemblyModule(i(t),e,r)}function s(a){n.global&&mergeLibSymbols(a,t),n.module=a}return n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(a){return s(a),!0}):(s(o()),!0)}function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((s=65536)-o%s)%s)))return!0}var o,s;return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},doStat:function(t,e,r){try{var n=t(e)}catch(a){if(a&&a.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(a.node)))return-54;throw a}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=s%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(t){return UTF8ToString(t)},getStreamFromFD:function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e}};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(t);return FS.llseek(s,o,n),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(a){if(typeof FS>"u"||!(a instanceof FS.ErrnoError))throw a;return a.errno}}function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var s=HEAPU32[e>>2],a=HEAPU32[e+4>>2];e+=8;var u=FS.write(t,HEAP8,s,a,n);if(u<0)return-1;i+=u,n!==void 0&&(n+=u)}return i}function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var s=t.charCodeAt(o);HEAP16[e>>1]=s,e+=2}return HEAP16[e>>1]=0,e-n}function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(s=>{HEAP32[i++]=allocateUTF8OnStack(s)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(s){return handleException(s)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(u,c,l)=>e.slice(u,l);else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let u=o;for(let c=0;c<i;c++)marshalRange(u,n.includedRanges[c]),u+=SIZE_OF_RANGE}let s=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!s)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let a=new Tree(INTERNAL,s,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,a}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let s=0;s<r;s++)i[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let l=0,d=o.length;l<d;l++)e.includes(o[l])&&i.push(l);let s=C._malloc(SIZE_OF_INT*i.length);for(let l=0,d=i.length;l<d;l++)setValue(s+l*SIZE_OF_INT,i[l],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],s,i.length,r.row,r.column,n.row,n.column);let a=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=new Array(a);if(a>0){let l=u;for(let d=0;d<a;d++)c[d]=unmarshalNode(this.tree,l),l+=SIZE_OF_NODE}return C._free(u),C._free(s),c}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let h=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),g=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,v=e.substr(g,100).split(`
`)[0],_,y=v.match(QUERY_WORD_REGEX)[0];switch(h){case 2:_=new RangeError(`Bad node name '${y}'`);break;case 3:_=new RangeError(`Bad field name '${y}'`);break;case 4:_=new RangeError(`Bad capture name @${y}`);break;case 5:_=new TypeError(`Bad pattern structure at offset ${g}: '${v}'...`),y="";break;default:_=new SyntaxError(`Bad syntax at offset ${g}: '${v}'...`),y=""}throw _.index=g,_.length=y.length,C._free(n),_}let o=C._ts_query_string_count(i),s=C._ts_query_capture_count(i),a=C._ts_query_pattern_count(i),u=new Array(s),c=new Array(o);for(let h=0;h<s;h++){let g=C._ts_query_capture_name_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");u[h]=UTF8ToString(g,v)}for(let h=0;h<o;h++){let g=C._ts_query_string_value_for_id(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");c[h]=UTF8ToString(g,v)}let l=new Array(a),d=new Array(a),p=new Array(a),f=new Array(a),m=new Array(a);for(let h=0;h<a;h++){let g=C._ts_query_predicates_for_pattern(i,h,TRANSFER_BUFFER),v=getValue(TRANSFER_BUFFER,"i32");f[h]=[],m[h]=[];let _=[],y=g;for(let E=0;E<v;E++){let x=getValue(y,"i32");y+=SIZE_OF_INT;let S=getValue(y,"i32");if(y+=SIZE_OF_INT,x===PREDICATE_STEP_TYPE_CAPTURE)_.push({type:"capture",name:u[S]});else if(x===PREDICATE_STEP_TYPE_STRING)_.push({type:"string",value:c[S]});else if(_.length>0){if(_[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=_[0].value,U=!0;switch(O){case"not-eq?":U=!1;case"eq?":if(_.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(_.length-1));if(_[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${_[1].value}"`);if(_[2].type==="capture"){let J=_[1].name,D=_[2].name;m[h].push(function(R){let k,G;for(let M of R)M.name===J&&(k=M.node),M.name===D&&(G=M.node);return k===void 0||G===void 0||k.text===G.text===U})}else{let J=_[1].name,D=_[2].value;m[h].push(function(R){for(let k of R)if(k.name===J)return k.node.text===D===U;return!0})}break;case"not-match?":U=!1;case"match?":if(_.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${_.length-1}.`);if(_[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${_[1].value}".`);if(_[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${_[2].value}.`);let W=_[1].name,L=new RegExp(_[2].value);m[h].push(function(J){for(let D of J)if(D.name===W)return L.test(D.node.text)===U;return!0});break;case"set!":if(_.length<2||_.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${_.length-1}.`);if(_.some(J=>J.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');l[h]||(l[h]={}),l[h][_[1].value]=_[2]?_[2].value:null;break;case"is?":case"is-not?":if(_.length<2||_.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${_.length-1}.`);if(_.some(J=>J.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let ve=O==="is?"?d:p;ve[h]||(ve[h]={}),ve[h][_[1].value]=_[2]?_[2].value:null;break;default:f[h].push({operator:O,operands:_.slice(1)})}_.length=0}}Object.freeze(l[h]),Object.freeze(d[h]),Object.freeze(p[h])}return C._free(n),new Query(INTERNAL,i,u,m,f,Object.freeze(l),Object.freeze(d),Object.freeze(p))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),s=o.find(u=>LANGUAGE_FUNCTION_REGEX.test(u)&&!u.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=i[s]();return new Language(INTERNAL,a)})}}class Query{constructor(e,r,n,i,o,s,a,u){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=s,this.assertedProperties=a,this.refutedProperties=u,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=new Array(s);this.exceededMatchLimit=!!u;let l=0,d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=new Array(m);if(d=unmarshalCaptures(this,e.tree,d,h),this.textPredicates[f].every(g=>g(h))){c[l++]={pattern:f,captures:h};let g=this.setProperties[f];g&&(c[p].setProperties=g);let v=this.assertedProperties[f];v&&(c[p].assertedProperties=v);let _=this.refutedProperties[f];_&&(c[p].refutedProperties=_)}}return c.length=l,C._free(a),c}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=[];this.exceededMatchLimit=!!u;let l=[],d=a;for(let p=0;p<s;p++){let f=getValue(d,"i32");d+=SIZE_OF_INT;let m=getValue(d,"i32");d+=SIZE_OF_INT;let h=getValue(d,"i32");if(d+=SIZE_OF_INT,l.length=m,d=unmarshalCaptures(this,e.tree,d,l),this.textPredicates[f].every(g=>g(l))){let g=l[h],v=this.setProperties[f];v&&(g.setProperties=v);let _=this.assertedProperties[f];_&&(g.assertedProperties=_);let y=this.refutedProperties[f];y&&(g.refutedProperties=y),c.push(g)}}return C._free(a),c}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let s=getValue(r,"i32"),a=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[s],node:a}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),s=getValue(e+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,t);return a.id=r,a.startIndex=n,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var JB=P(Jt=>{"use strict";var XB=Jt&&Jt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},QB=Jt&&Jt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.getShallowFileSize=Jt.getShallowDirectorySizeSync=Jt.getShallowDirectorySize=Jt.confirmDirExists=Jt.unlinkAsync=Jt.readdirAsync=Jt.readFileAsync=Jt.writeFileAsync=Jt.appendFileAsync=Jt.accessAsync=Jt.mkdirAsync=Jt.lstatAsync=Jt.statAsync=void 0;var Xu=require("fs"),uae=require("path"),Bp=require("util");Jt.statAsync=Bp.promisify(Xu.stat);Jt.lstatAsync=Bp.promisify(Xu.lstat);Jt.mkdirAsync=Bp.promisify(Xu.mkdir);Jt.accessAsync=Bp.promisify(Xu.access);Jt.appendFileAsync=Bp.promisify(Xu.appendFile);Jt.writeFileAsync=Bp.promisify(Xu.writeFile);Jt.readFileAsync=Bp.promisify(Xu.readFile);Jt.readdirAsync=Bp.promisify(Xu.readdir);Jt.unlinkAsync=Bp.promisify(Xu.unlink);var r8e=function(t){return XB(void 0,void 0,void 0,function(){var e,r,n;return QB(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Jt.lstatAsync(t)];case 1:if(e=i.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=i.sent(),!(r&&r.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,Jt.mkdirAsync(t)];case 4:return i.sent(),[3,6];case 5:if(n=i.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};Jt.confirmDirExists=r8e;var n8e=function(t){return XB(void 0,void 0,void 0,function(){var e,r,n,i,o,s;return QB(this,function(a){switch(a.label){case 0:return[4,Jt.readdirAsync(t)];case 1:e=a.sent(),r=0,n=0,i=e,a.label=2;case 2:return n<i.length?(o=i[n],[4,Jt.statAsync(uae.join(t,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(r+=s.size),a.label=4;case 4:return n++,[3,2];case 5:return[2,r]}})})};Jt.getShallowDirectorySize=n8e;var i8e=function(t){for(var e=Xu.readdirSync(t),r=0,n=0;n<e.length;n++)r+=Xu.statSync(uae.join(t,e[n])).size;return r};Jt.getShallowDirectorySizeSync=i8e;var o8e=function(t){return XB(void 0,void 0,void 0,function(){var e;return QB(this,function(r){switch(r.label){case 0:return[4,Jt.statAsync(t)];case 1:return e=r.sent(),e.isFile()?[2,e.size]:[2]}})})};Jt.getShallowFileSize=o8e});var pae=P((iv,dae)=>{"use strict";var ZB=iv&&iv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},eq=iv&&iv.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},lae=iv&&iv.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},s8e=require("fs"),a8e=require("os"),nv=require("path"),Wl=JB(),c8e=function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?nv.isAbsolute(n)?this._tempDir=n:this._tempDir=nv.join(process.cwd(),n):this._tempDir=nv.join(a8e.tmpdir(),"appInsights-node"),this._fileFullPath=nv.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?lae([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e?lae([e],r):r;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return ZB(this,void 0,void 0,function(){var r,n,i,o,s,a;return eq(this,function(u){switch(u.label){case 0:r=e+`\r
`,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Wl.confirmDirExists(this._tempDir)];case 2:return u.sent(),[3,4];case 3:return n=u.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return u.trys.push([4,6,,11]),[4,Wl.accessAsync(this._fileFullPath,s8e.constants.F_OK)];case 5:return u.sent(),[3,11];case 6:i=u.sent(),u.label=7;case 7:return u.trys.push([7,9,,10]),[4,Wl.appendFileAsync(this._fileFullPath,r)];case 8:return u.sent(),[2];case 9:return o=u.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return u.trys.push([11,17,,18]),[4,Wl.getShallowFileSize(this._fileFullPath)];case 12:return s=u.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return u.sent(),[3,16];case 14:return[4,Wl.appendFileAsync(this._fileFullPath,r)];case 15:u.sent(),u.label=16;case 16:return[3,18];case 17:return a=u.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return ZB(this,void 0,void 0,function(){var r,n,i;return eq(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,Wl.readFileAsync(this._fileFullPath)];case 1:return r=o.sent(),n=nv.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,Wl.writeFileAsync(n,r)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return Wl.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return ZB(this,void 0,void 0,function(){var e,r,n,i,o,s=this;return eq(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,Wl.readdirAsync(this._tempDir)];case 1:e=a.sent(),e=e.filter(function(u){return nv.basename(u).indexOf(s._backUpNameFormat)>-1}),e.sort(function(u,c){var l=new Date(parseInt(u.split(s._backUpNameFormat)[0])),d=new Date(parseInt(c.split(s._backUpNameFormat)[0]));if(l<d)return-1;if(l>=d)return 1}),r=e.length,n=0,a.label=2;case 2:return n<r-this.maxHistory?(i=nv.join(this._tempDir,e[n]),[4,Wl.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t}();dae.exports=c8e});var In=P((Jxt,mae)=>{"use strict";var fae=pae(),u8e="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",l8e="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",d8e=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&fae.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||fae.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[u8e],t.disableWarnings=!!process.env[l8e],t.TAG="ApplicationInsights:",t}();mae.exports=d8e});var ED=P(xD=>{"use strict";Object.defineProperty(xD,"__esModule",{value:!0});xD.JsonConfig=void 0;var p8e=require("fs"),bD=require("path"),tq=In(),f8e="APPLICATIONINSIGHTS_CONFIGURATION_FILE",m8e="APPLICATIONINSIGHTS_CONNECTION_STRING",hae="APPSETTING_",gae="APPINSIGHTS_INSTRUMENTATIONKEY",vae="APPINSIGHTS_INSTRUMENTATION_KEY",h8e="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",g8e="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",v8e="http_proxy",_8e="https_proxy",y8e="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",b8e="APPLICATION_INSIGHTS_NO_STATSBEAT",x8e="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",E8e="APPLICATION_INSIGHTS_NO_PATCH_MODULES",T8e="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",S8e="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",I8e="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",C8e="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",w8e="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",R8e=function(){function t(){this.connectionString=process.env[m8e],this.instrumentationKey=process.env[gae]||process.env[hae+gae]||process.env[vae]||process.env[hae+vae],!this.connectionString&&this.instrumentationKey&&tq.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[g8e],this.extendedMetricDisablers=process.env[h8e],this.proxyHttpUrl=process.env[v8e],this.proxyHttpsUrl=process.env[_8e],this.noDiagnosticChannel=!!process.env[y8e],this.disableStatsbeat=!!process.env[b8e],this.noHttpAgentKeepAlive=!!process.env[x8e],this.noPatchModules=process.env[E8e]||"",this.enableWebInstrumentation=!!process.env[T8e]||!!process.env[C8e],this.webInstrumentationSrc=process.env[I8e]||"",this.webInstrumentationConnectionString=process.env[S8e]||process.env[w8e]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r="{}";if(r)e=r;else{var n="applicationinsights.json",i=bD.join(__dirname,"../../"),o=bD.join(i,n),s=process.env[f8e];s&&(bD.isAbsolute(s)?o=s:o=bD.join(i,s));try{e=p8e.readFileSync(o,"utf8")}catch(u){tq.warn("Failed to read JSON config file: ",u)}}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(u){tq.warn("Invalid JSON config file: ",u)}},t}();xD.JsonConfig=R8e});var RI=P((e1t,_ae)=>{var A8e="2.0.0",P8e=Number.MAX_SAFE_INTEGER||9007199254740991,N8e=16,D8e=250,k8e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];_ae.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:N8e,MAX_SAFE_BUILD_LENGTH:D8e,MAX_SAFE_INTEGER:P8e,RELEASE_TYPES:k8e,SEMVER_SPEC_VERSION:A8e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var AI=P((t1t,yae)=>{var L8e=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};yae.exports=L8e});var qb=P((qp,bae)=>{var{MAX_SAFE_COMPONENT_LENGTH:rq,MAX_SAFE_BUILD_LENGTH:O8e,MAX_LENGTH:M8e}=RI(),F8e=AI();qp=bae.exports={};var U8e=qp.re=[],B8e=qp.safeRe=[],Ze=qp.src=[],et=qp.t={},q8e=0,nq="[a-zA-Z0-9-]",G8e=[["\\s",1],["\\d",M8e],[nq,O8e]],H8e=t=>{for(let[e,r]of G8e)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},jt=(t,e,r)=>{let n=H8e(e),i=q8e++;F8e(t,i,e),et[t]=i,Ze[i]=e,U8e[i]=new RegExp(e,r?"g":void 0),B8e[i]=new RegExp(n,r?"g":void 0)};jt("NUMERICIDENTIFIER","0|[1-9]\\d*");jt("NUMERICIDENTIFIERLOOSE","\\d+");jt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${nq}*`);jt("MAINVERSION",`(${Ze[et.NUMERICIDENTIFIER]})\\.(${Ze[et.NUMERICIDENTIFIER]})\\.(${Ze[et.NUMERICIDENTIFIER]})`);jt("MAINVERSIONLOOSE",`(${Ze[et.NUMERICIDENTIFIERLOOSE]})\\.(${Ze[et.NUMERICIDENTIFIERLOOSE]})\\.(${Ze[et.NUMERICIDENTIFIERLOOSE]})`);jt("PRERELEASEIDENTIFIER",`(?:${Ze[et.NUMERICIDENTIFIER]}|${Ze[et.NONNUMERICIDENTIFIER]})`);jt("PRERELEASEIDENTIFIERLOOSE",`(?:${Ze[et.NUMERICIDENTIFIERLOOSE]}|${Ze[et.NONNUMERICIDENTIFIER]})`);jt("PRERELEASE",`(?:-(${Ze[et.PRERELEASEIDENTIFIER]}(?:\\.${Ze[et.PRERELEASEIDENTIFIER]})*))`);jt("PRERELEASELOOSE",`(?:-?(${Ze[et.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ze[et.PRERELEASEIDENTIFIERLOOSE]})*))`);jt("BUILDIDENTIFIER",`${nq}+`);jt("BUILD",`(?:\\+(${Ze[et.BUILDIDENTIFIER]}(?:\\.${Ze[et.BUILDIDENTIFIER]})*))`);jt("FULLPLAIN",`v?${Ze[et.MAINVERSION]}${Ze[et.PRERELEASE]}?${Ze[et.BUILD]}?`);jt("FULL",`^${Ze[et.FULLPLAIN]}$`);jt("LOOSEPLAIN",`[v=\\s]*${Ze[et.MAINVERSIONLOOSE]}${Ze[et.PRERELEASELOOSE]}?${Ze[et.BUILD]}?`);jt("LOOSE",`^${Ze[et.LOOSEPLAIN]}$`);jt("GTLT","((?:<|>)?=?)");jt("XRANGEIDENTIFIERLOOSE",`${Ze[et.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);jt("XRANGEIDENTIFIER",`${Ze[et.NUMERICIDENTIFIER]}|x|X|\\*`);jt("XRANGEPLAIN",`[v=\\s]*(${Ze[et.XRANGEIDENTIFIER]})(?:\\.(${Ze[et.XRANGEIDENTIFIER]})(?:\\.(${Ze[et.XRANGEIDENTIFIER]})(?:${Ze[et.PRERELEASE]})?${Ze[et.BUILD]}?)?)?`);jt("XRANGEPLAINLOOSE",`[v=\\s]*(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ze[et.XRANGEIDENTIFIERLOOSE]})(?:${Ze[et.PRERELEASELOOSE]})?${Ze[et.BUILD]}?)?)?`);jt("XRANGE",`^${Ze[et.GTLT]}\\s*${Ze[et.XRANGEPLAIN]}$`);jt("XRANGELOOSE",`^${Ze[et.GTLT]}\\s*${Ze[et.XRANGEPLAINLOOSE]}$`);jt("COERCE",`(^|[^\\d])(\\d{1,${rq}})(?:\\.(\\d{1,${rq}}))?(?:\\.(\\d{1,${rq}}))?(?:$|[^\\d])`);jt("COERCERTL",Ze[et.COERCE],!0);jt("LONETILDE","(?:~>?)");jt("TILDETRIM",`(\\s*)${Ze[et.LONETILDE]}\\s+`,!0);qp.tildeTrimReplace="$1~";jt("TILDE",`^${Ze[et.LONETILDE]}${Ze[et.XRANGEPLAIN]}$`);jt("TILDELOOSE",`^${Ze[et.LONETILDE]}${Ze[et.XRANGEPLAINLOOSE]}$`);jt("LONECARET","(?:\\^)");jt("CARETTRIM",`(\\s*)${Ze[et.LONECARET]}\\s+`,!0);qp.caretTrimReplace="$1^";jt("CARET",`^${Ze[et.LONECARET]}${Ze[et.XRANGEPLAIN]}$`);jt("CARETLOOSE",`^${Ze[et.LONECARET]}${Ze[et.XRANGEPLAINLOOSE]}$`);jt("COMPARATORLOOSE",`^${Ze[et.GTLT]}\\s*(${Ze[et.LOOSEPLAIN]})$|^$`);jt("COMPARATOR",`^${Ze[et.GTLT]}\\s*(${Ze[et.FULLPLAIN]})$|^$`);jt("COMPARATORTRIM",`(\\s*)${Ze[et.GTLT]}\\s*(${Ze[et.LOOSEPLAIN]}|${Ze[et.XRANGEPLAIN]})`,!0);qp.comparatorTrimReplace="$1$2$3";jt("HYPHENRANGE",`^\\s*(${Ze[et.XRANGEPLAIN]})\\s+-\\s+(${Ze[et.XRANGEPLAIN]})\\s*$`);jt("HYPHENRANGELOOSE",`^\\s*(${Ze[et.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ze[et.XRANGEPLAINLOOSE]})\\s*$`);jt("STAR","(<|>)?=?\\s*\\*");jt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");jt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var TD=P((r1t,xae)=>{var j8e=Object.freeze({loose:!0}),V8e=Object.freeze({}),z8e=t=>t?typeof t!="object"?j8e:t:V8e;xae.exports=z8e});var iq=P((n1t,Sae)=>{var Eae=/^[0-9]+$/,Tae=(t,e)=>{let r=Eae.test(t),n=Eae.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Y8e=(t,e)=>Tae(e,t);Sae.exports={compareIdentifiers:Tae,rcompareIdentifiers:Y8e}});var Ts=P((i1t,Rae)=>{var SD=AI(),{MAX_LENGTH:Iae,MAX_SAFE_INTEGER:ID}=RI(),{safeRe:Cae,t:wae}=qb(),$8e=TD(),{compareIdentifiers:Gb}=iq(),oq=class t{constructor(e,r){if(r=$8e(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Iae)throw new TypeError(`version is longer than ${Iae} characters`);SD("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Cae[wae.LOOSE]:Cae[wae.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ID||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ID||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ID||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<ID)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(SD("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Gb(this.major,e.major)||Gb(this.minor,e.minor)||Gb(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(SD("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Gb(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(SD("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Gb(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),Gb(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Rae.exports=oq});var ov=P((o1t,Pae)=>{var Aae=Ts(),W8e=(t,e,r=!1)=>{if(t instanceof Aae)return t;try{return new Aae(t,e)}catch(n){if(!r)return null;throw n}};Pae.exports=W8e});var Dae=P((s1t,Nae)=>{var K8e=ov(),X8e=(t,e)=>{let r=K8e(t,e);return r?r.version:null};Nae.exports=X8e});var Lae=P((a1t,kae)=>{var Q8e=ov(),J8e=(t,e)=>{let r=Q8e(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};kae.exports=J8e});var Fae=P((c1t,Mae)=>{var Oae=Ts(),Z8e=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Oae(t instanceof Oae?t.version:t,r).inc(e,n,i).version}catch{return null}};Mae.exports=Z8e});var qae=P((u1t,Bae)=>{var Uae=ov(),eMe=(t,e)=>{let r=Uae(t,null,!0),n=Uae(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,u=!!s.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};Bae.exports=eMe});var Hae=P((l1t,Gae)=>{var tMe=Ts(),rMe=(t,e)=>new tMe(t,e).major;Gae.exports=rMe});var Vae=P((d1t,jae)=>{var nMe=Ts(),iMe=(t,e)=>new nMe(t,e).minor;jae.exports=iMe});var Yae=P((p1t,zae)=>{var oMe=Ts(),sMe=(t,e)=>new oMe(t,e).patch;zae.exports=sMe});var Wae=P((f1t,$ae)=>{var aMe=ov(),cMe=(t,e)=>{let r=aMe(t,e);return r&&r.prerelease.length?r.prerelease:null};$ae.exports=cMe});var Vc=P((m1t,Xae)=>{var Kae=Ts(),uMe=(t,e,r)=>new Kae(t,r).compare(new Kae(e,r));Xae.exports=uMe});var Jae=P((h1t,Qae)=>{var lMe=Vc(),dMe=(t,e,r)=>lMe(e,t,r);Qae.exports=dMe});var ece=P((g1t,Zae)=>{var pMe=Vc(),fMe=(t,e)=>pMe(t,e,!0);Zae.exports=fMe});var CD=P((v1t,rce)=>{var tce=Ts(),mMe=(t,e,r)=>{let n=new tce(t,r),i=new tce(e,r);return n.compare(i)||n.compareBuild(i)};rce.exports=mMe});var ice=P((_1t,nce)=>{var hMe=CD(),gMe=(t,e)=>t.sort((r,n)=>hMe(r,n,e));nce.exports=gMe});var sce=P((y1t,oce)=>{var vMe=CD(),_Me=(t,e)=>t.sort((r,n)=>vMe(n,r,e));oce.exports=_Me});var PI=P((b1t,ace)=>{var yMe=Vc(),bMe=(t,e,r)=>yMe(t,e,r)>0;ace.exports=bMe});var wD=P((x1t,cce)=>{var xMe=Vc(),EMe=(t,e,r)=>xMe(t,e,r)<0;cce.exports=EMe});var sq=P((E1t,uce)=>{var TMe=Vc(),SMe=(t,e,r)=>TMe(t,e,r)===0;uce.exports=SMe});var aq=P((T1t,lce)=>{var IMe=Vc(),CMe=(t,e,r)=>IMe(t,e,r)!==0;lce.exports=CMe});var RD=P((S1t,dce)=>{var wMe=Vc(),RMe=(t,e,r)=>wMe(t,e,r)>=0;dce.exports=RMe});var AD=P((I1t,pce)=>{var AMe=Vc(),PMe=(t,e,r)=>AMe(t,e,r)<=0;pce.exports=PMe});var cq=P((C1t,fce)=>{var NMe=sq(),DMe=aq(),kMe=PI(),LMe=RD(),OMe=wD(),MMe=AD(),FMe=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return NMe(t,r,n);case"!=":return DMe(t,r,n);case">":return kMe(t,r,n);case">=":return LMe(t,r,n);case"<":return OMe(t,r,n);case"<=":return MMe(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};fce.exports=FMe});var hce=P((w1t,mce)=>{var UMe=Ts(),BMe=ov(),{safeRe:PD,t:ND}=qb(),qMe=(t,e)=>{if(t instanceof UMe)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(PD[ND.COERCE]);else{let n;for(;(n=PD[ND.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),PD[ND.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;PD[ND.COERCERTL].lastIndex=-1}return r===null?null:BMe(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};mce.exports=qMe});var vce=P((R1t,gce)=>{"use strict";gce.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var yce=P((A1t,_ce)=>{"use strict";_ce.exports=Sr;Sr.Node=sv;Sr.create=Sr;function Sr(t){var e=this;if(e instanceof Sr||(e=new Sr),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Sr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Sr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Sr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Sr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)HMe(this,arguments[t]);return this.length};Sr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)jMe(this,arguments[t]);return this.length};Sr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Sr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Sr.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Sr.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Sr.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Sr.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Sr.prototype.map=function(t,e){e=e||this;for(var r=new Sr,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Sr.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Sr,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Sr.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Sr.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Sr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Sr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Sr.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Sr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Sr.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Sr;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Sr.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=GMe(this,i,r[n]);return o};Sr.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function GMe(t,e,r){var n=e===t.head?new sv(r,null,e,t):new sv(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function HMe(t,e){t.tail=new sv(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function jMe(t,e){t.head=new sv(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function sv(t,e,r,n){if(!(this instanceof sv))return new sv(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{vce()(Sr)}catch{}});var Sce=P((P1t,Tce)=>{"use strict";var VMe=yce(),av=Symbol("max"),Hp=Symbol("length"),Hb=Symbol("lengthCalculator"),DI=Symbol("allowStale"),cv=Symbol("maxAge"),Gp=Symbol("dispose"),bce=Symbol("noDisposeOnSet"),yo=Symbol("lruList"),Qu=Symbol("cache"),Ece=Symbol("updateAgeOnGet"),uq=()=>1,dq=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[av]=e.max||1/0,n=e.length||uq;if(this[Hb]=typeof n!="function"?uq:n,this[DI]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[cv]=e.maxAge||0,this[Gp]=e.dispose,this[bce]=e.noDisposeOnSet||!1,this[Ece]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[av]=e||1/0,NI(this)}get max(){return this[av]}set allowStale(e){this[DI]=!!e}get allowStale(){return this[DI]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[cv]=e,NI(this)}get maxAge(){return this[cv]}set lengthCalculator(e){typeof e!="function"&&(e=uq),e!==this[Hb]&&(this[Hb]=e,this[Hp]=0,this[yo].forEach(r=>{r.length=this[Hb](r.value,r.key),this[Hp]+=r.length})),NI(this)}get lengthCalculator(){return this[Hb]}get length(){return this[Hp]}get itemCount(){return this[yo].length}rforEach(e,r){r=r||this;for(let n=this[yo].tail;n!==null;){let i=n.prev;xce(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[yo].head;n!==null;){let i=n.next;xce(this,e,n,r),n=i}}keys(){return this[yo].toArray().map(e=>e.key)}values(){return this[yo].toArray().map(e=>e.value)}reset(){this[Gp]&&this[yo]&&this[yo].length&&this[yo].forEach(e=>this[Gp](e.key,e.value)),this[Qu]=new Map,this[yo]=new VMe,this[Hp]=0}dump(){return this[yo].map(e=>DD(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[yo]}set(e,r,n){if(n=n||this[cv],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[Hb](r,e);if(this[Qu].has(e)){if(o>this[av])return jb(this,this[Qu].get(e)),!1;let u=this[Qu].get(e).value;return this[Gp]&&(this[bce]||this[Gp](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Hp]+=o-u.length,u.length=o,this.get(e),NI(this),!0}let s=new pq(e,r,o,i,n);return s.length>this[av]?(this[Gp]&&this[Gp](e,r),!1):(this[Hp]+=s.length,this[yo].unshift(s),this[Qu].set(e,this[yo].head),NI(this),!0)}has(e){if(!this[Qu].has(e))return!1;let r=this[Qu].get(e).value;return!DD(this,r)}get(e){return lq(this,e,!0)}peek(e){return lq(this,e,!1)}pop(){let e=this[yo].tail;return e?(jb(this,e),e.value):null}del(e){jb(this,this[Qu].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Qu].forEach((e,r)=>lq(this,r,!1))}},lq=(t,e,r)=>{let n=t[Qu].get(e);if(n){let i=n.value;if(DD(t,i)){if(jb(t,n),!t[DI])return}else r&&(t[Ece]&&(n.value.now=Date.now()),t[yo].unshiftNode(n));return i.value}},DD=(t,e)=>{if(!e||!e.maxAge&&!t[cv])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[cv]&&r>t[cv]},NI=t=>{if(t[Hp]>t[av])for(let e=t[yo].tail;t[Hp]>t[av]&&e!==null;){let r=e.prev;jb(t,e),e=r}},jb=(t,e)=>{if(e){let r=e.value;t[Gp]&&t[Gp](r.key,r.value),t[Hp]-=r.length,t[Qu].delete(r.key),t[yo].removeNode(e)}},pq=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},xce=(t,e,r,n)=>{let i=r.value;DD(t,i)&&(jb(t,r),t[DI]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};Tce.exports=dq});var zc=P((N1t,Rce)=>{var fq=class t{constructor(e,r){if(r=YMe(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof mq)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Cce(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&ZMe(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&QMe)|(this.options.loose&&JMe))+":"+e,i=Ice.get(n);if(i)return i;let o=this.options.loose,s=o?ba[Vs.HYPHENRANGELOOSE]:ba[Vs.HYPHENRANGE];e=e.replace(s,u9e(this.options.includePrerelease)),Cn("hyphen replace",e),e=e.replace(ba[Vs.COMPARATORTRIM],WMe),Cn("comparator trim",e),e=e.replace(ba[Vs.TILDETRIM],KMe),Cn("tilde trim",e),e=e.replace(ba[Vs.CARETTRIM],XMe),Cn("caret trim",e);let a=e.split(" ").map(d=>e9e(d,this.options)).join(" ").split(/\s+/).map(d=>c9e(d,this.options));o&&(a=a.filter(d=>(Cn("loose invalid filter",d,this.options),!!d.match(ba[Vs.COMPARATORLOOSE])))),Cn("range list",a);let u=new Map,c=a.map(d=>new mq(d,this.options));for(let d of c){if(Cce(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return Ice.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>wce(n,r)&&e.set.some(i=>wce(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new $Me(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(l9e(this.set[r],e,this.options))return!0;return!1}};Rce.exports=fq;var zMe=Sce(),Ice=new zMe({max:1e3}),YMe=TD(),mq=kI(),Cn=AI(),$Me=Ts(),{safeRe:ba,t:Vs,comparatorTrimReplace:WMe,tildeTrimReplace:KMe,caretTrimReplace:XMe}=qb(),{FLAG_INCLUDE_PRERELEASE:QMe,FLAG_LOOSE:JMe}=RI(),Cce=t=>t.value==="<0.0.0-0",ZMe=t=>t.value==="",wce=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},e9e=(t,e)=>(Cn("comp",t,e),t=n9e(t,e),Cn("caret",t),t=t9e(t,e),Cn("tildes",t),t=o9e(t,e),Cn("xrange",t),t=a9e(t,e),Cn("stars",t),t),zs=t=>!t||t.toLowerCase()==="x"||t==="*",t9e=(t,e)=>t.trim().split(/\s+/).map(r=>r9e(r,e)).join(" "),r9e=(t,e)=>{let r=e.loose?ba[Vs.TILDELOOSE]:ba[Vs.TILDE];return t.replace(r,(n,i,o,s,a)=>{Cn("tilde",t,n,i,o,s,a);let u;return zs(i)?u="":zs(o)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:zs(s)?u=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Cn("replaceTilde pr",a),u=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):u=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Cn("tilde return",u),u})},n9e=(t,e)=>t.trim().split(/\s+/).map(r=>i9e(r,e)).join(" "),i9e=(t,e)=>{Cn("caret",t,e);let r=e.loose?ba[Vs.CARETLOOSE]:ba[Vs.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,u)=>{Cn("caret",t,i,o,s,a,u);let c;return zs(o)?c="":zs(s)?c=`>=${o}.0.0${n} <${+o+1}.0.0-0`:zs(a)?o==="0"?c=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:u?(Cn("replaceCaret pr",u),o==="0"?s==="0"?c=`>=${o}.${s}.${a}-${u} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}-${u} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a}-${u} <${+o+1}.0.0-0`):(Cn("no pr"),o==="0"?s==="0"?c=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Cn("caret return",c),c})},o9e=(t,e)=>(Cn("replaceXRanges",t,e),t.split(/\s+/).map(r=>s9e(r,e)).join(" ")),s9e=(t,e)=>{t=t.trim();let r=e.loose?ba[Vs.XRANGELOOSE]:ba[Vs.XRANGE];return t.replace(r,(n,i,o,s,a,u)=>{Cn("xRange",t,n,i,o,s,a,u);let c=zs(o),l=c||zs(s),d=l||zs(a),p=d;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(u="-0"),n=`${i+o}.${s}.${a}${u}`):l?n=`>=${o}.0.0${u} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),Cn("xRange return",n),n})},a9e=(t,e)=>(Cn("replaceStars",t,e),t.trim().replace(ba[Vs.STAR],"")),c9e=(t,e)=>(Cn("replaceGTE0",t,e),t.trim().replace(ba[e.includePrerelease?Vs.GTE0PRE:Vs.GTE0],"")),u9e=t=>(e,r,n,i,o,s,a,u,c,l,d,p,f)=>(zs(n)?r="":zs(i)?r=`>=${n}.0.0${t?"-0":""}`:zs(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,zs(c)?u="":zs(l)?u=`<${+c+1}.0.0-0`:zs(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:t?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),l9e=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Cn(t[n].semver),t[n].semver!==mq.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var kI=P((D1t,Lce)=>{var LI=Symbol("SemVer ANY"),vq=class t{static get ANY(){return LI}constructor(e,r){if(r=Ace(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),gq("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===LI?this.value="":this.value=this.operator+this.semver.version,gq("comp",this)}parse(e){let r=this.options.loose?Pce[Nce.COMPARATORLOOSE]:Pce[Nce.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Dce(n[2],this.options.loose):this.semver=LI}toString(){return this.value}test(e){if(gq("Comparator.test",e,this.options.loose),this.semver===LI||e===LI)return!0;if(typeof e=="string")try{e=new Dce(e,this.options)}catch{return!1}return hq(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new kce(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new kce(this.value,r).test(e.semver):(r=Ace(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||hq(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||hq(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Lce.exports=vq;var Ace=TD(),{safeRe:Pce,t:Nce}=qb(),hq=cq(),gq=AI(),Dce=Ts(),kce=zc()});var OI=P((k1t,Oce)=>{var d9e=zc(),p9e=(t,e,r)=>{try{e=new d9e(e,r)}catch{return!1}return e.test(t)};Oce.exports=p9e});var Fce=P((L1t,Mce)=>{var f9e=zc(),m9e=(t,e)=>new f9e(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Mce.exports=m9e});var Bce=P((O1t,Uce)=>{var h9e=Ts(),g9e=zc(),v9e=(t,e,r)=>{let n=null,i=null,o=null;try{o=new g9e(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new h9e(n,r))}),n};Uce.exports=v9e});var Gce=P((M1t,qce)=>{var _9e=Ts(),y9e=zc(),b9e=(t,e,r)=>{let n=null,i=null,o=null;try{o=new y9e(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new _9e(n,r))}),n};qce.exports=b9e});var Vce=P((F1t,jce)=>{var _q=Ts(),x9e=zc(),Hce=PI(),E9e=(t,e)=>{t=new x9e(t,e);let r=new _q("0.0.0");if(t.test(r)||(r=new _q("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new _q(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||Hce(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||Hce(r,o))&&(r=o)}return r&&t.test(r)?r:null};jce.exports=E9e});var Yce=P((U1t,zce)=>{var T9e=zc(),S9e=(t,e)=>{try{return new T9e(t,e).range||"*"}catch{return null}};zce.exports=S9e});var kD=P((B1t,Xce)=>{var I9e=Ts(),Kce=kI(),{ANY:C9e}=Kce,w9e=zc(),R9e=OI(),$ce=PI(),Wce=wD(),A9e=AD(),P9e=RD(),N9e=(t,e,r,n)=>{t=new I9e(t,n),e=new w9e(e,n);let i,o,s,a,u;switch(r){case">":i=$ce,o=A9e,s=Wce,a=">",u=">=";break;case"<":i=Wce,o=P9e,s=$ce,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(R9e(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===C9e&&(f=new Kce(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===u&&s(t,p.semver))return!1}return!0};Xce.exports=N9e});var Jce=P((q1t,Qce)=>{var D9e=kD(),k9e=(t,e,r)=>D9e(t,e,">",r);Qce.exports=k9e});var eue=P((G1t,Zce)=>{var L9e=kD(),O9e=(t,e,r)=>L9e(t,e,"<",r);Zce.exports=O9e});var nue=P((H1t,rue)=>{var tue=zc(),M9e=(t,e,r)=>(t=new tue(t,r),e=new tue(e,r),t.intersects(e,r));rue.exports=M9e});var oue=P((j1t,iue)=>{var F9e=OI(),U9e=Vc();iue.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((l,d)=>U9e(l,d,r));for(let l of s)F9e(l,e,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===s[0]?a.push("*"):d?l===s[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var due=P((V1t,lue)=>{var sue=zc(),bq=kI(),{ANY:yq}=bq,MI=OI(),xq=Vc(),B9e=(t,e,r={})=>{if(t===e)return!0;t=new sue(t,r),e=new sue(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=G9e(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},q9e=[new bq(">=0.0.0-0")],aue=[new bq(">=0.0.0")],G9e=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===yq){if(e.length===1&&e[0].semver===yq)return!0;r.includePrerelease?t=q9e:t=aue}if(e.length===1&&e[0].semver===yq){if(r.includePrerelease)return!0;e=aue}let n=new Set,i,o;for(let f of t)f.operator===">"||f.operator===">="?i=cue(i,f,r):f.operator==="<"||f.operator==="<="?o=uue(o,f,r):n.add(f.semver);if(n.size>1)return null;let s;if(i&&o){if(s=xq(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of n){if(i&&!MI(f,String(i),r)||o&&!MI(f,String(o),r))return null;for(let m of e)if(!MI(f,String(m),r))return!1;return!0}let a,u,c,l,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=cue(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!MI(i.semver,String(f),r))return!1}if(o){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=uue(o,f,r),u===f&&u!==o)return!1}else if(o.operator==="<="&&!MI(o.semver,String(f),r))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&c&&!o&&s!==0||o&&l&&!i&&s!==0||p||d)},cue=(t,e,r)=>{if(!t)return e;let n=xq(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},uue=(t,e,r)=>{if(!t)return e;let n=xq(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};lue.exports=B9e});var hue=P((z1t,mue)=>{var Eq=qb(),pue=RI(),H9e=Ts(),fue=iq(),j9e=ov(),V9e=Dae(),z9e=Lae(),Y9e=Fae(),$9e=qae(),W9e=Hae(),K9e=Vae(),X9e=Yae(),Q9e=Wae(),J9e=Vc(),Z9e=Jae(),e7e=ece(),t7e=CD(),r7e=ice(),n7e=sce(),i7e=PI(),o7e=wD(),s7e=sq(),a7e=aq(),c7e=RD(),u7e=AD(),l7e=cq(),d7e=hce(),p7e=kI(),f7e=zc(),m7e=OI(),h7e=Fce(),g7e=Bce(),v7e=Gce(),_7e=Vce(),y7e=Yce(),b7e=kD(),x7e=Jce(),E7e=eue(),T7e=nue(),S7e=oue(),I7e=due();mue.exports={parse:j9e,valid:V9e,clean:z9e,inc:Y9e,diff:$9e,major:W9e,minor:K9e,patch:X9e,prerelease:Q9e,compare:J9e,rcompare:Z9e,compareLoose:e7e,compareBuild:t7e,sort:r7e,rsort:n7e,gt:i7e,lt:o7e,eq:s7e,neq:a7e,gte:c7e,lte:u7e,cmp:l7e,coerce:d7e,Comparator:p7e,Range:f7e,satisfies:m7e,toComparators:h7e,maxSatisfying:g7e,minSatisfying:v7e,minVersion:_7e,validRange:y7e,outside:b7e,gtr:x7e,ltr:E7e,intersects:T7e,simplifyRange:S7e,subset:I7e,SemVer:H9e,re:Eq.re,src:Eq.src,tokens:Eq.t,SEMVER_SPEC_VERSION:pue.SEMVER_SPEC_VERSION,RELEASE_TYPES:pue.RELEASE_TYPES,compareIdentifiers:fue.compareIdentifiers,rcompareIdentifiers:fue.rcompareIdentifiers}});var Tq=P(LD=>{"use strict";Object.defineProperty(LD,"__esModule",{value:!0});LD.makePatchingRequire=void 0;var C7e=require("path"),w7e=hue(),gue=oi(),_ue=require("module"),R7e=Object.keys(process.binding("natives")),vue=_ue.prototype.require;function A7e(t){var e={};return function(n){var i=vue.apply(this,arguments);if(t[n]){var o=_ue._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(R7e.indexOf(n)<0)try{s=vue.call(this,C7e.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var u=i,c=0,l=t[n];c<l.length;c++){var d=l[c];if(w7e.satisfies(s,d.versionSpecifier)&&(u=d.patch(u,o),gue.channel)){var p=d.publisherName||n;gue.channel.addPatchedModule(p,s)}}return e[o]=u}return i}}LD.makePatchingRequire=A7e});var yue=P(($1t,P7e)=>{P7e.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var oi=P(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.channel=Yc.ContextPreservingEventEmitter=Yc.trueFilter=Yc.makePatchingRequire=void 0;var N7e=Tq(),D7e=Tq();Object.defineProperty(Yc,"makePatchingRequire",{enumerable:!0,get:function(){return D7e.makePatchingRequire}});var k7e=function(t){return!0};Yc.trueFilter=k7e;var xue=function(){function t(){this.version=yue().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,i){n===void 0&&(n=Yc.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(e);o&&i&&i(o.name,o.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=Yc.trueFilter);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,i=this.modulesPatched;n<i.length;n++){var o=i[n];if(o.name===e)return}this.modulesPatched.push({name:e,version:r});var s=this.subscribers[e];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var i=n[r];if(i.name===e)return i}return null},t}();Yc.ContextPreservingEventEmitter=xue;global.diagnosticsSource||(global.diagnosticsSource=new xue,bue=require("module"),bue.prototype.require=N7e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var bue;Yc.channel=global.diagnosticsSource});var Eue,Tue=T(()=>{Eue=typeof globalThis=="object"?globalThis:global});var Sue=T(()=>{Tue()});var Iue=T(()=>{Sue()});var jp,Sq=T(()=>{jp="1.6.0"});function L7e(t){var e=new Set([t]),r=new Set,n=t.match(Cue);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(u){return u===t};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(u){if(e.has(u))return!0;if(r.has(u))return!1;var c=u.match(Cue);if(!c)return o(u);var l={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return l.prerelease!=null||i.major!==l.major?o(u):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(u):o(u):i.minor<=l.minor?s(u):o(u)}}var Cue,wue,Rue=T(()=>{Sq();Cue=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;wue=L7e(jp)});function Kl(t,e,r,n){var i;n===void 0&&(n=!1);var o=UI[FI]=(i=UI[FI])!==null&&i!==void 0?i:{version:jp};if(!n&&o[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(o.version!==jp){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+jp);return r.error(s.stack||s.message),!1}return o[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+jp+"."),!0}function rc(t){var e,r,n=(e=UI[FI])===null||e===void 0?void 0:e.version;if(!(!n||!wue(n)))return(r=UI[FI])===null||r===void 0?void 0:r[t]}function Xl(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+jp+".");var r=UI[FI];r&&delete r[t]}var O7e,FI,UI,uv=T(()=>{Iue();Sq();Rue();O7e=jp.split(".")[0],FI=Symbol.for("opentelemetry.js.api."+O7e),UI=Eue});function BI(t,e,r){var n=rc("diag");if(n)return r.unshift(e),n[t].apply(n,F7e([],M7e(r),!1))}var M7e,F7e,Aue,Pue=T(()=>{uv();M7e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},F7e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Aue=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return BI("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return BI("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return BI("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return BI("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return BI("verbose",this._namespace,e)},t}()});var cn,OD=T(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(cn||(cn={}))});function Nue(t,e){t<cn.NONE?t=cn.NONE:t>cn.ALL&&(t=cn.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",cn.ERROR),warn:r("warn",cn.WARN),info:r("info",cn.INFO),debug:r("debug",cn.DEBUG),verbose:r("verbose",cn.VERBOSE)}}var Due=T(()=>{OD()});var U7e,B7e,q7e,Ss,lv=T(()=>{Pue();Due();OD();uv();U7e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},B7e=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},q7e="diag",Ss=function(){function t(){function e(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=rc("diag");if(a)return a[i].apply(a,B7e([],U7e(o),!1))}}var r=this,n=function(i,o){var s,a,u;if(o===void 0&&(o={logLevel:cn.INFO}),i===r){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof o=="number"&&(o={logLevel:o});var l=rc("diag"),d=Nue((a=o.logLevel)!==null&&a!==void 0?a:cn.INFO,i);if(l&&!o.suppressOverrideMessage){var p=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return Kl("diag",d,r,!0)};r.setLogger=n,r.disable=function(){Xl(q7e,r)},r.createComponentLogger=function(i){return new Aue(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}()});var G7e,H7e,kue,Lue=T(()=>{G7e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},H7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kue=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=G7e(e,2),n=r[0],i=r[1];return[n,i]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=new t(this._entries);try{for(var s=H7e(n),a=s.next();!a.done;a=s.next()){var u=a.value;o._entries.delete(u)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}()});var Oue,Mue=T(()=>{Oue=Symbol("BaggageEntryMetadata")});function Fue(t){return t===void 0&&(t={}),new kue(new Map(Object.entries(t)))}function MD(t){return typeof t!="string"&&(j7e.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Oue,toString:function(){return t}}}var j7e,Iq=T(()=>{lv();Lue();Mue();j7e=Ss.instance()});function Ql(t){return Symbol.for(t)}var V7e,FD,qI=T(()=>{V7e=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),FD=new V7e});var Cq,Uue,Bue=T(()=>{Cq=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Uue=function(){function t(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[n];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var r=0;r<Cq.length;r++)this[Cq[r].n]=e(Cq[r].c)}return t}()});function que(){return Aq}var Vb,z7e,wq,Y7e,$7e,W7e,Rq,K7e,X7e,Q7e,Aq,J7e,Z7e,eFe,tFe,rFe,nFe,Pq=T(()=>{Vb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z7e=function(){function t(){}return t.prototype.createHistogram=function(e,r){return Z7e},t.prototype.createCounter=function(e,r){return J7e},t.prototype.createUpDownCounter=function(e,r){return eFe},t.prototype.createObservableGauge=function(e,r){return rFe},t.prototype.createObservableCounter=function(e,r){return tFe},t.prototype.createObservableUpDownCounter=function(e,r){return nFe},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),wq=function(){function t(){}return t}(),Y7e=function(t){Vb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(wq),$7e=function(t){Vb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(wq),W7e=function(t){Vb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(wq),Rq=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),K7e=function(t){Vb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Rq),X7e=function(t){Vb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Rq),Q7e=function(t){Vb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Rq),Aq=new z7e,J7e=new Y7e,Z7e=new W7e,eFe=new $7e,tFe=new K7e,rFe=new X7e,nFe=new Q7e});var UD,Gue=T(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(UD||(UD={}))});var BD,qD,Nq=T(()=>{BD={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},qD={set:function(t,e,r){t!=null&&(t[e]=r)}}});var iFe,oFe,Hue,jue=T(()=>{qI();iFe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},oFe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Hue=function(){function t(){}return t.prototype.active=function(){return FD},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,oFe([n],iFe(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}()});var sFe,aFe,Dq,cFe,Vm,GI=T(()=>{jue();uv();lv();sFe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},aFe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Dq="context",cFe=new Hue,Vm=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Kl(Dq,e,Ss.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,aFe([e,r,n],sFe(o),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return rc(Dq)||cFe},t.prototype.disable=function(){this._getContextManager().disable(),Xl(Dq,Ss.instance())},t}()});var _i,kq=T(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(_i||(_i={}))});var HI,jI,zb,GD=T(()=>{kq();HI="0000000000000000",jI="00000000000000000000000000000000",zb={traceId:jI,spanId:HI,traceFlags:_i.NONE}});var zm,HD=T(()=>{GD();zm=function(){function t(e){e===void 0&&(e=zb),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}()});function jD(t){return t.getValue(Lq)||void 0}function Vue(){return jD(Vm.getInstance().active())}function VI(t,e){return t.setValue(Lq,e)}function zue(t){return t.deleteValue(Lq)}function Yue(t,e){return VI(t,new zm(e))}function VD(t){var e;return(e=jD(t))===null||e===void 0?void 0:e.spanContext()}var Lq,Oq=T(()=>{qI();HD();GI();Lq=Ql("OpenTelemetry Context Key SPAN")});function dv(t){return uFe.test(t)&&t!==jI}function Mq(t){return lFe.test(t)&&t!==HI}function $c(t){return dv(t.traceId)&&Mq(t.spanId)}function $ue(t){return new zm(t)}var uFe,lFe,zD=T(()=>{GD();HD();uFe=/^([0-9a-f]{32})$/i,lFe=/^[0-9a-f]{16}$/i});function dFe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var Fq,YD,Uq=T(()=>{GI();Oq();HD();zD();Fq=Vm.getInstance(),YD=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=Fq.active());var i=!!r?.root;if(i)return new zm;var o=n&&VD(n);return dFe(o)&&$c(o)?new zm(o):new zm},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var u=s??Fq.active(),c=this.startSpan(e,o,u),l=VI(u,c);return Fq.with(l,a,void 0,c)}},t}()});var pFe,$D,Bq=T(()=>{Uq();pFe=new YD,$D=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):pFe},t}()});var Wue,Kue=T(()=>{Uq();Wue=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new YD},t}()});var fFe,zI,qq=T(()=>{Bq();Kue();fFe=new Wue,zI=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new $D(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:fFe},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}()});var xa,Xue=T(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(xa||(xa={}))});var Yb,Que=T(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Yb||(Yb={}))});var $b,Jue=T(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})($b||($b={}))});function Zue(t){return gFe.test(t)}function ele(t){return vFe.test(t)&&!_Fe.test(t)}var Gq,mFe,hFe,gFe,vFe,_Fe,tle=T(()=>{Gq="[_0-9a-z-*/]",mFe="[a-z]"+Gq+"{0,255}",hFe="[a-z0-9]"+Gq+"{0,240}@[a-z]"+Gq+"{0,13}",gFe=new RegExp("^(?:"+mFe+"|"+hFe+")$"),vFe=/^[ -~]{0,255}[!-~]$/,_Fe=/,|=/});var rle,yFe,nle,ile,ole,sle=T(()=>{tle();rle=32,yFe=512,nle=",",ile="=",ole=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+ile+e.get(n)),r},[]).join(nle)},t.prototype._parse=function(e){e.length>yFe||(this._internalState=e.split(nle).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(ile);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);Zue(s)&&ele(a)&&r.set(s,a)}return r},new Map),this._internalState.size>rle&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,rle))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function ale(t){return new ole(t)}var cle=T(()=>{sle()});var Ys,ule=T(()=>{GI();Ys=Vm.getInstance()});var it,lle=T(()=>{lv();it=Ss.instance()});var bFe,dle,ple=T(()=>{Pq();bFe=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return Aq},t}(),dle=new bFe});var Hq,fle,mle=T(()=>{ple();uv();lv();Hq="metrics",fle=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Kl(Hq,e,Ss.instance())},t.prototype.getMeterProvider=function(){return rc(Hq)||dle},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Xl(Hq,Ss.instance())},t}()});var jq,hle=T(()=>{mle();jq=fle.getInstance()});var gle,vle=T(()=>{gle=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}()});function zq(t){return t.getValue(Vq)||void 0}function _le(){return zq(Vm.getInstance().active())}function yle(t,e){return t.setValue(Vq,e)}function ble(t){return t.deleteValue(Vq)}var Vq,xle=T(()=>{GI();qI();Vq=Ql("OpenTelemetry Baggage Key")});var Yq,xFe,Ele,Tle=T(()=>{uv();vle();Nq();xle();Iq();lv();Yq="propagation",xFe=new gle,Ele=function(){function t(){this.createBaggage=Fue,this.getBaggage=zq,this.getActiveBaggage=_le,this.setBaggage=yle,this.deleteBaggage=ble}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Kl(Yq,e,Ss.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=qD),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=BD),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Xl(Yq,Ss.instance())},t.prototype._getGlobalPropagator=function(){return rc(Yq)||xFe},t}()});var Vp,Sle=T(()=>{Tle();Vp=Ele.getInstance()});var $q,Ile,Cle=T(()=>{uv();qq();zD();Oq();lv();$q="trace",Ile=function(){function t(){this._proxyTracerProvider=new zI,this.wrapSpanContext=$ue,this.isSpanContextValid=$c,this.deleteSpan=zue,this.getSpan=jD,this.getActiveSpan=Vue,this.getSpanContext=VD,this.setSpan=VI,this.setSpanContext=Yue}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=Kl($q,this._proxyTracerProvider,Ss.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return rc($q)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Xl($q,Ss.instance()),this._proxyTracerProvider=new zI},t}()});var to,wle=T(()=>{Cle();to=Ile.getInstance()});var Wb={};Fn(Wb,{DiagConsoleLogger:()=>Uue,DiagLogLevel:()=>cn,INVALID_SPANID:()=>HI,INVALID_SPAN_CONTEXT:()=>zb,INVALID_TRACEID:()=>jI,ProxyTracer:()=>$D,ProxyTracerProvider:()=>zI,ROOT_CONTEXT:()=>FD,SamplingDecision:()=>xa,SpanKind:()=>Yb,SpanStatusCode:()=>$b,TraceFlags:()=>_i,ValueType:()=>UD,baggageEntryMetadataFromString:()=>MD,context:()=>Ys,createContextKey:()=>Ql,createNoopMeter:()=>que,createTraceState:()=>ale,default:()=>EFe,defaultTextMapGetter:()=>BD,defaultTextMapSetter:()=>qD,diag:()=>it,isSpanContextValid:()=>$c,isValidSpanId:()=>Mq,isValidTraceId:()=>dv,metrics:()=>jq,propagation:()=>Vp,trace:()=>to});var EFe,or=T(()=>{Iq();qI();Bue();OD();Pq();Gue();Nq();Bq();qq();Xue();Que();Jue();kq();cle();zD();GD();ule();lle();hle();Sle();wle();EFe={context:Ys,diag:it,metrics:jq,propagation:Vp,trace:to}});function YI(t){return t.setValue(Wq,!0)}function TFe(t){return t.deleteValue(Wq)}function pv(t){return t.getValue(Wq)===!0}var Wq,$I=T(()=>{or();Wq=Ql("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var Rle,WD,Kb,KD,Ale,Ple,Nle,Kq=T(()=>{Rle="=",WD=";",Kb=",",KD="baggage",Ale=180,Ple=4096,Nle=8192});var Jq={};Fn(Jq,{getKeyPairs:()=>Qq,parseKeyPairsIntoRecord:()=>IFe,parsePairKeyValue:()=>XD,serializeKeyPairs:()=>Xq});function Xq(t){return t.reduce(function(e,r){var n=""+e+(e!==""?Kb:"")+r;return n.length>Nle?e:n},"")}function Qq(t){return t.getAllEntries().map(function(e){var r=SFe(e,2),n=r[0],i=r[1],o=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=WD+i.metadata.toString()),o})}function XD(t){var e=t.split(WD);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Rle);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),o=decodeURIComponent(r.substring(n+1).trim()),s;return e.length>0&&(s=MD(e.join(WD))),{key:i,value:o,metadata:s}}}}}function IFe(t){return typeof t!="string"||t.length===0?{}:t.split(Kb).map(function(e){return XD(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var SFe,Zq=T(()=>{or();Kq();SFe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});var eG,Dle=T(()=>{or();$I();Kq();Zq();eG=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=Vp.getBaggage(e);if(!(!i||pv(e))){var o=Qq(i).filter(function(a){return a.length<=Ple}).slice(0,Ale),s=Xq(o);s.length>0&&n.set(r,KD,s)}},t.prototype.extract=function(e,r,n){var i=n.get(r,KD),o=Array.isArray(i)?i.join(Kb):i;if(!o)return e;var s={};if(o.length===0)return e;var a=o.split(Kb);return a.forEach(function(u){var c=XD(u);if(c){var l={value:c.value};c.metadata&&(l.metadata=c.metadata),s[c.key]=l}}),Object.entries(s).length===0?e:Vp.setBaggage(e,Vp.createBaggage(s))},t.prototype.fields=function(){return[KD]},t}()});var CFe,kle=T(()=>{CFe=function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t}()});function fv(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=Lle(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=wFe(o.value,2),a=s[0],u=s[1];if(!Ole(a)){it.warn("Invalid attribute key: "+a);continue}if(!QD(u)){it.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(u)?n[a]=u.slice():n[a]=u}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Ole(t){return typeof t=="string"&&t.length>0}function QD(t){return t==null?!0:Array.isArray(t)?RFe(t):Mle(t)}function RFe(t){var e,r,n;try{for(var i=Lle(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!n){if(Mle(s)){n=typeof s;continue}return!1}if(typeof s!==n)return!1}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function Mle(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var Lle,wFe,Fle=T(()=>{or();Lle=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wFe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}});function tG(){return function(t){it.error(AFe(t))}}function AFe(t){return typeof t=="string"?t:JSON.stringify(PFe(t))}function PFe(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var rG=T(()=>{or()});function NFe(t){Ule=t}function Ea(t){try{Ule(t)}catch{}}var Ule,nG=T(()=>{rG();Ule=tG()});var nc,iG=T(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(nc||(nc={}))});var Ble,qle=T(()=>{Ble=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function LFe(t){return kFe.indexOf(t)>-1}function MFe(t){return OFe.indexOf(t)>-1}function UFe(t){return FFe.indexOf(t)>-1}function BFe(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function qFe(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function GFe(t,e,r,n){n===void 0&&(n=DFe);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(o){return o.trim()}))}function jFe(t,e,r){var n=r[t];if(typeof n=="string"){var i=HFe[n.toUpperCase()];i!=null&&(e[t]=i)}}function WI(t){var e={};for(var r in JD){var n=r;switch(n){case"OTEL_LOG_LEVEL":jFe(n,e,t);break;default:if(LFe(n))BFe(n,e,t);else if(MFe(n))qFe(n,e,t);else if(UFe(n))GFe(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function oG(){return typeof process<"u"&&process&&process.env?WI(process.env):WI(Ble)}var DFe,kFe,OFe,FFe,Xb,Qb,Gle,Hle,JD,HFe,sG=T(()=>{or();iG();qle();DFe=",",kFe=["OTEL_SDK_DISABLED"];OFe=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];FFe=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];Xb=1/0,Qb=128,Gle=128,Hle=128,JD={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:cn.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xb,OTEL_ATTRIBUTE_COUNT_LIMIT:Qb,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xb,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Qb,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xb,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Qb,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:Gle,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Hle,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:nc.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};HFe={ALL:cn.ALL,VERBOSE:cn.VERBOSE,DEBUG:cn.DEBUG,INFO:cn.INFO,WARN:cn.WARN,ERROR:cn.ERROR,NONE:cn.NONE}});function ro(){var t=WI(process.env);return Object.assign({HOSTNAME:jle.hostname()},JD,t)}var jle,Vle=T(()=>{jle=we(require("os"));sG()});var VFe,zle=T(()=>{VFe=typeof globalThis=="object"?globalThis:global});function Yle(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function $Fe(t){var e;t.length===16?e=zFe:t.length===32?e=YFe:e=Buffer.alloc(t.length/2);for(var r=0,n=0;n<t.length;n+=2){var i=Yle(t.charCodeAt(n)),o=Yle(t.charCodeAt(n+1));e.writeUInt8(i<<4|o,r++)}return e.toString("base64")}var zFe,YFe,$le=T(()=>{zFe=Buffer.alloc(8),YFe=Buffer.alloc(16)});function Wle(t){return function(){for(var r=0;r<t/4;r++)ZD.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(ZD[r]>0);r++)r===t-1&&(ZD[t-1]=1);return ZD.toString("hex",0,t)}}var WFe,Kle,KFe,ZD,Xle=T(()=>{WFe=8,Kle=16,KFe=function(){function t(){this.generateTraceId=Wle(Kle),this.generateSpanId=Wle(WFe)}return t}(),ZD=Buffer.allocUnsafe(Kle)});var Qle,zp,Jle=T(()=>{Qle=require("perf_hooks"),zp=Qle.performance});var aG,ek=T(()=>{aG="1.17.0"});var Yp,XFe,QFe,JFe,ZFe,eUe,tUe,rUe,nUe,iUe,oUe,sUe,aUe,cUe,Zle=T(()=>{Yp={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},XFe={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},QFe={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},JFe={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},ZFe={INSERT:"insert",EDIT:"edit",DELETE:"delete"},eUe={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},tUe={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},rUe={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},nUe={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},iUe={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},oUe={QUEUE:"queue",TOPIC:"topic"},sUe={RECEIVE:"receive",PROCESS:"process"},aUe={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},cUe={SENT:"SENT",RECEIVED:"RECEIVED"}});var ede=T(()=>{Zle()});var Kt,uUe,lUe,dUe,pUe,fUe,cG,tde=T(()=>{Kt={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},uUe={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},lUe={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},dUe={EC2:"ec2",FARGATE:"fargate"},pUe={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},fUe={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},cG={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var rde=T(()=>{tde()});var uG={};Fn(uG,{AwsEcsLaunchtypeValues:()=>dUe,CloudPlatformValues:()=>lUe,CloudProviderValues:()=>uUe,DbCassandraConsistencyLevelValues:()=>QFe,DbSystemValues:()=>XFe,FaasDocumentOperationValues:()=>ZFe,FaasInvokedProviderValues:()=>eUe,FaasTriggerValues:()=>JFe,HostArchValues:()=>pUe,HttpFlavorValues:()=>iUe,MessageTypeValues:()=>cUe,MessagingDestinationKindValues:()=>oUe,MessagingOperationValues:()=>sUe,NetHostConnectionSubtypeValues:()=>nUe,NetHostConnectionTypeValues:()=>rUe,NetTransportValues:()=>tUe,OsTypeValues:()=>fUe,RpcGrpcStatusCodeValues:()=>aUe,SemanticAttributes:()=>Yp,SemanticResourceAttributes:()=>Kt,TelemetrySdkLanguageValues:()=>cG});var Ju=T(()=>{ede();rde()});var Jb,KI,nde=T(()=>{ek();Ju();KI=(Jb={},Jb[Kt.TELEMETRY_SDK_NAME]="opentelemetry",Jb[Kt.PROCESS_RUNTIME_NAME]="node",Jb[Kt.TELEMETRY_SDK_LANGUAGE]=cG.NODEJS,Jb[Kt.TELEMETRY_SDK_VERSION]=aG,Jb)});function lG(t){t.unref()}var ide=T(()=>{});var ode=T(()=>{Vle();zle();$le();Xle();Jle();nde();ide()});var dG=T(()=>{ode()});function Jl(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*hUe);return[r,n]}function XI(){var t=zp.timeOrigin;if(typeof t!="number"){var e=zp;t=e.timing&&e.timing.fetchStart}return t}function rk(t){var e=Jl(XI()),r=Jl(typeof t=="number"?t:zp.now());return ok(e,r)}function gUe(t){if(QI(t))return t;if(typeof t=="number")return t<XI()?rk(t):Jl(t);if(t instanceof Date)return Jl(t.getTime());throw TypeError("Invalid input type")}function pG(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=tk),[r,n]}function vUe(t){var e=sde,r=""+"0".repeat(e)+t[1]+"Z",n=r.substr(r.length-e-1),i=new Date(t[0]*1e3).toISOString();return i.replace("000Z",n)}function _Ue(t){return t[0]*tk+t[1]}function yUe(t){return t[0]*1e3+t[1]/1e6}function nk(t){return t[0]*1e6+t[1]/1e3}function QI(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function ik(t){return QI(t)||typeof t=="number"||t instanceof Date}function ok(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=tk&&(r[1]-=tk,r[0]+=1),r}var sde,mUe,hUe,tk,ade=T(()=>{dG();sde=9,mUe=6,hUe=Math.pow(10,mUe),tk=Math.pow(10,sde)});var cde=T(()=>{});var Wc,ude=T(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Wc||(Wc={}))});var bUe,fG,lde=T(()=>{or();bUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fG=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,o;try{for(var s=bUe(this._propagators),a=s.next();!a.done;a=s.next()){var u=a.value;try{u.inject(e,r,n)}catch(c){it.warn("Failed to inject with "+u.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,o){try{return o.extract(i,r,n)}catch(s){it.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}()});function dde(t){return TUe.test(t)}function pde(t){return SUe.test(t)&&!IUe.test(t)}var mG,xUe,EUe,TUe,SUe,IUe,fde=T(()=>{mG="[_0-9a-z-*/]",xUe="[a-z]"+mG+"{0,255}",EUe="[a-z0-9]"+mG+"{0,240}@[a-z]"+mG+"{0,13}",TUe=new RegExp("^(?:"+xUe+"|"+EUe+")$"),SUe=/^[ -~]{0,255}[!-~]$/,IUe=/,|=/});var mde,CUe,hde,gde,hG,gG=T(()=>{fde();mde=32,CUe=512,hde=",",gde="=",hG=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+gde+e.get(n)),r},[]).join(hde)},t.prototype._parse=function(e){e.length>CUe||(this._internalState=e.split(hde).reverse().reduce(function(r,n){var i=n.trim(),o=i.indexOf(gde);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,n.length);dde(s)&&pde(a)&&r.set(s,a)}return r},new Map),this._internalState.size>mde&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,mde))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}()});function vde(t){var e=DUe.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var sk,ak,wUe,RUe,AUe,PUe,NUe,DUe,vG,_de=T(()=>{or();$I();gG();sk="traceparent",ak="tracestate",wUe="00",RUe="(?!ff)[\\da-f]{2}",AUe="(?![0]{32})[\\da-f]{32}",PUe="(?![0]{16})[\\da-f]{16}",NUe="[\\da-f]{2}",DUe=new RegExp("^\\s?("+RUe+")-("+AUe+")-("+PUe+")-("+NUe+")(-.*)?\\s?$");vG=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=to.getSpanContext(e);if(!(!i||pv(e)||!$c(i))){var o=wUe+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||_i.NONE).toString(16);n.set(r,sk,o),i.traceState&&n.set(r,ak,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,sk);if(!i)return e;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;var s=vde(o);if(!s)return e;s.isRemote=!0;var a=n.get(r,ak);if(a){var u=Array.isArray(a)?a.join(","):a;s.traceState=new hG(typeof u=="string"?u:void 0)}return to.setSpanContext(e,s)},t.prototype.fields=function(){return[sk,ak]},t}()});var yde=T(()=>{});function kUe(t,e){return t.setValue(yG,e)}function LUe(t){return t.deleteValue(yG)}function OUe(t){return t.getValue(yG)}var yG,_G,bde=T(()=>{or();yG=Ql("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(_G||(_G={}))});var ck,bG=T(()=>{or();ck=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:xa.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var JI,xG=T(()=>{or();JI=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:xa.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var MUe,xde=T(()=>{or();nG();bG();xG();MUe=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(Ea(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new JI),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new JI,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new ck,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new JI,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new ck}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=to.getSpanContext(e);return!a||!$c(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&_i.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&_i.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var FUe,Ede=T(()=>{or();FUe=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:dv(r)&&this._accumulate(r)<this._upperBound?xa.RECORD_AND_SAMPLED:xa.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function VUe(t,e){return function(r){return t(e(r))}}function EG(t){if(!zUe(t)||YUe(t)!==UUe)return!1;var e=jUe(t);if(e===null)return!0;var r=Ide.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Tde.call(r)===HUe}function zUe(t){return t!=null&&typeof t=="object"}function YUe(t){return t==null?t===void 0?qUe:BUe:mv&&mv in Object(t)?$Ue(t):WUe(t)}function $Ue(t){var e=Ide.call(t,mv),r=t[mv],n=!1;try{t[mv]=void 0,n=!0}catch{}var i=Cde.call(t);return n&&(e?t[mv]=r:delete t[mv]),i}function WUe(t){return Cde.call(t)}var UUe,BUe,qUe,GUe,Tde,HUe,jUe,Sde,Ide,mv,Cde,wde=T(()=>{UUe="[object Object]",BUe="[object Null]",qUe="[object Undefined]",GUe=Function.prototype,Tde=GUe.toString,HUe=Tde.call(Object),jUe=VUe(Object.getPrototypeOf,Object),Sde=Object.prototype,Ide=Sde.hasOwnProperty,mv=Symbol?Symbol.toStringTag:void 0,Cde=Sde.toString});function SG(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=Ade(r,t.shift(),0,n);return r}function TG(t){return lk(t)?t.slice():t}function Ade(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>KUe)){if(r++,uk(t)||uk(e)||Pde(e))i=TG(e);else if(lk(t)){if(i=t.slice(),lk(e))for(var o=0,s=e.length;o<s;o++)i.push(TG(e[o]));else if(ZI(e))for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var u=a[o];i[u]=TG(e[u])}}else if(ZI(t))if(ZI(e)){if(!XUe(t,e))return e;i=Object.assign({},t);for(var a=Object.keys(e),o=0,s=a.length;o<s;o++){var u=a[o],c=e[u];if(uk(c))typeof c>"u"?delete i[u]:i[u]=c;else{var l=i[u],d=c;if(Rde(t,u,n)||Rde(e,u,n))delete i[u];else{if(ZI(l)&&ZI(d)){var p=n.get(l)||[],f=n.get(d)||[];p.push({obj:t,key:u}),f.push({obj:e,key:u}),n.set(l,p),n.set(d,f)}i[u]=Ade(i[u],c,r,n)}}}}else i=e;return i}}function Rde(t,e,r){for(var n=r.get(t[e])||[],i=0,o=n.length;i<o;i++){var s=n[i];if(s.key===e&&s.obj===t)return!0}return!1}function lk(t){return Array.isArray(t)}function Pde(t){return typeof t=="function"}function ZI(t){return!uk(t)&&!lk(t)&&!Pde(t)&&typeof t=="object"}function uk(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function XUe(t,e){return!(!EG(t)||!EG(e))}var KUe,Nde=T(()=>{wde();KUe=20});function JUe(t,e){var r,n=new Promise(function(o,s){r=setTimeout(function(){s(new Dde("Operation timed out."))},e)});return Promise.race([t,n]).then(function(i){return clearTimeout(r),i},function(i){throw clearTimeout(r),i})}var QUe,Dde,kde=T(()=>{QUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dde=function(t){QUe(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error)});function Lde(t,e){return typeof e=="string"?t===e:!!t.match(e)}function eBe(t,e){var r,n;if(!e)return!1;try{for(var i=ZUe(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(Lde(t,s))return!0}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var ZUe,Ode=T(()=>{ZUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function tBe(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var Mde=T(()=>{});var Fde,Ude=T(()=>{Fde=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}()});var rBe,nBe,eC,Bde=T(()=>{Ude();rBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},nBe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},eC=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new Fde}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,nBe([this._that],rBe(n),!1))).then(function(o){return r._deferred.resolve(o)},function(o){return r._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},t}()});function qde(t,e){return new Promise(function(r){Ys.with(YI(Ys.active()),function(){t.export(e,function(n){r(n)})})})}var Gde=T(()=>{or();$I()});var Hde={};Fn(Hde,{AlwaysOffSampler:()=>ck,AlwaysOnSampler:()=>JI,AnchoredClock:()=>CFe,BindOnceFuture:()=>eC,CompositePropagator:()=>fG,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>Qb,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>Xb,DEFAULT_ENVIRONMENT:()=>JD,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>Gle,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>Hle,ExportResultCode:()=>Wc,ParentBasedSampler:()=>MUe,RPCType:()=>_G,RandomIdGenerator:()=>KFe,SDK_INFO:()=>KI,TRACE_PARENT_HEADER:()=>sk,TRACE_STATE_HEADER:()=>ak,TimeoutError:()=>Dde,TraceIdRatioBasedSampler:()=>FUe,TraceState:()=>hG,TracesSamplerValues:()=>nc,VERSION:()=>aG,W3CBaggagePropagator:()=>eG,W3CTraceContextPropagator:()=>vG,_globalThis:()=>VFe,addHrTimes:()=>ok,baggageUtils:()=>Jq,callWithTimeout:()=>JUe,deleteRPCMetadata:()=>LUe,getEnv:()=>ro,getEnvWithoutDefaults:()=>oG,getRPCMetadata:()=>OUe,getTimeOrigin:()=>XI,globalErrorHandler:()=>Ea,hexToBase64:()=>$Fe,hrTime:()=>rk,hrTimeDuration:()=>pG,hrTimeToMicroseconds:()=>nk,hrTimeToMilliseconds:()=>yUe,hrTimeToNanoseconds:()=>_Ue,hrTimeToTimeStamp:()=>vUe,internal:()=>IG,isAttributeKey:()=>Ole,isAttributeValue:()=>QD,isTimeInput:()=>ik,isTimeInputHrTime:()=>QI,isTracingSuppressed:()=>pv,isUrlIgnored:()=>eBe,isWrapped:()=>tBe,loggingErrorHandler:()=>tG,merge:()=>SG,millisToHrTime:()=>Jl,otperformance:()=>zp,parseEnvironment:()=>WI,parseTraceParent:()=>vde,sanitizeAttributes:()=>fv,setGlobalErrorHandler:()=>NFe,setRPCMetadata:()=>kUe,suppressTracing:()=>YI,timeInputToHrTime:()=>gUe,unrefTimer:()=>lG,unsuppressTracing:()=>TFe,urlMatches:()=>Lde});var IG,$s=T(()=>{Dle();kle();Fle();nG();rG();ade();cde();ude();ek();Zq();dG();lde();_de();yde();bde();bG();xG();xde();Ede();$I();gG();sG();Nde();iG();kde();Ode();Mde();Bde();ek();Gde();IG={_export:qde}});var jde,Vde=T(()=>{jde="exception"});var iBe,oBe,CG,wG=T(()=>{or();$s();Ju();Vde();iBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},CG=function(){function t(e,r,n,i,o,s,a,u,c){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:$b.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a;var l=Date.now();this._performanceStartTime=zp.now(),this._performanceOffset=l-(this._performanceStartTime+XI()),this._startTimeProvided=u!=null,this.startTime=this._getTime(u??l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(it.warn("Invalid attribute key: "+e),this):QD(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(it.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=iBe(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=oBe(o.value,2),a=s[0],u=s[1];this.setAttribute(a,u)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return it.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(it.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),ik(r)&&(ik(n)||(n=r),r=void 0);var i=fv(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){it.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=pG(this.startTime,this.endTime),this._duration[0]<0&&(it.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<zp.now())return rk(e+this._performanceOffset);if(typeof e=="number")return Jl(e);if(e instanceof Date)return Jl(e.getTime());if(QI(e))return e;if(this._startTimeProvided)return Jl(Date.now());var r=zp.now()-this._performanceStartTime;return ok(this.startTime,Jl(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[Yp.EXCEPTION_MESSAGE]=e:e&&(e.code?n[Yp.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[Yp.EXCEPTION_TYPE]=e.name),e.message&&(n[Yp.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[Yp.EXCEPTION_STACKTRACE]=e.stack)),n[Yp.EXCEPTION_TYPE]||n[Yp.EXCEPTION_MESSAGE]?this.addEvent(jde,n,r):it.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&it.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(it.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}()});var Zl,tC=T(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Zl||(Zl={}))});var hv,dk=T(()=>{tC();hv=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Zl.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}()});var $p,pk=T(()=>{tC();$p=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Zl.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}()});var rC,RG=T(()=>{or();$s();dk();pk();rC=function(){function t(e){var r,n,i,o;this._root=e.root,this._root||(Ea(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new $p),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new $p,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new hv,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new $p,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new hv}return t.prototype.shouldSample=function(e,r,n,i,o,s){var a=to.getSpanContext(e);return!a||!$c(a)?this._root.shouldSample(e,r,n,i,o,s):a.isRemote?a.traceFlags&_i.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&_i.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}()});var fk,AG=T(()=>{or();tC();fk=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:dv(r)&&this._accumulate(r)<this._upperBound?Zl.RECORD_AND_SAMPLED:Zl.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r},t}()});function mk(){return{sampler:PG(sBe),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:ro().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:ro().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:ro().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:ro().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:ro().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:ro().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:ro().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:ro().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function PG(t){switch(t===void 0&&(t=ro()),t.OTEL_TRACES_SAMPLER){case nc.AlwaysOn:return new $p;case nc.AlwaysOff:return new hv;case nc.ParentBasedAlwaysOn:return new rC({root:new $p});case nc.ParentBasedAlwaysOff:return new rC({root:new hv});case nc.TraceIdRatio:return new fk(zde(t));case nc.ParentBasedTraceIdRatio:return new rC({root:new fk(zde(t))});default:return it.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+aBe+'".'),new $p}}function zde(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return it.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Zb+"."),Zb;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(it.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Zb+"."),Zb):e<0||e>1?(it.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Zb+"."),Zb):e}var sBe,aBe,Zb,NG=T(()=>{or();$s();dk();pk();RG();AG();sBe=ro(),aBe=nc.AlwaysOn,Zb=1});function Yde(t){var e={sampler:PG()},r=mk(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function $de(t){var e,r,n,i,o,s,a,u,c,l,d,p,f=Object.assign({},t.spanLimits),m=oG();return f.attributeCountLimit=(s=(o=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:Qb,f.attributeValueLengthLimit=(p=(d=(l=(u=(a=t.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&u!==void 0?u:(c=t.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&l!==void 0?l:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:Xb,Object.assign({},t,{spanLimits:f})}var DG=T(()=>{NG();$s()});var Wde,Kde=T(()=>{or();$s();Wde=function(){function t(e,r){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=ro();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new eC(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(it.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&_i.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&it.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(it.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);Ys.with(YI(Ys.active()),function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),s=function(){return e._exporter.export(o,function(u){var c;clearTimeout(i),u.code===Wc.SUCCESS?r():n((c=u.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(u){return u.resource}).filter(function(u){return u.asyncAttributesPending});a.length===0?s():Promise.all(a.map(function(u){var c;return(c=u.waitForAsyncAttributes)===null||c===void 0?void 0:c.call(u)})).then(s,function(u){Ea(u),n(u)})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){Ea(r)})},this._scheduledDelayMillis),lG(this._timer))},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}()});var cBe,kG,Xde=T(()=>{Kde();cBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kG=function(t){cBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e}(Wde)});function Qde(t){return function(){for(var r=0;r<t/4;r++)hk.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(hk[r]>0);r++)r===t-1&&(hk[t-1]=1);return hk.toString("hex",0,t)}}var uBe,Jde,LG,hk,Zde=T(()=>{uBe=8,Jde=16,LG=function(){function t(){this.generateTraceId=Qde(Jde),this.generateSpanId=Qde(uBe)}return t}(),hk=Buffer.allocUnsafe(Jde)});var epe=T(()=>{Xde();Zde()});var gk=T(()=>{epe()});var OG,tpe=T(()=>{or();$s();wG();DG();gk();OG=function(){function t(e,r,n){this._tracerProvider=n;var i=Yde(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new LG,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,o,s;r===void 0&&(r={}),n===void 0&&(n=Ys.active()),r.root&&(n=to.deleteSpan(n));var a=to.getSpan(n);if(pv(n)){it.debug("Instrumentation suppressed, returning Noop Span");var u=to.wrapSpanContext(zb);return u}var c=a?.spanContext(),l=this._idGenerator.generateSpanId(),d,p,f;!c||!to.isSpanContextValid(c)?d=this._idGenerator.generateTraceId():(d=c.traceId,p=c.traceState,f=c.spanId);var m=(i=r.kind)!==null&&i!==void 0?i:Yb.INTERNAL,h=((o=r.links)!==null&&o!==void 0?o:[]).map(function(S){return{context:S.context,attributes:fv(S.attributes)}}),g=fv(r.attributes),v=this._sampler.shouldSample(n,d,e,m,g,h);p=(s=v.traceState)!==null&&s!==void 0?s:p;var _=v.decision===xa.RECORD_AND_SAMPLED?_i.SAMPLED:_i.NONE,y={traceId:d,spanId:l,traceFlags:_,traceState:p};if(v.decision===xa.NOT_RECORD){it.debug("Recording is off, propagating context in a non-recording span");var u=to.wrapSpanContext(y);return u}var E=new CG(this,n,e,y,m,f,h,r.startTime),x=fv(Object.assign(g,v.attributes));return E.setAttributes(x),E},t.prototype.startActiveSpan=function(e,r,n,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(o=r,a=n):(o=r,s=n,a=i);var u=s??Ys.active(),c=this.startSpan(e,o,u),l=to.setSpan(u,c);return Ys.with(l,a,void 0,c)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}()});function rpe(){return"unknown_service:"+process.argv0}var npe=T(()=>{});var ipe,ope,MG=T(()=>{ipe=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},ope=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}}});var spe,ape,ex,vk=T(()=>{spe=we(require("child_process")),ape=we(require("util")),ex=ape.promisify(spe.exec)});var cpe={};Fn(cpe,{getMachineId:()=>pBe});function pBe(){return lBe(this,void 0,void 0,function(){var t,e,r,n;return dBe(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,ex('ioreg -rd1 -c "IOPlatformExpertDevice"')];case 1:return t=i.sent(),e=t.stdout.split(`
`).find(function(o){return o.includes("IOPlatformUUID")}),e?(r=e.split('" = "'),r.length===2?[2,r[1].slice(0,-1)]:[3,3]):[2,""];case 2:return n=i.sent(),it.debug("error reading machine id: "+n),[3,3];case 3:return[2,""]}})})}var lBe,dBe,upe=T(()=>{vk();or();lBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},dBe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var dpe={};Fn(dpe,{getMachineId:()=>gBe});function gBe(){return fBe(this,void 0,void 0,function(){var t,e,r,n,i,o,s,a,u;return mBe(this,function(c){switch(c.label){case 0:t=["/etc/machine-id","/var/lib/dbus/machine-id"],c.label=1;case 1:c.trys.push([1,8,9,10]),e=hBe(t),r=e.next(),c.label=2;case 2:if(r.done)return[3,7];n=r.value,c.label=3;case 3:return c.trys.push([3,5,,6]),[4,lpe.promises.readFile(n,{encoding:"utf8"})];case 4:return i=c.sent(),[2,i.trim()];case 5:return o=c.sent(),it.debug("error reading machine id: "+o),[3,6];case 6:return r=e.next(),[3,2];case 7:return[3,10];case 8:return s=c.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(a)throw a.error}return[7];case 10:return[2,""]}})})}var lpe,fBe,mBe,hBe,ppe=T(()=>{lpe=require("fs");or();fBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},mBe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},hBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});var mpe={};Fn(mpe,{getMachineId:()=>yBe});function yBe(){return vBe(this,void 0,void 0,function(){var e,t,e,r;return _Be(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,fpe.promises.readFile("/etc/hostid",{encoding:"utf8"})];case 1:return e=n.sent(),[2,e.trim()];case 2:return t=n.sent(),it.debug("error reading machine id: "+t),[3,3];case 3:return n.trys.push([3,5,,6]),[4,ex("kenv -q smbios.system.uuid")];case 4:return e=n.sent(),[2,e.stdout.trim()];case 5:return r=n.sent(),it.debug("error reading machine id: "+r),[3,6];case 6:return[2,""]}})})}var fpe,vBe,_Be,hpe=T(()=>{fpe=require("fs");vk();or();vBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},_Be=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var gpe={};Fn(gpe,{getMachineId:()=>EBe});function EBe(){return bBe(this,void 0,void 0,function(){var t,e,r,n,i;return xBe(this,function(o){switch(o.label){case 0:t="QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",e="%windir%\\System32\\REG.exe",_k.arch==="ia32"&&"PROCESSOR_ARCHITEW6432"in _k.env&&(e="%windir%\\sysnative\\cmd.exe /c "+e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ex(e+" "+t)];case 2:return r=o.sent(),n=r.stdout.split("REG_SZ"),n.length===2?[2,n[1].trim()]:[3,4];case 3:return i=o.sent(),it.debug("error reading machine id: "+i),[3,4];case 4:return[2,""]}})})}var _k,bBe,xBe,vpe=T(()=>{_k=we(require("process"));vk();or();bBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},xBe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var _pe={};Fn(_pe,{getMachineId:()=>IBe});function IBe(){return TBe(this,void 0,void 0,function(){return SBe(this,function(t){return it.debug("could not read machine-id: unsupported platform"),[2,""]})})}var TBe,SBe,ype=T(()=>{or();TBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},SBe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}});var bpe,gv,xpe=T(()=>{bpe=we(require("process"));switch(bpe.platform){case"darwin":gv=(upe(),ki(cpe)).getMachineId;break;case"linux":gv=(ppe(),ki(dpe)).getMachineId;break;case"freebsd":gv=(hpe(),ki(mpe)).getMachineId;break;case"win32":gv=(vpe(),ki(gpe)).getMachineId;break;default:gv=(ype(),ki(_pe)).getMachineId}});var yk,CBe,Epe,FG=T(()=>{Ju();tx();yk=require("os");MG();xpe();CBe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Kt.HOST_NAME]=(0,yk.hostname)(),r[Kt.HOST_ARCH]=ipe((0,yk.arch)()),r);return new Ws(n,this._getAsyncAttributes())},t.prototype._getAsyncAttributes=function(){return gv().then(function(e){var r={};return e&&(r[Kt.HOST_ID]=e),r})},t}(),Epe=new CBe});var wBe,N2t,Tpe=T(()=>{FG();wBe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Epe.detect(e))},t}(),N2t=new wBe});var bk,RBe,Spe,UG=T(()=>{Ju();tx();bk=require("os");MG();RBe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Kt.OS_TYPE]=ope((0,bk.platform)()),r[Kt.OS_VERSION]=(0,bk.release)(),r);return new Ws(n)},t}(),Spe=new RBe});var ABe,U2t,Ipe=T(()=>{UG();ABe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Spe.detect(e))},t}(),U2t=new ABe});var Rpe,Cpe,wpe,PBe,Ape,BG=T(()=>{or();Ju();tx();Rpe=we(require("os")),Cpe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},wpe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},PBe=function(){function t(){}return t.prototype.detect=function(e){var r,n=(r={},r[Kt.PROCESS_PID]=process.pid,r[Kt.PROCESS_EXECUTABLE_NAME]=process.title,r[Kt.PROCESS_EXECUTABLE_PATH]=process.execPath,r[Kt.PROCESS_COMMAND_ARGS]=wpe(wpe([process.argv[0]],Cpe(process.execArgv),!1),Cpe(process.argv.slice(1)),!1),r[Kt.PROCESS_RUNTIME_VERSION]=process.versions.node,r[Kt.PROCESS_RUNTIME_NAME]="nodejs",r[Kt.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r);process.argv.length>1&&(n[Kt.PROCESS_COMMAND]=process.argv[1]);try{var i=Rpe.userInfo();n[Kt.PROCESS_OWNER]=i.username}catch(o){it.debug("error obtaining process owner: "+o)}return new Ws(n)},t}(),Ape=new PBe});var NBe,z2t,Ppe=T(()=>{BG();NBe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Ape.detect(e))},t}(),z2t=new NBe});var Npe=T(()=>{npe();Tpe();Ipe();FG();UG();Ppe();BG()});var qG=T(()=>{Npe()});var Ym,DBe,kBe,LBe,Ws,tx=T(()=>{or();Ju();$s();qG();Ym=function(){return Ym=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ym.apply(this,arguments)},DBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},kBe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},LBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Ws=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(o){return n._attributes=Object.assign({},n._attributes,o),n.asyncAttributesPending=!1,o},function(o){return it.debug("a resource's async attributes promise rejected: %s",o),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[Kt.SERVICE_NAME]=rpe(),e[Kt.TELEMETRY_SDK_LANGUAGE]=KI[Kt.TELEMETRY_SDK_LANGUAGE],e[Kt.TELEMETRY_SDK_NAME]=KI[Kt.TELEMETRY_SDK_NAME],e[Kt.TELEMETRY_SDK_VERSION]=KI[Kt.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&it.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return DBe(this,void 0,void 0,function(){return kBe(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=Ym(Ym({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var o=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(s){var a,u=LBe(s,2),c=u[0],l=u[1];return Ym(Ym(Ym(Ym({},r._syncAttributes),c),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),l)});return new t(i,o)},t.EMPTY=new t({}),t}()});var Dpe=T(()=>{});var kpe=T(()=>{});var Lpe=T(()=>{});var OBe,uwt,Ope=T(()=>{xk();OBe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Mpe.detect(e))},t}(),uwt=new OBe});var MBe,FBe,UBe,Fpe,GG=T(()=>{or();$s();Ju();tx();MBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},UBe=function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(e){var r={},n=ro(),i=n.OTEL_RESOURCE_ATTRIBUTES,o=n.OTEL_SERVICE_NAME;if(i)try{var s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(a){it.debug("EnvDetector failed: "+a.message)}return o&&(r[Kt.SERVICE_NAME]=o),new Ws(r)},t.prototype._parseResourceAttributes=function(e){var r,n;if(!e)return{};var i={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var s=MBe(o),a=s.next();!a.done;a=s.next()){var u=a.value,c=u.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(c.length===2){var l=FBe(c,2),d=l[0],p=l[1];if(d=d.trim(),p=p.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(d))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(p))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[d]=decodeURIComponent(p)}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},t.prototype._isBaggageOctetString=function(e){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<33||n===44||n===59||n===92||n>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},t}(),Fpe=new UBe});var BBe,vwt,Upe=T(()=>{GG();BBe=function(){function t(){}return t.prototype.detect=function(e){return Promise.resolve(Fpe.detect(e))},t}(),vwt=new BBe});var HG,qBe,Mpe,Bpe=T(()=>{Ju();xk();or();HG=function(){return HG=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},HG.apply(this,arguments)},qBe=function(){function t(){}return t.prototype.detect=function(e){var r,n=typeof navigator<"u";if(!n)return Ws.empty();var i=(r={},r[Kt.PROCESS_RUNTIME_NAME]="browser",r[Kt.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",r[Kt.PROCESS_RUNTIME_VERSION]=navigator.userAgent,r);return this._getResourceAttributes(i,e)},t.prototype._getResourceAttributes=function(e,r){return e[Kt.PROCESS_RUNTIME_VERSION]===""?(it.debug("BrowserDetector failed: Unable to find required browser resources. "),Ws.empty()):new Ws(HG({},e))},t}(),Mpe=new qBe});var qpe=T(()=>{Ope();Upe();Bpe();GG()});var Gpe=T(()=>{});var xk=T(()=>{tx();Dpe();qG();kpe();Lpe();qpe();Gpe()});var Ek,Hpe,jpe=T(()=>{$s();Ek=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hpe=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=Ek(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.forceFlush())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(u){Ea(u||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var o=Ek(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(e,r)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=Ek(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=Ek(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s.shutdown())}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,u){Promise.all(n).then(function(){a()},u)})},t}()});var jG,VG=T(()=>{jG=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}()});var $m,GBe,Vpe=T(()=>{or();$s();xk();zG();NG();jpe();VG();gk();DG();(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})($m||($m={}));GBe=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=SG({},mk(),$de(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Ws.empty(),this.resource=Ws.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new kG(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new jG}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new OG({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return it.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Hpe(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),to.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Ys.setGlobalContextManager(e.contextManager),e.propagator&&Vp.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),o=$m.timeout},e);n.forceFlush().then(function(){clearTimeout(s),o!==$m.timeout&&(o=$m.resolved,i(o))}).catch(function(a){clearTimeout(s),o=$m.error,i(a)})})});return new Promise(function(n,i){Promise.all(r).then(function(o){var s=o.filter(function(a){return a!==$m.resolved});s.length>0?i(s):n()}).catch(function(o){return i([o])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(ro().OTEL_PROPAGATORS)),n=r.map(function(o){var s=e._getPropagator(o);return s||it.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=n.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return r.length===1?i[0]:new fG({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=ro().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||it.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new vG}],["baggage",function(){return new eG}]]),t._registeredExporters=new Map,t}()});var HBe,jBe,zpe=T(()=>{$s();HBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jBe=function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:nk(e.startTime),duration:nk(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,i;try{for(var o=HBe(e),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}if(r)return r({code:Wc.SUCCESS})},t}()});var VBe,zBe,YBe,Ype=T(()=>{$s();VBe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},zBe=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},YBe=function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:Wc.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,zBe([],VBe(e),!1)),setTimeout(function(){return r({code:Wc.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t}()});var $pe=T(()=>{});var $Be,WBe,KBe,Wpe=T(()=>{or();$s();$Be=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},WBe=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},KBe=function(){function t(e){this._exporter=e,this._shutdownOnce=new eC(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return $Be(this,void 0,void 0,function(){return WBe(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,i;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&_i.SAMPLED){var o=function(){return IG._export(r._exporter,[e]).then(function(a){var u;a.code!==Wc.SUCCESS&&Ea((u=a.error)!==null&&u!==void 0?u:new Error("SimpleSpanProcessor: span export failed (status "+a+")"))}).catch(function(a){Ea(a)})};if(e.resource.asyncAttributesPending){var s=(i=(n=e.resource).waitForAsyncAttributes)===null||i===void 0?void 0:i.call(n).then(function(){return s!=null&&r._unresolvedExports.delete(s),o()},function(a){return Ea(a)});s!=null&&this._unresolvedExports.add(s)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}()});var Kpe=T(()=>{});var Xpe=T(()=>{});var Qpe=T(()=>{});var Jpe=T(()=>{});var Zpe=T(()=>{});var efe={};Fn(efe,{AlwaysOffSampler:()=>hv,AlwaysOnSampler:()=>$p,BasicTracerProvider:()=>GBe,BatchSpanProcessor:()=>kG,ConsoleSpanExporter:()=>jBe,ForceFlushState:()=>$m,InMemorySpanExporter:()=>YBe,NoopSpanProcessor:()=>jG,ParentBasedSampler:()=>rC,RandomIdGenerator:()=>LG,SamplingDecision:()=>Zl,SimpleSpanProcessor:()=>KBe,Span:()=>CG,TraceIdRatioBasedSampler:()=>fk,Tracer:()=>OG});var zG=T(()=>{tpe();Vpe();gk();zpe();Ype();$pe();Wpe();Kpe();VG();dk();pk();RG();AG();tC();wG();Xpe();Qpe();Jpe();Zpe()});var rfe=P(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.enable=Kc.azureCoreTracing=Kc.AzureMonitorSymbol=void 0;var YG=oi();Kc.AzureMonitorSymbol="Azure_Monitor_Tracer";var $G="azure-coretracing",tfe=!1,XBe=function(t){if(tfe)return t;try{var e=(zG(),ki(efe)),r=(or(),ki(Wb)),n=new e.BasicTracerProvider,i=n.getTracer("applicationinsights tracer");if(t.setTracer){var o=t.setTracer;t.setTracer=function(c){var l=c.startSpan;c.startSpan=function(d,p,f){var m=l.call(this,d,p,f),h=m.end;return m.end=function(){var g=h.apply(this,arguments);return YG.channel.publish($G,m),g},m},c[Kc.AzureMonitorSymbol]=!0,o.call(this,c)},r.trace.getSpan(r.context.active()),t.setTracer(i)}else{var s=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(c){var l=c.getTracer;return c.getTracer=function(d,p){var f=l.call(this,d,p);if(!f[Kc.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,g,v){var _=m.call(this,h,g,v),y=_.end;return _.end=function(){var E=y.apply(this,arguments);return YG.channel.publish($G,_),E},_},f[Kc.AzureMonitorSymbol]=!0}return f},s.call(this,c)},n.register(),r.trace.getSpan(r.context.active());var a=require("@opentelemetry/instrumentation"),u=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[u.createAzureSdkInstrumentation()]})}tfe=!0}catch{}return t};Kc.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:XBe,publisherName:$G};function QBe(){YG.channel.registerMonkeyPatch("@azure/core-tracing",Kc.azureCoreTracing)}Kc.enable=QBe});var ife=P(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0});vv.enable=vv.bunyan=void 0;var nfe=oi(),JBe=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),nfe.channel.publish("bunyan",{level:r.level,result:o})}return i},t};vv.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:JBe};function ZBe(){nfe.channel.registerMonkeyPatch("bunyan",vv.bunyan)}vv.enable=ZBe});var sfe=P(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});_v.enable=_v.console=void 0;var WG=oi(),ofe=require("stream"),eqe=function(t){var e=new ofe.Writable,r=new ofe.Writable;e.write=function(c){if(!c)return!0;var l=c.toString();return WG.channel.publish("console",{message:l}),!0},r.write=function(c){if(!c)return!0;var l=c.toString();return WG.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(c){var l=t[c];l&&(t[c]=function(){if(n[c])try{n[c].apply(n,arguments)}catch{}return l.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var u=a[s];o(u)}return t};_v.console={versionSpecifier:">= 4.0.0",patch:eqe};function tqe(){WG.channel.registerMonkeyPatch("console",_v.console),require("console")}_v.enable=tqe});var afe=P(yv=>{"use strict";Object.defineProperty(yv,"__esModule",{value:!0});yv.enable=yv.mongoCore=void 0;var KG=oi(),rqe=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=KG.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=KG.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};yv.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:rqe};function nqe(){KG.channel.registerMonkeyPatch("mongodb-core",yv.mongoCore)}yv.enable=nqe});var cfe=P(Ks=>{"use strict";var rx=Ks&&Ks.__assign||function(){return rx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rx.apply(this,arguments)};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.enable=Ks.mongo330=Ks.mongo3=Ks.mongo2=void 0;var Is=oi(),iqe=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return Is.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=rx(rx({},n),{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Is.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):Is.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Is.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):Is.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},oqe=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=Is.channel.bindToContext(function(o){return o()}),r[i.requestId]=rx(rx({},i),{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Is.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Is.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},sqe=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Is.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Is.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},aqe=function(t){sqe(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=Is.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Is.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Is.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};Ks.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:iqe};Ks.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:oqe};Ks.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:aqe};function cqe(){Is.channel.registerMonkeyPatch("mongodb",Ks.mongo2),Is.channel.registerMonkeyPatch("mongodb",Ks.mongo3),Is.channel.registerMonkeyPatch("mongodb",Ks.mongo330)}Ks.enable=cqe});var lfe=P(bv=>{"use strict";Object.defineProperty(bv,"__esModule",{value:!0});bv.enable=bv.mysql=void 0;var Tk=oi(),ufe=require("path"),uqe=function(t,e){var r=function(u,c){return function(l,d){var p=u[l];p&&(u[l]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var g=arguments[m],v={result:null,startTime:null,startDate:null};typeof g=="function"&&(d?(v.startTime=process.hrtime(),v.startDate=new Date,arguments[m]=Tk.channel.bindToContext(d(v,g))):arguments[m]=Tk.channel.bindToContext(g));var _=p.apply(this,arguments);return v.result=_,_})}},n=function(u,c){return r(u.prototype,c+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(ufe.dirname(e)+"/lib/Connection");i.forEach(function(u){return n(o,"Connection")(u)}),r(o,"Connection")("createQuery",function(u,c){return function(l){var d=process.hrtime(u.startTime),p=d[0]*1e3+d[1]/1e6|0;Tk.channel.publish("mysql",{query:u.result,callbackArgs:arguments,err:l,duration:p,time:u.startDate}),c.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(ufe.dirname(e)+"/lib/Pool");return s.forEach(function(u){return n(a,"Pool")(u)}),t};bv.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:uqe};function lqe(){Tk.channel.registerMonkeyPatch("mysql",bv.mysql)}bv.enable=lqe});var pfe=P(xv=>{"use strict";Object.defineProperty(xv,"__esModule",{value:!0});xv.enable=xv.postgresPool1=void 0;var dfe=oi();function dqe(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=dfe.channel.bindToContext(n)),e.apply(this,arguments)},t}xv.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:dqe};function pqe(){dfe.channel.registerMonkeyPatch("pg-pool",xv.postgresPool1)}xv.enable=pqe});var mfe=P(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.enable=ed.postgres=ed.postgres6=void 0;var nx=oi(),ffe=require("events"),XG="postgres";function fqe(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime(),l;function d(p){p&&p[n]&&(p=p[n]);var f=nx.channel.bindToContext(function(m,h){var g=process.hrtime(c);if(u.result=h&&{rowCount:h.rowCount,command:h.command},u.error=m,u.duration=Math.ceil(g[0]*1e3+g[1]/1e6),nx.channel.publish(XG,u),m){if(p)return p.apply(this,arguments);l&&l instanceof ffe.EventEmitter&&l.emit("error",m)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(f,n,{value:p}),f}catch{return p}}try{typeof o=="string"?s instanceof Array?(u.query.preparable={text:o,args:s},a=d(a)):(u.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?u.query.plan=o.name:o.values instanceof Array?u.query.preparable={text:o.text,args:o.values}:u.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},t}function mqe(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var u=this,c,l,d=!!a,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f,m=process.hrtime();function h(_){_&&_[n]&&(_=_[n]);var y=nx.channel.bindToContext(function(E,x){var S=process.hrtime(m);if(p.result=x&&{rowCount:x.rowCount,command:x.command},p.error=E,p.duration=Math.ceil(S[0]*1e3+S[1]/1e6),nx.channel.publish(XG,p),E){if(_)return _.apply(this,arguments);f&&f instanceof ffe.EventEmitter&&f.emit("error",E)}else _&&_.apply(this,arguments)});try{return Object.defineProperty(y,n,{value:_}),y}catch{return _}}try{typeof o=="string"?s instanceof Array?(p.query.preparable={text:o,args:s},d=typeof a=="function",a=d?h(a):a):(p.query.text=o,a?(d=typeof a=="function",a=d?h(a):a):(d=typeof s=="function",s=d?h(s):s)):(typeof o.name=="string"?p.query.plan=o.name:o.values instanceof Array?p.query.preparable={text:o.text,args:o.values}:o.cursor?p.query.text=(c=o.cursor)===null||c===void 0?void 0:c.text:p.query.text=o.text,a?(d=typeof a=="function",a=h(a)):s?(d=typeof s=="function",s=d?h(s):s):(d=typeof o.callback=="function",o.callback=d?h(o.callback):o.callback))}catch{return r.apply(this,arguments)}arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3;try{f=r.apply(this,arguments)}catch(_){throw h()(_,void 0),_}if(!d){if(f instanceof Promise)return f.then(function(_){return h()(void 0,_),new u._Promise(function(y,E){y(_)})}).catch(function(_){return h()(_,void 0),new u._Promise(function(y,E){E(_)})});var g=f.text?f.text:"";if(f.cursor&&(g=(l=f.cursor)===null||l===void 0?void 0:l.text),g){var v={command:g,rowCount:0};h()(void 0,v)}}return f},t}ed.postgres6={versionSpecifier:"6.*",patch:fqe};ed.postgres={versionSpecifier:">=7.* <=8.*",patch:mqe,publisherName:XG};function hqe(){nx.channel.registerMonkeyPatch("pg",ed.postgres6),nx.channel.registerMonkeyPatch("pg",ed.postgres)}ed.enable=hqe});var hfe=P(Ev=>{"use strict";Object.defineProperty(Ev,"__esModule",{value:!0});Ev.enable=Ev.redis=void 0;var QG=oi(),gqe=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=QG.channel.bindToContext(function(a,u){var c=process.hrtime(o),l=c[0]*1e3+c[1]/1e6|0;QG.channel.publish("redis",{duration:l,address:i,commandObj:r,err:a,result:u,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};Ev.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:gqe};function vqe(){QG.channel.registerMonkeyPatch("redis",Ev.redis)}Ev.enable=vqe});var gfe=P(Wp=>{"use strict";var Sk=Wp&&Wp.__assign||function(){return Sk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sk.apply(this,arguments)};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.enable=Wp.tedious=void 0;var JG=oi(),_qe=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return JG.channel.bindToContext(function(u,c,l){var d=process.hrtime(s);a=Sk(Sk({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!u&&{rowCount:c,rows:l},query:{text:this.parametersByName.statement.value},error:u,duration:Math.ceil(d[0]*1e3+d[1]/1e6)}),JG.channel.publish("tedious",a),o.call(this,u,c,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};Wp.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:_qe};function yqe(){JG.channel.registerMonkeyPatch("tedious",Wp.tedious)}Wp.enable=yqe});var vfe=P(Ta=>{"use strict";var bqe=Ta&&Ta.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xqe=Ta&&Ta.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.enable=Ta.winston2=Ta.winston3=void 0;var Ik=oi(),Eqe=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",Ik.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},Tqe=function(t){var e=function(s,a){var u;return s.config.npm.levels[a]!=null?u="npm":s.config.syslog.levels[a]!=null?u="syslog":u="unknown",u},r=function(s){bqe(a,s);function a(u,c){var l=s.call(this,c)||this;return l.winston=u,l}return a.prototype.log=function(u,c){var l=u.message,d=u.level,p=u.meta,f=xqe(u,["message","level","meta"]);d=typeof Symbol.for=="function"?u[Symbol.for("level")]:d,l=u instanceof Error?u:l;var m=e(this.winston,d);p=p||{};for(var h in f)f.hasOwnProperty(h)&&(p[h]=f[h]);Ik.channel.publish("winston",{message:l,level:d,levelKind:m,meta:p}),c()},a}(t.Transport);function n(){var s=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var u in s)s.hasOwnProperty(u)&&(a=a===void 0||s[u]>s[a]?u:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=t.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var u;for(var c in a)a.hasOwnProperty(c)&&(u=u===void 0||a[c]>a[u]?c:u);var l=i.apply(this,arguments);l.add(new r(t,{level:u}));var d=l.configure;return l.configure=function(){d.apply(this,arguments),n.apply(this,arguments)},l};var o=t.configure;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};Ta.winston3={versionSpecifier:"3.x",patch:Tqe};Ta.winston2={versionSpecifier:"2.x",patch:Eqe};function Sqe(){Ik.channel.registerMonkeyPatch("winston",Ta.winston2),Ik.channel.registerMonkeyPatch("winston",Ta.winston3)}Ta.enable=Sqe});var Afe=P(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.enable=un.tedious=un.pgPool=un.pg=un.winston=un.redis=un.mysql=un.mongodb=un.mongodbCore=un.console=un.bunyan=un.azuresdk=void 0;var _fe=rfe();un.azuresdk=_fe;var yfe=ife();un.bunyan=yfe;var bfe=sfe();un.console=bfe;var xfe=afe();un.mongodbCore=xfe;var Efe=cfe();un.mongodb=Efe;var Tfe=lfe();un.mysql=Tfe;var Sfe=pfe();un.pgPool=Sfe;var Ife=mfe();un.pg=Ife;var Cfe=hfe();un.redis=Cfe;var wfe=gfe();un.tedious=wfe;var Rfe=vfe();un.winston=Rfe;function Iqe(){yfe.enable(),bfe.enable(),xfe.enable(),Efe.enable(),Tfe.enable(),Ife.enable(),Sfe.enable(),Cfe.enable(),Rfe.enable(),_fe.enable(),wfe.enable()}un.enable=Iqe});var Rk=P(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.registerContextPreservation=Wm.IsInitialized=void 0;var ZG=In(),Nfe=ED();Wm.IsInitialized=!Nfe.JsonConfig.getInstance().noDiagnosticChannel;var eH="DiagnosticChannel";if(Wm.IsInitialized){Zu=Afe(),Pfe=Nfe.JsonConfig.getInstance().noPatchModules,Ck=Pfe.split(","),tH={bunyan:Zu.bunyan,console:Zu.console,mongodb:Zu.mongodb,mongodbCore:Zu.mongodbCore,mysql:Zu.mysql,redis:Zu.redis,pg:Zu.pg,pgPool:Zu.pgPool,winston:Zu.winston,azuresdk:Zu.azuresdk};for(wk in tH)Ck.indexOf(wk)===-1&&(tH[wk].enable(),ZG.info(eH,"Subscribed to "+wk+" events"));Ck.length>0&&ZG.info(eH,"Some modules will not be patched",Ck)}else ZG.info(eH,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Zu,Pfe,Ck,tH,wk;function Cqe(t){if(Wm.IsInitialized){var e=oi();e.channel.addContextPreservation(t)}}Wm.registerContextPreservation=Cqe});var ix=P((ORt,Dfe)=>{"use strict";Dfe.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Wo=P((iH,kfe)=>{"use strict";var Xm=iH&&iH.__assign||function(){return Xm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xm.apply(this,arguments)},wqe=require("http"),rH=require("https"),nH=require("url"),Km=require("constants"),Tv=In(),ox=ix(),Rqe=ED(),Aqe=function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,u){return String.fromCharCode(a>>u&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){Tv.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){Tv.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(u){i=o.constructor.name.toString()+" (Error: "+u.message+")",Tv.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new nH.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[ox.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var a=new nH.URL(r),u=Xm(Xm({},n),{host:a.hostname,port:a.port,path:a.pathname}),c=void 0;if(o&&(a.protocol==="https:"&&(c=e.proxyHttpsUrl||void 0),a.protocol==="http:"&&(c=e.proxyHttpUrl||void 0),c)){c.indexOf("//")===0&&(c="http:"+c);try{var l=new nH.URL(c);l.protocol==="https:"?(Tv.info("Proxies that use HTTPS are not supported"),c=void 0):u=Xm(Xm({},u),{host:l.hostname,port:l.port||"80",path:r,headers:Xm(Xm({},u.headers),{Host:a.hostname})})}catch{Tv.warn("Wrong proxy URL provided")}}var d=a.protocol==="https:"&&!c;return s&&(d&&e.httpsAgent!==void 0?u.agent=e.httpsAgent:!d&&e.httpAgent!==void 0?u.agent=e.httpAgent:d&&(u.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),d?rH.request(u,i):wqe.request(u,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){Tv.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(ox.requestContextHeader,ox.requestContextSourceKey+"="+e.config.correlationId)},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){Tv.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=ox.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(ox.requestContextHeader,n+","+ox.requestContextSourceKey+"="+e.config.correlationId)},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!Rqe.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new rH.Agent({keepAlive:!0,maxSockets:25,secureOptions:Km.SSL_OP_NO_SSLv2|Km.SSL_OP_NO_SSLv3|Km.SSL_OP_NO_TLSv1|Km.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new rH.Agent({secureOptions:Km.SSL_OP_NO_SSLv2|Km.SSL_OP_NO_SSLv3|Km.SSL_OP_NO_TLSv1|Km.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t}();kfe.exports=Aqe});var Sv=P((MRt,Lfe)=>{"use strict";var oH=Wo(),Pqe=function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+oH.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=oH.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=oH.randomu32(),t}();Lfe.exports=Pqe});var Ak=P((FRt,Ofe)=>{"use strict";var Ko=Wo(),Nqe=Sv(),Dqe=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Ko.w3cTraceId(),this.spanId=Ko.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Ko.w3cTraceId(),this.spanId=Ko.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Ko.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Ko.w3cTraceId(),this.spanId=Ko.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Ko.w3cTraceId(),this.spanId=Ko.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Ko.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Ko.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Ko.w3cTraceId().substr(0,16),this.traceId=Ko.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=Nqe.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=Ko.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Ko.w3cTraceId(),this.spanId=Ko.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Ko.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();Ofe.exports=Dqe});var sH=P((URt,Mfe)=>{"use strict";var kqe=function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],u=a.trim();if(u.length!==0){var c=u.split("=");if(c.length!==2||!t.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(u)}}return r},t.strict=!0,t}();Mfe.exports=kqe});var Kp=P((BRt,Ffe)=>{"use strict";var Lqe=function(){function t(){}return t}();Ffe.exports=Lqe});var Bfe=P((aH,Ufe)=>{"use strict";var Oqe=aH&&aH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mqe=Kp(),Fqe=function(t){Oqe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(Mqe);Ufe.exports=Fqe});var cH=P((qRt,qfe)=>{"use strict";var Uqe=function(){function t(){}return t}();qfe.exports=Uqe});var Hfe=P((GRt,Gfe)=>{"use strict";var Bqe=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();Gfe.exports=Bqe});var Vfe=P((uH,jfe)=>{"use strict";var qqe=uH&&uH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gqe=cH(),Hqe=function(t){qqe(e,t);function e(){return t.call(this)||this}return e}(Gqe);jfe.exports=Hqe});var dH=P((HRt,zfe)=>{"use strict";var lH;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(lH||(lH={}));zfe.exports=lH});var $fe=P((jRt,Yfe)=>{"use strict";var jqe=dH(),Vqe=function(){function t(){this.kind=jqe.Measurement}return t}();Yfe.exports=Vqe});var Kfe=P((VRt,Wfe)=>{"use strict";var zqe=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();Wfe.exports=zqe});var fH=P((pH,Xfe)=>{"use strict";var Yqe=pH&&pH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$qe=Kp(),Wqe=function(t){Yqe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}($qe);Xfe.exports=Wqe});var Jfe=P((mH,Qfe)=>{"use strict";var Kqe=mH&&mH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xqe=Kp(),Qqe=function(t){Kqe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(Xqe);Qfe.exports=Qqe});var eme=P((zRt,Zfe)=>{"use strict";var Jqe=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();Zfe.exports=Jqe});var rme=P((hH,tme)=>{"use strict";var Zqe=hH&&hH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eGe=Kp(),tGe=function(t){Zqe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(eGe);tme.exports=tGe});var ime=P((gH,nme)=>{"use strict";var rGe=gH&&gH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nGe=Kp(),iGe=function(t){rGe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(nGe);nme.exports=iGe});var sme=P((vH,ome)=>{"use strict";var oGe=vH&&vH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sGe=fH(),aGe=function(t){oGe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(sGe);ome.exports=aGe});var cme=P((_H,ame)=>{"use strict";var cGe=_H&&_H.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uGe=Kp(),lGe=function(t){cGe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(uGe);ame.exports=lGe});var lme=P((yH,ume)=>{"use strict";var dGe=yH&&yH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pGe=Kp(),fGe=function(t){dGe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(pGe);ume.exports=fGe});var pme=P((YRt,dme)=>{"use strict";var bH;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(bH||(bH={}));dme.exports=bH});var mme=P(($Rt,fme)=>{"use strict";var mGe=function(){function t(){}return t}();fme.exports=mGe});var xH=P(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.AvailabilityData=Bfe();Ui.Base=cH();Ui.ContextTagKeys=Hfe();Ui.Data=Vfe();Ui.DataPoint=$fe();Ui.DataPointType=dH();Ui.Domain=Kp();Ui.Envelope=Kfe();Ui.EventData=fH();Ui.ExceptionData=Jfe();Ui.ExceptionDetails=eme();Ui.MessageData=rme();Ui.MetricData=ime();Ui.PageViewData=sme();Ui.RemoteDependencyData=cme();Ui.RequestData=lme();Ui.SeverityLevel=pme();Ui.StackFrame=mme()});var hme=P(sx=>{"use strict";Object.defineProperty(sx,"__esModule",{value:!0});sx.domainSupportsProperties=sx.RemoteDependencyDataConstants=void 0;var Iv=xH(),hGe=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();sx.RemoteDependencyDataConstants=hGe;function gGe(t){return"properties"in t||t instanceof Iv.EventData||t instanceof Iv.ExceptionData||t instanceof Iv.MessageData||t instanceof Iv.MetricData||t instanceof Iv.PageViewData||t instanceof Iv.RemoteDependencyData||t instanceof Iv.RequestData}sx.domainSupportsProperties=gGe});var vme=P(gme=>{"use strict";Object.defineProperty(gme,"__esModule",{value:!0})});var yme=P(_me=>{"use strict";Object.defineProperty(_me,"__esModule",{value:!0})});var xme=P(bme=>{"use strict";Object.defineProperty(bme,"__esModule",{value:!0})});var Tme=P(Eme=>{"use strict";Object.defineProperty(Eme,"__esModule",{value:!0})});var Ime=P(Sme=>{"use strict";Object.defineProperty(Sme,"__esModule",{value:!0})});var wme=P(Cme=>{"use strict";Object.defineProperty(Cme,"__esModule",{value:!0})});var Ame=P(Rme=>{"use strict";Object.defineProperty(Rme,"__esModule",{value:!0})});var Nme=P(Pme=>{"use strict";Object.defineProperty(Pme,"__esModule",{value:!0})});var kme=P(Dme=>{"use strict";Object.defineProperty(Dme,"__esModule",{value:!0})});var Ome=P(Lme=>{"use strict";Object.defineProperty(Lme,"__esModule",{value:!0})});var Fme=P(Mme=>{"use strict";Object.defineProperty(Mme,"__esModule",{value:!0})});var Bme=P(Ume=>{"use strict";Object.defineProperty(Ume,"__esModule",{value:!0})});var qme=P(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.TelemetryType=el.TelemetryTypeString=el.baseTypeToTelemetryType=el.telemetryTypeToBaseType=void 0;function vGe(t){switch(t){case Xo.Event:return"EventData";case Xo.Exception:return"ExceptionData";case Xo.Trace:return"MessageData";case Xo.Metric:return"MetricData";case Xo.Request:return"RequestData";case Xo.Dependency:return"RemoteDependencyData";case Xo.Availability:return"AvailabilityData";case Xo.PageView:return"PageViewData"}}el.telemetryTypeToBaseType=vGe;function _Ge(t){switch(t){case"EventData":return Xo.Event;case"ExceptionData":return Xo.Exception;case"MessageData":return Xo.Trace;case"MetricData":return Xo.Metric;case"RequestData":return Xo.Request;case"RemoteDependencyData":return Xo.Dependency;case"AvailabilityData":return Xo.Availability;case"PageViewData":return Xo.PageView}}el.baseTypeToTelemetryType=_Ge;el.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Xo;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(Xo=el.TelemetryType||(el.TelemetryType={}))});var Gme=P(no=>{"use strict";var yGe=no&&no.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ic=no&&no.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yGe(e,t,r)};Object.defineProperty(no,"__esModule",{value:!0});ic(vme(),no);ic(yme(),no);ic(xme(),no);ic(Tme(),no);ic(Ime(),no);ic(wme(),no);ic(Ame(),no);ic(Nme(),no);ic(kme(),no);ic(Ome(),no);ic(Fme(),no);ic(Bme(),no);ic(qme(),no)});var jme=P(Hme=>{"use strict";Object.defineProperty(Hme,"__esModule",{value:!0})});var zme=P(Vme=>{"use strict";Object.defineProperty(Vme,"__esModule",{value:!0})});var $me=P(Yme=>{"use strict";Object.defineProperty(Yme,"__esModule",{value:!0})});var Kme=P(Wme=>{"use strict";Object.defineProperty(Wme,"__esModule",{value:!0})});var Qme=P(Xme=>{"use strict";Object.defineProperty(Xme,"__esModule",{value:!0})});var Zme=P(Jme=>{"use strict";Object.defineProperty(Jme,"__esModule",{value:!0})});var the=P(ehe=>{"use strict";Object.defineProperty(ehe,"__esModule",{value:!0})});var nhe=P(rhe=>{"use strict";Object.defineProperty(rhe,"__esModule",{value:!0})});var ihe=P(Sa=>{"use strict";var bGe=Sa&&Sa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qm=Sa&&Sa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bGe(e,t,r)};Object.defineProperty(Sa,"__esModule",{value:!0});Qm(jme(),Sa);Qm(zme(),Sa);Qm($me(),Sa);Qm(Kme(),Sa);Qm(Qme(),Sa);Qm(Zme(),Sa);Qm(the(),Sa);Qm(nhe(),Sa)});var Cs=P(td=>{"use strict";var xGe=td&&td.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pk=td&&td.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xGe(e,t,r)};Object.defineProperty(td,"__esModule",{value:!0});Pk(hme(),td);Pk(xH(),td);Pk(Gme(),td);Pk(ihe(),td)});var EH=P((bAt,ohe)=>{"use strict";var EGe=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();ohe.exports=EGe});var Wn=P(Oe=>{"use strict";var tl;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=Oe.WEB_INSTRUMENTATION_DEFAULT_SOURCE=Oe.TIME_SINCE_ENQUEUED=Oe.ENQUEUED_TIME=Oe.MessageBusDestination=Oe.MicrosoftEventHub=Oe.AzNamespace=Oe.HttpRequestCookieNames=Oe.StatsbeatNetworkCategory=Oe.StatsbeatFeatureType=Oe.StatsbeatInstrumentation=Oe.StatsbeatFeature=Oe.StatsbeatCounter=Oe.StatsbeatAttach=Oe.StatsbeatResourceProvider=Oe.StatsbeatTelemetryName=Oe.HeartBeatMetricName=Oe.DependencyTypeName=Oe.TelemetryTypeStringToQuickPulseDocumentType=Oe.TelemetryTypeStringToQuickPulseType=Oe.QuickPulseType=Oe.QuickPulseDocumentType=Oe.PerformanceToQuickPulseCounter=Oe.MetricId=Oe.PerformanceCounter=Oe.QuickPulseCounter=Oe.DEFAULT_LIVEMETRICS_HOST=Oe.DEFAULT_LIVEMETRICS_ENDPOINT=Oe.DEFAULT_BREEZE_ENDPOINT=Oe.APPLICATION_INSIGHTS_SDK_VERSION=void 0;Oe.APPLICATION_INSIGHTS_SDK_VERSION="2.9.1";Oe.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Oe.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Oe.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var ws;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(ws=Oe.QuickPulseCounter||(Oe.QuickPulseCounter={}));var Nk;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(Nk=Oe.PerformanceCounter||(Oe.PerformanceCounter={}));var TGe;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(TGe=Oe.MetricId||(Oe.MetricId={}));Oe.PerformanceToQuickPulseCounter=(tl={},tl[Nk.PROCESSOR_TIME]=ws.PROCESSOR_TIME,tl[Nk.REQUEST_RATE]=ws.REQUEST_RATE,tl[Nk.REQUEST_DURATION]=ws.REQUEST_DURATION,tl[ws.COMMITTED_BYTES]=ws.COMMITTED_BYTES,tl[ws.REQUEST_FAILURE_RATE]=ws.REQUEST_FAILURE_RATE,tl[ws.DEPENDENCY_RATE]=ws.DEPENDENCY_RATE,tl[ws.DEPENDENCY_FAILURE_RATE]=ws.DEPENDENCY_FAILURE_RATE,tl[ws.DEPENDENCY_DURATION]=ws.DEPENDENCY_DURATION,tl[ws.EXCEPTION_RATE]=ws.EXCEPTION_RATE,tl);Oe.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};Oe.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};Oe.TelemetryTypeStringToQuickPulseType={EventData:Oe.QuickPulseType.Event,ExceptionData:Oe.QuickPulseType.Exception,MessageData:Oe.QuickPulseType.Trace,MetricData:Oe.QuickPulseType.Metric,RequestData:Oe.QuickPulseType.Request,RemoteDependencyData:Oe.QuickPulseType.Dependency,AvailabilityData:Oe.QuickPulseType.Availability,PageViewData:Oe.QuickPulseType.PageView};Oe.TelemetryTypeStringToQuickPulseDocumentType={EventData:Oe.QuickPulseDocumentType.Event,ExceptionData:Oe.QuickPulseDocumentType.Exception,MessageData:Oe.QuickPulseDocumentType.Trace,MetricData:Oe.QuickPulseDocumentType.Metric,RequestData:Oe.QuickPulseDocumentType.Request,RemoteDependencyData:Oe.QuickPulseDocumentType.Dependency,AvailabilityData:Oe.QuickPulseDocumentType.Availability,PageViewData:Oe.QuickPulseDocumentType.PageView};Oe.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};Oe.HeartBeatMetricName="HeartbeatState";Oe.StatsbeatTelemetryName="Statsbeat";Oe.StatsbeatResourceProvider={appsvc:"appsvc",aks:"aks",functions:"functions",vm:"vm",unknown:"unknown"};Oe.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};Oe.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var SGe;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.WEB_SNIPPET=4]="WEB_SNIPPET"})(SGe=Oe.StatsbeatFeature||(Oe.StatsbeatFeature={}));var IGe;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(IGe=Oe.StatsbeatInstrumentation||(Oe.StatsbeatInstrumentation={}));var CGe;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})(CGe=Oe.StatsbeatFeatureType||(Oe.StatsbeatFeatureType={}));var wGe;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(wGe=Oe.StatsbeatNetworkCategory||(Oe.StatsbeatNetworkCategory={}));var RGe;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(RGe=Oe.HttpRequestCookieNames||(Oe.HttpRequestCookieNames={}));Oe.AzNamespace="az.namespace";Oe.MicrosoftEventHub="Microsoft.EventHub";Oe.MessageBusDestination="message_bus.destination";Oe.ENQUEUED_TIME="enqueuedTime";Oe.TIME_SINCE_ENQUEUED="timeSinceEnqueued";Oe.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";Oe.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var CH=P((IH,she)=>{"use strict";var AGe=IH&&IH.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dk=require("url"),PGe=Cs(),TH=Wo(),oc=ix(),NGe=EH(),Jm=Sv(),DGe=sH(),SH=Ak(),kGe=In(),kk=Wn(),LGe=function(t){AGe(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new Dk.URL(this.url).pathname}catch{}var i={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?i.time=r.time:this.startTime&&(i.time=new Date(this.startTime)),r){for(var o in r)i[o]||(i[o]=r[o]);if(r.properties)for(var o in r.properties)i.properties[o]=r.properties[o]}return i},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(kk.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(kk.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(kk.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new Dk.URL(this.url).pathname}catch{}var i=this.method;return n&&(i+=" "+n),i},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+r.headers.host+"/",s="",a="";try{var u=new Dk.URL(r.url,o);s=u.pathname,a=u.search}catch{}var c=Dk.format({protocol:i,host:r.headers.host,pathname:s,search:a});return c},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===kk.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(o){n="",kGe.warn("Could not decode the auth cookie with error: ",TH.dumpObj(o))}var i=e.parseId(TH.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=TH.getCorrelationContextTarget(r,oc.requestContextSourceKey),r.headers){var i=r.headers[oc.traceStateHeader]?r.headers[oc.traceStateHeader].toString():null,o=r.headers[oc.traceparentHeader]?r.headers[oc.traceparentHeader].toString():null,s=r.headers[oc.requestIdHeader]?r.headers[oc.requestIdHeader].toString():null,a=r.headers[oc.parentIdHeader]?r.headers[oc.parentIdHeader].toString():null,u=r.headers[oc.rootIdHeader]?r.headers[oc.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[oc.correlationContextHeader]?r.headers[oc.correlationContextHeader].toString():null,Jm.w3cEnabled&&(o||i)?(this.traceparent=new SH(o?o.toString():null),this.tracestate=o&&i&&new DGe(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?Jm.w3cEnabled?(this.traceparent=new SH(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=Jm.generateRequestId(this.parentId),this.operationId=Jm.getRootId(this.requestId)):Jm.w3cEnabled?(this.traceparent=new SH,this.traceparent.parentId=a,this.traceparent.legacyRootId=u||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=Jm.generateRequestId(u||this.parentId),this.correlationContextHeader=null,this.operationId=Jm.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=Jm.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new PGe.ContextTagKeys,e}(NGe);she.exports=LGe});var The=P((wt,Ehe)=>{wt=Ehe.exports=ur;var Gr;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Gr=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Gr=function(){};wt.SEMVER_SPEC_VERSION="2.0.0";var nC=256,Lk=Number.MAX_SAFE_INTEGER||9007199254740991,wH=16,OGe=nC-6,iC=wt.re=[],ln=wt.safeRe=[],Re=wt.src=[],sr=0,DH="[a-zA-Z0-9-]",RH=[["\\s",1],["\\d",nC],[DH,OGe]];function qk(t){for(var e=0;e<RH.length;e++){var r=RH[e][0],n=RH[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var ax=sr++;Re[ax]="0|[1-9]\\d*";var cx=sr++;Re[cx]="\\d+";var kH=sr++;Re[kH]="\\d*[a-zA-Z-]"+DH+"*";var che=sr++;Re[che]="("+Re[ax]+")\\.("+Re[ax]+")\\.("+Re[ax]+")";var uhe=sr++;Re[uhe]="("+Re[cx]+")\\.("+Re[cx]+")\\.("+Re[cx]+")";var AH=sr++;Re[AH]="(?:"+Re[ax]+"|"+Re[kH]+")";var PH=sr++;Re[PH]="(?:"+Re[cx]+"|"+Re[kH]+")";var LH=sr++;Re[LH]="(?:-("+Re[AH]+"(?:\\."+Re[AH]+")*))";var OH=sr++;Re[OH]="(?:-?("+Re[PH]+"(?:\\."+Re[PH]+")*))";var NH=sr++;Re[NH]=DH+"+";var sC=sr++;Re[sC]="(?:\\+("+Re[NH]+"(?:\\."+Re[NH]+")*))";var MH=sr++,lhe="v?"+Re[che]+Re[LH]+"?"+Re[sC]+"?";Re[MH]="^"+lhe+"$";var FH="[v=\\s]*"+Re[uhe]+Re[OH]+"?"+Re[sC]+"?",UH=sr++;Re[UH]="^"+FH+"$";var fx=sr++;Re[fx]="((?:<|>)?=?)";var Ok=sr++;Re[Ok]=Re[cx]+"|x|X|\\*";var Mk=sr++;Re[Mk]=Re[ax]+"|x|X|\\*";var Cv=sr++;Re[Cv]="[v=\\s]*("+Re[Mk]+")(?:\\.("+Re[Mk]+")(?:\\.("+Re[Mk]+")(?:"+Re[LH]+")?"+Re[sC]+"?)?)?";var lx=sr++;Re[lx]="[v=\\s]*("+Re[Ok]+")(?:\\.("+Re[Ok]+")(?:\\.("+Re[Ok]+")(?:"+Re[OH]+")?"+Re[sC]+"?)?)?";var dhe=sr++;Re[dhe]="^"+Re[fx]+"\\s*"+Re[Cv]+"$";var phe=sr++;Re[phe]="^"+Re[fx]+"\\s*"+Re[lx]+"$";var fhe=sr++;Re[fhe]="(?:^|[^\\d])(\\d{1,"+wH+"})(?:\\.(\\d{1,"+wH+"}))?(?:\\.(\\d{1,"+wH+"}))?(?:$|[^\\d])";var Gk=sr++;Re[Gk]="(?:~>?)";var dx=sr++;Re[dx]="(\\s*)"+Re[Gk]+"\\s+";iC[dx]=new RegExp(Re[dx],"g");ln[dx]=new RegExp(qk(Re[dx]),"g");var MGe="$1~",mhe=sr++;Re[mhe]="^"+Re[Gk]+Re[Cv]+"$";var hhe=sr++;Re[hhe]="^"+Re[Gk]+Re[lx]+"$";var Hk=sr++;Re[Hk]="(?:\\^)";var px=sr++;Re[px]="(\\s*)"+Re[Hk]+"\\s+";iC[px]=new RegExp(Re[px],"g");ln[px]=new RegExp(qk(Re[px]),"g");var FGe="$1^",ghe=sr++;Re[ghe]="^"+Re[Hk]+Re[Cv]+"$";var vhe=sr++;Re[vhe]="^"+Re[Hk]+Re[lx]+"$";var BH=sr++;Re[BH]="^"+Re[fx]+"\\s*("+FH+")$|^$";var qH=sr++;Re[qH]="^"+Re[fx]+"\\s*("+lhe+")$|^$";var wv=sr++;Re[wv]="(\\s*)"+Re[fx]+"\\s*("+FH+"|"+Re[Cv]+")";iC[wv]=new RegExp(Re[wv],"g");ln[wv]=new RegExp(qk(Re[wv]),"g");var UGe="$1$2$3",_he=sr++;Re[_he]="^\\s*("+Re[Cv]+")\\s+-\\s+("+Re[Cv]+")\\s*$";var yhe=sr++;Re[yhe]="^\\s*("+Re[lx]+")\\s+-\\s+("+Re[lx]+")\\s*$";var bhe=sr++;Re[bhe]="(<|>)?=?\\s*\\*";for(rd=0;rd<sr;rd++)Gr(rd,Re[rd]),iC[rd]||(iC[rd]=new RegExp(Re[rd]),ln[rd]=new RegExp(qk(Re[rd])));var rd;wt.parse=Rv;function Rv(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ur)return t;if(typeof t!="string"||t.length>nC)return null;var r=e.loose?ln[UH]:ln[MH];if(!r.test(t))return null;try{return new ur(t,e)}catch{return null}}wt.valid=BGe;function BGe(t,e){var r=Rv(t,e);return r?r.version:null}wt.clean=qGe;function qGe(t,e){var r=Rv(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}wt.SemVer=ur;function ur(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ur){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>nC)throw new TypeError("version is longer than "+nC+" characters");if(!(this instanceof ur))return new ur(t,e);Gr("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?ln[UH]:ln[MH]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Lk)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}ur.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};ur.prototype.toString=function(){return this.version};ur.prototype.compare=function(t){return Gr("SemVer.compare",this.version,this.options,t),t instanceof ur||(t=new ur(t,this.options)),this.compareMain(t)||this.comparePre(t)};ur.prototype.compareMain=function(t){return t instanceof ur||(t=new ur(t,this.options)),ux(this.major,t.major)||ux(this.minor,t.minor)||ux(this.patch,t.patch)};ur.prototype.comparePre=function(t){if(t instanceof ur||(t=new ur(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Gr("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return ux(r,n)}while(++e)};ur.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};wt.inc=GGe;function GGe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new ur(t,r).inc(e,n).version}catch{return null}}wt.diff=HGe;function HGe(t,e){if(GH(t,e))return null;var r=Rv(t),n=Rv(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}wt.compareIdentifiers=ux;var ahe=/^[0-9]+$/;function ux(t,e){var r=ahe.test(t),n=ahe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}wt.rcompareIdentifiers=jGe;function jGe(t,e){return ux(e,t)}wt.major=VGe;function VGe(t,e){return new ur(t,e).major}wt.minor=zGe;function zGe(t,e){return new ur(t,e).minor}wt.patch=YGe;function YGe(t,e){return new ur(t,e).patch}wt.compare=Xp;function Xp(t,e,r){return new ur(t,r).compare(new ur(e,r))}wt.compareLoose=$Ge;function $Ge(t,e){return Xp(t,e,!0)}wt.rcompare=WGe;function WGe(t,e,r){return Xp(e,t,r)}wt.sort=KGe;function KGe(t,e){return t.sort(function(r,n){return wt.compare(r,n,e)})}wt.rsort=XGe;function XGe(t,e){return t.sort(function(r,n){return wt.rcompare(r,n,e)})}wt.gt=oC;function oC(t,e,r){return Xp(t,e,r)>0}wt.lt=Fk;function Fk(t,e,r){return Xp(t,e,r)<0}wt.eq=GH;function GH(t,e,r){return Xp(t,e,r)===0}wt.neq=xhe;function xhe(t,e,r){return Xp(t,e,r)!==0}wt.gte=HH;function HH(t,e,r){return Xp(t,e,r)>=0}wt.lte=jH;function jH(t,e,r){return Xp(t,e,r)<=0}wt.cmp=Uk;function Uk(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return GH(t,r,n);case"!=":return xhe(t,r,n);case">":return oC(t,r,n);case">=":return HH(t,r,n);case"<":return Fk(t,r,n);case"<=":return jH(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}wt.Comparator=Xc;function Xc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Xc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Xc))return new Xc(t,e);t=t.trim().split(/\s+/).join(" "),Gr("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===aC?this.value="":this.value=this.operator+this.semver.version,Gr("comp",this)}var aC={};Xc.prototype.parse=function(t){var e=this.options.loose?ln[BH]:ln[qH],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new ur(r[2],this.options.loose):this.semver=aC};Xc.prototype.toString=function(){return this.value};Xc.prototype.test=function(t){return Gr("Comparator.test",t,this.options.loose),this.semver===aC?!0:(typeof t=="string"&&(t=new ur(t,this.options)),Uk(t,this.operator,this.semver,this.options))};Xc.prototype.intersects=function(t,e){if(!(t instanceof Xc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Kn(t.value,e),Bk(this.value,r,e);if(t.operator==="")return r=new Kn(this.value,e),Bk(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=Uk(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),u=Uk(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||u};wt.Range=Kn;function Kn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Kn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Kn(t.raw,e);if(t instanceof Xc)return new Kn(t.value,e);if(!(this instanceof Kn))return new Kn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Kn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Kn.prototype.toString=function(){return this.range};Kn.prototype.parseRange=function(t){var e=this.options.loose,r=e?ln[yhe]:ln[_he];t=t.replace(r,sHe),Gr("hyphen replace",t),t=t.replace(ln[wv],UGe),Gr("comparator trim",t,ln[wv]),t=t.replace(ln[dx],MGe),t=t.replace(ln[px],FGe);var n=e?ln[BH]:ln[qH],i=t.split(" ").map(function(o){return JGe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Xc(o,this.options)},this),i};Kn.prototype.intersects=function(t,e){if(!(t instanceof Kn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};wt.toComparators=QGe;function QGe(t,e){return new Kn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function JGe(t,e){return Gr("comp",t,e),t=tHe(t,e),Gr("caret",t),t=ZGe(t,e),Gr("tildes",t),t=nHe(t,e),Gr("xrange",t),t=oHe(t,e),Gr("stars",t),t}function Xs(t){return!t||t.toLowerCase()==="x"||t==="*"}function ZGe(t,e){return t.trim().split(/\s+/).map(function(r){return eHe(r,e)}).join(" ")}function eHe(t,e){var r=e.loose?ln[hhe]:ln[mhe];return t.replace(r,function(n,i,o,s,a){Gr("tilde",t,n,i,o,s,a);var u;return Xs(i)?u="":Xs(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Xs(s)?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Gr("replaceTilde pr",a),u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Gr("tilde return",u),u})}function tHe(t,e){return t.trim().split(/\s+/).map(function(r){return rHe(r,e)}).join(" ")}function rHe(t,e){Gr("caret",t,e);var r=e.loose?ln[vhe]:ln[ghe];return t.replace(r,function(n,i,o,s,a){Gr("caret",t,n,i,o,s,a);var u;return Xs(i)?u="":Xs(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Xs(s)?i==="0"?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Gr("replaceCaret pr",a),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Gr("no pr"),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Gr("caret return",u),u})}function nHe(t,e){return Gr("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return iHe(r,e)}).join(" ")}function iHe(t,e){t=t.trim();var r=e.loose?ln[phe]:ln[dhe];return t.replace(r,function(n,i,o,s,a,u){Gr("xRange",t,n,i,o,s,a,u);var c=Xs(o),l=c||Xs(s),d=l||Xs(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Gr("xRange return",n),n})}function oHe(t,e){return Gr("replaceStars",t,e),t.trim().replace(ln[bhe],"")}function sHe(t,e,r,n,i,o,s,a,u,c,l,d,p){return Xs(r)?e="":Xs(n)?e=">="+r+".0.0":Xs(i)?e=">="+r+"."+n+".0":e=">="+e,Xs(u)?a="":Xs(c)?a="<"+(+u+1)+".0.0":Xs(l)?a="<"+u+"."+(+c+1)+".0":d?a="<="+u+"."+c+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}Kn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new ur(t,this.options));for(var e=0;e<this.set.length;e++)if(aHe(this.set[e],t,this.options))return!0;return!1};function aHe(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Gr(t[n].semver),t[n].semver!==aC&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}wt.satisfies=Bk;function Bk(t,e,r){try{e=new Kn(e,r)}catch{return!1}return e.test(t)}wt.maxSatisfying=cHe;function cHe(t,e,r){var n=null,i=null;try{var o=new Kn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new ur(n,r))}),n}wt.minSatisfying=uHe;function uHe(t,e,r){var n=null,i=null;try{var o=new Kn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new ur(n,r))}),n}wt.minVersion=lHe;function lHe(t,e){t=new Kn(t,e);var r=new ur("0.0.0");if(t.test(r)||(r=new ur("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new ur(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||oC(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}wt.validRange=dHe;function dHe(t,e){try{return new Kn(t,e).range||"*"}catch{return null}}wt.ltr=pHe;function pHe(t,e,r){return VH(t,e,"<",r)}wt.gtr=fHe;function fHe(t,e,r){return VH(t,e,">",r)}wt.outside=VH;function VH(t,e,r,n){t=new ur(t,n),e=new Kn(e,n);var i,o,s,a,u;switch(r){case">":i=oC,o=jH,s=Fk,a=">",u=">=";break;case"<":i=Fk,o=HH,s=oC,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Bk(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var l=e.set[c],d=null,p=null;if(l.forEach(function(f){f.semver===aC&&(f=new Xc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===u&&s(t,p.semver))return!1}return!0}wt.prerelease=mHe;function mHe(t,e){var r=Rv(t,e);return r&&r.prerelease.length?r.prerelease:null}wt.intersects=hHe;function hHe(t,e,r){return t=new Kn(t,r),e=new Kn(e,r),t.intersects(e)}wt.coerce=gHe;function gHe(t){if(t instanceof ur)return t;if(typeof t!="string")return null;var e=t.match(ln[fhe]);return e==null?null:Rv(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var jk=P((EAt,Che)=>{"use strict";function zH(t){return typeof t=="function"}var Qs=console.error.bind(console);function cC(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function uC(t){t&&t.logger&&(zH(t.logger)?Qs=t.logger:Qs("new logger isn't a function, not replacing"))}function She(t,e,r){if(!t||!t[e]){Qs("no original function "+e+" to wrap");return}if(!r){Qs("no wrapper function"),Qs(new Error().stack);return}if(!zH(t[e])||!zH(r)){Qs("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return cC(i,"__original",n),cC(i,"__unwrap",function(){t[e]===i&&cC(t,e,n)}),cC(i,"__wrapped",!0),cC(t,e,i),i}function vHe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Qs("must provide one or more modules to patch"),Qs(new Error().stack);return}if(!(e&&Array.isArray(e))){Qs("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){She(n,i,r)})})}function Ihe(t,e){if(!t||!t[e]){Qs("no function to unwrap."),Qs(new Error().stack);return}if(!t[e].__unwrap)Qs("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function _He(t,e){if(t)Array.isArray(t)||(t=[t]);else{Qs("must provide one or more modules to patch"),Qs(new Error().stack);return}if(!(e&&Array.isArray(e))){Qs("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){Ihe(r,n)})})}uC.wrap=She;uC.massWrap=vHe;uC.unwrap=Ihe;uC.massUnwrap=_He;Che.exports=uC});var Yk=P((TAt,Phe)=>{"use strict";var Rhe=jk(),mx=Rhe.wrap,Vk=Rhe.unwrap,Qp="wrap@before";function zk(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function yHe(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[Qp];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Ahe(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function bHe(t,e,r){var n=Ahe(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&yHe(t,i)}function whe(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}Phe.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(u,c){var l=Ahe(this,u).slice();try{var d=s.call(this,u,c);return bHe(this,u,l),d}finally{this.on.__wrapped||mx(this,"on",i),this.addListener.__wrapped||mx(this,"addListener",i)}}}function o(s){return function(u){if(!this._events||!this._events[u])return s.apply(this,arguments);var c=this._events[u];function l(d){return function(){this._events[u]=c;try{return d.apply(this,arguments)}finally{c=this._events[u],this._events[u]=whe(c,n)}}}mx(this,"removeListener",l);try{return this._events[u]=whe(c,n),s.apply(this,arguments)}finally{Vk(this,"removeListener"),this._events[u]=c}}}e[Qp]?typeof e[Qp]=="function"?zk(e,Qp,[e[Qp],r]):Array.isArray(e[Qp])&&e[Qp].push(r):zk(e,Qp,r),e.__wrapped||(mx(e,"addListener",i),mx(e,"on",i),mx(e,"emit",o),zk(e,"__unwrap",function(){Vk(e,"addListener"),Vk(e,"on"),Vk(e,"emit"),delete e[Qp],delete e.__wrapped}),zk(e,"__wrapped",!0))}});var Lhe=P((SAt,khe)=>{"use strict";var Pr=require("util"),Jp=require("assert"),xHe=Yk(),wn=require("async_hooks"),lC="cls@contexts",dC="error@context",Xn=process.env.DEBUG_CLS_HOOKED,Ar=-1;khe.exports={getNamespace:Nhe,createNamespace:EHe,destroyNamespace:Dhe,reset:THe,ERROR_SYMBOL:dC};function Qc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Qc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Xn){let n=" ".repeat(this._indent<0?0:this._indent);Un(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Ar+" active:"+Pr.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Qc.prototype.get=function(e){if(!this.active){if(Xn){let r=wn.currentId(),n=wn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Un(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Ar} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Xn){let r=wn.executionAsyncId(),n=wn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Un(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Ar+" active:"+Pr.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Un(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Ar} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${Pr.inspect(this.active)}`)}return this.active[e]};Qc.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Ar,Xn){let r=wn.executionAsyncId(),n=wn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Un(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Ar} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${Pr.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Qc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Xn){let n=wn.triggerAsyncId(),i=wn.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Un(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Ar} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${Pr.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[dC]=r),n}finally{if(Xn){let n=wn.triggerAsyncId(),i=wn.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Un(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Ar} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${Pr.inspect(r)}`)}this.exit(r)}};Qc.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Qc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Xn&&Un("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Ar+" len:"+this._set.length+" "+Pr.inspect(r)),n.then(i=>(Xn&&Un("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Ar+" len:"+this._set.length+" "+Pr.inspect(r)),this.exit(r),i)).catch(i=>{throw i[dC]=r,Xn&&Un("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Ar+" len:"+this._set.length+" "+Pr.inspect(r)),this.exit(r),i})};Qc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[dC]=r),o}finally{n.exit(r)}}};Qc.prototype.enter=function(e){if(Jp.ok(e,"context must be provided for entering"),Xn){let r=wn.executionAsyncId(),n=wn.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Un(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Ar} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${Pr.inspect(e)}`)}this._set.push(this.active),this.active=e};Qc.prototype.exit=function(e){if(Jp.ok(e,"context must be provided for exiting"),Xn){let n=wn.executionAsyncId(),i=wn.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Un(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Ar} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${Pr.inspect(e)}`)}if(this.active===e){Jp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Xn&&Un("??ERROR?? context exiting but not entered - ignoring: "+Pr.inspect(e)),Jp.ok(r>=0,`context not currently entered; can't exit. 
`+Pr.inspect(this)+`
`+Pr.inspect(e))):(Jp.ok(r,"can't remove top context"),this._set.splice(r,1))};Qc.prototype.bindEmitter=function(e){Jp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[lC]||(s[lC]=Object.create(null)),s[lC][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[lC]))return s;let a=s,u=s[lC];return Object.keys(u).forEach(function(c){let l=u[c];a=l.namespace.bind(a,l.context)}),a}xHe(e,i,o)};Qc.prototype.fromException=function(e){return e[dC]};function Nhe(t){return process.namespaces[t]}function EHe(t){Jp.ok(t,"namespace must be given a name."),Xn&&Un(`NS-CREATING NAMESPACE (${t})`);let e=new Qc(t);return e.id=Ar,wn.createHook({init(n,i,o,s){if(Ar=wn.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Xn){let a=" ".repeat(e._indent<0?0:e._indent);Un(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Ar} triggerId:${o} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Ar===0){let a=wn.triggerAsyncId(),u=e._contexts.get(a);if(u){if(e._contexts.set(n,u),Xn){let c=" ".repeat(e._indent<0?0:e._indent);Un(`${c}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Ar} triggerId:${a} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Xn){let c=" ".repeat(e._indent<0?0:e._indent);Un(`${c}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Ar} triggerId:${a} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(Xn&&i==="PROMISE"){Un(Pr.inspect(s,{showHidden:!0}));let a=s.parentId,u=" ".repeat(e._indent<0?0:e._indent);Un(`${u}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Ar} triggerId:${o} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Ar=wn.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ar),i){if(Xn){let o=wn.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Un(`${s}BEFORE (${t}) asyncId:${n} currentUid:${Ar} triggerId:${o} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Pr.inspect(i)}`),e._indent+=2}e.enter(i)}else if(Xn){let o=wn.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Un(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ar} triggerId:${o} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${Pr.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Ar=wn.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Ar),i){if(Xn){let o=wn.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);Un(`${s}AFTER (${t}) asyncId:${n} currentUid:${Ar} triggerId:${o} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Pr.inspect(i)}`)}e.exit(i)}else if(Xn){let o=wn.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);Un(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Ar} triggerId:${o} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Pr.inspect(i)}`)}},destroy(n){if(Ar=wn.executionAsyncId(),Xn){let i=wn.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Un(`${o}DESTROY (${t}) currentUid:${Ar} asyncId:${n} triggerId:${i} active:${Pr.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Pr.inspect(e._contexts.get(Ar))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function Dhe(t){let e=Nhe(t);Jp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Jp.ok(e.id,"don't assign to process.namespaces directly! "+Pr.inspect(e)),process.namespaces[t]=null}function THe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Dhe(t)}),process.namespaces=Object.create(null)}process.namespaces={};function Un(...t){Xn&&process._rawDebug(`${Pr.format(...t)}`)}});var Mhe=P((IAt,Ohe)=>{"use strict";function SHe(){}Ohe.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let u=0;u<arguments.length;u++)i[u]=arguments[u];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new SHe,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let u=!0;try{o.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var Uhe=P((CAt,Fhe)=>{"use strict";function IHe(){}Fhe.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=u;function o(c,l,d,p){return typeof c!="function"?p?s(d):a(d):function(){e.pre.call(l,d);try{return c.apply(this,arguments)}finally{e.post.call(l,d,!1),e.destroy.call(null,d)}}}function s(c){return function(d){return e.destroy.call(null,c),d}}function a(c){return function(d){throw e.destroy.call(null,c),d}}function u(c,l){if(!r.enabled)return i.call(this,c,l);let d=new IHe,p=--r.counter;return e.init.call(d,p,0,null,null),i.call(this,o(c,d,p,!0),o(l,d,p,!1))}}});var qhe=P((wAt,Bhe)=>{"use strict";var sc=require("timers");function CHe(){}function wHe(){}function RHe(){}var AHe=new Map,PHe=new Map,NHe=new Map,YH=null,$H=!1;Bhe.exports=function(){WH(this._hooks,this._state,"setTimeout","clearTimeout",CHe,AHe,!0),WH(this._hooks,this._state,"setInterval","clearInterval",wHe,PHe,!1),WH(this._hooks,this._state,"setImmediate","clearImmediate",RHe,NHe,!0),global.setTimeout=sc.setTimeout,global.setInterval=sc.setInterval,global.setImmediate=sc.setImmediate,global.clearTimeout=sc.clearTimeout,global.clearInterval=sc.clearInterval,global.clearImmediate=sc.clearImmediate};function WH(t,e,r,n,i,o,s){let a=sc[r],u=sc[n];sc[r]=function(){if(!e.enabled)return a.apply(sc,arguments);let c=new Array(arguments.length);for(let m=0;m<arguments.length;m++)c[m]=arguments[m];let l=c[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let d=new i,p=--e.counter,f;return t.init.call(d,p,0,null,null),c[0]=function(){YH=f,t.pre.call(d,p);let m=!0;try{l.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(d,p,!0),o.delete(f),t.destroy.call(null,p)})}t.post.call(d,p,!1),YH=null,(s||$H)&&($H=!1,o.delete(f),t.destroy.call(null,p))},f=a.apply(sc,c),o.set(f,p),f},sc[n]=function(c){if(YH===c&&c!==null)$H=!0;else if(o.has(c)){let l=o.get(c);o.delete(c),t.destroy.call(null,l)}u.apply(sc,arguments)}}});var KH=P((RAt,DHe)=>{DHe.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var jhe=P((AAt,Hhe)=>{"use strict";var fC=process.binding("async_wrap"),kHe=fC.Providers.TIMERWRAP,Ghe={nextTick:Mhe(),promise:Uhe(),timers:qhe()},pC=new Set;function LHe(){this.enabled=!1,this.counter=0}function XH(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===kHe){pC.add(i);return}for(let u of t)u(i,this,o,s,a)},this.pre=function(i){if(!pC.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!pC.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(pC.has(i)){pC.delete(i);return}for(let o of n)o(i)}}XH.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function $k(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}XH.prototype.remove=function(t){t.init&&$k(this.initFns,t.init),t.pre&&$k(this.preFns,t.pre),t.post&&$k(this.postFns,t.post),t.destroy&&$k(this.destroyFns,t.destroy)};function mC(){this._state=new LHe,this._hooks=new XH,this.version=KH().version,this.providers=fC.Providers;for(let t of Object.keys(Ghe))Ghe[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),fC.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Hhe.exports=mC;mC.prototype.addHooks=function(t){this._hooks.add(t)};mC.prototype.removeHooks=function(t){this._hooks.remove(t)};mC.prototype.enable=function(){this._state.enabled=!0,fC.enable()};mC.prototype.disable=function(){this._state.enabled=!1,fC.disable()}});var QH=P((PAt,OHe)=>{OHe.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var zhe=P((NAt,Vhe)=>{function MHe(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}Vhe.exports=function(e,r){var n=[];n.push(MHe(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var Khe=P((DAt,Whe)=>{var Wk=zhe();function $he(){this.extend=new hC,this.filter=new hC,this.format=new gC,this.version=QH().version}var ZH=!1;$he.prototype.callSite=function t(e){e||(e={}),ZH=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return ZH=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var Zm=new $he;function hC(){this._modifiers=[]}hC.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};hC.prototype.attach=function(t){this._modifiers.push(t)};hC.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function gC(){this._formater=Wk,this._previous=void 0}gC.prototype.replace=function(t){t?this._formater=t:this.restore()};gC.prototype.restore=function(){this._formater=Wk,this._previous=void 0};gC.prototype._backup=function(){this._previous=this._formater};gC.prototype._roolback=function(){this._previous===Wk?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&Zm.format.replace(Error.prepareStackTrace);var JH=!1;function Yhe(t,e){if(ZH)return e;if(JH)return Wk(t,e);var r=e.concat();r=Zm.extend._modify(t,r),r=Zm.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),JH=!0;var n=Zm.format._formater(t,r);return JH=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Yhe},set:function(t){t===Yhe?Zm.format._roolback():(Zm.format._backup(),Zm.format.replace(t))}});function FHe(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:FHe,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});Whe.exports=Zm});var tj=P((kAt,ej)=>{if(global._stackChain)if(global._stackChain.version===QH().version)ej.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else ej.exports=global._stackChain=Khe()});var Xhe=P((LAt,rj)=>{"use strict";var UHe=jhe();if(global._asyncHook)if(global._asyncHook.version===KH().version)rj.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else tj().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),rj.exports=global._asyncHook=new UHe});var rge=P((OAt,tge)=>{"use strict";var bi=require("util"),Zp=require("assert"),BHe=Yk(),hx=Xhe(),vC="cls@contexts",_C="error@context",Jhe=[];for(let t in hx.providers)Jhe[hx.providers[t]]=t;var si=process.env.DEBUG_CLS_HOOKED,Bi=-1;tge.exports={getNamespace:Zhe,createNamespace:qHe,destroyNamespace:ege,reset:GHe,ERROR_SYMBOL:_C};function Jc(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Jc.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return si&&yi("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+Bi+" active:"+bi.inspect(this.active,!0)),this.active[e]=r,r};Jc.prototype.get=function(e){if(!this.active){si&&yi("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+Bi+" active:"+bi.inspect(this.active,!0));return}return si&&yi("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+Bi+" active:"+bi.inspect(this.active,!0)),this.active[e]};Jc.prototype.createContext=function(){si&&yi("   CREATING Context: "+this.name+" uid:"+Bi+" len:"+this._set.length+"  active:"+bi.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=Bi,si&&yi("   CREATED Context: "+this.name+" uid:"+Bi+" len:"+this._set.length+"  context:"+bi.inspect(e,!0,2,!0)),e};Jc.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return si&&yi(" BEFORE RUN: "+this.name+" uid:"+Bi+" len:"+this._set.length+" "+bi.inspect(r)),e(r),r}catch(n){throw n&&(n[_C]=r),n}finally{si&&yi(" AFTER RUN: "+this.name+" uid:"+Bi+" len:"+this._set.length+" "+bi.inspect(r)),this.exit(r)}};Jc.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Jc.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return si&&yi(" BEFORE runPromise: "+this.name+" uid:"+Bi+" len:"+this._set.length+" "+bi.inspect(r)),n.then(i=>(si&&yi(" AFTER runPromise: "+this.name+" uid:"+Bi+" len:"+this._set.length+" "+bi.inspect(r)),this.exit(r),i)).catch(i=>{throw i[_C]=r,si&&yi(" AFTER runPromise: "+this.name+" uid:"+Bi+" len:"+this._set.length+" "+bi.inspect(r)),this.exit(r),i})};Jc.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[_C]=r),o}finally{n.exit(r)}}};Jc.prototype.enter=function(e){Zp.ok(e,"context must be provided for entering"),si&&yi("  ENTER "+this.name+" uid:"+Bi+" len:"+this._set.length+" context: "+bi.inspect(e)),this._set.push(this.active),this.active=e};Jc.prototype.exit=function(e){if(Zp.ok(e,"context must be provided for exiting"),si&&yi("  EXIT "+this.name+" uid:"+Bi+" len:"+this._set.length+" context: "+bi.inspect(e)),this.active===e){Zp.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(si&&yi("??ERROR?? context exiting but not entered - ignoring: "+bi.inspect(e)),Zp.ok(r>=0,`context not currently entered; can't exit. 
`+bi.inspect(this)+`
`+bi.inspect(e))):(Zp.ok(r,"can't remove top context"),this._set.splice(r,1))};Jc.prototype.bindEmitter=function(e){Zp.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){s&&(s[vC]||(s[vC]=Object.create(null)),s[vC][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[vC]))return s;let a=s,u=s[vC];return Object.keys(u).forEach(function(c){let l=u[c];a=l.namespace.bind(a,l.context)}),a}BHe(e,i,o)};Jc.prototype.fromException=function(e){return e[_C]};function Zhe(t){return process.namespaces[t]}function qHe(t){Zp.ok(t,"namespace must be given a name."),si&&yi("CREATING NAMESPACE "+t);let e=new Jc(t);return e.id=Bi,hx.addHooks({init(r,n,i,o,s){Bi=r,o?(e._contexts.set(r,e._contexts.get(o)),si&&yi("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(Bi,e.active),si&&yi("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+Jhe[i]+" active:"+bi.inspect(e.active,!0))},pre(r,n){Bi=r;let i=e._contexts.get(r);i?(si&&yi(" PRE "+t+" uid:"+r+" handle:"+Kk(n)+" context:"+bi.inspect(i)),e.enter(i)):si&&yi(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+Kk(n))},post(r,n){Bi=r;let i=e._contexts.get(r);i?(si&&yi(" POST "+t+" uid:"+r+" handle:"+Kk(n)+" context:"+bi.inspect(i)),e.exit(i)):si&&yi(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+Kk(n))},destroy(r){Bi=r,si&&yi("DESTROY "+t+" uid:"+r+" context:"+bi.inspect(e._contexts.get(Bi))+" active:"+bi.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function ege(t){let e=Zhe(t);Zp.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Zp.ok(e.id,"don't assign to process.namespaces directly! "+bi.inspect(e)),process.namespaces[t]=null}function GHe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){ege(t)}),process.namespaces=Object.create(null)}process.namespaces={};hx._state&&!hx._state.enabled&&hx.enable();function yi(t){process.env.DEBUG&&process._rawDebug(t)}function Kk(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(si){nj=tj();for(Qhe in nj.filter._modifiers)nj.filter.deattach(Qhe)}var nj,Qhe});var nge=P((MAt,ij)=>{"use strict";var HHe=The();process&&HHe.gte(process.versions.node,"8.0.0")?ij.exports=Lhe():ij.exports=rge()});var bge=P((Rt,yge)=>{Rt=yge.exports=lr;var Hr;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Hr=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Hr=function(){};Rt.SEMVER_SPEC_VERSION="2.0.0";var yC=256,Xk=Number.MAX_SAFE_INTEGER||9007199254740991,oj=16,jHe=yC-6,bC=Rt.re=[],dn=Rt.safeRe=[],Ae=Rt.src=[],ar=0,lj="[a-zA-Z0-9-]",sj=[["\\s",1],["\\d",yC],[lj,jHe]];function r4(t){for(var e=0;e<sj.length;e++){var r=sj[e][0],n=sj[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var gx=ar++;Ae[gx]="0|[1-9]\\d*";var vx=ar++;Ae[vx]="\\d+";var dj=ar++;Ae[dj]="\\d*[a-zA-Z-]"+lj+"*";var oge=ar++;Ae[oge]="("+Ae[gx]+")\\.("+Ae[gx]+")\\.("+Ae[gx]+")";var sge=ar++;Ae[sge]="("+Ae[vx]+")\\.("+Ae[vx]+")\\.("+Ae[vx]+")";var aj=ar++;Ae[aj]="(?:"+Ae[gx]+"|"+Ae[dj]+")";var cj=ar++;Ae[cj]="(?:"+Ae[vx]+"|"+Ae[dj]+")";var pj=ar++;Ae[pj]="(?:-("+Ae[aj]+"(?:\\."+Ae[aj]+")*))";var fj=ar++;Ae[fj]="(?:-?("+Ae[cj]+"(?:\\."+Ae[cj]+")*))";var uj=ar++;Ae[uj]=lj+"+";var EC=ar++;Ae[EC]="(?:\\+("+Ae[uj]+"(?:\\."+Ae[uj]+")*))";var mj=ar++,age="v?"+Ae[oge]+Ae[pj]+"?"+Ae[EC]+"?";Ae[mj]="^"+age+"$";var hj="[v=\\s]*"+Ae[sge]+Ae[fj]+"?"+Ae[EC]+"?",gj=ar++;Ae[gj]="^"+hj+"$";var Ex=ar++;Ae[Ex]="((?:<|>)?=?)";var Qk=ar++;Ae[Qk]=Ae[vx]+"|x|X|\\*";var Jk=ar++;Ae[Jk]=Ae[gx]+"|x|X|\\*";var Av=ar++;Ae[Av]="[v=\\s]*("+Ae[Jk]+")(?:\\.("+Ae[Jk]+")(?:\\.("+Ae[Jk]+")(?:"+Ae[pj]+")?"+Ae[EC]+"?)?)?";var yx=ar++;Ae[yx]="[v=\\s]*("+Ae[Qk]+")(?:\\.("+Ae[Qk]+")(?:\\.("+Ae[Qk]+")(?:"+Ae[fj]+")?"+Ae[EC]+"?)?)?";var cge=ar++;Ae[cge]="^"+Ae[Ex]+"\\s*"+Ae[Av]+"$";var uge=ar++;Ae[uge]="^"+Ae[Ex]+"\\s*"+Ae[yx]+"$";var lge=ar++;Ae[lge]="(?:^|[^\\d])(\\d{1,"+oj+"})(?:\\.(\\d{1,"+oj+"}))?(?:\\.(\\d{1,"+oj+"}))?(?:$|[^\\d])";var n4=ar++;Ae[n4]="(?:~>?)";var bx=ar++;Ae[bx]="(\\s*)"+Ae[n4]+"\\s+";bC[bx]=new RegExp(Ae[bx],"g");dn[bx]=new RegExp(r4(Ae[bx]),"g");var VHe="$1~",dge=ar++;Ae[dge]="^"+Ae[n4]+Ae[Av]+"$";var pge=ar++;Ae[pge]="^"+Ae[n4]+Ae[yx]+"$";var i4=ar++;Ae[i4]="(?:\\^)";var xx=ar++;Ae[xx]="(\\s*)"+Ae[i4]+"\\s+";bC[xx]=new RegExp(Ae[xx],"g");dn[xx]=new RegExp(r4(Ae[xx]),"g");var zHe="$1^",fge=ar++;Ae[fge]="^"+Ae[i4]+Ae[Av]+"$";var mge=ar++;Ae[mge]="^"+Ae[i4]+Ae[yx]+"$";var vj=ar++;Ae[vj]="^"+Ae[Ex]+"\\s*("+hj+")$|^$";var _j=ar++;Ae[_j]="^"+Ae[Ex]+"\\s*("+age+")$|^$";var Pv=ar++;Ae[Pv]="(\\s*)"+Ae[Ex]+"\\s*("+hj+"|"+Ae[Av]+")";bC[Pv]=new RegExp(Ae[Pv],"g");dn[Pv]=new RegExp(r4(Ae[Pv]),"g");var YHe="$1$2$3",hge=ar++;Ae[hge]="^\\s*("+Ae[Av]+")\\s+-\\s+("+Ae[Av]+")\\s*$";var gge=ar++;Ae[gge]="^\\s*("+Ae[yx]+")\\s+-\\s+("+Ae[yx]+")\\s*$";var vge=ar++;Ae[vge]="(<|>)?=?\\s*\\*";for(nd=0;nd<ar;nd++)Hr(nd,Ae[nd]),bC[nd]||(bC[nd]=new RegExp(Ae[nd]),dn[nd]=new RegExp(r4(Ae[nd])));var nd;Rt.parse=Nv;function Nv(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof lr)return t;if(typeof t!="string"||t.length>yC)return null;var r=e.loose?dn[gj]:dn[mj];if(!r.test(t))return null;try{return new lr(t,e)}catch{return null}}Rt.valid=$He;function $He(t,e){var r=Nv(t,e);return r?r.version:null}Rt.clean=WHe;function WHe(t,e){var r=Nv(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Rt.SemVer=lr;function lr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof lr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>yC)throw new TypeError("version is longer than "+yC+" characters");if(!(this instanceof lr))return new lr(t,e);Hr("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?dn[gj]:dn[mj]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Xk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Xk)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}lr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};lr.prototype.toString=function(){return this.version};lr.prototype.compare=function(t){return Hr("SemVer.compare",this.version,this.options,t),t instanceof lr||(t=new lr(t,this.options)),this.compareMain(t)||this.comparePre(t)};lr.prototype.compareMain=function(t){return t instanceof lr||(t=new lr(t,this.options)),_x(this.major,t.major)||_x(this.minor,t.minor)||_x(this.patch,t.patch)};lr.prototype.comparePre=function(t){if(t instanceof lr||(t=new lr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Hr("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return _x(r,n)}while(++e)};lr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Rt.inc=KHe;function KHe(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new lr(t,r).inc(e,n).version}catch{return null}}Rt.diff=XHe;function XHe(t,e){if(yj(t,e))return null;var r=Nv(t),n=Nv(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Rt.compareIdentifiers=_x;var ige=/^[0-9]+$/;function _x(t,e){var r=ige.test(t),n=ige.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Rt.rcompareIdentifiers=QHe;function QHe(t,e){return _x(e,t)}Rt.major=JHe;function JHe(t,e){return new lr(t,e).major}Rt.minor=ZHe;function ZHe(t,e){return new lr(t,e).minor}Rt.patch=eje;function eje(t,e){return new lr(t,e).patch}Rt.compare=ef;function ef(t,e,r){return new lr(t,r).compare(new lr(e,r))}Rt.compareLoose=tje;function tje(t,e){return ef(t,e,!0)}Rt.rcompare=rje;function rje(t,e,r){return ef(e,t,r)}Rt.sort=nje;function nje(t,e){return t.sort(function(r,n){return Rt.compare(r,n,e)})}Rt.rsort=ije;function ije(t,e){return t.sort(function(r,n){return Rt.rcompare(r,n,e)})}Rt.gt=xC;function xC(t,e,r){return ef(t,e,r)>0}Rt.lt=Zk;function Zk(t,e,r){return ef(t,e,r)<0}Rt.eq=yj;function yj(t,e,r){return ef(t,e,r)===0}Rt.neq=_ge;function _ge(t,e,r){return ef(t,e,r)!==0}Rt.gte=bj;function bj(t,e,r){return ef(t,e,r)>=0}Rt.lte=xj;function xj(t,e,r){return ef(t,e,r)<=0}Rt.cmp=e4;function e4(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return yj(t,r,n);case"!=":return _ge(t,r,n);case">":return xC(t,r,n);case">=":return bj(t,r,n);case"<":return Zk(t,r,n);case"<=":return xj(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Rt.Comparator=Zc;function Zc(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Zc){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Zc))return new Zc(t,e);t=t.trim().split(/\s+/).join(" "),Hr("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===TC?this.value="":this.value=this.operator+this.semver.version,Hr("comp",this)}var TC={};Zc.prototype.parse=function(t){var e=this.options.loose?dn[vj]:dn[_j],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new lr(r[2],this.options.loose):this.semver=TC};Zc.prototype.toString=function(){return this.value};Zc.prototype.test=function(t){return Hr("Comparator.test",t,this.options.loose),this.semver===TC?!0:(typeof t=="string"&&(t=new lr(t,this.options)),e4(t,this.operator,this.semver,this.options))};Zc.prototype.intersects=function(t,e){if(!(t instanceof Zc))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Qn(t.value,e),t4(this.value,r,e);if(t.operator==="")return r=new Qn(this.value,e),t4(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=e4(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),u=e4(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||u};Rt.Range=Qn;function Qn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Qn)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Qn(t.raw,e);if(t instanceof Zc)return new Qn(t.value,e);if(!(this instanceof Qn))return new Qn(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Qn.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Qn.prototype.toString=function(){return this.range};Qn.prototype.parseRange=function(t){var e=this.options.loose,r=e?dn[gge]:dn[hge];t=t.replace(r,mje),Hr("hyphen replace",t),t=t.replace(dn[Pv],YHe),Hr("comparator trim",t,dn[Pv]),t=t.replace(dn[bx],VHe),t=t.replace(dn[xx],zHe);var n=e?dn[vj]:dn[_j],i=t.split(" ").map(function(o){return sje(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Zc(o,this.options)},this),i};Qn.prototype.intersects=function(t,e){if(!(t instanceof Qn))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Rt.toComparators=oje;function oje(t,e){return new Qn(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function sje(t,e){return Hr("comp",t,e),t=uje(t,e),Hr("caret",t),t=aje(t,e),Hr("tildes",t),t=dje(t,e),Hr("xrange",t),t=fje(t,e),Hr("stars",t),t}function Js(t){return!t||t.toLowerCase()==="x"||t==="*"}function aje(t,e){return t.trim().split(/\s+/).map(function(r){return cje(r,e)}).join(" ")}function cje(t,e){var r=e.loose?dn[pge]:dn[dge];return t.replace(r,function(n,i,o,s,a){Hr("tilde",t,n,i,o,s,a);var u;return Js(i)?u="":Js(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Js(s)?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Hr("replaceTilde pr",a),u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Hr("tilde return",u),u})}function uje(t,e){return t.trim().split(/\s+/).map(function(r){return lje(r,e)}).join(" ")}function lje(t,e){Hr("caret",t,e);var r=e.loose?dn[mge]:dn[fge];return t.replace(r,function(n,i,o,s,a){Hr("caret",t,n,i,o,s,a);var u;return Js(i)?u="":Js(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Js(s)?i==="0"?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Hr("replaceCaret pr",a),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Hr("no pr"),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Hr("caret return",u),u})}function dje(t,e){return Hr("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return pje(r,e)}).join(" ")}function pje(t,e){t=t.trim();var r=e.loose?dn[uge]:dn[cge];return t.replace(r,function(n,i,o,s,a,u){Hr("xRange",t,n,i,o,s,a,u);var c=Js(o),l=c||Js(s),d=l||Js(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Hr("xRange return",n),n})}function fje(t,e){return Hr("replaceStars",t,e),t.trim().replace(dn[vge],"")}function mje(t,e,r,n,i,o,s,a,u,c,l,d,p){return Js(r)?e="":Js(n)?e=">="+r+".0.0":Js(i)?e=">="+r+"."+n+".0":e=">="+e,Js(u)?a="":Js(c)?a="<"+(+u+1)+".0.0":Js(l)?a="<"+u+"."+(+c+1)+".0":d?a="<="+u+"."+c+"."+l+"-"+d:a="<="+a,(e+" "+a).trim()}Qn.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new lr(t,this.options));for(var e=0;e<this.set.length;e++)if(hje(this.set[e],t,this.options))return!0;return!1};function hje(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Hr(t[n].semver),t[n].semver!==TC&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Rt.satisfies=t4;function t4(t,e,r){try{e=new Qn(e,r)}catch{return!1}return e.test(t)}Rt.maxSatisfying=gje;function gje(t,e,r){var n=null,i=null;try{var o=new Qn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new lr(n,r))}),n}Rt.minSatisfying=vje;function vje(t,e,r){var n=null,i=null;try{var o=new Qn(e,r)}catch{return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new lr(n,r))}),n}Rt.minVersion=_je;function _je(t,e){t=new Qn(t,e);var r=new lr("0.0.0");if(t.test(r)||(r=new lr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new lr(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||xC(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Rt.validRange=yje;function yje(t,e){try{return new Qn(t,e).range||"*"}catch{return null}}Rt.ltr=bje;function bje(t,e,r){return Ej(t,e,"<",r)}Rt.gtr=xje;function xje(t,e,r){return Ej(t,e,">",r)}Rt.outside=Ej;function Ej(t,e,r,n){t=new lr(t,n),e=new Qn(e,n);var i,o,s,a,u;switch(r){case">":i=xC,o=xj,s=Zk,a=">",u=">=";break;case"<":i=Zk,o=bj,s=xC,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(t4(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var l=e.set[c],d=null,p=null;if(l.forEach(function(f){f.semver===TC&&(f=new Zc(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:s(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(t,p.semver))return!1;if(p.operator===u&&s(t,p.semver))return!1}return!0}Rt.prerelease=Eje;function Eje(t,e){var r=Nv(t,e);return r&&r.prerelease.length?r.prerelease:null}Rt.intersects=Tje;function Tje(t,e,r){return t=new Qn(t,r),e=new Qn(e,r),t.intersects(e)}Rt.coerce=Sje;function Sje(t){if(t instanceof lr)return t;if(typeof t!="string")return null;var e=t.match(dn[lge]);return e==null?null:Nv(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Tge=P((FAt,Ege)=>{var Ije=jk().wrap,Sj=1,Ij=2,Cj=4,s4=8,Zr=[],Cje=0,Rs=!1,eh=[],Tx,wj;function Rj(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(o4=!1,Tx=function(e){var r=Zr.length;if(o4||r===0)return!1;var n=!1;o4=!0;for(var i=0;i<r;++i){var o=Zr[i];if(o.flags&s4){var s=Sx&&Sx[o.uid];n=o.error(s,e)||n}}return o4=!1,eh.length>0&&(Zr=eh.pop()),Sx=void 0,n&&!Rs},wj=function(e,r,n){var i=[];Rs=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&Sj)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return Rs=!1,function(){Sx=i,eh.push(Zr),Zr=Rj(r,Zr),Rs=!0;for(var u=0;u<n;++u)(r[u].flags&Ij)>0&&r[u].before(this,i[r[u].uid]);Rs=!1;var c=e.apply(this,arguments);for(Rs=!0,u=0;u<n;++u)(r[u].flags&Cj)>0&&r[u].after(this,i[r[u].uid]);return Rs=!1,Zr=eh.pop(),Sx=void 0,c}},Ije(process,"_fatalException",function(t){return function(r){return Tx(r)||t(r)}})):(Tj=!1,Tx=function(e){if(Tj)throw e;for(var r=!1,n=Zr.length,i=0;i<n;++i){var o=Zr[i];o.flags&s4&&(r=o.error(null,e)||r)}if(!r&&Rs)throw e},wj=function(e,r,n){var i=[];Rs=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,!!(s.flags&Sj)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return Rs=!1,function(){var u=!1,c=!1;eh.push(Zr),Zr=Rj(r,Zr),Rs=!0;for(var l=0;l<n;++l)(r[l].flags&Ij)>0&&r[l].before(this,i[r[l].uid]);Rs=!1;var d;try{d=e.apply(this,arguments)}catch(p){u=!0;for(var l=0;l<n;++l)if(Zr[l].flags&s4)try{c=Zr[l].error(i[r[l].uid],p)||c}catch(m){throw Tj=!0,m}if(!c)throw process.removeListener("uncaughtException",Tx),process._originalNextTick(function(){process.addListener("uncaughtException",Tx)}),p}finally{if(!u||c){for(Rs=!0,l=0;l<n;++l)(r[l].flags&Cj)>0&&r[l].after(this,i[r[l].uid]);Rs=!1}Zr=eh.pop()}return d}},process.addListener("uncaughtException",Tx));var o4,Sx,Tj;function wje(t,e,r){Rs=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return Rs=!1,function(){eh.push(Zr),Zr=Rj(e,Zr);var o=t.apply(this,arguments);return Zr=eh.pop(),o}}function Rje(t){var e=Zr.length;if(e===0)return t;for(var r=Zr.slice(),n=0;n<e;++n)if(r[n].flags>0)return wj(t,r,e);return wje(t,r,e)}function id(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=Sj),typeof t.before=="function"&&(this.before=t.before,this.flags|=Ij),typeof t.after=="function"&&(this.after=t.after,this.flags|=Cj),typeof t.error=="function"&&(this.error=t.error,this.flags|=s4),this.uid=++Cje,this.data=e===void 0?null:e}id.prototype.create=void 0;id.prototype.before=void 0;id.prototype.after=void 0;id.prototype.error=void 0;id.prototype.data=void 0;id.prototype.uid=0;id.prototype.flags=0;function xge(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof id?t:new id(t,e)}function Aje(t,e){var r;t instanceof id?r=t:r=xge(t,e);for(var n=!1,i=0;i<Zr.length;i++)if(r===Zr[i]){n=!0;break}return n||Zr.push(r),r}function Pje(t){for(var e=0;e<Zr.length;e++)if(t===Zr[e]){Zr.splice(e,1);break}}process.createAsyncListener=xge;process.addAsyncListener=Aje;process.removeAsyncListener=Pje;Ege.exports=Rje});var Ige=P((BAt,Sge)=>{"use strict";Sge.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(u){o[1](u)}return s;function a(u,c){i=this,o=[l,d];function l(p){return e(s,!1),u(p)}function d(p){return e(s,!1),c(p)}}}}});var Dge=P(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Age=jk(),c4=bge(),Ia=Age.wrap,th=Age.massWrap,Jn=Tge(),Nje=require("util"),Dje=c4.gte(process.version,"6.0.0"),Nj=c4.gte(process.version,"7.0.0"),kje=c4.gte(process.version,"8.0.0"),Lje=c4.gte(process.version,"11.0.0"),od=require("net");Nj&&!od._normalizeArgs?od._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:Bje(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!Nj&&!od._normalizeConnectArgs&&(od._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in od.Server.prototype?Ia(od.Server.prototype,"_setUpListenHandle",Cge):Ia(od.Server.prototype,"_listen2",Cge);function Cge(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=Jn(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=Jn(this._handle.onconnection))}}}function Pge(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=Jn(e._originalOnread)}}Ia(od.Socket.prototype,"connect",function(t){return function(){var e;kje&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=Nj?od._normalizeArgs(arguments):od._normalizeConnectArgs(arguments),e[1]&&(e[1]=Jn(e[1]));var r=t.apply(this,e);return Pge(this),r}});var Oje=require("http");Ia(Oje.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=Jn(function(n){return Pge(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var Aj=require("child_process");function wge(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=Jn(e._handle.onread),Ia(e._handle,"close",u4))}),t._handle&&(t._handle.onexit=Jn(t._handle.onexit))}Aj.ChildProcess?Ia(Aj.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return wge(this),e}}):th(Aj,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return wge(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var Lj=[];process._nextDomainTick&&Lj.push("_nextDomainTick");process._tickDomainCallback&&Lj.push("_tickDomainCallback");th(process,Lj,sd);Ia(process,"nextTick",u4);var Oj=["setTimeout","setInterval"];global.setImmediate&&Oj.push("setImmediate");var Nge=require("timers"),Mje=global.setTimeout===Nge.setTimeout;th(Nge,Oj,u4);Mje&&th(global,Oj,u4);var Dj=require("dns");th(Dj,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],sd);Dj.resolveNaptr&&Ia(Dj,"resolveNaptr",sd);var kv=require("fs");th(kv,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],sd);kv.lchown&&Ia(kv,"lchown",sd);kv.lchmod&&Ia(kv,"lchmod",sd);kv.ftruncate&&Ia(kv,"ftruncate",sd);var SC;try{SC=require("zlib")}catch{}SC&&SC.Deflate&&SC.Deflate.prototype&&(Dv=Object.getPrototypeOf(SC.Deflate.prototype),Dv._transform?Ia(Dv,"_transform",sd):Dv.write&&Dv.flush&&Dv.end&&th(Dv,["write","flush","end"],sd));var Dv,kj;try{kj=require("crypto")}catch{}kj&&(Pj=["pbkdf2","randomBytes"],Lje||Pj.push("pseudoRandomBytes"),th(kj,Pj,sd));var Pj,a4=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";a4&&(Rge=process.addAsyncListener({create:function(){a4=!1}}),global.Promise.resolve(!0).then(function(){a4=!1}),process.removeAsyncListener(Rge));var Rge;a4&&Fje();function Fje(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,u,c=new t(l);c.__proto__=e.prototype;try{s.apply(a,u)}catch(d){u[1](d)}return c;function l(d,p){a=this,u=[f,m];function f(h){return n(c,!1),d(h)}function m(h){return n(c,!1),p(h)}}}if(Nje.inherits(e,t),Ia(t.prototype,"then",o),t.prototype.chain&&Ia(t.prototype,"chain",o),Dje)global.Promise=Ige()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=Jn(i))}function i(s,a,u,c){var l;try{return l=a.call(s,u),{returnVal:l,error:!1}}catch(d){return{errorVal:d,error:!0}}finally{l instanceof t?c.__asl_wrapper=function(){var p=l.__asl_wrapper||i;return p.apply(this,arguments)}:n(c,!0)}}function o(s){return function(){var u=this,c=s.apply(u,Array.prototype.map.call(arguments,l));return c.__asl_wrapper=function(p,f,m,h){return u.__asl_wrapper?(u.__asl_wrapper(p,function(){},null,c),c.__asl_wrapper(p,f,m,h)):i(p,f,m,h)},c;function l(d){return typeof d!="function"?d:Jn(function(p){var f=(u.__asl_wrapper||i)(this,d,p,c);if(f.error)throw f.errorVal;return f.returnVal})}}}}function sd(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=Jn(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=Jn(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=Jn(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=Jn(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=Jn(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=Jn(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function u4(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=Jn(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=Jn(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function Uje(t){return(t=Number(t))>=0?t:!1}function Bje(t){return typeof t=="string"&&Uje(t)===!1}});var Fge=P((HAt,Mge)=>{"use strict";var tf=require("assert"),qje=Yk(),IC="cls@contexts",Mj="error@context";process.addAsyncListener||Dge();function rl(t){this.name=t,this.active=null,this._set=[],this.id=null}rl.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};rl.prototype.get=function(t){if(this.active)return this.active[t]};rl.prototype.createContext=function(){return Object.create(this.active)};rl.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[Mj]=e),r}finally{this.exit(e)}};rl.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};rl.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[Mj]=e),n}finally{r.exit(e)}}};rl.prototype.enter=function(t){tf.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};rl.prototype.exit=function(t){if(tf.ok(t,"context must be provided for exiting"),this.active===t){tf.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);tf.ok(e>=0,"context not currently entered; can't exit"),tf.ok(e,"can't remove top context"),this._set.splice(e,1)};rl.prototype.bindEmitter=function(t){tf.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){o&&(o[IC]||(o[IC]=Object.create(null)),o[IC][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[IC]))return o;var s=o,a=o[IC];return Object.keys(a).forEach(function(u){var c=a[u];s=c.namespace.bind(s,c.context)}),s}qje(t,n,i)};rl.prototype.fromException=function(t){return t[Mj]};function kge(t){return process.namespaces[t]}function Gje(t){tf.ok(t,"namespace must be given a name!");var e=new rl(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function Lge(t){var e=kge(t);tf.ok(e,"can't delete nonexistent namespace!"),tf.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function Oge(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){Lge(t)}),process.namespaces=Object.create(null)}process.namespaces||Oge();Mge.exports={getNamespace:kge,createNamespace:Gje,destroyNamespace:Lge,reset:Oge}});var rh=P(d4=>{"use strict";Object.defineProperty(d4,"__esModule",{value:!0});d4.CorrelationContextManager=void 0;var Ix=In(),Hje=Rk(),Lv=Ak(),Fj=sH(),Uge=CH(),l4=Wo(),jje=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new Vje(i)}:null},t.spanToContextObject=function(e,r,n){var i=new Lv;return i.traceId=e.traceId,i.spanId=e.spanId,i.traceFlag=Lv.formatOpenTelemetryTraceFlags(e.traceFlags)||Lv.DEFAULT_TRACE_FLAG,i.parentId=r,t.generateContextObject(i.traceId,i.parentId,n,null,i)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(i){Ix.warn("Error binding to session context",l4.dumpObj(i))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){Ix.warn("Error binding to session context",l4.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(i){Ix.warn("Error binding to session context",l4.dumpObj(i))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=nge():this.cls=Fge()),t.session=this.cls.createNamespace("AI-CLS-Session"),Hje.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){Ix.warn("Error binding to session context",l4.dumpObj(n))}})),this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,i=e&&e.spanContext?e:null,o=e&&e.traceId?e:null,s=e&&e.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof r=="string"?r:"");var a=typeof r=="string"?r:"";if(n){var u=null,c=null;if(a=n.attributes.OperationName||a,r){var l=r;l.headers&&(l.headers.traceparent?u=new Lv(l.headers.traceparent):l.headers["request-id"]&&(u=new Lv(null,l.headers["request-id"])),l.headers.tracestate&&(c=new Fj(l.headers.tracestate)))}u||(u=new Lv(n.traceParent||n.traceparent)),c||(c=new Fj(n.traceState||n.tracestate));var d=void 0;if(typeof r=="object"){var p=new Uge(r);d=p.getCorrelationContextHeader(),a=p.getOperationName({})}var f=t.generateContextObject(u.traceId,u.parentId,a,d,u,c);return f}if(s){var u=new Lv(s.traceparent?s.traceparent.toString():null),c=new Fj(s.tracestate?s.tracestate.toString():null),p=new Uge(e),f=t.generateContextObject(u.traceId,u.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),u,c);return f}return Ix.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();d4.CorrelationContextManager=jje;var Vje=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){Ix.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var Bge=P(Cx=>{"use strict";Object.defineProperty(Cx,"__esModule",{value:!0});Cx.dispose=Cx.enable=void 0;var p4=Cs(),zje=Wn(),f4=oi(),nh=[],Uj=function(t){var e=t.data.message;nh.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?p4.SeverityLevel.Error:p4.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?p4.SeverityLevel.Warning:p4.SeverityLevel.Information}))})};function Yje(t,e){if(t){var r=nh.find(function(n){return n==e});if(r)return;nh.length===0&&f4.channel.subscribe("console",Uj,f4.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(zje.StatsbeatInstrumentation.CONSOLE)}),nh.push(e)}else nh=nh.filter(function(n){return n!=e}),nh.length===0&&f4.channel.unsubscribe("console",Uj)}Cx.enable=Yje;function $je(){f4.channel.unsubscribe("console",Uj),nh=[]}Cx.dispose=$je});var qge=P(Rx=>{"use strict";Object.defineProperty(Rx,"__esModule",{value:!0});Rx.dispose=Rx.enable=void 0;var wx=Cs(),Wje=Wn(),m4=oi(),ih=[],Kje={10:wx.SeverityLevel.Verbose,20:wx.SeverityLevel.Verbose,30:wx.SeverityLevel.Information,40:wx.SeverityLevel.Warning,50:wx.SeverityLevel.Error,60:wx.SeverityLevel.Critical},Bj=function(t){var e=t.data.result,r=Kje[t.data.level];ih.forEach(function(n){try{var i=JSON.parse(e);if(i.err){var o=new Error(i.err.message);if(o.name=i.err.name,o.stack=i.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:o});return}}catch{}n.trackTrace({message:e,severity:r})})};function Xje(t,e){if(t){var r=ih.find(function(n){return n==e});if(r)return;ih.length===0&&m4.channel.subscribe("bunyan",Bj,m4.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Wje.StatsbeatInstrumentation.BUNYAN)}),ih.push(e)}else ih=ih.filter(function(n){return n!=e}),ih.length===0&&m4.channel.unsubscribe("bunyan",Bj)}Rx.enable=Xje;function Qje(){m4.channel.unsubscribe("bunyan",Bj),ih=[]}Rx.dispose=Qje});var Gge=P(Ax=>{"use strict";Object.defineProperty(Ax,"__esModule",{value:!0});Ax.dispose=Ax.enable=void 0;var Jje=Wn(),Qo=Cs(),h4=oi(),oh=[],Zje={syslog:function(t){var e={emerg:Qo.SeverityLevel.Critical,alert:Qo.SeverityLevel.Critical,crit:Qo.SeverityLevel.Critical,error:Qo.SeverityLevel.Error,warning:Qo.SeverityLevel.Warning,notice:Qo.SeverityLevel.Information,info:Qo.SeverityLevel.Information,debug:Qo.SeverityLevel.Verbose};return e[t]===void 0?Qo.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Qo.SeverityLevel.Error,warn:Qo.SeverityLevel.Warning,info:Qo.SeverityLevel.Information,verbose:Qo.SeverityLevel.Verbose,debug:Qo.SeverityLevel.Verbose,silly:Qo.SeverityLevel.Verbose};return e[t]===void 0?Qo.SeverityLevel.Information:e[t]},unknown:function(t){return Qo.SeverityLevel.Information}},qj=function(t){var e=t.data.message,r=Zje[t.data.levelKind](t.data.level);oh.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function eVe(t,e){if(t){var r=oh.find(function(n){return n==e});if(r)return;oh.length===0&&h4.channel.subscribe("winston",qj,h4.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(Jje.StatsbeatInstrumentation.WINSTON)}),oh.push(e)}else oh=oh.filter(function(n){return n!=e}),oh.length===0&&h4.channel.unsubscribe("winston",qj)}Ax.enable=eVe;function tVe(){h4.channel.unsubscribe("winston",qj),oh=[]}Ax.dispose=tVe});var jge=P(($At,Hge)=>{"use strict";var rVe=Rk(),nVe=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){rVe.IsInitialized&&(Bge().enable(e&&r,this._client),qge().enable(e,this._client),Gge().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();Hge.exports=nVe});var zge=P((WAt,Vge)=>{"use strict";var iVe=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(i,o,s){s===void 0&&(s=new Error(t._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,r._client.trackException(a),r._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();Vge.exports=iVe});var v4=P((KAt,Yge)=>{"use strict";var g4=require("os"),eu=Wn(),oVe=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=g4.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=g4.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var u=e[a],c=this._lastCpus[a],l="% cpu("+a+") ",d=u.model,p=u.speed,f=u.times,m=c.times,h=f.user-m.user||0;r+=h;var g=f.sys-m.sys||0;n+=g;var v=f.nice-m.nice||0;i+=v;var _=f.idle-m.idle||0;o+=_;var y=f.irq-m.irq||0;s+=y}var E=void 0;if(typeof process.cpuUsage=="function"){var x=process.cpuUsage(),S=process.hrtime(),O=x.user-this._lastAppCpuUsage.user+(x.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var U=(S[0]-this._lastHrtime[0])*1e6+(S[1]-this._lastHrtime[1])/1e3||0;E=100*O/(U*e.length)}this._lastAppCpuUsage=x,this._lastHrtime=S}var W=r+n+i+o+s||1;this._client.trackMetric({name:eu.PerformanceCounter.PROCESSOR_TIME,value:(W-o)/W*100}),this._client.trackMetric({name:eu.PerformanceCounter.PROCESS_TIME,value:E||r/W*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=g4.freemem(),r=process.memoryUsage().rss,n=g4.totalmem()-e;this._client.trackMetric({name:eu.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:eu.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:eu.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var u=n/s,c=i/s;this._client.trackMetric({name:eu.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:eu.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:eu.QuickPulseCounter.REQUEST_FAILURE_RATE,value:c})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var u=n/s,c=i/s;this._client.trackMetric({name:eu.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:eu.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:eu.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:eu.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();Yge.exports=oVe});var $ge=P(_4=>{"use strict";Object.defineProperty(_4,"__esModule",{value:!0});_4.AggregatedMetricCounter=void 0;var sVe=function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();_4.AggregatedMetricCounter=sVe});var Wge=P(y4=>{"use strict";Object.defineProperty(y4,"__esModule",{value:!0});y4.PreaggregatedMetricPropertyNames=void 0;y4.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var Hj=P((Gj,Kge)=>{"use strict";var x4=Gj&&Gj.__assign||function(){return x4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},x4.apply(this,arguments)},b4=Wn(),aVe=$ge(),cVe=Wge(),uVe=function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,i=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;i.intervalExecutionTime+=n,i.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof e=="string")i=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")i=e;else return;n.intervalExecutionTime+=i,n.totalCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,i=0;i<r.length;i++){if(e===r[i].dimensions)return r[i];if(Object.keys(e).length===Object.keys(r[i].dimensions).length){for(var o in e)if(e[o]!=r[i].dimensions[o]){n=!0;break}if(!n)return r[i];n=!1}}var s=new aVe.AggregatedMetricCounter(e);return r.push(s),s},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:b4.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,o=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:o,count:n,aggregationInterval:i,metricType:b4.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:b4.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;i>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:b4.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[cVe.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=x4(x4({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();Kge.exports=uVe});var Px=P((JAt,Xge)=>{"use strict";var rf=require("os"),lVe=require("fs"),dVe=require("path"),pVe=Cs(),fVe=Wn(),mVe=In(),hVe=function(){function t(e){this.keys=new pVe.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||dVe.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(lVe.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){mVe.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=rf&&rf.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=rf&&rf.type()+" "+rf.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=rf&&rf.arch(),this.tags["ai.device.osPlatform"]=rf&&rf.platform()},t.prototype._loadInternalContext=function(){t.sdkVersion=fVe.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();Xge.exports=hVe});var Zge=P((ZAt,Jge)=>{"use strict";var gVe=require("crypto"),Qge=require("os"),vVe=Wn(),_Ve=Px(),yVe=function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},i=_Ve.sdkVersion;n.sdkVersion=i,n.osType=Qge.type(),n.osVersion=Qge.release(),this._uniqueProcessId||(this._uniqueProcessId=gVe.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:vVe.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();Jge.exports=yVe});var e0e=P(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.isContentTypeHeaderHtml=At.insertSnippetByIndex=At.getContentEncodingFromHeaders=At.isSupportedContentEncoding=At.findBufferEncodingType=At.isBufferType=At.getBrotliDecompressSync=At.getBrotliDecompressAsync=At.getBrotliCompressSync=At.getBrotliCompressAsync=At.inflateAsync=At.deflateAsync=At.gunzipAsync=At.gzipAsync=At.isBrotliSupperted=At.bufferEncodingTypes=At.contentEncodingMethod=void 0;var T4=require("zlib"),Nx=require("util"),E4;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(E4=At.contentEncodingMethod||(At.contentEncodingMethod={}));At.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var bVe=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};At.isBrotliSupperted=bVe;At.gzipAsync=Nx.promisify(T4.gzip);At.gunzipAsync=Nx.promisify(T4.gunzip);At.deflateAsync=Nx.promisify(T4.deflate);At.inflateAsync=Nx.promisify(T4.inflate);var xVe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliCompress=="function"?Nx.promisify(t.brotliCompress):null};At.getBrotliCompressAsync=xVe;var EVe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};At.getBrotliCompressSync=EVe;var TVe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliDecompress=="function"?Nx.promisify(t.brotliDecompress):null};At.getBrotliDecompressAsync=TVe;var SVe=function(t){var e=At.isBrotliSupperted();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};At.getBrotliDecompressSync=SVe;var IVe=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var i=Buffer.from(t.toString(r),r);n=i.toJSON().data.toString()===t.toJSON().data.toString()}return n};At.isBufferType=IVe;var CVe=function(t){var e=null;for(var r in At.bufferEncodingTypes){var n=At.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&At.isBufferType(t,n)){e=n;break}}return e};At.findBufferEncodingType=CVe;var wVe=function(t){var e=null;switch(t){case"gzip":e=E4.GZIP;break;case"br":e=E4.BR;break;case"deflate":e=E4.DEFLATE;break;default:}return e};At.isSupportedContentEncoding=wVe;var RVe=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=At.isSupportedContentEncoding(r);n&&e.push(n)}return e};At.getContentEncodingFromHeaders=RVe;var AVe=function(t,e,r){if(t<0)return null;var n=null,i=e.substring(0,t),o=e.substring(t);return n=i+'<script type="text/javascript">'+r+"</script>"+o,n};At.insertSnippetByIndex=AVe;var PVe=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};At.isContentTypeHeaderHtml=PVe});var t0e=P(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.getResourceProvider=bo.getOsPrefix=bo.isFunctionApp=bo.isWebApp=bo.isLinux=bo.isWindows=void 0;var NVe=function(){return process.platform==="win32"};bo.isWindows=NVe;var DVe=function(){return process.platform==="linux"};bo.isLinux=DVe;var kVe=function(){return!!process.env.WEBSITE_SITE_NAME};bo.isWebApp=kVe;var LVe=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};bo.isFunctionApp=LVe;var OVe=function(){return bo.isWindows()?"w":bo.isLinux()?"l":"u"};bo.getOsPrefix=OVe;var MVe=function(){return bo.isWebApp()?"a":bo.isFunctionApp()?"f":"u"};bo.getResourceProvider=MVe});var jj=P((rPt,n0e)=>{"use strict";var r0e=Wn(),FVe=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var u=a[0].toLowerCase(),c=a[1];o[u]=c}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r0e.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r0e.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();n0e.exports=FVe});var i0e={};Fn(i0e,{webSnippet:()=>UVe});var UVe,o0e=T(()=>{UVe=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var d0e=P((nPt,l0e)=>{"use strict";var s0e=require("http"),a0e=require("https"),Dx=require("zlib"),ad=In(),tu=e0e(),c0e=t0e(),CC=Wn(),u0e=jj(),BVe=(o0e(),ki(i0e)),qVe=function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=CC.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=CC.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(CC.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(CC.StatsbeatFeature.WEB_SNIPPET)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=u0e.parse(e),i=n.instrumentationkey||"";u0e.isIkeyValid(i)?(this._isIkeyValid=!0,r=i):(this._isIkeyValid=!1,ad.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){ad.info("get web snippet ikey error: "+o)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=c0e.getOsPrefix(),n=c0e.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+e+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+n+r+"d_n_",o=BVe.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace(CC.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var i=n.name;if(i!==void 0){var o=n.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,r+=s;break;default:s=" "+i+": "+o+`,\r
`,r+=s;break}}})}catch{this._isEnabled=!1,ad.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=s0e.createServer,r=a0e.createServer,n=this._isEnabled;s0e.createServer=function(i){var o=i;return o&&(i=function(s,a){var u=a.write,c=s.method=="GET";a.write=function(p,f,m){try{if(n&&c){var h=tu.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(_){ad.warn("Inject snippet error: "+_)}return u.apply(a,arguments)};var l=a.end;return a.end=function(p,f,m){if(n&&c)try{if(n&&c){var h=tu.getContentEncodingFromHeaders(a),g=void 0;if(typeof f=="string"&&(g=f),h==null)t.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,void 0,g));else if(h.length){var v=h[0];arguments[0]=t.INSTANCE.InjectWebSnippet(a,p,v)}}}catch(_){ad.warn("Inject snipet error: "+_)}return l.apply(a,arguments)},o(s,a)}),e(i)},a0e.createServer=function(i,o){var s=o;if(s)return o=function(a,u){var c=a.method=="GET",l=u.write,d=u.end;return u.write=function(f,m,h){try{if(n&&c){var g=tu.getContentEncodingFromHeaders(u),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(u,f)&&(arguments[0]=this.InjectWebSnippet(u,f,void 0,v));else if(g.length){var _=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(u,f,_)}}}catch(y){ad.warn("Inject snippet error: "+y)}return l.apply(u,arguments)},u.end=function(f,m,h){try{if(n&&c){var g=tu.getContentEncodingFromHeaders(u),v=void 0;if(typeof m=="string"&&(v=m),g==null)t.INSTANCE.ValidateInjection(u,f)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(u,f,void 0,v));else if(g.length){var _=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(u,f,_)}}}catch(y){ad.warn("Inject snippet error: "+y)}return d.apply(u,arguments)},s(a,u)},r(i,o)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=tu.isContentTypeHeaderHtml(e);if(!n)return!1;var i=r.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(t._aiUrl)<0&&i.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(o){ad.info("validate injections error: "+o)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,i){try{var o=!!n;if(o)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var s=r.toString(),a=s.indexOf("</head>");if(a<0)return r;var u=tu.insertSnippetByIndex(a,s,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=u,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var c=i||"utf8",l=tu.isBufferType(r,c);if(l){e.removeHeader("Content-Length");var d=Buffer.from(u).toString(c);r=Buffer.from(d,c),e.setHeader("Content-Length",r.length)}}}}catch(p){ad.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case tu.contentEncodingMethod.GZIP:var i=Dx.gunzipSync(r);if(this.ValidateInjection(e,i)){var o=this.InjectWebSnippet(e,i);r=Dx.gzipSync(o)}break;case tu.contentEncodingMethod.DEFLATE:var s=Dx.inflateSync(r);if(this.ValidateInjection(e,s)){var a=this.InjectWebSnippet(e,s);r=Dx.deflateSync(a)}break;case tu.contentEncodingMethod.BR:var u=tu.getBrotliDecompressSync(Dx),c=tu.getBrotliCompressSync(Dx);if(u&&c){var l=u(r);if(this.ValidateInjection(e,l)){var d=this.InjectWebSnippet(e,l);r=c(d)}break}}}catch(p){ad.info("get web injection compress buffer error: "+p)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t}();l0e.exports=qVe});var f0e=P((zj,p0e)=>{"use strict";var GVe=zj&&zj.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ru=require("url"),Vj=Cs(),HVe=Wo(),jVe=ix(),VVe=EH(),zVe=Sv(),YVe=function(t){GVe(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=HVe.getCorrelationContextTarget(r,jVe.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=this.method.toUpperCase(),o=Vj.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new ru.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=Vj.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==zVe.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=Vj.RemoteDependencyDataConstants.TYPE_HTTP;var u={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(r&&r.time?u.time=r.time:this.startTime&&(u.time=new Date(this.startTime)),r){for(var c in r)u[c]||(u[c]=r[c]);if(r.properties)for(var c in r.properties)u.properties[c]=r.properties[c]}return u},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new ru.URL(r)}catch{}else try{var i=new ru.URL("http://"+r);i.port==="443"?r=new ru.URL("https://"+r):r=new ru.URL("http://"+r)}catch{}else{if(r&&typeof ru.URL=="function"&&r instanceof ru.URL)return ru.format(r);var o=r;r={},o&&Object.keys(o).forEach(function(u){r[u]=o[u]})}if(r.path&&r.host)try{var s=new ru.URL(r.path,"http://"+r.host+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.path&&r.hostname&&!r.host)try{var s=new ru.URL(r.path,"http://"+r.hostname+r.path);r.pathname=s.pathname,r.search=s.search}catch{}if(r.host&&r.port)try{var a=new ru.URL("http://"+r.host);!a.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",ru.format(r)},e}(VVe);p0e.exports=YVe});var m0e=P(kx=>{"use strict";var S4=kx&&kx.__assign||function(){return S4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},S4.apply(this,arguments)};Object.defineProperty(kx,"__esModule",{value:!0});kx.parseEventHubSpan=void 0;var Yj=(or(),ki(Wb)),$Ve=($s(),ki(Hde)),WVe=(Ju(),ki(uG)),wC=Wn(),KVe=function(t){var e=0,r=0,n=$Ve.hrTimeToMilliseconds(t.startTime);return t.links.forEach(function(i){var o=i.attributes,s=o?.[wC.ENQUEUED_TIME];s&&(e+=1,r+=n-(parseFloat(s.toString())||0))}),Math.max(r/(e||1),0)},XVe=function(t,e){var r,n=t.attributes[wC.AzNamespace],i=(t.attributes[WVe.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=t.attributes[wC.MessageBusDestination]||"unknown";switch(t.kind){case Yj.SpanKind.CLIENT:e.dependencyTypeName=n,e.target=i+"/"+o;break;case Yj.SpanKind.PRODUCER:e.dependencyTypeName=wC.DependencyTypeName.QueueMessage+" | "+n,e.target=i+"/"+o;break;case Yj.SpanKind.CONSUMER:e.source=i+"/"+o,e.measurements=S4(S4({},e.measurements),(r={},r[wC.TIME_SINCE_ENQUEUED]=KVe(t),r));break;default:}};kx.parseEventHubSpan=XVe});var v0e=P(I4=>{"use strict";Object.defineProperty(I4,"__esModule",{value:!0});I4.spanToTelemetryContract=void 0;var h0e=require("url"),nl=(or(),ki(Wb)),Vt=(Ju(),ki(uG)),nf=Wn(),QVe=m0e(),JVe=Wo();function ZVe(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var i=n[r];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(e[i]=t.attributes[i])}var o=t.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(e["_MS.links"]=JVe.stringify(o)),e}function eze(t){return t===Vt.DbSystemValues.DB2||t===Vt.DbSystemValues.DERBY||t===Vt.DbSystemValues.MARIADB||t===Vt.DbSystemValues.MSSQL||t===Vt.DbSystemValues.ORACLE||t===Vt.DbSystemValues.SQLITE||t===Vt.DbSystemValues.OTHER_SQL||t===Vt.DbSystemValues.HSQLDB||t===Vt.DbSystemValues.H2}function g0e(t){var e=t.attributes[Vt.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[Vt.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[Vt.SemanticAttributes.HTTP_SCHEME],i=t.attributes[Vt.SemanticAttributes.HTTP_TARGET];if(n&&i){var o=t.attributes[Vt.SemanticAttributes.HTTP_HOST];if(o)return n+"://"+o+i;var s=t.attributes[Vt.SemanticAttributes.NET_PEER_PORT];if(s){var a=t.attributes[Vt.SemanticAttributes.NET_PEER_NAME];if(a)return n+"://"+a+":"+s+i;var u=t.attributes[Vt.SemanticAttributes.NET_PEER_IP];if(u)return n+"://"+u+":"+s+i}}}return""}function $j(t){var e=t.attributes[Vt.SemanticAttributes.PEER_SERVICE],r=t.attributes[Vt.SemanticAttributes.HTTP_HOST],n=t.attributes[Vt.SemanticAttributes.HTTP_URL],i=t.attributes[Vt.SemanticAttributes.NET_PEER_NAME],o=t.attributes[Vt.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):i?String(i):o?String(o):""}function tze(t){var e={name:t.name,success:t.status.code!=nl.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===nl.SpanKind.PRODUCER&&(e.dependencyTypeName=nf.DependencyTypeName.QueueMessage),t.kind===nl.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=nf.DependencyTypeName.InProc);var r=t.attributes[Vt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Vt.SemanticAttributes.DB_SYSTEM],i=t.attributes[Vt.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=nf.DependencyTypeName.Http;var o=t.attributes[Vt.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new h0e.URL(String(o));s=a.pathname}catch{}e.name=r+" "+s}e.data=g0e(t);var u=t.attributes[Vt.SemanticAttributes.HTTP_STATUS_CODE];u&&(e.resultCode=String(u));var c=$j(t);if(c){try{var l=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),d=l.exec(c);if(d!=null){var p=d[1],f=d[3];(p=="https"&&f==":443"||p=="http"&&f==":80")&&(c=d[1]+d[2]+d[4])}}catch{}e.target=""+c}}else if(n){String(n)===Vt.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===Vt.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===Vt.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===Vt.DbSystemValues.REDIS?e.dependencyTypeName="redis":eze(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var m=t.attributes[Vt.SemanticAttributes.DB_STATEMENT],h=t.attributes[Vt.SemanticAttributes.DB_OPERATION];m?e.data=String(m):h&&(e.data=String(h));var c=$j(t),g=t.attributes[Vt.SemanticAttributes.DB_NAME];c?e.target=g?c+"|"+g:""+c:e.target=g?""+g:""+n}else if(i){e.dependencyTypeName=nf.DependencyTypeName.Grpc;var v=t.attributes[Vt.SemanticAttributes.RPC_GRPC_STATUS_CODE];v&&(e.resultCode=String(v));var c=$j(t);c?e.target=""+c:i&&(e.target=String(i))}return e}function rze(t){var e={name:t.name,success:t.status.code!=nl.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[Vt.SemanticAttributes.HTTP_METHOD],n=t.attributes[Vt.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==nl.SpanKind.SERVER){var i=t.attributes[Vt.SemanticAttributes.HTTP_ROUTE],o=t.attributes[Vt.SemanticAttributes.HTTP_URL];if(i)e.name=r+" "+i;else if(o)try{var s=new h0e.URL(String(o));e.name=r+" "+s.pathname}catch{}}e.url=g0e(t);var a=t.attributes[Vt.SemanticAttributes.HTTP_STATUS_CODE];a&&(e.resultCode=String(a))}else n&&(e.resultCode=String(n));return e}function nze(t){var e;switch(t.kind){case nl.SpanKind.CLIENT:case nl.SpanKind.PRODUCER:case nl.SpanKind.INTERNAL:e=tze(t);break;case nl.SpanKind.SERVER:case nl.SpanKind.CONSUMER:e=rze(t);break}var r=t.spanContext?t.spanContext():t.context(),n=""+r.spanId,i=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=i,e.properties=ZVe(t),t.attributes[nf.AzNamespace]&&(t.kind===nl.SpanKind.INTERNAL&&(e.dependencyTypeName=nf.DependencyTypeName.InProc+" | "+t.attributes[nf.AzNamespace]),t.attributes[nf.AzNamespace]===nf.MicrosoftEventHub&&QVe.parseEventHubSpan(t,e)),e}I4.spanToTelemetryContract=nze});var y0e=P(ah=>{"use strict";var Lx=ah&&ah.__assign||function(){return Lx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lx.apply(this,arguments)};Object.defineProperty(ah,"__esModule",{value:!0});ah.AsyncScopeManager=ah.OpenTelemetryScopeManagerWrapper=void 0;var sh=rh(),ize=require("events"),_0e=function(){function t(){}return t.prototype.active=function(){var e=this,r=sh.CorrelationContextManager.getCurrentContext();return Lx(Lx({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,i=e.name,o=t._spanToContext(e,n,i);return sh.CorrelationContextManager.runWithContext(o,r)()},t.prototype.bind=function(e){return typeof e=="function"?sh.CorrelationContextManager.wrapCallback(e):(e instanceof ize.EventEmitter&&sh.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return sh.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return sh.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var i=e.spanContext?e.spanContext():e.context(),o=Lx(Lx({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),s=r?"|"+i.traceId+"."+r+".":i.traceId,a=sh.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,r||(s=a.operation.parentId));var u=sh.CorrelationContextManager.spanToContextObject(o,s,n);return u},t}();ah.OpenTelemetryScopeManagerWrapper=_0e;ah.AsyncScopeManager=new _0e});var b0e=P(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.enable=ch.subscriber=void 0;var RC=(or(),ki(Wb)),oze=Wn(),Wj=oi(),sze=v0e(),aze=y0e(),Ov=[],cze=function(t){try{var e=t.data,r=sze.spanToTelemetryContract(e);aze.AsyncScopeManager.with(e,function(){Ov.forEach(function(n){e.kind===RC.SpanKind.SERVER||e.kind===RC.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===RC.SpanKind.CLIENT||e.kind===RC.SpanKind.INTERNAL||e.kind===RC.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};ch.subscriber=cze;function uze(t,e){if(t){var r=Ov.find(function(n){return n==e});if(r)return;Ov.length===0&&Wj.channel.subscribe("azure-coretracing",ch.subscriber,Wj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(oze.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),Ov.push(e)}else Ov=Ov.filter(function(n){return n!=e}),Ov.length===0&&Wj.channel.unsubscribe("azure-coretracing",ch.subscriber)}ch.enable=uze});var x0e=P(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.enable=uh.subscriber=void 0;var lze=Wn(),Kj=oi(),Mv=[],dze=function(t){t.data.event.commandName!=="ismaster"&&Mv.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};uh.subscriber=dze;function pze(t,e){if(t){var r=Mv.find(function(n){return n==e});if(r)return;Mv.length===0&&Kj.channel.subscribe("mongodb",uh.subscriber,Kj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(lze.StatsbeatInstrumentation.MONGODB)}),Mv.push(e)}else Mv=Mv.filter(function(n){return n!=e}),Mv.length===0&&Kj.channel.unsubscribe("mongodb",uh.subscriber)}uh.enable=pze});var E0e=P(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.enable=lh.subscriber=void 0;var fze=Wn(),Xj=oi(),Fv=[],mze=function(t){Fv.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};lh.subscriber=mze;function hze(t,e){if(t){var r=Fv.find(function(n){return n==e});if(r)return;Fv.length===0&&Xj.channel.subscribe("mysql",lh.subscriber,Xj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(fze.StatsbeatInstrumentation.MYSQL)}),Fv.push(e)}else Fv=Fv.filter(function(n){return n!=e}),Fv.length===0&&Xj.channel.unsubscribe("mysql",lh.subscriber)}lh.enable=hze});var T0e=P(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.enable=dh.subscriber=void 0;var gze=Wn(),Qj=oi(),Uv=[],vze=function(t){Uv.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};dh.subscriber=vze;function _ze(t,e){if(t){var r=Uv.find(function(n){return n==e});if(r)return;Uv.length===0&&Qj.channel.subscribe("redis",dh.subscriber,Qj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(gze.StatsbeatInstrumentation.REDIS)}),Uv.push(e)}else Uv=Uv.filter(function(n){return n!=e}),Uv.length===0&&Qj.channel.unsubscribe("redis",dh.subscriber)}dh.enable=_ze});var S0e=P(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.enable=ph.subscriber=void 0;var yze=Wn(),Jj=oi(),Bv=[],bze=function(t){Bv.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};ph.subscriber=bze;function xze(t,e){if(t){var r=Bv.find(function(n){return n==e});if(r)return;Bv.length===0&&Jj.channel.subscribe("postgres",ph.subscriber,Jj.trueFilter,function(n,i){var o=e.getStatsbeat();o&&o.addInstrumentation(yze.StatsbeatInstrumentation.POSTGRES)}),Bv.push(e)}else Bv=Bv.filter(function(n){return n!=e}),Bv.length===0&&Jj.channel.unsubscribe("postgres",ph.subscriber)}ph.enable=xze});var Fx=P((eV,I0e)=>{"use strict";var C4=eV&&eV.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},Ox=require("http"),Mx=require("https"),w4=In(),Zj=Wo(),fh=ix(),Eze=f0e(),AC=rh(),R4=Ak(),Tze=Rk(),PC=Sv(),Sze=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),Tze.IsInitialized&&(b0e().enable(e,this._client),x0e().enable(e,this._client),E0e().enable(e,this._client),T0e().enable(e,this._client),S0e().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=Ox.request,n=Mx.request,i=function(o,s){try{var a=!s[t.disableCollectionRequestOption]&&!o[t.alreadyAutoCollectedFlag],u=null;if(s.headers&&(u=s.headers["User-Agent"]||s.headers["user-agent"],u&&u.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(AC.CorrelationContextManager.wrapEmitter(o),e._isEnabled))if(o[t.alreadyAutoCollectedFlag]=!0,AC.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:s,request:o});else{var c=null;if(PC.w3cEnabled){var l=new R4;c=l.traceId}else{var d=PC.generateRequestId(null);c=PC.getRootId(d)}var p=AC.CorrelationContextManager.generateContextObject(c);AC.CorrelationContextManager.runWithContext(p,function(){t.trackRequest(e._client,{options:s,request:o})})}}catch(f){w4.warn("Failed to generate dependency telemetry.",Zj.dumpObj(f))}};Ox.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=r.call.apply(r,C4([Ox,o],s));return i(u,o),u},Mx.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=n.call.apply(n,C4([Mx,o],s));return i(u,o),u},Ox.get=function(o){for(var s,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=(s=Ox.request).call.apply(s,C4([Ox,o],a));return c.end(),c},Mx.get=function(o){for(var s,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=(s=Mx.request).call.apply(s,C4([Mx,o],a));return c.end(),c}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){w4.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new Eze(r.options,r.request),i=AC.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&R4.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(PC.w3cEnabled){var a=new R4;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(Zj.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var u=r.request.getHeader(fh.requestContextHeader);try{Zj.safeIncludeCorrelationHeader(e,r.request,u)}catch(d){w4.warn("Request-Context header could not be set. Correlation of requests may be lost",d)}if(i&&i.operation)try{if(r.request.setHeader(fh.requestIdHeader,o),e.config.ignoreLegacyHeaders||(r.request.setHeader(fh.parentIdHeader,i.operation.id),r.request.setHeader(fh.rootIdHeader,o)),s||i.operation.traceparent)r.request.setHeader(fh.traceparentHeader,s||i.operation.traceparent.toString());else if(PC.w3cEnabled){var a=new R4().toString();r.request.setHeader(fh.traceparentHeader,a)}if(i.operation.tracestate){var c=i.operation.tracestate.toString();c&&r.request.setHeader(fh.traceStateHeader,c)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(fh.correlationContextHeader,l)}catch(d){w4.warn("Correlation headers could not be set. Correlation of requests may be lost.",d)}}r.request.on&&(r.request.on("response",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects["http.ClientResponse"]=d,e.trackDependency(p)}}),r.request.on("error",function(d){if(!r.isProcessed){r.isProcessed=!0,n.onError(d);var p=n.getDependencyTelemetry(r,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects.Error=d,e.trackDependency(p)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(d)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();I0e.exports=Sze});var rV=P((pPt,P0e)=>{"use strict";var C0e=require("http"),w0e=require("https"),R0e=In(),A0e=Wo(),Ize=ix(),tV=CH(),of=rh(),Cze=v4(),wze=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||Cze.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?of.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&of.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return of.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var i=this,o=new tV(e),s=this._generateCorrelationContext(o);of.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(i._client,{request:e,response:r},o)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){of.CorrelationContextManager.wrapEmitter(s),of.CorrelationContextManager.wrapEmitter(a);var u=s&&!s[t.alreadyAutoCollectedFlag];s&&u&&t.INSTANCE?t.INSTANCE._registerRequest(s,a,o):o(s,a)}}},r=function(o){var s=o.addListener.bind(o);o.addListener=function(a,u){switch(a){case"request":case"checkContinue":return s(a,e(u));default:return s(a,u)}},o.on=o.addListener},n=C0e.createServer;C0e.createServer=function(o,s){if(s&&typeof s=="function"){var a=n(o,e(s));return r(a),a}else{var a=n(e(o));return r(a),a}};var i=w0e.createServer;w0e.createServer=function(o,s){var a=i(o,e(s));return r(a),a}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){R0e.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=of.CorrelationContextManager.getCurrentContext(),i=new tV(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){R0e.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var i=of.CorrelationContextManager.getCurrentContext(),o=n||new tV(r.request,i&&i.operation.parentId);A0e.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(Ize.requestContextHeader);A0e.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){if(!n.isProcessed){n.isProcessed=!0,o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var u=r.getLegacyRootId();u&&(s.properties.ai_legacyRootId=u),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,of.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();P0e.exports=wze});var k0e=P((iV,D0e)=>{"use strict";var nu=iV&&iV.__assign||function(){return nu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nu.apply(this,arguments)},nV=require("os"),qv=Cs(),N0e=Wn(),Rze=Wo(),Aze=In(),Pze=Rze.w3cTraceId(),Nze=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=nV&&typeof nV.hostname=="function"&&nV.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,u={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:Pze,MachineName:o,Instance:s,RoleName:a};return u},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case qv.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case qv.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case qv.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case qv.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case qv.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=nu(nu({},r),{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=nu(nu({},r),{Message:e.data.baseData.message,SeverityLevel:qv.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(u){i+=u.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=nu(nu({},r),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=nu(nu({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=nu(nu({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=N0e.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=N0e.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):Aze.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new qv.ContextTagKeys,t}();D0e.exports=Nze});var O0e=P((fPt,L0e)=>{"use strict";var Dze=function(){return(Date.now()+621355968e5)*1e4};L0e.exports={getTransmissionTime:Dze}});var B0e=P((NC,U0e)=>{"use strict";var M0e=NC&&NC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},F0e=NC&&NC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},kze=require("https"),Lze=Fx(),oV=In(),Oze=O0e(),sV=Wo(),Mze=require("url"),iu={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},Fze=function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var i=[{name:iu.streamId,value:e.StreamId},{name:iu.machineName,value:e.MachineName},{name:iu.roleName,value:e.RoleName},{name:iu.instanceName,value:e.Instance},{name:iu.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",i)},t.prototype.post=function(e,r,n){return M0e(this,void 0,void 0,function(){return F0e(this,function(i){switch(i.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return i.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,i,o){return M0e(this,void 0,void 0,function(){var s,a,u,c,l,d,p,f,m=this;return F0e(this,function(h){switch(h.label){case 0:if(s=sV.stringify(e),a=(p={},p[Lze.disableCollectionRequestOption]=!0,p.host=r&&r.length>0?r:this._config.quickPulseHost,p.method=iu.method,p.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,p.headers=(f={Expect:"100-continue"},f[iu.time]=Oze.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),p),o&&o.length>0&&o.forEach(function(g){return a.headers[g.name]=g.value}),i!=="post")return[3,4];if(u=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!u)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,u.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return c=h.sent(),l="Failed to get AAD bearer token for the Application. Error:",oV.info(t.TAG,l,c),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=sV.tlsRestrictedAgent,d=kze.request(a,function(g){if(g.statusCode==200){var v=g.headers[iu.subscribed]==="true",_=null;try{_=g.headers[iu.endpointRedirect]?new Mze.URL(g.headers[iu.endpointRedirect].toString()).host:null}catch(E){m._onError("Failed to parse redirect header from QuickPulse: "+sV.dumpObj(E))}var y=g.headers[iu.pollingIntervalHint]?parseInt(g.headers[iu.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,n(v,g,_,y)}else m._onError("StatusCode:"+g.statusCode+" StatusMessage:"+g.statusMessage),n()}),d.on("error",function(g){m._onError(g),n()}),d.write(s),d.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",oV.warn(t.TAG,r,e)):oV.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();U0e.exports=Fze});var V0e=P((DC,j0e)=>{"use strict";var q0e=DC&&DC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},G0e=DC&&DC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},H0e=In(),aV=k0e(),Uze=B0e(),Bze=Wn(),qze=Px(),Gze=function(){function t(e,r,n){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new qze,this._sender=new Uze(this.config,n),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=aV.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=Bze.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=aV.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return q0e(this,void 0,void 0,function(){var e,r,n,i,o=this;return G0e(this,function(s){switch(s.label){case 0:return e=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),r=aV.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,i=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return q0e(this,void 0,void 0,function(){return G0e(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,i){e!=null?(this._isCollectingData!==e&&(H0e.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,H0e.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();j0e.exports=Gze});var z0e=P(Ux=>{"use strict";var A4=Ux&&Ux.__assign||function(){return A4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},A4.apply(this,arguments)};Object.defineProperty(Ux,"__esModule",{value:!0});Ux.AutoCollectNativePerformance=void 0;var kC=Px(),Hze=In(),jze=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,Hze.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,i=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,u=o;a<u.length;a++){var c=u[a];s[c]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:A4(A4({},e),s)}:{isEnabled:e,disabledMetrics:s}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var i=r[n].metrics,o=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kC.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:o,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kC.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kC.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kC.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kC.sdkVersion,n)})}},t}();Ux.AutoCollectNativePerformance=jze});var W0e=P(mh=>{"use strict";var Y0e=mh&&mh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},$0e=mh&&mh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(mh,"__esModule",{value:!0});mh.AzureFunctionsHook=void 0;var P4=In(),cV=rh(),Vze=function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{P4.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new zze:e.version.startsWith("4.")&&(this._cachedModelHelper=new Yze)),this._cachedModelHelper||(this._cachedModelHelper=null,P4.warn('AzureFunctionsHook does not support model "'+e.name+'" version "'+e.version+'"'))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return Y0e(e,void 0,void 0,function(){var n,i,o,s;return $0e(this,function(a){try{n=this._getFuncModelHelper(),n&&(i=r.invocationContext,o=cV.CorrelationContextManager.startOperation(i),o&&(o.customProperties.setProperty("InvocationId",i.invocationId),s=i.traceContext,s.attributes&&(o.customProperties.setProperty("ProcessId",s.attributes.ProcessId),o.customProperties.setProperty("LogLevel",s.attributes.LogLevel),o.customProperties.setProperty("Category",s.attributes.Category),o.customProperties.setProperty("HostInstanceId",s.attributes.HostInstanceId),o.customProperties.setProperty("AzFuncLiveLogsSessionId",s.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=cV.CorrelationContextManager.wrapCallback(r.functionCallback,o),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=o,r.hookData.appInsightsStartTime=Date.now())))}catch(u){return P4.warn("Failed to propagate context in Azure Functions",u),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return Y0e(e,void 0,void 0,function(){var n,i,o,s,a=this;return $0e(this,function(u){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(i=r.inputs[0],i&&(o=r.hookData.appInsightsStartTime||Date.now(),s=r.hookData.appInsightsExtractedContext,s?cV.CorrelationContextManager.runWithContext(s,function(){a._createIncomingRequestTelemetry(i,r,o,s.operation.parentId)}):this._createIncomingRequestTelemetry(i,r,o,null)))}catch(c){P4.warn("Error creating automatic incoming request in Azure Functions",c)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,i){var o=this._getFuncModelHelper().getStatusCodes(r),s=200;if(o)for(var a=0,u=o;a<u.length;a++){var c=u[a];if(typeof c=="number"&&Number.isInteger(c)){s=c;break}else if(typeof c=="string"){var l=parseInt(c);if(!isNaN(l)){s=l;break}}}else s=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:s,success:typeof s=="number"?0<s&&s<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:i}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t}();mh.AzureFunctionsHook=Vze;var zze=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,i=r.bindingDefinitions.find(function(o){return o.direction==="out"&&o.type.toLowerCase()==="http"});return i?.name==="$return"?n=e.result:i&&r.bindings&&r.bindings[i.name]!==void 0?n=r.bindings[i.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var i;return((i=n.type)===null||i===void 0?void 0:i.toLowerCase())==="httptrigger"})},t}(),Yze=function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t}()});var uV=P((gPt,Q0e)=>{"use strict";var $ze=Sv(),K0e=jj(),Wze=In(),X0e=Wn(),Kze=require("url"),Xze=ED(),Qze=function(){function t(e){this._endpointBase=X0e.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=K0e.parse(e),i=K0e.parse(r),o=!n.instrumentationkey&&Object.keys(n).length>0?null:e,s=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||n.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||i.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||i.liveendpoint||process.env[t.ENV_quickPulseHost]||X0e.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new Kze.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||i.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=$ze.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||Wze.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=Xze.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t}();Q0e.exports=Qze});function N4(){return lV.create()}var J0e,lV,dV=T(()=>{J0e=new Set(["Deserialize","Serialize","Retry","Sign"]),lV=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!J0e.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!J0e.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),o=n("None"),s=n("Deserialize"),a=n("Retry"),u=n("Sign"),c=[i,o,s,a,u];function l(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?u:o}for(let m of this._policies){let h=m.policy,g=m.options,v=h.name;if(r.has(v))throw new Error("Duplicate policy names not allowed in pipeline");let _={policy:h,dependsOn:new Set,dependants:new Set};g.afterPhase&&(_.afterPhase=l(g.afterPhase),_.afterPhase.hasAfterPolicies=!0),r.set(v,_),l(g.phase).policies.add(_)}for(let m of this._policies){let{policy:h,options:g}=m,v=h.name,_=r.get(v);if(!_)throw new Error(`Missing node for policy ${v}`);if(g.afterPolicies)for(let y of g.afterPolicies){let E=r.get(y);E&&(_.dependsOn.add(E),E.dependants.add(_))}if(g.beforePolicies)for(let y of g.beforePolicies){let E=r.get(y);E&&(E.dependsOn.add(_),_.dependants.add(E))}}function d(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(let g of h.dependants)g.dependsOn.delete(h);r.delete(h.policy.name),m.policies.delete(h)}}function p(){for(let m of c){if(d(m),m.policies.size>0&&m!==o){o.hasRun||d(o);return}m.hasAfterPolicies&&d(o)}}let f=0;for(;r.size>0;){f++;let m=e.length;if(p(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}});function tve(t,...e){process.stderr.write(`${eve.default.format(t,...e)}${Z0e.EOL}`)}var Z0e,eve,rve=T(()=>{Z0e=require("os"),eve=we(require("util"))});function mV(t){ive=t,pV=[],fV=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?fV.push(new RegExp(`^${n.substr(1)}$`)):pV.push(new RegExp(`^${n}$`));for(let n of D4)n.enabled=hV(n.namespace)}function hV(t){if(t.endsWith("*"))return!0;for(let e of fV)if(e.test(t))return!1;for(let e of pV)if(e.test(t))return!0;return!1}function Jze(){let t=ive||"";return mV(""),t}function sve(t){let e=Object.assign(r,{enabled:hV(t),destroy:Zze,log:ove.log,namespace:t,extend:eYe});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return D4.push(e),e}function Zze(){let t=D4.indexOf(this);return t>=0?(D4.splice(t,1),!0):!1}function eYe(t){let e=sve(`${this.namespace}:${t}`);return e.log=this.log,e}var nve,ive,pV,fV,D4,ove,Bx,ave=T(()=>{rve();nve=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,pV=[],fV=[],D4=[];nve&&mV(nve);ove=Object.assign(t=>sve(t),{enable:mV,enabled:hV,disable:Jze,log:tve});Bx=ove});function tYe(t){if(t&&!pve(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${_V.join(",")}`);gV=t;let e=[];for(let r of uve)dve(r)&&e.push(r.namespace);Bx.enable(e.join(","))}function O4(t){let e=vV.extend(t);return lve(vV,e),{error:L4(e,"error"),warning:L4(e,"warning"),info:L4(e,"info"),verbose:L4(e,"verbose")}}function lve(t,e){e.log=(...r)=>{t.log(...r)}}function L4(t,e){let r=Object.assign(t.extend(e),{level:e});if(lve(t,r),dve(r)){let n=Bx.disable();Bx.enable(n+","+r.namespace)}return uve.add(r),r}function dve(t){return!!(gV&&cve[t.level]<=cve[gV])}function pve(t){return _V.includes(t)}var uve,k4,gV,vV,_V,cve,yV=T(()=>{ave();uve=new Set,k4=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,vV=Bx("azure");vV.log=(...t)=>{Bx.log(...t)};_V=["verbose","info","warning","error"];k4&&(pve(k4)?tYe(k4):console.error(`AZURE_LOG_LEVEL set to unknown log level '${k4}'; logging is not enabled. Acceptable values: ${_V.join(", ")}.`));cve={verbose:400,info:300,warning:200,error:100}});var Jo,qx=T(()=>{yV();Jo=O4("core-rest-pipeline")});var bV,M4,fve=T(()=>{M4=typeof process<"u"&&!!process.version&&!!(!((bV=process.versions)===null||bV===void 0)&&bV.node)});function xV(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);let e=Gx.get(t);e&&e.slice().forEach(r=>{r.call(t,{type:"abort"})}),F4.set(t,!0)}var Gx,F4,LC,mve=T(()=>{Gx=new WeakMap,F4=new WeakMap,LC=class t{constructor(){this.onabort=null,Gx.set(this,[]),F4.set(this,!1)}get aborted(){if(!F4.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return F4.get(this)}static get none(){return new t}addEventListener(e,r){if(!Gx.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");Gx.get(this).push(r)}removeEventListener(e,r){if(!Gx.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=Gx.get(this),i=n.indexOf(r);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var cd,OC,hve=T(()=>{mve();cd=class extends Error{constructor(e){super(e),this.name="AbortError"}},OC=class{constructor(e){if(this._signal=new LC,!!e){Array.isArray(e)||(e=arguments);for(let r of e)r.aborted?this.abort():r.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){xV(this._signal)}static timeout(e){let r=new LC,n=setTimeout(xV,e,r);return typeof n.unref=="function"&&n.unref(),r}}});var U4=T(()=>{hve()});function EV(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var gve=T(()=>{});function MC(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}var TV=T(()=>{});function Hx(t){if(MC(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}function jx(t){if(Hx(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}var vve=T(()=>{TV()});var Vx=T(()=>{fve();gve();TV();vve()});var SV,rYe,nYe,zx,IV=T(()=>{Vx();SV="REDACTED",rYe=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],nYe=["api-version"],zx=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=rYe.concat(e),r=nYe.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||MC(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=SV;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=SV;return r}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,SV);return r.toString()}}});function B4(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:Jo.info,n=new zx({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:CV,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let s=await o(i);return r(`Response status code: ${s.status}`),r(`Headers: ${n.sanitize(s.headers)}`),s}}}var CV,wV=T(()=>{qx();IV();CV="logPolicy"});function q4(t={}){let{maxRetries:e=20}=t;return{name:RV,async sendRequest(r,n){let i=await n(r);return yve(n,i,e)}}}async function yve(t,e,r,n=0){let{request:i,status:o,headers:s}=e,a=s.get("location");if(a&&(o===300||o===301&&_ve.includes(i.method)||o===302&&_ve.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let u=new URL(a,i.url);i.url=u.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let c=await t(i);return yve(t,c,r,n+1)}return e}var RV,_ve,AV=T(()=>{RV="redirectPolicy",_ve=["GET","HEAD"]});function bve(){return"User-Agent"}function xve(t){t.set("Node",process.version),t.set("OS",`(${Yx.arch()}-${Yx.type()}-${Yx.release()})`)}var Yx,Eve=T(()=>{Yx=we(require("os"))});var G4,PV=T(()=>{G4="1.10.1"});function iYe(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}function Tve(){return bve()}function H4(t){let e=new Map;e.set("core-rest-pipeline",G4),xve(e);let r=iYe(e);return t?`${t} ${r}`:r}var NV=T(()=>{Eve();PV()});function j4(t={}){let e=H4(t.userAgentPrefix);return{name:DV,async sendRequest(r,n){return r.headers.has(Sve)||r.headers.set(Sve,e),n(r)}}}var Sve,DV,kV=T(()=>{NV();Sve=Tve(),DV="userAgentPolicy"});function V4(){return{name:LV,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}var LV,OV=T(()=>{LV="decompressResponsePolicy"});function z4(t,e,r){return new Promise((n,i)=>{let o,s,a=()=>i(new cd(r?.abortErrorMsg?r?.abortErrorMsg:oYe)),u=()=>{r?.abortSignal&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),u(),a()),r?.abortSignal&&r.abortSignal.aborted)return a();o=setTimeout(()=>{u(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",s)})}function Ive(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}var oYe,Y4=T(()=>{U4();oYe="The operation was aborted."});function Cve(t){if(t&&[429,503].includes(t.status))try{for(let i of sYe){let o=Ive(t,i);if(o===0||o)return o*(i===MV?1e3:1)}let e=t.headers.get(MV);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function wve(t){return Number.isFinite(Cve(t))}function $4(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=Cve(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var MV,sYe,W4=T(()=>{Y4();MV="Retry-After",sYe=["retry-after-ms","x-ms-retry-after-ms",MV]});function $x(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:aYe,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:cYe,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:u}){let c=lYe(u),l=c&&t.ignoreSystemErrors,d=uYe(a),p=d&&t.ignoreHttpStatusCodes;if(a&&(wve(a)||!d)||p||l)return{skipStrategy:!0};if(u&&!c&&!d)return{errorToThrow:u};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+EV(0,h/2),{retryAfterInMs:o}}}}function uYe(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function lYe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}var aYe,cYe,K4=T(()=>{Vx();W4();aYe=1e3,cYe=1e3*64});function ud(t,e={maxRetries:3}){let r=e.logger||Rve;return{name:dYe,async sendRequest(n,i){var o,s;let a,u,c=-1;e:for(;;){c+=1,a=void 0,u=void 0;try{r.info(`Retry ${c}: Attempting to send request`,n.requestId),a=await i(n),r.info(`Retry ${c}: Received a response from request`,n.requestId)}catch(l){if(r.error(`Retry ${c}: Received an error from request`,n.requestId),u=l,!l||u.name!=="RestError")throw l;a=u.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${c}: Request aborted.`),new cd;if(c>=((s=e.maxRetries)!==null&&s!==void 0?s:3)){if(r.info(`Retry ${c}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),u)throw u;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${c}: Processing ${t.length} retry strategies.`);t:for(let l of t){let d=l.logger||Rve;d.info(`Retry ${c}: Processing retry strategy ${l.name}.`);let p=l.retry({retryCount:c,response:a,responseError:u});if(p.skipStrategy){d.info(`Retry ${c}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=p;if(f)throw d.error(`Retry ${c}: Retry strategy ${l.name} throws error:`,f),f;if(m||m===0){d.info(`Retry ${c}: Retry strategy ${l.name} retries after ${m}`),await z4(m,void 0,{abortSignal:n.abortSignal});continue e}if(h){d.info(`Retry ${c}: Retry strategy ${l.name} redirects to ${h}`),n.url=h;continue e}}if(u)throw r.info("None of the retry strategies could work with the received error. Throwing it."),u;if(a)return r.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var Rve,dYe,Wx=T(()=>{Y4();yV();U4();Rve=O4("core-rest-pipeline retryPolicy"),dYe="retryPolicy"});function X4(t={}){var e;return{name:pYe,sendRequest:ud([$4(),$x(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var pYe,FV=T(()=>{K4();W4();Wx();pYe="defaultRetryPolicy"});var Nve=P((hNt,Pve)=>{var Ave=require("stream").Stream,fYe=require("util");Pve.exports=il;function il(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}fYe.inherits(il,Ave);il.create=function(t,e){var r=new this;e=e||{};for(var n in e)r[n]=e[n];r.source=t;var i=t.emit;return t.emit=function(){return r._handleEmit(arguments),i.apply(t,arguments)},t.on("error",function(){}),r.pauseStream&&t.pause(),r};Object.defineProperty(il.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});il.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};il.prototype.resume=function(){this._released||this.release(),this.source.resume()};il.prototype.pause=function(){this.source.pause()};il.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]};il.prototype.pipe=function(){var t=Ave.prototype.pipe.apply(this,arguments);return this.resume(),t};il.prototype._handleEmit=function(t){if(this._released){this.emit.apply(this,t);return}t[0]==="data"&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(t)};il.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}}});var Ove=P((gNt,Lve)=>{var mYe=require("util"),kve=require("stream").Stream,Dve=Nve();Lve.exports=ai;function ai(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}mYe.inherits(ai,kve);ai.create=function(t){var e=new this;t=t||{};for(var r in t)e[r]=t[r];return e};ai.isStreamLike=function(t){return typeof t!="function"&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"&&!Buffer.isBuffer(t)};ai.prototype.append=function(t){var e=ai.isStreamLike(t);if(e){if(!(t instanceof Dve)){var r=Dve.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this};ai.prototype.pipe=function(t,e){return kve.prototype.pipe.call(this,t,e),this.resume(),t};ai.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};ai.prototype._realGetNext=function(){var t=this._streams.shift();if(typeof t>"u"){this.end();return}if(typeof t!="function"){this._pipeNext(t);return}var e=t;e(function(r){var n=ai.isStreamLike(r);n&&(r.on("data",this._checkDataSize.bind(this)),this._handleErrors(r)),this._pipeNext(r)}.bind(this))};ai.prototype._pipeNext=function(t){this._currentStream=t;var e=ai.isStreamLike(t);if(e){t.on("end",this._getNext.bind(this)),t.pipe(this,{end:!1});return}var r=t;this.write(r),this._getNext()};ai.prototype._handleErrors=function(t){var e=this;t.on("error",function(r){e._emitError(r)})};ai.prototype.write=function(t){this.emit("data",t)};ai.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};ai.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};ai.prototype.end=function(){this._reset(),this.emit("end")};ai.prototype.destroy=function(){this._reset(),this.emit("close")};ai.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};ai.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}};ai.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};ai.prototype._emitError=function(t){this._reset(),this.emit("error",t)}});var Mve=P((vNt,hYe)=>{hYe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var Uve=P((_Nt,Fve)=>{Fve.exports=Mve()});var Gve=P(Ca=>{"use strict";var Q4=Uve(),gYe=require("path").extname,Bve=/^\s*([^;\s]*)(?:;|\s|$)/,vYe=/^text\//i;Ca.charset=qve;Ca.charsets={lookup:qve};Ca.contentType=_Ye;Ca.extension=yYe;Ca.extensions=Object.create(null);Ca.lookup=bYe;Ca.types=Object.create(null);xYe(Ca.extensions,Ca.types);function qve(t){if(!t||typeof t!="string")return!1;var e=Bve.exec(t),r=e&&Q4[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&vYe.test(e[1])?"UTF-8":!1}function _Ye(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Ca.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=Ca.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function yYe(t){if(!t||typeof t!="string")return!1;var e=Bve.exec(t),r=e&&Ca.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function bYe(t){if(!t||typeof t!="string")return!1;var e=gYe("x."+t).toLowerCase().substr(1);return e&&Ca.types[e]||!1}function xYe(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(Q4).forEach(function(i){var o=Q4[i],s=o.extensions;if(!(!s||!s.length)){t[i]=s;for(var a=0;a<s.length;a++){var u=s[a];if(e[u]){var c=r.indexOf(Q4[e[u]].source),l=r.indexOf(o.source);if(e[u]!=="application/octet-stream"&&(c>l||c===l&&e[u].substr(0,12)==="application/"))continue}e[u]=i}}})}});var jve=P((bNt,Hve)=>{Hve.exports=EYe;function EYe(t){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(t):setTimeout(t,0)}});var UV=P((xNt,zve)=>{var Vve=jve();zve.exports=TYe;function TYe(t){var e=!1;return Vve(function(){e=!0}),function(n,i){e?t(n,i):Vve(function(){t(n,i)})}}});var BV=P((ENt,Yve)=>{Yve.exports=SYe;function SYe(t){Object.keys(t.jobs).forEach(IYe.bind(t)),t.jobs={}}function IYe(t){typeof this.jobs[t]=="function"&&this.jobs[t]()}});var qV=P((TNt,Wve)=>{var $ve=UV(),CYe=BV();Wve.exports=wYe;function wYe(t,e,r,n){var i=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[i]=RYe(e,i,t[i],function(o,s){i in r.jobs&&(delete r.jobs[i],o?CYe(r):r.results[i]=s,n(o,r.results))})}function RYe(t,e,r,n){var i;return t.length==2?i=t(r,$ve(n)):i=t(r,e,$ve(n)),i}});var GV=P((SNt,Kve)=>{Kve.exports=AYe;function AYe(t,e){var r=!Array.isArray(t),n={index:0,keyedList:r||e?Object.keys(t):null,jobs:{},results:r?{}:[],size:r?Object.keys(t).length:t.length};return e&&n.keyedList.sort(r?e:function(i,o){return e(t[i],t[o])}),n}});var HV=P((INt,Xve)=>{var PYe=BV(),NYe=UV();Xve.exports=DYe;function DYe(t){Object.keys(this.jobs).length&&(this.index=this.size,PYe(this),NYe(t)(null,this.results))}});var Jve=P((CNt,Qve)=>{var kYe=qV(),LYe=GV(),OYe=HV();Qve.exports=MYe;function MYe(t,e,r){for(var n=LYe(t);n.index<(n.keyedList||t).length;)kYe(t,e,n,function(i,o){if(i){r(i,o);return}if(Object.keys(n.jobs).length===0){r(null,n.results);return}}),n.index++;return OYe.bind(n,r)}});var jV=P((wNt,J4)=>{var Zve=qV(),FYe=GV(),UYe=HV();J4.exports=BYe;J4.exports.ascending=e_e;J4.exports.descending=qYe;function BYe(t,e,r,n){var i=FYe(t,r);return Zve(t,e,i,function o(s,a){if(s){n(s,a);return}if(i.index++,i.index<(i.keyedList||t).length){Zve(t,e,i,o);return}n(null,i.results)}),UYe.bind(i,n)}function e_e(t,e){return t<e?-1:t>e?1:0}function qYe(t,e){return-1*e_e(t,e)}});var r_e=P((RNt,t_e)=>{var GYe=jV();t_e.exports=HYe;function HYe(t,e,r){return GYe(t,e,null,r)}});var i_e=P((ANt,n_e)=>{n_e.exports={parallel:Jve(),serial:r_e(),serialOrdered:jV()}});var s_e=P((PNt,o_e)=>{o_e.exports=function(t,e){return Object.keys(e).forEach(function(r){t[r]=t[r]||e[r]}),t}});var u_e=P((NNt,c_e)=>{var $V=Ove(),a_e=require("util"),VV=require("path"),jYe=require("http"),VYe=require("https"),zYe=require("url").parse,YYe=require("fs"),$Ye=require("stream").Stream,zV=Gve(),WYe=i_e(),YV=s_e();c_e.exports=br;a_e.inherits(br,$V);function br(t){if(!(this instanceof br))return new br(t);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],$V.call(this),t=t||{};for(var e in t)this[e]=t[e]}br.LINE_BREAK=`\r
`;br.DEFAULT_CONTENT_TYPE="application/octet-stream";br.prototype.append=function(t,e,r){r=r||{},typeof r=="string"&&(r={filename:r});var n=$V.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),a_e.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(t,e,r),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,r)};br.prototype._trackLength=function(t,e,r){var n=0;r.knownLength!=null?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+br.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof $Ye))&&(r.knownLength||this._valuesToMeasure.push(e))};br.prototype._lengthRetriever=function(t,e){t.hasOwnProperty("fd")?t.end!=null&&t.end!=1/0&&t.start!=null?e(null,t.end+1-(t.start?t.start:0)):YYe.stat(t.path,function(r,n){var i;if(r){e(r);return}i=n.size-(t.start?t.start:0),e(null,i)}):t.hasOwnProperty("httpVersion")?e(null,+t.headers["content-length"]):t.hasOwnProperty("httpModule")?(t.on("response",function(r){t.pause(),e(null,+r.headers["content-length"])}),t.resume()):e("Unknown stream")};br.prototype._multiPartHeader=function(t,e,r){if(typeof r.header=="string")return r.header;var n=this._getContentDisposition(e,r),i=this._getContentType(e,r),o="",s={"Content-Disposition":["form-data",'name="'+t+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof r.header=="object"&&YV(s,r.header);var a;for(var u in s)s.hasOwnProperty(u)&&(a=s[u],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=u+": "+a.join("; ")+br.LINE_BREAK)));return"--"+this.getBoundary()+br.LINE_BREAK+o+br.LINE_BREAK};br.prototype._getContentDisposition=function(t,e){var r,n;return typeof e.filepath=="string"?r=VV.normalize(e.filepath).replace(/\\/g,"/"):e.filename||t.name||t.path?r=VV.basename(e.filename||t.name||t.path):t.readable&&t.hasOwnProperty("httpVersion")&&(r=VV.basename(t.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n};br.prototype._getContentType=function(t,e){var r=e.contentType;return!r&&t.name&&(r=zV.lookup(t.name)),!r&&t.path&&(r=zV.lookup(t.path)),!r&&t.readable&&t.hasOwnProperty("httpVersion")&&(r=t.headers["content-type"]),!r&&(e.filepath||e.filename)&&(r=zV.lookup(e.filepath||e.filename)),!r&&typeof t=="object"&&(r=br.DEFAULT_CONTENT_TYPE),r};br.prototype._multiPartFooter=function(){return function(t){var e=br.LINE_BREAK,r=this._streams.length===0;r&&(e+=this._lastBoundary()),t(e)}.bind(this)};br.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+br.LINE_BREAK};br.prototype.getHeaders=function(t){var e,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in t)t.hasOwnProperty(e)&&(r[e.toLowerCase()]=t[e]);return r};br.prototype.setBoundary=function(t){this._boundary=t};br.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};br.prototype.getBuffer=function(){for(var t=new Buffer.alloc(0),e=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)typeof this._streams[r]!="function"&&(Buffer.isBuffer(this._streams[r])?t=Buffer.concat([t,this._streams[r]]):t=Buffer.concat([t,Buffer.from(this._streams[r])]),(typeof this._streams[r]!="string"||this._streams[r].substring(2,e.length+2)!==e)&&(t=Buffer.concat([t,Buffer.from(br.LINE_BREAK)])));return Buffer.concat([t,Buffer.from(this._lastBoundary())])};br.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;e<24;e++)t+=Math.floor(Math.random()*10).toString(16);this._boundary=t};br.prototype.getLengthSync=function(){var t=this._overheadLength+this._valueLength;return this._streams.length&&(t+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),t};br.prototype.hasKnownLength=function(){var t=!0;return this._valuesToMeasure.length&&(t=!1),t};br.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(t.bind(this,null,e));return}WYe.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){if(r){t(r);return}n.forEach(function(i){e+=i}),t(null,e)})};br.prototype.submit=function(t,e){var r,n,i={method:"post"};return typeof t=="string"?(t=zYe(t),n=YV({port:t.port,path:t.pathname,host:t.hostname,protocol:t.protocol},i)):(n=YV(t,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(t.headers),n.protocol=="https:"?r=VYe.request(n):r=jYe.request(n),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&r.setHeader("Content-Length",s),this.pipe(r),e){var a,u=function(c,l){return r.removeListener("error",u),r.removeListener("response",a),e.call(this,c,l)};a=u.bind(this,null),r.on("error",u),r.on("response",a)}}.bind(this)),r};br.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};br.prototype.toString=function(){return"[object FormData]"}});function Z4(){return{name:WV,async sendRequest(t,e){if(t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?(t.body=KYe(t.formData),t.formData=void 0):await XYe(t.formData,t)}return e(t)}}}function KYe(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}async function XYe(t,e){let r=new l_e.default;for(let i of Object.keys(t)){let o=t[i];if(Array.isArray(o))for(let s of o)r.append(i,s);else r.append(i,o)}e.body=r,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${r.getBoundary()}`);try{let i=await new Promise((o,s)=>{r.getLength((a,u)=>{a?s(a):o(u)})});e.headers.set("Content-Length",i)}catch{}}var l_e,WV,KV=T(()=>{l_e=we(u_e()),WV="formDataPolicy"});var p_e=P((kNt,d_e)=>{var Kx=1e3,Xx=Kx*60,Qx=Xx*60,Gv=Qx*24,QYe=Gv*7,JYe=Gv*365.25;d_e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ZYe(t);if(r==="number"&&isFinite(t))return e.long?t$e(t):e$e(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ZYe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*JYe;case"weeks":case"week":case"w":return r*QYe;case"days":case"day":case"d":return r*Gv;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qx;case"minutes":case"minute":case"mins":case"min":case"m":return r*Xx;case"seconds":case"second":case"secs":case"sec":case"s":return r*Kx;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function e$e(t){var e=Math.abs(t);return e>=Gv?Math.round(t/Gv)+"d":e>=Qx?Math.round(t/Qx)+"h":e>=Xx?Math.round(t/Xx)+"m":e>=Kx?Math.round(t/Kx)+"s":t+"ms"}function t$e(t){var e=Math.abs(t);return e>=Gv?eL(t,e,Gv,"day"):e>=Qx?eL(t,e,Qx,"hour"):e>=Xx?eL(t,e,Xx,"minute"):e>=Kx?eL(t,e,Kx,"second"):t+" ms"}function eL(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var XV=P((LNt,f_e)=>{function r$e(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=p_e(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,m;function h(...g){if(!h.enabled)return;let v=h,_=Number(new Date),y=_-(d||_);v.diff=y,v.prev=d,v.curr=_,d=_,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,O)=>{if(S==="%%")return"%";E++;let U=r.formatters[O];if(typeof U=="function"){let W=g[E];S=U.call(v,W),g.splice(E,1),E--}return S}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return h.namespace=l,h.useColors=r.useColors(),h.color=r.selectColor(l),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,m=r.enabled(l)),m),set:g=>{p=g}}),typeof r.init=="function"&&r.init(h),h}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(l))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}f_e.exports=r$e});var m_e=P((ac,tL)=>{ac.formatArgs=i$e;ac.save=o$e;ac.load=s$e;ac.useColors=n$e;ac.storage=a$e();ac.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ac.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n$e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i$e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+tL.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ac.log=console.debug||console.log||(()=>{});function o$e(t){try{t?ac.storage.setItem("debug",t):ac.storage.removeItem("debug")}catch{}}function s$e(){let t;try{t=ac.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function a$e(){try{return localStorage}catch{}}tL.exports=XV()(ac);var{formatters:c$e}=tL.exports;c$e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var g_e=P((ONt,h_e)=>{"use strict";h_e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var y_e=P((MNt,__e)=>{"use strict";var u$e=require("os"),v_e=require("tty"),ou=g_e(),{env:xo}=process,hh;ou("no-color")||ou("no-colors")||ou("color=false")||ou("color=never")?hh=0:(ou("color")||ou("colors")||ou("color=true")||ou("color=always"))&&(hh=1);"FORCE_COLOR"in xo&&(xo.FORCE_COLOR==="true"?hh=1:xo.FORCE_COLOR==="false"?hh=0:hh=xo.FORCE_COLOR.length===0?1:Math.min(parseInt(xo.FORCE_COLOR,10),3));function QV(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function JV(t,e){if(hh===0)return 0;if(ou("color=16m")||ou("color=full")||ou("color=truecolor"))return 3;if(ou("color=256"))return 2;if(t&&!e&&hh===void 0)return 0;let r=hh||0;if(xo.TERM==="dumb")return r;if(process.platform==="win32"){let n=u$e.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in xo)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in xo)||xo.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in xo)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(xo.TEAMCITY_VERSION)?1:0;if(xo.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in xo){let n=parseInt((xo.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(xo.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(xo.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(xo.TERM)||"COLORTERM"in xo?1:r}function l$e(t){let e=JV(t,t&&t.isTTY);return QV(e)}__e.exports={supportsColor:l$e,stdout:QV(JV(!0,v_e.isatty(1))),stderr:QV(JV(!0,v_e.isatty(2)))}});var x_e=P((Zo,nL)=>{var d$e=require("tty"),rL=require("util");Zo.init=_$e;Zo.log=h$e;Zo.formatArgs=f$e;Zo.save=g$e;Zo.load=v$e;Zo.useColors=p$e;Zo.destroy=rL.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Zo.colors=[6,2,3,4,5,1];try{let t=y_e();t&&(t.stderr||t).level>=2&&(Zo.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Zo.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function p$e(){return"colors"in Zo.inspectOpts?!!Zo.inspectOpts.colors:d$e.isatty(process.stderr.fd)}function f$e(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+nL.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=m$e()+e+" "+t[0]}function m$e(){return Zo.inspectOpts.hideDate?"":new Date().toISOString()+" "}function h$e(...t){return process.stderr.write(rL.format(...t)+`
`)}function g$e(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function v$e(){return process.env.DEBUG}function _$e(t){t.inspectOpts={};let e=Object.keys(Zo.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Zo.inspectOpts[e[r]]}nL.exports=XV()(Zo);var{formatters:b_e}=nL.exports;b_e.o=function(t){return this.inspectOpts.colors=this.useColors,rL.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};b_e.O=function(t){return this.inspectOpts.colors=this.useColors,rL.inspect(t,this.inspectOpts)}});var ol=P((FNt,ZV)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ZV.exports=m_e():ZV.exports=x_e()});var E_e=P(ez=>{"use strict";Object.defineProperty(ez,"__esModule",{value:!0});function y$e(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(o,s)=>{o?i(o):n(s)})})}}ez.default=y$e});var nz=P((rz,S_e)=>{"use strict";var T_e=rz&&rz.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},b$e=require("events"),x$e=T_e(ol()),E$e=T_e(E_e()),UC=x$e.default("agent-base");function T$e(t){return!!t&&typeof t.addRequest=="function"}function tz(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function iL(t,e){return new iL.Agent(t,e)}(function(t){class e extends b$e.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:tz()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:tz()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=tz()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,a=null,u=o.timeout||this.timeout,c=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${u}ms`);f.code="ETIMEOUT",c(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),c(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),T$e(f)){UC("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);c(m)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(UC("Converting legacy callback function to promise"),this.promisifiedCallback=E$e.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(a=setTimeout(l,u)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{UC("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){UC("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){UC("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(iL||(iL={}));S_e.exports=iL});var I_e=P(qC=>{"use strict";var S$e=qC&&qC.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qC,"__esModule",{value:!0});var I$e=S$e(ol()),BC=I$e.default("https-proxy-agent:parse-proxy-response");function C$e(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?l(d):t.once("readable",o)}function s(){t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",a),t.removeListener("readable",o)}function a(d){BC("onclose had error %o",d)}function u(){BC("onend")}function c(d){s(),BC("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){BC("have not received end of HTTP headers yet..."),o();return}let m=p.toString("ascii",0,p.indexOf(`\r
`)),h=+m.split(" ")[1];BC("got proxy server response: %o",m),e({statusCode:h,buffered:p})}t.on("error",c),t.on("close",a),t.on("end",u),o()})}qC.default=C$e});var R_e=P(Hv=>{"use strict";var w$e=Hv&&Hv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Jx=Hv&&Hv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hv,"__esModule",{value:!0});var C_e=Jx(require("net")),w_e=Jx(require("tls")),R$e=Jx(require("url")),A$e=Jx(require("assert")),P$e=Jx(ol()),N$e=nz(),D$e=Jx(I_e()),GC=P$e.default("https-proxy-agent:agent"),iz=class extends N$e.Agent{constructor(e){let r;if(typeof e=="string"?r=R$e.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");GC("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||O$e(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return w$e(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(GC("Creating `tls.Socket`: %o",n),o=w_e.default.connect(n)):(GC("Creating `net.Socket`: %o",n),o=C_e.default.connect(n));let s=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:c,port:l,secureEndpoint:d}=r;L$e(l,d)||(c+=`:${l}`),s.Host=c,s.Connection="close";for(let g of Object.keys(s))u+=`${g}: ${s[g]}\r
`;let p=D$e.default(o);o.write(`${u}\r
`);let{statusCode:f,buffered:m}=yield p;if(f===200){if(e.once("socket",k$e),r.secureEndpoint){GC("Upgrading socket connection to TLS");let g=r.servername||r.host;return w_e.default.connect(Object.assign(Object.assign({},M$e(r,"host","hostname","path","port")),{socket:o,servername:g}))}return o}o.destroy();let h=new C_e.default.Socket({writable:!1});return h.readable=!0,e.once("socket",g=>{GC("replaying proxy buffer for failed request"),A$e.default(g.listenerCount("data")>0),g.push(m),g.push(null)}),h})}};Hv.default=iz;function k$e(t){t.resume()}function L$e(t,e){return!!(!e&&t===80||e&&t===443)}function O$e(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function M$e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var P_e=P((az,A_e)=>{"use strict";var F$e=az&&az.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},oz=F$e(R_e());function sz(t){return new oz.default(t)}(function(t){t.HttpsProxyAgent=oz.default,t.prototype=oz.default.prototype})(sz||(sz={}));A_e.exports=sz});var N_e=P(cz=>{"use strict";Object.defineProperty(cz,"__esModule",{value:!0});function U$e(t,e,{signal:r}={}){return new Promise((n,i)=>{function o(){r?.removeEventListener("abort",o),t.removeListener(e,s),t.removeListener("error",a)}function s(...u){o(),n(u)}function a(u){o(),i(u)}r?.addEventListener("abort",o),t.on(e,s),t.on("error",a)})}cz.default=U$e});var D_e=P(jv=>{"use strict";var B$e=jv&&jv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},HC=jv&&jv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jv,"__esModule",{value:!0});var q$e=HC(require("net")),G$e=HC(require("tls")),uz=HC(require("url")),H$e=HC(ol()),j$e=HC(N_e()),V$e=nz(),gh=(0,H$e.default)("http-proxy-agent");function z$e(t){return typeof t=="string"?/^https:?$/i.test(t):!1}var lz=class extends V$e.Agent{constructor(e){let r;if(typeof e=="string"?r=uz.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");gh("Creating new HttpProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||z$e(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return B$e(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=uz.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=r.hostname||r.host||null),o.port==null&&typeof r.port&&(o.port=String(r.port)),o.port==="80"&&(o.port=""),e.path=uz.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let s;if(i?(gh("Creating `tls.Socket`: %o",n),s=G$e.default.connect(n)):(gh("Creating `net.Socket`: %o",n),s=q$e.default.connect(n)),e._header){let a,u;gh("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(gh("Patching connection write() output buffer with updated header"),a=e.output[0],u=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(u),gh("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(gh("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,u=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(u),gh("Output buffer: %o",e.outputData[0].data))}return yield(0,j$e.default)(s,"connect"),s})}};jv.default=lz});var L_e=P((fz,k_e)=>{"use strict";var Y$e=fz&&fz.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},dz=Y$e(D_e());function pz(t){return new dz.default(t)}(function(t){t.HttpProxyAgent=dz.default,t.prototype=dz.default.prototype})(pz||(pz={}));k_e.exports=pz});function oL(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function J$e(){if(!process)return;let t=oL($$e),e=oL(K$e),r=oL(W$e);return t||e||r}function Z$e(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}function eWe(){let t=oL(X$e);return B_e=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function hz(t){if(!t&&(t=J$e(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function M_e(t,{headers:e,tlsSettings:r}){let n;try{n=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}r&&Jo.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:t.port,protocol:n.protocol,headers:e.toJSON()};return t.username&&t.password?i.auth=`${t.username}:${t.password}`:t.username&&(i.auth=`${t.username}`),i}function tWe(t,e){if(t.agent)return;let n=new URL(t.url).protocol!=="https:",i=t.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=M_e(i,t);e.httpProxyAgent=new U_e.HttpProxyAgent(o)}t.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=M_e(i,t);e.httpsProxyAgent=new F_e.HttpsProxyAgent(o)}t.agent=e.httpsProxyAgent}}function sL(t=hz(),e){B_e||O_e.push(...eWe());let r={};return{name:mz,async sendRequest(n,i){var o;return!n.proxySettings&&!Z$e(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:O_e,e?.customNoProxyList?void 0:Q$e)&&(n.proxySettings=t),n.proxySettings&&tWe(n,r),i(n)}}}var F_e,U_e,$$e,W$e,K$e,X$e,mz,O_e,B_e,Q$e,gz=T(()=>{F_e=we(P_e()),U_e=we(L_e());qx();$$e="HTTPS_PROXY",W$e="HTTP_PROXY",K$e="ALL_PROXY",X$e="NO_PROXY",mz="proxyPolicy",O_e=[],B_e=!1,Q$e=new Map});function aL(t="x-ms-client-request-id"){return{name:vz,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}var vz,_z=T(()=>{vz="setClientRequestIdPolicy"});function cL(t){return{name:yz,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}var yz,bz=T(()=>{yz="tlsPolicy"});function q_e(t={}){let e=new xz(t.parentContext);return t.span&&(e=e.setValue(Zx.span,t.span)),t.namespace&&(e=e.setValue(Zx.namespace,t.namespace)),e}var Zx,xz,Ez=T(()=>{Zx={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};xz=class t{constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}}});function rWe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function nWe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:rWe(),tracingContext:q_e({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function jC(){return Tz||(Tz=nWe()),Tz}var Tz,G_e=T(()=>{Ez()});function Sz(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(c,l,d){var p;let f=jC().startSpan(c,Object.assign(Object.assign({},d),{packageName:r,packageVersion:n,tracingContext:(p=l?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(Zx.namespace)||(m=m.setValue(Zx.namespace,e)),h.setAttribute("az.namespace",m.getValue(Zx.namespace));let g=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l?.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:g}}async function o(c,l,d,p){let{span:f,updatedOptions:m}=i(c,l,p);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(c,l,...d){return jC().withContext(c,l,...d)}function a(c){return jC().parseTraceparentHeader(c)}function u(c){return jC().createRequestHeaders(c)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:u}}var H_e=T(()=>{G_e();Ez()});var j_e=T(()=>{H_e()});var V_e,z_e,Y_e=T(()=>{V_e=require("util"),z_e=V_e.inspect.custom});function uL(t){return t instanceof cc?!0:Hx(t)&&t.name==="RestError"}var iWe,cc,lL=T(()=>{Vx();Y_e();IV();iWe=new zx,cc=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,this.request=r.request,this.response=r.response,Object.setPrototypeOf(this,t.prototype)}[z_e](){return`RestError: ${this.message} 
 ${iWe.sanitize(this)}`}};cc.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";cc.PARSE_ERROR="PARSE_ERROR"});function dL(t={}){let e=H4(t.userAgentPrefix),r=oWe();return{name:Iz,async sendRequest(n,i){var o,s;if(!r||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:a,tracingContext:u}=(s=sWe(r,n,e))!==null&&s!==void 0?s:{};if(!a||!u)return i(n);try{let c=await r.withContext(u,i,n);return cWe(a,c),c}catch(c){throw aWe(a,c),c}}}}function oWe(){try{return Sz({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:G4})}catch(t){Jo.warning(`Error when creating the TracingClient: ${jx(t)}`);return}}function sWe(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}r&&n.setAttribute("http.user_agent",r);let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))e.headers.set(s,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){Jo.warning(`Skipping creating a tracing span due to an error: ${jx(n)}`);return}}function aWe(t,e){try{t.setStatus({status:"error",error:Hx(e)?e:void 0}),uL(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){Jo.warning(`Skipping tracing span processing due to an error: ${jx(r)}`)}}function cWe(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){Jo.warning(`Skipping tracing span processing due to an error: ${jx(r)}`)}}var Iz,Cz=T(()=>{j_e();PV();NV();qx();Vx();lL();Iz="tracingPolicy"});function $_e(t){let e=N4();return M4&&(t.tlsOptions&&e.addPolicy(cL(t.tlsOptions)),e.addPolicy(sL(t.proxyOptions)),e.addPolicy(V4())),e.addPolicy(Z4()),e.addPolicy(j4(t.userAgentOptions)),e.addPolicy(aL()),e.addPolicy(X4(t.retryOptions),{phase:"Retry"}),e.addPolicy(dL(t.userAgentOptions),{afterPhase:"Retry"}),M4&&e.addPolicy(q4(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(B4(t.loggingOptions),{afterPhase:"Sign"}),e}var W_e=T(()=>{wV();dV();AV();kV();OV();FV();KV();Vx();gz();_z();bz();Cz()});function pL(t){return t.toLowerCase()}function*uWe(t){for(let e of t.values())yield[e.name,e.value]}function e1(t){return new wz(t)}var wz,fL=T(()=>{wz=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(pL(e),{name:e,value:String(r)})}get(e){var r;return(r=this._headersMap.get(pL(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(pL(e))}delete(e){this._headersMap.delete(pL(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return uWe(this._headersMap)}}});function VC(t){return t&&typeof t.pipe=="function"}function K_e(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function Q_e(t){return t&&typeof t.byteLength=="number"}function dWe(t){let e=e1();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function pWe(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=hL.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=hL.createInflate();return t.pipe(n),n}return t}function fWe(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new cc(`Error reading response as text: ${i.message}`,{code:cc.PARSE_ERROR}))})})}function mWe(t){return t?Buffer.isBuffer(t)?t.length:VC(t)?null:Q_e(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function J_e(){return new Rz}var t1,r1,hL,X_e,lWe,mL,Rz,Z_e=T(()=>{t1=we(require("http")),r1=we(require("https")),hL=we(require("zlib")),X_e=require("stream");U4();fL();lL();qx();lWe={};mL=class extends X_e.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},Rz=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new OC,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new cd("The operation was aborted.");s=d=>{d.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),u=a?.includes("gzip")||a?.includes("deflate"),c=typeof e.body=="function"?e.body():e.body;if(c&&!e.headers.has("Content-Length")){let d=mWe(c);d!==null&&e.headers.set("Content-Length",d)}let l;try{if(c&&e.onUploadProgress){let g=e.onUploadProgress,v=new mL(g);v.on("error",_=>{Jo.error("Error in upload progress",_)}),VC(c)?c.pipe(v):v.end(c),c=v}let d=await this.makeRequest(e,o,c),p=dWe(d),m={status:(r=d.statusCode)!==null&&r!==void 0?r:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),m;l=u?pWe(d,p):d;let h=e.onDownloadProgress;if(h){let g=new mL(h);g.on("error",v=>{Jo.error("Error in download progress",v)}),l.pipe(g),l=g}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=l:m.bodyAsText=await fWe(l),m}finally{if(e.abortSignal&&s){let d=Promise.resolve();VC(c)&&(d=K_e(c));let p=Promise.resolve();VC(l)&&(p=K_e(l)),Promise.all([d,p]).then(()=>{var f;s&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{Jo.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),s=o.protocol!=="https:";if(s&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let u={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((c,l)=>{let d=s?t1.request(u,c):r1.request(u,c);d.once("error",p=>{var f;l(new cc(p.message,{code:(f=p.code)!==null&&f!==void 0?f:cc.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let p=new cd("The operation was aborted.");d.destroy(p),l(p)}),n&&VC(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):Q_e(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Jo.error("Unrecognized body type",n),l(new cc("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?t1.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new t1.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return r1.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:lWe,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(Jo.info("No cached TLS Agent exist, creating a new Agent"),s=new r1.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function eye(){return J_e()}var tye=T(()=>{Z_e()});function Az(){return gL>vL.length-16&&(rye.default.randomFillSync(vL),gL=0),vL.slice(gL,gL+=16)}var rye,vL,gL,nye=T(()=>{rye=we(require("crypto")),vL=new Uint8Array(256),gL=vL.length});var iye,oye=T(()=>{iye=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function hWe(t){return typeof t=="string"&&iye.test(t)}var sye,aye=T(()=>{oye();sye=hWe});function gWe(t,e=0){let r=(es[t[e+0]]+es[t[e+1]]+es[t[e+2]]+es[t[e+3]]+"-"+es[t[e+4]]+es[t[e+5]]+"-"+es[t[e+6]]+es[t[e+7]]+"-"+es[t[e+8]]+es[t[e+9]]+"-"+es[t[e+10]]+es[t[e+11]]+es[t[e+12]]+es[t[e+13]]+es[t[e+14]]+es[t[e+15]]).toLowerCase();if(!sye(r))throw TypeError("Stringified UUID is invalid");return r}var es,cye,uye=T(()=>{aye();es=[];for(let t=0;t<256;++t)es.push((t+256).toString(16).substr(1));cye=gWe});function vWe(t,e,r){t=t||{};let n=t.random||(t.rng||Az)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return cye(n)}var Pz,lye=T(()=>{nye();uye();Pz=vWe});var dye=T(()=>{lye()});function pye(){return Pz()}var fye=T(()=>{dye()});function mye(t){return new Nz(t)}var Nz,hye=T(()=>{fL();fye();Nz=class{constructor(e){var r,n,i,o,s,a,u;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:e1(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(s=e.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||pye(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(u=e.enableBrowserStreams)!==null&&u!==void 0?u:!1}}});function vye(t={}){var e;return ud([$x(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3})}var gye,_ye=T(()=>{K4();Wx();gye="exponentialRetryPolicy"});function yye(t={}){var e;return{name:Dz,sendRequest:ud([$x(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var Dz,bye=T(()=>{K4();Wx();Dz="systemErrorRetryPolicy"});function xye(t={}){var e;return{name:kz,sendRequest:ud([$4()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}var kz,Eye=T(()=>{W4();Wx();kz="throttlingRetryPolicy"});async function yWe(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await z4(e),i=await n();return i}function Tye(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},_We),e),s={get isRefreshing(){return r!==null},get shouldRefresh(){var u;return!s.isRefreshing&&((u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(u,c){var l;return s.isRefreshing||(r=yWe(()=>t.getToken(u,c),o.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(p=>(r=null,n=p,i=c.tenantId,n)).catch(p=>{throw r=null,n=null,i=void 0,p})),r}return async(u,c)=>i!==c.tenantId||!!c.claims||s.mustRefresh?a(u,c):(s.shouldRefresh&&a(u,c),n)}var _We,Sye=T(()=>{Y4();_We={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function bWe(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}function xWe(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function Iye(t){var e;let{credential:r,scopes:n,challengeCallbacks:i}=t,o=t.logger||Jo,s=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:bWe,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=r?Tye(r):()=>Promise.resolve(null);return{name:Lz,async sendRequest(u,c){if(!u.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:u,getAccessToken:a,logger:o});let l,d;try{l=await c(u)}catch(p){d=p,l=p.response}if(s.authorizeRequestOnChallenge&&l?.status===401&&xWe(l)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:u,response:l,getAccessToken:a,logger:o}))return c(u);if(d)throw d;return l}}}var Lz,Cye=T(()=>{Sye();qx();Lz="bearerTokenAuthenticationPolicy"});function wye(){return{name:Oz,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}var Oz,Rye=T(()=>{Oz="ndJsonPolicy"});var Aye={};Fn(Aye,{RestError:()=>cc,bearerTokenAuthenticationPolicy:()=>Iye,bearerTokenAuthenticationPolicyName:()=>Lz,createDefaultHttpClient:()=>eye,createEmptyPipeline:()=>N4,createHttpHeaders:()=>e1,createPipelineFromOptions:()=>$_e,createPipelineRequest:()=>mye,decompressResponsePolicy:()=>V4,decompressResponsePolicyName:()=>LV,defaultRetryPolicy:()=>X4,exponentialRetryPolicy:()=>vye,exponentialRetryPolicyName:()=>gye,formDataPolicy:()=>Z4,formDataPolicyName:()=>WV,getDefaultProxySettings:()=>hz,isRestError:()=>uL,logPolicy:()=>B4,logPolicyName:()=>CV,ndJsonPolicy:()=>wye,ndJsonPolicyName:()=>Oz,proxyPolicy:()=>sL,proxyPolicyName:()=>mz,redirectPolicy:()=>q4,redirectPolicyName:()=>RV,retryPolicy:()=>ud,setClientRequestIdPolicy:()=>aL,setClientRequestIdPolicyName:()=>vz,systemErrorRetryPolicy:()=>yye,systemErrorRetryPolicyName:()=>Dz,throttlingRetryPolicy:()=>xye,throttlingRetryPolicyName:()=>kz,tlsPolicy:()=>cL,tlsPolicyName:()=>yz,tracingPolicy:()=>dL,tracingPolicyName:()=>Iz,userAgentPolicy:()=>j4,userAgentPolicyName:()=>DV});var Pye=T(()=>{dV();W_e();tye();fL();hye();lL();OV();_ye();_z();wV();gz();AV();bye();Eye();Wx();Cz();FV();kV();bz();KV();Cye();Rye()});var kye=P((zC,Dye)=>{"use strict";var EWe=zC&&zC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},TWe=zC&&zC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Nye=(Pye(),ki(Aye)),SWe="https://monitor.azure.com//.default";function IWe(t){return null}var CWe=function(){function t(e,r){var n=r?[r]:[SWe];this._azureTokenPolicy=Nye.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}return t.prototype.addAuthorizationHeader=function(e){return EWe(this,void 0,void 0,function(){var r,n;return TWe(this,function(i){switch(i.label){case 0:return r="authorization",n=Nye.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,IWe)];case 1:return i.sent(),e.headers[r]=n.headers.get(r),[2]}})})},t}();Dye.exports=CWe});var Oye=P((kkt,Lye)=>{"use strict";var wWe=In(),RWe=Wo(),AWe=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){wWe.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||RWe.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t}();Lye.exports=AWe});var Mye=P(_L=>{"use strict";Object.defineProperty(_L,"__esModule",{value:!0});_L.azureRoleEnvironmentTelemetryProcessor=void 0;function PWe(t,e){}_L.azureRoleEnvironmentTelemetryProcessor=PWe});var Bye=P(n1=>{"use strict";Object.defineProperty(n1,"__esModule",{value:!0});n1.getSamplingHashCode=n1.samplingTelemetryProcessor=void 0;var Fye=Cs();function NWe(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&Fye.TelemetryType.Metric===Fye.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=Uye(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}n1.samplingTelemetryProcessor=NWe;function Uye(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}n1.getSamplingHashCode=Uye});var qye=P(yL=>{"use strict";Object.defineProperty(yL,"__esModule",{value:!0});yL.performanceMetricsTelemetryProcessor=void 0;var Mz=v4(),Fz=Cs();function DWe(t,e){switch(e&&e.addDocument(t),t.data.baseType){case Fz.TelemetryTypeString.Exception:Mz.countException();break;case Fz.TelemetryTypeString.Request:var r=t.data.baseData;Mz.countRequest(r.duration,r.success);break;case Fz.TelemetryTypeString.Dependency:var n=t.data.baseData;Mz.countDependency(n.duration,n.success);break}return!0}yL.performanceMetricsTelemetryProcessor=DWe});var Gye=P(i1=>{"use strict";var ld=i1&&i1.__assign||function(){return ld=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ld.apply(this,arguments)};Object.defineProperty(i1,"__esModule",{value:!0});i1.preAggregatedMetricsTelemetryProcessor=void 0;var kWe=Cs(),YC=Hj(),bL=Cs();function LWe(t,e){if(YC.isEnabled())switch(t.data.baseType){case bL.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=ld(ld({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};YC.countException(n);break;case bL.TelemetryTypeString.Trace:var i=t.data.baseData;i.properties=ld(ld({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:kWe.SeverityLevel[i.severity]};YC.countTrace(o);break;case bL.TelemetryTypeString.Request:var s=t.data.baseData;s.properties=ld(ld({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};YC.countRequest(s.duration,a);break;case bL.TelemetryTypeString.Dependency:var u=t.data.baseData;u.properties=ld(ld({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var c={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:u.success,dependencyType:u.type,dependencyTarget:u.target,dependencyResultCode:u.resultCode};YC.countDependency(u.duration,c);break}return!0}i1.preAggregatedMetricsTelemetryProcessor=LWe});var Hye=P(dd=>{"use strict";var OWe=dd&&dd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xL=dd&&dd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&OWe(e,t,r)};Object.defineProperty(dd,"__esModule",{value:!0});xL(Mye(),dd);xL(Bye(),dd);xL(qye(),dd);xL(Gye(),dd)});var Uz=P((Bkt,zye)=>{"use strict";var xt=Cs(),wa=Wo(),jye=rh(),MWe=In(),FWe=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case xt.TelemetryType.Trace:s=t.createTraceData(e);break;case xt.TelemetryType.Dependency:s=t.createDependencyData(e);break;case xt.TelemetryType.Event:s=t.createEventData(e);break;case xt.TelemetryType.Exception:s=t.createExceptionData(e);break;case xt.TelemetryType.Request:s=t.createRequestData(e);break;case xt.TelemetryType.Metric:s=t.createMetricData(e);break;case xt.TelemetryType.Availability:s=t.createAvailabilityData(e);break;case xt.TelemetryType.PageView:s=t.createPageViewData(e);break}if(s&&s.baseData&&xt.domainSupportsProperties(s.baseData)){if(n)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);t.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=wa.validateStringMap(s.baseData.properties))}var u=o&&o.instrumentationKey||"",c=new xt.Envelope;return c.data=s,c.iKey=u,c.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,e.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=o?o.samplingPercentage:100,r===xt.TelemetryType.Metric&&(c.sampleRate=100),c},t.addAzureFunctionsCorrelationProperties=function(e){var r=jye.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),i=Object.values(e.properties),o=0;o<n.length;o++)n[o].length<=150&&(wa.isDate(i[o])||(i[o]==null&&(i[o]=""),typeof i[o]=="object"&&(i[o]=wa.stringify(i[o])),r[n[o]]=String(i[o]).substring(0,8192)),r[n[o]]=i[o]);return r}catch(s){MWe.warn("Failed to properly truncate telemetry properties: ",s)}},t.createTraceData=function(e){var r,n=new xt.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=xt.SeverityLevel.Information:n.severityLevel=e.severity;var i=new xt.Data;return i.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Trace),i.baseData=n,i},t.createDependencyData=function(e){var r,n,i,o=new xt.RemoteDependencyData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),o.target=(i=e.target)===null||i===void 0?void 0:i.substring(0,1024),o.duration=wa.msToTimeSpan(e.duration),o.success=e.success,o.type=e.dependencyTypeName,o.properties=this.truncateProperties(e),o.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?o.id=e.id:o.id=wa.w3cTraceId();var s=new xt.Data;return s.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Dependency),s.baseData=o,s},t.createEventData=function(e){var r,n=new xt.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var i=new xt.Data;return i.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Event),i.baseData=n,i},t.createExceptionData=function(e){var r,n,i=new xt.ExceptionData;i.properties=this.truncateProperties(e),isNaN(e.severity)?i.severityLevel=xt.SeverityLevel.Error:i.severityLevel=e.severity,i.measurements=e.measurements,i.exceptions=[];var o=e.exception.stack,s=new xt.ExceptionDetails;s.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),s.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),s.parsedStack=this.parseStack(o),s.hasFullStack=wa.isArray(s.parsedStack)&&s.parsedStack.length>0,i.exceptions.push(s);var a=new xt.Data;return a.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Exception),a.baseData=i,a},t.createRequestData=function(e){var r,n,i,o,s=new xt.RequestData;e.id?s.id=e.id:s.id=wa.w3cTraceId(),s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),s.source=(i=e.source)===null||i===void 0?void 0:i.substring(0,1024),s.duration=wa.msToTimeSpan(e.duration),s.responseCode=(o=e.resultCode?e.resultCode.toString():"0")===null||o===void 0?void 0:o.substring(0,1024),s.success=e.success,s.properties=this.truncateProperties(e),s.measurements=e.measurements;var a=new xt.Data;return a.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Request),a.baseData=s,a},t.createMetricData=function(e){var r,n=new xt.MetricData;n.metrics=[];var i=new xt.DataPoint;i.count=isNaN(e.count)?1:e.count,i.kind=xt.DataPointType.Aggregation,i.max=isNaN(e.max)?e.value:e.max,i.min=isNaN(e.min)?e.value:e.min,i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.stdDev=isNaN(e.stdDev)?0:e.stdDev,i.value=e.value,i.ns=e.namespace,n.metrics.push(i),n.properties=this.truncateProperties(e);var o=new xt.Data;return o.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Metric),o.baseData=n,o},t.createAvailabilityData=function(e){var r,n,i=new xt.AvailabilityData;e.id?i.id=e.id:i.id=wa.w3cTraceId(),i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=wa.msToTimeSpan(e.duration),i.success=e.success,i.runLocation=e.runLocation,i.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new xt.Data;return o.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.Availability),o.baseData=i,o},t.createPageViewData=function(e){var r,n,i=new xt.PageViewData;i.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),i.duration=wa.msToTimeSpan(e.duration),i.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),i.measurements=e.measurements,i.properties=this.truncateProperties(e);var o=new xt.Data;return o.baseType=xt.telemetryTypeToBaseType(xt.TelemetryType.PageView),o.baseData=i,o},t.getTags=function(e,r){var n=jye.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(Vye.regex.test(a)){var u=new Vye(n[s],i++);o+=u.sizeInBytes,r.push(u)}}var c=32*1024;if(o>c)for(var l=0,d=r.length-1,p=0,f=l,m=d;l<d;){var h=r[l].sizeInBytes,g=r[d].sizeInBytes;if(p+=h+g,p>c){var v=m-f+1;r.splice(f,v);break}f=l,m=d,l++,d--}}return r},t}(),Vye=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=wa.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=wa.trim(n[2])||this.method,this.fileName=wa.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t}();zye.exports=FWe});var Yye=P(vh=>{"use strict";var UWe=vh&&vh.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},BWe=vh&&vh.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(vh,"__esModule",{value:!0});vh.FileAccessControl=void 0;var qWe=require("fs"),GWe=require("os"),o1=require("child_process"),HWe=In(),jWe=function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=qWe.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||HWe.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return UWe(this,void 0,void 0,function(){var r,n;return BWe(this,function(i){switch(i.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=i.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return i.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=i.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var i=o1.spawn(t.ICACLS_PATH,e,{windowsHide:!0});i.on("error",function(o){return n(o)}),i.on("close",function(o,s){o===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},t._runICACLSSync=function(e){if(o1.spawnSync){var r=o1.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=o1.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";n.stdout.on("data",function(o){return i+=o}),n.on("error",function(o){return r(o)}),n.on("close",function(o,s){t.ACL_IDENTITY=i&&i.trim(),o===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(o1.spawnSync){var e=o1.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=GWe.type()==="Windows_NT",t}();vh.FileAccessControl=jWe});var qz=P((WC,Wye)=>{"use strict";var EL=WC&&WC.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},TL=WC&&WC.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Bz=require("fs"),VWe=require("os"),Vv=require("path"),zWe=require("zlib"),_h=Wn(),YWe=Fx(),sf=JB(),Ra=Wo(),$We=require("url"),$ye=In(),$C=Yye(),WWe=439,KWe=402,XWe=[200,206,402,408,429,439,500],QWe=function(){function t(e,r,n,i,o,s,a){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=Vv.join(VWe.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var i=this;e&&$C.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=$C.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!$C.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(_h.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(_h.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return EL(this,void 0,void 0,function(){var n,i,o,s,a,u,c,l,d=this;return TL(this,function(p){switch(p.label){case 0:if(!e)return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,i=new $We.URL(n).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(_h.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return p.sent(),[3,4];case 3:return a=p.sent(),u="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(u+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),u+="Error:"+a.toString(),this._logWarn(u),typeof r=="function"&&r(u),[2];case 4:c="",e.forEach(function(f){var m=Ra.stringify(f);typeof m=="string"&&(c+=m+`
`)}),c.length>0&&(c=c.substring(0,c.length-1)),l=Buffer.from?Buffer.from(c):new Buffer(c),zWe.gzip(l,function(f,m){var h=m;f?(d._logWarn(Ra.dumpObj(f)),h=l,o.headers["Content-Length"]=l.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),d._logInfo(Ra.dumpObj(o)),o[YWe.disableCollectionRequestOption]=!0;var g=+new Date,v=function(y){y.setEncoding("utf-8");var E="";y.on("data",function(x){E+=x}),y.on("end",function(){var x=+new Date,S=x-g;if(d._numConsecutiveFailures=0,d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&(XWe.includes(y.statusCode)?d._statsbeatHasReachedIngestionAtLeastOnce=!0:d._statsbeatFailedToIngest()),d._statsbeat&&(y.statusCode==KWe||y.statusCode==WWe?d._statsbeat.countThrottle(_h.StatsbeatNetworkCategory.Breeze,i,y.statusCode):d._statsbeat.countRequest(_h.StatsbeatNetworkCategory.Breeze,i,S,y.statusCode===200,y.statusCode)),d._enableDiskRetryMode){if(y.statusCode===200)d._resendTimer||(d._resendTimer=setTimeout(function(){d._resendTimer=null,d._sendFirstFileOnDisk()},d._resendInterval),d._resendTimer.unref());else if(d._isRetriable(y.statusCode))try{d._statsbeat&&d._statsbeat.countRetry(_h.StatsbeatNetworkCategory.Breeze,i,y.statusCode);var O=JSON.parse(E),U=[];O.errors&&(O.errors.forEach(function(ve){(ve.statusCode==429||ve.statusCode==500||ve.statusCode==503)&&U.push(e[ve.index])}),U.length>0&&d._storeToDisk(U))}catch{d._storeToDisk(e)}}if(y.statusCode===307||y.statusCode===308)if(d._numConsecutiveRedirects++,d._numConsecutiveRedirects<10){var W=y.headers.location?y.headers.location.toString():null;W&&(d._redirectedHost=W,d.send(e,r))}else{var L={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};d._statsbeat&&d._statsbeat.countException(_h.StatsbeatNetworkCategory.Breeze,i,L),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else d._numConsecutiveRedirects=0,typeof r=="function"&&r(E),d._logInfo(E),typeof d._onSuccess=="function"&&d._onSuccess(E)})},_=Ra.makeRequest(d._config,n,o,v);_.setTimeout(t.HTTP_TIMEOUT,function(){d._requestTimedOut=!0,_.abort()}),_.on("error",function(y){if(d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&d._statsbeatFailedToIngest(),d._numConsecutiveFailures++,d._statsbeat&&d._statsbeat.countException(_h.StatsbeatNetworkCategory.Breeze,i,y),!d._enableDiskRetryMode||d._numConsecutiveFailures>0&&d._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var E="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";d._enableDiskRetryMode&&(E="Ingestion endpoint could not be reached "+d._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),d._logWarn(E,Ra.dumpObj(y))}else{var E="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";d._logInfo(E,Ra.dumpObj(y))}d._onErrorHelper(y),typeof r=="function"&&(y?(d._requestTimedOut&&(y.name="telemetry timeout",y.message="telemetry request timed out"),r(Ra.dumpObj(y))):r("Error sending telemetry")),d._enableDiskRetryMode&&d._storeToDisk(e)}),_.write(h),_.end()}),p.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(Ra.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||$ye.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||$ye.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return EL(this,void 0,void 0,function(){var r,n,i,o,s,a,u;return TL(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,sf.confirmDirExists(this._tempDir)];case 1:return c.sent(),[3,3];case 2:return r=c.sent(),this._logWarn("Failed to create folder to put telemetry: "+Ra.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return c.trys.push([3,5,,6]),[4,$C.FileAccessControl.applyACLRules(this._tempDir)];case 4:return c.sent(),[3,6];case 5:return n=c.sent(),this._logWarn("Failed to apply file access control to folder: "+Ra.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return c.trys.push([6,8,,9]),[4,sf.getShallowDirectorySize(this._tempDir)];case 7:return i=c.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=c.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+Ra.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return c.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=Vv.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,sf.writeFileAsync(a,Ra.stringify(e),{mode:384})];case 10:return c.sent(),[3,12];case 11:return u=c.sent(),this._logWarn("Failed to persist telemetry to disk: "+Ra.dumpObj(u)),this._onErrorHelper(u),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),Bz.existsSync(this._tempDir)||Bz.mkdirSync(this._tempDir),$C.FileAccessControl.applyACLRulesSync(this._tempDir);var r=sf.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Vv.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+i),Bz.writeFileSync(i,e,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+Ra.dumpObj(o)),this._onErrorHelper(o)}},t.prototype._sendFirstFileOnDisk=function(){return EL(this,void 0,void 0,function(){var e,r,n,i,o,s;return TL(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,sf.readdirAsync(this._tempDir)];case 1:return e=a.sent(),e=e.filter(function(u){return Vv.basename(u).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=Vv.join(this._tempDir,r),[4,sf.readFileAsync(n)]):[3,5];case 2:return i=a.sent(),[4,sf.unlinkAsync(n)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return EL(this,void 0,void 0,function(){var e,r,n,i,o,s,a=this;return TL(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),[4,sf.readdirAsync(this._tempDir)];case 1:if(e=u.sent(),e=e.filter(function(c){return Vv.basename(c).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,u.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),i=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,i?(o=Vv.join(this._tempDir,e[r]),[4,sf.unlinkAsync(o).catch(function(c){a._onErrorHelper(c)})]):[3,4]):[3,5];case 3:u.sent(),u.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return s=u.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=60*60*1e3,t.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t}();Wye.exports=QWe});var Xye=P(SL=>{"use strict";Object.defineProperty(SL,"__esModule",{value:!0});SL.AzureVirtualMachine=void 0;var Kye=In(),JWe=Wo(),ZWe=Fx(),eKe="http://169.254.169.254/metadata/instance/compute",tKe="api-version=2017-12-01",rKe="format=json",nKe="UNREACH",iKe=function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,i=this,o={},s=eKe+"?"+tKe+"&"+rKe,a=(n={method:"GET"},n[ZWe.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),u=JWe.makeRequest(e,s,a,function(c){if(c.statusCode===200){o.isVM=!0;var l="";c.on("data",function(d){l+=d}),c.on("end",function(){try{var d=JSON.parse(l);o.id=d.vmId||"",o.subscriptionId=d.subscriptionId||"",o.osType=d.osType||""}catch(p){Kye.info(t.TAG,p)}r(o)})}else r(o)},!1,!1);u&&(setTimeout(function(){i._requestTimedOut=!0,u.abort()},t.HTTP_TIMEOUT),u.on("error",function(c){i._requestTimedOut&&c&&(c.name="telemetry timeout",c.message="telemetry request timed out"),c&&c.message&&c.message.indexOf(nKe)>-1?o.isVM=!1:Kye.info(t.TAG,c),r(o)}),u.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t}();SL.AzureVirtualMachine=iKe});var Qye=P(IL=>{"use strict";Object.defineProperty(IL,"__esModule",{value:!0});IL.NetworkStatsbeat=void 0;var oKe=function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t}();IL.NetworkStatsbeat=oKe});var rbe=P((zv,tbe)=>{"use strict";var pd=zv&&zv.__assign||function(){return pd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pd.apply(this,arguments)},Gz=zv&&zv.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Hz=zv&&zv.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},sKe=require("os"),aKe=Uz(),Jye=In(),cKe=qz(),Rn=Wn(),uKe=Cs(),lKe=Xye(),dKe=uV(),Zye=Px(),pKe=Qye(),ebe=Wo(),fKe="node",mKe=function(){function t(e,r){this._attach=Rn.StatsbeatAttach.sdk,this._feature=Rn.StatsbeatFeature.NONE,this._instrumentation=Rn.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new Zye;var n=this._getConnectionString(e);this._statsbeatConfig=new dKe(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new cKe(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=Rn.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(e,r);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=n,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(u){return o===u.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.exceptionCount.find(function(s){return n.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.throttleCount.find(function(s){return n===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(e,r),o=i.retryCount.find(function(s){return n===s.statusCode});o?o.count++:i.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return Gz(this,void 0,void 0,function(){var e,r;return Hz(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),Jye.info(t.TAG,"Failed to send Statsbeat metrics: "+ebe.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return Gz(this,void 0,void 0,function(){var e,r,n,i,o;return Hz(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:Rn.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=Rn.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:Rn.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:Rn.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=Rn.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:Rn.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:Rn.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),Jye.info(t.TAG,"Failed to send Statsbeat metrics: "+ebe.dumpObj(o)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),i=0;i<this._networkStatsbeatCollection.length;i++)if(e===this._networkStatsbeatCollection[i].endpoint&&n===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new pKe.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(o),o},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var i=n.totalRequestCount-n.lastRequestCount||0,o=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:Rn.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=n.exec(e);i!=null&&i.length>1&&(r=i[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(a){o=i._networkStatsbeatCollection[a];var u=Object.assign({endpoint:o.endpoint,host:o.host},e);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:Rn.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:u}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(c){u=Object.assign(pd(pd({},u),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:Rn.StatsbeatCounter.REQUEST_FAILURE,value:c.count,properties:u})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(c){u=Object.assign(pd(pd({},u),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:Rn.StatsbeatCounter.RETRY_COUNT,value:c.count,properties:u})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(c){u=Object.assign(pd(pd({},u),{statusCode:c.statusCode})),r._statbeatMetrics.push({name:Rn.StatsbeatCounter.THROTTLE_COUNT,value:c.count,properties:u})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(c){u=Object.assign(pd(pd({},u),{exceptionType:c.exceptionType})),r._statbeatMetrics.push({name:Rn.StatsbeatCounter.EXCEPTION_COUNT,value:c.count,properties:u})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)n(s)},t.prototype._sendStatsbeats=function(){return Gz(this,void 0,void 0,function(){var e,r,n,i;return Hz(this,function(o){switch(o.label){case 0:for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},i=aKe.createEnvelope(n,uKe.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=Rn.StatsbeatTelemetryName,e.push(i);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:return o.sent(),[2]}})})},t.prototype._getCustomProperties=function(){this._language=fKe,this._cikey=this._config.instrumentationKey,this._sdkVersion=Zye.sdkVersion,this._os=sKe.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var i=!1;e._resourceProvider=Rn.StatsbeatResourceProvider.unknown,e._resourceIdentifier=Rn.StatsbeatResourceProvider.unknown,process.env.AKS_ARM_NAMESPACE_ID?(e._resourceProvider=Rn.StatsbeatResourceProvider.aks,e._resourceIdentifier=process.env.AKS_ARM_NAMESPACE_ID):process.env.WEBSITE_SITE_NAME?(e._resourceProvider=Rn.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=Rn.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(i=!0,lKe.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(o){e._isVM=o.isVM,e._isVM&&(e._resourceProvider=Rn.StatsbeatResourceProvider.vm,e._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(e._os=o.osType)),r()})):e._resourceProvider=Rn.StatsbeatResourceProvider.unknown),i||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<n.length;i++)if(r.indexOf(n[i])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.TAG="Statsbeat",t}();tbe.exports=mKe});var obe=P((jkt,ibe)=>{"use strict";var hKe=require("url"),gKe=uV(),vKe=kye(),_Ke=Px(),af=Cs(),yKe=Oye(),jz=Hye(),nbe=rh(),bKe=rbe(),xKe=qz(),Vz=Wo(),CL=In(),EKe=Uz(),TKe=function(){function t(e){this._telemetryProcessors=[];var r=new gKe(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new _Ke,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new bKe(this.config,this.context),this._statsbeat.enable(!0));var n=new xKe(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new yKe(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,af.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,af.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,af.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,af.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!Vz.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,af.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,af.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,af.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new hKe.URL(e.data).host}catch(r){e.target=null,CL.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,af.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&af.telemetryTypeToBaseType(r)){var n=EKe.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&jz.samplingTelemetryProcessor(n,{correlationContext:nbe.CorrelationContextManager.getCurrentContext()}),jz.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(jz.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else CL.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(CL.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new vKe(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=nbe.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,CL.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,e)}return n&&(e&&e.tags&&(e.tags=Vz.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=Vz.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t}();ibe.exports=TKe});var cbe=P((zz,abe)=>{"use strict";var SKe=zz&&zz.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IKe=obe(),sbe=rV(),CKe=Fx(),wL=In(),wKe=function(t){SKe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?sbe.trackRequestSync(this,r):wL.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&wL.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?sbe.trackRequest(this,r):wL.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?CKe.trackRequest(this,r):wL.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(IKe);abe.exports=wKe});var lbe=P(ube=>{"use strict";Object.defineProperty(ube,"__esModule",{value:!0})});var hbe=P(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.dispose=ee.Configuration=ee.wrapWithCorrelationContext=ee.startOperation=ee.getCorrelationContext=ee.start=ee.setup=ee.liveMetricsClient=ee.defaultClient=ee.DistributedTracingModes=void 0;var Yz=rh(),RKe=jge(),AKe=zge(),$z=v4(),PKe=Hj(),NKe=Zge(),DKe=d0e(),kKe=Fx(),LKe=rV(),dbe=Sv(),KC=In(),pbe=V0e(),Wz=z0e(),OKe=W0e();ee.TelemetryClient=cbe();ee.Contracts=Cs();ee.azureFunctionsTypes=lbe();var fbe;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(fbe=ee.DistributedTracingModes||(ee.DistributedTracingModes={}));var XC,QC,JC,ZC,e2,s1,a1,Yv,t2,r2,uc=!1,RL;function MKe(t){return ee.defaultClient?KC.info("The default client is already setup"):(ee.defaultClient=new ee.TelemetryClient(t),XC=new RKe(ee.defaultClient),QC=new AKe(ee.defaultClient),JC=new $z(ee.defaultClient),ZC=new PKe(ee.defaultClient),e2=new NKe(ee.defaultClient),s1=new DKe(ee.defaultClient),Yv=new LKe(ee.defaultClient),t2=new kKe(ee.defaultClient),a1||(a1=new Wz.AutoCollectNativePerformance(ee.defaultClient)),r2=new OKe.AzureFunctionsHook(ee.defaultClient)),Kz}ee.setup=MKe;function FKe(){ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectExternalLoggers==null&&(ee.defaultClient.config.enableAutoCollectExternalLoggers=!0),ee.defaultClient.config.enableAutoCollectConsole==null&&(ee.defaultClient.config.enableAutoCollectConsole=!1),ee.defaultClient.config.enableAutoCollectExceptions==null&&(ee.defaultClient.config.enableAutoCollectExceptions=!0),ee.defaultClient.config.enableAutoCollectPerformance==null&&(ee.defaultClient.config.enableAutoCollectPerformance=!0),ee.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&(ee.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),ee.defaultClient.config.enableAutoCollectHeartbeat==null&&(ee.defaultClient.config.enableAutoCollectHeartbeat=!0),ee.defaultClient.config.enableAutoCollectRequests==null&&(ee.defaultClient.config.enableAutoCollectRequests=!0),ee.defaultClient.config.enableAutoCollectDependencies==null&&(ee.defaultClient.config.enableAutoCollectDependencies=!0),ee.defaultClient.config.enableUseDiskRetryCaching==null&&(ee.defaultClient.config.enableUseDiskRetryCaching=!0),ee.defaultClient.config.enableAutoDependencyCorrelation==null&&(ee.defaultClient.config.enableAutoDependencyCorrelation=!0),ee.defaultClient.config.enableSendLiveMetrics==null&&(ee.defaultClient.config.enableSendLiveMetrics=!1),ee.defaultClient.config.enableAutoCollectExtendedMetrics==null&&(ee.defaultClient.config.enableAutoCollectExtendedMetrics=!0),ee.defaultClient.config.enableWebInstrumentation==null&&(ee.defaultClient.config.enableWebInstrumentation=!1),ee.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&(ee.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function mbe(){if(ee.defaultClient){uc=!0,FKe(),XC.enable(ee.defaultClient.config.enableAutoCollectExternalLoggers,ee.defaultClient.config.enableAutoCollectConsole),QC.enable(ee.defaultClient.config.enableAutoCollectExceptions),JC.enable(ee.defaultClient.config.enableAutoCollectPerformance),ZC.enable(ee.defaultClient.config.enableAutoCollectPreAggregatedMetrics),e2.enable(ee.defaultClient.config.enableAutoCollectHeartbeat),Yv.useAutoCorrelation(ee.defaultClient.config.enableAutoDependencyCorrelation,ee.defaultClient.config.enableUseAsyncHooks),Yv.enable(ee.defaultClient.config.enableAutoCollectRequests),t2.enable(ee.defaultClient.config.enableAutoCollectDependencies),s1.enable(ee.defaultClient.config.enableWebInstrumentation,ee.defaultClient.config.webInstrumentationConnectionString),ee.defaultClient.config.enableSendLiveMetrics&&(ee.liveMetricsClient||(ee.liveMetricsClient=new pbe(ee.defaultClient.config,ee.defaultClient.context,ee.defaultClient.getAuthorizationHandler),RL=new $z(ee.liveMetricsClient,1e3,!0),ee.liveMetricsClient.addCollector(RL),ee.defaultClient.quickPulseClient=ee.liveMetricsClient),ee.liveMetricsClient.enable(ee.defaultClient.config.enableSendLiveMetrics)),r2.enable(ee.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=Wz.AutoCollectNativePerformance.parseEnabled(ee.defaultClient.config.enableAutoCollectExtendedMetrics,ee.defaultClient.config);a1.enable(ee.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),ee.defaultClient&&ee.defaultClient.channel&&ee.defaultClient.channel.setUseDiskRetryCaching(ee.defaultClient.config.enableUseDiskRetryCaching,ee.defaultClient.config.enableResendInterval,ee.defaultClient.config.enableMaxBytesOnDisk)}else KC.warn("Start cannot be called before setup");return Kz}ee.start=mbe;function UKe(){return Yz.CorrelationContextManager.getCurrentContext()}ee.getCorrelationContext=UKe;function BKe(t,e){return Yz.CorrelationContextManager.startOperation(t,e)}ee.startOperation=BKe;function qKe(t,e){return Yz.CorrelationContextManager.wrapCallback(t,e)}ee.wrapWithCorrelationContext=qKe;var Kz=function(){function t(){}return t.setDistributedTracingMode=function(e){return dbe.w3cEnabled=e===fbe.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectExternalLoggers=e,ee.defaultClient.config.enableAutoCollectConsole=r,uc&&XC.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectExceptions=e,uc&&QC.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),ee.defaultClient){ee.defaultClient.config.enableAutoCollectPerformance=e;var n=Wz.AutoCollectNativePerformance.parseEnabled(r,ee.defaultClient.config);ee.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,uc&&(JC.enable(e),a1.enable(ee.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,uc&&ZC.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectHeartbeat=e,uc&&e2.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return ee.defaultClient&&(ee.defaultClient.config.enableWebInstrumentation=e,ee.defaultClient.config.webInstrumentationConnectionString=r,uc&&s1.enable(ee.defaultClient.config.enableAutoWebSnippetInjection,ee.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return ee.defaultClient&&(ee.defaultClient.config.enableWebInstrumentation=e,ee.defaultClient.config.webInstrumentationConnectionString=r,uc&&s1.enable(ee.defaultClient.config.enableWebInstrumentation,ee.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectRequests=e,uc&&Yv.enable(e)),t},t.setAutoCollectDependencies=function(e){return ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectDependencies=e,uc&&t2.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return ee.defaultClient&&(ee.defaultClient.config.enableAutoDependencyCorrelation=e,ee.defaultClient.config.enableUseAsyncHooks=r,uc&&Yv.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return ee.defaultClient&&(ee.defaultClient.config.enableUseDiskRetryCaching=e,ee.defaultClient.config.enableResendInterval=r,ee.defaultClient.config.enableMaxBytesOnDisk=n,ee.defaultClient.channel&&ee.defaultClient.channel.setUseDiskRetryCaching(ee.defaultClient.config.enableUseDiskRetryCaching,ee.defaultClient.config.enableResendInterval,ee.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),KC.enableDebug=e,KC.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return ee.defaultClient&&(ee.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,uc&&r2.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),ee.defaultClient?(!ee.liveMetricsClient&&e?(ee.liveMetricsClient=new pbe(ee.defaultClient.config,ee.defaultClient.context,ee.defaultClient.getAuthorizationHandler),RL=new $z(ee.liveMetricsClient,1e3,!0),ee.liveMetricsClient.addCollector(RL),ee.defaultClient.quickPulseClient=ee.liveMetricsClient):ee.liveMetricsClient&&ee.liveMetricsClient.enable(e),ee.defaultClient.config.enableSendLiveMetrics=e,t):(KC.warn("Live metrics client cannot be setup without the default client"),t)},t.start=mbe,t}();ee.Configuration=Kz;function GKe(){dbe.w3cEnabled=!0,ee.defaultClient=null,uc=!1,XC&&XC.dispose(),QC&&QC.dispose(),JC&&JC.dispose(),ZC&&ZC.dispose(),e2&&e2.dispose(),s1&&s1.dispose(),a1&&a1.dispose(),Yv&&Yv.dispose(),t2&&t2.dispose(),ee.liveMetricsClient&&(ee.liveMetricsClient.enable(!1),ee.liveMetricsClient=void 0),r2&&r2.dispose()}ee.dispose=GKe});var eY=P(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.TargetPopulation=bh.Filters=bh.VSCodeFilterProvider=void 0;var PL=require("vscode"),Zz=class t{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case fd.ApplicationVersion:return t.trimVersionSuffix(PL.version);case fd.Build:return PL.env.appName;case fd.ClientId:return PL.env.machineId;case fd.ExtensionName:return this.extensionName;case fd.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case fd.Language:return PL.env.language;case fd.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(fd);for(let n of r)e.set(n,this.getFilterValue(n));return e}};bh.VSCodeFilterProvider=Zz;var fd;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(fd||(bh.Filters=fd={}));var _be;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(_be||(bh.TargetPopulation=_be={}))});var ybe=P(NL=>{"use strict";Object.defineProperty(NL,"__esModule",{value:!0});NL.BaseFeatureProvider=void 0;var tY=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};NL.BaseFeatureProvider=tY});var bbe=P(DL=>{"use strict";Object.defineProperty(DL,"__esModule",{value:!0});DL.FilteredFeatureProvider=void 0;var VKe=ybe(),rY=class extends VKe.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};DL.FilteredFeatureProvider=rY});var xbe=P(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.TasApiFeatureProvider=xh.TASAPI_FETCHERROR_EVENTNAME=void 0;var zKe=bbe();xh.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var nY="ErrorType",iY=class extends zKe.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let u=e.get(a);r[a]=u}let n;try{n=await this.httpClient.get({headers:r})}catch(a){let u=a,c=new Map;u.responseReceived&&!u.responseOk?c.set(nY,"ServerError"):u.responseReceived===!1?c.set(nY,"NoResponse"):c.set(nY,"GenericError"),this.telemetry.postEvent(xh.TASAPI_FETCHERROR_EVENTNAME,c)}if(!n)throw Error(xh.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let u of Object.keys(a.Parameters)){let c=u+(a.Parameters[u]?"":"cf");s.includes(c)||s.push(c)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};xh.TasApiFeatureProvider=iY});var Ebe=P(u1=>{"use strict";Object.defineProperty(u1,"__esModule",{value:!0});u1.HttpClient=u1.FetchError=void 0;var c1=class extends Error{constructor(e,r,n){super(e),this.responseReceived=r,this.responseOk=n}};u1.FetchError=c1;var oY=class{constructor(e){this.endpoint=e}async get(e){let r=await fetch(this.endpoint,{method:"GET",headers:e?.headers});if(!r)throw new c1("No response received",!1);if(!r.ok)throw new c1("Response not ok",!0,!1);let n=await r.json();if(!n)throw new c1("No data received",!1);return{data:n}}};u1.HttpClient=oY});var Tbe=P(kL=>{"use strict";Object.defineProperty(kL,"__esModule",{value:!0});kL.MemoryKeyValueStorage=void 0;var sY=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};kL.MemoryKeyValueStorage=sY});var Sbe=P(LL=>{"use strict";Object.defineProperty(LL,"__esModule",{value:!0});LL.ExperimentationServiceBase=void 0;var YKe=Tbe(),aY=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,r,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new YKe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async n=>await n.getFeatures()));let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`);let n=this.features.configs.find(i=>i.Id===e);return n?.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};LL.ExperimentationServiceBase=aY});var Ibe=P(OL=>{"use strict";Object.defineProperty(OL,"__esModule",{value:!0});OL.PollingService=void 0;var cY=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};OL.PollingService=cY});var Cbe=P(ML=>{"use strict";Object.defineProperty(ML,"__esModule",{value:!0});ML.ExperimentationServiceAutoPolling=void 0;var $Ke=Sbe(),WKe=Ibe(),uY=class extends $Ke.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a){if(super(e,i,o,s,a),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new WKe.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};ML.ExperimentationServiceAutoPolling=uY});var wbe=P(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});UL.ExperimentationService=void 0;var KKe=xbe(),XKe=Ebe(),QKe=Cbe(),FL=class extends QKe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new KKe.TasApiFeatureProvider(new XKe.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};UL.ExperimentationService=FL;FL.REFRESH_RATE_IN_MINUTES=30});var Rbe=P(BL=>{"use strict";Object.defineProperty(BL,"__esModule",{value:!0});BL.ExperimentationService=void 0;var JKe=wbe();Object.defineProperty(BL,"ExperimentationService",{enumerable:!0,get:function(){return JKe.ExperimentationService}})});var Abe=P(qL=>{"use strict";Object.defineProperty(qL,"__esModule",{value:!0});qL.MementoKeyValueStorage=void 0;var lY=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};qL.MementoKeyValueStorage=lY});var Pbe=P(pY=>{"use strict";Object.defineProperty(pY,"__esModule",{value:!0});var dY=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};pY.default=dY});var Dbe=P(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});l1.getExperimentationServiceAsync=l1.getExperimentationService=void 0;var ZKe=eY(),eXe=Rbe(),fY=require("vscode"),tXe=Abe(),rXe=Pbe(),nXe="https://default.exp-tas.com/vscode/ab",iXe="query-expfeature",oXe="abexp.assignmentcontext",sXe="VSCode.ABExp.FeatureData",aXe=1e3*60*30;function Nbe(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=fY.workspace.getConfiguration("telemetry");if(!(fY.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):fY.env.isTelemetryEnabled))return new rXe.default;let c=[new ZKe.VSCodeFilterProvider(t,e,r),...o],l=new tXe.MementoKeyValueStorage(i);return new eXe.ExperimentationService({filterProviders:c,telemetry:n,storageKey:sXe,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:oXe,telemetryEventName:iXe,endpoint:nXe,refetchInterval:aXe})}l1.getExperimentationService=Nbe;async function cXe(t,e,r,n,i,...o){let s=Nbe(t,e,r,n,i,...o);return await s.initializePromise,s}l1.getExperimentationServiceAsync=cXe});var Lbe=P(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.TargetPopulation=Eh.getExperimentationServiceAsync=Eh.getExperimentationService=void 0;var kbe=Dbe();Object.defineProperty(Eh,"getExperimentationService",{enumerable:!0,get:function(){return kbe.getExperimentationService}});Object.defineProperty(Eh,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return kbe.getExperimentationServiceAsync}});var uXe=eY();Object.defineProperty(Eh,"TargetPopulation",{enumerable:!0,get:function(){return uXe.TargetPopulation}})});var Mbe=P(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0});jL.BaseTelemetryReporter=void 0;var hY=class{constructor(e,r,n){this.telemetrySender=e,this.vscodeAPI=r,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryEvent(e,r,n){this.internalSendTelemetryEvent(e,r,n,!1)}sendRawTelemetryEvent(e,r,n){let i={...r};for(let o of Object.keys(i??{})){let s=i[o];typeof o=="string"&&s!==void 0&&(i[o]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,i,n)}sendDangerousTelemetryEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,r,n,!0)}internalSendTelemetryErrorEvent(e,r,n,i){i?this.telemetrySender.sendEventData(e,{properties:r,measurements:n}):this.telemetryLogger.logError(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this.internalSendTelemetryErrorEvent(e,r,n,!1)}sendDangerousTelemetryErrorEvent(e,r,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,r,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};jL.BaseTelemetryReporter=hY});var Fbe=P(VL=>{"use strict";Object.defineProperty(VL,"__esModule",{value:!0});VL.BaseTelemetrySender=void 0;var cf;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(cf||(cf={}));var gY=class{constructor(e,r){this._instantiationStatus=cf.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=r,this._key=e}sendEventData(e,r){if(!this._telemetryClient){this._instantiationStatus!==cf.INSTANTIATED&&this._eventQueue.push({eventName:e,data:r});return}this._telemetryClient.logEvent(e,r)}sendErrorData(e,r){if(!this._telemetryClient){this._instantiationStatus!==cf.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:r});return}let n={stack:e.stack,message:e.message,name:e.name};if(r){let i=r.properties||r;r.properties={...i,...n}}else r={properties:n};this._telemetryClient.logEvent("unhandlederror",r)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:r})=>this.sendEventData(e,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:r})=>this.sendErrorData(e,r)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===cf.NOT_INSTANTIATED&&(this._instantiationStatus=cf.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=cf.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=cf.INSTANTIATED}))}};VL.BaseTelemetrySender=gY});var _Y=P(zL=>{"use strict";Object.defineProperty(zL,"__esModule",{value:!0});zL.TelemetryUtil=void 0;var vY=class t{static applyReplacements(e,r){for(let n of Object.keys(e))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?e[n]=i.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.1"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};zL.TelemetryUtil=vY});var $v,ts,Eo,As,Th,i2,yY=T(()=>{$v="function",ts="object",Eo="undefined",As="prototype",Th=Object,i2=Th[As]});var Ps,An,d1,bY,Sh,xY,uf,su,o2,EY,lf,s2,a2,Ube,YL,$L,sl,TY,WL,KL,p1,ci,XL,SY,Ns,IY,CY,lc,Xt=T(()=>{Ps=void 0,An=null,d1="",bY="boolean",Sh="function",xY="number",uf="object",su="prototype",o2="__proto__",EY="string",lf="undefined",s2="constructor",a2="Symbol",Ube="_polyfill",YL="indexOf",$L="lastIndexOf",sl="length",TY="done",WL="value",KL="name",p1="slice",ci=Object,XL=ci[su],SY=String,Ns=SY[su],IY=Math,CY=Array,lc=CY[su]});function c2(t,e){var r=e;try{r=t()}catch{}return r}var wY=T(()=>{});function f1(t){return function(e){return typeof e===t}}function Wv(t){var e="[object "+t+"]";return function(r){return!!(r&&md(r)===e)}}function md(t){return XL.toString.call(t)}function Kv(t,e){return typeof t===e}function De(t){return typeof t===lf||t===lf}function ie(t){return t===An||De(t)}function RY(t){return t===An||!hd(t)}function hd(t){return!!t||t!==Ps}function zt(t){return!t&&ie(t)?!1:!!t&&typeof t===uf}function Ih(t){return!!t&&Ne(t.then)}function Xv(t){return!t||!c2(function(){return t&&0+t},t)}function ns(t){return!(!t||c2(function(){return!(t&&0+t)},!t))}var dXe,AY,Ke,Ne,ae,df,xi,rs,pXe,fXe,mXe,hXe,gXe,io,Zs=T(()=>{Xt();wY();dXe=[EY,xY,bY,lf,"symbol","bigint"];AY=function(t){return t!==uf&&dXe.indexOf(t)!==-1},Ke=f1(EY),Ne=f1(Sh);ae=CY.isArray,df=Wv("Date"),xi=f1(xY),rs=f1(bY),pXe=Wv("RegExp"),fXe=Wv("File"),mXe=Wv("FormData"),hXe=Wv("Blob"),gXe=Wv("ArrayBuffer"),io=Wv("Error")});var dc,QL=T(()=>{Xt();dc=ci.getOwnPropertyDescriptor});function Bn(t,e){return t&&XL.hasOwnProperty.call(t,e)}var JL=T(()=>{Xt()});function Bbe(t,e){return Bn(t,e)||!!dc(t,e)}var Nr,ZL=T(()=>{Xt();QL();JL();Nr=ci.hasOwn||Bbe});function me(t,e,r){if(t&&zt(t)){for(var n in t)if(Nr(t,n)&&e.call(r||t,n,t[n])===-1)break}}var Ch=T(()=>{Zs();ZL()});function PY(t,e,r,n){var i={};return me(t,function(o,s){i[o]=e?s:o,i[s]=r?s:o}),n(i)}var qbe=T(()=>{Ch()});function Zt(t){throw new Error(t)}function Lr(t){throw new TypeError(t)}var wh=T(()=>{});function Gbe(t){var e=[];return me(t,function(r,n){e.push([r,n])}),e}function Hbe(t){var e=[];return me(t,function(r,n){e.push(n)}),e}var jbe=T(()=>{Ch()});function pn(t){return(!zt(t)||t===An)&&Lr("objKeys called on non-object"),ci.keys(t)}function Zn(t){return NY&&me(t,function(e,r){(ae(r)||zt(r))&&NY(r)}),qi(t)}var NY,Vbe,vXe,gd,qi,Qv,m1,_Xe,J4t,h1=T(()=>{Xt();Zs();wh();Ch();jbe();NY=ci.freeze,Vbe=function(t){return t},vXe=function(t){return t[o2]||An},gd=ci.assign;qi=NY||Vbe,Qv=ci.seal||Vbe,m1=ci.getPrototypeOf||vXe,_Xe=ci.entries||Gbe,J4t=ci.values||Hbe});function u2(t){return PY(t,1,0,Zn)}function DY(t){return PY(t,0,0,Zn)}function zbe(t){var e={};return me(t,function(r,n){e[r]=n[1],e[n[0]]=n[1]}),Zn(e)}function e3(t){return zbe(t)}var kY=T(()=>{qbe();Ch();h1()});var t3,LY=T(()=>{kY();t3=DY({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12})});var Ir,g1=T(()=>{Xt();Ir=SY});function MY(){var t;return typeof globalThis!==lf&&(t=globalThis),!t&&typeof self!==lf&&(t=self),!t&&typeof window!==lf&&(t=window),!t&&typeof global!==lf&&(t=global),t}function r3(){if(!OY){var t=MY()||{};OY=t[Ybe]=t[Ybe]||{}}return OY}var Ybe,OY,n3=T(()=>{Xt();Ybe="__tsUtils$gblCfg"});function de(t,e){var r=d1;if(io(t))r="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'";else try{r=JSON.stringify(t,An,e?xi(e)?e:4:Ps)}catch(n){r=" - "+de(n,e)}return md(t)+": "+r}var Rh=T(()=>{Xt();Zs()});function Wbe(t){return function(e){return e[t]}}var FY,$be,i3,Ds,au,ea=T(()=>{Rh();wh();g1();Xt();FY=lc[p1],$be=function(t,e){Lr("'"+Ir(t)+"' not defined for "+de(e))},i3=function(t){return function(e){return e[t].apply(e,FY.call(arguments,1))}},Ds=function(t,e){var r=e&&e[t];return function(n){var i=n&&n[t]||r;if(i)return i.apply(n,FY.call(arguments,1));$be(t,n)}},au=function(t,e,r){var n=e&&e[t];return function(i){var o=i&&i[t]||n;if(o||r){var s=arguments;return(o||r).apply(i,o?FY.call(s,1):s)}$be(t,i)}}});var yLt,Kbe,Xbe=T(()=>{Xt();yLt=IY.min,Kbe=IY.max});var UY,Qbe=T(()=>{Xt();ea();UY=Ds(p1,Ns)});function Jbe(t,e,r){return ie(t)&&Lr("'polyStrSubstr called with invalid "+de(t)),r<0?d1:(e=e||0,e<0&&(e=Kbe(e+t[sl],0)),De(r)?UY(t,e):UY(t,e,e+r))}function pc(t,e){return fn(t,0,e)}var fn,is,o3=T(()=>{Zs();Rh();wh();Xt();ea();Xbe();Qbe();fn=Ds("substring",Ns),is=au("substr",Ns,Jbe)});function yXe(t,e,r){Ke(t)||Lr("'"+de(t)+"' is not a string");var n=Ke(e)?e:Ir(e),i=n[sl],o=r>0?r:0;return fn(t,o,o+i)===n}var vd,Zbe=T(()=>{Zs();Rh();wh();Xt();ea();g1();o3();vd=au("startsWith",Ns,yXe)});function bXe(){if(!BY){var t=r3();BY=t.gblSym=t.gblSym||{k:{},s:{}}}return BY}function s3(t){var e={description:Ir(t),toString:function(){return a2+"("+t+")"}};return e[Ube]=!0,e}function rxe(t){var e=bXe();if(!Nr(e.k,t)){var r=s3(t),n=pn(e.s).length;r[exe]=function(){return n+"_"+r.toString()},e.k[t]=r,e.s[r[exe]()]=Ir(t)}return e.k[t]}function nxe(t){var e,r=t3[t];return r&&(e=txe[r]=txe[r]||s3(a2+"."+r)),e}var exe,BY,txe,ixe=T(()=>{LY();Xt();ZL();g1();n3();h1();exe="_urid";txe={}});function oxe(t){var e={};if(e[a3.c]=!0,e[a3.e]=!0,t.l){e.get=function(){return t.l.v};var r=dc(t.l,"v");r&&r.set&&(e.set=function(n){t.l.v=n})}return me(t,function(n,i){e[a3[n]]=De(i)?e[a3[n]]:i}),e}function Jv(t,e,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),mn(t,e,oxe(s))}function Xe(t,e,r){return mn(t,e,oxe(r))}var a3,mn,xXe,v1=T(()=>{Xt();Zs();Ch();QL();a3={e:"enumerable",c:"configurable",v:WL,w:"writable",g:"get",s:"set"};mn=ci.defineProperty,xXe=ci.defineProperties});function fc(t){var e={};return qY&&qY(),e.b=hn.lzy,mn(e,"v",{configurable:!0,get:function(){var r=t();return hn.lzy||(mn(e,"v",{value:r}),e.b&&delete e.b),hn.lzy&&e.b!==hn.lzy&&(e.b=hn.lzy),r}}),e}var hn,qY,Ah=T(()=>{Xt();n3();v1();qY=function(){hn=r3(),qY=An}});function pf(t,e){return fc(function(){return c2(t,e)})}var c3=T(()=>{Ah();wY()});var sxe,_1,y1,u3,l3,d3,GY,mc,Gi,nt,hc,fr,al,gn,Aa,mr,Zv,Ph,HY,l2=T(()=>{Xt();n3();c3();Ah();sxe="window",mc=function(t){return pf(function(){return nt(t)||Ps},Ps)},Gi=function(t){return(!_1||t===!1||hn&&hn.lzy&&!_1.b)&&(_1=pf(MY,An)),_1.v},nt=function(t,e){var r=!_1||e===!1?Gi(e):_1.v;return r&&r[t]?r[t]:t===sxe&&y1?y1.v:An},hc=function(){return!!fr()},fr=function(){return(!u3||hn&&hn.lzy&&!u3.b)&&(u3=mc("document")),u3.v},al=function(){return!!gn()},gn=function(){return(!y1||hn&&hn.lzy&&!y1.b)&&(y1=mc(sxe)),y1.v},Aa=function(){return!!mr()},mr=function(){return(!l3||hn&&hn.lzy&&!l3.b)&&(l3=mc("navigator")),l3.v},Zv=function(){return!!Ph()},Ph=function(){return(!d3||hn&&hn.lzy&&!d3.b)&&(d3=mc("history")),d3.v},HY=function(){return!GY&&(GY=pf(function(){return!!(process&&(process.versions||{}).node)},!1)),GY.v}});function cxe(t){return pf(function(){return ta.v?ta.v[t]:Ps},Ps)}function jY(){return!!p2()}function p2(){var t=!ta||hn&&hn.lzy&&!ta.b;return t&&(ta=mc(a2)),(!p3||t)&&(p3=cxe("for")),(!axe||t)&&(axe=cxe("keyFor")),ta.v}function e_(t,e){var r=t3[t];return(!ta||hn.lzy&&!ta.b)&&p2(),ta.v?ta.v[r||t]:e?Ps:nxe(t)}function Pn(t,e){return(!ta||hn.lzy&&!ta.b)&&p2(),ta.v?ta.v(t):e?An:s3(t)}function os(t){return(!p3||hn.lzy&&!ta.b)&&p2(),(p3.v||rxe)(t)}var ta,p3,axe,d2,f3=T(()=>{Xt();ixe();LY();Zs();Ah();c3();l2();d2=f1("symbol")});function f2(t){return!!t&&Ne(t.next)}function uxe(t){return!RY(t)&&Ne(t[e_(3)])}var VY=T(()=>{f3();Zs()});function lxe(t,e,r){if(t&&(f2(t)||(!m3&&(m3=fc(function(){return e_(3)})),t=t[m3.v]?t[m3.v]():null),f2(t))){var n=void 0,i=void 0;try{for(var o=0;!(i=t.next())[TY]&&e.call(r||t,i[WL],o,t)!==-1;)o++}catch(s){n={e:s},t.throw&&(i=null,t.throw(n))}finally{try{i&&!i[TY]&&t.return&&t.return(i)}finally{if(n)throw n.e}}}}var m3,dxe=T(()=>{Ah();Xt();f3();VY()});var ff,h3=T(()=>{ea();ff=i3("apply")});function ei(t,e){return!De(e)&&t&&(ae(e)?ff(t.push,t,e):f2(e)||uxe(e)?lxe(e,function(r){t.push(r)}):t.push(e)),t}var pxe=T(()=>{Zs();VY();dxe();h3()});function K(t,e,r){if(t)for(var n=t[sl]>>>0,i=0;i<n&&!(i in t&&e.call(r||t,t[i],i,t)===-1);i++);}var g3=T(()=>{Xt()});var Qe,EXe,zY=T(()=>{Xt();ea();Qe=Ds(YL,lc),EXe=Ds($L,lc)});var gc,fxe=T(()=>{Xt();ea();gc=Ds("map",lc)});var oo,m2=T(()=>{Xt();ea();oo=Ds(p1,lc)});var h2,YY=T(()=>{ea();h2=i3("call")});function mxe(t,e,r){return Qe(t,e,r)!==-1}var hxe=T(()=>{zY()});var v3,gxe=T(()=>{Xt();ea();hxe();v3=au("includes",lc,mxe)});var mf,vxe=T(()=>{Xt();ea();mf=Ds("reduce",lc)});function SXe(t){if(!t)return{};var e=typeof t;if(e!==uf&&e!==Sh)throw new TypeError("Prototype must be an Object or function: "+de(t));function r(){}return r[su]=t,new r}var TXe,g2,$Y=T(()=>{Xt();Rh();TXe=ci.create,g2=TXe||SXe});function KY(t,e){var r=ci.setPrototypeOf||function(n,i){!WY&&(WY=fc(function(){var o;return o={},o[o2]=[],o instanceof Array})),WY.v?n[o2]=i:me(i,function(o,s){return n[o]=s})};return r(t,e)}var WY,_xe=T(()=>{Ah();Xt();Ch()});function hf(t,e,r){var n=r||Error,i=n[su][KL],o=Error.captureStackTrace;return IXe(t,function(){var s=this;try{yxe(n,t);var a=ff(n,s,oo(arguments))||s;if(a!==s){var u=m1(s);u!==m1(a)&&KY(a,u)}return o&&o(a,s[s2]),e&&e(a,arguments),a}finally{yxe(n,i)}},n)}var IXe,yxe,bxe,xxe=T(()=>{m2();h3();Xt();$Y();v1();h1();_xe();IXe=function(t,e,r){bxe(e,t),e=KY(e,r);function n(){this.constructor=e,bxe(this,t)}return e[su]=r===An?g2(r):(n[su]=r[su],new n),e},yxe=function(t,e){try{e&&(t[KL]=e)}catch{}},bxe=function(t,e){try{Xe(t,KL,{v:e,c:!0,e:!1})}catch{}}});function Yt(){return(Date.now||Exe)()}function Exe(){return new Date().getTime()}var XY=T(()=>{});function QY(t){return function(r){return ie(r)&&Lr("strTrim called ["+de(r)+"]"),r&&r.replace&&(r=r.replace(t,d1)),r}}var Txe,Sxe,Ixe,Cxe=T(()=>{Zs();Rh();wh();Xt();Txe=QY(/^\s+|(?=\s)\s+$/g),Sxe=QY(/^\s+/g),Ixe=QY(/(?=\s)\s+$/g)});var It,CXe,wXe,wxe=T(()=>{Xt();ea();Cxe();It=au("trim",Ns,Txe),CXe=au("trimStart",Ns,Sxe),wXe=au("trimEnd",Ns,Ixe)});function mt(t){if(!t||typeof t!==uf)return!1;e$||(e$=al()?gn():!0);var e=!1;if(t!==e$){ZY||(JY=Function[su].toString,ZY=h2(JY,ci));try{var r=m1(t);e=!r,e||(Bn(r,s2)&&(r=r[s2]),e=r&&typeof r===Sh&&JY.call(r)===ZY)}catch{}}return e}var JY,ZY,e$,t$=T(()=>{YY();l2();Xt();JL();h1()});function AXe(t,e,r,n){var i;return K(t,function(o){if(o.k===e)return i=o,-1}),i||(i={k:e,v:e},t.push(i),n(i)),i.v}function r$(t,e,r,n){var i=r.handler,o=r.path?n?r.path.concat(n):r.path:[],s={handler:r.handler,src:r.src,path:o},a=typeof e,u=!1,c=!1;e&&a===uf?u=mt(e):c=e===An||AY(a);var l={type:a,isPrim:c,isPlain:u,value:e,result:e,path:o,origin:r.src,copy:function(d,p){return r$(t,d,p?s:r,p)},copyTo:function(d,p){return Axe(t,d,p,s)}};return l.isPrim?i&&h2(i,r,l)?l.result:e:AXe(t,e,o,function(d){Xe(l,"result",{g:function(){return d.v},s:function(m){d.v=m}});for(var p=0,f=i;!h2(f||(p<Rxe.length?Rxe[p++]:RXe),r,l);)f=An})}function Axe(t,e,r,n){if(!ie(r))for(var i in r)e[i]=r$(t,r[i],n,i);return e}function Pxe(t,e,r){var n={handler:r,src:e,path:[]};return Axe([],t,e,n)}function Nxe(t,e){var r={handler:e,src:t};return r$([],t,r)}function PXe(t){var e=t.value;if(ae(e)){var r=t.result=[];return r.length=e.length,t.copyTo(r,e),!0}return!1}function NXe(t){var e=t.value;return df(e)?(t.result=new Date(e.getTime()),!0):!1}function DXe(t){return t.type===Sh}function Dxe(t){var e=t.value;if(e&&t.isPlain){var r=t.result={};return t.copyTo(r,e),!0}return!1}var RXe,Rxe,kxe=T(()=>{g3();YY();Zs();Xt();v1();t$();RXe=function(t){return t.value&&Dxe(t),!0},Rxe=[PXe,Dxe,DXe,NXe]});function kXe(t,e){return K(e,function(r){Pxe(t,r)}),t}function t_(t,e,r,n,i,o,s){return kXe(Nxe(t)||{},oo(arguments))}var Lxe=T(()=>{g3();m2();kxe()});var Nh,Oxe=T(()=>{Xt();ea();Nh=Wbe(sl)});function ks(){return(!_3||!_3.b&&hn&&hn.lzy)&&(_3=mc("performance")),_3.v}function gf(){var t=ks();return t&&t.now?t.now():Yt()}var _3,Mxe=T(()=>{XY();l2();Ah()});function LXe(t,e,r){Ke(t)||Lr("'"+de(t)+"' is not a string");var n=Ke(e)?e:Ir(e),i=n[sl],o=t[sl],s=!De(r)&&r<o?r:o;return fn(t,s-i,s)===n}var vc,Fxe=T(()=>{Zs();Rh();wh();Xt();ea();g1();o3();vc=au("endsWith",Ns,LXe)});var en,OXe,Uxe=T(()=>{Xt();ea();en=Ds(YL,Ns),OXe=Ds($L,Ns)});function qxe(t,e,r){var n,i=!0,o=t?e(An):An,s,a=function(){return i=!1,o&&o[n$]&&o[n$](),s},u=function(){return i=!0,o&&o[y3]&&o[y3](),s},c=function(){return o&&o[i$]?o[i$]():i},l=function(){return o=e(o),i||a(),s},d=function(){o&&r(o),o=An},p=function(f){!f&&o&&d(),f&&!o&&l()};return s=(n={cancel:d,refresh:l},n[i$]=c,n[y3]=u,n[n$]=a,n[Bxe]=!1,n),mn(s,Bxe,{get:function(){return!!o},set:p}),{h:s,dn:function(){o=An}}}var y3,n$,i$,Bxe,Gxe=T(()=>{Xt();v1();y3="ref",n$="un"+y3,i$="hasRef",Bxe="enabled"});function o$(t,e,r,n){var i=ae(r),o=i?r.length:0,s=(o>0?r[0]:i?Ps:r)||setTimeout,a=(o>1?r[1]:Ps)||clearTimeout,u=n[0];n[0]=function(){c.dn(),ff(u,t,oo(arguments))};var c=qxe(e,function(l){if(l){if(l.refresh)return l.refresh(),l;ff(a,t,[l])}return ff(s,t,n)},function(l){ff(a,t,[l])});return c.h}function Nn(t,e){return o$(this,!0,Ps,oo(arguments))}function s$(t,e,r){return o$(this,!0,t,oo(arguments,1))}function v2(t,e){return o$(this,!1,Ps,oo(arguments))}var Hxe=T(()=>{m2();h3();Zs();Xt();Gxe()});var ye=T(()=>{pxe();g3();gxe();zY();fxe();vxe();m2();Zs();xxe();XY();Rh();kY();l2();Lxe();Ah();Oxe();Mxe();c3();wh();$Y();v1();Ch();QL();ZL();JL();t$();h1();Fxe();Uxe();Zbe();o3();g1();wxe();f3();Hxe()});function Ls(t,e){typeof e!==$v&&e!==null&&Lr("Class extends value "+String(e)+" is not a constructor or null"),a$(t,e);function r(){this.constructor=t}t[As]=e===null?g2(e):(r[As]=e[As],new r)}function r_(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var x6t,E6t,jxe,FXe,cu,a$,Vxe=T(()=>{ye();yY();x6t=(Gi()||{}).Symbol,E6t=(Gi()||{}).Reflect,jxe="hasOwnProperty",FXe=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)i2[jxe].call(e,i)&&(t[i]=e[i])}return t},cu=gd||FXe,a$=function(t,e){return a$=Th.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[jxe](i)&&(r[i]=n[i])},a$(t,e)}});var zxe=T(()=>{});var Ei=T(()=>{yY();Vxe();zxe();ye()});function Jxe(t){return t&&(t===m$[Dh]||t===Array[Dh])}function h$(t){return Jxe(t)||t===Function[Dh]}function n_(t){var e;if(t){if(y2)return y2(t);var r=t[Qxe]||t[Dh]||(t[T3]?t[T3][Dh]:null);e=t[x3]||r,Bn(t,x3)||(delete t[c$],e=t[x3]=t[c$]||t[x3],t[c$]=r)}return e}function C3(t,e){var r=[];if(Wxe)r=Wxe(t);else for(var n in t)typeof n=="string"&&Bn(t,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)e(r[i])}function g$(t,e,r){return e!==T3&&typeof t[e]===S3&&(r||Bn(t,e))}function w3(t){Lr("DynamicProto: "+t)}function BXe(t){var e={};return C3(t,function(r){!e[r]&&g$(t,r,!1)&&(e[r]=t[r])}),e}function v$(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function qXe(t,e,r,n){function i(u,c,l){var d=c[l];if(d[l$]&&n){var p=u[I3]||{};p[_2]!==!1&&(d=(p[c[b1]]||{})[l]||d)}return function(){return d.apply(u,arguments)}}var o={};C3(r,function(u){o[u]=i(e,r,u)});for(var s=n_(t),a=[];s&&!h$(s)&&!v$(a,s);)C3(s,function(u){!o[u]&&g$(s,u,!y2)&&(o[u]=i(e,s,u))}),a.push(s),s=n_(s);return o}function GXe(t,e,r,n){var i=null;if(t&&Bn(r,b1)){var o=t[I3]||{};if(i=(o[r[b1]]||{})[e],i||w3("Missing ["+e+"] "+S3),!i[d$]&&o[_2]!==!1){for(var s=!Bn(t,e),a=n_(t),u=[];s&&a&&!h$(a)&&!v$(u,a);){var c=a[e];if(c){s=c===n;break}u.push(a),a=n_(a)}try{s&&(t[e]=i),i[d$]=1}catch{o[_2]=!1}}}return i}function HXe(t,e,r){var n=e[t];return n===r&&(n=n_(e)[t]),typeof n!==S3&&w3("["+t+"] is not a "+S3),n}function jXe(t,e,r,n,i){function o(u,c){var l=function(){var d=GXe(this,c,u,l)||HXe(c,u,l);return d.apply(this,arguments)};return l[l$]=1,l}if(!Jxe(t)){var s=r[I3]=r[I3]||{},a=s[e]=s[e]||{};s[_2]!==!1&&(s[_2]=!!i),C3(r,function(u){g$(r,u,!1)&&r[u]!==n[u]&&(a[u]=r[u],delete r[u],(!Bn(t,u)||t[u]&&!t[u][l$])&&(t[u]=o(t,u)))})}}function VXe(t,e){if(y2){for(var r=[],n=n_(e);n&&!h$(n)&&!v$(r,n);){if(n===t)return!0;r.push(n),n=n_(n)}return!1}return!0}function u$(t,e){return Bn(t,Dh)?t.name||e||Yxe:((t||{})[T3]||{}).name||e||Yxe}function ot(t,e,r,n){Bn(t,Dh)||w3("theClass is an invalid class definition.");var i=t[Dh];VXe(i,e)||w3("["+u$(t)+"] not in hierarchy of ["+u$(e)+"]");var o=null;Bn(i,b1)?o=i[b1]:(o=UXe+u$(t,"_")+"$"+f$.n,f$.n++,i[b1]=o);var s=ot[Xxe],a=!!s[E3];a&&n&&n[E3]!==void 0&&(a=!!n[E3]);var u=BXe(e),c=qXe(i,e,u,a);r(e,c);var l=!!y2&&!!s[p$];l&&n&&(l=!!n[p$]),jXe(i,o,e,u,l!==!1)}var b3,T3,Dh,S3,I3,l$,b1,UXe,d$,_2,Xxe,Yxe,Qxe,x3,$xe,c$,E3,p$,m$,y2,Wxe,Kxe,f$,tn=T(()=>{ye();T3="constructor",Dh="prototype",S3="function",I3="_dynInstFuncs",l$="_isDynProxy",b1="_dynClass",UXe="_dynCls$",d$="_dynInstChk",_2=d$,Xxe="_dfOpts",Yxe="_unknown_",Qxe="__proto__",x3="_dyn"+Qxe,$xe="__dynProto$Gbl",c$="_dynInstProto",E3="useBaseInst",p$="setInstFuncs",m$=Object,y2=m$.getPrototypeOf,Wxe=m$.getOwnPropertyNames,Kxe=Gi(),f$=Kxe[$xe]||(Kxe[$xe]={o:(b3={},b3[p$]=!0,b3[E3]=!0,b3),n:1e3});ot[Xxe]=f$.o});var _$,Zxe=T(()=>{"use strict";_$=100});var _c,R3=T(()=>{ye();_c=u2});var cl,e1e=T(()=>{R3();cl=_c({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})});var kh,i_,at,o_,s_,x1,vf,ul,uu,Wr,Lh,Qt,_d,A3,a_,c_,yd,Pa,Oh,y$,Os,Mh,so,P3,E1,T1,S1,Fh,b$,Na,b2,u_,N3,bd,yc,I1,Uh,ll,Da,C1,l_,bc,Bh,x2,xd,D3,_f,x$,ka,E2,T2,d_,dl,k3,w1,R1,qh,Dn=T(()=>{kh="toLowerCase",i_="blkVal",at="length",o_="rdOnly",s_="notify",x1="warnToConsole",vf="throwInternal",ul="setDf",uu="watch",Wr="logger",Lh="apply",Qt="push",_d="splice",A3="hdlr",a_="cancel",c_="initialize",yd="identifier",Pa="isInitialized",Oh="getPlugin",y$="pollInternalLogs",Os="name",Mh="time",so="processNext",P3="getProcessTelContext",E1="getNotifyMgr",T1="addNotificationListener",S1="removeNotificationListener",Fh="enabled",b$="stopPollingInternalLogs",Na="unload",b2="onComplete",u_="version",N3="loggingLevelConsole",bd="createNew",yc="teardown",I1="messageId",Uh="message",ll="isAsync",Da="diagLog",C1="_doTeardown",l_="update",bc="getNext",Bh="setNextPlugin",x2="userAgent",xd="split",D3="nodeType",_f="replace",x$="logInternalMessage",ka="type",E2="handler",T2="isChildEvt",d_="getCtx",dl="setCtx",k3="complete",w1="traceId",R1="spanId",qh="traceFlags"});function t1e(t,e){E$||(E$=hf("AggregationError",function(n,i){i[at]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw K(e,function(n,i){r+=`
`.concat(i," > ").concat(de(n))}),new E$(r,e||[])}var E$,r1e=T(()=>{ye();Dn()});function lu(t,e){return L3(t,function(r){e&&e({value:r,rejected:!1})},function(r){e&&e({rejected:!0,reason:r})})}function L3(t,e,r,n){var i=t;return Ih(t)?(e||r)&&(i=t.then(e,r)):e&&e(t),n&&(i=n1e(i,n)),i}function n1e(t,e){var r=t;return e&&(Ih(t)?t.finally?r=t.finally(e):r=t.then(function(n){return e(),n},function(n){throw e(),n}):e()),r}var T$=T(()=>{ye()});function i1e(t,e,r,n){S$=S$||{toString:function(){return"[[PromiseState]]"}},I$=I$||{toString:function(){return"[[PromiseResult]]"}},C$=C$||{toString:function(){return"[[PromiseIsHandled]]"}},mn(t,S$,{get:e}),mn(t,I$,{get:r}),mn(t,C$,{get:n})}var S$,I$,C$,w$,o1e=T(()=>{ye();w$=!1});var O3,R$=T(()=>{O3=["pending","resolving","resolved","rejected"]});function a1e(t,e,r,n){var i=fr();!M3&&(M3=pf(function(){var u;return i&&i.createEvent&&(u=i.createEvent("Event")),!!u&&u.initEvent},null));var o=M3.v?i.createEvent("Event"):n?new Event(e):{};if(r&&r(o),M3.v&&o.initEvent(e,!1,!0),o&&t[s1e])t[s1e](o);else{var s=t["on"+e];if(s)s(o);else{var a=nt("console");a&&(a.error||a.log)(e,de(o))}}}var s1e,M3,c1e=T(()=>{ye();s1e="dispatchEvent"});var A1,A$=T(()=>{A1="Promise"});function u1e(t){return Ne(t)?t.toString():de(t)}function d1e(t,e,r){var n=oo(arguments,3),i=0,o=!1,s,a=[],u=YXe++,c=S2.length>0?S2[S2.length-1]:void 0,l=!1,d=null,p;!P$&&(P$=mc(A1+"RejectionEvent"));var f=function(x,S){try{S2.push(u),l=!0,d&&d.cancel(),d=null;var O=t(function(U,W){a.push(function(){try{var L=i===2?x:S,ve=De(L)?s:Ne(L)?L(s):L;Ih(ve)?ve.then(U,W):L?U(ve):i===3?W(ve):U(ve)}catch(J){W(J)}}),o&&v()},n);return O}finally{S2.pop()}},m=function(x){return f(void 0,x)},h=function(x){var S=x,O=x;return Ne(x)&&(S=function(U){return x&&x(),U},O=function(U){throw x&&x(),U}),f(S,O)},g=function(){return O3[i]},v=function(){if(a.length>0){var x=a.slice();a=[],l=!0,e(x),d&&d.cancel(),d=null}},_=function(x,S){return function(O){if(i===S){if(x===2&&Ih(O)){i=1,O.then(_(2,1),_(3,1));return}i=x,o=!0,s=O,v(),!l&&x===3&&!d&&(d=Nn(y,$Xe))}}},y=function(){if(!l)if(HY())process.emit(l1e,s,p);else{var x=gn()||Gi();a1e(x,zXe,function(S){return Xe(S,"promise",{g:function(){return p}}),S.reason=s,S},!!P$.v)}};p={then:f,catch:m,finally:h},mn(p,"state",{get:g}),w$&&i1e(p,g,function(){return md(s)},function(){return l}),jY()&&(p[e_(11)]="IPromise");var E=function(){return"IPromise"+(w$?"["+u+(De(c)?"":":"+c)+"]":"")+" "+g()+(o?" - "+u1e(s):"")};return p.toString=E,function(){Ne(r)||Lr(A1+": executor is not a function - "+u1e(r));var S=_(3,0);try{r.call(p,_(2,0),S)}catch(O){S(O)}}(),p}function P1(t){return function(e){var r=oo(arguments,1);return t(function(n,i){try{var o=[],s=1;K(e,function(a,u){a&&(s++,L3(a,function(c){o[u]=c,--s===0&&n(o)},i))}),s--,s===0&&n(o)}catch(a){i(a)}},r)}}function N1(t){return function(e){var r=oo(arguments,1);return Ih(e)?e:t(function(n){n(e)},r)}}function D1(t){return function(e){var r=oo(arguments,1);return t(function(n,i){i(e)},r)}}var l1e,zXe,S2,YXe,$Xe,P$,F3=T(()=>{ye();T$();o1e();R$();c1e();A$();l1e="unhandledRejection",zXe=l1e.toLowerCase(),S2=[],YXe=0,$Xe=10});function p1e(t){var e=xi(t)?t:0;return function(r){Nn(function(){WXe(r)},e)}}var WXe,f1e=T(()=>{ye();WXe=function(t){K(t,function(e){try{e()}catch{}})}});function k1(t,e){return d1e(k1,p1e(e),t,e)}var b8t,x8t,E8t,m1e=T(()=>{F3();f1e();b8t=P1(k1),x8t=N1(k1),E8t=D1(k1)});function I2(t,e){!N$&&(N$=mc(A1));var r=N$.v;if(!r)return k1(t);Ne(t)||Lr(A1+": executor is not a function - "+de(t));var n=0;function i(){return O3[n]}var o=new r(function(s,a){function u(l){n=2,s(l)}function c(l){n=3,a(l)}t(u,c)});return mn(o,"state",{get:i}),o}var N$,A8t,P8t,N8t,h1e=T(()=>{m1e();F3();R$();ye();A$();A8t=P1(I2),P8t=N1(I2),N8t=D1(I2)});function Ti(t,e){return!D$&&(D$=fc(function(){return I2})),D$.v.call(this,t,e)}var D$,C2,KXe,XXe,g1e=T(()=>{ye();F3();h1e();C2=P1(Ti),KXe=N1(Ti),XXe=D1(Ti)});var yf=T(()=>{T$();g1e()});var xc,_t,Gh,ti,U3,w2,bf,p_,La,f_,L1,Hh,O1,Ed,M1,B3,q3,v1e,Hi=T(()=>{xc=void 0,_t="",Gh="channels",ti="core",U3="createPerfMgr",w2="disabled",bf="extensionConfig",p_="extensions",La="processTelemetry",f_="priority",L1="eventsSent",Hh="eventsDiscarded",O1="eventsSendRequest",Ed="perfEvent",M1="getPerfMgr",B3="domain",q3="path",v1e="Not dynamic - "});function F1(t){return!ie(t)}function m_(t){var e=t;return e&&Ke(e)&&(e=e[_f](JXe,function(r,n){return n.toUpperCase()}),e=e[_f](ZXe,"_"),e=e[_f](eQe,function(r,n){return"_"+n})),e}function Si(t,e){return t&&e?en(t,e)!==-1:!1}function h_(t){return t&&t.toISOString()||""}function g_(t){return io(t)?t[Os]:_t}function Td(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function R2(t,e,r){var n;return t?(n=t[e],!n&&ie(n)&&(n=De(r)?{}:r,t[e]=n)):n=De(r)?{}:r,n}function _1e(t,e){var r=null,n=null;return Ne(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][Lh](n,i)}}function k$(t,e,r){if(t&&e&&zt(t)&&zt(e)){var n=function(o){if(Ke(o)){var s=e[o];Ne(s)?(!r||r(o,!0,e,t))&&(t[o]=_1e(e,o)):(!r||r(o,!1,e,t))&&(Nr(t,o)&&delete t[o],Xe(t,o,{g:function(){return e[o]},s:function(a){e[o]=a}}))}};for(var i in e)n(i)}return t}function xf(t,e,r,n,i){t&&e&&r&&(i!==!1||De(t[e]))&&(t[e]=_1e(r,n))}function Ef(t,e,r,n){return t&&e&&zt(t)&&ae(r)&&K(r,function(i){Ke(i)&&xf(t,i,e,i,n)}),t}function Tf(t){return t&&gd&&(t=Th(gd({},t))),t}var QXe,JXe,ZXe,eQe,Y8t,Sf=T(()=>{Ei();ye();Dn();Hi();QXe="getPrototypeOf",JXe=/-([a-z])/g,ZXe=/([^\w\d_$])/g,eQe=/^(\d+[\w\d_$])/,Y8t=Object[QXe]});function E1e(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[As];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!De(i[e])}catch{}}return r}function B$(t){x1e=t}function v_(t){if(t&&x1e){var e=nt("__mockLocation");if(e)return e}return typeof location===ts&&location?location:nt(rQe)}function A2(){return typeof console!==Eo?console:nt(nQe)}function B1(){return!!(typeof JSON===ts&&JSON||nt(y1e)!==null)}function P2(){return B1()?JSON||nt(y1e):null}function N2(){return nt(iQe)}function D2(){return nt(oQe)}function jh(){var t=mr();return t&&t.product?t.product===sQe:!1}function Vh(){var t=mr();if(t&&(t[x2]!==O$||L$===null)){O$=t[x2];var e=(O$||_t)[kh]();L$=Si(e,F$)||Si(e,U$)}return L$}function q$(t){if(t===void 0&&(t=null),!t){var e=mr()||{};t=e?(e.userAgent||_t)[kh]():_t}var r=(t||_t)[kh]();if(Si(r,F$)){var n=fr()||{};return Math.max(parseInt(r[xd](F$)[1]),n[tQe]||0)}else if(Si(r,U$)){var i=parseInt(r[xd](U$)[1]);if(i)return i+4}return null}function q1(t){return(M$===null||t===!1)&&(M$=Aa()&&!!mr().sendBeacon),M$}function G1(t){var e=!1;try{e=!!nt("fetch");var r=nt("Request");e&&t&&r&&(e=E1e(r,"keepalive"))}catch{}return e}function k2(){return U1===null&&(U1=typeof XDomainRequest!==Eo,U1&&H1()&&(U1=U1&&!E1e(nt(b1e),"withCredentials"))),U1}function H1(){var t=!1;try{var e=nt(b1e);t=!!e}catch{}return t}function T1e(t,e){if(t)for(var r=0;r<t[at];r++){var n=t[r];if(n[Os]&&n[Os]===e)return n}return{}}function G$(t){var e=fr();return e&&t?T1e(e.querySelectorAll("meta"),t).content:null}function H$(t){var e,r=ks();if(r){var n=r.getEntriesByType("navigation")||[];e=T1e((n[at]>0?n[0]:{}).serverTiming,t).description}return e}var tQe,rQe,nQe,y1e,iQe,oQe,sQe,F$,U$,b1e,L$,O$,x1e,U1,M$,j1=T(()=>{"use strict";Ei();ye();Dn();Sf();Hi();tQe="documentMode",rQe="location",nQe="console",y1e="JSON",iQe="crypto",oQe="msCrypto",sQe="ReactNative",F$="msie",U$="trident/",b1e="XMLHttpRequest",L$=null,O$=null,x1e=!1,U1=null,M$=null});function aQe(t){t<0&&(t>>>=0),L2=I1e+t&zh,O2=C1e-t&zh,w1e=!0}function cQe(){try{var t=Yt()&2147483647;aQe((Math.random()*S1e^t)+t)}catch{}}function j$(t){return t>0?Math.floor(If()/zh*(t+1))>>>0:0}function If(t){var e=0,r=N2()||D2();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&zh),e===0&&Vh()&&(w1e||cQe(),e=R1e()&zh),e===0&&(e=Math.floor(S1e*Math.random()|0)),t||(e>>>=0),e}function R1e(t){O2=36969*(O2&65535)+(O2>>16)&zh,L2=18e3*(L2&65535)+(L2>>16)&zh;var e=(O2<<16)+(L2&65535)>>>0&zh|0;return t||(e>>>=0),e}function M2(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=If()>>>0,n=0,i=_t;i[at]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(If()<<2&4294967295|r&3)>>>0,n=0);return i}var S1e,zh,I1e,C1e,w1e,L2,O2,G3=T(()=>{ye();Dn();j1();Hi();S1e=4294967296,zh=4294967295,I1e=123456789,C1e=987654321,w1e=!1,L2=I1e,O2=C1e});function P1e(t){return t[D3]===1||t[D3]===9||!+t[D3]}function dQe(t,e){var r=e[t.id];if(!r){r={};try{P1e(e)&&Xe(e,t.id,{e:!1,v:r})}catch{}}return r}function Ec(t,e){return e===void 0&&(e=!1),m_(t+lQe+++(e?"."+A1e:_t)+uQe)}function H3(t){var e={id:Ec("_aiData-"+(t||_t)+"."+A1e),accept:function(r){return P1e(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[m_(n)]:(o&&(s=dQe(e,r),s[m_(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var A1e,uQe,lQe,V1=T(()=>{ye();Dn();Sf();Hi();G3();A1e="3.0.5",uQe="."+M2(6),lQe=0});function j3(t){return t&&zt(t)&&(t.isVal||t.fb||Nr(t,"v")||Nr(t,"mrg")||Nr(t,"ref")||t.set)}function N1e(t,e,r){var n,i=r.dfVal||hd;if(e&&r.fb){var o=r.fb;ae(o)||(o=[o]);for(var s=0;s<o[at];s++){var a=o[s],u=e[a];if(i(u)?n=u:t&&(u=t.cfg[a],i(u)&&(n=u),t.set(t.cfg,Ir(a),u)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function V$(t,e,r){var n=r;if(r&&j3(r)&&(n=N1e(t,e,r)),n){j3(n)&&(n=V$(t,e,n));var i;ae(n)?(i=[],i[at]=n[at]):mt(n)&&(i={}),i&&(me(n,function(o,s){s&&j3(s)&&(s=V$(t,e,s)),i[o]=s}),n=i)}return n}function F2(t,e,r,n){var i,o,s,a=n,u,c,l,d;j3(a)?(i=a.isVal,o=a.set,l=a[o_],d=a[i_],u=a.mrg,c=a.ref,!c&&De(c)&&(c=!!u),s=N1e(t,e,a)):s=n,d&&t[i_](e,r);var p,f=!0,m=e[r];(m||!ie(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=V$(t,e,s):p=s:(mt(p)||ae(s))&&u&&s&&(mt(s)||ae(s))&&me(s,function(h,g){F2(t,p,h,g)}),t.set(e,r,p),c&&t.ref(e,r),l&&t[o_](e,r)}var z$=T(()=>{ye();Dn()});function Y$(t){if(t){var e;if(ae(t)?(e=[],e[at]=t[at]):mt(t)&&(e={}),e)return me(t,function(r,n){e[r]=Y$(n)}),e}return t}function U2(t){if(t){var e=t[Sd]||t;if(e.cfg&&(e.cfg===t||e.cfg[Sd]===e))return e}return null}function B2(t){if(t&&(mt(t)||ae(t)))try{t[D1e]=!0}catch{}return t}function $$(t){if(t)try{t[k1e]=!0}catch{}return t}function V3(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[k1e],!n&&!r[D1e]&&(n=mt(r)||ae(r))),n}function z3(t){Lr("InvalidAccess:"+t)}var Sd,D1e,k1e,Y3=T(()=>{ye();Dn();Sd=os("[[ai_dynCfg_1]]"),D1e=os("[[ai_blkDynCfg_1]]"),k1e=os("[[ai_frcDynCfg_1]]")});function fQe(t,e,r){ae(e)&&K(pQe,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[Lh](this,o);return q2(t,e,r,"Patching"),a}})}function $3(t,e){var r=dc(t,e);return r&&r.get}function mQe(t,e,r,n){var i={n:r,h:[],trk:function(c){c&&c.fn&&(Qe(i.h,c)===-1&&i.h[Qt](c),t.trk(c,i))},clr:function(c){var l=Qe(i.h,c);l!==-1&&i.h[_d](l,1)}},o=!0,s=!1;function a(){o&&(s=s||V3(a,t,n),n&&!n[Sd]&&s&&(n=q2(t,n,r,"Converting")),o=!1);var c=t.act;return c&&i.trk(c),n}a[t.prop]={chng:function(){t.add(i)}};function u(c){if(n!==c){a[t.ro]&&!t.upd&&z3("["+r+"] is read-only:"+de(e)),o&&(s=s||V3(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){me(n,function(p){n[p]=c?c[p]:xc});try{me(c,function(p,f){G2(t,n,p,f)}),c=n}catch(p){z1((t.hdlr||{})[Wr],r,"Assigning",p),s=!1}}else n&&n[Sd]&&me(n,function(p){var f=$3(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(c!==n){var d=c&&V3(a,t,c);!l&&d&&(c=q2(t,c,r,"Converting")),n=c,s=d}t.add(i)}}Xe(e,i.n,{g:a,s:u})}function G2(t,e,r,n){if(e){var i=$3(e,r),o=i&&!!i[t.prop];o?e[r]=n:mQe(t,e,r,n)}return e}function W3(t,e,r,n){if(e){var i=$3(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],u=n&&n[2];if(!o){if(u)try{B2(e)}catch(c){z1((t.hdlr||{})[Wr],r,"Blocking",c)}try{G2(t,e,r,e[r]),i=$3(e,r)}catch(c){z1((t.hdlr||{})[Wr],r,"State",c)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),u&&(i[t.blkVal]=!0)}return e}function q2(t,e,r,n){try{me(e,function(i,o){G2(t,e,i,o)}),e[Sd]||(mn(e,Sd,{get:function(){return t[A3]}}),fQe(t,e,r))}catch(i){z1((t.hdlr||{})[Wr],r,n,i)}return e}var pQe,z1,L1e=T(()=>{ye();Hi();Dn();Y3();pQe=["push","pop","shift","unshift","splice"],z1=function(t,e,r,n){t&&t[vf](3,108,"".concat(r," [").concat(e,"] failed - ")+de(n))}});function O1e(t){var e,r=Pn(H2+"get"+t.uid+j2),n=Pn(H2+"ro"+t.uid+j2),i=Pn(H2+"rf"+t.uid+j2),o=Pn(H2+"blkVal"+t.uid+j2),s=Pn(H2+"dtl"+t.uid+j2),a=null,u=null,c;function l(m,h){var g=c.act;try{c.act=m,m&&m[s]&&(K(m[s],function(_){_.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[ul].bind(t),ref:t.ref.bind(t),rdOnly:t[o_].bind(t)})}catch(_){var v=t[Wr];throw v&&v[vf](1,107,de(_)),_}finally{c.act=g||null}}function d(){if(a){var m=a;a=null,u&&u[a_](),u=null;var h=[];if(K(m,function(g){if(g&&(g[s]&&(K(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[Qt](v)}}),a)try{d()}catch(g){h[Qt](g)}h[at]>0&&t1e("Watcher error(s): ",h)}}function p(m){if(m&&m.h[at]>0){a||(a=[]),u||(u=Nn(function(){u=null,d()},0));for(var h=0;h<m.h[at];h++){var g=m.h[h];g&&Qe(a,g)===-1&&a[Qt](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];Qe(g,h)===-1&&g[Qt](h)}}return c=(e={prop:r,ro:n,rf:i},e[i_]=o,e[A3]=t,e.add=p,e[s_]=d,e.use=l,e.trk=f,e),c}var H2,j2,M1e=T(()=>{ye();r1e();Dn();H2="[[ai_",j2="]]"});function hQe(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function gQe(t,e,r){var n,i=U2(e);if(i)return i;var o=Ec("dyncfg",!0),s=e&&r!==!1?e:Y$(e),a;function u(){a[s_]()}function c(v,_,y){try{v=G2(a,v,_,y)}catch(E){z1(t,_,"Setting value",E)}return v[_]}function l(v){return hQe(a,v)}function d(v,_){a.use(null,function(y){var E=a.upd;try{De(_)||(a.upd=_),v(y)}finally{a.upd=E}})}function p(v,_){var y;return W3(a,v,_,(y={},y[0]=!0,y))[_]}function f(v,_){var y;return W3(a,v,_,(y={},y[1]=!0,y))[_]}function m(v,_){var y;return W3(a,v,_,(y={},y[2]=!0,y))[_]}function h(v,_){return _&&me(_,function(y,E){F2(g,v,y,E)}),v}var g=(n={uid:null,cfg:s},n[Wr]=t,n[s_]=u,n.set=c,n[ul]=h,n[uu]=l,n.ref=p,n[o_]=f,n[i_]=m,n._block=d,n);return Xe(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=O1e(g),q2(a,s,"config","Creating"),g}function vQe(t,e){t?(t[x1](e),t[vf](2,108,e)):z3(e)}function ui(t,e,r,n){var i=gQe(r,t||{},n);return e&&i[ul](i.cfg,e),i}function Oa(t,e,r){var n=t[Sd]||t;return n.cfg&&(n.cfg===t||n.cfg[Sd]===n)?n[uu](e):(vQe(r,v1e+de(t)),ui(t,null,r)[uu](e))}var Yh=T(()=>{ye();V1();Hi();Dn();z$();L1e();M1e();Y3()});function Y1(t,e){if(t&&t[Na])return t[Na](e)}function W$(t,e,r){var n;return r||(n=Ti(function(i){r=i})),t&&Nh(t)>0?lu(Y1(t[0],e),function(){W$(oo(t,1),e,r)}):r(),n}var F1e=T(()=>{yf();ye();Dn()});var U1e,B1e=T(()=>{U1e=500});function q1e(t){return{mrg:!0,v:t}}var G1e=T(()=>{});function _Qe(t,e){return function(){var r=arguments,n=X$(e);if(n){var i=n.listener;i&&i[t]&&i[t][Lh](i,r)}}}function yQe(){var t=nt("Microsoft");return t&&(X3=t.ApplicationInsights),X3}function X$(t){var e=X3;return!e&&t.disableDbgExt!==!0&&(e=X3||yQe()),e?e.ChromeDbgExt:null}function H1e(t){if(!K3){K3={};for(var e=0;e<K$[at];e++)K3[K$[e]]=_Qe(K$[e],t)}return K3}var K$,X3,K3,Q$=T(()=>{ye();Dn();Hi();K$=[L1,Hh,O1,Ed],X3=null});function j1e(t){return t?'"'+t[_f](/\"/g,_t)+'"':_t}function J$(t,e){var r=A2();if(r){var n="log";r[t]&&(n=t),Ne(r[n])&&r[n](e)}}function y_(t,e){return(t||{})[Wr]||new $h(e)}function Z$(t){return t||new $h}function vn(t,e,r,n,i,o){o===void 0&&(o=!1),Z$(t)[vf](e,r,n,i,o)}function Cf(t,e){Z$(t)[x1](e)}function eW(t,e,r){Z$(t)[x$](e,r)}var $1,V1e,bQe,xQe,EQe,TQe,SQe,__,$h,wf=T(()=>{"use strict";tn();ye();Yh();Dn();Q$();j1();Hi();V1e="warnToConsole",bQe="AI (Internal): ",xQe="AI: ",EQe="AITR_",TQe={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},SQe=($1={},$1[0]=null,$1[1]="errorToConsole",$1[2]=V1e,$1[3]="debugToConsole",$1);__=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[I1]=e,o[Uh]=(n?xQe:bQe)+e;var s=_t;B1()&&(s=P2().stringify(i));var a=(r?" message:"+j1e(r):_t)+(i?" props:"+j1e(s):_t);o[Uh]+=a}return t.dataType="MessageData",t}();$h=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,u;ot(t,this,function(c){u=d(e||{}),c.consoleLoggingLevel=function(){return i},c[vf]=function(m,h,g,v,_){_===void 0&&(_=!1);var y=new __(h,g,_,v);if(a)throw de(y);var E=SQe[m]||V1e;if(De(y[Uh]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(_){var x=+y[I1];!n[x]&&i>=m&&(c[E](y[Uh]),n[x]=!0)}else i>=m&&c[E](y[Uh]);l(m,y)}},c.debugToConsole=function(m){J$("debug",m),f("warning",m)},c[x1]=function(m){J$("warn",m),f("warning",m)},c.errorToConsole=function(m){J$("error",m),f("error",m)},c.resetInternalMessageCount=function(){r=0,n={}},c[x$]=l,c[Na]=function(m){u&&u.rm(),u=null};function l(m,h){if(!p()){var g=!0,v=EQe+h[I1];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(c.queue[Qt](h),r++,f(m===1?"error":"warn",h)),r===s)){var _="Internal events throttle limit per PageView reached for this app.",y=new __(23,_,!1);c.queue[Qt](y),m===1?c.errorToConsole(_):c[x1](_)}}}function d(m){return Oa(ui(m,TQe,c).cfg,function(h){var g=h.cfg;i=g[N3],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=X$(e||{});g&&g[Da]&&g[Da](m,h)}})}return t.__ieDyn=1,t}()});function sW(){!Id&&(Id=fc(function(){return fr()}))}function CQe(t,e){var r=Rf[Wh]||Z3[Wh];return r||(r=Rf[Wh]=Rf(t,e),Z3[Wh]=r),r}function J3(t){return t?t.isEnabled():!0}function eEe(t,e){return e&&t&&ae(t.ignoreCookies)?Qe(t.ignoreCookies,e)!==-1:!1}function wQe(t,e){return e&&t&&ae(t.blockedCookies)&&Qe(t.blockedCookies,e)!==-1?!0:eEe(t,e)}function X1e(t,e){var r=e[Fh];if(ie(r)){var n=void 0;De(t[$1e])||(n=!t[$1e]),De(t[iW])||(n=!t[iW]),r=n}return r}function aW(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n&&n[Wh]?r=n[Wh]:r=Rf(e)}return r||(r=CQe(e,(t||{})[Wr])),r}function Rf(t,e){var r,n,i,o,s,a,u,c,l;t=ui(t||Z3,null,e).cfg,s=Oa(t,function(p){p[ul](p.cfg,IQe),n=p.ref(p.cfg,"cookieCfg"),i=n[q3]||"/",o=n[B3],a=X1e(t,n)!==!1,u=n.getCookie||RQe,c=n.setCookie||Z1e,l=n.delCookie||Z1e},e);var d=(r={isEnabled:function(){var p=X1e(t,n)!==!1&&a&&W1(e),f=Z3[Wh];return p&&f&&d!==f&&(p=J3(f)),p},setEnabled:function(p){a=p!==!1,n[Fh]=p},set:function(p,f,m,h,g){var v=!1;if(J3(d)&&!wQe(n,p)){var _={},y=It(f||_t),E=en(y,";");if(E!==-1&&(y=It(pc(f,E)),_=tEe(fn(f,E+1))),Td(_,B3,h||o,ns,De),!ie(m)){var x=Vh();if(De(_[rW])){var S=Yt(),O=S+m*1e3;if(O>0){var U=new Date;U.setTime(O),Td(_,rW,Q1e(U,x?z1e:Y1e)||Q1e(U,x?z1e:Y1e)||_t,ns)}}x||Td(_,"max-age",_t+m,null,De)}var W=v_();W&&W.protocol==="https:"&&(Td(_,"secure",null,null,De),nW===null&&(nW=!eO((mr()||{})[x2])),nW&&Td(_,"SameSite","None",null,De)),Td(_,q3,g||i,null,De),c(p,J1e(y,_)),v=!0}return v},get:function(p){var f=_t;return J3(d)&&!eEe(n,p)&&(f=u(p)),f},del:function(p,f){var m=!1;return J3(d)&&(m=d.purge(p,f)),m},purge:function(p,f){var m,h=!1;if(W1(e)){var g=(m={},m[q3]=f||"/",m[rW]="Thu, 01 Jan 1970 00:00:01 GMT",m);Vh()||(g["max-age"]="0"),l(p,J1e(_t,g)),h=!0}return h}},r[Na]=function(p){s&&s.rm(),s=null},r);return d[Wh]=d,d}function W1(t){if(Q3===null){Q3=!1,!Id&&sW();try{var e=Id.v||{};Q3=e[oW]!==void 0}catch(r){vn(t,2,68,"Cannot access document.cookie - "+g_(r),{exception:de(r)})}}return Q3}function tEe(t){var e={};if(t&&t[at]){var r=It(t)[xd](";");K(r,function(n){if(n=It(n||_t),n){var i=en(n,"=");i===-1?e[n]=null:e[It(pc(n,i))]=It(fn(n,i+1))}})}return e}function Q1e(t,e){return Ne(t[e])?t[e]():null}function J1e(t,e){var r=t||_t;return me(e,function(n,i){r+="; "+n+(ie(i)?_t:"="+i)}),r}function RQe(t){var e=_t;if(!Id&&sW(),Id.v){var r=Id.v[oW]||_t;W1e!==r&&(K1e=tEe(r),W1e=r),e=It(K1e[t]||_t)}return e}function Z1e(t,e){!Id&&sW(),Id.v&&(Id.v[oW]=t+"="+e)}function eO(t){return Ke(t)?!!(Si(t,"CPU iPhone OS 12")||Si(t,"iPad; CPU OS 12")||Si(t,"Macintosh; Intel Mac OS X 10_14")&&Si(t,"Version/")&&Si(t,"Safari")||Si(t,"Macintosh; Intel Mac OS X 10_14")&&vc(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Si(t,"Chrome/5")||Si(t,"Chrome/6")||Si(t,"UnrealEngine")&&!Si(t,"Chrome")||Si(t,"UCBrowser/12")||Si(t,"UCBrowser/11")):!1}var tW,b_,z1e,Y1e,oW,rW,$1e,iW,Wh,Q3,nW,W1e,Id,K1e,Z3,IQe,cW=T(()=>{ye();G1e();Yh();Dn();wf();j1();Sf();Hi();z1e="toGMTString",Y1e="toUTCString",oW="cookie",rW="expires",$1e="isCookieUseDisabled",iW="disableCookiesUsage",Wh="_ckMgr",Q3=null,nW=null,W1e=null,K1e={},Z3={},IQe=(tW={cookieCfg:q1e((b_={},b_[B3]={fb:"cookieDomain",dfVal:F1},b_.path={fb:"cookiePath",dfVal:F1},b_.enabled=xc,b_.ignoreCookies=xc,b_.blockedCookies=xc,b_)),cookieDomain:xc,cookiePath:xc},tW[iW]=xc,tW)});function V2(t,e,r,n){K(t,function(i){if(i&&i[e])if(r)Nn(function(){return n(i)},0);else try{n(i)}catch{}})}var AQe,z2,uW=T(()=>{tn();yf();ye();Yh();Dn();Hi();AQe={perfEvtsSendAll:!1};z2=function(){function t(e){this.listeners=[];var r,n,i=[],o=ui(e,AQe);n=o[uu](function(s){r=!!s.cfg.perfEvtsSendAll}),ot(t,this,function(s){Xe(s,"listeners",{g:function(){return i}}),s[T1]=function(a){i[Qt](a)},s[S1]=function(a){for(var u=Qe(i,a);u>-1;)i[_d](u,1),u=Qe(i,a)},s[L1]=function(a){V2(i,L1,!0,function(u){u[L1](a)})},s[Hh]=function(a,u){V2(i,Hh,!0,function(c){c[Hh](a,u)})},s[O1]=function(a,u){V2(i,O1,u,function(c){c[O1](a,u)})},s[Ed]=function(a){a&&(r||!a[T2]())&&V2(i,Ed,!1,function(u){a[ll]?Nn(function(){return u[Ed](a)},0):u[Ed](a)})},s[Na]=function(a){var u=function(){n&&n.rm(),n=null,i=[]},c;if(V2(i,"unload",!1,function(l){var d=l[Na](a);d&&(c||(c=[]),c[Qt](d))}),c)return Ti(function(l){return lu(C2(c),function(){u(),l()})});u()}})}return t.__ieDyn=1,t}()});function li(t,e,r,n,i){if(t){var o=t;if(o[M1]&&(o=o[M1]()),o){var s=void 0,a=o[d_](lW);try{if(s=o.create(e(),n,i),s){if(a&&s[dl]&&(s[dl](x_[dW],a),a[d_]&&a[dl])){var u=a[d_](x_[Y2]);u||(u=[],a[dl](x_[Y2],u)),u[Qt](s)}return o[dl](lW,s),r(s)}}catch(c){s&&s[dl]&&s[dl]("exception",c)}finally{s&&o.fire(s),o[dl](lW,a)}}}return r()}function pW(){return PQe}var K1,dW,Y2,PQe,x_,$2,lW,tO=T(()=>{tn();ye();Dn();Hi();K1="ctx",dW="ParentContextKey",Y2="ChildrenContextKey",PQe=null,x_=function(){function t(e,r,n){var i=this;if(i.start=Yt(),i[Os]=e,i[ll]=n,i[T2]=function(){return!1},Ne(r)){var o;Xe(i,"payload",{g:function(){return!o&&Ne(r)&&(o=r(),r=null),o}})}i[d_]=function(s){return s?s===t[dW]||s===t[Y2]?i[s]:(i[K1]||{})[s]:null},i[dl]=function(s,a){if(s)if(s===t[dW])i[s]||(i[T2]=function(){return!0}),i[s]=a;else if(s===t[Y2])i[s]=a;else{var u=i[K1]=i[K1]||{};u[s]=a}},i[k3]=function(){var s=0,a=i[d_](t[Y2]);if(ae(a))for(var u=0;u<a[at];u++){var c=a[u];c&&(s+=c[Mh])}i[Mh]=Yt()-i.start,i.exTime=i[Mh]-s,i[k3]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),$2=function(){function t(e){this.ctx={},ot(t,this,function(r){r.create=function(n,i,o){return new x_(n,i,o)},r.fire=function(n){n&&(n[k3](),e&&Ne(e[Ed])&&e[Ed](n))},r[dl]=function(n,i){if(n){var o=r[K1]=r[K1]||{};o[n]=i}},r[d_]=function(n){return(r[K1]||{})[n]}})}return t.__ieDyn=1,t}(),lW="CoreUtils.doPerf"});function W2(){var t=E_();return fn(t,0,8)+"-"+fn(t,8,12)+"-"+fn(t,12,16)+"-"+fn(t,16,20)+"-"+fn(t,20)}function E_(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=_t,r,n=0;n<4;n++)r=If(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(If()&3)|0];return is(e,0,8)+is(e,9,4)+"4"+is(e,13,3)+i+is(e,16,3)+is(e,19,12)}var fW=T(()=>{"use strict";ye();Hi();G3()});function Af(t,e,r){return t&&t[at]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function nEe(t,e,r){return Af(t,e)?t:r}function iEe(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[at]<2;)e="0"+e;return e}function gW(t,e,r,n){var i;return i={},i[u_]=Af(n,2,hW)?n:mW,i[w1]=X1(t)?t:E_(),i[R1]=Q1(e)?e:pc(E_(),16),i.traceFlags=r>=0&&r<=255?r:1,i}function K2(t,e){var r;if(!t||(ae(t)&&(t=t[0]||""),!t||!Ke(t)||t[at]>8192))return null;if(t.indexOf(",")!==-1){var n=t[xd](",");t=n[e>0&&n[at]>e?e:0]}var i=NQe.exec(It(t));return!i||i[1]===hW||i[2]===rO||i[3]===nO?null:(r={version:(i[1]||_t)[kh](),traceId:(i[2]||_t)[kh](),spanId:(i[3]||_t)[kh]()},r[qh]=parseInt(i[4],16),r)}function X1(t){return Af(t,32,rO)}function Q1(t){return Af(t,16,nO)}function iO(t){return!(!t||!Af(t[u_],2,hW)||!Af(t[w1],32,rO)||!Af(t[R1],16,nO)||!Af(iEe(t[qh]),2))}function vW(t){return iO(t)?(t[qh]&rEe)===rEe:!1}function _W(t){if(t){var e=iEe(t[qh]);Af(e,2)||(e="01");var r=t[u_]||mW;return r!=="00"&&r!=="ff"&&(r=mW),"".concat(r.toLowerCase(),"-").concat(nEe(t.traceId,32,rO).toLowerCase(),"-").concat(nEe(t.spanId,16,nO).toLowerCase(),"-").concat(e.toLowerCase())}return""}function yW(t){var e="traceparent",r=K2(G$(e),t);return r||(r=K2(H$(e),t)),r}var NQe,mW,hW,rO,nO,rEe,bW=T(()=>{ye();Dn();fW();j1();Hi();NQe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,mW="00",hW="ff",rO="00000000000000000000000000000000",nO="0000000000000000",rEe=1});function Pf(t){return DQe.get(t,"state",{},!0)}function xW(t,e){for(var r=[],n=null,i=t[bc](),o;i;){var s=i[Oh]();if(s){n&&n[Bh]&&s[La]&&n[Bh](s),o=Pf(s);var a=!!o[Pa];s[Pa]&&(a=s[Pa]()),a||r[Qt](s),n=s,i=i[bc]()}}K(r,function(u){var c=t[ti]();u[c_](t.getCfg(),c,e,t[bc]()),o=Pf(u),!u[ti]&&!o[ti]&&(o[ti]=c),o[Pa]=!0,delete o[yc]})}function oO(t){return t.sort(function(e,r){var n=0;if(r){var i=r[La];e[La]?n=i?e[f_]-r[f_]:1:i&&(n=-1)}else n=e?1:-1;return n})}function oEe(t){var e={};return{getName:function(){return e[Os]},setName:function(r){t&&t.setName(r),e[Os]=r},getTraceId:function(){return e[w1]},setTraceId:function(r){t&&t.setTraceId(r),X1(r)&&(e[w1]=r)},getSpanId:function(){return e[R1]},setSpanId:function(r){t&&t.setSpanId(r),Q1(r)&&(e[R1]=r)},getTraceFlags:function(){return e[qh]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[qh]=r}}}var DQe,EW=T(()=>{"use strict";ye();Dn();V1();Hi();bW();DQe=H3("plugin")});function LQe(t,e,r){for(;t;){if(t[Oh]()===r)return t;t=t[bc]()}return Kh([r],e.config||{},e)}function TW(t,e,r,n){var i=null,o=[];e||(e=ui({},null,r[Wr])),n!==null&&(i=n?LQe(t,r,n):t);var s={_next:u,ctx:{core:function(){return r},diagLog:function(){return y_(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:l,getConfig:d,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:p,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[Qt]({func:f,self:De(m)?s.ctx:m,args:h})}function u(){var f=i;if(i=f?f[bc]():null,!f){var m=o;m&&m[at]>0&&(K(m,function(h){try{h.func.call(h.self,h.args)}catch(g){vn(r[Wr],2,73,"Unexpected Exception during onComplete - "+de(g))}}),o=[])}return f}function c(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[bf];!v&&m&&(v={}),g[bf]=v,v=e.ref(g,bf),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function l(f,m){var h=c(f,!0);return m&&me(m,function(g,v){if(ie(h[g])){var _=e.cfg[g];(_||!ie(_))&&(h[g]=_)}F2(e,h,g,v)}),e[ul](h,m)}function d(f,m,h){h===void 0&&(h=!1);var g,v=c(f,!1),_=e.cfg;return v&&(v[m]||!ie(v[m]))?g=v[m]:(_[m]||!ie(_[m]))&&(g=_[m]),g||!ie(g)?g:h}function p(f){for(var m;m=s._next();){var h=m[Oh]();h&&f(h)}}return s}function Tc(t,e,r,n){var i=ui(e),o=TW(t,i,r,n),s=o.ctx;function a(c){var l=o._next();return l&&l[La](c,s),!l}function u(c,l){return c===void 0&&(c=null),ae(c)&&(c=Kh(c,i.cfg,r,l)),Tc(c||s[bc](),i.cfg,r,l)}return s[so]=a,s[bd]=u,s}function J1(t,e,r){var n=ui(e.config),i=TW(t,n,e,r),o=i.ctx;function s(u){var c=i._next();return c&&c[Na](o,u),!c}function a(u,c){return u===void 0&&(u=null),ae(u)&&(u=Kh(u,n.cfg,e,c)),J1(u||o[bc](),e,c)}return o[so]=s,o[bd]=a,o}function X2(t,e,r){var n=ui(e.config),i=TW(t,n,e,r),o=i.ctx;function s(u){return o.iterate(function(c){Ne(c[l_])&&c[l_](o,u)})}function a(u,c){return u===void 0&&(u=null),ae(u)&&(u=Kh(u,n.cfg,e,c)),X2(u||o[bc](),e,c)}return o[so]=s,o[bd]=a,o}function Kh(t,e,r,n){var i=null,o=!n;if(ae(t)&&t[at]>0){var s=null;K(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&Ne(a[La])){var u=OQe(a,e,r);i||(i=u),s&&s._setNext(u),s=u}})}return n&&!i?Kh([n],e,r):i}function OQe(t,e,r){var n=null,i=Ne(t[La]),o=Ne(t[Bh]),s;t?s=t[yd]+"-"+t[f_]+"-"+cEe++:s="Unknown-0-"+cEe++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function u(){var f;return t&&Ne(t[aEe])&&(f=t[aEe]()),f||(f=Tc(a,e,r)),f}function c(f,m,h,g,v){var _=!1,y=t?t[yd]:kQe,E=f[sEe];return E||(E=f[sEe]={}),f.setNext(n),t&&li(f[ti](),function(){return y+":"+h},function(){E[s]=!0;try{var x=n?n._id:_t;x&&(E[x]=!1),_=m(f)}catch(O){var S=n?E[n._id]:!0;S&&(_=!0),(!n||!S)&&vn(f[Da](),1,73,"Plugin ["+y+"] failed during "+h+" - "+de(O)+", run flags: "+de(E))}},g,v),_}function l(f,m){m=m||u();function h(g){if(!t||!i)return!1;var v=Pf(t);return v[yc]||v[w2]?!1:(o&&t[Bh](n),t[La](f,g),!0)}c(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[so](f)}function d(f,m){function h(){var g=!1;if(t){var v=Pf(t),_=t[ti]||v[ti];t&&(!_||_===f.core())&&!v[yc]&&(v[ti]=null,v[yc]=!0,v[Pa]=!1,t[yc]&&t[yc](f,m)===!0&&(g=!0))}return g}c(f,h,"unload",function(){},m[ll])||f[so](m)}function p(f,m){function h(){var g=!1;if(t){var v=Pf(t),_=t[ti]||v[ti];t&&(!_||_===f.core())&&!v[yc]&&t[l_]&&t[l_](f,m)===!0&&(g=!0)}return g}c(f,h,"update",function(){},!1)||f[so](m)}return qi(a)}var kQe,sEe,aEe,cEe,SW,sO=T(()=>{"use strict";ye();z$();Yh();Dn();wf();Sf();Hi();tO();EW();kQe="TelemetryPluginChain",sEe="_hasRun",aEe="_getTelCtx",cEe=0;SW=function(){function t(e,r,n,i){var o=this,s=Tc(e,r,n,i);Ef(o,s,pn(s))}return t}()});function T_(){var t=[];function e(n){n&&t[Qt](n)}function r(n,i){K(t,function(o){try{o(n,i)}catch(s){vn(n[Da](),2,73,"Unexpected error calling unload handler - "+de(s))}}),t=[]}return{add:e,run:r}}var aO=T(()=>{ye();Dn();wf()});function cO(){var t=[];function e(n){var i=t;t=[],K(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){vn(n,2,73,"Unloading:"+de(s))}})}function r(n){n&&ei(t,n)}return{run:e,add:r}}var IW=T(()=>{ye();wf()});var CW,Xh,MQe,S_,wW=T(()=>{"use strict";tn();ye();Yh();Dn();wf();Sf();Hi();sO();aO();IW();Xh="getPlugin",MQe=(CW={},CW[bf]={isVal:F1,v:{}},CW),S_=function(){function t(){var e=this,r,n,i,o,s;c(),ot(t,e,function(l){l[c_]=function(d,p,f,m){u(d,p,m),r=!0},l[yc]=function(d,p){var f,m=l[ti];if(!m||d&&m!==d[ti]())return;var h,g=!1,v=d||J1(null,m,i&&i[Xh]?i[Xh]():i),_=p||(f={reason:0},f[ll]=!1,f);function y(){g||(g=!0,o.run(v,p),s.run(v[Da]()),h===!0&&v[so](_),c())}return!l[C1]||l[C1](v,_,y)!==!0?y():h=!0,h},l[l_]=function(d,p){var f=l[ti];if(!f||d&&f!==d[ti]())return;var m,h=!1,g=d||X2(null,f,i&&i[Xh]?i[Xh]():i),v=p||{reason:0};function _(){h||(h=!0,u(g.getCfg(),g.core(),g[bc]()))}return!l._doUpdate||l._doUpdate(g,v,_)!==!0?_():m=!0,m},xf(l,"_addUnloadCb",function(){return o},"add"),xf(l,"_addHook",function(){return s},"add"),Xe(l,"_unloadHooks",{g:function(){return s}})}),e[Da]=function(l){return a(l)[Da]()},e[Pa]=function(){return r},e.setInitialized=function(l){r=l},e[Bh]=function(l){i=l},e[so]=function(l,d){d?d[so](l):i&&Ne(i[La])&&i[La](l,null)},e._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=n||Tc(null,{},e[ti]);i&&i[Xh]?d=p[bd](null,i[Xh]):d=p[bd](null,i)}return d}function u(l,d,p){ui(l,MQe,y_(d)),!p&&d&&(p=d[P3]()[bc]());var f=i;i&&i[Xh]&&(f=i[Xh]()),e[ti]=d,n=Tc(p,l,d,f)}function c(){r=!1,e[ti]=null,n=null,i=null,s=cO(),o=T_()}}return t.__ieDyn=1,t}()});function FQe(t,e,r){var n={id:e,fn:r};ei(t,n);var i={remove:function(){K(t,function(o,s){if(o.id===n.id)return t[_d](s,1),-1})}};return i}function UQe(t,e,r){for(var n=!1,i=t[at],o=0;o<i;++o){var s=t[o];if(s)try{if(s.fn[Lh](null,[e])===!1){n=!0;break}}catch(a){vn(r,2,64,"Telemetry initializer failed: "+g_(a),{exception:de(a)},!0)}}return!n}var uEe,lEe=T(()=>{Ei();tn();ye();Dn();wW();wf();Sf();Hi();uEe=function(t){Ls(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),ot(e,r,function(s,a){s.addTelemetryInitializer=function(u){return FQe(i,n++,u)},s[La]=function(u,c){UQe(i,u,c?c[Da]():s[Da]())&&s[so](u,c)},s[C1]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(S_)});function GQe(t,e){return new $2(e)}function HQe(t,e,r){var n,i=[],o=[],s={};return K(r,function(a){(ie(a)||ie(a[c_]))&&Zt(mEe);var u=a[f_],c=a[yd];a&&u&&(ie(s[u])?s[u]=c:Cf(t,"Two extensions have same priority #"+u+" - "+s[u]+", "+c)),!u||u<e?i[Qt](a):o[Qt](a)}),n={},n[ti]=i,n[Gh]=o,n}function pEe(t,e){var r=!1;return K(e,function(n){if(n===t)return r=!0,-1}),r}function AW(t,e,r,n){r&&me(r,function(i,o){n&&mt(o)&&mt(e[i])&&AW(t,e[i],o,n),n&&mt(o)&&mt(e[i])?AW(t,e[i],o,n):t.set(e,i,o)})}function fEe(t,e){var r=null,n=-1;return K(t,function(i,o){if(i.w===e)return r=i,n=o,-1}),{i:n,l:r}}function jQe(t,e){var r=fEe(t,e).l;return r||(r={w:e,rm:function(){var n=fEe(t,e);n.i!==-1&&t[_d](n.i,1)}},t[Qt](r)),r}function VQe(t,e,r){K(e,function(n){var i=Oa(t,n.w,r);delete n.w,n.rm=function(){i.rm()}})}var Qh,mEe,BQe,dEe,qQe,RW,Q2,hEe=T(()=>{"use strict";Ei();tn();yf();ye();Yh();Dn();F1e();B1e();cW();V1();Q$();wf();Sf();Hi();uW();tO();sO();EW();lEe();aO();IW();mEe="Plugins must provide initialize method",BQe="_notificationManager",dEe="SDK is still unloading...",qQe="SDK is not initialized",RW=Zn((Qh={cookieCfg:{}},Qh[p_]={rdOnly:!0,ref:!0,v:[]},Qh[Gh]={rdOnly:!0,ref:!0,v:[]},Qh[bf]={ref:!0,v:{}},Qh[U3]=xc,Qh.loggingLevelConsole=0,Qh.diagnosticLogInterval=xc,Qh));Q2=function(){function t(){var e,r,n,i,o,s,a,u,c,l,d,p,f,m,h,g,v,_,y,E,x,S,O,U,W,L,ve,J;ot(t,this,function(D){G(),D._getDbgPlgTargets=function(){return[O]},D[Pa]=function(){return r},D[c_]=function(N,H,te,ne){f&&Zt(dEe),D[Pa]()&&Zt("Core cannot be initialized more than once"),e=ui(N,RW,te||D[Wr],!1),N=e.cfg,Be(e[uu](function(je){x=je.cfg.instrumentationKey;var ht=je.ref(je.cfg,bf);me(ht,function(Ft){je.ref(ht,Ft)}),ie(x)&&Zt("Please provide instrumentation key")})),o=ne,St(),Ye(),D[Wr]=te;var re=N[p_];if(l=[],l[Qt].apply(l,r_(r_([],H,!1),re,!1)),d=N[Gh],ce(null),(!p||p[at]===0)&&Zt("No "+Gh+" available"),d&&d[at]>1){var Fe=D[Oh]("TeeChannelController");(!Fe||!Fe.plugin)&&vn(n,1,28,"TeeChannel required")}VQe(N,S,n),S=null,r=!0,D.releaseQueue(),D[y$]()},D.getChannels=function(){var N=[];return p&&K(p,function(H){N[Qt](H)}),qi(N)},D.track=function(N){li(D[M1](),function(){return"AppInsightsCore:track"},function(){N===null&&(Te(N),Zt("Invalid telemetry item")),!N[Os]&&ie(N[Os])&&(Te(N),Zt("telemetry name required")),N.iKey=N.iKey||x,N[Mh]=N[Mh]||h_(new Date),N.ver=N.ver||"4.0",!f&&D[Pa]()?M()[so](N):i[Qt](N)},function(){return{item:N}},!N.sync)},D[P3]=M,D[E1]=function(){return o||(o=new z2(e.cfg),D[BQe]=o),o},D[T1]=function(N){D[E1]()[T1](N)},D[S1]=function(N){o&&o[S1](N)},D.getCookieMgr=function(){return u||(u=Rf(e.cfg,D[Wr])),u},D.setCookieMgr=function(N){u!==N&&(Y1(u,!1),u=N)},D[M1]=function(){return!s&&!a&&Be(e[uu](function(N){if(N.cfg.enablePerfMgr){var H=N.cfg[U3];Ne(H)&&(a=H(D,D[E1]()))}})),s||a||pW()},D.setPerfMgr=function(N){s=N},D.eventCnt=function(){return i[at]},D.releaseQueue=function(){if(r&&i[at]>0){var N=i;i=[],K(N,function(H){M()[so](H)})}},D[y$]=function(N){return h=N||null,J=!1,L&&L[a_](),R(!0)};function R(N){if((!L||!L[Fh])&&!J){var H=N||n&&n.queue[at]>0;H&&(ve||(ve=!0,Be(e[uu](function(te){var ne=te.cfg.diagnosticLogInterval;(!ne||!(ne>0))&&(ne=1e4);var re=!1;L&&(re=L[Fh],L[a_]()),L=v2(lt,ne),L.unref(),L[Fh]=re}))),L[Fh]=!0)}return L}D[b$]=function(){J=!0,L&&L[a_](),lt()},Ef(D,function(){return m},["addTelemetryInitializer"]),D[Na]=function(N,H,te){var ne;N===void 0&&(N=!0),r||Zt(qQe),f&&Zt(dEe);var re=(ne={reason:50},ne[ll]=N,ne.flushComplete=!1,ne),Fe;N&&!H&&(Fe=Ti(function(Ft){H=Ft}));var je=J1(_e(),D);je[b2](function(){_.run(D[Wr]),W$([u,o,n],N,function(){G(),H&&H(re)})},D);function ht(Ft){re.flushComplete=Ft,f=!0,v.run(je,re),D[b$](),je[so](re)}return lt(),Tt(N,ht,6,te)||ht(!1),Fe},D[Oh]=V,D.addPlugin=function(N,H,te,ne){if(!N){ne&&ne(!1),Ht(mEe);return}var re=V(N[yd]);if(re&&!H){ne&&ne(!1),Ht("Plugin ["+N[yd]+"] is already loaded!");return}var Fe={reason:16};function je(zr){l[Qt](N),Fe.added=[N],ce(Fe),ne&&ne(!0)}if(re){var ht=[re.plugin],Ft={reason:2,isAsync:!!te};ze(ht,Ft,function(zr){zr?(Fe.removed=ht,Fe.reason|=32,je(!0)):ne&&ne(!1)})}else je(!1)},D.updateCfg=function(N,H){H===void 0&&(H=!0);var te;if(D[Pa]()){te={reason:1,cfg:e.cfg,oldCfg:t_({},e.cfg),newConfig:t_({},N),merge:H},N=te.newConfig;var ne=e.cfg;N[p_]=ne[p_],N[Gh]=ne[Gh]}e._block(function(re){var Fe=re.cfg;AW(re,Fe,N,H),H||me(Fe,function(je){Nr(N,je)||re.set(Fe,je,xc)}),re[ul](Fe,RW)},!0),e[s_](),te&&ft(te)},D.evtNamespace=function(){return g},D.flush=Tt,D.getTraceCtx=function(N){return E||(E=oEe()),E},D.setTraceCtx=function(N){E=N||null},D.addUnloadHook=Be,xf(D,"addUnloadCb",function(){return v},"add"),D.onCfgChange=function(N){var H;return r?H=Oa(e.cfg,N,D[Wr]):H=jQe(S,N),{rm:function(){H.rm()}}},D.getWParam=function(){return hc()||e.cfg.enableWParam?0:-1};function k(){var N={};U=[];var H=function(te){te&&K(te,function(ne){if(ne[yd]&&ne[u_]&&!N[ne.identifier]){var re=ne[yd]+"="+ne[u_];U[Qt](re),N[ne.identifier]=ne}})};H(p),d&&K(d,function(te){H(te)}),H(l)}function G(){r=!1,e=ui({},RW,D[Wr]),e.cfg[N3]=1,Xe(D,"config",{g:function(){return e.cfg},s:function(H){D.updateCfg(H,!1)}}),Xe(D,"pluginVersionStringArr",{g:function(){return U||k(),U}}),Xe(D,"pluginVersionString",{g:function(){return W||(U||k(),W=U.join(";")),W||_t}}),Xe(D,"logger",{g:function(){return n||(n=new $h(e.cfg),e[Wr]=n),n},s:function(H){e[Wr]=H,n!==H&&(Y1(n,!1),n=H)}}),D[Wr]=new $h(e.cfg),O=[];var N=D.config[p_]||[];N.splice(0,N[at]),ei(N,O),m=new uEe,i=[],Y1(o,!1),o=null,s=null,a=null,Y1(u,!1),u=null,c=null,l=[],d=null,p=null,f=!1,h=null,g=Ec("AIBaseCore",!0),v=T_(),E=null,x=null,_=cO(),S=[],W=null,U=null,J=!1}function M(){var N=Tc(_e(),e.cfg,D);return N[b2](R),N}function ce(N){var H=HQe(D[Wr],U1e,l);c=null,W=null,U=null,p=(d||[])[0]||[],p=oO(ei(p,H[Gh]));var te=ei(oO(H[ti]),p);O=qi(te);var ne=D.config[p_]||[];ne.splice(0,ne[at]),ei(ne,O);var re=M();p&&p[at]>0&&xW(re[bd](p),te),xW(re,te),N&&ft(N)}function V(N){var H=null,te=null,ne=[];return K(O,function(re){if(re[yd]===N&&re!==m)return te=re,-1;re.getChannel&&ne[Qt](re)}),!te&&ne[at]>0&&K(ne,function(re){if(te=re.getChannel(N),!te)return-1}),te&&(H={plugin:te,setEnabled:function(re){Pf(te)[w2]=!re},isEnabled:function(){var re=Pf(te);return!re[yc]&&!re[w2]},remove:function(re,Fe){var je;re===void 0&&(re=!0);var ht=[te],Ft=(je={reason:1},je[ll]=re,je);ze(ht,Ft,function(zr){zr&&ce({reason:32,removed:ht}),Fe&&Fe(zr)})}}),H}function _e(){if(!c){var N=(O||[]).slice();Qe(N,m)===-1&&N[Qt](m),c=Kh(oO(N),e.cfg,D)}return c}function ze(N,H,te){if(N&&N[at]>0){var ne=Kh(N,e.cfg,D),re=J1(ne,D);re[b2](function(){var Fe=!1,je=[];K(l,function(Ft,zr){pEe(Ft,N)?Fe=!0:je[Qt](Ft)}),l=je,W=null,U=null;var ht=[];d&&(K(d,function(Ft,zr){var mi=[];K(Ft,function(pa){pEe(pa,N)?Fe=!0:mi[Qt](pa)}),ht[Qt](mi)}),d=ht),te&&te(Fe),R()}),re[so](H)}else te(!1)}function lt(){if(n&&n.queue){var N=n.queue.slice(0);n.queue[at]=0,K(N,function(H){var te,ne=(te={},te[Os]=h||"InternalMessageId: "+H[I1],te.iKey=x,te[Mh]=h_(new Date),te.baseType=__.dataType,te.baseData={message:H[Uh]},te);D.track(ne)})}}function Tt(N,H,te,ne){var re=1,Fe=!1,je=null;ne=ne||5e3;function ht(){re--,Fe&&re===0&&(je&&je[a_](),je=null,H&&H(Fe),H=null)}if(p&&p[at]>0){var Ft=M()[bd](p);Ft.iterate(function(zr){if(zr.flush){re++;var mi=!1;zr.flush(N,function(){mi=!0,ht()},te)||mi||(N&&je==null?je=Nn(function(){je=null,ht()},ne):ht())}})}return Fe=!0,ht(),!0}function St(){!o&&D[E1](),Be(e[uu](function(N){var H=N.cfg.disableDbgExt;H===!0&&y&&(o[S1](y),y=null),o&&!y&&H!==!0&&(y=H1e(N.cfg),o[T1](y))}))}function Ye(){Be(e[uu](function(N){var H=N.cfg.enablePerfMgr;!H&&a&&(a=null),H&&R2(N.cfg,U3,GQe)}))}function ft(N){var H=X2(_e(),D);H[b2](R),(!D._updateHook||D._updateHook(H,N)!==!0)&&H[so](N)}function Ht(N){var H=D[Wr];H?(vn(H,2,73,N),R()):Zt(N)}function Te(N){var H=D[E1]();H&&H[Hh]([N],2)}function Be(N){_.add(N)}})}return t.__ieDyn=1,t}()});function bEe(t){return t&&t[_f]?t[_f](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_t):t}function dO(t,e){var r;if(e){var n=_t;ae(e)?(n=_t,K(e,function(o){o=bEe(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=bEe(e),n&&(n[0]!=="."&&(n="."+n),t=(t||_t)+n)}var i=WQe.exec(t||_t)||[];return r={},r[ka]=i[1],r.ns=(i[2]||_t).replace(zQe,".").replace(YQe,_t)[xd](".").sort().join("."),r}function PW(t,e,r){var n=[],i=Z2.get(t,uO,{},!1),o=dO(e,r);return me(i,function(s,a){K(a,function(u){var c;(!o[ka]||o[ka]===u.evtName[ka])&&(!o.ns||o.ns===o.ns)&&n[Qt]((c={},c[Os]=u.evtName[ka]+(u.evtName.ns?"."+u.evtName.ns:_t),c.handler=u[E2],c))})}),n}function REe(t,e,r){r===void 0&&(r=!0);var n=Z2.get(t,uO,{},r),i=n[e];return i||(i=n[e]=[]),i}function AEe(t,e,r,n){t&&e&&e[ka]&&(t[yEe]?t[yEe](e[ka],r,n):t[_Ee]&&t[_Ee](EEe+e[ka],r))}function KQe(t,e,r,n){var i=!1;return t&&e&&e[ka]&&r&&(t[vEe]?(t[vEe](e[ka],r,n),i=!0):t[gEe]&&(t[gEe](EEe+e[ka],r),i=!0)),i}function xEe(t,e,r,n){for(var i=e[at];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(AEe(t,o.evtName,o[E2],o.capture),e[_d](i,1))}}function XQe(t,e,r){if(e[ka])xEe(t,REe(t,e[ka]),e,r);else{var n=Z2.get(t,uO,{});me(n,function(i,o){xEe(t,o,e,r)}),pn(n)[at]===0&&Z2.kill(t,uO)}}function Nf(t,e){var r;return e?(ae(e)?r=[t].concat(e):r=[t,e],r=dO("xx",r).ns[xd](".")):r=t,r}function I_(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=dO(e,n);if(s=KQe(t,a,r,i),s&&Z2.accept(t)){var u=(o={guid:$Qe++,evtName:a},o[E2]=r,o.capture=i,o);REe(t,a.type)[Qt](u)}}catch{}return s}function C_(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=dO(e,n),s=!1;XQe(t,o,function(a){return o.ns&&!r||a[E2]===r?(s=!0,!0):!1}),s||AEe(t,o,r,i)}catch{}}function NW(t,e,r,n){return n===void 0&&(n=!1),I_(t,e,r,null,n)}function DW(t,e,r,n){n===void 0&&(n=!1),C_(t,e,r,null,n)}function pO(t,e,r){var n=!1,i=gn();i&&(n=I_(i,t,e,r),n=I_(i.body,t,e,r)||n);var o=fr();return o&&(n=I_(o,t,e,r)||n),n}function fO(t,e,r){var n=gn();n&&(C_(n,t,e,r),C_(n.body,t,e,r));var i=fr();i&&C_(i,t,e,r)}function Z1(t,e,r,n){var i=!1;return e&&t&&t[at]>0&&K(t,function(o){o&&(!r||Qe(r,o)===-1)&&(i=pO(o,e,n)||i)}),i}function mO(t,e,r,n){var i=!1;return e&&t&&ae(t)&&(i=Z1(t,e,r,n),!i&&r&&r[at]>0&&(i=Z1(t,e,null,n))),i}function Jh(t,e,r){t&&ae(t)&&K(t,function(n){n&&fO(n,e,r)})}function ew(t,e,r){return mO([IEe,SEe,lO],t,e,r)}function tw(t,e){Jh([IEe,SEe,lO],t,e)}function eE(t,e,r){function n(s){var a=fr();t&&a&&a.visibilityState==="hidden"&&t(s)}var i=Nf(CEe,r),o=Z1([lO],t,e,i);return(!e||Qe(e,J2)===-1)&&(o=Z1([J2],n,e,i)||o),!o&&e&&(o=eE(t,null,r)),o}function rw(t,e){var r=Nf(CEe,e);Jh([lO],t,r),Jh([J2],null,r)}function tE(t,e,r){function n(s){var a=fr();t&&a&&a.visibilityState==="visible"&&t(s)}var i=Nf(wEe,r),o=Z1([TEe],t,e,i);return o=Z1([J2],n,e,i)||o,!o&&e&&(o=tE(t,null,r)),o}function nw(t,e){var r=Nf(wEe,e);Jh([TEe],t,r),Jh([J2],null,r)}var EEe,gEe,vEe,_Ee,yEe,uO,J2,lO,TEe,SEe,IEe,CEe,wEe,zQe,YQe,$Qe,Z2,WQe,PEe=T(()=>{ye();Dn();V1();Hi();EEe="on",gEe="attachEvent",vEe="addEventListener",_Ee="detachEvent",yEe="removeEventListener",uO="events",J2="visibilitychange",lO="pagehide",TEe="pageshow",SEe="unload",IEe="beforeunload",CEe=Ec("aiEvtPageHide"),wEe=Ec("aiEvtPageShow"),zQe=/\.[\.]+/g,YQe=/[\.]+$/,$Qe=1,Z2=H3("events"),WQe=/^([^.]*)(?:\.(.+)|)/});var kW,NEe=T(()=>{R3();kW=_c({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var rE=T(()=>{Zxe();e1e();hEe();wW();G3();fW();Sf();ye();R3();PEe();j1();Ei();uW();tO();wf();sO();NEe();cW();V1();aO();bW();Yh();Y3()});var Cd,DEe,LW,hO,gO=T(()=>{Cd="",DEe="https://browser.events.data.microsoft.com/OneCollector/1.0/",LW="version",hO="properties"});var OW,MW,nE,wd,FW,qn,w_,Df,vO,_O,yO,bO,iw,xO=T(()=>{OW="initialize",MW="logger",nE="indexOf",wd="timings",FW="pollInternalLogs",qn="value",w_="kind",Df="length",vO="processTelemetryStart",_O="handleField",yO="rmSanitizer",bO="rmFieldSanitizer",iw="canHandle"});function To(t){return!(t===Cd||ie(t))}function EO(t){if(t){var e=en(t,"-");if(e>-1)return pc(t,e)}return Cd}function FEe(){return UW===null&&(UW=!De(Uint8Array)&&!tJe()&&!jh()),UW}function TO(t){return!!(t&&xi(t)&&t>=1&&t<=4)}function SO(t,e,r){if(!e&&!To(e)||typeof t!="string")return null;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||ae(e))e={value:e};else if(n==="object"&&!LEe.call(e,"value"))e={value:r?JSON.stringify(e):e};else if(ie(e[qn])||e[qn]===Cd||!Ke(e[qn])&&!xi(e[qn])&&!rs(e[qn])&&!ae(e[qn]))return null;if(ae(e[qn])&&!qW(e[qn]))return null;if(!ie(e[w_])){if(ae(e[qn])||!ow(e[w_]))return null;e[qn]=e[qn].toString()}return e}function IO(t,e,r){var n=-1;if(!De(t))if(e>0&&(e===32?n=8192:e<=13&&(n=e<<5)),eJe(r))n===-1&&(n=0),n|=r;else{var i=ZQe[Rd(t)]||-1;n!==-1&&i!==-1?n|=i:i===6&&(n=i)}return n}function UEe(t,e,r){r===void 0&&(r=!0);var n;return t&&(n=t.get(e),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||Cd}function BEe(t){t===void 0&&(t="D");var e=W2();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Cd)),e}function R_(t,e,r,n,i){var o={},s=!1,a=0,u=arguments[Df],c=arguments;for(rs(c[0])&&(s=c[0],a++);a<u;a++){var t=c[a];me(t,function(d,p){s&&p&&zt(p)?ae(p)?(o[d]=o[d]||[],K(p,function(f,m){f&&zt(f)?o[d][m]=R_(!0,o[d][m],f):o[d][m]=f})):o[d]=R_(!0,o[d],p):o[d]=p})}return o}function ow(t){return t===0||t>0&&t<=13||t===32}function eJe(t){return t>=0&&t<=9}function tJe(){var t=mr();if(!De(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[nE]("safari")>=0||e[nE]("firefox")>=0)&&e[nE]("chrome")<0)return!0}return!1}function qW(t){return t[Df]>0}function sw(t,e){var r=t;r[wd]=r[wd]||{},r[wd][vO]=r[wd][vO]||{},r[wd][vO][e]=Ma()}function Rd(t){var e=0;if(t!=null){var r=typeof t;r==="string"?e=1:r==="number"?e=2:r==="boolean"?e=3:r===ts&&(e=4,ae(t)?(e=4096,t[Df]>0&&(e|=Rd(t[0]))):LEe.call(t,"value")&&(e=8192|Rd(t[qn])))}return e}function CO(){return!!nt("chrome")}function wO(t,e,r,n,i,o){n===void 0&&(n=!1),i===void 0&&(i=!1);function s(u,c,l){try{u[c]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,QQe,n),r&&s(a,kEe,r),a.open(t,e,!i),r&&s(a,kEe,r),!i&&o&&s(a,JQe,o),a}function Zh(t){return t>0}var kf,BW,iE,LEe,QQe,kEe,JQe,ZQe,UW,OEe,MEe,Ma,RO=T(()=>{rE();Ei();ye();gO();xO();BW="4.0.4",iE="1DS-Web-JS-"+BW,LEe=i2.hasOwnProperty,QQe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",kEe="withCredentials",JQe="timeout",ZQe=(kf={},kf[0]=0,kf[2]=6,kf[1]=1,kf[3]=7,kf[4098]=6,kf[4097]=1,kf[4099]=7,kf),UW=null,OEe=hc(),MEe=al();Ma=gf});function nJe(t){return t&&(!t.getProperty||!t.setProperty)&&Zt("Invalid property storage override passed."),!0}var rJe,qEe,GEe=T(()=>{Ei();tn();rE();ye();gO();RO();xO();rJe=Zn({endpointUrl:DEe,propertyStorageOverride:{isVal:nJe}});qEe=function(t){Ls(e,t);function e(){var r=t.call(this)||this;return ot(e,r,function(n,i){n[OW]=function(o,s,a,u){li(n,function(){return"AppInsightsCore.initialize"},function(){try{i[OW](ui(o,rJe,a||n[MW],!1).cfg,s,a,u)}catch(d){var c=n[MW],l=de(d);l[nE]("channels")!==-1&&(l+=`
 - Channels must be provided through config.channels only!`),vn(c,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}},function(){return{config:o,extensions:s,logger:a,notificationManager:u}})},n.track=function(o){li(n,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s[wd]=s[wd]||{},s[wd].trackStart=Ma(),TO(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=iE;var u=s.baseData=s.baseData||{};u[hO]=u[hO]||{};var c=u[hO];c[LW]=c[LW]||n.pluginVersionString||Cd}i.track(s)},function(){return{item:o}},!o.sync)},n[FW]=function(o){return i[FW](o||"InternalLog")}}),r}return e.__ieDyn=1,e}(Q2)});var HEe,jEe,VEe,zEe,YEe,$Ee=T(()=>{rE();HEe=_c({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),jEe=_c({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),VEe=_c({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),zEe=_c({Normal:1,Critical:2}),YEe=_c({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});var WEe,KEe=T(()=>{rE();ye();gO();RO();xO();WEe=function(){function t(e){var r=this,n={},i=[],o=[];e&&o.push(e);function s(l,d){var p,f=n[l];if(f&&(p=f[d]),!p&&p!==null){if(Ke(l)&&Ke(d))if(o[Df]>0){for(var m=0;m<o[Df];m++)if(o[m][_O](l,d)){p={canHandle:!0,fieldHandler:o[m]};break}}else i[Df]===0&&(p={canHandle:!0});if(!p&&p!==null){p=null;for(var m=0;m<i[Df];m++)if(i[m][_O](l,d)){p={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=n[l]={}),f[d]=p}return p}r.clearCache=function(){n={}},r.addSanitizer=function(l){l&&(v3(i,l)||i.push(l),n={})},r.addFieldSanitizer=function(l){l&&(v3(o,l)||o.push(l),n={})},r[yO]=function(l){if(l){var d=Qe(i,l);d!==-1&&(i.splice(d,1),n={}),K(i,function(p){p&&p[yO]&&p[yO](l)})}},r[bO]=function(l){if(l){var d=Qe(o,l);d!==-1&&(o.splice(d,1),n={}),K(i,function(p){p&&p[bO]&&p[bO](l)})}},r.isEmpty=function(){return Nh(i)+Nh(o)===0},r[_O]=function(l,d){var p=s(l,d);return p?p[iw]:!1},r[qn]=function(l,d,p,f){var m=s(l,d);if(m&&m[iw]){if(!m||!m[iw])return null;if(m.handler)return m.handler[qn](l,d,p,f);if(!Ke(d)||ie(p)||p===Cd)return null;var h=null,g=Rd(p);if((g&8192)===8192){var v=g&-8193;if(h=p,!To(h[qn])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=u(l,d,p):g===4&&(h=u(l,d,f?JSON.stringify(p):p));if(h)return a(m,l,d,g,h,f)}return null},r.property=function(l,d,p,f){var m=s(l,d);if(!m||!m[iw]||!Ke(d)||ie(p)||!To(p[qn]))return null;var h=Rd(p[qn]);return h===0?null:a(m,l,d,h,p,f)};function a(l,d,p,f,m,h){if(l.handler)return l.handler.property(d,p,m,h);if(!ie(m[w_])){if((f&4096)===4096||!ow(m[w_]))return null;m[qn]=m[qn].toString()}return c(l.fieldHandler,d,p,f,m)}function u(l,d,p){return To(p)?{value:p}:null}function c(l,d,p,f,m){if(m&&l){var h=l.getSanitizer(d,p,f,m[w_],m.propertyType);if(h)if(f===4){var g={},v=m[qn];me(v,function(y,E){var x=d+"."+p;if(To(E)){var S=u(x,y,E);S=c(l,x,y,Rd(E),S),S&&(g[y]=S[qn])}}),m[qn]=g}else{var _={path:d,name:p,type:f,prop:m,sanitizer:r};m=h.call(r,_)}}return m}}return t.getFieldType=Rd,t}()});var XEe={};Fn(XEe,{AppInsightsCore:()=>qEe,BaseTelemetryPlugin:()=>S_,DiagnosticLogger:()=>$h,EventLatency:()=>jEe,EventPersistence:()=>zEe,EventPropertyType:()=>VEe,EventsDiscardedReason:()=>cl,FullVersionString:()=>iE,InternalAppInsightsCore:()=>Q2,LoggingSeverity:()=>kW,MinChannelPriorty:()=>_$,NotificationManager:()=>z2,PerfEvent:()=>x_,PerfManager:()=>$2,ProcessTelemetryContext:()=>SW,TraceLevel:()=>YEe,Undefined:()=>Eo,ValueKind:()=>HEe,ValueSanitizer:()=>WEe,Version:()=>BW,_InternalLogMessage:()=>__,__getRegisteredEvents:()=>PW,_logInternalMessage:()=>eW,_throwInternal:()=>vn,_warnToConsole:()=>Cf,addEventHandler:()=>pO,addEventListeners:()=>mO,addPageHideEventListener:()=>eE,addPageShowEventListener:()=>tE,addPageUnloadEventListener:()=>ew,areCookiesSupported:()=>W1,arrForEach:()=>K,arrIndexOf:()=>Qe,arrMap:()=>gc,arrReduce:()=>mf,attachEvent:()=>NW,blockDynamicConversion:()=>B2,cookieAvailable:()=>W1,createCookieMgr:()=>Rf,createDynamicConfig:()=>ui,createEnumStyle:()=>_c,createGuid:()=>BEe,createProcessTelemetryContext:()=>Tc,createTraceParent:()=>gW,createUniqueNamespace:()=>Ec,createUnloadHandlerContainer:()=>T_,dateNow:()=>Yt,detachEvent:()=>DW,disallowsSameSiteNone:()=>eO,doPerf:()=>li,dumpObj:()=>de,eventOff:()=>C_,eventOn:()=>I_,extend:()=>R_,findW3cTraceParent:()=>yW,forceDynamicConversion:()=>$$,formatTraceParent:()=>_W,generateW3CId:()=>E_,getCommonSchemaMetaData:()=>IO,getConsole:()=>A2,getCookieValue:()=>UEe,getCrypto:()=>N2,getDocument:()=>fr,getDynamicConfigHandler:()=>U2,getExceptionName:()=>g_,getFieldValueType:()=>Rd,getGlobal:()=>Gi,getGlobalInst:()=>nt,getHistory:()=>Ph,getIEVersion:()=>q$,getISOString:()=>h_,getJSON:()=>P2,getLocation:()=>v_,getMsCrypto:()=>D2,getNavigator:()=>mr,getPerformance:()=>ks,getSetValue:()=>R2,getTenantId:()=>EO,getTime:()=>Ma,getWindow:()=>gn,hasDocument:()=>hc,hasHistory:()=>Zv,hasJSON:()=>B1,hasNavigator:()=>Aa,hasOwnProperty:()=>Bn,hasWindow:()=>al,isArray:()=>ae,isArrayValid:()=>qW,isBeaconsSupported:()=>q1,isBoolean:()=>rs,isChromium:()=>CO,isDate:()=>df,isDocumentObjectAvailable:()=>OEe,isError:()=>io,isFetchSupported:()=>G1,isFunction:()=>Ne,isGreaterThanZero:()=>Zh,isIE:()=>Vh,isLatency:()=>TO,isNotTruthy:()=>Xv,isNullOrUndefined:()=>ie,isNumber:()=>xi,isObject:()=>zt,isReactNative:()=>jh,isSampledFlag:()=>vW,isString:()=>Ke,isTruthy:()=>ns,isTypeof:()=>Kv,isUint8ArrayAvailable:()=>FEe,isUndefined:()=>De,isValidSpanId:()=>Q1,isValidTraceId:()=>X1,isValidTraceParent:()=>iO,isValueAssigned:()=>To,isValueKind:()=>ow,isWindowObjectAvailable:()=>MEe,isXhrSupported:()=>H1,mergeEvtNamespace:()=>Nf,newGuid:()=>W2,newId:()=>M2,normalizeJsName:()=>m_,objDefineAccessors:()=>Jv,objForEachKey:()=>me,objFreeze:()=>qi,objKeys:()=>pn,objSeal:()=>Qv,onConfigChange:()=>Oa,openXhr:()=>wO,optimizeObject:()=>Tf,parseTraceParent:()=>K2,perfNow:()=>gf,proxyAssign:()=>k$,proxyFunctionAs:()=>xf,proxyFunctions:()=>Ef,random32:()=>If,randomValue:()=>j$,removeEventHandler:()=>fO,removeEventListeners:()=>Jh,removePageHideEventListener:()=>rw,removePageShowEventListener:()=>nw,removePageUnloadEventListener:()=>tw,safeGetCookieMgr:()=>aW,safeGetLogger:()=>y_,sanitizeProperty:()=>SO,setEnableEnvMocks:()=>B$,setProcessTelemetryTimings:()=>sw,setValue:()=>Td,strContains:()=>Si,strEndsWith:()=>vc,strFunction:()=>$v,strObject:()=>ts,strPrototype:()=>As,strStartsWith:()=>vd,strTrim:()=>It,strUndefined:()=>Eo,throwError:()=>Zt,toISOString:()=>h_,useXDomainRequest:()=>k2});var A_=T(()=>{GEe();$Ee();KEe();rE();RO()});var P_,AO,PO,GW=T(()=>{P_="REAL_TIME",AO="NEAR_REAL_TIME",PO="BEST_EFFORT"});var pl,NO,QEe,DO,JEe,HW,ZEe,eTe,tTe,jW,VW,kO,rTe,zW,nTe,YW,LO,$W,OO,MO,FO,aw,WW,iTe,oE,KW,UO,cw=T(()=>{pl="",NO="POST",QEe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",DO="drop",JEe="send",HW="requeue",ZEe="rspFail",eTe="oth",tTe="no-cache, no-store",jW="application/x-json-stream",VW="cache-control",kO="content-type",rTe="kill-tokens",zW="kill-duration",nTe="kill-duration-seconds",YW="time-delta-millis",LO="client-version",$W="client-id",OO="time-delta-to-apply-millis",MO="upload-time",FO="apikey",aw="AuthMsaDeviceTicket",WW="AuthXToken",iTe="NoResponseBody",oE="msfpc",KW="trace",UO="user"});var uw,BO,qO,GO,lw,Ot,du,pu,Ii,Ad,So,fl,N_,sE,aE,HO,cE,jO,VO,oTe,XW,QW,sTe,aTe,zO,YO,JW,ZW,eK,cTe,uE,eg,tK,ml,dw,Pd,rK,nK,lE,Ms,Fa,pw,dE,$O,fw,uTe,WO,KO,pE,iK,mw,XO,QO,JO,ZO,e5,hw,lTe,dTe,oK,sK,pTe,fTe,mTe,gw,tg,t5,D_,fE=T(()=>{uw="allowRequestSending",BO="firstRequestSent",qO="shouldAddClockSkewHeaders",GO="getClockSkewHeaderValue",lw="setClockSkew",Ot="length",du="concat",pu="iKey",Ii="count",Ad="events",So="push",fl="split",N_="splice",sE="toLowerCase",aE="hdrs",HO="useHdrs",cE="initialize",jO="setTimeoutOverride",VO="clearTimeoutOverride",oTe="payloadPreprocessor",XW="overrideEndpointUrl",QW="avoidOptions",sTe="disableEventTimings",aTe="stringifyObjects",zO="enableCompoundKey",YO="disableXhrSync",JW="disableFetchKeepAlive",ZW="useSendBeacon",eK="alwaysUseXhrOverride",cTe="unloadTransports",uE="urlString",eg="timeout",tK="ontimeout",ml="data",dw="_sendReason",Pd="headers",rK="getResponseHeader",nK="getAllResponseHeaders",lE="_thePayload",Ms="batches",Fa="sendType",pw="canSendRequest",dE="sendQueuedRequests",$O="isCompletelyIdle",fw="setUnloading",uTe="isTenantKilled",WO="sendSynchronousBatch",KO="_transport",pE="getWParam",iK="isBeacon",mw="timings",XO="isTeardown",QO="isSync",JO="sendPOST",ZO="setKillSwitchTenants",e5="_backOffTransmission",hw="identifier",lTe="disableOptimizeObj",dTe="ignoreMc1Ms0CookieProcessing",oK="eventsLimitInMem",sK="autoFlushEventsLimit",pTe="disableAutoBatchFlushLimit",fTe="overrideInstrumentationKey",mTe="disableTelemetry",gw="sendAttempt",tg="latency",t5="baseData",D_="sync"});function gTe(t){var e=(t.ext||{}).intweb;return e&&To(e[oE])?e[oE]:null}function hTe(t){for(var e=null,r=0;e===null&&r<t[Ot];r++)e=gTe(t[r]);return e}var mE,aK=T(()=>{A_();cw();fE();mE=function(){function t(e,r){var n=r?[][du](r):[],i=this,o=hTe(n);i[pu]=function(){return e},i.Msfpc=function(){return o||pl},i[Ii]=function(){return n[Ot]},i[Ad]=function(){return n},i.addEvent=function(s){return s?(n[So](s),o||(o=gTe(s)),!0):!1},i[fl]=function(s,a){var u;if(s<n[Ot]){var c=n[Ot]-s;ie(a)||(c=a<c?a:c),u=n[N_](s,c),o=hTe(n)}return new t(e,u)}}return t.create=function(e,r){return new t(e,r)},t}()});var cK,vTe=T(()=>{tn();fE();cK=function(){function t(){var e=!0,r=!0,n=!0,i="use-collector-delta",o=!1;ot(t,this,function(s){s[uw]=function(){return e},s[BO]=function(){n&&(n=!1,o||(e=!1))},s[qO]=function(){return r},s[GO]=function(){return i},s[lw]=function(a){o||(a?(i=a,r=!0,o=!0):r=!1,e=!0)}})}return t.__ieDyn=1,t}()});var iJe,uK,_Te=T(()=>{tn();A_();fE();iJe=1e3,uK=function(){function t(){var e={};function r(n){var i=[];return n&&K(n,function(o){i[So](It(o))}),i}ot(t,this,function(n){n[ZO]=function(i,o){if(i&&o)try{var s=r(i[fl](","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*iJe,u=0;u<s[Ot];++u)e[s[u]]=Yt()+a}catch{return[]}return[]},n[uTe]=function(i){var o=e,s=It(i);return o[s]!==void 0&&o[s]>Yt()?!0:(delete o[s],!1)}})}return t.__ieDyn=1,t}()});function bTe(t){return!(t>=300&&t<500&&t!=408&&t!=429||t==501||t==505)}function r5(t){var e=0,r=yTe*oJe,n=yTe*sJe,i=Math.floor(Math.random()*(n-r))+r;return e=Math.pow(2,t)*i,Math.min(e,aJe)}var oJe,sJe,yTe,aJe,lK=T(()=>{oJe=.8,sJe=1.2,yTe=3e3,aJe=6e5});function ETe(t,e,r,n){if(n&&t){var i=IO(n.value,n.kind,n.propertyType);if(i>-1){var o=t[xTe];o||(o=t[xTe]={f:{}});var s=o[n5];if(s||(s=o[n5]={}),e)for(var a=0;a<e.length;a++){var u=e[a];s[u]||(s[u]={f:{}});var c=s[u][n5];c||(c=s[u][n5]={}),s=c}s=s[r]={},ae(n.value)?s.a={t:i}:s.t=i}}}var cJe,uJe,TTe,STe,lJe,xTe,n5,dJe,ITe,CTe=T(()=>{tn();A_();aK();cw();ye();cJe=20,uJe=3984588,TTe=65e3,STe=2e6,lJe=Math.min(STe,TTe),xTe="metadata",n5="f",dJe=/\./,ITe=function(){function t(e,r,n,i){var o="data",s="baseData",a="ext",u=!!i,c=!0,l=r,d={};ot(t,this,function(p){p.createPayload=function(h,g,v,_,y,E){return{apiKeys:[],payloadBlob:pl,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:h,isTeardown:g,isSync:v,isBeacon:_,sendType:E,sendReason:y}},p.appendPayload=function(h,g,v){var _=h&&g&&!h.overflow;return _&&li(e,function(){return"Serializer:appendPayload"},function(){for(var y=g.events(),E=h.payloadBlob,x=h.numEvents,S=!1,O=[],U=[],W=h.isBeacon,L=W?TTe:uJe,ve=W?lJe:STe,J=0,D=0;J<y.length;){var R=y[J];if(R){if(x>=v){h.overflow=g.split(J);break}var k=p.getEventBlob(R);if(k&&k.length<=ve){var G=k.length,M=E.length;if(M+G>L){h.overflow=g.split(J);break}E&&(E+=`
`),E+=k,D++,D>cJe&&(is(E,0,1),D=0),S=!0,x++}else k?O.push(R):U.push(R),y.splice(J,1),J--}J++}if(O.length>0&&h.sizeExceed.push(mE.create(g.iKey(),O)),U.length>0&&h.failedEvts.push(mE.create(g.iKey(),U)),S){h.batches.push(g),h.payloadBlob=E,h.numEvents=x;var ce=g.iKey();Qe(h.apiKeys,ce)===-1&&h.apiKeys.push(ce)}},function(){return{payload:h,theBatch:{iKey:g.iKey(),evts:g.events()},max:v}}),_},p.getEventBlob=function(h){try{return li(e,function(){return"Serializer.getEventBlob"},function(){var g={};g.name=h.name,g.time=h.time,g.ver=h.ver,g.iKey="o:"+EO(h.iKey);var v={},_=h[a];_&&(g[a]=v,me(_,function(x,S){var O=v[x]={};m(S,O,"ext."+x,!0,null,null,!0)}));var y=g[o]={};y.baseType=h.baseType;var E=y[s]={};return m(h.baseData,E,s,!1,[s],function(x,S,O){ETe(v,x,S,O)},c),m(h.data,y,o,!1,[],function(x,S,O){ETe(v,x,S,O)},c),JSON.stringify(g)},function(){return{item:h}})}catch{return null}};function f(h,g){var v=d[h];return v===void 0&&(h.length>=7&&(v=vd(h,"ext.metadata")||vd(h,"ext.web")),d[h]=v),v}function m(h,g,v,_,y,E,x){me(h,function(S,O){var U=null;if(O||To(O)){var W=v,L=S,ve=y,J=g;if(u&&!_&&dJe.test(S)){var D=S.split("."),R=D.length;if(R>1){ve&&(ve=ve.slice());for(var k=0;k<R-1;k++){var G=D[k];J=J[G]=J[G]||{},W+="."+G,ve&&ve.push(G)}L=D[R-1]}}var M=_&&f(W,L);if(!M&&l&&l.handleField(W,L)?U=l.value(W,L,O,n):U=SO(L,O,n),U){var ce=U.value;if(J[L]=ce,E&&E(ve,L,U),x&&typeof ce=="object"&&!ae(ce)){var V=ve;V&&(V=V.slice(),V.push(L)),m(O,ce,W+"."+L,_,V,E,x)}}}})}})}return t.__ieDyn=1,t}()});function hE(t,e){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return s$([t,e],r,n,i)}}}var dK=T(()=>{ye()});function L_(t,e,r){fK[t]=e,r!==!1&&(mK[e]=t)}function RTe(t){try{return t.responseText}catch{}return pl}function ATe(t,e){var r=!1;if(t&&e){var n=pn(t);if(n&&n[Ot]>0)for(var i=e[sE](),o=0;o<n[Ot];o++){var s=n[o];if(s&&Bn(e,s)&&s[sE]()===i){r=!0;break}}}return r}function gE(t,e,r,n){e&&r&&r[Ot]>0&&(n&&fK[e]?(t[aE][fK[e]]=r,t[HO]=!0):t.url+="&"+e+"="+r)}function PTe(t,e){return e&&(xi(e)?t=[e][du](t):ae(e)&&(t=e[du](t))),t}function mJe(t,e,r){for(var n=0;n<t[Ot];n++)if(t[n].name===e){t[n].value=r;return}t[So]({name:e,value:r})}function hJe(t,e){for(var r=0;r<t[Ot];r++)if(t[r].name===e){t[N_](r,1);return}}var k_,pK,wTe,pJe,fJe,fK,mK,NTe,DTe=T(()=>{tn();A_();ye();vTe();cw();_Te();lK();CTe();dK();fE();pK="sendAttempt",wTe="&"+iTe+"=true",pJe="?cors=true&"+kO[sE]()+"="+jW,fJe=(k_={},k_[1]=HW,k_[100]=HW,k_[200]="sent",k_[8004]=DO,k_[8003]=DO,k_),fK={},mK={};L_(aw,aw,!1);L_(LO,LO);L_($W,"Client-Id");L_(FO,FO);L_(OO,OO);L_(MO,MO);L_(WW,WW);NTe=function(){function t(e,r,n,i){var o,s=new uK,a=!1,u=new cK,c=!1,l=0,d,p,f,m,h=!0,g=[],v={},_=[],y=null,E=!1,x,S=!1,O=!1,U,W,L,ve,J,D=[],R,k,G=[],M,ce;ot(t,this,function(V){Tt();var _e=!0;V[cE]=function(Y,Ce,F){M||(m=Ce,x=Ce.getCookieMgr(),d=F,p=d.diagLog(),ei(D,Oa(Y,function($){var oe,be=$.cfg,le=$.cfg.extensionConfig[F.identifier];ce=hE(le[jO],le[VO]),To(be.anonCookieName)?mJe(g,"anoncknm",be.anonCookieName):hJe(g,"anoncknm"),R=le[oTe],k=le.payloadListener;var B=le.httpXHROverride,X=le[XW]?le[XW]:be.endpointUrl;o=X+pJe,O=De(le[QW])?!0:!le[QW],E=!le[sTe];var Q=le.valueSanitizer,xe=le[aTe],fe=!!be[zO];De(le[zO])||(fe=!!le[zO]),U=le.xhrTimeout,W=!!le[YO],L=!!le[JW],J=le.addNoResponse!==!1,Ce.getPlugin("LocalStorage")&&(L=!0),c=!jh(),y=new ITe(m,Q,xe,fe),ie(le[ZW])||(c=!!le[ZW]);var $e=B,dt=le[eK]?B:null,vr=le[eK]?B:null,pr=[3,2];if(!B){h=!1;var Ni=v_();Ni&&Ni.protocol&&Ni.protocol[sE]()==="file:"&&(_e=!1);var Di=[];jh()?(Di=[2,1],pr=[2,1,3]):Di=[1,2,3],Di=PTe(Di,le.transports),B=ze(Di,!1),B||Cf(p,"No available transport to send events"),$e=ze(Di,!0)}dt||(pr=PTe(pr,le[cTe]),dt=ze(pr,!0)),ve=!h&&(c&&q1()||!L&&G1(!0)),f=(oe={},oe[0]=B,oe[1]=$e||ze([1,2,3],!0),oe[2]=dt||$e||ze([1],!0),oe[3]=vr||ze([2,3],!0)||$e||ze([1],!0),oe)})),M=!0)},V.addResponseHandler=function(Y){return G[So](Y),{rm:function(){var Ce=G.indexOf(Y);Ce>=0&&G[N_](Ce,1)}}};function ze(Y,Ce){for(var F=0,$=null,oe=0;$==null&&oe<Y[Ot];)F=Y[oe],F===1?k2()?$=lt:H1()&&($=Ye):F===2&&G1(Ce)&&(!Ce||Ce&&!L)?$=St:c&&F===3&&q1()&&($=Ht),oe++;return $?{_transport:F,_isSync:Ce,sendPOST:$}:null}V._getDbgPlgTargets=function(){return[f[0],s,y,f]};function lt(Y,Ce,F){var $=new XDomainRequest;$.open(NO,Y[uE]),Y[eg]&&($[eg]=Y[eg]),$.onload=function(){var oe=RTe($);ft(Ce,200,{},oe),Tm(oe)},$.onerror=function(){ft(Ce,400,{})},$[tK]=function(){ft(Ce,500,{})},$.onprogress=function(){},F?$.send(Y[ml]):ce.set(function(){$.send(Y[ml])},0)}function Tt(){var Y;o=null,s=new uK,a=!1,u=new cK,c=!1,l=0,d=null,p=null,f=null,m=null,h=!0,g=[],v={},_=[],y=null,E=!1,x=null,S=!1,O=!1,U=Y,W=Y,L=Y,ve=Y,J=Y,D=[],R=Y,k=Y,G=[],M=!1,ce=hE()}function St(Y,Ce,F){var $,oe=Y[uE],be=!1,le=!1,B=($={body:Y[ml],method:NO},$[QEe]=!0,$);F&&(B.keepalive=!0,Y[dw]===2&&(be=!0,J&&(oe+=wTe))),_e&&(B.credentials="include"),Y.headers&&pn(Y.headers)[Ot]>0&&(B[Pd]=Y[Pd]);var X=function(xe,fe,$e){le||(le=!0,ft(Ce,xe,fe,$e),Tm($e))},Q=function(){le||(le=!0,ft(Ce,0,{}))};fetch(oe,B).then(function(xe){var fe={},$e=pl,dt=xe[Pd];dt&&dt.forEach(function(vr,pr){fe[pr]=vr}),xe.body?xe.text().then(function(vr){$e=vr,X(xe.status,fe,$e)},Q):X(xe.status,fe,"")}).catch(Q),be&&!le&&(le=!0,ft(Ce,200,{})),!le&&Y[eg]>0&&ce.set(function(){le||(le=!0,ft(Ce,500,{}))},Y[eg])}function Ye(Y,Ce,F){var $=Y[uE];function oe(X,Q,xe){if(!X[xe]&&Q&&Q[rK]){var fe=Q[rK](xe);fe&&(X[xe]=It(fe))}return X}function be(X){var Q={};return X[nK]?Q=j0(X[nK]()):(Q=oe(Q,X,YW),Q=oe(Q,X,zW),Q=oe(Q,X,nTe)),Q}function le(X,Q){ft(Ce,X.status,be(X),Q)}F&&Y[YO]&&(F=!1);var B=wO(NO,$,_e,!0,F,Y[eg]);me(Y[Pd],function(X,Q){B.setRequestHeader(X,Q)}),B.onload=function(){var X=RTe(B);le(B,X),Tm(X)},B.onerror=function(){le(B)},B[tK]=function(){le(B)},B.send(Y[ml])}function ft(Y,Ce,F,$){try{Y(Ce,F,$)}catch(oe){vn(p,2,518,de(oe))}}function Ht(Y,Ce,F){var $=Y,oe=200,be=$[lE],le=Y[uE]+(J?wTe:pl);try{var B=mr();if(!B.sendBeacon(le,Y[ml]))if(be){var X=!!m.getPlugin("LocalStorage"),Q=[],xe=[];K(be[Ms],function(fe){if(Q&&fe&&fe[Ii]()>0)for(var $e=fe[Ad](),dt=0;dt<$e[Ot];dt++)if(B.sendBeacon(le,y.getEventBlob($e[dt])))xe[So](fe[dt]);else{Q[So](fe[fl](dt));break}else Q[So](fe[fl](0))}),xe[Ot]>0&&(be.sentEvts=xe),X||fa(Q,8003,be[Fa],!0)}else oe=0}catch(fe){Cf(p,"Failed to send telemetry using sendBeacon API. Ex:"+de(fe)),oe=0}finally{ft(Ce,oe,{},pl)}}function Te(Y){return Y===2||Y===3}function Be(Y){return S&&Te(Y)&&(Y=2),Y}V.addHeader=function(Y,Ce){v[Y]=Ce},V[pw]=function(){return N()&&u[uw]()},V[dE]=function(Y,Ce){De(Y)&&(Y=0),S&&(Y=Be(Y),Ce=2),te(_,Y,0)&&re(H(),0,!1,Y,Ce||0)},V[$O]=function(){return!a&&l===0&&_[Ot]===0},V[fw]=function(Y){S=Y},V.addBatch=function(Y){if(Y&&Y[Ii]()>0){if(s.isTenantKilled(Y[pu]()))return!1;_[So](Y)}return!0},V.teardown=function(){_[Ot]>0&&re(H(),0,!0,2,2),K(D,function(Y){Y&&Y.rm&&Y.rm()}),D=[]},V.pause=function(){a=!0},V.resume=function(){a=!1,V[dE](0,4)},V[WO]=function(Y,Ce,F){Y&&Y[Ii]()>0&&(ie(Ce)&&(Ce=1),S&&(Ce=Be(Ce),F=2),re([Y],0,!1,Ce,F||0))};function N(){return!a&&l<r}function H(){var Y=_;return _=[],Y}function te(Y,Ce,F){var $=!1;return Y&&Y[Ot]>0&&!a&&f[Ce]&&y&&($=Ce!==0||N()&&(F>0||u[uw]())),$}function ne(Y){var Ce={};return Y&&K(Y,function(F,$){Ce[$]={iKey:F[pu](),evts:F[Ad]()}}),Ce}function re(Y,Ce,F,$,oe){if(!(!Y||Y[Ot]===0)){if(a){fa(Y,1,$);return}$=Be($);try{var be=Y,le=$!==0;li(m,function(){return"HttpManager:_sendBatches"},function(B){B&&(Y=Y.slice(0));for(var X=[],Q=null,xe=Ma(),fe=f[$]||(le?f[1]:f[0]),$e=fe&&fe[KO],dt=ve&&(S||Te($)||$e===3||fe._isSync&&$e===2);te(Y,$,Ce);){var vr=Y.shift();vr&&vr[Ii]()>0&&(s.isTenantKilled(vr[pu]())?X[So](vr):(Q=Q||y.createPayload(Ce,F,le,dt,oe,$),y.appendPayload(Q,vr,e)?Q.overflow!==null&&(Y=[Q.overflow][du](Y),Q.overflow=null,ht(Q,xe,Ma(),oe),xe=Ma(),Q=null):(ht(Q,xe,Ma(),oe),xe=Ma(),Y=[vr][du](Y),Q=null)))}Q&&ht(Q,xe,Ma(),oe),Y[Ot]>0&&(_=Y[du](_)),fa(X,8004,$)},function(){return{batches:ne(be),retryCount:Ce,isTeardown:F,isSynchronous:le,sendReason:oe,useSendBeacon:Te($),sendType:$}},!le)}catch(B){vn(p,2,48,"Unexpected Exception sending batch: "+de(B))}}}function Fe(Y,Ce){var F={url:o,hdrs:{},useHdrs:!1};Ce?(F[aE]=R_(F[aE],v),F.useHdrs=pn(F.hdrs)[Ot]>0):me(v,function(B,X){mK[B]?gE(F,mK[B],X,!1):(F[aE][B]=X,F[HO]=!0)}),gE(F,$W,"NO_AUTH",Ce),gE(F,LO,iE,Ce);var $=pl;K(Y.apiKeys,function(B){$[Ot]>0&&($+=","),$+=B}),gE(F,FO,$,Ce),gE(F,MO,Yt().toString(),Ce);var oe=ib(Y);if(To(oe)&&(F.url+="&ext.intweb.msfpc="+oe),u[qO]()&&gE(F,OO,u[GO](),Ce),m[pE]){var be=m[pE]();be>=0&&(F.url+="&w="+be)}for(var le=0;le<g[Ot];le++)F.url+="&"+g[le].name+"="+g[le].value;return F}function je(Y,Ce,F){Y[Ce]=Y[Ce]||{},Y[Ce][d.identifier]=F}function ht(Y,Ce,F,$){if(Y&&Y.payloadBlob&&Y.payloadBlob[Ot]>0){var oe=!!R,be=f[Y.sendType];!Te(Y[Fa])&&Y[iK]&&Y.sendReason===2&&(be=f[2]||f[3]||be);var le=O;(Y.isBeacon||be[KO]===3)&&(le=!1);var B=Fe(Y,le);le=le||B[HO];var X=Ma();li(m,function(){return"HttpManager:_doPayloadSend"},function(){for(var Q=0;Q<Y.batches[Ot];Q++)for(var xe=Y[Ms][Q],fe=xe[Ad](),$e=0;$e<fe[Ot];$e++){var dt=fe[$e];if(E){var vr=dt[mw]=dt[mw]||{};je(vr,"sendEventStart",X),je(vr,"serializationStart",Ce),je(vr,"serializationCompleted",F)}dt[pK]>0?dt[pK]++:dt[pK]=1}fa(Y[Ms],1e3+($||0),Y[Fa],!0);var pr={data:Y.payloadBlob,urlString:B.url,headers:B[aE],_thePayload:Y,_sendReason:$,timeout:U,disableXhrSync:W,disableFetchKeepAlive:L};le&&(ATe(pr[Pd],VW)||(pr[Pd][VW]=tTe),ATe(pr[Pd],kO)||(pr[Pd][kO]=jW));var Ni=null;be&&(Ni=function(Di){u[BO]();var Mc=function(Yr,qu){zr(Yr,qu,Y,$)},Ur=Y[XO]||Y[QO];try{be[JO](Di,Mc,Ur),k&&k(pr,Di,Ur,Y[iK])}catch(Yr){Cf(p,"Unexpected exception sending payload. Ex:"+de(Yr)),ft(Mc,0,{})}}),li(m,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Ni)if(Y[Fa]===0&&l++,oe&&!Y.isBeacon&&be[KO]!==3){var Di={data:pr[ml],urlString:pr[uE],headers:R_({},pr[Pd]),timeout:pr[eg],disableXhrSync:pr[YO],disableFetchKeepAlive:pr[JW]},Mc=!1;li(m,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{R(Di,function(Ur){Mc=!0,!h&&!Ur[lE]&&(Ur[lE]=Ur[lE]||pr[lE],Ur[dw]=Ur[dw]||pr[dw]),Ni(Ur)},Y.isSync||Y[XO])}catch{Mc||Ni(pr)}})}else Ni(pr)})},function(){return{thePayload:Y,serializationStart:Ce,serializationCompleted:F,sendReason:$}},Y[QO])}Y.sizeExceed&&Y.sizeExceed[Ot]>0&&fa(Y.sizeExceed,8003,Y[Fa]),Y.failedEvts&&Y.failedEvts[Ot]>0&&fa(Y.failedEvts,8002,Y[Fa])}function Ft(Y,Ce){E&&K(Y,function(F){var $=F[mw]=F[mw]||{};je($,"sendEventCompleted",Ce)})}function zr(Y,Ce,F,$){var oe=9e3,be=null,le=!1,B=!1;try{var X=!0;if(typeof Y!==Eo){if(Ce){u[lw](Ce[YW]);var Q=Ce[zW]||Ce["kill-duration-seconds"];K(s[ZO](Ce[rTe],Q),function(fe){K(F[Ms],function($e){if($e[pu]()===fe){be=be||[];var dt=$e[fl](0);F.numEvents-=dt[Ii](),be[So](dt)}})})}if(Y==200||Y==204){oe=200;return}(!bTe(Y)||F.numEvents<=0)&&(X=!1),oe=9e3+Y%1e3}if(X){oe=100;var xe=F.retryCnt;F[Fa]===0&&(xe<n?(le=!0,Em(function(){F[Fa]===0&&l--,re(F[Ms],xe+1,F[XO],S?2:F[Fa],5)},S,r5(xe))):(B=!0,S&&(oe=8001)))}}finally{le||(u[lw](),mi(F,oe,$,B)),fa(be,8004,F[Fa])}}function mi(Y,Ce,F,$){try{$&&d[e5]();var oe=Y[Ms];Ce===200&&(oe=Y.sentEvts||Y[Ms],!$&&!Y[QO]&&d._clearBackOff(),pa(oe)),fa(oe,Ce,Y[Fa],!0)}finally{Y[Fa]===0&&(l--,F!==5&&V.sendQueuedRequests(Y[Fa],F))}}function pa(Y){if(E){var Ce=Ma();K(Y,function(F){F&&F[Ii]()>0&&Ft(F[Ad](),Ce)})}}function Em(Y,Ce,F){Ce?Y():ce.set(Y,F)}function j0(Y){var Ce={};if(Ke(Y)){var F=It(Y)[fl](/[\r\n]+/);K(F,function($){if($){var oe=$.indexOf(": ");if(oe!==-1){var be=It($.substring(0,oe))[sE](),le=It($.substring(oe+1));Ce[be]=le}else Ce[It($)]=1}})}return Ce}function ib(Y){for(var Ce=0;Ce<Y.batches[Ot];Ce++){var F=Y[Ms][Ce].Msfpc();if(F)return encodeURIComponent(F)}return pl}function Tm(Y){var Ce=G;try{for(var F=0;F<Ce[Ot];F++)try{Ce[F](Y)}catch(oe){vn(p,1,519,"Response handler failed: "+oe)}if(Y){var $=JSON.parse(Y);To($.webResult)&&To($.webResult[oE])&&x.set("MSFPC",$.webResult[oE],365*86400)}}catch{}}function fa(Y,Ce,F,$){if(Y&&Y[Ot]>0&&i){var oe=i[V0(Ce)];if(oe){var be=F!==0;li(m,function(){return"HttpManager:_sendBatchesNotification"},function(){Em(function(){try{oe.call(i,Y,Ce,be,F)}catch(le){vn(p,1,74,"send request notification failed: "+le)}},$||be,0)},function(){return{batches:ne(Y),reason:Ce,isSync:be,sendSync:$,sendType:F}},!be)}}}function V0(Y){var Ce=fJe[Y];return To(Ce)||(Ce=eTe,Y>=9e3&&Y<=9999?Ce=ZEe:Y>=8e3&&Y<=8999?Ce=DO:Y>=1e3&&Y<=1999&&(Ce=JEe)),Ce}})}return t.__ieDyn=1,t}()});function xJe(t){return t&&t[JO]}var gJe,kTe,vJe,OTe,MTe,_Je,LTe,yJe,hK,O_,Io,bJe,FTe,UTe=T(()=>{Ei();tn();A_();yf();ye();GW();aK();DTe();cw();lK();dK();fE();gJe=.25,kTe=500,vJe=20,OTe=6,MTe=2,_Je=4,LTe=2,yJe=1,hK=1e4,O_="eventsDiscarded",Io=void 0,bJe=Zn({eventsLimitInMem:{isVal:Zh,v:hK},immediateEventLimit:{isVal:Zh,v:500},autoFlushEventsLimit:{isVal:Zh,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:xJe,v:Io},overrideInstrumentationKey:Io,overrideEndpointUrl:Io,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Io,clearTimeoutOverride:Io,payloadPreprocessor:Io,payloadListener:Io,disableEventTimings:Io,valueSanitizer:Io,stringifyObjects:Io,enableCompoundKey:Io,disableOptimizeObj:!1,transports:Io,unloadTransports:Io,useSendBeacon:Io,disableFetchKeepAlive:Io,avoidOptions:!1,xhrTimeout:Io,disableXhrSync:Io,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:xi,v:OTe},maxUnloadEventRetryAttempts:{isVal:xi,v:MTe},addNoResponse:Io});FTe=function(t){Ls(e,t);function e(){var r=t.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="4.0.4";var n,i=!1,o=[],s,a=!1,u=0,c,l=0,d,p={},f=P_,m,h,g,v,_,y,E,x,S,O,U,W,L,ve,J,D,R,k,G,M,ce,V;return ot(e,r,function(_e,ze){N(),_e._getDbgPlgTargets=function(){return[_,n]},_e[cE]=function(B,X,Q){li(X,function(){return"PostChannel:initialize"},function(){ze[cE](B,X,Q),G=X.getNotifyMgr();try{J=Nf(Ec(_e[hw]),X.evtNamespace&&X.evtNamespace()),_e._addHook(Oa(B,function(xe){var fe=xe.cfg,$e=Tc(null,fe,X);n=$e.getExtCfg(_e[hw],bJe),D=hE(n[jO],n[VO]),U=!n[lTe]&&CO(),R=n[dTe],Tt(X),d=n[oK],c=n.immediateEventLimit,E=n[sK],L=n.maxEventRetryAttempts,ve=n.maxUnloadEventRetryAttempts,k=n[pTe],le(),ce=n[fTe],V=!!n[mTe],M&&lt();var dt=fe.disablePageUnloadEvents||[];M=ew(St,dt,J),M=eE(St,dt,J)||M,M=tE(Ye,fe.disablePageShowEvents,J)||M})),_[cE](B,_e.core,_e)}catch(xe){throw _e.setInitialized(!1),xe}},function(){return{theConfig:B,core:X,extensions:Q}})},_e.processTelemetry=function(B,X){sw(B,_e[hw]),X=X||_e._getTelCtx(X);var Q=B;!V&&!i&&(ce&&(Q[pu]=ce),ft(Q,!0),W?ne(2,2):Be()),_e.processNext(Q,X)},_e._doTeardown=function(B,X){ne(2,2),i=!0,_.teardown(),lt(),N()};function lt(){tw(null,J),rw(null,J),nw(null,J)}function Tt(B){var X=B[pE];B[pE]=function(){var Q=0;return R&&(Q=Q|2),Q|X.call(B)}}function St(B){var X=B||gn().event;X.type!=="beforeunload"&&(W=!0,_[fw](W)),ne(2,2)}function Ye(B){W=!1,_[fw](W)}function ft(B,X){if(B[gw]||(B[gw]=0),B[tg]||(B[tg]=1),B.ext&&B.ext[KW]&&delete B.ext[KW],B.ext&&B.ext[UO]&&B.ext[UO].id&&delete B.ext[UO].id,U&&(B.ext=Tf(B.ext),B[t5]&&(B[t5]=Tf(B[t5])),B[ml]&&(B[ml]=Tf(B[ml]))),B[D_]){if(g||a)B[tg]=3,B[D_]=!1;else if(_){U&&(B=Tf(B)),_[WO](mE.create(B[pu],[B]),B[D_]===!0?1:B[D_],3);return}}var Q=B[tg],xe=l,fe=d;Q===4&&(xe=u,fe=c);var $e=!1;if(xe<fe)$e=!ht(B,X);else{var dt=1,vr=vJe;Q===4&&(dt=4,vr=1),$e=!0,Ft(B[pu],B[tg],dt,vr)&&($e=!ht(B,X))}$e&&V0(O_,[B],cl.QueueFull)}_e.setEventQueueLimits=function(B,X){n[oK]=d=Zh(B)?B:hK,n[sK]=E=Zh(X)?X:0,le();var Q=l>B;if(!Q&&x>0)for(var xe=1;!Q&&xe<=3;xe++){var fe=y[xe];fe&&fe[Ms]&&K(fe[Ms],function($e){$e&&$e[Ii]()>=x&&(Q=!0)})}je(!0,Q)},_e.pause=function(){te(),a=!0,_.pause()},_e.resume=function(){a=!1,_.resume(),Be()},_e._loadTransmitProfiles=function(B){j0(),me(B,function(X,Q){var xe=Q[Ot];if(xe>=2){var fe=xe>2?Q[2]:0;if(Q[N_](0,xe-2),Q[1]<0&&(Q[0]=-1),Q[1]>0&&Q[0]>0){var $e=Q[0]/Q[1];Q[0]=Math.ceil($e)*Q[1]}fe>=0&&Q[1]>=0&&fe>Q[1]&&(fe=Q[1]),Q[So](fe),p[X]=Q}})},_e.flush=function(B,X,Q){B===void 0&&(B=!0);var xe;if(!a)if(Q=Q||1,B)X||(xe=Ti(function($e){X=$e})),s==null?(te(),mi(1,0,Q),s=H(function(){s=null,pa(X,Q)},0)):o[So](X);else{var fe=te();Ht(1,1,Q),X&&X(),fe&&Be()}return xe},_e.setMsaAuthTicket=function(B){_.addHeader(aw,B)},_e.hasEvents=Te,_e._setTransmitProfile=function(B){f!==B&&p[B]!==void 0&&(te(),f=B,Be())},Ef(_e,function(){return _},["addResponseHandler"]);function Ht(B,X,Q){var xe=mi(B,X,Q);return _[dE](X,Q),xe}function Te(){return l>0}function Be(){if(S>=0&&mi(S,0,O)&&_[dE](0,O),u>0&&!h&&!a){var B=p[f][2];B>=0&&(h=H(function(){h=null,Ht(4,0,1),Be()},B))}var X=p[f][1];!m&&!s&&X>=0&&!a&&(Te()?m=H(function(){m=null,Ht(v===0?3:1,0,1),v++,v%=2,Be()},X):v=0)}_e[e5]=function(){g<_Je&&(g++,te(),Be())},_e._clearBackOff=function(){g&&(g=0,te(),Be())};function N(){n=null,i=!1,o=[],s=null,a=!1,u=0,c=500,l=0,d=hK,p={},f=P_,m=null,h=null,g=0,v=0,y={},E=0,M=!1,x=0,S=-1,O=null,U=!0,W=!1,L=OTe,ve=MTe,J=null,ce=null,V=!1,D=hE(),_=new NTe(kTe,LTe,yJe,{requeue:Tm,send:Ce,sent:F,drop:$,rspFail:oe,oth:be}),ib(),re(),le()}function H(B,X){X===0&&g&&(X=1);var Q=1e3;return g&&(Q=r5(g-1)),D.set(B,X*Q)}function te(){return m!==null?(m.cancel(),m=null,v=0,!0):!1}function ne(B,X){te(),s&&(s.cancel(),s=null),a||Ht(1,B,X)}function re(){y[4]={batches:[],iKeyMap:{}},y[3]={batches:[],iKeyMap:{}},y[2]={batches:[],iKeyMap:{}},y[1]={batches:[],iKeyMap:{}}}function Fe(B,X,Q){var xe=y[X];xe||(X=1,xe=y[X]);var fe=xe.iKeyMap[B];return!fe&&Q&&(fe=mE.create(B),xe.batches[So](fe),xe.iKeyMap[B]=fe),fe}function je(B,X){_[pw]()&&!g&&(E>0&&l>E&&(X=!0),X&&s==null&&_e.flush(B,function(){},20))}function ht(B,X){U&&(B=Tf(B));var Q=B[tg],xe=Fe(B[pu],Q,!0);return xe.addEvent(B)?(Q!==4?(l++,X&&B[gw]===0&&je(!B.sync,x>0&&xe[Ii]()>=x)):u++,!0):!1}function Ft(B,X,Q,xe){for(;Q<=X;){var fe=Fe(B,X,!0);if(fe&&fe[Ii]()>0){var $e=fe[fl](0,xe),dt=$e[Ii]();if(dt>0)return Q===4?u-=dt:l-=dt,Y(O_,[$e],cl.QueueFull),!0}Q++}return zr(),!1}function zr(){for(var B=0,X=0,Q=function(fe){var $e=y[fe];$e&&$e[Ms]&&K($e[Ms],function(dt){fe===4?B+=dt[Ii]():X+=dt[Ii]()})},xe=1;xe<=4;xe++)Q(xe);l=X,u=B}function mi(B,X,Q){var xe=!1,fe=X===0;return!fe||_[pw]()?li(_e.core,function(){return"PostChannel._queueBatches"},function(){for(var $e=[],dt=4;dt>=B;){var vr=y[dt];vr&&vr.batches&&vr.batches[Ot]>0&&(K(vr[Ms],function(pr){_.addBatch(pr)?xe=xe||pr&&pr[Ii]()>0:$e=$e[du](pr[Ad]()),dt===4?u-=pr[Ii]():l-=pr[Ii]()}),vr[Ms]=[],vr.iKeyMap={}),dt--}$e[Ot]>0&&V0(O_,$e,cl.KillSwitch),xe&&S>=B&&(S=-1,O=0)},function(){return{latency:B,sendType:X,sendReason:Q}},!fe):(S=S>=0?Math.min(S,B):B,O=Math.max(O,Q)),xe}function pa(B,X){Ht(1,0,X),zr(),Em(function(){B&&B(),o[Ot]>0?s=H(function(){s=null,pa(o.shift(),X)},0):(s=null,Be())})}function Em(B){_[$O]()?B():s=H(function(){s=null,Em(B)},gJe)}function j0(){te(),ib(),f=P_,Be()}function ib(){p={},p[P_]=[2,1,0],p[AO]=[6,3,0],p[PO]=[18,9,0]}function Tm(B,X){var Q=[],xe=L;W&&(xe=ve),K(B,function(fe){fe&&fe[Ii]()>0&&K(fe[Ad](),function($e){$e&&($e[D_]&&($e[tg]=4,$e[D_]=!1),$e[gw]<xe?(sw($e,_e[hw]),ft($e,!1)):Q[So]($e))})}),Q[Ot]>0&&V0(O_,Q,cl.NonRetryableStatus),W&&ne(2,2)}function fa(B,X){var Q=G||{},xe=Q[B];if(xe)try{xe.apply(Q,X)}catch(fe){vn(_e.diagLog(),1,74,B+" notification failed: "+fe)}}function V0(B,X){for(var Q=[],xe=2;xe<arguments.length;xe++)Q[xe-2]=arguments[xe];X&&X[Ot]>0&&fa(B,[X][du](Q))}function Y(B,X){for(var Q=[],xe=2;xe<arguments.length;xe++)Q[xe-2]=arguments[xe];X&&X[Ot]>0&&K(X,function(fe){fe&&fe[Ii]()>0&&fa(B,[fe.events()][du](Q))})}function Ce(B,X,Q){B&&B[Ot]>0&&fa("eventsSendRequest",[X>=1e3&&X<=1999?X-1e3:0,Q!==!0])}function F(B,X){Y("eventsSent",B,X),Be()}function $(B,X){Y(O_,B,X>=8e3&&X<=8999?X-8e3:cl.Unknown)}function oe(B){Y(O_,B,cl.NonRetryableStatus),Be()}function be(B,X){Y(O_,B,cl.Unknown),Be()}function le(){k?x=0:x=Math.max(kTe*(LTe+1),d/6)}}),r}return e.__ieDyn=1,e}(S_)});var BTe={};Fn(BTe,{BE_PROFILE:()=>PO,NRT_PROFILE:()=>AO,PostChannel:()=>FTe,RT_PROFILE:()=>P_});var qTe=T(()=>{GW();UTe()});var HTe=P(Nd=>{"use strict";var EJe=Nd&&Nd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TJe=Nd&&Nd.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),GTe=Nd&&Nd.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&EJe(e,t,r);return TJe(e,t),e};Object.defineProperty(Nd,"__esModule",{value:!0});Nd.oneDataSystemClientFactory=void 0;var SJe=async(t,e,r)=>{let n=await Promise.resolve().then(()=>GTe((A_(),ki(XEe)))),i=await Promise.resolve().then(()=>GTe((qTe(),ki(BTe)))),o=new n.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=l}let c=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(l=>{c&&(l.ext=l.ext??{},l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),o},IJe=async(t,e,r)=>{let n=await SJe(t,e,r);return{logEvent:(s,a)=>{try{n?.track({name:s,baseData:{name:s,properties:a?.properties,measurements:a?.measurements}})}catch(u){throw new Error(`Failed to log event to app insights!
`+u.message)}},flush:async()=>{try{return new Promise((a,u)=>{if(!n){a();return}n.flush(!0,c=>{if(!c){u("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!n){a();return}n.unload(!1,()=>{a(),n=void 0},1e3)})}};Nd.oneDataSystemClientFactory=IJe});var vE,gK,jTe=T(()=>{ye();vE=u2,gK=e3});var _E,M_,Gn,F_,vw,_w,Lf,yw,i5,hl,vK,Dd,VTe,o5,zTe,bw,YTe,s5,$Te,a5,yE,_K,yK,bK,bE,WTe,xK,EK,xw,fu=T(()=>{_E="toLowerCase",M_="blkVal",Gn="length",F_="rdOnly",vw="notify",_w="warnToConsole",Lf="throwInternal",yw="setDf",i5="watch",hl="logger",vK="apply",Dd="push",VTe="splice",o5="hdlr",zTe="cancel",bw="name",YTe="unload",s5="version",$Te="loggingLevelConsole",a5="messageId",yE="message",_K="diagLog",yK="userAgent",bK="split",bE="replace",WTe="logInternalMessage",xK="traceId",EK="spanId",xw="traceFlags"});function KTe(t,e){TK||(TK=hf("AggregationError",function(n,i){i[Gn]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw K(e,function(n,i){r+=`
`.concat(i," > ").concat(de(n))}),new TK(r,e||[])}var TK,XTe=T(()=>{ye();fu()});var QTe,ji,JTe,kd=T(()=>{QTe=void 0,ji="",JTe="Not dynamic - "});function Ew(t){return!ie(t)}function SK(t){var e=t;return e&&Ke(e)&&(e=e[bE](wJe,function(r,n){return n.toUpperCase()}),e=e[bE](RJe,"_"),e=e[bE](AJe,function(r,n){return"_"+n})),e}function c5(t,e){return t&&e?en(t,e)!==-1:!1}function Tw(t){return t&&t.toISOString()||""}function rg(t){return io(t)?t[bw]:ji}function IK(t){return function(){function e(){var r=this;t&&me(t,function(n,i){r[n]=i})}return e}()}var CJe,wJe,RJe,AJe,dBt,u5=T(()=>{ye();fu();kd();CJe="getPrototypeOf",wJe=/-([a-z])/g,RJe=/([^\w\d_$])/g,AJe=/^(\d+[\w\d_$])/,dBt=Object[CJe]});function AK(){return typeof console!==Eo?console:nt(PJe)}function xE(){return!!(typeof JSON===ts&&JSON||nt(ZTe)!==null)}function Sw(){return xE()?JSON||nt(ZTe):null}function PK(){return nt(NJe)}function NK(){return nt(DJe)}function DK(){var t=mr();if(t&&(t[yK]!==wK||CK===null)){wK=t[yK];var e=(wK||ji)[_E]();CK=c5(e,kJe)||c5(e,LJe)}return CK}function kK(t){return(RK===null||t===!1)&&(RK=Aa()&&!!mr().sendBeacon),RK}function eSe(t,e){if(t)for(var r=0;r<t[Gn];r++){var n=t[r];if(n[bw]&&n[bw]===e)return n}return{}}function LK(t){var e=fr();return e&&t?eSe(e.querySelectorAll("meta"),t).content:null}function OK(t){var e,r=ks();if(r){var n=r.getEntriesByType("navigation")||[];e=eSe((n[Gn]>0?n[0]:{}).serverTiming,t).description}return e}var PJe,ZTe,NJe,DJe,kJe,LJe,CK,wK,RK,Iw=T(()=>{"use strict";Ei();ye();fu();u5();kd();PJe="console",ZTe="JSON",NJe="crypto",DJe="msCrypto",kJe="msie",LJe="trident/",CK=null,wK=null,RK=null});function OJe(t){t<0&&(t>>>=0),Cw=rSe+t&ng,ww=nSe-t&ng,iSe=!0}function MJe(){try{var t=Yt()&2147483647;OJe((Math.random()*tSe^t)+t)}catch{}}function MK(t){return t>0?Math.floor(U_()/ng*(t+1))>>>0:0}function U_(t){var e=0,r=PK()||NK();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&ng),e===0&&DK()&&(iSe||MJe(),e=oSe()&ng),e===0&&(e=Math.floor(tSe*Math.random()|0)),t||(e>>>=0),e}function oSe(t){ww=36969*(ww&65535)+(ww>>16)&ng,Cw=18e3*(Cw&65535)+(Cw>>16)&ng;var e=(ww<<16)+(Cw&65535)>>>0&ng|0;return t||(e>>>=0),e}function FK(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=U_()>>>0,n=0,i=ji;i[Gn]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(U_()<<2&4294967295|r&3)>>>0,n=0);return i}var tSe,ng,rSe,nSe,iSe,Cw,ww,l5=T(()=>{ye();fu();Iw();kd();tSe=4294967296,ng=4294967295,rSe=123456789,nSe=987654321,iSe=!1,Cw=rSe,ww=nSe});function sSe(t,e){return e===void 0&&(e=!1),SK(t+BJe+++(e?"."+FJe:ji)+UJe)}var FJe,UJe,BJe,aSe=T(()=>{u5();kd();l5();FJe="3.0.6",UJe="."+FK(6),BJe=0});function d5(t){return t&&zt(t)&&(t.isVal||t.fb||Nr(t,"v")||Nr(t,"mrg")||Nr(t,"ref")||t.set)}function cSe(t,e,r){var n,i=r.dfVal||hd;if(e&&r.fb){var o=r.fb;ae(o)||(o=[o]);for(var s=0;s<o[Gn];s++){var a=o[s],u=e[a];if(i(u)?n=u:t&&(u=t.cfg[a],i(u)&&(n=u),t.set(t.cfg,Ir(a),u)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function UK(t,e,r){var n=r;if(r&&d5(r)&&(n=cSe(t,e,r)),n){d5(n)&&(n=UK(t,e,n));var i;ae(n)?(i=[],i[Gn]=n[Gn]):mt(n)&&(i={}),i&&(me(n,function(o,s){s&&d5(s)&&(s=UK(t,e,s)),i[o]=s}),n=i)}return n}function BK(t,e,r,n){var i,o,s,a=n,u,c,l,d;d5(a)?(i=a.isVal,o=a.set,l=a[F_],d=a[M_],u=a.mrg,c=a.ref,!c&&De(c)&&(c=!!u),s=cSe(t,e,a)):s=n,d&&t[M_](e,r);var p,f=!0,m=e[r];(m||!ie(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=UK(t,e,s):p=s:(mt(p)||ae(s))&&u&&s&&(mt(s)||ae(s))&&me(s,function(h,g){BK(t,p,h,g)}),t.set(e,r,p),c&&t.ref(e,r),l&&t[F_](e,r)}var uSe=T(()=>{ye();fu()});function qK(t){if(t){var e;if(ae(t)?(e=[],e[Gn]=t[Gn]):mt(t)&&(e={}),e)return me(t,function(r,n){e[r]=qK(n)}),e}return t}function dSe(t){if(t){var e=t[Ld]||t;if(e.cfg&&(e.cfg===t||e.cfg[Ld]===e))return e}return null}function pSe(t){if(t&&(mt(t)||ae(t)))try{t[lSe]=!0}catch{}return t}function p5(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[qJe],!n&&!r[lSe]&&(n=mt(r)||ae(r))),n}function f5(t){Lr("InvalidAccess:"+t)}var Ld,lSe,qJe,GK=T(()=>{ye();fu();Ld=os("[[ai_dynCfg_1]]"),lSe=os("[[ai_blkDynCfg_1]]"),qJe=os("[[ai_frcDynCfg_1]]")});function HJe(t,e,r){ae(e)&&K(GJe,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[vK](this,o);return Rw(t,e,r,"Patching"),a}})}function m5(t,e){var r=dc(t,e);return r&&r.get}function jJe(t,e,r,n){var i={n:r,h:[],trk:function(c){c&&c.fn&&(Qe(i.h,c)===-1&&i.h[Dd](c),t.trk(c,i))},clr:function(c){var l=Qe(i.h,c);l!==-1&&i.h[VTe](l,1)}},o=!0,s=!1;function a(){o&&(s=s||p5(a,t,n),n&&!n[Ld]&&s&&(n=Rw(t,n,r,"Converting")),o=!1);var c=t.act;return c&&i.trk(c),n}a[t.prop]={chng:function(){t.add(i)}};function u(c){if(n!==c){a[t.ro]&&!t.upd&&f5("["+r+"] is read-only:"+de(e)),o&&(s=s||p5(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){me(n,function(p){n[p]=c?c[p]:QTe});try{me(c,function(p,f){Aw(t,n,p,f)}),c=n}catch(p){EE((t.hdlr||{})[hl],r,"Assigning",p),s=!1}}else n&&n[Ld]&&me(n,function(p){var f=m5(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(c!==n){var d=c&&p5(a,t,c);!l&&d&&(c=Rw(t,c,r,"Converting")),n=c,s=d}t.add(i)}}Xe(e,i.n,{g:a,s:u})}function Aw(t,e,r,n){if(e){var i=m5(e,r),o=i&&!!i[t.prop];o?e[r]=n:jJe(t,e,r,n)}return e}function h5(t,e,r,n){if(e){var i=m5(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],u=n&&n[2];if(!o){if(u)try{pSe(e)}catch(c){EE((t.hdlr||{})[hl],r,"Blocking",c)}try{Aw(t,e,r,e[r]),i=m5(e,r)}catch(c){EE((t.hdlr||{})[hl],r,"State",c)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),u&&(i[t.blkVal]=!0)}return e}function Rw(t,e,r,n){try{me(e,function(i,o){Aw(t,e,i,o)}),e[Ld]||(mn(e,Ld,{get:function(){return t[o5]}}),HJe(t,e,r))}catch(i){EE((t.hdlr||{})[hl],r,n,i)}return e}var GJe,EE,fSe=T(()=>{ye();kd();fu();GK();GJe=["push","pop","shift","unshift","splice"],EE=function(t,e,r,n){t&&t[Lf](3,108,"".concat(r," [").concat(e,"] failed - ")+de(n))}});function mSe(t){var e,r=Pn(Pw+"get"+t.uid+Nw),n=Pn(Pw+"ro"+t.uid+Nw),i=Pn(Pw+"rf"+t.uid+Nw),o=Pn(Pw+"blkVal"+t.uid+Nw),s=Pn(Pw+"dtl"+t.uid+Nw),a=null,u=null,c;function l(m,h){var g=c.act;try{c.act=m,m&&m[s]&&(K(m[s],function(_){_.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[yw].bind(t),ref:t.ref.bind(t),rdOnly:t[F_].bind(t)})}catch(_){var v=t[hl];throw v&&v[Lf](1,107,de(_)),_}finally{c.act=g||null}}function d(){if(a){var m=a;a=null,u&&u[zTe](),u=null;var h=[];if(K(m,function(g){if(g&&(g[s]&&(K(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[Dd](v)}}),a)try{d()}catch(g){h[Dd](g)}h[Gn]>0&&KTe("Watcher error(s): ",h)}}function p(m){if(m&&m.h[Gn]>0){a||(a=[]),u||(u=Nn(function(){u=null,d()},0));for(var h=0;h<m.h[Gn];h++){var g=m.h[h];g&&Qe(a,g)===-1&&a[Dd](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];Qe(g,h)===-1&&g[Dd](h)}}return c=(e={prop:r,ro:n,rf:i},e[M_]=o,e[o5]=t,e.add=p,e[vw]=d,e.use=l,e.trk=f,e),c}var Pw,Nw,hSe=T(()=>{ye();XTe();fu();Pw="[[ai_",Nw="]]"});function VJe(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function zJe(t,e,r){var n,i=dSe(e);if(i)return i;var o=sSe("dyncfg",!0),s=e&&r!==!1?e:qK(e),a;function u(){a[vw]()}function c(v,_,y){try{v=Aw(a,v,_,y)}catch(E){EE(t,_,"Setting value",E)}return v[_]}function l(v){return VJe(a,v)}function d(v,_){a.use(null,function(y){var E=a.upd;try{De(_)||(a.upd=_),v(y)}finally{a.upd=E}})}function p(v,_){var y;return h5(a,v,_,(y={},y[0]=!0,y))[_]}function f(v,_){var y;return h5(a,v,_,(y={},y[1]=!0,y))[_]}function m(v,_){var y;return h5(a,v,_,(y={},y[2]=!0,y))[_]}function h(v,_){return _&&me(_,function(y,E){BK(g,v,y,E)}),v}var g=(n={uid:null,cfg:s},n[hl]=t,n[vw]=u,n.set=c,n[yw]=h,n[i5]=l,n.ref=p,n[F_]=f,n[M_]=m,n._block=d,n);return Xe(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=mSe(g),Rw(a,s,"config","Creating"),g}function YJe(t,e){t?(t[_w](e),t[Lf](2,108,e)):f5(e)}function g5(t,e,r,n){var i=zJe(r,t||{},n);return e&&i[yw](i.cfg,e),i}function Dw(t,e,r){var n=t[Ld]||t;return n.cfg&&(n.cfg===t||n.cfg[Ld]===n)?n[i5](e):(YJe(r,JTe+de(t)),g5(t,null,r)[i5](e))}var HK=T(()=>{ye();aSe();kd();fu();uSe();fSe();hSe();GK()});function $Je(){var t=nt("Microsoft");return t&&(v5=t.ApplicationInsights),v5}function gSe(t){var e=v5;return!e&&t.disableDbgExt!==!0&&(e=v5||$Je()),e?e.ChromeDbgExt:null}var v5,vSe=T(()=>{ye();v5=null});function _Se(t){return t?'"'+t[bE](/\"/g,ji)+'"':ji}function jK(t,e){var r=AK();if(r){var n="log";r[t]&&(n=t),Ne(r[n])&&r[n](e)}}function zK(t,e){return(t||{})[hl]||new YK(e)}function ZJe(t){return t||new YK}function ss(t,e,r,n,i,o){o===void 0&&(o=!1),ZJe(t)[Lf](e,r,n,i,o)}var TE,ySe,WJe,KJe,XJe,QJe,JJe,VK,YK,bSe=T(()=>{"use strict";tn();ye();HK();fu();vSe();Iw();kd();ySe="warnToConsole",WJe="AI (Internal): ",KJe="AI: ",XJe="AITR_",QJe={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},JJe=(TE={},TE[0]=null,TE[1]="errorToConsole",TE[2]=ySe,TE[3]="debugToConsole",TE);VK=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[a5]=e,o[yE]=(n?KJe:WJe)+e;var s=ji;xE()&&(s=Sw().stringify(i));var a=(r?" message:"+_Se(r):ji)+(i?" props:"+_Se(s):ji);o[yE]+=a}return t.dataType="MessageData",t}();YK=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,u;ot(t,this,function(c){u=d(e||{}),c.consoleLoggingLevel=function(){return i},c[Lf]=function(m,h,g,v,_){_===void 0&&(_=!1);var y=new VK(h,g,_,v);if(a)throw de(y);var E=JJe[m]||ySe;if(De(y[yE]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(_){var x=+y[a5];!n[x]&&i>=m&&(c[E](y[yE]),n[x]=!0)}else i>=m&&c[E](y[yE]);l(m,y)}},c.debugToConsole=function(m){jK("debug",m),f("warning",m)},c[_w]=function(m){jK("warn",m),f("warning",m)},c.errorToConsole=function(m){jK("error",m),f("error",m)},c.resetInternalMessageCount=function(){r=0,n={}},c[WTe]=l,c[YTe]=function(m){u&&u.rm(),u=null};function l(m,h){if(!p()){var g=!0,v=XJe+h[a5];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(c.queue[Dd](h),r++,f(m===1?"error":"warn",h)),r===s)){var _="Internal events throttle limit per PageView reached for this app.",y=new VK(23,_,!1);c.queue[Dd](y),m===1?c.errorToConsole(_):c[_w](_)}}}function d(m){return Dw(g5(m,QJe,c).cfg,function(h){var g=h.cfg;i=g[$Te],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=gSe(e||{});g&&g[_K]&&g[_K](m,h)}})}return t.__ieDyn=1,t}()});function $K(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=ji,r,n=0;n<4;n++)r=U_(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(U_()&3)|0];return is(e,0,8)+is(e,9,4)+"4"+is(e,13,3)+i+is(e,16,3)+is(e,19,12)}var xSe=T(()=>{"use strict";ye();kd();l5()});function Of(t,e,r){return t&&t[Gn]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function TSe(t,e,r){return Of(t,e)?t:r}function SSe(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[Gn]<2;)e="0"+e;return e}function XK(t,e,r,n){var i;return i={},i[s5]=Of(n,2,KK)?n:WK,i[xK]=SE(t)?t:$K(),i[EK]=IE(e)?e:pc($K(),16),i.traceFlags=r>=0&&r<=255?r:1,i}function kw(t,e){var r;if(!t||(ae(t)&&(t=t[0]||""),!t||!Ke(t)||t[Gn]>8192))return null;if(t.indexOf(",")!==-1){var n=t[bK](",");t=n[e>0&&n[Gn]>e?e:0]}var i=eZe.exec(It(t));return!i||i[1]===KK||i[2]===_5||i[3]===y5?null:(r={version:(i[1]||ji)[_E](),traceId:(i[2]||ji)[_E](),spanId:(i[3]||ji)[_E]()},r[xw]=parseInt(i[4],16),r)}function SE(t){return Of(t,32,_5)}function IE(t){return Of(t,16,y5)}function b5(t){return!(!t||!Of(t[s5],2,KK)||!Of(t[xK],32,_5)||!Of(t[EK],16,y5)||!Of(SSe(t[xw]),2))}function QK(t){return b5(t)?(t[xw]&ESe)===ESe:!1}function JK(t){if(t){var e=SSe(t[xw]);Of(e,2)||(e="01");var r=t[s5]||WK;return r!=="00"&&r!=="ff"&&(r=WK),"".concat(r.toLowerCase(),"-").concat(TSe(t.traceId,32,_5).toLowerCase(),"-").concat(TSe(t.spanId,16,y5).toLowerCase(),"-").concat(e.toLowerCase())}return""}function ZK(t){var e="traceparent",r=kw(LK(e),t);return r||(r=kw(OK(e),t)),r}var eZe,WK,KK,_5,y5,ESe,ISe=T(()=>{ye();fu();xSe();Iw();kd();eZe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,WK="00",KK="ff",_5="00000000000000000000000000000000",y5="0000000000000000",ESe=1});var Co=T(()=>{l5();u5();ye();jTe();Iw();Ei();bSe();ISe();HK()});var CE,wE,RE,Lw,ig,Od,ao,x5,mu=T(()=>{CE="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",wE="sampleRate",RE="ProcessLegacy",Lw="http.method",ig="https://dc.services.visualstudio.com",Od="/v2/track",ao="not_specified",x5="iKey"});var Mf,eX=T(()=>{Co();Mf=gK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Ff,yt,Md,og,Uf,E5,Vi,gl,sg,T5,S5,I5,tX,C5,w5,B_,AE,rX,Ow,q_,hu,Fs,Us,G_,Fd,H_,R5,A5,nX,j_,ag,Mw,Fw,V_,PE,z_,iX,wo=T(()=>{Ff="split",yt="length",Md="toLowerCase",og="ingestionendpoint",Uf="toString",E5="removeItem",Vi="name",gl="message",sg="count",T5="preTriggerDate",S5="disabled",I5="interval",tX="daysOfMonth",C5="date",w5="getUTCDate",B_="stringify",AE="pathname",rX="correlationHeaderExcludePatterns",Ow="extensionConfig",q_="exceptions",hu="parsedStack",Fs="properties",Us="measurements",G_="sizeInBytes",Fd="typeName",H_="severityLevel",R5="problemGroup",A5="isManual",nX="CreateFromInterface",j_="assembly",ag="fileName",Mw="hasFullStack",Fw="level",V_="method",PE="line",z_="duration",iX="receivedResponse"});function P5(t,e,r){var n=e[yt],i=oX(t,e);if(i[yt]!==n){for(var o=0,s=i;r[s]!==void 0;)o++,s=fn(i,0,147)+sX(o);i=s}return i}function oX(t,e){var r;return e&&(e=It(Ir(e)),e[yt]>150&&(r=fn(e,0,150),ss(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),r||e}function jr(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=It(Ir(e)),e[yt]>r&&(n=fn(e,0,r),ss(t,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}function cg(t,e){return k5(t,e,2048,66)}function NE(t,e){var r;return e&&e[yt]>32768&&(r=fn(e,0,32768),ss(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),r||e}function N5(t,e){var r;if(e){var n=""+e;n[yt]>32768&&(r=fn(n,0,32768),ss(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return r||e}function Bs(t,e){if(e){var r={};me(e,function(n,i){if(zt(i)&&xE())try{i=Sw()[B_](i)}catch(o){ss(t,2,49,"custom property is not valid",{exception:o},!0)}i=jr(t,i,8192),n=P5(t,n,r),r[n]=i}),e=r}return e}function qs(t,e){if(e){var r={};me(e,function(n,i){n=P5(t,n,r),r[n]=i}),e=r}return e}function D5(t,e){return e&&k5(t,e,128,69)[Uf]()}function k5(t,e,r,n){var i;return e&&(e=It(Ir(e)),e[yt]>r&&(i=fn(e,0,r),ss(t,2,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}function sX(t){var e="00"+t;return is(e,e[yt]-3)}var gu=T(()=>{Co();ye();wo()});function Y_(t){var e=wSe,r=tZe,n=r[e];return CSe.createElement?r[e]||(n=r[e]=CSe.createElement("a")):n={host:aX(t,!0)},n.href=t,e++,e>=r[yt]&&(e=0),wSe=e,n}function RSe(t){var e,r=Y_(t);return r&&(e=r.href),e}function ASe(t){var e,r=Y_(t);return r&&(e=r[AE]),e}function PSe(t,e){return t?t.toUpperCase()+" "+e:e}function aX(t,e){var r=Uw(t,e)||"";if(r){var n=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[yt]>3&&Ke(n[2])&&n[2][yt]>0)return n[2]+(n[3]||"")}return r}function Uw(t,e){var r=null;if(t){var n=t.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(n!=null&&n[yt]>2&&Ke(n[2])&&n[2][yt]>0&&(r=n[2]||"",e&&n[yt]>2)){var i=(n[1]||"")[Md](),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}var CSe,wSe,tZe,cX=T(()=>{Co();wo();CSe=fr()||{},wSe=0,tZe=[null,null,null,null,null]});function DE(t){return Qe(rZe,t[Md]())!==-1}function NSe(t){uX=t}function DSe(){return uX}function kSe(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t[rX]){for(var n=0;n<t.correlationHeaderExcludePatterns[yt];n++)if(t[rX][n].test(e))return!1}var i=Y_(e).host[Md]();if(i&&(en(i,":443")!==-1||en(i,":80")!==-1)&&(i=(Uw(e,!0)||"")[Md]()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var s;if(K(o,function(c){var l=new RegExp(c.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||l.test(i)}),!s)return!1}var a=t&&t.correlationHeaderExcludedDomains;if(!a||a[yt]===0)return!0;for(var n=0;n<a[yt];n++){var u=new RegExp(a[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(u.test(i))return!1}return i&&i[yt]>0}function LSe(t){if(t){var e=lX(t,Mf[1]);if(e&&e!==uX)return e}}function lX(t,e){if(t)for(var r=t[Ff](","),n=0;n<r[yt];++n){var i=r[n][Ff]("=");if(i[yt]===2&&i[0]===e)return i[1]}}function OSe(t,e,r,n){var i,o=n,s=n;if(e&&e[yt]>0){var a=Y_(e);if(i=a.host,!o)if(a[AE]!=null){var u=a.pathname[yt]===0?"/":a[AE];u.charAt(0)!=="/"&&(u="/"+u),s=a[AE],o=jr(t,r?r+" "+u:u)}else o=jr(t,e)}else i=n,o=n;return{target:i,name:o,data:s}}function MSe(){var t=ks();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return Yt()}function FSe(t,e){var r=null;return t!==0&&e!==0&&!ie(t)&&!ie(e)&&(r=e-t),r}function USe(t,e){var r=t||{};return{getName:function(){return r[Vi]},setName:function(n){e&&e.setName(n),r[Vi]=n},getTraceId:function(){return r.traceID},setTraceId:function(n){e&&e.setTraceId(n),SE(n)&&(r.traceID=n)},getSpanId:function(){return r.parentID},setSpanId:function(n){e&&e.setSpanId(n),IE(n)&&(r.parentID=n)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(n){e&&e.setTraceFlags(n),r.traceFlags=n}}}var rZe,uX,dX=T(()=>{Co();ye();mu();eX();gu();cX();wo();rZe=[ig+Od,"https://breeze.aimon.applicationinsights.io"+Od,"https://dc-int.services.visualstudio.com"+Od],uX="cid-v1:"});var kE,BSe,pX=T(()=>{Co();kE=vE({LocalStorage:0,SessionStorage:1}),BSe=vE({AI:0,AI_AND_W3C:1,W3C:2})});function fX(){return LE()?L5(kE.LocalStorage):null}function L5(t){try{if(ie(Gi()))return null;var e=new Date()[Uf](),r=nt(t===kE.LocalStorage?"localStorage":"sessionStorage"),n=qSe+e;r.setItem(n,e);var i=r.getItem(n)!==e;if(r[E5](n),!i)return r}catch{}return null}function mX(){return $_()?L5(kE.SessionStorage):null}function GSe(){ug=!1,lg=!1}function O5(t){qSe=t||""}function HSe(){ug=LE(!0),lg=$_(!0)}function LE(t){return(t||ug===void 0)&&(ug=!!L5(kE.LocalStorage)),ug}function M5(t,e){var r=fX();if(r!==null)try{return r.getItem(e)}catch(n){ug=!1,ss(t,2,1,"Browser failed read of local storage. "+rg(n),{exception:de(n)})}return null}function F5(t,e,r){var n=fX();if(n!==null)try{return n.setItem(e,r),!0}catch(i){ug=!1,ss(t,2,3,"Browser failed write to local storage. "+rg(i),{exception:de(i)})}return!1}function jSe(t,e){var r=fX();if(r!==null)try{return r[E5](e),!0}catch(n){ug=!1,ss(t,2,5,"Browser failed removal of local storage item. "+rg(n),{exception:de(n)})}return!1}function $_(t){return(t||lg===void 0)&&(lg=!!L5(kE.SessionStorage)),lg}function VSe(){var t=[];return $_()&&me(nt("sessionStorage"),function(e){t.push(e)}),t}function U5(t,e){var r=mX();if(r!==null)try{return r.getItem(e)}catch(n){lg=!1,ss(t,2,2,"Browser failed read of session storage. "+rg(n),{exception:de(n)})}return null}function B5(t,e,r){var n=mX();if(n!==null)try{return n.setItem(e,r),!0}catch(i){lg=!1,ss(t,2,4,"Browser failed write to session storage. "+rg(i),{exception:de(i)})}return!1}function zSe(t,e){var r=mX();if(r!==null)try{return r[E5](e),!0}catch(n){lg=!1,ss(t,2,6,"Browser failed removal of session storage item. "+rg(n),{exception:de(n)})}return!1}var ug,lg,qSe,hX=T(()=>{Co();pX();wo();ug=void 0,lg=void 0,qSe=""});var nZe,YSe,$Se=T(()=>{Co();ye();hX();wo();nZe="appInsightsThrottle",YSe=function(){function t(e,r){var n=this,i,o,s,a,u,c,l,d=!1,p=!1;m(),n._getDbgPlgTargets=function(){return[l]},n.getConfig=function(){return s},n.canThrottle=function(R){var k=ve(R),G=h(R);return _(G,i,k)},n.isTriggered=function(R){return J(R)},n.isReady=function(){return d},n.flush=function(R){try{var k=D(R);if(k&&k[yt]>0){var G=k.slice(0);return l[R]=[],K(G,function(M){f(M.msgID,M[gl],M.severity,!1)}),!0}}catch{}return!1},n.flushAll=function(){try{if(l){var R=!0;return me(l,function(k){var G=n.flush(parseInt(k));R=R&&G}),R}}catch{}return!1},n.onReadyState=function(R,k){return k===void 0&&(k=!0),d=ie(R)?!0:R,d&&k?n.flushAll():null},n.sendMessage=function(R,k,G){return f(R,k,G,!0)};function f(R,k,G,M){if(d){var ce=L(R);if(!ce)return;var V=h(R),_e=ve(R),ze=_(V,i,_e),lt=!1,Tt=0,St=J(R);try{ze&&!St?(Tt=Math.min(V.limit.maxSendNumber,_e[sg]+1),_e[sg]=0,lt=!0,u[R]=!0,_e[T5]=new Date):(u[R]=ze,_e[sg]+=1);var Ye=y(R);O(o,Ye,_e);for(var ft=0;ft<Tt;ft++)W(R,o,k,G)}catch{}return{isThrottled:lt,throttleNum:Tt}}else if(M){var Ht=D(R);Ht.push({msgID:R,message:k,severity:G})}return null}function m(){o=zK(e),u={},a={},l={},s={},g(109),c=Ew(r)?r:"",e.addUnloadHook(Dw(e.config,function(R){var k=R.cfg;i=LE();var G=k.throttleMgrCfg||{};me(G,function(M,ce){g(parseInt(M),ce)})}))}function h(R){return s[R]||s[109]}function g(R,k){var G,M;try{var ce=k||{},V={};V[S5]=!!ce[S5];var _e=ce[I5]||{};p=_e?.daysOfMonth&&_e?.daysOfMonth[yt]>0,V[I5]=v(_e);var ze={samplingRate:((G=ce.limit)===null||G===void 0?void 0:G.samplingRate)||100,maxSendNumber:((M=ce.limit)===null||M===void 0?void 0:M.maxSendNumber)||1};V.limit=ze,s[R]=V}catch{}}function v(R){R=R||{};var k=R?.monthInterval,G=R?.dayInterval;return ie(k)&&ie(G)&&(R.monthInterval=3,p||(R[tX]=[28],p=!0)),R={monthInterval:R?.monthInterval,dayInterval:R?.dayInterval,daysOfMonth:R?.daysOfMonth},R}function _(R,k,G){if(R&&!R[S5]&&k&&Ew(G)){var M=S(),ce=G[C5],V=R[I5],_e=1;if(V?.monthInterval){var ze=(M.getUTCFullYear()-ce.getUTCFullYear())*12+M.getUTCMonth()-ce.getUTCMonth();_e=U(V.monthInterval,0,ze)}var lt=1;if(p)lt=Qe(V[tX],M[w5]());else if(V?.dayInterval){var Tt=Math.floor((M.getTime()-ce.getTime())/864e5);lt=U(V.dayInterval,0,Tt)}return _e>=0&&lt>=0}return!1}function y(R,k){var G=Ew(k)?k:"";return R?nZe+G+"-"+R:null}function E(R){try{if(R){var k=new Date;return R.getUTCFullYear()===k.getUTCFullYear()&&R.getUTCMonth()===k.getUTCMonth()&&R[w5]()===k[w5]()}}catch{}return!1}function x(R,k,G){try{var M={date:S(),count:0};if(R){var ce=JSON.parse(R),V={date:S(ce[C5])||M[C5],count:ce[sg]||M[sg],preTriggerDate:ce.preTriggerDate?S(ce[T5]):void 0};return V}else return O(k,G,M),M}catch{}return null}function S(R){try{if(R){var k=new Date(R);if(!isNaN(k.getDate()))return k}else return new Date}catch{}return null}function O(R,k,G){try{return F5(R,k,It(JSON[B_](G)))}catch{}return!1}function U(R,k,G){return R<=0?1:G>=k&&(G-k)%R==0?Math.floor((G-k)/R)+1:-1}function W(R,k,G,M){ss(k,M||1,R,G)}function L(R){try{var k=h(R);return MK(1e6)<=k.limit.samplingRate}catch{}return!1}function ve(R){try{var k=a[R];if(!k){var G=y(R,c);k=x(M5(o,G),o,G),a[R]=k}return a[R]}catch{}return null}function J(R){var k=u[R];if(ie(k)){k=!1;var G=ve(R);G&&(k=E(G[T5])),u[R]=k}return u[R]}function D(R){return l=l||{},ie(l[R])&&(l[R]=[]),l[R]}}return t}()});function Bw(t){if(!t)return{};var e=t[Ff](iZe),r=mf(e,function(i,o){var s=o[Ff](oZe);if(s[yt]===2){var a=s[0][Md](),u=s[1];i[a]=u}return i},{});if(pn(r)[yt]>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r[og]=r[og]||"https://"+n+"dc."+r.endpointsuffix}r[og]=r[og]||ig,vc(r[og],"/")&&(r[og]=r[og].slice(0,-1))}return r}var iZe,oZe,WSe,KSe=T(()=>{Co();mu();wo();iZe=";",oZe="=";WSe={parse:Bw}});var q5,XSe=T(()=>{Co();mu();wo();gu();q5=function(){function t(e,r,n){var i=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[Vi]=jr(e,n)||ao,o.data=r,o.time=Tw(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return i.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Ud,QSe=T(()=>{mu();wo();gu();Ud=function(){function t(e,r,n,i){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var o=this;o.ver=2,o[Vi]=jr(e,r)||ao,o[Fs]=Bs(e,n),o[Us]=qs(e,i)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function yX(t,e){var r=t;return r&&!Ke(r)&&(JSON&&JSON[B_]?(r=JSON[B_](t),e&&(!r||r==="{}")&&(Ne(t[Uf])?r=t[Uf]():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}function rIe(t,e){var r=t;return t&&(r&&!Ke(r)&&(r=t[_X]||t[tIe]||r),r&&!Ke(r)&&(r=yX(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&en(r||"",e)===-1&&(r=e+": "+r),r||""}function aZe(t){try{if(zt(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function cZe(t){try{if(zt(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function ZSe(t){return t&&t.src&&Ke(t.src)&&t.obj&&ae(t.obj)}function W_(t){var e=t||"";Ke(e)||(Ke(e[Ua])?e=e[Ua]:e=""+e);var r=e[Ff](`
`);return{src:e,obj:r}}function uZe(t){for(var e=[],r=t[Ff](`
`),n=0;n<r[yt];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e.push(i)}return{src:t,obj:e}}function nIe(t){var e=null;if(t)try{if(t[Ua])e=W_(t[Ua]);else if(t[OE]&&t[OE][Ua])e=W_(t[OE][Ua]);else if(t.exception&&t.exception[Ua])e=W_(t.exception[Ua]);else if(ZSe(t))e=t;else if(ZSe(t[vX]))e=t[vX];else if(gn()&&gn().opera&&t[_X])e=uZe(t[gl]);else if(t.reason&&t.reason[Ua])e=W_(t.reason[Ua]);else if(Ke(t))e=W_(t);else{var r=t[_X]||t[tIe]||"";Ke(t[JSe])&&(r&&(r+=`
`),r+=" from "+t[JSe]),r&&(e=W_(r))}}catch(n){e=W_(n)}return e||{src:"",obj:null}}function lZe(t){var e="";return t&&(t.obj?K(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}function dZe(t){var e,r=t.obj;if(r&&r[yt]>0){e=[];var n=0,i=0;K(r,function(m){var h=m[Uf]();if(bX.regex.test(h)){var g=new bX(h,n++);i+=g[G_],e.push(g)}});var o=32*1024;if(i>o)for(var s=0,a=e[yt]-1,u=0,c=s,l=a;s<a;){var d=e[s][G_],p=e[a][G_];if(u+=d+p,u>o){var f=l-c+1;e.splice(c,f);break}c=s,l=a,s++,a--}}return e}function G5(t){var e="";if(t&&(e=t.typeName||t[Vi]||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor[Uf]());e=n&&n[yt]>1?n[1]:""}catch{}return e}function gX(t){if(t)try{if(!Ke(t)){var e=G5(t),r=yX(t,!1);return(!r||r==="{}")&&(t[OE]&&(t=t[OE],e=G5(t)),r=yX(t,!0)),en(r,e)!==0&&e!=="String"?e+":"+r:r}}catch{}return""+(t||"")}var sZe,OE,Ua,vX,JSe,_X,tIe,dg,eIe,bX,iIe=T(()=>{Ei();Co();ye();mu();wo();gu();sZe="<no_method>",OE="error",Ua="stack",vX="stackDetails",JSe="errorSrc",_X="message",tIe="description";dg=function(){function t(e,r,n,i,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,cZe(r)?(a[q_]=r[q_]||[],a[Fs]=r[Fs],a[Us]=r[Us],r[H_]&&(a[H_]=r[H_]),r.id&&(a.id=r.id),r[R5]&&(a[R5]=r[R5]),ie(r[A5])||(a[A5]=r[A5])):(n||(n={}),a[q_]=[new eIe(e,r,n)],a[Fs]=Bs(e,n),a[Us]=qs(e,i),o&&(a[H_]=o),s&&(a.id=s))}return t.CreateAutoException=function(e,r,n,i,o,s,a,u){var c,l=G5(o||s||e);return c={},c[gl]=rIe(e,l),c.url=r,c.lineNumber=n,c.columnNumber=i,c.error=gX(o||s||e),c.evt=gX(s||e),c[Fd]=l,c.stackDetails=nIe(a||o||s),c.errorSrc=u,c},t.CreateFromInterface=function(e,r,n,i){var o=r[q_]&&gc(r[q_],function(a){return eIe[nX](e,a)}),s=new t(e,cu(cu({},r),{exceptions:o}),n,i);return s},t.prototype.toInterface=function(){var e,r=this,n=r.exceptions,i=r.properties,o=r.measurements,s=r.severityLevel,a=r.problemGroup,u=r.id,c=r.isManual,l=n instanceof Array&&gc(n,function(d){return d.toInterface()})||void 0;return e={ver:"4.0"},e[q_]=l,e.severityLevel=s,e.properties=i,e.measurements=o,e.problemGroup=a,e.id=u,e.isManual=c,e},t.CreateSimpleException=function(e,r,n,i,o,s){var a;return{exceptions:[(a={},a[Mw]=!0,a.message=e,a.stack=o,a.typeName=r,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=gX,t}(),eIe=function(){function t(e,r,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var i=this;if(aZe(r))i[Fd]=r[Fd],i[gl]=r[gl],i[Ua]=r[Ua],i[hu]=r[hu]||[],i[Mw]=r[Mw];else{var o=r,s=o&&o.evt;io(o)||(o=o[OE]||s||o),i[Fd]=jr(e,G5(o))||ao,i[gl]=NE(e,rIe(r||o,i[Fd]))||ao;var a=r[vX]||nIe(r);i[hu]=dZe(a),ae(i[hu])&&gc(i[hu],function(u){u[j_]=jr(e,u[j_]),u[ag]=jr(e,u[ag])}),i[Ua]=N5(e,lZe(a)),i.hasFullStack=ae(i.parsedStack)&&i.parsedStack[yt]>0,n&&(n[Fd]=n[Fd]||i[Fd])}}return t.prototype.toInterface=function(){var e,r=this,n=r[hu]instanceof Array&&gc(r[hu],function(o){return o.toInterface()}),i=(e={id:r.id,outerId:r.outerId,typeName:r[Fd],message:r[gl],hasFullStack:r[Mw],stack:r[Ua]},e[hu]=n||void 0,e);return i},t.CreateFromInterface=function(e,r){var n=r[hu]instanceof Array&&gc(r[hu],function(o){return bX[nX](o)})||r[hu],i=new t(e,cu(cu({},r),{parsedStack:n}));return i},t}(),bX=function(){function t(e,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[G_]=0,typeof e=="string"){var i=e;n[Fw]=r,n[V_]=sZe,n[j_]=It(i),n[ag]="",n[PE]=0;var o=i.match(t.regex);o&&o[yt]>=5&&(n[V_]=It(o[2])||n[V_],n[ag]=It(o[4]),n[PE]=parseInt(o[5])||0)}else n[Fw]=e[Fw],n[V_]=e[V_],n[j_]=e[j_],n[ag]=e[ag],n[PE]=e[PE],n[G_]=0;n.sizeInBytes+=n.method[yt],n.sizeInBytes+=n.fileName[yt],n.sizeInBytes+=n.assembly[yt],n[G_]+=t.baseSize,n.sizeInBytes+=n.level.toString()[yt],n.sizeInBytes+=n.line.toString()[yt]}return t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){var e=this;return{level:e[Fw],method:e[V_],assembly:e[j_],fileName:e[ag],line:e[PE]}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}()});var oIe,sIe=T(()=>{oIe=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var Bd,aIe=T(()=>{mu();wo();sIe();gu();Bd=function(){function t(e,r,n,i,o,s,a,u,c){this.aiDataContract={ver:1,metrics:1,properties:0};var l=this;l.ver=2;var d=new oIe;d[sg]=i>0?i:void 0,d.max=isNaN(s)||s===null?void 0:s,d.min=isNaN(o)||o===null?void 0:o,d[Vi]=jr(e,r)||ao,d.value=n,d.stdDev=isNaN(a)||a===null?void 0:a,l.metrics=[d],l[Fs]=Bs(e,u),l[Us]=qs(e,c)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function cIe(t,e){return e===void 0&&(e=!1),t==null?e:t.toString()[Md]()==="true"}function ME(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=qw+t%1e3,r=qw+Math.floor(t/1e3)%60,n=qw+Math.floor(t/(1e3*60))%60,i=qw+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e[yt]===1?"00"+e:e[yt]===2?"0"+e:e,r=r[yt]<2?"0"+r:r,n=n[yt]<2?"0"+n:n,i=i[yt]<2?"0"+i:i,(o>0?o+".":qw)+i+":"+n+":"+r+"."+e}function uIe(t,e){var r=null;return K(t,function(n){if(n.identifier===e)return r=n,-1}),r}function lIe(t,e,r,n,i){return!i&&Ke(t)&&(t==="Script error."||t==="Script error")}var qw,H5=T(()=>{Co();wo();qw=""});var pg,dIe=T(()=>{mu();H5();wo();gu();pg=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var u=this;u.ver=2,u.id=D5(e,a),u.url=cg(e,n),u[Vi]=jr(e,r)||ao,isNaN(i)||(u[z_]=ME(i)),u[Fs]=Bs(e,o),u[Us]=qs(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var fg,pIe=T(()=>{H5();dX();wo();gu();fg=function(){function t(e,r,n,i,o,s,a,u,c,l,d,p){c===void 0&&(c="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var f=this;f.ver=2,f.id=r,f[z_]=ME(o),f.success=s,f.resultCode=a+"",f.type=jr(e,c);var m=OSe(e,n,u,i);f.data=cg(e,i)||m.data,f.target=jr(e,m.target),l&&(f.target="".concat(f.target," | ").concat(l)),f[Vi]=jr(e,m[Vi]),f[Fs]=Bs(e,d),f[Us]=qs(e,p)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var mg,fIe=T(()=>{mu();wo();gu();mg=function(){function t(e,r,n,i,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,r=r||ao,s[gl]=NE(e,r),s[Fs]=Bs(e,i),s[Us]=qs(e,o),n&&(s[H_]=n)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var hg,mIe=T(()=>{mu();wo();gu();hg=function(){function t(e,r,n,i,o,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var u=this;u.ver=2,u.url=cg(e,n),u[Vi]=jr(e,r)||ao,u[Fs]=Bs(e,o),u[Us]=qs(e,s),a&&(u.domProcessing=a.domProcessing,u[z_]=a[z_],u.networkConnect=a.networkConnect,u.perfTotal=a.perfTotal,u[iX]=a[iX],u.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var qd,hIe=T(()=>{qd=function(){function t(e,r){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=r}return t}()});var j5,gIe=T(()=>{Co();j5=vE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});var vIe,_Ie=T(()=>{Co();wo();vIe=function(){function t(){}return t.getConfig=function(e,r,n,i){i===void 0&&(i=!1);var o;return n&&e[Ow]&&e[Ow][n]&&!ie(e[Ow][n][r])?o=e[Ow][n][r]:o=e[r],ie(o)?i:o},t}()});function vg(t){var e="ai."+t+".";return function(r){return e+r}}var Gw,co,V5,FE,xX,gg,K_,Hw,UE,EX=T(()=>{Ei();Co();Gw=vg("application"),co=vg("device"),V5=vg("location"),FE=vg("operation"),xX=vg("session"),gg=vg("user"),K_=vg("cloud"),Hw=vg("internal"),UE=function(t){Ls(e,t);function e(){return t.call(this)||this}return e}(IK({applicationVersion:Gw("ver"),applicationBuild:Gw("build"),applicationTypeId:Gw("typeId"),applicationId:Gw("applicationId"),applicationLayer:Gw("layer"),deviceId:co("id"),deviceIp:co("ip"),deviceLanguage:co("language"),deviceLocale:co("locale"),deviceModel:co("model"),deviceFriendlyName:co("friendlyName"),deviceNetwork:co("network"),deviceNetworkName:co("networkName"),deviceOEMName:co("oemName"),deviceOS:co("os"),deviceOSVersion:co("osVersion"),deviceRoleInstance:co("roleInstance"),deviceRoleName:co("roleName"),deviceScreenResolution:co("screenResolution"),deviceType:co("type"),deviceMachineName:co("machineName"),deviceVMName:co("vmName"),deviceBrowser:co("browser"),deviceBrowserVersion:co("browserVersion"),locationIp:V5("ip"),locationCountry:V5("country"),locationProvince:V5("province"),locationCity:V5("city"),operationId:FE("id"),operationName:FE("name"),operationParentId:FE("parentId"),operationRootId:FE("rootId"),operationSyntheticSource:FE("syntheticSource"),operationCorrelationVector:FE("correlationVector"),sessionId:xX("id"),sessionIsFirst:xX("isFirst"),sessionIsNew:xX("isNew"),userAccountAcquisitionDate:gg("accountAcquisitionDate"),userAccountId:gg("accountId"),userAgent:gg("userAgent"),userId:gg("id"),userStoreRegion:gg("storeRegion"),userAuthUserId:gg("authUserId"),userAnonymousUserAcquisitionDate:gg("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:gg("authUserAcquisitionDate"),cloudName:K_("name"),cloudRole:K_("role"),cloudRoleVer:K_("roleVer"),cloudRoleInstance:K_("roleInstance"),cloudEnvironment:K_("environment"),cloudLocation:K_("location"),cloudDeploymentUnit:K_("deploymentUnit"),internalNodeName:Hw("nodeName"),internalSdkVersion:Hw("sdkVersion"),internalAgentVersion:Hw("agentVersion"),internalSnippet:Hw("snippet"),internalSdkSrc:Hw("sdkSrc")}))});function TX(t,e,r,n,i,o){var s;r=jr(n,r)||ao,(ie(t)||ie(e)||ie(r))&&Zt("Input doesn't contain all required fields");var a="";t[x5]&&(a=t[x5],delete t[x5]);var u=(s={},s[Vi]=r,s.time=Tw(new Date),s.iKey=a,s.ext=o||{},s.tags=[],s.data={},s.baseType=e,s.baseData=t,s);return ie(i)||me(i,function(c,l){u.data[c]=l}),u}var yIe,bIe=T(()=>{Co();mu();gu();wo();yIe=function(){function t(){}return t.create=TX,t}()});var xIe,zi,EIe=T(()=>{EX();xIe={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},zi=new UE});function TIe(t){var e=null;if(Ne(Event))e=new Event(t);else{var r=fr();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}var SIe=T(()=>{Co()});var IIe={};Fn(IIe,{AnalyticsPluginIdentifier:()=>fZe,BreezeChannelIdentifier:()=>SX,ConfigurationManager:()=>vIe,ConnectionStringParser:()=>WSe,ContextTagKeys:()=>UE,CtxTagKeys:()=>zi,DEFAULT_BREEZE_ENDPOINT:()=>ig,DEFAULT_BREEZE_PATH:()=>Od,Data:()=>qd,DisabledPropertyName:()=>CE,DistributedTracingModes:()=>BSe,Envelope:()=>q5,Event:()=>Ud,Exception:()=>dg,Extensions:()=>xIe,HttpMethod:()=>Lw,Metric:()=>Bd,PageView:()=>pg,PageViewPerformance:()=>hg,ProcessLegacy:()=>RE,PropertiesPluginIdentifier:()=>pZe,RemoteDependencyData:()=>fg,RequestHeaders:()=>Mf,SampleRate:()=>wE,SeverityLevel:()=>j5,TelemetryItemCreator:()=>yIe,ThrottleMgr:()=>YSe,Trace:()=>mg,correlationIdCanIncludeCorrelationHeader:()=>kSe,correlationIdGetCorrelationContext:()=>LSe,correlationIdGetCorrelationContextValue:()=>lX,correlationIdGetPrefix:()=>DSe,correlationIdSetPrefix:()=>NSe,createDistributedTraceContextFromTrace:()=>USe,createDomEvent:()=>TIe,createTelemetryItem:()=>TX,createTraceParent:()=>XK,dataSanitizeException:()=>N5,dataSanitizeId:()=>D5,dataSanitizeInput:()=>k5,dataSanitizeKey:()=>oX,dataSanitizeKeyAndAddUniqueness:()=>P5,dataSanitizeMeasurements:()=>qs,dataSanitizeMessage:()=>NE,dataSanitizeProperties:()=>Bs,dataSanitizeString:()=>jr,dataSanitizeUrl:()=>cg,dateTimeUtilsDuration:()=>FSe,dateTimeUtilsNow:()=>MSe,dsPadNumber:()=>sX,findW3cTraceParent:()=>ZK,formatTraceParent:()=>JK,getExtensionByName:()=>uIe,isBeaconApiSupported:()=>kK,isCrossOriginError:()=>lIe,isInternalApplicationInsightsEndpoint:()=>DE,isSampledFlag:()=>QK,isValidSpanId:()=>IE,isValidTraceId:()=>SE,isValidTraceParent:()=>b5,msToTimeSpan:()=>ME,parseConnectionString:()=>Bw,parseTraceParent:()=>kw,strNotSpecified:()=>ao,stringToBoolOrDefault:()=>cIe,urlGetAbsoluteUrl:()=>RSe,urlGetCompleteUrl:()=>PSe,urlGetPathName:()=>ASe,urlParseFullHost:()=>Uw,urlParseHost:()=>aX,urlParseUrl:()=>Y_,utlCanUseLocalStorage:()=>LE,utlCanUseSessionStorage:()=>$_,utlDisableStorage:()=>GSe,utlEnableStorage:()=>HSe,utlGetLocalStorage:()=>M5,utlGetSessionStorage:()=>U5,utlGetSessionStorageKeys:()=>VSe,utlRemoveSessionStorage:()=>zSe,utlRemoveStorage:()=>jSe,utlSetLocalStorage:()=>F5,utlSetSessionStorage:()=>B5,utlSetStoragePrefix:()=>O5});var pZe,SX,fZe,Bf=T(()=>{dX();$Se();KSe();eX();mu();XSe();QSe();iIe();aIe();dIe();pIe();fIe();mIe();hIe();gIe();_Ie();EX();gu();bIe();EIe();pX();H5();Co();SIe();hX();cX();pZe="AppInsightsPropertiesPlugin",SX="AppInsightsChannelPlugin",fZe="ApplicationInsightsAnalytics"});var BE,_g,_n,X_,jw,qE,qf,Q_,z5,Ba,Y5,Ro,$5,W5,CIe,wIe,IX,K5,CX,GE,X5,vl,RIe,J_,AIe,Z_,Gf,Q5,HE,jE,_l,wX,ey,Hf,Vw,RX,VE,J5,jf,PIe,Gd,Z5,AX,ty,yl,e6,uo=T(()=>{BE="toLowerCase",_g="blkVal",_n="length",X_="rdOnly",jw="notify",qE="warnToConsole",qf="throwInternal",Q_="setDf",z5="watch",Ba="logger",Y5="apply",Ro="push",$5="splice",W5="hdlr",CIe="cancel",wIe="initialize",IX="identifier",K5="isInitialized",CX="getPlugin",GE="name",X5="time",vl="processNext",RIe="getProcessTelContext",J_="unload",AIe="loggingLevelConsole",Z_="createNew",Gf="teardown",Q5="messageId",HE="message",jE="isAsync",_l="diagLog",wX="_doTeardown",ey="update",Hf="getNext",Vw="setNextPlugin",RX="userAgent",VE="split",J5="nodeType",jf="replace",PIe="logInternalMessage",Gd="type",Z5="handler",AX="isChildEvt",ty="getCtx",yl="setCtx",e6="complete"});function NIe(t,e){PX||(PX=hf("AggregationError",function(n,i){i[_n]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw K(e,function(n,i){r+=`
`.concat(i," > ").concat(de(n))}),new PX(r,e||[])}var PX,DIe=T(()=>{ye();uo()});var kIe,Kr,ra,LIe,zE,yg,OIe,NX,DX,MIe,vu=T(()=>{kIe=void 0,Kr="",ra="core",LIe="disabled",zE="extensionConfig",yg="processTelemetry",OIe="priority",NX="perfEvent",DX="getPerfMgr",MIe="Not dynamic - "});function kX(t){return!ie(t)}function zw(t){var e=t;return e&&Ke(e)&&(e=e[jf](hZe,function(r,n){return n.toUpperCase()}),e=e[jf](gZe,"_"),e=e[jf](vZe,function(r,n){return"_"+n})),e}function YE(t,e){return t&&e?en(t,e)!==-1:!1}function LX(t){return t&&t.toISOString()||""}function Sc(t){return io(t)?t[GE]:Kr}function OX(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function _Ze(t,e){var r=null,n=null;return Ne(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][Y5](n,i)}}function t6(t,e,r,n,i){t&&e&&r&&(i!==!1||De(t[e]))&&(t[e]=_Ze(r,n))}function r6(t){return t&&gd&&(t=Th(gd({},t))),t}function n6(t,e,r,n,i,o){var s=arguments,a=s[0]||{},u=s[_n],c=!1,l=1;for(u>0&&rs(a)&&(c=a,a=s[l]||{},l++),zt(a)||(a={});l<u;l++){var d=s[l],p=ae(d),f=zt(d);for(var m in d){var h=p&&m in d||f&&Nr(d,m);if(h){var g=d[m],v=void 0;if(c&&g&&((v=ae(g))||mt(g))){var _=a[m];v?ae(_)||(_=[]):mt(_)||(_={}),g=n6(c,_,g)}g!==void 0&&(a[m]=g)}}}return a}var mZe,hZe,gZe,vZe,yjt,Yw=T(()=>{Ei();ye();uo();vu();mZe="getPrototypeOf",hZe=/-([a-z])/g,gZe=/([^\w\d_$])/g,vZe=/^(\d+[\w\d_$])/,yjt=Object[mZe]});function BIe(t,e){var r=!1;if(t){try{if(r=e in t,!r){var n=t[As];n&&(r=e in n)}}catch{}if(!r)try{var i=new t;r=!De(i[e])}catch{}}return r}function GX(){return typeof console!==Eo?console:nt(bZe)}function WE(){return!!(typeof JSON===ts&&JSON||nt(FIe)!==null)}function Ic(){return WE()?JSON||nt(FIe):null}function HX(){return nt(xZe)}function jX(){return nt(EZe)}function VX(){var t=mr();if(t&&(t[RX]!==FX||MX===null)){FX=t[RX];var e=(FX||Kr)[BE]();MX=YE(e,BX)||YE(e,qX)}return MX}function zX(t){if(t===void 0&&(t=null),!t){var e=mr()||{};t=e?(e.userAgent||Kr)[BE]():Kr}var r=(t||Kr)[BE]();if(YE(r,BX)){var n=fr()||{};return Math.max(parseInt(r[VE](BX)[1]),n[yZe]||0)}else if(YE(r,qX)){var i=parseInt(r[VE](qX)[1]);if(i)return i+4}return null}function KE(t){return(UX===null||t===!1)&&(UX=Aa()&&!!mr().sendBeacon),UX}function i6(t){var e=!1;try{e=!!nt("fetch");var r=nt("Request");e&&t&&r&&(e=BIe(r,"keepalive"))}catch{}return e}function YX(){return $E===null&&($E=typeof XDomainRequest!==Eo,$E&&o6()&&($E=$E&&!BIe(nt(UIe),"withCredentials"))),$E}function o6(){var t=!1;try{var e=nt(UIe);t=!!e}catch{}return t}var yZe,bZe,FIe,xZe,EZe,BX,qX,UIe,MX,FX,$E,UX,s6=T(()=>{"use strict";Ei();ye();uo();Yw();vu();yZe="documentMode",bZe="console",FIe="JSON",xZe="crypto",EZe="msCrypto",BX="msie",qX="trident/",UIe="XMLHttpRequest",MX=null,FX=null,$E=null,UX=null});function TZe(t){t<0&&(t>>>=0),$w=HIe+t&ry,Ww=jIe-t&ry,VIe=!0}function SZe(){try{var t=Yt()&2147483647;TZe((Math.random()*GIe^t)+t)}catch{}}function qIe(t){var e=0,r=HX()||jX();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&ry),e===0&&VX()&&(VIe||SZe(),e=IZe()&ry),e===0&&(e=Math.floor(GIe*Math.random()|0)),t||(e>>>=0),e}function IZe(t){Ww=36969*(Ww&65535)+(Ww>>16)&ry,$w=18e3*($w&65535)+($w>>16)&ry;var e=(Ww<<16)+($w&65535)>>>0&ry|0;return t||(e>>>=0),e}function zIe(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=qIe()>>>0,n=0,i=Kr;i[_n]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(qIe()<<2&4294967295|r&3)>>>0,n=0);return i}var GIe,ry,HIe,jIe,VIe,$w,Ww,YIe=T(()=>{ye();uo();s6();vu();GIe=4294967296,ry=4294967295,HIe=123456789,jIe=987654321,VIe=!1,$w=HIe,Ww=jIe});function WIe(t){return t[J5]===1||t[J5]===9||!+t[J5]}function RZe(t,e){var r=e[t.id];if(!r){r={};try{WIe(e)&&Xe(e,t.id,{e:!1,v:r})}catch{}}return r}function bl(t,e){return e===void 0&&(e=!1),zw(t+wZe+++(e?"."+$Ie:Kr)+CZe)}function a6(t){var e={id:bl("_aiData-"+(t||Kr)+"."+$Ie),accept:function(r){return WIe(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[zw(n)]:(o&&(s=RZe(e,r),s[zw(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var $Ie,CZe,wZe,Kw=T(()=>{ye();uo();Yw();vu();YIe();$Ie="3.0.6",CZe="."+zIe(6),wZe=0});function c6(t){return t&&zt(t)&&(t.isVal||t.fb||Nr(t,"v")||Nr(t,"mrg")||Nr(t,"ref")||t.set)}function KIe(t,e,r){var n,i=r.dfVal||hd;if(e&&r.fb){var o=r.fb;ae(o)||(o=[o]);for(var s=0;s<o[_n];s++){var a=o[s],u=e[a];if(i(u)?n=u:t&&(u=t.cfg[a],i(u)&&(n=u),t.set(t.cfg,Ir(a),u)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function $X(t,e,r){var n=r;if(r&&c6(r)&&(n=KIe(t,e,r)),n){c6(n)&&(n=$X(t,e,n));var i;ae(n)?(i=[],i[_n]=n[_n]):mt(n)&&(i={}),i&&(me(n,function(o,s){s&&c6(s)&&(s=$X(t,e,s)),i[o]=s}),n=i)}return n}function Xw(t,e,r,n){var i,o,s,a=n,u,c,l,d;c6(a)?(i=a.isVal,o=a.set,l=a[X_],d=a[_g],u=a.mrg,c=a.ref,!c&&De(c)&&(c=!!u),s=KIe(t,e,a)):s=n,d&&t[_g](e,r);var p,f=!0,m=e[r];(m||!ie(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=$X(t,e,s):p=s:(mt(p)||ae(s))&&u&&s&&(mt(s)||ae(s))&&me(s,function(h,g){Xw(t,p,h,g)}),t.set(e,r,p),c&&t.ref(e,r),l&&t[X_](e,r)}var WX=T(()=>{ye();uo()});function KX(t){if(t){var e;if(ae(t)?(e=[],e[_n]=t[_n]):mt(t)&&(e={}),e)return me(t,function(r,n){e[r]=KX(n)}),e}return t}function QIe(t){if(t){var e=t[Hd]||t;if(e.cfg&&(e.cfg===t||e.cfg[Hd]===e))return e}return null}function JIe(t){if(t&&(mt(t)||ae(t)))try{t[XIe]=!0}catch{}return t}function u6(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[AZe],!n&&!r[XIe]&&(n=mt(r)||ae(r))),n}function l6(t){Lr("InvalidAccess:"+t)}var Hd,XIe,AZe,XX=T(()=>{ye();uo();Hd=os("[[ai_dynCfg_1]]"),XIe=os("[[ai_blkDynCfg_1]]"),AZe=os("[[ai_frcDynCfg_1]]")});function NZe(t,e,r){ae(e)&&K(PZe,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[Y5](this,o);return Qw(t,e,r,"Patching"),a}})}function d6(t,e){var r=dc(t,e);return r&&r.get}function DZe(t,e,r,n){var i={n:r,h:[],trk:function(c){c&&c.fn&&(Qe(i.h,c)===-1&&i.h[Ro](c),t.trk(c,i))},clr:function(c){var l=Qe(i.h,c);l!==-1&&i.h[$5](l,1)}},o=!0,s=!1;function a(){o&&(s=s||u6(a,t,n),n&&!n[Hd]&&s&&(n=Qw(t,n,r,"Converting")),o=!1);var c=t.act;return c&&i.trk(c),n}a[t.prop]={chng:function(){t.add(i)}};function u(c){if(n!==c){a[t.ro]&&!t.upd&&l6("["+r+"] is read-only:"+de(e)),o&&(s=s||u6(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){me(n,function(p){n[p]=c?c[p]:kIe});try{me(c,function(p,f){Jw(t,n,p,f)}),c=n}catch(p){XE((t.hdlr||{})[Ba],r,"Assigning",p),s=!1}}else n&&n[Hd]&&me(n,function(p){var f=d6(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(c!==n){var d=c&&u6(a,t,c);!l&&d&&(c=Qw(t,c,r,"Converting")),n=c,s=d}t.add(i)}}Xe(e,i.n,{g:a,s:u})}function Jw(t,e,r,n){if(e){var i=d6(e,r),o=i&&!!i[t.prop];o?e[r]=n:DZe(t,e,r,n)}return e}function p6(t,e,r,n){if(e){var i=d6(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],u=n&&n[2];if(!o){if(u)try{JIe(e)}catch(c){XE((t.hdlr||{})[Ba],r,"Blocking",c)}try{Jw(t,e,r,e[r]),i=d6(e,r)}catch(c){XE((t.hdlr||{})[Ba],r,"State",c)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),u&&(i[t.blkVal]=!0)}return e}function Qw(t,e,r,n){try{me(e,function(i,o){Jw(t,e,i,o)}),e[Hd]||(mn(e,Hd,{get:function(){return t[W5]}}),NZe(t,e,r))}catch(i){XE((t.hdlr||{})[Ba],r,n,i)}return e}var PZe,XE,ZIe=T(()=>{ye();vu();uo();XX();PZe=["push","pop","shift","unshift","splice"],XE=function(t,e,r,n){t&&t[qf](3,108,"".concat(r," [").concat(e,"] failed - ")+de(n))}});function eCe(t){var e,r=Pn(Zw+"get"+t.uid+eR),n=Pn(Zw+"ro"+t.uid+eR),i=Pn(Zw+"rf"+t.uid+eR),o=Pn(Zw+"blkVal"+t.uid+eR),s=Pn(Zw+"dtl"+t.uid+eR),a=null,u=null,c;function l(m,h){var g=c.act;try{c.act=m,m&&m[s]&&(K(m[s],function(_){_.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[Q_].bind(t),ref:t.ref.bind(t),rdOnly:t[X_].bind(t)})}catch(_){var v=t[Ba];throw v&&v[qf](1,107,de(_)),_}finally{c.act=g||null}}function d(){if(a){var m=a;a=null,u&&u[CIe](),u=null;var h=[];if(K(m,function(g){if(g&&(g[s]&&(K(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[Ro](v)}}),a)try{d()}catch(g){h[Ro](g)}h[_n]>0&&NIe("Watcher error(s): ",h)}}function p(m){if(m&&m.h[_n]>0){a||(a=[]),u||(u=Nn(function(){u=null,d()},0));for(var h=0;h<m.h[_n];h++){var g=m.h[h];g&&Qe(a,g)===-1&&a[Ro](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];Qe(g,h)===-1&&g[Ro](h)}}return c=(e={prop:r,ro:n,rf:i},e[_g]=o,e[W5]=t,e.add=p,e[jw]=d,e.use=l,e.trk=f,e),c}var Zw,eR,tCe=T(()=>{ye();DIe();uo();Zw="[[ai_",eR="]]"});function kZe(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function LZe(t,e,r){var n,i=QIe(e);if(i)return i;var o=bl("dyncfg",!0),s=e&&r!==!1?e:KX(e),a;function u(){a[jw]()}function c(v,_,y){try{v=Jw(a,v,_,y)}catch(E){XE(t,_,"Setting value",E)}return v[_]}function l(v){return kZe(a,v)}function d(v,_){a.use(null,function(y){var E=a.upd;try{De(_)||(a.upd=_),v(y)}finally{a.upd=E}})}function p(v,_){var y;return p6(a,v,_,(y={},y[0]=!0,y))[_]}function f(v,_){var y;return p6(a,v,_,(y={},y[1]=!0,y))[_]}function m(v,_){var y;return p6(a,v,_,(y={},y[2]=!0,y))[_]}function h(v,_){return _&&me(_,function(y,E){Xw(g,v,y,E)}),v}var g=(n={uid:null,cfg:s},n[Ba]=t,n[jw]=u,n.set=c,n[Q_]=h,n[z5]=l,n.ref=p,n[X_]=f,n[_g]=m,n._block=d,n);return Xe(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=eCe(g),Qw(a,s,"config","Creating"),g}function OZe(t,e){t?(t[qE](e),t[qf](2,108,e)):l6(e)}function xl(t,e,r,n){var i=LZe(r,t||{},n);return e&&i[Q_](i.cfg,e),i}function tR(t,e,r){var n=t[Hd]||t;return n.cfg&&(n.cfg===t||n.cfg[Hd]===n)?n[z5](e):(OZe(r,MIe+de(t)),xl(t,null,r)[z5](e))}var rR=T(()=>{ye();Kw();vu();uo();WX();ZIe();tCe();XX()});function QX(t,e){if(t&&t[J_])return t[J_](e)}var rCe=T(()=>{uo()});function MZe(t,e,r){return!t&&ie(t)?e:rs(t)?t:Ir(t)[BE]()==="true"}function f6(t,e,r){return{fb:r,isVal:t,v:e}}function _u(t,e){return{fb:e,set:MZe,v:!!t}}var nCe=T(()=>{ye();uo()});function FZe(){var t=nt("Microsoft");return t&&(m6=t.ApplicationInsights),m6}function iCe(t){var e=m6;return!e&&t.disableDbgExt!==!0&&(e=m6||FZe()),e?e.ChromeDbgExt:null}var m6,oCe=T(()=>{ye();m6=null});function sCe(t){return t?'"'+t[jf](/\"/g,Kr)+'"':Kr}function JX(t,e){var r=GX();if(r){var n="log";r[t]&&(n=t),Ne(r[n])&&r[n](e)}}function ny(t,e){return(t||{})[Ba]||new eQ(e)}function cCe(t){return t||new eQ}function bt(t,e,r,n,i,o){o===void 0&&(o=!1),cCe(t)[qf](e,r,n,i,o)}function nR(t,e){cCe(t)[qE](e)}var QE,aCe,UZe,BZe,qZe,GZe,HZe,ZX,eQ,JE=T(()=>{"use strict";tn();ye();rR();uo();oCe();s6();vu();aCe="warnToConsole",UZe="AI (Internal): ",BZe="AI: ",qZe="AITR_",GZe={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},HZe=(QE={},QE[0]=null,QE[1]="errorToConsole",QE[2]=aCe,QE[3]="debugToConsole",QE);ZX=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[Q5]=e,o[HE]=(n?BZe:UZe)+e;var s=Kr;WE()&&(s=Ic().stringify(i));var a=(r?" message:"+sCe(r):Kr)+(i?" props:"+sCe(s):Kr);o[HE]+=a}return t.dataType="MessageData",t}();eQ=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,u;ot(t,this,function(c){u=d(e||{}),c.consoleLoggingLevel=function(){return i},c[qf]=function(m,h,g,v,_){_===void 0&&(_=!1);var y=new ZX(h,g,_,v);if(a)throw de(y);var E=HZe[m]||aCe;if(De(y[HE]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(_){var x=+y[Q5];!n[x]&&i>=m&&(c[E](y[HE]),n[x]=!0)}else i>=m&&c[E](y[HE]);l(m,y)}},c.debugToConsole=function(m){JX("debug",m),f("warning",m)},c[qE]=function(m){JX("warn",m),f("warning",m)},c.errorToConsole=function(m){JX("error",m),f("error",m)},c.resetInternalMessageCount=function(){r=0,n={}},c[PIe]=l,c[J_]=function(m){u&&u.rm(),u=null};function l(m,h){if(!p()){var g=!0,v=qZe+h[Q5];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(c.queue[Ro](h),r++,f(m===1?"error":"warn",h)),r===s)){var _="Internal events throttle limit per PageView reached for this app.",y=new ZX(23,_,!1);c.queue[Ro](y),m===1?c.errorToConsole(_):c[qE](_)}}}function d(m){return tR(xl(m,GZe,c).cfg,function(h){var g=h.cfg;i=g[AIe],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=iCe(e||{});g&&g[_l]&&g[_l](m,h)}})}return t.__ieDyn=1,t}()});function uCe(t,e,r,n,i){if(t){var o=t;if(o[DX]&&(o=o[DX]()),o){var s=void 0,a=o[ty](tQ);try{if(s=o.create(e(),n,i),s){if(a&&s[yl]&&(s[yl](h6[rQ],a),a[ty]&&a[yl])){var u=a[ty](h6[iR]);u||(u=[],a[yl](h6[iR],u)),u[Ro](s)}return o[yl](tQ,s),r(s)}}catch(c){s&&s[yl]&&s[yl]("exception",c)}finally{s&&o.fire(s),o[yl](tQ,a)}}}return r()}var ZE,rQ,iR,h6,wVt,tQ,lCe=T(()=>{tn();ye();uo();vu();ZE="ctx",rQ="ParentContextKey",iR="ChildrenContextKey",h6=function(){function t(e,r,n){var i=this;if(i.start=Yt(),i[GE]=e,i[jE]=n,i[AX]=function(){return!1},Ne(r)){var o;Xe(i,"payload",{g:function(){return!o&&Ne(r)&&(o=r(),r=null),o}})}i[ty]=function(s){return s?s===t[rQ]||s===t[iR]?i[s]:(i[ZE]||{})[s]:null},i[yl]=function(s,a){if(s)if(s===t[rQ])i[s]||(i[AX]=function(){return!0}),i[s]=a;else if(s===t[iR])i[s]=a;else{var u=i[ZE]=i[ZE]||{};u[s]=a}},i[e6]=function(){var s=0,a=i[ty](t[iR]);if(ae(a))for(var u=0;u<a[_n];u++){var c=a[u];c&&(s+=c[X5])}i[X5]=Yt()-i.start,i.exTime=i[X5]-s,i[e6]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),wVt=function(){function t(e){this.ctx={},ot(t,this,function(r){r.create=function(n,i,o){return new h6(n,i,o)},r.fire=function(n){n&&(n[e6](),e&&Ne(e[NX])&&e[NX](n))},r[yl]=function(n,i){if(n){var o=r[ZE]=r[ZE]||{};o[n]=i}},r[ty]=function(n){return(r[ZE]||{})[n]}})}return t.__ieDyn=1,t}(),tQ="CoreUtils.doPerf"});function g6(t){return jZe.get(t,"state",{},!0)}var jZe,dCe=T(()=>{"use strict";Kw();jZe=a6("plugin")});function zZe(t,e,r){for(;t;){if(t[CX]()===r)return t;t=t[Hf]()}return oR([r],e.config||{},e)}function nQ(t,e,r,n){var i=null,o=[];e||(e=xl({},null,r[Ba])),n!==null&&(i=n?zZe(t,r,n):t);var s={_next:u,ctx:{core:function(){return r},diagLog:function(){return ny(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:l,getConfig:d,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:p,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[Ro]({func:f,self:De(m)?s.ctx:m,args:h})}function u(){var f=i;if(i=f?f[Hf]():null,!f){var m=o;m&&m[_n]>0&&(K(m,function(h){try{h.func.call(h.self,h.args)}catch(g){bt(r[Ba],2,73,"Unexpected Exception during onComplete - "+de(g))}}),o=[])}return f}function c(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[zE];!v&&m&&(v={}),g[zE]=v,v=e.ref(g,zE),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function l(f,m){var h=c(f,!0);return m&&me(m,function(g,v){if(ie(h[g])){var _=e.cfg[g];(_||!ie(_))&&(h[g]=_)}Xw(e,h,g,v)}),e[Q_](h,m)}function d(f,m,h){h===void 0&&(h=!1);var g,v=c(f,!1),_=e.cfg;return v&&(v[m]||!ie(v[m]))?g=v[m]:(_[m]||!ie(_[m]))&&(g=_[m]),g||!ie(g)?g:h}function p(f){for(var m;m=s._next();){var h=m[CX]();h&&f(h)}}return s}function bg(t,e,r,n){var i=xl(e),o=nQ(t,i,r,n),s=o.ctx;function a(c){var l=o._next();return l&&l[yg](c,s),!l}function u(c,l){return c===void 0&&(c=null),ae(c)&&(c=oR(c,i.cfg,r,l)),bg(c||s[Hf](),i.cfg,r,l)}return s[vl]=a,s[Z_]=u,s}function iQ(t,e,r){var n=xl(e.config),i=nQ(t,n,e,r),o=i.ctx;function s(u){var c=i._next();return c&&c[J_](o,u),!c}function a(u,c){return u===void 0&&(u=null),ae(u)&&(u=oR(u,n.cfg,e,c)),iQ(u||o[Hf](),e,c)}return o[vl]=s,o[Z_]=a,o}function oQ(t,e,r){var n=xl(e.config),i=nQ(t,n,e,r),o=i.ctx;function s(u){return o.iterate(function(c){Ne(c[ey])&&c[ey](o,u)})}function a(u,c){return u===void 0&&(u=null),ae(u)&&(u=oR(u,n.cfg,e,c)),oQ(u||o[Hf](),e,c)}return o[vl]=s,o[Z_]=a,o}function oR(t,e,r,n){var i=null,o=!n;if(ae(t)&&t[_n]>0){var s=null;K(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&Ne(a[yg])){var u=YZe(a,e,r);i||(i=u),s&&s._setNext(u),s=u}})}return n&&!i?oR([n],e,r):i}function YZe(t,e,r){var n=null,i=Ne(t[yg]),o=Ne(t[Vw]),s;t?s=t[IX]+"-"+t[OIe]+"-"+mCe++:s="Unknown-0-"+mCe++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function u(){var f;return t&&Ne(t[fCe])&&(f=t[fCe]()),f||(f=bg(a,e,r)),f}function c(f,m,h,g,v){var _=!1,y=t?t[IX]:VZe,E=f[pCe];return E||(E=f[pCe]={}),f.setNext(n),t&&uCe(f[ra](),function(){return y+":"+h},function(){E[s]=!0;try{var x=n?n._id:Kr;x&&(E[x]=!1),_=m(f)}catch(O){var S=n?E[n._id]:!0;S&&(_=!0),(!n||!S)&&bt(f[_l](),1,73,"Plugin ["+y+"] failed during "+h+" - "+de(O)+", run flags: "+de(E))}},g,v),_}function l(f,m){m=m||u();function h(g){if(!t||!i)return!1;var v=g6(t);return v[Gf]||v[LIe]?!1:(o&&t[Vw](n),t[yg](f,g),!0)}c(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[vl](f)}function d(f,m){function h(){var g=!1;if(t){var v=g6(t),_=t[ra]||v[ra];t&&(!_||_===f.core())&&!v[Gf]&&(v[ra]=null,v[Gf]=!0,v[K5]=!1,t[Gf]&&t[Gf](f,m)===!0&&(g=!0))}return g}c(f,h,"unload",function(){},m[jE])||f[vl](m)}function p(f,m){function h(){var g=!1;if(t){var v=g6(t),_=t[ra]||v[ra];t&&(!_||_===f.core())&&!v[Gf]&&t[ey]&&t[ey](f,m)===!0&&(g=!0)}return g}c(f,h,"update",function(){},!1)||f[vl](m)}return qi(a)}var VZe,pCe,fCe,mCe,sQ=T(()=>{"use strict";ye();WX();rR();uo();JE();vu();lCe();dCe();VZe="TelemetryPluginChain",pCe="_hasRun",fCe="_getTelCtx",mCe=0});function hCe(){var t=[];function e(n){n&&t[Ro](n)}function r(n,i){K(t,function(o){try{o(n,i)}catch(s){bt(n[_l](),2,73,"Unexpected error calling unload handler - "+de(s))}}),t=[]}return{add:e,run:r}}var gCe=T(()=>{ye();uo();JE()});function vCe(){var t=[];function e(n){var i=t;t=[],K(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){bt(n,2,73,"Unloading:"+de(s))}})}function r(n){n&&ei(t,n)}return{run:e,add:r}}var _Ce=T(()=>{ye();JE()});var aQ,xg,$Ze,cQ,yCe=T(()=>{"use strict";tn();ye();rR();uo();JE();Yw();vu();sQ();gCe();_Ce();xg="getPlugin",$Ze=(aQ={},aQ[zE]={isVal:kX,v:{}},aQ),cQ=function(){function t(){var e=this,r,n,i,o,s;c(),ot(t,e,function(l){l[wIe]=function(d,p,f,m){u(d,p,m),r=!0},l[Gf]=function(d,p){var f,m=l[ra];if(!m||d&&m!==d[ra]())return;var h,g=!1,v=d||iQ(null,m,i&&i[xg]?i[xg]():i),_=p||(f={reason:0},f[jE]=!1,f);function y(){g||(g=!0,o.run(v,p),s.run(v[_l]()),h===!0&&v[vl](_),c())}return!l[wX]||l[wX](v,_,y)!==!0?y():h=!0,h},l[ey]=function(d,p){var f=l[ra];if(!f||d&&f!==d[ra]())return;var m,h=!1,g=d||oQ(null,f,i&&i[xg]?i[xg]():i),v=p||{reason:0};function _(){h||(h=!0,u(g.getCfg(),g.core(),g[Hf]()))}return!l._doUpdate||l._doUpdate(g,v,_)!==!0?_():m=!0,m},t6(l,"_addUnloadCb",function(){return o},"add"),t6(l,"_addHook",function(){return s},"add"),Xe(l,"_unloadHooks",{g:function(){return s}})}),e[_l]=function(l){return a(l)[_l]()},e[K5]=function(){return r},e.setInitialized=function(l){r=l},e[Vw]=function(l){i=l},e[vl]=function(l,d){d?d[vl](l):i&&Ne(i[yg])&&i[yg](l,null)},e._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=n||bg(null,{},e[ra]);i&&i[xg]?d=p[Z_](null,i[xg]):d=p[Z_](null,i)}return d}function u(l,d,p){xl(l,$Ze,ny(d)),!p&&d&&(p=d[RIe]()[Hf]());var f=i;i&&i[xg]&&(f=i[xg]()),e[ra]=d,n=bg(p,l,d,f)}function c(){r=!1,e[ra]=null,n=null,i=null,s=vCe(),o=hCe()}}return t.__ieDyn=1,t}()});function SCe(t){return t&&t[jf]?t[jf](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Kr):t}function lQ(t,e){var r;if(e){var n=Kr;ae(e)?(n=Kr,K(e,function(o){o=SCe(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=SCe(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Kr)+n)}var i=QZe.exec(t||Kr)||[];return r={},r[Gd]=i[1],r.ns=(i[2]||Kr).replace(WZe,".").replace(KZe,Kr)[VE](".").sort().join("."),r}function wCe(t,e,r){r===void 0&&(r=!0);var n=v6.get(t,uQ,{},r),i=n[e];return i||(i=n[e]=[]),i}function RCe(t,e,r,n){t&&e&&e[Gd]&&(t[TCe]?t[TCe](e[Gd],r,n):t[ECe]&&t[ECe](CCe+e[Gd],r))}function JZe(t,e,r,n){var i=!1;return t&&e&&e[Gd]&&r&&(t[xCe]?(t[xCe](e[Gd],r,n),i=!0):t[bCe]&&(t[bCe](CCe+e[Gd],r),i=!0)),i}function ICe(t,e,r,n){for(var i=e[_n];i--;){var o=e[i];o&&(!r.ns||r.ns===o.evtName.ns)&&(!n||n(o))&&(RCe(t,o.evtName,o[Z5],o.capture),e[$5](i,1))}}function ZZe(t,e,r){if(e[Gd])ICe(t,wCe(t,e[Gd]),e,r);else{var n=v6.get(t,uQ,{});me(n,function(i,o){ICe(t,o,e,r)}),pn(n)[_n]===0&&v6.kill(t,uQ)}}function sR(t,e){var r;return e?(ae(e)?r=[t].concat(e):r=[t,e],r=lQ("xx",r).ns[VE](".")):r=t,r}function _6(t,e,r,n,i){var o;i===void 0&&(i=!1);var s=!1;if(t)try{var a=lQ(e,n);if(s=JZe(t,a,r,i),s&&v6.accept(t)){var u=(o={guid:XZe++,evtName:a},o[Z5]=r,o.capture=i,o);wCe(t,a.type)[Ro](u)}}catch{}return s}function dQ(t,e,r,n,i){if(i===void 0&&(i=!1),t)try{var o=lQ(e,n),s=!1;ZZe(t,o,function(a){return o.ns&&!r||a[Z5]===r?(s=!0,!0):!1}),s||RCe(t,o,r,i)}catch{}}var CCe,bCe,xCe,ECe,TCe,uQ,czt,uzt,WZe,KZe,XZe,v6,QZe,ACe=T(()=>{ye();uo();Kw();vu();CCe="on",bCe="attachEvent",xCe="addEventListener",ECe="detachEvent",TCe="removeEventListener",uQ="events",czt=bl("aiEvtPageHide"),uzt=bl("aiEvtPageShow"),WZe=/\.[\.]+/g,KZe=/[\.]+$/,XZe=1,v6=a6("events"),QZe=/^([^.]*)(?:\.(.+)|)/});var iy=T(()=>{yCe();rCe();Yw();ye();ACe();s6();JE();sQ();Kw();rR();nCe()});var Eg,PCe=T(()=>{Eg="duration"});var Yi,y6,lo,jd,oy,kt,Tg,Sg,yu,Ig,Vf,aR,cR,eT,zf,Cg,b6,Yf,uR,$f,lR,dR,tT,sy,pR,x6,Wf,rT,E6,nT,Ao,iT,T6,pQ,fQ,S6,mQ,hQ,Kf,gQ,vQ,_Q,yQ,bQ,I6,oT,NCe,wg,C6,fR,mR,DCe,sT,w6,xQ,R6,kCe,Xf=T(()=>{Yi="tags",y6="deviceType",lo="data",jd="name",oy="traceID",kt="length",Tg="stringify",Sg="measurements",yu="dataType",Ig="envelopeType",Vf="toString",aR="onLine",cR="isOnline",eT="_get",zf="enqueue",Cg="count",b6="eventsLimitInMem",Yf="push",uR="emitLineDelimitedJson",$f="clear",lR="batchPayloads",dR="createNew",tT="markAsSent",sy="clearSent",pR="bufferOverride",x6="BUFFER_KEY",Wf="SENT_BUFFER_KEY",rT="MAX_BUFFER_SIZE",E6="sendPOST",nT="triggerSend",Ao="diagLog",iT="_sender",T6="customHeaders",pQ="maxBatchSizeInBytes",fQ="onunloadDisableBeacon",S6="isBeaconApiDisabled",mQ="alwaysUseXhrOverride",hQ="enableSessionStorageBuffer",Kf="_buffer",gQ="onunloadDisableFetch",vQ="disableSendBeaconSplit",_Q="instrumentationKey",yQ="convertUndefined",bQ="maxBatchInterval",I6="baseType",oT="sampleRate",NCe="_xhrReadyStateChange",wg="_onError",C6="_onPartialSuccess",fR="_onSuccess",mR="itemsAccepted",DCe="itemsReceived",sT="oriPayload",w6="setRequestHeader",xQ="eventsSendRequest",R6="getSamplingScore",kCe="getHashCodeScore"});function $i(t,e,r){return OX(t,e,r,ns)}function eet(t,e,r){var n=r[Yi]=r[Yi]||{},i=e.ext=e.ext||{},o=e[Yi]=e[Yi]||[],s=i.user;s&&($i(n,zi.userAuthUserId,s.authId),$i(n,zi.userId,s.id||s.localId));var a=i.app;a&&$i(n,zi.sessionId,a.sesId);var u=i.device;u&&($i(n,zi.deviceId,u.id||u.localId),$i(n,zi[y6],u.deviceClass),$i(n,zi.deviceIp,u.ip),$i(n,zi.deviceModel,u.model),$i(n,zi[y6],u[y6]));var c=e.ext.web;if(c){$i(n,zi.deviceLanguage,c.browserLang),$i(n,zi.deviceBrowserVersion,c.browserVer),$i(n,zi.deviceBrowser,c.browser);var l=r[lo]=r[lo]||{},d=l[Hn]=l[Hn]||{},p=d[Po]=d[Po]||{};$i(p,"domain",c.domain),$i(p,"isManual",c.isManual?LCe:null),$i(p,"screenRes",c.screenRes),$i(p,"userConsent",c.userConsent?LCe:null)}var f=i.os;f&&$i(n,zi.deviceOS,f[jd]);var m=i.trace;m&&($i(n,zi.operationParentId,m.parentID),$i(n,zi.operationName,jr(t,m[jd])),$i(n,zi.operationId,m[oy]));for(var h={},g=o[kt]-1;g>=0;g--){var v=o[g];me(v,function(y,E){h[y]=E}),o.splice(g,1)}me(o,function(y,E){h[y]=E});var _=cu(cu({},n),h);_[zi.internalSdkVersion]||(_[zi.internalSdkVersion]=jr(t,"javascript:".concat(tet.Version),64)),r[Yi]=r6(_)}function Rg(t,e,r){ie(t)||me(t,function(n,i){xi(i)?r[n]=i:Ke(i)?e[n]=i:WE()&&(e[n]=Ic()[Tg](i))})}function ay(t,e){ie(t)||me(t,function(r,n){t[r]=n||e})}function cy(t,e,r,n){var i=new q5(t,n,e);$i(i,"sampleRate",r[wE]),(r[Hn]||{}).startTime&&(i.time=LX(r[Hn].startTime)),i.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return i[jd]=i[jd].replace("{0}",o),eet(t,r,i),r[Yi]=r[Yi]||[],r6(i)}function uy(t,e){ie(e[Hn])&&bt(t,1,46,"telemetryItem.baseData cannot be null.")}function OCe(t,e,r){uy(t,e);var n=e[Hn][Sg]||{},i=e[Hn][Po]||{};Rg(e[lo],i,n),ie(r)||ay(i,r);var o=e[Hn];if(ie(o))return nR(t,"Invalid input for dependency data"),null;var s=o[Po]&&o[Po][Lw]?o[Po][Lw]:"GET",a=new fg(t,o.id,o.target,o[jd],o[Eg],o.success,o.responseCode,s,o.type,o.correlationContext,i,n),u=new qd(fg[yu],a);return cy(t,fg[Ig],e,u)}function TQ(t,e,r){uy(t,e);var n={},i={};e[EQ]!==Ud[yu]&&(n.baseTypeSource=e[EQ]),e[EQ]===Ud[yu]?(n=e[Hn][Po]||{},i=e[Hn][Sg]||{}):e[Hn]&&Rg(e[Hn],n,i),Rg(e[lo],n,i),ie(r)||ay(n,r);var o=e[Hn][jd],s=new Ud(t,o,n,i),a=new qd(Ud[yu],s);return cy(t,Ud[Ig],e,a)}function MCe(t,e,r){uy(t,e);var n=e[Hn][Sg]||{},i=e[Hn][Po]||{};Rg(e[lo],i,n),ie(r)||ay(i,r);var o=e[Hn],s=dg.CreateFromInterface(t,o,i,n),a=new qd(dg[yu],s);return cy(t,dg[Ig],e,a)}function FCe(t,e,r){uy(t,e);var n=e[Hn],i=n[Po]||{},o=n[Sg]||{};Rg(e[lo],i,o),ie(r)||ay(i,r);var s=new Bd(t,n[jd],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new qd(Bd[yu],s);return cy(t,Bd[Ig],e,a)}function UCe(t,e,r){uy(t,e);var n,i=e[Hn];!ie(i)&&!ie(i[Po])&&!ie(i[Po][Eg])?(n=i[Po][Eg],delete i[Po][Eg]):!ie(e[lo])&&!ie(e[lo][Eg])&&(n=e[lo][Eg],delete e[lo][Eg]);var o=e[Hn],s;((e.ext||{}).trace||{})[oy]&&(s=e.ext.trace[oy]);var a=o.id||s,u=o[jd],c=o.uri,l=o[Po]||{},d=o[Sg]||{};if(ie(o.refUri)||(l.refUri=o.refUri),ie(o.pageType)||(l.pageType=o.pageType),ie(o.isLoggedIn)||(l.isLoggedIn=o.isLoggedIn[Vf]()),!ie(o[Po])){var p=o[Po];me(p,function(h,g){l[h]=g})}Rg(e[lo],l,d),ie(r)||ay(l,r);var f=new pg(t,u,c,n,l,d,a),m=new qd(pg[yu],f);return cy(t,pg[Ig],e,m)}function BCe(t,e,r){uy(t,e);var n=e[Hn],i=n[jd],o=n.uri||n.url,s=n[Po]||{},a=n[Sg]||{};Rg(e[lo],s,a),ie(r)||ay(s,r);var u=new hg(t,i,o,void 0,s,a,n),c=new qd(hg[yu],u);return cy(t,hg[Ig],e,c)}function qCe(t,e,r){uy(t,e);var n=e[Hn].message,i=e[Hn].severityLevel,o=e[Hn][Po]||{},s=e[Hn][Sg]||{};Rg(e[lo],o,s),ie(r)||ay(o,r);var a=new mg(t,n,i,o,s),u=new qd(mg[yu],a);return cy(t,mg[Ig],e,u)}var EQ,Hn,Po,LCe,tet,GCe=T(()=>{Ei();Bf();iy();PCe();Xf();EQ="baseType",Hn="baseData",Po="properties",LCe="true";tet={Version:"3.0.6"}});function HCe(t,e){dQ(t,null,null,e)}function jCe(t){var e,r=fr(),n=mr(),i=!1,o=!0,s=sR(bl("OfflineListener"),t);try{if(u(gn())&&(i=!0),r){var a=r.body||r;a.ononline&&u(a)&&(i=!0)}i&&n&&!ie(n[aR])&&(o=n[aR])}catch{i=!1}function u(f){var m=!1;return f&&(m=_6(f,"online",c,s),m&&_6(f,"offline",l,s)),m}function c(){o=!0}function l(){o=!1}function d(){var f=!0;return i?f=o:n&&!ie(n[aR])&&(f=n[aR]),f}function p(){var f=gn();if(f&&i){if(HCe(f,s),r){var m=r.body||r;De(m.ononline)||HCe(m,s)}i=!1}}return e={},e[cR]=d,e.isListening=function(){return i},e.unload=p,e}var VCe=T(()=>{iy();Xf()});var zCe,A6,SQ,YCe=T(()=>{Ei();tn();Bf();iy();Xf();zCe=function(){function t(e,r){var n=[],i=!1;this[eT]=function(){return n},this._set=function(o){return n=o,n},ot(t,this,function(o){o[zf]=function(s){if(o[Cg]()>=r[b6]){i||(bt(e,2,105,"Maximum in-memory buffer size reached: "+o[Cg](),!0),i=!0);return}n[Yf](s)},o[Cg]=function(){return n[kt]},o.size=function(){for(var s=n[kt],a=0;a<n[kt];a++)s+=n[a][kt];return r[uR]||(s+=2),s},o[$f]=function(){n=[],i=!1},o.getItems=function(){return n.slice(0)},o[lR]=function(s){if(s&&s[kt]>0){var a=r[uR]?s.join(`
`):"["+s.join(",")+"]";return a}return null},o[dR]=function(s,a,u){var c=n.slice(0);s=s||e,a=a||{};var l=u?new SQ(s,a):new A6(s,a);return K(c,function(d){l[zf](d)}),l}})}return t.__ieDyn=1,t}(),A6=function(t){Ls(e,t);function e(r,n){var i=t.call(this,r,n)||this;return ot(e,i,function(o,s){o[tT]=function(a){s[$f]()},o[sy]=function(a){}}),i}return e.__ieDyn=1,e}(zCe),SQ=function(t){Ls(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=!1,s=n?.namePrefix,a=n[pR]||{getItem:U5,setItem:B5},u=a.getItem,c=a.setItem;return ot(e,i,function(l,d){var p=g(e[x6]),f=g(e[Wf]),m=l._set(p.concat(f));m[kt]>e[rT]&&(m[kt]=e[rT]),v(e[Wf],[]),v(e[x6],m),l[zf]=function(_){if(l[Cg]()>=e[rT]){o||(bt(r,2,67,"Maximum buffer size reached: "+l[Cg](),!0),o=!0);return}d[zf](_),v(e.BUFFER_KEY,l[eT]())},l[$f]=function(){d[$f](),v(e.BUFFER_KEY,l[eT]()),v(e[Wf],[]),o=!1},l[tT]=function(_){v(e[x6],l._set(h(_,l[eT]())));var y=g(e[Wf]);y instanceof Array&&_ instanceof Array&&(y=y.concat(_),y[kt]>e[rT]&&(bt(r,1,67,"Sent buffer reached its maximum size: "+y[kt],!0),y[kt]=e[rT]),v(e[Wf],y))},l[sy]=function(_){var y=g(e[Wf]);y=h(_,y),v(e[Wf],y)},l[dR]=function(_,y,E){E=!!E;var x=l[eT]().slice(0),S=g(e[Wf]).slice(0);_=_||r,y=y||{},l[$f]();var O=E?new e(_,y):new A6(_,y);return K(x,function(U){O[zf](U)}),E&&O[tT](S),O};function h(_,y){var E=[];return K(y,function(x){!Ne(x)&&Qe(_,x)===-1&&E[Yf](x)}),E}function g(_){var y=_;try{y=s?s+"_"+y:y;var E=u(r,y);if(E){var x=Ic().parse(E);if(Ke(x)&&(x=Ic().parse(x)),x&&ae(x))return x}}catch(S){bt(r,1,42," storage key: "+y+", "+Sc(S),{exception:de(S)})}return[]}function v(_,y){var E=_;try{E=s?s+"_"+E:E;var x=JSON[Tg](y);c(r,E,x)}catch(S){c(r,E,JSON[Tg]([])),bt(r,2,41," storage key: "+E+", "+Sc(S)+". Buffer cleared",{exception:de(S)})}}}),i}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(zCe)});var $Ce,WCe=T(()=>{tn();iy();Xf();$Ce=function(){function t(e){ot(t,this,function(r){r.serialize=function(s){var a=n(s,"root");try{return Ic()[Tg](a)}catch(u){bt(e,1,48,u&&Ne(u[Vf])?u[Vf]():"Error serializing object",null,!0)}};function n(s,a){var u="__aiCircularRefCheck",c={};if(!s)return bt(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),c;if(s[u])return bt(e,2,50,"Circular reference detected while serializing object",{name:a},!0),c;if(!s.aiDataContract){if(a==="measurements")c=o(s,"number",a);else if(a==="properties")c=o(s,"string",a);else if(a==="tags")c=o(s,"string",a);else if(ae(s))c=i(s,a);else{bt(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Ic()[Tg](s),c=s}catch(l){bt(e,1,48,l&&Ne(l[Vf])?l[Vf]():"Error serializing object",null,!0)}}return c}return s[u]=!0,me(s.aiDataContract,function(l,d){var p=Ne(d)?d()&1:d&1,f=Ne(d)?d()&4:d&4,m=d&2,h=s[l]!==void 0,g=zt(s[l])&&s[l]!==null;if(p&&!h&&!m)bt(e,1,24,"Missing required field specification. The field is required but not present on source",{field:l,name:a});else if(!f){var v=void 0;g?m?v=i(s[l],l):v=n(s[l],l):v=s[l],v!==void 0&&(c[l]=v)}}),delete s[u],c}function i(s,a){var u;if(s)if(!ae(s))bt(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{u=[];for(var c=0;c<s[kt];c++){var l=s[c],d=n(l,a+"["+c+"]");u[Yf](d)}}return u}function o(s,a,u){var c;return s&&(c={},me(s,function(l,d){if(a==="string")d===void 0?c[l]="undefined":d===null?c[l]="null":d[Vf]?c[l]=d[Vf]():c[l]="invalid field: toString() is not defined.";else if(a==="number")if(d===void 0)c[l]="undefined";else if(d===null)c[l]="null";else{var p=parseFloat(d);isNaN(p)?c[l]="NaN":c[l]=p}else c[l]="invalid field: "+u+" is of unknown type.",bt(e,1,c[l],null,!0)})),c}})}return t.__ieDyn=1,t}()});var ret,KCe,XCe=T(()=>{Xf();ret=8,KCe=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[kt]<ret;)e=e.concat(e);for(var r=5381,n=0;n<e[kt];++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t}()});var QCe,JCe=T(()=>{Bf();Xf();XCe();QCe=function(){function t(){var e=this,r=new KCe,n=new UE;e[R6]=function(i){var o=0;return i[Yi]&&i[Yi][n.userId]?o=r.getHashCodeScore(i[Yi][n.userId]):i.ext&&i.ext.user&&i.ext.user.id?o=r[kCe](i.ext.user.id):i[Yi]&&i[Yi][n.operationId]?o=r.getHashCodeScore(i[Yi][n.operationId]):i.ext&&i.ext.telemetryTrace&&i.ext.telemetryTrace[oy]?o=r.getHashCodeScore(i.ext.telemetryTrace[oy]):o=Math.random()*100,o}}return t}()});var ZCe,e2e=T(()=>{Bf();iy();Xf();JCe();ZCe=function(){function t(e,r){this.INT_MAX_VALUE=2147483647;var n=r||ny(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[oT]=e,this.samplingScoreGenerator=new QCe}return t.prototype.isSampledIn=function(e){var r=this[oT],n=!1;return r==null||r>=100||e.baseType===Bd[yu]?!0:(n=this.samplingScoreGenerator[R6](e)<r,n)},t}()});function P6(t){try{return t.responseText}catch{}return null}function iet(t){return t&&t[E6]}function oet(t){return!isNaN(t)&&t>0&&t<=100}var di,Qf,Ag,net,t2e,set,hR,r2e=T(()=>{Ei();tn();Bf();iy();yf();ye();GCe();VCe();YCe();WCe();e2e();Xf();Ag=void 0,net=65e3;t2e=Zn((di={endpointUrl:f6(ns,ig+Od)},di[uR]=_u(),di[bQ]=15e3,di[pQ]=102400,di.disableTelemetry=_u(),di[hQ]=_u(!0),di.isRetryDisabled=_u(),di[S6]=_u(!0),di[vQ]=_u(),di.disableXhr=_u(),di[gQ]=_u(),di[fQ]=_u(),di[_Q]=Ag,di.namePrefix=Ag,di.samplingPercentage=f6(oet,100),di[T6]=Ag,di[yQ]=Ag,di[b6]=1e4,di[pR]=!1,di.httpXHROverride={isVal:iet,v:Ag},di[mQ]=_u(),di));set=(Qf={},Qf[Ud.dataType]=TQ,Qf[mg.dataType]=qCe,Qf[pg.dataType]=UCe,Qf[hg.dataType]=BCe,Qf[dg.dataType]=MCe,Qf[Bd.dataType]=FCe,Qf[fg.dataType]=OCe,Qf),hR=function(t){Ls(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=SX;var n,i,o,s,a,u,c,l,d=0,p,f,m,h,g,v,_,y,E,x,S,O,U,W,L,ve,J,D,R,k,G,M,ce;return ot(e,r,function(V,_e){Ce(),V.pause=function(){pa(),s=!0},V.resume=function(){s&&(s=!1,i=null,Ht(),mi())},V.flush=function(F,$,oe){if(F===void 0&&(F=!0),!s){pa();try{return V[nT](F,null,oe||1)}catch(be){bt(V[Ao](),1,22,"flush failed, telemetry will not be collected: "+Sc(be),{exception:de(be)})}}},V.onunloadFlush=function(){if(!s)if(_||D)try{return V[nT](!0,H,2)}catch(F){bt(V[Ao](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Sc(F),{exception:de(F)})}else V.flush(!1)},V.addHeader=function(F,$){l[F]=$},V.initialize=function(F,$,oe,be){V.isInitialized()&&bt(V[Ao](),1,28,"Sender is already initialized"),_e.initialize(F,$,oe,be);var le=V.identifier;u=new $Ce($.logger),n=0,i=null,o=0,V[iT]=null,c=0;var B=V[Ao]();m=sR(bl("Sender"),$.evtNamespace&&$.evtNamespace()),f=jCe(m),V._addHook(tR(F,function(X){var Q=X.cfg;Q.storagePrefix&&O5(Q.storagePrefix);var xe=bg(null,Q,$),fe=xe.getExtCfg(le,t2e);Xe(V,"_senderConfig",{g:function(){return fe}}),g!==fe.endpointUrl&&(h=g=fe.endpointUrl),y&&y!==fe[T6]&&K(y,function(Yr){delete l[Yr.header]}),v=fe[pQ],_=(fe[fQ]===!1||fe[S6]===!1)&&KE(),D=fe[mQ],R=!!fe.disableXhr;var $e=fe[pR],dt=!!fe[hQ]&&(!!$e||$_()),vr=fe.namePrefix,pr=dt!==W||dt&&ve!==vr||dt&&L!==$e;if(V[Kf]){if(pr)try{V._buffer=V._buffer[dR](B,fe,dt)}catch(Yr){bt(V[Ao](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Sc(Yr),{exception:de(Yr)})}Ht()}else V[Kf]=dt?new SQ(B,fe):new A6(B,fe);ve=vr,W=dt,L=$e,k=!fe[gQ]&&i6(!0),ce=!!fe[vQ],V._sample=new ZCe(fe.samplingPercentage,B),x=fe[_Q],Y(x,Q)||bt(B,1,100,"Invalid Instrumentation key "+x),y=fe[T6],!DE(h)&&y&&y[kt]>0?K(y,function(Yr){r.addHeader(Yr.header,Yr.value)}):y=null,J=fe.enableSendPromise;var Ni=fe.httpXHROverride,Di=null,Mc=null;Di=lt([1,2],!1);var Ur={sendPOST:re};G=function(Yr,qu){return St(Ur,Yr,qu)},M=function(Yr,qu){return St(Ur,Yr,qu,!1)},!fe[S6]&&KE()&&(Di=lt([3],!1)),Di=D?Ni:Di||Ni||Ur,V[iT]=function(Yr,qu){return St(Di,Yr,qu)},k&&(p=Fe),Mc=D?Ni:lt([3,1],!0)||Ni,(D||!p)&&Mc&&(p=function(Yr,qu){return St(Mc,Yr,qu)}),p||(p=G),E=fe.disableTelemetry,S=fe[yQ]||Ag,O=fe.isRetryDisabled,U=fe[bQ]}))},V.processTelemetry=function(F,$){$=V._getTelCtx($);var oe=$[Ao]();try{if(E)return;if(!F){bt(oe,1,7,"Cannot send empty telemetry");return}if(F.baseData&&!F[I6]){bt(oe,1,70,"Cannot send telemetry without baseData and baseType");return}if(F[I6]||(F[I6]="EventData"),!V[iT]){bt(oe,1,28,"Sender was not initialized");return}if(ze(F))F[wE]=V._sample[oT];else{bt(oe,2,33,"Telemetry item was sampled out and not sent",{SampleRate:V._sample[oT]});return}var be=F.iKey||x,le=e.constructEnvelope(F,be,oe,S);if(!le){bt(oe,1,47,"Unable to create an AppInsights envelope");return}var B=!1;if(F[Yi]&&F[Yi][RE]&&(K(F[Yi][RE],function(xe){try{xe&&xe(le)===!1&&(B=!0,nR(oe,"Telemetry processor check returns false"))}catch(fe){bt(oe,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Sc(fe),{exception:de(fe)},!0)}}),delete F[Yi][RE]),B)return;var X=u.serialize(le),Q=V[Kf];Ht(X),Q[zf](X),mi()}catch(xe){bt(oe,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Sc(xe),{exception:de(xe)})}V.processNext(F,$)},V[NCe]=function(F,$,oe){F.readyState===4&&Te(F.status,$,F.responseURL,oe,j0(F),P6(F)||F.response)},V[nT]=function(F,$,oe){F===void 0&&(F=!0);var be;if(!s)try{var le=V[Kf];if(E)le[$f]();else{if(le[Cg]()>0){var B=le.getItems();V0(oe||0,F),$?be=$.call(V,B,F):be=V[iT](B,F)}o=+new Date}pa()}catch(Q){var X=zX();(!X||X>9)&&bt(V[Ao](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Sc(Q),{exception:de(Q)})}return be},V._doTeardown=function(F,$){V.onunloadFlush(),QX(f,!1),Ce()},V[wg]=function(F,$,oe){bt(V[Ao](),2,26,"Failed to send telemetry.",{message:$}),V._buffer&&V._buffer[sy](F)},V[C6]=function(F,$){for(var oe=[],be=[],le=$.errors.reverse(),B=0,X=le;B<X.length;B++){var Q=X[B],xe=F.splice(Q.index,1)[0];Em(Q.statusCode)?be[Yf](xe):oe[Yf](xe)}F[kt]>0&&V[fR](F,$[mR]),oe[kt]>0&&V[wg](oe,j0(null,["partial success",$[mR],"of",$.itemsReceived].join(" "))),be[kt]>0&&(Ft(be),bt(V[Ao](),2,40,"Partial success. Delivered: "+F[kt]+", Failed: "+oe[kt]+". Will retry to send "+be[kt]+" our of "+$[DCe]+" items"))},V[fR]=function(F,$){V._buffer&&V._buffer[sy](F)},V._xdrOnLoad=function(F,$){var oe=P6(F);if(F&&(oe+""=="200"||oe===""))n=0,V[fR]($,0);else{var be=ht(oe);be&&be.itemsReceived&&be.itemsReceived>be[mR]&&!O?V[C6]($,be):V[wg]($,Tm(F))}};function ze(F){return V._sample.isSampledIn(F)}function lt(F,$){for(var oe,be=null,le=null,B=0;le==null&&B<F[kt];)be=F[B],!R&&be===1?YX()?le=ib:o6()&&(le=re):be===2&&i6($)?le=ft:KE()&&be===3&&(le=ne),B++;return le?(oe={},oe[E6]=le,oe):null}function Tt(F,$,oe,be){$===200&&F?V._onSuccess(F,F[kt]):be&&V[wg](F,be)}function St(F,$,oe,be){be===void 0&&(be=!0);var le=function(Q,xe,fe){return Tt($,Q,xe,fe)},B=Ye($),X=F&&F[E6];return X&&B?(be&&V._buffer[tT]($),X(B,le,!oe)):null}function Ye(F){var $;if(ae(F)&&F[kt]>0){var oe=V._buffer[lR](F),be=($={},$[lo]=oe,$.urlString=h,$.headers=l,$.disableXhrSync=R,$.disableFetchKeepAlive=!k,$[sT]=F,$);return be}return null}function ft(F,$,oe){return je(F,$,!1)}function Ht(F){var $=F?F[kt]:0;return V[Kf].size()+$>v?((!f||f[cR]())&&V[nT](!0,null,10),!0):!1}function Te(F,$,oe,be,le,B){var X=null;if(V._appId||(X=ht(B),X&&X.appId&&(V._appId=X.appId)),(F<200||F>=300)&&F!==0){if((F===301||F===307||F===308)&&!Be(oe)){V[wg]($,le);return}!O&&Em(F)?(Ft($),bt(V[Ao](),2,40,". Response code "+F+". Will retry to send "+$[kt]+" items.")):V[wg]($,le)}else if(f&&!f[cR]()){if(!O){var Q=10;Ft($,Q),bt(V[Ao](),2,40,". Offline - Response Code: ".concat(F,". Offline status: ").concat(!f.isOnline(),". Will retry to send ").concat($.length," items."))}}else Be(oe),F===206?(X||(X=ht(B)),X&&!O?V[C6]($,X):V[wg]($,le)):(n=0,V[fR]($,be))}function Be(F){return c>=10?!1:!ie(F)&&F!==""&&F!==h?(h=F,++c,!0):!1}function N(F,$,oe,be){try{F($,oe,be)}catch{}}function H(F,$){var oe=function(le,B,X){return Tt(F,le,B,X)};if(p)p(F,!1);else{var be=Ye(F);ne(be,oe,!$)}}function te(F,$){var oe=mr(),be=h,le=V[Kf],B=le[lR](F),X=new Blob([B],{type:"text/plain;charset=UTF-8"}),Q=oe.sendBeacon(be,X);return Q&&V._onSuccess(F,F[kt]),Q}function ne(F,$,oe){var be=F,le=be&&be[sT];if(ae(le)&&le[kt]>0&&!te(le,$))if(ce)M&&M(le,!0),bt(V[Ao](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var B=[],X=0;X<le[kt];X++){var Q=le[X];te([Q],$)||B[Yf](Q)}B[kt]>0&&(M&&M(B,!0),bt(V[Ao](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function re(F,$,oe){var be=F,le,B,X,Q=new XMLHttpRequest,xe=h;try{Q[CE]=!0}catch{}return Q.open("POST",xe,!oe),Q[w6]("Content-type","application/json"),DE(xe)&&Q[w6](Mf[6],Mf[7]),K(pn(l),function(fe){Q[w6](fe,l[fe])}),Q.onreadystatechange=function(){var fe=be[sT];V._xhrReadyStateChange(Q,fe,fe[kt]),Q.readyState===4&&B&&B(!0)},Q.onerror=function(fe){N($,400,{},j0(Q)),X&&X(fe)},!oe&&J&&(le=Ti(function(fe,$e){B=fe,X=$e})),Q.send(F[lo]),le}function Fe(F,$){var oe=function(X,Q,xe){return Tt(F,X,Q,xe)};if(ae(F)){for(var be=F[kt],le=0;le<F[kt];le++)be+=F[le][kt];var B=Ye(F);d+be<=net?je(B,oe,!0):KE()?ne(B,oe,!$):(M&&M(F,!0),bt(V[Ao](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function je(F,$,oe){var be,le=h,B=F,X=B[lo],Q=new Blob([X],{type:"application/json"}),xe,fe,$e,dt=new Headers,vr=X[kt],pr=!1,Ni=!1;DE(le)&&dt.append(Mf[6],Mf[7]),K(pn(l),function(Ur){dt.append(Ur,l[Ur])});var Di=(be={method:"POST",headers:dt,body:Q},be[CE]=!0,be);oe&&(Di.keepalive=!0,pr=!0,d+=vr);var Mc=new Request(le,Di);try{Mc[CE]=!0}catch{}!oe&&J&&(xe=Ti(function(Ur,Yr){fe=Ur,$e=Yr}));try{lu(fetch(Mc),function(Ur){if(oe&&(d-=vr,vr=0),!Ni)if(Ni=!0,Ur.rejected)N($,400,{},Ur.reason&&Ur.reason.message),$e&&$e(Ur.reason);else{var Yr=Ur.value;Yr.ok?lu(Yr.text(),function(qu){var eie=B[sT];Te(Yr.status,eie,Yr.url,eie[kt],Yr.statusText,qu.value||""),fe&&fe(!0)}):(N($,400,{},Yr.statusText),fe&&fe(!1))}})}catch(Ur){Ni||(N($,400,{},de(Ur)),$e&&$e(Ur))}return pr&&!Ni&&(Ni=!0,N($,200,{}),fe&&fe(!0)),xe}function ht(F){try{if(F&&F!==""){var $=Ic().parse(F);if($&&$.itemsReceived&&$.itemsReceived>=$[mR]&&$.itemsReceived-$.itemsAccepted===$.errors[kt])return $}}catch(oe){bt(V[Ao](),1,43,"Cannot parse the response. "+Sc(oe),{response:F})}return null}function Ft(F,$){if($===void 0&&($=1),!(!F||F[kt]===0)){var oe=V[Kf];oe[sy](F),n++;for(var be=0,le=F;be<le.length;be++){var B=le[be];oe[zf](B)}zr($),mi()}}function zr(F){var $=10,oe;if(n<=1)oe=$;else{var be=(Math.pow(2,n)-1)/2,le=Math.floor(Math.random()*be*$)+1;le=F*le,oe=Math.max(Math.min(le,3600),$)}var B=Yt()+oe*1e3;i=B}function mi(){if(!a&&!s){var F=i?Math.max(0,i-Yt()):0,$=Math.max(U,F);a=Nn(function(){a=null,V[nT](!0,null,1)},$)}}function pa(){a&&a.cancel(),a=null,i=null}function Em(F){return F===401||F===403||F===408||F===429||F===500||F===502||F===503||F===504}function j0(F,$){return F?"XMLHttpRequest,Status:"+F.status+",Response:"+P6(F)||F.response||"":$}function ib(F,$,oe){var be=F,le=gn(),B=new XDomainRequest,X=be[lo];B.onload=function(){var fe=be[sT];V._xdrOnLoad(B,fe)},B.onerror=function(){N($,400,{},Tm(B))};var Q=le&&le.location&&le.location.protocol||"";if(h.lastIndexOf(Q,0)!==0){bt(V[Ao](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),V._buffer[$f]();return}var xe=h.replace(/^(https?:)/,"");B.open("POST",xe),B.send(X)}function Tm(F,$){return F?"XDomainRequest,Response:"+P6(F)||"":$}function fa(){var F="getNotifyMgr";return V.core[F]?V.core[F]():V.core._notificationManager}function V0(F,$){var oe=fa();if(oe&&oe[xQ])try{oe[xQ](F,$)}catch(be){bt(V[Ao](),1,74,"send request notification failed: "+Sc(be),{exception:de(be)})}}function Y(F,$){var oe=$.disableInstrumentationKeyValidation,be=ie(oe)?!1:oe;if(be)return!0;var le="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",B=new RegExp(le);return B.test(F)}function Ce(){V[iT]=null,V[Kf]=null,V._appId=null,V._sample=null,l={},f=null,n=0,i=null,o=null,s=!1,a=null,u=null,c=0,d=0,p=null,m=null,h=null,g=null,v=0,_=!1,y=null,E=!1,x=null,S=Ag,O=!1,W=null,ve=Ag,R=!1,k=!1,ce=!1,G=null,M=null,Xe(V,"_senderConfig",{g:function(){return n6({},t2e)}})}}),r}return e.constructEnvelope=function(r,n,i,o){var s;n!==r.iKey&&!ie(n)?s=cu(cu({},r),{iKey:n}):s=r;var a=set[s.baseType]||TQ;return a(i,s,o)},e}(cQ)});var IQ=T(()=>{r2e()});var CQ,ly,Nt,dy,py,aT,Jf,El,bu,rn,Pg,dr,Ng,N6,fy,my,Vd,qa,Dg,wQ,xu,kg,po,D6,cT,uT,lT,Lg,RQ,Ga,gR,k6,L6,zd,Cc,dT,Og,Tl,Ha,pT,hy,wc,Mg,vR,O6,M6,fT,n2e,_R,gy,Sl,F6,U6,B6,q6,jn=T(()=>{CQ="toLowerCase",ly="blkVal",Nt="length",dy="rdOnly",py="notify",aT="warnToConsole",Jf="throwInternal",El="setDf",bu="watch",rn="logger",Pg="apply",dr="push",Ng="splice",N6="hdlr",fy="cancel",my="initialize",Vd="identifier",qa="isInitialized",Dg="getPlugin",wQ="pollInternalLogs",xu="name",kg="time",po="processNext",D6="getProcessTelContext",cT="getNotifyMgr",uT="addNotificationListener",lT="removeNotificationListener",Lg="enabled",RQ="stopPollingInternalLogs",Ga="unload",gR="onComplete",k6="version",L6="loggingLevelConsole",zd="createNew",Cc="teardown",dT="messageId",Og="message",Tl="isAsync",Ha="diagLog",pT="_doTeardown",hy="update",wc="getNext",Mg="setNextPlugin",vR="userAgent",O6="split",M6="nodeType",fT="replace",n2e="logInternalMessage",_R="isChildEvt",gy="getCtx",Sl="setCtx",F6="complete",U6="traceId",B6="spanId",q6="traceFlags"});function i2e(t,e){AQ||(AQ=hf("AggregationError",function(n,i){i[Nt]>1&&(n.errors=i[1])}));var r=t||"One or more errors occurred.";throw K(e,function(n,i){r+=`
`.concat(i," > ").concat(de(n))}),new AQ(r,e||[])}var AQ,o2e=T(()=>{ye();jn()});var Rc,Dr,Fg,ri,G6,yR,Zf,vy,ja,_y,mT,Ug,hT,Yd,gT,H6,j6,s2e,as=T(()=>{Rc=void 0,Dr="",Fg="channels",ri="core",G6="createPerfMgr",yR="disabled",Zf="extensionConfig",vy="extensions",ja="processTelemetry",_y="priority",mT="eventsSent",Ug="eventsDiscarded",hT="eventsSendRequest",Yd="perfEvent",gT="getPerfMgr",H6="domain",j6="path",s2e="Not dynamic - "});function vT(t){return!ie(t)}function bR(t){var e=t;return e&&Ke(e)&&(e=e[fT](cet,function(r,n){return n.toUpperCase()}),e=e[fT](uet,"_"),e=e[fT](det,function(r,n){return"_"+n})),e}function cs(t,e){return t&&e?en(t,e)!==-1:!1}function V6(t){return t&&t.toISOString()||""}function xR(t){return io(t)?t[xu]:Dr}function Bg(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function PQ(t,e,r){var n;return t?(n=t[e],!n&&ie(n)&&(n=De(r)?{}:r,t[e]=n)):n=De(r)?{}:r,n}function pet(t,e){var r=null,n=null;return Ne(t)?r=t:n=t,function(){var i=arguments;if(r&&(n=r()),n)return n[e][Pg](n,i)}}function yy(t,e,r,n,i){t&&e&&r&&(i!==!1||De(t[e]))&&(t[e]=pet(r,n))}function by(t,e,r,n){return t&&e&&zt(t)&&ae(r)&&K(r,function(i){Ke(i)&&yy(t,i,e,i,n)}),t}var aet,cet,uet,det,s$t,qg=T(()=>{ye();jn();as();aet="getPrototypeOf",cet=/-([a-z])/g,uet=/([^\w\d_$])/g,det=/^(\d+[\w\d_$])/,s$t=Object[aet]});function c2e(t){if(t&&yet){var e=nt("__mockLocation");if(e)return e}return typeof location===ts&&location?location:nt(fet)}function u2e(){return typeof console!==Eo?console:nt(met)}function kQ(){return!!(typeof JSON===ts&&JSON||nt(a2e)!==null)}function l2e(){return kQ()?JSON||nt(a2e):null}function d2e(){return nt(het)}function p2e(){return nt(get)}function ER(){var t=mr();if(t&&(t[vR]!==DQ||NQ===null)){DQ=t[vR];var e=(DQ||Dr)[CQ]();NQ=cs(e,vet)||cs(e,_et)}return NQ}var fet,met,a2e,het,get,vet,_et,NQ,DQ,yet,z6=T(()=>{"use strict";Ei();ye();jn();qg();as();fet="location",met="console",a2e="JSON",het="crypto",get="msCrypto",vet="msie",_et="trident/",NQ=null,DQ=null,yet=!1});function bet(t){t<0&&(t>>>=0),TR=h2e+t&xy,SR=g2e-t&xy,v2e=!0}function xet(){try{var t=Yt()&2147483647;bet((Math.random()*m2e^t)+t)}catch{}}function f2e(t){var e=0,r=d2e()||p2e();return r&&r.getRandomValues&&(e=r.getRandomValues(new Uint32Array(1))[0]&xy),e===0&&ER()&&(v2e||xet(),e=Eet()&xy),e===0&&(e=Math.floor(m2e*Math.random()|0)),t||(e>>>=0),e}function Eet(t){SR=36969*(SR&65535)+(SR>>16)&xy,TR=18e3*(TR&65535)+(TR>>16)&xy;var e=(SR<<16)+(TR&65535)>>>0&xy|0;return t||(e>>>=0),e}function _2e(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=f2e()>>>0,n=0,i=Dr;i[Nt]<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(f2e()<<2&4294967295|r&3)>>>0,n=0);return i}var m2e,xy,h2e,g2e,v2e,TR,SR,y2e=T(()=>{ye();jn();z6();as();m2e=4294967296,xy=4294967295,h2e=123456789,g2e=987654321,v2e=!1,TR=h2e,SR=g2e});function x2e(t){return t[M6]===1||t[M6]===9||!+t[M6]}function Cet(t,e){var r=e[t.id];if(!r){r={};try{x2e(e)&&Xe(e,t.id,{e:!1,v:r})}catch{}}return r}function IR(t,e){return e===void 0&&(e=!1),bR(t+Iet+++(e?"."+b2e:Dr)+Tet)}function E2e(t){var e={id:IR("_aiData-"+(t||Dr)+"."+b2e),accept:function(r){return x2e(r)},get:function(r,n,i,o){var s=r[e.id];return s?s[bR(n)]:(o&&(s=Cet(e,r),s[bR(n)]=i),i)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return e}var b2e,Tet,Iet,Y6=T(()=>{ye();jn();qg();as();y2e();b2e="3.0.6",Tet="."+_2e(6),Iet=0});function $6(t){return t&&zt(t)&&(t.isVal||t.fb||Nr(t,"v")||Nr(t,"mrg")||Nr(t,"ref")||t.set)}function T2e(t,e,r){var n,i=r.dfVal||hd;if(e&&r.fb){var o=r.fb;ae(o)||(o=[o]);for(var s=0;s<o[Nt];s++){var a=o[s],u=e[a];if(i(u)?n=u:t&&(u=t.cfg[a],i(u)&&(n=u),t.set(t.cfg,Ir(a),u)),i(n))break}}return!i(n)&&i(r.v)&&(n=r.v),n}function LQ(t,e,r){var n=r;if(r&&$6(r)&&(n=T2e(t,e,r)),n){$6(n)&&(n=LQ(t,e,n));var i;ae(n)?(i=[],i[Nt]=n[Nt]):mt(n)&&(i={}),i&&(me(n,function(o,s){s&&$6(s)&&(s=LQ(t,e,s)),i[o]=s}),n=i)}return n}function CR(t,e,r,n){var i,o,s,a=n,u,c,l,d;$6(a)?(i=a.isVal,o=a.set,l=a[dy],d=a[ly],u=a.mrg,c=a.ref,!c&&De(c)&&(c=!!u),s=T2e(t,e,a)):s=n,d&&t[ly](e,r);var p,f=!0,m=e[r];(m||!ie(m))&&(p=m,f=!1,i&&p!==s&&!i(p)&&(p=s,f=!0),o&&(p=o(p,s,e),f=p===s)),f?s?p=LQ(t,e,s):p=s:(mt(p)||ae(s))&&u&&s&&(mt(s)||ae(s))&&me(s,function(h,g){CR(t,p,h,g)}),t.set(e,r,p),c&&t.ref(e,r),l&&t[dy](e,r)}var OQ=T(()=>{ye();jn()});function MQ(t){if(t){var e;if(ae(t)?(e=[],e[Nt]=t[Nt]):mt(t)&&(e={}),e)return me(t,function(r,n){e[r]=MQ(n)}),e}return t}function I2e(t){if(t){var e=t[$d]||t;if(e.cfg&&(e.cfg===t||e.cfg[$d]===e))return e}return null}function C2e(t){if(t&&(mt(t)||ae(t)))try{t[S2e]=!0}catch{}return t}function W6(t,e,r){var n=!1;return r&&!t[e.blkVal]&&(n=r[wet],!n&&!r[S2e]&&(n=mt(r)||ae(r))),n}function K6(t){Lr("InvalidAccess:"+t)}var $d,S2e,wet,FQ=T(()=>{ye();jn();$d=os("[[ai_dynCfg_1]]"),S2e=os("[[ai_blkDynCfg_1]]"),wet=os("[[ai_frcDynCfg_1]]")});function Aet(t,e,r){ae(e)&&K(Ret,function(n){var i=e[n];e[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i[Pg](this,o);return wR(t,e,r,"Patching"),a}})}function X6(t,e){var r=dc(t,e);return r&&r.get}function Pet(t,e,r,n){var i={n:r,h:[],trk:function(c){c&&c.fn&&(Qe(i.h,c)===-1&&i.h[dr](c),t.trk(c,i))},clr:function(c){var l=Qe(i.h,c);l!==-1&&i.h[Ng](l,1)}},o=!0,s=!1;function a(){o&&(s=s||W6(a,t,n),n&&!n[$d]&&s&&(n=wR(t,n,r,"Converting")),o=!1);var c=t.act;return c&&i.trk(c),n}a[t.prop]={chng:function(){t.add(i)}};function u(c){if(n!==c){a[t.ro]&&!t.upd&&K6("["+r+"] is read-only:"+de(e)),o&&(s=s||W6(a,t,n),o=!1);var l=s&&a[t.rf];if(s)if(l){me(n,function(p){n[p]=c?c[p]:Rc});try{me(c,function(p,f){RR(t,n,p,f)}),c=n}catch(p){_T((t.hdlr||{})[rn],r,"Assigning",p),s=!1}}else n&&n[$d]&&me(n,function(p){var f=X6(n,p);if(f){var m=f[t.prop];m&&m.chng()}});if(c!==n){var d=c&&W6(a,t,c);!l&&d&&(c=wR(t,c,r,"Converting")),n=c,s=d}t.add(i)}}Xe(e,i.n,{g:a,s:u})}function RR(t,e,r,n){if(e){var i=X6(e,r),o=i&&!!i[t.prop];o?e[r]=n:Pet(t,e,r,n)}return e}function Q6(t,e,r,n){if(e){var i=X6(e,r),o=i&&!!i[t.prop],s=n&&n[0],a=n&&n[1],u=n&&n[2];if(!o){if(u)try{C2e(e)}catch(c){_T((t.hdlr||{})[rn],r,"Blocking",c)}try{RR(t,e,r,e[r]),i=X6(e,r)}catch(c){_T((t.hdlr||{})[rn],r,"State",c)}}s&&(i[t.rf]=s),a&&(i[t.ro]=a),u&&(i[t.blkVal]=!0)}return e}function wR(t,e,r,n){try{me(e,function(i,o){RR(t,e,i,o)}),e[$d]||(mn(e,$d,{get:function(){return t[N6]}}),Aet(t,e,r))}catch(i){_T((t.hdlr||{})[rn],r,n,i)}return e}var Ret,_T,w2e=T(()=>{ye();as();jn();FQ();Ret=["push","pop","shift","unshift","splice"],_T=function(t,e,r,n){t&&t[Jf](3,108,"".concat(r," [").concat(e,"] failed - ")+de(n))}});function R2e(t){var e,r=Pn(AR+"get"+t.uid+PR),n=Pn(AR+"ro"+t.uid+PR),i=Pn(AR+"rf"+t.uid+PR),o=Pn(AR+"blkVal"+t.uid+PR),s=Pn(AR+"dtl"+t.uid+PR),a=null,u=null,c;function l(m,h){var g=c.act;try{c.act=m,m&&m[s]&&(K(m[s],function(_){_.clr(m)}),m[s]=[]),h({cfg:t.cfg,set:t.set.bind(t),setDf:t[El].bind(t),ref:t.ref.bind(t),rdOnly:t[dy].bind(t)})}catch(_){var v=t[rn];throw v&&v[Jf](1,107,de(_)),_}finally{c.act=g||null}}function d(){if(a){var m=a;a=null,u&&u[fy](),u=null;var h=[];if(K(m,function(g){if(g&&(g[s]&&(K(g[s],function(v){v.clr(g)}),g[s]=null),g.fn))try{l(g,g.fn)}catch(v){h[dr](v)}}),a)try{d()}catch(g){h[dr](g)}h[Nt]>0&&i2e("Watcher error(s): ",h)}}function p(m){if(m&&m.h[Nt]>0){a||(a=[]),u||(u=Nn(function(){u=null,d()},0));for(var h=0;h<m.h[Nt];h++){var g=m.h[h];g&&Qe(a,g)===-1&&a[dr](g)}}}function f(m,h){if(m){var g=m[s]=m[s]||[];Qe(g,h)===-1&&g[dr](h)}}return c=(e={prop:r,ro:n,rf:i},e[ly]=o,e[N6]=t,e.add=p,e[py]=d,e.use=l,e.trk=f,e),c}var AR,PR,A2e=T(()=>{ye();o2e();jn();AR="[[ai_",PR="]]"});function Net(t,e){var r={fn:e,rm:function(){r.fn=null,t=null,e=null}};return t.use(r,e),r}function Det(t,e,r){var n,i=I2e(e);if(i)return i;var o=IR("dyncfg",!0),s=e&&r!==!1?e:MQ(e),a;function u(){a[py]()}function c(v,_,y){try{v=RR(a,v,_,y)}catch(E){_T(t,_,"Setting value",E)}return v[_]}function l(v){return Net(a,v)}function d(v,_){a.use(null,function(y){var E=a.upd;try{De(_)||(a.upd=_),v(y)}finally{a.upd=E}})}function p(v,_){var y;return Q6(a,v,_,(y={},y[0]=!0,y))[_]}function f(v,_){var y;return Q6(a,v,_,(y={},y[1]=!0,y))[_]}function m(v,_){var y;return Q6(a,v,_,(y={},y[2]=!0,y))[_]}function h(v,_){return _&&me(_,function(y,E){CR(g,v,y,E)}),v}var g=(n={uid:null,cfg:s},n[rn]=t,n[py]=u,n.set=c,n[El]=h,n[bu]=l,n.ref=p,n[dy]=f,n[ly]=m,n._block=d,n);return Xe(g,"uid",{c:!1,e:!1,w:!1,v:o}),a=R2e(g),wR(a,s,"config","Creating"),g}function ket(t,e){t?(t[aT](e),t[Jf](2,108,e)):K6(e)}function Wi(t,e,r,n){var i=Det(r,t||{},n);return e&&i[El](i.cfg,e),i}function Wd(t,e,r){var n=t[$d]||t;return n.cfg&&(n.cfg===t||n.cfg[$d]===n)?n[bu](e):(ket(r,s2e+de(t)),Wi(t,null,r)[bu](e))}var Gg=T(()=>{ye();Y6();as();jn();OQ();w2e();A2e();FQ()});function yT(t,e){if(t&&t[Ga])return t[Ga](e)}function UQ(t,e,r){var n;return r||(n=Ti(function(i){r=i})),t&&Nh(t)>0?lu(yT(t[0],e),function(){UQ(oo(t,1),e,r)}):r(),n}var P2e=T(()=>{yf();ye();jn()});var N2e,D2e=T(()=>{N2e=500});function BQ(t){return{mrg:!0,v:t}}function qQ(t,e,r){return{fb:r,isVal:t,v:e}}var GQ=T(()=>{});function Let(t,e){return function(){var r=arguments,n=jQ(e);if(n){var i=n.listener;i&&i[t]&&i[t][Pg](i,r)}}}function Oet(){var t=nt("Microsoft");return t&&(Z6=t.ApplicationInsights),Z6}function jQ(t){var e=Z6;return!e&&t.disableDbgExt!==!0&&(e=Z6||Oet()),e?e.ChromeDbgExt:null}function k2e(t){if(!J6){J6={};for(var e=0;e<HQ[Nt];e++)J6[HQ[e]]=Let(HQ[e],t)}return J6}var HQ,Z6,J6,VQ=T(()=>{ye();jn();as();HQ=[mT,Ug,hT,Yd],Z6=null});function L2e(t){return t?'"'+t[fT](/\"/g,Dr)+'"':Dr}function zQ(t,e){var r=u2e();if(r){var n="log";r[t]&&(n=t),Ne(r[n])&&r[n](e)}}function t8(t,e){return(t||{})[rn]||new NR(e)}function M2e(t){return t||new NR}function Va(t,e,r,n,i,o){o===void 0&&(o=!1),M2e(t)[Jf](e,r,n,i,o)}function F2e(t,e){M2e(t)[aT](e)}var bT,O2e,Met,Fet,Uet,Bet,qet,e8,NR,Hg=T(()=>{"use strict";tn();ye();Gg();jn();VQ();z6();as();O2e="warnToConsole",Met="AI (Internal): ",Fet="AI: ",Uet="AITR_",Bet={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},qet=(bT={},bT[0]=null,bT[1]="errorToConsole",bT[2]=O2e,bT[3]="debugToConsole",bT);e8=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o[dT]=e,o[Og]=(n?Fet:Met)+e;var s=Dr;kQ()&&(s=l2e().stringify(i));var a=(r?" message:"+L2e(r):Dr)+(i?" props:"+L2e(s):Dr);o[Og]+=a}return t.dataType="MessageData",t}();NR=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={},i,o,s,a,u;ot(t,this,function(c){u=d(e||{}),c.consoleLoggingLevel=function(){return i},c[Jf]=function(m,h,g,v,_){_===void 0&&(_=!1);var y=new e8(h,g,_,v);if(a)throw de(y);var E=qet[m]||O2e;if(De(y[Og]))f("throw"+(m===1?"Critical":"Warning"),y);else{if(_){var x=+y[dT];!n[x]&&i>=m&&(c[E](y[Og]),n[x]=!0)}else i>=m&&c[E](y[Og]);l(m,y)}},c.debugToConsole=function(m){zQ("debug",m),f("warning",m)},c[aT]=function(m){zQ("warn",m),f("warning",m)},c.errorToConsole=function(m){zQ("error",m),f("error",m)},c.resetInternalMessageCount=function(){r=0,n={}},c[n2e]=l,c[Ga]=function(m){u&&u.rm(),u=null};function l(m,h){if(!p()){var g=!0,v=Uet+h[dT];if(n[v]?g=!1:n[v]=!0,g&&(m<=o&&(c.queue[dr](h),r++,f(m===1?"error":"warn",h)),r===s)){var _="Internal events throttle limit per PageView reached for this app.",y=new e8(23,_,!1);c.queue[dr](y),m===1?c.errorToConsole(_):c[aT](_)}}}function d(m){return Wd(Wi(m,Bet,c).cfg,function(h){var g=h.cfg;i=g[L6],o=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function p(){return r>=s}function f(m,h){var g=jQ(e||{});g&&g[Ha]&&g[Ha](m,h)}})}return t.__ieDyn=1,t}()});function QQ(){!Kd&&(Kd=fc(function(){return fr()}))}function n8(t){return t?t.isEnabled():!0}function X2e(t,e){return e&&t&&ae(t.ignoreCookies)?Qe(t.ignoreCookies,e)!==-1:!1}function Het(t,e){return e&&t&&ae(t.blockedCookies)&&Qe(t.blockedCookies,e)!==-1?!0:X2e(t,e)}function z2e(t,e){var r=e[Lg];if(ie(r)){var n=void 0;De(t[q2e])||(n=!t[q2e]),De(t[KQ])||(n=!t[KQ]),r=n}return r}function Q2e(t,e){var r,n,i,o,s,a,u,c,l;t=Wi(t||V2e,null,e).cfg,s=Wd(t,function(p){p[El](p.cfg,Get),n=p.ref(p.cfg,"cookieCfg"),i=n[j6]||"/",o=n[H6],a=z2e(t,n)!==!1,u=n.getCookie||jet,c=n.setCookie||K2e,l=n.delCookie||K2e},e);var d=(r={isEnabled:function(){var p=z2e(t,n)!==!1&&a&&Y2e(e),f=V2e[G2e];return p&&f&&d!==f&&(p=n8(f)),p},setEnabled:function(p){a=p!==!1,n[Lg]=p},set:function(p,f,m,h,g){var v=!1;if(n8(d)&&!Het(n,p)){var _={},y=It(f||Dr),E=en(y,";");if(E!==-1&&(y=It(pc(f,E)),_=J2e(fn(f,E+1))),Bg(_,H6,h||o,ns,De),!ie(m)){var x=ER();if(De(_[$Q])){var S=Yt(),O=S+m*1e3;if(O>0){var U=new Date;U.setTime(O),Bg(_,$Q,$2e(U,x?U2e:B2e)||$2e(U,x?U2e:B2e)||Dr,ns)}}x||Bg(_,"max-age",Dr+m,null,De)}var W=c2e();W&&W.protocol==="https:"&&(Bg(_,"secure",null,null,De),WQ===null&&(WQ=!Vet((mr()||{})[vR])),WQ&&Bg(_,"SameSite","None",null,De)),Bg(_,j6,g||i,null,De),c(p,W2e(y,_)),v=!0}return v},get:function(p){var f=Dr;return n8(d)&&!X2e(n,p)&&(f=u(p)),f},del:function(p,f){var m=!1;return n8(d)&&(m=d.purge(p,f)),m},purge:function(p,f){var m,h=!1;if(Y2e(e)){var g=(m={},m[j6]=f||"/",m[$Q]="Thu, 01 Jan 1970 00:00:01 GMT",m);ER()||(g["max-age"]="0"),l(p,W2e(Dr,g)),h=!0}return h}},r[Ga]=function(p){s&&s.rm(),s=null},r);return d[G2e]=d,d}function Y2e(t){if(r8===null){r8=!1,!Kd&&QQ();try{var e=Kd.v||{};r8=e[XQ]!==void 0}catch(r){Va(t,2,68,"Cannot access document.cookie - "+xR(r),{exception:de(r)})}}return r8}function J2e(t){var e={};if(t&&t[Nt]){var r=It(t)[O6](";");K(r,function(n){if(n=It(n||Dr),n){var i=en(n,"=");i===-1?e[n]=null:e[It(pc(n,i))]=It(fn(n,i+1))}})}return e}function $2e(t,e){return Ne(t[e])?t[e]():null}function W2e(t,e){var r=t||Dr;return me(e,function(n,i){r+="; "+n+(ie(i)?Dr:"="+i)}),r}function jet(t){var e=Dr;if(!Kd&&QQ(),Kd.v){var r=Kd.v[XQ]||Dr;H2e!==r&&(j2e=J2e(r),H2e=r),e=It(j2e[t]||Dr)}return e}function K2e(t,e){!Kd&&QQ(),Kd.v&&(Kd.v[XQ]=t+"="+e)}function Vet(t){return Ke(t)?!!(cs(t,"CPU iPhone OS 12")||cs(t,"iPad; CPU OS 12")||cs(t,"Macintosh; Intel Mac OS X 10_14")&&cs(t,"Version/")&&cs(t,"Safari")||cs(t,"Macintosh; Intel Mac OS X 10_14")&&vc(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||cs(t,"Chrome/5")||cs(t,"Chrome/6")||cs(t,"UnrealEngine")&&!cs(t,"Chrome")||cs(t,"UCBrowser/12")||cs(t,"UCBrowser/11")):!1}var YQ,Ey,U2e,B2e,XQ,$Q,q2e,KQ,G2e,r8,WQ,H2e,Kd,j2e,V2e,Get,Z2e=T(()=>{ye();GQ();Gg();jn();Hg();z6();qg();as();U2e="toGMTString",B2e="toUTCString",XQ="cookie",$Q="expires",q2e="isCookieUseDisabled",KQ="disableCookiesUsage",G2e="_ckMgr",r8=null,WQ=null,H2e=null,j2e={},V2e={},Get=(YQ={cookieCfg:BQ((Ey={},Ey[H6]={fb:"cookieDomain",dfVal:vT},Ey.path={fb:"cookiePath",dfVal:vT},Ey.enabled=Rc,Ey.ignoreCookies=Rc,Ey.blockedCookies=Rc,Ey)),cookieDomain:Rc,cookiePath:Rc},YQ[KQ]=Rc,YQ)});function DR(t,e,r,n){K(t,function(i){if(i&&i[e])if(r)Nn(function(){return n(i)},0);else try{n(i)}catch{}})}var zet,ewe,twe=T(()=>{tn();yf();ye();Gg();jn();as();zet={perfEvtsSendAll:!1};ewe=function(){function t(e){this.listeners=[];var r,n,i=[],o=Wi(e,zet);n=o[bu](function(s){r=!!s.cfg.perfEvtsSendAll}),ot(t,this,function(s){Xe(s,"listeners",{g:function(){return i}}),s[uT]=function(a){i[dr](a)},s[lT]=function(a){for(var u=Qe(i,a);u>-1;)i[Ng](u,1),u=Qe(i,a)},s[mT]=function(a){DR(i,mT,!0,function(u){u[mT](a)})},s[Ug]=function(a,u){DR(i,Ug,!0,function(c){c[Ug](a,u)})},s[hT]=function(a,u){DR(i,hT,u,function(c){c[hT](a,u)})},s[Yd]=function(a){a&&(r||!a[_R]())&&DR(i,Yd,!1,function(u){a[Tl]?Nn(function(){return u[Yd](a)},0):u[Yd](a)})},s[Ga]=function(a){var u=function(){n&&n.rm(),n=null,i=[]},c;if(DR(i,"unload",!1,function(l){var d=l[Ga](a);d&&(c||(c=[]),c[dr](d))}),c)return Ti(function(l){return lu(C2(c),function(){u(),l()})});u()}})}return t.__ieDyn=1,t}()});function o8(t,e,r,n,i){if(t){var o=t;if(o[gT]&&(o=o[gT]()),o){var s=void 0,a=o[gy](JQ);try{if(s=o.create(e(),n,i),s){if(a&&s[Sl]&&(s[Sl](i8[ZQ],a),a[gy]&&a[Sl])){var u=a[gy](i8[kR]);u||(u=[],a[Sl](i8[kR],u)),u[dr](s)}return o[Sl](JQ,s),r(s)}}catch(c){s&&s[Sl]&&s[Sl]("exception",c)}finally{s&&o.fire(s),o[Sl](JQ,a)}}}return r()}function nwe(){return Yet}var xT,ZQ,kR,Yet,i8,rwe,JQ,eJ=T(()=>{tn();ye();jn();as();xT="ctx",ZQ="ParentContextKey",kR="ChildrenContextKey",Yet=null,i8=function(){function t(e,r,n){var i=this;if(i.start=Yt(),i[xu]=e,i[Tl]=n,i[_R]=function(){return!1},Ne(r)){var o;Xe(i,"payload",{g:function(){return!o&&Ne(r)&&(o=r(),r=null),o}})}i[gy]=function(s){return s?s===t[ZQ]||s===t[kR]?i[s]:(i[xT]||{})[s]:null},i[Sl]=function(s,a){if(s)if(s===t[ZQ])i[s]||(i[_R]=function(){return!0}),i[s]=a;else if(s===t[kR])i[s]=a;else{var u=i[xT]=i[xT]||{};u[s]=a}},i[F6]=function(){var s=0,a=i[gy](t[kR]);if(ae(a))for(var u=0;u<a[Nt];u++){var c=a[u];c&&(s+=c[kg])}i[kg]=Yt()-i.start,i.exTime=i[kg]-s,i[F6]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),rwe=function(){function t(e){this.ctx={},ot(t,this,function(r){r.create=function(n,i,o){return new i8(n,i,o)},r.fire=function(n){n&&(n[F6](),e&&Ne(e[Yd])&&e[Yd](n))},r[Sl]=function(n,i){if(n){var o=r[xT]=r[xT]||{};o[n]=i}},r[gy]=function(n){return(r[xT]||{})[n]}})}return t.__ieDyn=1,t}(),JQ="CoreUtils.doPerf"});function iwe(t,e,r){return t&&t[Nt]===e&&t!==r?!!t.match(/^[\da-f]*$/i):!1}function owe(t){return iwe(t,32,$et)}function swe(t){return iwe(t,16,Wet)}var $et,Wet,awe=T(()=>{jn();$et="00000000000000000000000000000000",Wet="0000000000000000"});function em(t){return Ket.get(t,"state",{},!0)}function tJ(t,e){for(var r=[],n=null,i=t[wc](),o;i;){var s=i[Dg]();if(s){n&&n[Mg]&&s[ja]&&n[Mg](s),o=em(s);var a=!!o[qa];s[qa]&&(a=s[qa]()),a||r[dr](s),n=s,i=i[wc]()}}K(r,function(u){var c=t[ri]();u[my](t.getCfg(),c,e,t[wc]()),o=em(u),!u[ri]&&!o[ri]&&(o[ri]=c),o[qa]=!0,delete o[Cc]})}function s8(t){return t.sort(function(e,r){var n=0;if(r){var i=r[ja];e[ja]?n=i?e[_y]-r[_y]:1:i&&(n=-1)}else n=e?1:-1;return n})}function cwe(t){var e={};return{getName:function(){return e[xu]},setName:function(r){t&&t.setName(r),e[xu]=r},getTraceId:function(){return e[U6]},setTraceId:function(r){t&&t.setTraceId(r),owe(r)&&(e[U6]=r)},getSpanId:function(){return e[B6]},setSpanId:function(r){t&&t.setSpanId(r),swe(r)&&(e[B6]=r)},getTraceFlags:function(){return e[q6]},setTraceFlags:function(r){t&&t.setTraceFlags(r),e[q6]=r}}}var Ket,rJ=T(()=>{"use strict";ye();jn();Y6();as();awe();Ket=E2e("plugin")});function Qet(t,e,r){for(;t;){if(t[Dg]()===r)return t;t=t[wc]()}return jg([r],e.config||{},e)}function nJ(t,e,r,n){var i=null,o=[];e||(e=Wi({},null,r[rn])),n!==null&&(i=n?Qet(t,r,n):t);var s={_next:u,ctx:{core:function(){return r},diagLog:function(){return t8(r,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:l,getConfig:d,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(f){i=f},iterate:p,onComplete:a}};function a(f,m){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];f&&o[dr]({func:f,self:De(m)?s.ctx:m,args:h})}function u(){var f=i;if(i=f?f[wc]():null,!f){var m=o;m&&m[Nt]>0&&(K(m,function(h){try{h.func.call(h.self,h.args)}catch(g){Va(r[rn],2,73,"Unexpected Exception during onComplete - "+de(g))}}),o=[])}return f}function c(f,m){var h=null,g=e.cfg;if(g&&f){var v=g[Zf];!v&&m&&(v={}),g[Zf]=v,v=e.ref(g,Zf),v&&(h=v[f],!h&&m&&(h={}),v[f]=h,h=e.ref(v,f))}return h}function l(f,m){var h=c(f,!0);return m&&me(m,function(g,v){if(ie(h[g])){var _=e.cfg[g];(_||!ie(_))&&(h[g]=_)}CR(e,h,g,v)}),e[El](h,m)}function d(f,m,h){h===void 0&&(h=!1);var g,v=c(f,!1),_=e.cfg;return v&&(v[m]||!ie(v[m]))?g=v[m]:(_[m]||!ie(_[m]))&&(g=_[m]),g||!ie(g)?g:h}function p(f){for(var m;m=s._next();){var h=m[Dg]();h&&f(h)}}return s}function Ty(t,e,r,n){var i=Wi(e),o=nJ(t,i,r,n),s=o.ctx;function a(c){var l=o._next();return l&&l[ja](c,s),!l}function u(c,l){return c===void 0&&(c=null),ae(c)&&(c=jg(c,i.cfg,r,l)),Ty(c||s[wc](),i.cfg,r,l)}return s[po]=a,s[zd]=u,s}function ET(t,e,r){var n=Wi(e.config),i=nJ(t,n,e,r),o=i.ctx;function s(u){var c=i._next();return c&&c[Ga](o,u),!c}function a(u,c){return u===void 0&&(u=null),ae(u)&&(u=jg(u,n.cfg,e,c)),ET(u||o[wc](),e,c)}return o[po]=s,o[zd]=a,o}function LR(t,e,r){var n=Wi(e.config),i=nJ(t,n,e,r),o=i.ctx;function s(u){return o.iterate(function(c){Ne(c[hy])&&c[hy](o,u)})}function a(u,c){return u===void 0&&(u=null),ae(u)&&(u=jg(u,n.cfg,e,c)),LR(u||o[wc](),e,c)}return o[po]=s,o[zd]=a,o}function jg(t,e,r,n){var i=null,o=!n;if(ae(t)&&t[Nt]>0){var s=null;K(t,function(a){if(!o&&n===a&&(o=!0),o&&a&&Ne(a[ja])){var u=Jet(a,e,r);i||(i=u),s&&s._setNext(u),s=u}})}return n&&!i?jg([n],e,r):i}function Jet(t,e,r){var n=null,i=Ne(t[ja]),o=Ne(t[Mg]),s;t?s=t[Vd]+"-"+t[_y]+"-"+dwe++:s="Unknown-0-"+dwe++;var a={getPlugin:function(){return t},getNext:function(){return n},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){n=f}};function u(){var f;return t&&Ne(t[lwe])&&(f=t[lwe]()),f||(f=Ty(a,e,r)),f}function c(f,m,h,g,v){var _=!1,y=t?t[Vd]:Xet,E=f[uwe];return E||(E=f[uwe]={}),f.setNext(n),t&&o8(f[ri](),function(){return y+":"+h},function(){E[s]=!0;try{var x=n?n._id:Dr;x&&(E[x]=!1),_=m(f)}catch(O){var S=n?E[n._id]:!0;S&&(_=!0),(!n||!S)&&Va(f[Ha](),1,73,"Plugin ["+y+"] failed during "+h+" - "+de(O)+", run flags: "+de(E))}},g,v),_}function l(f,m){m=m||u();function h(g){if(!t||!i)return!1;var v=em(t);return v[Cc]||v[yR]?!1:(o&&t[Mg](n),t[ja](f,g),!0)}c(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[po](f)}function d(f,m){function h(){var g=!1;if(t){var v=em(t),_=t[ri]||v[ri];t&&(!_||_===f.core())&&!v[Cc]&&(v[ri]=null,v[Cc]=!0,v[qa]=!1,t[Cc]&&t[Cc](f,m)===!0&&(g=!0))}return g}c(f,h,"unload",function(){},m[Tl])||f[po](m)}function p(f,m){function h(){var g=!1;if(t){var v=em(t),_=t[ri]||v[ri];t&&(!_||_===f.core())&&!v[Cc]&&t[hy]&&t[hy](f,m)===!0&&(g=!0)}return g}c(f,h,"update",function(){},!1)||f[po](m)}return qi(a)}var Xet,uwe,lwe,dwe,iJ=T(()=>{"use strict";ye();OQ();Gg();jn();Hg();as();eJ();rJ();Xet="TelemetryPluginChain",uwe="_hasRun",lwe="_getTelCtx",dwe=0});function a8(){var t=[];function e(n){n&&t[dr](n)}function r(n,i){K(t,function(o){try{o(n,i)}catch(s){Va(n[Ha](),2,73,"Unexpected error calling unload handler - "+de(s))}}),t=[]}return{add:e,run:r}}var oJ=T(()=>{ye();jn();Hg()});function c8(){var t=[];function e(n){var i=t;t=[],K(i,function(o){try{(o.rm||o.remove).call(o)}catch(s){Va(n,2,73,"Unloading:"+de(s))}})}function r(n){n&&ei(t,n)}return{run:e,add:r}}var sJ=T(()=>{ye();Hg()});var aJ,Vg,Zet,pwe,fwe=T(()=>{"use strict";tn();ye();Gg();jn();Hg();qg();as();iJ();oJ();sJ();Vg="getPlugin",Zet=(aJ={},aJ[Zf]={isVal:vT,v:{}},aJ),pwe=function(){function t(){var e=this,r,n,i,o,s;c(),ot(t,e,function(l){l[my]=function(d,p,f,m){u(d,p,m),r=!0},l[Cc]=function(d,p){var f,m=l[ri];if(!m||d&&m!==d[ri]())return;var h,g=!1,v=d||ET(null,m,i&&i[Vg]?i[Vg]():i),_=p||(f={reason:0},f[Tl]=!1,f);function y(){g||(g=!0,o.run(v,p),s.run(v[Ha]()),h===!0&&v[po](_),c())}return!l[pT]||l[pT](v,_,y)!==!0?y():h=!0,h},l[hy]=function(d,p){var f=l[ri];if(!f||d&&f!==d[ri]())return;var m,h=!1,g=d||LR(null,f,i&&i[Vg]?i[Vg]():i),v=p||{reason:0};function _(){h||(h=!0,u(g.getCfg(),g.core(),g[wc]()))}return!l._doUpdate||l._doUpdate(g,v,_)!==!0?_():m=!0,m},yy(l,"_addUnloadCb",function(){return o},"add"),yy(l,"_addHook",function(){return s},"add"),Xe(l,"_unloadHooks",{g:function(){return s}})}),e[Ha]=function(l){return a(l)[Ha]()},e[qa]=function(){return r},e.setInitialized=function(l){r=l},e[Mg]=function(l){i=l},e[po]=function(l,d){d?d[po](l):i&&Ne(i[ja])&&i[ja](l,null)},e._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=n||Ty(null,{},e[ri]);i&&i[Vg]?d=p[zd](null,i[Vg]):d=p[zd](null,i)}return d}function u(l,d,p){Wi(l,Zet,t8(d)),!p&&d&&(p=d[D6]()[wc]());var f=i;i&&i[Vg]&&(f=i[Vg]()),e[ri]=d,n=Ty(p,l,d,f)}function c(){r=!1,e[ri]=null,n=null,i=null,s=c8(),o=a8()}}return t.__ieDyn=1,t}()});function ett(t,e,r){var n={id:e,fn:r};ei(t,n);var i={remove:function(){K(t,function(o,s){if(o.id===n.id)return t[Ng](s,1),-1})}};return i}function ttt(t,e,r){for(var n=!1,i=t[Nt],o=0;o<i;++o){var s=t[o];if(s)try{if(s.fn[Pg](null,[e])===!1){n=!0;break}}catch(a){Va(r,2,64,"Telemetry initializer failed: "+xR(a),{exception:de(a)},!0)}}return!n}var mwe,hwe=T(()=>{Ei();tn();ye();jn();fwe();Hg();qg();as();mwe=function(t){Ls(e,t);function e(){var r=t.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,i;o(),ot(e,r,function(s,a){s.addTelemetryInitializer=function(u){return ett(i,n++,u)},s[ja]=function(u,c){ttt(i,u,c?c[Ha]():s[Ha]())&&s[po](u,c)},s[pT]=function(){o()}});function o(){n=0,i=[]}return r}return e.__ieDyn=1,e}(pwe)});function itt(t,e){return new rwe(e)}function ott(t,e,r){var n,i=[],o=[],s={};return K(r,function(a){(ie(a)||ie(a[my]))&&Zt(ywe);var u=a[_y],c=a[Vd];a&&u&&(ie(s[u])?s[u]=c:F2e(t,"Two extensions have same priority #"+u+" - "+s[u]+", "+c)),!u||u<e?i[dr](a):o[dr](a)}),n={},n[ri]=i,n[Fg]=o,n}function vwe(t,e){var r=!1;return K(e,function(n){if(n===t)return r=!0,-1}),r}function uJ(t,e,r,n){r&&me(r,function(i,o){n&&mt(o)&&mt(e[i])&&uJ(t,e[i],o,n),n&&mt(o)&&mt(e[i])?uJ(t,e[i],o,n):t.set(e,i,o)})}function _we(t,e){var r=null,n=-1;return K(t,function(i,o){if(i.w===e)return r=i,n=o,-1}),{i:n,l:r}}function stt(t,e){var r=_we(t,e).l;return r||(r={w:e,rm:function(){var n=_we(t,e);n.i!==-1&&t[Ng](n.i,1)}},t[dr](r)),r}function att(t,e,r){K(e,function(n){var i=Wd(t,n.w,r);delete n.w,n.rm=function(){i.rm()}})}var zg,ywe,rtt,gwe,ntt,cJ,OR,bwe=T(()=>{"use strict";Ei();tn();yf();ye();Gg();jn();P2e();D2e();Z2e();Y6();VQ();Hg();qg();as();twe();eJ();iJ();rJ();hwe();oJ();sJ();ywe="Plugins must provide initialize method",rtt="_notificationManager",gwe="SDK is still unloading...",ntt="SDK is not initialized",cJ=Zn((zg={cookieCfg:{}},zg[vy]={rdOnly:!0,ref:!0,v:[]},zg[Fg]={rdOnly:!0,ref:!0,v:[]},zg[Zf]={ref:!0,v:{}},zg[G6]=Rc,zg.loggingLevelConsole=0,zg.diagnosticLogInterval=Rc,zg));OR=function(){function t(){var e,r,n,i,o,s,a,u,c,l,d,p,f,m,h,g,v,_,y,E,x,S,O,U,W,L,ve,J;ot(t,this,function(D){G(),D._getDbgPlgTargets=function(){return[O]},D[qa]=function(){return r},D[my]=function(N,H,te,ne){f&&Zt(gwe),D[qa]()&&Zt("Core cannot be initialized more than once"),e=Wi(N,cJ,te||D[rn],!1),N=e.cfg,Be(e[bu](function(je){x=je.cfg.instrumentationKey;var ht=je.ref(je.cfg,Zf);me(ht,function(Ft){je.ref(ht,Ft)}),ie(x)&&Zt("Please provide instrumentation key")})),o=ne,St(),Ye(),D[rn]=te;var re=N[vy];if(l=[],l[dr].apply(l,r_(r_([],H,!1),re,!1)),d=N[Fg],ce(null),(!p||p[Nt]===0)&&Zt("No "+Fg+" available"),d&&d[Nt]>1){var Fe=D[Dg]("TeeChannelController");(!Fe||!Fe.plugin)&&Va(n,1,28,"TeeChannel required")}att(N,S,n),S=null,r=!0,D.releaseQueue(),D[wQ]()},D.getChannels=function(){var N=[];return p&&K(p,function(H){N[dr](H)}),qi(N)},D.track=function(N){o8(D[gT](),function(){return"AppInsightsCore:track"},function(){N===null&&(Te(N),Zt("Invalid telemetry item")),!N[xu]&&ie(N[xu])&&(Te(N),Zt("telemetry name required")),N.iKey=N.iKey||x,N[kg]=N[kg]||V6(new Date),N.ver=N.ver||"4.0",!f&&D[qa]()?M()[po](N):i[dr](N)},function(){return{item:N}},!N.sync)},D[D6]=M,D[cT]=function(){return o||(o=new ewe(e.cfg),D[rtt]=o),o},D[uT]=function(N){D[cT]()[uT](N)},D[lT]=function(N){o&&o[lT](N)},D.getCookieMgr=function(){return u||(u=Q2e(e.cfg,D[rn])),u},D.setCookieMgr=function(N){u!==N&&(yT(u,!1),u=N)},D[gT]=function(){return!s&&!a&&Be(e[bu](function(N){if(N.cfg.enablePerfMgr){var H=N.cfg[G6];Ne(H)&&(a=H(D,D[cT]()))}})),s||a||nwe()},D.setPerfMgr=function(N){s=N},D.eventCnt=function(){return i[Nt]},D.releaseQueue=function(){if(r&&i[Nt]>0){var N=i;i=[],K(N,function(H){M()[po](H)})}},D[wQ]=function(N){return h=N||null,J=!1,L&&L[fy](),R(!0)};function R(N){if((!L||!L[Lg])&&!J){var H=N||n&&n.queue[Nt]>0;H&&(ve||(ve=!0,Be(e[bu](function(te){var ne=te.cfg.diagnosticLogInterval;(!ne||!(ne>0))&&(ne=1e4);var re=!1;L&&(re=L[Lg],L[fy]()),L=v2(lt,ne),L.unref(),L[Lg]=re}))),L[Lg]=!0)}return L}D[RQ]=function(){J=!0,L&&L[fy](),lt()},by(D,function(){return m},["addTelemetryInitializer"]),D[Ga]=function(N,H,te){var ne;N===void 0&&(N=!0),r||Zt(ntt),f&&Zt(gwe);var re=(ne={reason:50},ne[Tl]=N,ne.flushComplete=!1,ne),Fe;N&&!H&&(Fe=Ti(function(Ft){H=Ft}));var je=ET(_e(),D);je[gR](function(){_.run(D[rn]),UQ([u,o,n],N,function(){G(),H&&H(re)})},D);function ht(Ft){re.flushComplete=Ft,f=!0,v.run(je,re),D[RQ](),je[po](re)}return lt(),Tt(N,ht,6,te)||ht(!1),Fe},D[Dg]=V,D.addPlugin=function(N,H,te,ne){if(!N){ne&&ne(!1),Ht(ywe);return}var re=V(N[Vd]);if(re&&!H){ne&&ne(!1),Ht("Plugin ["+N[Vd]+"] is already loaded!");return}var Fe={reason:16};function je(zr){l[dr](N),Fe.added=[N],ce(Fe),ne&&ne(!0)}if(re){var ht=[re.plugin],Ft={reason:2,isAsync:!!te};ze(ht,Ft,function(zr){zr?(Fe.removed=ht,Fe.reason|=32,je(!0)):ne&&ne(!1)})}else je(!1)},D.updateCfg=function(N,H){H===void 0&&(H=!0);var te;if(D[qa]()){te={reason:1,cfg:e.cfg,oldCfg:t_({},e.cfg),newConfig:t_({},N),merge:H},N=te.newConfig;var ne=e.cfg;N[vy]=ne[vy],N[Fg]=ne[Fg]}e._block(function(re){var Fe=re.cfg;uJ(re,Fe,N,H),H||me(Fe,function(je){Nr(N,je)||re.set(Fe,je,Rc)}),re[El](Fe,cJ)},!0),e[py](),te&&ft(te)},D.evtNamespace=function(){return g},D.flush=Tt,D.getTraceCtx=function(N){return E||(E=cwe()),E},D.setTraceCtx=function(N){E=N||null},D.addUnloadHook=Be,yy(D,"addUnloadCb",function(){return v},"add"),D.onCfgChange=function(N){var H;return r?H=Wd(e.cfg,N,D[rn]):H=stt(S,N),{rm:function(){H.rm()}}},D.getWParam=function(){return hc()||e.cfg.enableWParam?0:-1};function k(){var N={};U=[];var H=function(te){te&&K(te,function(ne){if(ne[Vd]&&ne[k6]&&!N[ne.identifier]){var re=ne[Vd]+"="+ne[k6];U[dr](re),N[ne.identifier]=ne}})};H(p),d&&K(d,function(te){H(te)}),H(l)}function G(){r=!1,e=Wi({},cJ,D[rn]),e.cfg[L6]=1,Xe(D,"config",{g:function(){return e.cfg},s:function(H){D.updateCfg(H,!1)}}),Xe(D,"pluginVersionStringArr",{g:function(){return U||k(),U}}),Xe(D,"pluginVersionString",{g:function(){return W||(U||k(),W=U.join(";")),W||Dr}}),Xe(D,"logger",{g:function(){return n||(n=new NR(e.cfg),e[rn]=n),n},s:function(H){e[rn]=H,n!==H&&(yT(n,!1),n=H)}}),D[rn]=new NR(e.cfg),O=[];var N=D.config[vy]||[];N.splice(0,N[Nt]),ei(N,O),m=new mwe,i=[],yT(o,!1),o=null,s=null,a=null,yT(u,!1),u=null,c=null,l=[],d=null,p=null,f=!1,h=null,g=IR("AIBaseCore",!0),v=a8(),E=null,x=null,_=c8(),S=[],W=null,U=null,J=!1}function M(){var N=Ty(_e(),e.cfg,D);return N[gR](R),N}function ce(N){var H=ott(D[rn],N2e,l);c=null,W=null,U=null,p=(d||[])[0]||[],p=s8(ei(p,H[Fg]));var te=ei(s8(H[ri]),p);O=qi(te);var ne=D.config[vy]||[];ne.splice(0,ne[Nt]),ei(ne,O);var re=M();p&&p[Nt]>0&&tJ(re[zd](p),te),tJ(re,te),N&&ft(N)}function V(N){var H=null,te=null,ne=[];return K(O,function(re){if(re[Vd]===N&&re!==m)return te=re,-1;re.getChannel&&ne[dr](re)}),!te&&ne[Nt]>0&&K(ne,function(re){if(te=re.getChannel(N),!te)return-1}),te&&(H={plugin:te,setEnabled:function(re){em(te)[yR]=!re},isEnabled:function(){var re=em(te);return!re[Cc]&&!re[yR]},remove:function(re,Fe){var je;re===void 0&&(re=!0);var ht=[te],Ft=(je={reason:1},je[Tl]=re,je);ze(ht,Ft,function(zr){zr&&ce({reason:32,removed:ht}),Fe&&Fe(zr)})}}),H}function _e(){if(!c){var N=(O||[]).slice();Qe(N,m)===-1&&N[dr](m),c=jg(s8(N),e.cfg,D)}return c}function ze(N,H,te){if(N&&N[Nt]>0){var ne=jg(N,e.cfg,D),re=ET(ne,D);re[gR](function(){var Fe=!1,je=[];K(l,function(Ft,zr){vwe(Ft,N)?Fe=!0:je[dr](Ft)}),l=je,W=null,U=null;var ht=[];d&&(K(d,function(Ft,zr){var mi=[];K(Ft,function(pa){vwe(pa,N)?Fe=!0:mi[dr](pa)}),ht[dr](mi)}),d=ht),te&&te(Fe),R()}),re[po](H)}else te(!1)}function lt(){if(n&&n.queue){var N=n.queue.slice(0);n.queue[Nt]=0,K(N,function(H){var te,ne=(te={},te[xu]=h||"InternalMessageId: "+H[dT],te.iKey=x,te[kg]=V6(new Date),te.baseType=e8.dataType,te.baseData={message:H[Og]},te);D.track(ne)})}}function Tt(N,H,te,ne){var re=1,Fe=!1,je=null;ne=ne||5e3;function ht(){re--,Fe&&re===0&&(je&&je[fy](),je=null,H&&H(Fe),H=null)}if(p&&p[Nt]>0){var Ft=M()[zd](p);Ft.iterate(function(zr){if(zr.flush){re++;var mi=!1;zr.flush(N,function(){mi=!0,ht()},te)||mi||(N&&je==null?je=Nn(function(){je=null,ht()},ne):ht())}})}return Fe=!0,ht(),!0}function St(){!o&&D[cT](),Be(e[bu](function(N){var H=N.cfg.disableDbgExt;H===!0&&y&&(o[lT](y),y=null),o&&!y&&H!==!0&&(y=k2e(N.cfg),o[uT](y))}))}function Ye(){Be(e[bu](function(N){var H=N.cfg.enablePerfMgr;!H&&a&&(a=null),H&&PQ(N.cfg,G6,itt)}))}function ft(N){var H=LR(_e(),D);H[gR](R),(!D._updateHook||D._updateHook(H,N)!==!0)&&H[po](N)}function Ht(N){var H=D[rn];H?(Va(H,2,73,N),R()):Zt(N)}function Te(N){var H=D[cT]();H&&H[Ug]([N],2)}function Be(N){_.add(N)}})}return t.__ieDyn=1,t}()});var lJ=T(()=>{bwe();qg();ye();Gg();GQ()});var u8,l8,xwe=T(()=>{u8="instrumentationKey",l8="connectionString"});var Ewe={};Fn(Ewe,{AppInsightsCore:()=>OR,ApplicationInsights:()=>ltt,Sender:()=>hR,SeverityLevel:()=>j5,arrForEach:()=>K,isNullOrUndefined:()=>ie,proxyFunctions:()=>by,throwError:()=>Zt});function utt(t){return t&&t>0}var ctt,ltt,Twe=T(()=>{tn();IQ();Bf();lJ();ye();xwe();lJ();Bf();IQ();ctt={diagnosticLogInterval:qQ(utt,1e4)};ltt=function(){function t(e){var r=new OR,n;(ie(e)||ie(e[u8])&&ie(e[l8]))&&Zt("Invalid input configuration"),ot(t,this,function(o){Xe(o,"config",{g:function(){return n}}),s(),o.initialize=s,o.track=i,by(o,r,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"]);function s(){var a=Wi(e||{},ctt);n=a.cfg,r.addUnloadHook(Wd(a,function(){if(n[l8]){var u=Bw(n[l8]),c=u.ingestionendpoint;n.endpointUrl=c?c+Od:n.endpointUrl,n[u8]=u.instrumentationkey||n[u8]}})),r.initialize(n,[new hR])}});function i(o){o&&(o.baseData=o.baseData||{},o.baseType=o.baseType||"EventData"),r.track(o)}}return t.__ieDyn=1,t}()});var Swe=P(Xd=>{"use strict";var dtt=Xd&&Xd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ptt=Xd&&Xd.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ftt=Xd&&Xd.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dtt(e,t,r);return ptt(e,t),e};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.appInsightsClientFactory=void 0;var mtt=(Bf(),ki(IIe)),htt=_Y(),gtt=async(t,e,r)=>{let n;try{let o=await Promise.resolve().then(()=>ftt((Twe(),ki(Ewe))));if(n=new o.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),e){n.config.extensionConfig={};let s={alwaysUseXhrOverride:!0,httpXHROverride:e};n.config.extensionConfig[mtt.BreezeChannelIdentifier]=s}}catch(o){return Promise.reject(o)}return{logEvent:(o,s)=>{let a={...s?.properties,...s?.measurements};r?.length&&htt.TelemetryUtil.applyReplacements(a,r),n?.track({name:o,data:a,baseType:"EventData",baseData:{name:o,properties:s?.properties,measurements:s?.measurements}})},flush:async()=>{n?.flush(!1)},dispose:async()=>new Promise(s=>{n?.unload(!0,()=>{s(),n=void 0},1e3)})}};Xd.appInsightsClientFactory=gtt});var Rwe=P(tm=>{"use strict";var vtt=tm&&tm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_tt=tm&&tm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fJ=tm&&tm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vtt(e,t,r);return _tt(e,t),e};Object.defineProperty(tm,"__esModule",{value:!0});var dJ=fJ(require("os")),Iwe=fJ(require("vscode")),ytt=fJ(require("https")),btt=Mbe(),xtt=Fbe(),Cwe=_Y(),Ett=HTe(),Ttt=Swe();function wwe(){return{sendPOST:(e,r)=>{let n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let i=ytt.request(e.urlString,n,o=>{o.on("data",function(s){r(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){r(0,{})})});i.write(e.data,o=>{o&&r(0,{})}),i.end()}catch{r(0,{})}}}}var pJ=class extends btt.BaseTelemetryReporter{constructor(e,r){let n=s=>(0,Ttt.appInsightsClientFactory)(s,wwe(),r);Cwe.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=s=>(0,Ett.oneDataSystemClientFactory)(s,Iwe,wwe()));let i={release:dJ.release(),platform:dJ.platform(),architecture:dJ.arch()},o=new xtt.BaseTelemetrySender(e,n);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,Iwe,{additionalCommonProperties:Cwe.TelemetryUtil.getAdditionalCommonProperties(i)})}};tm.default=pJ});var YRe=P(e0=>{"use strict";var bnt=e0&&e0.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(e0,"__esModule",{value:!0});e0.isBinaryFileSync=e0.isBinaryFile=void 0;var Zg=require("fs"),SZ=require("util"),xnt=SZ.promisify(Zg.stat),Ent=SZ.promisify(Zg.open),Tnt=SZ.promisify(Zg.close),GR=512,TZ=class{constructor(e,r){this.fileBuffer=e,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(e){let r=new Array;for(let n=0;n<e;n++)r[n]=this.nextByte();return r}};function EZ(t){let e=0,r=0;for(;!t.hasError();){let n=t.nextByte();if(r=r|(n&127)<<7*e,!(n&128))break;e++}return r}function Snt(t){switch(EZ(t)&7){case 0:return EZ(t),!0;case 1:return t.next(8),!0;case 2:let n=EZ(t);return t.next(n),!0;case 5:return t.next(4),!0}return!1}function Int(t,e){let r=new TZ(t,e),n=0;for(;;){if(!Snt(r)&&!r.hasError())return!1;if(r.hasError())break;n++}return n>0}function Cnt(t,e){return bnt(this,void 0,void 0,function*(){if(VRe(t)){let r=yield xnt(t);zRe(r);let n=yield Ent(t,"r"),i=Buffer.alloc(GR);return new Promise((o,s)=>{Zg.read(n,i,0,GR,0,(a,u,c)=>{Tnt(n),a?s(a):o(F8(i,u))})})}else return e===void 0&&(e=t.length),F8(t,e)})}e0.isBinaryFile=Cnt;function wnt(t,e){if(VRe(t)){let r=Zg.statSync(t);zRe(r);let n=Zg.openSync(t,"r"),i=Buffer.alloc(GR),o=Zg.readSync(n,i,0,GR,0);return Zg.closeSync(n),F8(i,o)}else return e===void 0&&(e=t.length),F8(t,e)}e0.isBinaryFileSync=wnt;function F8(t,e){if(e===0)return!1;let r=0,n=Math.min(e,GR);if(e>=3&&t[0]===239&&t[1]===187&&t[2]===191||e>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||e>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||e>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(n>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(e>=2&&t[0]===254&&t[1]===255||e>=2&&t[0]===255&&t[1]===254)return!1;for(let i=0;i<n;i++){if(t[i]===0)return!0;if((t[i]<7||t[i]>14)&&(t[i]<32||t[i]>127)){if(t[i]>193&&t[i]<224&&i+1<n){if(i++,t[i]>127&&t[i]<192)continue}else if(t[i]>223&&t[i]<240&&i+2<n&&(i++,t[i]>127&&t[i]<192&&t[i+1]>127&&t[i+1]<192)){i++;continue}if(r++,i>=32&&r*100/n>10)return!0}}return!!(r*100/n>10||r>1&&Int(t,n))}function VRe(t){return typeof t=="string"}function zRe(t){if(!t.isFile())throw new Error("Path provided was not a file!")}});var WR=P((Ror,vAe)=>{"use strict";var op="\\\\/",fAe=`[^${op}]`,om="\\.",eit="\\+",tit="\\?",cM="\\/",rit="(?=.)",mAe="[^/]",jZ=`(?:${cM}|$)`,hAe=`(?:^|${cM})`,VZ=`${om}{1,2}${jZ}`,nit=`(?!${om})`,iit=`(?!${hAe}${VZ})`,oit=`(?!${om}{0,1}${jZ})`,sit=`(?!${VZ})`,ait=`[^.${cM}]`,cit=`${mAe}*?`,uit="/",gAe={DOT_LITERAL:om,PLUS_LITERAL:eit,QMARK_LITERAL:tit,SLASH_LITERAL:cM,ONE_CHAR:rit,QMARK:mAe,END_ANCHOR:jZ,DOTS_SLASH:VZ,NO_DOT:nit,NO_DOTS:iit,NO_DOT_SLASH:oit,NO_DOTS_SLASH:sit,QMARK_NO_DOT:ait,STAR:cit,START_ANCHOR:hAe,SEP:uit},lit={...gAe,SLASH_LITERAL:`[${op}]`,QMARK:fAe,STAR:`${fAe}*?`,DOTS_SLASH:`${om}{1,2}(?:[${op}]|$)`,NO_DOT:`(?!${om})`,NO_DOTS:`(?!(?:^|[${op}])${om}{1,2}(?:[${op}]|$))`,NO_DOT_SLASH:`(?!${om}{0,1}(?:[${op}]|$))`,NO_DOTS_SLASH:`(?!${om}{1,2}(?:[${op}]|$))`,QMARK_NO_DOT:`[^.${op}]`,START_ANCHOR:`(?:^|[${op}])`,END_ANCHOR:`(?:[${op}]|$)`,SEP:"\\"},dit={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};vAe.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:dit,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?lit:gAe}}});var uM=P($a=>{"use strict";var{REGEX_BACKSLASH:pit,REGEX_REMOVE_BACKSLASH:fit,REGEX_SPECIAL_CHARS:mit,REGEX_SPECIAL_CHARS_GLOBAL:hit}=WR();$a.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);$a.hasRegexChars=t=>mit.test(t);$a.isRegexChar=t=>t.length===1&&$a.hasRegexChars(t);$a.escapeRegex=t=>t.replace(hit,"\\$1");$a.toPosixSlashes=t=>t.replace(pit,"/");$a.removeBackslashes=t=>t.replace(fit,e=>e==="\\"?"":e);$a.supportsLookbehinds=()=>{if(typeof process<"u"){let t=process.version.slice(1).split(".").map(Number);if(t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10)return!0}return!1};$a.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?$a.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};$a.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};$a.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o};$a.basename=(t,{windows:e}={})=>{let r=t.split(e?/[\\/]/:"/"),n=r[r.length-1];return n===""?r[r.length-2]:n}});var IAe=P((Por,SAe)=>{"use strict";var _Ae=uM(),{CHAR_ASTERISK:zZ,CHAR_AT:git,CHAR_BACKWARD_SLASH:KR,CHAR_COMMA:vit,CHAR_DOT:YZ,CHAR_EXCLAMATION_MARK:$Z,CHAR_FORWARD_SLASH:TAe,CHAR_LEFT_CURLY_BRACE:WZ,CHAR_LEFT_PARENTHESES:KZ,CHAR_LEFT_SQUARE_BRACKET:_it,CHAR_PLUS:yit,CHAR_QUESTION_MARK:yAe,CHAR_RIGHT_CURLY_BRACE:bit,CHAR_RIGHT_PARENTHESES:bAe,CHAR_RIGHT_SQUARE_BRACKET:xit}=WR(),xAe=t=>t===TAe||t===KR,EAe=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Eit=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],u=t,c=-1,l=0,d=0,p=!1,f=!1,m=!1,h=!1,g=!1,v=!1,_=!1,y=!1,E=!1,x=!1,S=0,O,U,W={value:"",depth:0,isGlob:!1},L=()=>c>=n,ve=()=>u.charCodeAt(c+1),J=()=>(O=U,u.charCodeAt(++c));for(;c<n;){U=J();let M;if(U===KR){_=W.backslashes=!0,U=J(),U===WZ&&(v=!0);continue}if(v===!0||U===WZ){for(S++;L()!==!0&&(U=J());){if(U===KR){_=W.backslashes=!0,J();continue}if(U===WZ){S++;continue}if(v!==!0&&U===YZ&&(U=J())===YZ){if(p=W.isBrace=!0,m=W.isGlob=!0,x=!0,i===!0)continue;break}if(v!==!0&&U===vit){if(p=W.isBrace=!0,m=W.isGlob=!0,x=!0,i===!0)continue;break}if(U===bit&&(S--,S===0)){v=!1,p=W.isBrace=!0,x=!0;break}}if(i===!0)continue;break}if(U===TAe){if(o.push(c),s.push(W),W={value:"",depth:0,isGlob:!1},x===!0)continue;if(O===YZ&&c===l+1){l+=2;continue}d=c+1;continue}if(r.noext!==!0&&(U===yit||U===git||U===zZ||U===yAe||U===$Z)===!0&&ve()===KZ){if(m=W.isGlob=!0,h=W.isExtglob=!0,x=!0,U===$Z&&c===l&&(E=!0),i===!0){for(;L()!==!0&&(U=J());){if(U===KR){_=W.backslashes=!0,U=J();continue}if(U===bAe){m=W.isGlob=!0,x=!0;break}}continue}break}if(U===zZ){if(O===zZ&&(g=W.isGlobstar=!0),m=W.isGlob=!0,x=!0,i===!0)continue;break}if(U===yAe){if(m=W.isGlob=!0,x=!0,i===!0)continue;break}if(U===_it){for(;L()!==!0&&(M=J());){if(M===KR){_=W.backslashes=!0,J();continue}if(M===xit){f=W.isBracket=!0,m=W.isGlob=!0,x=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&U===$Z&&c===l){y=W.negated=!0,l++;continue}if(r.noparen!==!0&&U===KZ){if(m=W.isGlob=!0,i===!0){for(;L()!==!0&&(U=J());){if(U===KZ){_=W.backslashes=!0,U=J();continue}if(U===bAe){x=!0;break}}continue}break}if(m===!0){if(x=!0,i===!0)continue;break}}r.noext===!0&&(h=!1,m=!1);let D=u,R="",k="";l>0&&(R=u.slice(0,l),u=u.slice(l),d-=l),D&&m===!0&&d>0?(D=u.slice(0,d),k=u.slice(d)):m===!0?(D="",k=u):D=u,D&&D!==""&&D!=="/"&&D!==u&&xAe(D.charCodeAt(D.length-1))&&(D=D.slice(0,-1)),r.unescape===!0&&(k&&(k=_Ae.removeBackslashes(k)),D&&_===!0&&(D=_Ae.removeBackslashes(D)));let G={prefix:R,input:t,start:l,base:D,glob:k,isBrace:p,isBracket:f,isGlob:m,isExtglob:h,isGlobstar:g,negated:y,negatedExtglob:E};if(r.tokens===!0&&(G.maxDepth=0,xAe(U)||s.push(W),G.tokens=s),r.parts===!0||r.tokens===!0){let M;for(let ce=0;ce<o.length;ce++){let V=M?M+1:l,_e=o[ce],ze=t.slice(V,_e);r.tokens&&(ce===0&&l!==0?(s[ce].isPrefix=!0,s[ce].value=R):s[ce].value=ze,EAe(s[ce]),G.maxDepth+=s[ce].depth),(ce!==0||ze!=="")&&a.push(ze),M=_e}if(M&&M+1<t.length){let ce=t.slice(M+1);a.push(ce),r.tokens&&(s[s.length-1].value=ce,EAe(s[s.length-1]),G.maxDepth+=s[s.length-1].depth)}G.slashes=o,G.parts=a}return G};SAe.exports=Eit});var RAe=P((Nor,wAe)=>{"use strict";var lM=WR(),Rl=uM(),{MAX_LENGTH:dM,POSIX_REGEX_SOURCE:Tit,REGEX_NON_SPECIAL_CHARS:Sit,REGEX_SPECIAL_CHARS_BACKREF:Iit,REPLACEMENTS:CAe}=lM,Cit=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>Rl.escapeRegex(i)).join("..")}return r},FT=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,XZ=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=CAe[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(dM,r.maxLength):dM,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",u=lM.globChars(r.windows),c=lM.extglobChars(u),{DOT_LITERAL:l,PLUS_LITERAL:d,SLASH_LITERAL:p,ONE_CHAR:f,DOTS_SLASH:m,NO_DOT:h,NO_DOT_SLASH:g,NO_DOTS_SLASH:v,QMARK:_,QMARK_NO_DOT:y,STAR:E,START_ANCHOR:x}=u,S=Te=>`(${a}(?:(?!${x}${Te.dot?m:l}).)*?)`,O=r.dot?"":h,U=r.dot?_:y,W=r.bash===!0?S(r):E;r.capture&&(W=`(${W})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let L={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=Rl.removePrefix(t,L),i=t.length;let ve=[],J=[],D=[],R=o,k,G=()=>L.index===i-1,M=L.peek=(Te=1)=>t[L.index+Te],ce=L.advance=()=>t[++L.index]||"",V=()=>t.slice(L.index+1),_e=(Te="",Be=0)=>{L.consumed+=Te,L.index+=Be},ze=Te=>{L.output+=Te.output!=null?Te.output:Te.value,_e(Te.value)},lt=()=>{let Te=1;for(;M()==="!"&&(M(2)!=="("||M(3)==="?");)ce(),L.start++,Te++;return Te%2===0?!1:(L.negated=!0,L.start++,!0)},Tt=Te=>{L[Te]++,D.push(Te)},St=Te=>{L[Te]--,D.pop()},Ye=Te=>{if(R.type==="globstar"){let Be=L.braces>0&&(Te.type==="comma"||Te.type==="brace"),N=Te.extglob===!0||ve.length&&(Te.type==="pipe"||Te.type==="paren");Te.type!=="slash"&&Te.type!=="paren"&&!Be&&!N&&(L.output=L.output.slice(0,-R.output.length),R.type="star",R.value="*",R.output=W,L.output+=R.output)}if(ve.length&&Te.type!=="paren"&&(ve[ve.length-1].inner+=Te.value),(Te.value||Te.output)&&ze(Te),R&&R.type==="text"&&Te.type==="text"){R.value+=Te.value,R.output=(R.output||"")+Te.value;return}Te.prev=R,s.push(Te),R=Te},ft=(Te,Be)=>{let N={...c[Be],conditions:1,inner:""};N.prev=R,N.parens=L.parens,N.output=L.output;let H=(r.capture?"(":"")+N.open;Tt("parens"),Ye({type:Te,value:Be,output:L.output?"":f}),Ye({type:"paren",extglob:!0,value:ce(),output:H}),ve.push(N)},Ht=Te=>{let Be=Te.close+(r.capture?")":""),N;if(Te.type==="negate"){let H=W;if(Te.inner&&Te.inner.length>1&&Te.inner.includes("/")&&(H=S(r)),(H!==W||G()||/^\)+$/.test(V()))&&(Be=Te.close=`)$))${H}`),Te.inner.includes("*")&&(N=V())&&/^\.[^\\/.]+$/.test(N)){let te=XZ(N,{...e,fastpaths:!1}).output;Be=Te.close=`)${te})${H})`}Te.prev.type==="bos"&&(L.negatedExtglob=!0)}Ye({type:"paren",extglob:!0,value:k,output:Be}),St("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let Te=!1,Be=t.replace(Iit,(N,H,te,ne,re,Fe)=>ne==="\\"?(Te=!0,N):ne==="?"?H?H+ne+(re?_.repeat(re.length):""):Fe===0?U+(re?_.repeat(re.length):""):_.repeat(te.length):ne==="."?l.repeat(te.length):ne==="*"?H?H+ne+(re?W:""):W:H?N:`\\${N}`);return Te===!0&&(r.unescape===!0?Be=Be.replace(/\\/g,""):Be=Be.replace(/\\+/g,N=>N.length%2===0?"\\\\":N?"\\":"")),Be===t&&r.contains===!0?(L.output=t,L):(L.output=Rl.wrapOutput(Be,L,e),L)}for(;!G();){if(k=ce(),k==="\0")continue;if(k==="\\"){let N=M();if(N==="/"&&r.bash!==!0||N==="."||N===";")continue;if(!N){k+="\\",Ye({type:"text",value:k});continue}let H=/^\\+/.exec(V()),te=0;if(H&&H[0].length>2&&(te=H[0].length,L.index+=te,te%2!==0&&(k+="\\")),r.unescape===!0?k=ce():k+=ce(),L.brackets===0){Ye({type:"text",value:k});continue}}if(L.brackets>0&&(k!=="]"||R.value==="["||R.value==="[^")){if(r.posix!==!1&&k===":"){let N=R.value.slice(1);if(N.includes("[")&&(R.posix=!0,N.includes(":"))){let H=R.value.lastIndexOf("["),te=R.value.slice(0,H),ne=R.value.slice(H+2),re=Tit[ne];if(re){R.value=te+re,L.backtrack=!0,ce(),!o.output&&s.indexOf(R)===1&&(o.output=f);continue}}}(k==="["&&M()!==":"||k==="-"&&M()==="]")&&(k=`\\${k}`),k==="]"&&(R.value==="["||R.value==="[^")&&(k=`\\${k}`),r.posix===!0&&k==="!"&&R.value==="["&&(k="^"),R.value+=k,ze({value:k});continue}if(L.quotes===1&&k!=='"'){k=Rl.escapeRegex(k),R.value+=k,ze({value:k});continue}if(k==='"'){L.quotes=L.quotes===1?0:1,r.keepQuotes===!0&&Ye({type:"text",value:k});continue}if(k==="("){Tt("parens"),Ye({type:"paren",value:k});continue}if(k===")"){if(L.parens===0&&r.strictBrackets===!0)throw new SyntaxError(FT("opening","("));let N=ve[ve.length-1];if(N&&L.parens===N.parens+1){Ht(ve.pop());continue}Ye({type:"paren",value:k,output:L.parens?")":"\\)"}),St("parens");continue}if(k==="["){if(r.nobracket===!0||!V().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(FT("closing","]"));k=`\\${k}`}else Tt("brackets");Ye({type:"bracket",value:k});continue}if(k==="]"){if(r.nobracket===!0||R&&R.type==="bracket"&&R.value.length===1){Ye({type:"text",value:k,output:`\\${k}`});continue}if(L.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(FT("opening","["));Ye({type:"text",value:k,output:`\\${k}`});continue}St("brackets");let N=R.value.slice(1);if(R.posix!==!0&&N[0]==="^"&&!N.includes("/")&&(k=`/${k}`),R.value+=k,ze({value:k}),r.literalBrackets===!1||Rl.hasRegexChars(N))continue;let H=Rl.escapeRegex(R.value);if(L.output=L.output.slice(0,-R.value.length),r.literalBrackets===!0){L.output+=H,R.value=H;continue}R.value=`(${a}${H}|${R.value})`,L.output+=R.value;continue}if(k==="{"&&r.nobrace!==!0){Tt("braces");let N={type:"brace",value:k,output:"(",outputIndex:L.output.length,tokensIndex:L.tokens.length};J.push(N),Ye(N);continue}if(k==="}"){let N=J[J.length-1];if(r.nobrace===!0||!N){Ye({type:"text",value:k,output:k});continue}let H=")";if(N.dots===!0){let te=s.slice(),ne=[];for(let re=te.length-1;re>=0&&(s.pop(),te[re].type!=="brace");re--)te[re].type!=="dots"&&ne.unshift(te[re].value);H=Cit(ne,r),L.backtrack=!0}if(N.comma!==!0&&N.dots!==!0){let te=L.output.slice(0,N.outputIndex),ne=L.tokens.slice(N.tokensIndex);N.value=N.output="\\{",k=H="\\}",L.output=te;for(let re of ne)L.output+=re.output||re.value}Ye({type:"brace",value:k,output:H}),St("braces"),J.pop();continue}if(k==="|"){ve.length>0&&ve[ve.length-1].conditions++,Ye({type:"text",value:k});continue}if(k===","){let N=k,H=J[J.length-1];H&&D[D.length-1]==="braces"&&(H.comma=!0,N="|"),Ye({type:"comma",value:k,output:N});continue}if(k==="/"){if(R.type==="dot"&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",s.pop(),R=o;continue}Ye({type:"slash",value:k,output:p});continue}if(k==="."){if(L.braces>0&&R.type==="dot"){R.value==="."&&(R.output=l);let N=J[J.length-1];R.type="dots",R.output+=k,R.value+=k,N.dots=!0;continue}if(L.braces+L.parens===0&&R.type!=="bos"&&R.type!=="slash"){Ye({type:"text",value:k,output:l});continue}Ye({type:"dot",value:k,output:l});continue}if(k==="?"){if(!(R&&R.value==="(")&&r.noextglob!==!0&&M()==="("&&M(2)!=="?"){ft("qmark",k);continue}if(R&&R.type==="paren"){let H=M(),te=k;if(H==="<"&&!Rl.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(R.value==="("&&!/[!=<:]/.test(H)||H==="<"&&!/<([!=]|\w+>)/.test(V()))&&(te=`\\${k}`),Ye({type:"text",value:k,output:te});continue}if(r.dot!==!0&&(R.type==="slash"||R.type==="bos")){Ye({type:"qmark",value:k,output:y});continue}Ye({type:"qmark",value:k,output:_});continue}if(k==="!"){if(r.noextglob!==!0&&M()==="("&&(M(2)!=="?"||!/[!=<:]/.test(M(3)))){ft("negate",k);continue}if(r.nonegate!==!0&&L.index===0){lt();continue}}if(k==="+"){if(r.noextglob!==!0&&M()==="("&&M(2)!=="?"){ft("plus",k);continue}if(R&&R.value==="("||r.regex===!1){Ye({type:"plus",value:k,output:d});continue}if(R&&(R.type==="bracket"||R.type==="paren"||R.type==="brace")||L.parens>0){Ye({type:"plus",value:k});continue}Ye({type:"plus",value:d});continue}if(k==="@"){if(r.noextglob!==!0&&M()==="("&&M(2)!=="?"){Ye({type:"at",extglob:!0,value:k,output:""});continue}Ye({type:"text",value:k});continue}if(k!=="*"){(k==="$"||k==="^")&&(k=`\\${k}`);let N=Sit.exec(V());N&&(k+=N[0],L.index+=N[0].length),Ye({type:"text",value:k});continue}if(R&&(R.type==="globstar"||R.star===!0)){R.type="star",R.star=!0,R.value+=k,R.output=W,L.backtrack=!0,L.globstar=!0,_e(k);continue}let Te=V();if(r.noextglob!==!0&&/^\([^?]/.test(Te)){ft("star",k);continue}if(R.type==="star"){if(r.noglobstar===!0){_e(k);continue}let N=R.prev,H=N.prev,te=N.type==="slash"||N.type==="bos",ne=H&&(H.type==="star"||H.type==="globstar");if(r.bash===!0&&(!te||Te[0]&&Te[0]!=="/")){Ye({type:"star",value:k,output:""});continue}let re=L.braces>0&&(N.type==="comma"||N.type==="brace"),Fe=ve.length&&(N.type==="pipe"||N.type==="paren");if(!te&&N.type!=="paren"&&!re&&!Fe){Ye({type:"star",value:k,output:""});continue}for(;Te.slice(0,3)==="/**";){let je=t[L.index+4];if(je&&je!=="/")break;Te=Te.slice(3),_e("/**",3)}if(N.type==="bos"&&G()){R.type="globstar",R.value+=k,R.output=S(r),L.output=R.output,L.globstar=!0,_e(k);continue}if(N.type==="slash"&&N.prev.type!=="bos"&&!ne&&G()){L.output=L.output.slice(0,-(N.output+R.output).length),N.output=`(?:${N.output}`,R.type="globstar",R.output=S(r)+(r.strictSlashes?")":"|$)"),R.value+=k,L.globstar=!0,L.output+=N.output+R.output,_e(k);continue}if(N.type==="slash"&&N.prev.type!=="bos"&&Te[0]==="/"){let je=Te[1]!==void 0?"|$":"";L.output=L.output.slice(0,-(N.output+R.output).length),N.output=`(?:${N.output}`,R.type="globstar",R.output=`${S(r)}${p}|${p}${je})`,R.value+=k,L.output+=N.output+R.output,L.globstar=!0,_e(k+ce()),Ye({type:"slash",value:"/",output:""});continue}if(N.type==="bos"&&Te[0]==="/"){R.type="globstar",R.value+=k,R.output=`(?:^|${p}|${S(r)}${p})`,L.output=R.output,L.globstar=!0,_e(k+ce()),Ye({type:"slash",value:"/",output:""});continue}L.output=L.output.slice(0,-R.output.length),R.type="globstar",R.output=S(r),R.value+=k,L.output+=R.output,L.globstar=!0,_e(k);continue}let Be={type:"star",value:k,output:W};if(r.bash===!0){Be.output=".*?",(R.type==="bos"||R.type==="slash")&&(Be.output=O+Be.output),Ye(Be);continue}if(R&&(R.type==="bracket"||R.type==="paren")&&r.regex===!0){Be.output=k,Ye(Be);continue}(L.index===L.start||R.type==="slash"||R.type==="dot")&&(R.type==="dot"?(L.output+=g,R.output+=g):r.dot===!0?(L.output+=v,R.output+=v):(L.output+=O,R.output+=O),M()!=="*"&&(L.output+=f,R.output+=f)),Ye(Be)}for(;L.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(FT("closing","]"));L.output=Rl.escapeLast(L.output,"["),St("brackets")}for(;L.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(FT("closing",")"));L.output=Rl.escapeLast(L.output,"("),St("parens")}for(;L.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(FT("closing","}"));L.output=Rl.escapeLast(L.output,"{"),St("braces")}if(r.strictSlashes!==!0&&(R.type==="star"||R.type==="bracket")&&Ye({type:"maybe_slash",value:"",output:`${p}?`}),L.backtrack===!0){L.output="";for(let Te of L.tokens)L.output+=Te.output!=null?Te.output:Te.value,Te.suffix&&(L.output+=Te.suffix)}return L};XZ.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(dM,r.maxLength):dM,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=CAe[t]||t;let{DOT_LITERAL:o,SLASH_LITERAL:s,ONE_CHAR:a,DOTS_SLASH:u,NO_DOT:c,NO_DOTS:l,NO_DOTS_SLASH:d,STAR:p,START_ANCHOR:f}=lM.globChars(r.windows),m=r.dot?l:c,h=r.dot?d:c,g=r.capture?"":"?:",v={negated:!1,prefix:""},_=r.bash===!0?".*?":p;r.capture&&(_=`(${_})`);let y=O=>O.noglobstar===!0?_:`(${g}(?:(?!${f}${O.dot?u:o}).)*?)`,E=O=>{switch(O){case"*":return`${m}${a}${_}`;case".*":return`${o}${a}${_}`;case"*.*":return`${m}${_}${o}${a}${_}`;case"*/*":return`${m}${_}${s}${a}${h}${_}`;case"**":return m+y(r);case"**/*":return`(?:${m}${y(r)}${s})?${h}${a}${_}`;case"**/*.*":return`(?:${m}${y(r)}${s})?${h}${_}${o}${a}${_}`;case"**/.*":return`(?:${m}${y(r)}${s})?${o}${a}${_}`;default:{let U=/^(.*?)\.(\w+)$/.exec(O);if(!U)return;let W=E(U[1]);return W?W+o+U[2]:void 0}}},x=Rl.removePrefix(t,v),S=E(x);return S&&r.strictSlashes!==!0&&(S+=`${s}?`),S};wAe.exports=XZ});var NAe=P((Dor,PAe)=>{"use strict";var wit=IAe(),QZ=RAe(),AAe=uM(),Rit=WR(),Ait=t=>t&&typeof t=="object"&&!Array.isArray(t),Ci=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(p=>Ci(p,e,r));return p=>{for(let f of l){let m=f(p);if(m)return m}return!1}}let n=Ait(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=i.windows,s=n?Ci.compileRe(t,e):Ci.makeRe(t,e,!1,!0),a=s.state;delete s.state;let u=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};u=Ci(i.ignore,l,r)}let c=(l,d=!1)=>{let{isMatch:p,match:f,output:m}=Ci.test(l,s,e,{glob:t,posix:o}),h={glob:t,state:a,regex:s,posix:o,input:l,output:m,match:f,isMatch:p};return typeof i.onResult=="function"&&i.onResult(h),p===!1?(h.isMatch=!1,d?h:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(h),h.isMatch=!1,d?h:!1):(typeof i.onMatch=="function"&&i.onMatch(h),d?h:!0)};return r&&(c.state=a),c};Ci.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?AAe.toPosixSlashes:null),a=t===n,u=a&&s?s(t):t;return a===!1&&(u=s?s(t):t,a=u===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Ci.matchBase(t,e,r,i):a=e.exec(u)),{isMatch:!!a,match:a,output:u}};Ci.matchBase=(t,e,r)=>(e instanceof RegExp?e:Ci.makeRe(e,r)).test(AAe.basename(t));Ci.isMatch=(t,e,r)=>Ci(e,r)(t);Ci.parse=(t,e)=>Array.isArray(t)?t.map(r=>Ci.parse(r,e)):QZ(t,{...e,fastpaths:!1});Ci.scan=(t,e)=>wit(t,e);Ci.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let u=Ci.toRegex(a,e);return n===!0&&(u.state=t),u};Ci.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=QZ.fastpaths(t,e)),i.output||(i=QZ(t,e)),Ci.compileRe(i,e,r,n)};Ci.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Ci.constants=Rit;PAe.exports=Ci});var DAe=P((kor,sp)=>{"use strict";var Pit=require("os"),sm=NAe(),Nit=Pit.platform()==="win32";function Dit(t,e,r=!1){return e&&(e.windows===null||e.windows===void 0)&&(e={...e,windows:Nit}),sm(t,e,r)}sp.exports=Dit;sp.exports.test=sm.test;sp.exports.matchBase=sm.matchBase;sp.exports.isMatch=sm.isMatch;sp.exports.parse=sm.parse;sp.exports.scan=sm.scan;sp.exports.compileRe=sm.compileRe;sp.exports.toRegex=sm.toRegex;sp.exports.makeRe=sm.makeRe});var JPe=P((Fvr,QPe)=>{function jPe(t){return Array.isArray(t)?t:[t]}var $Pe="",VPe=" ",rte="\\",Vot=/^\s+$/,zot=/(?:[^\\]|^)\\$/,Yot=/^\\!/,$ot=/^\\#/,Wot=/\r?\n/g,Kot=/^\.*\/|^\.+$/,nte="/",WPe="node-ignore";typeof Symbol<"u"&&(WPe=Symbol.for("node-ignore"));var zPe=WPe,Xot=(t,e,r)=>Object.defineProperty(t,e,{value:r}),Qot=/([0-z])-([0-z])/g,KPe=()=>!1,Jot=t=>t.replace(Qot,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:$Pe),Zot=t=>{let{length:e}=t;return t.slice(0,e-e%2)},est=[[/\\?\s+$/,t=>t.indexOf("\\")===0?VPe:$Pe],[/\\\s/g,()=>VPe],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>rte],[/\\\\/g,()=>rte],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===rte?`\\[${r}${Zot(n)}${i}`:i==="]"&&n.length%2===0?`[${Jot(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],YPe=Object.create(null),tst=(t,e)=>{let r=YPe[t];return r||(r=est.reduce((n,i)=>n.replace(i[0],i[1].bind(t)),t),YPe[t]=r),e?new RegExp(r,"i"):new RegExp(r)},ste=t=>typeof t=="string",rst=t=>t&&ste(t)&&!Vot.test(t)&&!zot.test(t)&&t.indexOf("#")!==0,nst=t=>t.split(Wot),ite=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},ist=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(Yot,"!").replace($ot,"#");let i=tst(t,e);return new ite(r,t,n,i)},ost=(t,e)=>{throw new e(t)},dm=(t,e,r)=>ste(t)?t?dm.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),XPe=t=>Kot.test(t);dm.isNotRelative=XPe;dm.convert=t=>t;var ote=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){Xot(this,zPe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[zPe]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(rst(e)){let r=ist(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,jPe(ste(e)?nst(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(o=>{let{negative:s}=o;if(i===s&&n!==i||s&&!n&&!i&&!r)return;o.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let o=e&&dm.convert(e);return dm(o,e,this._allowRelativePaths?KPe:ost),this._t(o,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(nte)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let o=this._t(i.join(nte)+nte,r,n,i);return r[e]=o.ignored?o:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return jPe(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},p9=t=>new ote(t),sst=t=>dm(t&&dm.convert(t),t,KPe);p9.isPathValid=sst;p9.default=p9;QPe.exports=p9;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");dm.convert=t;let e=/^[a-z]:\//i;dm.isNotRelative=r=>e.test(r)||XPe(r)}});var oNe=P((Hvr,iNe)=>{"use strict";iNe.exports=rNe;function rNe(t,e,r){t instanceof RegExp&&(t=tNe(t,r)),e instanceof RegExp&&(e=tNe(e,r));var n=nNe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function tNe(t,e){var r=e.match(t);return r?r[0]:null}rNe.range=nNe;function nNe(t,e,r){var n,i,o,s,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){if(t===e)return[u,c];for(n=[],o=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<o&&(o=i,s=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}});var fNe=P((jvr,pNe)=>{var sNe=oNe();pNe.exports=ust;var aNe="\0SLASH"+Math.random()+"\0",cNe="\0OPEN"+Math.random()+"\0",cte="\0CLOSE"+Math.random()+"\0",uNe="\0COMMA"+Math.random()+"\0",lNe="\0PERIOD"+Math.random()+"\0";function ate(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function ast(t){return t.split("\\\\").join(aNe).split("\\{").join(cNe).split("\\}").join(cte).split("\\,").join(uNe).split("\\.").join(lNe)}function cst(t){return t.split(aNe).join("\\").split(cNe).join("{").split(cte).join("}").split(uNe).join(",").split(lNe).join(".")}function dNe(t){if(!t)return[""];var e=[],r=sNe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=dNe(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function ust(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),yA(ast(t),!0).map(cst)):[]}function lst(t){return"{"+t+"}"}function dst(t){return/^-?0\d/.test(t)}function pst(t,e){return t<=e}function fst(t,e){return t>=e}function yA(t,e){var r=[],n=sNe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?yA(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var a=i+"{"+n.body+"}"+o[s];r.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=u||c,d=n.body.indexOf(",")>=0;if(!l&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+cte+n.post,yA(t)):[t];var p;if(l)p=n.body.split(/\.\./);else if(p=dNe(n.body),p.length===1&&(p=yA(p[0],!1).map(lst),p.length===1))return o.map(function(L){return n.pre+p[0]+L});var f;if(l){var m=ate(p[0]),h=ate(p[1]),g=Math.max(p[0].length,p[1].length),v=p.length==3?Math.abs(ate(p[2])):1,_=pst,y=h<m;y&&(v*=-1,_=fst);var E=p.some(dst);f=[];for(var x=m;_(x,h);x+=v){var S;if(c)S=String.fromCharCode(x),S==="\\"&&(S="");else if(S=String(x),E){var O=g-S.length;if(O>0){var U=new Array(O+1).join("0");x<0?S="-"+U+S.slice(1):S=U+S}}f.push(S)}}else{f=[];for(var W=0;W<p.length;W++)f.push.apply(f,yA(p[W],!1))}for(var W=0;W<f.length;W++)for(var s=0;s<o.length;s++){var a=i+f[W]+o[s];(!e||l||a)&&r.push(a)}}return r}});var $t=P((akr,NDe)=>{NDe.exports={options:{usePureJavaScript:!1}}});var LDe=P((ckr,kDe)=>{var ire={};kDe.exports=ire;var DDe={};ire.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=pct(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var u=0,c=t[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%o,c=c/o|0;for(;c>0;)a.push(c%o),c=c/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};ire.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=DDe[e];if(!r){r=DDe[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var u=0,c=a;u<s.length;++u)c+=s[u]*i,s[u]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var l=0;t[l]===o&&l<t.length-1;++l)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function pct(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=o.length-1;r>=0;--r)u+=e[o[r]];return u}});var xr=P((ukr,UDe)=>{var ODe=$t(),MDe=LDe(),z=UDe.exports=ODe.util=ODe.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){z.nextTick=process.nextTick,typeof setImmediate=="function"?z.setImmediate=setImmediate:z.setImmediate=z.nextTick;return}if(typeof setImmediate=="function"){z.setImmediate=function(){return setImmediate.apply(void 0,arguments)},z.nextTick=function(a){return setImmediate(a)};return}if(z.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(l){l()})}};var s=a,t="forge.setImmediate",e=[];z.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var o=z.setImmediate;z.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),o(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}z.nextTick=z.setImmediate})();z.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;z.globalScope=function(){return z.isNodejs?global:typeof self>"u"?window:self}();z.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};z.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};z.isArrayBufferView=function(t){return t&&z.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function FA(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}z.ByteBuffer=ore;function ore(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(z.isArrayBuffer(t)||z.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof ore||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}z.ByteStringBuffer=ore;var fct=4096;z.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>fct&&(this.data.substr(0,1),this._constructedStringLength=0)};z.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};z.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};z.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};z.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};z.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};z.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(z.encodeUtf8(t))};z.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};z.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};z.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};z.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};z.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};z.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};z.ByteStringBuffer.prototype.putInt=function(t,e){FA(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};z.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};z.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};z.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};z.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};z.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};z.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};z.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};z.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};z.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};z.ByteStringBuffer.prototype.getInt=function(t){FA(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};z.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};z.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};z.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};z.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};z.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};z.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};z.ByteStringBuffer.prototype.copy=function(){var t=z.createBuffer(this.data);return t.read=this.read,t};z.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};z.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};z.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};z.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};z.ByteStringBuffer.prototype.toString=function(){return z.decodeUtf8(this.bytes())};function mct(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=z.isArrayBuffer(t),n=z.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}z.DataBuffer=mct;z.DataBuffer.prototype.length=function(){return this.write-this.read};z.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};z.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};z.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};z.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};z.DataBuffer.prototype.putBytes=function(t,e){if(z.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(z.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof z.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&z.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof z.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=z.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=z.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=z.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=z.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=z.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};z.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};z.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};z.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};z.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};z.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};z.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};z.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};z.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};z.DataBuffer.prototype.putInt=function(t,e){FA(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};z.DataBuffer.prototype.putSignedInt=function(t,e){return FA(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};z.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};z.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};z.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};z.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};z.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};z.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};z.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};z.DataBuffer.prototype.getInt=function(t){FA(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};z.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};z.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};z.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};z.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};z.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};z.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};z.DataBuffer.prototype.copy=function(){return new z.DataBuffer(this)};z.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};z.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};z.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};z.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};z.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return z.binary.raw.encode(e);if(t==="hex")return z.binary.hex.encode(e);if(t==="base64")return z.binary.base64.encode(e);if(t==="utf8")return z.text.utf8.decode(e);if(t==="utf16")return z.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};z.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=z.encodeUtf8(t)),new z.ByteBuffer(t)};z.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};z.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};z.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};z.bytesToHex=function(t){return z.createBuffer(t).toHex()};z.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var P0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",N0=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],FDe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";z.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=P0.charAt(i>>2),r+=P0.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=P0.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":P0.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};z.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=N0[t.charCodeAt(s++)-43],n=N0[t.charCodeAt(s++)-43],i=N0[t.charCodeAt(s++)-43],o=N0[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};z.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};z.decodeUtf8=function(t){return decodeURIComponent(escape(t))};z.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:MDe.encode,decode:MDe.decode}};z.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};z.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};z.binary.hex.encode=z.bytesToHex;z.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};z.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=P0.charAt(i>>2),r+=P0.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=P0.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":P0.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};z.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,u=0,c=r;u<t.length;)i=N0[t.charCodeAt(u++)-43],o=N0[t.charCodeAt(u++)-43],s=N0[t.charCodeAt(u++)-43],a=N0[t.charCodeAt(u++)-43],n[c++]=i<<2|o>>4,s!==64&&(n[c++]=(o&15)<<4|s>>2,a!==64&&(n[c++]=(s&3)<<6|a));return e?c-r:n.subarray(0,c)};z.binary.base58.encode=function(t,e){return z.binary.baseN.encode(t,FDe,e)};z.binary.base58.decode=function(t,e){return z.binary.baseN.decode(t,FDe,e)};z.text={utf8:{},utf16:{}};z.text.utf8.encode=function(t,e,r){t=z.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};z.text.utf8.decode=function(t){return z.decodeUtf8(String.fromCharCode.apply(null,t))};z.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};z.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};z.deflate=function(t,e,r){if(e=z.decode64(t.deflate(z.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};z.inflate=function(t,e,r){var n=t.inflate(z.encode64(e)).rval;return n===null?null:z.decode64(n)};var sre=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=z.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},are=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(z.decode64(r))),r},hct=function(t,e,r,n){var i=are(t,e);i===null&&(i={}),i[r]=n,sre(t,e,i)},gct=function(t,e,r){var n=are(t,e);return n!==null&&(n=r in n?n[r]:null),n},vct=function(t,e,r){var n=are(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),sre(t,e,n)}},_ct=function(t,e){sre(t,e,null)},q7=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(u){s=u}if(o)break}if(!o)throw s;return n};z.setItem=function(t,e,r,n,i){q7(hct,arguments,i)};z.getItem=function(t,e,r,n){return q7(gct,arguments,n)};z.removeItem=function(t,e,r,n){q7(vct,arguments,n)};z.clearItems=function(t,e,r){q7(_ct,arguments,r)};z.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};z.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};z.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+a:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")};z.formatSize=function(t){return t>=1073741824?t=z.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=z.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=z.formatNumber(t/1024,0)+" KiB":t=z.formatNumber(t,0)+" bytes",t};z.bytesFromIP=function(t){return t.indexOf(".")!==-1?z.bytesFromIPv4(t):t.indexOf(":")!==-1?z.bytesFromIPv6(t):null};z.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=z.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};z.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=z.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=z.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};z.bytesToIP=function(t){return t.length===4?z.bytesToIPv4(t):t.length===16?z.bytesToIPv6(t):null};z.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};z.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=z.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};z.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in z&&!t.update)return e(null,z.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return z.cores=navigator.hardwareConcurrency,e(null,z.cores);if(typeof Worker>"u")return z.cores=1,e(null,z.cores);if(typeof Blob>"u")return z.cores=2,e(null,z.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),u=a+4;Date.now()<u;);self.postMessage({st:a,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,u){if(a===0){var c=Math.floor(s.reduce(function(l,d){return l+d},0)/s.length);return z.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,z.cores)}i(u,function(l,d){s.push(o(u,d)),n(s,a-1,u)})}function i(s,a){for(var u=[],c=[],l=0;l<s;++l){var d=new Worker(r);d.addEventListener("message",function(p){if(c.push(p.data),c.length===s){for(var f=0;f<s;++f)u[f].terminate();a(null,c)}}),u.push(d)}for(var l=0;l<s;++l)u[l].postMessage(l)}function o(s,a){for(var u=[],c=0;c<s;++c)for(var l=a[c],d=u[c]=[],p=0;p<s;++p)if(c!==p){var f=a[p];(l.st>f.st&&l.st<f.et||f.st>l.st&&f.st<l.et)&&d.push(p)}return u.reduce(function(m,h){return Math.max(m,h.length)},0)}}});var G7=P((lkr,BDe)=>{var Bo=$t();xr();BDe.exports=Bo.cipher=Bo.cipher||{};Bo.cipher.algorithms=Bo.cipher.algorithms||{};Bo.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Bo.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Bo.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Bo.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Bo.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Bo.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Bo.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Bo.cipher.algorithms[t]=e};Bo.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Bo.cipher.algorithms?Bo.cipher.algorithms[t]:null};var cre=Bo.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};cre.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Bo.util.createBuffer(),this.output=t.output||Bo.util.createBuffer(),this.mode.start(e)};cre.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};cre.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var lre=P((dkr,qDe)=>{var qo=$t();xr();qo.cipher=qo.cipher||{};var tr=qDe.exports=qo.cipher.modes=qo.cipher.modes||{};tr.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};tr.ecb.prototype.start=function(t){};tr.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};tr.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};tr.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};tr.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};tr.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};tr.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=H7(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};tr.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};tr.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};tr.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};tr.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};tr.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=qo.util.createBuffer(),this._partialBytes=0};tr.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=H7(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};tr.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};tr.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};tr.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qo.util.createBuffer(),this._partialBytes=0};tr.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=H7(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};tr.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};tr.ofb.prototype.decrypt=tr.ofb.prototype.encrypt;tr.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qo.util.createBuffer(),this._partialBytes=0};tr.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=H7(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};tr.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}j7(this._inBlock)};tr.ctr.prototype.decrypt=tr.ctr.prototype.encrypt;tr.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=qo.util.createBuffer(),this._partialBytes=0,this._R=3774873600};tr.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=qo.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=qo.util.createBuffer(t.additionalData):r=qo.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=qo.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ure(n*8)))}this._inBlock=this._j0.slice(0),j7(this._inBlock),this._partialBytes=0,r=qo.util.createBuffer(r),this._aDataLength=ure(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};tr.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),j7(this._inBlock)};tr.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),j7(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};tr.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=qo.util.createBuffer();var n=this._aDataLength.concat(ure(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};tr.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};tr.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};tr.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};tr.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};tr.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*e;a[u]=1<<e-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};tr.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],u=i[s];i[o+s]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var c=i[o^n];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i};function H7(t,e){if(typeof t=="string"&&(t=qo.util.createBuffer(t)),qo.util.isArray(t)&&t.length>4){var r=t;t=qo.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!qo.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function j7(t){t[t.length-1]=t[t.length-1]+1&4294967295}function ure(t){return[t/4294967296|0,t&4294967295]}});var D0=P((pkr,VDe)=>{var yn=$t();G7();lre();xr();VDe.exports=yn.aes=yn.aes||{};yn.aes.startEncrypting=function(t,e,r,n){var i=V7({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};yn.aes.createEncryptionCipher=function(t,e){return V7({key:t,output:null,decrypt:!1,mode:e})};yn.aes.startDecrypting=function(t,e,r,n){var i=V7({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};yn.aes.createDecryptionCipher=function(t,e){return V7({key:t,output:null,decrypt:!0,mode:e})};yn.aes.Algorithm=function(t,e){fre||HDe();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return pre(r._w,n,i,!1)},decrypt:function(n,i){return pre(r._w,n,i,!0)}}}),r._init=!1};yn.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=yn.util.createBuffer(e);else if(yn.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=yn.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!yn.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!yn.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=jDe(e,t.decrypt&&!s),this._init=!0}};yn.aes._expandKey=function(t,e){return fre||HDe(),jDe(t,e)};yn.aes._updateBlock=pre;CS("AES-ECB",yn.cipher.modes.ecb);CS("AES-CBC",yn.cipher.modes.cbc);CS("AES-CFB",yn.cipher.modes.cfb);CS("AES-OFB",yn.cipher.modes.ofb);CS("AES-CTR",yn.cipher.modes.ctr);CS("AES-GCM",yn.cipher.modes.gcm);function CS(t,e){var r=function(){return new yn.aes.Algorithm(t,e)};yn.cipher.registerAlgorithm(t,r)}var fre=!1,IS=4,ca,dre,GDe,zy,Ll;function HDe(){fre=!0,GDe=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;ca=new Array(256),dre=new Array(256),zy=new Array(4),Ll=new Array(4);for(var e=0;e<4;++e)zy[e]=new Array(256),Ll[e]=new Array(256);for(var r=0,n=0,i,o,s,a,u,c,l,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,ca[r]=a,dre[a]=r,u=t[a],i=t[r],o=t[i],s=t[o],c=u<<24^a<<16^a<<8^(a^u),l=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var d=0;d<4;++d)zy[d][r]=c,Ll[d][a]=l,c=c<<24|c>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function jDe(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=IS*s,u=o;u<a;++u)n=r[u-1],u%o===0?(n=ca[n>>>16&255]<<24^ca[n>>>8&255]<<16^ca[n&255]<<8^ca[n>>>24]^GDe[i]<<24,i++):o>6&&u%o===4&&(n=ca[n>>>24]<<24^ca[n>>>16&255]<<16^ca[n>>>8&255]<<8^ca[n&255]),r[u]=r[u-o]^n;if(e){var c,l=Ll[0],d=Ll[1],p=Ll[2],f=Ll[3],m=r.slice(0);a=r.length;for(var u=0,h=a-IS;u<a;u+=IS,h-=IS)if(u===0||u===a-IS)m[u]=r[h],m[u+1]=r[h+3],m[u+2]=r[h+2],m[u+3]=r[h+1];else for(var g=0;g<IS;++g)c=r[h+g],m[u+(3&-g)]=l[ca[c>>>24]]^d[ca[c>>>16&255]]^p[ca[c>>>8&255]]^f[ca[c&255]];r=m}return r}function pre(t,e,r,n){var i=t.length/4-1,o,s,a,u,c;n?(o=Ll[0],s=Ll[1],a=Ll[2],u=Ll[3],c=dre):(o=zy[0],s=zy[1],a=zy[2],u=zy[3],c=ca);var l,d,p,f,m,h,g;l=e[0]^t[0],d=e[n?3:1]^t[1],p=e[2]^t[2],f=e[n?1:3]^t[3];for(var v=3,_=1;_<i;++_)m=o[l>>>24]^s[d>>>16&255]^a[p>>>8&255]^u[f&255]^t[++v],h=o[d>>>24]^s[p>>>16&255]^a[f>>>8&255]^u[l&255]^t[++v],g=o[p>>>24]^s[f>>>16&255]^a[l>>>8&255]^u[d&255]^t[++v],f=o[f>>>24]^s[l>>>16&255]^a[d>>>8&255]^u[p&255]^t[++v],l=m,d=h,p=g;r[0]=c[l>>>24]<<24^c[d>>>16&255]<<16^c[p>>>8&255]<<8^c[f&255]^t[++v],r[n?3:1]=c[d>>>24]<<24^c[p>>>16&255]<<16^c[f>>>8&255]<<8^c[l&255]^t[++v],r[2]=c[p>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[d&255]^t[++v],r[n?1:3]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[d>>>8&255]<<8^c[p&255]^t[++v]}function V7(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=yn.cipher.createDecipher(r,t.key):n=yn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof yn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var k0=P((fkr,zDe)=>{var UA=$t();UA.pki=UA.pki||{};var mre=zDe.exports=UA.pki.oids=UA.oids=UA.oids||{};function Pe(t,e){mre[t]=e,mre[e]=t}function Mr(t,e){mre[t]=e}Pe("1.2.840.113549.1.1.1","rsaEncryption");Pe("1.2.840.113549.1.1.4","md5WithRSAEncryption");Pe("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Pe("1.2.840.113549.1.1.7","RSAES-OAEP");Pe("1.2.840.113549.1.1.8","mgf1");Pe("1.2.840.113549.1.1.9","pSpecified");Pe("1.2.840.113549.1.1.10","RSASSA-PSS");Pe("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Pe("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Pe("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Pe("1.3.101.112","EdDSA25519");Pe("1.2.840.10040.4.3","dsa-with-sha1");Pe("1.3.14.3.2.7","desCBC");Pe("1.3.14.3.2.26","sha1");Pe("1.3.14.3.2.29","sha1WithRSASignature");Pe("2.16.840.1.101.3.4.2.1","sha256");Pe("2.16.840.1.101.3.4.2.2","sha384");Pe("2.16.840.1.101.3.4.2.3","sha512");Pe("2.16.840.1.101.3.4.2.4","sha224");Pe("2.16.840.1.101.3.4.2.5","sha512-224");Pe("2.16.840.1.101.3.4.2.6","sha512-256");Pe("1.2.840.113549.2.2","md2");Pe("1.2.840.113549.2.5","md5");Pe("1.2.840.113549.1.7.1","data");Pe("1.2.840.113549.1.7.2","signedData");Pe("1.2.840.113549.1.7.3","envelopedData");Pe("1.2.840.113549.1.7.4","signedAndEnvelopedData");Pe("1.2.840.113549.1.7.5","digestedData");Pe("1.2.840.113549.1.7.6","encryptedData");Pe("1.2.840.113549.1.9.1","emailAddress");Pe("1.2.840.113549.1.9.2","unstructuredName");Pe("1.2.840.113549.1.9.3","contentType");Pe("1.2.840.113549.1.9.4","messageDigest");Pe("1.2.840.113549.1.9.5","signingTime");Pe("1.2.840.113549.1.9.6","counterSignature");Pe("1.2.840.113549.1.9.7","challengePassword");Pe("1.2.840.113549.1.9.8","unstructuredAddress");Pe("1.2.840.113549.1.9.14","extensionRequest");Pe("1.2.840.113549.1.9.20","friendlyName");Pe("1.2.840.113549.1.9.21","localKeyId");Pe("1.2.840.113549.1.9.22.1","x509Certificate");Pe("1.2.840.113549.1.12.10.1.1","keyBag");Pe("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Pe("1.2.840.113549.1.12.10.1.3","certBag");Pe("1.2.840.113549.1.12.10.1.4","crlBag");Pe("1.2.840.113549.1.12.10.1.5","secretBag");Pe("1.2.840.113549.1.12.10.1.6","safeContentsBag");Pe("1.2.840.113549.1.5.13","pkcs5PBES2");Pe("1.2.840.113549.1.5.12","pkcs5PBKDF2");Pe("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Pe("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Pe("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Pe("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Pe("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Pe("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Pe("1.2.840.113549.2.7","hmacWithSHA1");Pe("1.2.840.113549.2.8","hmacWithSHA224");Pe("1.2.840.113549.2.9","hmacWithSHA256");Pe("1.2.840.113549.2.10","hmacWithSHA384");Pe("1.2.840.113549.2.11","hmacWithSHA512");Pe("1.2.840.113549.3.7","des-EDE3-CBC");Pe("2.16.840.1.101.3.4.1.2","aes128-CBC");Pe("2.16.840.1.101.3.4.1.22","aes192-CBC");Pe("2.16.840.1.101.3.4.1.42","aes256-CBC");Pe("2.5.4.3","commonName");Pe("2.5.4.4","surname");Pe("2.5.4.5","serialNumber");Pe("2.5.4.6","countryName");Pe("2.5.4.7","localityName");Pe("2.5.4.8","stateOrProvinceName");Pe("2.5.4.9","streetAddress");Pe("2.5.4.10","organizationName");Pe("2.5.4.11","organizationalUnitName");Pe("2.5.4.12","title");Pe("2.5.4.13","description");Pe("2.5.4.15","businessCategory");Pe("2.5.4.17","postalCode");Pe("2.5.4.42","givenName");Pe("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Pe("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Pe("2.16.840.1.113730.1.1","nsCertType");Pe("2.16.840.1.113730.1.13","nsComment");Mr("2.5.29.1","authorityKeyIdentifier");Mr("2.5.29.2","keyAttributes");Mr("2.5.29.3","certificatePolicies");Mr("2.5.29.4","keyUsageRestriction");Mr("2.5.29.5","policyMapping");Mr("2.5.29.6","subtreesConstraint");Mr("2.5.29.7","subjectAltName");Mr("2.5.29.8","issuerAltName");Mr("2.5.29.9","subjectDirectoryAttributes");Mr("2.5.29.10","basicConstraints");Mr("2.5.29.11","nameConstraints");Mr("2.5.29.12","policyConstraints");Mr("2.5.29.13","basicConstraints");Pe("2.5.29.14","subjectKeyIdentifier");Pe("2.5.29.15","keyUsage");Mr("2.5.29.16","privateKeyUsagePeriod");Pe("2.5.29.17","subjectAltName");Pe("2.5.29.18","issuerAltName");Pe("2.5.29.19","basicConstraints");Mr("2.5.29.20","cRLNumber");Mr("2.5.29.21","cRLReason");Mr("2.5.29.22","expirationDate");Mr("2.5.29.23","instructionCode");Mr("2.5.29.24","invalidityDate");Mr("2.5.29.25","cRLDistributionPoints");Mr("2.5.29.26","issuingDistributionPoint");Mr("2.5.29.27","deltaCRLIndicator");Mr("2.5.29.28","issuingDistributionPoint");Mr("2.5.29.29","certificateIssuer");Mr("2.5.29.30","nameConstraints");Pe("2.5.29.31","cRLDistributionPoints");Pe("2.5.29.32","certificatePolicies");Mr("2.5.29.33","policyMappings");Mr("2.5.29.34","policyConstraints");Pe("2.5.29.35","authorityKeyIdentifier");Mr("2.5.29.36","policyConstraints");Pe("2.5.29.37","extKeyUsage");Mr("2.5.29.46","freshestCRL");Mr("2.5.29.54","inhibitAnyPolicy");Pe("1.3.6.1.4.1.11129.2.4.2","timestampList");Pe("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Pe("1.3.6.1.5.5.7.3.1","serverAuth");Pe("1.3.6.1.5.5.7.3.2","clientAuth");Pe("1.3.6.1.5.5.7.3.3","codeSigning");Pe("1.3.6.1.5.5.7.3.4","emailProtection");Pe("1.3.6.1.5.5.7.3.8","timeStamping")});var Ol=P((mkr,$De)=>{var Ln=$t();xr();k0();var He=$De.exports=Ln.asn1=Ln.asn1||{};He.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};He.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};He.create=function(t,e,r,n,i){if(Ln.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||Ln.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=He.copy(a)),a};He.copy=function(t,e){var r;if(Ln.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(He.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:He.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};He.equals=function(t,e,r){if(Ln.util.isArray(t)){if(!Ln.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!He.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&He.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};He.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function BA(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var yct=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;BA(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};He.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Ln.util.createBuffer(t));var r=t.length(),n=z7(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function z7(t,e,r,n){var i;BA(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var u=yct(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=u,c}u=e}var l,d,p=(o&32)===32;if(p)if(l=[],u===void 0)for(;;){if(BA(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),l.push(z7(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),l.push(z7(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(l===void 0&&s===He.Class.UNIVERSAL&&a===He.Type.BITSTRING&&(d=t.bytes(u)),l===void 0&&n.decodeBitStrings&&s===He.Class.UNIVERSAL&&a===He.Type.BITSTRING&&u>1){var f=t.read,m=e,h=0;if(a===He.Type.BITSTRING&&(BA(t,e,1),h=t.getByte(),e--),h===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},v=z7(t,e,r+1,g),_=i-t.length();e-=_,a==He.Type.BITSTRING&&_++;var y=v.tagClass;_===u&&(y===He.Class.UNIVERSAL||y===He.Class.CONTEXT_SPECIFIC)&&(l=[v])}catch{}l===void 0&&(t.read=f,e=m)}if(l===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(a===He.Type.BMPSTRING)for(l="";u>0;u-=2)BA(t,e,2),l+=String.fromCharCode(t.getInt16()),e-=2;else l=t.getBytes(u),e-=u}var E=d===void 0?null:{bitStringContents:d};return He.create(s,a,p,l,E)}He.toDer=function(t){var e=Ln.util.createBuffer(),r=t.tagClass|t.type,n=Ln.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=He.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(He.toDer(t.value[o]))}else if(t.type===He.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===He.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};He.oidToDer=function(t){var e=t.split("."),r=Ln.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};He.derToOid=function(t){var e;typeof t=="string"&&(t=Ln.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};He.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;u!=="+"&&u!=="-"&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),c&&(u=t.charAt(c),u==="+"||u==="-")){var l=parseInt(t.substr(c+1,2),10),d=parseInt(t.substr(c+4,2),10),p=l*60+d;p*=6e4,u==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};He.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;t.charAt(t.length-1)==="Z"&&(l=!0);var d=t.length-5,p=t.charAt(d);if(p==="+"||p==="-"){var f=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10);c=f*60+m,c*=6e4,p==="+"&&(c*=-1),l=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(o,s,a,u)),e};He.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};He.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};He.integerToDer=function(t){var e=Ln.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};He.derToInteger=function(t){typeof t=="string"&&(t=Ln.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};He.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&Ln.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=He.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var YDe=/[^\\u0000-\\u00ff]/;He.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case He.Class.UNIVERSAL:n+="Universal:";break;case He.Class.APPLICATION:n+="Application:";break;case He.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case He.Class.PRIVATE:n+="Private:";break}if(t.tagClass===He.Class.UNIVERSAL)switch(n+=t.type,t.type){case He.Type.NONE:n+=" (None)";break;case He.Type.BOOLEAN:n+=" (Boolean)";break;case He.Type.INTEGER:n+=" (Integer)";break;case He.Type.BITSTRING:n+=" (Bit string)";break;case He.Type.OCTETSTRING:n+=" (Octet string)";break;case He.Type.NULL:n+=" (Null)";break;case He.Type.OID:n+=" (Object Identifier)";break;case He.Type.ODESC:n+=" (Object Descriptor)";break;case He.Type.EXTERNAL:n+=" (External or Instance of)";break;case He.Type.REAL:n+=" (Real)";break;case He.Type.ENUMERATED:n+=" (Enumerated)";break;case He.Type.EMBEDDED:n+=" (Embedded PDV)";break;case He.Type.UTF8:n+=" (UTF8)";break;case He.Type.ROID:n+=" (Relative Object Identifier)";break;case He.Type.SEQUENCE:n+=" (Sequence)";break;case He.Type.SET:n+=" (Set)";break;case He.Type.PRINTABLESTRING:n+=" (Printable String)";break;case He.Type.IA5String:n+=" (IA5String (ASCII))";break;case He.Type.UTCTIME:n+=" (UTC time)";break;case He.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case He.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=He.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===He.Type.OID){var u=He.derToOid(t.value);n+=u,Ln.pki&&Ln.pki.oids&&u in Ln.pki.oids&&(n+=" ("+Ln.pki.oids[u]+") ")}if(t.type===He.Type.INTEGER)try{n+=He.derToInteger(t.value)}catch{n+="0x"+Ln.util.bytesToHex(t.value)}else if(t.type===He.Type.BITSTRING){if(t.value.length>1?n+="0x"+Ln.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(t.type===He.Type.OCTETSTRING)YDe.test(t.value)||(n+="("+t.value+") "),n+="0x"+Ln.util.bytesToHex(t.value);else if(t.type===He.Type.UTF8)try{n+=Ln.util.decodeUtf8(t.value)}catch(l){if(l.message==="URI malformed")n+="0x"+Ln.util.bytesToHex(t.value)+" (malformed UTF8)";else throw l}else t.type===He.Type.PRINTABLESTRING||t.type===He.Type.IA5String?n+=t.value:YDe.test(t.value)?n+="0x"+Ln.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var mp=P((hkr,WDe)=>{var Y7=$t();WDe.exports=Y7.md=Y7.md||{};Y7.md.algorithms=Y7.md.algorithms||{}});var wS=P((gkr,KDe)=>{var fm=$t();mp();xr();var bct=KDe.exports=fm.hmac=fm.hmac||{};bct.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in fm.md.algorithms)e=fm.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=fm.util.createBuffer(s);else if(fm.util.isArray(s)){var a=s;s=fm.util.createBuffer();for(var u=0;u<a.length;++u)s.putByte(a[u])}var c=s.length();c>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=fm.util.createBuffer(),n=fm.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var a=s.at(u);r.putByte(54^a),n.putByte(92^a)}if(c<e.blockLength)for(var a=e.blockLength-c,u=0;u<a;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var W7=P((vkr,ZDe)=>{var hp=$t();mp();xr();var QDe=ZDe.exports=hp.md5=hp.md5||{};hp.md.md5=hp.md.algorithms.md5=QDe;QDe.create=function(){JDe||xct();var t=null,e=hp.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=hp.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=hp.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),XDe(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=hp.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(hre.substr(0,n.blockLength-s));for(var a,u=0,c=n.fullMessageLength.length-1;c>=0;--c)a=n.fullMessageLength[c]*8+u,u=a/4294967296>>>0,i.putInt32Le(a>>>0);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};XDe(l,r,i);var d=hp.util.createBuffer();return d.putInt32Le(l.h0),d.putInt32Le(l.h1),d.putInt32Le(l.h2),d.putInt32Le(l.h3),d},n};var hre=null,$7=null,qA=null,RS=null,JDe=!1;function xct(){hre="\x80",hre+=hp.util.fillString("\0",64),$7=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],qA=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],RS=new Array(64);for(var t=0;t<64;++t)RS[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);JDe=!0}function XDe(t,e,r){for(var n,i,o,s,a,u,c,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=0;l<16;++l)e[l]=r.getInt32Le(),u=a^o&(s^a),n=i+u+RS[l]+e[l],c=qA[l],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;l<32;++l)u=s^a&(o^s),n=i+u+RS[l]+e[$7[l]],c=qA[l],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;l<48;++l)u=o^s^a,n=i+u+RS[l]+e[$7[l]],c=qA[l],i=a,a=s,s=o,o+=n<<c|n>>>32-c;for(;l<64;++l)u=s^(o|~a),n=i+u+RS[l]+e[$7[l]],c=qA[l],i=a,a=s,s=o,o+=n<<c|n>>>32-c;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,d-=64}}});var Yy=P((_kr,tke)=>{var X7=$t();xr();var eke=tke.exports=X7.pem=X7.pem||{};eke.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=K7(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=K7(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=K7(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=K7(t.headers[i]);return t.procType&&(r+=`\r
`),r+=X7.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};eke.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:X7.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var u=o[2].split(i),c=0;o&&c<u.length;){for(var l=u[c].replace(/\s+$/,""),d=c+1;d<u.length;++d){var p=u[d];if(!/\s/.test(p[0]))break;l+=p,c=d}if(o=l.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),h=0;h<m.length;++h)f.values.push(Ect(m[h]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function K7(t){for(var e=t.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function Ect(t){return t.replace(/^\s+/,"")}});var GA=P((ykr,nke)=>{var Yn=$t();G7();lre();xr();nke.exports=Yn.des=Yn.des||{};Yn.des.startEncrypting=function(t,e,r,n){var i=Q7({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Yn.des.createEncryptionCipher=function(t,e){return Q7({key:t,output:null,decrypt:!1,mode:e})};Yn.des.startDecrypting=function(t,e,r,n){var i=Q7({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Yn.des.createDecryptionCipher=function(t,e){return Q7({key:t,output:null,decrypt:!0,mode:e})};Yn.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return rke(r._keys,n,i,!1)},decrypt:function(n,i){return rke(r._keys,n,i,!0)}}}),r._init=!1};Yn.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Yn.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Nct(e),this._init=!0}};gp("DES-ECB",Yn.cipher.modes.ecb);gp("DES-CBC",Yn.cipher.modes.cbc);gp("DES-CFB",Yn.cipher.modes.cfb);gp("DES-OFB",Yn.cipher.modes.ofb);gp("DES-CTR",Yn.cipher.modes.ctr);gp("3DES-ECB",Yn.cipher.modes.ecb);gp("3DES-CBC",Yn.cipher.modes.cbc);gp("3DES-CFB",Yn.cipher.modes.cfb);gp("3DES-OFB",Yn.cipher.modes.ofb);gp("3DES-CTR",Yn.cipher.modes.ctr);function gp(t,e){var r=function(){return new Yn.des.Algorithm(t,e)};Yn.cipher.registerAlgorithm(t,r)}var Tct=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Sct=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Ict=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Cct=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],wct=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Rct=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Act=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Pct=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Nct(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,y,E=0;E<h;E++){var x=t.getInt32(),S=t.getInt32();y=(x>>>4^S)&252645135,S^=y,x^=y<<4,y=(S>>>-16^x)&65535,x^=y,S^=y<<-16,y=(x>>>2^S)&858993459,S^=y,x^=y<<2,y=(S>>>-16^x)&65535,x^=y,S^=y<<-16,y=(x>>>1^S)&1431655765,S^=y,x^=y<<1,y=(S>>>8^x)&16711935,x^=y,S^=y<<8,y=(x>>>1^S)&1431655765,S^=y,x^=y<<1,y=x<<8|S>>>20&240,x=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=y;for(var O=0;O<v.length;++O){v[O]?(x=x<<2|x>>>26,S=S<<2|S>>>26):(x=x<<1|x>>>27,S=S<<1|S>>>27),x&=-15,S&=-15;var U=e[x>>>28]|r[x>>>24&15]|n[x>>>20&15]|i[x>>>16&15]|o[x>>>12&15]|s[x>>>8&15]|a[x>>>4&15],W=u[S>>>28]|c[S>>>24&15]|l[S>>>20&15]|d[S>>>16&15]|p[S>>>12&15]|f[S>>>8&15]|m[S>>>4&15];y=(W>>>16^U)&65535,g[_++]=U^y,g[_++]=W^y<<16}}return g}function rke(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],u=e[1];s=(a>>>4^u)&252645135,u^=s,a^=s<<4,s=(a>>>16^u)&65535,u^=s,a^=s<<16,s=(u>>>2^a)&858993459,a^=s,u^=s<<2,s=(u>>>8^a)&16711935,a^=s,u^=s<<8,s=(a>>>1^u)&1431655765,u^=s,a^=s<<1,a=a<<1|a>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var l=o[c+1],d=o[c+2],p=o[c];p!=l;p+=d){var f=u^t[p],m=(u>>>4|u<<28)^t[p+1];s=a,a=u,u=s^(Sct[f>>>24&63]|Cct[f>>>16&63]|Rct[f>>>8&63]|Pct[f&63]|Tct[m>>>24&63]|Ict[m>>>16&63]|wct[m>>>8&63]|Act[m&63])}s=a,a=u,u=s}a=a>>>1|a<<31,u=u>>>1|u<<31,s=(a>>>1^u)&1431655765,u^=s,a^=s<<1,s=(u>>>8^a)&16711935,a^=s,u^=s<<8,s=(u>>>2^a)&858993459,a^=s,u^=s<<2,s=(a>>>16^u)&65535,u^=s,a^=s<<16,s=(a>>>4^u)&252645135,u^=s,a^=s<<4,r[0]=a,r[1]=u}function Q7(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Yn.cipher.createDecipher(r,t.key):n=Yn.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Yn.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var J7=P((bkr,ike)=>{var ua=$t();wS();mp();xr();var Dct=ua.pkcs5=ua.pkcs5||{},mm;ua.util.isNodejs&&!ua.options.usePureJavaScript&&(mm=require("crypto"));ike.exports=ua.pbkdf2=Dct.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),ua.util.isNodejs&&!ua.options.usePureJavaScript&&mm.pbkdf2&&(i===null||typeof i!="object")&&(mm.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?mm.pbkdf2Sync.length===4?mm.pbkdf2(t,e,r,n,function(y,E){if(y)return o(y);o(null,E.toString("binary"))}):mm.pbkdf2(t,e,r,n,i,function(y,E){if(y)return o(y);o(null,E.toString("binary"))}):mm.pbkdf2Sync.length===4?mm.pbkdf2Sync(t,e,r,n).toString("binary"):mm.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in ua.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=ua.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var u=Math.ceil(n/s),c=n-(u-1)*s,l=ua.hmac.create();l.start(i,t);var d="",p,f,m;if(!o){for(var h=1;h<=u;++h){l.start(null,null),l.update(e),l.update(ua.util.int32ToBytes(h)),p=m=l.digest().getBytes();for(var g=2;g<=r;++g)l.start(null,null),l.update(m),f=l.digest().getBytes(),p=ua.util.xorBytes(p,f,s),m=f;d+=h<u?p:p.substr(0,c)}return d}var h=1,g;function v(){if(h>u)return o(null,d);l.start(null,null),l.update(e),l.update(ua.util.int32ToBytes(h)),p=m=l.digest().getBytes(),g=2,_()}function _(){if(g<=r)return l.start(null,null),l.update(m),f=l.digest().getBytes(),p=ua.util.xorBytes(p,f,s),m=f,++g,ua.util.setImmediate(_);d+=h<u?p:p.substr(0,c),++h,v()}v()}});var vre=P((xkr,uke)=>{var vp=$t();mp();xr();var ske=uke.exports=vp.sha256=vp.sha256||{};vp.md.sha256=vp.md.algorithms.sha256=ske;ske.create=function(){ake||kct();var t=null,e=vp.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=vp.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=vp.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),oke(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=vp.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(gre.substr(0,n.blockLength-s));for(var a,u,c=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};oke(d,r,i);var p=vp.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},n};var gre=null,ake=!1,cke=null;function kct(){gre="\x80",gre+=vp.util.fillString("\0",64),cke=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ake=!0}function oke(t,e,r){for(var n,i,o,s,a,u,c,l,d,p,f,m,h,g,v,_=r.length();_>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=e[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(l=t.h0,d=t.h1,p=t.h2,f=t.h3,m=t.h4,h=t.h5,g=t.h6,v=t.h7,c=0;c<64;++c)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=g^m&(h^g),o=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),u=l&d|p&(l^d),n=v+s+a+cke[c]+e[c],i=o+u,v=g,g=h,h=m,m=f+n>>>0,f=p,p=d,d=l,l=n+i>>>0;t.h0=t.h0+l|0,t.h1=t.h1+d|0,t.h2=t.h2+p|0,t.h3=t.h3+f|0,t.h4=t.h4+m|0,t.h5=t.h5+h|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,_-=64}}});var _re=P((Ekr,lke)=>{var _p=$t();xr();var Z7=null;_p.util.isNodejs&&!_p.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Z7=require("crypto"));var Lct=lke.exports=_p.prng=_p.prng||{};Lct.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(c,l){if(!l)return e.generateSync(c);var d=e.plugin.cipher,p=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,h=_p.util.createBuffer();e.key=null,g();function g(v){if(v)return l(v);if(h.length()>=c)return l(null,h.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return _p.util.nextTick(function(){o(g)});var _=d(e.key,e.seed);e.generated+=_.length,h.putBytes(_),e.key=f(d(e.key,p(e.seed))),e.seed=m(d(e.key,e.seed)),_p.util.setImmediate(g)}},e.generateSync=function(c){var l=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=_p.util.createBuffer();m.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&s();var h=l(e.key,e.seed);e.generated+=h.length,m.putBytes(h),e.key=p(l(e.key,d(e.seed))),e.seed=f(l(e.key,e.seed))}return m.getBytes(c)};function o(c){if(e.pools[0].messageLength>=32)return a(),c();var l=32-e.pools[0].messageLength<<5;e.seedFile(l,function(d,p){if(d)return c(d);e.collect(p),a(),c()})}function s(){if(e.pools[0].messageLength>=32)return a();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var l=1,d=0;d<32;++d)e.reseeds%l===0&&(c.update(e.pools[d].digest().getBytes()),e.pools[d].start()),l=l<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var p=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function u(c){var l=null,d=_p.util.globalScope,p=d.crypto||d.msCrypto;p&&p.getRandomValues&&(l=function(x){return p.getRandomValues(x)});var f=_p.util.createBuffer();if(l)for(;f.length()<c;){var m=Math.max(1,Math.min(c-f.length(),65536)/4),h=new Uint32Array(Math.floor(m));try{l(h);for(var g=0;g<h.length;++g)f.putInt32(h[g])}catch(x){if(!(typeof QuotaExceededError<"u"&&x instanceof QuotaExceededError))throw x}}if(f.length()<c)for(var v,_,y,E=Math.floor(Math.random()*65536);f.length()<c;){_=16807*(E&65535),v=16807*(E>>16),_+=(v&32767)<<16,_+=v>>15,_=(_&2147483647)+(_>>31),E=_&4294967295;for(var g=0;g<3;++g)y=E>>>(g<<3),y^=Math.floor(Math.random()*256),f.putByte(y&255)}return f.getBytes(c)}return Z7?(e.seedFile=function(c,l){Z7.randomBytes(c,function(d,p){if(d)return l(d);l(null,p.toString())})},e.seedFileSync=function(c){return Z7.randomBytes(c).toString()}):(e.seedFile=function(c,l){try{l(null,u(c))}catch(d){l(d)}},e.seedFileSync=u),e.collect=function(c){for(var l=c.length,d=0;d<l;++d)e.pools[e.pool].update(c.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,l){for(var d="",p=0;p<l;p+=8)d+=String.fromCharCode(c>>p&255);e.collect(d)},e.registerWorker=function(c){if(c===self)e.seedFile=function(d,p){function f(m){var h=m.data;h.forge&&h.forge.prng&&(self.removeEventListener("message",f),p(h.forge.prng.err,h.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:d}}})};else{var l=function(d){var p=d.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(f,m){c.postMessage({forge:{prng:{err:f,bytes:m}}})})};c.addEventListener("message",l)}},e}});var ku=P((Tkr,yre)=>{var Go=$t();D0();vre();_re();xr();(function(){if(Go.random&&Go.random.getBytes){yre.exports=Go.random;return}(function(t){var e={},r=new Array(4),n=Go.util.createBuffer();e.formatKey=function(d){var p=Go.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),Go.aes._expandKey(d,!1)},e.formatSeed=function(d){var p=Go.util.createBuffer(d);return d=new Array(4),d[0]=p.getInt32(),d[1]=p.getInt32(),d[2]=p.getInt32(),d[3]=p.getInt32(),d},e.cipher=function(d,p){return Go.aes._updateBlock(d,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(d){return++d[3],d},e.md=Go.md.sha256;function i(){var d=Go.prng.create(e);return d.getBytes=function(p,f){return d.generate(p,f)},d.getBytesSync=function(p){return d.generate(p)},d}var o=i(),s=null,a=Go.util.globalScope,u=a.crypto||a.msCrypto;if(u&&u.getRandomValues&&(s=function(d){return u.getRandomValues(d)}),Go.options.usePureJavaScript||!Go.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var l in navigator)try{typeof navigator[l]=="string"&&(c+=navigator[l])}catch{}o.collect(c),c=null}t&&(t().mousemove(function(d){o.collectInt(d.clientX,16),o.collectInt(d.clientY,16)}),t().keypress(function(d){o.collectInt(d.charCode,8)}))}if(!Go.random)Go.random=o;else for(var l in o)Go.random[l]=o[l];Go.random.createInstance=i,yre.exports=Go.random})(typeof jQuery<"u"?jQuery:null)})()});var xre=P((Skr,fke)=>{var Xa=$t();xr();var bre=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],dke=[1,2,3,5],Oct=function(t,e){return t<<e&65535|(t&65535)>>16-e},Mct=function(t,e){return(t&65535)>>e|t<<16-e&65535};fke.exports=Xa.rc2=Xa.rc2||{};Xa.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Xa.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(bre[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,bre[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,bre[r.at(a+1)^r.at(a+o)]);return r};var pke=function(t,e,r){var n=!1,i=null,o=null,s=null,a,u,c,l,d=[];for(t=Xa.rc2.expandKey(t,e),c=0;c<64;c++)d.push(t.getInt16Le());r?(a=function(m){for(c=0;c<4;c++)m[c]+=d[l]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),m[c]=Oct(m[c],dke[c]),l++},u=function(m){for(c=0;c<4;c++)m[c]+=d[m[(c+3)%4]&63]}):(a=function(m){for(c=3;c>=0;c--)m[c]=Mct(m[c],dke[c]),m[c]-=d[l]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),l--},u=function(m){for(c=3;c>=0;c--)m[c]-=d[m[(c+3)%4]&63]});var p=function(m){var h=[];for(c=0;c<4;c++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),h.push(g&65535)}l=r?0:63;for(var v=0;v<m.length;v++)for(var _=0;_<m[v][0];_++)m[v][1](h);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(h[c]):h[c]^=s.getInt16Le()),o.putInt16Le(h[c])},f=null;return f={start:function(m,h){m&&typeof m=="string"&&(m=Xa.util.createBuffer(m)),n=!1,i=Xa.util.createBuffer(),o=h||new Xa.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)p([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(m){var h=!0;if(r)if(m)h=m(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(h&&(n=!0,f.update()),!r&&(h=i.length()===0,h))if(m)h=m(8,o,!r);else{var v=o.length(),_=o.at(v-1);_>v?h=!1:o.truncate(_)}return h}},f};Xa.rc2.startEncrypting=function(t,e,r){var n=Xa.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Xa.rc2.createEncryptionCipher=function(t,e){return pke(t,e,!0)};Xa.rc2.startDecrypting=function(t,e,r){var n=Xa.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Xa.rc2.createDecryptionCipher=function(t,e){return pke(t,e,!1)}});var jA=P((Ikr,xke)=>{var Ere=$t();xke.exports=Ere.jsbn=Ere.jsbn||{};var hm,Fct=0xdeadbeefcafe,mke=(Fct&16777215)==15715070;function Se(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}Ere.jsbn.BigInteger=Se;function Er(){return new Se(null)}function Uct(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function Bct(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var u=this.data[t]&32767,c=this.data[t++]>>15,l=a*u+c*s;u=s*u+((l&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(l>>>15)+a*c+(i>>>30),r.data[n++]=u&1073741823}return i}function hke(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var u=this.data[t]&16383,c=this.data[t++]>>14,l=a*u+c*s;u=s*u+((l&16383)<<14)+r.data[n]+i,i=(u>>28)+(l>>14)+a*c,r.data[n++]=u&268435455}return i}typeof navigator>"u"?(Se.prototype.am=hke,hm=28):mke&&navigator.appName=="Microsoft Internet Explorer"?(Se.prototype.am=Bct,hm=30):mke&&navigator.appName!="Netscape"?(Se.prototype.am=Uct,hm=26):(Se.prototype.am=hke,hm=28);Se.prototype.DB=hm;Se.prototype.DM=(1<<hm)-1;Se.prototype.DV=1<<hm;var Tre=52;Se.prototype.FV=Math.pow(2,Tre);Se.prototype.F1=Tre-hm;Se.prototype.F2=2*hm-Tre;var qct="0123456789abcdefghijklmnopqrstuvwxyz",eF=new Array,AS,Lu;AS=48;for(Lu=0;Lu<=9;++Lu)eF[AS++]=Lu;AS=97;for(Lu=10;Lu<36;++Lu)eF[AS++]=Lu;AS=65;for(Lu=10;Lu<36;++Lu)eF[AS++]=Lu;function gke(t){return qct.charAt(t)}function vke(t,e){var r=eF[t.charCodeAt(e)];return r??-1}function Gct(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function Hct(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function L0(t){var e=Er();return e.fromInt(t),e}function jct(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:vke(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Se.ZERO.subTo(this,this)}function Vct(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function zct(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=gke(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=gke(n));return i?o:"0"}function Yct(){var t=Er();return Se.ZERO.subTo(this,t),t}function $ct(){return this.s<0?this.negate():this}function Wct(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function tF(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Kct(){return this.t<=0?0:this.DB*(this.t-1)+tF(this.data[this.t-1]^this.s&this.DM)}function Xct(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Qct(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Jct(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function Zct(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function eut(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function tut(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Se.ZERO.subTo(e,e)}function rut(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function nut(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Er());var o=Er(),s=this.s,a=t.s,u=this.DB-tF(n.data[n.t-1]);u>0?(n.lShiftTo(u,o),i.lShiftTo(u,r)):(n.copyTo(o),i.copyTo(r));var c=o.t,l=o.data[c-1];if(l!=0){var d=l*(1<<this.F1)+(c>1?o.data[c-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,m=1<<this.F2,h=r.t,g=h-c,v=e??Er();for(o.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),Se.ONE.dlShiftTo(c,v),v.subTo(o,o);o.t<c;)o.data[o.t++]=0;for(;--g>=0;){var _=r.data[--h]==l?this.DM:Math.floor(r.data[h]*p+(r.data[h-1]+m)*f);if((r.data[h]+=o.am(0,_,r,g,0,c))<_)for(o.dlShiftTo(g,v),r.subTo(v,r);r.data[h]<--_;)r.subTo(v,r)}e!=null&&(r.drShiftTo(c,e),s!=a&&Se.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&Se.ZERO.subTo(r,r)}}}function iut(t){var e=Er();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Se.ZERO)>0&&t.subTo(e,e),e}function $y(t){this.m=t}function sut(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function aut(t){return t}function cut(t){t.divRemTo(this.m,null,t)}function uut(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function lut(t,e){t.squareTo(e),this.reduce(e)}$y.prototype.convert=sut;$y.prototype.revert=aut;$y.prototype.reduce=cut;$y.prototype.mulTo=uut;$y.prototype.sqrTo=lut;function dut(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Wy(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function put(t){var e=Er();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Se.ZERO)>0&&this.m.subTo(e,e),e}function fut(t){var e=Er();return t.copyTo(e),this.reduce(e),e}function mut(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function hut(t,e){t.squareTo(e),this.reduce(e)}function gut(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Wy.prototype.convert=put;Wy.prototype.revert=fut;Wy.prototype.reduce=mut;Wy.prototype.mulTo=gut;Wy.prototype.sqrTo=hut;function vut(){return(this.t>0?this.data[0]&1:this.s)==0}function _ut(t,e){if(t>4294967295||t<1)return Se.ONE;var r=Er(),n=Er(),i=e.convert(this),o=tF(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function yut(t,e){var r;return t<256||e.isEven()?r=new $y(e):r=new Wy(e),this.exp(t,r)}Se.prototype.copyTo=Gct;Se.prototype.fromInt=Hct;Se.prototype.fromString=jct;Se.prototype.clamp=Vct;Se.prototype.dlShiftTo=Xct;Se.prototype.drShiftTo=Qct;Se.prototype.lShiftTo=Jct;Se.prototype.rShiftTo=Zct;Se.prototype.subTo=eut;Se.prototype.multiplyTo=tut;Se.prototype.squareTo=rut;Se.prototype.divRemTo=nut;Se.prototype.invDigit=dut;Se.prototype.isEven=vut;Se.prototype.exp=_ut;Se.prototype.toString=zct;Se.prototype.negate=Yct;Se.prototype.abs=$ct;Se.prototype.compareTo=Wct;Se.prototype.bitLength=Kct;Se.prototype.mod=iut;Se.prototype.modPowInt=yut;Se.ZERO=L0(0);Se.ONE=L0(1);function but(){var t=Er();return this.copyTo(t),t}function xut(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Eut(){return this.t==0?this.s:this.data[0]<<24>>24}function Tut(){return this.t==0?this.s:this.data[0]<<16>>16}function Sut(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Iut(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Cut(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=L0(r),i=Er(),o=Er(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function wut(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var u=vke(t,a);if(u<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&Se.ZERO.subTo(this,this)}function Rut(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Se.ONE.shiftLeft(t-1),Sre,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Se.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Aut(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Put(t){return this.compareTo(t)==0}function Nut(t){return this.compareTo(t)<0?this:t}function Dut(t){return this.compareTo(t)>0?this:t}function kut(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Lut(t,e){return t&e}function Out(t){var e=Er();return this.bitwiseTo(t,Lut,e),e}function Sre(t,e){return t|e}function Mut(t){var e=Er();return this.bitwiseTo(t,Sre,e),e}function _ke(t,e){return t^e}function Fut(t){var e=Er();return this.bitwiseTo(t,_ke,e),e}function yke(t,e){return t&~e}function Uut(t){var e=Er();return this.bitwiseTo(t,yke,e),e}function But(){for(var t=Er(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function qut(t){var e=Er();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Gut(t){var e=Er();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Hut(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function jut(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Hut(this.data[t]);return this.s<0?this.t*this.DB:-1}function Vut(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function zut(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Vut(this.data[r]^e);return t}function Yut(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function $ut(t,e){var r=Se.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Wut(t){return this.changeBit(t,Sre)}function Kut(t){return this.changeBit(t,yke)}function Xut(t){return this.changeBit(t,_ke)}function Qut(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Jut(t){var e=Er();return this.addTo(t,e),e}function Zut(t){var e=Er();return this.subTo(t,e),e}function elt(t){var e=Er();return this.multiplyTo(t,e),e}function tlt(t){var e=Er();return this.divRemTo(t,e,null),e}function rlt(t){var e=Er();return this.divRemTo(t,null,e),e}function nlt(t){var e=Er(),r=Er();return this.divRemTo(t,e,r),new Array(e,r)}function ilt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function olt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function HA(){}function bke(t){return t}function slt(t,e,r){t.multiplyTo(e,r)}function alt(t,e){t.squareTo(e)}HA.prototype.convert=bke;HA.prototype.revert=bke;HA.prototype.mulTo=slt;HA.prototype.sqrTo=alt;function clt(t){return this.exp(t,new HA)}function ult(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function llt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function PS(t){this.r2=Er(),this.q3=Er(),Se.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function dlt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Er();return t.copyTo(e),this.reduce(e),e}function plt(t){return t}function flt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function mlt(t,e){t.squareTo(e),this.reduce(e)}function hlt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}PS.prototype.convert=dlt;PS.prototype.revert=plt;PS.prototype.reduce=flt;PS.prototype.mulTo=hlt;PS.prototype.sqrTo=mlt;function glt(t,e){var r=t.bitLength(),n,i=L0(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new $y(e):e.isEven()?o=new PS(e):o=new Wy(e);var s=new Array,a=3,u=n-1,c=(1<<n)-1;if(s[1]=o.convert(this),n>1){var l=Er();for(o.sqrTo(s[1],l);a<=c;)s[a]=Er(),o.mulTo(l,s[a-2],s[a]),a+=2}var d=t.t-1,p,f=!0,m=Er(),h;for(r=tF(t.data[d])-1;d>=0;){for(r>=u?p=t.data[d]>>r-u&c:(p=(t.data[d]&(1<<r+1)-1)<<u-r,d>0&&(p|=t.data[d-1]>>this.DB+r-u)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)s[p].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(h=i,i=m,m=h),o.mulTo(m,s[p],i)}for(;d>=0&&!(t.data[d]&1<<r);)o.sqrTo(i,m),h=i,i=m,m=h,--r<0&&(r=this.DB-1,--d)}return o.revert(i)}function vlt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function _lt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function ylt(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Se.ZERO;for(var r=t.clone(),n=this.clone(),i=L0(1),o=L0(0),s=L0(0),a=L0(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(Se.ONE)!=0)return Se.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Ml=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],blt=(1<<26)/Ml[Ml.length-1];function xlt(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ml[Ml.length-1]){for(e=0;e<Ml.length;++e)if(r.data[0]==Ml[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ml.length;){for(var n=Ml[e],i=e+1;i<Ml.length&&n<blt;)n*=Ml[i++];for(n=r.modInt(n);e<i;)if(n%Ml[e++]==0)return!1}return r.millerRabin(t)}function Elt(t){var e=this.subtract(Se.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=Tlt(),o,s=0;s<t;++s){do o=new Se(this.bitLength(),i);while(o.compareTo(Se.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(Se.ONE)!=0&&a.compareTo(e)!=0){for(var u=1;u++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(Se.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function Tlt(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}Se.prototype.chunkSize=Sut;Se.prototype.toRadix=Cut;Se.prototype.fromRadix=wut;Se.prototype.fromNumber=Rut;Se.prototype.bitwiseTo=kut;Se.prototype.changeBit=$ut;Se.prototype.addTo=Qut;Se.prototype.dMultiply=ilt;Se.prototype.dAddOffset=olt;Se.prototype.multiplyLowerTo=ult;Se.prototype.multiplyUpperTo=llt;Se.prototype.modInt=_lt;Se.prototype.millerRabin=Elt;Se.prototype.clone=but;Se.prototype.intValue=xut;Se.prototype.byteValue=Eut;Se.prototype.shortValue=Tut;Se.prototype.signum=Iut;Se.prototype.toByteArray=Aut;Se.prototype.equals=Put;Se.prototype.min=Nut;Se.prototype.max=Dut;Se.prototype.and=Out;Se.prototype.or=Mut;Se.prototype.xor=Fut;Se.prototype.andNot=Uut;Se.prototype.not=But;Se.prototype.shiftLeft=qut;Se.prototype.shiftRight=Gut;Se.prototype.getLowestSetBit=jut;Se.prototype.bitCount=zut;Se.prototype.testBit=Yut;Se.prototype.setBit=Wut;Se.prototype.clearBit=Kut;Se.prototype.flipBit=Xut;Se.prototype.add=Jut;Se.prototype.subtract=Zut;Se.prototype.multiply=elt;Se.prototype.divide=tlt;Se.prototype.remainder=rlt;Se.prototype.divideAndRemainder=nlt;Se.prototype.modPow=glt;Se.prototype.modInverse=ylt;Se.prototype.pow=clt;Se.prototype.gcd=vlt;Se.prototype.isProbablePrime=xlt});var NS=P((Ckr,Ike)=>{var yp=$t();mp();xr();var Tke=Ike.exports=yp.sha1=yp.sha1||{};yp.md.sha1=yp.md.algorithms.sha1=Tke;Tke.create=function(){Ske||Slt();var t=null,e=yp.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=yp.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=yp.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Eke(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=yp.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(Ire.substr(0,n.blockLength-s));for(var a,u,c=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Eke(d,r,i);var p=yp.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},n};var Ire=null,Ske=!1;function Slt(){Ire="\x80",Ire+=yp.util.fillString("\0",64),Ske=!0}function Eke(t,e,r){for(var n,i,o,s,a,u,c,l,d=r.length();d>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,u=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,c=o^s^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=o^s^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=o&s|a&(o^s),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=o^s^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,d-=64}}});var Cre=P((wkr,wke)=>{var bp=$t();xr();ku();NS();var Cke=wke.exports=bp.pkcs1=bp.pkcs1||{};Cke.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=bp.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),u=a-2*o.digestLength-2;if(e.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=u,c}n||(n=""),o.update(n,"raw");for(var l=o.digest(),d="",p=u-e.length,f=0;f<p;f++)d+="\0";var m=l.getBytes()+d+""+e;if(!i)i=bp.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=o.digestLength,c}var h=rF(i,a-o.digestLength-1,s),g=bp.util.xorBytes(m,h,m.length),v=rF(g,o.digestLength,s),_=bp.util.xorBytes(i,v,i.length);return"\0"+_+g};Cke.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=bp.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),u=e.charAt(0),c=e.substring(1,i.digestLength+1),l=e.substring(1+i.digestLength),d=rF(l,i.digestLength,o),p=bp.util.xorBytes(c,d,c.length),f=rF(p,s-i.digestLength-1,o),m=bp.util.xorBytes(l,f,l.length),h=m.substring(0,i.digestLength),g=u!=="\0",v=0;v<i.digestLength;++v)g|=a.charAt(v)!==h.charAt(v);for(var _=1,y=i.digestLength,E=i.digestLength;E<m.length;E++){var x=m.charCodeAt(E),S=x&1^1,O=_?65534:0;g|=x&O,_=_&S,y+=_}if(g||m.charCodeAt(y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(y+1)};function rF(t,e,r){r||(r=bp.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var Rre=P((Rkr,wre)=>{var O0=$t();xr();jA();ku();(function(){if(O0.prime){wre.exports=O0.prime;return}var t=wre.exports=O0.prime=O0.prime||{},e=O0.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(d,p){return d|p};t.generateProbablePrime=function(d,p,f){typeof p=="function"&&(f=p,p={}),p=p||{};var m=p.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var h=p.prng||O0.random,g={nextBytes:function(v){for(var _=h.getBytesSync(v.length),y=0;y<v.length;++y)v[y]=_.charCodeAt(y)}};if(m.name==="PRIMEINC")return o(d,g,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(d,p,f,m){return"workers"in f?u(d,p,f,m):s(d,p,f,m)}function s(d,p,f,m){var h=c(d,p),g=0,v=l(h.bitLength());"millerRabinTests"in f&&(v=f.millerRabinTests);var _=10;"maxBlockTime"in f&&(_=f.maxBlockTime),a(h,d,p,g,v,_,m)}function a(d,p,f,m,h,g,v){var _=+new Date;do{if(d.bitLength()>p&&(d=c(p,f)),d.isProbablePrime(h))return v(null,d);d.dAddOffset(r[m++%8],0)}while(g<0||+new Date-_<g);O0.util.setImmediate(function(){a(d,p,f,m,h,g,v)})}function u(d,p,f,m){if(typeof Worker>"u")return s(d,p,f,m);var h=c(d,p),g=f.workers,v=f.workLoad||100,_=v*30/8,y=f.workerScript||"forge/prime.worker.js";if(g===-1)return O0.util.estimateCores(function(x,S){x&&(S=2),g=S-1,E()});E();function E(){g=Math.max(1,g);for(var x=[],S=0;S<g;++S)x[S]=new Worker(y);for(var O=g,S=0;S<g;++S)x[S].addEventListener("message",W);var U=!1;function W(L){if(!U){--O;var ve=L.data;if(ve.found){for(var J=0;J<x.length;++J)x[J].terminate();return U=!0,m(null,new e(ve.prime,16))}h.bitLength()>d&&(h=c(d,p));var D=h.toString(16);L.target.postMessage({hex:D,workLoad:v}),h.dAddOffset(_,0)}}}}function c(d,p){var f=new e(d,p),m=d-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function l(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var VA=P((Akr,Lke)=>{var ct=$t();Ol();jA();k0();Cre();Rre();ku();xr();typeof hr>"u"&&(hr=ct.jsbn.BigInteger);var hr,Are=ct.util.isNodejs?require("crypto"):null,Z=ct.asn1,Ou=ct.util;ct.pki=ct.pki||{};Lke.exports=ct.pki.rsa=ct.rsa=ct.rsa||{};var Lt=ct.pki,Ilt=[6,4,2,4,2,4,6,2],Clt={name:"PrivateKeyInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},wlt={name:"RSAPrivateKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Rlt={name:"RSAPublicKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Alt=ct.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Plt={name:"DigestInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Z.Class.UNIVERSAL,type:Z.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Nlt=function(t){var e;if(t.algorithm in Lt.oids)e=Lt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=Z.oidToDer(e).getBytes(),i=Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[]),o=Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[]);o.value.push(Z.create(Z.Class.UNIVERSAL,Z.Type.OID,!1,n)),o.value.push(Z.create(Z.Class.UNIVERSAL,Z.Type.NULL,!1,""));var s=Z.create(Z.Class.UNIVERSAL,Z.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),Z.toDer(i).getBytes()},Dke=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(hr.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(hr.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new hr(ct.util.bytesToHex(ct.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(hr.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};Lt.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=kke(t,e,r)):(i=ct.util.createBuffer(),i.putBytes(t));for(var s=new hr(i.toHex(),16),a=Dke(s,e,n),u=a.toString(16),c=ct.util.createBuffer(),l=o-Math.ceil(u.length/2);l>0;)c.putByte(0),--l;return c.putBytes(ct.util.hexToBytes(u)),c.getBytes()};Lt.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new hr(ct.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Dke(s,e,r),u=a.toString(16),c=ct.util.createBuffer(),l=i-Math.ceil(u.length/2);l>0;)c.putByte(0),--l;return c.putBytes(ct.util.hexToBytes(u)),n!==!1?nF(c.getBytes(),e,r):c.getBytes()};Lt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||ct.random,i={nextBytes:function(a){for(var u=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=u.charCodeAt(c)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new hr(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};Lt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new hr(null);r.fromInt(30);for(var n=0,i=function(d,p){return d|p},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,c=u-1;t.pqState===0?(t.num=new hr(u,t.rng),t.num.testBit(c)||t.num.bitwiseTo(hr.ONE.shiftLeft(c),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(klt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Ilt[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(hr.ONE).gcd(t.e).compareTo(hr.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(hr.ONE),t.q1=t.q.subtract(hr.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(hr.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var l=t.e.modInverse(t.phi);t.keys={privateKey:Lt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Lt.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};Lt.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!ct.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Rke("generateKeyPair"))return Are.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,u,c){if(a)return n(a);n(null,{privateKey:Lt.privateKeyFromPem(c),publicKey:Lt.publicKeyFromPem(u)})});if(Ake("generateKey")&&Ake("exportKey"))return Ou.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Nke(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ou.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var u=Lt.privateKeyFromAsn1(Z.fromDer(ct.util.createBuffer(a)));n(null,{privateKey:u,publicKey:Lt.setRsaPublicKey(u.n,u.e)})}});if(Pke("generateKey")&&Pke("exportKey")){var i=Ou.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Nke(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var u=a.target.result,c=Ou.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(l){var d=l.target.result,p=Lt.privateKeyFromAsn1(Z.fromDer(ct.util.createBuffer(d)));n(null,{privateKey:p,publicKey:Lt.setRsaPublicKey(p.n,p.e)})},c.onerror=function(l){n(l)}},i.onerror=function(a){n(a)};return}}else if(Rke("generateKeyPairSync")){var o=Are.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Lt.privateKeyFromPem(o.privateKey),publicKey:Lt.publicKeyFromPem(o.publicKey)}}}var s=Lt.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Lt.rsa.stepKeyPairGenerationState(s,0),s.keys;Dlt(s,r,n)};Lt.setRsaPublicKey=Lt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,u,c){return kke(a,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,u){return ct.pkcs1.encode_rsa_oaep(u,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return Lt.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(u,c){c=nF(c,r,!0);var l=Z.fromDer(c,{parseAllBytes:s._parseAllDigestBytes}),d={},p=[];if(!Z.validate(l,Plt,d,p)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=p,f}var m=Z.derToOid(d.algorithmIdentifier);if(!(m===ct.oids.md2||m===ct.oids.md5||m===ct.oids.sha1||m===ct.oids.sha224||m===ct.oids.sha256||m===ct.oids.sha384||m===ct.oids.sha512||m===ct.oids["sha512-224"]||m===ct.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===ct.oids.md2||m===ct.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===d.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(u,c){return c=nF(c,r,!0),u===c}});var a=Lt.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};Lt.setRsaPrivateKey=Lt.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var u={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return u.decrypt=function(c,l,d){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var p=Lt.rsa.decrypt(c,u,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:nF};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(f,m){return ct.pkcs1.decode_rsa_oaep(m,f,d)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(p,u,!1)},u.sign=function(c,l){var d=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:Nlt},d=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return c}},d=1);var p=l.encode(c,u.n.bitLength());return Lt.rsa.encrypt(p,u,d)},u};Lt.wrapRsaPrivateKey=function(t){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,Z.integerToDer(0).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.OID,!1,Z.oidToDer(Lt.oids.rsaEncryption).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.NULL,!1,"")]),Z.create(Z.Class.UNIVERSAL,Z.Type.OCTETSTRING,!1,Z.toDer(t).getBytes())])};Lt.privateKeyFromAsn1=function(t){var e={},r=[];if(Z.validate(t,Clt,e,r)&&(t=Z.fromDer(ct.util.createBuffer(e.privateKey))),e={},r=[],!Z.validate(t,wlt,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,u,c,l,d;return i=ct.util.createBuffer(e.privateKeyModulus).toHex(),o=ct.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=ct.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=ct.util.createBuffer(e.privateKeyPrime1).toHex(),u=ct.util.createBuffer(e.privateKeyPrime2).toHex(),c=ct.util.createBuffer(e.privateKeyExponent1).toHex(),l=ct.util.createBuffer(e.privateKeyExponent2).toHex(),d=ct.util.createBuffer(e.privateKeyCoefficient).toHex(),Lt.setRsaPrivateKey(new hr(i,16),new hr(o,16),new hr(s,16),new hr(a,16),new hr(u,16),new hr(c,16),new hr(l,16),new hr(d,16))};Lt.privateKeyToAsn1=Lt.privateKeyToRSAPrivateKey=function(t){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,Z.integerToDer(0).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.n)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.e)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.d)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.p)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.q)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.dP)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.dQ)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.qInv))])};Lt.publicKeyFromAsn1=function(t){var e={},r=[];if(Z.validate(t,Alt,e,r)){var n=Z.derToOid(e.publicKeyOid);if(n!==Lt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!Z.validate(t,Rlt,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=ct.util.createBuffer(e.publicKeyModulus).toHex(),s=ct.util.createBuffer(e.publicKeyExponent).toHex();return Lt.setRsaPublicKey(new hr(o,16),new hr(s,16))};Lt.publicKeyToAsn1=Lt.publicKeyToSubjectPublicKeyInfo=function(t){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.OID,!1,Z.oidToDer(Lt.oids.rsaEncryption).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.NULL,!1,"")]),Z.create(Z.Class.UNIVERSAL,Z.Type.BITSTRING,!1,[Lt.publicKeyToRSAPublicKey(t)])])};Lt.publicKeyToRSAPublicKey=function(t){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.n)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,xp(t.e))])};function kke(t,e,r){var n=ct.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var u=0;u<s;++u)n.putByte(a)}else for(;s>0;){for(var c=0,l=ct.random.getBytes(s),u=0;u<s;++u)a=l.charCodeAt(u),a===0?++c:n.putByte(a);s=c}return n.putByte(0),n.putBytes(t),n}function nF(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=ct.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(a===0){u=i-3-n;for(var c=0;c<u;++c)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(u=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++u}else if(a===2)for(u=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++u}var l=o.getByte();if(l!==0||u!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function Dlt(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,u){if(a)return r(a);if(t.p=u,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,u){ct.prime.generateProbablePrime(a,n,u)}function s(a,u){if(a)return r(a);if(t.q=u,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(hr.ONE).gcd(t.e).compareTo(hr.ONE)!==0){t.p=null,i();return}if(t.q.subtract(hr.ONE).gcd(t.e).compareTo(hr.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(hr.ONE),t.q1=t.q.subtract(hr.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(hr.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var l=t.e.modInverse(t.phi);t.keys={privateKey:Lt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:Lt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function xp(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=ct.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function klt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Rke(t){return ct.util.isNodejs&&typeof Are[t]=="function"}function Ake(t){return typeof Ou.globalScope<"u"&&typeof Ou.globalScope.crypto=="object"&&typeof Ou.globalScope.crypto.subtle=="object"&&typeof Ou.globalScope.crypto.subtle[t]=="function"}function Pke(t){return typeof Ou.globalScope<"u"&&typeof Ou.globalScope.msCrypto=="object"&&typeof Ou.globalScope.msCrypto.subtle=="object"&&typeof Ou.globalScope.msCrypto.subtle[t]=="function"}function Nke(t){for(var e=ct.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Pre=P((Pkr,Bke)=>{var We=$t();D0();Ol();GA();mp();k0();J7();Yy();ku();xre();VA();xr();typeof Oke>"u"&&(Oke=We.jsbn.BigInteger);var Oke,he=We.asn1,Gt=We.pki=We.pki||{};Bke.exports=Gt.pbe=We.pbe=We.pbe||{};var Ky=Gt.oids,Llt={name:"EncryptedPrivateKeyInfo",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:he.Class.UNIVERSAL,type:he.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:he.Class.UNIVERSAL,type:he.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Olt={name:"PBES2Algorithms",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:he.Class.UNIVERSAL,type:he.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:he.Class.UNIVERSAL,type:he.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:he.Class.UNIVERSAL,type:he.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:he.Class.UNIVERSAL,type:he.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:he.Class.UNIVERSAL,type:he.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:he.Class.UNIVERSAL,type:he.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:he.Class.UNIVERSAL,type:he.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Mlt={name:"pkcs-12PbeParams",tagClass:he.Class.UNIVERSAL,type:he.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:he.Class.UNIVERSAL,type:he.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:he.Class.UNIVERSAL,type:he.Type.INTEGER,constructed:!1,capture:"iterations"}]};Gt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=We.random.getBytesSync(r.saltSize),i=r.count,o=he.integerToDer(i),s,a,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,l,d;switch(r.algorithm){case"aes128":s=16,c=16,l=Ky["aes128-CBC"],d=We.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,l=Ky["aes192-CBC"],d=We.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,l=Ky["aes256-CBC"],d=We.aes.createEncryptionCipher;break;case"des":s=8,c=8,l=Ky.desCBC,d=We.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var f="hmacWith"+r.prfAlgorithm.toUpperCase(),m=Uke(f),h=We.pkcs5.pbkdf2(e,n,i,s,m),g=We.random.getBytesSync(c),v=d(h);v.start(g),v.update(he.toDer(t)),v.finish(),u=v.output.getBytes();var _=Flt(n,o,s,f);a=he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OID,!1,he.oidToDer(Ky.pkcs5PBES2).getBytes()),he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OID,!1,he.oidToDer(Ky.pkcs5PBKDF2).getBytes()),_]),he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OID,!1,he.oidToDer(l).getBytes()),he.create(he.Class.UNIVERSAL,he.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var y=new We.util.ByteBuffer(n),h=Gt.pbe.generatePkcs12Key(e,y,1,i,s),g=Gt.pbe.generatePkcs12Key(e,y,2,i,s),v=We.des.createEncryptionCipher(h);v.start(g),v.update(he.toDer(t)),v.finish(),u=v.output.getBytes(),a=he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OID,!1,he.oidToDer(Ky["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OCTETSTRING,!1,n),he.create(he.Class.UNIVERSAL,he.Type.INTEGER,!1,o.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var E=he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[a,he.create(he.Class.UNIVERSAL,he.Type.OCTETSTRING,!1,u)]);return E};Gt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!he.validate(t,Llt,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=he.derToOid(n.encryptionOid),a=Gt.pbe.getCipher(s,n.encryptionParams,e),u=We.util.createBuffer(n.encryptedData);return a.update(u),a.finish()&&(r=he.fromDer(a.output)),r};Gt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:he.toDer(t).getBytes()};return We.pem.encode(r,{maxline:e})};Gt.encryptedPrivateKeyFromPem=function(t){var e=We.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return he.fromDer(e.body)};Gt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Gt.wrapRsaPrivateKey(Gt.privateKeyToAsn1(t));return n=Gt.encryptPrivateKeyInfo(n,e,r),Gt.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=We.random.getBytesSync(16),a=We.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=We.random.getBytesSync(16),a=We.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=We.random.getBytesSync(16),a=We.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=We.random.getBytesSync(8),a=We.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=We.random.getBytesSync(8),a=We.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=We.pbe.opensslDeriveBytes(e,o.substr(0,8),s),l=a(c);l.start(o),l.update(he.toDer(Gt.privateKeyToAsn1(t))),l.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:We.util.bytesToHex(o).toUpperCase()},body:l.output.getBytes()};return We.pem.encode(d)};Gt.decryptRsaPrivateKey=function(t,e){var r=null,n=We.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=We.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=We.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=We.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=We.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=We.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(d){return We.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":o=8,s=function(d){return We.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":o=16,s=function(d){return We.rc2.createDecryptionCipher(d,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=We.util.hexToBytes(n.dekInfo.parameters),u=We.pbe.opensslDeriveBytes(e,a.substr(0,8),o),c=s(u);if(c.start(a),c.update(We.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Gt.decryptPrivateKeyInfo(he.fromDer(r),e):r=he.fromDer(r),r!==null&&(r=Gt.privateKeyFromAsn1(r)),r};Gt.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in We.md))throw new Error('"sha1" hash algorithm unavailable.');o=We.md.sha1.create()}var u=o.digestLength,c=o.blockLength,l=new We.util.ByteBuffer,d=new We.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var p=d.length(),f=e.length(),m=new We.util.ByteBuffer;m.fillWithByte(r,c);var h=c*Math.ceil(f/c),g=new We.util.ByteBuffer;for(a=0;a<h;a++)g.putByte(e.at(a%f));var v=c*Math.ceil(p/c),_=new We.util.ByteBuffer;for(a=0;a<v;a++)_.putByte(d.at(a%p));var y=g;y.putBuffer(_);for(var E=Math.ceil(i/u),x=1;x<=E;x++){var S=new We.util.ByteBuffer;S.putBytes(m.bytes()),S.putBytes(y.bytes());for(var O=0;O<n;O++)o.start(),o.update(S.getBytes()),S=o.digest();var U=new We.util.ByteBuffer;for(a=0;a<c;a++)U.putByte(S.at(a%u));var W=Math.ceil(f/c)+Math.ceil(p/c),L=new We.util.ByteBuffer;for(s=0;s<W;s++){var ve=new We.util.ByteBuffer(y.getBytes(c)),J=511;for(a=U.length()-1;a>=0;a--)J=J>>8,J+=U.at(a)+ve.at(a),ve.setAt(a,J&255);L.putBuffer(ve)}y=L,l.putBuffer(S)}return l.truncate(l.length()-i),l};Gt.pbe.getCipher=function(t,e,r){switch(t){case Gt.oids.pkcs5PBES2:return Gt.pbe.getCipherForPBES2(t,e,r);case Gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Gt.oids["pbewithSHAAnd40BitRC2-CBC"]:return Gt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Gt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!he.validate(e,Olt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=he.derToOid(n.kdfOid),t!==Gt.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=he.derToOid(n.encOid),t!==Gt.oids["aes128-CBC"]&&t!==Gt.oids["aes192-CBC"]&&t!==Gt.oids["aes256-CBC"]&&t!==Gt.oids["des-EDE3-CBC"]&&t!==Gt.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=We.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var u,c;switch(Gt.oids[t]){case"aes128-CBC":u=16,c=We.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=We.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=We.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=We.des.createDecryptionCipher;break;case"desCBC":u=8,c=We.des.createDecryptionCipher;break}var l=Fke(n.prfOid),d=We.pkcs5.pbkdf2(r,s,a,u,l),p=n.encIv,f=c(d);return f.start(p),f};Gt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!he.validate(e,Mlt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=We.util.createBuffer(n.salt),a=We.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var u,c,l;switch(t){case Gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,l=We.des.startDecrypting;break;case Gt.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,l=function(h,g){var v=We.rc2.createDecryptionCipher(h,40);return v.start(g,null),v};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var d=Fke(n.prfOid),p=Gt.pbe.generatePkcs12Key(r,s,1,a,u,d);d.start();var f=Gt.pbe.generatePkcs12Key(r,s,2,a,c,d);return l(p,f)};Gt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in We.md))throw new Error('"md5" hash algorithm unavailable.');n=We.md.md5.create()}e===null&&(e="");for(var i=[Mke(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(Mke(n,i[s-1]+t+e));return i.join("").substr(0,r)};function Mke(t,e){return t.start().update(e).digest().getBytes()}function Fke(t){var e;if(!t)e="hmacWithSHA1";else if(e=Gt.oids[he.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Uke(e)}function Uke(t){var e=We.md;switch(t){case"hmacWithSHA224":e=We.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Flt(t,e,r,n){var i=he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OCTETSTRING,!1,t),he.create(he.Class.UNIVERSAL,he.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(he.create(he.Class.UNIVERSAL,he.Type.INTEGER,!1,We.util.hexToBytes(r.toString(16))),he.create(he.Class.UNIVERSAL,he.Type.SEQUENCE,!0,[he.create(he.Class.UNIVERSAL,he.Type.OID,!1,he.oidToDer(Gt.oids[n]).getBytes()),he.create(he.Class.UNIVERSAL,he.Type.NULL,!1,"")])),i}});var Nre=P((Nkr,Hke)=>{var DS=$t();Ol();xr();var Ve=DS.asn1,kS=Hke.exports=DS.pkcs7asn1=DS.pkcs7asn1||{};DS.pkcs7=DS.pkcs7||{};DS.pkcs7.asn1=kS;var qke={name:"ContentInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};kS.contentInfoValidator=qke;var Gke={name:"EncryptedContentInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};kS.envelopedDataValidator={name:"EnvelopedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Gke)};kS.encryptedDataValidator={name:"EncryptedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"}].concat(Gke)};var Ult={name:"SignerInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};kS.signedDataValidator={name:"SignedData",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},qke,{name:"SignedData.Certificates",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ve.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SET,capture:"signerInfos",optional:!0,value:[Ult]}]};kS.recipientInfoValidator={name:"RecipientInfo",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ve.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ve.Class.UNIVERSAL,type:Ve.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Dre=P((Dkr,jke)=>{var Xy=$t();xr();Xy.mgf=Xy.mgf||{};var Blt=jke.exports=Xy.mgf.mgf1=Xy.mgf1=Xy.mgf1||{};Blt.create=function(t){var e={generate:function(r,n){for(var i=new Xy.util.ByteBuffer,o=Math.ceil(n/t.digestLength),s=0;s<o;s++){var a=new Xy.util.ByteBuffer;a.putInt32(s),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var zke=P((kkr,Vke)=>{var iF=$t();Dre();Vke.exports=iF.mgf=iF.mgf||{};iF.mgf.mgf1=iF.mgf1});var oF=P((Lkr,Yke)=>{var Qy=$t();ku();xr();var qlt=Yke.exports=Qy.pss=Qy.pss||{};qlt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Qy.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||Qy.random,a={};return a.encode=function(u,c){var l,d=c-1,p=Math.ceil(d/8),f=u.digest().getBytes();if(p<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var h=new Qy.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(m),e.start(),e.update(h.getBytes());var g=e.digest().getBytes(),v=new Qy.util.ByteBuffer;v.fillWithByte(0,p-o-n-2),v.putByte(1),v.putBytes(m);var _=v.getBytes(),y=p-n-1,E=r.generate(g,y),x="";for(l=0;l<y;l++)x+=String.fromCharCode(_.charCodeAt(l)^E.charCodeAt(l));var S=65280>>8*p-d&255;return x=String.fromCharCode(x.charCodeAt(0)&~S)+x.substr(1),x+g+"\xBC"},a.verify=function(u,c,l){var d,p=l-1,f=Math.ceil(p/8);if(c=c.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,h=c.substr(0,m),g=c.substr(m,n),v=65280>>8*f-p&255;if(h.charCodeAt(0)&v)throw new Error("Bits beyond keysize not zero as expected.");var _=r.generate(g,m),y="";for(d=0;d<m;d++)y+=String.fromCharCode(h.charCodeAt(d)^_.charCodeAt(d));y=String.fromCharCode(y.charCodeAt(0)&~v)+y.substr(1);var E=f-n-o-2;for(d=0;d<E;d++)if(y.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(y.charCodeAt(E)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var x=y.substr(-o),S=new Qy.util.ByteBuffer;S.fillWithByte(0,8),S.putBytes(u),S.putBytes(x),e.start(),e.update(S.getBytes());var O=e.digest().getBytes();return g===O},a}});var cF=P((Okr,Qke)=>{var ut=$t();D0();Ol();GA();mp();zke();k0();Yy();oF();VA();xr();var I=ut.asn1,Me=Qke.exports=ut.pki=ut.pki||{},gr=Me.oids,fi={};fi.CN=gr.commonName;fi.commonName="CN";fi.C=gr.countryName;fi.countryName="C";fi.L=gr.localityName;fi.localityName="L";fi.ST=gr.stateOrProvinceName;fi.stateOrProvinceName="ST";fi.O=gr.organizationName;fi.organizationName="O";fi.OU=gr.organizationalUnitName;fi.organizationalUnitName="OU";fi.E=gr.emailAddress;fi.emailAddress="E";var Wke=ut.pki.rsa.publicKeyValidator,Glt={name:"Certificate",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:I.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:I.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:I.Class.UNIVERSAL,type:I.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:I.Class.UNIVERSAL,type:I.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:I.Class.UNIVERSAL,type:I.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:I.Class.UNIVERSAL,type:I.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Wke,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:I.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:I.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:I.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:I.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Hlt={name:"rsapss",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:I.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:I.Class.UNIVERSAL,type:I.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:I.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:I.Class.UNIVERSAL,type:I.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:I.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:I.Class.UNIVERSAL,type:I.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:I.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:I.Class.UNIVERSAL,type:I.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},jlt={name:"CertificationRequestInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Wke,{name:"CertificationRequestInfo.attributes",tagClass:I.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:I.Class.UNIVERSAL,type:I.Type.SET,constructed:!0}]}]}]},Vlt={name:"CertificationRequest",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[jlt,{name:"CertificationRequest.signatureAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:I.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Me.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,s=0;s<t.value.length;++s){n=t.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=I.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in gr&&(o.name=gr[o.type],o.name in fi&&(o.shortName=fi[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Me.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=I.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in gr&&(a.name=gr[a.type],a.name in fi&&(a.shortName=fi[a.name])),a.type===gr.extensionRequest){a.extensions=[];for(var u=0;u<a.value.length;++u)a.extensions.push(Me.certificateExtensionFromAsn1(a.value[u]))}e.push(a)}return e};function M0(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var sF=function(t,e,r){var n={};if(t!==gr["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:gr.sha1},mgf:{algorithmOid:gr.mgf1,hash:{algorithmOid:gr.sha1}},saltLength:20});var i={},o=[];if(!I.validate(e,Hlt,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=I.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=I.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=I.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},aF=function(t){switch(gr[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return ut.md.sha1.create();case"md5WithRSAEncryption":return ut.md.md5.create();case"sha256WithRSAEncryption":return ut.md.sha256.create();case"sha384WithRSAEncryption":return ut.md.sha384.create();case"sha512WithRSAEncryption":return ut.md.sha512.create();case"RSASSA-PSS":return ut.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},Kke=function(t){var e=t.certificate,r;switch(e.signatureOid){case gr.sha1WithRSAEncryption:case gr.sha1WithRSASignature:break;case gr["RSASSA-PSS"]:var n,i;if(n=gr[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||ut.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=gr[e.signatureParameters.mgf.algorithmOid],i===void 0||ut.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=ut.mgf[i].create(ut.md[n].create()),n=gr[e.signatureParameters.hash.algorithmOid],n===void 0||ut.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=ut.pss.create(ut.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};Me.certificateFromPem=function(t,e,r){var n=ut.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=I.fromDer(n.body,r);return Me.certificateFromAsn1(o,e)};Me.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:I.toDer(Me.certificateToAsn1(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Me.publicKeyFromPem=function(t){var e=ut.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=I.fromDer(e.body);return Me.publicKeyFromAsn1(n)};Me.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:I.toDer(Me.publicKeyToAsn1(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Me.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:I.toDer(Me.publicKeyToRSAPublicKey(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Me.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||ut.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=I.toDer(Me.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=I.toDer(Me.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Me.certificationRequestFromPem=function(t,e,r){var n=ut.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=I.fromDer(n.body,r);return Me.certificationRequestFromAsn1(o,e)};Me.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:I.toDer(Me.certificationRequestToAsn1(t)).getBytes()};return ut.pem.encode(r,{maxline:e})};Me.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return M0(t.issuer,e)},t.issuer.addField=function(e){Mu([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return M0(t.subject,e)},t.subject.addField=function(e){Mu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Mu(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Mu(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Xke(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||ut.md.sha1.create();var n=gr[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Me.getTBSCertificate(t);var o=I.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=aF({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||Me.getTBSCertificate(e),u=I.toDer(a);s.update(u.getBytes())}return s!==null&&(r=Kke({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,s,a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Me.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=gr.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return ut.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Me.certificateFromAsn1=function(t,e){var r={},n=[];if(!I.validate(t,Glt,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=I.derToOid(r.publicKeyOid);if(o!==Me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Me.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=ut.util.createBuffer(r.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=ut.asn1.derToOid(r.certSignatureOid),s.signatureParameters=sF(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=ut.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=sF(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(I.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(I.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(I.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(I.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,e){s.md=aF({signatureOid:s.signatureOid,type:"certificate"});var c=I.toDer(s.tbsCertificate);s.md.update(c.getBytes())}var l=ut.md.sha1.create(),d=I.toDer(r.certIssuer);l.update(d.getBytes()),s.issuer.getField=function(m){return M0(s.issuer,m)},s.issuer.addField=function(m){Mu([m]),s.issuer.attributes.push(m)},s.issuer.attributes=Me.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var p=ut.md.sha1.create(),f=I.toDer(r.certSubject);return p.update(f.getBytes()),s.subject.getField=function(m){return M0(s.subject,m)},s.subject.addField=function(m){Mu([m]),s.subject.attributes.push(m)},s.subject.attributes=Me.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=p.digest().toHex(),r.certExtensions?s.extensions=Me.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=Me.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};Me.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Me.certificateExtensionFromAsn1(n.value[i]));return e};Me.certificateExtensionFromAsn1=function(t){var e={};if(e.id=I.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===I.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in gr){if(e.name=gr[e.id],e.name==="keyUsage"){var r=I.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=I.fromDer(e.value);r.value.length>0&&r.value[0].type===I.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===I.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=I.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=I.fromDer(e.value),s=0;s<r.value.length;++s){var a=I.derToOid(r.value[s].value);a in gr?e[gr[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=I.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=I.fromDer(e.value),c=0;c<r.value.length;++c){u=r.value[c];var l={type:u.type,value:u.value};switch(e.altNames.push(l),u.type){case 1:case 2:case 6:break;case 7:l.ip=ut.util.bytesToIP(u.value);break;case 8:l.oid=I.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=I.fromDer(e.value);e.subjectKeyIdentifier=ut.util.bytesToHex(r.value)}}return e};Me.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!I.validate(t,Vlt,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=I.derToOid(r.publicKeyOid);if(o!==Me.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Me.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=ut.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=sF(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=ut.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=sF(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=aF({signatureOid:s.signatureOid,type:"certification request"});var a=I.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var u=ut.md.sha1.create();return s.subject.getField=function(c){return M0(s.subject,c)},s.subject.addField=function(c){Mu([c]),s.subject.attributes.push(c)},s.subject.attributes=Me.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=Me.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(c){return M0(s,c)},s.addAttribute=function(c){Mu([c]),s.attributes.push(c)},s.attributes=Me.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};Me.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return M0(t.subject,e)},t.subject.addField=function(e){Mu([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return M0(t,e)},t.addAttribute=function(e){Mu([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Mu(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Mu(e),t.attributes=e},t.sign=function(e,r){t.md=r||ut.md.sha1.create();var n=gr[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Me.getCertificationRequestInfo(t);var o=I.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=aF({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Me.getCertificationRequestInfo(t),i=I.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Kke({certificate:t,md:r,signature:t.signature})),e},t};function LS(t){for(var e=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var s=r.value,a=I.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===I.Type.UTF8&&(s=ut.util.encodeUtf8(s))),n=I.create(I.Class.UNIVERSAL,I.Type.SET,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(r.type).getBytes()),I.create(I.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function Mu(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Me.oids?e.name=Me.oids[e.type]:e.shortName&&e.shortName in fi&&(e.name=Me.oids[fi[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Me.oids)e.type=Me.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in fi&&(e.shortName=fi[e.name]),e.type===gr.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=I.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Me.certificateExtensionToAsn1(Xke(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function Xke(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Me.oids&&(t.name=Me.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Me.oids)t.id=Me.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),t.value=I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(I.create(I.Class.UNIVERSAL,I.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var u in t)t[u]===!0&&(u in gr?a.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(gr[u]).getBytes())):u.indexOf(".")!==-1&&a.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);for(var c,l=0;l<t.altNames.length;++l){c=t.altNames[l];var s=c.value;if(c.type===7&&c.ip){if(s=ut.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else c.type===8&&(c.oid?s=I.oidToDer(I.oidToDer(c.oid)):s=I.oidToDer(s));t.value.value.push(I.create(I.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=I.create(I.Class.UNIVERSAL,I.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var p=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(I.create(I.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var f=[I.create(I.Class.CONTEXT_SPECIFIC,4,!0,[LS(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(I.create(I.Class.CONTEXT_SPECIFIC,1,!0,f))}if(t.serialNumber){var m=ut.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(I.create(I.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);for(var a=t.value.value,h=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),g=I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[]),c,l=0;l<t.altNames.length;++l){c=t.altNames[l];var s=c.value;if(c.type===7&&c.ip){if(s=ut.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else c.type===8&&(c.oid?s=I.oidToDer(I.oidToDer(c.oid)):s=I.oidToDer(s));g.value.push(I.create(I.Class.CONTEXT_SPECIFIC,c.type,!1,s))}h.value.push(I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[g])),a.push(h)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function kre(t,e){switch(t){case gr["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(e.hash.algorithmOid).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(I.create(I.Class.CONTEXT_SPECIFIC,1,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(e.mgf.algorithmOid).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(e.mgf.hash.algorithmOid).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(I.create(I.Class.CONTEXT_SPECIFIC,2,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(e.saltLength).getBytes())])),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,r);default:return I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")}}function zlt(t){var e=I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,s=I.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===I.Type.UTF8&&(o=ut.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var u=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(i.type).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SET,!0,[I.create(I.Class.UNIVERSAL,s,a,o)])]);e.value.push(u)}return e}var Ylt=new Date("1950-01-01T00:00:00Z"),$lt=new Date("2050-01-01T00:00:00Z");function $ke(t){return t>=Ylt&&t<$lt?I.create(I.Class.UNIVERSAL,I.Type.UTCTIME,!1,I.dateToUtcTime(t)):I.create(I.Class.UNIVERSAL,I.Type.GENERALIZEDTIME,!1,I.dateToGeneralizedTime(t))}Me.getTBSCertificate=function(t){var e=$ke(t.validity.notBefore),r=$ke(t.validity.notAfter),n=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.CONTEXT_SPECIFIC,0,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(t.version).getBytes())]),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,ut.util.hexToBytes(t.serialNumber)),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.siginfo.algorithmOid).getBytes()),kre(t.siginfo.algorithmOid,t.siginfo.parameters)]),LS(t.issuer),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[e,r]),LS(t.subject),Me.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(I.create(I.Class.CONTEXT_SPECIFIC,1,!0,[I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(I.create(I.Class.CONTEXT_SPECIFIC,2,!0,[I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Me.certificateExtensionsToAsn1(t.extensions)),n};Me.getCertificationRequestInfo=function(t){var e=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(t.version).getBytes()),LS(t.subject),Me.publicKeyToAsn1(t.publicKey),zlt(t)]);return e};Me.distinguishedNameToAsn1=function(t){return LS(t)};Me.certificateToAsn1=function(t){var e=t.tbsCertificate||Me.getTBSCertificate(t);return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[e,I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.signatureOid).getBytes()),kre(t.signatureOid,t.signatureParameters)]),I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.signature)])};Me.certificateExtensionsToAsn1=function(t){var e=I.create(I.Class.CONTEXT_SPECIFIC,3,!0,[]),r=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Me.certificateExtensionToAsn1(t[n]));return e};Me.certificateExtensionToAsn1=function(t){var e=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);e.value.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.id).getBytes())),t.critical&&e.value.push(I.create(I.Class.UNIVERSAL,I.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=I.toDer(r).getBytes()),e.value.push(I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,r)),e};Me.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Me.getCertificationRequestInfo(t);return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[e,I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(t.signatureOid).getBytes()),kre(t.signatureOid,t.signatureParameters)]),I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,"\0"+t.signature)])};Me.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var a=r(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=ut.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];ut.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=ut.pki.certificateFromPem(s));var a=r(s.subject);if(!a)return!1;ut.util.isArray(a)||(a=[a]);for(var u=I.toDer(Me.certificateToAsn1(s)).getBytes(),c=0;c<a.length;++c){var l=I.toDer(Me.certificateToAsn1(a[c])).getBytes();if(u===l)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var u=e.certs[a];if(!ut.util.isArray(u))s.push(u);else for(var c=0;c<u.length;++c)s.push(u[c])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=ut.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var u=r(s.subject);if(!ut.util.isArray(u))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var c=I.toDer(Me.certificateToAsn1(s)).getBytes(),l=0;l<u.length;++l){var d=I.toDer(Me.certificateToAsn1(u[l])).getBytes();c===d&&(a=u[l],u.splice(l,1))}return u.length===0&&delete e.certs[s.subject.hash],a};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=ut.md.sha1.create();s.attributes=Me.RDNAttributesAsArray(LS(s),a),s.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Me.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Me.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var u=e.shift(),c=null,l=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Me.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(c=e[0]||t.getIssuer(u),c===null&&u.isIssuer(u)&&(l=!0,c=u),c){var d=c;ut.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){c=d.shift();try{p=c.verify(u)}catch{}}p||(s={message:"Certificate signature is invalid.",error:Me.certificateError.bad_certificate})}s===null&&(!c||l)&&!t.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:Me.certificateError.unknown_ca})}if(s===null&&c&&!u.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:Me.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<u.extensions.length;++m){var h=u.extensions[m];h.critical&&!(h.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:Me.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!c||l))){var g=u.getExtension("basicConstraints"),v=u.getExtension("keyUsage");if(v!==null&&(!v.keyCertSign||g===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Me.certificateError.bad_certificate}),s===null&&g!==null&&!g.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Me.certificateError.bad_certificate}),s===null&&v!==null&&"pathLenConstraint"in g){var _=a-1;_>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Me.certificateError.bad_certificate})}}var y=s===null?!0:s.error,E=r.verify?r.verify(y,a,n):y;if(E===!0)s=null;else throw y===!0&&(s={message:"The application rejected the certificate.",error:Me.certificateError.bad_certificate}),(E||E===0)&&(typeof E=="object"&&!ut.util.isArray(E)?(E.message&&(s.message=E.message),E.error&&(s.error=E.error)):typeof E=="string"&&(s.error=E)),s;o=!1,++a}while(e.length>0);return!0}});var Ore=P((Mkr,Zke)=>{var bn=$t();Ol();wS();k0();Nre();Pre();ku();VA();NS();xr();cF();var q=bn.asn1,rr=bn.pki,YA=Zke.exports=bn.pkcs12=bn.pkcs12||{},Jke={name:"ContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:q.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Wlt={name:"PFX",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},Jke,{name:"PFX.macData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:q.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Klt={name:"SafeBag",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:q.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Xlt={name:"Attribute",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,capture:"values"}]},Qlt={name:"CertBag",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:q.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:q.Class.UNIVERSAL,type:q.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function zA(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];if(!(n!==void 0&&a.type!==n)){if(e===null){i.push(a);continue}a.attributes[e]!==void 0&&a.attributes[e].indexOf(r)>=0&&i.push(a)}}return i}YA.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!q.validate(t,Wlt,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v={},_;return"localKeyId"in g?_=g.localKeyId:"localKeyIdHex"in g&&(_=bn.util.hexToBytes(g.localKeyIdHex)),_===void 0&&!("friendlyName"in g)&&"bagType"in g&&(v[g.bagType]=zA(s.safeContents,null,null,g.bagType)),_!==void 0&&(v.localKeyId=zA(s.safeContents,"localKeyId",_,g.bagType)),"friendlyName"in g&&(v.friendlyName=zA(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),v},getBagsByFriendlyName:function(g,v){return zA(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return zA(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(q.derToOid(n.contentType)!==rr.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=q.derToOid(n.contentType),o}var a=n.content.value[0];if(a.tagClass!==q.Class.UNIVERSAL||a.type!==q.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=Lre(a),n.mac){var u=null,c=0,l=q.derToOid(n.macAlgorithm);switch(l){case rr.oids.sha1:u=bn.md.sha1.create(),c=20;break;case rr.oids.sha256:u=bn.md.sha256.create(),c=32;break;case rr.oids.sha384:u=bn.md.sha384.create(),c=48;break;case rr.oids.sha512:u=bn.md.sha512.create(),c=64;break;case rr.oids.md5:u=bn.md.md5.create(),c=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var d=new bn.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(bn.util.bytesToHex(n.macIterations),16):1,f=YA.generateKey(r,d,3,p,c,u),m=bn.hmac.create();m.start(u,f),m.update(a.value);var h=m.getMac();if(h.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Jlt(s,a.value,e,r),s};function Lre(t){if(t.composed||t.constructed){for(var e=bn.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function Jlt(t,e,r,n){if(e=q.fromDer(e,r),e.tagClass!==q.Class.UNIVERSAL||e.type!==q.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],s={},a=[];if(!q.validate(o,Jke,s,a)){var u=new Error("Cannot read ContentInfo.");throw u.errors=a,u}var c={encrypted:!1},l=null,d=s.content.value[0];switch(q.derToOid(s.contentType)){case rr.oids.data:if(d.tagClass!==q.Class.UNIVERSAL||d.type!==q.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=Lre(d).value;break;case rr.oids.encryptedData:l=Zlt(d,n),c.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=q.derToOid(s.contentType),u}c.safeBags=edt(l,r,n),t.safeContents.push(c)}}function Zlt(t,e){var r={},n=[];if(!q.validate(t,bn.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=q.derToOid(r.contentType);if(o!==rr.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=q.derToOid(r.encAlgorithm);var s=rr.pbe.getCipher(o,r.encParameter,e),a=Lre(r.encryptedContentAsn1),u=bn.util.createBuffer(a.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function edt(t,e,r){if(!e&&t.length===0)return[];if(t=q.fromDer(t,e),t.tagClass!==q.Class.UNIVERSAL||t.type!==q.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],s={},a=[];if(!q.validate(o,Klt,s,a)){var u=new Error("Cannot read SafeBag.");throw u.errors=a,u}var c={type:q.derToOid(s.bagId),attributes:tdt(s.bagAttributes)};n.push(c);var l,d,p=s.bagValue.value[0];switch(c.type){case rr.oids.pkcs8ShroudedKeyBag:if(p=rr.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case rr.oids.keyBag:try{c.key=rr.privateKeyFromAsn1(p)}catch{c.key=null,c.asn1=p}continue;case rr.oids.certBag:l=Qlt,d=function(){if(q.derToOid(s.certId)!==rr.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=q.derToOid(s.certId),m}var h=q.fromDer(s.cert,e);try{c.cert=rr.certificateFromAsn1(h,!0)}catch{c.cert=null,c.asn1=h}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=c.type,u}if(l!==void 0&&!q.validate(p,l,s,a)){var u=new Error("Cannot read PKCS#12 "+l.name);throw u.errors=a,u}d()}return n}function tdt(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!q.validate(t[r],Xlt,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var s=q.derToOid(n.oid);if(rr.oids[s]!==void 0){e[rr.oids[s]]=[];for(var a=0;a<n.values.length;++a)e[rr.oids[s]].push(n.values[a].value)}}return e}YA.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=bn.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=bn.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=rr.certificateFromPem(s));var a=bn.md.sha1.create();a.update(q.toDer(rr.certificateToAsn1(s)).getBytes()),i=a.digest().getBytes()}else i=bn.random.getBytes(20);var u=[];i!==null&&u.push(q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.localKeyId).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SET,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.friendlyName).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SET,!0,[q.create(q.Class.UNIVERSAL,q.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(o=q.create(q.Class.UNIVERSAL,q.Type.SET,!0,u));var c=[],l=[];e!==null&&(bn.util.isArray(e)?l=e:l=[e]);for(var d=[],p=0;p<l.length;++p){e=l[p],typeof e=="string"&&(e=rr.certificateFromPem(e));var f=p===0?o:void 0,m=rr.certificateToAsn1(e),h=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.certBag).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.x509Certificate).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(m).getBytes())])])]),f]);d.push(h)}if(d.length>0){var g=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,d),v=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.data).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(g).getBytes())])]);c.push(v)}var _=null;if(t!==null){var y=rr.wrapRsaPrivateKey(rr.privateKeyToAsn1(t));r===null?_=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.keyBag).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[y]),o]):_=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.pkcs8ShroudedKeyBag).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[rr.encryptPrivateKeyInfo(y,r,n)]),o]);var E=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[_]),x=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.data).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(E).getBytes())])]);c.push(x)}var S=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,c),O;if(n.useMac){var a=bn.md.sha1.create(),U=new bn.util.ByteBuffer(bn.random.getBytes(n.saltSize)),W=n.count,t=YA.generateKey(r,U,3,W,20),L=bn.hmac.create();L.start(a,t),L.update(q.toDer(S).getBytes());var ve=L.getMac();O=q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.sha1).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.NULL,!1,"")]),q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,ve.getBytes())]),q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,U.getBytes()),q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,q.integerToDer(W).getBytes())])}return q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.INTEGER,!1,q.integerToDer(3).getBytes()),q.create(q.Class.UNIVERSAL,q.Type.SEQUENCE,!0,[q.create(q.Class.UNIVERSAL,q.Type.OID,!1,q.oidToDer(rr.oids.data).getBytes()),q.create(q.Class.CONTEXT_SPECIFIC,0,!0,[q.create(q.Class.UNIVERSAL,q.Type.OCTETSTRING,!1,q.toDer(S).getBytes())])]),O])};YA.generateKey=bn.pbe.generatePkcs12Key});var Fre=P((Fkr,e4e)=>{var F0=$t();Ol();k0();Pre();Yy();J7();Ore();oF();VA();xr();cF();var Mre=F0.asn1,OS=e4e.exports=F0.pki=F0.pki||{};OS.pemToDer=function(t){var e=F0.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return F0.util.createBuffer(e.body)};OS.privateKeyFromPem=function(t){var e=F0.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Mre.fromDer(e.body);return OS.privateKeyFromAsn1(n)};OS.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Mre.toDer(OS.privateKeyToAsn1(t)).getBytes()};return F0.pem.encode(r,{maxline:e})};OS.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Mre.toDer(t).getBytes()};return F0.pem.encode(r,{maxline:e})}});var jre=P((Ukr,c4e)=>{var Ie=$t();Ol();wS();W7();Yy();Fre();ku();NS();xr();var pF=function(t,e,r,n){var i=Ie.util.createBuffer(),o=t.length>>1,s=o+(t.length&1),a=t.substr(0,s),u=t.substr(o,s),c=Ie.util.createBuffer(),l=Ie.hmac.create();r=e+r;var d=Math.ceil(n/16),p=Math.ceil(n/20);l.start("MD5",a);var f=Ie.util.createBuffer();c.putBytes(r);for(var m=0;m<d;++m)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+r),f.putBuffer(l.digest());l.start("SHA1",u);var h=Ie.util.createBuffer();c.clear(),c.putBytes(r);for(var m=0;m<p;++m)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+r),h.putBuffer(l.digest());return i.putBytes(Ie.util.xorBytes(f.getBytes(),h.getBytes(),n)),i},rdt=function(t,e,r){var n=Ie.hmac.create();n.start("SHA1",t);var i=Ie.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},ndt=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=Ie.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},idt=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=Ie.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},Lc=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return Ie.util.createBuffer(t.getBytes(r))},Fu=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},A={};A.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};A.SupportedVersions=[A.Versions.TLS_1_1,A.Versions.TLS_1_0];A.Version=A.SupportedVersions[0];A.MaxFragment=15360;A.ConnectionEnd={server:0,client:1};A.PRFAlgorithm={tls_prf_sha256:0};A.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};A.CipherType={stream:0,block:1,aead:2};A.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};A.CompressionMethod={none:0,deflate:1};A.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};A.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};A.Alert={};A.Alert.Level={warning:1,fatal:2};A.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};A.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};A.CipherSuites={};A.getCipherSuite=function(t){var e=null;for(var r in A.CipherSuites){var n=A.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};A.handleUnexpected=function(t,e){var r=!t.open&&t.entity===A.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})};A.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(A.queue(t,A.createAlert(t,{level:A.Alert.Level.warning,description:A.Alert.Description.no_renegotiation})),A.flush(t)),t.process()};A.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===A.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});else{var o=e.fragment,s=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:Ie.util.createBuffer(o.getBytes(32)),session_id:Lc(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=Lc(o,2),n.compression_methods=Lc(o,1)),s=r-(s-o.length()),s>0){for(var a=Lc(o,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:Lc(a,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var c=n.extensions[u];if(c.type[0]===0&&c.type[1]===0)for(var l=Lc(c.data,2);l.length()>0;){var d=l.getByte();if(d!==0)break;t.session.extensions.server_name.serverNameList.push(Lc(l,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=A.getCipherSuite(n.cipher_suite);else for(var p=Ie.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(t.session.cipherSuite=A.getCipherSuite(p.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure},cipherSuite:Ie.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=A.CompressionMethod.none}return n};A.createSecurityParameters=function(t,e){var r=t.entity===A.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:A.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:A.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};A.handleServerHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=n4e,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=sdt,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.session.id=i,t.process()}};A.handleClientHello=function(t,e,r){var n=A.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=Ie.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var s,a=1;a<A.SupportedVersions.length&&(s=A.SupportedVersions[a],!(s.minor<=n.version.minor));++a);t.version={major:s.major,minor:s.minor},t.session.version=t.version}o!==null?(t.expect=Gre,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?fdt:qre,t.session.resuming=!1,A.createSecurityParameters(t,n)),t.open=!0,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHello(t)})),t.session.resuming?(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.pending=A.createConnectionState(t),t.state.current.write=t.state.pending.write,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))):(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)})),t.fail||(A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerKeyExchange(t)})),t.verifyClient!==!1&&A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificateRequest(t)})),A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createServerHelloDone(t)})))),A.flush(t),t.process()}};A.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Lc(n,3)},o,s,a=[];try{for(;i.certificate_list.length()>0;)o=Lc(i.certificate_list,3),s=Ie.asn1.fromDer(o),o=Ie.pki.certificateFromAsn1(s,!0),a.push(o)}catch(c){return t.error(t,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var u=t.entity===A.ConnectionEnd.client;(u||t.verifyClient===!0)&&a.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}}):a.length===0?t.expect=u?t4e:qre:(u?t.session.serverCertificate=a[0]:t.session.clientCertificate=a[0],A.verifyCertificateChain(t,a)&&(t.expect=u?t4e:qre)),t.process()};A.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});t.expect=adt,t.process()};A.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Lc(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=Ie.pki.privateKeyFromPem(o)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==s.pre_master_secret.charCodeAt(0)||a.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=Ie.random.getBytes(48)}t.expect=Gre,t.session.clientCertificate!==null&&(t.expect=mdt),t.process()};A.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Lc(n,1),certificate_authorities:Lc(n,2)};t.session.certificateRequest=i,t.expect=cdt,t.process()};A.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:Lc(n,2).getBytes()},s=Ie.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var a=t.session.clientCertificate;if(!a.publicKey.verify(s,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.handshake_failure}})}t.expect=Gre,t.process()};A.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!Ie.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createCertificate(t)}),A.queue(t,e)),e=A.createRecord(t,{type:A.ContentType.handshake,data:A.createClientKeyExchange(t)}),A.queue(t,e),t.expect=ddt;var s=function(a,u){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&A.queue(a,A.createRecord(a,{type:A.ContentType.handshake,data:A.createCertificateVerify(a,u)})),A.queue(a,A.createRecord(a,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),a.state.pending=A.createConnectionState(a),a.state.current.write=a.state.pending.write,A.queue(a,A.createRecord(a,{type:A.ContentType.handshake,data:A.createFinished(a)})),a.expect=n4e,A.flush(a),a.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);A.getClientSignature(t,s)};A.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.illegal_parameter}});var r=t.entity===A.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=A.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?udt:hdt,t.process()};A.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=Ie.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===A.ConnectionEnd.client,a=s?"server finished":"client finished",u=t.session.sp,c=12,l=pF;if(n=l(u.master_secret,a,n.getBytes(),c),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(A.queue(t,A.createRecord(t,{type:A.ContentType.change_cipher_spec,data:A.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,A.queue(t,A.createRecord(t,{type:A.ContentType.handshake,data:A.createFinished(t)}))),t.expect=s?ldt:gdt,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,A.flush(t),t.isConnected=!0,t.connected(t),t.process()};A.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case A.Alert.Description.close_notify:i="Connection closed.";break;case A.Alert.Description.unexpected_message:i="Unexpected message.";break;case A.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case A.Alert.Description.decryption_failed:i="Decryption failed.";break;case A.Alert.Description.record_overflow:i="Record overflow.";break;case A.Alert.Description.decompression_failure:i="Decompression failed.";break;case A.Alert.Description.handshake_failure:i="Handshake failure.";break;case A.Alert.Description.bad_certificate:i="Bad certificate.";break;case A.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case A.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case A.Alert.Description.certificate_expired:i="Certificate expired.";break;case A.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case A.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case A.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case A.Alert.Description.access_denied:i="Access denied.";break;case A.Alert.Description.decode_error:i="Decode error.";break;case A.Alert.Description.decrypt_error:i="Decrypt error.";break;case A.Alert.Description.export_restriction:i="Export restriction.";break;case A.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case A.Alert.Description.insufficient_security:i="Insufficient security.";break;case A.Alert.Description.internal_error:i="Internal error.";break;case A.Alert.Description.user_canceled:i="User canceled.";break;case A.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===A.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===A.ConnectionEnd.client?"server":"client",alert:n}),t.process()};A.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=Ie.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in dF[t.entity][t.expect]?(t.entity===A.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Ie.md.md5.create(),sha1:Ie.md.sha1.create()}),n!==A.HandshakeType.hello_request&&n!==A.HandshakeType.certificate_verify&&n!==A.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),dF[t.entity][t.expect][n](t,e,i)):A.handleUnexpected(t,e)};A.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};A.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===A.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();A.queue(t,A.createRecord(t,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_response,o)})),A.flush(t)}else if(n===A.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,Ie.util.createBuffer(o))}t.process()};var odt=0,sdt=1,t4e=2,adt=3,cdt=4,n4e=5,udt=6,ldt=7,ddt=8,pdt=0,fdt=1,qre=2,mdt=3,Gre=4,hdt=5,gdt=6,w=A.handleUnexpected,i4e=A.handleChangeCipherSpec,hs=A.handleAlert,la=A.handleHandshake,o4e=A.handleApplicationData,gs=A.handleHeartbeat,Hre=[];Hre[A.ConnectionEnd.client]=[[w,hs,la,w,gs],[w,hs,la,w,gs],[w,hs,la,w,gs],[w,hs,la,w,gs],[w,hs,la,w,gs],[i4e,hs,w,w,gs],[w,hs,la,w,gs],[w,hs,la,o4e,gs],[w,hs,la,w,gs]];Hre[A.ConnectionEnd.server]=[[w,hs,la,w,gs],[w,hs,la,w,gs],[w,hs,la,w,gs],[w,hs,la,w,gs],[i4e,hs,w,w,gs],[w,hs,la,w,gs],[w,hs,la,o4e,gs],[w,hs,la,w,gs]];var U0=A.handleHelloRequest,vdt=A.handleServerHello,s4e=A.handleCertificate,r4e=A.handleServerKeyExchange,Ure=A.handleCertificateRequest,uF=A.handleServerHelloDone,a4e=A.handleFinished,dF=[];dF[A.ConnectionEnd.client]=[[w,w,vdt,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,s4e,r4e,Ure,uF,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,w,r4e,Ure,uF,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,w,w,Ure,uF,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,w,w,w,uF,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,a4e],[U0,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[U0,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];var _dt=A.handleClientHello,ydt=A.handleClientKeyExchange,bdt=A.handleCertificateVerify;dF[A.ConnectionEnd.server]=[[w,_dt,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,s4e,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,ydt,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,bdt,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,a4e],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];A.generateKeys=function(t,e){var r=pF,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===A.Versions.TLS_1_0.major&&t.version.minor===A.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),a={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return o&&(a.client_write_IV=s.getBytes(e.fixed_iv_length),a.server_write_IV=s.getBytes(e.fixed_iv_length)),a};A.createConnectionState=function(t){var e=t.entity===A.ConnectionEnd.client,r=function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]}};return o},n={read:r(),write:r()};if(n.read.update=function(o,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(o,s,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,s){return n.write.compressFunction(o,s,n.write)?n.write.cipherFunction(s,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=A.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case A.CompressionMethod.none:break;case A.CompressionMethod.deflate:n.read.compressFunction=idt,n.write.compressFunction=ndt;break;default:throw new Error("Unsupported compression algorithm.")}}return n};A.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=Ie.util.createBuffer();return r.putInt32(e),r.putBytes(Ie.random.getBytes(28)),r};A.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};A.createAlert=function(t,e){var r=Ie.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),A.createRecord(t,{type:A.ContentType.alert,data:r})};A.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=Ie.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=Ie.util.createBuffer();o.putByte(A.CompressionMethod.none);var s=o.length(),a=Ie.util.createBuffer();if(t.virtualHost){var u=Ie.util.createBuffer();u.putByte(0),u.putByte(0);var c=Ie.util.createBuffer();c.putByte(0),Fu(c,2,Ie.util.createBuffer(t.virtualHost));var l=Ie.util.createBuffer();Fu(l,2,c),Fu(u,2,l),a.putBuffer(u)}var d=a.length();d>0&&(d+=2);var p=t.session.id,f=p.length+1+2+4+28+2+i+1+s+d,m=Ie.util.createBuffer();return m.putByte(A.HandshakeType.client_hello),m.putInt24(f),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),Fu(m,1,Ie.util.createBuffer(p)),Fu(m,2,e),Fu(m,1,o),d>0&&Fu(m,2,a),m};A.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=Ie.util.createBuffer();return n.putByte(A.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Fu(n,1,Ie.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};A.createCertificate=function(t){var e=t.entity===A.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=Ie.util.createBuffer();if(r!==null)try{Ie.util.isArray(r)||(r=[r]);for(var o=null,s=0;s<r.length;++s){var a=Ie.pem.decode(r[s])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=a.type,u}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=Ie.util.createBuffer(a.body);o===null&&(o=Ie.asn1.fromDer(c.bytes(),!1));var l=Ie.util.createBuffer();Fu(l,3,c),i.putBuffer(l)}r=Ie.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(f){return t.error(t,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate}})}var d=3+i.length(),p=Ie.util.createBuffer();return p.putByte(A.HandshakeType.certificate),p.putInt24(d),Fu(p,3,i),p};A.createClientKeyExchange=function(t){var e=Ie.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(Ie.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=Ie.util.createBuffer();return o.putByte(A.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};A.createServerKeyExchange=function(t){var e=0,r=Ie.util.createBuffer();return e>0&&(r.putByte(A.HandshakeType.server_key_exchange),r.putInt24(e)),r};A.getClientSignature=function(t,e){var r=Ie.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=Ie.pki.privateKeyFromPem(s)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.internal_error}}):i=s.sign(i,null),o(n,i)},t.getSignature(t,r,e)};A.createCertificateVerify=function(t,e){var r=e.length+2,n=Ie.util.createBuffer();return n.putByte(A.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};A.createCertificateRequest=function(t){var e=Ie.util.createBuffer();e.putByte(1);var r=Ie.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=Ie.pki.distinguishedNameToAsn1(i.subject),s=Ie.asn1.toDer(o);r.putInt16(s.length()),r.putBuffer(s)}var a=1+e.length()+2+r.length(),u=Ie.util.createBuffer();return u.putByte(A.HandshakeType.certificate_request),u.putInt24(a),Fu(u,1,e),Fu(u,2,r),u};A.createServerHelloDone=function(t){var e=Ie.util.createBuffer();return e.putByte(A.HandshakeType.server_hello_done),e.putInt24(0),e};A.createChangeCipherSpec=function(){var t=Ie.util.createBuffer();return t.putByte(1),t};A.createFinished=function(t){var e=Ie.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===A.ConnectionEnd.client,n=t.session.sp,i=12,o=pF,s=r?"client finished":"server finished";e=o(n.master_secret,s,e.getBytes(),i);var a=Ie.util.createBuffer();return a.putByte(A.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a};A.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=Ie.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(Ie.random.getBytes(o)),n};A.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===A.ContentType.handshake||e.type===A.ContentType.alert||e.type===A.ContentType.change_cipher_spec))){if(e.type===A.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=A.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>A.MaxFragment;)n.push(A.createRecord(t,{type:e.type,data:Ie.util.createBuffer(i.slice(0,A.MaxFragment))})),i=i.slice(A.MaxFragment);i.length>0&&n.push(A.createRecord(t,{type:e.type,data:Ie.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var s=n[o],a=t.state.current.write;a.update(t,s)&&t.records.push(s)}}};A.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Bre=function(t){switch(t){case!0:return!0;case Ie.pki.certificateError.bad_certificate:return A.Alert.Description.bad_certificate;case Ie.pki.certificateError.unsupported_certificate:return A.Alert.Description.unsupported_certificate;case Ie.pki.certificateError.certificate_revoked:return A.Alert.Description.certificate_revoked;case Ie.pki.certificateError.certificate_expired:return A.Alert.Description.certificate_expired;case Ie.pki.certificateError.certificate_unknown:return A.Alert.Description.certificate_unknown;case Ie.pki.certificateError.unknown_ca:return A.Alert.Description.unknown_ca;default:return A.Alert.Description.bad_certificate}},xdt=function(t){switch(t){case!0:return!0;case A.Alert.Description.bad_certificate:return Ie.pki.certificateError.bad_certificate;case A.Alert.Description.unsupported_certificate:return Ie.pki.certificateError.unsupported_certificate;case A.Alert.Description.certificate_revoked:return Ie.pki.certificateError.certificate_revoked;case A.Alert.Description.certificate_expired:return Ie.pki.certificateError.certificate_expired;case A.Alert.Description.certificate_unknown:return Ie.pki.certificateError.certificate_unknown;case A.Alert.Description.unknown_ca:return Ie.pki.certificateError.unknown_ca;default:return Ie.pki.certificateError.bad_certificate}};A.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,s,a){var u=Bre(o),c=t.verify(t,o,s,a);if(c!==!0){if(typeof c=="object"&&!Ie.util.isArray(c)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:A.Alert.Level.fatal,description:A.Alert.Description.bad_certificate},c.message&&(l.message=c.message),c.alert&&(l.alert.description=c.alert),l}c!==o&&(c=xdt(c))}return c},Ie.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||Ie.util.isArray(i))&&(i={send:!0,alert:{level:A.Alert.Level.fatal,description:Bre(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:A.Alert.Level.fatal,description:Bre(i.error)}),t.error(t,i)}return!t.fail};A.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,s=null;if(i?s=Ie.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){o=r.cache[s],delete r.cache[s];for(var a in r.order)if(r.order[a]===s){r.order.splice(a,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=Ie.util.bytesToHex(i);r.order.push(s),r.cache[s]=o}}return r};A.createConnection=function(t){var e=null;t.caStore?Ie.util.isArray(t.caStore)?e=Ie.pki.createCaStore(t.caStore):e=t.caStore:e=Ie.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in A.CipherSuites)r.push(A.CipherSuites[n])}var i=t.server?A.ConnectionEnd.server:A.ConnectionEnd.client,o=t.sessionCache?A.createSessionCache(t.sessionCache):null,s={version:{major:A.Version.major,minor:A.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(l,d,p,f){return d},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:Ie.util.createBuffer(),tlsData:Ie.util.createBuffer(),data:Ie.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(l,d){d.origin=d.origin||(l.entity===A.ConnectionEnd.client?"client":"server"),d.send&&(A.queue(l,A.createAlert(l,d.alert)),A.flush(l));var p=d.fatal!==!1;p&&(l.fail=!0),t.error(l,d),p&&l.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(l){s.version={major:A.Version.major,minor:A.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===A.ConnectionEnd.client?odt:pdt,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=A.createConnectionState(s)},s.reset();var a=function(l,d){var p=d.type-A.ContentType.change_cipher_spec,f=Hre[l.entity][l.expect];p in f?f[p](l,d):A.handleUnexpected(l,d)},u=function(l){var d=0,p=l.input,f=p.length();if(f<5)d=5-f;else{l.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:Ie.util.createBuffer(),ready:!1};var m=l.record.version.major===l.version.major;m&&l.session&&l.session.version&&(m=l.record.version.minor===l.version.minor),m||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.protocol_version}})}return d},c=function(l){var d=0,p=l.input,f=p.length();if(f<l.record.length)d=l.record.length-f;else{l.record.fragment.putBytes(p.getBytes(l.record.length)),p.compact();var m=l.state.current.read;m.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:A.Alert.Level.fatal,description:A.Alert.Description.unexpected_message}})),l.record.ready=!0)}return d};return s.handshake=function(l){if(s.entity!==A.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var d=null;l.length>0&&(s.sessionCache&&(d=s.sessionCache.getSession(l)),d===null&&(l="")),l.length===0&&s.sessionCache&&(d=s.sessionCache.getSession(),d!==null&&(l=d.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Ie.md.md5.create(),sha1:Ie.md.sha1.create()},d&&(s.version=d.version,s.session.sp=d.sp),s.session.sp.client_random=A.createRandom().getBytes(),s.open=!0,A.queue(s,A.createRecord(s,{type:A.ContentType.handshake,data:A.createClientHello(s)})),A.flush(s)}},s.process=function(l){var d=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(d=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(d=c(s)),!s.fail&&s.record!==null&&s.record.ready&&a(s,s.record)),d},s.prepare=function(l){return A.queue(s,A.createRecord(s,{type:A.ContentType.application_data,data:Ie.util.createBuffer(l)})),A.flush(s)},s.prepareHeartbeatRequest=function(l,d){return l instanceof Ie.util.ByteBuffer&&(l=l.bytes()),typeof d>"u"&&(d=l.length),s.expectedHeartbeatPayload=l,A.queue(s,A.createRecord(s,{type:A.ContentType.heartbeat,data:A.createHeartbeat(A.HeartbeatMessageType.heartbeat_request,l,d)})),A.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var d={id:s.session.id,version:s.session.version,sp:s.session.sp};d.sp.keys=null,s.sessionCache.setSession(d.id,d)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,A.queue(s,A.createAlert(s,{level:A.Alert.Level.warning,description:A.Alert.Description.close_notify})),A.flush(s)),s.closed(s)),s.reset(l)},s};c4e.exports=Ie.tls=Ie.tls||{};for(lF in A)typeof A[lF]!="function"&&(Ie.tls[lF]=A[lF]);var lF;Ie.tls.prf_tls1=pF;Ie.tls.hmac_sha1=rdt;Ie.tls.createSessionCache=A.createSessionCache;Ie.tls.createConnection=A.createConnection});var d4e=P((Bkr,l4e)=>{var B0=$t();D0();jre();var Uu=l4e.exports=B0.tls;Uu.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=Uu.BulkCipherAlgorithm.aes,t.cipher_type=Uu.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Uu.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:u4e};Uu.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=Uu.BulkCipherAlgorithm.aes,t.cipher_type=Uu.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Uu.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:u4e};function u4e(t,e,r){var n=e.entity===B0.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:B0.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:B0.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=Idt,t.write.cipherFunction=Edt,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Uu.hmac_sha1}function Edt(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Uu.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=B0.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Uu.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Tdt)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}function Tdt(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function Sdt(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function Idt(t,e){var r=!1,n;t.version.minor===Uu.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Sdt);var o=e.macLength,s=B0.random.getBytesSync(o),a=i.output.length();a>=o?(t.fragment=i.output.getBytes(a-o),s=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=B0.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Cdt(e.macKey,s,u)&&r,r}function Cdt(t,e,r){var n=B0.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Yre=P((qkr,h4e)=>{var On=$t();mp();xr();var $A=h4e.exports=On.sha512=On.sha512||{};On.md.sha512=On.md.algorithms.sha512=$A;var f4e=On.sha384=On.sha512.sha384=On.sha512.sha384||{};f4e.create=function(){return $A.create("SHA-384")};On.md.sha384=On.md.algorithms.sha384=f4e;On.sha512.sha256=On.sha512.sha256||{create:function(){return $A.create("SHA-512/256")}};On.md["sha512/256"]=On.md.algorithms["sha512/256"]=On.sha512.sha256;On.sha512.sha224=On.sha512.sha224||{create:function(){return $A.create("SHA-512/224")}};On.md["sha512/224"]=On.md.algorithms["sha512/224"]=On.sha512.sha224;$A.create=function(t){if(m4e||wdt(),typeof t>"u"&&(t="SHA-512"),!(t in Jy))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Jy[t],r=null,n=On.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var u=a.messageLengthSize/4,c=0;c<u;++c)a.fullMessageLength.push(0);n=On.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return a},a.start(),a.update=function(u,c){c==="utf8"&&(u=On.util.encodeUtf8(u));var l=u.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=l[1],l[1]=l[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(u),p4e(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var u=On.util.createBuffer();u.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=c&a.blockLength-1;u.putBytes(Vre.substr(0,a.blockLength-l));for(var d,p,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)d=a.fullMessageLength[m+1]*8,p=d/4294967296>>>0,f+=p,u.putInt32(f>>>0),f=d>>>0;u.putInt32(f);for(var h=new Array(r.length),m=0;m<r.length;++m)h[m]=r[m].slice(0);p4e(h,i,u);var g=On.util.createBuffer(),v;t==="SHA-512"?v=h.length:t==="SHA-384"?v=h.length-2:v=h.length-4;for(var m=0;m<v;++m)g.putInt32(h[m][0]),(m!==v-1||t!=="SHA-512/224")&&g.putInt32(h[m][1]);return g},a};var Vre=null,m4e=!1,zre=null,Jy=null;function wdt(){Vre="\x80",Vre+=On.util.fillString("\0",128),zre=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Jy={},Jy["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Jy["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Jy["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Jy["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],m4e=!0}function p4e(t,e,r){for(var n,i,o,s,a,u,c,l,d,p,f,m,h,g,v,_,y,E,x,S,O,U,W,L,ve,J,D,R,k,G,M,ce,V,_e,ze,lt=r.length();lt>=128;){for(k=0;k<16;++k)e[k][0]=r.getInt32()>>>0,e[k][1]=r.getInt32()>>>0;for(;k<80;++k)ce=e[k-2],G=ce[0],M=ce[1],n=((G>>>19|M<<13)^(M>>>29|G<<3)^G>>>6)>>>0,i=((G<<13|M>>>19)^(M<<3|G>>>29)^(G<<26|M>>>6))>>>0,_e=e[k-15],G=_e[0],M=_e[1],o=((G>>>1|M<<31)^(G>>>8|M<<24)^G>>>7)>>>0,s=((G<<31|M>>>1)^(G<<24|M>>>8)^(G<<25|M>>>7))>>>0,V=e[k-7],ze=e[k-16],M=i+V[1]+s+ze[1],e[k][0]=n+V[0]+o+ze[0]+(M/4294967296>>>0)>>>0,e[k][1]=M>>>0;for(h=t[0][0],g=t[0][1],v=t[1][0],_=t[1][1],y=t[2][0],E=t[2][1],x=t[3][0],S=t[3][1],O=t[4][0],U=t[4][1],W=t[5][0],L=t[5][1],ve=t[6][0],J=t[6][1],D=t[7][0],R=t[7][1],k=0;k<80;++k)c=((O>>>14|U<<18)^(O>>>18|U<<14)^(U>>>9|O<<23))>>>0,l=((O<<18|U>>>14)^(O<<14|U>>>18)^(U<<23|O>>>9))>>>0,d=(ve^O&(W^ve))>>>0,p=(J^U&(L^J))>>>0,a=((h>>>28|g<<4)^(g>>>2|h<<30)^(g>>>7|h<<25))>>>0,u=((h<<4|g>>>28)^(g<<30|h>>>2)^(g<<25|h>>>7))>>>0,f=(h&v|y&(h^v))>>>0,m=(g&_|E&(g^_))>>>0,M=R+l+p+zre[k][1]+e[k][1],n=D+c+d+zre[k][0]+e[k][0]+(M/4294967296>>>0)>>>0,i=M>>>0,M=u+m,o=a+f+(M/4294967296>>>0)>>>0,s=M>>>0,D=ve,R=J,ve=W,J=L,W=O,L=U,M=S+i,O=x+n+(M/4294967296>>>0)>>>0,U=M>>>0,x=y,S=E,y=v,E=_,v=h,_=g,M=i+s,h=n+o+(M/4294967296>>>0)>>>0,g=M>>>0;M=t[0][1]+g,t[0][0]=t[0][0]+h+(M/4294967296>>>0)>>>0,t[0][1]=M>>>0,M=t[1][1]+_,t[1][0]=t[1][0]+v+(M/4294967296>>>0)>>>0,t[1][1]=M>>>0,M=t[2][1]+E,t[2][0]=t[2][0]+y+(M/4294967296>>>0)>>>0,t[2][1]=M>>>0,M=t[3][1]+S,t[3][0]=t[3][0]+x+(M/4294967296>>>0)>>>0,t[3][1]=M>>>0,M=t[4][1]+U,t[4][0]=t[4][0]+O+(M/4294967296>>>0)>>>0,t[4][1]=M>>>0,M=t[5][1]+L,t[5][0]=t[5][0]+W+(M/4294967296>>>0)>>>0,t[5][1]=M>>>0,M=t[6][1]+J,t[6][0]=t[6][0]+ve+(M/4294967296>>>0)>>>0,t[6][1]=M>>>0,M=t[7][1]+R,t[7][0]=t[7][0]+D+(M/4294967296>>>0)>>>0,t[7][1]=M>>>0,lt-=128}}});var g4e=P($re=>{var Rdt=$t();Ol();var Ho=Rdt.asn1;$re.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};$re.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Ho.Class.UNIVERSAL,type:Ho.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var A4e=P((Hkr,R4e)=>{var vs=$t();jA();ku();Yre();xr();var E4e=g4e(),Adt=E4e.publicKeyValidator,Pdt=E4e.privateKeyValidator;typeof v4e>"u"&&(v4e=vs.jsbn.BigInteger);var v4e,Xre=vs.util.ByteBuffer,Qa=typeof Buffer>"u"?Uint8Array:Buffer;vs.pki=vs.pki||{};R4e.exports=vs.pki.ed25519=vs.ed25519=vs.ed25519||{};var nr=vs.ed25519;nr.constants={};nr.constants.PUBLIC_KEY_BYTE_LENGTH=32;nr.constants.PRIVATE_KEY_BYTE_LENGTH=64;nr.constants.SEED_BYTE_LENGTH=32;nr.constants.SIGN_BYTE_LENGTH=64;nr.constants.HASH_BYTE_LENGTH=64;nr.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=vs.random.getBytesSync(nr.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==nr.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+nr.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=gm({message:e,encoding:"binary"});for(var r=new Qa(nr.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Qa(nr.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Ldt(r,n),{publicKey:r,privateKey:n}};nr.privateKeyFromAsn1=function(t){var e={},r=[],n=vs.asn1.validate(t,Pdt,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=vs.asn1.derToOid(e.privateKeyOid),s=vs.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.privateKey,u=gm({message:vs.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:u}};nr.publicKeyFromAsn1=function(t){var e={},r=[],n=vs.asn1.validate(t,Adt,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=vs.asn1.derToOid(e.publicKeyOid),s=vs.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var a=e.ed25519PublicKey;if(a.length!==nr.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return gm({message:a,encoding:"binary"})};nr.publicKeyFromPrivateKey=function(t){t=t||{};var e=gm({message:t.privateKey,encoding:"binary"});if(e.length!==nr.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+nr.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Qa(nr.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};nr.sign=function(t){t=t||{};var e=gm(t),r=gm({message:t.privateKey,encoding:"binary"});if(r.length===nr.constants.SEED_BYTE_LENGTH){var n=nr.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==nr.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+nr.constants.SEED_BYTE_LENGTH+" or "+nr.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Qa(nr.constants.SIGN_BYTE_LENGTH+e.length);Odt(i,e,e.length,r);for(var o=new Qa(nr.constants.SIGN_BYTE_LENGTH),s=0;s<o.length;++s)o[s]=i[s];return o};nr.verify=function(t){t=t||{};var e=gm(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=gm({message:t.signature,encoding:"binary"});if(r.length!==nr.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+nr.constants.SIGN_BYTE_LENGTH);var n=gm({message:t.publicKey,encoding:"binary"});if(n.length!==nr.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+nr.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Qa(nr.constants.SIGN_BYTE_LENGTH+e.length),o=new Qa(nr.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<nr.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+nr.constants.SIGN_BYTE_LENGTH]=e[s];return Mdt(o,i,i.length,n)>=0};function gm(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Qa)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new Xre(e,r)}else if(!(e instanceof Xre))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Qa(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var Qre=vt(),fF=vt([1]),Ndt=vt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Ddt=vt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_4e=vt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y4e=vt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Wre=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),kdt=vt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function WA(t,e){var r=vs.md.sha512.create(),n=new Xre(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Qa(nr.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=i.charCodeAt(s);return o}function Ldt(t,e){var r=[vt(),vt(),vt(),vt()],n,i=WA(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,tne(r,i),ene(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function Odt(t,e,r,n){var i,o,s=new Float64Array(64),a=[vt(),vt(),vt(),vt()],u=WA(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var c=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=u[32+i];var l=WA(t.subarray(32),r+32);for(Jre(l),tne(a,l),ene(t,a),i=32;i<64;++i)t[i]=n[i];var d=WA(t,r+64);for(Jre(d),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=d[i]*u[o];return T4e(t.subarray(32),s),c}function Mdt(t,e,r,n){var i,o,s=new Qa(32),a=[vt(),vt(),vt(),vt()],u=[vt(),vt(),vt(),vt()];if(o=-1,r<64||Fdt(u,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var c=WA(t,r);if(Jre(c),C4e(a,u,c),tne(u,e.subarray(32)),Zre(a,u),ene(s,a),r-=64,S4e(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}function T4e(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*Wre[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Wre[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Wre[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Jre(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;T4e(t,e)}function Zre(t,e){var r=vt(),n=vt(),i=vt(),o=vt(),s=vt(),a=vt(),u=vt(),c=vt(),l=vt();US(r,t[1],t[0]),US(l,e[1],e[0]),sn(r,r,l),MS(n,t[0],t[1]),MS(l,e[0],e[1]),sn(n,n,l),sn(i,t[3],e[3]),sn(i,i,Ddt),sn(o,t[2],e[2]),MS(o,o,o),US(s,n,r),US(a,o,i),MS(u,o,i),MS(c,n,r),sn(t[0],s,a),sn(t[1],c,u),sn(t[2],u,a),sn(t[3],s,c)}function b4e(t,e,r){for(var n=0;n<4;++n)w4e(t[n],e[n],r)}function ene(t,e){var r=vt(),n=vt(),i=vt();Gdt(i,e[2]),sn(r,e[0],i),sn(n,e[1],i),mF(t,n),t[31]^=I4e(r)<<7}function mF(t,e){var r,n,i,o=vt(),s=vt();for(r=0;r<16;++r)s[r]=e[r];for(Kre(s),Kre(s),Kre(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,w4e(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function Fdt(t,e){var r=vt(),n=vt(),i=vt(),o=vt(),s=vt(),a=vt(),u=vt();return q0(t[2],fF),Udt(t[1],e),Zy(i,t[1]),sn(o,i,Ndt),US(i,i,t[2]),MS(o,t[2],o),Zy(s,o),Zy(a,s),sn(u,a,s),sn(r,u,i),sn(r,r,o),Bdt(r,r),sn(r,r,i),sn(r,r,o),sn(r,r,o),sn(t[0],r,o),Zy(n,t[0]),sn(n,n,o),x4e(n,i)&&sn(t[0],t[0],kdt),Zy(n,t[0]),sn(n,n,o),x4e(n,i)?-1:(I4e(t[0])===e[31]>>7&&US(t[0],Qre,t[0]),sn(t[3],t[0],t[1]),0)}function Udt(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Bdt(t,e){var r=vt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Zy(r,r),n!==1&&sn(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function x4e(t,e){var r=new Qa(32),n=new Qa(32);return mF(r,t),mF(n,e),S4e(r,0,n,0)}function S4e(t,e,r,n){return qdt(t,e,r,n,32)}function qdt(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function I4e(t){var e=new Qa(32);return mF(e,t),e[0]&1}function C4e(t,e,r){var n,i;for(q0(t[0],Qre),q0(t[1],fF),q0(t[2],fF),q0(t[3],Qre),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,b4e(t,e,n),Zre(e,t),Zre(t,t),b4e(t,e,n)}function tne(t,e){var r=[vt(),vt(),vt(),vt()];q0(r[0],_4e),q0(r[1],y4e),q0(r[2],fF),sn(r[3],_4e,y4e),C4e(t,r,e)}function q0(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function Gdt(t,e){var r=vt(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Zy(r,r),n!==2&&n!==4&&sn(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Kre(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function w4e(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function vt(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function MS(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function US(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function Zy(t,e){sn(t,e,e)}function sn(t,e,r){var n,i,o=0,s=0,a=0,u=0,c=0,l=0,d=0,p=0,f=0,m=0,h=0,g=0,v=0,_=0,y=0,E=0,x=0,S=0,O=0,U=0,W=0,L=0,ve=0,J=0,D=0,R=0,k=0,G=0,M=0,ce=0,V=0,_e=r[0],ze=r[1],lt=r[2],Tt=r[3],St=r[4],Ye=r[5],ft=r[6],Ht=r[7],Te=r[8],Be=r[9],N=r[10],H=r[11],te=r[12],ne=r[13],re=r[14],Fe=r[15];n=e[0],o+=n*_e,s+=n*ze,a+=n*lt,u+=n*Tt,c+=n*St,l+=n*Ye,d+=n*ft,p+=n*Ht,f+=n*Te,m+=n*Be,h+=n*N,g+=n*H,v+=n*te,_+=n*ne,y+=n*re,E+=n*Fe,n=e[1],s+=n*_e,a+=n*ze,u+=n*lt,c+=n*Tt,l+=n*St,d+=n*Ye,p+=n*ft,f+=n*Ht,m+=n*Te,h+=n*Be,g+=n*N,v+=n*H,_+=n*te,y+=n*ne,E+=n*re,x+=n*Fe,n=e[2],a+=n*_e,u+=n*ze,c+=n*lt,l+=n*Tt,d+=n*St,p+=n*Ye,f+=n*ft,m+=n*Ht,h+=n*Te,g+=n*Be,v+=n*N,_+=n*H,y+=n*te,E+=n*ne,x+=n*re,S+=n*Fe,n=e[3],u+=n*_e,c+=n*ze,l+=n*lt,d+=n*Tt,p+=n*St,f+=n*Ye,m+=n*ft,h+=n*Ht,g+=n*Te,v+=n*Be,_+=n*N,y+=n*H,E+=n*te,x+=n*ne,S+=n*re,O+=n*Fe,n=e[4],c+=n*_e,l+=n*ze,d+=n*lt,p+=n*Tt,f+=n*St,m+=n*Ye,h+=n*ft,g+=n*Ht,v+=n*Te,_+=n*Be,y+=n*N,E+=n*H,x+=n*te,S+=n*ne,O+=n*re,U+=n*Fe,n=e[5],l+=n*_e,d+=n*ze,p+=n*lt,f+=n*Tt,m+=n*St,h+=n*Ye,g+=n*ft,v+=n*Ht,_+=n*Te,y+=n*Be,E+=n*N,x+=n*H,S+=n*te,O+=n*ne,U+=n*re,W+=n*Fe,n=e[6],d+=n*_e,p+=n*ze,f+=n*lt,m+=n*Tt,h+=n*St,g+=n*Ye,v+=n*ft,_+=n*Ht,y+=n*Te,E+=n*Be,x+=n*N,S+=n*H,O+=n*te,U+=n*ne,W+=n*re,L+=n*Fe,n=e[7],p+=n*_e,f+=n*ze,m+=n*lt,h+=n*Tt,g+=n*St,v+=n*Ye,_+=n*ft,y+=n*Ht,E+=n*Te,x+=n*Be,S+=n*N,O+=n*H,U+=n*te,W+=n*ne,L+=n*re,ve+=n*Fe,n=e[8],f+=n*_e,m+=n*ze,h+=n*lt,g+=n*Tt,v+=n*St,_+=n*Ye,y+=n*ft,E+=n*Ht,x+=n*Te,S+=n*Be,O+=n*N,U+=n*H,W+=n*te,L+=n*ne,ve+=n*re,J+=n*Fe,n=e[9],m+=n*_e,h+=n*ze,g+=n*lt,v+=n*Tt,_+=n*St,y+=n*Ye,E+=n*ft,x+=n*Ht,S+=n*Te,O+=n*Be,U+=n*N,W+=n*H,L+=n*te,ve+=n*ne,J+=n*re,D+=n*Fe,n=e[10],h+=n*_e,g+=n*ze,v+=n*lt,_+=n*Tt,y+=n*St,E+=n*Ye,x+=n*ft,S+=n*Ht,O+=n*Te,U+=n*Be,W+=n*N,L+=n*H,ve+=n*te,J+=n*ne,D+=n*re,R+=n*Fe,n=e[11],g+=n*_e,v+=n*ze,_+=n*lt,y+=n*Tt,E+=n*St,x+=n*Ye,S+=n*ft,O+=n*Ht,U+=n*Te,W+=n*Be,L+=n*N,ve+=n*H,J+=n*te,D+=n*ne,R+=n*re,k+=n*Fe,n=e[12],v+=n*_e,_+=n*ze,y+=n*lt,E+=n*Tt,x+=n*St,S+=n*Ye,O+=n*ft,U+=n*Ht,W+=n*Te,L+=n*Be,ve+=n*N,J+=n*H,D+=n*te,R+=n*ne,k+=n*re,G+=n*Fe,n=e[13],_+=n*_e,y+=n*ze,E+=n*lt,x+=n*Tt,S+=n*St,O+=n*Ye,U+=n*ft,W+=n*Ht,L+=n*Te,ve+=n*Be,J+=n*N,D+=n*H,R+=n*te,k+=n*ne,G+=n*re,M+=n*Fe,n=e[14],y+=n*_e,E+=n*ze,x+=n*lt,S+=n*Tt,O+=n*St,U+=n*Ye,W+=n*ft,L+=n*Ht,ve+=n*Te,J+=n*Be,D+=n*N,R+=n*H,k+=n*te,G+=n*ne,M+=n*re,ce+=n*Fe,n=e[15],E+=n*_e,x+=n*ze,S+=n*lt,O+=n*Tt,U+=n*St,W+=n*Ye,L+=n*ft,ve+=n*Ht,J+=n*Te,D+=n*Be,R+=n*N,k+=n*H,G+=n*te,M+=n*ne,ce+=n*re,V+=n*Fe,o+=38*x,s+=38*S,a+=38*O,u+=38*U,c+=38*W,l+=38*L,d+=38*ve,p+=38*J,f+=38*D,m+=38*R,h+=38*k,g+=38*G,v+=38*M,_+=38*ce,y+=38*V,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=l,t[6]=d,t[7]=p,t[8]=f,t[9]=m,t[10]=h,t[11]=g,t[12]=v,t[13]=_,t[14]=y,t[15]=E}});var k4e=P((jkr,D4e)=>{var Oc=$t();xr();ku();jA();D4e.exports=Oc.kem=Oc.kem||{};var P4e=Oc.jsbn.BigInteger;Oc.kem.rsa={};Oc.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Oc.random,n={};return n.encrypt=function(i,o){var s=Math.ceil(i.n.bitLength()/8),a;do a=new P4e(Oc.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(a.compareTo(P4e.ONE)<=0);a=Oc.util.hexToBytes(a.toString(16));var u=s-a.length;u>0&&(a=Oc.util.fillString("\0",u)+a);var c=i.encrypt(a,"NONE"),l=t.generate(a,o);return{encapsulation:c,key:l}},n.decrypt=function(i,o,s){var a=i.decrypt(o,"NONE");return t.generate(a,s)},n};Oc.kem.kdf1=function(t,e){N4e(this,t,0,e||t.digestLength)};Oc.kem.kdf2=function(t,e){N4e(this,t,1,e||t.digestLength)};function N4e(t,e,r,n){t.generate=function(i,o){for(var s=new Oc.util.ByteBuffer,a=Math.ceil(o/n)+r,u=new Oc.util.ByteBuffer,c=r;c<a;++c){u.putInt32(c),e.start(),e.update(i+u.getBytes());var l=e.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-o),s.getBytes()}}});var F4e=P((Vkr,M4e)=>{var cr=$t();xr();M4e.exports=cr.log=cr.log||{};cr.log.levels=["none","error","warning","info","debug","verbose","max"];var hF={},ine=[],XA=null;cr.log.LEVEL_LOCKED=2;cr.log.NO_LEVEL_CHECK=4;cr.log.INTERPOLATE=8;for(Ep=0;Ep<cr.log.levels.length;++Ep)rne=cr.log.levels[Ep],hF[rne]={index:Ep,name:rne.toUpperCase()};var rne,Ep;cr.log.logMessage=function(t){for(var e=hF[t.level].index,r=0;r<ine.length;++r){var n=ine[r];if(n.flags&cr.log.NO_LEVEL_CHECK)n.f(t);else{var i=hF[n.level].index;e<=i&&n.f(n,t)}}};cr.log.prepareStandard=function(t){"standard"in t||(t.standard=hF[t.level].name+" ["+t.category+"] "+t.message)};cr.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=cr.util.format.apply(this,e)}};cr.log.prepareStandardFull=function(t){"standardFull"in t||(cr.log.prepareStandard(t),t.standardFull=t.standard)};for(nne=["error","warning","info","debug","verbose"],Ep=0;Ep<nne.length;++Ep)(function(e){cr.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};cr.log.logMessage(o)}})(nne[Ep]);var nne,Ep;cr.log.makeLogger=function(t){var e={flags:0,f:t};return cr.log.setLevel(e,"none"),e};cr.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&cr.log.LEVEL_LOCKED))for(var n=0;n<cr.log.levels.length;++n){var i=cr.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};cr.log.lock=function(t,e){typeof e>"u"||e?t.flags|=cr.log.LEVEL_LOCKED:t.flags&=~cr.log.LEVEL_LOCKED};cr.log.addLogger=function(t){ine.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(L4e={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},QA=function(t,e){cr.log.prepareStandard(e);var r=L4e[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},BS=cr.log.makeLogger(QA)):(QA=function(e,r){cr.log.prepareStandardFull(r),console.log(r.standardFull)},BS=cr.log.makeLogger(QA)),cr.log.setLevel(BS,"debug"),cr.log.addLogger(BS),XA=BS):console={log:function(){}};var BS,L4e,QA;XA!==null&&typeof window<"u"&&window.location&&(KA=new URL(window.location.href).searchParams,KA.has("console.level")&&cr.log.setLevel(XA,KA.get("console.level").slice(-1)[0]),KA.has("console.lock")&&(O4e=KA.get("console.lock").slice(-1)[0],O4e=="true"&&cr.log.lock(XA)));var KA,O4e;cr.log.consoleLogger=XA});var B4e=P((zkr,U4e)=>{U4e.exports=mp();W7();NS();vre();Yre()});var H4e=P((Ykr,G4e)=>{var qe=$t();D0();Ol();GA();k0();Yy();Nre();ku();xr();cF();var j=qe.asn1,da=G4e.exports=qe.pkcs7=qe.pkcs7||{};da.messageFromPem=function(t){var e=qe.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=j.fromDer(e.body);return da.messageFromAsn1(n)};da.messageToPem=function(t,e){var r={type:"PKCS7",body:j.toDer(t.toAsn1()).getBytes()};return qe.pem.encode(r,{maxline:e})};da.messageFromAsn1=function(t){var e={},r=[];if(!j.validate(t,da.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=j.derToOid(e.contentType),o;switch(i){case qe.pki.oids.envelopedData:o=da.createEnvelopedData();break;case qe.pki.oids.encryptedData:o=da.createEncryptedData();break;case qe.pki.oids.signedData:o=da.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};da.createSignedData=function(){var t=null;return t={type:qe.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(sne(t,n,da.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(qe.pki.certificateFromAsn1(i[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(qe.pki.certificateToAsn1(t.certificates[i]));var o=[],s=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(j.create(j.Class.UNIVERSAL,j.Type.SET,!0,t.signerInfos)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=qe.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=qe.pki.privateKeyFromPem(a));var u=n.digestAlgorithm||qe.pki.oids.sha1;switch(u){case qe.pki.oids.sha1:case qe.pki.oids.sha256:case qe.pki.oids.sha384:case qe.pki.oids.sha512:case qe.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var l=!1,d=!1,p=0;p<c.length;++p){var f=c[p];if(!l&&f.type===qe.pki.oids.contentType){if(l=!0,d)break;continue}if(!d&&f.type===qe.pki.oids.messageDigest){if(d=!0,l)break;continue}}if(!l||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:u,signatureAlgorithm:qe.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(qe.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof qe.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=qe.util.encodeUtf8(t.content)),n.detached?t.detachedContent=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=qe.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],s=o.digestAlgorithm;s in n||(n[s]=qe.md[qe.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=qe.md[qe.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(s).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=j.derToOid(t.contentInfo.value[0].value),s=j.toDer(i);s.getByte(),j.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var u=new Date,c=0;c<t.signers.length;++c){var l=t.signers[c];if(l.authenticatedAttributes.length===0){if(o!==qe.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[]),p=0;p<l.authenticatedAttributes.length;++p){var f=l.authenticatedAttributes[p];f.type===qe.pki.oids.messageDigest?f.value=n[l.digestAlgorithm].digest():f.type===qe.pki.oids.signingTime&&(f.value||(f.value=u)),d.value.push(one(f)),l.authenticatedAttributesAsn1.value.push(one(f))}s=j.toDer(d).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=$dt(t.signers)}};da.createEncryptedData=function(){var t=null;return t={type:qe.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:qe.pki.oids["aes256-CBC"]},fromAsn1:function(e){sne(t,e,da.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),q4e(t)}},t};da.createEnvelopedData=function(){var t=null;return t={type:qe.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:qe.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=sne(t,e,da.asn1.envelopedDataValidator);t.recipients=Vdt(r.recipientInfos.value)},toAsn1:function(){return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.type).getBytes()),j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,zdt(t.recipients)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,Wdt(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case qe.pki.oids.rsaEncryption:case qe.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=qe.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}q4e(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:qe.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case qe.pki.oids["aes128-CBC"]:n=16,i=16,o=qe.aes.createEncryptionCipher;break;case qe.pki.oids["aes192-CBC"]:n=24,i=16,o=qe.aes.createEncryptionCipher;break;case qe.pki.oids["aes256-CBC"]:n=32,i=16,o=qe.aes.createEncryptionCipher;break;case qe.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=qe.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=qe.util.createBuffer(qe.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=qe.util.createBuffer(qe.random.getBytes(i));var s=o(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var a=0;a<t.recipients.length;++a){var u=t.recipients[a];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case qe.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t};function Hdt(t){var e={},r=[];if(!j.validate(t,da.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:qe.pki.RDNAttributesAsArray(e.issuer),serialNumber:qe.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:j.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function jdt(t){return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[qe.pki.distinguishedNameToAsn1({attributes:t.issuer}),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber))]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.encryptedContent.algorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")]),j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function Vdt(t){for(var e=[],r=0;r<t.length;++r)e.push(Hdt(t[r]));return e}function zdt(t){for(var e=[],r=0;r<t.length;++r)e.push(jdt(t[r]));return e}function Ydt(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[qe.pki.distinguishedNameToAsn1({attributes:t.issuer}),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,qe.util.hexToBytes(t.serialNumber))]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.digestAlgorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureAlgorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(one(i))}e.value.push(r)}return e}function $dt(t){for(var e=[],r=0;r<t.length;++r)e.push(Ydt(t[r]));return e}function one(t){var e;if(t.type===qe.pki.oids.contentType)e=j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.value).getBytes());else if(t.type===qe.pki.oids.messageDigest)e=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===qe.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=j.utcTimeToDate(i):i=j.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(i)):e=j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(i))}return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[e])])}function Wdt(t){return[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(qe.pki.oids.data).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.algorithm).getBytes()),t.parameter?j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,t.content.getBytes())])]}function sne(t,e,r){var n={},i=[];if(!j.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=j.derToOid(n.contentType);if(s!==qe.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(qe.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==j.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[u].value}else a=n.encryptedContent;t.encryptedContent={algorithm:j.derToOid(n.encAlgorithm),parameter:qe.util.createBuffer(n.encParameter.value),content:qe.util.createBuffer(a)}}if(n.content){var a="";if(qe.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==j.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[u].value}else a=n.content;t.content=qe.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function q4e(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case qe.pki.oids["aes128-CBC"]:case qe.pki.oids["aes192-CBC"]:case qe.pki.oids["aes256-CBC"]:e=qe.aes.createDecryptionCipher(t.encryptedContent.key);break;case qe.pki.oids.desCBC:case qe.pki.oids["des-EDE3-CBC"]:e=qe.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var V4e=P(($kr,j4e)=>{var Qi=$t();D0();wS();W7();NS();xr();var vF=j4e.exports=Qi.ssh=Qi.ssh||{};vF.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var s=Qi.util.createBuffer();qS(s,n),Tp(s,t.e),Tp(s,t.n);var a=Qi.util.encode64(s.bytes(),64),u=Math.floor(a.length/66)+1;o+="Public-Lines: "+u+`\r
`,o+=a;var c=Qi.util.createBuffer();Tp(c,t.d),Tp(c,t.p),Tp(c,t.q),Tp(c,t.qInv);var l;if(!e)l=Qi.util.encode64(c.bytes(),64);else{var d=c.length()+16-1;d-=d%16;var p=gF(c.bytes());p.truncate(p.length()-d+c.length()),c.putBuffer(p);var f=Qi.util.createBuffer();f.putBuffer(gF("\0\0\0\0",e)),f.putBuffer(gF("\0\0\0",e));var m=Qi.aes.createEncryptionCipher(f.truncate(8),"CBC");m.start(Qi.util.createBuffer().fillWithByte(0,16)),m.update(c.copy()),m.finish();var h=m.output;h.truncate(16),l=Qi.util.encode64(h.bytes(),64)}u=Math.floor(l.length/66)+1,o+=`\r
Private-Lines: `+u+`\r
`,o+=l;var g=gF("putty-private-key-file-mac-key",e),v=Qi.util.createBuffer();qS(v,n),qS(v,i),qS(v,r),v.putInt32(s.length()),v.putBuffer(s),v.putInt32(c.length()),v.putBuffer(c);var _=Qi.hmac.create();return _.start("sha1",g),_.update(v.bytes()),o+=`\r
Private-MAC: `+_.digest().toHex()+`\r
`,o};vF.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Qi.util.createBuffer();return qS(n,r),Tp(n,t.e),Tp(n,t.n),r+" "+Qi.util.encode64(n.bytes())+" "+e};vF.privateKeyToOpenSSH=function(t,e){return e?Qi.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Qi.pki.privateKeyToPem(t)};vF.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Qi.md.md5.create(),n="ssh-rsa",i=Qi.util.createBuffer();qS(i,n),Tp(i,t.e),Tp(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function Tp(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Qi.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function qS(t,e){t.putInt32(e.length),t.putString(e)}function gF(){for(var t=Qi.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var Y4e=P((Wkr,z4e)=>{z4e.exports=$t();D0();d4e();Ol();G7();GA();A4e();wS();k4e();F4e();B4e();Dre();J7();Yy();Cre();Ore();H4e();Fre();Rre();_re();oF();ku();xre();V4e();jre();xr()});var $4e=P((Kkr,Kdt)=>{Kdt.exports={name:"@roamhq/mac-ca",version:"1.0.7",description:"Get Mac OS Root certificates",main:"index.js",repository:{type:"git",url:"https://github.com/WonderInventions/mac-ca.git"},scripts:{test:'echo "Error: no test specified" && exit 1',lint:"eslint ."},license:"BSD-3-Clause",dependencies:{"node-forge":"^1.3.1"},devDependencies:{eslint:"^8.22.0"}}});var X4e=P((Xkr,ane)=>{var yF=Y4e(),W4e=$4e(),_F=ane.exports.validFormats={der:0,pem:1,txt:2,asn1:3};function K4e(t){let e=yF.pki.pemToDer(t),r=yF.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,s=n.slice(o);return{serial:s[0],issuer:s[2],valid:s[3],subject:s[4]}}function Xdt(t){let e=K4e(t),r=new Date,n=e.subject.value.map(s=>s.value[0].value[1].value).join("/"),i=e.valid.value.map(s=>s.value).join(" - "),o=r.toTimeString().replace(/\s*\(.*\)\s*/,"");return[`Subject	${n}`,`Valid	${i}`,`Saved	${r.toLocaleDateString()} ${o} by ${W4e.name}@${W4e.version}`,String(t)].join(`
`)}ane.exports.transform=function(t){return function(e){try{switch(t){case _F.der:return yF.pki.pemToDer(e);case _F.pem:return e;case _F.txt:return Xdt(e);case _F.asn1:return K4e(e);default:return yF.pki.certificateFromPem(e)}}catch{return}}}});var Q4e=P((Qkr,GS)=>{var cne=require("https"),une=X4e();if(process.platform!=="darwin")GS.exports.all=()=>[],GS.exports.each=()=>{};else{let a=function(c,l,d){return d.indexOf(c)===l};Qdt=a;let t=require("child_process"),e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r="/System/Library/Keychains/SystemRootCertificates.keychain",n=["find-certificate","-a","-p"],i=t.spawnSync("/usr/bin/security",n).stdout.toString().split(e),o=t.spawnSync("/usr/bin/security",n.concat(r)).stdout.toString().split(e);cne.globalAgent.options.ca=cne.globalAgent.options.ca||[];let s=cne.globalAgent.options.ca,u=i.concat(o);u.filter(a).forEach(c=>s.push(c)),GS.exports.der2=une.validFormats,GS.exports.all=function(c){return u.map(une.transform(c)).filter(l=>l)},GS.exports.each=function(c,l){return typeof c=="function"&&(l=c,c=void 0),u.map(une.transform(c)).filter(d=>d).forEach(l)}}var Qdt});var Ane=P((w4r,sLe)=>{var JA=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,spt=typeof AbortController=="function",SF=spt?AbortController:class{constructor(){this.signal=new nLe}abort(){this.signal.dispatchEvent("abort")}},apt=typeof AbortSignal=="function",cpt=typeof SF.AbortSignal=="function",nLe=apt?AbortSignal:cpt?SF.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},wne=new Set,Sne=(t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;IF(r)&&Rne(r,`${t} option`,`options.${e}`,jS)},Ine=(t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(IF(r)){let{prototype:n}=jS,{get:i}=Object.getOwnPropertyDescriptor(n,t);Rne(r,`${t} method`,`cache.${e}()`,i)}},upt=(t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(IF(r)){let{prototype:n}=jS,{get:i}=Object.getOwnPropertyDescriptor(n,t);Rne(r,`${t} property`,`cache.${e}`,i)}},iLe=(...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},IF=t=>!wne.has(t),Rne=(t,e,r,n)=>{wne.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;iLe(i,"DeprecationWarning",t,n)},eb=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),oLe=t=>eb(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?HS:null:null,HS=class extends Array{constructor(e){super(e),this.fill(0)}},Cne=class{constructor(e){if(e===0)return[];let r=oLe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},jS=class t{constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:u,dispose:c,disposeAfter:l,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,sizeCalculation:m,fetchMethod:h,fetchContext:g,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_}=e,{length:y,maxAge:E,stale:x}=e instanceof t?{}:e;if(r!==0&&!eb(r))throw new TypeError("max option must be a nonnegative integer");let S=r?oLe(r):Array;if(!S)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=f,this.sizeCalculation=m||y,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=h||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=g,!this.fetchMethod&&g!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new S(r),this.prev=new S(r),this.head=0,this.tail=0,this.free=new Cne(r),this.initialFill=1,this.size=0,typeof c=="function"&&(this.dispose=c),typeof l=="function"?(this.disposeAfter=l,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.maxSize!==0){if(!eb(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!u||!!x,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=eb(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||E||0,this.ttl){if(!eb(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";IF(O)&&(wne.add(O),iLe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}x&&Sne("stale","allowStale"),E&&Sne("maxAge","ttl"),y&&Sne("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new HS(this.max),this.starts=new HS(this.max),this.setItemTTL=(n,i,o=JA.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let s=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);s.unref&&s.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?JA.now():0};let e=0,r=()=>{let n=JA.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n};this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new HS(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!eb(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!eb(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return Ine("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[r];let a=JA.now()-this.starts[r];s.start=Math.floor(Date.now()-a)}this.sizes&&(s.size=this.sizes[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=JA.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL}={}){if(s=this.requireSize(e,r,s,a),this.maxSize&&s>this.maxSize)return this;let c=this.size===0?void 0:this.keyMap.get(e);if(c===void 0)c=this.newIndex(),this.keyList[c]=e,this.valList[c]=r,this.keyMap.set(e,c),this.next[this.tail]=c,this.prev[c]=this.tail,this.tail=c,this.size++,this.addItemSize(c,s),u=!1;else{let l=this.valList[c];r!==l&&(this.isBackgroundFetch(l)?l.__abortController.abort():o||(this.dispose(l,e,"set"),this.disposeAfter&&this.disposed.push([l,e,"set"])),this.removeItemSize(c),this.valList[c]=r,this.addItemSize(c,s)),this.moveToTail(c)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),u||this.setItemTTL(c,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let s=new SF,a={signal:s.signal,options:n,context:i},u=p=>(s.signal.aborted||this.set(e,p,a.options),p),c=p=>{if(this.valList[r]===d&&(!n.noDeleteOnFetchRejection||d.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=d.__staleWhileFetching),d.__returned===d)throw p},l=p=>p(this.fetchMethod(e,o,a)),d=new Promise(l).then(u,c);return d.__abortController=s,d.__staleWhileFetching=o,d.__returned=null,r===void 0?(this.set(e,d,a.options),r=this.keyMap.get(e)):this.valList[r]=d,d}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,fetchContext:d=this.fetchContext,forceRefresh:p=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let f={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:u,noUpdateTTL:c,noDeleteOnFetchRejection:l},m=this.keyMap.get(e);if(m===void 0){let h=this.backgroundFetch(e,m,f,d);return h.__returned=h}else{let h=this.valList[m];if(this.isBackgroundFetch(h))return r&&h.__staleWhileFetching!==void 0?h.__staleWhileFetching:h.__returned=h;if(!p&&!this.isStale(m))return this.moveToTail(m),n&&this.updateItemAge(m),h;let g=this.backgroundFetch(e,m,f,d);return r&&g.__staleWhileFetching!==void 0?g.__staleWhileFetching:g.__returned=g}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let s=this.valList[o],a=this.isBackgroundFetch(s);return this.isStale(o)?a?r?s.__staleWhileFetching:void 0:(i||this.delete(e),r?s:void 0):a?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),s)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Ine("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Ine("reset","clear"),this.clear}get length(){return upt("length","size"),this.size}static get AbortController(){return SF}static get AbortSignal(){return nLe}};sLe.exports=jS});var Dne=P((R4r,aLe)=>{"use strict";var ZA=class extends Error{constructor(e,r){super(e),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},Pne=class extends ZA{constructor(e,r,n){super(e,r),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},Nne=class extends ZA{constructor(e,r="aborted"){super(e,r)}};aLe.exports={FetchBaseError:ZA,FetchError:Pne,AbortError:Nne}});var _m=P((A4r,uLe)=>{"use strict";var{constants:{MAX_LENGTH:lpt}}=require("buffer"),{pipeline:CF,PassThrough:dpt}=require("stream"),{promisify:ppt}=require("util"),{createGunzip:fpt,createInflate:mpt,createBrotliDecompress:hpt,constants:{Z_SYNC_FLUSH:cLe}}=require("zlib"),gpt=ol()("helix-fetch:utils"),vpt=ppt(CF),_pt=(t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),ypt=(t,e,r,n)=>{if(!_pt(t,e))return r;let i=o=>{o&&(gpt(`encountered error while decoding stream: ${o}`),n(o))};switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return CF(r,fpt({flush:cLe,finishFlush:cLe}),i);case"deflate":case"x-deflate":return CF(r,mpt(),i);case"br":return CF(r,hpt(),i);default:return r}},bpt=t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},wF=(t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?xpt(t,e):Ept(t,e);default:return 0}},xpt=(t,e)=>(e.add(t),t.map(r=>e.has(r)?0:wF(r,e)).reduce((r,n)=>r+n,0)),Ept=(t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=wF(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=wF(t[i],e)}),r},Tpt=t=>wF(t,new WeakSet),Spt=async t=>{let e=new dpt,r=0,n=[];return e.on("data",i=>{if(r+i.length>lpt)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await vpt(t,e),Buffer.concat(n,r)};uLe.exports={decodeStream:ypt,isPlainObject:bpt,sizeof:Tpt,streamToBuffer:Spt}});var AF=P((P4r,fLe)=>{"use strict";var{PassThrough:lLe,Readable:ym}=require("stream"),{types:{isAnyArrayBuffer:pLe}}=require("util"),{FetchError:Ipt,FetchBaseError:Cpt}=Dne(),{streamToBuffer:wpt}=_m(),Rpt=Buffer.alloc(0),Bu=Symbol("Body internals"),Apt=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),dLe=async t=>{if(t[Bu].disturbed)throw new TypeError("Already read");if(t[Bu].error)throw new TypeError(`Stream had error: ${t[Bu].error.message}`);t[Bu].disturbed=!0;let{stream:e}=t[Bu];return e===null?Rpt:wpt(e)},RF=class{constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=ym.from(e.toString()):e instanceof ym?r=e:Buffer.isBuffer(e)?r=ym.from(e):pLe(e)?r=ym.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=ym.from(e):r=ym.from(String(e)),this[Bu]={stream:r,disturbed:!1,error:null},e instanceof ym&&r.on("error",n=>{let i=n instanceof Cpt?n:new Ipt(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Bu].error=i})}get body(){return this[Bu].stream}get bodyUsed(){return this[Bu].disturbed}async buffer(){return dLe(this)}async arrayBuffer(){return Apt(await this.buffer())}async text(){return(await dLe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(RF.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Ppt=t=>{if(t[Bu].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Bu],r=e;if(e instanceof ym){r=new lLe;let n=new lLe;e.pipe(r),e.pipe(n),t[Bu].stream=n}return r},Npt=t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||pLe(t)||t instanceof ym?null:"text/plain; charset=utf-8";fLe.exports={Body:RF,cloneStream:Ppt,guessContentType:Npt}});var VS=P((N4r,vLe)=>{"use strict";var{validateHeaderName:mLe,validateHeaderValue:hLe}=require("http"),{isPlainObject:Dpt}=_m(),bm=Symbol("Headers internals"),eP=t=>{let e=typeof t!="string"?String(t):t;if(typeof mLe=="function")mLe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},gLe=(t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof hLe=="function")hLe(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},PF=class t{constructor(e={}){if(this[bm]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(Dpt(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[bm].map.set(eP(e),gLe(r,e))}has(e){return this[bm].map.has(eP(e))}get(e){let r=this[bm].map.get(eP(e));return r===void 0?null:r}append(e,r){let n=eP(e),i=gLe(r,e),o=this[bm].map.get(n);this[bm].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[bm].map.delete(eP(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[bm].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[bm].map)}};Object.defineProperties(PF.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));vLe.exports={Headers:PF}});var kne=P((D4r,_Le)=>{"use strict";var{EventEmitter:kpt}=require("events"),Fl=Symbol("AbortSignal internals"),zS=class{constructor(){this[Fl]={eventEmitter:new kpt,onabort:null,aborted:!1}}get aborted(){return this[Fl].aborted}get onabort(){return this[Fl].onabort}set onabort(e){this[Fl].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[Fl].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[Fl].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[Fl][n]=="function"&&this[n](r),this[Fl].eventEmitter.emit(e,r)}fire(){this[Fl].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(zS.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var DF=class extends zS{constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Fl].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Fl].timerId)}};Object.defineProperties(DF.prototype,{clear:{enumerable:!0}});var NF=Symbol("AbortController internals"),kF=class{constructor(){this[NF]={signal:new zS}}get signal(){return this[NF].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[NF].signal.aborted||this[NF].signal.fire()}};Object.defineProperties(kF.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});_Le.exports={AbortController:kF,AbortSignal:zS,TimeoutSignal:DF}});var tP=P((k4r,xLe)=>{"use strict";var{randomBytes:Lpt}=require("crypto"),{Readable:Opt}=require("stream"),One=t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Mpt=t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData",yLe=t=>`--${t}--\r
\r
`,bLe=(t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,One(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`};async function*Fpt(t,e){for(let[r,n]of t)yield bLe(e,r,n),One(n)?yield*n.stream():yield n,yield`\r
`;yield yLe(e)}var Upt=(t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(bLe(e,n,i)),r+=One(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(yLe(e)),r},Lne=class{constructor(e){this.fd=e,this.boundary=Lpt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Upt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Opt.from(Fpt(this.fd,this.boundary))}};xLe.exports={isFormData:Mpt,FormDataSerializer:Lne}});var TLe=P((L4r,ELe)=>{"use strict";var{AbortSignal:Bpt}=kne(),{Body:qpt,cloneStream:Gpt,guessContentType:Hpt}=AF(),{Headers:jpt}=VS(),{isPlainObject:Vpt}=_m(),{isFormData:zpt,FormDataSerializer:Ypt}=tP(),$pt=20,G0=Symbol("Request internals"),LF=class t extends qpt{constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body||(n&&n.body?Gpt(n):null),a=new jpt(r.headers||n&&n.headers||{});if(zpt(s)&&!a.has("content-type")){let d=new Ypt(s);s=d.stream(),a.set("content-type",d.contentType()),!a.has("transfer-encoding")&&!a.has("content-length")&&a.set("content-length",d.length())}if(!a.has("content-type"))if(Vpt(s))s=JSON.stringify(s),a.set("content-type","application/json");else{let d=Hpt(s);d&&a.set("content-type",d)}super(s);let u=n?n.signal:null;if("signal"in r&&(u=r.signal),u&&!(u instanceof Bpt))throw new TypeError("signal needs to be an instance of AbortSignal");let c=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(c))throw new TypeError(`'${c}' is not a valid redirect option`);let l=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(l))throw new TypeError(`'${l}' is not a valid cache option`);this[G0]={init:{...r},method:o,redirect:c,cache:l,headers:a,parsedURL:i,signal:u},r.follow===void 0?!n||n.follow===void 0?this.follow=$pt:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[G0].method}get url(){return this[G0].parsedURL.toString()}get headers(){return this[G0].headers}get redirect(){return this[G0].redirect}get cache(){return this[G0].cache}get signal(){return this[G0].signal}clone(){return new t(this)}get init(){return this[G0].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(LF.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});ELe.exports={Request:LF}});var Mne=P((O4r,SLe)=>{"use strict";var{Body:Wpt,cloneStream:Kpt,guessContentType:Xpt}=AF(),{Headers:Qpt}=VS(),{isPlainObject:Jpt}=_m(),{isFormData:Zpt,FormDataSerializer:eft}=tP(),Ul=Symbol("Response internals"),OF=class t extends Wpt{constructor(e=null,r={}){let n=new Qpt(r.headers),i=e;if(Zpt(i)&&!n.has("content-type")){let o=new eft(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Jpt(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=Xpt(i);o&&n.set("content-type",o)}super(i),this[Ul]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Ul].url||""}get status(){return this[Ul].status}get statusText(){return this[Ul].statusText}get ok(){return this[Ul].status>=200&&this[Ul].status<300}get redirected(){return this[Ul].counter>0}get headers(){return this[Ul].headers}get httpVersion(){return this[Ul].httpVersion}get decoded(){return this[Ul].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Kpt(this),{...this[Ul]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(OF.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});SLe.exports={Response:OF}});var CLe=P((F4r,ILe)=>{"use strict";var tft=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),rft=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),nft=new Set([500,502,503,504]),ift={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},oft={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function tb(t){let e=parseInt(t,10);return isFinite(e)?e:0}function sft(t){return t?nft.has(t.status):!0}function Fne(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function aft(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}ILe.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Fne(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=Fne(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":aft(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&rft.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||tft.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=Fne(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)ift[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return tb(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return tb(this._rescc["s-maxage"])}if(this._rescc["max-age"])return tb(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+tb(this._rescc["stale-if-error"]),n=e+tb(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+tb(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+tb(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&sft(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!oft[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var PLe=P((U4r,ALe)=>{"use strict";var cft=CLe(),{Headers:uft}=VS(),wLe=t=>({url:t.url,method:t.method,headers:t.headers.plain()}),RLe=t=>({status:t.status,headers:t.headers.plain()}),Une=class{constructor(e,r,n){this.policy=new cft(wLe(e),RLe(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(wLe(e))}responseHeaders(e){return new uft(this.policy.responseHeaders(RLe(e)))}timeToLive(){return this.policy.timeToLive()}};ALe.exports=Une});var kLe=P((B4r,DLe)=>{"use strict";var{Readable:lft}=require("stream"),{Headers:NLe}=VS(),{Response:dft}=Mne(),H0=Symbol("CacheableResponse internals"),pft=t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),Bne=class t extends dft{constructor(e,r){super(e,r);let n=new NLe(r.headers);this[H0]={headers:n,bufferedBody:e}}get headers(){return this[H0].headers}set headers(e){if(e instanceof NLe)this[H0].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return lft.from(this[H0].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[H0].bufferedBody}async arrayBuffer(){return pft(this[H0].bufferedBody)}async text(){return this[H0].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a}=this;return new t(this[H0].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:s,counter:a})}get[Symbol.toStringTag](){return this.constructor.name}},fft=async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:u}=t;return new Bne(e,{url:r,status:n,statusText:i,headers:o,httpVersion:s,decoded:a,counter:u})};DLe.exports={cacheableResponse:fft}});var MF=P((q4r,LLe)=>{"use strict";var qne=class extends Error{get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};LLe.exports={RequestAbortedError:qne}});var BLe=P((G4r,ULe)=>{"use strict";var MLe=require("http"),FLe=require("https"),{Readable:mft}=require("stream"),xm=ol()("helix-fetch:h1"),{RequestAbortedError:OLe}=MF(),{decodeStream:hft}=_m(),gft=(t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new FLe.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new MLe.Agent(n),r.httpAgent):void 0},vft=t=>{t.h1={}},_ft=async({h1:t})=>{t.httpAgent&&(xm("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(xm("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},yft=(t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:u}=t,c=e?hft(n,u,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:s,httpVersionMinor:a,headers:u,readable:c,decoded:!!(e&&c!==t)}},bft=async(t,e,r)=>{let{request:n}=e.protocol==="https:"?FLe:MLe,i=gft(t,e.protocol),o={...r,agent:i},{socket:s,body:a}=o;return s&&(delete o.socket,s.assigned||(s.assigned=!0,i?o.agent=new Proxy(i,{get:(u,c)=>c==="createConnection"&&!s.inUse?(l,d)=>{xm(`agent reusing socket #${s.id} (${s.servername})`),s.inUse=!0,d(null,s)}:u[c]}):o.createConnection=(u,c)=>{xm(`reusing socket #${s.id} (${s.servername})`),s.inUse=!0,c(null,s)})),new Promise((u,c)=>{xm(`${o.method} ${e.href}`);let l,{signal:d}=o,p=()=>{d.removeEventListener("abort",p),s&&!s.inUse&&(xm(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),c(new OLe),l&&l.abort()};if(d){if(d.aborted){c(new OLe);return}d.addEventListener("abort",p)}l=n(e,o),l.once("response",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(xm(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),u(yft(f,o.decode,c))}),l.once("error",f=>{d&&d.removeEventListener("abort",p),s&&!s.inUse&&(xm(`discarding redundant socket used for ALPN: #${s.id} ${s.servername}`),s.destroy()),l.aborted||(xm(`${o.method} ${e.href} failed with: ${f.message}`),l.abort(),c(f))}),a instanceof mft?a.pipe(l):(a&&l.write(a),l.end())})};ULe.exports={request:bft,setupContext:vft,resetContext:_ft}});var jLe=P((H4r,HLe)=>{"use strict";var{connect:xft,constants:Eft}=require("http2"),{Readable:Tft}=require("stream"),Mn=ol()("helix-fetch:h2"),{RequestAbortedError:qLe}=MF(),{decodeStream:Sft}=_m(),{NGHTTP2_CANCEL:rP}=Eft,Ift=5*60*1e3,Cft=5e3,wft=t=>{t.h2={sessionCache:{}}},Rft=async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),Mn(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),GLe=(t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let s=r?Sft(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:s,decoded:!!(r&&s!==e)}},Aft=(t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:s,pushHandler:a,pushedStreamIdleTimeout:u=Cft}}}=t,c=i[":path"],l=`${e}${c}`;Mn(`received PUSH_PROMISE: ${l}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),s&&s(l,i,()=>{n.close(rP)}),n.on("push",(d,p)=>{Mn(`received push headers for ${e}${c}, stream #${n.id}, headers: ${JSON.stringify(d)}, flags: ${p}`),n.setTimeout(u,()=>{Mn(`closing pushed stream #${n.id} after ${u} ms of inactivity`),n.close(rP)}),a&&a(l,i,GLe(d,n,r))}),n.on("aborted",()=>{Mn(`pushed stream #${n.id} aborted`)}),n.on("error",d=>{Mn(`pushed stream #${n.id} encountered error: ${d}`)}),n.on("frameError",(d,p,f)=>{Mn(`pushed stream #${n.id} encountered frameError: type: ${d}, code: ${p}, id: ${f}`)})},Pft=async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:s}=e,a=`${i}${o}${s}`,{options:{h2:u={}},h2:{sessionCache:c}}=t,{idleSessionTimeout:l=Ift,pushPromiseHandler:d,pushHandler:p}=u,f={...r},{method:m,headers:h,socket:g,body:v,decode:_}=f;return g&&delete f.socket,h.host&&(h[":authority"]=h.host,delete h.host),new Promise((y,E)=>{let x=c[n];if(!x||x.closed||x.destroyed){let L=!(t.options.rejectUnauthorized===!1||u.rejectUnauthorized===!1),ve={...u,rejectUnauthorized:L};g&&!g.inUse&&(ve.createConnection=()=>(Mn(`reusing socket #${g.id} (${g.servername})`),g.inUse=!0,g)),x=xft(n,{...ve,settings:{enablePush:!!(d||p)}}),x.setMaxListeners(1e3),x.setTimeout(l,()=>{Mn(`closing session ${n} after ${l} ms of inactivity`),x.close()}),x.once("connect",()=>{Mn(`session ${n} established`),Mn(`caching session ${n}`),c[n]=x}),x.on("localSettings",D=>{Mn(`session ${n} localSettings: ${JSON.stringify(D)}`)}),x.on("remoteSettings",D=>{Mn(`session ${n} remoteSettings: ${JSON.stringify(D)}`)}),x.once("close",()=>{Mn(`session ${n} closed`),c[n]===x&&(Mn(`discarding cached session ${n}`),delete c[n])}),x.once("error",D=>{Mn(`session ${n} encountered error: ${D}`),c[n]===x&&(Mn(`discarding cached session ${n}`),delete c[n])}),x.on("frameError",(D,R,k)=>{Mn(`session ${n} encountered frameError: type: ${D}, code: ${R}, id: ${k}`)}),x.once("goaway",(D,R,k)=>{Mn(`session ${n} received GOAWAY frame: errorCode: ${D}, lastStreamID: ${R}, opaqueData: ${k?k.toString():void 0}`)}),x.on("stream",(D,R,k)=>{Aft(t,n,_,D,R,k)})}else g&&g.id!==x.socket.id&&!g.inUse&&(Mn(`discarding redundant socket used for ALPN: #${g.id} ${g.servername}`),g.destroy());Mn(`${m} ${e.host}${a}`);let S,{signal:O}=f,U=()=>{O.removeEventListener("abort",U),E(new qLe),S&&S.close(rP)};if(O){if(O.aborted){E(new qLe);return}O.addEventListener("abort",U)}let W=L=>{Mn(`session ${n} encountered error during ${f.method} ${e.href}: ${L}`),E(L)};x.once("error",W),S=x.request({":method":m,":path":a,...h}),S.once("response",L=>{x.off("error",W),O&&O.removeEventListener("abort",U),y(GLe(L,S,f.decode,E))}),S.once("error",L=>{x.off("error",W),O&&O.removeEventListener("abort",U),S.rstCode!==rP&&(Mn(`${f.method} ${e.href} failed with: ${L.message}`),S.close(rP),E(L))}),S.once("frameError",(L,ve,J)=>{x.off("error",W),Mn(`encountered frameError during ${f.method} ${e.href}: type: ${L}, code: ${ve}, id: ${J}`)}),S.on("push",(L,ve)=>{Mn(`received 'push' event: headers: ${JSON.stringify(L)}, flags: ${ve}`)}),v instanceof Tft?v.pipe(S):(v&&S.write(v),S.end())})};HLe.exports={request:Pft,setupContext:wft,resetContext:Rft}});var zLe=P((j4r,VLe)=>{"use strict";var{EventEmitter:Nft}=require("events"),Dft=()=>{let t={},e=new Nft;return e.setMaxListeners(0),{acquire:r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))};e.on(r,i)}),release:(r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))}}};VLe.exports=Dft});var YLe=P((V4r,kft)=>{kft.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var QLe=P((z4r,XLe)=>{"use strict";var{Readable:Lft}=require("stream"),Oft=require("tls"),{types:{isAnyArrayBuffer:Mft}}=require("util"),Fft=Ane(),Gne=ol()("helix-fetch:core"),{RequestAbortedError:FF}=MF(),Hne=BLe(),UF=jLe(),Uft=zLe(),{isPlainObject:Bft}=_m(),{isFormData:qft,FormDataSerializer:Gft}=tP(),{version:Hft}=YLe(),jne="h2",Vne="h2c",zne="http/1.0",rb="http/1.1",jft=100,Vft=60*60*1e3,zft=[jne,rb,zne],Yft=`helix-fetch/${Hft}`,$ft={method:"GET",compress:!0,decode:!0},$Le=0,WLe=Uft(),KLe=(t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,s=()=>{i.removeEventListener("abort",s);let c=new FF;n(c),o&&o.destroy(c)};if(i){if(i.aborted){n(new FF);return}i.addEventListener("abort",s)}let a=+t.port||443,u=c=>{i&&i.removeEventListener("abort",s),c instanceof FF||(Gne(`connecting to ${t.hostname}:${a} failed with: ${c.message}`),n(c))};o=Oft.connect(a,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",s),o.off("error",u),$Le+=1,o.id=$Le,o.secureConnecting=!1,Gne(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",u)}),Wft=async(t,e)=>{let r=await WLe.acquire(t.origin);try{return r||(r=await KLe(t,e)),r}finally{WLe.release(t.origin,r)}},Kft=async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=rb,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Vne,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:s={},h2:a={}}}=t,u=!(o===!1||s.rejectUnauthorized===!1||a.rejectUnauthorized===!1),c={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:u};t.options.ca&&(c.ca=t.options.ca);let l=await Wft(e,c);return i=l.alpnProtocol,i||(i=rb),t.alpnCache.set(n,i),{protocol:i,socket:l}},Xft=t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},Qft=async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let s={...r,host:e.host,hostname:e.hostname,port:o},a=await t(s);if(i){let c={...s,ALPNProtocols:n};c.socket=a,c.servername=s.host;let l=await KLe(e,c);return{protocol:l.alpnProtocol||rb,socket:l}}return{protocol:a.alpnProtocol||rb,socket:a}},Jft=async(t,e,r)=>{let n=new URL(e),i={...$ft,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=Xft(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(qft(i.body)){let c=new Gft(i.body);o=c.contentType(),i.body=c.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(c.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":Bft(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Mft(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Lft||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:s}=i,{protocol:a,socket:u=null}=t.socketFactory?await Qft(t.socketFactory,n,i,t.alpnProtocols):await Kft(t,n,s);switch(Gne(`${n.host} -> ${a}`),a){case jne:try{return await UF.request(t,n,u?{...i,socket:u}:i)}catch(c){let{code:l,message:d}=c;throw l==="ERR_HTTP2_ERROR"&&d==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),c}case Vne:return UF.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),u?{...i,socket:u}:i);case zne:case rb:return Hne.request(t,n,u?{...i,socket:u}:i);default:throw new TypeError(`unsupported protocol: ${a}`)}},Zft=async t=>(t.alpnCache.clear(),Promise.all([Hne.resetContext(t),UF.resetContext(t)])),emt=t=>{let{options:{alpnProtocols:e=zft,alpnCacheTTL:r=Vft,alpnCacheSize:n=jft,userAgent:i=Yft,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new Fft({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,Hne.setupContext(t),UF.setupContext(t)};XLe.exports={request:Jft,setupContext:emt,resetContext:Zft,RequestAbortedError:FF,ALPN_HTTP2:jne,ALPN_HTTP2C:Vne,ALPN_HTTP1_1:rb,ALPN_HTTP1_0:zne}});var ZLe=P((Y4r,JLe)=>{"use strict";var tmt=ol()("helix-fetch:core"),{request:rmt,setupContext:nmt,resetContext:imt,RequestAbortedError:omt,ALPN_HTTP2:smt,ALPN_HTTP2C:amt,ALPN_HTTP1_1:cmt,ALPN_HTTP1_0:umt}=QLe(),Yne=class t{constructor(e){this.options={...e||{}},nmt(this)}api(){return{request:async(e,r)=>this.request(e,r),context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),reset:async()=>this.reset(),RequestAbortedError:omt,ALPN_HTTP2:smt,ALPN_HTTP2C:amt,ALPN_HTTP1_1:cmt,ALPN_HTTP1_0:umt}}async request(e,r){return rmt(this,e,r)}setCA(e){this.options.ca=e}async reset(){return tmt("resetting context"),imt(this)}};JLe.exports=new Yne().api()});var i3e=P(($4r,n3e)=>{"use strict";var{EventEmitter:lmt}=require("events"),{Readable:nP}=require("stream"),$ne=ol()("helix-fetch"),dmt=Ane(),{Body:pmt}=AF(),{Headers:Qne}=VS(),{Request:nb}=TLe(),{Response:Kne}=Mne(),{FetchBaseError:fmt,FetchError:iP,AbortError:BF}=Dne(),{AbortController:mmt,AbortSignal:hmt,TimeoutSignal:gmt}=kne(),vmt=PLe(),{cacheableResponse:_mt}=kLe(),{sizeof:ymt}=_m(),{isFormData:bmt}=tP(),{context:xmt,RequestAbortedError:Emt}=ZLe(),e3e=["GET","HEAD"],Tmt=500,Smt=100*1024*1024,Wne="push",t3e=async(t,e,r)=>{let{request:n}=t.context,i=e instanceof nb&&typeof r>"u"?e:new nb(e,r),{method:o,body:s,signal:a,compress:u,decode:c,follow:l,redirect:d,init:{body:p}}=i,f;if(a&&a.aborted){let x=new BF("The operation was aborted.");throw i.init.body instanceof nP&&i.init.body.destroy(x),x}try{f=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:p&&!(p instanceof nP)&&!bmt(p)?p:s,compress:u,decode:c,follow:l,redirect:d,signal:a})}catch(x){throw p instanceof nP&&p.destroy(x),x instanceof TypeError?x:x instanceof Emt?new BF("The operation was aborted."):new iP(x.message,"system",x)}let m=()=>{a.removeEventListener("abort",m);let x=new BF("The operation was aborted.");i.init.body instanceof nP&&i.init.body.destroy(x),f.readable.emit("error",x)};a&&a.addEventListener("abort",m);let{statusCode:h,statusText:g,httpVersion:v,headers:_,readable:y,decoded:E}=f;if([301,302,303,307,308].includes(h)){let{location:x}=_,S=x==null?null:new URL(x,i.url);switch(i.redirect){case"manual":break;case"error":throw a&&a.removeEventListener("abort",m),new iP(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(S===null)break;if(i.counter>=i.follow)throw a&&a.removeEventListener("abort",m),new iP(`maximum redirect reached at: ${i.url}`,"max-redirect");let O={headers:new Qne(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(h!==303&&i.body&&i.init.body instanceof nP)throw a&&a.removeEventListener("abort",m),new iP("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(h===303||(h===301||h===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),a&&a.removeEventListener("abort",m),t3e(t,new nb(S,O))}default:}}return a&&(y.once("end",()=>{a.removeEventListener("abort",m)}),y.once("error",()=>{a.removeEventListener("abort",m)})),new Kne(y,{url:i.url,status:h,statusText:g,headers:_,httpVersion:v,decoded:E,counter:i.counter})},r3e=async(t,e,r)=>{if(t.options.maxCacheSize===0||!e3e.includes(e.method))return r;let n=new vmt(e,r,{shared:!1});if(n.storable()){let i=await _mt(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},Imt=async(t,e,r)=>{let n=new nb(e,r);if(t.options.maxCacheSize!==0&&e3e.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:s,response:a}=t.cache.get(n.url)||{};if(s&&s.satisfiesWithoutRevalidation(n)){a.headers=new Qne(s.responseHeaders(a));let u=a.clone();return u.fromCache=!0,u}}let o=await t3e(t,n);return n.cache!=="no-store"?r3e(t,n,o):o},Cmt=(t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},wmt=t=>new gmt(t),Xne=class t{constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:Smt,i=Tmt;n===0&&(n=1,i=1);let o=({response:a},u)=>ymt(a);this.cache=new dmt({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new lmt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:s}=this.options.h2;s&&(this.options.h2.pushPromiseHandler=(a,u,c)=>{let l={...u};Object.keys(l).filter(d=>d.startsWith(":")).forEach(d=>delete l[d]),this.pushPromiseHandler(a,l,c)},this.options.h2.pushHandler=(a,u,c)=>{let l={...u};Object.keys(l).filter(v=>v.startsWith(":")).forEach(v=>delete l[v]);let{statusCode:d,statusText:p,httpVersion:f,headers:m,readable:h,decoded:g}=c;this.pushHandler(a,l,new Kne(h,{url:a,status:d,statusText:p,headers:m,httpVersion:f,decoded:g}))}),this.context=xmt(this.options)}api(){return{fetch:async(e,r)=>this.fetch(e,r),Body:pmt,Headers:Qne,Request:nb,Response:Kne,AbortController:mmt,AbortSignal:hmt,FetchBaseError:fmt,FetchError:iP,AbortError:BF,context:(e={})=>new t(e).api(),setCA:e=>this.setCA(e),noCache:(e={})=>new t({...e,maxCacheSize:0}).api(),h1:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAlive:(e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),h1NoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),keepAliveNoCache:(e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),reset:async()=>this.context.reset(),onPush:e=>this.onPush(e),offPush:e=>this.offPush(e),createUrl:Cmt,timeoutSignal:wmt,clearCache:()=>this.clearCache(),cacheStats:()=>this.cacheStats(),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Imt(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Wne,e)}offPush(e){return this.eventEmitter.off(Wne,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){$ne(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new nb(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&($ne(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){$ne(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await r3e(this,new nb(e,{headers:r}),n);this.eventEmitter.emit(Wne,e,i)}};n3e.exports=new Xne().api()});var s3e=P((W4r,o3e)=>{"use strict";o3e.exports=i3e()});var Umt={};Fn(Umt,{activate:()=>Lmt,createExtensionContext:()=>_3e,onDeactivate:()=>y3e});module.exports=ki(Umt);var tU=we(xn());qie().install();var Fr=require("vscode");var oB=require("events");var Hu;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(Hu||={});var Gie=se("instantiationService");function bOe(t,e,r){e[Hu.DI_TARGET]===e?e[Hu.DI_DEPENDENCIES].push({id:t,index:r}):(e[Hu.DI_DEPENDENCIES]=[{id:t,index:r}],e[Hu.DI_TARGET]=e)}function se(t){if(Hu.serviceIds.has(t))return Hu.serviceIds.get(t);let e=function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");bOe(e,r,i)};return e.toString=()=>t,Hu.serviceIds.set(t,e),e}var IU=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?hP.isErrorNoTelemetry(e)?new hP(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},xOe=new IU;function gP(t){wU(t)||xOe.onUnexpectedError(t)}var CU="Canceled";function wU(t){return t instanceof Gl?!0:t instanceof Error&&t.name===CU&&t.message===CU}var Gl=class extends Error{constructor(){super(CU),this.name=this.message}};function Vo(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}function Hie(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}function vP(t){return t?t.message?t.message:t.stack?t.stack.split(`
`)[0]:String(t):"Error"}var hP=class t extends Error{constructor(r){super(r);this.name="CodeExpectedError"}static fromError(r){if(r instanceof t)return r;let n=new t;return n.message=r.message,n.stack=r.stack,n}static isErrorNoTelemetry(r){return r.name==="CodeExpectedError"}},ju=class t extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function RU(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}function Vie(t,e,r=t.length-1){for(let n=r;n>=0;n--){let i=t[n];if(e(i))return n}return-1}function AU(t,e){let r=tI(t,e);return r===-1?void 0:t[r]}function tI(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?i=s+1:o=s}return i-1}function _P(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(t[s])?o=s:i=s+1}return i}var jie=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=tI(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};function Yie(t,e){let r=0,n=t-1;for(;r<=n;){let i=(r+n)/2|0,o=e(i);if(o<0)r=i+1;else if(o>0)n=i-1;else return i}return-(r+1)}function Br(t){return t.filter(e=>!!e)}function yP(t,e){let r;if(typeof e=="number"){let n=e;r=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else r=Math.random;for(let n=t.length-1;n>0;n-=1){let i=Math.floor(r()*(n+1)),o=t[n];t[n]=t[i],t[i]=o}}var $ie;(a=>{function t(u){return u<0}a.isLessThan=t;function e(u){return u<=0}a.isLessThanOrEqual=e;function r(u){return u>0}a.isGreaterThan=r;function n(u){return u===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})($ie||={});function Wie(t,e){return(r,n)=>e(t(r),t(n))}var Kie=(t,e)=>t-e;var zie=class t{constructor(e){this.iterate=e}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||$ie.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function Xie(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}var PU=class{constructor(e,r){this.uri=e;this.value=r}};function SOe(t){return Array.isArray(t)}var IOe,hi=class t{constructor(e,r){this[IOe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(SOe(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{this.defaultToKey=e=>e.toString()}set(e,r){return this.map.set(this.toKey(e),new PU(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(IOe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},COe,bP=class{constructor(e,r){this[COe]="ResourceSet";!e||typeof e=="function"?this._map=new hi(e):(this._map=new hi(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(COe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var wOe,NU=class{constructor(){this[wOe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(wOe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},lb=class extends NU{constructor(r,n=1){super();this._limit=r,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,n=2){return super.get(r,n)}peek(r){return super.get(r,0)}set(r,n){return super.set(r,n,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};var xP=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var DU;(_=>{function t(y){return y&&typeof y=="object"&&typeof y[Symbol.iterator]=="function"}_.is=t;let e=Object.freeze([]);function r(){return e}_.empty=r;function*n(y){yield y}_.single=n;function i(y){return t(y)?y:n(y)}_.wrap=i;function o(y){return y||e}_.from=o;function*s(y){for(let E=y.length-1;E>=0;E--)yield y[E]}_.reverse=s;function a(y){return!y||y[Symbol.iterator]().next().done===!0}_.isEmpty=a;function u(y){return y[Symbol.iterator]().next().value}_.first=u;function c(y,E){for(let x of y)if(E(x))return!0;return!1}_.some=c;function l(y,E){for(let x of y)if(E(x))return x}_.find=l;function*d(y,E){for(let x of y)E(x)&&(yield x)}_.filter=d;function*p(y,E){let x=0;for(let S of y)yield E(S,x++)}_.map=p;function*f(...y){for(let E of y)yield*E}_.concat=f;function m(y,E,x){let S=x;for(let O of y)S=E(S,O);return S}_.reduce=m;function*h(y,E,x=y.length){for(E<0&&(E+=y.length),x<0?x+=y.length:x>y.length&&(x=y.length);E<x;E++)yield y[E]}_.slice=h;function g(y,E=Number.POSITIVE_INFINITY){let x=[];if(E===0)return[x,y];let S=y[Symbol.iterator]();for(let O=0;O<E;O++){let U=S.next();if(U.done)return[x,_.empty()];x.push(U.value)}return[x,{[Symbol.iterator](){return S}}]}_.consume=g;async function v(y){let E=[];for await(let x of y)E.push(x);return Promise.resolve(E)}_.asyncToArray=v})(DU||={});var ROe=!1,db=null,Qie=class t{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let u=new Map,c=[...this.livingDisposables.values()].filter(d=>d.source!==null&&!this.getRootParent(d,u).isSingleton);if(c.length===0)return;let l=new Set(c.map(d=>d.value));if(n=c.filter(d=>!(d.parent&&l.has(d.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(u){function c(d,p){for(;d.length>0&&p.some(f=>typeof f=="string"?f===d[0]:d[0].match(f));)d.shift()}let l=u.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return c(l,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),l.reverse()}let o=new xP;for(let u of n){let c=i(u);for(let l=0;l<=c.length;l++)o.add(c.slice(0,l).join(`
`),u)}n.sort(Wie(u=>u.idx,Kie));let s="",a=0;for(let u of n.slice(0,e)){a++;let c=i(u),l=[];for(let d=0;d<c.length;d++){let p=c[d];p=`(shared with ${o.get(c.slice(0,d+1).join(`
`)).size}/${n.length} leaks) at ${p}`;let m=o.get(c.slice(0,d).join(`
`)),h=Xie([...m].map(g=>i(g)[d]),g=>g);delete h[c[d]];for(let[g,v]of Object.entries(h))l.unshift(`    - stacktraces of ${v.length} other leaks continue with ${g}`);l.unshift(p)}s+=`


==================== Leaking disposable ${a}/${n.length}: ${u.value.constructor.name} ====================
${l.join(`
`)}
============================================================

`}return n.length>e&&(s+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:s}}};function AOe(t){db=t}if(ROe){let t="__is_disposable_tracked__";AOe(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ji.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ji.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function EP(t){return db?.trackDisposable(t),t}function TP(t){db?.markAsDisposed(t)}function kU(t,e){db?.setParent(t,e)}function POe(t,e){if(db)for(let r of t)db.setParent(r,e)}function LU(t){if(DU.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function Jie(...t){let e=Ip(()=>LU(t));return POe(t,e),e}function Ip(t){let e=EP({dispose:RU(()=>{TP(e),t()})});return e}var $r=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;EP(this)}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(TP(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{LU(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return kU(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),kU(e,null))}},Ji=class{constructor(){this._store=new $r;EP(this),kU(this._store,this)}static{this.None=Object.freeze({dispose(){}})}dispose(){TP(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var pb=class{constructor(){this._store=new Map;this._isDisposed=!1;EP(this)}dispose(){TP(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{LU(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,r,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,r)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var Tn=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},rI=class{constructor(){this._first=Tn.Undefined;this._last=Tn.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===Tn.Undefined}clear(){let e=this._first;for(;e!==Tn.Undefined;){let r=e.next;e.prev=Tn.Undefined,e.next=Tn.Undefined,e=r}this._first=Tn.Undefined,this._last=Tn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new Tn(e);if(this._first===Tn.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Tn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Tn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Tn.Undefined&&e.next!==Tn.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===Tn.Undefined&&e.next===Tn.Undefined?(this._first=Tn.Undefined,this._last=Tn.Undefined):e.next===Tn.Undefined?(this._last=this._last.prev,this._last.next=Tn.Undefined):e.prev===Tn.Undefined&&(this._first=this._first.next,this._first.prev=Tn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Tn.Undefined;)yield e.element,e=e.next}};var NOe=globalThis.performance&&typeof globalThis.performance.now=="function",Cm=class t{static create(e){return new t(e)}constructor(e){this._now=NOe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var Zie=!1,DOe=!1,mb;(J=>{J.None=()=>Ji.None;function e(D){if(DOe){let{onDidAddListener:R}=D,k=nI.create(),G=0;D.onDidAddListener=()=>{++G===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),k.print()),R?.()}}}function r(D,R){return p(D,()=>{},0,void 0,!0,void 0,R)}J.defer=r;function n(D){return(R,k=null,G)=>{let M=!1,ce;return ce=D(V=>{if(!M)return ce?ce.dispose():M=!0,R.call(k,V)},null,G),M&&ce.dispose(),ce}}J.once=n;function i(D,R,k){return l((G,M=null,ce)=>D(V=>G.call(M,R(V)),null,ce),k)}J.map=i;function o(D,R,k){return l((G,M=null,ce)=>D(V=>{R(V),G.call(M,V)},null,ce),k)}J.forEach=o;function s(D,R,k){return l((G,M=null,ce)=>D(V=>R(V)&&G.call(M,V),null,ce),k)}J.filter=s;function a(D){return D}J.signal=a;function u(...D){return(R,k=null,G)=>{let M=Jie(...D.map(ce=>ce(V=>R.call(k,V))));return d(M,G)}}J.any=u;function c(D,R,k,G){let M=k;return i(D,ce=>(M=R(M,ce),M),G)}J.reduce=c;function l(D,R){let k,G={onWillAddFirstListener(){k=D(M.fire,M)},onDidRemoveLastListener(){k?.dispose()}};R||e(G);let M=new ho(G);return R?.add(M),M.event}function d(D,R){return R instanceof Array?R.push(D):R&&R.add(D),D}function p(D,R,k=100,G=!1,M=!1,ce,V){let _e,ze,lt,Tt=0,St,Ye={leakWarningThreshold:ce,onWillAddFirstListener(){_e=D(Ht=>{Tt++,ze=R(ze,Ht),G&&!lt&&(ft.fire(ze),ze=void 0),St=()=>{let Te=ze;ze=void 0,lt=void 0,(!G||Tt>1)&&ft.fire(Te),Tt=0},typeof k=="number"?(clearTimeout(lt),lt=setTimeout(St,k)):lt===void 0&&(lt=0,queueMicrotask(St))})},onWillRemoveListener(){M&&Tt>0&&St?.()},onDidRemoveLastListener(){St=void 0,_e.dispose()}};V||e(Ye);let ft=new ho(Ye);return V?.add(ft),ft.event}J.debounce=p;function f(D,R=0,k){return J.debounce(D,(G,M)=>G?(G.push(M),G):[M],R,void 0,!0,void 0,k)}J.accumulate=f;function m(D,R=(G,M)=>G===M,k){let G=!0,M;return s(D,ce=>{let V=G||!R(ce,M);return G=!1,M=ce,V},k)}J.latch=m;function h(D,R,k){return[J.filter(D,R,k),J.filter(D,G=>!R(G),k)]}J.split=h;function g(D,R=!1,k=[],G){let M=k.slice(),ce=D(ze=>{M?M.push(ze):_e.fire(ze)});G&&G.add(ce);let V=()=>{M?.forEach(ze=>_e.fire(ze)),M=null},_e=new ho({onWillAddFirstListener(){ce||(ce=D(ze=>_e.fire(ze)),G&&G.add(ce))},onDidAddFirstListener(){M&&(R?setTimeout(V):V())},onDidRemoveLastListener(){ce&&ce.dispose(),ce=null}});return G&&G.add(_e),_e.event}J.buffer=g;function v(D,R){return(G,M,ce)=>{let V=R(new y);return D(function(_e){let ze=V.evaluate(_e);ze!==_&&G.call(M,ze)},void 0,ce)}}J.chain=v;let _=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(R){return this.steps.push(R),this}forEach(R){return this.steps.push(k=>(R(k),k)),this}filter(R){return this.steps.push(k=>R(k)?k:_),this}reduce(R,k){let G=k;return this.steps.push(M=>(G=R(G,M),G)),this}latch(R=(k,G)=>k===G){let k=!0,G;return this.steps.push(M=>{let ce=k||!R(M,G);return k=!1,G=M,ce?M:_}),this}evaluate(R){for(let k of this.steps)if(R=k(R),R===_)break;return R}}function E(D,R,k=G=>G){let G=(..._e)=>V.fire(k(..._e)),M=()=>D.on(R,G),ce=()=>D.removeListener(R,G),V=new ho({onWillAddFirstListener:M,onDidRemoveLastListener:ce});return V.event}J.fromNodeEventEmitter=E;function x(D,R,k=G=>G){let G=(..._e)=>V.fire(k(..._e)),M=()=>D.addEventListener(R,G),ce=()=>D.removeEventListener(R,G),V=new ho({onWillAddFirstListener:M,onDidRemoveLastListener:ce});return V.event}J.fromDOMEventEmitter=x;function S(D){return new Promise(R=>n(D)(R))}J.toPromise=S;function O(D){let R=new ho;return D.then(k=>{R.fire(k)},()=>{R.fire(void 0)}).finally(()=>{R.dispose()}),R.event}J.fromPromise=O;function U(D,R,k){return R(k),D(G=>R(G))}J.runAndSubscribe=U;class W{constructor(R,k){this._observable=R;this._counter=0;this._hasChanged=!1;let G={onWillAddFirstListener:()=>{R.addObserver(this)},onDidRemoveLastListener:()=>{R.removeObserver(this)}};k||e(G),this.emitter=new ho(G),k&&k.add(this.emitter)}beginUpdate(R){this._counter++}handlePossibleChange(R){}handleChange(R,k){this._hasChanged=!0}endUpdate(R){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function L(D,R){return new W(D,R).emitter.event}J.fromObservable=L;function ve(D){return(R,k,G)=>{let M=0,ce=!1,V={beginUpdate(){M++},endUpdate(){M--,M===0&&(D.reportChanges(),ce&&(ce=!1,R.call(k)))},handlePossibleChange(){},handleChange(){ce=!0}};D.addObserver(V),D.reportChanges();let _e={dispose(){D.removeObserver(V)}};return G instanceof $r?G.add(_e):Array.isArray(G)&&G.push(_e),_e}}J.fromObservableLight=ve})(mb||={});var OU=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new Cm,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},eoe=-1;var MU=class{constructor(e,r=Math.random().toString(18).slice(2,5)){this.threshold=e;this.name=r;this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let o,s=0;for(let[a,u]of this._stacks)(!o||s<u)&&(o=a,s=u);console.warn(`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${s}):`),console.warn(o)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}},nI=class t{constructor(e){this.value=e}static create(){return new t(new Error().stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},kOe=0,fb=class{constructor(e){this.value=e;this.id=kOe++}},LOe=2,OOe=(t,e)=>{if(t instanceof fb)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},ho=class{constructor(e){this._size=0;this._options=e,this._leakageMon=eoe>0||this._options?.leakWarningThreshold?new MU(this._options?.leakWarningThreshold??eoe):void 0,this._perfMon=this._options?._profName?new OU(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(Zie){let e=this._listeners;queueMicrotask(()=>{OOe(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Ji.None;if(this._disposed)return Ji.None;r&&(e=e.bind(r));let i=new fb(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=nI.create(),o=this._leakageMon.check(i.stack,this._size+1)),Zie&&(i.stack=s??nI.create()),this._listeners?this._listeners instanceof fb?(this._deliveryQueue??=new FU,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=Ip(()=>{o?.(),this._removeListener(i)});return n instanceof $r?n.add(a):Array.isArray(n)&&n.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*LOe<=r.length){let o=0;for(let s=0;s<r.length;s++)r[s]?r[o++]=r[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||gP;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof fb)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var FU=class{constructor(){this.i=-1;this.end=0}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var toe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),zo;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof hb?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:mb.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:toe})})(zo||={});var hb=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?toe:(this._emitter||(this._emitter=new ho),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},gb=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new hb),this._token}cancel(){this._token?this._token instanceof hb&&this._token.cancel():this._token=zo.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof hb&&this._token.dispose():this._token=zo.None}};function MOe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}function roe(t,e,...r){return MOe(e,r)}var vb="en",wP=!1,RP=!1,iI=!1,UOe=!1,ioe=!1,UU=!1,BOe=!1,qOe=!1,GOe=!1,HOe=!1,SP,IP=vb,noe=vb,jOe,Cp,wp=globalThis,Za;typeof wp.vscode<"u"&&typeof wp.vscode.process<"u"?Za=wp.vscode.process:typeof process<"u"&&(Za=process);var ooe=typeof Za?.versions?.electron=="string",VOe=ooe&&Za?.type==="renderer";if(typeof Za=="object"){wP=Za.platform==="win32",RP=Za.platform==="darwin",iI=Za.platform==="linux",UOe=iI&&!!Za.env.SNAP&&!!Za.env.SNAP_REVISION,BOe=ooe,GOe=!!Za.env.CI||!!Za.env.BUILD_ARTIFACTSTAGINGDIRECTORY,SP=vb,IP=vb;let t=Za.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];SP=e.locale,noe=e.osLocale,IP=r||vb,jOe=e._translationsConfigFile}catch{}ioe=!0}else typeof navigator=="object"&&!VOe?(Cp=navigator.userAgent,wP=Cp.indexOf("Windows")>=0,RP=Cp.indexOf("Macintosh")>=0,qOe=(Cp.indexOf("Macintosh")>=0||Cp.indexOf("iPad")>=0||Cp.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,iI=Cp.indexOf("Linux")>=0,HOe=Cp?.indexOf("Mobi")>=0,UU=!0,SP=(roe({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),void 0)||vb,IP=SP,noe=navigator.language):console.error("Unable to resolve platform.");var CP=0;RP?CP=1:wP?CP=3:iI&&(CP=2);var jl=wP,soe=RP,aoe=iI;var coe=ioe;var uoe=UU,zOe=UU&&typeof wp.importScripts=="function",loe=zOe?wp.origin:void 0;var doe=CP,Hl=Cp,wm=IP,YOe;(n=>{function t(){return wm}n.value=t;function e(){return wm.length===2?wm==="en":wm.length>=3?wm[0]==="e"&&wm[1]==="n"&&wm[2]==="-":!1}n.isDefaultVariant=e;function r(){return wm==="en"}n.isDefault=r})(YOe||={});var $Oe=typeof wp.postMessage=="function"&&!wp.importScripts,poe=(()=>{if($Oe){let t=[];wp.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),wp.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var WOe=!!(Hl&&Hl.indexOf("Chrome")>=0),wht=!!(Hl&&Hl.indexOf("Firefox")>=0),Rht=!!(!WOe&&Hl&&Hl.indexOf("Safari")>=0),Aht=!!(Hl&&Hl.indexOf("Edg/")>=0),Pht=!!(Hl&&Hl.indexOf("Android")>=0);var K0,BU=globalThis.vscode;if(typeof BU<"u"&&typeof BU.process<"u"){let t=BU.process;K0={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?K0={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:K0={get platform(){return jl?"win32":soe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var oI=K0.cwd,foe=K0.env,moe=K0.platform,kht=K0.arch;var QOe=65,JOe=97,ZOe=90,e5e=122,Pm=46,go=47,ma=92,Rm=58,t5e=63,AP=class extends Error{constructor(r,n,i){let o;typeof n=="string"&&n.indexOf("not ")===0?(o="must not be",n=n.replace(/^not /,"")):o="must be";let s=r.indexOf(".")!==-1?"property":"argument",a=`The "${r}" ${s} ${o} of type ${n}`;a+=`. Received type ${typeof i}`;super(a);this.code="ERR_INVALID_ARG_TYPE"}};function r5e(t,e){if(t===null||typeof t!="object")throw new AP(e,"Object",t)}function ni(t,e){if(typeof t!="string")throw new AP(e,"string",t)}var ha=moe==="win32";function Ut(t){return t===go||t===ma}function qU(t){return t===go}function Am(t){return t>=QOe&&t<=ZOe||t>=JOe&&t<=e5e}function PP(t,e,r,n){let i="",o=0,s=-1,a=0,u=0;for(let c=0;c<=t.length;++c){if(c<t.length)u=t.charCodeAt(c);else{if(n(u))break;u=go}if(n(u)){if(!(s===c-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Pm||i.charCodeAt(i.length-2)!==Pm){if(i.length>2){let l=i.lastIndexOf(r);l===-1?(i="",o=0):(i=i.slice(0,l),o=i.length-1-i.lastIndexOf(r)),s=c,a=0;continue}else if(i.length!==0){i="",o=0,s=c,a=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(s+1,c)}`:i=t.slice(s+1,c),o=c-s-1;s=c,a=0}else u===Pm&&a!==-1?++a:a=-1}return i}function hoe(t,e){r5e(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}var ii={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ni(o,"path"),o.length===0)continue}else e.length===0?o=oI():(o=foe[`=${e}`]||oI(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===ma)&&(o=`${e}\\`));let s=o.length,a=0,u="",c=!1,l=o.charCodeAt(0);if(s===1)Ut(l)&&(a=1,c=!0);else if(Ut(l))if(c=!0,Ut(o.charCodeAt(1))){let d=2,p=d;for(;d<s&&!Ut(o.charCodeAt(d));)d++;if(d<s&&d!==p){let f=o.slice(p,d);for(p=d;d<s&&Ut(o.charCodeAt(d));)d++;if(d<s&&d!==p){for(p=d;d<s&&!Ut(o.charCodeAt(d));)d++;(d===s||d!==p)&&(u=`\\\\${f}\\${o.slice(p,d)}`,a=d)}}}else a=1;else Am(l)&&o.charCodeAt(1)===Rm&&(u=o.slice(0,2),a=2,s>2&&Ut(o.charCodeAt(2))&&(c=!0,a=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(r=`${o.slice(a)}\\${r}`,n=c,c&&e.length>0)break}return r=PP(r,!n,"\\",Ut),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ni(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return qU(o)?"\\":t;if(Ut(o))if(i=!0,Ut(t.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ut(t.charCodeAt(a));)a++;if(a<e&&a!==u){let c=t.slice(u,a);for(u=a;a<e&&Ut(t.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ut(t.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${t.slice(u)}\\`;a!==u&&(n=`\\\\${c}\\${t.slice(u,a)}`,r=a)}}}else r=1;else Am(o)&&t.charCodeAt(1)===Rm&&(n=t.slice(0,2),r=2,e>2&&Ut(t.charCodeAt(2))&&(i=!0,r=3));let s=r<e?PP(t.slice(r),!i,"\\",Ut):"";return s.length===0&&!i&&(s="."),s.length>0&&Ut(t.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(t){ni(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ut(r)||e>2&&Am(r)&&t.charCodeAt(1)===Rm&&Ut(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let s=t[o];ni(s,"path"),s.length>0&&(e===void 0?e=r=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ut(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ut(r.charCodeAt(1))&&(++i,o>2&&(Ut(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ut(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ii.normalize(e)},relative(t,e){if(ni(t,"from"),ni(e,"to"),t===e)return"";let r=ii.resolve(t),n=ii.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===ma;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===ma;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===ma;)a++;let u=e.length;for(;u-1>a&&e.charCodeAt(u-1)===ma;)u--;let c=u-a,l=s<c?s:c,d=-1,p=0;for(;p<l;p++){let m=t.charCodeAt(i+p);if(m!==e.charCodeAt(a+p))break;m===ma&&(d=p)}if(p!==l){if(d===-1)return n}else{if(c>l){if(e.charCodeAt(a+p)===ma)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>l&&(t.charCodeAt(i+p)===ma?d=p:p===2&&(d=3)),d===-1&&(d=0)}let f="";for(p=i+d+1;p<=o;++p)(p===o||t.charCodeAt(p)===ma)&&(f+=f.length===0?"..":"\\..");return a+=d,f.length>0?`${f}${n.slice(a,u)}`:(n.charCodeAt(a)===ma&&++a,n.slice(a,u))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ii.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===ma){if(e.charCodeAt(1)===ma){let r=e.charCodeAt(2);if(r!==t5e&&r!==Pm)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Am(e.charCodeAt(0))&&e.charCodeAt(1)===Rm&&e.charCodeAt(2)===ma)return`\\\\?\\${e}`;return t},dirname(t){ni(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ut(i)?t:".";if(Ut(i)){if(r=n=1,Ut(t.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ut(t.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&Ut(t.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ut(t.charCodeAt(a));)a++;if(a===e)return t;a!==u&&(r=n=a+1)}}}}else Am(i)&&t.charCodeAt(1)===Rm&&(r=e>2&&Ut(t.charCodeAt(2))?3:2,n=r);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(Ut(t.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ni(e,"ext"),ni(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Am(t.charCodeAt(0))&&t.charCodeAt(1)===Rm&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=r;--o){let u=t.charCodeAt(o);if(Ut(u)){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ut(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ni(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,s=0;t.length>=2&&t.charCodeAt(1)===Rm&&Am(t.charCodeAt(0))&&(e=n=2);for(let a=t.length-1;a>=e;--a){let u=t.charCodeAt(a);if(Ut(u)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),u===Pm?r===-1?r=a:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||i===-1||s===0||s===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:hoe.bind(null,"\\"),parse(t){ni(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ut(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ut(i)){if(n=1,Ut(t.charCodeAt(1))){let d=2,p=d;for(;d<r&&!Ut(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&Ut(t.charCodeAt(d));)d++;if(d<r&&d!==p){for(p=d;d<r&&!Ut(t.charCodeAt(d));)d++;d===r?n=d:d!==p&&(n=d+1)}}}}else if(Am(i)&&t.charCodeAt(1)===Rm){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ut(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,s=n,a=-1,u=!0,c=t.length-1,l=0;for(;c>=n;--c){if(i=t.charCodeAt(c),Ut(i)){if(!u){s=c+1;break}continue}a===-1&&(u=!1,a=c+1),i===Pm?o===-1?o=c:l!==1&&(l=1):o!==-1&&(l=-1)}return a!==-1&&(o===-1||l===0||l===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(s,a):(e.name=t.slice(s,o),e.base=t.slice(s,a),e.ext=t.slice(o,a))),s>0&&s!==n?e.dir=t.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},n5e=(()=>{if(ha){let t=/\\/g;return()=>{let e=oI().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>oI()})(),_r={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:n5e();ni(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===go)}return e=PP(e,!r,"/",qU),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ni(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===go,r=t.charCodeAt(t.length-1)===go;return t=PP(t,!e,"/",qU),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ni(t,"path"),t.length>0&&t.charCodeAt(0)===go},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ni(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":_r.normalize(e)},relative(t,e){if(ni(t,"from"),ni(e,"to"),t===e||(t=_r.resolve(t),e=_r.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,s=e.length-o,a=i<s?i:s,u=-1,c=0;for(;c<a;c++){let d=t.charCodeAt(r+c);if(d!==e.charCodeAt(o+c))break;d===go&&(u=c)}if(c===a)if(s>a){if(e.charCodeAt(o+c)===go)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else i>a&&(t.charCodeAt(r+c)===go?u=c:c===0&&(u=0));let l="";for(c=r+u+1;c<=n;++c)(c===n||t.charCodeAt(c)===go)&&(l+=l.length===0?"..":"/..");return`${l}${e.slice(o+u)}`},toNamespacedPath(t){return t},dirname(t){if(ni(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===go,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===go){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ni(e,"ext"),ni(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,a=-1;for(o=t.length-1;o>=0;--o){let u=t.charCodeAt(o);if(u===go){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===go){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ni(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let s=t.length-1;s>=0;--s){let a=t.charCodeAt(s);if(a===go){if(!i){r=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===Pm?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:hoe.bind(null,"/"),parse(t){ni(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===go,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,u=t.length-1,c=0;for(;u>=n;--u){let l=t.charCodeAt(u);if(l===go){if(!a){o=u+1;break}continue}s===-1&&(a=!1,s=u+1),l===Pm?i===-1?i=u:c!==1&&(c=1):i!==-1&&(c=-1)}if(s!==-1){let l=o===0&&r?1:o;i===-1||c===0||c===1&&i===s-1&&i===o+1?e.base=e.name=t.slice(l,s):(e.name=t.slice(l,i),e.base=t.slice(l,s),e.ext=t.slice(i,s))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};_r.win32=ii.win32=ii;_r.posix=ii.posix=_r;var GU=ha?ii.normalize:_r.normalize,i5e=ha?ii.isAbsolute:_r.isAbsolute,o5e=ha?ii.join:_r.join,goe=ha?ii.resolve:_r.resolve,voe=ha?ii.relative:_r.relative,_oe=ha?ii.dirname:_r.dirname,Lht=ha?ii.basename:_r.basename,Oht=ha?ii.extname:_r.extname,Mht=ha?ii.format:_r.format,Fht=ha?ii.parse:_r.parse,Uht=ha?ii.toNamespacedPath:_r.toNamespacedPath,_b=ha?ii.sep:_r.sep,Bht=ha?ii.delimiter:_r.delimiter;var NP=class{constructor(e){this.fn=e;this.lastCache=void 0;this.lastArgKey=void 0}get(e){let r=JSON.stringify(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this.fn(e)),this.lastCache}};var ga=class{constructor(e){this.executor=e;this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function jU(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Toe(t){return t.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function yb(t){return t.split(/\r\n|\r|\n/)}function Soe(t){for(let e=0,r=t.length;e<r;e++){let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function DP(t,e,r){let n=[],i=0;for(let o of t.matchAll(e)){if(n.push(t.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,n.push(r(o[0],...o.slice(1),o.index,t,o.groups))}return n.push(t.slice(i)),Promise.all(n).then(o=>o.join(""))}function Ioe(t,e){return t<e?-1:t>e?1:0}function s5e(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let u=t.charCodeAt(r),c=e.charCodeAt(i);if(u<c)return-1;if(u>c)return 1}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function Coe(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let u=t.charCodeAt(r),c=e.charCodeAt(i);if(u===c)continue;if(u>=128||c>=128)return s5e(t.toLowerCase(),e.toLowerCase(),r,n,i,o);yoe(u)&&(u-=32),yoe(c)&&(c-=32);let l=u-c;if(l!==0)return l}let s=n-r,a=o-i;return s<a?-1:s>a?1:0}function yoe(t){return t>=97&&t<=122}function kP(t,e){return t.length===e.length&&Coe(t,e)===0}function VU(t,e){let r=e.length;return e.length>t.length?!1:Coe(t,e,0,r)===0}function woe(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}function Roe(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}var Xht=String.fromCharCode(65279);var boe=class t{static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=a5e()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function a5e(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var xoe=class t{constructor(e){this.confusableDictionary=e}static{this.ambiguousCharacterData=new ga(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new NP(e=>{function r(l){let d=new Map;for(let p=0;p<l.length;p+=2)d.set(l[p],l[p+1]);return d}function n(l,d){let p=new Map(l);for(let[f,m]of d)p.set(f,m);return p}function i(l,d){if(!l)return d;let p=new Map;for(let[f,m]of l)d.has(f)&&p.set(f,m);return p}let o=this.ambiguousCharacterData.value,s=e.filter(l=>!l.startsWith("_")&&l in o);s.length===0&&(s=["_default"]);let a;for(let l of s){let d=r(o[l]);a=i(a,d)}let u=r(o._common),c=n(u,a);return new t(c)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new ga(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},Eoe=class t{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static get codePoints(){return t.getData()}};function sI(t){return typeof t=="string"}function LP(t){return Array.isArray(t)&&t.every(e=>sI(e))}function zU(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function bb(t){return typeof t=="number"&&!isNaN(t)}function Aoe(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Nm(t){return t===47||t===92}function YU(t){return t.replace(/[\\/]/g,_r.sep)}function Poe(t){return t.indexOf("/")===-1&&(t=YU(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}function $U(t,e=_r.sep){if(!t)return"";let r=t.length,n=t.charCodeAt(0);if(Nm(n)){if(Nm(t.charCodeAt(1))&&!Nm(t.charCodeAt(2))){let o=3,s=o;for(;o<r&&!Nm(t.charCodeAt(o));o++);if(s!==o&&!Nm(t.charCodeAt(o+1))){for(o+=1;o<r;o++)if(Nm(t.charCodeAt(o)))return t.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(l5e(n)&&t.charCodeAt(1)===58)return Nm(t.charCodeAt(2))?t.slice(0,2)+e:t.slice(0,2);let i=t.indexOf("://");if(i!==-1){for(i+=3;i<r;i++)if(Nm(t.charCodeAt(i)))return t.slice(0,i+1)}return""}function WU(t,e,r,n=_b){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!VU(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}function l5e(t){return t>=65&&t<=90||t>=97&&t<=122}var p5e=/^\w[\w\d+.-]*$/,f5e=/^\//,m5e=/^\/\//;function h5e(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!p5e.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!f5e.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(m5e.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function g5e(t,e){return!t&&!e?"file":t}function v5e(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Vu&&(e=Vu+e):e=Vu;break}return e}var Qr="",Vu="/",_5e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Ct=class t{static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Qr,this.authority=e.authority||Qr,this.path=e.path||Qr,this.query=e.query||Qr,this.fragment=e.fragment||Qr):(this.scheme=g5e(e,s),this.authority=r||Qr,this.path=v5e(this.scheme,n||Qr),this.query=i||Qr,this.fragment=o||Qr,h5e(this,s))}get fsPath(){return aI(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:s}=e;return r===void 0?r=this.scheme:r===null&&(r=Qr),n===void 0?n=this.authority:n===null&&(n=Qr),i===void 0?i=this.path:i===null&&(i=Qr),o===void 0?o=this.query:o===null&&(o=Qr),s===void 0?s=this.fragment:s===null&&(s=Qr),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new Dm(r,n,i,o,s)}static parse(e,r=!1){let n=_5e.exec(e);return n?new Dm(n[2]||Qr,OP(n[4]||Qr),OP(n[5]||Qr),OP(n[7]||Qr),OP(n[9]||Qr),r):new Dm(Qr,Qr,Qr,Qr,Qr)}static file(e){let r=Qr;if(jl&&(e=e.replace(/\\/g,Vu)),e[0]===Vu&&e[1]===Vu){let n=e.indexOf(Vu,2);n===-1?(r=e.substring(2),e=Vu):(r=e.substring(2,n),e=e.substring(n)||Vu)}return new Dm("file",r,e,Qr,Qr)}static from(e,r){return new Dm(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return jl&&e.scheme==="file"?n=t.file(ii.join(aI(e,!0),...r)).path:n=_r.join(e.path,...r),e.with({path:n})}toString(e=!1){return KU(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Dm(e);return r._formatted=e.external??null,r._fsPath=e._sep===koe?e.fsPath??null:null,r}}else return e}};var koe=jl?1:void 0,Dm=class extends Ct{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=aI(this,!1)),this._fsPath}toString(r=!1){return r?KU(this,!0):(this._formatted||(this._formatted=KU(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=koe),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Loe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Noe(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||r&&s===91||r&&s===93||r&&s===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let a=Loe[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}function y5e(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Loe[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function aI(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,jl&&(r=r.replace(/\//g,"\\")),r}function KU(t,e){let r=e?y5e:Noe,n="",{scheme:i,authority:o,path:s,query:a,fragment:u}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Vu,n+=Vu),o){let c=o.indexOf("@");if(c!==-1){let l=o.substr(0,c);o=o.substr(c+1),c=l.lastIndexOf(":"),c===-1?n+=r(l,!1,!1):(n+=r(l.substr(0,c),!1,!1),n+=":",n+=r(l.substr(c+1),!1,!0)),n+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,c),!1,!0),n+=o.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let c=s.charCodeAt(1);c>=65&&c<=90&&(s=`/${String.fromCharCode(c+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let c=s.charCodeAt(0);c>=65&&c<=90&&(s=`${String.fromCharCode(c+32)}:${s.substr(2)}`)}n+=r(s,!0,!1)}return a&&(n+="?",n+=r(a,!1,!1)),u&&(n+="#",n+=e?u:Noe(u,!1,!1)),n}function Ooe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Ooe(t.substr(3)):t}}var Doe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function OP(t){return t.match(Doe)?t.replace(Doe,e=>Ooe(e)):t}var $n;(G=>(G.inMemory="inmemory",G.vscode="vscode",G.internal="private",G.walkThrough="walkThrough",G.walkThroughSnippet="walkThroughSnippet",G.http="http",G.https="https",G.file="file",G.mailto="mailto",G.untitled="untitled",G.data="data",G.command="command",G.vscodeRemote="vscode-remote",G.vscodeRemoteResource="vscode-remote-resource",G.vscodeManagedRemoteResource="vscode-managed-remote-resource",G.vscodeUserData="vscode-userdata",G.vscodeCustomEditor="vscode-custom-editor",G.vscodeNotebookCell="vscode-notebook-cell",G.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",G.vscodeNotebookCellOutput="vscode-notebook-cell-output",G.vscodeInteractiveInput="vscode-interactive-input",G.vscodeSettings="vscode-settings",G.vscodeWorkspaceTrust="vscode-workspace-trust",G.vscodeTerminal="vscode-terminal",G.vscodeChatSesssion="vscode-chat-editor",G.webviewPanel="webview-panel",G.vscodeWebview="vscode-webview",G.extension="extension",G.vscodeFileResource="vscode-file",G.tmp="tmp",G.vsls="vsls",G.vscodeSourceControl="vscode-scm"))($n||={});var b5e="tkn",XU=class{constructor(){this._hosts=Object.create(null);this._ports=Object.create(null);this._connectionTokens=Object.create(null);this._preferredWebSchema="http";this._delegate=null;this._remoteResourcesPath=`/${$n.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e){this._remoteResourcesPath=`${e}/${$n.vscodeRemoteResource}`}set(e,r,n){this._hosts[e]=r,this._ports[e]=n}setConnectionToken(e,r){this._connectionTokens[e]=r}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return gP(a),e}let r=e.authority,n=this._hosts[r];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[r],o=this._connectionTokens[r],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${b5e}=${encodeURIComponent(o)}`),Ct.from({scheme:uoe?this._preferredWebSchema:$n.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},x5e=new XU;var E5e="vscode-app",QU=class t{static{this.FALLBACK_AUTHORITY=E5e}asBrowserUri(e){let r=this.toUri(e,require);return this.uriToBrowserUri(r)}uriToBrowserUri(e){return e.scheme===$n.vscodeRemote?x5e.rewrite(e):e.scheme===$n.file&&(coe||loe===`${$n.vscodeFileResource}://${t.FALLBACK_AUTHORITY}`)?e.with({scheme:$n.vscodeFileResource,authority:e.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let r=this.toUri(e,require);return this.uriToFileUri(r)}uriToFileUri(e){return e.scheme===$n.vscodeFileResource?e.with({scheme:$n.file,authority:e.authority!==t.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,r){return Ct.isUri(e)?e:Ct.parse(r.toUrl(e))}},dgt=new QU,T5e;(o=>{let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(t.get("3"));let r="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:Ct.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let u=a?.get(r);if(u)return t.get(u)}o.getHeadersFromQuery=n;function i(s,a,u){if(!globalThis.crossOriginIsolated)return;let c=a&&u?"3":u?"2":"1";s instanceof URLSearchParams?s.set(r,c):s[r]=c}o.addSearchParam=i})(T5e||={});function Rp(t){return aI(t,!0)}var cI=class{constructor(e){this._ignorePathCasing=e}compare(e,r,n=!1){return e===r?0:Ioe(this.getComparisonKey(e,n),this.getComparisonKey(r,n))}isEqual(e,r,n=!1){return e===r?!0:!e||!r?!1:this.getComparisonKey(e,n)===this.getComparisonKey(r,n)}getComparisonKey(e,r=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,r,n=!1){if(e.scheme===r.scheme){if(e.scheme===$n.file)return WU(Rp(e),Rp(r),this._ignorePathCasing(e))&&e.query===r.query&&(n||e.fragment===r.fragment);if(Moe(e.authority,r.authority))return WU(e.path,r.path,this._ignorePathCasing(e),"/")&&e.query===r.query&&(n||e.fragment===r.fragment)}return!1}joinPath(e,...r){return Ct.joinPath(e,...r)}basenameOrAuthority(e){return zu(e)||e.authority}basename(e){return _r.basename(e.path)}extname(e){return _r.extname(e.path)}dirname(e){if(e.path.length===0)return e;let r;return e.scheme===$n.file?r=Ct.file(_oe(Rp(e))).path:(r=_r.dirname(e.path),e.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),r="/")),e.with({path:r})}normalizePath(e){if(!e.path.length)return e;let r;return e.scheme===$n.file?r=Ct.file(GU(Rp(e))).path:r=_r.normalize(e.path),e.with({path:r})}relativePath(e,r){if(e.scheme!==r.scheme||!Moe(e.authority,r.authority))return;if(e.scheme===$n.file){let o=voe(Rp(e),Rp(r));return jl?YU(o):o}let n=e.path||"/",i=r.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return _r.relative(n,i)}resolvePath(e,r){if(e.scheme===$n.file){let n=Ct.file(goe(Rp(e),r));return e.with({authority:n.authority,path:n.path})}return r=Poe(r),e.with({path:_r.resolve(e.path,r)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,r){return e===r||e!==void 0&&r!==void 0&&kP(e,r)}hasTrailingPathSeparator(e,r=_b){if(e.scheme===$n.file){let n=Rp(e);return n.length>$U(n).length&&n[n.length-1]===r}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,r=_b){return Foe(e,r)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,r=_b){let n=!1;if(e.scheme===$n.file){let i=Rp(e);n=i!==void 0&&i.length===$U(i).length&&i[i.length-1]===r}else{r="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!Foe(e,r)?e.with({path:e.path+"/"}):e}},yr=new cI(()=>!1),_gt=new cI(t=>t.scheme===$n.file?!aoe:!0),ygt=new cI(t=>!0),uI=yr.isEqual.bind(yr),bgt=yr.isEqualOrParent.bind(yr),xgt=yr.getComparisonKey.bind(yr),Egt=yr.basenameOrAuthority.bind(yr),zu=yr.basename.bind(yr),js=yr.extname.bind(yr),Tgt=yr.dirname.bind(yr),Sgt=yr.joinPath.bind(yr),Igt=yr.normalizePath.bind(yr),Uoe=yr.relativePath.bind(yr),Cgt=yr.resolvePath.bind(yr),wgt=yr.isAbsolutePath.bind(yr),Moe=yr.isEqualAuthority.bind(yr),Foe=yr.hasTrailingPathSeparator.bind(yr),Rgt=yr.removeTrailingPathSeparator.bind(yr),Agt=yr.addTrailingPathSeparator.bind(yr);var S5e;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(l=>{let[d,p]=l.split(":");d&&p&&a.set(d,p)});let c=s.path.substring(0,s.path.indexOf(";"));return c&&a.set(o.META_DATA_MIME,c),a}o.parseMetaData=i})(S5e||={});var C5e=Symbol("MicrotaskDelay");function GP(t,e,r){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(r)});t.then(n,i).finally(()=>o.dispose())})}function Pp(t,e,r){let n,i=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(i)),new Promise(o=>n=o)])}var FP=class{constructor(e){this._size=0;this._isDisposed=!1;this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new ho}whenIdle(){return this.size>0?mb.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((r,n)=>{this.outstandingPromises.push({factory:e,c:r,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}};var UP=class{constructor(e,r){this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}},BP=class{constructor(){this.disposable=void 0}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,r,n=globalThis){this.cancel();let i=n.setInterval(()=>{e()},r);this.disposable=Ip(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel()}};var w5e,MP;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?MP=(t,e)=>{poe(()=>{if(r)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:MP=(t,e,r)=>{let n=t.requestIdleCallback(e,typeof r=="number"?{timeout:r}:void 0),i=!1;return{dispose(){i||(i=!0,t.cancelIdleCallback(n))}}},w5e=t=>MP(globalThis,t)})();var JU=class{constructor(e,r){this._didRun=!1;this._executor=()=>{try{this._value=r()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=MP(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},qP=class extends JU{constructor(e){super(globalThis,e)}};var ec=class{get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Gl)}},R5e;(r=>{async function t(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}r.settled=t;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}r.withAsyncBody=e})(R5e||={});var Ap=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromises(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new ho,queueMicrotask(async()=>{let r={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(r)),this.resolve()}catch(n){this.reject(n)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await mb.toPromise(this._onStateChanged.event)}while(!0)}}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var Q0=class{constructor(){this._deferred=new ec;this._asyncIterable=new Ap(n=>{if(e){n.reject(e);return}return r&&n.emitMany(r),this._errorFn=i=>n.reject(i),this._emitFn=i=>n.emitOne(i),this._deferred.p});let e,r;this._emitFn=n=>{r||(r=[]),r.push(n)},this._errorFn=n=>{e||(e=n)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var Np=class{constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};var ZU=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}},lI=class{constructor(e){this._hashFn=e;this._nodes=new Map}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new ZU(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};var J0=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var A5e=!1,HP=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},jP=class t{constructor(e=new J0,r=!1,n,i=A5e){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._activeInstantiations=new Set;this._services.set(Gie,this),this._globalGraph=i?n?._globalGraph??new lI(o=>o):void 0}createChild(e){return new t(e,this._strict,this,this._enableTracing)}invokeFunction(e,...r){let n=dI.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s=>{if(i)throw Hie("service accessor is only valid during the invocation of its target method");let a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){let n,i;return e instanceof Np?(n=dI.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=dI.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=Hu.getServiceDependencies(e).sort((a,u)=>a.index-u.index),o=[];for(let a of i){let u=this._getOrCreateServiceInstance(a.id,n);u||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(u)}let s=i.length>0?i[0].index:r.length;if(r.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${r.length} static arguments`);let a=s-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,s)}return Reflect.construct(e,r.concat(o))}_setServiceInstance(e,r){if(this._services.get(e)instanceof Np)this._services.set(e,r);else if(this._parent)this._parent._setServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Np?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new lI(a=>a.id.toString()),o=0,s=[{id:e,desc:r,_trace:n}];for(;s.length;){let a=s.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new HP(i);for(let u of Hu.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(u.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(a.id),String(u.id)),c instanceof Np){let l={id:u.id,desc:c,_trace:a._trace.branch(u.id,!0)};i.insertEdge(a,l),s.push(l)}}}for(;;){let a=i.roots();if(a.length===0){if(!i.isEmpty())throw new HP(i);break}for(let{data:u}of a){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Np){let l=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setServiceInstance(u.id,l)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof Np)return this._createServiceInstance(e,r,n,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o){if(i){let s=new t(void 0,this._strict,this,this._enableTracing);s._globalGraphImplicitDependency=String(e);let a=new Map,u=new qP(()=>{let c=s._createInstance(r,n,o);for(let[l,d]of a){let p=c[l];if(typeof p=="function")for(let f of d)f.disposable=p.apply(c,f.listener)}return a.clear(),c});return new Proxy(Object.create(null),{get(c,l){if(!u.isInitialized&&typeof l=="string"&&(l.startsWith("onDid")||l.startsWith("onWill"))){let f=a.get(l);return f||(f=new rI,a.set(l,f)),(h,g,v)=>{if(u.isInitialized)return u.value[l](h,g,v);{let _={listener:[h,g,v],disposable:void 0},y=f.push(_);return Ip(()=>{y(),_.disposable?.dispose()})}}}if(l in c)return c[l];let d=u.value,p=d[l];return typeof p!="function"||(p=p.bind(d),c[l]=p),p},set(c,l,d){return u.value[l]=d,!0},getPrototypeOf(c){return r.prototype}})}else return this._createInstance(r,n,o)}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var dI=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,s){let a=[],u=new Array(o+1).join("	");for(let[c,l,d]of s._dep)if(l&&d){r=!0,a.push(`${u}CREATES -> ${c}`);let p=n(o+1,d);p&&a.push(p)}else a.push(`${u}uses -> ${c}`);return a.join(`
`)}let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var VP=class{constructor(e,r){this._isSealed=!1;this._recreatePair=!1;let n=new J0(...e??[]),i=r?r._pair.insta.createChild(n):new jP(n,!0);this._pair={services:n,insta:i}}createInstance(e,...r){return this._pair.insta.createInstance(e,...r)}invokeFunction(e,...r){return this._pair.insta.invokeFunction(e,...r)}get(e){try{return this._pair.insta.invokeFunction(n=>n.get(e))}finally{this._recreatePair=!0}}safeGet(e){try{return this.get(e)}catch{return}}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");if(this._recreatePair){this._recreatePair=!1;let n=new J0,i=this._pair.insta.createChild(n);this._pair={services:n,insta:i}}this._pair.services.set(e,r)}defineIfNotDefined(e,r){this._pair.services.has(e)||this.define(e,r())}seal(){this._isSealed=!0}toString(){return""}};var tc=Boe(),zP=tc.buildType!=="dev",Dp=tc.isPreRelease||!zP;var pI=class{constructor(e,r){this.name=e;this.version=r}format(){return`${this.name}/${this.version}`}},gt=se("IEnvService");var km="github.copilot",ke=se("IConfigurationService"),$P=class{getConfigMixedWithDefaults(e){if(this.isDefaultSettingOverwritten(e)){let r=this.getConfig(e);return zU(r)&&zU(e.defaultValue)?{...e.defaultValue,...r}:r}return e.defaultValue}},YP;function N5e(){if(!YP){YP=new Map;let t=tc.contributes.configuration.properties;for(let e of Object.keys(t))typeof t[e].default<"u"&&YP.set(e,t[e].default)}return YP}function Bt(t,e){let r=N5e().get(`${km}.${t}`);if(typeof r<"u"&&e!==r)throw new Error(`The default value for setting ${t} is different in package.json and in code`);let n=t.indexOf("."),i=t.substring(0,n);if(i!=="editor"&&i!=="chat"&&i!=="advanced"&&i!=="notebook")throw new Error(`Unexpected setting section ${i} in setting ${t}`);let o=t.substring(n+1);return{id:t,firstPart:i,secondPart:o,defaultValue:e}}var Le={EnableCodeActions:Bt("editor.enableCodeActions",!0),LocaleOverride:Bt("chat.localeOverride","auto"),WelcomeMessage:Bt("chat.welcomeMessage","first"),TerminalChatLocation:Bt("chat.terminalChatLocation","chatView"),AuthProvider:Bt("advanced.authProvider","github"),NotebookIterativeImproving:Bt("notebook.iterativeImproving",!1),DebugOverrideProxyUrl:Bt("advanced.debug.overrideProxyUrl",""),DebugChatOverrideProxyUrl:Bt("advanced.debug.chatOverrideProxyUrl",""),DebugTestOverrideProxyUrl:Bt("advanced.debug.testOverrideProxyUrl",""),DebugOverrideEngine:Bt("advanced.debug.overrideEngine",""),DebugOverrideChatEngine:Bt("advanced.debug.overrideChatEngine","gpt-3.5-turbo"),DebugOverrideChatMaxTokenNum:Bt("advanced.debug.overrideChatMaxTokenNum",0),DebugOverrideChatOffTopicModel:Bt("advanced.debug.overrideChatOffTopicModel",""),DebugOverrideChatOffTopicModelTokenizer:Bt("advanced.debug.overrideChatOffTopicModelTokenizer",""),DebugOverrideChatOffTopicModelThreshold:Bt("advanced.debug.overrideChatOffTopicModelThreshold",0),DebugOverrideLogLevels:Bt("advanced.debug.overrideLogLevels",{}),DebugFilterLogCategories:Bt("advanced.debug.filterLogCategories",[]),DebugReportFeedback:Bt("advanced.debug.reportFeedback",!1),DebugUseNodeFetcher:Bt("advanced.debug.useNodeFetcher",!1),DebugUseElectronFetcher:Bt("advanced.debug.useElectronFetcher",!1),ConversationSlashCommandEnablements:Bt("advanced.slashCommands",{"*":!1}),ConversationVariablesEnablements:Bt("advanced.variables",{"*":Dp}),ConversationAdditionalPromptContext:Bt("advanced.conversationAdditionalPromptContext","firstTurn"),ConversationLoggingEnabled:Bt("advanced.conversationLoggingEnabled",!1),ConversationIntentDetection:Bt("advanced.conversationIntentDetection",!1),KerberosServicePrincipal:Bt("advanced.kerberosServicePrincipal",""),AgentsEndpointUrl:Bt("advanced.agentsEndpointUrl","https://api.githubcopilot.com"),EnableRemoteAgents:Bt("advanced.enableRemoteAgents",!1),ExplainIntentRefer:Bt("advanced.explain.refer",!0),FixUseGPT4InInlineChat:Bt("advanced.fix.useGPT4InInlineChat",!1),FixUseWorkspaceChunksFromSelection:Bt("advanced.fix.useWorkspaceChunksFromSelection",!1),FixUseWorkspaceChunksFromDiagnostics:Bt("advanced.fix.useWorkspaceChunksFromDiagnostics",!1),RenameSuggestionsEnabled:Bt("advanced.renameSuggestionsEnabled",!1),WorkspaceNewFlowEnabled:Bt("advanced.workspace.useNewFlow",!0),WorkspaceCodeSearchEnabled:Bt("advanced.workspace.codeSearchEnabled",void 0),WorkspaceUseAdaEnabled:Bt("advanced.workspace.useAda",void 0),WorkspaceRerankStrategy:Bt("advanced.workspace.rerankStrategy",void 0),InlineChatStreaming:Bt("advanced.inlineChatStreaming","progressive"),UseProjectTemplates:Bt("advanced.new.useProjectTemplates",!1),ExplainScopeSelection:Bt("advanced.explain.scopeSelection",!1),UseMessageNames:Bt("advanced.useMessageNames",!1)};var Ee=se("ILogService"),WP=class t{constructor(e,r){this.logTargets=e;this.configurationService=r;this.loggers=new Map;this.promptResponseLoggers=new Map;this.myLogTarget={logIt:(n,i,...o)=>{this.logTargets.forEach(s=>s.logIt(n,i,...o))}}}get defaultLogger(){return this.getLogger("extension")}getLogger(e){return t._getLogger(e,this.loggers,r=>new QP(r,this.myLogTarget,this.configurationService))}getPromptResponseLogger(e){return t._getLogger(e,this.promptResponseLoggers,r=>new eB(r,this.myLogTarget,this.configurationService))}registerAppender(e){return this.logTargets.push(e),Ip(()=>{let r=this.logTargets.indexOf(e);r!==-1&&this.logTargets.splice(r,1)})}static _getLogger(e,r,n){let i=r.get(e);return typeof i>"u"&&(i=n(e),r.set(e,i)),i}},fI=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(fI||{}),KP=class{logIt(e,r,...n){e===3?console.error(r,...n):e===2&&console.warn(r,...n)}},XP=class{constructor(e){this.output=e}logIt(e,r,...n){this.output.appendLine(`${r} ${n.map(qoe)}`)}},QP=class{constructor(e,r,n){this.category=e;this.target=r;this.configurationService=n}stringToLevel(e){return fI[e]}log(e,...r){if(!this.shouldLog(e,this.category))return;let n=`[${this.category}]`;this.target.logIt(e,n,...r)}shouldLog(e,r){let n=this.configurationService.getConfig(Le.DebugFilterLogCategories);if(n.length>0&&!n.includes(r))return!1;let i=this.configurationService.getConfig(Le.DebugOverrideLogLevels),o=this.stringToLevel(i[this.category])??this.stringToLevel(i["*"])??1;return e>=o}debug(...e){this.log(0,...e)}info(...e){this.log(1,...e)}warn(...e){this.log(2,...e)}error(...e){this.log(3,...e)}exception(e,r){let n=r?`${r}: `:"",i=e instanceof Error?e:new Error("Non-error thrown: "+e);this.log(3,`${n}${i.stack}`)}},eB=class extends QP{logPrompt(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;super.info(r+e.map(n=>`${n.role.toUpperCase()}:
${n.content}`).join(r)+r)}logResponse(e){if(!this.conversationLoggingEnabled())return;let r=`
---------------------------------
`;if(typeof e!="string"){if(e.type!=="success"){super.info(`${r}RESPONSE FAILED DUE TO ${e.type}${r}`);return}Array.isArray(e.value)?e.value.length===1?e=e.value[0]:e=`${e.value.map(n=>`<<${n}>>`).join(", ")}`:e=e.value}super.info(`${r}ASSISTANT:
${e}${r}`)}debug(e,...r){this.conversationLoggingEnabled()&&super.debug(e,...r)}info(e,...r){this.conversationLoggingEnabled()&&super.info(e,...r)}warn(e,...r){this.conversationLoggingEnabled()&&super.warn(e,...r)}error(e,...r){this.conversationLoggingEnabled()&&super.error(e,...r)}conversationLoggingEnabled(){return this.configurationService.getConfig(Le.ConversationLoggingEnabled)}};function qoe(t){switch(typeof t){case"object":return JSON.stringify(t);default:return String(t)}}var an=se("IFetcherService"),JP=(n=>(n[n.Helix=0]="Helix",n[n.Node=1]="Node",n[n.Electron=2]="Electron",n))(JP||{}),Lm=class{constructor(e,r,n,i,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getJson=o;this.getBody=s;this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}};var Goe="github.com",D5e=`https://${Goe}`,xb=se("INetworkConfiguration"),ZP=class{constructor(e=D5e){this.recalculateUrls(e)}isGitHubEnterprise(){return this.isEnterprise}getTokenUrl(e){return e.devOverride?.copilotTokenUrl??this.tokenUrl}getNotificationUrl(e){return e.devOverride?.notificationUrl??this.notificationUrl}updateBaseUrl(e,r){if(!r)return;let n=this.baseUri;this.recalculateUrls(r),n.toString()!==this.baseUri.toString()&&e.get(Dt).resetCopilotToken(e)}recalculateUrls(e){this.baseUri=Ct.parse(e);let r=Ct.parse(`${this.baseUri.scheme}://api.${this.baseUri.authority}`);this.isEnterprise=this.baseUri.authority!==Goe,this.tokenUrl=Ct.joinPath(r,"/copilot_internal/v2/token").toString(),this.notificationUrl=Ct.joinPath(r,"/copilot_internal/notification").toString()}};var Eb=se("IUrlOpener");var eN=se("INotificationSender");var k5e=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],rN=se("IUserErrorNotifier"),tN=class{constructor(e){this.accessor=e;this.notifiedErrorCodes=[]}async notifyUser(e){k5e.includes(e.code)&&!this.didNotifyBefore(e.code)&&(this.displayCertificateErrorNotification(e),this.notifiedErrorCodes.push(e.code))}displayCertificateErrorNotification(e){let r="https://aka.ms/copilot-ssc",n="Your current Copilot license doesn't support proxy connections with self-signed certificates.";this.accessor.get(Ee).getLogger("certificates").error(`${n} Please visit ${r} to learn more. Original cause: ${JSON.stringify(e)}`),this.showCertificateWarningMessage(n,r)}showCertificateWarningMessage(e,r){let n={title:"Learn more"};this.accessor.get(eN).showWarningMessage(e,n).then(i=>{i?.title===n.title&&this.accessor.get(Eb).open(r)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};var ys=se("ICopilotTokenNotifier"),nN=class{constructor(){this._onCopilotToken=new ho;this.onCopilotToken=this._onCopilotToken.event}dispose(){this._onCopilotToken.dispose()}emit(e,r){this._onCopilotToken.fire({token:e,envelope:r})}};var Tb=se("ITelemetryUserConfig"),iN=class{constructor(e,r,n){this.trackingId=r,this.optedIn=n??!1,this.setupUpdateOnToken(e)}setupUpdateOnToken(e){e.get(ys).onCopilotToken(r=>{let n=r.token.getTokenValue("rt")==="1",i=r.token.getTokenValue("tid"),o=r.token.organization_list;i!==void 0&&(this.trackingId=i,this.organizationsList=o?.toString(),this.optedIn=n)})}},L5e="https://copilot-telemetry.githubusercontent.com/telemetry",sN=se("ITelemetryEndpointUrl"),oN=class{constructor(e=L5e){this.url=e}getUrl(){return this.url}},Ue=se("ITelemetryService"),Om=se("IGHTelemetryService");var gi=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let t;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?t=crypto.getRandomValues.bind(crypto):t=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),r=[];for(let n=0;n<256;n++)r.push(n.toString(16).padStart(2,"0"));return function(){t(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+="-",o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o+=r[e[i++]],o}}();var kp=class t{constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return e.get(Om).sendExpProblemTelemetry({reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};var Sb=se("IExpConfigMaker"),aN=class{async fetchExperiments(e,r){let n=e.get(an),i;try{i=await n.fetch("https://default.exp-tas.com/vscode/ab",{method:"GET",headers:r})}catch(u){return kp.createFallbackConfig(e,`Error fetching ExP config: ${u}`)}if(!i.ok)return kp.createFallbackConfig(e,`ExP responded with ${i.status}`);let o=await i.json(),s=o.Configs.find(u=>u.Id==="vscode")??{Id:"vscode",Parameters:{}},a=Object.entries(s.Parameters).map(([u,c])=>u+(c?"":"cf"));return new kp(s.Parameters,o.AssignmentContext,a.join(";"))}},cN=class{async fetchExperiments(e,r){return kp.createEmptyConfig()}};var M5e={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},uN=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=M5e[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};var lN=class{constructor(e){this.prefix=e}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},tB=class extends lN{getValue(e){return this.prefix}getUpcomingValues(e){return[]}},Hoe=t=>new tB(t),dN=class extends lN{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let s of i)for(let a of o)n.push(this.prefix+s+a);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets===void 0?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs===void 0?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var joe="X-Copilot-ClientTimeBucket",rB=class{now(){return new Date}},pN=class{constructor(e,r=new rB){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=Hoe(e)}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new dN(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(joe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(joe,o))}}};var nB=class{constructor(e){this.accessor=e;this.cache=new lb(200)}async fetchExpConfig(e){let r=this.cache.get(e.stringify());return r||(r=new iB(()=>this.accessor.get(Sb).fetchExperiments(this.accessor,e.toHeaders()),1e3*60*60),this.cache.set(e.stringify(),r)),r.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},iB=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}},Uc=se("IFeatures"),fN=class t{constructor(e){this.accessor=e;this.staticFilters={};this.dynamicFilters={};this.upcomingDynamicFilters={};this.assignments=new nB(this.accessor)}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}getDynamicFilterValues(){let e={};for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}async getAssignment(e,r={},n){let i=this.getGranularityDirectory(),o=this.makeFilterSettings(r),s=i.extendFilters(o),a=await this.getExpConfig(s.newFilterSettings);i.update(o,+(a.variables.copilotbycallbuckets??NaN),+(a.variables.copilottimeperiodsizeinh??NaN));let u=i.extendFilters(o),c=u.newFilterSettings,l=await this.getExpConfig(c),d=new Promise(p=>setTimeout(p,t.upcomingDynamicFilterCheckDelayMs));for(let p of u.otherFilterSettingsToPrefetch)d=d.then(async()=>{await new Promise(f=>setTimeout(f,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(p)});return this.prepareForUpcomingFilters(c),n&&(n.filtersAndExp={exp:l,filters:c}),l.variables[e]}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.accessor.get(gt).machineId;this.granularityDirectory=new pN(e)}return this.granularityDirectory}makeFilterSettings(e){return new uN({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e){try{return this.assignments.fetchExpConfig(e)}catch(r){return kp.createFallbackConfig(this.accessor,`Error fetching ExP config: ${r}`)}}async prepareForUpcomingFilters(e){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,n]of Object.entries(this.upcomingDynamicFilters))await new Promise(i=>setTimeout(i,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,n()))}async fastCancellation(){return await this.getAssignment("copilotoverridefastcancellation")??!0}async chatExpModel(){return await this.getAssignment("copilotchatexpmodel")??""}async chatMaxNumTokens(){return await this.getAssignment("copilotchatmaxnumtokens")??0}async chatOffTopicModel(){return await this.getAssignment("copilotchatofftopicmodel")??""}async chatOffTopicModelTokenizer(){return await this.getAssignment("copilotchatofftopicmodeltokenizer")??""}async chatOffTopicModelThreshold(){return await this.getAssignment("copilotchatofftopicmodelthreshold")??0}async addExpAndFilterToTelemetry(e){let r=this.makeFilterSettings({});e.filtersAndExp={filters:r,exp:await this.getExpConfig(r)}}};var Tr=class t{static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Date.now())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o.filtersAndExp=this.filtersAndExp,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Date.now())}async extendWithExpTelemetry(e){this.filtersAndExp||await e.get(Uc).addExpAndFilterToTelemetry(this),this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}extendWithEditorAgnosticFields(e){let r=e.get(gt);this.properties.editor_version=r.getEditorInfo().format(),this.properties.editor_plugin_version=r.getEditorPluginInfo().format(),this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${r.getVersion()}`,this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=r.getEditorInfo().format()}extendWithConfigProperties(e){let r=e.get(gt),n=e.get(ke).dumpConfig();n["copilot.build"]=r.getBuild(),n["copilot.buildType"]=r.getBuildType();let i=e.get(Tb);i.trackingId&&(n["copilot.trackingId"]=i.trackingId),i.organizationsList&&(n.organizations_list=i.organizationsList),this.properties={...this.properties,...n}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=Date.now()-this.issuedTime;if(this.measurements.timeSinceIssuedMs=e,this.displayedTime!==void 0){let r=Date.now()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}async makeReadyForSending(e,r,n){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateTimeSinceIssuedAndDisplayed();for(let i in this.properties)this.properties[i]===void 0&&delete this.properties[i];F5e(e,this.properties)}};function F5e(t,e){e.unique_id=gi();let r=t.get(gt);e.common_extname=r.getEditorPluginInfo().name,e.common_extversion=r.getEditorPluginInfo().version,e.common_vscodeversion=r.getEditorInfo().format()}var Lp=class{constructor(e,r,n){this.token=e;this.organization_list=r;this.public_suggestions=n;this.tokenMap=this.parseToken(e)}parseToken(e){let r=new Map,i=e?.split(":")[0]?.split(";");for(let o of i){let[s,a]=o.split("=");r.set(s,a)}return r}get isInternal(){let e=["4535c7beffc844b46bb1ed4aa04d759a","a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","1cb18ac6eedd49b43d74a1c5beb0b955"];if(!this.organization_list)return!1;for(let r of this.organization_list)if(e.includes(r))return!0;return!1}getTokenValue(e){return this.tokenMap.get(e)}};var Dt=se("ICopilotTokenManager"),Ib=class{constructor(){this.copilotTokenRefreshEventEmitter=new oB.EventEmitter;this.githubTokenChangedEventEmitter=new oB.EventEmitter}};function Yoe(t){return t.get(Ee).getLogger("auth")}var U5e=60,B5e="token_refreshed",q5e="github_token_changed";function Mm(){return Math.floor(Date.now()/1e3)}async function mN(t,e){let r=Yoe(t),n=t.get(Ue);n.sendGHTelemetryEvent("auth.new_login");let i=await G5e(t,e);if(!i)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let o=await i.json();if(!o)return r.info("Failed to get copilot token"),n.sendGHTelemetryErrorEvent("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(i.status===401)return r.info("Failed to get copilot token due to 401 status"),n.sendGHTelemetryErrorEvent("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(!i.ok||!o.token){r.info(`Invalid copilot token: missing token: ${i.status} ${i.statusText}`);let p=Tr.createAndMarkAsIssued({status:i.status.toString(),status_text:i.statusText});return n.sendGHTelemetryErrorEvent("auth.invalid_token",p.properties,p.measurements),{kind:"failure",reason:"NotAuthorized",...o.error_details}}let s=o.expires_at;o.expires_at=Mm()+o.refresh_in+U5e;let{token:a,organization_list:u,...c}=o,l=new Lp(a,u);t.get(ys).emit(l,c);let d=Tr.createAndMarkAsIssued({},{adjusted_expires_at:o.expires_at,expires_at:s,current_time:Mm()});return n.sendGHTelemetryEvent("auth.new_token",d.properties,d.measurements),{kind:"success",...o}}async function G5e(t,e){let r=t.get(xb).getTokenUrl(e);try{return await t.get(an).fetch(r,{headers:{Authorization:`token ${e.token}`,...t.get(gt).getEditorVersionHeaders()}})}catch(n){throw t.get(rN).notifyUser(n),n}}var Cb=class extends Ib{constructor(r,n){super();this.completionsToken=r;this.embeddingsToken=n;this.wasReset=!1}getAnyGitHubToken(){return Promise.resolve(this.completionsToken)}getPermissiveGitHubToken(){return Promise.resolve(this.completionsToken)}async getCopilotToken(r,n){return new Lp(this.completionsToken)}async getEmbeddingsToken(r,n){return new Lp(this.embeddingsToken??this.completionsToken)}resetCopilotToken(r,n){this.wasReset=!0}async checkCopilotToken(r){return{status:"OK"}}},mI=class extends Ib{constructor(r){super();this.githubToken=r;this.copilotToken=void 0}getAnyGitHubToken(){return Promise.resolve(this.githubToken.token)}getPermissiveGitHubToken(){return Promise.resolve(this.githubToken.token)}async getCopilotToken(r,n){if(!this.copilotToken||this.copilotToken.expires_at<Mm()||n){let i=await mN(r,this.githubToken);if(i.kind==="failure")throw Error(`Failed to get copilot token: ${i.reason.toString()} ${i.message??""}`);this.copilotToken={...i},hN(r,this,i.refresh_in)}return new Lp(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions)}async checkCopilotToken(r){if(!this.copilotToken||this.copilotToken.expires_at<Mm()){let i=await mN(r,this.githubToken);if(i.kind==="failure")return i;this.copilotToken={...i},hN(r,this,i.refresh_in)}return{status:"OK"}}resetCopilotToken(r,n){n!==void 0&&r.get(Ue).sendGHTelemetryEvent("auth.reset_token_"+n),Yoe(r).debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}},zoe=new WeakMap;function hN(t,e,r){let n=Mm(),i=zoe.get(e)??zoe.set(e,{value:0}).get(e);i.value>0||(i.value++,setTimeout(async()=>{let o,s="";try{i.value--,await e.getCopilotToken(t,!0),o="success",e.copilotTokenRefreshEventEmitter.emit(B5e)}catch(u){o="failure",s=u.toString()}let a=Tr.createAndMarkAsIssued({result:o},{time_taken:Mm()-n,refresh_count:i.value});s&&(a.properties.reason=s),t.get(Ue).sendGHTelemetryEvent("auth.token_refresh",a.properties,a.measurements)},r*1e3))}function $oe(t,e){t.provider.id==="github"&&e.githubTokenChangedEventEmitter.emit(q5e,t)}var wb=require("vscode");var hI=require("vscode");var j5e=["user:email"],V5e=["read:user"],Woe=["read:user","user:email","repo","workflow"],sB="You are not signed in to GitHub. Please sign in to use Copilot.";function aB(t){return t.getConfig(Le.AuthProvider)==="github-enterprise"?"github-enterprise":"github"}async function Bc(t){let e=aB(t),r=await hI.authentication.getSession(e,Woe,{silent:!0});return r??=await hI.authentication.getSession(e,j5e,{silent:!0}),r??=await hI.authentication.getSession(e,V5e,{silent:!0}),r}async function Koe(t,e){let r=aB(t);return await hI.authentication.getSession(r,Woe,e)}function gI(t,e){let r=t.provider,n=aB(e);return r.id===n}async function gN(t,e){if(gI(t,e.get(ke))){let{defaultLogger:r}=e.get(Ee);if(await Bc(e.get(ke)))return await e.get(Dt).getCopilotToken(e,!0);e.get(Dt).resetCopilotToken(e),r.warn(sB)}}var Xoe=!1,vI=class extends Error{},_I=class extends Error{},yI=class extends Error{};async function z5e(t){let e=t.get(Ee).getLogger("auth"),r=await Bc(t.get(ke));if(!r)return e.info("GitHub login failed"),t.get(Ue).sendGHTelemetryErrorEvent("auth.github_login_failed"),{kind:"failure",reason:"GitHubLoginFailed"};e.info(`Logged in as ${r.account.label}`);let n=await mN(t,{token:r.accessToken});return n.kind==="success"&&e.info(`Got Copilot token for ${r.account.label}`),n}async function Y5e(t){let e=await z5e(t);if(e.kind==="failure"&&e.reason==="NotAuthorized"){let r=e.message;if(r?.includes("No access to GitHub Copilot found"))throw new vI(r??"User not authorized");if(r?.includes("Your subscription has ended"))throw new _I(r)}if(e.kind==="failure"){let r=e.message;if(r?.includes("Please contact your enterprise admin to enable your managed account for Copilot for Business"))throw new yI(r)}if(e.kind==="failure"&&e.reason==="HTTP401"){let r="Your GitHub token is invalid. Please sign out from your GitHub account using the VS Code accounts menu and try again.";throw Xoe||(Xoe=!0,wb.window.showWarningMessage(r)),Error(r)}if(e.kind==="failure"&&e.reason==="GitHubLoginFailed")throw Error("GitHubLoginFailed");if(e.kind==="failure")throw Error("Failed to get copilot token");return e}var vN=class extends Ib{constructor(r){super();this.configurationService=r;this.copilotToken=void 0,this._disposable=wb.Disposable.from(wb.authentication.onDidChangeSessions(n=>$oe(n,this)))}dispose(){this._disposable.dispose()}async getAnyGitHubToken(){return(await Bc(this.configurationService))?.accessToken}async getPermissiveGitHubToken(r){return(await Koe(this.configurationService,r))?.accessToken}async getCopilotToken(r,n){return(!this.copilotToken||this.copilotToken.expires_at<Mm()||n)&&(this.copilotToken=await Y5e(r),hN(r,this,this.copilotToken.refresh_in)),new Lp(this.copilotToken.token,this.copilotToken.organization_list,this.copilotToken.public_suggestions)}resetCopilotToken(r,n){n!==void 0&&r.get(Ue).sendGHTelemetryEvent("auth.reset_token_"+n),r.get(Ee).getLogger("auth").debug(`Resetting copilot token on HTTP error ${n||"unknown"}`),this.copilotToken=void 0}};var _N=se("IChatAgentService"),Qoe="workspace",Joe="vscode",yN="terminal";var wr=se("IChatMLFetcher");var bs=se("ConversationOptions");var bN=we(require("vscode"));function Zoe(t){return typeof t=="string"?t:JSON.stringify(t)}var xN=class extends $P{constructor(){super();this.config=bN.workspace.getConfiguration(km),bN.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(km)&&(this.config=bN.workspace.getConfiguration(km))})}getConfig(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0?this.config[r.firstPart][r.secondPart]:r.defaultValue}isDefaultSettingOverwritten(r){return this.config[r.firstPart]&&this.config[r.firstPart][r.secondPart]!==void 0}dumpConfig(){let r={};try{let n=tc.contributes.configuration?.properties??{};for(let i in n){let s=i.replace(`${km}.`,"").split(".").reduce((a,u)=>a[u],this.config);typeof s=="object"&&s!==null?Object.keys(s).filter(a=>a!=="secret_key").forEach(a=>r[`${i}.${a}`]=Zoe(s[a])):r[i]=Zoe(s)}}catch(n){console.error(`Failed to retrieve configuration properties ${n}`)}return r}};var Rb=se("IDebugOutputService");var lB=require("vscode"),ese=[];function tse(){return ese.join(`
`)}function $5e(t,e){t.push(W5e(e)),t.length>40&&t.shift()}var cB=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(lB.debug.activeDebugSession!==this.session)return;let r=this.extractOutput(e);r&&$5e(ese,r)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,r){}};function W5e(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function rse(){return[lB.debug.registerDebugAdapterTrackerFactory("*",new uB)]}var uB=class{createDebugAdapterTracker(e){return new cB(e)}};var EN=class extends Ji{constructor(){super();for(let e of rse())this._register(e)}get consoleOutput(){return tse()}};var TN=se("IDevContainerConfigurationService");var SN=se("IDialogService");var nse=we(require("vscode")),IN=class{showQuickPick(e,r,n){return nse.window.showQuickPick(e,r,n)}};var vi=se("IEmbeddingsComputer"),K5e=.72;function ise(t,e,r,n=K5e){return e.flatMap(i=>{let o=0;for(let s of t){let a=i.embedding.reduce((u,c,l)=>u+c*s[l],0);o=Math.max(o,a)}return{score:o,item:i}}).filter(i=>i.score>n).sort((i,o)=>o.score-i.score).slice(0,r).map(i=>i.item)}function Vl(t,e){let r=t.reduce((o,s,a)=>o+s*e[a],0),n=Math.sqrt(t.reduce((o,s)=>o+s*s,0)),i=Math.sqrt(e.reduce((o,s)=>o+s*s,0));return r/(n*i)}var Jr=se("IVSCodeExtensionContext");var Zi=se("IFileSystemService");var Ab=class{constructor(e,r,n,i){this.accessor=e;this.cacheType=r;this.cacheKey=n;this.cacheVersion=i;this.cacheVersionKey=`${n}-version`,this.fileSystem=e.get(Zi)}get cacheStorageUri(){return this.cacheType===2?this.accessor.get(Jr).storageUri:this.accessor.get(Jr).globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.accessor.get(Jr).workspaceState:this.accessor.get(Jr).globalState}async updateCache(e){if(!this.cacheStorageUri||!this.fileSystem.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystem.stat(this.cacheStorageUri)}catch{await this.fileSystem.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion),this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let n=Ct.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await(e===void 0?this.fileSystem.delete(n,{useTrash:!1}):this.fileSystem.writeFile(n,Buffer.from(JSON.stringify(e))))}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${n}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let r=await this.fileSystem.readFile(Ct.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return JSON.parse(r.toString())}catch{return}}async clearCache(){return this.updateCache(void 0)}},zl=class t extends Ab{constructor(r,n,i,o,s){super(r,n,i,o);this.fetcher=r.get(an),this.remoteCacheVersionKey=`${i}-version-remote`,this.remoteCacheURL=t.calculateRemoteCDNURL(s,o),this.remoteCacheLatestUpdateURL=t.calculateRemoteCDNLatestURL(s,o)}async fetchRemoteCache(){if(this._remoteCache)return this._remoteCache;try{let r=await this.fetcher.fetch(this.remoteCacheURL,{method:"GET"});if(r.ok)return this._remoteCache=await r.json(),this._remoteCache;console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheURL}`);return}}async fetchRemoteCacheLatest(){try{let r=await this.fetcher.fetch(this.remoteCacheLatestUpdateURL,{method:"GET"});if(r.ok)return r.text();console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${this.remoteCacheLatestUpdateURL}`);return}}async getCache(){let r=await this.fetchRemoteCacheLatest(),n=await super.getCache();if(n&&r===this.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return n;let i=await this.fetchRemoteCache();return await this.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,r),await this.updateCache(i),i}async updateCache(r,n){if(r===void 0)return super.updateCache(r);if(!await super.getCache()||n)return super.updateCache(r)}static calculateRemoteCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/core.json`}static calculateRemoteCDNLatestURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}/latest.txt`}},dB=class t extends zl{constructor(r,n,i,o,s){super(r,n,i,o,s);this._wasRemoteExtensionCacheUpdated=!1;this.baseExtensionCDNURL=t.calculateBaseRemoteExtensionCDNURL(s,o)}constructExposedCache(){if(!this._remoteExtensionCache)return;let r={...this._remoteExtensionCache.core};for(let n in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[n];for(let o in i)r[o]=i[o]}return r}async fetchRemoteExtensionCache(r){let n=`${this.baseExtensionCDNURL}/${r}.json`;try{let i=await this.fetcher.fetch(n,{method:"GET"});if(i.ok)return await i.json();if(i.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${n}`);return}catch{console.error(`Failed to fetch remote embeddings cache from ${n}`);return}}async getCache(){let r=await super.getCache();if(r===void 0)return;let n={core:{},extensions:{}};r&&t.isEmbeddingsCacheEntriesWithExtensions(r)?n=r:n={core:r,extensions:{}};let i=t.getInstalledExtensionIds(this.accessor),o=!1;for(let a in n.extensions)i.includes(a)||(delete n.extensions[a],o=!0);let s=i.filter(a=>!(a in n.extensions)||n.extensions[a]===void 0);for(let a of s){let u=await this.fetchRemoteExtensionCache(a);u&&(n.extensions[a]=u)}return this._remoteExtensionCache=n,this._wasRemoteExtensionCacheUpdated=s.length>0||o,this.constructExposedCache()}async updateCache(r,n){let i=r?super.updateCache(this._remoteExtensionCache,n||this._wasRemoteExtensionCacheUpdated):super.updateCache(r,n||this._wasRemoteExtensionCacheUpdated);return this._wasRemoteExtensionCacheUpdated=!1,i}static isEmbeddingsCacheEntriesWithExtensions(r){return"core"in r&&"extensions"in r}static getInstalledExtensionIds(r){return r.get(gt).getAllExtensions().filter(n=>!n.id.startsWith("vscode")).map(n=>n.id)}static calculateBaseRemoteExtensionCDNURL(r,n){return`https://embeddings.vscode-cdn.net/embeddings/v${n}/${r}`}},CN=class{constructor(e,r,n,i,o,s,a){this.cacheKey=i;this.embeddingsComputer=s;this._isIndexLoaded=!1;this._logger=r.get(Ee).getPromptResponseLogger(e),this._items=new Map,a?.type&&!a.supportsExtensions?this._embeddingsCache=new zl(r,n,i,o,a.type):a?.type&&a.supportsExtensions?this._embeddingsCache=new dB(r,n,i,o,a.type):this._embeddingsCache=new Ab(r,n,i,o)}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,r){let n=Array.from(this._items.values()).map(i=>{if(!i.embedding)return{item:i,similarity:0};let o=Vl(e,i.embedding);return{item:i,similarity:o}});return n=n.filter(i=>i.similarity>0),n.sort((i,o)=>o.similarity-i.similarity),n.slice(0,r).map(i=>i.item)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),r=await this.getLatestItems(),n=await this._embeddingsCache.getCache(),i=new Map;for(let o of r){let s=o,a=this._items.get(o.key),u=o.key;a?.embedding?s=a:n&&n[u]&&(s={...o,...n[u]}),i.set(u,s)}this._items=i,await this._embeddingsCache.updateCache(n),this._logger.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}async fetchEmbeddingsForItems(e){return this.embeddingsComputer.computeEmbeddings(e.map(r=>this.getEmbeddingQueryString(r)),void 0)}};function Op(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var AN=se("IProjectTemplatesIndex"),wN=class{constructor(e){this._isIndexLoaded=!1;let r=Op(e.get(gt).getEditorInfo().version);this.embeddingsCache=new zl(e,1,"projectTemplateEmbeddings",r,"project-templates")}async updateIndex(){this._isIndexLoaded||(this._isIndexLoaded=!0,this._embeddings=await this.embeddingsCache.getCache())}async nClosestValues(e,r,n=0){if(await this.updateIndex(),!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[0]}`,similarity:0};let s=Vl(e,o[1].embedding);return{key:`${o[0]} `,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}};function X5e(t){let e=`Setting Id: ${t.key}
`;if(e+=`Type: ${t.type}
`,e+=`Description: ${t.description??t.markdownDescription??""}
`,t.enum){e+=`Possible values:
`;for(let r=0;r<t.enum.length;r++)e+=` - ${t.enum[r]} - ${t.enumDescriptions?.[r]??""}
`}return e+=`
`,e}var PN=class extends CN{constructor(r,n,i,o,s,a,u,c){super(r,n,i,o,s,a,c);this.relatedInformationConfig=u;this.isIndexLoaded=!1}async provideRelatedInformation(r,n){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logger.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(n.isCancellationRequested)return this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this.embeddingsComputer.computeEmbeddings([r],n);if(this._logger.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),n.isCancellationRequested||!s||!s[0])return this._logger.debug(`Related Information: Request cancelled or no match found, returning ${Date.now()-i}ms`),[];let a=[];for(let c of this._items.values()){if(n.isCancellationRequested){this._logger.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(c.embedding){let l=Vl(s[0],c.embedding);l>this.relatedInformationConfig.threshold&&a.push(this.toRelatedInformation(c,l))}}return this._logger.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),a.sort((c,l)=>l.weight-c.weight).slice(0,this.relatedInformationConfig.maxResults)}},pB=class extends PN{constructor(r,n){super("CommandIdIndex",r,1,"commandEmbeddings",Op(r.get(gt).getEditorInfo().version),n,{type:2,threshold:.7,maxResults:100},{type:"commands",supportsExtensions:!0});this.accessor=r}async getLatestItems(){let r=await this.accessor.get(gt).getAllCommands();return r.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),r.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),r.map(n=>({key:n.command,label:n.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:n.label,keybinding:n.keybinding??"Not set"}))}getEmbeddingQueryString(r){return`${r.label} - ${r.key}`}toRelatedInformation(r,n){return{type:2,weight:n,command:r.key}}},fB=class extends PN{constructor(r,n){super("SettingsIndex",r,1,"settingEmbeddings",Op(r.get(gt).getEditorInfo().version),n,{type:4,threshold:.7,maxResults:100},{type:"settings",supportsExtensions:!0});this.accessor=r;this.isIndexLoaded=!1}async getLatestItems(){let r=await this.accessor.get(gt).getAllSettings(),n=[];for(let i of Object.keys(r)){let o=r[i];o.deprecationMessage||o.markdownDeprecationMessage||n.push({...o,key:i})}return n}getEmbeddingQueryString(r){return X5e(r)}toRelatedInformation(r,n){return{type:4,weight:n,setting:r.key}}},Mp=se("ICombinedEmbeddingIndex"),NN=class{constructor(e){this.commandIdIndex=new pB(e,e.get(vi)),this.settingsIndex=new fB(e,e.get(vi))}async loadIndexes(){await Promise.all([this.commandIdIndex.isIndexLoaded?Promise.resolve():this.commandIdIndex.calculateEmbeddings(),this.settingsIndex.isIndexLoaded?Promise.resolve():this.settingsIndex.calculateEmbeddings()])}async nClosestValues(e,r){return await this.loadIndexes(),{commands:this.commandIdIndex.nClosestValues(e,r),settings:this.settingsIndex.nClosestValues(e,r)}}hasSetting(e){return this.settingsIndex.hasItem(e)}hasCommand(e){return this.commandIdIndex.hasItem(e)}getSetting(e){return this.settingsIndex.getItem(e)}getCommand(e){return this.commandIdIndex.getItem(e)}};var Db=we(yse()),bse=require("path");var qr=se("ITokenizer"),MN=class{constructor(){}tokenize(e){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encode(e)}encodeTrimSuffix(e,r){return this._cl100kTokenizer||(this._cl100kTokenizer=this.initTokenizer()),this._cl100kTokenizer.encodeTrimSuffix(e,r,[]).text}tokenLength(e){return e?this.tokenize(e).length:0}initTokenizer(){return(0,Db.createTokenizer)((0,bse.join)(__dirname,"./cl100k_base.tiktoken"),(0,Db.getSpecialTokensByEncoder)("cl100k_base"),(0,Db.getRegexByEncoder)("cl100k_base"),64e3)}};var tt=se("IEndpointProvider");var Bm=class{},d6e=30*1e3;function qm(t,e,r,n,i,o,s){let a=t.get(gt),u={Authorization:`Bearer ${r}`,"X-Request-Id":i,"X-GitHub-Api-Version":"2023-07-07","Openai-Organization":"github-copilot","Copilot-Integration-Id":a.isProduction()?"vscode-chat":"vscode-chat-dev","VScode-SessionId":a.sessionId,"VScode-MachineId":a.machineId,...a.getEditorVersionHeaders(),...e.getExtraHeaders?e.getExtraHeaders():{}};e.interceptBody&&e.interceptBody(o),t.get(IB).contributeHeaders(u),n&&(u["OpenAI-Intent"]=n);let c={method:"POST",headers:u,json:o,timeout:d6e},l=t.get(Ue),d=t.get(an);if(s){let f=d.makeAbortController();s.onCancellationRequested(()=>{l.sendGHTelemetryEvent("networking.cancelRequest",{headerRequestId:i}),f.abort()}),c.signal=f.signal}return d.fetch(e.url,c).catch(f=>{if(f.code==="ECONNRESET"||f.code==="ETIMEDOUT"||f.code==="ERR_HTTP2_INVALID_SESSION"||f.message==="ERR_HTTP2_GOAWAY_SESSION")return l.sendGHTelemetryEvent("networking.disconnectAll"),d.disconnectAll().then(()=>d.fetch(e.url,c));throw d.isAbortError(f)?new Gl:f})}var IB=se("headerContributors"),FN=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};var kb=class{constructor(e){this.accessor=e}async getEmbeddingEndpoint(){return this._embeddingEndpoint?this._embeddingEndpoint:await this.accessor.get(tt).getEmbeddingsEndpointInfo()}async computeEmbeddings(e,r){this._embeddingEndpoint=await this.getEmbeddingEndpoint();let n=this._embeddingEndpoint.maxBatchSize,i=this._embeddingEndpoint.modelMaxPromptTokens-1;return this.fetchResponseWithBatches(e,r,i,n)}async fetchResponseWithBatches(e,r,n,i){let o=[],s=this.accessor.get(qr),a=[];for(let u of e)if(s.tokenLength(u)>n)return;for(let u of e){if(a.length>=i){let c=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,gi(),a,r);if(c.type==="failed")return;o.push(...c.embeddings),a=[]}a.push(u)}if(a.length>0){let u=await this.rawEmbeddingsFetchWithTelemetry(this.accessor,gi(),a,r);if(u.type==="failed")return;o.push(...u.embeddings)}return o.length===0?void 0:o}async rawEmbeddingsFetchWithTelemetry(e,r,n,i){let o=Date.now(),s=this.accessor.get(Ue),a=await this.rawEmbeddingsFetch(e,r,n,i);return a.type==="failed"?(s.sendMSFTTelemetryErrorEvent("embedding.error",{type:a.type,reason:a.reason}),a):(s.sendMSFTTelemetryEvent("embedding.success",{},{batchSize:n.length,inputTokenCount:n.reduce((u,c)=>u+this.accessor.get(qr).tokenLength(c),0),timeToComplete:Date.now()-o}),a)}async rawEmbeddingsFetch(e,r,n,i){this._embeddingEndpoint||(this._embeddingEndpoint=await this.accessor.get(tt).getEmbeddingsEndpointInfo());try{let o=e.get(Dt),s=o instanceof Cb?await o.getEmbeddingsToken(e):await o.getCopilotToken(e),a={input:n,model:this._embeddingEndpoint.model};this._embeddingEndpoint.interceptBody?.(a);let u=await qm(e,this._embeddingEndpoint,s.token,"copilot-panel",r,a,i),c=u.status===200?await u.json():await u.text();return u.status===200&&c.data?{type:"success",embeddings:c.data.map(l=>l.embedding)}:{type:"failed",reason:c.error}}catch(o){let s=o?.message??"Unknown error";return s.match(/Unexpected.*JSON/i)&&(s="timeout"),{type:"failed",reason:s}}}};var CB=se("IEditorExperimentFilters");function Ese(t){let e=t.get(Uc),r=t.get(ke);e.registerStaticFilters(p6e(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>r.getConfig(Le.DebugOverrideEngine))}function p6e(t){let e=f6e(t),r=t.get(CB).addEditorSpecificFilters();return{...e,...r}}function f6e(t){let e=t.get(gt),r=e.getEditorInfo();return{"X-VSCode-AppVersion":xse(r.version),"X-MSEdge-ClientId":e.machineId,"X-VSCode-ExtensionName":e.getName(),"X-VSCode-ExtensionVersion":xse(e.getVersion()),"X-VSCode-TargetPopulation":"public"}}function xse(t){return t.split("-")[0]}var wB=we(require("vscode"));var UN=class{addEditorSpecificFilters(){return{"X-VSCode-Build":wB.env.appName,"X-VSCode-Language":wB.env.language}}};var BN=se("IGitCommitMessageService");var qN=se("IGitExtensionService");var xs=se("IGitService");function GN(t){if(!t)return;if(t.remoteFetchUrls?.length===1)return RB(t.remoteFetchUrls[0]);let e=t.remotes.findIndex(n=>n===t.upstreamRemote);if(e!==-1){let n=t.remoteFetchUrls?.[e];if(n){let i=RB(n);if(i)return i}}let r=t.remotes.findIndex(n=>n==="origin");if(r!==-1){let n=t.remoteFetchUrls?.[r];if(n){let i=RB(n);if(i)return i}}}function RB(t){t=t.replace(/^git@/,""),t=t.replace(/\.git$/,"");try{let e=Ct.parse(t);return e.authority!=="github.com"&&e.scheme!=="github.com"?void 0:e.path.replace(/^\//,"")}catch{return}}var ev=we(require("vscode"));var HN=class{constructor(e){this.accessor=e;this._onDidChange=new ev.EventEmitter;this.onDidChange=this._onDidChange.event;this._disposables=[];this._logger=e.get(Ee).getLogger("gitExtensionService"),this._logger.info("Initializing Git extension service."),this._disposables.push(...this._initializeExtensionApi())}getExtensionApi(){return this._api}_initializeExtensionApi(){let e=[],r=ev.extensions.getExtension("vscode.git"),n=async()=>{let i=await r.activate();this._logger.info("Successfully activated the vscode.git extension.");let o=s=>{this._logger.info(`Enablement state of the vscode.git extension: ${s}.`),s&&(this._api=i.getAPI(1),this._onDidChange.fire(),this._logger.info("Successfully registered Git commit message provider."))};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{this._logger.info("vscode.git extension is not yet activated.");let i=ev.extensions.onDidChange(()=>{!r&&ev.extensions.getExtension("vscode.git")&&(r=ev.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}};var EI=we(require("vscode")),jN=class t{getRepository(e){let r=this.getGitExtensionAPI();if(r)return t.repoToRepoContext(r.getRepository(e))}getGitExtensionAPI(){try{let e=EI.extensions.getExtension("vscode.git");return e?(e.activate(),e.exports.getAPI(1)):void 0}catch{return}}static repoToRepoContext(e){if(e)return{headBranchName:e.state.HEAD?.name,upstreamBranchName:e.state.HEAD?.upstream?.name,upstreamRemote:e.state.HEAD?.upstream?.remote,isRebasing:e.state.rebaseCommit!==null,remotes:e.state.remotes.map(r=>r.name),remoteFetchUrls:e.state.remotes.map(r=>r.fetchUrl)}}async openWorkspaceRepositories(){await Promise.all((EI.workspace.workspaceFolders||[]).map(e=>{let r=this.getGitExtensionAPI();return r?r.openRepository(e.uri):Promise.resolve()}))}get repositories(){let e=EI.workspace.workspaceFolders;if(!e)return;let r=this.getGitExtensionAPI();if(r)return e.map(n=>{let i=r.getRepository(n.uri);return t.repoToRepoContext(i)})}};var Gm=se("IGithubRepositoryService");var VN=class{constructor(e){this.accessor=e;this.fetcherService=e.get(an)}async isAvailable(e,r){let n=await this.accessor.get(Dt).getAnyGitHubToken();try{return(await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${n}`}})).ok}catch{return!1}}async getRepositoryItems(e,r,n){let i=[];try{let o=await this.accessor.get(Dt).getPermissiveGitHubToken({silent:!0}),s=n.split("/").map(u=>encodeURIComponent(u)).join("/"),a=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${s}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${o}`}});if(a.ok){let u=await a.json();if(Array.isArray(u))for(let c of u)"name"in c&&"path"in c&&"type"in c&&"html_url"in c&&(i.push({name:c.name,path:c.path,type:c.type,html_url:c.html_url}),c.type==="dir"&&i.push(...await this.getRepositoryItems(e,r,c.path)))}else console.error(`Failed to contents from ${e}:${r}:${n}`)}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}return i}async getRepositoryItemContent(e,r,n){try{let i=await this.accessor.get(Dt).getPermissiveGitHubToken({silent:!0}),o=n.split("/").map(a=>encodeURIComponent(a)).join("/"),s=await this.fetcherService.fetch(`https://api.github.com/repos/${e}/${r}/contents/${o}`,{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${i}`}});if(s.ok){let a=await s.json();if("content"in a){let u=Buffer.from(a.content,"base64");return new Uint8Array(u)}throw new Error("Unexpected data from GitHub")}}catch{console.error(`Failed to contents from ${e}:${r}:${n}`)}}};var Wt=se("IIgnoreService"),Tse=class t{static{this.Instance=new t}dispose(){}async init(){}isIgnored(e,r){return!1}isCopilotIgnored(e){return!1}isGitIgnored(e){return!1}asMinimatchPattern(e){}async refreshRemoteContentExclusions(){}sessionInfo(){return""}};var pt=we(require("vscode")),Rr=pt.Position,Ge=pt.Range,qc=pt.Selection;var tv=pt.CancellationTokenSource;var eo=pt.TextEdit,AB=pt.WorkspaceEdit,Gc=pt.Uri,Fp=pt.MarkdownString,va=pt.InteractiveEditorResponseFeedbackKind;var TI=pt.DiagnosticSeverity,_a=pt.ExtensionMode,Lb=pt.Location;var Sse=pt.ChatVariableLevel,Ob=pt.ChatResponseMarkdownPart;var PB=pt.ChatResponseFileTreePart;var Hc=pt.ChatResponseProgressPart,vo=pt.ChatResponseReferencePart;var Ise=pt.ChatRequestTurn;var Cse=pt.NewSymbolName,wse=pt.NewSymbolNameTag,Mb={t:pt.l10n.t};var Yo=se("ILanguageDiagnosticService"),zN=class{constructor(e){this._ignoreService=e}waitForNewDiagnostics(e,r,n=5e3){if(this._ignoreService.isCopilotIgnored(e))return Promise.resolve([]);let i,o,s;return new Promise(a=>{i=r.onCancellationRequested(()=>a([])),s=setTimeout(()=>a(this.getDiagnostics(e)),n),o=this.onDidChangeDiagnostics(u=>{for(let c of u.uris)if(uI(c,e)){a(this.getDiagnostics(e));break}})}).finally(()=>{i.dispose(),o.dispose(),clearTimeout(s)})}};function YN(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function Rse(t){return t.severity===TI.Error}var ya=se("ILanguageFeaturesService");function rv(t){return typeof t=="object"&&t!==null&&"targetUri"in t}var NB=we(require("vscode"));var $N=class extends zN{constructor(r){super(r);this.onDidChangeDiagnostics=NB.languages.onDidChangeDiagnostics}getDiagnostics(r){return this._ignoreService.isCopilotIgnored(r)?[]:NB.languages.getDiagnostics(r)}};var Fb=we(require("vscode")),WN=class{constructor(e){this._ignoreService=e}async getDefinitions(e,r){return this._ignoreService.isCopilotIgnored(e)?[]:await Fb.commands.executeCommand("vscode.executeDefinitionProvider",e,r)}async getImplementations(e,r){return this._ignoreService.isCopilotIgnored(e)?[]:await Fb.commands.executeCommand("vscode.executeImplementationProvider",e,r)}async getReferences(e,r){return this._ignoreService.isCopilotIgnored(e)?[]:await Fb.commands.executeCommand("vscode.executeReferenceProvider",e,r)}async getWorkspaceSymbols(e){return await Fb.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}async getDocumentSymbols(e){return await Fb.commands.executeCommand("vscode.executeDocumentSymbolProvider",e)}};var KN=se("IKerberosLoader");var XN=se("IWindowsCaCertsLoader");var DB=we(require("vscode")),QN=class{async loadKerberos(){try{return require(`${DB.env.appRoot}/node_modules.asar/kerberos`)}catch{}try{return require(`${DB.env.appRoot}/node_modules/kerberos`)}catch{}}};var Nse=require("vscode");var Dse="github-enterprise",Ase="https://github.com";function Pse(t){return t.getConfig(Le.AuthProvider)==="github-enterprise"?Nse.workspace.getConfiguration(Dse).get("uri")??Ase:Ase}var JN=class extends ZP{constructor(r){super(Pse(r));this.configurationService=r}updateBaseUrl(r,n){super.updateBaseUrl(r,Pse(this.configurationService))}};function kse(t,e){(t.affectsConfiguration(`${km}.advanced`)||t.affectsConfiguration(`${Dse}.uri`))&&e.get(xb).updateBaseUrl(e)}var Lse=we(require("os")),kB=we(require("vscode")),ZN=class{async loadCaCerts(){let e=await this.loadBuiltInWinCAModule(),r=new Set,n=new e.Crypt32;try{let i;for(;i=n.next();)r.add(m6e(i))}finally{n.done()}return Array.from(r)}async loadBuiltInWinCAModule(){try{return require(`${kB.env.appRoot}/node_modules.asar/@vscode/windows-ca-certs`)}catch{}try{return require(`${kB.env.appRoot}/node_modules/@vscode/windows-ca-certs`)}catch{}}};function m6e(t){let e=["-----BEGIN CERTIFICATE-----"],r=t.toString("base64");for(let n=0;n<r.length;n+=64)e.push(r.substr(n,64));return e.push("-----END CERTIFICATE-----",""),e.join(Lse.EOL)}var eD=se("INotebookService");var Ose=require("vscode"),tD=class{async getVariables(e){try{return Ose.commands.executeCommand("vscode.executeNotebookVariableProvider",e)}catch{return[]}}};var Mse=require("vscode"),rD=class{async showWarningMessage(e,...r){return{title:await Mse.window.showWarningMessage(e,...r.map(i=>i.title))}}};var Sn=se("IParserService");function nD(t){return{startPosition:{row:t.start.line,column:t.start.character},endPosition:{row:t.end.line,column:t.end.character}}}function iD(t){return new Ge(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function jc(t,e){return{startIndex:e.offsetAt(t.start),endIndex:e.offsetAt(t.end)}}var cae=we(require("path"));var Fse=require("worker_threads"),LB=class{constructor(e,r){this.logger=r;this.handlers=new Map;this.nextId=1;this.worker=new Fse.Worker(e),this.worker.on("message",({id:n,err:i,res:o})=>{let s=this.handlers.get(n);s&&(this.handlers.delete(n),i?s.reject(i):s.resolve(o))}),this.worker.on("error",n=>this.handleError(n)),this.worker.on("exit",n=>{n!==0&&this.handleError(new Error(`Worker thread exited with code ${n}.`))})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.handlers.clear()}handleError(e){this.logger?.exception(e);for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}remoteCall(e,r){let n=this.nextId++,i,o,s=new Promise((a,u)=>{i=a,o=u});return this.handlers.set(n,{resolve:i,reject:o}),this.worker.postMessage({id:n,fn:e,args:r}),s}},Hm=class{constructor(e,r){this.worker=new LB(e,r);let n={get:(i,o)=>(typeof o=="string"&&!i[o]&&(i[o]=(...s)=>{if(!this.worker)throw new Error("Worker was terminated!");return this.worker.remoteCall(o,s)}),i[o])};this.proxy=new Proxy(Object.create(null),n)}terminate(){this.worker.terminate()}};var $B={};Fn($B,{_clean:()=>_6e,_extractDoc:()=>H6e,_getCallExpressions:()=>C6e,_getClassDeclarations:()=>R6e,_getClassReferences:()=>N6e,_getCoarseParentScope:()=>O6e,_getDocumentableNodeIfOnIdentifier:()=>F6e,_getFixSelectionOfInterest:()=>M6e,_getFunctionBodies:()=>L6e,_getFunctionDefinitions:()=>w6e,_getFunctionPositions:()=>k6e,_getNodeMatchingSelection:()=>lD,_getNodeToDocument:()=>B6e,_getNodeToExplain:()=>q6e,_getSemanticChunkTree:()=>D6e,_getStructure:()=>V6e,_getTestableNode:()=>U6e,_getTypeDeclarations:()=>A6e,_getTypeReferences:()=>P6e,_parse:()=>_o});var CI=we(require("path")),uD=we(Use());function Bse(t,e,r){let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n}function qse(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let i=t[n];e(i,r)>0&&(r=i)}return r}var OB=class{constructor(e=10){this.values=new Map;this.lruKeys=[];if(e<1)throw new Error("Cache size must be at least 1");this.size=e}removeKeyFromLRU(e){let r=this.lruKeys.indexOf(e);r!==-1&&this.lruKeys.splice(r,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}clear(){this.values.clear(),this.lruKeys=[]}deleteKey(e){this.removeKeyFromLRU(e);let r=this.values.get(e);return r!==void 0&&this.values.delete(e),r}get(e){if(this.values.has(e)){let r=this.values.get(e);return this.touchKeyInLRU(e),r}}keys(){return this.lruKeys.slice()}getValues(){return this.values.values()}put(e,r){let n;if(!this.values.has(e)&&this.lruKeys.length===this.size){let i=this.lruKeys.shift(),o=this.deleteKey(i);n=[i,o]}return this.values.set(e,r),this.touchKeyInLRU(e),n}},oD=class{constructor(e){this.actual=new OB(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};var Es={doesContain:(t,e)=>t.startIndex<=e.startIndex&&e.endIndex<=t.endIndex,ofSyntaxNode:t=>({startIndex:t.startIndex,endIndex:t.endIndex}),compare:(t,e)=>t.startIndex-e.startIndex||e.endIndex-t.endIndex,doIntersect:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return r<n},len:t=>t.endIndex-t.startIndex,intersectionSize:(t,e)=>{let r=Math.max(t.startIndex,e.startIndex),n=Math.min(t.endIndex,e.endIndex);return Math.max(n-r,0)},isTreeSitterOffsetRange(t){return typeof t.startIndex=="number"&&typeof t.endIndex=="number"}},Yu={isEqual(t,e){return t.row===e.row&&t.column===e.column},isBefore(t,e){return t.row<e.row||t.row===e.row&&t.column<e.column},isAfter(t,e){return Yu.isBefore(e,t)},isBeforeOrEqual(t,e){let r=Yu.isBefore(t,e),n=Yu.isEqual(t,e);return!!(r||n)},equals(t,e){return t.column===e.column&&t.row===e.row},isAfterOrEqual(t,e){return Yu.isBeforeOrEqual(e,t)},ofPoint:t=>({row:t.row,column:t.column})},jm={doesContain:(t,e)=>Yu.isBeforeOrEqual(t.startPosition,e.startPosition)&&Yu.isAfterOrEqual(t.endPosition,e.endPosition),equals:(t,e)=>Yu.equals(t.startPosition,e.startPosition)&&Yu.equals(t.endPosition,e.endPosition),ofSyntaxNode:t=>({startPosition:t.startPosition,endPosition:t.endPosition})},sD={ofSyntaxNode:t=>({type:t.type,startIndex:t.startIndex,endIndex:t.endIndex})},$u={ofSyntaxNode:t=>({range:jm.ofSyntaxNode(t),startIndex:t.startIndex,text:t.text,endIndex:t.endIndex})},SI=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return r(this),e.join(`
`)}};var aD=class{constructor(e,r){this.syntaxTreeRoot=r;this.roots=[];this.formTree(e)}formTree(e){e.sort((o,s)=>o.mainBlock.startIndex-s.mainBlock.startIndex||o.mainBlock.endIndex-s.mainBlock.endIndex);let r=[],n=()=>r[r.length-1],i=(o,s)=>o.mainBlock.startIndex===s.mainBlock.startIndex&&o.mainBlock.endIndex===s.mainBlock.endIndex;for(let o of e){let s={info:o,children:[]},a=n();if(!a){this.roots.push(s),r.push(s);continue}if(!i(a.info,o)){for(;a&&!Es.doesContain(a.info.mainBlock,o.mainBlock);)r.pop(),a=n();a?a.children.push(s):this.roots.push(s),r.push(s)}}}};var cD=class extends Error{constructor(e){super(`Unrecognized language: ${e}`)}},Gse={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",tsx:"tsx",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java",rust:"rust"};function Ub(t){if(t in Gse)return Gse[t]}var Fi=(()=>{function t(e,...r){return e.length===1?e[0]:e.reduce((n,i,o)=>`${n}${i}${r[o]||""}`,"")}return{typescript:t,javascript:t,python:t,go:t,ruby:t,csharp:t,cpp:t,java:t,rust:t}})();function Wu(t,e){return Object.fromEntries(t.map(r=>[r,e]))}var jse={...Wu(["javascript","typescript","tsx"],[`[
			(call_expression
				function: (identifier) @identifier)
			(call_expression
				function: (member_expression
					(property_identifier) @identifier))
		] @call_expression`]),python:[`[
			(call
				function: (identifier) @identifier)
			(call
				function: (attribute
					attribute: (identifier) @identifier))
		] @call_expression`],csharp:[`[
			(invocation_expression
				function: (identifier) @identifier)
			(invocation_expression
				function: (member_access_expression
					name: (identifier) @identifier))
		] @call_expression`],go:[`[
			(call_expression
				((selector_expression
					(field_identifier) @identifier)))
			(call_expression
				(identifier) @identifier)
		] @call_expression`],java:[`[
			(method_invocation
				name: (identifier) @identifier)
		] @call_expression`],ruby:[`[
			(call (identifier) @identifier
				(#not-match? @identifier "new|send|public_send|method"))
			(call
				receiver: (identifier)
				method: (identifier) @method
				(#match? @method "^(send|public_send|method)")
				arguments: (argument_list
					(simple_symbol) @symbol))
		] @call_expression`],cpp:[`[
			(function_declarator
				(identifier) @identifier)
			(function_declarator
				(field_identifier) @identifier)
			(call_expression (identifier) @identifier)
			(call_expression
				(field_expression
					field: (field_identifier) @identifier))
			(call_expression
				(call_expression
					(primitive_type)
					(argument_list
						(pointer_expression
						(identifier) @identifier))))
		] @call_expression`],rust:[`[
			(call_expression (identifier) @identifier)
			(call_expression (field_expression (identifier) (field_identifier) @identifier))
			(call_expression (scoped_identifier (identifier) (identifier) @identifier (#not-match? @identifier "new")))
		] @call_expression`]},Vse={...Wu(["javascript","typescript","tsx"],["(class_declaration) @class_declaration"]),java:["(class_declaration) @class_declaration"],csharp:["(class_declaration) @class_declaration"],python:["(class_definition) @class_declaration"],cpp:["(class_specifier) @class_declaration"],ruby:["(class) @class_declaration"],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @class_declaration`],rust:["(impl_item (type_identifier) @type_identifier) @class_declaration"]},zse={typescript:[`[
			(interface_declaration)
			(type_alias_declaration)
		] @type_declaration`],csharp:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],cpp:[`[
			(struct_specifier
				(type_identifier) @type_identifier)
			(union_specifier
				(type_identifier) @type_identifier)
			(enum_specifier
				(type_identifier) @type_identifier)
		] @type_declaration`],java:[`(interface_declaration
			(identifier) @type_identifier) @type_declaration`],go:[`(type_declaration
			(type_spec
				(type_identifier) @type_identifier)) @type_declaration`],ruby:["((constant) @type_identifier) @type_declaration"],python:[`(class_definition
			(identifier) @type_identifier) @type_declaration`]},Yse={typescript:["(type_identifier) @type_identifier"],go:["(type_identifier) @type_identifier"],ruby:["(constant) @type_identifier"],csharp:[`[
			(base_list
				(identifier) @type_identifier)
			(variable_declaration
				(identifier) @type_identifier)
		]`],cpp:["(type_identifier) @type_identifier"],java:["(type_identifier) @type_identifier"],python:[`[
			(type (identifier) @type_identifier)
			(argument_list
				(identifier) @type_identifier)
		]`]},$se={...Wu(["javascript","typescript","tsx"],[`(new_expression
			constructor: (identifier) @new_expression)`]),python:[`(call
			function: (identifier) @new_expression)`],csharp:[`(object_creation_expression
			(identifier) @new_expression)`],java:[`(object_creation_expression
			(type_identifier) @new_expression)`],cpp:[`[
			(declaration
				(type_identifier) @new_expression)
			(class_specifier
				(type_identifier) @new_expression)
		]`],go:["(composite_literal (type_identifier) @new_expression)"],ruby:[`((call
			receiver: ((constant) @new_expression)
			method: (identifier) @method)
				(#eq? @method "new"))`],rust:[`(call_expression
			(scoped_identifier
				(identifier) @new_expression
				(identifier) @identifier
				(#eq? @identifier "new")))`]},Wse={python:[`[
			(function_definition
				name: (identifier) @identifier
				body: (block
						(expression_statement (string))? @docstring) @body)
			(assignment
				left: (identifier) @identifier
				right: (lambda) @body)
		] @function`,'(ERROR ("def" (identifier) (parameters))) @function'],...Wu(["javascript","typescript","tsx"],[`[
			(function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(generator_function_declaration
				name: (identifier)? @identifier
				body: (statement_block) @body)
			(method_definition
				name: (property_identifier)? @identifier
				body: (statement_block) @body)
			(arrow_function
				body: (statement_block) @body)
		] @function`]),go:[`[
			(function_declaration
				name: (identifier) @identifier
				body: (block) @body)
			(method_declaration
				name: (field_identifier) @identifier
				body: (block) @body)
		] @function`],ruby:[`[
			(method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
			(singleton_method
				name: (_) @identifier
				parameters: (method_parameters)? @params
				[(_)+ "end"] @body)
		] @function`],csharp:[`[
			(constructor_declaration
				(identifier) @identifier
				(block) @body)
			(destructor_declaration
				(identifier) @identifier
				(block) @body)
			(operator_declaration
				(block) @body)
			(method_declaration
				(identifier) @identifier
				(block) @body)
			(local_function_statement
				(identifier) @identifier
				(block) @body)
		] @function`],cpp:[`[
			(function_definition
				(_
					(identifier) @identifier)
					(compound_statement) @body)
			(function_definition
				(function_declarator
					(qualified_identifier
						(identifier) @identifier))
					(compound_statement) @body)
		] @function`],java:[`[
			(constructor_declaration
				name: (identifier) @identifier
				body: (constructor_body) @body)
			(method_declaration
				name: (_) @identifier
				body: (block) @body)
			(lambda_expression
				body: (block) @body)
		] @function`],rust:[`[
			(function_item (identifier) @identifier)
			(let_declaration (identifier) @identifier)
		] @function`]},Kse={javascript:[Fi.javascript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],...Wu(["typescript","tsx"],[Fi.typescript`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`]),java:[Fi.java`((block_comment) @block_comment
			(#match? @block_comment "^\\\\/\\\\*\\\\*")) @docComment`],cpp:[Fi.cpp`((comment) @comment
			(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment`],csharp:[Fi.csharp`(
			((comment) @c
				(#match? @c "^\\\\/\\\\/\\\\/"))+
		) @docComment`],rust:[Fi.rust`((line_comment) @comment
			(#match? @comment "^\/\/\/|^\/\/!"))+ @docComment`],go:[Fi.go`((comment)+) @docComment`],ruby:[Fi.ruby`((comment)+) @docComment`],python:[`(expression_statement
			(string) @docComment)`]},Xse={javascript:[Fi.javascript`[
			(function_declaration
				(identifier) @function.identifier
			) @function

			(generator_function_declaration
				name: (identifier) @generator_function.identifier
			) @generator_function

			(class_declaration
				name: (identifier) @class.identifier ;; note: (type_identifier) in typescript
				body: (class_body
							(method_definition
								name: (property_identifier) @method.identifier
							) @method
						)
			) @class
		]`],...Wu(["typescript","tsx"],[Fi.typescript`[
				(function_declaration
					(identifier) @function.identifier
				) @function

				(generator_function_declaration
					name: (identifier) @generator_function.identifier
				) @generator_function

				(class_declaration
					name: (type_identifier) @class.identifier
					body: (class_body
								(method_definition
									name: (property_identifier) @method.identifier
								) @method
							)
				) @class
			]`]),python:[Fi.python`[
				(function_definition
					name: (identifier) @function.identifier
				) @function
			]`],go:[Fi.go`[
				(function_declaration
					name: (identifier) @function.identifier
				) @function

				(method_declaration
					name: (field_identifier) @method.identifier
				) @method
			]`],ruby:[Fi.ruby`[
				(method
					name: (identifier) @method.identifier
				) @method

				(singleton_method
					name: (_) @singleton_method.identifier
				) @singleton_method
			]`],csharp:[Fi.csharp`[
				(constructor_declaration
					(identifier) @constructor.identifier
				) @constructor

				(destructor_declaration
					(identifier) @destructor.identifier
				) @destructor

				(method_declaration
					(identifier) @method.identifier
				) @method

				(local_function_statement
					(identifier) @local_function.identifier
				) @local_function
			]`],cpp:[Fi.cpp`[
				(function_definition
					(_
						(identifier) @identifier)
				) @function
			]`],java:[Fi.java`(class_declaration
			body: (_
						[
							(constructor_declaration
								(modifiers)? @constructor.modifiers
								(#not-eq? @constructor.modifiers "private")
								name: (identifier) @constructor.identifier
							) @constructor

							(method_declaration
								(modifiers)? @method.modifiers
								(#not-eq? @method.modifiers "private")
								name: (identifier) @method.identifier
							) @method
						]
					)
		) @class`],rust:[Fi.rust`[
				(function_item
					(identifier) @function.identifier
				) @function
			]`]},Qse={...Wu(["typescript","tsx"],[Fi.typescript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(public_field_definition) @public_field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]
		`]),python:[Fi.python`
			[
				(comment) @comment

				;; simple statements
				(assert_statement) @assert_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(delete_statement) @delete_statement
				(exec_statement) @exec_statement
				(expression_statement) @expression_statement
				(future_import_statement) @future_import_statement
				(global_statement) @global_statement
				(import_from_statement) @import_from_statement
				(import_statement) @import_statement
				(nonlocal_statement) @nonlocal_statement
				(pass_statement) @pass_statement
				(print_statement) @print_statement
				(raise_statement) @raise_statement
				(return_statement) @return_statement
				(type_alias_statement) @type_alias_statement


				;; compound statements

				(class_definition) @class_definition
				(decorated_definition) @decorated_definition
				(for_statement) @for_statement
				(function_definition) @function_definition
				(if_statement) @if_statement
				(try_statement) @try_statement
				(while_statement) @while_statement
				(with_statement) @with_statement


				;; expressions

				(expression_list) @expression_list
				(expression_statement) @expression_statement
			]
		`],javascript:[Fi.javascript`
			[
				(comment) @comment ;; split into multiple comment kinds?

				(declaration) @declaration

				;; class declaration related

				(field_definition) @field_definition
				(method_definition) @method_definition

				;; statements

				(import_statement) @import_statement
				(export_statement) @export_statement

				(expression_statement) @expression_statement

				(for_in_statement) @for_in_statement
				;; exclude any children found in the for loop condition
				(for_statement condition: (_) @for_statement.exclude_captures ) @for_statement
				(break_statement) @break_statement
				(continue_statement) @continue_statement
				(do_statement) @do_statement
				(if_statement) @if_statement
				(switch_statement) @switch_statement
				(switch_case) @switch_case
				(try_statement) @try_statement
				(throw_statement) @throw_statement
				(debugger_statement) @debugger_statement
				(return_statement) @return_statement
			]`],go:[],ruby:[],csharp:[],cpp:[],java:[],rust:[]},Jse={...Wu(["typescript","tsx"],["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"]),javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"],rust:["source_file","function_item","impl_item","let_declaration"]},Zse={typescript:[Yl("typescript")],tsx:[Yl("tsx")],javascript:[Yl("javascript")],java:[Yl("java")],cpp:[Yl("cpp")],csharp:[Yl("csharp")],python:[Yl("python")],go:[Yl("go")],ruby:[Yl("ruby")],rust:[Yl("rust")]},h6e={...Wu(["typescript","tsx","javascript"],["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"]),java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"],rust:["for_statement","if_statement","while_statement","loop_statement","match_expression"]},g6e={...Wu(["typescript","tsx"],["lexical_declaration","expression_statement","public_field_definition"]),javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"],rust:["expression_statement","let_declaration","use_declaration","assignment_expression","macro_definition","extern_crate_declaration"]},v6e={...Wu(["typescript","tsx"],["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition"]),javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:["class","method","module"],rust:["function_item","impl_item","mod_item","struct_item","trait_item","union_item"]},eae={typescript:[$l("typescript")],tsx:[$l("tsx")],javascript:[$l("javascript")],java:[$l("java")],cpp:[$l("cpp")],csharp:[$l("csharp")],python:[$l("python")],go:[$l("go")],rust:[$l("rust")],ruby:[$l("ruby")]};function Yl(t){return Jse[t].map(e=>`(${e}) @scope`).join(`
`)}function $l(t){return`[
		${v6e[t].map(r=>`(${r})`).join(`
`)}
	] @definition`}function II(t,e){return Jse[t].includes(e.type)||h6e[t].includes(e.type)}function MB(t,e){return g6e[t].includes(e.type)}var FB=class{constructor(){this.loadedLanguagesCache=new Map}loadLanguage(e){return this.loadedLanguagesCache.has(e)||this.loadedLanguagesCache.set(e,this._doLoadLanguage(e)),this.loadedLanguagesCache.get(e)}_doLoadLanguage(e){let n=`tree-sitter-${e==="csharp"?"c-sharp":e}.wasm`,i=CI.basename(__dirname)==="dist"?CI.resolve(__dirname,n):CI.resolve(__dirname,"../../../../dist",n);return uD.default.Language.load(i)}},UB=class t{static{this.CACHE_SIZE_PER_LANGUAGE=5}constructor(){this.caches=new Map,this.languageLoader=new FB,this._parser=null}get parser(){return this._parser||(this._parser=new uD.default),this._parser}async parse(e,r){await uD.default.init();let n=this.getParseTreeCache(e),i=n.get(r);if(i)return i.createReference();let o=await this.languageLoader.loadLanguage(e);this.parser.setLanguage(o);let s=this.parser.parse(r),a=new qB(s);return n.put(r,a),a.createReference()}delete(){this._parser&&(this.parser.delete(),this._parser=null);for(let e of this.caches.values())e.dispose()}getParseTreeCache(e){let r=this.caches.get(e);return r||(r=new oD(t.CACHE_SIZE_PER_LANGUAGE),this.caches.set(e,r)),r}},BB=class{constructor(e){this._tree=e;this._refCount=1}get tree(){if(this._refCount===0)throw new Error("Cannot access disposed RefCountedParseTree");return this._tree}ref(){if(this._refCount===0)throw new Error("Cannot ref disposed RefCountedParseTree");this._refCount++}deref(){if(this._refCount===0)throw new Error("Cannot deref disposed RefCountedParseTree");this._refCount--,this._refCount===0&&this._tree.delete()}},qB=class{constructor(e){this._tree=new BB(e)}dispose(){this._tree.deref()}createReference(){return new GB(this._tree)}},GB=class{constructor(e){this._parseTree=e;this._parseTree.ref()}get tree(){return this._parseTree.tree}dispose(){this._parseTree.deref()}},nae=new UB;function _6e(){nae.delete()}function _o(t,e){return nae.parse(t,e)}var HB=class{constructor(e){this.language=e;this.map=new Map}getQuery(e){return this.map.has(e)||this.map.set(e,this.language.query(e)),this.map.get(e)}},jB=class t{constructor(){this.map=new Map}static{this.INSTANCE=new t}getQuery(e,r){return this.map.has(e)||this.map.set(e,new HB(e)),this.map.get(e).getQuery(r)}};function Ku(t,e){let r=[];for(let n of t){let i=jB.INSTANCE.getQuery(e.tree.getLanguage(),n);r.push(...i.matches(e))}return r}function y6e(t,e){let r=Zse[t];return Ku(r,e)}function zB(t,e){let r=Wse[t];return Ku(r,e)}function b6e(t,e){let r=jse[t];return r?Ku(r,e):[]}function x6e(t,e){let r=Vse[t];return r?Ku(r,e):[]}function E6e(t,e){let r=zse[t];return r?Ku(r,e):[]}function T6e(t,e){let r=Yse[t];return r?Ku(r,e):[]}function S6e(t,e){let r=$se[t];return r?Ku(r,e):[]}function I6e(t,e){let r=eae[t];return Ku(r,e)}async function C6e(t,e,r){let n=await _o(t,e);try{return b6e(t,n.tree.rootNode).reduce((s,a)=>{let u=a.captures.find(c=>c.name==="call_expression").node;if(Es.doIntersect(r,u)){let c,l;t==="ruby"&&(l=a.captures.find(d=>d.name==="symbol")?.node,c=l?.text?.slice(1)),l??=a.captures.find(d=>d.name==="identifier")?.node,c??=l?.text,s.push({identifier:c??"",text:u.text,startIndex:(l??u).startIndex,endIndex:(l??u).endIndex})}return s},[])}finally{n.dispose()}}async function w6e(t,e){let r=await _o(t,e);try{return zB(t,r.tree.rootNode).map(o=>{let s=o.captures.find(u=>u.name==="function").node;return{identifier:o.captures.find(u=>u.name==="identifier")?.node.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function R6e(t,e){let r=await _o(t,e);try{return x6e(t,r.tree.rootNode).map(o=>{let s=o.captures.find(u=>u.name==="class_declaration").node;return{identifier:s?.children.find(u=>u.type==="type_identifier"||u.type==="identifier"||u.type==="constant")?.text??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function A6e(t,e){let r=await _o(t,e);try{return E6e(t,r.tree.rootNode).map(o=>{let s=o.captures.find(u=>u.name==="type_declaration").node,a=o.captures.find(u=>u.name==="type_identifier")?.node.text;return a||(a=s?.children.find(u=>u.type==="type_identifier")?.text),{identifier:a??"",text:s.text,startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function P6e(t,e,r){let n=await _o(t,e);try{return T6e(t,n.tree.rootNode).reduce((s,a)=>{let u=a.captures.find(c=>c.name==="type_identifier").node;return Es.doIntersect(r,u)&&s.push({identifier:u.text,text:u.text,startIndex:u.startIndex,endIndex:u.endIndex}),s},[])}finally{n.dispose()}}async function N6e(t,e,r){let n=await _o(t,e);try{return S6e(t,n.tree.rootNode).reduce((s,a)=>{let u=a.captures.find(c=>c.name==="new_expression").node;return Es.doIntersect(r,u)&&s.push({identifier:u.text,text:u.text,startIndex:u.startIndex,endIndex:u.endIndex}),s},[])}finally{n.dispose()}}async function D6e(t,e){let r=await _o(t,e);try{let n=I6e(t,r.tree.rootNode);return Y6e(t,n,r.tree.rootNode)}finally{r.dispose()}}async function k6e(t,e){let r=await _o(t,e);try{return zB(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="function").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function L6e(t,e){let r=await _o(t,e);try{return zB(t,r.tree.rootNode).map(o=>{let s=o.captures.find(a=>a.name==="body").node;return{startIndex:s.startIndex,endIndex:s.endIndex}})}finally{r.dispose()}}async function O6e(t,e,r){let n=await _o(t,e);try{let i=y6e(t,n.tree.rootNode),o;for(let s of i){let a=s.captures[0].node,u=jm.ofSyntaxNode(a);if(jm.doesContain(u,r)&&(o=a),Yu.isBefore(r.endPosition,u.startPosition))break}if(o)return jm.ofSyntaxNode(o);throw new Error("No parent node found")}finally{n.dispose()}}async function M6e(t,e,r,n){let i=await _o(t,e);try{let o=i.tree.rootNode.descendantForPosition(r.startPosition,r.endPosition),s={startPosition:o.startPosition,endPosition:o.endPosition},a=oae(t,o,n,r,!0);return jm.equals(s,a)?iae(t,o):a}finally{i.dispose()}}function iae(t,e){let r=e.parent,n={startPosition:e.startPosition,endPosition:e.endPosition};if(II(t,e)||!r)return n;let{filteredRanges:i,indexOfInterest:o}=sae(t,r.children,n,!1);if(o-1>=0&&o+1<=i.length-1){let s=i[o-1],a=i[o+1];return{startPosition:s.startPosition,endPosition:a.endPosition}}return iae(t,r)}function oae(t,e,r,n,i){let o=e.children;if(e.endPosition.row-e.startPosition.row+1<=r){let a=II(t,e)?{startPosition:e.startPosition,endPosition:e.endPosition}:rae(t,o,r,n,i),u=e.parent;return u?oae(t,u,r,a,!1):a}return rae(t,o,r,n,i)}function tae(t,e){return e.endPosition.row-t.startPosition.row+1}function rae(t,e,r,n,i){if(e.length===0)return n;let{filteredRanges:o,indexOfInterest:s}=sae(t,e,n,i),a=0,u=o.length-1,c=o[a],l=o[u];for(;tae(c,l)>r&&a!==u;)s-a<u-s?(u--,l=o[u]):(a++,c=o[a]);return tae(c,l)<=r?{startPosition:c.startPosition,endPosition:l.endPosition}:n}function sae(t,e,r,n){let i,o;if(n?(i=e.filter(s=>II(t,s)||MB(t,s)),o=Bse(i,r,(s,a)=>Yu.isBefore(s.startPosition,a.startPosition)),i.splice(o,0,r)):(i=e.filter(s=>jm.doesContain(s,r)||II(t,s)||MB(t,s)),o=i.findIndex(s=>jm.doesContain(s,r))),o===-1)throw new Error("Valid index not found");return{filteredRanges:i,indexOfInterest:o}}function lD(t,e,r,n=YB){let i=[t.rootNode],o=[];for(;;){let s=i.map(a=>[a,Es.intersectionSize(a,e)]).filter(([a,u])=>u>0).sort(([a,u],[c,l])=>l-u);if(s.length===0)return o.length===0?void 0:qse(o,([a,u],[c,l])=>u-l)[0];{let a=s.map(([u,c])=>{let l=Es.len(u),d=Math.abs(Es.len(e)-c),f=(c-d)/l;return[u,f]});o.push(...a.filter(([u,c])=>n(u,r))),i=[],i.push(...a.flatMap(([u,c])=>u.children))}}}async function F6e(t,e,r){let n=await _o(t,e);try{let i=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex);if(i.type.match(/identifier/)&&(i.parent===null||YB(i.parent,t))){let o=i.parent,s=o===null?void 0:{startIndex:o.startIndex,endIndex:o.endIndex};return{identifier:i.text,nodeRange:s}}}finally{n.dispose()}}async function U6e(t,e,r){let n=await _o(t,e);try{let i=Xse[t],a=Ku(i,n.tree.rootNode).flatMap(({captures:u})=>u).filter(({name:u})=>u.endsWith("identifier")).find(({node:u})=>Es.doesContain(u,r));return a?{identifier:a.node.text}:void 0}catch{return}finally{n.dispose()}}async function B6e(t,e,r){let n=await _o(t,e);try{let o=r.startIndex===r.endIndex?void 0:lD(n.tree,r,t);if(o)return{nodeIdentifier:VB(o,t),nodeToDocument:sD.ofSyntaxNode(o),nodeSelectionBy:"matchingSelection"};let a=n.tree.rootNode.descendantForIndex(r.startIndex,r.endIndex),u=0;for(;!YB(a,t)&&a.parent!==null;)a=a.parent,++u;return{nodeIdentifier:VB(a,t),nodeToDocument:sD.ofSyntaxNode(a),nodeSelectionBy:"expanding"}}finally{n.dispose()}}async function q6e(t,e,r){let n=await _o(t,e);try{let i=r.startIndex===r.endIndex;if(i)return;let o=i?void 0:lD(n.tree,r,t),s=i?void 0:lD(n.tree,r,t,G6e);if(s&&o)return{nodeIdentifier:VB(o,t),nodeToExplain:sD.ofSyntaxNode(s)}}finally{n.dispose()}}function VB(t,e){switch(e){case"python":case"csharp":return t.children.find(r=>r.type.match(/identifier/))?.text;case"go":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/spec/))?.children.find(i=>i.type.match(/identifier/))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":case"java":{let r=t.children.find(i=>i.type.match(/identifier/));return r?r.text:t.children.find(i=>i.type.match(/declarator/))?.children.find(i=>i.type.match(/identifier/))?.text}case"ruby":return t.children.find(r=>r.type.match(/constant|identifier/))?.text;default:return t.children.find(r=>r.type.match(/identifier/))?.text}}function G6e(t,e){return t.type.match(/definition/)}function YB(t,e){switch(e){case"typescript":case"tsx":case"javascript":return t.type.match(/definition|declaration|declarator|export_statement/);case"go":return t.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return t.type.match(/definition|declaration|declarator|class_specifier/);case"ruby":return t.type.match(/module|class|method|assignment/);default:return t.type.match(/definition|declaration|declarator/)}}async function H6e(t,e){if(!new Set(["javascript","typescript","java","cpp","csharp","go","ruby"]).has(t))return;let n=await _o(t,e);try{let i=Kse[t],o=Ku(i,n.tree.rootNode).flatMap(a=>a.captures.filter(u=>u.name==="docComment")),s=j6e(o);if(s.length>1&&(s=s.filter(a=>a.includes(`
`)||!a.match(/(implementation code|code implementation|implementation details|\.\.\.)/i))),s.length===1)return s[0]}finally{n.dispose()}}function j6e(t){let e=[];for(let r=0;r<t.length;++r){let n=[t[r].node.text];for(;r+1<t.length&&t[r].node.endPosition.row+1===t[r+1].node.startPosition.row;)++r,n.push(t[r].node.text);e.push(n.join(`
`))}return e}async function V6e(t,e){let r=Qse[t];if(r.length===0)return;let n=await _o(t,e);try{let i=Ku(r,n.tree.rootNode).flatMap(u=>u.captures).sort((u,c)=>Es.compare(u.node,c.node)),o=new Set;for(let u of i)u.name.endsWith(".exclude_captures")&&o.add(Es.ofSyntaxNode(u.node));let s=new SI(0,e.length,"root",[]),a=[s];for(let u=0;u<i.length;++u){let l=i[u].node;if(z6e(l,o))continue;let d;do d=a.pop();while(d&&!Es.doesContain(d,l));if(new Set(["export_statement","ambient_declaration"]).has(d.kind))d.kind=l.type,a.push(d);else{let f=new SI(l.startIndex,l.endIndex,l.type,[]);d.children.push(f),a.push(d,f)}}return s}catch(i){console.error(i instanceof Error?i:new Error(i))}finally{n.dispose()}}function z6e(t,e){for(let r of e)if(Es.doesContain(r,t))return!0;return!1}function Y6e(t,e,r){let n;switch(t){case"python":n=X6e(e);break;case"ruby":n=K6e(e);break;default:{n=$6e(e,t);break}}return new aD(n,$u.ofSyntaxNode(r))}function $6e(t,e){let r=new Map;return t.forEach(n=>{let o=n.captures.find(a=>a.name==="definition")?.node,s=o?.childForFieldName("body");if(o&&s){let a;switch(e){case"typescript":case"javascript":a=Q6e(o);break;case"java":case"rust":a=J6e(o);break;default:{a=wI(o);break}}r.get(o.id)||r.set(o.id,{mainBlock:$u.ofSyntaxNode(o),detailBlocks:{comments:a.map(c=>$u.ofSyntaxNode(c)),body:$u.ofSyntaxNode(s)}})}}),Array.from(r.values())}function W6e(t){if(!(t.length<2))for(let e=1;e<t.length;e++){let r=t[e];if(!r.type.includes("parameters"))return r}}function K6e(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(o=>o.name==="definition")?.node;if(i){let o=i.namedChildren,s=W6e(o);if(s){let a=o[o.length-1],u=i.text.substring(s.startIndex-i.startIndex,a.endIndex-i.startIndex),c=wI(i);e.get(i.id)||e.set(i.id,{mainBlock:$u.ofSyntaxNode(i),detailBlocks:{comments:c.map(d=>$u.ofSyntaxNode(d)),body:{range:{startPosition:{row:s.startPosition.row,column:s.startPosition.column},endPosition:{row:a.endPosition.row,column:a.endPosition.column}},startIndex:s.startIndex,text:u,endIndex:a.endIndex}}})}}}),Array.from(e.values())}function X6e(t){let e=new Map;return t.forEach(r=>{let i=r.captures.find(s=>s.name==="definition")?.node,o=i?.childForFieldName("body");if(i&&o){let s=e8e(o),a=Z6e(i);e.set(i.id,{mainBlock:$u.ofSyntaxNode(i),detailBlocks:{docstring:s?$u.ofSyntaxNode(s):void 0,decorator:a?$u.ofSyntaxNode(a):void 0,body:$u.ofSyntaxNode(o)}});return}}),Array.from(e.values())}function wI(t,e=["comment"]){let r=[],n=t.previousNamedSibling;for(;n&&e.some(i=>i===n?.type);)r.push(n),n=n.previousNamedSibling;return r.reverse()}function Q6e(t){let e=t.parent;return e?.type==="export_statement"?wI(e):wI(t)}function J6e(t){return wI(t,["block_comment","line_comment"])}function Z6e(t){let e=t.previousNamedSibling;return e?.type==="decorator"?e:void 0}function e8e(t){let e=t.firstChild;if(!e||e.type!=="expression_statement")return;let r=e.firstChild;return r?.type==="string"?r:void 0}var t8e=cae.join(__dirname,"worker2.js"),dD=class{constructor(e,r){this._parser=new WB($B,t8e,r,e.getLogger("parser proxy"))}dispose(){this._parser.dispose()}getTreeSitterAST(e){let r=Ub(e.languageId);if(r)return this.getTreeSitterASTForWASMLanguage(r,e.getText())}getTreeSitterASTForWASMLanguage(e,r){let n=this._parser.proxy;return{getFunctionPositions:()=>n._getFunctionPositions(e,r),getFunctionBodies:()=>n._getFunctionBodies(e,r),getCoarseParentScope:i=>n._getCoarseParentScope(e,r,i),getFixSelectionOfInterest:(i,o)=>n._getFixSelectionOfInterest(e,r,i,o),getCallExpressions:i=>n._getCallExpressions(e,r,i),getFunctionDefinitions:()=>n._getFunctionDefinitions(e,r),getClassReferences:i=>n._getClassReferences(e,r,i),getClassDeclarations:()=>n._getClassDeclarations(e,r),getTypeDeclarations:()=>n._getTypeDeclarations(e,r),getTypeReferences:i=>n._getTypeReferences(e,r,i),getDocumentableNodeIfOnIdentifier:i=>n._getDocumentableNodeIfOnIdentifier(e,r,i),getTestableNode:i=>n._getTestableNode(e,r,i),getNodeToExplain:i=>n._getNodeToExplain(e,r,i),getNodeToDocument:i=>n._getNodeToDocument(e,r,i),getStructure:()=>n._getStructure(e,r)}}extractDoc(e,r){return this._parser.proxy._extractDoc(e,r)}getSemanticChunkTree(e,r){return this._parser.proxy._getSemanticChunkTree(e,r)}getStructure(e,r){return this._parser.proxy._getStructure(e,r)}},WB=class{constructor(e,r,n,i){this._workerPath=r;this._useWorker=n;this._local=new Proxy(e,{get:(o,s,a)=>{let u=o[s];return typeof u!="function"?u:async(...c)=>{let l=await u.apply(o,aae(c));return aae(l)}}}),this._worker=new ga(()=>new Hm(this._workerPath,i))}get proxy(){return this._useWorker?this._worker.value.proxy:this._local}dispose(){this._worker.hasValue&&this._worker.value.terminate()}};function aae(t){return typeof t>"u"?t:JSON.parse(JSON.stringify(t))}var pD=require("vscode");var mD=se("IRemoteRepositoriesService"),fD=class{async loadWorkspaceContents(e){return await(await this.getApi()).loadWorkspaceContents?.(e)??!1}getApi(){return this.getRemoteExtension().activate()}getRemoteExtension(){if(this._remoteHub!==void 0)return this._remoteHub;if(this._remoteHub=pD.extensions.getExtension("ms-vscode.remote-repositories")??pD.extensions.getExtension("GitHub.remoteHub")??pD.extensions.getExtension("GitHub.remoteHub-insiders"),this._remoteHub===void 0)throw new Error("No Remote repository extension found.");return this._remoteHub}};var Up=se("ISearchService"),hD=class{async findFilesWithDefaultExcludes(e,r,n){return this._findFilesWithDefaultExcludesAndExcludes(e,void 0,r,n)}async _findFilesWithDefaultExcludesAndExcludes(e,r,n,i){let o={maxResults:n,exclude:r,useDefaultExcludes:!0,useDefaultSearchExcludes:!0},s=await this.findFiles(e,o,i);return n===1?s[0]:s}};var KB=we(require("vscode"));var Bb=class extends hD{findTextInFiles(e,r,n,i){return Promise.resolve(KB.workspace.findTextInFiles(e,r,o=>n.report(o),i))}findFiles(e,r,n){return KB.workspace.findFiles2(e,r,n)}};var gD=class extends Bb{constructor(r){super();this._ignoreService=r.get(Wt)}async findFilesWithDefaultExcludes(r,n,i){let o=this._ignoreService.asMinimatchPattern({includeCopilotIgnore:!0,includeGitIgnore:!1});return this._findFilesWithDefaultExcludesAndExcludes(r,o,n,i)}async findFiles(r,n,i){return await super.findFiles(r,n,i)}async findTextInFiles(r,n,i,o){let s={report:a=>{this._ignoreService.isCopilotIgnored(a.uri)||i.report(a)}};return super.findTextInFiles(r,n,s,o)}};var ir=se("ITabsAndEditorsService");var $o=we(require("vscode"));var vD=class{constructor(e){this._ignoreService=e;this._store=new $r;this._tabGroupsUseInfo=new Map;this._tabClock=0;this.onDidChangeActiveTextEditor=$o.window.onDidChangeActiveTextEditor;this.onDidChangeTabs=$o.window.tabGroups.onDidChangeTabs;this._store.add($o.window.tabGroups.onDidChangeTabGroups(r=>{r.closed.forEach(n=>this._tabGroupsUseInfo.delete(n)),this._tabGroupsUseInfo.set($o.window.tabGroups.activeTabGroup,this._tabClock++)}))}dispose(){this._store.dispose()}get activeTextEditor(){let e=$o.window.activeTextEditor;if(e&&e.document.uri.scheme!=="output")return this._ignoreService.isCopilotIgnored(e.document.uri)?void 0:e;let r=new hi;$o.window.visibleTextEditors.forEach(i=>r.set(i.document.uri,i));let n=[...this._tabGroupsUseInfo];n.sort((i,o)=>o[1]-i[1]);for(let[i]of n)if(i.activeTab){let o=this._asTabInfo(i.activeTab);if(o.uri&&r.has(o.uri)){let s=r.get(o.uri);return s&&this._ignoreService.isCopilotIgnored(s.document.uri)?void 0:s}}}get activeNotebookEditor(){return $o.window.activeNotebookEditor}get tabs(){return $o.window.tabGroups.all.flatMap(r=>r.tabs).map(this._asTabInfo,this).filter(r=>r.uri?!this._ignoreService.isCopilotIgnored(r.uri):!0)}_asTabInfo(e){let r;return e.input instanceof $o.TabInputText||e.input instanceof $o.TabInputNotebook?r=e.input.uri:(e.input instanceof $o.TabInputTextDiff||e.input instanceof $o.TabInputNotebookDiff)&&(r=e.input.modified),{tab:e,uri:r}}};var kr=se("IExperimentationService"),_D=class{constructor(){this.initializePromise=Promise.resolve();this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};var yD=class{dispose(){}sendInternalMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryErrorEvent(e,r,n){}sendGHTelemetryEvent(e,r,n){}sendGHTelemetryErrorEvent(e,r,n){}sendGHTelemetryException(e,r){}sendTelemetryEvent(e,r,n,i){}sendTelemetryErrorEvent(e,r,n,i){}setSharedProperty(e,r){}postEvent(e,r){}sendRestrictedGHTelemetryEvent(e,r,n){}sendRestrictedGHTelemetryErrorEvent(e,r,n){}};var gbe=we(hbe()),AL=we(require("os"));var yh=class{constructor(e,r,n){this.namespace=r;this.client=HKe(e,n),vbe(e,this.client)}separateData(e){let r={},n={};for(let[i,o]of Object.entries(e))typeof o=="number"?n[i]=o:r[i]=o;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackEvent({name:this.qualifyEventName(e),properties:n,measurements:i})}sendErrorData(e,r){let{properties:n,measurements:i}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:i})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}qualifyEventName(e){return e.includes(this.namespace)?e:`${this.namespace}/${e}`}};function HKe(t,e){let r=new gbe.TelemetryClient(e);return r.config.enableAutoCollectRequests=!1,r.config.enableAutoCollectPerformance=!1,r.config.enableAutoCollectExceptions=!1,r.config.enableAutoCollectConsole=!1,r.config.enableAutoCollectDependencies=!1,r.config.noDiagnosticChannel=!0,vbe(t,r),r}function vbe(t,e){e.commonProperties=jKe(e.commonProperties,t),e.context.tags[e.context.keys.cloudRoleInstance]="REDACTED",e.config.endpointUrl=t.get(sN).getUrl()}function jKe(t,e){t=t||{},t.common_os=AL.platform(),t.common_platformversion=AL.release();let r=e.get(gt);return t.common_vscodemachineid=r.machineId,t.common_vscodesessionid=r.sessionId,t.common_uikind="desktop",t.common_remotename="none",t.common_isnewappinstall="",t}var Xz="7d7048df-6dd0-4048-bb23-b716c1461f8f",Qz="3fdd7f28-937a-48c8-9a21-ba337db23bd1";async function Jz(t,e,r){let n=t.get(Om);if(await n.deactivate(),!r)return;let i=new yh(t,e,Xz),o=new yh(t,e,Qz);return n.setReporter(i),n.setSecureReporter(o),{dispose(){n.setReporter(void 0),n.setSecureReporter(void 0),i.flush(),o.flush()}}}var n2=we(Lbe());function lXe(t){return t?n2.TargetPopulation.Insiders:n2.TargetPopulation.Public}async function Obe(t,e,r){let n=t.extension.id,i=t.extension.packageJSON.version,o=lXe(r);return(0,n2.getExperimentationService)(n,i,o,e,t.globalState)}var mY=require("vscode");function GL(t){return t.replace(/([\s|(]|file:\/\/)(\/[^\s]+)/g,"$1[redacted]").replace(/([\s|(]|file:\/\/)([a-zA-Z]:[(\\|/){1,2}][^\s]+)/gi,"$1[redacted]").replace(/([\s|(]|file:\/\/)(\\[^\s]+)/gi,"$1[redacted]")}var HL=class{constructor(e,r,n,i,o){this._accessor=e;this._restrictedTelemetryEnabled=!1;this._disposables=[];this._nonRestrictedTelemetryLogger=mY.env.createTelemetryLogger(new yh(this._accessor,r,n)),this._disposables.push(o.onCopilotToken(s=>{s.token.getTokenValue("rt")==="1"?(this._restrictedTelemetryEnabled=!0,this._restrictedTelemetryLogger=mY.env.createTelemetryLogger(new yh(this._accessor,r,i))):(this._restrictedTelemetryEnabled=!1,this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose(),this._restrictedTelemetryLogger=void 0)}))}sendTelemetryEvent(e,r,n){this._nonRestrictedTelemetryLogger.logUsage(e,{properties:r,measurements:n})}sendTelemetryErrorEvent(e,r,n){this._nonRestrictedTelemetryLogger.logError(e,{properties:r,measurements:n})}sendRestrictedTelemetryEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logUsage(e,{properties:r,measurements:n})}sendRestrictedTelemetryErrorEvent(e,r,n){this._restrictedTelemetryEnabled&&this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger?.logError(e,{properties:r,measurements:n})}async sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=Tr.createAndMarkAsIssued({origin:GL(r),reason:this._restrictedTelemetryEnabled?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await i.makeReadyForSending(this._accessor,!1,"IncludeExp"),this.sendTelemetryEvent("exception",i.properties,i.measurements),!this._restrictedTelemetryEnabled||!this._restrictedTelemetryLogger)return;let o=Tr.createAndMarkAsIssued({origin:r});await o.makeReadyForSending(this._accessor,!0,"IncludeExp"),this._restrictedTelemetryLogger.logError(n,o)}dispose(){this._nonRestrictedTelemetryLogger.dispose(),this._disposables.forEach(e=>e.dispose()),this._restrictedTelemetryLogger&&this._restrictedTelemetryLogger.dispose()}};var mJ=we(Rwe());var d8=class{constructor(e,r,n,i){this._isInternal=!1;i.onCopilotToken(async o=>{if(this._username=(await Bc(e))?.account?.label,this._sku=o.token.getTokenValue("sku"),this._isInternal=o.token.isInternal,this.sendTelemetryEvent("token",{},{chatEnabled:o.envelope.chat_enabled?1:0,snippyEnabled:o.envelope.public_suggestions==="enabled"?1:0,telemetryEnabled:o.envelope.telemetry==="enabled"?1:0}),!o.token.organization_list||!o.envelope.chat_enabled){this._internalTelemetryReporter=void 0;return}o.token.isInternal&&(this._internalTelemetryReporter=new mJ.default(r))}),this._externalTelemetryReporter=new mJ.default(n)}dispose(){this._externalTelemetryReporter.dispose(),this._internalTelemetryReporter?.dispose()}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this._isInternal&&this.sendInternalTelemetryEvent(e,n),this.sendTelemetryEvent(e,n)}sendInternalTelemetryEvent(e,r,n){this._internalTelemetryReporter&&(r={...r,"common.userName":this._username??"undefined"},this._internalTelemetryReporter.sendRawTelemetryEvent(e,r,n))}sendTelemetryEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryEvent(e,r,n)}sendTelemetryErrorEvent(e,r,n){r={...r,"common.sku":this._sku??"undefined"},this._isInternal&&(n={...n,"common.internal":1}),this._externalTelemetryReporter.sendTelemetryErrorEvent(e,r,n)}};var p8=class{constructor(e,r,n,i,o,s){this._sharedProperties={};let a=r.get(ke),u=r.get(ys);this._microsoftTelemetryService=new d8(a,n,i,u),this._ghTelemetryService=new HL(r,e,o,s,u)}dispose(){this._microsoftTelemetryService.dispose(),this._ghTelemetryService.dispose()}sendMSFTTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!1,microsoft:!0},r,n)}sendMSFTTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!1,microsoft:!0},r,n)}sendGHTelemetryEvent(e,r,n){this.sendTelemetryEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryErrorEvent(e,r,n){this.sendTelemetryErrorEvent(e,{github:!0,microsoft:!1},r,n)}sendGHTelemetryException(e,r){this._ghTelemetryService.sendExceptionTelemetry(e,r)}sendRestrictedGHTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryEvent(e,r,n)}sendRestrictedGHTelemetryErrorEvent(e,r,n){r={...r,...this._sharedProperties},this._ghTelemetryService.sendRestrictedTelemetryErrorEvent(e,r,n)}sendInternalMSFTTelemetryEvent(e,r,n){r={...r,...this._sharedProperties},this._microsoftTelemetryService.sendInternalTelemetryEvent(e,r,n)}sendTelemetryEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryEvent(e,n,i)}sendTelemetryErrorEvent(e,r,n,i){n={...n,...this._sharedProperties},r.github&&this._ghTelemetryService.sendTelemetryErrorEvent(e,n,i),r.microsoft&&this._microsoftTelemetryService.sendTelemetryErrorEvent(e,n,i)}setSharedProperty(e,r){this._sharedProperties[e]=r}postEvent(e,r){this._microsoftTelemetryService.postEvent(e,r)}};var Eu=se("ITerminalService");var Pwe=require("path"),Nwe=require("process"),Yg=require("vscode"),f8=new Map,gJ=new Map;function Dwe(){let t=Yg.window.activeTerminal;return t===void 0?"":f8.get(t)?.join(`
`)||""}function kwe(){let t=Yg.window.activeTerminal;if(t!==void 0)return gJ.get(t)?.at(-1)}function Lwe(){try{return Yg.window.activeTerminal?.selection??""}catch{return""}}var hJ;function Owe(){let t=Yg.window.activeTerminal;if(t&&"shellPath"in t.creationOptions){let e=t.creationOptions.shellPath;if(e){let r,n=(0,Pwe.basename)(e);if(n==="bash.exe")r="Git Bash";else{let i=n.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":r="powershell";case"":break;default:r=i}}if(r)return hJ=r,r}}return hJ||(Nwe.platform==="win32"?"powershell":"bash")}function Awe(t,e){t.push(e),t.length>40&&t.shift()}function Stt(t){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return t&&(t=t.replace(e,"")),t}function Mwe(){return[Yg.window.onDidWriteTerminalData(t=>{let e=f8.get(t.terminal);e||(e=[],f8.set(t.terminal,e)),Awe(e,Stt(t.data))}),Yg.window.onDidExecuteTerminalCommand(t=>{let e=gJ.get(t.terminal);e||(e=[],gJ.set(t.terminal,e)),Awe(e,t)}),Yg.window.onDidCloseTerminal(t=>{f8.delete(t)})]}var m8=class extends Ji{constructor(){super();for(let e of Mwe())this._register(e)}get terminalBuffer(){return Dwe()}get terminalLastCommand(){return kwe()}get terminalSelection(){return Lwe()}get terminalShellType(){return Owe()}};var h8=we(require("fs"));var _J=`${process.env.HOME||process.env.USERPROFILE}/.copilot-testing-gh-token`,vJ;function Fwe(){return vJ||(vJ=Itt()),vJ}var Itt=()=>{if(process.env.GITHUB_PAT)return new Cb(process.env.GITHUB_PAT);if(process.env.GITHUB_OAUTH_TOKEN)return new mI({token:process.env.GITHUB_OAUTH_TOKEN});let t=Ctt();if(t)return new mI({token:t.trim()});throw new Error(`Tests: either GITHUB_PAT must be set, or there must be a GitHub token from an app with access to Copilot in ${_J}. Run "npm run get_token" to get one.`)};function Ctt(){if(h8.existsSync(_J))return h8.readFileSync(_J).toString()}var g8=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var st=se("IWorkspaceService"),v8=class{getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>r.scheme===e.scheme&&r.authority===e.authority&&e.fsPath.startsWith(r.fsPath))}};function $g(t,e){let r=t.getWorkspaceFolder(e);return r?_r.relative(r.path,e.path):e.path}var Wg=require("vscode");function Uwe(t){return t.scheme==="vscode-vfs"&&t.authority.startsWith("github")}var _8=class extends v8{constructor(r){super();this._accessor=r;this.onDidOpenTextDocument=Wg.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=Wg.workspace.onDidChangeTextDocument;this.onDidCloseTextDocument=Wg.workspace.onDidCloseTextDocument;this._logger=this._accessor.get(Ee).getLogger("ExtensionTextDocumentManager")}get textDocuments(){return Wg.workspace.textDocuments}async openTextDocument(r){return await Wg.workspace.openTextDocument(r)}get notebookDocuments(){return Wg.workspace.notebookDocuments}getWorkspaceFolders(){return Wg.workspace.workspaceFolders?.map(r=>r.uri)??[]}ensureWorkspaceIsFullyLoaded(){return this._fullyLoadedPromise??=(async()=>{let r=this._accessor.get(mD);for(let n of this.getWorkspaceFolders())if(Uwe(n)){this._logger.debug(`Preloading virtual workspace contents for ${n}`);try{let i=await r.loadWorkspaceContents(n);this._logger.info(`loading virtual workspace contents resulted in ${i} for: ${n}`)}catch(i){this._logger.error(`Error loading virtual workspace contents for ${n}: ${i}`)}}})(),this._fullyLoadedPromise}};var wJ={};Fn(wJ,{arrayReplaceAt:()=>CJ,assign:()=>IT,escapeHtml:()=>rm,escapeRE:()=>urt,fromCodePoint:()=>UR,has:()=>Jtt,isMdAsciiPunct:()=>Cy,isPunctChar:()=>Iy,isSpace:()=>er,isString:()=>A8,isValidEntityCode:()=>P8,isWhiteSpace:()=>Sy,lib:()=>lrt,normalizeReference:()=>wy,unescapeAll:()=>Qg,unescapeMd:()=>nrt});var T8={};Fn(T8,{decode:()=>MR,encode:()=>x8,format:()=>TT,parse:()=>FR});var Bwe={};function wtt(t){let e=Bwe[t];if(e)return e;e=Bwe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);e.push(n)}for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function y8(t,e){typeof e!="string"&&(e=y8.defaultChars);let r=wtt(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(n){let i="";for(let o=0,s=n.length;o<s;o+=3){let a=parseInt(n.slice(o+1,o+3),16);if(a<128){i+=r[a];continue}if((a&224)===192&&o+3<s){let u=parseInt(n.slice(o+4,o+6),16);if((u&192)===128){let c=a<<6&1984|u&63;c<128?i+="\uFFFD\uFFFD":i+=String.fromCharCode(c),o+=3;continue}}if((a&240)===224&&o+6<s){let u=parseInt(n.slice(o+4,o+6),16),c=parseInt(n.slice(o+7,o+9),16);if((u&192)===128&&(c&192)===128){let l=a<<12&61440|u<<6&4032|c&63;l<2048||l>=55296&&l<=57343?i+="\uFFFD\uFFFD\uFFFD":i+=String.fromCharCode(l),o+=6;continue}}if((a&248)===240&&o+9<s){let u=parseInt(n.slice(o+4,o+6),16),c=parseInt(n.slice(o+7,o+9),16),l=parseInt(n.slice(o+10,o+12),16);if((u&192)===128&&(c&192)===128&&(l&192)===128){let d=a<<18&1835008|u<<12&258048|c<<6&4032|l&63;d<65536||d>1114111?i+="\uFFFD\uFFFD\uFFFD\uFFFD":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}i+="\uFFFD"}return i})}y8.defaultChars=";/?:@&=+$,#";y8.componentChars="";var MR=y8;var qwe={};function Rtt(t){let e=qwe[t];if(e)return e;e=qwe[t]=[];for(let r=0;r<128;r++){let n=String.fromCharCode(r);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<t.length;r++)e[t.charCodeAt(r)]=t[r];return e}function b8(t,e,r){typeof e!="string"&&(r=e,e=b8.defaultChars),typeof r>"u"&&(r=!0);let n=Rtt(e),i="";for(let o=0,s=t.length;o<s;o++){let a=t.charCodeAt(o);if(r&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){i+=t.slice(o,o+3),o+=2;continue}if(a<128){i+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){let u=t.charCodeAt(o+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[o])}return i}b8.defaultChars=";/?:@&=+$,-_.!~*'()#";b8.componentChars="-_.!~*'()";var x8=b8;function TT(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function E8(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Att=/^([a-z0-9.+-]+:)/i,Ptt=/:[0-9]*$/,Ntt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Dtt=["<",">",'"',"`"," ","\r",`
`,"	"],ktt=["{","}","|","\\","^","`"].concat(Dtt),Ltt=["'"].concat(ktt),Gwe=["%","/","?",";","#"].concat(Ltt),Hwe=["/","?","#"],Ott=255,jwe=/^[+a-z0-9A-Z_-]{0,63}$/,Mtt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Vwe={javascript:!0,"javascript:":!0},zwe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ftt(t,e){if(t&&t instanceof E8)return t;let r=new E8;return r.parse(t,e),r}E8.prototype.parse=function(t,e){let r,n,i,o=t;if(o=o.trim(),!e&&t.split("#").length===1){let c=Ntt.exec(o);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let s=Att.exec(o);if(s&&(s=s[0],r=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&Vwe[s])&&(o=o.substr(2),this.slashes=!0)),!Vwe[s]&&(i||s&&!zwe[s])){let c=-1;for(let m=0;m<Hwe.length;m++)n=o.indexOf(Hwe[m]),n!==-1&&(c===-1||n<c)&&(c=n);let l,d;c===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",c),d!==-1&&(l=o.slice(0,d),o=o.slice(d+1),this.auth=l),c=-1;for(let m=0;m<Gwe.length;m++)n=o.indexOf(Gwe[m]),n!==-1&&(c===-1||n<c)&&(c=n);c===-1&&(c=o.length),o[c-1]===":"&&c--;let p=o.slice(0,c);o=o.slice(c),this.parseHost(p),this.hostname=this.hostname||"";let f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){let m=this.hostname.split(/\./);for(let h=0,g=m.length;h<g;h++){let v=m[h];if(v&&!v.match(jwe)){let _="";for(let y=0,E=v.length;y<E;y++)v.charCodeAt(y)>127?_+="x":_+=v[y];if(!_.match(jwe)){let y=m.slice(0,h),E=m.slice(h+1),x=v.match(Mtt);x&&(y.push(x[1]),E.unshift(x[2])),E.length&&(o=E.join(".")+o),this.hostname=y.join(".");break}}}}this.hostname.length>Ott&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));let u=o.indexOf("?");return u!==-1&&(this.search=o.substr(u),o=o.slice(0,u)),o&&(this.pathname=o),zwe[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};E8.prototype.parseHost=function(t){let e=Ptt.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var FR=Ftt;var yJ={};Fn(yJ,{Any:()=>S8,Cc:()=>I8,Cf:()=>Ywe,P:()=>ST,Z:()=>C8});var S8=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var I8=/[\0-\x1F\x7F-\x9F]/;var Ywe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/;var ST=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;var C8=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;var $we=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(t=>t.charCodeAt(0)));var Wwe=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(t=>t.charCodeAt(0)));var bJ,Utt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),xJ=(bJ=String.fromCodePoint)!==null&&bJ!==void 0?bJ:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function EJ(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Utt.get(t))!==null&&e!==void 0?e:t}var Do;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Do||(Do={}));var Btt=32,Kg;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Kg||(Kg={}));function TJ(t){return t>=Do.ZERO&&t<=Do.NINE}function qtt(t){return t>=Do.UPPER_A&&t<=Do.UPPER_F||t>=Do.LOWER_A&&t<=Do.LOWER_F}function Gtt(t){return t>=Do.UPPER_A&&t<=Do.UPPER_Z||t>=Do.LOWER_A&&t<=Do.LOWER_Z||TJ(t)}function Htt(t){return t===Do.EQUALS||Gtt(t)}var No;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(No||(No={}));var Qd;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Qd||(Qd={}));var w8=class{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=No.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Qd.Strict}startEntity(e){this.decodeMode=e,this.state=No.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case No.EntityStart:return e.charCodeAt(r)===Do.NUM?(this.state=No.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=No.NamedEntity,this.stateNamedEntity(e,r));case No.NumericStart:return this.stateNumericStart(e,r);case No.NumericDecimal:return this.stateNumericDecimal(e,r);case No.NumericHex:return this.stateNumericHex(e,r);case No.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|Btt)===Do.LOWER_X?(this.state=No.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=No.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,i){if(r!==n){let o=n-r;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(r,o),i),this.consumed+=o}}stateNumericHex(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(TJ(i)||qtt(i))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){let n=r;for(;r<e.length;){let i=e.charCodeAt(r);if(TJ(i))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Do.SEMI)this.consumed+=1;else if(this.decodeMode===Qd.Strict)return 0;return this.emitCodePoint(EJ(this.result),this.consumed),this.errors&&(e!==Do.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){let{decodeTree:n}=this,i=n[this.treeIndex],o=(i&Kg.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){let s=e.charCodeAt(r);if(this.treeIndex=jtt(n,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Qd.Attribute&&(o===0||Htt(s))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],o=(i&Kg.VALUE_LENGTH)>>14,o!==0){if(s===Do.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Qd.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;let{result:r,decodeTree:n}=this,i=(n[r]&Kg.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){let{decodeTree:i}=this;return this.emitCodePoint(r===1?i[e]&~Kg.VALUE_LENGTH:i[e+1],n),r===3&&this.emitCodePoint(i[e+2],n),n}end(){var e;switch(this.state){case No.NamedEntity:return this.result!==0&&(this.decodeMode!==Qd.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case No.NumericDecimal:return this.emitNumericEntity(0,2);case No.NumericHex:return this.emitNumericEntity(0,3);case No.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case No.EntityStart:return 0}}};function Kwe(t){let e="",r=new w8(t,n=>e+=xJ(n));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),r.startEntity(o);let c=r.write(i,a+1);if(c<0){s=a+r.end();break}s=a+c,a=c===0?s+1:s}let u=e+i.slice(s);return e="",u}}function jtt(t,e,r,n){let i=(e&Kg.BRANCH_LENGTH)>>7,o=e&Kg.JUMP_TABLE;if(i===0)return o!==0&&n===o?r:-1;if(o){let u=n-o;return u<0||u>=i?-1:t[r+u]-1}let s=r,a=s+i-1;for(;s<=a;){let u=s+a>>>1,c=t[u];if(c<n)s=u+1;else if(c>n)a=u-1;else return t[u+i]}return-1}var Vtt=Kwe($we),IQt=Kwe(Wwe);function Xg(t,e=Qd.Legacy){return Vtt(t,e)}function R8(t){for(let e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}var ztt=new Map(R8([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(R8([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(R8([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(R8([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Ytt=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),$tt=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function SJ(t,e){return function(n){let i,o=0,s="";for(;i=t.exec(n);)o!==i.index&&(s+=n.substring(o,i.index)),s+=e.get(i[0].charCodeAt(0)),o=i.index+1;return s+n.substring(o)}}var Xwe=SJ(/[&<>'"]/g,Ytt),Qwe=SJ(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Jwe=SJ(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var Zwe;(function(t){t[t.XML=0]="XML",t[t.HTML=1]="HTML"})(Zwe||(Zwe={}));var eRe;(function(t){t[t.UTF8=0]="UTF8",t[t.ASCII=1]="ASCII",t[t.Extensive=2]="Extensive",t[t.Attribute=3]="Attribute",t[t.Text=4]="Text"})(eRe||(eRe={}));function Xtt(t){return Object.prototype.toString.call(t)}function A8(t){return Xtt(t)==="[object String]"}var Qtt=Object.prototype.hasOwnProperty;function Jtt(t,e){return Qtt.call(t,e)}function IT(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function CJ(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function P8(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function UR(t){if(t>65535){t-=65536;let e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var nRe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Ztt=/&([a-z#][a-z0-9]{1,31});/gi,ert=new RegExp(nRe.source+"|"+Ztt.source,"gi"),trt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function rrt(t,e){if(e.charCodeAt(0)===35&&trt.test(e)){let n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return P8(n)?UR(n):t}let r=Xg(t);return r!==t?r:t}function nrt(t){return t.indexOf("\\")<0?t:t.replace(nRe,"$1")}function Qg(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(ert,function(e,r,n){return r||rrt(e,n)})}var irt=/[&<>"]/,ort=/[&<>"]/g,srt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function art(t){return srt[t]}function rm(t){return irt.test(t)?t.replace(ort,art):t}var crt=/[.?*+^$[\]\\(){}|-]/g;function urt(t){return t.replace(crt,"\\$&")}function er(t){switch(t){case 9:case 32:return!0}return!1}function Sy(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Iy(t){return ST.test(t)}function Cy(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function wy(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(//g,"\xDF")),t.toLowerCase().toUpperCase()}var lrt={mdurl:T8,ucmicro:yJ};var NJ={};Fn(NJ,{parseLinkDestination:()=>AJ,parseLinkLabel:()=>RJ,parseLinkTitle:()=>PJ});function RJ(t,e,r){let n,i,o,s,a=t.posMax,u=t.pos;for(t.pos=e+1,n=1;t.pos<a;){if(o=t.src.charCodeAt(t.pos),o===93&&(n--,n===0)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),o===91){if(s===t.pos-1)n++;else if(r)return t.pos=u,-1}}let c=-1;return i&&(c=t.pos),t.pos=u,c}function AJ(t,e,r){let n,i=e,o={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<r;){if(n=t.charCodeAt(i),n===10||n===60)return o;if(n===62)return o.pos=i+1,o.str=Qg(t.slice(e+1,i)),o.ok=!0,o;if(n===92&&i+1<r){i+=2;continue}i++}return o}let s=0;for(;i<r&&(n=t.charCodeAt(i),!(n===32||n<32||n===127));){if(n===92&&i+1<r){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(n===40&&(s++,s>32))return o;if(n===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=Qg(t.slice(e,i)),o.pos=i,o.ok=!0),o}function PJ(t,e,r){let n,i,o=0,s=e,a={ok:!1,pos:0,lines:0,str:""};if(s>=r||(i=t.charCodeAt(s),i!==34&&i!==39&&i!==40))return a;for(s++,i===40&&(i=41);s<r;){if(n=t.charCodeAt(s),n===i)return a.pos=s+1,a.lines=o,a.str=Qg(t.slice(e+1,s)),a.ok=!0,a;if(n===40&&i===41)return a;n===10?o++:n===92&&s+1<r&&(s++,t.charCodeAt(s)===10&&o++),s++}return a}var Jd={};Jd.code_inline=function(t,e,r,n,i){let o=t[e];return"<code"+i.renderAttrs(o)+">"+rm(o.content)+"</code>"};Jd.code_block=function(t,e,r,n,i){let o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+rm(t[e].content)+`</code></pre>
`};Jd.fence=function(t,e,r,n,i){let o=t[e],s=o.info?Qg(o.info).trim():"",a="",u="";if(s){let l=s.split(/(\s+)/g);a=l[0],u=l.slice(2).join("")}let c;if(r.highlight?c=r.highlight(o.content,a,u)||rm(o.content):c=rm(o.content),c.indexOf("<pre")===0)return c+`
`;if(s){let l=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];l<0?d.push(["class",r.langPrefix+a]):(d[l]=d[l].slice(),d[l][1]+=" "+r.langPrefix+a);let p={attrs:d};return`<pre><code${i.renderAttrs(p)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${c}</code></pre>
`};Jd.image=function(t,e,r,n,i){let o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};Jd.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Jd.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Jd.text=function(t,e){return rm(t[e].content)};Jd.html_block=function(t,e){return t[e].content};Jd.html_inline=function(t,e){return t[e].content};function CT(){this.rules=IT({},Jd)}CT.prototype.renderAttrs=function(e){let r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+rm(e.attrs[r][0])+'="'+rm(e.attrs[r][1])+'"';return i};CT.prototype.renderToken=function(e,r,n){let i=e[r],o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&n.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&r+1<e.length)){let a=e[r+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};CT.prototype.renderInline=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e)}return n};CT.prototype.renderInlineAsText=function(t,e,r){let n="";for(let i=0,o=t.length;i<o;i++)switch(t[i].type){case"text":n+=t[i].content;break;case"image":n+=this.renderInlineAsText(t[i].children,e,r);break;case"html_inline":case"html_block":n+=t[i].content;break;case"softbreak":case"hardbreak":n+=`
`;break;default:}return n};CT.prototype.render=function(t,e,r){let n="",i=this.rules;for(let o=0,s=t.length;o<s;o++){let a=t[o].type;a==="inline"?n+=this.renderInline(t[o].children,e,r):typeof i[a]<"u"?n+=i[a](t,o,e,r,this):n+=this.renderToken(t,o,e,r)}return n};var iRe=CT;function Il(){this.__rules__=[],this.__cache__=null}Il.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Il.prototype.__compile__=function(){let t=this,e=[""];t.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn))})})};Il.prototype.at=function(t,e,r){let n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Il.prototype.before=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Il.prototype.after=function(t,e,r,n){let i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Il.prototype.push=function(t,e,r){let n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Il.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Il.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Il.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);let r=[];return t.forEach(function(n){let i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Il.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};var Ry=Il;function wT(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}wT.prototype.attrIndex=function(e){if(!this.attrs)return-1;let r=this.attrs;for(let n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};wT.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};wT.prototype.attrSet=function(e,r){let n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};wT.prototype.attrGet=function(e){let r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};wT.prototype.attrJoin=function(e,r){let n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};var nm=wT;function oRe(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}oRe.prototype.Token=nm;var sRe=oRe;var drt=/\r\n?|\n/g,prt=/\0/g;function DJ(t){let e;e=t.src.replace(drt,`
`),e=e.replace(prt,"\uFFFD"),t.src=e}function kJ(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function LJ(t){let e=t.tokens;for(let r=0,n=e.length;r<n;r++){let i=e[r];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function frt(t){return/^<a[>\s]/i.test(t)}function mrt(t){return/^<\/a\s*>/i.test(t)}function OJ(t){let e=t.tokens;if(t.md.options.linkify)for(let r=0,n=e.length;r<n;r++){if(e[r].type!=="inline"||!t.md.linkify.pretest(e[r].content))continue;let i=e[r].children,o=0;for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(frt(a.content)&&o>0&&o--,mrt(a.content)&&o++),!(o>0)&&a.type==="text"&&t.md.linkify.test(a.content)){let u=a.content,c=t.md.linkify.match(u),l=[],d=a.level,p=0;c.length>0&&c[0].index===0&&s>0&&i[s-1].type==="text_special"&&(c=c.slice(1));for(let f=0;f<c.length;f++){let m=c[f].url,h=t.md.normalizeLink(m);if(!t.md.validateLink(h))continue;let g=c[f].text;c[f].schema?c[f].schema==="mailto:"&&!/^mailto:/i.test(g)?g=t.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=t.md.normalizeLinkText(g):g=t.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");let v=c[f].index;if(v>p){let x=new t.Token("text","",0);x.content=u.slice(p,v),x.level=d,l.push(x)}let _=new t.Token("link_open","a",1);_.attrs=[["href",h]],_.level=d++,_.markup="linkify",_.info="auto",l.push(_);let y=new t.Token("text","",0);y.content=g,y.level=d,l.push(y);let E=new t.Token("link_close","a",-1);E.level=--d,E.markup="linkify",E.info="auto",l.push(E),p=c[f].lastIndex}if(p<u.length){let f=new t.Token("text","",0);f.content=u.slice(p),f.level=d,l.push(f)}e[r].children=i=CJ(i,s,l)}}}}var aRe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,hrt=/\((c|tm|r)\)/i,grt=/\((c|tm|r)\)/ig,vrt={c:"\xA9",r:"\xAE",tm:"\u2122"};function _rt(t,e){return vrt[e.toLowerCase()]}function yrt(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&(n.content=n.content.replace(grt,_rt)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function brt(t){let e=0;for(let r=t.length-1;r>=0;r--){let n=t[r];n.type==="text"&&!e&&aRe.test(n.content)&&(n.content=n.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function MJ(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(hrt.test(t.tokens[e].content)&&yrt(t.tokens[e].children),aRe.test(t.tokens[e].content)&&brt(t.tokens[e].children))}var xrt=/['"]/,cRe=/['"]/g,uRe="\u2019";function N8(t,e,r){return t.slice(0,e)+r+t.slice(e+1)}function Ert(t,e){let r,n=[];for(let i=0;i<t.length;i++){let o=t[i],s=t[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=s);r--);if(n.length=r+1,o.type!=="text")continue;let a=o.content,u=0,c=a.length;e:for(;u<c;){cRe.lastIndex=u;let l=cRe.exec(a);if(!l)break;let d=!0,p=!0;u=l.index+1;let f=l[0]==="'",m=32;if(l.index-1>=0)m=a.charCodeAt(l.index-1);else for(r=i-1;r>=0&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r--)if(t[r].content){m=t[r].content.charCodeAt(t[r].content.length-1);break}let h=32;if(u<c)h=a.charCodeAt(u);else for(r=i+1;r<t.length&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r++)if(t[r].content){h=t[r].content.charCodeAt(0);break}let g=Cy(m)||Iy(String.fromCharCode(m)),v=Cy(h)||Iy(String.fromCharCode(h)),_=Sy(m),y=Sy(h);if(y?d=!1:v&&(_||g||(d=!1)),_?p=!1:g&&(y||v||(p=!1)),h===34&&l[0]==='"'&&m>=48&&m<=57&&(p=d=!1),d&&p&&(d=g,p=v),!d&&!p){f&&(o.content=N8(o.content,l.index,uRe));continue}if(p)for(r=n.length-1;r>=0;r--){let E=n[r];if(n[r].level<s)break;if(E.single===f&&n[r].level===s){E=n[r];let x,S;f?(x=e.md.options.quotes[2],S=e.md.options.quotes[3]):(x=e.md.options.quotes[0],S=e.md.options.quotes[1]),o.content=N8(o.content,l.index,S),t[E.token].content=N8(t[E.token].content,E.pos,x),u+=S.length-1,E.token===i&&(u+=x.length-1),a=o.content,c=a.length,n.length=r;continue e}}d?n.push({token:i,pos:l.index,single:f,level:s}):p&&f&&(o.content=N8(o.content,l.index,uRe))}}}function FJ(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!xrt.test(t.tokens[e].content)||Ert(t.tokens[e].children,t)}function UJ(t){let e,r,n=t.tokens,i=n.length;for(let o=0;o<i;o++){if(n[o].type!=="inline")continue;let s=n[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=r=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==r&&(s[r]=s[e]),r++);e!==r&&(s.length=r)}}var BJ=[["normalize",DJ],["block",kJ],["inline",LJ],["linkify",OJ],["replacements",MJ],["smartquotes",FJ],["text_join",UJ]];function qJ(){this.ruler=new Ry;for(let t=0;t<BJ.length;t++)this.ruler.push(BJ[t][0],BJ[t][1])}qJ.prototype.process=function(t){let e=this.ruler.getRules("");for(let r=0,n=e.length;r<n;r++)e[r](t)};qJ.prototype.State=sRe;var lRe=qJ;function Zd(t,e,r,n){this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let o=0,s=0,a=0,u=0,c=i.length,l=!1;s<c;s++){let d=i.charCodeAt(s);if(!l)if(er(d)){a++,d===9?u+=4-u%4:u++;continue}else l=!0;(d===10||s===c-1)&&(d!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(u),this.bsCount.push(0),l=!1,a=0,u=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Zd.prototype.push=function(t,e,r){let n=new nm(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};Zd.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Zd.prototype.skipEmptyLines=function(e){for(let r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Zd.prototype.skipSpaces=function(e){for(let r=this.src.length;e<r;e++){let n=this.src.charCodeAt(e);if(!er(n))break}return e};Zd.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!er(this.src.charCodeAt(--e)))return e+1;return e};Zd.prototype.skipChars=function(e,r){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};Zd.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};Zd.prototype.getLines=function(e,r,n,i){if(e>=r)return"";let o=new Array(r-e);for(let s=0,a=e;a<r;a++,s++){let u=0,c=this.bMarks[a],l=c,d;for(a+1<r||i?d=this.eMarks[a]+1:d=this.eMarks[a];l<d&&u<n;){let p=this.src.charCodeAt(l);if(er(p))p===9?u+=4-(u+this.bsCount[a])%4:u++;else if(l-c<this.tShift[a])u++;else break;l++}u>n?o[s]=new Array(u-n+1).join(" ")+this.src.slice(l,d):o[s]=this.src.slice(l,d)}return o.join("")};Zd.prototype.Token=nm;var dRe=Zd;function GJ(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.slice(r,n)}function pRe(t){let e=[],r=t.length,n=0,i=t.charCodeAt(n),o=!1,s=0,a="";for(;n<r;)i===124&&(o?(a+=t.substring(s,n-1),s=n):(e.push(a+t.substring(s,n)),a="",s=n+1)),o=i===92,n++,i=t.charCodeAt(n);return e.push(a+t.substring(s)),e}function HJ(t,e,r,n){if(e+2>r)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let o=t.bMarks[i]+t.tShift[i];if(o>=t.eMarks[i])return!1;let s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=t.eMarks[i])return!1;let a=t.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!er(a)||s===45&&er(a))return!1;for(;o<t.eMarks[i];){let y=t.src.charCodeAt(o);if(y!==124&&y!==45&&y!==58&&!er(y))return!1;o++}let u=GJ(t,e+1),c=u.split("|"),l=[];for(let y=0;y<c.length;y++){let E=c[y].trim();if(!E){if(y===0||y===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(E))return!1;E.charCodeAt(E.length-1)===58?l.push(E.charCodeAt(0)===58?"center":"right"):E.charCodeAt(0)===58?l.push("left"):l.push("")}if(u=GJ(t,e).trim(),u.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;c=pRe(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();let d=c.length;if(d===0||d!==l.length)return!1;if(n)return!0;let p=t.parentType;t.parentType="table";let f=t.md.block.ruler.getRules("blockquote"),m=t.push("table_open","table",1),h=[e,0];m.map=h;let g=t.push("thead_open","thead",1);g.map=[e,e+1];let v=t.push("tr_open","tr",1);v.map=[e,e+1];for(let y=0;y<c.length;y++){let E=t.push("th_open","th",1);l[y]&&(E.attrs=[["style","text-align:"+l[y]]]);let x=t.push("inline","",0);x.content=c[y].trim(),x.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let _;for(i=e+2;i<r&&!(t.sCount[i]<t.blkIndent);i++){let y=!1;for(let x=0,S=f.length;x<S;x++)if(f[x](t,i,r,!0)){y=!0;break}if(y||(u=GJ(t,i).trim(),!u)||t.sCount[i]-t.blkIndent>=4)break;if(c=pRe(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),i===e+2){let x=t.push("tbody_open","tbody",1);x.map=_=[e+2,0]}let E=t.push("tr_open","tr",1);E.map=[i,i+1];for(let x=0;x<d;x++){let S=t.push("td_open","td",1);l[x]&&(S.attrs=[["style","text-align:"+l[x]]]);let O=t.push("inline","",0);O.content=c[x]?c[x].trim():"",O.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return _&&(t.push("tbody_close","tbody",-1),_[1]=i),t.push("table_close","table",-1),h[1]=i,t.parentType=p,t.line=i,!0}function jJ(t,e,r){if(t.sCount[e]-t.blkIndent<4)return!1;let n=e+1,i=n;for(;n<r;){if(t.isEmpty(n)){n++;continue}if(t.sCount[n]-t.blkIndent>=4){n++,i=n;continue}break}t.line=i;let o=t.push("code_block","code",0);return o.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function VJ(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>o)return!1;let s=t.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=t.skipChars(i,s);let u=i-a;if(u<3)return!1;let c=t.src.slice(a,i),l=t.src.slice(i,o);if(s===96&&l.indexOf(String.fromCharCode(s))>=0)return!1;if(n)return!0;let d=e,p=!1;for(;d++,!(d>=r||(i=a=t.bMarks[d]+t.tShift[d],o=t.eMarks[d],i<o&&t.sCount[d]<t.blkIndent));)if(t.src.charCodeAt(i)===s&&!(t.sCount[d]-t.blkIndent>=4)&&(i=t.skipChars(i,s),!(i-a<u)&&(i=t.skipSpaces(i),!(i<o)))){p=!0;break}u=t.sCount[e],t.line=d+(p?1:0);let f=t.push("fence","code",0);return f.info=l,f.content=t.getLines(e+1,d,u,!0),f.markup=c,f.map=[e,t.line],!0}function zJ(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],s=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(n)return!0;let a=[],u=[],c=[],l=[],d=t.md.block.ruler.getRules("blockquote"),p=t.parentType;t.parentType="blockquote";let f=!1,m;for(m=e;m<r;m++){let y=t.sCount[m]<t.blkIndent;if(i=t.bMarks[m]+t.tShift[m],o=t.eMarks[m],i>=o)break;if(t.src.charCodeAt(i++)===62&&!y){let x=t.sCount[m]+1,S,O;t.src.charCodeAt(i)===32?(i++,x++,O=!1,S=!0):t.src.charCodeAt(i)===9?(S=!0,(t.bsCount[m]+x)%4===3?(i++,x++,O=!1):O=!0):S=!1;let U=x;for(a.push(t.bMarks[m]),t.bMarks[m]=i;i<o;){let W=t.src.charCodeAt(i);if(er(W))W===9?U+=4-(U+t.bsCount[m]+(O?1:0))%4:U++;else break;i++}f=i>=o,u.push(t.bsCount[m]),t.bsCount[m]=t.sCount[m]+1+(S?1:0),c.push(t.sCount[m]),t.sCount[m]=U-x,l.push(t.tShift[m]),t.tShift[m]=i-t.bMarks[m];continue}if(f)break;let E=!1;for(let x=0,S=d.length;x<S;x++)if(d[x](t,m,r,!0)){E=!0;break}if(E){t.lineMax=m,t.blkIndent!==0&&(a.push(t.bMarks[m]),u.push(t.bsCount[m]),l.push(t.tShift[m]),c.push(t.sCount[m]),t.sCount[m]-=t.blkIndent);break}a.push(t.bMarks[m]),u.push(t.bsCount[m]),l.push(t.tShift[m]),c.push(t.sCount[m]),t.sCount[m]=-1}let h=t.blkIndent;t.blkIndent=0;let g=t.push("blockquote_open","blockquote",1);g.markup=">";let v=[e,0];g.map=v,t.md.block.tokenize(t,e,m);let _=t.push("blockquote_close","blockquote",-1);_.markup=">",t.lineMax=s,t.parentType=p,v[1]=t.line;for(let y=0;y<l.length;y++)t.bMarks[y+e]=a[y],t.tShift[y+e]=l[y],t.sCount[y+e]=c[y],t.bsCount[y+e]=u[y];return t.blkIndent=h,!0}function YJ(t,e,r,n){let i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e],s=t.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){let c=t.src.charCodeAt(o++);if(c!==s&&!er(c))return!1;c===s&&a++}if(a<3)return!1;if(n)return!0;t.line=e+1;let u=t.push("hr","hr",0);return u.map=[e,t.line],u.markup=Array(a+1).join(String.fromCharCode(s)),!0}function fRe(t,e){let r=t.eMarks[e],n=t.bMarks[e]+t.tShift[e],i=t.src.charCodeAt(n++);if(i!==42&&i!==45&&i!==43)return-1;if(n<r){let o=t.src.charCodeAt(n);if(!er(o))return-1}return n}function mRe(t,e){let r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e],i=r;if(i+1>=n)return-1;let o=t.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=n)return-1;if(o=t.src.charCodeAt(i++),o>=48&&o<=57){if(i-r>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<n&&(o=t.src.charCodeAt(i),!er(o))?-1:i}function Trt(t,e){let r=t.level+2;for(let n=e+2,i=t.tokens.length-2;n<i;n++)t.tokens[n].level===r&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}function $J(t,e,r,n){let i,o,s,a,u=e,c=!0;if(t.sCount[u]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[u]-t.listIndent>=4&&t.sCount[u]<t.blkIndent)return!1;let l=!1;n&&t.parentType==="paragraph"&&t.sCount[u]>=t.blkIndent&&(l=!0);let d,p,f;if((f=mRe(t,u))>=0){if(d=!0,s=t.bMarks[u]+t.tShift[u],p=Number(t.src.slice(s,f-1)),l&&p!==1)return!1}else if((f=fRe(t,u))>=0)d=!1;else return!1;if(l&&t.skipSpaces(f)>=t.eMarks[u])return!1;if(n)return!0;let m=t.src.charCodeAt(f-1),h=t.tokens.length;d?(a=t.push("ordered_list_open","ol",1),p!==1&&(a.attrs=[["start",p]])):a=t.push("bullet_list_open","ul",1);let g=[u,0];a.map=g,a.markup=String.fromCharCode(m);let v=!1,_=t.md.block.ruler.getRules("list"),y=t.parentType;for(t.parentType="list";u<r;){o=f,i=t.eMarks[u];let E=t.sCount[u]+f-(t.bMarks[u]+t.tShift[u]),x=E;for(;o<i;){let k=t.src.charCodeAt(o);if(k===9)x+=4-(x+t.bsCount[u])%4;else if(k===32)x++;else break;o++}let S=o,O;S>=i?O=1:O=x-E,O>4&&(O=1);let U=E+O;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(m);let W=[u,0];a.map=W,d&&(a.info=t.src.slice(s,f-1));let L=t.tight,ve=t.tShift[u],J=t.sCount[u],D=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=U,t.tight=!0,t.tShift[u]=S-t.bMarks[u],t.sCount[u]=x,S>=i&&t.isEmpty(u+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,u,r,!0),(!t.tight||v)&&(c=!1),v=t.line-u>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=D,t.tShift[u]=ve,t.sCount[u]=J,t.tight=L,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(m),u=t.line,W[1]=u,u>=r||t.sCount[u]<t.blkIndent||t.sCount[u]-t.blkIndent>=4)break;let R=!1;for(let k=0,G=_.length;k<G;k++)if(_[k](t,u,r,!0)){R=!0;break}if(R)break;if(d){if(f=mRe(t,u),f<0)break;s=t.bMarks[u]+t.tShift[u]}else if(f=fRe(t,u),f<0)break;if(m!==t.src.charCodeAt(f-1))break}return d?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(m),g[1]=u,t.line=u,t.parentType=y,c&&Trt(t,h),!0}function WJ(t,e,r,n){let i=0,o=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],a=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(o)!==91)return!1;for(;++o<s;)if(t.src.charCodeAt(o)===93&&t.src.charCodeAt(o-1)!==92){if(o+1===s||t.src.charCodeAt(o+1)!==58)return!1;break}let u=t.lineMax,c=t.md.block.ruler.getRules("reference"),l=t.parentType;for(t.parentType="reference";a<u&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3||t.sCount[a]<0)continue;let x=!1;for(let S=0,O=c.length;S<O;S++)if(c[S](t,a,u,!0)){x=!0;break}if(x)break}let d=t.getLines(e,a,t.blkIndent,!1).trim();s=d.length;let p=-1;for(o=1;o<s;o++){let x=d.charCodeAt(o);if(x===91)return!1;if(x===93){p=o;break}else x===10?i++:x===92&&(o++,o<s&&d.charCodeAt(o)===10&&i++)}if(p<0||d.charCodeAt(p+1)!==58)return!1;for(o=p+2;o<s;o++){let x=d.charCodeAt(o);if(x===10)i++;else if(!er(x))break}let f=t.md.helpers.parseLinkDestination(d,o,s);if(!f.ok)return!1;let m=t.md.normalizeLink(f.str);if(!t.md.validateLink(m))return!1;o=f.pos,i+=f.lines;let h=o,g=i,v=o;for(;o<s;o++){let x=d.charCodeAt(o);if(x===10)i++;else if(!er(x))break}let _=t.md.helpers.parseLinkTitle(d,o,s),y;for(o<s&&v!==o&&_.ok?(y=_.str,o=_.pos,i+=_.lines):(y="",o=h,i=g);o<s;){let x=d.charCodeAt(o);if(!er(x))break;o++}if(o<s&&d.charCodeAt(o)!==10&&y)for(y="",o=h,i=g;o<s;){let x=d.charCodeAt(o);if(!er(x))break;o++}if(o<s&&d.charCodeAt(o)!==10)return!1;let E=wy(d.slice(1,p));return E?(n||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[E]>"u"&&(t.env.references[E]={title:y,href:m}),t.parentType=l,t.line=e+i+1),!0):!1}var hRe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];var Srt="[a-zA-Z_:][a-zA-Z0-9:._-]*",Irt="[^\"'=<>`\\x00-\\x20]+",Crt="'[^']*'",wrt='"[^"]*"',Rrt="(?:"+Irt+"|"+Crt+"|"+wrt+")",Art="(?:\\s+"+Srt+"(?:\\s*=\\s*"+Rrt+")?)",gRe="<[A-Za-z][A-Za-z0-9\\-]*"+Art+"*\\s*\\/?>",vRe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Prt="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Nrt="<[?][\\s\\S]*?[?]>",Drt="<![A-Z]+\\s+[^>]*>",krt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",_Re=new RegExp("^(?:"+gRe+"|"+vRe+"|"+Prt+"|"+Nrt+"|"+Drt+"|"+krt+")"),yRe=new RegExp("^(?:"+gRe+"|"+vRe+")");var RT=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+hRe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yRe.source+"\\s*$"),/^$/,!1]];function KJ(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let s=t.src.slice(i,o),a=0;for(;a<RT.length&&!RT[a][0].test(s);a++);if(a===RT.length)return!1;if(n)return RT[a][2];let u=e+1;if(!RT[a][1].test(s)){for(;u<r&&!(t.sCount[u]<t.blkIndent);u++)if(i=t.bMarks[u]+t.tShift[u],o=t.eMarks[u],s=t.src.slice(i,o),RT[a][1].test(s)){s.length!==0&&u++;break}}t.line=u;let c=t.push("html_block","",0);return c.map=[e,u],c.content=t.getLines(e,u,t.blkIndent,!0),!0}function XJ(t,e,r,n){let i=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=t.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=t.src.charCodeAt(++i);if(a>6||i<o&&!er(s))return!1;if(n)return!0;o=t.skipSpacesBack(o,i);let u=t.skipCharsBack(o,35,i);u>i&&er(t.src.charCodeAt(u-1))&&(o=u),t.line=e+1;let c=t.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[e,t.line];let l=t.push("inline","",0);l.content=t.src.slice(i,o).trim(),l.map=[e,t.line],l.children=[];let d=t.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function QJ(t,e,r){let n=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.parentType;t.parentType="paragraph";let o=0,s,a=e+1;for(;a<r&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let f=t.bMarks[a]+t.tShift[a],m=t.eMarks[a];if(f<m&&(s=t.src.charCodeAt(f),(s===45||s===61)&&(f=t.skipChars(f,s),f=t.skipSpaces(f),f>=m))){o=s===61?1:2;break}}if(t.sCount[a]<0)continue;let p=!1;for(let f=0,m=n.length;f<m;f++)if(n[f](t,a,r,!0)){p=!0;break}if(p)break}if(!o)return!1;let u=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;let c=t.push("heading_open","h"+String(o),1);c.markup=String.fromCharCode(s),c.map=[e,t.line];let l=t.push("inline","",0);l.content=u,l.map=[e,t.line-1],l.children=[];let d=t.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(s),t.parentType=i,!0}function JJ(t,e,r){let n=t.md.block.ruler.getRules("paragraph"),i=t.parentType,o=e+1;for(t.parentType="paragraph";o<r&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let c=!1;for(let l=0,d=n.length;l<d;l++)if(n[l](t,o,r,!0)){c=!0;break}if(c)break}let s=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;let a=t.push("paragraph_open","p",1);a.map=[e,t.line];let u=t.push("inline","",0);return u.content=s,u.map=[e,t.line],u.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}var D8=[["table",HJ,["paragraph","reference"]],["code",jJ],["fence",VJ,["paragraph","reference","blockquote","list"]],["blockquote",zJ,["paragraph","reference","blockquote","list"]],["hr",YJ,["paragraph","reference","blockquote","list"]],["list",$J,["paragraph","reference","blockquote"]],["reference",WJ],["html_block",KJ,["paragraph","reference","blockquote"]],["heading",XJ,["paragraph","reference","blockquote"]],["lheading",QJ],["paragraph",JJ]];function k8(){this.ruler=new Ry;for(let t=0;t<D8.length;t++)this.ruler.push(D8[t][0],D8[t][1],{alt:(D8[t][2]||[]).slice()})}k8.prototype.tokenize=function(t,e,r){let n=this.ruler.getRules(""),i=n.length,o=t.md.options.maxNesting,s=e,a=!1;for(;s<r&&(t.line=s=t.skipEmptyLines(s),!(s>=r||t.sCount[s]<t.blkIndent));){if(t.level>=o){t.line=r;break}let u=t.line,c=!1;for(let l=0;l<i;l++)if(c=n[l](t,s,r,!1),c){if(u>=t.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),s=t.line,s<r&&t.isEmpty(s)&&(a=!0,s++,t.line=s)}};k8.prototype.parse=function(t,e,r,n){if(!t)return;let i=new this.State(t,e,r,n);this.tokenize(i,i.line,i.lineMax)};k8.prototype.State=dRe;var bRe=k8;function BR(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}BR.prototype.pushPending=function(){let t=new nm("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};BR.prototype.push=function(t,e,r){this.pending&&this.pushPending();let n=new nm(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};BR.prototype.scanDelims=function(t,e){let r,n,i=!0,o=!0,s=this.posMax,a=this.src.charCodeAt(t),u=t>0?this.src.charCodeAt(t-1):32,c=t;for(;c<s&&this.src.charCodeAt(c)===a;)c++;let l=c-t,d=c<s?this.src.charCodeAt(c):32,p=Cy(u)||Iy(String.fromCharCode(u)),f=Cy(d)||Iy(String.fromCharCode(d)),m=Sy(u),h=Sy(d);return h?i=!1:f&&(m||p||(i=!1)),m?o=!1:p&&(h||f||(o=!1)),e?(r=i,n=o):(r=i&&(!o||p),n=o&&(!i||f)),{can_open:r,can_close:n,length:l}};BR.prototype.Token=nm;var xRe=BR;function Lrt(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function ZJ(t,e){let r=t.pos;for(;r<t.posMax&&!Lrt(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}var Ort=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function eZ(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;let r=t.pos,n=t.posMax;if(r+3>n||t.src.charCodeAt(r)!==58||t.src.charCodeAt(r+1)!==47||t.src.charCodeAt(r+2)!==47)return!1;let i=t.pending.match(Ort);if(!i)return!1;let o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(r-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");let u=t.md.normalizeLink(a);if(!t.md.validateLink(u))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);let c=t.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";let l=t.push("text","",0);l.content=t.md.normalizeLinkText(a);let d=t.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return t.pos+=a.length-o.length,!0}function tZ(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==10)return!1;let n=t.pending.length-1,i=t.posMax;if(!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){let o=n-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(r++;r<i&&er(t.src.charCodeAt(r));)r++;return t.pos=r,!0}var rZ=[];for(let t=0;t<256;t++)rZ.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){rZ[t.charCodeAt(0)]=1});function nZ(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==92||(r++,r>=n))return!1;let i=t.src.charCodeAt(r);if(i===10){for(e||t.push("hardbreak","br",0),r++;r<n&&(i=t.src.charCodeAt(r),!!er(i));)r++;return t.pos=r,!0}let o=t.src[r];if(i>=55296&&i<=56319&&r+1<n){let a=t.src.charCodeAt(r+1);a>=56320&&a<=57343&&(o+=t.src[r+1],r++)}let s="\\"+o;if(!e){let a=t.push("text_special","",0);i<256&&rZ[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return t.pos=r+1,!0}function iZ(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==96)return!1;let i=r;r++;let o=t.posMax;for(;r<o&&t.src.charCodeAt(r)===96;)r++;let s=t.src.slice(i,r),a=s.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=s),t.pos+=a,!0;let u=r,c;for(;(c=t.src.indexOf("`",u))!==-1;){for(u=c+1;u<o&&t.src.charCodeAt(u)===96;)u++;let l=u-c;if(l===a){if(!e){let d=t.push("code_inline","code",0);d.markup=s,d.content=t.src.slice(r,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=u,!0}t.backticks[l]=c}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=a,!0}function Mrt(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==126)return!1;let i=t.scanDelims(t.pos,!0),o=i.length,s=String.fromCharCode(n);if(o<2)return!1;let a;o%2&&(a=t.push("text","",0),a.content=s,o--);for(let u=0;u<o;u+=2)a=t.push("text","",0),a.content=s+s,t.delimiters.push({marker:n,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function ERe(t,e){let r,n=[],i=e.length;for(let o=0;o<i;o++){let s=e[o];if(s.marker!==126||s.end===-1)continue;let a=e[s.end];r=t.tokens[s.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=t.tokens[a.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){let o=n.pop(),s=o+1;for(;s<t.tokens.length&&t.tokens[s].type==="s_close";)s++;s--,o!==s&&(r=t.tokens[s],t.tokens[s]=t.tokens[o],t.tokens[o]=r)}}function Frt(t){let e=t.tokens_meta,r=t.tokens_meta.length;ERe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&ERe(t,e[n].delimiters)}var oZ={tokenize:Mrt,postProcess:Frt};function Urt(t,e){let r=t.pos,n=t.src.charCodeAt(r);if(e||n!==95&&n!==42)return!1;let i=t.scanDelims(t.pos,n===42);for(let o=0;o<i.length;o++){let s=t.push("text","",0);s.content=String.fromCharCode(n),t.delimiters.push({marker:n,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function TRe(t,e){let r=e.length;for(let n=r-1;n>=0;n--){let i=e[n];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;let o=e[i.end],s=n>0&&e[n-1].end===i.end+1&&e[n-1].marker===i.marker&&e[n-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),u=t.tokens[i.token];u.type=s?"strong_open":"em_open",u.tag=s?"strong":"em",u.nesting=1,u.markup=s?a+a:a,u.content="";let c=t.tokens[o.token];c.type=s?"strong_close":"em_close",c.tag=s?"strong":"em",c.nesting=-1,c.markup=s?a+a:a,c.content="",s&&(t.tokens[e[n-1].token].content="",t.tokens[e[i.end+1].token].content="",n--)}}function Brt(t){let e=t.tokens_meta,r=t.tokens_meta.length;TRe(t,t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&TRe(t,e[n].delimiters)}var sZ={tokenize:Urt,postProcess:Brt};function aZ(t,e){let r,n,i,o,s="",a="",u=t.pos,c=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;let l=t.pos,d=t.posMax,p=t.pos+1,f=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(f<0)return!1;let m=f+1;if(m<d&&t.src.charCodeAt(m)===40){for(c=!1,m++;m<d&&(r=t.src.charCodeAt(m),!(!er(r)&&r!==10));m++);if(m>=d)return!1;if(u=m,i=t.md.helpers.parseLinkDestination(t.src,m,t.posMax),i.ok){for(s=t.md.normalizeLink(i.str),t.md.validateLink(s)?m=i.pos:s="",u=m;m<d&&(r=t.src.charCodeAt(m),!(!er(r)&&r!==10));m++);if(i=t.md.helpers.parseLinkTitle(t.src,m,t.posMax),m<d&&u!==m&&i.ok)for(a=i.str,m=i.pos;m<d&&(r=t.src.charCodeAt(m),!(!er(r)&&r!==10));m++);}(m>=d||t.src.charCodeAt(m)!==41)&&(c=!0),m++}if(c){if(typeof t.env.references>"u")return!1;if(m<d&&t.src.charCodeAt(m)===91?(u=m+1,m=t.md.helpers.parseLinkLabel(t,m),m>=0?n=t.src.slice(u,m++):m=f+1):m=f+1,n||(n=t.src.slice(p,f)),o=t.env.references[wy(n)],!o)return t.pos=l,!1;s=o.href,a=o.title}if(!e){t.pos=p,t.posMax=f;let h=t.push("link_open","a",1),g=[["href",s]];h.attrs=g,a&&g.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=m,t.posMax=d,!0}function cZ(t,e){let r,n,i,o,s,a,u,c,l="",d=t.pos,p=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;let f=t.pos+2,m=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(m<0)return!1;if(o=m+1,o<p&&t.src.charCodeAt(o)===40){for(o++;o<p&&(r=t.src.charCodeAt(o),!(!er(r)&&r!==10));o++);if(o>=p)return!1;for(c=o,a=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),a.ok&&(l=t.md.normalizeLink(a.str),t.md.validateLink(l)?o=a.pos:l=""),c=o;o<p&&(r=t.src.charCodeAt(o),!(!er(r)&&r!==10));o++);if(a=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<p&&c!==o&&a.ok)for(u=a.str,o=a.pos;o<p&&(r=t.src.charCodeAt(o),!(!er(r)&&r!==10));o++);else u="";if(o>=p||t.src.charCodeAt(o)!==41)return t.pos=d,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<p&&t.src.charCodeAt(o)===91?(c=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?i=t.src.slice(c,o++):o=m+1):o=m+1,i||(i=t.src.slice(f,m)),s=t.env.references[wy(i)],!s)return t.pos=d,!1;l=s.href,u=s.title}if(!e){n=t.src.slice(f,m);let h=[];t.md.inline.parse(n,t.md,t.env,h);let g=t.push("image","img",0),v=[["src",l],["alt",""]];g.attrs=v,g.children=h,g.content=n,u&&v.push(["title",u])}return t.pos=o,t.posMax=p,!0}var qrt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Grt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function uZ(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==60)return!1;let n=t.pos,i=t.posMax;for(;;){if(++r>=i)return!1;let s=t.src.charCodeAt(r);if(s===60)return!1;if(s===62)break}let o=t.src.slice(n+1,r);if(Grt.test(o)){let s=t.md.normalizeLink(o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let u=t.push("text","",0);u.content=t.md.normalizeLinkText(o);let c=t.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return t.pos+=o.length+2,!0}if(qrt.test(o)){let s=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(s))return!1;if(!e){let a=t.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let u=t.push("text","",0);u.content=t.md.normalizeLinkText(o);let c=t.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return t.pos+=o.length+2,!0}return!1}function Hrt(t){return/^<a[>\s]/i.test(t)}function jrt(t){return/^<\/a\s*>/i.test(t)}function Vrt(t){let e=t|32;return e>=97&&e<=122}function lZ(t,e){if(!t.md.options.html)return!1;let r=t.posMax,n=t.pos;if(t.src.charCodeAt(n)!==60||n+2>=r)return!1;let i=t.src.charCodeAt(n+1);if(i!==33&&i!==63&&i!==47&&!Vrt(i))return!1;let o=t.src.slice(n).match(_Re);if(!o)return!1;if(!e){let s=t.push("html_inline","",0);s.content=o[0],Hrt(s.content)&&t.linkLevel++,jrt(s.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}var zrt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Yrt=/^&([a-z][a-z0-9]{1,31});/i;function dZ(t,e){let r=t.pos,n=t.posMax;if(t.src.charCodeAt(r)!==38||r+1>=n)return!1;if(t.src.charCodeAt(r+1)===35){let o=t.src.slice(r).match(zrt);if(o){if(!e){let s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=t.push("text_special","",0);a.content=P8(s)?UR(s):UR(65533),a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}else{let o=t.src.slice(r).match(Yrt);if(o){let s=Xg(o[0]);if(s!==o[0]){if(!e){let a=t.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function SRe(t){let e={},r=t.length;if(!r)return;let n=0,i=-2,o=[];for(let s=0;s<r;s++){let a=t[s];if(o.push(0),(t[n].marker!==a.marker||i!==a.token-1)&&(n=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);let u=e[a.marker][(a.open?3:0)+a.length%3],c=n-o[n]-1,l=c;for(;c>u;c-=o[c]+1){let d=t[c];if(d.marker===a.marker&&d.open&&d.end<0){let p=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(p=!0),!p){let f=c>0&&!t[c-1].open?o[c-1]+1:0;o[s]=s-c+f,o[c]=f,a.open=!1,d.end=s,d.close=!1,l=-1,i=-2;break}}}l!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=l)}}function pZ(t){let e=t.tokens_meta,r=t.tokens_meta.length;SRe(t.delimiters);for(let n=0;n<r;n++)e[n]&&e[n].delimiters&&SRe(e[n].delimiters)}function fZ(t){let e,r,n=0,i=t.tokens,o=t.tokens.length;for(e=r=0;e<o;e++)i[e].nesting<0&&n--,i[e].level=n,i[e].nesting>0&&n++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==r&&(i[r]=i[e]),r++);e!==r&&(i.length=r)}var mZ=[["text",ZJ],["linkify",eZ],["newline",tZ],["escape",nZ],["backticks",iZ],["strikethrough",oZ.tokenize],["emphasis",sZ.tokenize],["link",aZ],["image",cZ],["autolink",uZ],["html_inline",lZ],["entity",dZ]],hZ=[["balance_pairs",pZ],["strikethrough",oZ.postProcess],["emphasis",sZ.postProcess],["fragments_join",fZ]];function qR(){this.ruler=new Ry;for(let t=0;t<mZ.length;t++)this.ruler.push(mZ[t][0],mZ[t][1]);this.ruler2=new Ry;for(let t=0;t<hZ.length;t++)this.ruler2.push(hZ[t][0],hZ[t][1])}qR.prototype.skipToken=function(t){let e=t.pos,r=this.ruler.getRules(""),n=r.length,i=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let s=!1;if(t.level<i){for(let a=0;a<n;a++)if(t.level++,s=r[a](t,!0),t.level--,s){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;s||t.pos++,o[e]=t.pos};qR.prototype.tokenize=function(t){let e=this.ruler.getRules(""),r=e.length,n=t.posMax,i=t.md.options.maxNesting;for(;t.pos<n;){let o=t.pos,s=!1;if(t.level<i){for(let a=0;a<r;a++)if(s=e[a](t,!1),s){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(t.pos>=n)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};qR.prototype.parse=function(t,e,r,n){let i=new this.State(t,e,r,n);this.tokenize(i);let o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};qR.prototype.State=xRe;var IRe=qR;function CRe(t){let e={};t=t||{},e.src_Any=S8.source,e.src_Cc=I8.source,e.src_Z=C8.source,e.src_P=ST.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");let r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function gZ(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function O8(t){return Object.prototype.toString.call(t)}function $rt(t){return O8(t)==="[object String]"}function Wrt(t){return O8(t)==="[object Object]"}function Krt(t){return O8(t)==="[object RegExp]"}function wRe(t){return O8(t)==="[object Function]"}function Xrt(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var ARe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Qrt(t){return Object.keys(t||{}).reduce(function(e,r){return e||ARe.hasOwnProperty(r)},!1)}var Jrt={"http:":{validate:function(t,e,r){let n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){let n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){let n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Zrt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",ent="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function tnt(t){t.__index__=-1,t.__text_cache__=""}function rnt(t){return function(e,r){let n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function RRe(){return function(t,e){e.normalize(t)}}function L8(t){let e=t.re=CRe(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(Zrt),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");let i=[];t.__compiled__={};function o(a,u){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+u)}Object.keys(t.__schemas__).forEach(function(a){let u=t.__schemas__[a];if(u===null)return;let c={validate:null,link:null};if(t.__compiled__[a]=c,Wrt(u)){Krt(u.validate)?c.validate=rnt(u.validate):wRe(u.validate)?c.validate=u.validate:o(a,u),wRe(u.normalize)?c.normalize=u.normalize:u.normalize?o(a,u):c.normalize=RRe();return}if($rt(u)){i.push(a);return}o(a,u)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:RRe()};let s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(Xrt).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),tnt(t)}function nnt(t,e){let r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function vZ(t,e){let r=new nnt(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function Ac(t,e){if(!(this instanceof Ac))return new Ac(t,e);e||Qrt(t)&&(e=t,t={}),this.__opts__=gZ({},ARe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=gZ({},Jrt,t),this.__compiled__={},this.__tlds__=ent,this.__tlds_replaced__=!1,this.re={},L8(this)}Ac.prototype.add=function(e,r){return this.__schemas__[e]=r,L8(this),this};Ac.prototype.set=function(e){return this.__opts__=gZ(this.__opts__,e),this};Ac.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let r,n,i,o,s,a,u,c,l;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(r=u.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],u.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Ac.prototype.pretest=function(e){return this.re.pretest.test(e)};Ac.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};Ac.prototype.match=function(e){let r=[],n=0;this.__index__>=0&&this.__text_cache__===e&&(r.push(vZ(this,n)),n=this.__last_index__);let i=n?e.slice(n):e;for(;this.test(i);)r.push(vZ(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Ac.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let r=this.re.schema_at_start.exec(e);if(!r)return null;let n=this.testSchemaAt(e,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,vZ(this,0)):null};Ac.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),L8(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,L8(this),this)};Ac.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Ac.prototype.onCompile=function(){};var PRe=Ac;var DRe="-",int=/^xn--/,ont=/[^\0-\x7F]/,snt=/[\x2E\u3002\uFF0E\uFF61]/g,ant={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_Z=35,ep=Math.floor,yZ=String.fromCharCode;function Jg(t){throw new RangeError(ant[t])}function cnt(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function kRe(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(snt,".");let i=t.split("."),o=cnt(i,e).join(".");return n+o}function LRe(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let o=t.charCodeAt(r++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var unt=t=>String.fromCodePoint(...t),lnt=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},NRe=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},ORe=function(t,e,r){let n=0;for(t=r?ep(t/700):t>>1,t+=ep(t/e);t>_Z*26>>1;n+=36)t=ep(t/_Z);return ep(n+(_Z+1)*t/(t+38))},MRe=function(t){let e=[],r=t.length,n=0,i=128,o=72,s=t.lastIndexOf(DRe);s<0&&(s=0);for(let a=0;a<s;++a)t.charCodeAt(a)>=128&&Jg("not-basic"),e.push(t.charCodeAt(a));for(let a=s>0?s+1:0;a<r;){let u=n;for(let l=1,d=36;;d+=36){a>=r&&Jg("invalid-input");let p=lnt(t.charCodeAt(a++));p>=36&&Jg("invalid-input"),p>ep((2147483647-n)/l)&&Jg("overflow"),n+=p*l;let f=d<=o?1:d>=o+26?26:d-o;if(p<f)break;let m=36-f;l>ep(2147483647/m)&&Jg("overflow"),l*=m}let c=e.length+1;o=ORe(n-u,c,u==0),ep(n/c)>2147483647-i&&Jg("overflow"),i+=ep(n/c),n%=c,e.splice(n++,0,i)}return String.fromCodePoint(...e)},FRe=function(t){let e=[];t=LRe(t);let r=t.length,n=128,i=0,o=72;for(let u of t)u<128&&e.push(yZ(u));let s=e.length,a=s;for(s&&e.push(DRe);a<r;){let u=2147483647;for(let l of t)l>=n&&l<u&&(u=l);let c=a+1;u-n>ep((2147483647-i)/c)&&Jg("overflow"),i+=(u-n)*c,n=u;for(let l of t)if(l<n&&++i>2147483647&&Jg("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=o?1:p>=o+26?26:p-o;if(d<f)break;let m=d-f,h=36-f;e.push(yZ(NRe(f+m%h,0))),d=ep(m/h)}e.push(yZ(NRe(d,0))),o=ORe(i,c,a===s),i=0,++a}++i,++n}return e.join("")},dnt=function(t){return kRe(t,function(e){return int.test(e)?MRe(e.slice(4).toLowerCase()):e})},pnt=function(t){return kRe(t,function(e){return ont.test(e)?"xn--"+FRe(e):e})},fnt={version:"2.3.1",ucs2:{decode:LRe,encode:unt},decode:MRe,encode:FRe,toASCII:pnt,toUnicode:dnt};var bZ=fnt;var URe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}};var BRe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}};var qRe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}};var mnt={default:URe,zero:BRe,commonmark:qRe},hnt=/^(vbscript|javascript|file|data):/,gnt=/^data:image\/(gif|png|jpeg|webp);/;function vnt(t){let e=t.trim().toLowerCase();return hnt.test(e)?gnt.test(e):!0}var GRe=["http:","https:","mailto:"];function _nt(t){let e=FR(t,!0);if(e.hostname&&(!e.protocol||GRe.indexOf(e.protocol)>=0))try{e.hostname=bZ.toASCII(e.hostname)}catch{}return x8(TT(e))}function ynt(t){let e=FR(t,!0);if(e.hostname&&(!e.protocol||GRe.indexOf(e.protocol)>=0))try{e.hostname=bZ.toUnicode(e.hostname)}catch{}return MR(TT(e),MR.defaultChars+"%")}function Tu(t,e){if(!(this instanceof Tu))return new Tu(t,e);e||A8(t)||(e=t||{},t="default"),this.inline=new IRe,this.block=new bRe,this.core=new lRe,this.renderer=new iRe,this.linkify=new PRe,this.validateLink=vnt,this.normalizeLink=_nt,this.normalizeLinkText=ynt,this.utils=wJ,this.helpers=IT({},NJ),this.options={},this.configure(t),e&&this.set(e)}Tu.prototype.set=function(t){return IT(this.options,t),this};Tu.prototype.configure=function(t){let e=this;if(A8(t)){let r=t;if(t=mnt[r],!t)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};Tu.prototype.enable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};Tu.prototype.disable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));let n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};Tu.prototype.use=function(t){let e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Tu.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");let r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};Tu.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Tu.prototype.parseInline=function(t,e){let r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};Tu.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var xZ=Tu;function HRe(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}function fo(t,e,r=!0){let n=e.matchAll(/^\s*(```+)/gm),i=Math.max(3,...Array.from(n,s=>s[1].length+1)),o="`".repeat(i);return`${o}${t}
${r?e.trim():e}
${o}`}function Su(t){let e=[],n=new xZ().parse(t,{});for(let i of jRe(n))i.map&&i.type==="fence"&&e.push({startMarkup:i.markup,code:i.content.replace(/\n$/,""),language:i.info.trim(),startLine:i.map[0],endLine:i.map[1]});return e}function*jRe(t){for(let e of t)e.children&&(yield*jRe(e.children)),yield e}function M8(t){switch(t){case"typescriptreact":return"TSX";case"javascriptreact":return"JSX";default:return t}}var KRe=require("crypto"),XRe=we(YRe()),QRe=require("util");function $Re(t,e,r){return Math.min(Math.max(t,e),r)}var HR=250;function t0(t,e=0,r=0){let n=t.row+e,i=t.column+r;return new Rr(n<0?0:n,i<0?0:i)}function tp(t){return new Ge(t0(t.range.startPosition),t0(t.range.endPosition))}function r0(t){return t.replace(/\s+$/,"")}var n0=class{constructor(e){this._accessor=e}genericWholeFileChunking({text:e,maxTokenLength:r=HR,removeEmptyLines:n=!0}){return e=e.replace(/\r\n/g,`
`),this._processLinesIntoChunks(e,0,r,!0,n).filter(o=>!n||o.text.length&&/[\w\d]{2}/.test(o.text))}genericChunking({lineRangeText:e,maxTokenLength:r=HR,removeEmptyLines:n=!0,extraLineRangeSeparator:i="",numTokensInEllipsis:o=0}){if(r<0)throw Error("Cannot chunk text, not enough chunk room");if(e.length===0)return[];let s=this._accessor.get(qr),a=s.tokenLength(i),u=[],c;for(let l=0;l<e.length;l++){let d=e[l];if(c){let f=r-s.tokenLength(c.text)-a;if(f>0&&d.text.length<2e4&&s.tokenLength(d.text)<=f){c={text:c.text+i+d.text,range:new Ge(c.range.start,d.range.end)};continue}u.push(c)}let p=this._processLinesIntoChunks(d.text,d.range.start.line,r,!1,n,o,l===0);c=p.pop(),u.push(...p)}return c&&u.push(c),u.map(l=>({text:r0(l.text),range:l.range})).filter(l=>!n||l.text.length&&/[^\s]/.test(l.text))}_processLinesIntoChunks(e,r,n,i,o,s=0,a=!1){let u=this._accessor.get(qr),c=(o?e.replace(/\n+/gm,`
`):e).split(`
`).map(p=>p.substring(0,n*4)).join(`
`),l=[],d=c;for(;d.length>0;){let p=n-s-(a?0:s),f=u.encodeTrimSuffix(d.substring(0,p*10),p);f.length===0&&(f=d.substring(0,p*3));let m=f.length===d.length||f.lastIndexOf(`
`)<1?f.length:f.lastIndexOf(`
`),h=f.substring(0,m),g=d.substring(h.length).replace(/^\n+/g,""),v=new Rr(r,0),_=h.split(`
`);if(i){let{chunks:U,remainingLines:W}=this._dedentAndAddLinesToChunk(_,g,p,u);_=U,d=W}else d=d.substring(m).replace(/^\n+/g,"");let y=r+_.length,E=_[_.length-1].length,x=new Rr(y,E),S=new Ge(v,x),O=_.join(`
`);l.push({text:O,range:S}),r=y}return l}_dedentAndAddLinesToChunk(e,r,n,i){let o=l=>{let d=l.indexOf(`
`);return l.substring(0,d===-1?l.length:d)},s=IZ(e),a=s.shortestLeadingCommonWhitespace,u=s.trimmedLines.map(l=>l??""),c=i.tokenLength(u.join(`
`));if(a.length>0){let l=o(r);for(c+=i.tokenLength(l);r.length>0&&c<n&&(l.length===0||l.startsWith(a));)u.push(l.substring(a.length)),r=r.substring(l.length+1),l=o(r),c+=i.tokenLength(l);return{chunks:u,remainingLines:r}}return{chunks:u.map(l=>l??`
`),remainingLines:r}}};function IZ(t){let e=t.map(o=>{if(!o)return;let s=o.match(/^\s+/),a=s?s[0]:"",u=o.substring(a?.length);return[a,u]}),r=e.filter(o=>!!o),n=Rnt(r)??"",i=n.length;return{trimmedLines:e.map(o=>o?o[0].substring(i)+o[1]:void 0),shortestLeadingCommonWhitespace:n}}function Rnt(t){let e;for(let r of t){if(e===void 0){e=r[0];continue}e=Ant(e,r[0])}return e??""}function Ant(t,e){let r=t.length<e.length?t:e;if(r.length===0)return"";for(let n=1;n<r.length;n++)t.substring(0,n)!==e.substring(0,n)&&r.substring(0,n-1);return r}var AT=class{constructor(e,r,n){this._queryTree=e;this.accessor=r;this._naiveChunker=new n0(r);let i=this.accessor.get(qr);this._inlineComment=n?.blockWrap??{start:"",end:""},this._elipsisPlaceholder=n?.elipsisPlaceholder??"...",this._lookForIndentInHeader=n?.lookForIndentInHeader??!0,this._numTokensInEllipsis=i.tokenLength(this._elipsisPlaceholder)+1}get _summaryPlaceHolder(){return this._inlineComment.start+this._elipsisPlaceholder+this._inlineComment.end}async parse(e,r){let n=await this._queryTree,i=this._parseBlocks(n.roots,"",e,r),o=i.content.flat(),s=i.outline??[],a=this.createOutlineSummary("","",e,{text:n.syntaxTreeRoot.text,range:tp(n.syntaxTreeRoot)},s,new Ge(0,0,n.syntaxTreeRoot.range.endPosition.row,n.syntaxTreeRoot.range.endPosition.column),"");return a.length===1&&(a[0]={...a[0],isFullFile:!0}),o.push(...a),o}chunkWholeText(e,r,n){if(e.trim().length===0)return{content:{text:[],isFull:!0}};let i;try{i=this._naiveChunker.genericChunking({lineRangeText:[{range:r,text:e}],maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return{content:{text:[],isFull:!1},outline:[]}}return{content:{text:i,isFull:!0}}}_parseBlocks(e,r,n,i){return this._parseSemanticStructure(e,r,n,i,(o,s,a,u)=>{let c=u+s.text;if(this.accessor.get(qr).tokenLength(c)<=a)return{content:{text:[{range:s.range,text:c.replace(/(^\s*\n)|(\n\s*$)/g,"")}],isFull:!0}};if(o.length===0)return this.chunkWholeText(c,s.range,a);let d=this._parseBlocks(o,u,a,i),p=d.content,f=d.outline;return{content:{text:p,isFull:!1},outline:f}})}_createOutlineBody(e,r,n){let i=(n+e.text).split(`
`),o=e.range.start,s=[],a=o,u=p=>{let f=p.line-o.line,m=p.character;return o.line===p.line&&(m=p.character-o.character),new Rr(f,m)},c=p=>{let f=p.line-o.line,m=f>=i.length||p.character===i[f].length-1;return{newPosition:new Rr(p.line,p.character+1),isNewLine:m}},l=(p,f)=>{if(p.line>f.line||p.line===f.line&&p.character>f.character)return;let m=[],h=u(p),g=u(f),v=i[h.line].substring(h.character);if(h.line===g.line){let y=v.substring(0,g.character-h.character),E=c(f);a=E.newPosition,E.isNewLine&&(y+=`
`),m.push(y)}else{let y=i[g.line].substring(0,g.character);y=y.replace(new RegExp(`${n}$`),"");let E=c(f);a=E.newPosition,E.isNewLine&&(y+=`
`),m.push(v+`
`);for(let x=h.line+1;x<g.line;x++)m.push(i[x]+`
`);m.push(y)}let _=m.join("");s.push({text:_.replace(/(^\s+\n)/,""),range:new Ge(p,f)})},d=p=>{s.push({text:p.summary+`

`,range:p.range})};return r.sort((p,f)=>p.range.start.line-f.range.start.line||p.range.end.line-f.range.end.line),r.forEach(p=>{l(a,p.range.start),d(p),a=c(p.range.end).newPosition}),l(a,e.range.end),s}createOutlineSummary(e,r,n,i,o,s,a){let u=this._createOutlineBody(i,o.map(l=>({summary:r0(l.summary),range:l.range})),a),c;try{c=this._naiveChunker.genericChunking({lineRangeText:u,removeEmptyLines:!1,maxTokenLength:n,numTokensInEllipsis:this._numTokensInEllipsis})}catch{return[]}return this._createSummary(e,r,c,s,a)}_createSummary(e,r,n,i,o){return n.length===0?[]:Br(n.map((s,a)=>{let u=e.length===0?"":`${e}`;a!==0&&(u+=`${o}${this._elipsisPlaceholder}
`);let c="";if(a!==n.length-1&&(c+=`
${o}${this._elipsisPlaceholder}`),r.length>0&&(c+=r),Array.isArray(s))return Br(s.map(l=>{if(l.text.trim().length!==0)return{range:l.range,text:u+l.text+c}}));if(s.text.trim().length!==0)return{range:new Ge(a===0?i.start:s.range.start,s.range.end),text:u+s.text+c}})).flat()}findNewIndent(e,r,n){let o=(this._lookForIndentInHeader?r.text.substring(0,n.startIndex-r.startIndex):n.text).match(new RegExp(`\\n+(\\s*)${e}${this._lookForIndentInHeader?"$":""}`));return o&&o.length>1?o[1]:""}};var Iu=class extends AT{_parseSemanticStructure(e,r,n,i,o){let s=[],a=c=>{let l=[],d=c.info,p=d.mainBlock,f=d.detailBlocks.comments,m=d.detailBlocks.body,h=this._getInnerLineRangeText({text:m.text,range:tp(m)}),g=m.startIndex-p.startIndex+h.prefix.length,v=this.findNewIndent(r,p,m),_="";for(let k of f)_+=r+k.text+`
`;let y=r+p.text.substring(0,g),E=_+y,x=tp(p);x=x.with(t0((f.length>0?f[0]:p).range.startPosition,0,-r.length));let S=this.accessor.get(qr),O=i*n,U=E.replace(/(\n*)(\n\s*)$/g,`
`),W=S.tokenLength(U);if(W>O&&(U=y,W=S.tokenLength(y),W>O)){U="",W=0;let k=this.chunkWholeText(_+p.text,tp(p),n);return l.push(...this._createSummary(U,"",k.content.text,x,r)),l}let L=h.suffix+p.text.substring(m.endIndex-p.startIndex),ve=S.tokenLength(U+`
`+L),J=n-ve,D=o(c.children,h.body,J,r+v);x=new Ge(x.start,t0(p.range.endPosition)),l.push(...this._createSummary(U,L,D.content.text,x,r+v));let R=r0(_+r+p.text.substring(0,m.startIndex-p.startIndex));return s.push({summary:R+" "+this._summaryPlaceHolder,range:x}),D.outline!==void 0&&l.push(...this.createOutlineSummary(U,L,J,h.body,D.outline,x,r+v)),l},u=e.map(c=>a(c));return{outline:s,content:u}}_getInnerLineRangeText(e){let r=e.text.replace(/(^\s*\{\s*)|(\s*\}\s*$)/g,""),n=e.text.indexOf(r),i=e.text.substring(0,n),o=e.text.substring(n+r.length),s=(i.match(/\n/g)||[]).length,a=i.match(/\n(.+)$/g)?.length??0,u=(r.match(/\n/g)||[]).length,c=r.match(/\n(.+)$/g)?.length??0,l=new Rr(e.range.start.line+s,s===0?e.range.start.character+a:a),d=new Rr(e.range.start.line+u,u===0?e.range.start.character+c:c),p=i.replace(/\{[^\S\r\n]*/g,"{"),f=o.replace(/\}[^\S\r\n]*/g,"}");return{prefix:p,body:{text:r,range:new Ge(l,d)},suffix:f}}};var U8=class{constructor(e,r){this._text=e;this.accessor=r;this.naiveChunker=new n0(r)}parse(e){let r=this._getLineRangeText();return this.naiveChunker.genericChunking({lineRangeText:r,maxTokenLength:e,extraLineRangeSeparator:`

`})}_getLineRangeText(){this._text=this._text.replace(/\r\n/g,`
`);let e=this._text.split(`
`),r=[],n=new Rr(0,0),i=[];for(let o=0;o<e.length;o++)if(e[o].trim().length===0){r.length>0&&(i.push({text:r.join(`
`),range:new Ge(n,new Rr(o,e[o].length))}),r.length=0,n=new Rr(o+1,0));continue}else r.push(e[o]);return r.length>0&&i.push({text:r.join(`
`),range:new Ge(n,new Rr(e.length-1,e[e.length-1].length-1))}),i}};var B8=class extends AT{_parseSemanticStructure(e,r,n,i,o){let s=[],a=c=>{let l=[],d=c.info,p=d.mainBlock,f=d.detailBlocks.decorator,m=d.detailBlocks.docstring,h=d.detailBlocks.body,g=p.text.length-1;m?g=m.endIndex-p.startIndex:h&&(g=h.startIndex-p.startIndex);let v=this.findNewIndent(r,p,h),_=f?r+f.text+`
`:"",y=r+p.text.substring(0,g),E=_+y+`
`,x=tp(p);f&&(x=x.with(t0(f.range.startPosition)));let S=this.accessor.get(qr),O=i*n,U=E.replace(/\n+\s*$/g,`
`),W=r0(E),L=S.tokenLength(U);if(L>O&&(U=r+E.substring(0,h.startIndex-p.startIndex),L=S.tokenLength(U),L>O)){U="",L=0;let R=this.chunkWholeText(W+`
`+h.text,tp(p),n);return l.push(...this._createSummary(U,"",R.content.text,x,r)),l}x=new Ge(x.start,t0(p.range.endPosition)),s.push({summary:m?W+`
${v}`+this._summaryPlaceHolder:W+" "+this._summaryPlaceHolder,range:x});let ve={text:h.text,range:tp(h)},J=o(c.children,ve,n-L,r+v),D=r+p.text.substring(0,h.startIndex-p.startIndex).replace(/\n+\s*$/g,`
`);return J.content.isFull&&(U=D),l.push(...this._createSummary(U,"",J.content.text,x,r+v)),J.outline!==void 0&&l.push(...this.createOutlineSummary(D,"",n-L,ve,J.outline,x,r+v)),l},u=e.map(c=>a(c));return{outline:s,content:u}}};var Pnt=.6;function rp(t){return t!=="python"&&t!=="ruby"?{elipsisPlaceholder:"/*...*/",blockWrap:{start:"{",end:"}"},lookForIndentInHeader:!1}:{}}var Nnt=[{fileExtensions:["ts","mts","cts"],parse:(t,e,r)=>new Iu(np(r,t,"typescript"),r,rp("typescript")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["tsx"],parse:(t,e,r)=>new Iu(np(r,t,"tsx"),r,rp("tsx")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["js","mjs","cjs","jsx"],parse:(t,e,r)=>new Iu(np(r,t,"javascript"),r,rp("javascript")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["py"],parse:(t,e,r)=>new B8(np(r,t,"python"),r,rp("python")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["java"],parse:(t,e,r)=>new Iu(np(r,t,"java"),r,rp("java")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["cpp","cc","c++","cp","cxx","cppm","hpp","h","c"],parse:(t,e,r)=>new Iu(np(r,t,"cpp"),r,rp("cpp")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["cs"],parse:(t,e,r)=>new Iu(np(r,t,"csharp"),r,rp("csharp")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["go"],parse:(t,e,r)=>new Iu(np(r,t,"go"),r,rp("go")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["md"],parse:(t,e,r)=>Promise.resolve(new U8(t,r).parse(e.maxTokenLength))},{fileExtensions:["rb"],parse:(t,e,r)=>new Iu(np(r,t,"ruby"),r,rp("ruby")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)},{fileExtensions:["rs"],parse:(t,e,r)=>new Iu(np(r,t,"rust"),r,rp("rust")).parse(e.maxTokenLength,e.maxHeaderLengthFactor)}];function WRe(t){let e=js(t).toLowerCase().replace(/\./,"");return Nnt.find(r=>r.fileExtensions.includes(e))}function q8(t){return!!WRe(t)}var CZ;async function np(t,e,r){let n=e.replace(/\r\n/g,`
`),i=t.get(Sn);return CZ=CZ?.then(()=>i.getSemanticChunkTree(r,n))??i.getSemanticChunkTree(r,n),await CZ}async function PT(t,e,{maxTokenLength:r,uri:n,maxHeaderLengthFactor:i=Pnt,shouldSemanticChunk:o=!1}){let s=[];r===void 0&&(r=await Dnt(t));try{if(o){let u=await WRe(n)?.parse(e,{maxTokenLength:r,maxHeaderLengthFactor:i},t);u&&s.push(...u.map(c=>({file:n,text:c.text,range:c.range,isFullFile:c.isFullFile})))}}catch(u){let c=t.get(Ee).getLogger("WorkspaceChunkSearch");c.error("Error parsing semantic chunks for the following file: "+n.fsPath),c.error(u),s=[]}if(!s.length){let u=new n0(t).genericWholeFileChunking({text:e,maxTokenLength:r});s.push(...u.map(c=>({file:n,text:c.text,range:c.range,isFullFile:u.length===1})))}let a=t.get(qr);for(let u of s){let c=a.tokenLength(u.text);c>r*1.2&&console.warn("Produced chunk that is over length limit",{file:u.file+"",range:u.range,chunkTokenLength:c,maxLength:r})}return s.filter(u=>u.text)}async function Dnt(t){return Ay(t,{valueFor4096:HR,maxMultiplier:4})}async function Ay(t,e){let n=(await t.get(tt).getNonUserRequestEndpoint()).modelMaxPromptTokens/4096;return $Re(Math.round(e.valueFor4096*n),e.valueFor4096,e.valueFor4096*e.maxMultiplier)}var NT=class{constructor(e,r){this.baseUri=e;this.pattern=r}get base(){throw new Error("Not implemented")}};var knt=1e5,Lnt=1*1024*1024,Ont=new Set(["jpg","jpeg","jpe","png","gif","bmp","tif","tiff","tga","ico","webp","svg","eps","heif","heic","pdf","raw","mp4","m4v","mkv","webm","mov","avi","wmv","flv","mp3","wav","m4a","flac","ogg","wma","weba","aac","7z","bz2","gz","gz","rar","tar","xz","zip","vsix","db","bin","dat","hex","map","wasm","pyc","pdb","sym","git"]),Mnt=["node_modules","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],Fnt=[".DS_Store","Thumbs.db","package-lock.json","yarn.lock"],Unt=["vscode","vscode-userdata","output","inmemory","private","git"];function Py(t,e){if(Unt.includes(t.scheme)||e&&!["file","untitled"].includes(t.scheme)&&!e.getWorkspaceFolders().some(i=>t.scheme===i.scheme))return!1;let r=js(t).replace(/\./,"").toLowerCase();return!(Ont.has(r)||Fnt.includes(zu(t).toLowerCase())||t.fsPath.toLowerCase().split(/[/\\]/g).some(i=>Mnt.includes(i)))}async function Bnt(t,e=knt,r){let n=t.get(st),i=t.get(Up),o=t.get(Wt);if(await o.init(),r?.isCancellationRequested)return[];let s=new hi;for(let a of n.getWorkspaceFolders()??[]){if(s.size>=e)break;let u=await i.findFilesWithDefaultExcludes(new NT(a,"**/*"),e-s.size,r);if(r?.isCancellationRequested)return[];for(let c of u){let l=await o.isIgnored(c);Py(c,n)&&!l&&s.set(c)}}return s.keys()}var G8=class{constructor(e,r){this._uri=e;this._accessor=r;this._isDisposed=!1;this._disposedCts=new tv}dispose(){this._isDisposed=!0,this._disposedCts.cancel(),this._disposedCts.dispose()}get uri(){return this._uri}async getHash(e){if(this._hash===void 0){let r=await this.getText(e);r!==void 0&&(this._hash=(0,KRe.createHash)("sha256").update(r).digest("hex"))}return this._hash}async getBasicChunks(e){return this._basicChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:PT(this._accessor,r,{uri:this._uri,shouldSemanticChunk:!1})),await GP(this._basicChunks,e)??[]}async getSemanticChunks(e){return q8(this.uri)?(this._semanticChunks??=this.getText(this._disposedCts.token).then(r=>this._isDisposed?[]:PT(this._accessor,r,{uri:this._uri,shouldSemanticChunk:!0})),await GP(this._semanticChunks,e)??[]):this.getBasicChunks(e)}},wZ=class extends G8{constructor(r,n,i){super(r,n);this._fs=i}async getText(r){return this._text??=this._fs.readFile(this.uri).then(async n=>this._isDisposed||n.byteLength>=Lnt||await(0,XRe.isBinaryFile)(Buffer.from(n))||this._isDisposed?"":new QRe.TextDecoder().decode(n),n=>""),await GP(this._text,r)??""}},H8=class extends G8{constructor(r,n){super(r.uri,n);this._textDocument=r}async getText(r){return this._textDocument.getText()}},ip=se("workspaceChunkIndex"),j8=class{constructor(e){this._textDocumentFiles=new hi;this._fsFiles=new hi;this._disposables=[];this._listeners=new Set;this._accessor=e,this._fileSystem=e.get(Zi)}get size(){return this._fsFiles.size}dispose(){this._disposables.forEach(e=>e.dispose());for(let e of this._fsFiles.values())e.dispose();this._fsFiles.clear();for(let e of this._textDocumentFiles.values())e.dispose();this._textDocumentFiles.clear()}get(e){return this._textDocumentFiles.get(e)||this._fsFiles.get(e)}*entries(){let e=new hi;for(let[r,n]of this._textDocumentFiles.entries())yield[r,n],e.set(r);for(let[r,n]of this._fsFiles.entries())e.has(r)||(e.set(r),yield[r,n])}*keys(){for(let[e]of this.entries())yield e}*values(){for(let[e,r]of this.entries())yield r}addListener(e){return this._listeners.has(e)?{dispose:()=>{}}:(this._listeners.add(e),{dispose:()=>{this._listeners.delete(e)}})}registerListeners(){let e=this._accessor.get(st),r=this._accessor.get(Zi),n=this._accessor.get(st),i=s=>{if(!Py(s.uri,n))return;let a=this._textDocumentFiles.get(s.uri),u=this._fsFiles.get(s.uri);a&&a.dispose(),this._textDocumentFiles.set(s.uri,new H8(s,this._accessor)),!a&&!u?this._listeners.forEach(c=>c.onDidCreateFile?.(s.uri)):this._listeners.forEach(c=>c.onDidChangeFile?.(s.uri))};this._disposables.push(e.onDidOpenTextDocument(i)),this._disposables.push(e.onDidChangeTextDocument(s=>i(s.document))),this._disposables.push(e.onDidCloseTextDocument(s=>{let a=this._textDocumentFiles.get(s.uri);if(!a)return;this._textDocumentFiles.delete(s.uri),a.dispose(),this._fsFiles.get(s.uri)?this._listeners.forEach(c=>c.onDidChangeFile?.(s.uri)):this._listeners.forEach(c=>c.onDidDeleteFile?.(s.uri))}));let o=r.createFileSystemWatcher("**/*");this._disposables.push(o),this._disposables.push(o.onDidChange(s=>{if(!Py(s,n))return;let a=this._fsFiles.has(s);this.createOrUpdateFsEntry(s),a?this._listeners.forEach(u=>u.onDidChangeFile?.(s)):this._listeners.forEach(u=>u.onDidCreateFile?.(s))})),this._disposables.push(o.onDidCreate(s=>{Py(s,n)&&(this._fsFiles.has(s)||(this.createOrUpdateFsEntry(s),this._listeners.forEach(a=>a.onDidCreateFile?.(s))))})),this._disposables.push(o.onDidDelete(s=>{let a=this._fsFiles.get(s);a&&(a.dispose(),this._fsFiles.delete(s),this._listeners.forEach(u=>u.onDidDeleteFile?.(s)))}))}initialize(){return this._initializedWorkspacePromise??=(async()=>{this.registerListeners();let e=this._accessor.get(st);await e.ensureWorkspaceIsFullyLoaded();for(let n of e.textDocuments)Py(n.uri,e)&&this._textDocumentFiles.set(n.uri,new H8(n,this._accessor));let r=await Bnt(this._accessor,void 0,zo.None);for(let n of r)this.createOrUpdateFsEntry(n)})(),this._initializedWorkspacePromise}createOrUpdateFsEntry(e){let r=this._fsFiles.get(e);r&&r.dispose();let n=new wZ(e,this._accessor,this._fileSystem);this._fsFiles.set(e,n)}};var qnt="1.0.8",i0=se("IWorkspaceChunkEmbeddingsIndex"),V8=class t{constructor(e){this._accessor=e;this._embeddingsMemoryCache=new Map;this.shouldSearchTimeout=!0;this._embeddingsComputer=e.get(vi),this._workspaceIndex=e.get(ip),this._embeddingsStorageCache=new Ab(e,2,"workspaceEmbeddingsCache",qnt),this._logger=e.get(Ee).getLogger("WorkspaceChunkEmbeddingsIndex"),this.loadCacheFromStorage()}static{this._MAX_EMBEDDINGS_COMPUTATION_TIME=1e4}static{this._MAX_CHUNK_LENGTH=2e3}get size(){return this._workspaceIndex.size}workspaceEmbeddingsInitialized(){return this._initializedWorkspacePromise??=this._workspaceIndex.initialize(),this._initializedWorkspacePromise}async triggerIndexing(e){let r=Array.from(this._workspaceIndex.values()),n=new Array;for(let o of r){let s=await o.getSemanticChunks(e);s=s.filter(a=>a.text.length<t._MAX_CHUNK_LENGTH),n.push(...s)}if(e.isCancellationRequested)return;let i=await this.getEmbeddings(n,e);this._logger.debug(`Indexed ${i.length} chunks`)}async searchFileChunks(e,r,n,i){let o;if(i)o=i;else{o=new Array;let u=(await Promise.all(Array.from(this._workspaceIndex.values(),c=>c.getSemanticChunks(n)))).flat();if(n.isCancellationRequested)return[];o.push(...u)}o=o.filter(u=>u.text.length<t._MAX_CHUNK_LENGTH);let s=this.shouldSearchTimeout?await Pp(this.getEmbeddings(o,n),t._MAX_EMBEDDINGS_COMPUTATION_TIME):await this.getEmbeddings(o,n);if(!s)throw new Error("Timeout computing embeddings");return ise(e,s,r)}async loadCacheFromStorage(){let e=await this._embeddingsStorageCache.getCache();e||await this._embeddingsStorageCache.clearCache(),this._embeddingsMemoryCache.clear();for(let[r,n]of Object.entries(e??{}))this._embeddingsMemoryCache.set(r,n)}async getEmbeddings(e,r){let n=new Array;for(let s of e){let a=this._embeddingsMemoryCache.get(s.text);a?s.embedding=a:n.push(s)}if(n.length===0)return e;let i=n.map(s=>{let a=$g(this._accessor.get(st),s.file);return Gnt(s,a)}),o=await this.computeEmbeddingsWithRetry(i,r);for(let s=0;s<n.length;s++){let a=n[s];a.embedding=o[s],this._embeddingsMemoryCache.set(a.text,a.embedding)}return e}async computeEmbeddingsWithRetry(e,r){let i=0,o;for(;i<3;)try{if(o=await this._embeddingsComputer.computeEmbeddings(e,r),!o)throw new Error("Failed to compute embeddings");return o}catch(s){if(i++,i===3)throw s;if(r.isCancellationRequested)throw new Error("Cancelled computing embeddings");this._logger.warn(`Error computing embeddings. Retrying in ${i} seconds. Error: ${s}`),await new Promise(a=>setTimeout(a,1e3*i))}throw new Error("Failed to compute embeddings")}};function Gnt(t,e){return`File: \`${e}\`
${fo(js(t.file).replace(".",""),t.text)}`}var eAe=we(xn());var Pt=(n=>(n[n.InlineChat=1]="InlineChat",n[n.PanelChat=2]="PanelChat",n[n.Other=3]="Other",n))(Pt||{});(e=>{function t(r){switch(r){case 1:return"conversationInline";case 2:return"conversationPanel";default:return"none"}}e.toString=t})(Pt||={});async function Hnt(t,e,r){let n=new Cm;try{t.debug(`${e} started`);let i=await r();return t.debug(`${e} finished. Elapsed ${n.elapsed()}`),i}catch(i){throw t.debug(`${e} failed. Elapsed ${n.elapsed()}`),i}}function o0(t){return function(e,r,n){let i=n.value,o=0;return n.value=async function(...s){let a=o++,u=t(this);return Hnt(u,`${r}#${a}`,()=>i.apply(this,s))},n}}var DT=class extends Error{constructor(r,n){super(n);this.repo=r}},jR=class extends DT{constructor(){super(...arguments);this.name="ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG"}},RZ=class extends DT{constructor(){super(...arguments);this.name="ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE"}},AZ=class extends DT{constructor(){super(...arguments);this.name="ERROR_TYPE_NOT_INDEXED"}},PZ=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_MAX_RETRIES_EXCEEDED"}},NZ=class extends Error{constructor(){super(...arguments);this.name="ERROR_TYPE_NO_ACCESS_TO_ENDPOINT"}};function JRe({error:t,message:e,repo:r}){switch(t){case"ERROR_TYPE_MISSING_INACCESSIBLE_REPO_ORG":return new jR(r,e);case"ERROR_TYPE_DOCS_EMBEDDINGS_UNAVAILABLE":return new RZ(r,e);case"ERROR_TYPE_NOT_INDEXED":return new AZ(r,e);default:return new DT(r,e)}}function DZ({error:t,message:e}){switch(t){case"ERROR_TYPE_MAX_RETRIES_EXCEEDED":return new PZ(e);case"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT":return new NZ(e);default:return new Error(e)}}var z8=se("codeSearchClient"),Y8=se("docsSearchClient");var s0=class extends Ji{constructor(r){super();this._accessor=r}async toSemanticChunks(r,n){let i=this._accessor.get(ip),o=new hi;for(let a of r){let u=o.get(a.file);u?u.push(a):o.set(a.file,[a])}let s=await Promise.all(Array.from(o,async([a,u])=>{let c=i.get(a);if(c&&q8(a)){let l=await c.getSemanticChunks(n);if(n.isCancellationRequested)return[];let d=new Set;for(let p of u){let f=!1;for(let m of l)m.range.intersection(p.range)&&(d.add(m),f=!0);f||d.add(p)}return Array.from(d)}else return u}));return Array.from(new Set(s.flat()))}};var VR=class extends s0{constructor(r){super(r);this.id="codesearch";this._codeSearchClient=r.get(z8),this._workspaceChunkIndex=r.get(ip),this._embeddingsIndex=r.get(i0),this._logger=r.get(Ee).getLogger("CodeSearchChunkSearch")}async searchFileChunks(r,n,i){if(!r.length||i.isCancellationRequested)return[];if(await this.initialized(),i.isCancellationRequested)return[];this._logger.debug("Fetching related workspace chunks in repository...");let o=await this.getSimilarFilesFromCodeSearch(r);return o?(this._logger.debug("Remapping chunks to semantic chunks..."),await this.toSemanticChunks(o,i)):[]}async isAvailable(){let r=this._accessor.get(ke).getConfig(Le.WorkspaceCodeSearchEnabled);return r===!1||r===void 0&&await this._accessor.get(kr).getTreatmentVariableAsync("vscode","copilotchat.useCodeSearch",!0)!==!0?!1:(this._isAvailable===void 0&&(this._isAvailable=this._codeSearchClient.isAvailable()),this._isAvailable)}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}async getSimilarFilesFromCodeSearch(r){let n=this._accessor.get(st).getWorkspaceFolders(),i=this._accessor.safeGet(xs)?.repositories;if(!i){if(n.length)throw new Error("No repo contexts available for workspace folders");return}let o=[],s=new Map;for(let l=0;l<i.length;l++){let d=i[l];if(!d)continue;let p=GN(d);p&&(o.push(p),s.set(p,n[l]))}let a=[];for(let l of r)a.push(this._codeSearchClient.search(l.fullText,{repo:o}));let u=await Promise.all(a);return this.processResults(s,u).flat().sort((l,d)=>d.score-l.score)}processResults(r,n){let i=[];for(let o of n){if(o.errors.length){let s=!0;for(let a of r.keys()){let u=o.errors.filter(c=>c.repo===a);if(u){this._logger.debug(`[${a}] Errors when searching codesearch: ${u.map(vP)}`);continue}s=!1}if(s)throw o.errors.length===1?o.errors[0]:new AggregateError(o.errors)}for(let s of o.results){let a=r.get(s.repoOwner+"/"+s.repoName);if(!a){this._logger.error("Could not find workspace folder for repo",s.repoOwner+"/"+s.repoName);continue}let u=this._workspaceChunkIndex.get(Ct.joinPath(a,s.path));u&&i.push({file:u.uri,score:s.score,text:s.contents,range:new Ge(s.range.start,0,s.range.end+1,0)})}}return i}};var $8=class t extends s0{constructor(r,n=!1){super(r);this._inTests=n;this.id="ada";this._embeddingsComputer=r.get(vi),this._embeddingsIndex=r.get(i0),this._logger=r.get(Ee).getLogger("EmbeddingsCacheChunkSearch"),n&&(this._embeddingsIndex.shouldSearchTimeout=!1)}static{this.FILE_CAP=200}async searchFileChunks(r,n,i){if(!r.length||i.isCancellationRequested)return[];this._logger.debug("Computing embeddings for query...");let o=await this._embeddingsComputer.computeEmbeddings(r.map(s=>s.fullText),i);if(!o){if(this._inTests)throw new Error("Failed to compute query embeddings");return[]}return i.isCancellationRequested?[]:(await this.initialized(),i.isCancellationRequested?[]:(this._logger.debug("Fetching related workspace chunks in repository..."),await this._embeddingsIndex.searchFileChunks(o,n,i)))}async isAvailable(){return this._isAvailable===void 0&&(this._isAvailable=this.doIsAvailable()),this._isAvailable}async doIsAvailable(){return await this.initialized(),this._embeddingsIndex.size<t.FILE_CAP&&this.triggerIndexing(),!1}initialized(){return this._embeddingsIndex.workspaceEmbeddingsInitialized()}triggerIndexing(){this._initializedWorkspacePromise||(this._logger.debug("Starting indexing"),this._initializedWorkspacePromise=this._embeddingsIndex.triggerIndexing(zo.None).then(()=>{this._isAvailable=Promise.resolve(!0),this._logger.debug("Workspace Chunk Embeddings Index initialized.")}).catch(r=>{this._logger.warn(`Failed to index workspace: ${r}`),this._initializedWorkspacePromise=void 0}))}};var ZRe=we(require("path"));function zR(t,e){if(!t)return t;if(Array.isArray(t))return t.map(r=>zR(r,e));if(typeof t=="object"){let r=e(t);if(r)return r;let n={};for(let i in t)n[i]=zR(t[i],e);return n}return t}var Vnt=ZRe.default.join(__dirname,"tfidfWorker.js"),W8=class extends Ji{constructor(r){super();this.id="tfidf";this._tfIdfWorker=new ga(()=>new Hm(Vnt));let n=i=>{let o=this._workspaceIndex.get(i);o&&this.addOrUpdateTfidfEntries([o])};this._workspaceIndex=r.get(ip),this._register(this._workspaceIndex.addListener({onDidChangeFile:n,onDidCreateFile:n,onDidDeleteFile:i=>{this._tfIdfWorker.value.proxy.delete(i)}}))}dispose(){super.dispose(),this._tfIdfWorker.hasValue&&this._tfIdfWorker.value.terminate()}initialized(){return this._initializePromise??=this._initializeWorkspaceFiles(),this._initializePromise}async searchFileChunks(r,n,i){if(await this.initialized(),i.isCancellationRequested)return[];let o=await this._tfIdfWorker.value.proxy.search(r.map(s=>s.keywords.join(", ")),n,-1/0);return Ynt(o)}async isAvailable(){return await this.initialized(),!0}async _initializeWorkspaceFiles(){await this._workspaceIndex.initialize(),await this.addOrUpdateTfidfEntries(this._workspaceIndex.values())}async addOrUpdateTfidfEntries(r){let n=new FP(20);this._tfIdfWorker.value.proxy.addOrUpdate(znt(await Promise.all(Array.from(r,i=>n.queue(async()=>({uri:i.uri,text:await i.getText(zo.None),chunks:await i.getBasicChunks(zo.None)}))))))}};function znt(t){return zR(t,e=>{if(Ct.isUri(e))return{$mid:"uri",...e};if(e instanceof Ge)return{$mid:"range",start:{line:e.start.line,character:e.start.character},end:{line:e.end.line,character:e.end.character}}})}function Ynt(t){return zR(t,e=>{if(e.$mid==="range")return new Ge(e.start.line,e.start.character,e.end.line,e.end.character);if(e.$mid==="uri")return Ct.revive(e)})}var K8=class extends s0{constructor(r){super(r);this.id="tfidf";this._tfidf=this._register(new W8(r)),this._logger=r.get(Ee).getLogger("TfIdfWithRerankChunkSearch")}async searchFileChunks(r,n,i){this._logger.debug("Performing full workspace search for chunks...");let s=await this._tfidf.searchFileChunks(r,n*2,i);if(i.isCancellationRequested||!s.length)return[];this._logger.debug("Remapping chunks to semantic chunks...");let a=await this.toSemanticChunks(s,i);return i.isCancellationRequested||!a.length?[]:a}isAvailable(){return this._tfidf.isAvailable()}};var LT=se("IWorkspaceChunkSearch"),kT=class kT{constructor(e,r){this._accessor=e;this._forcedChunkSearchStrategy=r;this._workspaceChunkEmbeddingsIndex=this._accessor.get(i0);this._embeddingsComputer=this._accessor.get(vi);this._logger=this._accessor.get(Ee).getLogger("WorkspaceChunkSearch");this._inTests=!!this._forcedChunkSearchStrategy,this._embeddingsCacheChunkSearch=new $8(e,this._inTests),this._codeSearchChunkSearch=new VR(e),this._tfIdfWithSemanticChunkSearch=new K8(e)}static{this.ADDITIONAL_RESULTS_TIMEOUT=5e3}dispose(){this._embeddingsCacheChunkSearch.dispose(),this._codeSearchChunkSearch.dispose(),this._tfIdfWithSemanticChunkSearch.dispose()}async triggerIndexing(){await Promise.allSettled([this._tfIdfWithSemanticChunkSearch.isAvailable(),this._embeddingsCacheChunkSearch.isAvailable()])}async searchFileChunks(e,r,n,i){let o=await this.getStrategies();if(i.isCancellationRequested)return[];let s=o.map(()=>new ec);for(let p=0;p<o.length;p++){let f=o[p],m=s[p];f.searchFileChunks(r,n,i).then(h=>{m.isSettled||m.complete(h)}).catch(h=>{m.isSettled||m.error(h)})}let a=s.map(p=>p.p);try{await Promise.any(a)}catch(p){let f=p;throw f.errors.length===1?f.errors[0]:p}if(i.isCancellationRequested)return[];let u=await Pp(Promise.allSettled(a),kT.ADDITIONAL_RESULTS_TIMEOUT);if(i.isCancellationRequested)return[];if(!u){for(let p of s)p.isSettled||await p.cancel();u=await Promise.allSettled(a)}if(i.isCancellationRequested)return[];let c=new Array,l;for(let p=0;p<u.length;p++){let f=u[p],m=o[p];if(f.status==="fulfilled"){l||(l=m.id),c.push(...f.value);continue}else this._logger.debug(`Strategy, ${m.id}, failed with the following error: ${vP(f.reason)}`);if(f.reason instanceof jR&&m instanceof VR)try{if(await this._accessor.get(Dt).getPermissiveGitHubToken({silent:!0}))continue;if(await this._accessor.get(Dt).getPermissiveGitHubToken({forceNewSession:{detail:eAe.t("More permissions are required to search private repositories")}})){let g=await m.searchFileChunks(r,n,i);l=m.id,c.unshift(...g)}}catch{}}this.reportTopSuccessfulFlow(l);let d=this._accessor.get(Wt);return c=c.filter(p=>!d.isCopilotIgnored(p.file)),this.rerankChunks(e,r,c,n,i)}async rerankChunks(e,r,n,i,o){return this._accessor.get(ke).getConfig(Le.WorkspaceRerankStrategy)==="model"?this.sortChunksUsingModel(e,r,n,i,o):await this.getShouldUseAda()?o.isCancellationRequested?[]:this.rerankChunksUsingAda(r,n,i,o):n.slice(0,i)}async rerankChunksUsingAda(e,r,n,i){let o=await this._embeddingsComputer.computeEmbeddings(e.map(s=>s.fullText),i);if(i.isCancellationRequested)return[];if(!o){if(this._inTests){let s=new Error("Failed to compute query embeddings");throw this._logger.exception(s),this._accessor.get(Ue).sendGHTelemetryException(s,"Error"),s}return this._logger.warn("Failed to compute query embeddings"),r.slice(0,n)}try{return await this._workspaceChunkEmbeddingsIndex.searchFileChunks(o,n,i,r)}catch(s){return this._logger.warn("Failed to search chunk embeddings index: ",s),r.slice(0,n)}}async sortChunksUsingModel(e,r,n,i,o){let s=this._accessor.get(wr),a=[];for(let u=0;u<n.length;u+=i){let c=n.slice(u,u+i),l=[...a,...c];yP(l);let d=await s.fetchOne([{role:"system",content:`
The user will provide you with question and a numbered list of code snippets.
You are to sort the code snippets by most to least helpful in answering the question.
If a code snippet is not related to the question in possible any way, you may opt not to include it in the list.
Return an ordered list of snippet numbers.
Only return snippet numbers.
Do not explain.
				`.trim()},{role:"user",content:`
Question: ${r[0].fullText}

${l.map((f,m)=>`# Snippet ${m}
 ${fo("",f.text)}`).join(`

`)}
					`.trim()}],async f=>{},o,2,e,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceChunkRerank"});if(o.isCancellationRequested)return[];if(d.type!=="success"){console.warn("Model re-rank failed");continue}let p=new Set(Array.from(d.value.matchAll(/\d+/g),f=>parseInt(f[0])));a=Br(Array.from(p).map(f=>l.at(f))).slice(0,i)}return a}async getStrategies(){let e=new Array;switch(this._forcedChunkSearchStrategy){case"codesearch":e.push(this._codeSearchChunkSearch);break;case"ada":e.push(this._embeddingsCacheChunkSearch);break;case"tfidf":e.push(this._tfIdfWithSemanticChunkSearch);break;default:await this._codeSearchChunkSearch.isAvailable()&&e.push(this._codeSearchChunkSearch),await this.getShouldUseAda()&&await this._embeddingsCacheChunkSearch.isAvailable()&&e.push(this._embeddingsCacheChunkSearch),e.push(this._tfIdfWithSemanticChunkSearch);break}return this._logger.debug(`Using ${e.map(r=>r.id).join(", ")} for chunk search`),e}async getShouldUseAda(){let e=this._accessor.get(ke).getConfig(Le.WorkspaceUseAdaEnabled);return e!==void 0?e:await this._accessor.get(kr).getTreatmentVariableAsync("vscode","copilotchat.workspaceUseAda",!0)??!0}reportTopSuccessfulFlow(e){this._logger.debug(`'${e}' was the top working workspace chunk search strategy`),this._accessor.get(Ue).sendMSFTTelemetryEvent("workspaceChunkSearchStrategy",{strategy:e??"none"})}};Bl([o0(e=>e._logger)],kT.prototype,"triggerIndexing",1),Bl([o0(e=>e._logger)],kT.prototype,"searchFileChunks",1),Bl([o0(e=>e._logger)],kT.prototype,"rerankChunksUsingAda",1);var X8=kT;var Q8=se("IGitContextModel");var ko=class{constructor(e){this.anchor=e}},im=class{toString(){return Object.getPrototypeOf(this).constructor.name}},Nc=class{constructor(e,r){this.request=e;this.sessionId=r;this.status="in-progress";this.contextParts=[];this.references=[]}addReferences(e){this.references=YR([...this.references,...e])}},OT=class extends Nc{constructor(r,n){super(r);this._getShorterMessage=n}getShorterMessage(){return this._getShorterMessage()}},za=class t{constructor(e=[]){this.turns=e}copy(){let e=JSON.parse(JSON.stringify(this.turns));return new t(e)}getLatestTurn(){return this.turns[this.turns.length-1]}addTurn(e){this.turns.forEach(r=>r.chatMessages=[]),this.turns.push(e)}removeTurn(e){let r=this.turns.findIndex(n=>n.requestId===e);if(r!==-1)return this.turns.splice(r,1)[0]}insertBeforeLatestTurn(e){this.turns.splice(this.turns.length-1,0,...e)}getState(){return{turns:this.turns}}};function YR(t){let e=new hi,r=(i,o)=>{if(i.contains(o))return i;if(o.contains(i))return o;let[s,a]=i.start.line<o.start.line?[i,o]:[o,i];if(s.end.line>=a.start.line-1)return new Ge(s.start,a.end)};return t.forEach(i=>{let o=i.anchor;if(!tAe(o))e.set(o,i);else{let s=e.get(o.uri);if(!s)e.set(o.uri,[i]);else if(!(s instanceof ko)){let a=[],u=o.range;s.forEach(l=>{if(!tAe(l.anchor))return;let d=r(u,l.anchor.range);d?u=d:a.push(l.anchor)});let c={uri:o.uri,range:u};e.set(o.uri,[...a,c].sort((l,d)=>l.range.start.line-d.range.start.line||l.range.end.line-d.range.end.line).map(l=>new ko(l)))}}}),Array.from(e.keys()).sort((i,o)=>i.fsPath.localeCompare(o.fsPath)).map(i=>{let o=e.get(i);return o||[]}).flat()}function tAe(t){return"uri"in t&&"range"in t}var Cr=new class{constructor(){this._contextResolvers=new Map}get contextResolvers(){return this._contextResolvers.values()}getContextResolver(t){return this._contextResolvers.get(t)}register(t){return this._contextResolvers.set(t.kind,t),t}};var iAe=we(xn());var LZ=3,J8=3,Z8=1;function Cu(t,e){let r=t.get(qr),n=0;for(let i of e)n+=OZ(r,i);return n+=LZ,n}function OZ(t,e){let r=J8;for(let[n,i]of Object.entries(e))i&&(r+=t.tokenLength(i),n==="name"&&(r+=Z8));return r}function $nt(t,e,...r){return{ctor:t,props:e,children:r.flat()}}function rAe(){throw new Error("This should not be invoked!")}rAe.isFragment=!0;globalThis.vscpp=$nt;globalThis.vscppf=rAe;var ue=class{get priority(){return this.props.priority??0}constructor(e,r){this.props=e,this.accessor=r}};function nAe(t){return t instanceof rt||t instanceof pe||t instanceof wl}var Cl=class extends ue{render(){return vscpp(vscppf,null,this.props.children)}},rt=class extends Cl{constructor(e,r){e.role="system",super(e,r)}},pe=class extends Cl{constructor(e,r){e.role="user",super(e,r)}},wl=class extends Cl{constructor(e,r){e.role="assistant",super(e,r)}},Ya=class extends ue{render(){return vscpp(vscppf,null,this.props.children)}};var Wnt;(e=>e.empty={get:()=>{}})(Wnt||={});var qt=class{constructor(e,r,n,i){this._accessor=e;this._endpoint=r;this._ctor=n;this._props=i;this._meta=new Map;this._usedContext=[];this._references=[];this._replyInterpreterFactory=null;this._queue=[];this._root=new MZ(null,0,{tokenBudget:this._endpoint.modelMaxPromptTokens,endpoint:this._endpoint});this._queue.push({node:this._root,ctor:this._ctor,props:this._props,children:[]})}getAllMeta(){let e=this._meta;return{get(r){return e.get(r)}}}getMeta(e){return this._meta.get(e)}getUsedContext(){return this._usedContext}getReferences(){return YR(this._references)}getReplyInterpreterFactory(){return this._replyInterpreterFactory}async _processPromptPieces(e,r){for(;this._queue.length>0;){let n=[];for(let i of this._queue.values()){Array.isArray(i.children)&&(i.props=i.props??{},i.props.children=i.children);let o=new i.ctor(i.props,this._accessor);i.node.setObj(o),n.push({element:i,promptElementInstance:o})}this._queue.splice(0,this._queue.length),await Promise.all(n.map(({element:i,promptElementInstance:o})=>o.prepare?.(i.node.sizing,e,r).then(s=>i.node.setState(s))));for(let{element:i,promptElementInstance:o}of n){let s=o.render(i.node.getState(),i.node.sizing);if(!s)continue;let a=oAe(s),u=0,c=i.node.sizing.tokenBudget;nAe(o)&&(c-=J8,i.props.name&&(c-=Z8));for(let l of a)l.kind==="literal"?c-=this._accessor.get(qr).tokenLength(l.value):u+=l.props?.flex??1;for(let l of a)this._handlePromptPiece(i,l,u,c)}}}_prioritize(e,r,n){let i=[],o=[],s=0;for(;s<e.length;){if(!e[s].isImplicitLinebreak){let u=e[s-1]?.isImplicitLinebreak?{index:s,precedingLinebreak:s-1}:{index:s};i.push(u),o[s]=null}s+=1}i.sort((u,c)=>r(e[u.index],e[c.index]));let a=this._endpoint.modelMaxPromptTokens-LZ;for(;i.length>0;){let u=i.shift(),c=u.index,l=e[c],d=n(l),p;if(u.precedingLinebreak&&(p=e[u.precedingLinebreak],d+=n(p)),d>a)break;o[c]=l,u.precedingLinebreak&&p&&(o[u.precedingLinebreak]=p),a-=d}return{result:o,tokenCount:this._endpoint.modelMaxPromptTokens-a}}async render(e,r){await this._processPromptPieces(e,r);let{result:n,resultChunks:i}=this._root.materialize(),o=this._accessor.get(qr),s=new Set,{result:a}=this._prioritize(i,(f,m)=>Ny.cmp(f,m),f=>{let m=o.tokenLength(f.text);return s.has(f.message)||(s.add(f.message),m+=J8,f.message.name&&(m+=Z8)),m}),u=new Map;for(let f of Br(a)){let m=u.get(f.message)??[];m[f.childIndex]=f,u.set(f.message,m)}let c=[];for(let f of n){let m=u.get(f);m&&(f.chunks=Br(m),c.push(f))}let{result:l,tokenCount:d}=this._prioritize(c,(f,m)=>tM.cmp(f,m),f=>OZ(o,f.toChatMessage())),p=l.map(f=>f?.toChatMessage());return{messages:this._validate(Br(p)),tokenCount:d}}_validate(e){let r=e[e.length-1];return r&&r.role!=="user"&&console.error(iAe.t("Sorry, this message is too long. Please try a shorter question.")),e}_handlePromptPiece(e,r,n,i){if(r.kind==="literal"){e.node.appendStringChild(r.value,e.props.priority??Number.MAX_SAFE_INTEGER);return}if(r.kind==="intrinsic"){this._handleIntrinsic(e.node,r.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...r.props},eM(r.children));return}if(r.ctor===Ya){this._handleExtrinsicTextChunk(e.node,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...r.props},eM(r.children));return}let o=e.node.createChild({tokenBudget:Math.floor(i*(r.props?.flex??1)/n),endpoint:this._endpoint});this._queue.push({node:o,ctor:r.ctor,props:{priority:e.props.priority,...r.props},children:r.children})}_handleIntrinsic(e,r,n,i){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"replyInterpreter":return this._handleIntrinsicReplyInterpreter(e,n,i)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta/> must not have children!");let i=Object.getPrototypeOf(r.value).constructor;if(this._meta.has(i))throw new Error(`Duplicate meta data ${i.name}!`);this._meta.set(i,r.value)}_handleIntrinsicLineBreak(e,r,n,i){if(n.length>0)throw new Error("<br/> must not have children!");e.appendLineBreak(!0,i??Number.MAX_SAFE_INTEGER)}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext/> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference/> must not have children!");this._references.push(...r.value)}_handleIntrinsicReplyInterpreter(e,r,n){if(n.length>0)throw new Error("<replyInterpreter/> must not have children!");this._replyInterpreterFactory=r.value}_handleExtrinsicTextChunk(e,r,n){let i=[];for(let o of n){if(o.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");o.kind==="literal"&&i.push(o.value),o.kind==="intrinsic"&&(o.name==="br"?i.push(`
`):this._handleIntrinsic(e,o.name,o.props,eM(o.children)))}e.appendLineBreak(!1),e.appendStringChild(i.join(""),r?.priority??Number.MAX_SAFE_INTEGER)}};function oAe(t){return typeof t>"u"||typeof t=="boolean"?[]:typeof t=="string"||typeof t=="number"?[{kind:"literal",value:String(t)}]:Knt(t)?[...eM(t.children)]:typeof t.ctor=="string"?[{kind:"intrinsic",name:t.ctor,props:t.props,children:t.children}]:[{kind:"extrinsic",ctor:t.ctor,props:t.props,children:t.children}]}function eM(t){return(t??[]).reduce((e,r)=>(e.push(...oAe(r)),e),[])}async function us(t,e,r,n,i,o){let s=new qt(t,e,r,n),{messages:a,tokenCount:u}=await s.render(i,o),c=s.getAllMeta(),l=s.getUsedContext(),d=s.getReferences();return{messages:a,tokenCount:u,metadatas:c,usedContext:l,references:d}}var MZ=class t{constructor(e=null,r,n){this.parent=e;this.childIndex=r;this._sizing=n;this.kind=0;this._obj=null;this._state=void 0;this._children=[]}set sizing(e){this._sizing=e}get sizing(){return this._sizing}setObj(e){this._obj=e}setState(e){this._state=e}getState(){return this._state}createChild(e){let r=new t(this,this._children.length,e);return this._children.push(r),r}appendStringChild(e,r){this._children.push(new FZ(this,e,r))}appendLineBreak(e=!0,r){this._children.push(new rM(this,e,r))}materialize(){let e=[],r=[];return this._materialize(e,r),{result:e,resultChunks:r}}_materialize(e,r){if(this._obj instanceof Cl){if(!this._obj.props.role)throw new Error("Invalid ChatMessage!");let n=[];for(let a of this._children)a.collectLeafs(n);let i=[],o=new tM(this._obj.props.role,this._obj.props.name,this._obj.props.priority,this.childIndex,i),s=0;n.forEach((a,u)=>{a.kind===1?i.push(new Ny(o,a.text,a.priority,s++)):a.isExplicit?i.push(new Ny(o,`
`,a.priority,s++)):(i.length>0&&i[i.length-1].text!==`
`||i[u-1]&&i[u-1].text!==`
`)&&i.push(new Ny(o,`
`,a.priority,s++,!0))}),r.push(...i),e.push(o)}else for(let n of this._children){if(n.kind===1)throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${n.text}"`);if(n.kind===2)throw new Error("Cannot have a line break node outside a ChatMessage!");n._materialize(e,r)}}collectLeafs(e){if(this._obj instanceof Cl)throw new Error("Cannot have a ChatMessage nested inside a ChatMessage!");e.push(new rM(this,!1));for(let r of this._children)r.collectLeafs(e)}},Ny=class{constructor(e,r,n,i,o=!1){this.message=e;this.text=r;this.priority=n;this.childIndex=i;this.isImplicitLinebreak=o}static cmp(e,r){return e.priority!==void 0&&r.priority!==void 0&&e.priority!==r.priority?(r.priority||0)-(e.priority||0):e.childIndex-r.childIndex}},tM=class{constructor(e,r,n,i,o){this.role=e;this.name=r;this.priority=n;this.childIndex=i;this._chunks=o}set chunks(e){this._chunks=e.sort(Ny.cmp)}get text(){return this._chunks.reduce((e,r,n)=>((n!==this._chunks.length-1||!r.isImplicitLinebreak)&&(e+=r.text),e),"")}toChatMessage(){return{role:this.role,content:this.text,...this.name?{name:this.name}:{}}}static cmp(e,r){return e.priority!==r.priority?(r.priority||0)-(e.priority||0):r.childIndex-e.childIndex}},FZ=class{constructor(e,r,n){this.parent=e;this.text=r;this.priority=n;this.kind=1}collectLeafs(e){e.push(this)}},rM=class{constructor(e,r,n){this.parent=e;this.isExplicit=r;this.priority=n;this.kind=2}collectLeafs(e){e.push(this)}};function Knt(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}var $R=we(xn());var nn=class extends ue{render(){return vscpp(Ya,null,"```",this.props.languageId??"",vscpp("br",null),this.props.code&&vscpp(vscppf,null,this.props.code,vscpp("br",null)),"```")}},nM=class extends ue{render(){let e=this.props.children;if(e)return vscpp(vscppf,null,e.map((r,n)=>(r.props??={},r.props.priority=this.props.descending?this.props.priority-n:this.props.priority-e.length+n,r)))}};var Vn=class extends ue{render(e,r){let n=[],i=this.props.history.filter(o=>o.status==="success"||o.status==="in-progress");for(let o of i)o.request.type==="user"&&n.push(vscpp(pe,null,o.request.message)),o.response?.type==="model"&&n.push(vscpp(wl,{name:o.response.name},o.response.message));return vscpp(nM,{priority:this.props.priority,descending:!1},n)}};var cAe=we(require("path"));var aAe=we(require("path"));var iM=class extends ue{render(e,r){let n=this.accessor.get(ir).activeTextEditor,i=this.accessor.get(Wt);if(n&&i.isIgnored(n.document.uri,{includeCopilotIgnore:!0,includeGitIgnore:!1}))return;let o=n?.visibleRanges[0];if(o){if(!n.selection.isEmpty)return;let s=[{uri:n.document.uri,version:n.document.version,ranges:[o]}],a=[new ko({uri:n.document.uri,range:o})];return vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:a}),vscpp(pe,{priority:this.props.priority},"Excerpt from active file ",aAe.basename(n.document.uri.path),", lines ",o.start.line+1," to ",o.end.line+1,":",vscpp("br",null),vscpp(nn,{code:n.document.getText(o),languageId:n.document.languageId}),vscpp("br",null),vscpp("br",null),n.selection.isSingleLine&&vscpp(vscppf,null,"The cursor is on line: ",n.selection.start.line)))}}};var kn=class t extends ue{constructor(r,n){super(r,n);this.fallBackToCurrentEditorContext=!1;this.init()}static{this.variableInfo={name:"selection",description:"The current selection in the active editor",defaultEnablement:!0}}async init(){this.fallBackToCurrentEditorContext=await this.accessor.get(kr).getTreatmentVariableAsync("vscode","copilotchat.currentEditorImplicitContext",!0)??!1}render(r,n){let i=t.getCurrentSelection(this.accessor.get(ir));if(!i)return this.fallBackToCurrentEditorContext?vscpp(iM,null):void 0;if(this.accessor.get(Wt).isIgnored(i.activeDocument.uri,{includeCopilotIgnore:!0,includeGitIgnore:!1}))return;let s=[{uri:i.activeDocument.uri,version:i.activeDocument.version,ranges:[i.range]}],a=[new ko(new Lb(i.activeDocument.uri,i.range))];return vscpp(vscppf,null,vscpp("usedContext",{value:s}),vscpp("references",{value:a}),vscpp(pe,{priority:this.props.priority},"Active selection:",vscpp("br",null),vscpp("br",null),vscpp("br",null),i.fileName&&vscpp(vscppf,null,"From the file: ",cAe.basename(i.fileName),vscpp("br",null)),vscpp(nn,{code:i.selectedText,languageId:i.languageId}),vscpp("br",null),vscpp("br",null)))}static getCurrentSelection(r){let n=r.activeTextEditor,i=n?.document;if(i){let o=n.selection;if(o&&!o.isEmpty){let s=i.languageId,a=i.getText(o);return{languageId:s,selectedText:a,activeDocument:i,range:o,fileName:i.fileName}}}}};var UZ=class extends ue{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Vn,{priority:500,history:this.props.history}),vscpp(rt,{priority:1e3},"You are a coding assistant who help the user answer questions about code in their workspace by providing a list of relevant keywords they can search for to answer the question.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT try to answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),"2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question, the conversation history, and the user's current selection.",vscpp("br",null),"3. Output a precise version of question that resolves all pronouns to the nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns.",vscpp("br",null),"4. Then output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),"5. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),vscpp("br",null),"User: Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders"),vscpp(kn,{priority:600}),this.props.fileTree&&vscpp(pe,{priority:700},this.props.fileTree),vscpp(pe,{priority:1e3},this.props.query))}};async function uAe(t,e,r,n,i){let o=e.turns.length>1?e.turns.slice(0,-1):[];return new qt(t,r,UZ,{query:n,history:o,fileTree:i}).render()}var Xnt=/^[\*\-]\s*(.+)/m;function oM(t,e){let r=e.trim().split(`
`),n=0,i=[];for(let s of Array.from(r).reverse()){let a=s.match(Xnt);if(a){let u=a[1].split(/,/g).map(c=>c.trim());u.length&&i.unshift({keyword:u[0],variations:u.slice(1)})}else if(i.length)break;n++}return{rephrasedQuestion:r.slice(0,-n).join(`
`).trim()||t.trim(),keywords:i}}function lAe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}async function Jnt(t,e=1/0,r){let n=dAe(0,t,e),i=e-lAe(n);for(;;){let o=!1,s=[];for(let a of n)if(a.type==="text")s.push(a);else if(a.type==="dir"){s.push({type:"text",value:a.value});let u=await a.getChildren();if(r?.isCancellationRequested)return"";let c=dAe(a.level+1,u,i-1);c.length&&(o=!0,i-=lAe(c)+1,s.push(...c))}if(n=s,!o)break}return n.map(o=>o.value).join(`
`)}function dAe(t,e,r){let n="	".repeat(t),i=[],o=r;for(let s=0;s<e.length;++s){let a=e[s],u=n+a.name+(a.type===2?"/":"");if(u.length>o){let c=n+"...";for(;c.length>o&&i.length>0;)o+=i.pop().value.length+1;c.length<=o&&i.push({type:"text",value:c});break}a.type===2?i.push({type:"dir",level:t,value:u,getChildren:a.getChildren}):i.push({type:"text",value:u}),o-=u.length,s!==e.length-1&&(o-=1)}return i}async function BZ(t,e,r,n){let i=t.get(Zi),o=t.get(Wt);async function s(u){let c;try{c=await i.readDirectory(u)}catch(l){return console.error(l),[]}return n.isCancellationRequested?[]:(c.sort((l,d)=>l[0].localeCompare(d[0])),Promise.all(c.map(async l=>{let d=Ct.joinPath(u,l[0]);return Py(d)&&!await o.isIgnored(d)?l:null})).then(l=>l.filter(d=>d!==null).map(d=>d[1]===2?{type:2,name:d[0],getChildren:()=>s(Ct.joinPath(u,d[0]))}:{type:1,name:d[0]})))}if(await o.init(),n.isCancellationRequested)return"";let a=await s(e);return n.isCancellationRequested?"":Jnt(a,r,n)}async function GZ(t,e=500,r){let n=t.get(st).getWorkspaceFolders().at(0);if(!n)return;let i=await BZ(t,n,e,r);return Znt("I am working in a workspace that has the following structure:","",fo("",i))}var sM=class extends ue{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(Ee).getLogger("<WorkspaceSymbols>")}async prepare(r,n,i){let o=this.accessor.get(st),s=await Ay(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.getSymbols();return!a.length||i.isCancellationRequested?[]:pAe(a.map(u=>`- ${u.name} \u2014 ${$g(o,u.location.uri)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(pe,{priority:this.props.priority},"Here are some potentially relevant symbols from the current workspace:",vscpp("br",null),r.join(`
`))}async getSymbols(){let r=this.accessor.get(Wt),n=await Promise.all(this.props.keywords.flatMap(o=>[o.keyword,...o.variations]).map(o=>Pp(this.accessor.get(ya).getWorkspaceSymbols(o),this.timeout))),i=await Promise.all(n.flat().map(async o=>(o?await r.isIgnored(o.location.uri):!1)?null:o));return Br(i).filter(Boolean)}};Bl([o0(r=>r.logger)],sM.prototype,"prepare",1);var aM=class extends ue{constructor(r,n){super(r,n);this.timeout=15e3;this.logger=n.get(Ee).getLogger("<WorkspaceFiles>")}async prepare(r,n,i){let o=this.accessor.get(st),s=await Ay(this.accessor,{valueFor4096:8,maxMultiplier:4});if(i.isCancellationRequested)return[];let a=await this.findFiles(s,i);return!a.length||i.isCancellationRequested?[]:pAe(a.map(u=>`- ${$g(o,u)}`)).slice(0,s)}render(r,n){if(r.length)return vscpp(pe,{priority:this.props.priority},"Here are some potentially relevant file names from the workspace:",vscpp("br",null),r.join(`
`))}async findFiles(r,n){let i=this.accessor.get(Wt),o=this.accessor.get(Up),s=await Pp(o.findFilesWithDefaultExcludes(`{${this.props.keywords.flatMap(a=>[a.keyword,...a.variations]).map(a=>`**/*${a}*`).join(",")}}`,r,n),this.timeout);return s?s.filter(a=>!i.isIgnored(a)).sort((a,u)=>a.toString().localeCompare(u.toString())):[]}};Bl([o0(r=>r.logger)],aM.prototype,"prepare",1);var Dy=class extends ue{constructor(r,n){super(r,n);this.logger=n.get(Ee).getLogger("<WorkspaceChunks>")}async prepare(r,n,i=new tv().token){let o=this.accessor.get(LT),s=await Ay(this.accessor,{valueFor4096:4,maxMultiplier:4});if(i.isCancellationRequested)return;let a={fullText:this.props.fullQuestionText,keywords:this.props.keywords.flatMap(d=>[d.keyword,...d.variations])},u=(await o.searchFileChunks(r.endpoint,[a],s,i)).slice(0,s);if(i.isCancellationRequested||!u.length)return;this.props.resultFilter&&(u=this.props.resultFilter(u));let c=new hi;for(let d of u){let p=c.get(d.file)??[];d.isFullFile?p=[d]:p.some(f=>f.isFullFile||f.range.contains(d.range))||(p=[...p.filter(f=>!d.range.contains(f.range)),d]),c.set(d.file,p)}let l=Array.from(c.values()).flatMap(d=>d.sort((p,f)=>p.range.start.compareTo(f.range.start)||p.range.end.compareTo(f.range.end)).map(p=>new ko(p.isFullFile?p.file:new Lb(p.file,p.range))));return{chunks:u,references:l}}render(r,n){if(!r)return;let i=this.accessor.get(st);return vscpp(vscppf,null,vscpp("references",{value:r.references}),r.chunks.map((o,s)=>{let a=$g(i,o.file),u=typeof this.props.priority<"u"?this.props.priority+(1-(s+1)/r.chunks.length):void 0;return vscpp(pe,{priority:u},"Here is a potentially relevant code excerpt from `",a,"`:",vscpp("br",null),fo(js(o.file).replace(/\./g,""),o.text))}))}};Bl([o0(r=>r.logger)],Dy.prototype,"prepare",1);function pAe(t){return[...new Set(t)]}function Znt(...t){return t.join(`
`)}var qZ=class extends ue{async prepare(e,r,n){let i=this.accessor.get(st).getWorkspaceFolders().at(0);if(!i)return;let o=500;return BZ(this.accessor,i,o,n)}render(e,r){if(e)return vscpp(pe,null,"I am working in a workspace that has the following structure:",vscpp("br",null),vscpp("br",null),fo("",e))}},MT=class extends ue{async prepare(e,r,n){let i=this.accessor.get(Ue),o=this.props.query;if(!o)return;let s=this.accessor.get(wr),a=this.accessor.get(Ee).getLogger("workspaceResolver");a.debug("Determining workspace structure..."),r?.report(new Hc($R.t("Determining workspace structure")));let u=await GZ(this.accessor,1e3,n);if(n.isCancellationRequested)return;a.debug("Asking the model to update the user question and provide queries..."),r?.report(new Hc($R.t("Deciding which workspace information to collect")));let c=await this.accessor.get(tt).getNonUserRequestEndpoint(),{messages:l}=await uAe(this.accessor,this.props.conversation,c,o,u);if(n.isCancellationRequested)return;let d=await s.fetchOne(l,async f=>{},n,2,c,{temperature:.1,top_p:1,stop:["dontStopBelieving"]},{messageSource:"workspaceIntent"});if(n.isCancellationRequested)return;if(d.type!=="success")throw i.sendMSFTTelemetryEvent("workspaceResolver.error",{type:d.type,reason:d.reason,requestId:d.requestId}),new Error($R.t("Encountered an error while deciding what workspace information to collect: ({0}) {1}",d.type,d.reason));let p=oM(o,d.value);return a.debug("Running all tools..."),r?.report(new Hc($R.t("Gathering workspace info"))),{endpoint:c,keywords:p.keywords,fullQuestionText:p.rephrasedQuestion}}render(e,r){if(!e)return;let n={keywords:e.keywords,fullQuestionText:e.fullQuestionText},i=this.props.include??{workspaceStructure:!0,workspaceSymbols:!0,workspaceFiles:!0,workspaceChunks:!0};return vscpp(vscppf,null,i.workspaceStructure&&vscpp(qZ,{priority:this.props.priority,query:this.props.query,conversation:this.props.conversation}),i.workspaceSymbols&&vscpp(sM,{priority:this.props.priority,...n}),i.workspaceFiles&&vscpp(aM,{priority:this.props.priority,...n}),i.workspaceChunks&&vscpp(Dy,{priority:this.props.priority,...n}))}};var HZ=class{constructor(){this.kind="workspace";this.variableInfo={name:"codebase",description:"Searches through the codebase and pulls out relevant information for the query.",defaultEnablement:Dp||void 0}}async resolveContext(e,r,n,i){if(!r.message)return;let{messages:o,references:s,usedContext:a}=await us(e,r.endpoint,MT,{conversation:r.conversation??new za,query:this.turnQueryIntoWorkspaceQuery(r.message),include:{workspaceChunks:!0}},i,n);if(o.length>0)return{kind:this.kind,userMessages:o.map(u=>u.content),usedContext:a,references:s}}turnQueryIntoWorkspaceQuery(e){let r=e;return r.startsWith("@")&&(r=r.replace(/@\w+\s*/,"")),r=r.replaceAll(/\#codebase/gi,"codebase"),r}},Cor=Cr.register(new HZ);var uee=require("util");var JZ=we(DAe());function kAe(t,e){return typeof e=="string"?JZ.default.isMatch(t.fsPath,e,{dot:!0,windows:process.platform==="win32"}):JZ.default.isMatch(t.fsPath,e.pattern,{dot:!0,windows:process.platform==="win32"})}var UT={location:"sameFolder",prefix:"test_",suffixes:[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"]},BT={csharp:{suffixes:["Test"],location:"testFolder"},dart:{suffixes:["_test"],location:"testFolder"},go:{suffixes:["_test"],location:"sameFolder"},java:{suffixes:["Test"],location:"testFolder"},javascript:{suffixes:[".test",".spec"],location:"sameFolder"},kotlin:{suffixes:["Test"],location:"testFolder"},php:{suffixes:["Test"],location:"testFolder"},powershell:{suffixes:[".Tests"],location:"testFolder"},python:{prefix:"test_",location:"testFolder"},ruby:{suffixes:["_test","_spec"],location:"testFolder"},rust:{suffixes:[""],location:"testFolder"},swift:{suffixes:["Tests"],location:"testFolder"},typescript:{suffixes:[".test",".spec"],location:"sameFolder"}},kit={cs:"csharp",dart:"dart",go:"go",java:"java",js:"javascript",kt:"kotlin",php:"php",ps1:"powershell",py:"python",rb:"ruby",rs:"rust",swift:"swift",ts:"typescript"},Lit=function(){let t={};for(let[e,r]of Object.entries(kit))t[e]=BT[r];return t}(),XR=class{constructor(e,r){this._search=e;this._tabs=r}_findTabMatchingPattern(e){return this._tabs.tabs.find(n=>n.uri&&n.uri.scheme!==$n.untitled&&kAe(n.uri,e))?.uri}async findTestFileForSourceFile(e,r){if(e.isUntitled)return;let n=zu(e.uri),i=js(e.uri),o=BT[e.languageId]??UT,s=[];if(o.prefix&&s.push(o.prefix+n),o.suffixes)for(let c of o.suffixes??[]){let l=n.replace(`${i}`,`${c}${i}`);s.push(l)}let a=`**/{${s.join(",")}}`,u=this._findTabMatchingPattern(a);return u||(u=await this._search.findFilesWithDefaultExcludes(a,1,r)),u}async findAnyTestFileForSourceFile(e,r){let n=BT[e.languageId]??UT,i=[];if(n.prefix&&i.push(`${n.prefix}*`),n.suffixes){let a=js(e.uri);for(let u of n.suffixes??[])i.push(`*${u}${a}`)}let o=`**/{${i.join(",")}}`,s=this._findTabMatchingPattern(o);return s||(s=await this._search.findFilesWithDefaultExcludes(o,1,r)),s}async findFileForTestFile(e,r){let n=BT[e.languageId]??UT,i=zu(e.uri),o=[];n.suffixes&&o.splice(0,0,...n.suffixes),n.prefix&&o.splice(0,0,n.prefix);for(let s of o){let a=i.replace(s,"");if(a!==i){let u=`**/${a}`,c=this._findTabMatchingPattern(u);if(c||(c=await this._search.findFilesWithDefaultExcludes(u,1,r)),c)return c}}}};function QR(t){let e;Ct.isUri(t)||(e=BT[t.languageId],t=t.uri);let r=zu(t),n=js(t);return e??=Lit[n.replace(".","")],e?!(e.suffixes&&!e.suffixes.some(o=>r.endsWith(o+n))||e.prefix&&!r.startsWith(e.prefix)):!!(UT.suffixes.some(o=>r.endsWith(o+n))||r.startsWith(UT.prefix))}function LAe(t){let e=BT[t.languageId]??UT,r=zu(t.uri);if(e.prefix)return e.prefix+r;let n=js(t.uri),i=e.suffixes&&e.suffixes.length>0?e.suffixes[0]:".test";return r.replace(`${n}`,`${i}${n}`)}var Oit={abap:{start:'"',end:""},bat:{start:"REM",end:""},bibtex:{start:"%",end:""},blade:{start:"#",end:""},c:{start:"//",end:""},clojure:{start:";",end:""},coffeescript:{start:"//",end:""},cpp:{start:"//",end:""},csharp:{start:"//",end:""},css:{start:"/*",end:"*/"},dart:{start:"//",end:""},dockerfile:{start:"#",end:""},elixir:{start:"#",end:""},erb:{start:"<%#",end:"%>"},erlang:{start:"%",end:""},fsharp:{start:"//",end:""},go:{start:"//",end:""},groovy:{start:"//",end:""},haml:{start:"-#",end:""},handlebars:{start:"{{!",end:"}}"},haskell:{start:"--",end:""},html:{start:"<!--",end:"-->"},ini:{start:";",end:""},java:{start:"//",end:""},javascript:{start:"//",end:""},javascriptreact:{start:"//",end:""},jsonc:{start:"//",end:""},jsx:{start:"//",end:""},julia:{start:"#",end:""},kotlin:{start:"//",end:""},latex:{start:"%",end:""},less:{start:"//",end:""},lua:{start:"--",end:""},makefile:{start:"#",end:""},markdown:{start:"[]: #",end:""},"objective-c":{start:"//",end:""},"objective-cpp":{start:"//",end:""},perl:{start:"#",end:""},php:{start:"//",end:""},powershell:{start:"#",end:""},pug:{start:"//",end:""},python:{start:"#",end:""},ql:{start:"//",end:""},r:{start:"#",end:""},razor:{start:"<!--",end:"-->"},ruby:{start:"#",end:""},rust:{start:"//",end:""},sass:{start:"//",end:""},scala:{start:"//",end:""},scss:{start:"//",end:""},shellscript:{start:"#",end:""},slim:{start:"/",end:""},solidity:{start:"//",end:""},sql:{start:"--",end:""},stylus:{start:"//",end:""},svelte:{start:"<!--",end:"-->"},swift:{start:"//",end:""},terraform:{start:"#",end:""},tex:{start:"%",end:""},typescript:{start:"//",end:""},typescriptreact:{start:"//",end:""},vb:{start:"'",end:""},verilog:{start:"//",end:""},"vue-html":{start:"<!--",end:"-->"},vue:{start:"//",end:""},xml:{start:"<!--",end:"-->"},xsl:{start:"<!--",end:"-->"},yaml:{start:"#",end:""}};function Dc(t){let e=typeof t=="string"?t:t.languageId,r=Oit[e];return r?r.end?{languageId:e,lineCommentToken:"//"}:{languageId:e,lineCommentToken:r.start}:{languageId:e,lineCommentToken:"//"}}var Fit="vscode-notebook-cell";function Vr(t){return t.scheme===Fit||t.scheme==="untitled"&&t.fragment.startsWith("notebook-chat-input")}function MAe(t,e,r){let n=OAe(t,e,r.start),i=OAe(t,e,r.end),o=t.offsetAt(r.start),s=t.offsetAt(r.end);return n&&(o=Math.min(o,n.startIndex),s=Math.max(s,n.endIndex)),i&&(o=Math.min(o,i.startIndex),s=Math.max(s,i.endIndex)),new Ge(t.positionAt(o),t.positionAt(s))}async function FAe(t,e,r,n){let i=t.get(Sn),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(ya),a=jc(r,e),u=await wu(t,e,n,()=>o.getCallExpressions(a),[]);async function c(m){let h=e.positionAt(m.startIndex);try{let g=await s.getImplementations(e.uri,h);return g.length?g:await s.getDefinitions(e.uri,h)}catch{return[]}}let l=await wu(t,e,n*3,()=>Promise.all(u.map(c)),[]),d=[];for(let m=0;m<l.length;m++){let h=u[m],g=l[m];for(let v of g){let{uri:_,range:y}=rv(v)?{uri:v.targetUri,range:v.targetRange}:v,E=await t.get(st).openTextDocument(_),x=i.getTreeSitterAST(E);if(x){let O=(await x.getFunctionDefinitions()).find(U=>U.identifier===h.identifier);if(O){let U=jc(y,E);d.push({uri:_,range:y,version:E.version,identifier:h.identifier,startIndex:U.startIndex,endIndex:U.endIndex,text:O.text})}}}}if(d.length!==0)return d;let p=await wu(t,e,n,()=>o.getFunctionDefinitions(),[]),f=[];for(let m of p)for(let h of u)m.identifier===h.identifier&&f.push(m);return f.sort((m,h)=>m.startIndex-h.startIndex)}async function UAe(t,e,r,n){let i=t.get(Sn),o=i.getTreeSitterAST(e);if(!o)return[];let s=t.get(ya),a=jc(r,e),u=await wu(t,e,n,()=>o.getClassReferences(a),[]),c=await wu(t,e,n*3,async()=>await Promise.all(u.map(async f=>{try{let m=e.positionAt(f.startIndex),h=await s.getImplementations(e.uri,m);return h.length?h:await s.getDefinitions(e.uri,m)}catch{return[]}})),[]),l=[];for(let f=0;f<c.length;f++){let m=u[f],h=c[f];for(let g of h){let{uri:v,range:_}=rv(g)?{uri:g.targetUri,range:g.targetRange}:g,y=await t.get(st).openTextDocument(v),E=i.getTreeSitterAST(y);if(E){let x=(await E.getClassDeclarations()).find(S=>S.identifier===m.identifier);if(x){let S=jc(_,y);l.push({uri:v,range:_,version:y.version,identifier:m.identifier,startIndex:S.startIndex,endIndex:S.endIndex,text:x.text})}}}}if(l.length!==0)return l;let d=await wu(t,e,n,()=>o.getClassDeclarations(),[]),p=[];for(let f of d)for(let m of u)f.identifier===m.identifier&&p.push(f);return p.sort((f,m)=>f.startIndex-m.startIndex)}async function BAe(t,e,r,n){let o=t.get(Sn).getTreeSitterAST(e);if(!o)return[];let s=jc(r,e),a=await wu(t,e,n,()=>o.getTypeReferences(s),[]),u=await wu(t,e,n,()=>o.getTypeDeclarations(),[]),c=[];for(let l of u)for(let d of a)l.identifier===d.identifier&&c.push(l);return c.sort((l,d)=>l.startIndex-d.startIndex)}function OAe(t,e,r){let n=t.offsetAt(r),i=null;for(let o of e)if(!(o.endIndex<n)){if(o.startIndex>n)break;i=o}return i}function Uit(t,e){return e===0?t.then(r=>({type:"success",value:r})):new Promise((r,n)=>{let i=setTimeout(()=>r({type:"timeout"}),e);t.then(o=>{clearTimeout(i),r({type:"success",value:o})}).catch(o=>{clearTimeout(i),n(o)})})}async function Bit(t,e,r){let i=t.get(Sn).getTreeSitterAST(e);if(!i)return[];let o=await wu(t,e,r,()=>i.getFunctionPositions(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),o}async function ZZ(t,e,r){let i=t.get(Sn).getTreeSitterAST(e);if(!i)return[];let o=await wu(t,e,r,()=>i.getFunctionBodies(),[]);return o.sort((s,a)=>s.startIndex-a.startIndex),qit(o)}function qit(t){t.sort((r,n)=>r.startIndex-n.startIndex||n.endIndex-r.endIndex);let e=[];for(let r=0,n=t.length;r<n;){e.push(t[r]);let i=r+1;for(;i<t.length&&Es.doesContain(t[r],t[i]);)++i;r=i}return e}async function wu(t,e,r,n,i){let o=t.get(Ee).getLogger("asyncCompute");try{let s=await Uit(qAe(e,n,i),r);return s.type==="success"?s.value:(o.info(`Computing async parser based result took longer than ${r}ms`),i)}catch(s){return s instanceof cD||(o.exception(s,"Failed to compute async parser based result"),t.get(Ue).sendGHTelemetryException(s,"Failed to compute async parser based result")),i}}async function qAe(t,e,r,n=0){let i=t.version,o=await e();return t.version!==i?n<3?qAe(t,e,r,n+1):r:o}var wi=class t{static forDocument(e,r){return this.forUri(e,r.uri)}static forUri(e,r){return`${this.forLanguage(e)}: ${r.path}`}static forLanguage(e){return`${e.lineCommentToken} FILEPATH`}static testLine(e,r){let n=t.forLanguage(e);return r.trimStart().startsWith(n)}};var Ki=class{static begin(e,r){return typeof r>"u"?`${e.lineCommentToken} BEGIN:`:`${e.lineCommentToken} BEGIN: ${r}`}static end(e,r){return typeof r>"u"?`${e.lineCommentToken} END:`:`${e.lineCommentToken} END: ${r}`}};function am(t){return/```[\s\S]+\n```/m.test(t)}var Git={analysisTimeoutMs:100};async function ap(t,e,r){let n=t.get(Sn),i=t.get(Jr).extensionMode===_a.Test?0:Git.analysisTimeoutMs,o=Date.now(),s=await Bit(t,e,i),a=Date.now()-o,u=i===0?0:Math.max(10,i-a),c=await ZZ(t,e,u),l=n.getTreeSitterAST(e),d=l?await l.getStructure():void 0;return{wholeRange:e.validateRange(r),functionPositions:s,functionBodies:c,structure:d}}var Lo=class extends im{constructor(r,n){super();this.wholeRange=r;this.contextInfo=n}};(e=>{function t(r){return r instanceof e}e.is=t})(Lo||={});var ia=class{constructor(e){this.charLimit=e;this._totalChars=0}get totalChars(){return this._totalChars}addLine(e){this._totalChars+=e.length+1}lineWouldFit(e){return this._totalChars+e.length+1<this.charLimit}},Oo=class t{constructor(e,r,n,i){this.tracker=e;this.document=r;this.language=n;this.kindOrUniqueStr=i;this.lines=[];this.firstLineIndex=this.document.lineCount;this.lastLineIndex=-1;this.isComplete=!1;this.nonTrimWhitespaceCharCount=0;this._startMarker=Ki.begin(n,i),this._endMarker=Ki.end(n,i),this.lines=[],this.firstLineIndex=r.lineCount,this.lastLineIndex=-1}get startMarker(){return this._startMarker}get endMarker(){return this._endMarker}get lineCount(){return this.lines.length}get isVerySmallOrEmpty(){return this.nonTrimWhitespaceCharCount<10}get hasContent(){return this.lines.length===0||this.nonTrimWhitespaceCharCount===0?!1:this.lines.length>0}clone(){let e=new t(this.tracker,this.document,this.language,this.kindOrUniqueStr);return e._startMarker=this.startMarker,e._endMarker=this.endMarker,e.lines.push(...this.lines),e.firstLineIndex=this.firstLineIndex,e.lastLineIndex=this.lastLineIndex,e.nonTrimWhitespaceCharCount=this.nonTrimWhitespaceCharCount,e}clear(){this.lines.length=0,this.firstLineIndex=this.document.lineCount,this.lastLineIndex=-1,this.nonTrimWhitespaceCharCount=0}generatePrompt(e){if(!this.hasContent)return[];let r=[];return r.push("```"+this.language.languageId),r.push(wi.forDocument(this.language,this.document)),e&&r.push(`${this.startMarker}`),r.push(...this.lines),e&&r.push(`${this.endMarker}`),r.push("```"),r}prependLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.unshift(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}appendLine(e){let n=this.document.lineAt(e).text;return this.tracker.lineWouldFit(n)?(this.firstLineIndex=Math.min(this.firstLineIndex,e),this.lastLineIndex=Math.max(this.lastLineIndex,e),this.lines.push(n),this.tracker.addLine(n),this.nonTrimWhitespaceCharCount+=n.trim().length,!0):!1}trim(e){let r=e?Math.min(this.lastLineIndex,e.start.line):this.lastLineIndex;for(;this.firstLineIndex<r&&this.lines.length>0&&this.lines[0].trim().length===0;)this.firstLineIndex++,this.lines.shift();let n=e?Math.max(this.firstLineIndex,e.end.line):this.firstLineIndex;for(;n<this.lastLineIndex&&this.lines.length>0&&this.lines[this.lines.length-1].trim().length===0;)this.lastLineIndex--,this.lines.pop()}removeFirstNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(0,e),n=0;for(let i of r)n+=i.trim().length;return this.firstLineIndex+=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}removeLastNLines(e){if(e>=this.lineCount){let i=this.lines.slice(0),o=this.nonTrimWhitespaceCharCount;return this.clear(),{lines:i,nonTrimWhitespaceCharCount:o}}let r=this.lines.splice(this.lines.length-e,e),n=0;for(let i of r)n+=i.trim().length;return this.lastLineIndex-=e,this.nonTrimWhitespaceCharCount-=n,{lines:r,nonTrimWhitespaceCharCount:n}}takeFromAbove(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeLastNLines(r);this.lines.unshift(...n),this.firstLineIndex-=n.length,this.nonTrimWhitespaceCharCount+=i}takeFromBelow(e,r){let{lines:n,nonTrimWhitespaceCharCount:i}=e.removeFirstNLines(r);this.lines.push(...n),this.lastLineIndex+=n.length,this.nonTrimWhitespaceCharCount+=i}mergeFromAbove(e){e.hasContent&&(this.lines.unshift(...e.lines),this.firstLineIndex=e.firstLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}mergeFromBelow(e){e.hasContent&&(this.lines.push(...e.lines),this.lastLineIndex=e.lastLineIndex,this.nonTrimWhitespaceCharCount+=e.nonTrimWhitespaceCharCount,e.clear())}toRange(){try{let e=this.lastLineIndex===-1?this.document.lineCount-1:this.lastLineIndex,r=new Ge(this.firstLineIndex,0,e,this.document.lineAt(e).text.length);if(this.document.validateRange(r)===r)return r}catch{return}}toString(){return`{${this.firstLineIndex} -> ${this.lastLineIndex}}`}};var Gs=class extends ue{render(){return vscpp(vscppf,null,"```",this.props.language.languageId,vscpp("br",null),this.props.document&&vscpp(vscppf,null,wi.forDocument(this.props.language,this.props.document),vscpp("br",null)),this.props.code&&vscpp(vscppf,null,this.props.code,vscpp("br",null)),"```")}};var ls=class extends ue{render(){if(!this.props.codeRegion.hasContent)return;let e=[];return this.props.useMarkers&&e.push(this.props.codeRegion.startMarker),e.push(...this.props.codeRegion.lines),this.props.useMarkers&&e.push(this.props.codeRegion.endMarker),vscpp(Gs,{language:this.props.codeRegion.language,document:this.props.codeRegion.document,code:e.join(`
`)})}};var qT=class extends ue{async prepare(){return await ap(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(!Vr(this.props.documentContext.document.uri))throw Vo("InlineChatNotebookSelection should be used only with a notebook!");let{wholeRange:n}=e,i=Hit(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n),o=this.props.documentContext.document,s=new Lo(n,i),a=[{uri:o.uri,version:o.version,ranges:Br([i.range.toRange(),i.above.toRange(),i.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:a}),vscpp("meta",{value:s}),vscpp(JR,{documentContext:this.props.documentContext,above:i.above,range:i.range,below:i.below,aboveCells:i.aboveCells,belowCells:i.belowCells}))}},JR=class extends ue{render(e,r){if(!Vr(this.props.documentContext.document.uri))throw Vo("InlineChatNotebookSelectionRenderer should be used only with a notebook!");let n=this.props.includeDelimeters??!1,{below:i,above:o,range:s,aboveCells:a,belowCells:u}=this.props,c=a||[],l=u||[],d=this.props.documentContext.language;return vscpp(vscppf,null,(c.length>0||l.length>0)&&vscpp(pe,null,"I am working on a Jupyter notebook.",vscpp("br",null),"This Jupyter Notebook already contains multiple cells.",vscpp("br",null),"The content of cells are listed below, each cell starts with CELL INDEX and a code block started with ```",d.languageId,vscpp("br",null),"Each cell is a block of code that can be executed independently.",vscpp("br",null),"Since it is Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells as well.",vscpp("br",null),"For the same reason, if a variable is defined in a cell, it can be used in other cells as well.",vscpp("br",null),"We should not repeat the same import or variable definition in multiple cells, unless we want to overwrite the previous definition.",vscpp("br",null),"Do not generate CELL INDEX in your answer, it is only used to help you understand the context.",vscpp("br",null),vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow the exmaples on how to avoid repeating code.",vscpp("br",null),"## Examples starts here",vscpp("br",null),"Here are the cells in this Jupyter Notebook:",vscpp("br",null),"`CELL INDEX: 0",vscpp("br",null),"```python",vscpp("br",null),"import pandas as pd",vscpp("br",null),vscpp("br",null),"# create a dataframe with sample data",vscpp("br",null),"df = pd.DataFrame({'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35], 'Gender': ['F', 'M', 'M']})",vscpp("br",null),"print(df)",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"Now I create a new cell in this Jupyter Notebook document at index 1.",vscpp("br",null),"In this new cell, I am working with the following code:",vscpp("br",null),"```python",vscpp("br",null),"```",vscpp("br",null),"---------------------------------",vscpp("br",null),"USER:",vscpp("br",null),"plot the data frame",vscpp("br",null),vscpp("br",null),"---------------------------------",vscpp("br",null),"ChatGPT Answer",vscpp("br",null),"---------------------------------",vscpp("br",null),"To plot the dataframe, we can use the `plot()` method of pandas dataframe. Here's the code:",vscpp("br",null),vscpp("br",null),"```python",vscpp("br",null),"df.plot(x='Name', y='Age', kind='bar')",vscpp("br",null),"```",vscpp("br",null),"## Example ends here",vscpp("br",null),c.length>0&&vscpp(pM,{cells:c,title:`Here are the cells in this Jupyter Notebook:
`}),l.length>0&&vscpp(pM,{cells:l,cellIndexDelta:c.length+1,title:`Here are the cells below the current cell that I am editing in this Jupyter Notebook:
`})),d.languageId==="markdown"?vscpp(eee,{cellIndex:c.length,selected:s,above:o,below:i,includeDelimeters:n}):vscpp(tee,{cellIndex:c.length,selected:s,above:o,below:i,includeDelimeters:n}))}},eee=class extends ue{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(pe,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),"This is a markdown cell. Markdown cell is used to describte and document your workflow.",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following content in the selection:",vscpp(ls,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following content:",vscpp(Gs,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(pe,null,"In this new cell, I have the following markdown content above the selection:",vscpp(ls,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(pe,null,"In this new cell, I have the following markdown content below the selection:",vscpp(ls,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},tee=class extends ue{render(){let e=this.props.includeDelimeters??(this.props.above.hasContent||this.props.below.hasContent);return vscpp(vscppf,null,vscpp(pe,null,"Now I create a new cell in this Jupyter Notebook document at index ",this.props.cellIndex,".",vscpp("br",null),this.props.selected.hasContent?vscpp(vscppf,null,"I have the following code in the selection:",vscpp(ls,{codeRegion:this.props.selected,useMarkers:e})):vscpp(vscppf,null,"In this new cell, I am working with the following code:",vscpp(Gs,{language:this.props.selected.language,code:""}))),this.props.above.hasContent&&vscpp(pe,null,"In this new cell, I have the following code above the selection:",vscpp(ls,{codeRegion:this.props.above,useMarkers:this.props.includeDelimeters})),this.props.below.hasContent&&vscpp(pe,null,"In this new cell, I have the following code below the selection:",vscpp(ls,{codeRegion:this.props.below,useMarkers:this.props.includeDelimeters})))}},pM=class extends ue{render(){return vscpp(vscppf,null,this.props.title,vscpp("br",null),this.props.cells.map((e,r)=>vscpp(ree,{index:r+(this.props.cellIndexDelta??0),cell:e})))}},ree=class extends ue{render(){return vscpp(vscppf,null,"CELL INDEX: ",this.props.index,vscpp("br",null),"```",this.props.cell.language.languageId,vscpp("br",null),this.props.cell.lines.join(`
`),vscpp("br",null),"```")}};function Hit(t,e,r,n){let i=e*4,o=new ia(i),s=ZR(r.document,r.selection,n,new Ge(0,0,r.document.lineCount,0),r.language,o);return fM(t.get(ir),t.get(st),r,s,o)}var GT=class extends ue{async prepare(){return await ap(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(Vr(this.props.documentContext.document.uri))throw Vo("InlineChatSelection should not be used with a notebook!");let{wholeRange:n,functionPositions:i,functionBodies:o}=e,s=nee(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,n,i,o),a=this.props.documentContext.document,u=this.props.documentContext.language,c=new Lo(n,s),l=[{uri:a.uri,version:a.version,ranges:Br([s.range.toRange(),s.above.toRange(),s.below.toRange()])}],d=s.above.hasContent||s.below.hasContent||s.outlineAbove.length>0||s.outlineBelow.length>0;return vscpp(vscppf,null,vscpp("usedContext",{value:l}),vscpp("meta",{value:c}),s.outlineAbove.length>0&&vscpp(pe,null,"I have the following code above:",vscpp(Gs,{language:u,document:a,code:s.outlineAbove})),s.above.hasContent&&vscpp(pe,null,"I have the following code above the selection:",vscpp(ls,{codeRegion:s.above,useMarkers:d})),s.below.hasContent&&vscpp(pe,null,"I have the following code below the selection:",vscpp(ls,{codeRegion:s.below,useMarkers:d})),s.outlineBelow.length>0&&vscpp(pe,null,"I have the following code below:",vscpp(Gs,{language:u,document:a,code:s.outlineBelow})),s.range.hasContent&&vscpp(pe,null,"I have the following code in the selection:",vscpp(ls,{codeRegion:s.range,useMarkers:d})),!s.range.hasContent&&!d&&vscpp(pe,null,"I am in an empty file:",vscpp(Gs,{language:u,document:a,code:""})))}};function nee(t,e,r,n,i,o){let s=e*4,a=new ia(s),u=ZR(r.document,r.selection,n,new Ge(0,0,r.document.lineCount,0),r.language,a);if(!(u.above.hasContent&&!u.above.isComplete))return{language:u.language,above:u.above,range:u.range,below:u.below,outlineAbove:"",outlineBelow:""};let l=new ia(s),d=MAe(r.document,i,n),p=new Ge(d.start.line,0,d.end.line,r.document.lineAt(d.end.line).range.end.character),f=ZR(r.document,r.selection,n,p,r.language,l),m="",h="";if(f.above.isComplete&&f.below.isComplete){let g=GAe({document:r.document,functionBodies:o,rangeExpandedToFunctionWholeLines:p}),v=HAe(g,l);m=v.outlineAbove,h=v.outlineBelow}return{language:f.language,above:f.above,range:f.range,below:f.below,outlineAbove:m,outlineBelow:h}}var iee=class{constructor(){this.kind="inline-chat-selection"}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=Vr(i.document.uri)?qT:GT,{messages:s,metadatas:a,usedContext:u}=await us(e,r.endpoint,o,{documentContext:i}),c=a.get(Lo);return{kind:this.kind,userMessages:s.map(l=>l.content),usedContext:u,metadata:c}}},jAe=Cr.register(new iee);function ZR(t,e,r,n,i,o){if(r.start.line!==r.end.line&&r.end.character===0){let d=t.lineAt(r.end.line-1);r=new Ge(r.start,new Rr(r.end.line-1,d.text.length))}else if(e.end.character===0&&e.end.line!==e.start.line&&(r.start.line===e.start.line&&r.start.character===0&&r.end.line===e.end.line&&r.end.character===t.lineAt(r.end.line).text.length||r.isEqual(e))){let d=t.lineAt(r.end.line-1);r=new Ge(r.start,new Rr(r.end.line-1,d.text.length))}let s=new Oo(o,t,i,"ed8c6549bwf9"),a=new Oo(o,t,i,"abpxx6d04wxr"),u=new Oo(o,t,i,"be15d9bcejpp"),c=()=>(a.trim(),s.trim(e),u.trim(),{language:i,above:a,range:s,below:u});for(let d=r.end.line;d>=r.start.line;d--)if(!s.prependLine(d))return c();let l={aboveLineIndex:r.start.line-1,belowLineIndex:r.end.line+1,minimumLineIndex:Math.max(0,n.start.line),maximumLineIndex:Math.min(t.lineCount-1,n.end.line)};return see(l,a,u),c()}function see(t,e,r){let n=t.aboveLineIndex,i=!0,o=t.belowLineIndex,s=!0;for(let a=0;a<100&&(i||s);a++)!i||s&&a%4===3?o<=t.maximumLineIndex&&r.appendLine(o)?o++:s=!1:n>=t.minimumLineIndex&&e.prependLine(n)?n--:i=!1;e.isComplete=n<t.minimumLineIndex,r.isComplete=o>t.maximumLineIndex}function GAe({document:t,functionBodies:e,rangeExpandedToFunctionWholeLines:r}){let n="";t.languageId==="typescript"&&(n=";");let i=d=>{let f=new Ge(t.positionAt(d.startIndex),t.positionAt(d.endIndex));return f.end.line<r.start.line?r.start.line-f.start.line>50:f.start.line>r.end.line?f.end.line-r.end.line>50:!0},o=e.filter(i),s=t.offsetAt(r.start),a=t.offsetAt(r.end),u={startOffset:s,endOffset:a},{outlineAbove:c,outlineBelow:l}=aee(t.getText(),o,u,n);return{outlineAboveRange:c,outlineBelowRange:l}}function aee(t,e,r,n){let i=0,o="",s=r.endOffset,a="";for(let u of e)if(u.endIndex<r.startOffset)o+=t.substring(i,u.startIndex),o+=n,i=u.endIndex;else if(u.startIndex>r.endOffset)a+=t.substring(s,u.startIndex),a+=n,s=u.endIndex;else continue;return o+=t.substring(i,r.startOffset),a+=t.substring(s,t.length),{outlineAbove:o,outlineBelow:a}}function HAe(t,e){let r=/\r\n|\r|\n/g,n=t.outlineAboveRange===""?[]:t.outlineAboveRange.split(r),i=t.outlineBelowRange===""?[]:t.outlineBelowRange.split(r),o=[],s=[],a=f=>e.lineWouldFit(f)?(e.addLine(f),o.unshift(f),!0):!1,u=f=>e.lineWouldFit(f)?(e.addLine(f),s.push(f),!0):!1,c=n.length-1,l=!0,d=0,p=!0;for(let f=0;f<100&&(l||p);f++)!l||p&&f%4===3?d<i.length&&u(i[d])?d++:p=!1:c>=0&&a(n[c])?c--:l=!1;return{outlineAbove:o.join(`
`),outlineBelow:s.join(`
`)}}function fM(t,e,r,n,i){let o={...n,outlineAbove:"",outlineBelow:"",aboveCells:[],belowCells:[]},s,a,u;if(r.document.uri.scheme==="vscode-notebook-cell"){s=e.notebookDocuments.find(E=>E.uri.fsPath===r.document.uri.fsPath&&E.getCells().find(x=>x.document===r.document));let y=s?.getCells().findIndex(E=>E.document===r.document);if(y===void 0||y===-1)return o;a=y-1,u=y+1}else{if(t.activeNotebookEditor?.notebook.uri.path!==r.document.uri.path)return o;let y=t.activeNotebookEditor;s=y?.notebook;let E=y.selection.start;a=E-1,u=E}if(!s)return o;let{language:c,above:l,range:d,below:p}=n,f=l.lines.length+d.lines.length+p.lines.length,m=[],h=[],g=()=>(m.forEach(y=>y.trim()),h.forEach(y=>y.trim()),{language:c,above:l,range:d,below:p,outlineAbove:"",outlineBelow:"",aboveCells:m,belowCells:h}),v=!0,_=!0;for(let y=f;y<100&&(v||_);y++)if(v)if(a>=0){let x=s.cellAt(a).document,S=new Oo(i,x,Dc(x),"CELL:"+x.uri.fragment);for(let O=0;O<x.lineCount;O++)S.appendLine(O);m.unshift(S),a--}else v=!1;else if(u<s.cellCount){let x=s.cellAt(u).document,S=new Oo(i,x,Dc(x),"CELL:"+x.uri.fragment);for(let O=0;O<x.lineCount;O++)S.appendLine(O);h.push(S),u++}else _=!1;return g()}var mM=class extends ue{constructor(){super(...arguments);this._decoder=new uee.TextDecoder}async prepare(r,n,i){let{documentContext:o,endpointInfo:s}=this.props;if(QR(o.document))return;let a=this.accessor.get(Zi),u=new XR(this.accessor.get(Up),this.accessor.get(ir)),c=s.modelMaxPromptTokens*4/3,l=async(p,f=c)=>{let h=this._decoder.decode(await a.readFile(p)).substring(0,f);return`${wi.forUri(o.language,p)}

${h}`},d=await u.findTestFileForSourceFile(o.document,i??zo.None);if(d)return this.props.onDidFindCandidate(d),this.props.onReference(new ko(d)),{kind:"candidateTestFile",codeExcerpt:await l(d)};{let p=await u.findAnyTestFileForSourceFile(o.document,i??zo.None);return p?(this.props.onReference(new ko(p)),{kind:"anyTestFile",codeExcerpt:await l(p)}):void 0}}render(r,n){if(r!==void 0)switch(r.kind){case"candidateTestFile":return vscpp(pe,null,vscpp("br",null),vscpp("br",null),"Excerpt of the existing test file:",vscpp("br",null),vscpp("br",null),vscpp("br",null),"```",this.props.documentContext.document.languageId,vscpp("br",null),r.codeExcerpt,vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),"Because a test file exists: ",vscpp("br",null),"- Do not generate preambles, like imports, copyright headers etc.",vscpp("br",null),"- Do generate code that can be appended to the existing test file.");case"anyTestFile":return vscpp(pe,null,"This is sample test file: ",vscpp("br",null),vscpp("br",null),"```",this.props.documentContext.document.languageId,vscpp("br",null),r.codeExcerpt,"``` ",vscpp("br",null))}}},cee=class{constructor(){this.kind="tests/test2impl";this.metaContextResolverInfo={description:"Information about existing or related files containing tests."};this._decoder=new uee.TextDecoder}async resolveContext(e,r,n){let i=r.documentContext;if(!i||!QR(i.document))return;let o=e.get(Zi),s=new XR(e.get(Up),e.get(ir)),a=r.endpoint.modelMaxPromptTokens*4/3;function u(p,f,m=a){return`${wi.forUri(i.language,p)}

${f.substring(0,m)}`}let c=async p=>{let f=this._decoder.decode(await o.readFile(p));return u(p,f)},l=await s.findFileForTestFile(i.document,n);if(!l)return;let d;try{let p=await e.get(st).openTextDocument(l),f=p.getText(),m=await ZZ(e,p,100),{outlineAbove:h,outlineBelow:g}=aee(f,m,{startOffset:f.length,endOffset:f.length},""),v=`${h}
${g}`;d=new Fp(`
This is an excerpt of the file that this test is covering:

`),d.appendCodeblock(u(l,v),i.document.languageId)}catch{}return d||(d=new Fp(`
This is an excerpt of the file that this test is covering:

`),d.appendCodeblock(await c(l),i.document.languageId)),{kind:this.kind,userMessages:[d.value],references:[new ko(l)]}}},VAe=Cr.register(new cee);var jit=require("path"),lee=class{constructor(){this.kind="current-editor";this.variableInfo={name:"editor",description:"The visible source code in the active editor",defaultEnablement:!0};this.metaContextResolverInfo={description:"Source code in the active document."}}async resolveContext(e,r){let n=e.get(ir).activeTextEditor,i=e.get(Wt);if(n&&i.isIgnored(n.document.uri,{includeCopilotIgnore:!0,includeGitIgnore:!1}))return;let o=n?.visibleRanges[0];if(o){let s="";n.selection.isSingleLine&&(s=`The cursor is on line: ${n.selection.start.line}`);let a="Excerpt from active file "+jit.basename(n.document.uri.path)+", lines "+(o.start.line+1)+" to "+(o.end.line+1)+":\n```"+n.document.languageId+`
`+n.document.getText(o)+"\n```\n\n"+s,u=[{uri:n.document.uri,version:n.document.version,ranges:[o]}];return{kind:this.kind,userMessages:[a],usedContext:u,references:[new ko({uri:n.document.uri,range:o})]}}}},zAe=Cr.register(new lee);var YAe=we(require("path"));var eA=class{constructor(){this.kind="current-selection";this.variableInfo=kn.variableInfo;this.metaContextResolverInfo={description:"Active selection."}}async resolveContext(e,r){let{messages:n,references:i,usedContext:o}=await us(e,r.endpoint,kn,{});if(n.length>0)return{kind:this.kind,userMessages:n.map(s=>s.content),usedContext:o,references:i}}static formatSelection(e){return`

${e.fileName?`From the file: ${YAe.basename(e.fileName)}
`:""}${fo(e.languageId,e.selectedText)}

`}},$Ae=Cr.register(new eA);var a0=class t extends ue{static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){let e={implementations:[],activeDocument:void 0},r=this.accessor.get(ir).activeTextEditor;if(!r)return e;let n=r.document,i=this.props.range??r.selection;if(!i||i.isEmpty||this.accessor.get(Wt).isIgnored(n.uri,{includeCopilotIgnore:!0,includeGitIgnore:!1}))return e;let o=this.accessor.get(Jr).extensionMode===_a.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,s=[{header:"Relevant function implementations",findImpls:FAe},{header:"Relevant class declarations",findImpls:UAe},{header:"Relevant type declarations",findImpls:BAe}],a=[];for(let{header:u,findImpls:c}of s){let l=await c(this.accessor,n,i,o);a.push([u,l])}return{implementations:a,activeDocument:n}}render(e,r){if(!e.implementations.length||!e.activeDocument)return;let n=[],i=[],o=[];for(let[s,a]of e.implementations){let{references:u,usedContext:c,text:l}=dee(e.activeDocument,a);if(l.length===0)continue;let d=vscpp(pe,{priority:this.props.priority},s,":",vscpp("br",null),vscpp("br",null),l.map(p=>vscpp(vscppf,null,vscpp(nn,{code:p,languageId:e.activeDocument?.languageId}),vscpp("br",null))));n.push(d),i.push(...u),o.push(...c)}return vscpp(vscppf,null,vscpp("usedContext",{value:o}),vscpp("references",{value:i}),...n)}};function dee(t,e){let r=[],n=new Map,i=new Set,o=[];for(let s of e){let a=s.uri??t.uri,u=s.range??new Ge(t.positionAt(s.startIndex),t.positionAt(s.endIndex)),c=`${a.toString()}-${u.start.line}-${u.start.character}-${u.end.line}-${u.end.character}`;if(i.has(c))continue;i.add(c),r.push(new ko(new Lb(a,u))),o.push(s.text);let[l,d]=n.get(a)??[s.version??t.version,[]];d.push(u),n.set(a,[l,d])}return{references:r,usedContext:[...n.entries()].map(([s,[a,u]])=>({uri:s,version:a,ranges:u})),text:o}}var pee=class{constructor(){this.kind="current-selection-implementations";this.metaContextResolverInfo={description:"Relevant implementations referenced in active selection."}}async resolveContext(e,r,n,i){let{references:o,messages:s,usedContext:a}=await us(e,r.endpoint,a0,{});return{kind:this.kind,references:o,userMessages:s.map(u=>u.content),usedContext:a}}},Qar=Cr.register(new pee);var fee=class{constructor(){this.kind="debug-console-output";this.variableInfo={name:"debugConsole",description:"The output in the debug console",defaultEnablement:!1};this.metaContextResolverInfo={description:"Debug console output."}}async resolveContext(e){return{kind:this.kind,userMessages:[`Debug console output:
`+e.get(Rb).consoleOutput]}}},rcr=Cr.register(new fee);var Vit=200,WAe=300,cp=class extends ue{render(e,r){let{diagnostics:n,documentContext:i}=this.props,o,s=(a,u)=>{let c=i.document.getText(new Ge(a.start.line,0,a.end.line+1,0)).trim();return c.length>0&&c.length<u?c:""};return this.props.diagnostics.length>0&&vscpp(pe,null,"The code has the following ",n[0].source," problems",n.map((a,u)=>vscpp(vscppf,null,vscpp("br",null),"Problem ",u+1,":",vscpp("br",null),(o=s(a.range,Vit))&&vscpp(vscppf,null,"This code",vscpp("br",null),vscpp(nn,{code:o}),vscpp("br",null),"has the problem reported:",vscpp("br",null)),vscpp(nn,{code:a.message}),vscpp(tA,{diagnostic:a}))))}},tA=class extends ue{async prepare(){let e=this.accessor.get(st),r=this.accessor.get(Sn);return{info:await zit(e,r,this.props.diagnostic.relatedInformation)}}render(e,r){return e.info?vscpp(vscppf,null,"This diagnostic has some related code:",vscpp("br",null),e.info):void 0}};async function zit(t,e,r){let n=[];if(r)for(let i of r)try{let o=i.location,s=await t.openTextDocument(o.uri),a=o.range,u=e.getTreeSitterAST(s),c;if(u){let l=nD(a),d=await u.getCoarseParentScope(l);c=s.getText(iD(d))}(!c||c.length>WAe)&&(c=s.getText(a)),c.length<=WAe&&n.push(fo("",c))}catch{}return n.join(`
`)}function hM(t,e,r,n){let i=t.modelMaxPromptTokens*4/3,o=new ia(i),s=e.document,a=e.language,u=new Oo(o,s,a,"ed8c6549bwf9"),c=new Oo(o,s,a,"abpxx6d04wxr"),l=new Oo(o,s,a,"be15d9bcejpp"),d=()=>(c.trim(),u.trim(),l.trim(),{contextInfo:{language:a,above:c,range:u,below:l,outlineAbove:"",outlineBelow:""},tracker:o});if(!Yit(u,r,n))return d();let f={aboveLineIndex:n.start.line-1,belowLineIndex:n.end.line+1,minimumLineIndex:0,maximumLineIndex:s.lineCount-1};return see(f,c,l),d()}function Yit(t,e,r){let n=Math.floor((e.start.line+e.end.line)/2),i=Math.max(n-r.start.line,r.end.line-n);t.appendLine(n);for(let o=1;o<=i;o++){let s=n-o,a=n+o;if(s>=r.start.line&&!t.prependLine(s)||a<=r.end.line&&!t.appendLine(a))return!1}return!0}function up(t,e,r,n){let i=t.getDiagnostics(e).filter(o=>!!o.range.intersection(r));if(n){let o=i.filter(s=>n.includes(s.message));if(o.length>0)return o}return i}async function gM(t,e,r){let n=nD(e),i=Math.max(r,e.end.line-e.start.line+r),o=await t.getFixSelectionOfInterest(n,i);return iD(o)}var mee=class{constructor(){this.kind="diagnostics";this.metaContextResolverInfo={description:"Diagnostics in the active editor."}}async resolveContext(e,r,n){let i=r.documentContext;if(!i)return;let o=up(e.get(Yo),i.document.uri,i.selection,r.message),{messages:s,usedContext:a}=await us(e,r.endpoint,cp,{documentContext:i,diagnostics:o});return{kind:this.kind,userMessages:s.map(u=>u.content),usedContext:a}}},wcr=Cr.register(new mee);var vM=class{constructor(e){let r=Op(e.get(gt).getEditorInfo().version);this.embeddingsCache=new zl(e,1,"api",r,"api")}async updateIndex(){this.apiChunks=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this.apiChunks)return[];let i=this.apiChunks.map(o=>{if(!o.embedding)return{text:o.text,similarity:0};let s=Vl(e,o.embedding);return{text:this.toContextString(o),similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.text)}toContextString(e){return e.type==="code"?`Snippet from vscode.d.ts:
${fo(e.lang,e.text)}`:e.type==="command"?`${e.text}`:e.type==="documentationCodeBlock"?`Example code from documentation:
${fo(e.lang,e.text)}`:""}},_M=se("IApiEmbeddingsIndex");var hee=class{constructor(e){let r=Op(e.get(gt).getEditorInfo().version);this.embeddingsCache=new zl(e,1,"extensionEmbeddings",r,"extensions")}async updateIndex(){this._embeddings=await this.embeddingsCache.getCache()}nClosestValues(e,r,n=0){if(!this._embeddings)return[];let i=Object.entries(this._embeddings).map(o=>{if(!o[1].embedding)return{key:`${o[1].name}(${o[0]})`,similarity:0};let s=Vl(e,o[1].embedding);return{key:`${o[1].name}(${o[0]})`,similarity:s}});return i=i.filter(o=>o.similarity>n),i.sort((o,s)=>s.similarity-o.similarity),i.slice(0,r).map(o=>o.key)}},$it=`
The current question is related to VS Code extensions. The application is currently open.
If an extension is not a valid answer, but it still relates to VS Code, please still respond.
Please do not guess a response and instead just respond with a polite apology if you are unsure.
If you believe the given context given to you is incorrect or not relevant you may ignore it.
At the end of your response, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all extension IDs you referenced in your response.
The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.
`.trimStart(),gee=class{constructor(){this.kind="extensions"}async resolveContext(e,r,n){let i=$it+`

`;this._embeddingCompute??=e.get(vi);let o=r.message;if(!o||(this._extensionsIndex||(this._extensionsIndex=new hee(e),await this._extensionsIndex.updateIndex()),n.isCancellationRequested))return;let s=await this._embeddingCompute?.computeEmbeddings([o],n);if(!(!s||n.isCancellationRequested)&&s&&s.length>0){let a=this._extensionsIndex.nClosestValues(s[0],5);if(a.length)return i+=`Here are some possible extensions:
`,i+=a.join(`

`),{kind:this.kind,userMessages:[`Relevant information about extensions for VS Code:
`+i]}}}},Hcr=Cr.register(new gee);var KAe=we(require("path"));var vee=class{constructor(){this.kind="git-metadata";this.variableInfo={name:"git",description:"Information about the current git repository"};this.metaContextResolverInfo={description:"Metadata about the current git repository."}}async resolveContext(e,r,n){let i=e.get(st),s=e.get(xs).repositories,a=i.getWorkspaceFolders();if(!s||!a)return;if(a.length>1){let c=r.documentContext?.document.uri??e.get(ir).activeTextEditor?.document.uri;if(c){let l=i.getWorkspaceFolder(c);if(l){let d=a.findIndex(p=>p.toString()===l.toString());d!==-1&&(s=[s[d]],a=[a[d]])}}}let u=[];for(let c=0;c<s.length;c++){if(n.isCancellationRequested)return;let l=s[c],d=a[c];if(!l)continue;let p=[];p.push(`Workspace Folder: ${KAe.basename(d.path)}`),p.push("```"),l.headBranchName?(p.push(`Current Branch name: ${l.headBranchName}`),p.push(`Upstream: ${l.upstreamBranchName?l.upstreamBranchName:"none"}`)):p.push("Detached HEAD?: yes"),p.push(`Is currently rebasing?: ${l.isRebasing?"yes":"no"}`),p.push(`Remotes: ${(l.remotes??[]).join(", ")}`),p.push("```"),u.push(p.join(`
`))}return{kind:this.kind,userMessages:[`Metadata about the current git repository:
`+u.join(`
`)]}}},Kcr=Cr.register(new vee);var _ee=class{constructor(){this.kind="terminal-buffer";this.variableInfo={name:"terminalBuffer",description:"The active terminal's buffer",defaultEnablement:!1};this.metaContextResolverInfo={description:"The active terminal's buffer."}}async resolveContext(e){let r=e.get(Eu).terminalBuffer;return{kind:this.kind,userMessages:[`The active terminal's buffer:
`+r]}}},XAe=Cr.register(new _ee);var yee=class{constructor(){this.kind="terminal-last-command";this.variableInfo={name:"terminalLastCommand",description:"The active terminal's last run command",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's last run command."}}async resolveContext(e){let r=e.get(Eu).terminalLastCommand;if(!r)return;let n=[];r.commandLine&&(n.push("The following is the last command run in the terminal:"),n.push(r.commandLine)),r.cwd&&(n.push("It was run in the directory:"),n.push(typeof r.cwd=="object"?r.cwd.toString():r.cwd)),r.output&&(n.push("It has the following output:"),n.push(r.output));let i=n.join(`
`);return{kind:this.kind,userMessages:[`The active terminal's last run command:
`+i]}}},QAe=Cr.register(new yee);var bee=class{constructor(){this.kind="terminal-selection";this.variableInfo={name:"terminalSelection",description:"The active terminal's selection",defaultEnablement:!0};this.metaContextResolverInfo={description:"The active terminal's selection."}}async resolveContext(e){let r=e.get(Eu).terminalSelection;return{kind:this.kind,userMessages:[`The active terminal's selection:
`+r]}}},JAe=Cr.register(new bee);var xee=class{constructor(){this.kind="terminal-shell-type";this.variableInfo={name:"terminalShellType"}}async resolveContext(e){let r=e.get(Eu).terminalShellType;return{kind:this.kind,userMessages:[`The active terminal's shell type:
`+r]}}},ZAe=Cr.register(new xee);function yM(t,e=!1){let r=t.length,n=0,i="",o=0,s=16,a=0,u=0,c=0,l=0,d=0;function p(y,E){let x=0,S=0;for(;x<y||!E;){let O=t.charCodeAt(n);if(O>=48&&O<=57)S=S*16+O-48;else if(O>=65&&O<=70)S=S*16+O-65+10;else if(O>=97&&O<=102)S=S*16+O-97+10;else break;n++,x++}return x<y&&(S=-1),S}function f(y){n=y,i="",o=0,s=16,d=0}function m(){let y=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&HT(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&HT(t.charCodeAt(n)))for(n++;n<t.length&&HT(t.charCodeAt(n));)n++;else return d=3,t.substring(y,n);let E=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&HT(t.charCodeAt(n))){for(n++;n<t.length&&HT(t.charCodeAt(n));)n++;E=n}else d=3;return t.substring(y,E)}function h(){let y="",E=n;for(;;){if(n>=r){y+=t.substring(E,n),d=2;break}let x=t.charCodeAt(n);if(x===34){y+=t.substring(E,n),n++;break}if(x===92){if(y+=t.substring(E,n),n++,n>=r){d=2;break}switch(t.charCodeAt(n++)){case 34:y+='"';break;case 92:y+="\\";break;case 47:y+="/";break;case 98:y+="\b";break;case 102:y+="\f";break;case 110:y+=`
`;break;case 114:y+="\r";break;case 116:y+="	";break;case 117:let O=p(4,!0);O>=0?y+=String.fromCharCode(O):d=4;break;default:d=5}E=n;continue}if(x>=0&&x<=31)if(rA(x)){y+=t.substring(E,n),d=2;break}else d=6;n++}return y}function g(){if(i="",d=0,o=n,u=a,l=c,n>=r)return o=r,s=17;let y=t.charCodeAt(n);if(Eee(y)){do n++,i+=String.fromCharCode(y),y=t.charCodeAt(n);while(Eee(y));return s=15}if(rA(y))return n++,i+=String.fromCharCode(y),y===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,c=n,s=14;switch(y){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=h(),s=10;case 47:let E=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!rA(t.charCodeAt(n));)n++;return i=t.substring(E,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;let x=r-1,S=!1;for(;n<x;){let O=t.charCodeAt(n);if(O===42&&t.charCodeAt(n+1)===47){n+=2,S=!0;break}n++,rA(O)&&(O===13&&t.charCodeAt(n)===10&&n++,a++,c=n)}return S||(n++,d=1),i=t.substring(E,n),s=13}return i+=String.fromCharCode(y),n++,s=16;case 45:if(i+=String.fromCharCode(y),n++,n===r||!HT(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;n<r&&v(y);)n++,y=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(y),n++,s=16}}function v(y){if(Eee(y)||rA(y))return!1;switch(y){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function _(){let y;do y=g();while(y>=12&&y<=15);return y}return{setPosition:f,getPosition:()=>n,scan:e?_:g,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenStartLine:()=>u,getTokenStartCharacter:()=>o-l,getTokenError:()=>d}}function Eee(t){return t===32||t===9}function rA(t){return t===10||t===13}function HT(t){return t>=48&&t<=57}var ePe;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(ePe||(ePe={}));var bM;(function(t){t.DEFAULT={allowTrailingComma:!1}})(bM||(bM={}));function tPe(t,e=[],r=bM.DEFAULT){let n=null,i=[],o=[];function s(u){Array.isArray(i)?i.push(u):n!==null&&(i[n]=u)}return rPe(t,{onObjectBegin:()=>{let u={};s(u),o.push(i),i=u,n=null},onObjectProperty:u=>{n=u},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let u=[];s(u),o.push(i),i=u,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(u,c,l)=>{e.push({error:u,offset:c,length:l})}},r),i[0]}function rPe(t,e,r=bM.DEFAULT){let n=yM(t,!1),i=[];function o(J){return J?()=>J(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function s(J){return J?()=>J(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(J){return J?D=>J(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function u(J){return J?D=>J(D,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=s(e.onObjectBegin),l=u(e.onObjectProperty),d=o(e.onObjectEnd),p=s(e.onArrayBegin),f=o(e.onArrayEnd),m=u(e.onLiteralValue),h=a(e.onSeparator),g=o(e.onComment),v=a(e.onError),_=r&&r.disallowComments,y=r&&r.allowTrailingComma;function E(){for(;;){let J=n.scan();switch(n.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:_||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(J){case 12:case 13:_?x(10):g();break;case 16:x(1);break;case 15:case 14:break;default:return J}}}function x(J,D=[],R=[]){if(v(J),D.length+R.length>0){let k=n.getToken();for(;k!==17;){if(D.indexOf(k)!==-1){E();break}else if(R.indexOf(k)!==-1)break;k=E()}}}function S(J){let D=n.getTokenValue();return J?m(D):(l(D),i.push(D)),E(),!0}function O(){switch(n.getToken()){case 11:let J=n.getTokenValue(),D=Number(J);isNaN(D)&&(x(2),D=0),m(D);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return E(),!0}function U(){return n.getToken()!==10?(x(3,[],[2,5]),!1):(S(!1),n.getToken()===6?(h(":"),E(),ve()||x(4,[],[2,5])):x(5,[],[2,5]),i.pop(),!0)}function W(){c(),E();let J=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(J||x(4,[],[]),h(","),E(),n.getToken()===2&&y)break}else J&&x(6,[],[]);U()||x(4,[],[2,5]),J=!0}return d(),n.getToken()!==2?x(7,[2],[]):E(),!0}function L(){p(),E();let J=!0,D=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(D||x(4,[],[]),h(","),E(),n.getToken()===4&&y)break}else D&&x(6,[],[]);J?(i.push(0),J=!1):i[i.length-1]++,ve()||x(4,[],[4,5]),D=!0}return f(),J||i.pop(),n.getToken()!==4?x(8,[4],[]):E(),!0}function ve(){switch(n.getToken()){case 3:return L();case 1:return W();case 10:return S(!0);default:return O()}}return E(),n.getToken()===17?r.allowEmptyContent?!0:(x(4,[],[]),!1):ve()?(n.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}var nPe;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(nPe||(nPe={}));var iPe;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(iPe||(iPe={}));var nA=tPe;var oPe;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(oPe||(oPe={}));async function sPe(t,e){let r=t.get(Mp);await r.loadIndexes();let n=tot(r,e.response?.message??"");return rot(r,n.settings,n.commands)}function tot(t,e){let r=[];e=e.replace(/\n/g,"");for(let u of Su(e)){if(u.language!=="json"&&u.language!=="")continue;let c;try{c=nA(u.code)}catch{}c&&!Array.isArray(c)&&r.push(c)}let n=[],i=/\[COMMANDS START\]```(?:json)?(.+)\[COMMANDS END\]/g,o;for(o of e.matchAll(i)){let u=o[1].trim(),c;try{c=nA(u)}catch{}c&&Array.isArray(c)&&n.push(...c)}let s=r.map(u=>{for(let c of Object.keys(u))if(!t.hasSetting(c))return!1;return!0}).some(u=>u===!1),a=n.map(u=>{if(u.command&&!t.hasCommand(u.command))return!1}).some(u=>u===!1);return{settings:r,commands:n,validationFailed:s||a}}async function rot(t,e,r){let n=[],i=r.length;for(let o of e){let s="";for(let a of Object.keys(o))n.some(u=>u.arguments&&u.arguments[0].includes(`@id:${a}`))||t.hasSetting(a)&&(s+=`@id:${a} `);s=s.trimEnd(),s&&n.push({command:"workbench.action.openSettings",arguments:[s],title:"Show in Settings Editor"})}for(let o of r)if(o.command==="workbench.extensions.search"||o.command==="workbench.extensions.installExtension"){let s=(Array.isArray(o.args)?o.args:[o.args]).filter(a=>typeof a=="string");if(s.length===1){let a=["featured","popular","recentlyPublished","recommended","updates","builtin","enabled","disabled","installed","workspaceUnsupported"];s[0].includes(":")&&!s[0].startsWith("@")?s[0]=`@${s[0]}`:a.includes(s[0])&&(s[0]=`@${s[0]}`)}n.push({command:"workbench.extensions.search",arguments:s,title:"Search Extension Marketplace"})}else{let s=t.getCommand(o.command);if(!s)continue;n.push({command:"workbench.action.quickOpen",arguments:[`>${s.originalLabel}`],title:i>1?`Show "${s.originalLabel}"`:"Show in Command Palette"})}return n}var aPe=require("util");var EM=se("IPromptWorkspaceLabels"),xM=class{constructor(){this.indicators=new Map;this.contentIndicators=new Map;this._labels=[];this.initIndicators()}get labels(){if(this._labels.includes("javascript")&&this._labels.includes("typescript")){let e=this._labels.indexOf("javascript");this._labels.splice(e,1)}return this._labels}async collectContext(e){let r=e.get(st).getWorkspaceFolders();if(r)for(let n=0;n<r.length;n++)await this.addContextForFolders(e,r[n])}async addContextForFolders(e,r){for(let[n,i]of this.indicators.entries())await this.addLabelIfApplicable(e,r,n,i)}async addLabelIfApplicable(e,r,n,i){let o=Gc.joinPath(r,n);try{await e.get(Zi).stat(o),i.forEach(a=>this._labels.push(a));let s=this.contentIndicators.get(n);if(s){let a=await e.get(Zi).readFile(o);try{s(new aPe.TextDecoder().decode(a)).forEach(c=>this._labels.push(c))}catch{}}}catch{}}initIndicators(){this.addIndicator("package.json","javascript","npm"),this.addIndicator("tsconfig.json","typescript"),this.addIndicator("pom.xml","java","maven"),this.addIndicator("build.gradle","java","gradle"),this.addIndicator("requirements.txt","python","pip"),this.addIndicator("Pipfile","python","pip"),this.addIndicator("Cargo.toml","rust","cargo"),this.addIndicator("go.mod","go","go.mod"),this.addIndicator("pubspec.yaml","dart","pub"),this.addIndicator("build.sbt","scala","sbt"),this.addIndicator("build.boot","clojure","boot"),this.addIndicator("project.clj","clojure","lein"),this.addIndicator("mix.exs","elixir","mix"),this.addIndicator("composer.json","php","composer"),this.addIndicator("Gemfile","ruby","bundler"),this.addIndicator("build.xml","java","ant"),this.addIndicator("build.gradle.kts","java","gradle"),this.addIndicator("yarn.lock","yarn"),this.addIndicator("CMakeLists.txt","cpp","cmake"),this.addIndicator("vcpkg.json","cpp"),this.addIndicator("Makefile","cpp","makefile"),this.addContentIndicator("package.json",this.collectPackageJsonIndicators)}addIndicator(e,...r){this.indicators.set(e,r)}addContentIndicator(e,r){this.contentIndicators.set(e,r)}collectPackageJsonIndicators(e){let r=[],n=JSON.parse(e),i=n.dependencies,o=n.devDependencies;i&&(i["@angular/core"]&&r.push("angular"),i.react&&r.push("react"),i.vue&&r.push("vue")),o&&o.typescript&&r.push("typescript");let s=n.engines;return s&&(s.node&&r.push("node"),s.vscode&&r.push("vscode extension")),r}};var Ru=class extends ue{async prepare(){let e=this.accessor.get(EM);return await e.collectContext(this.accessor),{labels:[...new Set(e.labels)].sort()}}render(e,r){if(e.labels.length!==0)return vscpp(vscppf,null,vscpp(pe,{priority:this.props.priority},"I am working on a project of the following nature:",vscpp("br",null),e.labels.reduce((n,i)=>`${n}
- ${i}`,"").trim()))}};var Tee=class{constructor(){this.kind="project-labels"}async resolveContext(e,r){let{messages:n}=await us(e,r.endpoint,Ru,{});if(n.length>0)return{kind:this.kind,userMessages:n.map(i=>i.content)}}},cPe=Cr.register(new Tee);var Hs=we(require("vscode"));var Ri=new class{constructor(){this.commands=new Set}registerCommand(t){this.commands.add(t)}getCommand(t,e){return this.getCommands(e).find(r=>r.commandId===t)}getCommands(t){return Array.from(this.commands.values()).filter(e=>e.locations.includes(t))}};var jT=se("ICommandService"),TM=class{constructor(e){this.accessor=e;this.commandPrefix="/";this.readConfig()}readConfig(){this._enabledCommands=this.accessor.get(ke).getConfigMixedWithDefaults(Le.ConversationSlashCommandEnablements)}isCommandEnabled(e,r){if(this._enabledCommands===void 0)return!1;if(this._enabledCommands[e]===void 0){if(this._enabledCommands["*"])return!0;let n=Ri.getCommand(e,r)?.intent?.commandInfo?.defaultEnablement;return typeof n=="boolean"?n:!0}return!!this._enabledCommands[e]}parse(e,r){if(e=e.trimStart(),e.startsWith(this.commandPrefix)){let n=/\/(?<intentId>\w+)(?::(?<intentArgument>\w*))?(?<restOfQuery>\s.*)?/s.exec(e)?.groups,i=n?.intentId??"",o=n?.intentArgument??"",s=(n?.restOfQuery??"").trim(),a=Ri.getCommand(i,r);if(this.readConfig(),a&&this.isCommandEnabled(i,r))return{command:a,intentArgument:o,restOfQuery:s}}return{restOfQuery:e}}getCommand(e,r){return this.allCommands(r).find(n=>n.commandId===e)}allCommands(e){return this.readConfig(),Ri.getCommands(e).filter(r=>this.isCommandEnabled(r.commandId,e))}};var lp={workspace:["explain","tests","fix","new","newNotebook","semanticSearch"],vscode:["search","api"],terminal:[]};function uPe(t){if(Object.keys(lp).includes(t))return{agent:t};for(let[e,r]of Object.entries(lp))if(r.includes(t))return{agent:e,command:t}}var c0=se("IConversationStore"),SM=class{constructor(){this.conversationMap=new Map}addConversation(e,r){this.conversationMap.set(e,r)}getConversation(e){return this.conversationMap.get(e)}};var See=we(xn());var lPe=we(xn());async function iA(t,e,r,n){let i=null,o=!1;i=setTimeout(()=>{o||t.report(e)},n);try{let s=await r;return o=!0,s}finally{i&&clearTimeout(i)}}var IM=class extends ue{constructor(){super(...arguments);this._docsSearchAvailable=!1}async prepare(r,n,i){let o=n?await iA(n,new Hc(lPe.t("Searching doc index....")),this.searchDocsSearchForContext(this.props.query,10,i),1e3):await this.searchDocsSearchForContext(this.props.query,10,i),s=this.accessor.get(Mp);this._embeddingCompute??=this.accessor.get(vi);let a=await this._embeddingCompute?.computeEmbeddings([this.props.query],void 0);if(!a)return{docSearchResults:o,settings:[],commands:[]};let{commands:u,settings:c}=n?await iA(n,new Hc("Searching command and setting index...."),s.nClosestValues(a[0],5),500):await s.nClosestValues(a[0],5);return{docSearchResults:o,settings:c,commands:u}}async searchDocsSearchForContext(r,n,i){return this._docsSearchClient||(this._docsSearchClient=this.accessor.get(Y8),this._docsSearchAvailable=await this._docsSearchClient.isAvailable()),this._docsSearchAvailable?this._docsSearchClient.search(r,{repo:"microsoft/vscode-docs"},n,.75,i):[]}render(r){let n=this.accessor.get(gt).OS;return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are a VS Code assistant. Your job is to assist users in using VS Code by providing knowledge to accomplish their task. This knowledge should focus on settings and commands, but also includes documentation. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You must respond with either a setting to set or a command to execute when applicable.",vscpp("br",null),"When referring to a command, you must use the command name in markdown bold syntax.",vscpp("br",null),"When referring to any commands, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] at the end of your response which lists all commands you referenced in your response in the order they were referenced in a JSON code block containing a JSON array.",vscpp("br",null),"If a command or setting references another command or setting, you must respond with the original setting or command and the referenced setting or command.",vscpp("br",null),"All referenced settings must be properly formatted in a JSON markdown code block to allow copying them into the user's settings.json file.",vscpp("br",null),"You must not respond with a setting that is not in a properly formatted JSON markdown code block.",vscpp("br",null),"If a setting and command will accomplish the same thing, you must suggest the command instead.",vscpp("br",null),"You must not suggest opening the settings editor.",vscpp("br",null),"If answering with a keybinding, please still include the command bound to the keybinding.",vscpp("br",null),"If a keybinding contains a backtick you must escape it. For example the keybinding Ctrl + backtick would be written as ``ctrl + ` ``",vscpp("br",null),"You must not suggest opening the command palette to execute commands.",vscpp("br",null),"You must not suggest commands or settings identifiers that do not exist.",vscpp("br",null),"If you believe the context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),'If an extension might help the user, you may suggest a search query for the extension marketplace. You must also include the command **Search marketplace** (`workbench.extensions.search`) with args set to the suggested query in the commands section at the end of your response. The query can also contain the tags "@popular", "@recommended", or "@featured" to filter the results.',vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"[EXAMPLES START]",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Settings response",vscpp("br",null),"Question: How do I disable telemetry?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp(nn,{code:`{
	"telemetry.telemetryLevel": "off"
}`,languageId:"json"}),"is a setting which can be used to disable telemetry.",vscpp("br",null),vscpp("br",null),"## Command response",vscpp("br",null),"Question: How do I close all editors?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Close All Editors** command to close all editors.",vscpp("br",null),vscpp("br",null),"[COMMANDS START]",vscpp("br",null),vscpp(nn,{code:`[
	{"command": "workbench.action.closeAllEditors" }
]`,languageId:"json"}),"[COMMANDS END]",vscpp("br",null),vscpp("br",null),"## No such command",vscpp("br",null),"Question: How do I move the terminal to a new window?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"There is no such command.",vscpp("br",null),vscpp("br",null),"## Invalid Question",vscpp("br",null),"Question: How do I bake a potato?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Sorry this question isn't related to VS Code.",vscpp("br",null),vscpp("br",null),"## Marketplace search",vscpp("br",null),"Question: How do I add PHP support?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the **Search marketplace** command to search for extensions that add PHP support.",vscpp("br",null),vscpp("br",null),"[COMMANDS START]",vscpp("br",null),vscpp(nn,{code:`[
	{"command": "workbench.extensions.search", "args": "php" }
]`,languageId:"json"}),"[COMMANDS END]"),vscpp(Vn,{priority:700,history:this.props.history}),vscpp(pe,{priority:800},"Relevant information about VS Code:",vscpp("br",null),"The current question is related to VS Code. The application is currently open.",vscpp("br",null),"If a command or setting is not a valid answer, but it still relates to VS Code, please still respond.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"At the end of your response, if you reference a command, you must include a section wrapped with [COMMANDS START] and [COMMANDS END] that lists all commands you referenced in your response.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),'Below is a list of commands and settings we found which might be relevant to the question. For view related commands "Toggle" often means Show or Hide. A setting may reference another setting, that will appear as \\`#setting.id#\\`, you must return the referenced setting as well. You may use this context to help you formulate your response, but are not required to.',vscpp("br",null),r.commands.length&&vscpp(vscppf,null,"Here are some possible commands:",vscpp("br",null)),r.commands.length&&r.commands.map(i=>vscpp(Ya,null,"- ",i.label,' ("',i.key,'") (Keybinding: "',i.keybinding,'")')),r.settings.length&&vscpp(vscppf,null,"Here are some possible settings:",vscpp("br",null)),r.settings.length&&r.settings.map(i=>vscpp(Ya,null,"settingItemToContext(c)")),this._docsSearchAvailable&&vscpp(vscppf,null,"Below is a list of information from the VS Code documentation which might be relevant to the question. Feel free to use this context to help you formulate your response, but you are not required to.",vscpp("br",null)),this._docsSearchAvailable&&r.docSearchResults.map(i=>vscpp(Ya,null,"##",i?.title?.trim()," - ",i.path,vscpp("br",null),i.contents))),vscpp(pe,{priority:900},this.props.query))}};var Iee=class{constructor(e){this.accessor=e}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=new qt(this.accessor,r,IM,{query:u,history:c}),d=await l.render(i,s);for(let p of l.getReferences())i.report(new vo(p.anchor));return d}},CM="vscode",wM=class{constructor(){this.id=CM;this.locations=[2];this.description=See.t("Ask questions about VS Code");this.intentDetectionInput={sampleQuestion:"What is the command to open the integrated terminal?",modelDescription:"Looks up information about VS Code via commands, settings, and documentation to accomplish the given editor-specific task."};this.commandInfo={allowsEmptyArgs:!1,sampleRequest:See.t("What is the command to open the integrated terminal?")}}static{this.ID=CM}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new Iee(e),commands:sPe}}};var Aee=we(xn());var Mo=class extends ue{render(){return vscpp(vscppf,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.")}};var oA=["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],pi=class extends ue{render(){let r=this.accessor.get(ke).getConfig(Le.LocaleOverride);if(!oA.find(i=>r===i))return;let n=r!=="auto"?r:this.accessor.get(gt).language;if(n!=="en")return vscpp(vscppf,null,"Respond in the following locale: ",n)}};var Mt=class extends ue{render(){return vscpp(vscppf,null,"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.")}};var u0=class extends ue{render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.")}};var oa=class extends ue{render(){return vscpp(vscppf,null,"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.")}};var RM=class extends ue{async prepare(){let e="copilotchat.safetyPromptRewrite";return await this.accessor.get(kr).getTreatmentVariableAsync("vscode",e,!0)?{systemPromptExperiment:e}:{systemPromptExperiment:void 0}}render(e,r){return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are a software engineer with expert knowledge of the codebase the user has open in their workspace.",vscpp("br",null),vscpp("br",null),vscpp(Mo,null),e.systemPromptExperiment?vscpp(u0,null):vscpp(Mt,null),vscpp(oa,null),vscpp(pi,null),"# Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the provided relevant workspace information (code excerpts, file names, and symbols) to understand the user's workspace.",vscpp("br",null),"2. Consider how to answer the user's prompt based on the provided information and your specialized coding knowledge. Always assume that the user is asking about the code in their workspace instead of asking a general programming question. Prefer using variables, functions, types, and classes from the workspace over those from the standard library.",vscpp("br",null),"3. Generate a response that clearly and accurately answers the user's question. In your response, add fully qualified links for referenced symbols (example: [`namespace.VariableName`](path/to/file.ts)) and links for files (example: [path/to/file](path/to/file.ts)) so that the user can open them. If you do not have enough information to answer the question, respond with \"I'm sorry, I can't answer that question with what I currently know about your workspace\".",vscpp("br",null),vscpp("br",null),"DO NOT mention that you cannot read files in the workspace.",vscpp("br",null),"DO NOT ask the user to provide additional information about files in the workspace.",vscpp("br",null),"Remember that you MUST add links for all referenced symbols from the workspace and fully qualify the symbol name in the link, for example: [`namespace.functionName`](path/to/util.ts).",vscpp("br",null),"Remember that you MUST add links for all workspace files, for example: [path/to/file.js](path/to/file.js)",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),"Question:",vscpp("br",null),"What file implements base64 encoding?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"Base64 encoding is implemented in [src/base64.ts](src/base64.ts) as [`encode`](src/base64.ts) function.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How can I join strings with newlines?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"You can use the [`joinLines`](src/utils/string.ts) function from [src/utils/string.ts](src/utils/string.ts) to join multiple strings with newlines.",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I build this project?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To build this TypeScript project, run the `build` script in the [package.json](package.json) file:",vscpp("br",null),vscpp("br",null),"```sh",vscpp("br",null),"npm run build",vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),vscpp("br",null),"Question:",vscpp("br",null),"How do I read a file?",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),"To read a file, you can use a [`FileReader`](src/fs/fileReader.ts) class from [src/fs/fileReader.ts](src/fs/fileReader.ts).",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Vn,{priority:400,history:this.props.history})),vscpp(Ru,{priority:500}),vscpp(kn,{priority:600}),vscpp(MT,{priority:800,...this.props}),vscpp(pe,{priority:900},this.props.query))}};var cm=class{constructor(e){this.deltaApplier=e;this._appliedLength=0;this._appliedText=""}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){let r=e.substring(this._appliedLength,e.length);this.append(r)}async append(e){this.deltaApplier(e),this._appliedLength+=e.length,this._appliedText+=e}},AM=class extends cm{constructor(){super(r=>this._source.emitOne(r));this._source=new Q0}get asyncIterable(){return this._source.asyncIterable}finish(){this._source.resolve()}};var fPe=require("path");var sA="_github.copilot.openRelativePath",aA="_github.copilot.openSymbolInFile";function dPe(t,e){return`[\`${t}\`](${mPe(sA,[e.replace(/\\/g,"/")])} "${hPe(e)}")`}function wee(t,e){return`[\`${t}\`](${mPe(aA,[e.replace(/\\/g,"/"),t])} "${hPe(e)}")`}function mPe(t,e){return`command:${t}?${encodeURIComponent(JSON.stringify(e))}`}function hPe(t){return t.replace(/"/g,'\\"')}var Cee=new Set;function gPe(t){return Cee.add(t),{dispose:()=>Cee.delete(t)}}var PM=class{constructor(e,r,n){this.references=e;this.workspaceFolders=r;this.fileSystem=n;this._isInCodeBlock=!1;this.additionalLinkifiers=Array.from(Cee,i=>i(e,r,n))}async linkify(e,r){if(e.startsWith("```")&&(this._isInCodeBlock=!this._isInCodeBlock),this._isInCodeBlock)return e;if(e=await DP(e,/\[`([^`\[\]]+?)`]\((\S+?\.\w+)\)/g,async(i,o,s)=>{let a=Ct.joinPath(this.workspaceFolders[0],s);return await pPe(this.fileSystem,a)?wee(o,s):"`"+o+"`"}),r?.isCancellationRequested)return"";let n=async(i,o,s)=>{if(/^\w+:/.test(s)||!this.workspaceFolders.length)return i;let a=Ct.joinPath(this.workspaceFolders[0],s);if(await pPe(this.fileSystem,a))return dPe(s,s);let u=zu(a),c=this.references.map(l=>Ct.isUri(l.anchor)?l.anchor:l.anchor.uri).find(l=>zu(l)===u);if(c){let l=(0,fPe.relative)(this.workspaceFolders[0].fsPath,c.fsPath);return dPe(s,l)}return o};if(e=await DP(e,/\[([^`\s]+)\]\((\1)\)/g,n),r?.isCancellationRequested)return"";e=await DP(e,/(?<!\[)(`([^`\s]+)`)(?!\])/g,n);for(let i of this.additionalLinkifiers)if(e=await i.linkify(e,r),r?.isCancellationRequested)return"";return e=e.replace(/\[([^\[\]]+)]\((\S+?\.\w+)\)/g,(i,o,s)=>/^\w+:/.test(s)?i:o),e}};async function pPe(t,e){try{return await t.stat(e),!0}catch{return!1}}var VT=class{constructor(e,r,n,i){this._appliedText="";this._pendingText="";this._finished=!1;this._p=Promise.resolve("");let o=e.get(Zi),s=e.get(st);this._appliesTextPromise=new ec,i.onCancellationRequested(()=>this._appliesTextPromise.complete(this._appliedText));let a=r.references,u=new PM(a,s.getWorkspaceFolders(),o);this._deltaCallback=new cm(c=>{this._p=this._p.then(async()=>{this._pendingText+=c;let l=async d=>{let p=await u.linkify(d,i),f=new Fp(p);f.isTrusted={enabledCommands:[sA,aA]},this._appliedText+=p,n.markdown(f)};if(this._finished)await l(this._pendingText),this._pendingText="";else{let d=this._pendingText.split(`
`);for(let p=0;p<d.length-1;p++)await l(d[p]+`
`);this._pendingText=d[d.length-1]}return this._appliedText})})}get appliedText(){return this._appliesTextPromise.p}apply(e){this._deltaCallback.apply(e)}finish(){this._finished=!0,this._pendingText.length&&this.apply(""),this._p.then(e=>this._appliesTextPromise.complete(e),e=>this._appliesTextPromise.error(e))}};var ky="workspace",Ree=class{constructor(e){this.accessor=e}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=new qt(this.accessor,r,RM,{conversation:e,query:u,history:c}),d=await l.render(i,s);for(let p of l.getReferences())i.report(new vo(p.anchor));return d}},vPe=Aee.t("How do I build this project?"),NM=class t{constructor(){this.id=t.ID;this.description=Aee.t("Ask a question about the files in your current workspace");this.intentDetectionInput={sampleQuestion:vPe};this.locations=[2];this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!0,sampleRequest:vPe}}static{this.ID=ky}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new Ree(e),responseProcessor:(s,a,u,c,l)=>new VT(e,a,u,l)}}};var zT=class t{constructor(e,r){this.accessor=e;this.outputChannelProvider=r;this.requestCount=-1;this.logger=e.get(Ee).getPromptResponseLogger("chat")}logRequest(e){this.requestCount++,this.logInfo("REQUEST",`User:${this.headerSeparator()}${this.printMessageContent(e.message)}`)}logMessages(e){this.logInfo("PROMPT MESSAGES",e.map(r=>`${this.getDisplayName(r)}:${this.headerSeparator()}${this.printMessageContent(r.content)}`).join(`
`))}logProgress(e,r){let n=typeof e.value=="string"?e.value:e.value.value;n&&(r?this.logInfo("RESPONSE",`Assistant:	${n}`,!1):this.logInfo("",`${n.replaceAll(/\r?\n/g,`
`+this.bodySeparator())}`,!1))}logResponse(e){this.logInfo("",""),e.errorDetails&&this.logInfo("ERROR DETAILS",JSON.stringify(e.errorDetails,void 0,4))}logFollowups(e){this.logInfo("FOLLOWUPS","Followups:	"+e.map((r,n)=>`${r.label??r.prompt}
${this.bodySeparator()}`).join(`
${this.bodySeparator()}`))}logThrownError(e){this.logInfo("THROWN ERROR",e.stack?e.stack:e.message)}logIntent(e,r){this.logInfo("INTENT",e!==void 0?`User intent determined to be '${e}' via the ${r?"user":"model"}`:"Intent could not be determined")}logInfo(e,r,n=!0){if(!this.accessor.get(ke).getConfig(Le.ConversationLoggingEnabled))return;let o=new Date().toISOString();e&&(r=`[${e} ${this.requestCount}]
${r}`,r=`${o} [info] ${r}`),t.outputChannel===void 0&&(t.outputChannel=this.outputChannelProvider()),n?(this.logger.info(r+`
`),t.outputChannel.appendLine(r+`
`)):(this.logger.info(r),t.outputChannel.append(r))}printMessageContent(e){return e.split(`
`).join(`
${this.bodySeparator()}`)}headerSeparator(){return"		"}bodySeparator(){return"			"}getDisplayName(e){let r=this.getDisplayRole(e.role),n=e.name;return n?`${r} (${n})`:r}getDisplayRole(e){switch(e){case"system":return"System";case"user":return"User";case"assistant":return"Assistant"}}};var Pu=we(xn());function cA(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function _Pe(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function yPe(t){if(typeof t!="object"||t===null||!("details"in t))return!1;let{details:e}=t;return typeof e=="object"&&e!==null&&"type"in e&&"description"in e&&typeof e.type=="string"&&typeof e.description=="string"}var YT=class{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},uA=class{constructor(e){this.lines=e}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.lines[r].trim();return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},l0=class{static Assert(e,r){if(!e)throw new Error(r)}},d0=class{static Copy(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}static Copy2(e,r,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[r+s]}};var DM=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new YT(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},kM=class t{constructor(e,r){let[n,i]=t._getElements(e),[o,s]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=s,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let l;return n<=i?(l0.Assert(e===r+1,"originalStart should only be one more than originalEnd"),l=[new YT(e,0,n,i-n+1)]):e<=r?(l0.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[new YT(e,r-e+1,n,0)]):(l0.Assert(e===r+1,"originalStart should only be one more than originalEnd"),l0.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),l=[]),l}let o=[0],s=[0],a=this.ComputeRecursionPoint(e,r,n,i,o,s),u=o[0],c=s[0];if(a!==null)return a;{let l=this.ComputeDiffRecursive(e,u,n,c),d=this.ComputeDiffRecursive(u+1,r,c+1,i);return this.ConcatenateChanges(l,d)}}WALKTRACE(e,r,n,i,o,s,a,u,c,l,d,p,f,m,h,g,v){let _=null,y=null,E=new DM,x=r,S=n,O=f[0]-g[0]-i,U=-1073741824,W=this.m_forwardHistory.length-1;do{let L=O+e;L===x||L<S&&c[L-1]<c[L+1]?(d=c[L+1],m=d-O-i,d<U&&E.MarkNextChange(),U=d,E.AddModifiedElement(d+1,m),O=L+1-e):(d=c[L-1]+1,m=d-O-i,d<U&&E.MarkNextChange(),U=d-1,E.AddOriginalElement(d,m+1),O=L-1-e),W>=0&&(c=this.m_forwardHistory[W],e=c[0],x=1,S=c.length-1)}while(--W>=-1);_=E.getReverseChanges(),E=new DM,x=s,S=a,O=f[0]-g[0]-u,U=1073741824,W=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let L=O+o;L===x||L<S&&l[L-1]>=l[L+1]?(d=l[L+1]-1,m=d-O-u,d>U&&E.MarkNextChange(),U=d+1,E.AddOriginalElement(d+1,m+1),O=L+1-o):(d=l[L-1],m=d-O-u,d>U&&E.MarkNextChange(),U=d,E.AddModifiedElement(d+1,m+1),O=L-1-o),W>=0&&(l=this.m_reverseHistory[W],o=l[0],x=1,S=l.length-1)}while(--W>=-1);return y=E.getChanges(),this.ConcatenateChanges(_,y)}ComputeRecursionPoint(e,r,n,i,o,s){let a=0,u=0,c=0,l=0,d=0,p=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=r-e+(i-n),m=f+1,h=new Int32Array(m),g=new Int32Array(m),v=i-n,_=r-e,y=e-n,E=r-i,S=(_-v)%2===0;h[v]=e,g[_]=r;for(let O=1;O<=f/2+1;O++){let U=0,W=0;c=this.ClipDiagonalBound(v-O,O,v,m),l=this.ClipDiagonalBound(v+O,O,v,m);for(let L=c;L<=l;L+=2){L===c||L<l&&h[L-1]<h[L+1]?a=h[L+1]:a=h[L-1]+1,u=a-(L-v)-y;let ve=a;for(;a<r&&u<i&&this.ElementsAreEqual(a+1,u+1);)a++,u++;if(h[L]=a,a+u>U+W&&(U=a,W=u),!S&&Math.abs(L-_)<=O-1&&a>=g[L])return o[0]=a,s[0]=u,ve<=g[L]&&1447>0&&O<=1448?this.WALKTRACE(v,c,l,y,_,d,p,E,h,g,a,r,o,u,i,s,S):null}d=this.ClipDiagonalBound(_-O,O,_,m),p=this.ClipDiagonalBound(_+O,O,_,m);for(let L=d;L<=p;L+=2){L===d||L<p&&g[L-1]>=g[L+1]?a=g[L+1]-1:a=g[L-1],u=a-(L-_)-E;let ve=a;for(;a>e&&u>n&&this.ElementsAreEqual(a,u);)a--,u--;if(g[L]=a,S&&Math.abs(L-v)<=O&&a<=h[L])return o[0]=a,s[0]=u,ve>=h[L]&&1447>0&&O<=1448?this.WALKTRACE(v,c,l,y,_,d,p,E,h,g,a,r,o,u,i,s,S):null}if(O<=1447){let L=new Int32Array(l-c+2);L[0]=v-c+1,d0.Copy2(h,c,L,1,l-c+1),this.m_forwardHistory.push(L),L=new Int32Array(p-d+2),L[0]=_-d+1,d0.Copy2(g,d,L,1,p-d+1),this.m_reverseHistory.push(L)}}return this.WALKTRACE(v,c,l,y,_,d,p,E,h,g,a,r,o,u,i,s,S)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return d0.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],d0.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return d0.Copy(e,0,i,0,e.length),d0.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(l0.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),l0.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(a=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new YT(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=r%2===0;if(e<0){let u=o%2===0;return a===u?0:1}else{let u=s%2===0;return a===u?i-1:i-2}}};var Pee=class{constructor(){this.spacesDiff=0;this.looksLikeAlignment=!1}};function not(t,e,r,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=t.charCodeAt(o),f=r.charCodeAt(o);if(p!==f)break}let s=0,a=0;for(let p=o;p<e;p++)t.charCodeAt(p)===32?s++:a++;let u=0,c=0;for(let p=o;p<n;p++)r.charCodeAt(p)===32?u++:c++;if(s>0&&a>0||u>0&&c>0)return;let l=Math.abs(a-c),d=Math.abs(s-u);if(l===0){i.spacesDiff=d,d>0&&0<=u-1&&u-1<t.length&&u<r.length&&r.charCodeAt(u)!==32&&t.charCodeAt(u-1)===32&&t.charCodeAt(t.length-1)===44&&(i.looksLikeAlignment=!0);return}if(d%l===0){i.spacesDiff=d/l;return}}function Ly(t,e,r){let n=Math.min(t.length,1e4),i=0,o=0,s="",a=0,u=[2,4,6,8,3,5,7],c=8,l=[0,0,0,0,0,0,0,0,0],d=new Pee;for(let m=0;m<n;m++){let h=t[m],g=h.length,v=!1,_=0,y=0,E=0;for(let S=0,O=g;S<O;S++){let U=h.charCodeAt(S);if(U===9)E++;else if(U===32)y++;else{v=!0,_=S;break}}if(!v||(E>0?i++:y>1&&o++,not(s,a,h,_,d),d.looksLikeAlignment&&!(r&&e===d.spacesDiff)))continue;let x=d.spacesDiff;x<=c&&l[x]++,s=h,a=_}let p=r;i!==o&&(p=i<o);let f=e;if(p){let m=p?0:.1*n;u.forEach(h=>{let g=l[h];g>m&&(m=g,f=h)}),f===4&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(f=2)}return{insertSpaces:p,tabSize:f}}function iot(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?~r:r}function p0(t,e){let r=iot(t,e);return r<0?Math.floor(~r/e):Math.floor(r/e)}function oot(t,e){return t+e-t%e}function sot(t,e,r){let n=0;for(let o=0;o<t.length;o++)t.charAt(o)==="	"?n=oot(n,e):n++;let i="";if(!r){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function Nee(t,e,r){let n=Soe(t);return n===-1&&(n=t.length),sot(t.substring(0,n),e,r)+t.substring(n)}var Xi=class{constructor(e,r,n,i="",o=`
`){this.firstLineIndex=e;this.endLineIndex=r;this.lines=n;this.prefix=i;this.suffix=o}toTextEdit(){let e=this.lines.length>0?this.prefix+this.lines.join(`
`)+this.suffix:"";return eo.replace(new Ge(this.firstLineIndex,0,this.endLineIndex,0),e)}},f0;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t;function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e})(f0||={});var Oy=class t{constructor(e,r){this.text=e;this.languageId=r}static fromDocumentContext(e){return new t(e.document.getText(),e.language.languageId)}};function My(t,e,r,n,i,o){let s=f0.fromString(r);if(s.length===e.range.lines.length&&e.range.lines.every((d,p)=>d===s[p]))return[];let a=[],u=!1;for(let d of s){let p=LM(e,d);p===null?a.push(d):(p.type==="fakestart"||p.type==="fakend")&&(u=!0)}let c;if(n===4)c=new Xi(e.range.lastLineIndex,e.range.lastLineIndex,s);else{let d=uot(e,s,i),p=got(t,e,a,i);if(!d)c=p;else if(!p)c=d;else{let f=bPe(d);bPe(p)<f?c=p:c=d}c||(c=cot(t,e,n,i,u,a))}o&&(c=aot(o,c,i));let l=[c];return o&&(l=lot(o,l)),l.map(d=>d.toTextEdit())}function aot(t,e,r){let n=t.text.split(/\r\n|\r|\n/g),i=n.slice(0,e.firstLineIndex),o=n.slice(e.endLineIndex),s=e.lines.slice(0),[,a]=EPe(i,s);a>0&&s.splice(0,a),a>0&&(s=m0(s,{whichLine:"bottomMost",lines:i.slice(i.length-a)},r).slice(0));let[u]=EPe(s,o);return u>0&&s.splice(s.length-u,u),new Xi(e.firstLineIndex,e.endLineIndex,s)}function cot(t,e,r,n,i,o){let s=t.get(Ee).getLogger("editGeneration");return i?(s.info("(case 6) Appending to selected code"),TPe(e.range,o,n)):r===3?(s.info("(case 7) Appending to selected code"),TPe(e.range,o,n)):r===1?(s.info("(case 8) Prepending to selected code"),bot(e.range,m0(o,e.range.lines.filter(a=>a.trim()!=="").length>0?{whichLine:"topMost",lines:e.range.lines}:{whichLine:"bottomMost",lines:e.above.lines},n))):(s.info("(Default) Replacing selected code"),dp(e.range,o,n))}function bPe(t){let e=t.endLineIndex-t.firstLineIndex,r=t.lines.length;return e+r}function uot(t,e,r){let n=null,i=[];for(let o of e){let s=LM(t,o);if(s===null){i.push(o);continue}if(n){if(s.type==="end"&&s.endMarker===n)return dp(n,i,r);if(s.type==="end"&&n===t.above&&s.endMarker===t.range){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),dp(a,i,r)}if(s.type==="end"&&n===t.above&&s.endMarker===t.below){let a=t.range.clone();return a.mergeFromAbove(t.above.clone()),a.mergeFromBelow(t.below.clone()),dp(a,i,r)}}else s.type==="start"&&(n=s.startMarker,i=[])}if(i.length>0&&n)return dp(n,i,r)}function lot(t,e){let r=[],n=t.text.split(/\r\n|\r|\n/g),i=dot(n,a=>$T(a,t.languageId)),o=[];for(let a of e){if(a.endLineIndex<=i+1)return e;let u=!1,c=[],l=a.lines;for(let d of l)$T(d,t.languageId)?(o.push(kee(d)),u=!0):u&&d.length===0||(c.push(d),u=!1);if(!u&&c.length>0){if(a.firstLineIndex<i+1)return e;r.push(new Xi(a.firstLineIndex,a.endLineIndex,c))}}if(o.length===0)return e;let s=i+1;return r.unshift(new Xi(s,s,o)),r}function dot(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}function kee(t){return t.replace(/^\s+/g,"")}function $T(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"javascript":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}var pot=/^(\t+)/,Dee=new Map;function fot(t){return Dee.has(t)||Dee.set(t,new RegExp(`^(( {${t}})+)`)),Dee.get(t)}function Lee(t,e,r){let n=e?fot(r):pot,i=t.match(n);return i?[i[0],i[0].length/(e?r:1)]:["",0]}function mot(t){let{insertSpaces:e,tabSize:r}=Ly(t,4,!1),n=Number.MAX_VALUE;for(let i of t){if(/^\s*$/.test(i))continue;let[,o]=Lee(i,e,r);n=Math.min(n,o)}return{insertSpaces:e,tabSize:r,minIndentLevel:n}}function xPe(t,e){if(e===0)return"";if(t===" ")switch(e){case 2:return"  ";case 4:return"    ";case 8:return"        ";case 12:return"            "}if(t==="	")switch(e){case 1:return"	";case 2:return"		";case 3:return"			"}return new Array(e).fill(t).join("")}function hot(t,e){let r=t.lines,n;if(t.whichLine==="topMost")n=r.find(i=>i!=="");else for(let i=r.length-1;i>=0;--i)if(r[i]!==""){n=r[i];break}return n===void 0?0:Lee(n,e.insertSpaces,e.tabSize)[1]}function m0(t,e,r){if(r===void 0)return t;let n=hot(e,r),i=mot(t),o=r.insertSpaces?xPe(" ",r.tabSize):"	";return t.map(s=>{if(s==="")return"";{let[a,u]=Lee(s,i.insertSpaces,i.tabSize),c=s.substring(a.length);return xPe(o,n+(u-i.minIndentLevel))+c}})}function LM(t,e){switch(e){case t.above.startMarker:return{type:"start",startMarker:t.above};case t.above.endMarker:return{type:"end",endMarker:t.above};case t.range.startMarker:return{type:"start",startMarker:t.range};case t.range.endMarker:return{type:"end",endMarker:t.range};case t.below.startMarker:return{type:"start",startMarker:t.below};case t.below.endMarker:return{type:"end",endMarker:t.below}}return e.trimStart().startsWith(Ki.begin(t.language))?{type:"fakestart"}:e.trimStart().startsWith(Ki.end(t.language))?{type:"fakend"}:null}function got(t,e,r,n){let i=(f,m,h)=>{let g=0;for(let E of f)for(let x=E.originalStart;x<E.originalStart+E.originalLength;x++){let S=m.lines[x];g+=S.length}let v=m.getCharCount(),_=h.getCharCount(),y=v-g;return{equalCharCount:y,originalCharCount:v,modifiedCharCount:_,originalCharRatio:v>0?y/v:0,modifiedCharRatio:_>0?y/_:0}},o=f=>{let m=new uA(f.lines),h=new uA(r),v=new kM(m,h).ComputeDiff();return i(v,m,h)},s=e.range.clone();s.mergeFromAbove(e.above.clone()),s.mergeFromBelow(e.below.clone());let a=o(s),u=o(e.range),c={diffToEntireScore:a,diffToRangeScore:u},l=t.get(Ee).getLogger("editGeneration");if(l.info(`Diff metrics: ${JSON.stringify(c,null,"	")}`),a.originalCharCount>30&&a.originalCharRatio>.7)return l.info("(case 1) Replacing entire code"),dp(s,r,n);if(u.originalCharCount>20&&u.originalCharRatio>.7)return l.info("(case 2) Replacing selected code"),dp(e.range,r,n);let d=Math.min(a.originalCharRatio,a.modifiedCharRatio),p=Math.min(u.originalCharRatio,u.modifiedCharRatio);if(d>.2&&d>p)return l.info("(case 3) Replacing entire code"),dp(s,r,n);if(p>.2)return l.info("(case 4) Replacing selected code"),dp(e.range,r,n);if(!e.range.hasContent)return l.info("(case 5) Replacing empty selected code"),dp(e.range,r,n,{whichLine:"bottomMost",lines:e.above.lines})}function dp(t,e,r,n){let o=m0(e,n??{whichLine:"topMost",lines:t.lines},r).slice(0),s=t.lines.slice(0),a=t.firstLineIndex,u=t.lastLineIndex;if(s.length===1&&s[0]==="")return new Xi(u,u,o);let c=vot(s,o);if(a+=c,s.splice(0,c),o.splice(0,c),s.length===0)return new Xi(u+1,u+1,o);let l=_ot(s,o);return u-=l,s.splice(s.length-l,l),o.splice(o.length-l,l),s.length===0?new Xi(a,a,o):new Xi(a,u+1,o)}function vot(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[n]!==e[n])return n;return r}function _ot(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)if(t[t.length-1-n]!==e[e.length-1-n])return n;return r}function EPe(t,e){let r=t.filter(a=>!/^\s*$/.test(a)),n=e.filter(a=>!/^\s*$/.test(a)),i=yot(r,n);if(i===0)return[0,0];let o=0;for(let a=0;a<i;a++)for(o++;/^\s*$/.test(t[t.length-o]);)o++;let s=0;for(let a=0;a<i;a++)for(s++;/^\s*$/.test(e[s]);)s++;return[o,s]}function yot(t,e){for(let r=Math.min(t.length,e.length);r>0;r--){let n=t.length-r,i=!0;for(let o=0;o<r;o++)if(t[n+o]!==e[o]){i=!1;break}if(i)return r}return 0}function bot(t,e){return new Xi(t.firstLineIndex,t.firstLineIndex,e)}function TPe(t,e,r){let n=m0(e,{whichLine:"bottomMost",lines:t.lines},r),i=t.lastLineIndex+1;return new Xi(i,i,n)}var ds=we(xn());var Or=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new ju(`Invalid range: ${this.toString()}`)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),s=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,s))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new ju(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new ju(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};function um(t,e,r,n){return{type:"inlineEdit",edits:t,newWholeRange:e,content:r,followUp:n}}function lm(t,e,r){let n=xot(t,e);if(!n)return null;let{code:i,contentBeforeCode:o,language:s}=n;if(wi.testLine(r,i)){let a=i.indexOf(`
`);i=i.substring(a).trim()}return{code:i,contentBeforeCode:o,language:s}}function xot(t,e){e=e.trim();let n=Su(e).at(0);if(n){let u=yb(e);return{code:n.code,contentBeforeCode:u.slice(0,n.startLine).join(`
`).trimEnd(),language:n.language}}let i=e.split(/\r\n|\r|\n/g),o=!1,s=[],a=[];for(let u of i){let c=LM(t,u);if(o){if(c)return a.push(u),{code:a.join(`
`),contentBeforeCode:s.join(`
`),language:""};a.push(u)}else c?(o=!0,a.push(u)):s.push(u)}return null}async function SPe(t,e,r,n,i){let o=await Promise.all(e.map(s=>s.resolveContext(t,r,i,n)));return Br(o)}function IPe(t,e){let r=[],n=new Map;for(let o of t)e.has(o.kind)||n.has(o.kind)||(n.set(o.kind,r.length),r.push(o));let i=n.get(zAe.kind);return i!==void 0&&n.has($Ae.kind)&&r.splice(i,1),r}function Oee(){return`
You are an AI programming assistant.
`.trim()}function Al(){return`
When asked for your name, you must respond with "GitHub Copilot".
Follow the user's requirements carefully & to the letter.`.trim()}function lA(){return`
Your expertise is strictly limited to software development topics.
Follow Microsoft content policies.
Avoid content that violates copyrights.
For questions not related to software development, simply give a reminder that you are an AI programming assistant.
Keep your answers short and impersonal.`.trim()}async function Mee(t,e,r){let n=Object.entries(lp).reduce((i,[o,s])=>{let a=Ri.getCommand(o,e)?.intent?.description;i+=`
* ${a}`;for(let u of s){let c=Ri.getCommand(u,e)?.intent?.description;i+=`
* ${c}`}return i},"You can answer general programming questions and perform the following tasks:");try{n+=`
You use the ${r.model.toUpperCase()} version of OpenAI's GPT models.`}catch{}return n}function Eot(){return`
First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.
Then output the code in a single code block.
Minimize any other prose.
`.trim()}function Fee(){return`
Use Markdown formatting in your answers.
Make sure to include the programming language name at the start of the Markdown code blocks.
Avoid wrapping the whole response in triple backticks.
The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.
The active document is the source code the user is looking at right now.
You can only give one reply for each conversation turn.
`.trim()}async function OM(t,e,r,n={includeCodeGenerationRules:!0,includeCapabilities:!1}){let i=`
${n.roleplay??Oee()}
${Al()}
${lA()}
`;return n.roleplay||(i+=`
${(await Mee(t,e,r)).trim()}
`),i+=`
${n.includeCodeGenerationRules?Eot():""}
${Fee()}
${Fy(t)}
`.trim(),i}function Fy(t){let r=t.get(ke).getConfig(Le.LocaleOverride);if(!oA.find(i=>r===i))return"";let n=r!=="auto"?r:t.get(gt).language;return n==="en"?"":`Respond in the following locale: ${n}`}var MM=class{constructor(e,r){this.accessor=e;this.maxTokenTestOverride=r}async toChatMessages(e,r,n,i=!1){let o=this.computeMaxRequestTokens(n),s=e.turns.filter(l=>l.status==="success"||l.status==="in-progress"),a=[{role:"system",content:r}],u=Cu(this.accessor,a),c=[];for(let l=s.length-1;l>=0;l--){let d=l===s.length-1,p=s[l],f=await this.turnToMessages(p,d),m=Cu(this.accessor,f);for(;u+m>=o&&f.length>=1;)f.shift(),m=Cu(this.accessor,f);if(!f.length&&p instanceof OT){let h=await p.getShorterMessage();for(f.push({role:"user",content:h,isContext:!0}),m=Cu(this.accessor,f);u+m>=o&&f.length>=1;)f.shift(),m=Cu(this.accessor,f);if(!f.length)throw new Error(Mb.t("Sorry, the included context is too long."))}if(d&&!f.length)throw new Error(Mb.t("Sorry, this message is too long. Please try a shorter question."));if(u+m<o)c=[...f,...c],u+=m;else break}if(a.push(...c),i){let l=a[a.length-1];for(let d=a.length-2;d>=0;d--){let p=a[d];if(p.isContext)l.content=p.content+`

`+l.content,a.splice(d,1);else break}}return{messages:a.map(l=>({role:l.role,content:l.content,name:l.name})),tokenCount:u}}computeMaxRequestTokens(e){return this.maxTokenTestOverride??e.modelMaxPromptTokens}async turnToMessages(e,r){let n=[];return r&&e.contextParts.forEach(i=>{i.userMessages.forEach(o=>{n.push({role:"user",content:o+`

`})})}),n.push({role:"user",content:e.request.message,isContext:e.request.isContext}),e.response&&e.response.type!=="meta"&&n.push({role:"assistant",content:e.response.message,name:e.response.name}),n}};var WT=se("IPromptVariablesService");var h0=class{constructor(e,r,n,i){this.accessor=e;this.options=r;this.location=n;this.context=i;this._promptVariablesService=e.get(WT)}get selectionContextMetadata(){return this._selectionContextMetadata}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn(),u=await this._promptVariablesService.resolveVariablesInPrompt(a.request.message,n),c=new Set(u.parts.map(_=>_.kind));a.request.message=u.message;let l=this.options.contextResolvers;Array.isArray(l)||(l=await l.provideResolvers(e,o,s)),l=IPe(l,c);let d={conversation:e,endpoint:r,message:a.request.message,documentContext:this.context},p=await SPe(this.accessor,l,d,i,s),f=[],m=[];for(let{userMessages:_,usedContext:y,references:E,metadata:x,getShorterMessage:S}of[u.parts,p].flat()){for(let O of _)S?f.push(new OT({message:O,type:"user",isContext:!0},S)):f.push(new Nc({message:O,type:"user",isContext:!0}));y&&i.report({documents:y}),E&&m.push(...E),!this._selectionContextMetadata&&Lo.is(x)&&(this._selectionContextMetadata=x)}let h=YR(m);for(let _ of h)i.report(new vo(_.anchor));e=new za(e.turns),f.length>0&&e.insertBeforeLatestTurn(f);let g;if(this.location===1){let _=this.options.rules??(this.context&&Tot(this.context));g=this.createInlineChatSystemMessage(_??"")}else this.location===2&&(g=await this.createPanelChatSystemMessage(r));if(g??=await OM(this.accessor,this.location,r),this.options.turnFilter&&this.location===2){let _=this.options.turnFilter(e.turns);e=new za(_)}let v=e.getLatestTurn();return v&&(v.references=h,this.options.queryPrefix&&(v.request.message=`${this.options.queryPrefix} ${v.request.message}`.trim())),new MM(this.accessor).toChatMessages(e,g,r,!1)}async createPanelChatSystemMessage(e){let r=this.options.systemPromptOptions?.roleplay||this.options.systemPromptOptions?await OM(this.accessor,this.location,e,this.options.systemPromptOptions):await OM(this.accessor,this.location,e,{includeCodeGenerationRules:!0,includeCapabilities:!0}),n=this.options.rules??"";return`
${r}

${n?"Additional Rules":""}
${n??""}

${this.options.systemPromptOptions?.examples?"Examples:":""}
${this.options.systemPromptOptions?.examples??""}
`.trim()}createInlineChatSystemMessage(e){return`
${this.options.systemPromptOptions?.roleplay??Oee()}
${Al()}
${e}
${lA()}
${Fy(this.accessor)}
`.trim()}},Tot=t=>`
The user has a ${t.language.languageId} file opened in a code editor.
The user includes some code snippets from the file.
Each code block starts with \`\`\` and ${wi.forLanguage(t.language)}.
Answer with a single ${t.language.languageId} code block.
If you modify existing code, you will use the ${Ki.begin(t.language)} and ${Ki.end(t.language)} markers.
${Vr(t.document.uri)?Sot():""}
`.trim();function Sot(){return`
When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well
When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.
When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.
`.trim()}var XT=class{constructor(e,r,n,i,o=Bee){this.myDocument=e;this.initialSelection=r;this.adjustedSelection=n;this.editStrategy=i;this.lineFilter=o;this.replyIndentationTracker=null}async processStream(e){let r=Gee(e);r=r.filter(this.lineFilter),r=Hee(r,this.myDocument);let n=this.myDocument.firstSentLineIndex;for await(let i of this.findInitialAnchor(r))typeof i!="string"?n=this.handleFirstReplyLine(i.anchor,i.line):n=this.handleSubsequentReplyLine(n,i);return this.myDocument.didReplaceEdits&&n<=this.adjustedSelection.end.line&&this.myDocument.deleteLines(n,this.adjustedSelection.end.line),new dA(this.myDocument.didEdits,this.myDocument.additionalImports)}handleFirstReplyLine(e,r){if(e){this.replyIndentationTracker=new QT(this.myDocument,e.lineIndex,r);let o=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);return this.myDocument.getLine(e.lineIndex).sentInCodeBlock===2?this.myDocument.replaceLines(this.adjustedSelection.start.line,e.lineIndex,o):this.myDocument.replaceLine(e.lineIndex,o)}let n=this.adjustedSelection.start.line;this.replyIndentationTracker=new QT(this.myDocument,n,r);let i=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(this.initialSelection.isEmpty){let o=this.myDocument.getLine(n).content;if(/^\s*$/.test(o)||i.adjustedContent.startsWith(o))return this.myDocument.replaceLine(n,i,!0)}return this.editStrategy===1?this.myDocument.insertLineBefore(n,i):this.editStrategy===3||this.editStrategy===4?this.myDocument.insertLineAfter(n,i):this.myDocument.replaceLine(n,i)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this.myDocument.indentStyle);if(n.trimmedContent!==""||this.myDocument.didReplaceEdits){let o=this.matchReplyLine(n,e);if(o)return this.myDocument.replaceLines(e,o.lineIndex,n)}if(e>=this.myDocument.getLineCount())return this.myDocument.appendLineAtEndOfDocument(n);let i=this.myDocument.getLine(e);return!i.isSent||i.content===""||n.trimmedContent===""?this.myDocument.insertLineBefore(e,n):i.indentLevel<n.adjustedIndentLevel?this.myDocument.insertLineBefore(e,n):i.indentLevel===n.adjustedIndentLevel&&!this.myDocument.didReplaceEdits?this.myDocument.insertLineBefore(e,n):this.myDocument.replaceLine(e,n)}matchReplyLine(e,r){let n=e.trimmedContent.length<=3;for(let i=r;i<this.myDocument.getLineCount();i++){let o=this.myDocument.getLine(i);if(o.isSent){if(o.normalizedContent===e.adjustedContent)return new qM(i);if(o.trimmedContent.length>0&&o.indentLevel<e.adjustedIndentLevel||n&&o.trimmedContent.length>0)return null}}return null}findInitialAnchor(e){return new Ap(async r=>{let n=[],i=0,o=!1;for await(let s of e)if(o)r.emitOne(s);else if(n.push(s),i+=s.trim().length,i>10){let a=this.searchForEqualSentLines(n);o=!0,r.emitOne(new Uee(n[0],a)),r.emitMany(n.slice(1))}})}searchForEqualSentLines(e){let r=e.map(n=>n.trim());for(let n=this.myDocument.firstSentLineIndex,i=this.myDocument.getLineCount()-e.length;n<=i;n++){if(!this.myDocument.getLine(n).isSent)continue;let o=!0;for(let s=0;s<r.length;s++){let a=this.myDocument.getLine(n+s);if(!a.isSent||a.trimmedContent!==r[s]){o=!1;break}}if(o)return new qM(n)}return null}},FM=class{constructor(e,r,n=Bee){this._myDocument=e;this._cursorPosition=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=Gee(e);r=r.filter(this._lineFilter),r=Hee(r,this._myDocument);let n=0;for await(let i of r)this.replyIndentationTracker?n=this.handleSubsequentReplyLine(n,i):n=this.handleFirstReplyLine(i);return new dA(this._myDocument.didEdits,this._myDocument.additionalImports)}handleFirstReplyLine(e){let r=this._cursorPosition.line;this.replyIndentationTracker=new QT(this._myDocument,r,e);let n=this.replyIndentationTracker.reindent(e,this._myDocument.indentStyle),i=this._myDocument.getLine(r).content;return/^\s*$/.test(i)||n.adjustedContent.startsWith(i)?this._myDocument.replaceLine(r,n,!0):this._myDocument.insertLineAfter(r,n)}handleSubsequentReplyLine(e,r){let n=this.replyIndentationTracker.reindent(r,this._myDocument.indentStyle);return this._myDocument.insertLineBefore(e,n)}},UM=class{constructor(e,r,n=Bee){this._myDocument=e;this._selection=r;this._lineFilter=n;this.replyIndentationTracker=null}async processStream(e){let r=Gee(e);r=r.filter(this._lineFilter),r=Hee(r,this._myDocument);let n=0,i,o="";this._selection.end.line>this._selection.start.line&&this._selection.end.character===0?i=this._selection.end.line-this._selection.start.line:(i=this._selection.end.line-this._selection.start.line+1,o=this._myDocument.getLine(this._selection.end.line).content.substring(this._selection.end.character));for await(let s of r)if(this.replyIndentationTracker){let a=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);i>0?(n=this._myDocument.replaceLine(n,a),i--):n=this._myDocument.insertLineAfter(n-1,a)}else{let a=this._selection.start.line;this.replyIndentationTracker=new QT(this._myDocument,a,s);let u=this.replyIndentationTracker.reindent(s,this._myDocument.indentStyle);n=this._myDocument.replaceLine(a,u),i--}return this._myDocument.didEdits&&i>0&&this._myDocument.deleteLines(n,n+i-1),this._myDocument.didEdits&&o.length>0&&this._myDocument.replaceLine(n-1,this._myDocument.getLine(n-1).content+o),new dA(this._myDocument.didEdits,this._myDocument.additionalImports)}},Bee=()=>!0,dA=class{constructor(e,r){this.didEdits=e;this.additionalImports=r}},QT=class{constructor(e,r,n){let i=0;for(let s=r;s>=0;s--){let a=e.getLine(s);if(a.content.length>0){i=a.indentLevel,s!==r&&a.content.endsWith("{")&&(i+=1);break}}this._replyIndentStyle=KT.guessIndentStyleFromLine(n);let o=p0(n,this._replyIndentStyle?.tabSize??4);this.indentDelta=o-i}reindent(e,r){if(e==="")return new BM("",0,"",0);this._replyIndentStyle||(this._replyIndentStyle=KT.guessIndentStyleFromLine(e));let n=0,i=0,o=a=>(n=a,i=Math.max(n-this.indentDelta,0),i),s=KT.reindentLine(e,this._replyIndentStyle??{insertSpaces:!0,tabSize:4},r,o);return new BM(e,n,s,i)}},Uee=class{constructor(e,r){this.line=e;this.anchor=r}},JT=class{constructor(e,r){this.lineIndex=e;this.sentInCodeBlock=r}},ZT=class{constructor(e,r){this.startLineIndex=e;this.endLineIndex=r}},eS=class{constructor(e,r,n,i,o,s){this.progress=e;this.languageId=o;this._originalLines=[];this.lines=[];this._didEdits=!1;this._didReplaceEdits=!1;this._additionalImports=[];this.indentStyle=KT.getDocumentIndentStyle(r,s),this._originalLines=r.split(/\r\n|\r|\n/g);for(let a=0;a<this._originalLines.length;a++)this.lines[a]=new g0(this._originalLines[a],this.indentStyle);this.firstSentLineIndex=Number.MAX_SAFE_INTEGER;for(let a of n)this.lines[a.lineIndex].markSent(a.sentInCodeBlock),this.firstSentLineIndex=Math.min(this.firstSentLineIndex,a.lineIndex);this.firstSentLineIndex=Math.min(this.firstSentLineIndex,i.startLineIndex)}get didEdits(){return this._didEdits}get didReplaceEdits(){return this._didReplaceEdits}get additionalImports(){return this._additionalImports}getText(){return this.lines.map(e=>e.content).join(`
`)}getLineCount(){return this.lines.length}getLine(e){if(e<0||e>=this.lines.length)throw new Error("Invalid index");return this.lines[e]}addAdditionalImport(e){this._additionalImports.push(e)}replaceLine(e,r,n=!1){let i=typeof r=="string"?r:r.adjustedContent;return this.lines[e]=new g0(i,this.indentStyle),this.progress.report({edits:[new eo(new Ge(e,0,e,1e3),i)]}),this._didEdits=!0,this._didReplaceEdits=this._didReplaceEdits||!n,e+1}replaceLines(e,r,n){if(e>r)throw new Error("Invalid range");return e===r?this.replaceLine(e,n):(this.lines.splice(e,r-e+1,new g0(n.adjustedContent,this.indentStyle)),this.progress.report({edits:[new eo(new Ge(e,0,r,1e3),n.adjustedContent)]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1)}appendLineAtEndOfDocument(e){return this.lines.push(new g0(e.adjustedContent,this.indentStyle)),this.progress.report({edits:[new eo(new Ge(this.lines.length-1,1e3,this.lines.length-1,1e3),`
`+e.adjustedContent)]}),this._didEdits=!0,this.lines.length}insertLineAfter(e,r){return this.lines.splice(e+1,0,new g0(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new eo(new Ge(e,1e3,e,1e3),`
`+r.adjustedContent)]}),this._didEdits=!0,e+2}insertLineBefore(e,r){return e===this.lines.length?this.insertLineAfter(e-1,r):(this.lines.splice(e,0,new g0(r.adjustedContent,this.indentStyle)),this.progress.report({edits:[new eo(new Ge(e,0,e,0),r.adjustedContent+`
`)]}),this._didEdits=!0,e+1)}deleteLines(e,r){return this.lines.splice(e,r-e+1),this.progress.report({edits:[new eo(new Ge(e,0,r+1,0),"")]}),this._didEdits=!0,this._didReplaceEdits=!0,e+1}},BM=class{constructor(e,r,n,i){this.originalContent=e;this.originalIndentLevel=r;this.adjustedContent=n;this.adjustedIndentLevel=i;this.trimmedContent=this.originalContent.trim()}},qM=class{constructor(e){this.lineIndex=e}};var g0=class{constructor(e,r){this.content=e;this._indentStyle=r;this._sentInCodeBlock=0;this._trimmedContent=null;this._normalizedContent=null;this._indentLevel=-1}get isSent(){return this._sentInCodeBlock!==0}get sentInCodeBlock(){return this._sentInCodeBlock}get trimmedContent(){return this._trimmedContent===null&&(this._trimmedContent=this.content.trim()),this._trimmedContent}get normalizedContent(){return this._normalizedContent===null&&(this._normalizedContent=Nee(this.content,this._indentStyle.tabSize,this._indentStyle.insertSpaces)),this._normalizedContent}get indentLevel(){return this._indentLevel===-1&&(this._indentLevel=p0(this.content,this._indentStyle.tabSize)),this._indentLevel}markSent(e){this._sentInCodeBlock=e}},KT=class t{static getDocumentIndentStyle(e,r){return r||Ly(f0.fromString(e),4,!1)}static guessIndentStyleFromLine(e){let r=t._getLeadingWhitespace(e);if(!(r===""||r===" "))return Ly([e],4,!1)}static reindentLine(e,r,n,i=o=>o){let o=p0(e,r.tabSize),s=i(o);for(;o>0;)e=this._outdent(e,r),o--;for(;o<s;)e="	"+e,o++;return Nee(e,n.tabSize,n.insertSpaces)}static _outdent(e,r){let n=0;for(;n<e.length;){let i=e.charCodeAt(n);if(i===9){n++;break}if(i!==32||n===r.tabSize)break;n++}return e.substring(n)}static _getLeadingWhitespace(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n!==32&&n!==9)return e.substring(0,r)}return e}};function qee(t){return new Ap(async e=>{let r;(a=>(a[a.BeforeCodeBlock=0]="BeforeCodeBlock",a[a.InCodeBlock=1]="InCodeBlock",a[a.AfterCodeBlock=2]="AfterCodeBlock"))(r||={});let n=0;for await(let i of t){if(n===0){if(/^```/.test(i)){n=1,e.emitOne({value:i,kind:2});continue}}else n===1&&/^```/.test(i)&&(n=2);e.emitOne({value:i,kind:n===1?1:2})}})}function CPe(t){let e=Ki.begin(t),r=Ki.end(t),n=!0,i=!1;return o=>n&&wi.testLine(t,o)?(n=!1,!1):!i&&/^\s*$/.test(o)||o.startsWith(e)||o.startsWith(r)?!1:(i=!0,!0)}function Gee(t){let e=Iot(t);return qee(e).filter(n=>n.kind===1).map(n=>n.value)}function Iot(t){return new Ap(async e=>{let r="";for await(let n of t){r+=n;do{let i=r.indexOf(`
`);if(i===-1)break;let o=r.substring(0,i);r=r.substring(i+1),e.emitOne(o)}while(!0)}r.length>0&&e.emitOne(r)})}function Hee(t,e){let r=!1,n=!1;return t.filter(i=>$T(i,e.languageId)?(e.addAdditionalImport(kee(i)),r=!0,!1):i.trim().length===0&&r?n:(n=!0,!0))}var pp=class extends im{constructor(r){super();this.factory=r}create(r,n){return this.factory(r,n)}};var pA=class t{constructor(){this._data=new Map;this._messages={0:t._shuffleArray(t._progressMessages[0]),1:t._shuffleArray(t._progressMessages[1]),2:t._shuffleArray(t._progressMessages[2]),3:t._shuffleArray(t._progressMessages[3])}}static{this._progressMessages={0:[ds.t("Fetching response, it won't be long now."),ds.t("Working hard to get your response..."),ds.t("Request is being processed, sit tight!"),ds.t("Response is being prepared, please be patient.")],1:[ds.t("Data is on its way, please wait a moment."),ds.t("Request is being processed, sit tight!"),ds.t("Response is being prepared, please be patient.")],2:[ds.t("Data is on its way, please wait a moment."),ds.t("Source code arriving..."),ds.t("Hold on tight, we're almost there!"),ds.t("Response is being prepared, please be patient."),ds.t("Code chunks incoming..."),ds.t("Receiving code, please wait..."),ds.t("Code is being processed, please wait...")],3:[ds.t("Almost done, just a few more seconds..."),ds.t("Processing response, please wait...")]}}next(e){let r=this._data.get(e);if(r){if(Date.now()-r.time<3579)return this._messages[e][r.index];r.index+=1,r.time=Date.now();let n=this._messages[e];return n[Math.min(n.length-1,r.index)]}else return this._data.set(e,{index:0,time:Date.now()}),this._messages[e][0]}static _shuffleArray(e){return yP(e),e}},GM=class{constructor(e){this.progress=e;this._progressMessages=new pA;this._lastText=void 0}_reportProgress(e){let r=this._progressMessages.next(e);this.progress.report({message:r})}update(e){return this._reportProgress(this._lastText?e.includes("```")?2:1:0),this._lastText=e,{shouldFinish:am(e)}}async finish(){if(!this._lastText)throw new Error("No text");return this._reportProgress(3),await this.interpretReply(this._lastText)}},tS=class t extends GM{constructor(r,n){super(n);this.replyInterpreter=r}static createFactory(r){return n=>new t(r,n)}interpretReply(r){return this.replyInterpreter(r,this.progress)}},Uy=class t extends GM{constructor(r,n,i,o,s){super(s);this.accessor=r;this.selectionContextMetadata=n;this.context=i;this.editStrategy=o}static createFactory(r,n,i,o=2){return s=>{if(!n.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");return new t(r,n.selectionContextMetadata,i,o,s)}}interpretReply(r){let{contextInfo:n,wholeRange:i}=this.selectionContextMetadata,o=lm(n,r,this.context.language);if(!o)return{type:"conversational",content:r};let{code:s}=o,a=My(this.accessor,n,s,this.editStrategy,this.context.fileIndentInfo,Oy.fromDocumentContext(this.context));return um(a,i)}},HM=class t{constructor(e){this._progress=e;this._responseStream=new Q0;this._lastLength=0;this._lastText=void 0;this._promise=void 0;this._progressMessages=new pA}static createFactory(){return e=>new t(e)}_reportProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}update(e){this._promise||(this._reportProgress(0),this._promise=this.processStream(this._responseStream,this._progress)),this._reportProgress(1);let r=e.slice(this._lastLength);return this._lastLength=e.length,this._lastText=e,this._responseStream.emitOne(r),{shouldFinish:!1}}async finish(){return this._responseStream.resolve(),{type:"conversational",content:this._lastText??""}}async processStream(e,r){for await(let n of e.asyncIterable)r.report({content:n});return!1}};function wot(t,e){let r=new _0(t),n=e.map(i=>{let o=r.toOffsetRange(i.range);return{startOffset:o.start,endOffset:o.endExclusive,text:i.newText}});jee(n,(i,o)=>i.startOffset-o.startOffset||i.endOffset-o.endOffset);for(let i=n.length-1;i>=0;i--){let o=n[i];t=t.substring(0,o.startOffset)+o.text+t.substring(o.endOffset)}return t}function jee(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);jee(n,e),jee(i,e);let o=0,s=0,a=0;for(;o<n.length&&s<i.length;)e(n[o],i[s])<=0?t[a++]=n[o++]:t[a++]=i[s++];for(;o<n.length;)t[a++]=n[o++];for(;s<i.length;)t[a++]=i[s++];return t}var _0=class{constructor(e){this.textLength=e.length,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0),this.lineLengthsByLineIdx=[];let r=0;for(let n=0;n<e.length;n++)e.charAt(n)===`
`?(this.lineStartOffsetByLineIdx.push(n+1),this.lineLengthsByLineIdx.push(r),r=0):r++;this.lineLengthsByLineIdx.push(r)}getOffset(e){return e=this.validatePosition(e),this.lineStartOffsetByLineIdx[e.line]+e.character}getPosition(e){e<0&&(e=0),e>this.textLength&&(e=this.textLength);let r=this.findLineIdxOfOffset(e),n=this.lineStartOffsetByLineIdx[r];return new Rr(r,e-n)}fromOffsetRange(e){return new Ge(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Or(this.getOffset(e.start),this.getOffset(e.end))}validatePosition(e){let{line:r,character:n}=e;return r<0?(r=0,n=0):r>=this.lineLengthsByLineIdx.length?(r=this.lineLengthsByLineIdx.length-1,n=this.lineLengthsByLineIdx[r]):n<0?n=0:n>this.lineLengthsByLineIdx[r]&&(n=this.lineLengthsByLineIdx[r]),new Rr(r,n)}validateRange(e){return new Ge(this.validatePosition(e.start),this.validatePosition(e.end))}findLineIdxOfOffset(e){let r=0,n=this.lineStartOffsetByLineIdx.length-1;for(;r<n;){let i=Math.floor((r+n)/2),o=this.lineStartOffsetByLineIdx[i];if(e<o)n=i-1;else{if(e===o)return i;{let s=this.lineStartOffsetByLineIdx[i+1];if(e<s)return i;r=i+1}}}return r}},jM=class t{constructor(e,r,n,i,o){this._accessor=e;this._selectionContextMetadata=r;this._context=n;this._editStrategy=i;this._progress=o;this._lastText=void 0;this._initialDocText=this._context.document.getText();this._documentInfo=Oy.fromDocumentContext(this._context);if(!this._selectionContextMetadata)throw new Error("code reply NEEDS a selection context");let s=this._selectionContextMetadata.contextInfo,a=s.range.firstLineIndex,u=s.range.firstLineIndex+s.range.lines.length-1,c;{let l=[],d=(f,m)=>{for(let h=0;h<f.lines.length;h++){let g=f.firstLineIndex+h;l.push(new JT(g,m))}};d(s.above,1),d(s.range,2),d(s.below,3);let p=new ZT(a,u);c=new eS(o,this._context.document.getText(),l,p,this._context.document.languageId,this._context.fileIndentInfo)}this.streaming=new fA(o,new XT(c,this._context.selection,new qc(a,0,u,this._context.document.lineAt(u).text.length),this._editStrategy,CPe(this._context.language)))}static createFactory(e,r,n,i=2){return(o,s)=>{if(!r.selectionContextMetadata)throw new Error("code reply NEEDS a selection context");return s?new t(e,r.selectionContextMetadata,n,i,o):new Uy(e,r.selectionContextMetadata,n,i,o)}}update(e){return this.streaming.update(e),this._lastText=e,{shouldFinish:am(this._lastText)}}async finish(){if(!this._lastText)throw new Error("No text");let{didEdits:e}=await this.streaming.finish(),r=await this._interpretReply(this._lastText);if(r.type==="inlineEdit"){let n=wot(this._initialDocText,r.edits);return{type:"inlineEdit",edits:[{range:new Ge(new Rr(0,0),new Rr(Number.MAX_SAFE_INTEGER,0)),newText:n}],newWholeRange:r.newWholeRange}}return e&&this._progress.report({edits:[{range:new Ge(new Rr(0,0),new Rr(Number.MAX_SAFE_INTEGER,0)),newText:this._initialDocText}]}),r}_interpretReply(e){let{contextInfo:r,wholeRange:n}=this._selectionContextMetadata,i=lm(r,e,this._context.language);if(!i)return{type:"conversational",content:e};let{code:o}=i,s=My(this._accessor,r,o,this._editStrategy,this._context.fileIndentInfo,this._documentInfo);return um(s,n)}},fA=class{constructor(e,r){this._progress=e;this._responseStream=new Q0;this._lastLength=0;this._lastText=void 0;this._progressMessages=new pA;this._streamingPromise=r.processStream(this._responseStream.asyncIterable)}update(e){this._reportMessageProgress(this._lastText?2:0),this._lastText=e;let r=e.slice(this._lastLength);this._lastLength=e.length,this._responseStream.emitOne(r)}_reportMessageProgress(e){let r=this._progressMessages.next(e);this._progress.report({message:r})}async finish(){return this._responseStream.resolve(),await this._streamingPromise}};var By=class{constructor(e){this._lineStartOffsets=[0];let r=0;for(;;){let n=e.indexOf(`
`,r);if(n===-1)break;this._lineStartOffsets.push(n+1),r=n+1}}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};var Pi=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Error(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Ai.fromJson))}static from(e){let r=e.map(i=>new Ai(Or.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static async fromDiff(e,r,n){let i=await n.computeDiff(e,r,{maxComputationTimeMs:5e3,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new By(e),s=new By(r),a=[];for(let u of i.changes)for(let c of u.innerChanges??[]){let l=s.positionToOffset(c.modifiedRange.getStartPosition()),d=s.positionToOffset(c.modifiedRange.getEndPosition()),p=r.substring(l,d),f=o.positionToOffset(c.originalRange.getStartPosition()),m=o.positionToOffset(c.originalRange.getEndPosition()),h=new Or(f,m);a.push(new Ai(h,p))}return new t(a)}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Ai(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=e;for(let n=this.edits.length-1;n>=0;n--){let i=this.edits[n];r=r.substring(0,i.replaceRange.start)+i.newText+r.substring(i.replaceRange.endExclusive)}return r}compose(e){return Rot(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new Ai(Or.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Or.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(r.push(new Ai(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(r.push(new Ai(a.replaceRange.delta(o),a.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}},Ai=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static fromJson(e){return new t(Or.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=woe(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,Roe(r,this.newText)),o=new Or(this.replaceRange.start+n,this.replaceRange.endExclusive-i),s=this.newText.substring(n,this.newText.length-i);return new t(o,s)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Rot(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let c=r[0];if(!c||c.replaceRange.start+i+c.newText.length>=o.replaceRange.start)break;r.shift(),n.push(c),i+=c.newText.length-c.replaceRange.length}let s=i,a,u;for(;;){let c=r[0];if(!c||c.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=c),u=c,r.shift(),i+=c.newText.length-c.replaceRange.length}if(!a)n.push(new Ai(o.replaceRange.delta(-i),o.newText));else{let c="",l=o.replaceRange.start-(a.replaceRange.start+s);l>0&&(c=a.newText.slice(0,l));let d=u.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(d>0){let m=new Ai(Or.ofStartAndLength(u.replaceRange.endExclusive,0),u.newText.slice(-d));r.unshift(m),i-=m.newText.length-m.replaceRange.length}let p=c+o.newText,f=new Or(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new Ai(f,p))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Pi(n).normalize()}function wPe(t,e,r,n){if(n)return Yee(t,e,r,n);let i=e.getText();if(i.length>t)return null;let o=e.offsetAt(r.start),s=e.offsetAt(r.end);return new VM(new nS(i,new Pi([]),e.languageId),new Or(o,s),new Or(o,s))}function Yee(t,e,r,n){let i=e.getText(),o=zM.convertToLinkedTree(i,e.languageId,n),s=e.offsetAt(r.start),a=e.offsetAt(r.end);return Aot(t,o,s,a)}var VM=class{constructor(e,r,n){this.document=e;this.selection=r;this.adjustedSelection=n}};function Aot(t,e,r,n){let i=Pot(e,r,n),o=[];e.visit(d=>{d.isSurviving||o.push(d)});let s=d=>d.endIndex<i.start?i.start-d.endIndex:d.startIndex>i.endExclusive?3*(d.startIndex-i.endExclusive):0;o.sort((d,p)=>{if(d.scopeDistance===p.scopeDistance){if(d.depth===p.depth){let f=s(d),m=s(p);return f-m}return d.depth-p.depth}return d.scopeDistance-p.scopeDistance});let a=e.getSummarizedDocumentBuilder();for(;o.length>0&&a.textLength<t;){o.shift().markToKeep();let p=e.getSummarizedDocumentBuilder();if(p.textLength<=t)a=p;else break}let u=a.finalize(),c=u.convertOriginalRangeToPostEditsRange(new Or(r,n)),l=u.convertOriginalRangeToPostEditsRange(i);return new VM(u,c,l)}function Pot(t,e,r){[e,r]=Not(t,e,r);let[n,i]=RPe(t,e,r);{let a;for(n instanceof rS?(a=n.nextLeaf,n.parent.markSelectedGap(n.gapIndex)):(a=n,a.markSelected());a&&a.startIndex<=r;)a.markSelected(),a=a.nextLeaf}for(;i>0;){let a=t.text.charCodeAt(i-1);if(a!==32&&a!==9)break;i--}let o=r,s=t.findLeaf2(r);return s instanceof rS?s.isFirstGapInParent&&s.equals(n)?o=Math.max(o,s.parent.lastGap.lastNonWhitespaceIndex+1):s.isLastGapInParent&&(s.hasSelectedContent(i,o)||s.parent===n.parent&&n instanceof rS&&n.hasSelectedContent(i,o))&&(o=Math.max(o,s.lastNonWhitespaceIndex+1)):o=Math.max(o,s.endIndex),t.setSelection(new Or(i,o)),t.propagateScopeDistancesToChildren(),new Or(i,o)}function Not(t,e,r){let n=t.text.substring(e,r);if(!/^\s*$/.test(n))return[e,r];let o=e,s=r,a=!0,u=!0;do{if(u&&s>=t.text.length&&(u=!1),u){let c=t.text.charCodeAt(s);if(c===13||c===10)u=!1;else if(c!==32&&c!==9)return[s,s+1];s++}if(a&&o>0&&(a=!1),a){let c=t.text.charCodeAt(o-1);if(c===13||c===10)a=!1;else if(c!==32&&c!==9)return[o-1,o];o--}}while(a||u);return[e,r]}function RPe(t,e,r,n=!1){let i=t.findLeaf2(e);return i instanceof zM?[i,Math.min(e,i.startIndex)]:r<=i.endIndex?[i,Math.min(e,i.firstNonWhitespaceIndex)]:i.hasSelectedContent(e,r)?i.isFirstGapInParent?[i,Math.min(i.firstNonWhitespaceIndex,e)]:[i,e]:n?[i,e]:RPe(t,i.endIndex,Math.max(i.endIndex,r),!0)}function APe(t){return t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}var zM=class t{constructor(e,r,n,i,o,s,a,u,c){this._originalText=e;this._languageId=r;this.parent=n;this.startIndex=i;this.endIndex=o;this.kind=s;this.children=a;this.depth=u;this.myIndex=c;this._scopeDistance=Number.MAX_SAFE_INTEGER;this._isSurviving=!1;this._summarizedDocumentBuilder=null;this._survivingGapBeforeChild=-1;this._hasSurvivingChildren=!1;this._selection=null}static convertToLinkedTree(e,r,n){let i=new t(e,r,null,n.startIndex,n.endIndex,n.kind,[],0,0);return t._convertChildrenToLinkedTree(e,r,n,i,1),i}static _convertChildrenToLinkedTree(e,r,n,i,o){for(let s=0;s<n.children.length;s++){let a=n.children[s],u=new t(e,r,i,a.startIndex,a.endIndex,a.kind,[],o,s);i.children.push(u),t._convertChildrenToLinkedTree(e,r,a,u,o+1)}}get scopeDistance(){return this._scopeDistance}get isSurviving(){return this._isSurviving}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}textAt(e){return this._originalText.substring(e.start,e.endExclusive)}toString(){return`Node (${this.startIndex}-${this.endIndex}) ${APe(this._originalText.substring(this.startIndex,this.endIndex))}`}setSelection(e){this._selection=e;for(let r of this.children)r.setSelection(e)}_touchesSelection(e){return this._selection?e.start<=this._selection.endExclusive&&this._selection.start<=e.endExclusive:!1}markSelected(){this.markToKeep();{let e=1,r=this.parent;for(this._scopeDistance=0;r&&r._scopeDistance>e;)r._scopeDistance=e,e++,r=r.parent}}gapBeforeChild(e){let r=e===0?this.startIndex:this.children[e-1].endIndex,n=e===this.children.length?this.endIndex:this.children[e].startIndex;return new rS(this._originalText,this,r,n,e)}markSelectedGap(e){this._survivingGapBeforeChild=e,this.markSelected()}childAt(e){return this.children[e]??null}get firstGap(){return this.children.length===0?null:this.gapBeforeChild(0)}get lastGap(){return this.children.length===0?null:this.gapBeforeChild(this.children.length)}markToKeep(){if(!this.isSurviving){this._isSurviving=!0;{let e=this.parent;for(;e;)e._summarizedDocumentBuilder=null,e._hasSurvivingChildren=!0,e._isSurviving=!0,e=e.parent}}}propagateScopeDistancesToChildren(){for(let e of this.children)e._scopeDistance>this._scopeDistance&&(e._scopeDistance=this._scopeDistance),e.propagateScopeDistancesToChildren()}findLeaf(e){if(this.children.length===0)return[this,0];let r=Yie(this.children.length,n=>{let i=this.children[n];return e>=i.startIndex&&e<=i.endIndex?0:e<i.startIndex?1:-1});return r<0?[this,r]:this.children[r].findLeaf(e)}findLeaf2(e){let[r,n]=this.findLeaf(e);return n<0?r.gapBeforeChild(~n):r}get nextLeaf(){let e=this;do{let r=e.nextSibling;if(r)return r.leftMostLeafChild;e=e.parent}while(e);return null}get leftMostLeafChild(){let e=this;for(;e.children.length>0;)e=e.children[0];return e}get prevSibling(){let e=this.parent,r=this.myIndex-1;return e&&r>=0?e.children[r]:null}get nextSibling(){let e=this.parent,r=this.myIndex+1;return e&&r<e.children.length?e.children[r]:null}getSummarizedDocumentBuilder(){return this._summarizedDocumentBuilder===null&&(this._summarizedDocumentBuilder=new zee(this._originalText,this._languageId,this.startIndex,this.endIndex),this._extractSurvivingText(this._summarizedDocumentBuilder)),this._summarizedDocumentBuilder}_extractSurvivingText(e){if(!this.isSurviving)return;if(this.children.length===0)return e.appendText(this.startIndex,this.endIndex);let r=e.createSurvivingStringPiece(this.startIndex,this.children[0].startIndex),n=e.createSurvivingStringPiece(this.children[this.children.length-1].endIndex,this.endIndex);if(!this._hasSurvivingChildren){let i=r.trimEnd(),o=n.trimStart();i.endsWith("{")&&o.startsWith("}")?(e.appendSurvivingStringPiece(i),e.setNextElideText("\u2026"),e.appendSurvivingStringPiece(o)):(e.appendSurvivingStringPiece(r),e.appendSurvivingStringPiece(n));return}for(let i=0;i<this.children.length;i++){let o=this.children[i],s=o.isSurviving,a=i>0?this.children[i-1]:null,u=a?a.isSurviving:!1;this._appendGapIfSurviving(e,this.gapBeforeChild(i),u&&s),s&&e.appendChildBuilder(o.getSummarizedDocumentBuilder())}this._appendGapIfSurviving(e,this.gapBeforeChild(this.children.length),!1)}_appendGapIfSurviving(e,r,n){if(this._touchesSelection(r.range)||this._survivingGapBeforeChild===r.gapIndex){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i)}else if(r.gapIndex===0||r.gapIndex===this.children.length||n){let i=e.createSurvivingStringPiece(r.startIndex,r.endIndex);e.appendSurvivingStringPiece(i.trimDupNewLines())}}visit(e){e(this);for(let r of this.children)r.visit(e)}},rS=class t{constructor(e,r,n,i,o){this._originalText=e;this.parent=r;this.startIndex=n;this.endIndex=i;this.gapIndex=o}equals(e){return e instanceof t?this.startIndex===e.startIndex&&this.endIndex===e.endIndex:!1}get range(){return new Or(this.startIndex,this.endIndex)}get isFirstGapInParent(){return this.gapIndex===0}get isLastGapInParent(){return this.gapIndex===this.parent.children.length}toString(){return`NodeGap (${this.startIndex}-${this.endIndex}) ${APe(this._originalText.substring(this.startIndex,this.endIndex))}`}get text(){return this._originalText.substring(this.startIndex,this.endIndex)}hasSelectedContent(e,r){let n=this.range.intersect(new Or(e,r)),i=n?this._originalText.substring(n.start,n.endExclusive):"";return!/^\s*$/s.test(i)}get firstNonWhitespaceIndex(){let e=this.startIndex;for(;e<this.endIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e++}return this.endIndex}get lastNonWhitespaceIndex(){let e=this.endIndex-1;for(;e>=this.startIndex;){let r=this._originalText.charCodeAt(e);if(r!==9&&r!==32&&r!==10)return e;e--}return this.startIndex-1}get nextLeaf(){let e=this.parent.childAt(this.gapIndex);return e?e.leftMostLeafChild:this.parent.nextLeaf}},Vee=class t{constructor(e,r,n){this.allText=e;this.startIndex=r;this.endIndex=n}get text(){return this.allText.substring(this.startIndex,this.endIndex)}trimStart(){let e=this.text.trimStart();return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimStartDupNewLines(){let e=this.text.replace(/^\n+/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.endIndex-e.length,this.endIndex)}trimEnd(){let e=this.text.trimEnd();return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimEndDupNewLines(){let e=this.text.replace(/\n+$/g,`
`);return e.length===this.text.length?this:new t(this.allText,this.startIndex,this.startIndex+e.length)}trimDupNewLines(){return this.trimStartDupNewLines().trimEndDupNewLines()}startsWith(e){return this.text.startsWith(e)}endsWith(e){return this.text.endsWith(e)}},nS=class{constructor(e,r,n){this.originalText=e;this.edits=r;this.languageId=n;this._transformer=null;this._text=null}get transformer(){return this._transformer||(this._transformer=new _0(this.text)),this._transformer}get text(){return this._text||(this._text=this._createText()),this._text}_createText(){let e=[],r=0,n=this.originalText;for(let i of this.edits.edits)e.push(n.substring(r,i.replaceRange.start)),e.push(i.newText),r=i.replaceRange.endExclusive;return e.push(n.substring(r)),e.join("")}convertOriginalOffsetToPostEditsOffset(e){let r=0;for(let n of this.edits.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}convertOriginalRangeToPostEditsRange(e){return new Or(this.convertOriginalOffsetToPostEditsOffset(e.start),this.convertOriginalOffsetToPostEditsOffset(e.endExclusive))}convertPostEditsOffsetToOriginalOffset(e){let r=0;for(let n of this.edits.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},zee=class{constructor(e,r,n,i){this._allText=e;this._languageId=r;this._scopeStartIndex=n;this._scopeEndIndex=i;this._elidedRanges=[];this._len=0;this._nextElidedRangeReplacementText=null;this._firstStartIndex=-1,this._lastEndIndex=n}createSurvivingStringPiece(e,r){return new Vee(this._allText,e,r)}get textLength(){return this._len}finalize(){let e=[];return this._scopeStartIndex<this._firstStartIndex&&e.push(new Ai(new Or(this._scopeStartIndex,this._firstStartIndex),"")),e=e.concat(this._elidedRanges),this._lastEndIndex<this._scopeEndIndex&&e.push(new Ai(new Or(this._lastEndIndex,this._scopeEndIndex),"")),new nS(this._allText,new Pi(e),this._languageId)}appendSurvivingStringPiece(e){this.appendText(e.startIndex,e.endIndex)}appendText(e,r){this._markSurviving(e,r);let n=this._allText.substring(e,r);this._len+=n.length}appendChildBuilder(e){this._markSurviving(e._firstStartIndex,e._lastEndIndex),this._elidedRanges=this._elidedRanges.concat(e._elidedRanges),this._len+=e._len}_markSurviving(e,r){this._firstStartIndex===-1?this._firstStartIndex=e:e>this._lastEndIndex&&(this._nextElidedRangeReplacementText?(this._len+=this._nextElidedRangeReplacementText.length,this._elidedRanges.push(new Ai(new Or(this._lastEndIndex,e),this._nextElidedRangeReplacementText)),this._nextElidedRangeReplacementText=null):this._elidedRanges.push(new Ai(new Or(this._lastEndIndex,e),""))),this._lastEndIndex=r}setNextElideText(e){this._nextElidedRangeReplacementText=e}};var YM=class{constructor(e){this._derivedDocument=e;this._workingCopyOriginalDocument=new Wee(this._derivedDocument.originalText)}get originalText(){return this._workingCopyOriginalDocument.text}get text(){return this._derivedDocument.text}get languageId(){return this._derivedDocument.languageId}get derivedDocumentTransformer(){return this._derivedDocument.transformer}get originalDocumentTransformer(){return this._workingCopyOriginalDocument.transformer}get allReportedEdits(){return this._workingCopyOriginalDocument.appliedEdits}createDerivedDocumentProgress(e,r){return new $ee(e,r,this)}applyAndTransformProgressItem(e){if(!e.edits)return e;let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=PPe(n.transformer,e.edits).tryRebase(i.inverse(r.text)),a=i.tryRebase(s),u={...e,edits:WM(r.transformer,s)};return this._workingCopyOriginalDocument.applyOffsetEdits(s),this._derivedDocument=new nS(this._workingCopyOriginalDocument.text,a,this._derivedDocument.languageId),u}rebaseEdits(e){let r=this._workingCopyOriginalDocument,n=this._derivedDocument,i=n.edits,s=PPe(n.transformer,e).tryRebase(i.inverse(r.text));return WM(r.transformer,s)}convertPostEditsOffsetToOriginalOffset(e){return this._derivedDocument.convertPostEditsOffsetToOriginalOffset(e)}},$ee=class{constructor(e,r,n){this._actual=e;this._streamEdits=r;this._workingCopySummarizedDoc=n}get finalEdits(){return this._streamEdits?new Pi([]):this._workingCopySummarizedDoc.allReportedEdits}report(e){let r=this._workingCopySummarizedDoc.applyAndTransformProgressItem(e);r.edits&&!this._streamEdits||this._actual.report(r)}},Wee=class{constructor(e){this._text=e;this._transformer=null;this._appliedEdits=new Pi([])}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new _0(this._text)),this._transformer}get appliedEdits(){return this._appliedEdits}applyOffsetEdits(e){let{edits:r}=e,n=this._text;for(let i=r.length-1;i>=0;i--){let o=r[i];n=n.substring(0,o.replaceRange.start)+o.newText+n.substring(o.replaceRange.endExclusive)}this._text=n,this._transformer=null,this._appliedEdits=this._appliedEdits.compose(e)}},$M=class{constructor(e){this._text=e;this._transformer=null}get text(){return this._text}get transformer(){return this._transformer||(this._transformer=new _0(this._text)),this._transformer}};function PPe(t,e){let r=e.map(n=>new eo(t.validateRange(n.range),n.newText));return new Pi(r.map(n=>new Ai(t.toOffsetRange(n.range),n.newText)))}function WM(t,{edits:e}){return e.map(r=>new eo(t.fromOffsetRange(r.replaceRange),r.newText))}var KM=class extends ue{async prepare(){return await ap(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(Vr(this.props.documentContext.document.uri))throw Vo("InlineChatGenerateCodePrompt should not be used with a notebook!");let i=r.endpoint.modelMaxPromptTokens/3*4,o=wPe(i,this.props.documentContext.document,e.wholeRange,e.structure);if(o)return this._renderWithSummarizedDocument(e,o,r);let{wholeRange:s,functionPositions:a,functionBodies:u}=e,c=nee(this.accessor,r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,s,a,u),l=this.props.documentContext.document,d=this.props.documentContext.language,p=new Lo(s,c),f=[{uri:l.uri,version:l.version,ranges:Br([c.range.toRange(),c.above.toRange(),c.below.toRange()])}],m=(E,x)=>E.length===0?x:E.charCodeAt(E.length-1)!==10?E+`
`+x:E+x,h="";c.outlineAbove.length>0&&(h=m(h,c.outlineAbove)),c.above.hasContent&&(h=m(h,c.above.lines.join(`
`)));let g="";c.below.hasContent&&(g=m(g,c.below.lines.join(`
`))),c.outlineBelow.length>0&&(g=m(g,c.outlineBelow));let v=h.length>0,_=g.length>0,y=!v&&!_;return vscpp(vscppf,null,vscpp("usedContext",{value:f}),vscpp("meta",{value:p}),vscpp(rt,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",d.languageId,".",vscpp("br",null),v&&_&&vscpp(vscppf,null,"The user will paste some code from below and above the cursor.",vscpp("br",null)),v&&_&&vscpp(vscppf,null,"You must insert code surrounded with ```  which fits perfectly between above and below.",vscpp("br",null)),v&&_&&vscpp(vscppf,null,"You must not update the code from the user.",vscpp("br",null)),v&&!_&&vscpp(vscppf,null,"The user will paste some code from above the cursor.",vscpp("br",null)),v&&!_&&vscpp(vscppf,null,"You must insert code surrounded with ```  which fits perfectly after above.",vscpp("br",null)),v&&!_&&vscpp(vscppf,null,"You must not update the code from the user.",vscpp("br",null)),!v&&_&&vscpp(vscppf,null,"The user will paste some code from below the cursor.",vscpp("br",null)),!v&&_&&vscpp(vscppf,null,"You must insert code surrounded with ```  which fits perfectly above the user's code.",vscpp("br",null)),!v&&_&&vscpp(vscppf,null,"You must not update the code from the user.",vscpp("br",null)),y&&vscpp(vscppf,null,"You must generate a code block surrounded with ``` that will be used in a new file",vscpp("br",null)),vscpp(Mt,null),vscpp("br",null),["Here is an example:","","[EXAMPLE 1]","[USER]: File name: `/Users/someone/Projects/proj01/example.ts`.","[USER]: I have the following code below the cursor:","```","   return a2 + b2;","}","```","[USER]: Fill in the code","[USER]: I have the following code above the cursor:","```","function sumSquared(a: number, b: number) {","```","[ASSISTANT]: Sure, here it is:","```","   const a2 = a * a;","   const b2 = b * b;","```","","[EXAMPLE 2]","[USER]: File name: `/Users/someone/Projects/proj01/sample.ts`.","[USER]: I have the following code below the cursor:","```","   sayHello() { console.log(`hello`); }","}","```","[USER]: add sayGoodBye","[USER]: I have the following code above the cursor:","```","class Person {","```","[ASSISTANT]: Sure, here it is:","```","   sayGoodBye() { console.log(`good bye`); }","```"].join(`
`)),vscpp(pe,null,"File name: `",l.uri.path,"`.",vscpp("br",null)),this.props.history&&vscpp(pe,null,this.props.history),_&&vscpp(pe,null,"I have the following code below the cursor:",vscpp(nn,{code:g})),vscpp(pe,null,this.props.query),v&&vscpp(pe,null,"I have the following code above the cursor:",vscpp(nn,{code:h})),y&&vscpp(pe,null,"I am in an empty file:",vscpp(Gs,{language:d,document:l,code:""})))}_renderWithSummarizedDocument(e,r,n){let{language:i,document:o}=this.props.documentContext,{document:s}=r,a=o.offsetAt(e.wholeRange.end),u=s.convertOriginalOffsetToPostEditsOffset(a),c=s.transformer.getPosition(u),l=s.text.length>0,d=s.text.substring(0,u),p=s.text.substring(u),f=`${d}$PLACEHOLDER$${p}`,m;return n.endpoint.model==="gpt-4"?m=g=>new FM(g,c,v=>v.trim()!=="$PLACEHOLDER$"):m=g=>new XT(g,new qc(c,c),new qc(c,c),3,v=>v.trim()!=="$PLACEHOLDER$"),vscpp(vscppf,null,vscpp("replyInterpreter",{value:(g,v)=>new mA(g,v,s,this.props.documentContext.fileIndentInfo,m)}),vscpp(rt,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",i.languageId,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to write some new code.",vscpp("br",null),l&&vscpp(vscppf,null,"The user includes existing code and marks with $PLACEHOLDER$ where the new code should go.",vscpp("br",null)),l&&vscpp(vscppf,null,'DO NOT include the text "$PLACEHOLDER$" in your reply.',vscpp("br",null)),l&&vscpp(vscppf,null,"DO NOT repeat any code from the user in your reply.",vscpp("br",null)),!l&&vscpp(vscppf,null,"Your must generate a code block surrounded with ``` that will be used in a new file",vscpp("br",null)),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),l&&vscpp(pe,null,"I have the following code in a file called `",o.uri.path,"`:",vscpp(nn,{languageId:i.languageId,code:f})),!l&&vscpp(pe,null,"I am in an empty file `",o.uri.path,"`."),vscpp(pe,null,this.props.query,vscpp("br",null),l&&vscpp(vscppf,null,"The code that would fit at $PLACEHOLDER$ with ``` is:")))}},mA=class{constructor(e,r,n,i,o){this._lastText=void 0;this._initialDocumentSnapshot=new $M(n.originalText),this._workingCopySummarizedDoc=new YM(n),this._progress=this._workingCopySummarizedDoc.createDerivedDocumentProgress(e,r);let s=new eS(this._progress,this._workingCopySummarizedDoc.text,this._workingCopySummarizedDoc.text.split(`
`).map((a,u)=>new JT(u,4)),new ZT(0,0),this._workingCopySummarizedDoc.languageId,i);this._streaming=new fA(this._progress,o(s))}update(e){return this._streaming.update(e),this._lastText=e,{shouldFinish:am(e)}}async finish(){let{didEdits:e,additionalImports:r}=await this._streaming.finish();if(e){let n=WM(this._initialDocumentSnapshot.transformer,this._progress.finalEdits);n.push(...this._generateAdditionalImportsEdits(r));let i=this._workingCopySummarizedDoc.allReportedEdits.inverse(this._initialDocumentSnapshot.text),o=i.edits.reduce((u,c)=>u.join(c.replaceRange),i.edits[0].replaceRange),s=this._workingCopySummarizedDoc.originalDocumentTransformer.fromOffsetRange(o),a={lastDocumentContent:this._workingCopySummarizedDoc.originalText,lastWholeRange:s};return{type:"inlineEdit",edits:n,newWholeRange:void 0,store:a}}if(!this._lastText)throw new Error("No text");return{type:"conversational",content:this._lastText}}_generateAdditionalImportsEdits(e){if(e.length===0)return[];let r=this._workingCopySummarizedDoc.originalText.split(/\r\n|\r|\n/g),n=Vie(r,o=>$T(o,this._workingCopySummarizedDoc.languageId));if(n===-1)return[new eo(new Ge(0,0,0,0),e.join(`
`)+`

`)];let i=r[n].length;return[new eo(new Ge(n,i,n,i),`
`+e.join(`
`))]}};var y0=class extends ue{render(){let e=this.props.language;return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"The user has a ",e.languageId," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",wi.forLanguage(e),".",vscpp("br",null),"Answer with a single ",e.languageId," code block.",vscpp("br",null),"If you modify existing code, you will use the ",Ki.begin(e)," and ",Ki.end(e)," markers.")}};var XM=class extends ue{async prepare(){return await ap(this.accessor,this.props.documentContext.document,this.props.documentContext.wholeRange)}render(e,r){if(Vr(this.props.documentContext.document.uri))throw Vo("InlineChatEditCodePrompt should not be used with a notebook!");if(e.structure){let o=r.endpoint.modelMaxPromptTokens/3*4,s=Yee(o,this.props.documentContext.document,e.wholeRange,e.structure);return this._renderWithSummarizedDocument(e,s)}let n=this.props.documentContext.language;return vscpp(vscppf,null,vscpp(rt,null,vscpp(y0,{language:n}),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),vscpp(GT,{documentContext:this.props.documentContext}),vscpp(pe,null,this.props.query))}_renderWithSummarizedDocument(e,r){let{language:n,document:i}=this.props.documentContext,{document:o,adjustedSelection:s}=r,a=o.transformer.fromOffsetRange(s),u=o.text.substring(0,s.start),c=o.text.substring(s.endExclusive),l=o.text.substring(s.start,s.endExclusive),d=u.trim().length>0||c.trim().length>0,p=`${u}$SELECTION_PLACEHOLDER$${c}`,f=h=>new UM(h,a,g=>g.trim()!=="$SELECTION_PLACEHOLDER$");return vscpp(vscppf,null,vscpp("replyInterpreter",{value:(h,g)=>new mA(h,g,o,this.props.documentContext.fileIndentInfo,f)}),vscpp(rt,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You are a world class expert in programming, and especially good at ",n.languageId,".",vscpp("br",null),"Source code is always contained in ``` blocks.",vscpp("br",null),"The user needs help to modify some code.",vscpp("br",null),d&&vscpp(vscppf,null,"The user includes existing code and marks with $SELECTION_PLACEHOLDER$ where the selected code should go.",vscpp("br",null)),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),vscpp(pe,null,"I have the following code in a file called `",i.uri.path,"`:",d&&vscpp(vscppf,null,vscpp(nn,{languageId:n.languageId,code:p}),vscpp("br",null)),d&&vscpp(vscppf,null,"The $SELECTION_PLACEHOLDER$ code is:",vscpp("br",null)),vscpp(nn,{languageId:n.languageId,code:l})),vscpp(pe,null,this.props.query,vscpp("br",null),d&&vscpp(vscppf,null,"The modified $SELECTION_PLACEHOLDER$ code with ``` is:")))}};var Kee=class extends ue{async prepare(){let e=this.accessor.get(ir);if(e.activeNotebookEditor?.notebook.uri.path!==this.props.documentContext.document.uri.path)return{variables:[]};let n=e.activeNotebookEditor?.notebook;return n?{variables:await this.accessor.get(eD).getVariables(n.uri)}:{variables:[]}}render(e){return vscpp(vscppf,null,e.variables.length!==0&&vscpp(vscppf,null,vscpp(pe,null,"This Jupyter Notebook contains the following variables:",e.variables.map(r=>vscpp(vscppf,null,vscpp(Ya,null,"Variable Name: ",r.name,vscpp("br",null),r.type&&vscpp(vscppf,null,"Variable Type: ",r.type,vscpp("br",null)),"Variable Value: ",r.value,vscpp("br",null)),vscpp("br",null))))))}},QM=class extends ue{render(){if(!Vr(this.props.documentContext.document.uri))throw Vo("InlineChatNotebookBasePrompt should be used only with a notebook!");let e=this.props.documentContext.language;return vscpp(vscppf,null,vscpp(rt,null,vscpp(y0,{language:e}),vscpp("br",null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If the Jupyter Notebook already contains variables, you should respect the name and value of the variables, and use them in your code when necessary.",vscpp("br",null),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),vscpp(qT,{documentContext:this.props.documentContext}),vscpp(Kee,{documentContext:this.props.documentContext}),vscpp(pe,null,this.props.query))}};var b0=class t{constructor(e,r,n){this.accessor=e;this.documentContext=r;this.editStrategy=n;this.replyInterpreterFactory=null}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let u=new t(r,a,i);return{intent:e,location:s,endpoint:o,promptCrafter:u,createReplyInterpreter:(c,l)=>u.createReplyInterpreter(c,l)}}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns[e.turns.length-2].request.message:void 0,l;Vr(this.documentContext.document.uri)?l=QM:l=this.editStrategy===4?KM:XM;let d=new qt(this.accessor,r,l,{documentContext:this.documentContext,query:u,history:c}),p=await d.render(i,s);return this.replyInterpreterFactory=d.getReplyInterpreterFactory(),this.selectionContextMetadata=d.getMeta(Lo),p}createReplyInterpreter(e,r){if(this.replyInterpreterFactory)return this.replyInterpreterFactory(e,r);if(!this.selectionContextMetadata)throw new Error("Could not create reply interpreter without selection context metadata");return r?new jM(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e):new Uy(this.accessor,this.selectionContextMetadata,this.documentContext,this.editStrategy,e)}};var x0=class extends ue{async prepare(){let e=Object.entries(lp).reduce((r,[n,i])=>{let o=Ri.getCommand(n,this.props.location)?.intent?.description;r+=`
* ${o}`;for(let s of i){let a=Ri.getCommand(s,this.props.location)?.intent?.description;r+=`
* ${a}`}return r},"");return{modelName:this.props.endpoint.model.toUpperCase(),commandDescriptions:e}}render(e){return vscpp(vscppf,null,"You can answer general programming questions and perform the following tasks: ",e.commandDescriptions,vscpp("br",null),"You use the ",e.modelName," version of OpenAI's GPT models.")}};var JM=class extends ue{async prepare(e){let r=await this.accessor.get(st).openTextDocument(this.props.variableValue),n=r.getText().replace(/\r/g,"");return{chunks:await PT(this.accessor,n,{uri:r.uri,shouldSemanticChunk:!0}),languageId:r.languageId,fullText:n}}async truncateMarkdownContent(e,r,n,i){let o=await PT(this.accessor,e,{uri:r.uri,shouldSemanticChunk:!0}),s=`

<!-- Content truncated -->`,a=this.accessor.get(qr),u=a.tokenize(s).length,c=Math.floor(n.tokenBudget/4)-u,l="",d=0,p=!1;for(let f of o){let m=a.tokenize(f.text);if(m.length+d>c){p=!0;break}l+=`

`+f.text,d+=m.length}return p&&(l+=s),i=l,i}render(e,r){if(!e.chunks.length)return;let n=HRe(e.fullText);return vscpp(pe,{priority:this.props.priority},"# ",this.props.variableName.toUpperCase()," CONTEXT",vscpp("br",null),n,e.languageId,vscpp("br",null),e.chunks.map(i=>vscpp(Ya,null,i.text)),vscpp("br",null),n)}};var Au=class extends ue{async prepare(){let{query:e,chatVariables:r}=this.props,n=[];return r.forEach((i,o)=>{let s=i.values.find(a=>a.level===Sse.Full)??i.values[0];if(s.kind==="github.docset")e=e.slice(0,i.range[0])+s.value+e.slice(i.range[1]);else{let a=this.uniqueFileName(i.name,r.slice(o+1));n.push({variableName:a,variableValue:s.value}),e=e.slice(0,i.range[0])+`[#${a}](#${a}-context)`+e.slice(i.range[1])}}),n.reverse(),{data:n,rewrittenMessage:e}}render(e,r){let n=[];for(let{variableName:i,variableValue:o}of e.data)o instanceof Gc?n.push(vscpp(JM,{variableName:i,variableValue:o})):n.push(vscpp(pe,{priority:this.props.priority&&this.props.priority-1},"# ",i.toUpperCase()," CONTEXT",vscpp("br",null),o));return vscpp(vscppf,null,...n,vscpp(pe,{priority:this.props.priority},e.rewrittenMessage))}uniqueFileName(e,r){let n=r.filter(i=>i.name===e).length;return n===0?e:`${e}-${n}`}};var ZM=class extends ue{async prepare(){let e="copilotchat.safetyPromptRewrite";return await this.accessor.get(kr).getTreatmentVariableAsync("vscode",e,!0)?{systemPromptExperiment:e}:{systemPromptExperiment:void 0}}render(e,r){let n=this.accessor.get(gt).OS,i=this.props.chatVariables.find(o=>o.name===kn.variableInfo.name);return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),vscpp(Mo,null),e.systemPromptExperiment?vscpp(u0,null):vscpp(Mt,null),vscpp("br",null),vscpp(x0,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The user is working on a ",n," machine. Please respond with system specific commands if applicable.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp(pi,null)),this.props.history&&vscpp(Vn,{priority:700,history:this.props.history}),!i&&vscpp(kn,{priority:800}),vscpp(Au,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var iS=class t{constructor(e,r=ZM,n){this.accessor=e;this.prompt=r;this.documentContext=n}static async createIntentInvocation(e,r,n,i){let{location:o,documentContext:s}=n,a=new t(r,i,s),u=await r.get(tt).getUserRequestEndpoint(o,e.id);return{intent:e,location:o,endpoint:u,promptCrafter:a}}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=new qt(this.accessor,r,this.prompt,{documentContext:this.documentContext,endpoint:r,query:u,history:c,chatVariables:n}),d=await l.render(i,s);for(let p of l.getReferences())i.report(new vo(p.anchor));return d}};var Wa=class t{constructor(){this.id=t.ID;this.locations=[1,2];this.description="Intent of this command is unclear or is not related to information technologies";this.commandInfo={hiddenFromUser:!0};this.intentDetectionInput={sampleQuestion:"Add a dog to this comment."}}static{this.ID="unknown"}static{this.Instance=new t}async invoke(e,r){if(r.location===1){let n=await e.get(tt).getUserRequestEndpoint(1,this.id);return b0.createIntentInvocation(this,e,r,2,n)}return iS.createIntentInvocation(this,e,r)}};var e9=class extends ue{render(){return vscpp(vscppf,null,vscpp(rt,{priority:1e3},vscpp("br",null),"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with \\"GitHub Copilot\\".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null),vscpp("br",null),vscpp("br",null),vscpp(x0,{location:this.props.location,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn."),vscpp(Vn,{priority:800,history:this.props.history}),vscpp(pe,{priority:900},"Write a short one-sentence question that the user can ask that naturally follows from the previous few questions and answers. It should not ask a question which is already answered in the conversation. It should be a question that you are capable of answering. Reply with only the text of the question and nothing else.",vscpp("br",null),vscpp(pi,null)))}};var oS=class{constructor(e,r){this.accessor=e;this.options=r;this.logger=e.get(Ee).getLogger("ConversationFollowUp")}async followUp(e,r,n,i){let o=i?{...i}:{};o.messageSource="chat.followup";let s=await this.accessor.get(tt).getNonUserRequestEndpoint(),{messages:a}=await us(this.accessor,s,e9,{history:e.copy().turns,endpoint:s,location:r}),u=await this.accessor.get(wr).fetchOne(a,void 0,n,r,s,{temperature:this.options.temperature,top_p:this.options.topP},o);if(u.type==="success"){let c=[];return u.value&&c.push(u.value.trim()),c}else return this.logger.error(`Failed to fetch followups because of response type (${u.type}) and reason (${u.reason})`,u),[]}};var Dot=["code","doc","edit","search","workspace","tests","fix","explain","terminal","unknown","api","newNotebook","new"],mo=new class{constructor(){this.intents=new Set}registerIntent(t){t.locations.every(e=>this.getIntent(t.id,e))||(this.intents.add(t),(!t.commandInfo||!t.commandInfo.hiddenFromUser)&&Ri.registerCommand({commandId:t.id,intent:t,details:t.description,locations:t.locations}))}getIntents(t){let e=r=>{let n=Dot.indexOf(r);return n===-1?Number.MAX_SAFE_INTEGER:n};return Array.from(this.intents.values()).filter(r=>r.locations.includes(t)).sort((r,n)=>e(r.id)-e(n.id))}getIntent(t,e){return this.getIntents(e).find(r=>r.id===t)}};var sS=class t{constructor(e,r){this.accessor=e;this.location=r;this.logger=e.get(Ee).getPromptResponseLogger("intent detection"),this.telemetryService=e.get(Ue),this.options=e.get(bs)}async detectIntent(e,r,n,i,o,s){let a;try{if(e){let m=e.selection,h=new Ge(new Rr(Math.max(m.start.line-5,0),0),new Rr(Math.min(m.end.line+5,e.document.lineCount),e.document.lineAt(m.end.line).text.length));a=e.document.getText(h)}}catch{}let u=e?.document.uri.path,c=this.createIntentDetectionPrompt(r,o,u,a),l=[{role:"system",content:c}];this.logger.logPrompt(l);let d=await this.accessor.get(tt).getNonUserRequestEndpoint(),p=await this.accessor.get(wr).fetchMany(l,void 0,n,this.location,d,{temperature:this.options.temperature,top_p:this.options.topP,stop:[";"],n:1},{messageSource:"chat.intentprompt"}),f=this.handleResult(p,i,r);return this.sendTelemetry(o,f?.id,e?.language.languageId,s),this.sendInternalTelemetry(r,o,u,a,f?.id,e?.language.languageId,s),f}handleResult(e,r,n){if(this.logger.logResponse(e),e.type!=="success"){this.sendPromptIntentErrorTelemetry(r,e);return}let i=e.value.map(u=>u.trimStart().split(`
`)[0].replace(/function id:|response:/i,"").trim()),o=i.map(u=>mo.getIntent(u,this.location)).filter(u=>u!==void 0&&u.id!==Wa.ID),s=t.pickMostFrequent(o);this.logger.info(`picked intent "${s?.id}" from ${JSON.stringify(e.value,null,"	")}`);let a=r.extendedBy({messageText:n,promptContext:i.join(),intent:s?.id||"unknown"});return this.telemetryService.sendRestrictedGHTelemetryEvent("conversation.promptIntent",a.raw.properties,a.raw.measurements),s}sendPromptIntentErrorTelemetry(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason});this.telemetryService.sendRestrictedGHTelemetryErrorEvent("conversation.promptIntentError",n.raw.properties,n.raw.measurements)}static pickMostFrequent(e){if(e.length===0)return;let r=new Map;for(let i of e){let o=r.get(i.id)??[0,i];o[0]+=1,r.set(i.id,o)}let[,n]=[...r.values()].reduce((i,o)=>i[0]>o[0]?i:o);return n}createIntentDetectionPrompt(e,r,n,i){let o=mo.getIntents(this.location),s=n?` in file ${n}`:"",a=i?`Current active file contains following excerpt:
\`\`\`
${i}
\`\`\``:"";return`
${Al()}

A software developer is using an AI chatbot in a code editor${s}.
${a}
The developer added the following request to the chat and your goal is to select a function to perform the request.
${r?`The developer probably wants Function Id '${r}', pick different only if you're certain.`:""}
Request: ${e}

Available functions:
${o.map(u=>`Function Id: ${u.id}
Function Description: ${u.intentDetectionInput.modelDescription||u.description}
`).join(`
`)}

Here are some examples to make the instructions clearer:
${o.map(u=>`Request: ${u.intentDetectionInput.sampleQuestion}
Response: ${u.id}
`).join(`
`)}
Request: ${e}
Response:
`.trim()}sendTelemetry(e,r,n,i){this.accessor.safeGet(Ue)?.sendMSFTTelemetryEvent("intentDetection",{chatLocation:Pt.toString(this.location),preferredIntent:e??"<none>",detectedIntent:r??"<none>",languageId:n??"<none>",isRerunWithoutIntentDetection:String(i)??"<none>"})}sendInternalTelemetry(e,r,n,i,o,s,a){i=i&&i.length<5e3?i:void 0,this.accessor.safeGet(Ue)?.sendInternalMSFTTelemetryEvent("intentDetection",{chatLocation:Pt.toString(this.location),request:e,preferredIntent:r??"<none>",filePath:n??"<none>",fileExerpt:i??"<none>",detectedIntent:o??"<none>",languageId:s??"<none>",isRerunWithoutIntentDetection:String(a)??"<none>"},{})}};var Xee;(e=>{function t(r,n,i){let{options:o,document:s,selection:a,visibleRanges:u}=n,c={insertSpaces:o.insertSpaces,tabSize:o.tabSize},l=Dc(s);return i||(u.length===1?i=u[0]:u.length>1?i=u[0].union(u[u.length-1]):i=a),{document:s,fileIndentInfo:c,language:l,selection:a,wholeRange:i}}e.fromEditor=t})(Xee||={});var aS=class{constructor(e,r,n){this.stopStartMappings=e;this.progress=r;this.processNonReportedDelta=n;this.stagedDeltasToApply=[];this.currentStartStop=void 0;this._appliedText="";this.nonReportedDeltas=[]}get appliedText(){return Promise.resolve(this._appliedText)}apply(e,r){return this.applyDelta(r)}applyDeltaToProgress(e){let r=e.codeVulnAnnotations?.map(n=>({title:n.details.type,description:n.details.description}));(e.text||r?.length)&&this.progress.report({content:e.text,vulnerabilities:r?.length?r:void 0})}updateStagedDeltasUpToIndex(e,r){let n=[];for(let i=0;i<e+r;){let o=this.stagedDeltasToApply.shift();if(o){if(i+o.text.length<=e)n.push(o);else if(i<e||i<e+r){if(i<e){let a={...o};a.text=o.text.substring(0,e-i),n.push(a)}let s={...o};s.text=o.text.substring(e-i+r),s.text&&this.stagedDeltasToApply.unshift(s)}i+=o.text.length}else break}return n}checkForKeyWords(e,r,n=this.applyDeltaToProgress.bind(this)){let i=this.stagedDeltasToApply.map(o=>o.text).join("")+r.text;for(let o of e){let s=i.indexOf(o);if(s===-1)continue;return this.stagedDeltasToApply.push(r),this.updateStagedDeltasUpToIndex(s,o.length).forEach(u=>n(u)),o}for(let o of e)for(let s=o.length-1;s>0;s--){let a=o.substring(0,s);if(i.endsWith(a)){this.stagedDeltasToApply=[...this.stagedDeltasToApply,r];return}}[...this.stagedDeltasToApply,r].forEach(o=>{n(o)}),this.stagedDeltasToApply=[]}postReportRecordProgress(e){this.nonReportedDeltas.push(e)}applyDelta(e){if(this._appliedText+=e.text,this.currentStartStop===void 0){let r=this.checkForKeyWords(this.stopStartMappings.map(n=>n.stop),e);r&&(this.currentStartStop=this.stopStartMappings.find(n=>n.stop===r));return}else{if(!this.currentStartStop.start)return;this.checkForKeyWords([this.currentStartStop.start],e,this.postReportRecordProgress.bind(this))&&(this.processNonReportedDelta&&this.processNonReportedDelta(this.nonReportedDeltas).forEach(i=>this.applyDeltaToProgress({text:i})),this.currentStartStop=void 0,this.stagedDeltasToApply.length>0&&this.applyDelta({text:""}))}}};function cS(){let t=gi(),e=Tr.createAndMarkAsIssued({messageId:t});return new Qee(e)}var Qee=class t{constructor(e){this.raw=e}get properties(){return this.raw.properties}get measurements(){return this.raw.measurements}markAsDisplayed(){this.raw.markAsDisplayed()}extendedBy(e,r){let n=this.raw.extendedBy(e,r);return new t(n)}};function t9(t,e,r,n,i,o,s){let a=t.turns[t.turns.length-1].contextParts.map(l=>l.kind).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),conversationId:e,uiKind:r,inputSources:a.join(",")},c={promptTokenLen:i,messageCharLen:n.length};return o&&(u.suggestion=o),s=s.extendedBy(u,c),s}function r9(t,e,r,n,i,o,s){i!==void 0&&(s=s.extendedBy({offTopic:i.toString()})),s=s.extendedBy({headerRequestId:r}),Jee(t,o,e,n,{},{},s)}function n9(t,e,r,n,i,o,s,a){let u=Zee(i);Jee(t,s,n,i,{source:"model",turnIndex:e.turns.length.toString(),conversationId:r,headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...u})},{messageCharLen:i.length,numCodeBlocks:u.length},a)}function i9(t,e,r,n,i,o,s,a){Jee(t,s,n,i,{source:"offTopic",turnIndex:e.turns.length.toString(),conversationId:r,userMessageId:o,uiKind:n},{messageCharLen:i.length},a)}function Jee(t,e,r,n,i,o,s){let a={...n?{messageText:n}:{},...i};e&&(i.languageId=e.languageId,o.documentLength=e.getText().length);let u=s.extendedBy(i,o),c=s.extendedBy(a),l=kot(r),d=t.get(Ue);return d.sendGHTelemetryEvent(`${l}.message`,u.raw.properties,u.raw.measurements),d.sendRestrictedGHTelemetryEvent(`${l}.messageText`,c.raw.properties,c.raw.measurements),u.raw}function o9(t,e,r,n,i){return uS(t,i,{suggestion:e,messageId:r,suggestionId:n},{},"conversation.suggestionShown")}function uS(t,e,r,n,i,o){let s=o??Tr.createAndMarkAsIssued();e&&(r.languageId=e.languageId,n.documentLength=e.getText().length);let a=s.extendedBy(r,n);return t.get(Ue).sendGHTelemetryEvent(i,a.properties,a.measurements),a}function s9(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});t.get(Ue).sendRestrictedGHTelemetryEvent("engine.messages",n.properties,n.measurements)}function kot(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}function Zee(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}var gA={errorDetails:{message:Pu.t("Cancelled")}},lS=class{constructor(e,r,n,i,o){this.options=r;this.username=n;this.conversationLogger=i;this.sessionId=o;this.inputPlaceholder=Pu.t("Ask Copilot or type / for commands");this._telemetryService=e.get(Ue),this._configurationService=e.get(ke),this.accessor=e,this.conversation=new za,this.intentDetector=new sS(e,2),this.conversation=this.initializeConversation(),this._conversationStore=e.get(c0)}get responder(){return{name:"GitHub Copilot"}}get requester(){return{name:this.username??Pu.t("You"),icon:this.username?Ct.parse(`https://avatars.githubusercontent.com/${this.username}`):void 0}}addHistory(e){let r;for(let n of e)if(n instanceof Ise)r=new Nc({message:n.prompt,type:"user"});else{let i=n.response.map(o=>o instanceof Ob?o.value.value:"content"in o?o.content:null).filter(o=>!!o).join("");if(r){let o=n.command||n.participant.name,s=Ri.getCommand(o,2);r.response={message:i,type:"model",name:s?.commandId||Wa.ID},n.result.errorDetails?n.result.errorDetails?.responseIsFiltered?r.status="filtered":n.result.errorDetails.message==="Cancelled"?r.status="cancelled":r.status="error":r.status="success",this.conversation.addTurn(r),r=void 0}}}initializeConversation(){return new za}async provideResponseWithProgress(e,r,n,i){await this.accessor.get(Wt).refreshRemoteContentExclusions();try{let o=this,s=!0,a=new class{markdown(p){return o.conversationLogger?.logProgress(new Ob(p),s),s=!1,r.markdown(p)}button(p){return r.button(p)}filetree(p,f){return r.filetree(p,f)}anchor(p,f){return r.anchor(p,f)}progress(p){return r.progress(p)}reference(p){return r.reference(p)}push(p){return r.push(p),this}report(p){"content"in p&&(o.conversationLogger?.logProgress(new Ob(p.content),s),s=!1),r.report(p)}},u=this.newTurn(e),c=cS();c.markAsDisplayed();let l=await this._provideResponseWithProgress(u,e,a,n,c,i),d=await u.intentInvocation?.commands?.(this.accessor,u);return d&&d.forEach(p=>r.button(p)),this.conversationLogger?.logResponse(l),this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{chatLocation:"panel",intent:u.intentInvocation?.intent.id??"",request:e.prompt,response:u.response?.message??"",sessionId:this.sessionId},{turnNumber:this.conversation.turns.length}),this._conversationStore.addConversation(u.requestId,this.conversation),{...l,metadata:{responseId:u.requestId}}}catch(o){throw this.conversationLogger?.logThrownError(o),o}}newTurn(e){let r={message:e.prompt,type:"user"},n=new Nc(r,this.sessionId);return this.conversation.addTurn(n),n}async _provideResponseWithProgress(e,r,n,i,o,s){let a=()=>{if(i.isCancellationRequested)return e.status="cancelled",!0};if(a())return gA;try{let u=this.accessor.get(ir).activeTextEditor,c=e.request.message;this.conversationLogger?.logRequest(e.request);let l={command:s.intentId?Ri.getCommand(s.intentId,2):void 0,restOfQuery:c};if(l.command?.intent&&!(l.command.intent.commandInfo?.allowsEmptyArgs??!0)&&!l.restOfQuery){let E=uPe(l.command.intent.id),x="";return E&&(x=`@${E.agent} `,E.command&&(x+=` /${E.command}`),x+=` ${l.command.details}`),e.response={message:Pu.t(`Please specify a question when using this command.

Usage: {0}`,x),type:"meta"},e.status="error",{errorDetails:{message:e.response.message,responseIsFiltered:!1,responseIsIncomplete:!1}}}let d=l?.command?.intent,p;if(d&&(e.request={message:l.restOfQuery||d.intentDetectionInput.sampleQuestion,type:"user"},this.conversationLogger?.logIntent(d.id,!0)),!d&&this.accessor.get(ke).getConfig(Le.ConversationIntentDetection)&&(d=p=await this.intentDetector.detectIntent(void 0,c,i,o,void 0,void 0),this.conversationLogger?.logIntent(d?.id,!1),a()))return gA;d??=Wa.Instance;let f=u?Xee.fromEditor(this.accessor,u):void 0,m=await d.invoke(this.accessor,{location:2,documentContext:f},void 0);if(a())return gA;e.intentInvocation=m,r=this.sanitizeVariables(r,e);let h=m.endpoint,g=[],v;try{let E={report(x){n.push(x)}};({messages:g,tokenCount:v}=await m.promptCrafter.buildPrompt(this.conversation,h,r.variables,E,o,i))}catch(E){if(wU(E))return gA;throw E}if(a())return gA;let _=this.conversation.getLatestTurn()?.contextParts.map(E=>E.kind)??[];if(this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionMessage",{intent:d?.id??"none",detectedIntent:p?.id??"none",contextTypes:_.join(","),query:l.restOfQuery},{}),e.chatMessages=g,this.fixMessageNames(d,g),this.conversationLogger?.logMessages(g),o=t9(this.conversation,this.sessionId,"conversationPanel",c,v,d?.id,o),i.isCancellationRequested)return e.status="cancelled",{errorDetails:{message:Pu.t("Cancelled")}};let y=m?.responseProcessor?m.responseProcessor(this.accessor,e,n,g,i):new aS([{stop:"[COMMANDS START]"}],n);return await this.fetchConversationResponse(e,h,c,g,i,n,y,o,{messageId:o.properties.messageId,messageSource:"chat.user"})}catch(u){this.accessor.get(Ee).defaultLogger.exception(u),this.accessor.get(Ue).sendGHTelemetryException(u,"Error"),this.conversationLogger?.logThrownError(u);let c=u.message;return e.status="error",e.response={message:c,type:"meta"},{errorDetails:{message:c,responseIsIncomplete:!0}}}}sanitizeVariables(e,r){let n=e.variables.filter(i=>{let o=!1;for(let s of i.values)s.value instanceof Gc&&this.accessor.get(Wt).isCopilotIgnored(s.value)&&(o=!0);return o&&(r.request.message=r.request.message.slice(0,i.range[0])+r.request.message.slice(i.range[1])),!o});return{...e,variables:n}}fixMessageNames(e,r){r.forEach(n=>{n.role==="system"&&(n.name=e?.id??Wa.ID)}),this._configurationService.getConfig(Le.UseMessageNames)||r.forEach(n=>n.name=void 0)}async fetchConversationResponse(e,r,n,i,o,s,a,u,c){let l=cS();e.requestId=l.properties.messageId;let d=Date.now(),p=0,f=new Set,m=await this.accessor.get(wr).fetchOne(i,async(S,O,U)=>{p===0&&(p=Date.now()),U.codeVulnAnnotations&&(!((S.match(/(^|\n)```/g)?.length??0)%2===1)||S.match(/(^|\n)```\w*\s*$/))&&(U.codeVulnAnnotations=void 0),U.codeVulnAnnotations&&(U.codeVulnAnnotations=U.codeVulnAnnotations.filter(W=>!f.has(W.details.type)),U.codeVulnAnnotations.forEach(W=>f.add(W.details.type))),a.apply(S,U)},o,2,r,{temperature:this.options.temperature,top_p:this.options.topP},c,{intent:!0});a.finish?.();let h=await a.appliedText,g=h?Zee(h):[],v=h?h.match(/\]\(command:_github\.copilot\.open/g):[],_=u.raw.displayedTime??d,y=["programming-related tasks","programming related questions","software development topics","related to programming","expertise is limited","sorry, i can't assist with that"],E=0;m.type==="success"&&!h.trim().includes(`
`)&&y.some(S=>h.toLowerCase().includes(S))&&(E=1);let x=this.accessor.get(qr);switch(this._telemetryService.sendMSFTTelemetryEvent("panel.request",{command:e.intentInvocation?.intent.id??"none",contextTypes:e.contextParts.map(S=>S.kind).join(",")??"none",promptTypes:i.map(S=>`${S.role}${S.name?`-${S.name}`:""}:${S.content.length}`).join(","),conversationId:this.sessionId,requestId:e.requestId,responseId:m.requestId,responseType:m.type,codeBlocks:g.join(","),model:r.model},{turn:this.conversation.turns.length,textBlocks:g.length?-1:h.split(/\n{2,}/).length??0,links:v?.length??0,maybeOffTopic:E,messageTokenCount:x.tokenLength(e.request.message),promptTokenCount:Cu(this.accessor,i),userPromptCount:i.filter(S=>S.role==="user").length,responseTokenCount:x.tokenLength(h)??0,timeToRequest:d-_,timeToFirstToken:p?p-_:-1,timeToComplete:Date.now()-_}),r9(this.accessor,"conversationPanel",m.requestId,n,m.type==="offTopic",this.accessor.get(ir).activeTextEditor?.document,u),m.type){case"success":return await this.processSuccessfulFetchResult(e,a,m.requestId,l);case"offTopic":return this.processOffTopicFetchResult(s,e,n,u);case"canceled":return e.status="cancelled",e.response={message:"Cancelled",type:"user"},{errorDetails:e.response};case"rateLimited":return e.status="error",{errorDetails:{message:Pu.t("Sorry, your request was rate-limited. Please wait and try sending again later."),responseIsFiltered:!0}};case"badRequest":case"failed":return e.status="error",e.response={message:m.reason,type:"server"},{errorDetails:e.response};case"filtered":return e.status="filtered",{errorDetails:{message:this.getFilteredMessage(m.category),responseIsFiltered:!0}};case"length":return e.status="error",{errorDetails:{message:Pu.t("Sorry, the response hit the length limit. Please rephrase your prompt.")}};case"unknown":return e.status="error",{errorDetails:{message:Pu.t("Sorry, no response was returned."),responseIsFiltered:!1}}}}getFilteredMessage(e){switch(e){case"snippy":return Pu.t({message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]});default:return Pu.t({message:"Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]})}}async processSuccessfulFetchResult(e,r,n,i){let o=await r.appliedText;return o.length>0?(e.status="success",e.response={message:o,type:"model"},i.markAsDisplayed(),n9(this.accessor,this.conversation,this.sessionId,"conversationPanel",o,n,this.accessor.get(ir).activeTextEditor?.document,i),{}):(e.status="error",e.response={message:Pu.t("The model unexpectedly did not return a response, which may indicate a service issue. Please report a bug."),type:"meta"},{errorDetails:e.response})}processOffTopicFetchResult(e,r,n,i){let o=cS();return e.markdown(this.options.rejectionMessage),r.response={message:this.options.rejectionMessage,type:"offtopic-detection"},r.status="off-topic",o.markAsDisplayed(),i9(this.accessor,this.conversation,this.sessionId,"conversationPanel",n,i.properties.messageId,this.accessor.get(ir).activeTextEditor?.document,o),{}}getLatestTurn(){return this.conversation.getLatestTurn()}removeRequest(e){let r=this.conversation.removeTurn(e);this._telemetryService.sendMSFTTelemetryEvent("panel.action.remove",{command:r?.intentInvocation?.intent.id,contextTypes:r?.contextParts.map(n=>n.kind).join(",")??"none",responseType:r?.response?.type,conversationId:this.sessionId,requestId:e})}};async function kPe(t,e,r,n,i){let o=r.getLatestTurn();if(!o)return[];let s={messageId:o.requestId},c=(o.status==="success"?await new oS(t,e).followUp(r,2,i,s):[]).map(f=>Lot(f,t,s));i.isCancellationRequested||n?.logFollowups(c);let l=o,d=[],p=l?.intentInvocation;return p?.followUps&&(d=await p.followUps(t,l)),c.concat(d)}function Lot(t,e,r){let n=r??{};return n.suggestionId=gi(),n.suggestionType="Follow-up from model",o9(e,n.suggestionType,n.messageId,n.suggestionId,e.get(ir).activeTextEditor?.document),{prompt:t,metadata:n}}var E0=we(require("vscode"));var dS=se("IFeedbackReporter");function LPe(t,e){let r=E0.window.activeTextEditor?.document,n=E0.window.activeTextEditor?.selection,i=e.result,o=t.get(Ue),s=i.metadata?.responseId&&t.get(c0).getConversation(i.metadata.responseId);switch(e.action.kind){case"copy":o.sendMSFTTelemetryEvent("panel.action.copy",{languageId:r?.languageId,requestId:i.metadata?.responseId},{codeBlockIndex:e.action.codeBlockIndex,copyType:e.action.copyKind,characterCount:e.action.copiedCharacters,lineCount:e.action.copiedText.split(`
`).length});break;case"insert":o.sendMSFTTelemetryEvent("panel.action.insert",{languageId:r?.languageId,requestId:i.metadata?.responseId},{codeBlockIndex:e.action.codeBlockIndex,characterCount:e.action.totalCharacters});break;case"runInTerminal":o.sendMSFTTelemetryEvent("panel.action.runinterminal",{languageId:r?.languageId,requestId:i.metadata?.responseId,blockLanguage:e.action.languageId},{codeBlockIndex:e.action.codeBlockIndex});break;case"followUp":break;case"bug":s&&t.get(dS)?.reportChat(s.getLatestTurn());break}if(e.action.kind==="copy"||e.action.kind==="insert"){let a={};a={totalCharacters:e.action.totalCharacters},e.action.kind==="copy"&&(a={...a,copiedCharacters:e.action.copiedCharacters}),r&&n&&(a={...a,cursorLocation:r.offsetAt(n.active)}),uS(t,E0.window.activeTextEditor?.document,{codeBlockIndex:e.action.codeBlockIndex.toString(),messageId:i.metadata?.responseId??""},a,e.action.kind==="copy"?"conversation.acceptedCopy":"conversation.acceptedInsert")}}function OPe(t,e){let r=E0.window.activeTextEditor?.document,n=e.result;t.get(Ue).sendMSFTTelemetryEvent("panel.action.vote",{languageId:r?.languageId,requestId:n.metadata.responseId},{direction:e.kind===E0.ChatResultFeedbackKind.Helpful?1:2}),uS(t,r,{rating:e.kind===E0.ChatResultFeedbackKind.Helpful?"positive":"negative",messageId:n.metadata.responseId},{},"conversation.messageRating")}var ps=we(require("vscode"));var qPe=we(require("vscode"));var UPe=we(require("util")),Ka=require("vscode");async function Oot(t){let e=t.get(ke),r=t.get(Jr),n=e.getConfig(Le.DebugTestOverrideProxyUrl);return r.extensionMode===_a.Test&&n.length>0?n:e.getConfig(Le.DebugChatOverrideProxyUrl)??e.getConfig(Le.DebugOverrideProxyUrl)}async function Mot(t,e){let r=await Oot(t);return r.length===0?(r="https://api.githubcopilot.com",`${r}${e}`):r}async function MPe(t){return Mot(t,"/chat/completions")}async function FPe(t,e){let n=(await t.get(Dt).getCopilotToken(t)).isInternal?t.get(ke).getConfig(Le.DebugOverrideChatMaxTokenNum):0;if(n>0)return n;let o=await t.get(kr).getTreatmentVariableAsync("vscode","copilotchat.panelGpt4Context",!0);switch(e){case"gpt-3.5-turbo":return 7168;case"gpt-4":return o||3072;default:return 7168}}var pS=class{constructor(e,r,n,i){this.url=e;this.disableSnippy=i;this._maxTokens=n,this.model=r}get modelMaxPromptTokens(){return this._maxTokens}interceptBody(e){e&&this.disableSnippy&&(e.snippy={enabled:!1},Object.keys(e).forEach(r=>{r.startsWith("intent")&&delete e[r]}))}getExtraHeaders(){let e={};return this.disableSnippy&&(e["Editor-Plugin-Version"]="simulation-tests-plugin/2",e["Editor-Version"]="simulation-tests-editor/1.85"),e}};var vA=new Map;async function BPe(t){t.get(Jr).subscriptions.push(new Ka.Disposable(()=>vA.forEach(r=>r.dispose()))),ete(t)}var Fot=["default","githubissue"],a9;async function ete(t){return a9||(a9=Uot(t)),a9.finally(()=>a9=void 0)}async function Uot(t){let e=t.get(Ee).getLogger("RemoteAgents");if(!t.get(ke).getConfig(Le.EnableRemoteAgents))return;let n=t.get(ke).getConfig(Le.AgentsEndpointUrl),i=new Set(vA.keys());try{let o=await t.get(Dt).getAnyGitHubToken(),a=await(await t.get(an).fetch(`${n}/agents`,{method:"GET",headers:{Authorization:UPe.format("Bearer %s",o),...t.get(gt).getEditorVersionHeaders()}})).text(),u;try{if(u=JSON.parse(a).agents,!Array.isArray(u))throw new Error("Expected 'agents' to be an array")}catch(c){e.warn(`Invalid remote agent response: ${a} (${c})`);return}for(let c of u)Fot.includes(c.slug.toLowerCase())||i.delete(c.slug)||vA.set(c.slug,qot(t,e,c,n))}catch(o){e.warn(`Failed to load remote slash commands: ${o}`)}for(let o of i)vA.get(o).dispose(),vA.delete(o)}function Bot(t,e){let r=[];for(let n of e.history)if(n.participant.name===t&&(n instanceof Ka.ChatRequestTurn&&r.push({role:"user",content:n.prompt}),n instanceof Ka.ChatResponseTurn)){let i=n.response.map(o=>o instanceof Ka.ChatResponseMarkdownPart?o.value.value:"content"in o?o.content:null).filter(o=>!!o).join("");r.push({role:"assistant",content:i})}return r}function qot(t,e,r,n){let i=Ka.chat.createChatParticipant(r.slug,async(o,s,a,u)=>{try{let c=new pS(`${n}/agents/${r.slug}?chat`,"gpt-3.5-turbo",4096),d=await t.get(WT).resolveVariablesInPrompt(o.prompt,o.variables),p=await t.get(wr).fetchMany([...Bot(r.slug,s),{role:"user",content:d.message,intent:"conversation"}],async(f,m,h)=>{a.markdown(h.text)},u,2,c,{secretKey:await t.get(Dt).getAnyGitHubToken()});return p.type!=="success"?(e.warn(`Bad response from /agents/${r.slug}: ${p.type} ${p.reason}`),p.reason.includes("400 no docs found")?{errorDetails:{message:"No docs found"}}:{errorDetails:{message:p.reason}}):{}}catch(c){return e.warn(`/agents/${r.slug} failed: ${c}`),{}}});return i.description=r.description,i.fullName=r.name,i.iconPath=Gc.parse(r.avatar_url),i.participantVariableProvider={triggerCharacters:["#"],provider:{async provideCompletionItems(o,s){return(await Got(t,r.slug,o,e,s)).map(u=>{let c="#"+u.replace(/ /g,""),l=new Ka.ChatCompletionItem("#"+u,[{value:c,level:Ka.ChatVariableLevel.Full,description:"",kind:"github.docset"}]);return l.insertText=c,l})}}},i}async function Got(t,e,r,n,i){let a={url:`${t.get(ke).getConfig(Le.AgentsEndpointUrl)}/agents/autocomplete`,modelMaxPromptTokens:0};r.startsWith("#")&&(r=r.substring(1));let c=await t.get(Dt).getAnyGitHubToken(),d=await(await qm(t,a,c??"",void 0,gi(),{agents:[e],query:r},i)).text();try{let p=JSON.parse(d);if(p===null)return[];if(!Array.isArray(p))throw new Error("Expected array");return p.map(f=>f.metadata.display_name)}catch(p){return n.warn(`Invalid autocomplete response (${p.toString()}): ${d}`),[]}}var c9=class{constructor(e,r){this.accessor=e;this.options=r}getLastSession(){return this.lastSession}async prepareSession(e){if(!this.username){let o=await Bc(this.accessor.get(ke));this.username=o?.account?.label}ete(this.accessor);let r=gi(),n=new zT(this.accessor,()=>qPe.window.createOutputChannel("GitHub Copilot Chat Conversation",{log:!0})),i=new lS(this.accessor,this.options,this.username,n,r);return this.lastSession=i,i}};function u9(){return"https://aka.ms/microsoft/vscode-copilot-release"}var l9=class{constructor(e){this.accessor=e;this.hasShownWelcomeMessage=!1}async provideWelcomeMessage(e){let n=(await Bc(this.accessor.get(ke)))?.account?.label,i=u9(),s=this.accessor.get(ke).getConfig(Le.WelcomeMessage),a=ps.l10n.t({message:"I'm powered by AI, so surprises and mistakes are possible. Make sure to verify any generated code or suggestions, and [share feedback]({0}) so that we can learn and improve. Check out the [{1} documentation]({2}) to learn more.",args:[i,"Copilot","https://code.visualstudio.com/docs/editor/github-copilot#_chat-view"],comment:["{Locked=']({'}","the [text](url) is a markdown link syntax. Do not add any additional spaces between ] and ("]}),u=n?" **@"+n+"**":"";if(s==="never"||this.hasShownWelcomeMessage&&s==="first")return[ps.l10n.t("Hi{0}, how can I help you?",u)];this.hasShownWelcomeMessage=!0;let c="workbench.action.quickchat.launchInlineChat",l=ps.window.activeNotebookEditor||ps.window.activeTextEditor?ps.l10n.t("You can also [start an inline chat session]({0}).",`command:${c}`):"",d=new ps.MarkdownString(ps.l10n.t("Welcome,{0}, I'm your {1} and I'm here to help you get things done faster. {2}",u,"Copilot",l));return d.isTrusted={enabledCommands:[c]},[d,a]}provideSampleQuestions(e){let r=ps.window.activeNotebookEditor||ps.window.activeTextEditor?Hot():GPe([["","help",ps.l10n.t("What can you do?")]]);return jot([...r],this.accessor,"welcome"),r}};function Hot(){let t="workspace";return GPe([[t,"fix",ps.l10n.t("the problems in my code")],[t,"tests",ps.l10n.t("add unit tests for my code")],[t,"explain",ps.l10n.t("how the selected code works")]])}function GPe(t){return t.map(([e,r,n])=>({prompt:"",participant:e,command:r,label:`/${r} ${n}`}))}function jot(t,e,r){t.map(n=>{o9(e,`@${n.participant} /${n.command} ${n.prompt}`,r,"",ps.window.activeTextEditor?.document)})}var d9=class{constructor(e){this.accessor=e}register(e){let r=new tte(this.accessor,e);return r.register(),r}},tte=class{constructor(e,r){this.accessor=e;this.options=r;this._disposables=new $r;this._logger=new zT(this.accessor,()=>this._disposables.add(Hs.window.createOutputChannel("GitHub Copilot Chat Conversation","log")))}dispose(){this._disposables.dispose()}register(){this._disposables.add(this.registerWorkspaceAgent()),this._disposables.add(this.registerVSCodeAgent()),this._disposables.add(this.registerTerminalAgent()),this._disposables.add(this.registerDefaultAgent())}createAgent(e,r){let n=Hs.chat.createChatParticipant(e,this.getChatParticipantHandler(r));return n.onDidPerformAction(i=>LPe(this.accessor,i)),n.onDidReceiveFeedback(i=>OPe(this.accessor,i)),n.supportIssueReporting=this.accessor.get(ke).getConfig(Le.DebugReportFeedback),n.followupProvider={provideFollowups:async(i,o)=>{let s=i.metadata?.responseId&&this.accessor.get(c0).getConversation(i.metadata.responseId);return s?await kPe(this.accessor,this.options,s,this._logger,o):[]}},n}registerWorkspaceAgent(){let e=this.createAgent(Qoe,ky);return e.description="Ask about your workspace",e.iconPath=new Hs.ThemeIcon("code"),e.commandProvider={provideCommands:r=>this.getCommands(lp.workspace)},e.isSecondary=!0,e.sampleRequest=Ri.getCommand("workspace",2)?.intent?.commandInfo?.sampleRequest,e}registerVSCodeAgent(){let e=this.createAgent(Joe,CM);e.description="Ask about VS Code",e.commandProvider={provideCommands:n=>this.getCommands(lp.vscode)};let r=Hs.env.appName.includes("Insiders")||Hs.env.appName.includes("OSS");return e.iconPath=Ct.joinPath(this.accessor.get(Jr).extensionUri,"assets",r?"vscode-chat-avatar-insiders.svg":"vscode-chat-avatar-stable.svg"),e.sampleRequest=Ri.getCommand("vscode",2)?.intent?.commandInfo?.sampleRequest,e}registerTerminalAgent(){let e=this.createAgent(yN,"terminal");return e.description="Ask how to do something in the terminal",e.iconPath=new Hs.ThemeIcon("terminal"),e.commandProvider={provideCommands:r=>this.getCommands(lp.terminal)},e.sampleRequest=Ri.getCommand("terminal",2)?.intent?.commandInfo?.sampleRequest,e}registerDefaultAgent(){let e=this.createAgent("copilot","");e.isDefault=!0,e.helpTextPrefix=Hs.l10n.t("You can ask me general programming questions, or chat with the following agents which have specialized expertise and can perform actions:");let r=Hs.l10n.t({message:`To have a great conversation, ask me questions as if I was a real programmer:

* **Show me the code** you want to talk about by having the files open and selecting the most important lines.
* **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
* **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.

You can also ask me questions about your editor selection by [starting an inline chat session](command:inlineChat.start).

Learn more about [GitHub Copilot](https://docs.github.com/copilot/getting-started-with-github-copilot?tool=vscode) in [Visual Studio Code](https://code.visualstudio.com/docs/editor/artificial-intelligence).`,comment:"{Locked='](command:inlineChat.start)'}"}),n=new Hs.MarkdownString(r);return n.isTrusted={enabledCommands:["inlineChat.start"]},e.helpTextPostfix=n,e.helpTextVariablesPrefix=Hs.l10n.t("You can also help me understand your question by using the following variables to give me extra context:"),e.fullName="GitHub Copilot",e.description="",e.welcomeMessageProvider=new l9(this.accessor),e}getCommands(e){let r=[];return e.forEach(n=>{let o=this.accessor.get(jT).getCommand(n,2)?.intent;o&&r.push({name:o.id,description:o.description,isSticky2:o.commandInfo?.shouldRepopulate?{isSticky:!0,placeholder:o.commandInfo?.followupPlaceholder}:void 0,sampleRequest:o.commandInfo?.sampleRequest})}),r}getChatParticipantHandler(e){return async(r,n,i,o)=>{let s=new lS(this.accessor,this.options,"",this._logger,"");s.addHistory("history2"in n?n.history2:n.history);let a=r.command||e;return await s.provideResponseWithProgress(r,i,o,{intentId:a})}}};var ge=we(require("vscode"));var Fo=require("vscode");function HPe(t){if(typeof t!="string")throw new TypeError("Argument must be a string.");if(!t)return t;let e=t.startsWith("!"),r=e?t.slice(1):t,n=r,i=!1;switch(r[0]==="/"&&(i=!0,n=r.slice(1)),n[0]){case"*":r[1]!=="*"&&(n="**/"+n);break;default:if((!i&&!n.includes("/")||n.endsWith("/"))&&(n="**/"+n),n.endsWith("*")||n.endsWith("?"))break;/\.[a-z\d_-]+$/.test(n)||(n.endsWith("/")||(n+="/"),n+="**")}return e?"!"+n:n}var eNe=we(JPe()),sa=require("path");var _A=class{constructor(){this._ignoreMap=new Map;this._ignoreCache=new Map;this._searchRankCache=null}setIgnoreFile(e,r,n){let i="";e&&(i=(0,sa.relative)(e.fsPath,(0,sa.dirname)(r.fsPath)),i.startsWith("..")&&(i="")),this._ignoreMap.set(r.fsPath,{ignore:(0,eNe.default)().add(n),patterns:yb(n).filter(o=>o.trim()&&!o.startsWith("#")).map(HPe).map(o=>i?sa.posix.join(i,o):o)}),this._searchRankCache=null,this._ignoreCache.clear()}removeIgnoreFile(e){this._ignoreMap.delete(e.fsPath),this._searchRankCache=null,this._ignoreCache.clear()}removeWorkspace(e){let r=0;for(let n of this._ignoreMap.keys())ZPe(e.fsPath,n)&&(this._ignoreMap.delete(n),r+=1);r>0&&(this._searchRankCache=null,this._ignoreCache.clear())}asMinimatchPatterns(){return[...this._ignoreMap.values()].flatMap(e=>e.patterns)}isIgnored(e){if(this._ignoreMap.size===0)return!1;let r=e.fsPath;if(this._ignoreCache.has(r))return this._ignoreCache.get(r);let n=0,i={ignored:!1,unignored:!1};try{let o=this._searchRank;for(let s of o){n+=1;let a=(0,sa.dirname)(s),u=(0,sa.relative)(a,r);if(!u.startsWith("..")&&a!==r&&ZPe(a,r)){let c=this._ignoreMap.get(s);if(!c)throw new Error(`No ignore patterns found for ${s}`);if(i=c.ignore.test(u),i.ignored||i.unignored)break}}return this._ignoreCache.set(r,i.ignored),i.ignored}catch{return!1}}get _searchRank(){if(this._searchRankCache!==null)return this._searchRankCache;let e={},r=n=>n.split(sa.sep).length;return this._searchRankCache=[...this._ignoreMap.keys()].sort((n,i)=>(e[i]||=r(i))-(e[n]||=r(n)))}};function ZPe(t,e){return t===e?!0:(t.charAt(t.length-1)!==sa.sep&&(t+=sa.sep),(0,sa.normalize)(e).startsWith((0,sa.normalize)(t)))}var xNe=we(fNe(),1);var bA=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var mst={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},xA=t=>t.replace(/[[\]\\-]/g,"\\$&"),hst=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),mNe=t=>t.join(""),hNe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,a=!1,u=!1,c=!1,l=r,d="";e:for(;o<t.length;){let h=t.charAt(o);if((h==="!"||h==="^")&&o===r+1){c=!0,o++;continue}if(h==="]"&&s&&!u){l=o+1;break}if(s=!0,h==="\\"&&!u){u=!0,o++;continue}if(h==="["&&!u){for(let[g,[v,_,y]]of Object.entries(mst))if(t.startsWith(g,o)){if(d)return["$.",!1,t.length-r,!0];o+=g.length,y?i.push(v):n.push(v),a=a||_;continue e}}if(u=!1,d){h>d?n.push(xA(d)+"-"+xA(h)):h===d&&n.push(xA(h)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(xA(h+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=h,o+=2;continue}n.push(xA(h)),o++}if(l<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!c){let h=n[0].length===2?n[0].slice(-1):n[0];return[hst(h),!1,l-r,!1]}let p="["+(c?"^":"")+mNe(n)+"]",f="["+(c?"":"^")+mNe(i)+"]";return[n.length&&i.length?"("+p+"|"+f+")":n.length?p:f,a,l-r,!0]};var T0=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var gst=new Set(["!","?","+","*","@"]),gNe=t=>gst.has(t),vst="(?!(?:^|/)\\.\\.?(?:$|/))",f9="(?!\\.)",_st=new Set(["[","."]),yst=new Set(["..","."]),bst=new Set("().*{}+?[]^$\\!"),xst=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ute="[^/]",vNe=ute+"*?",_Ne=ute+"+?",fS=class t{type;#r;#i;#p=!1;#t=[];#c;#s;#m;#a=!1;#n;#e;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#i=!0),this.#c=r,this.#r=this.#c?this.#c.#r:this,this.#n=this.#r===this?n:this.#r.#n,this.#m=this.#r===this?[]:this.#r.#m,e==="!"&&!this.#r.#a&&this.#m.push(this),this.#s=this.#c?this.#c.#t.length:0}get hasMagic(){if(this.#i!==void 0)return this.#i;for(let e of this.#t)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#i=!0;return this.#i}toString(){return this.#e!==void 0?this.#e:this.type?this.#e=this.type+"("+this.#t.map(e=>String(e)).join("|")+")":this.#e=this.#t.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#m.pop();){if(e.type!=="!")continue;let r=e,n=r.#c;for(;n;){for(let i=r.#s+1;!n.type&&i<n.#t.length;i++)for(let o of e.#t){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#t[i])}r=n,n=r.#c}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#c===this))throw new Error("invalid part: "+r);this.#t.push(r)}}toJSON(){let e=this.type===null?this.#t.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#t.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#a&&this.#c?.type==="!")&&e.push({}),e}isStart(){if(this.#r===this)return!0;if(!this.#c?.isStart())return!1;if(this.#s===0)return!0;let e=this.#c;for(let r=0;r<this.#s;r++){let n=e.#t[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#r===this||this.#c?.type==="!")return!0;if(!this.#c?.isEnd())return!1;if(!this.type)return this.#c?.isEnd();let e=this.#c?this.#c.#t.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#t)r.copyIn(n);return r}static#l(e,r,n,i){let o=!1,s=!1,a=-1,u=!1;if(r.type===null){let f=n,m="";for(;f<e.length;){let h=e.charAt(f++);if(o||h==="\\"){o=!o,m+=h;continue}if(s){f===a+1?(h==="^"||h==="!")&&(u=!0):h==="]"&&!(f===a+2&&u)&&(s=!1),m+=h;continue}else if(h==="["){s=!0,a=f,u=!1,m+=h;continue}if(!i.noext&&gNe(h)&&e.charAt(f)==="("){r.push(m),m="";let g=new t(h,r);f=t.#l(e,g,f,i),r.push(g);continue}m+=h}return r.push(m),f}let c=n+1,l=new t(null,r),d=[],p="";for(;c<e.length;){let f=e.charAt(c++);if(o||f==="\\"){o=!o,p+=f;continue}if(s){c===a+1?(f==="^"||f==="!")&&(u=!0):f==="]"&&!(c===a+2&&u)&&(s=!1),p+=f;continue}else if(f==="["){s=!0,a=c,u=!1,p+=f;continue}if(gNe(f)&&e.charAt(c)==="("){l.push(p),p="";let m=new t(f,l);l.push(m),c=t.#l(e,m,c,i);continue}if(f==="|"){l.push(p),p="",d.push(l),l=new t(null,r);continue}if(f===")")return p===""&&r.#t.length===0&&(r.#d=!0),l.push(p),p="",r.push(...d,l),c;p+=f}return r.type=null,r.#i=void 0,r.#t=[e.substring(n-1)],c}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#l(e,n,0,r),n}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#i||this.#n.nocase&&!this.#n.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#n.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#n.dot;if(this.#r===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),c=this.#t.map(f=>{let[m,h,g,v]=typeof f=="string"?t.#v(f,this.#i,u):f.toRegExpSource(e);return this.#i=this.#i||g,this.#p=this.#p||v,m}).join(""),l="";if(this.isStart()&&typeof this.#t[0]=="string"&&!(this.#t.length===1&&yst.has(this.#t[0]))){let m=_st,h=r&&m.has(c.charAt(0))||c.startsWith("\\.")&&m.has(c.charAt(2))||c.startsWith("\\.\\.")&&m.has(c.charAt(4)),g=!r&&!e&&m.has(c.charAt(0));l=h?vst:g?f9:""}let d="";return this.isEnd()&&this.#r.#a&&this.#c?.type==="!"&&(d="(?:$|\\/)"),[l+c+d,T0(c),this.#i=!!this.#i,this.#p]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#u(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#t=[u],this.type=null,this.#i=void 0,[u,T0(this.toString()),!1,!1]}let s=!n||e||r||!f9?"":this.#u(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#d)a=(this.isStart()&&!r?f9:"")+_Ne;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?f9:"")+vNe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+u}return[a,T0(o),this.#i=!!this.#i,this.#p]}#u(e){return this.#t.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#p=this.#p||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#v(e,r,n=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let u=e.charAt(a);if(i){i=!1,o+=(bst.has(u)?"\\":"")+u;continue}if(u==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[c,l,d,p]=hNe(e,a);if(d){o+=c,s=s||l,a+=d-1,r=r||p;continue}}if(u==="*"){n&&e==="*"?o+=_Ne:o+=vNe,r=!0;continue}if(u==="?"){o+=ute,r=!0;continue}o+=xst(u)}return[o,T0(e),!!r,s]}};var lte=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var ms=(t,e,r={})=>(bA(e),!r.nocomment&&e.charAt(0)==="#"?!1:new mS(e,r).match(t)),Est=/^\*+([^+@!?\*\[\(]*)$/,Tst=t=>e=>!e.startsWith(".")&&e.endsWith(t),Sst=t=>e=>e.endsWith(t),Ist=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Cst=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),wst=/^\*+\.\*+$/,Rst=t=>!t.startsWith(".")&&t.includes("."),Ast=t=>t!=="."&&t!==".."&&t.includes("."),Pst=/^\.\*+$/,Nst=t=>t!=="."&&t!==".."&&t.startsWith("."),Dst=/^\*+$/,kst=t=>t.length!==0&&!t.startsWith("."),Lst=t=>t.length!==0&&t!=="."&&t!=="..",Ost=/^\?+([^+@!?\*\[\(]*)?$/,Mst=([t,e=""])=>{let r=ENe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},Fst=([t,e=""])=>{let r=TNe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},Ust=([t,e=""])=>{let r=TNe([t]);return e?n=>r(n)&&n.endsWith(e):r},Bst=([t,e=""])=>{let r=ENe([t]);return e?n=>r(n)&&n.endsWith(e):r},ENe=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},TNe=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},SNe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",yNe={win32:{sep:"\\"},posix:{sep:"/"}},qst=SNe==="win32"?yNe.win32.sep:yNe.posix.sep;ms.sep=qst;var Du=Symbol("globstar **");ms.GLOBSTAR=Du;var Gst="[^/]",Hst=Gst+"*?",jst="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Vst="(?:(?!(?:\\/|^)\\.).)*?",zst=(t,e={})=>r=>ms(r,t,e);ms.filter=zst;var Nu=(t,e={})=>Object.assign({},t,e),Yst=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ms;let e=ms;return Object.assign((n,i,o={})=>e(n,i,Nu(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Nu(t,o))}static defaults(i){return e.defaults(Nu(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Nu(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Nu(t,o))}},unescape:(n,i={})=>e.unescape(n,Nu(t,i)),escape:(n,i={})=>e.escape(n,Nu(t,i)),filter:(n,i={})=>e.filter(n,Nu(t,i)),defaults:n=>e.defaults(Nu(t,n)),makeRe:(n,i={})=>e.makeRe(n,Nu(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Nu(t,i)),match:(n,i,o={})=>e.match(n,i,Nu(t,o)),sep:e.sep,GLOBSTAR:Du})};ms.defaults=Yst;var INe=(t,e={})=>(bA(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,xNe.default)(t));ms.braceExpand=INe;var $st=(t,e={})=>new mS(t,e).makeRe();ms.makeRe=$st;var Wst=(t,e,r={})=>{let n=new mS(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ms.match=Wst;var bNe=/[?*]|[+@!]\(.*?\)|\[|\]/,Kst=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),mS=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){bA(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||SNe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!bNe.test(o[2]))&&!bNe.test(o[3]),c=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(l=>this.parse(l))];if(c)return[o[0],...o.slice(1).map(l=>this.parse(l))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let a=n[i+1],u=n[i+2],c=n[i+3];if(a!==".."||!u||u==="."||u===".."||!c||c==="."||c==="..")continue;r=!0,n.splice(i,1);let l=n.slice(0);l[i]="**",e.push(l),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let a=n[s];s===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(a==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),g=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),v=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),_=!v&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),y=g?3:h?0:void 0,E=_?3:v?0:void 0;if(typeof y=="number"&&typeof E=="number"){let[x,S]=[e[y],r[E]];x.toLowerCase()===S.toLowerCase()&&(r[E]=x,E>y?r=r.slice(E):y>E&&(e=e.slice(y)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,a=0,u=e.length,c=r.length;s<u&&a<c;s++,a++){this.debug("matchOne loop");var l=r[a],d=e[s];if(this.debug(r,l,d),l===!1)return!1;if(l===Du){this.debug("GLOBSTAR",[r,l,d]);var p=s,f=a+1;if(f===c){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;p<u;){var m=e[p];if(this.debug(`
globstar while`,e,p,r,f,m),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,u,m),!0;if(m==="."||m===".."||!i.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===u))}let h;if(typeof l=="string"?(h=d===l,this.debug("string match",l,d,h)):(h=l.test(d),this.debug("pattern match",l,d,h)),!h)return!1}if(s===u&&a===c)return!0;if(s===u)return n;if(a===c)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return INe(this.pattern,this.options)}parse(e){bA(e);let r=this.options;if(e==="**")return Du;if(e==="")return"";let n,i=null;(n=e.match(Dst))?i=r.dot?Lst:kst:(n=e.match(Est))?i=(r.nocase?r.dot?Cst:Ist:r.dot?Sst:Tst)(n[1]):(n=e.match(Ost))?i=(r.nocase?r.dot?Fst:Mst:r.dot?Ust:Bst)(n):(n=e.match(wst))?i=r.dot?Ast:Rst:(n=e.match(Pst))&&(i=Nst);let o=fS.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?Hst:r.dot?jst:Vst,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let c=u.map(l=>{if(l instanceof RegExp)for(let d of l.flags.split(""))i.add(d);return typeof l=="string"?Kst(l):l===Du?Du:l._src});return c.forEach((l,d)=>{let p=c[d+1],f=c[d-1];l!==Du||f===Du||(f===void 0?p!==void 0&&p!==Du?c[d+1]="(?:\\/|"+n+"\\/)?"+p:c[d]=n:p===void 0?c[d-1]=f+"(?:\\/|"+n+")?":p!==Du&&(c[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+p,c[d+1]=Du))}),c.filter(l=>l!==Du).join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let u=o[a],c=i;if(n.matchBase&&u.length===1&&(c=[s]),this.matchOne(c,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ms.defaults(e).Minimatch}};ms.AST=fS;ms.Minimatch=mS;ms.escape=lte;ms.unescape=T0;var m9=class t{constructor(e){this.accessor=e;this._contentExclusionCache=new Map;this._contentExclusionFetchPromise=void 0;this._disposables=[];this.refreshContentExclusionRules(!0);let r=new BP;this._disposables.push(r),r.cancelAndSet(async()=>{await this.refreshContentExclusionRules(!0)},30*60*1e3)}static{this.CONTENT_EXCLUSION_ENDPOINT="https://api.github.com/copilot_internal/content_exclusion"}isIgnored(e){this.refreshContentExclusionRules();for(let n of this._contentExclusionCache.values())for(let i of n)if(i=i.startsWith("/")?`**${i}`:i,ms(e.path,i,{nocase:!0,matchBase:!0,nonegate:!0}))return this.accessor.get(Ee).defaultLogger.debug(`File ${e.path} is ignored by content exclusion rule ${i}`),!0;let r=this.accessor.get(xs).getRepository(e);for(let n of r?.remoteFetchUrls??[])if(n&&!this._contentExclusionCache.has(n))return this.accessor.get(Ee).defaultLogger.error(`File ${e.path} is ignored by content exclusion rule (cache not ready)`),!0;return!1}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[],this._contentExclusionCache.clear()}shouldFetchContentExclusionRules(){let e=this.getRemoteFetchUrls();if(e.length===0)return!1;if(e.length!==this._contentExclusionCache.size)return!0;for(let r of e)if(!this._contentExclusionCache.has(r))return!0;return!1}async refreshContentExclusionRules(e){if(!(!e&&!this.shouldFetchContentExclusionRules()))return this._contentExclusionFetchPromise||(this._contentExclusionFetchPromise=this.contentExclusionRequest()),this._contentExclusionFetchPromise}async contentExclusionRequest(){let e=this.accessor.get(an),r=await this.accessor.get(Dt).getAnyGitHubToken();await this.accessor.get(xs).openWorkspaceRepositories();let n=this.getRemoteFetchUrls();for(let i=0;i<n.length;i+=10){let o=n.slice(i,i+10),s=o.join(","),a=new URL(t.CONTENT_EXCLUSION_ENDPOINT);a.searchParams.set("repos",s);let u=await e.fetch(a.toString(),{headers:{Authorization:`token ${r}`}});if(!u.ok)continue;let c=await u.json();for(let l=0;l<c.length;l++){let d=c[l].rules.map(f=>f.paths).flat(),p=o[l];this._contentExclusionCache.set(p,d)}this._contentExclusionFetchPromise=void 0}}getRemoteFetchUrls(){let r=this.accessor.get(xs).repositories;return r?Br(r.map(n=>n?.remoteFetchUrls).flat()):[]}};var h9=".copilotignore",g9=".gitignore";var v9=class{constructor(e,r,n){this.accessor=e;this.searchService=r;this.fs=n;this._gitIgnoreFiles=new _A;this._copilotIgnoreFiles=new _A;this._copilotIgnoreEnabled=!1;this._onDidChangeCopilotIgnoreEnablement=new ho;this._disposables=[];this.onDidChangeCopilotIgnoreEnablement=this._onDidChangeCopilotIgnoreEnablement.event;this._filesIgnoredThisSession={"Remote Content Exclusions":new Set,"Copilot Ignore File":new Set,"Git Ignore File ":new Set},this._disposables.push(this._onDidChangeCopilotIgnoreEnablement),this._disposables.push(e.get(ys).onCopilotToken(async i=>{if(!this._copilotIgnoreEnabled)return;let o=i.envelope.copilotignore_enabled??!1;this._copilotIgnoreEnabled!==o&&this._onDidChangeCopilotIgnoreEnablement.fire(o),this._copilotIgnoreEnabled=o,this._copilotIgnoreEnabled===!1&&this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._copilotIgnoreEnabled===!0&&!this._remoteContentExclusions&&(this._remoteContentExclusions=new m9(e))}))}dispose(){this._disposables.forEach(e=>e.dispose()),this._remoteContentExclusions&&(this._remoteContentExclusions.dispose(),this._remoteContentExclusions=void 0),this._disposables=[]}isIgnored(e,r){let n=this._gitIgnoreFiles.isIgnored(e),i=!1;if(this._copilotIgnoreEnabled){let o=this._copilotIgnoreFiles.isIgnored(e);i=o||(this._remoteContentExclusions?.isIgnored(e)??!1),i&&(o?this._filesIgnoredThisSession["Copilot Ignore File"].add(e.toString()):this._filesIgnoredThisSession["Remote Content Exclusions"].add(e.toString()))}return!r||r.includeGitIgnore&&r.includeCopilotIgnore?n||i:r.includeGitIgnore&&!r.includeCopilotIgnore?n:!r.includeGitIgnore&&r.includeCopilotIgnore?i:!1}isCopilotIgnored(e){return this.isIgnored(e,{includeCopilotIgnore:!0,includeGitIgnore:!1})}isGitIgnored(e){return this.isIgnored(e,{includeCopilotIgnore:!1,includeGitIgnore:!0})}asMinimatchPattern(e){let r=[];e.includeCopilotIgnore&&r.push(this._copilotIgnoreFiles.asMinimatchPatterns()),e.includeGitIgnore&&r.push(this._gitIgnoreFiles.asMinimatchPatterns());let n=r.flat();if(n.length!==0)return n.length===1?n[0]:`{${n.join(",")}}`}init(){return this._init??=(async()=>{for(let e of this.accessor.get(st).getWorkspaceFolders())await this.addWorkspace(e);await this._remoteContentExclusions?.refreshContentExclusionRules(!0)})(),this._init}async refreshRemoteContentExclusions(){return this._remoteContentExclusions?.refreshContentExclusionRules(!1)}sessionInfo(){let e=`# Content Exclusion Session Info

`;for(let n in this._filesIgnoredThisSession){let i=this._filesIgnoredThisSession[n];i.size>0&&(e+=`## Files ignored this session from ${n}:

${Array.from(i).join(`
`)}`,e+=`

`)}let r=this.asMinimatchPattern({includeGitIgnore:!0,includeCopilotIgnore:!0});return r&&(e+=`## Exclude glob used during search:
`+r),e}trackIgnoreFile(e,r,n){r.path.endsWith(g9)?this._gitIgnoreFiles.setIgnoreFile(e,r,n):r.path.endsWith(h9)&&this._copilotIgnoreFiles.setIgnoreFile(e,r,n)}removeIgnoreFile(e){e.path.endsWith(g9)?this._gitIgnoreFiles.removeIgnoreFile(e):e.path.endsWith(h9)&&this._copilotIgnoreFiles.removeIgnoreFile(e)}removeWorkspace(e){this._gitIgnoreFiles.removeWorkspace(e),this._copilotIgnoreFiles.removeWorkspace(e)}isIgnoreFile(e){return e.path.endsWith(g9)?!0:!!e.path.endsWith(h9)}async addWorkspace(e){if(e.scheme!=="file")return;let r=await this.searchService.findFilesWithDefaultExcludes(new NT(e,`**/{${h9},${g9}}`),void 0,zo.None);for(let n of r){let i=(await this.fs.readFile(n)).toString();this.trackIgnoreFile(e,n,i)}}};var _9=class{constructor(e){this.contentProvider=e}provideTextDocumentContent(e,r){return this.contentProvider()}};var CNe="copilot-ignore",EA=class extends v9{constructor(e,r,n){super(e,r,n),this.installListeners(),this._disposables.push(Fo.workspace.registerTextDocumentContentProvider(CNe,new _9(this.sessionInfo.bind(this))))}installListeners(){this._disposables.push(Fo.workspace.onDidChangeWorkspaceFolders(e=>{for(let r of e.removed)this.removeWorkspace(r.uri);for(let r of e.added)this.addWorkspace(r.uri)})),this._disposables.push(Fo.workspace.onDidSaveTextDocument(async e=>{if(this.isIgnoreFile(e.uri)){let r=(await Fo.workspace.fs.readFile(e.uri)).toString(),n=Fo.workspace.getWorkspaceFolder(e.uri);this.trackIgnoreFile(n?.uri,e.uri,r)}}),Fo.workspace.onDidDeleteFiles(e=>{for(let r of e.files)this.removeIgnoreFile(r)}),Fo.workspace.onDidRenameFiles(async e=>{for(let r of e.files)if(this.isIgnoreFile(r.newUri)){let n=(await Fo.workspace.fs.readFile(r.newUri)).toString();this.removeIgnoreFile(r.oldUri);let i=Fo.workspace.getWorkspaceFolder(r.newUri);this.trackIgnoreFile(i?.uri,r.newUri,n)}})),this._disposables.push(this.onDidChangeCopilotIgnoreEnablement(e=>{Fo.commands.executeCommand("setContext","github.copilot.copilotIgnoreEnabled",e)}))}async dispalyContentExclusionSessionInfo(){let e=Ct.from({scheme:CNe,authority:gi(),path:"/Content Exclusion Session Info"}),r=await Fo.workspace.openTextDocument(e);await Fo.languages.setTextDocumentLanguage(r,"markdown"),await Fo.window.showTextDocument(r)}};function wNe(t){let e=t.get(Wt);return e instanceof EA?Fo.commands.registerCommand("github.copilot.debug.contentExclusions",e.dispalyContentExclusionSessionInfo.bind(e)):{dispose:()=>{}}}var hS=se("ChatVariableService"),y9=class{constructor(e){this._variableEnablements=e.get(ke).getConfigMixedWithDefaults(Le.ConversationVariablesEnablements)}isVariableEnabled(e){return typeof this._variableEnablements[e.name]=="boolean"?this._variableEnablements[e.name]:typeof e.defaultEnablement=="boolean"?e.defaultEnablement:!!this._variableEnablements["*"]}getVariables(){let e=[];for(let r of Cr.contextResolvers)r.variableInfo&&this.isVariableEnabled(r.variableInfo)&&e.push({name:r.variableInfo.name,kind:r.kind,description:r.variableInfo.description,resolve:r.resolveContext.bind(r)});return e}getVariable(e){return this.getVariables().find(r=>r.name===e)}};var C0=we(xn());var gS=se("IDiffService");var b9=class extends Ji{constructor(r,n,i){super();this._initialText=r;this._document=n;this._serviceAccessor=i;this._additionalEdits=Pi.empty;this._documentText=this._document.getText();let o=i.get(st);this._register(o.onDidChangeTextDocument(s=>{if(s.document.uri.toString()!==this._document.uri.toString())return;let a=Pi.from(s.contentChanges);this._additionalEdits=this._additionalEdits.compose(a)}))}async compute(){let r=this._serviceAccessor.get(gS),n=await Pi.fromDiff(this._initialText,this._documentText,r);return{getEditsSinceInitial:()=>{if(this._store.isDisposed)throw new ju("EditComputer has been disposed");return n.compose(this._additionalEdits)}}}};var qy=class t{constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,s=r.column|0;return o-s}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var x9=class{constructor(e,r){this.initialText=e;this._accessor=r;this._document=new dte(e)}addEdits(e){let r=Xst(e,this._document);this._document.apply(r)}getText(){return this._document.getValue()}async getEdits(){let e=this.getText(),r=this._accessor.get(gS);return await Pi.fromDiff(this.initialText,e,r)}};function Xst(t,e){return new Pi(t.map(r=>{let n=e.positionToOffset(r.range.start),i=e.positionToOffset(r.range.end);return new Ai(new Or(n,i),r.newText)}))}var dte=class{constructor(e=""){this._converter=void 0;this._value="";this._value=e}getValue(){return this._value}apply(e){this._value=e.apply(this._value),this._converter=void 0}positionToOffset(e){return this._converter||(this._converter=new By(this._value)),this._converter.positionToOffset(new qy(e.line+1,e.character+1))}};function RNe(t,e){let r=t.notebookDocuments.find(i=>i.uri.fsPath===e.uri.fsPath&&i.getCells().find(o=>o.document===e));return r?r.getCells().findIndex(i=>i.document===e):-1}var ANe=we(xn());var S0=class t{constructor(){this.id=t.ID;this.description=ANe.t("Make changes to existing code");this.intentDetectionInput={sampleQuestion:"Change this method to use async/await",modelDescription:"Make changes to existing code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="edit"}async invoke(e,r){let n=await e.get(tt).getUserRequestEndpoint(this.locations[0],this.id);return b0.createIntentInvocation(this,e,r,2,n)}};var PNe=we(xn());var I0=class t{constructor(){this.id=t.ID;this.description=PNe.t("Generate new code");this.intentDetectionInput={sampleQuestion:"Add a function that returns the sum of two numbers",modelDescription:"Generate new code"};this.locations=[1];this.commandInfo={hiddenFromUser:!0}}static{this.ID="generate"}async invoke(e,r){let n=await e.get(tt).getUserRequestEndpoint(this.locations[0],this.id);return b0.createIntentInvocation(this,e,r,4,n)}};var E9=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Pi.empty;this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r}handleEdits(e){let r=e.apply(this._text),n=this._combinedEditsSinceStart.compose(e);n=n.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=n,this._text=r}computeTrackedEditsSurvivalScore(){let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewTextRanges(),s=Qst(o,this._combinedEditsSinceStart);for(let a=0;a<o.length;a++){let u=this._originalEdits.edits[a],c=this.originalText.substring(u.replaceRange.start,u.replaceRange.endExclusive),l=u.newText,d=s[a],p=this._text.substring(d.start,d.endExclusive),f=TA(p,l),m=TA(l,c),h=TA(p,c);if(m!==1){let _=1-Math.max(h-m,0)/(1-m);n+=u.replaceRange.length*_,i+=u.replaceRange.length}let g=u.newText.length*f,v=u.newText.length;e+=g,r+=v}return{fourGram:r===0?1:e/r,noRevert:i===0?1:n/i}}};function TA(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let a=0;a<=t.length-4;a++){let u=t.substring(a,a+4),c=n.get(u)||0;n.set(u,c+1)}for(let a=0;a<=e.length-4;a++){let u=e.substring(a,a+4),c=n.get(u)||0;n.set(u,c-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let a of n.values())o+=Math.abs(a);return(i-o)/i}function Qst(t,e){t=t.slice();let r=[],n=0;for(let i of e.edits){for(;;){let s=t[0];if(!s||s.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(s.delta(n))}let o=[];for(;;){let s=t[0];if(!s||!s.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(s)}for(let s=o.length-1;s>=0;s--){let a=o[s],u=a.intersect(i.replaceRange).length;a=a.deltaEnd(-u+(s===0?i.newText.length:0));let c=a.start-i.replaceRange.start;c>0&&(a=a.delta(-c)),s!==0&&(a=a.delta(i.newText.length)),a=a.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(a)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}var T9=class{constructor(e,r,n,i,o,s,a){this._accessor=e;this._document=r;this._originalDocumentText=n;this._edits=i;this._sharedProps=s;this._sharedMeasures=a;this._editSurvivalTracker=new E9(this._originalDocumentText,this._edits);this._store=new $r;let u=this._accessor.get(st);this._store.add(u.onDidChangeTextDocument(c=>{if(c.document!==this._document)return;let l=Pi.from(c.contentChanges);this._editSurvivalTracker.handleEdits(l)})),this._editSurvivalTracker.handleEdits(o),this._initialBranchName=this._getCurrentBranchName(),this._reportAfter(30*1e3),this._reportAfter(120*1e3),this._reportAfter(300*1e3),this._reportAfter(600*1e3,()=>{this._store.dispose()})}_getCurrentBranchName(){return this._accessor.get(xs).getRepository(this._document.uri)?.headBranchName}_reportAfter(e,r){let n=new UP(()=>{this._report(e),n.dispose(),r&&r()},e);this._store.add(n)}_report(e){let r=this._editSurvivalTracker.computeTrackedEditsSurvivalScore(),n=this._accessor.get(Ue),o=this._getCurrentBranchName()!==this._initialBranchName;n.sendMSFTTelemetryEvent("inline.trackEditSurvival",this._sharedProps,{...this._sharedMeasures,survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:e,didBranchChange:o?1:0})}};var S9={top_p:1,temperature:.1};async function NNe(t,e,r,n,i,o,s){let a=t.get(jT),u,c,l="",d=a.parse(e,1);if(d.command)c=d.command.intent,l=d.restOfQuery,u=d.intentArgument;else{let m=t.get(ke),h=new sS(t,1),g=r===void 0?!1:!r,v=h.detectIntent(n,e,s,o,i?.preferredIntent,g);(r===void 0||r)&&(m.isDefaultSettingOverwritten(Le.ConversationIntentDetection)?m.getConfig(Le.ConversationIntentDetection):!0)&&(c=await v),l=e}let p;c&&i&&(p=i.slashCommands.find(m=>m.command===c.id)),c??=Wa.Instance;let f=await c.invoke(t,{location:1,documentContext:n,intentArgument:u},p);return{queryWithoutCommand:l,intentInvocation:f,slashCommand:p}}async function DNe(t,e,r,n){let i=new za;if(e&&e.length>0){let s=`The current code is a result of a previous interaction with you. Here are my previous messages: 
- ${e.join(`
- `)}`,a=new Nc({message:s,type:"user"});i.addTurn(a)}let o=new Nc({message:t.queryWithoutCommand,type:"user"});return o.intentInvocation=t.intentInvocation,i.addTurn(o),await t.intentInvocation.promptCrafter.buildPrompt(i,t.intentInvocation.endpoint,[],{report(){}},r,n)}var pte=class{constructor(e,r,n,i,o,s,a,u){this.placeholder=e;this.slashCommands=r;this.wholeRange=n;this.document=i;this.formattingOptions=o;this.message=s;this.input=a;this.preferredIntent=u;this._requests=[];this.aiEditCollector=void 0;this.store=void 0;this.sessionId=gi(),this.conversation=void 0}addRequest(e){this._requests.push(e)}getRequests(){return this._requests}},I9=class t{constructor(e,r){this.accessor=e;this.rejectionMessage=r;this.logger=e.get(Ee).getPromptResponseLogger("interactiveEditor"),this.tabAndEditorsService=e.get(ir),this.languageDiagnosticService=e.get(Yo),this._telemetryService=e.get(Ue),this.logger.info(`CopilotInteractiveEditorSessionProvider created, with rejection message: ${this.rejectionMessage}`)}async prepareInteractiveEditorSession(e){let r;if(this.tabAndEditorsService.activeTextEditor?.document.uri.toString()===e.document.uri.toString()){let p=this.tabAndEditorsService.activeTextEditor.options;r={insertSpaces:p.insertSpaces,tabSize:p.tabSize}}let n,i=this.languageDiagnosticService.getDiagnostics(e.document.uri).find(p=>p.range.contains(e.selection));i&&(i.severity===TI.Warning||i.severity===TI.Error)&&(n=`/fix ${i.message}`);let o={document:e.document,fileIndentInfo:r,language:Dc(e.document),selection:e.selection,wholeRange:e.selection},s=[];for(let p of Ri.getCommands(1))p.intent?.asSlashCommand?s.push(await p.intent.asSlashCommand(this.accessor,o)):s.push({command:p.commandId,detail:p.details,executeImmediately:p.executeImmediately});let a=[C0.t({message:"{0} Copilot generated code may be incorrect",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})],u=C0.t({message:"{0} You can also type / for commands",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]}),c,l;e.selection.isEmpty&&e.document.lineAt(e.selection.start.line).text.trim()===""?(a.push(u,C0.t({message:"{0} You can also select code to make an edit",args:["$(copilot-logo)"],comment:["{Locked='Copilot'}","Do not translate 'Copilot'"]})),l=C0.t("Ask Copilot to generate code..."),c=I0.ID):!e.selection.isEmpty&&e.selection.start.line!==e.selection.end.line?(a.push(u),l=C0.t("Ask Copilot to edit code..."),c=S0.ID):l=C0.t("Ask Copilot or type / for commands");let d=a[Math.floor(Math.random()*a.length)];return new pte(l,s,e.selection,e.document,r,d,n,c)}async provideInteractiveEditorResponse(e,r,n,i){await this.accessor.get(Wt).refreshRemoteContentExclusions(),this.logger.info(`CopilotInteractiveEditorSessionProvider query: ${r.prompt}`),n.report({message:C0.t("Fetching response..."),edits:[]}),r.attempt===0&&e.addRequest(r.prompt);let o=this.accessor.get(ke).getConfig(Le.InlineChatStreaming),s=r.live;if(o==="off")s=!1;else if(o==="instant"){let l=n;n={report:d=>{l.report({...d,editsShouldBeInstant:!0})}}}let a=e.aiEditCollector=new x9(e.document.getText(),this.accessor),u=n;n={report(l){l.edits&&a.addEdits(l.edits),u.report(l)}};let c=await this.fetchResponse(e,r,n,s,i);if(c)return"edits"in c?.parsedReply&&a.addEdits(c.parsedReply.edits),Jst(e,c,s)}async provideFollowups(e,r,n){if(!Vr(e.document.uri)||!e.conversation||!e.wholeRange?.isEmpty)return;let i=0,o=RNe(this.accessor.get(st),e.document);if(o>=0)i=o+1;else if(this.tabAndEditorsService.activeNotebookEditor?.selection.end!==void 0)i=this.tabAndEditorsService.activeNotebookEditor.selection.end;else return;let s=this.accessor.get(bs);return(await new oS(this.accessor,s).followUp(e.conversation,1,n)).map(c=>({commandId:"notebook.cell.insertCodeCellWithChat",title:`$(sparkle) ${c}`,args:[{index:i,input:c,autoSend:!0}]}))}handleInteractiveEditorResponseFeedback(e,r,n){if(this.logger.debug("CopilotInteractiveEditorSessionProvider feedback received"),n===va.Bug&&e.conversation){this.accessor.get(dS)?.reportInline(e.conversation,r.promptQuery,r.reply);return}let i={messageId:r.messageId},o,{selection:s,wholeRange:a,intent:u,query:c}=r.promptQuery,l=e.conversation?.getLatestTurn()?.requestId??"",d=e.sessionId,p=u?.id,f=e.document.languageId,m=r.reply.type,h=m==="inlineEdit"?r.reply.edits:null,g=p==="fix"?kNe(s,this.languageDiagnosticService.getDiagnostics(e.document.uri)):void 0,v=Vr(e.document.uri)?1:0,_={languageId:f,replyType:m,conversationId:d,requestId:l,command:p},y={selectionLineCount:s?Math.abs(s.end.line-s.start.line):-1,wholeRangeLineCount:a?Math.abs(a.end.line-a.start.line):-1,editCount:h?.length??-1,editLineCount:h?.reduce((x,S)=>x+S.newText.split(`
`).length,0)??-1,isNotebook:v,problemsCount:g?.fileDiagnosticsTelemetry.problemsCount??0,selectionProblemsCount:g?.selectionDiagnosticsTelemetry.problemsCount??0,diagnosticsCount:g?.fileDiagnosticsTelemetry.diagnosticsCount??0,selectionDiagnosticsCount:g?.selectionDiagnosticsTelemetry.diagnosticsCount??0},E=(x,S)=>{this._telemetryService.sendInternalMSFTTelemetryEvent(x,{language:f,intent:p,query:c,conversationId:d,requestId:l,replyType:m,problems:g?.fileDiagnosticsTelemetry.problems??"",selectionProblems:g?.selectionDiagnosticsTelemetry.problems??"",diagnosticCodes:g?.fileDiagnosticsTelemetry.diagnosticCodes??"",selectionDiagnosticCodes:g?.selectionDiagnosticsTelemetry.diagnosticCodes??""},{isNotebook:v,...S})};if(n===va.Accepted&&e.aiEditCollector){let x=e.aiEditCollector,S=new b9(e.aiEditCollector.getText(),e.document,this.accessor);(async()=>{try{let[O,U]=await Promise.all([x.getEdits(),S.compute()]),W=U.getEditsSinceInitial();new T9(this.accessor,e.document,x.initialText,O,W,_,y)}finally{S.dispose()}})()}if(e.aiEditCollector=void 0,n===va.Helpful||n===va.Unhelpful){let x=n===va.Helpful?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.action.vote",_,{...y,vote:x}),E("interactiveSessionVote",{vote:x})}else if(n===va.Undone||n===va.Accepted){let x=n===va.Accepted?1:0;this._telemetryService.sendMSFTTelemetryEvent("inline.done",_,{...y,accepted:x}),E("interactiveSessionDone",{accepted:x})}switch(n){case va.Helpful:i.rating="positive",o="inlineConversation.messageRating";break;case va.Unhelpful:i.rating="negative",o="inlineConversation.messageRating";break;case va.Undone:i.action="undo",o="inlineConversation.undo";break;case va.Accepted:i.action="accept",o="inlineConversation.accept";break;case va.Bug:o="";break}o&&uS(this.accessor,e.document,i,{},o)}async fetchResponse(e,r,n,i,o){let s=cS(),a=Date.now(),u;e.getRequests().length>1&&r.attempt===0&&e.store&&e.document.getText()===e.store.lastDocumentContent&&(u=e.store.lastWholeRange,this.logger.debug("Ignoring passed in whole range and using the whole range from the previous turn"));let c={document:e.document,fileIndentInfo:e.formattingOptions,language:Dc(e.document),selection:r.selection,wholeRange:u??r.wholeRange};(e.getRequests().length>1||r.attempt>0)&&(e.preferredIntent=void 0);let l=await NNe(this.accessor,r.prompt,r.withIntentDetection,c,e,s,o),d=l.intentInvocation;n.report({slashCommand:l.slashCommand});let{messages:p}=await DNe(l,e.getRequests().slice(0,-1),s,o);if(o.isCancellationRequested)return;let f=e.conversation,m=f===void 0;f||(f=e.conversation=new za);let h=p.map(M=>M.content).join(`
`),g=new Nc({message:h,type:"user"});g.chatMessages=p,f.addTurn(g),s=t9(f,e.sessionId,"conversationInline",r.prompt,Zst(this.accessor,p),d.intent.id,s);let v=s.properties.messageId;g.requestId=v,this.logger.logPrompt(p);let _,y,E=Vr(e.document.uri)?1:0,x=kNe(r.selection,this.languageDiagnosticService.getDiagnostics(e.document.uri));this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionRequest",{conversationId:e.sessionId,requestId:v,chatLocation:"inline",intent:d.intent.id,language:e.document.languageId,prompt:p.map(M=>`${M.role.toUpperCase()}:
${M.content}`).join(`
---
`),model:d.endpoint.model},{isNotebook:E});let S=0,O=d.createReplyInterpreter(n,i),U=async M=>(S===0&&(S=Date.now()),O.update(M).shouldFinish?M.length:void 0),W=Date.now(),L=d.endpoint;try{_=await this.accessor.get(wr).fetchOne(p,U,o,1,L,{temperature:t.pickTemperature(r),top_p:S9.top_p},{messageId:v,messageSource:"inline.user"},{intent:!0})}catch(M){throw this.logger.exception(M,"Fetching failed: "),this.accessor.get(Ue).sendGHTelemetryException(M,"Fetching failed: "),g.status="error",g.response={message:M.message,type:"server"},new Error("Failed to make request")}this.logger.logResponse(_),r9(this.accessor,"conversationInline",_.requestId,r.prompt,_.type==="offTopic",this.tabAndEditorsService.activeTextEditor?.document,s);let ve=this.accessor.get(qr),J=M=>{this._telemetryService.sendMSFTTelemetryEvent("inline.request",{command:d.intent.id??"",contextTypes:"none",promptTypes:p.map(ce=>`${ce.role}${ce.name?`-${ce.name}`:""}:${ce.content.length}`).join(","),conversationId:e.sessionId,requestId:v,languageId:this.tabAndEditorsService.activeTextEditor?.document?.languageId,responseType:_.type,replyType:M?.type,model:L.model,diagnosticsProvider:x.diagnosticsProvider,diagnosticCodes:x.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:x.selectionDiagnosticsTelemetry.diagnosticCodes},{firstTurn:m?1:0,isNotebook:E,messageTokenCount:ve.tokenLength(l.queryWithoutCommand),promptTokenCount:Cu(this.accessor,p),responseTokenCount:_.type==="success"?ve.tokenLength(_.value):-1,implicitCommand:r.prompt.trim().startsWith(`/${d.intent.id}`)?0:1,attemptCount:r.attempt||0,selectionLineCount:r.selection?Math.abs(r.selection.end.line-r.selection.start.line)+1:-1,wholeRangeLineCount:r.wholeRange?Math.abs(r.wholeRange.end.line-r.wholeRange.start.line)+1:-1,editCount:M?.type==="inlineEdit"?M.edits.length:-1,editLineCount:M?.type==="inlineEdit"?M.edits.reduce((ce,V)=>ce+V.newText.split(`
`).length,0):-1,problemsCount:x.fileDiagnosticsTelemetry.problemsCount,selectionProblemsCount:x.selectionDiagnosticsTelemetry.problemsCount,diagnosticsCount:x.fileDiagnosticsTelemetry.diagnosticsCount,selectionDiagnosticsCount:x.selectionDiagnosticsTelemetry.diagnosticsCount,timeToRequest:W-a,timeToFirstToken:S?S-a:-1,timeToComplete:Date.now()-a})},D=(M,ce)=>{this._telemetryService.sendInternalMSFTTelemetryEvent("interactiveSessionResponse",{conversationId:e.sessionId,requestId:v,chatLocation:"inline",intent:d.intent.id??"",problems:x.fileDiagnosticsTelemetry.problems,selectionProblems:x.selectionDiagnosticsTelemetry.problems,diagnosticCodes:x.fileDiagnosticsTelemetry.diagnosticCodes,selectionDiagnosticCodes:x.selectionDiagnosticsTelemetry.diagnosticCodes,diagnosticsProvider:x.diagnosticsProvider,language:this.tabAndEditorsService.activeTextEditor?.document?.languageId,request:r.prompt,responseType:M,response:ce},{isNotebook:E})};switch(_.type){case"rateLimited":{let M=`Response failed ${_.type}: ${_.reason}`;throw g.status="error",g.response={message:M,type:"server"},J(),D(_.type,M),new Error("Oops, your request failed due to a rate limit. Please try again later.")}case"badRequest":{let M=`Response failed ${_.type}: ${_.reason}`;throw g.status="error",g.response={message:M,type:"server"},J(),D(_.type,M),new Error("Failed to make request")}case"failed":{this.logger.error(`Response failed: ${_.reason}`),g.status="error";let M=_.reason;throw g.response={message:M,type:"server"},J(),D(_.type,M),new Error("Failed to make request")}case"canceled":{this.logger.debug(`Response canceled: ${_.reason}`),g.status="error";let M="Cancelled";g.response={message:M,type:"user"},J(),D(_.type,M);return}case"unknown":{let M=`Response is empty: ${_.reason}`;this.logger.info(M),g.status="error",g.response={message:M,type:"server"},J(),D(_.type,M);return}case"filtered":{let M=`Response got filtered: ${_.reason}`;throw this.logger.info(M),g.status="filtered",g.response={message:M,type:"server"},J(),D(_.type,M),new Error("Oops, response got filtered. Please rephrase your prompt.")}case"offTopic":{this.logger.info(`Response marked as offtopic: ${_.reason}`),g.status="off-topic";let M=this.rejectionMessage;g.response={message:M,type:"offtopic-detection"},J(),D(_.type,M),i9(this.accessor,f,e.sessionId,"conversationInline",r.prompt,v,e.document,s);return}case"length":{let M=`Response was too long: ${_.reason}`;this.logger.info(M),g.status="error",g.response={message:M,type:"server"},J(),D(_.type,M);return}case"success":break;default:{this.logger.error("Unexpected response type"),this.logger.info(JSON.stringify(_)),g.status="error";let M=`Unexpected response type: ${JSON.stringify(_)}`;g.response={message:M,type:"server"},J(),D("unknown",M);return}}if(y=_.value,y.length===0){this.logger.info("Response is empty."),J(),D("unknown","Empty response");return}O.update(y);let R=await O.finish();g.status="success";let k=y;return g.response={message:k,type:"model"},J(R),D("success",k),s=s.extendedBy({replyType:R.type}),n9(this.accessor,f,e.sessionId,"conversationInline",y,v,e.document,s),this.logger.info(`Parsed response: ${JSON.stringify(R,null,"	")}`),{promptQuery:{query:l.queryWithoutCommand,...c,intent:d.intent},parsedReply:R,messageId:s.properties.messageId}}static pickTemperature(e){return"attempt"in e&&typeof e.attempt=="number"?Math.min(S9.temperature*(e.attempt+1),2):S9.temperature}};function Jst(t,e,r){let{promptQuery:n,parsedReply:i,messageId:o}=e;if(i.type==="conversational")return{contents:new Fp(i.content),promptQuery:n,reply:i,messageId:o};let s=i.content!==void 0?new Fp(i.content):void 0;return i.type==="workspaceEdit"?{edits:i.workspaceEdit,promptQuery:n,reply:i,messageId:o,contents:s}:(t.store=i.store,{edits:i.edits,wholeRange:i.newWholeRange,reply:i,promptQuery:n,messageId:o,contents:i.content!==void 0?new Fp(i.content):void 0})}function Zst(t,e){let r=t.get(qr),n=0;for(let i of e)n+=r.tokenLength(i.content);return n}function kNe(t,e){let r=e.filter(c=>t.intersection(c.range)),n={problems:e.map(c=>c.message).join(", "),problemsCount:e.length,diagnosticCodes:"",diagnosticsCount:0},i={problems:r.map(c=>c.message).join(", "),problemsCount:r.length,diagnosticCodes:"",diagnosticsCount:0},o=new Map,s=new Map;e.forEach(c=>{let l=c.code,d=typeof l=="string"||typeof l=="number"?l.toString():l?l.value.toString():"";o.set(d,(o.get(d)||0)+1),t.intersection(c.range)&&s.set(d,(s.get(d)||0)+1)});let a=c=>{let l="";return c.forEach((d,p)=>{l+=`${p}:${d},`}),l};n.diagnosticCodes=a(o),n.diagnosticsCount=o.size,i.diagnosticCodes=a(s),i.diagnosticsCount=s.size;let u=e.length>0?e[0].source??"":"";return{fileDiagnosticsTelemetry:n,selectionDiagnosticsTelemetry:i,diagnosticsProvider:u}}var zn=we(require("vscode"));var C9=we(xn());var vS=class extends ue{async prepare(e,r,n){let i=this.props.nodeToDocument??await _S(this.accessor,this.props.documentContext),o=eat(this.props.endpointInfo,this.props.documentContext,i.range);return this.props.onSelectionMetadataComputed?.(new Lo(this.props.documentContext.wholeRange,o)),{nodeToDocument:i,codeExcerptToDocument:o.range}}render(e,r){let n=e.codeExcerptToDocument.generatePrompt(!1).join(`
`);return vscpp(pe,null,"I have the following code in the selection:",n!==""?vscpp("br",null):"",e.codeExcerptToDocument.generatePrompt(!1).join(`
`))}};async function _S(t,e){let r=t.get(Sn),n=jc(e.selection,e.document),i=r.getTreeSitterAST(e.document);if(i===void 0)return{range:e.wholeRange};let o=Date.now(),s=await i.getNodeToDocument(n),a=Date.now()-o,u=jc(e.wholeRange,e.document);tat(t,n,u,s,e.document.languageId,a);let c=new Ge(e.document.positionAt(s.nodeToDocument.startIndex),e.document.positionAt(s.nodeToDocument.endIndex));return{identifier:s.nodeIdentifier,range:c}}function eat(t,e,r){let n=new ia(t.modelMaxPromptTokens*4/3),i=new Oo(n,e.document,e.language,"ed8c6549bwf9"),o=new Oo(new ia(0),e.document,e.language,"abpxx6d04wxr"),s=new Oo(new ia(0),e.document,e.language,"be15d9bcejpp");for(let a=r.start.line,u=r.end.line;a<=u&&!(a===u&&r.end.character===0||!i.appendLine(a));++a);return i.trim(e.selection),{language:e.language,above:o,range:i,below:s,outlineAbove:"",outlineBelow:""}}function tat(t,e,r,n,i,o){t.get(Ue).sendMSFTTelemetryEvent("getNodeToDocument",{languageId:i,typeOfNodeToDocument:n.nodeToDocument.type,nodeToDocumentStart:n.nodeToDocument.startIndex.toString(),nodeToDocumentEnd:n.nodeToDocument.endIndex.toString(),selectionOffsetRangeStart:e.startIndex.toString(),selectionOffsetRangeEnd:e.endIndex.toString(),wholeRangeOffsetRangeStart:r.startIndex.toString(),wholeRangeOffsetRangeEnd:r.endIndex.toString()},{timeSpentMs:o})}var rat=6e4,nat=1500,Gy=class t{constructor(){this.id=t.ID;this.description=C9.t("Add documentation comment for this symbol");this.intentDetectionInput={sampleQuestion:"Add jsdoc to this method"};this.locations=[1];this.commandInfo={executeImmediately:!0}}static{this.ID="doc"}async asSlashCommand(e,r){if(r.document.lineCount>nat||r.document.getText().length>rat)return new SA("Add documentation comment for this symbol");let n=await _S(e,r),i=n.identifier?C9.t("Add documentation comment for '{0}'",n.identifier):C9.t("Add documentation comment for this symbol");return new SA(i,n)}async invoke(e,r,n){let i=r.documentContext;if(!i)throw new Error("Open a file to add documentation.");let o;n instanceof SA?o=n.nodeToDocument:e.get(Ee).getLogger("InlineDocIntent#invoke").warn("Unexpected: SlashCommand given to intent invocation is not a DocSlashCommand");let s=await e.get(tt).getUserRequestEndpoint(r.location,this.id);return new fte(e,s,i,this,o)}},SA=class{constructor(e,r=void 0){this.detail=e;this.nodeToDocument=r;this.command=Gy.ID;this.executeImmediately=!0}},fte=class t{constructor(e,r,n,i,o=void 0){this.accessor=e;this.endpoint=r;this.context=n;this.intent=i;this.nodeToDocument=o;this.location=1;this.createReplyInterpreter=tS.createFactory(async e=>{if(!this.contextInfo||!this.wholeRange)throw new Error("doc intent NEEDS a selection context");let r=lm(this.contextInfo,e,this.context.language);if(!r)return{type:"conversational",content:e};let n=Ub(this.context.document.languageId),i=r.code;if(n){let s=Date.now(),a=await this.accessor.get(Sn).extractDoc(n,i),u=Date.now()-s;t._sendExtractDocTelemetry(this.accessor.get(Ue),this.context.document.languageId,i.length,a,u),a&&(i=a)}let o=My(this.accessor,this.contextInfo,i,1,this.context.fileIndentInfo);return um(o,this.wholeRange)});let s=this;this.promptCrafter=new class{constructor(){}async buildPrompt(a,u,c,l,d,p){let f=s.nodeToDocument??await _S(s.accessor,s.context);return await new qt(s.accessor,u,mte,{userQuery:a.getLatestTurn()?.request?.message??"",documentContext:s.context,nodeToDocument:f,endpointInfo:u,onSelectionMetadataComputed:h=>{s.contextInfo=h.contextInfo,s.wholeRange=h.wholeRange},history:a.turns.at(-2)?.request.message}).render(l,p)}}}static _sendExtractDocTelemetry(e,r,n,i,o){e.sendMSFTTelemetryEvent("extractDoc",{languageId:r,couldExtractDoc:i===void 0?"false":"true"},{codeBlockLen:n,timeSpentMs:o})}},mte=class extends ue{render(e,r){let n=M8(this.props.documentContext.language.languageId);return vscpp(vscppf,null,vscpp(rt,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"You must follow user's requirements carefully.",vscpp("br",null),"You must follow Microsoft content policies.",vscpp("br",null),"You must avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, you should give a reminder that you are an AI programming assistant.",vscpp("br",null),"Each code block starts with ``` and ",this.props.documentContext.language.lineCommentToken," FILEPATH.",vscpp("br",null),"When user asks you to document something, you must answer in the form of a ",n," markdown code block.",vscpp("br",null)),vscpp(vS,{documentContext:this.props.documentContext,nodeToDocument:this.props.nodeToDocument,onSelectionMetadataComputed:this.props.onSelectionMetadataComputed,endpointInfo:this.props.endpointInfo}),this.props.history&&vscpp(pe,null,this.props.history),vscpp(pe,null,`${this.getQueryPrefix()} ${this.props.userQuery}`.trim()))}getQueryPrefix(){let e=this.props.nodeToDocument?.identifier,r=e!==void 0&&e!=="",n=r?e:"the selection",i;switch(this.props.documentContext.language.languageId){case"typescript":case"typescriptreact":i=r?"a TSDoc comment":"TSDoc comment";break;case"javascript":case"javascriptreact":i=r?"a JSDoc comment":"JSDoc comment";break;case"python":i="docstring";break;default:i="documentation comment"}return`Please add ${i} for ${n}.`}};var MNe=we(xn());var w9=we(xn());var LNe=Object.create(null);function b(t,e){if(sI(e)){let r=LNe[e];if(r===void 0)throw new Error(`${t} references an unknown codicon: ${e}`);e=r}return LNe[t]=e,{id:t}}var Xr={add:b("add",6e4),plus:b("plus",6e4),gistNew:b("gist-new",6e4),repoCreate:b("repo-create",6e4),lightbulb:b("lightbulb",60001),lightBulb:b("light-bulb",60001),repo:b("repo",60002),repoDelete:b("repo-delete",60002),gistFork:b("gist-fork",60003),repoForked:b("repo-forked",60003),gitPullRequest:b("git-pull-request",60004),gitPullRequestAbandoned:b("git-pull-request-abandoned",60004),recordKeys:b("record-keys",60005),keyboard:b("keyboard",60005),tag:b("tag",60006),tagAdd:b("tag-add",60006),tagRemove:b("tag-remove",60006),gitPullRequestLabel:b("git-pull-request-label",60006),person:b("person",60007),personFollow:b("person-follow",60007),personOutline:b("person-outline",60007),personFilled:b("person-filled",60007),gitBranch:b("git-branch",60008),gitBranchCreate:b("git-branch-create",60008),gitBranchDelete:b("git-branch-delete",60008),sourceControl:b("source-control",60008),mirror:b("mirror",60009),mirrorPublic:b("mirror-public",60009),star:b("star",60010),starAdd:b("star-add",60010),starDelete:b("star-delete",60010),starEmpty:b("star-empty",60010),comment:b("comment",60011),commentAdd:b("comment-add",60011),alert:b("alert",60012),warning:b("warning",60012),search:b("search",60013),searchSave:b("search-save",60013),logOut:b("log-out",60014),signOut:b("sign-out",60014),logIn:b("log-in",60015),signIn:b("sign-in",60015),eye:b("eye",60016),eyeUnwatch:b("eye-unwatch",60016),eyeWatch:b("eye-watch",60016),circleFilled:b("circle-filled",60017),primitiveDot:b("primitive-dot",60017),closeDirty:b("close-dirty",60017),debugBreakpoint:b("debug-breakpoint",60017),debugBreakpointDisabled:b("debug-breakpoint-disabled",60017),debugBreakpointPending:b("debug-breakpoint-pending",60377),debugHint:b("debug-hint",60017),primitiveSquare:b("primitive-square",60018),edit:b("edit",60019),pencil:b("pencil",60019),info:b("info",60020),issueOpened:b("issue-opened",60020),gistPrivate:b("gist-private",60021),gitForkPrivate:b("git-fork-private",60021),lock:b("lock",60021),mirrorPrivate:b("mirror-private",60021),close:b("close",60022),removeClose:b("remove-close",60022),x:b("x",60022),repoSync:b("repo-sync",60023),sync:b("sync",60023),clone:b("clone",60024),desktopDownload:b("desktop-download",60024),beaker:b("beaker",60025),microscope:b("microscope",60025),vm:b("vm",60026),deviceDesktop:b("device-desktop",60026),file:b("file",60027),fileText:b("file-text",60027),more:b("more",60028),ellipsis:b("ellipsis",60028),kebabHorizontal:b("kebab-horizontal",60028),mailReply:b("mail-reply",60029),reply:b("reply",60029),organization:b("organization",60030),organizationFilled:b("organization-filled",60030),organizationOutline:b("organization-outline",60030),newFile:b("new-file",60031),fileAdd:b("file-add",60031),newFolder:b("new-folder",60032),fileDirectoryCreate:b("file-directory-create",60032),trash:b("trash",60033),trashcan:b("trashcan",60033),history:b("history",60034),clock:b("clock",60034),folder:b("folder",60035),fileDirectory:b("file-directory",60035),symbolFolder:b("symbol-folder",60035),logoGithub:b("logo-github",60036),markGithub:b("mark-github",60036),github:b("github",60036),terminal:b("terminal",60037),console:b("console",60037),repl:b("repl",60037),zap:b("zap",60038),symbolEvent:b("symbol-event",60038),error:b("error",60039),stop:b("stop",60039),variable:b("variable",60040),symbolVariable:b("symbol-variable",60040),array:b("array",60042),symbolArray:b("symbol-array",60042),symbolModule:b("symbol-module",60043),symbolPackage:b("symbol-package",60043),symbolNamespace:b("symbol-namespace",60043),symbolObject:b("symbol-object",60043),symbolMethod:b("symbol-method",60044),symbolFunction:b("symbol-function",60044),symbolConstructor:b("symbol-constructor",60044),symbolBoolean:b("symbol-boolean",60047),symbolNull:b("symbol-null",60047),symbolNumeric:b("symbol-numeric",60048),symbolNumber:b("symbol-number",60048),symbolStructure:b("symbol-structure",60049),symbolStruct:b("symbol-struct",60049),symbolParameter:b("symbol-parameter",60050),symbolTypeParameter:b("symbol-type-parameter",60050),symbolKey:b("symbol-key",60051),symbolText:b("symbol-text",60051),symbolReference:b("symbol-reference",60052),goToFile:b("go-to-file",60052),symbolEnum:b("symbol-enum",60053),symbolValue:b("symbol-value",60053),symbolRuler:b("symbol-ruler",60054),symbolUnit:b("symbol-unit",60054),activateBreakpoints:b("activate-breakpoints",60055),archive:b("archive",60056),arrowBoth:b("arrow-both",60057),arrowDown:b("arrow-down",60058),arrowLeft:b("arrow-left",60059),arrowRight:b("arrow-right",60060),arrowSmallDown:b("arrow-small-down",60061),arrowSmallLeft:b("arrow-small-left",60062),arrowSmallRight:b("arrow-small-right",60063),arrowSmallUp:b("arrow-small-up",60064),arrowUp:b("arrow-up",60065),bell:b("bell",60066),bold:b("bold",60067),book:b("book",60068),bookmark:b("bookmark",60069),debugBreakpointConditionalUnverified:b("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:b("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:b("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:b("debug-breakpoint-data-unverified",60072),debugBreakpointData:b("debug-breakpoint-data",60073),debugBreakpointDataDisabled:b("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:b("debug-breakpoint-log-unverified",60074),debugBreakpointLog:b("debug-breakpoint-log",60075),debugBreakpointLogDisabled:b("debug-breakpoint-log-disabled",60075),briefcase:b("briefcase",60076),broadcast:b("broadcast",60077),browser:b("browser",60078),bug:b("bug",60079),calendar:b("calendar",60080),caseSensitive:b("case-sensitive",60081),check:b("check",60082),checklist:b("checklist",60083),chevronDown:b("chevron-down",60084),dropDownButton:b("drop-down-button",60084),chevronLeft:b("chevron-left",60085),chevronRight:b("chevron-right",60086),chevronUp:b("chevron-up",60087),chromeClose:b("chrome-close",60088),chromeMaximize:b("chrome-maximize",60089),chromeMinimize:b("chrome-minimize",60090),chromeRestore:b("chrome-restore",60091),circle:b("circle",60092),circleOutline:b("circle-outline",60092),debugBreakpointUnverified:b("debug-breakpoint-unverified",60092),circleSlash:b("circle-slash",60093),circuitBoard:b("circuit-board",60094),clearAll:b("clear-all",60095),clippy:b("clippy",60096),closeAll:b("close-all",60097),cloudDownload:b("cloud-download",60098),cloudUpload:b("cloud-upload",60099),code:b("code",60100),collapseAll:b("collapse-all",60101),colorMode:b("color-mode",60102),commentDiscussion:b("comment-discussion",60103),compareChanges:b("compare-changes",60157),creditCard:b("credit-card",60105),dash:b("dash",60108),dashboard:b("dashboard",60109),database:b("database",60110),debugContinue:b("debug-continue",60111),debugDisconnect:b("debug-disconnect",60112),debugPause:b("debug-pause",60113),debugRestart:b("debug-restart",60114),debugStart:b("debug-start",60115),debugStepInto:b("debug-step-into",60116),debugStepOut:b("debug-step-out",60117),debugStepOver:b("debug-step-over",60118),debugStop:b("debug-stop",60119),debug:b("debug",60120),deviceCameraVideo:b("device-camera-video",60121),deviceCamera:b("device-camera",60122),deviceMobile:b("device-mobile",60123),diffAdded:b("diff-added",60124),diffIgnored:b("diff-ignored",60125),diffModified:b("diff-modified",60126),diffRemoved:b("diff-removed",60127),diffRenamed:b("diff-renamed",60128),diff:b("diff",60129),discard:b("discard",60130),editorLayout:b("editor-layout",60131),emptyWindow:b("empty-window",60132),exclude:b("exclude",60133),extensions:b("extensions",60134),eyeClosed:b("eye-closed",60135),fileBinary:b("file-binary",60136),fileCode:b("file-code",60137),fileMedia:b("file-media",60138),filePdf:b("file-pdf",60139),fileSubmodule:b("file-submodule",60140),fileSymlinkDirectory:b("file-symlink-directory",60141),fileSymlinkFile:b("file-symlink-file",60142),fileZip:b("file-zip",60143),files:b("files",60144),filter:b("filter",60145),flame:b("flame",60146),foldDown:b("fold-down",60147),foldUp:b("fold-up",60148),fold:b("fold",60149),folderActive:b("folder-active",60150),folderOpened:b("folder-opened",60151),gear:b("gear",60152),gift:b("gift",60153),gistSecret:b("gist-secret",60154),gist:b("gist",60155),gitCommit:b("git-commit",60156),gitCompare:b("git-compare",60157),gitMerge:b("git-merge",60158),githubAction:b("github-action",60159),githubAlt:b("github-alt",60160),globe:b("globe",60161),grabber:b("grabber",60162),graph:b("graph",60163),gripper:b("gripper",60164),heart:b("heart",60165),home:b("home",60166),horizontalRule:b("horizontal-rule",60167),hubot:b("hubot",60168),inbox:b("inbox",60169),issueClosed:b("issue-closed",60324),issueReopened:b("issue-reopened",60171),issues:b("issues",60172),italic:b("italic",60173),jersey:b("jersey",60174),json:b("json",60175),bracket:b("bracket",60175),kebabVertical:b("kebab-vertical",60176),key:b("key",60177),law:b("law",60178),lightbulbAutofix:b("lightbulb-autofix",60179),linkExternal:b("link-external",60180),link:b("link",60181),listOrdered:b("list-ordered",60182),listUnordered:b("list-unordered",60183),liveShare:b("live-share",60184),loading:b("loading",60185),location:b("location",60186),mailRead:b("mail-read",60187),mail:b("mail",60188),markdown:b("markdown",60189),megaphone:b("megaphone",60190),mention:b("mention",60191),milestone:b("milestone",60192),gitPullRequestMilestone:b("git-pull-request-milestone",60192),mortarBoard:b("mortar-board",60193),move:b("move",60194),multipleWindows:b("multiple-windows",60195),mute:b("mute",60196),noNewline:b("no-newline",60197),note:b("note",60198),octoface:b("octoface",60199),openPreview:b("open-preview",60200),package:b("package",60201),paintcan:b("paintcan",60202),pin:b("pin",60203),play:b("play",60204),run:b("run",60204),plug:b("plug",60205),preserveCase:b("preserve-case",60206),preview:b("preview",60207),project:b("project",60208),pulse:b("pulse",60209),question:b("question",60210),quote:b("quote",60211),radioTower:b("radio-tower",60212),reactions:b("reactions",60213),references:b("references",60214),refresh:b("refresh",60215),regex:b("regex",60216),remoteExplorer:b("remote-explorer",60217),remote:b("remote",60218),remove:b("remove",60219),replaceAll:b("replace-all",60220),replace:b("replace",60221),repoClone:b("repo-clone",60222),repoForcePush:b("repo-force-push",60223),repoPull:b("repo-pull",60224),repoPush:b("repo-push",60225),report:b("report",60226),requestChanges:b("request-changes",60227),rocket:b("rocket",60228),rootFolderOpened:b("root-folder-opened",60229),rootFolder:b("root-folder",60230),rss:b("rss",60231),ruby:b("ruby",60232),saveAll:b("save-all",60233),saveAs:b("save-as",60234),save:b("save",60235),screenFull:b("screen-full",60236),screenNormal:b("screen-normal",60237),searchStop:b("search-stop",60238),server:b("server",60240),settingsGear:b("settings-gear",60241),settings:b("settings",60242),shield:b("shield",60243),smiley:b("smiley",60244),sortPrecedence:b("sort-precedence",60245),splitHorizontal:b("split-horizontal",60246),splitVertical:b("split-vertical",60247),squirrel:b("squirrel",60248),starFull:b("star-full",60249),starHalf:b("star-half",60250),symbolClass:b("symbol-class",60251),symbolColor:b("symbol-color",60252),symbolCustomColor:b("symbol-customcolor",60252),symbolConstant:b("symbol-constant",60253),symbolEnumMember:b("symbol-enum-member",60254),symbolField:b("symbol-field",60255),symbolFile:b("symbol-file",60256),symbolInterface:b("symbol-interface",60257),symbolKeyword:b("symbol-keyword",60258),symbolMisc:b("symbol-misc",60259),symbolOperator:b("symbol-operator",60260),symbolProperty:b("symbol-property",60261),wrench:b("wrench",60261),wrenchSubaction:b("wrench-subaction",60261),symbolSnippet:b("symbol-snippet",60262),tasklist:b("tasklist",60263),telescope:b("telescope",60264),textSize:b("text-size",60265),threeBars:b("three-bars",60266),thumbsdown:b("thumbsdown",60267),thumbsup:b("thumbsup",60268),tools:b("tools",60269),triangleDown:b("triangle-down",60270),triangleLeft:b("triangle-left",60271),triangleRight:b("triangle-right",60272),triangleUp:b("triangle-up",60273),twitter:b("twitter",60274),unfold:b("unfold",60275),unlock:b("unlock",60276),unmute:b("unmute",60277),unverified:b("unverified",60278),verified:b("verified",60279),versions:b("versions",60280),vmActive:b("vm-active",60281),vmOutline:b("vm-outline",60282),vmRunning:b("vm-running",60283),watch:b("watch",60284),whitespace:b("whitespace",60285),wholeWord:b("whole-word",60286),window:b("window",60287),wordWrap:b("word-wrap",60288),zoomIn:b("zoom-in",60289),zoomOut:b("zoom-out",60290),listFilter:b("list-filter",60291),listFlat:b("list-flat",60292),listSelection:b("list-selection",60293),selection:b("selection",60293),listTree:b("list-tree",60294),debugBreakpointFunctionUnverified:b("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:b("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:b("debug-breakpoint-function-disabled",60296),debugStackframeActive:b("debug-stackframe-active",60297),circleSmallFilled:b("circle-small-filled",60298),debugStackframeDot:b("debug-stackframe-dot",60298),debugStackframe:b("debug-stackframe",60299),debugStackframeFocused:b("debug-stackframe-focused",60299),debugBreakpointUnsupported:b("debug-breakpoint-unsupported",60300),symbolString:b("symbol-string",60301),debugReverseContinue:b("debug-reverse-continue",60302),debugStepBack:b("debug-step-back",60303),debugRestartFrame:b("debug-restart-frame",60304),callIncoming:b("call-incoming",60306),callOutgoing:b("call-outgoing",60307),menu:b("menu",60308),expandAll:b("expand-all",60309),feedback:b("feedback",60310),gitPullRequestReviewer:b("git-pull-request-reviewer",60310),groupByRefType:b("group-by-ref-type",60311),ungroupByRefType:b("ungroup-by-ref-type",60312),account:b("account",60313),gitPullRequestAssignee:b("git-pull-request-assignee",60313),bellDot:b("bell-dot",60314),debugConsole:b("debug-console",60315),library:b("library",60316),output:b("output",60317),runAll:b("run-all",60318),syncIgnored:b("sync-ignored",60319),pinned:b("pinned",60320),githubInverted:b("github-inverted",60321),debugAlt:b("debug-alt",60305),serverProcess:b("server-process",60322),serverEnvironment:b("server-environment",60323),pass:b("pass",60324),stopCircle:b("stop-circle",60325),playCircle:b("play-circle",60326),record:b("record",60327),debugAltSmall:b("debug-alt-small",60328),vmConnect:b("vm-connect",60329),cloud:b("cloud",60330),merge:b("merge",60331),exportIcon:b("export",60332),graphLeft:b("graph-left",60333),magnet:b("magnet",60334),notebook:b("notebook",60335),redo:b("redo",60336),checkAll:b("check-all",60337),pinnedDirty:b("pinned-dirty",60338),passFilled:b("pass-filled",60339),circleLargeFilled:b("circle-large-filled",60340),circleLarge:b("circle-large",60341),circleLargeOutline:b("circle-large-outline",60341),combine:b("combine",60342),gather:b("gather",60342),table:b("table",60343),variableGroup:b("variable-group",60344),typeHierarchy:b("type-hierarchy",60345),typeHierarchySub:b("type-hierarchy-sub",60346),typeHierarchySuper:b("type-hierarchy-super",60347),gitPullRequestCreate:b("git-pull-request-create",60348),runAbove:b("run-above",60349),runBelow:b("run-below",60350),notebookTemplate:b("notebook-template",60351),debugRerun:b("debug-rerun",60352),workspaceTrusted:b("workspace-trusted",60353),workspaceUntrusted:b("workspace-untrusted",60354),workspaceUnspecified:b("workspace-unspecified",60355),terminalCmd:b("terminal-cmd",60356),terminalDebian:b("terminal-debian",60357),terminalLinux:b("terminal-linux",60358),terminalPowershell:b("terminal-powershell",60359),terminalTmux:b("terminal-tmux",60360),terminalUbuntu:b("terminal-ubuntu",60361),terminalBash:b("terminal-bash",60362),arrowSwap:b("arrow-swap",60363),copy:b("copy",60364),personAdd:b("person-add",60365),filterFilled:b("filter-filled",60366),wand:b("wand",60367),debugLineByLine:b("debug-line-by-line",60368),inspect:b("inspect",60369),layers:b("layers",60370),layersDot:b("layers-dot",60371),layersActive:b("layers-active",60372),compass:b("compass",60373),compassDot:b("compass-dot",60374),compassActive:b("compass-active",60375),azure:b("azure",60376),issueDraft:b("issue-draft",60377),gitPullRequestClosed:b("git-pull-request-closed",60378),gitPullRequestDraft:b("git-pull-request-draft",60379),debugAll:b("debug-all",60380),debugCoverage:b("debug-coverage",60381),runErrors:b("run-errors",60382),folderLibrary:b("folder-library",60383),debugContinueSmall:b("debug-continue-small",60384),beakerStop:b("beaker-stop",60385),graphLine:b("graph-line",60386),graphScatter:b("graph-scatter",60387),pieChart:b("pie-chart",60388),bracketDot:b("bracket-dot",60389),bracketError:b("bracket-error",60390),lockSmall:b("lock-small",60391),azureDevops:b("azure-devops",60392),verifiedFilled:b("verified-filled",60393),newLine:b("newline",60394),layout:b("layout",60395),layoutActivitybarLeft:b("layout-activitybar-left",60396),layoutActivitybarRight:b("layout-activitybar-right",60397),layoutPanelLeft:b("layout-panel-left",60398),layoutPanelCenter:b("layout-panel-center",60399),layoutPanelJustify:b("layout-panel-justify",60400),layoutPanelRight:b("layout-panel-right",60401),layoutPanel:b("layout-panel",60402),layoutSidebarLeft:b("layout-sidebar-left",60403),layoutSidebarRight:b("layout-sidebar-right",60404),layoutStatusbar:b("layout-statusbar",60405),layoutMenubar:b("layout-menubar",60406),layoutCentered:b("layout-centered",60407),layoutSidebarRightOff:b("layout-sidebar-right-off",60416),layoutPanelOff:b("layout-panel-off",60417),layoutSidebarLeftOff:b("layout-sidebar-left-off",60418),target:b("target",60408),indent:b("indent",60409),recordSmall:b("record-small",60410),errorSmall:b("error-small",60411),arrowCircleDown:b("arrow-circle-down",60412),arrowCircleLeft:b("arrow-circle-left",60413),arrowCircleRight:b("arrow-circle-right",60414),arrowCircleUp:b("arrow-circle-up",60415),heartFilled:b("heart-filled",60420),map:b("map",60421),mapFilled:b("map-filled",60422),circleSmall:b("circle-small",60423),bellSlash:b("bell-slash",60424),bellSlashDot:b("bell-slash-dot",60425),commentUnresolved:b("comment-unresolved",60426),gitPullRequestGoToChanges:b("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:b("git-pull-request-new-changes",60428),searchFuzzy:b("search-fuzzy",60429),commentDraft:b("comment-draft",60430),send:b("send",60431),sparkle:b("sparkle",60432),insert:b("insert",60433),mic:b("mic",60434),thumbsDownFilled:b("thumbsdown-filled",60435),thumbsUpFilled:b("thumbsup-filled",60436),coffee:b("coffee",60437),snake:b("snake",60438),game:b("game",60439),vr:b("vr",60440),chip:b("chip",60441),piano:b("piano",60442),music:b("music",60443),micFilled:b("mic-filled",60444),gitFetch:b("git-fetch",60445),copilot:b("copilot",60446),lightbulbSparkle:b("lightbulb-sparkle",60447),lightbulbSparkleAutofix:b("lightbulb-sparkle-autofix",60447),robot:b("robot",60448),sparkleFilled:b("sparkle-filled",60449),diffSingle:b("diff-single",60450),diffMultiple:b("diff-multiple",60451),surroundWith:b("surround-with",60452),gitStash:b("git-stash",60454),gitStashApply:b("git-stash-apply",60455),gitStashPop:b("git-stash-pop",60456),dialogError:b("dialog-error","error"),dialogWarning:b("dialog-warning","warning"),dialogInfo:b("dialog-info","info"),dialogClose:b("dialog-close","close"),treeItemExpanded:b("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:b("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:b("tree-filter-on-type-off","list-selection"),treeFilterClear:b("tree-filter-clear","close"),treeItemLoading:b("tree-item-loading","loading"),menuSelection:b("menu-selection","check"),menuSubmenu:b("menu-submenu","chevron-right"),menuBarMore:b("menubar-more","more"),scrollbarButtonLeft:b("scrollbar-button-left","triangle-left"),scrollbarButtonRight:b("scrollbar-button-right","triangle-right"),scrollbarButtonUp:b("scrollbar-button-up","triangle-up"),scrollbarButtonDown:b("scrollbar-button-down","triangle-down"),toolBarMore:b("toolbar-more","more"),quickInputBack:b("quick-input-back","arrow-left")};var R9=class extends ue{getSymbolAtCursor(){let e=this.accessor.get(ir).activeTextEditor;if(!e)return;let{selection:r,document:n}=e,i=n.getWordRangeAtPosition(r.active);return r.isEmpty?{selectedText:n.getText(i),document:n,range:r}:void 0}async getDefinitionAtRange(e,r,n){if(this.accessor.get(Wt).isIgnored(e.uri,{includeCopilotIgnore:!0,includeGitIgnore:!1}))return;let o=this.accessor.get(Sn).getTreeSitterAST(e);if(o===void 0)return;let s=jc(r,e),a;n&&(a=await o.getNodeToExplain(s)),a??=await o.getNodeToDocument(s);let{startIndex:u,endIndex:c}="nodeToDocument"in a?a.nodeToDocument:a.nodeToExplain,l=new Ge(e.positionAt(u),e.positionAt(c));return{identifier:a.nodeIdentifier,text:e.getText(l),range:l,uri:e.uri,startIndex:u,endIndex:c}}async prepare(e,r,n){let i=this.getSymbolAtCursor(),o=this.accessor.get(Wt);if(!i||o.isIgnored(i.document.uri,{includeCopilotIgnore:!0,includeGitIgnore:!1}))return;let s,a=await this.getDefinitionAtRange(i.document,i.range,!1);if(this.accessor.get(ke).getConfig(Le.ExplainScopeSelection)&&a?.identifier!==i.selectedText){let c=this.accessor.get(ir).activeTextEditor;if(!c)return;let l=await this.selectEnclosingSymbolRange(c);if(l){let d=c.document,p=await this.getDefinitionAtRange(d,l,!1);if(!p)return;s={codeAtCursor:p.text,document:d,range:p.range,definitions:[],references:[]}}}a?.identifier===i.selectedText?s={codeAtCursor:a.text,document:i.document,range:a.range,definitions:[],references:[]}:s={codeAtCursor:i.document.lineAt(i.range.start).text,document:i.document,range:i.document.lineAt(i.range.start).range,definitions:[],references:[]},r.report(new Hc(w9.t("Searching for relevant definitions...")));try{for(let c of await this.accessor.get(ya).getDefinitions(i.document.uri,i.range.start)){let{uri:l,range:d}=rv(c)?{uri:c.targetUri,range:c.targetRange}:c;if(d.isEqual(i.range))continue;let p=await this.accessor.get(st).openTextDocument(l),f=await this.getDefinitionAtRange(p,d,!0);f&&s.definitions.push(f)}}catch{}return s}findEnclosingSymbol(e,r){for(let n of e)if(n.range.contains(r)){let i=this.findEnclosingSymbol(n.children,r);return i?[n,...i]:[n]}}async selectEnclosingSymbolRange(e){let r=await this.accessor.get(ya).getDocumentSymbols(e.document.uri);if(!r||r.length>0&&!r[0].hasOwnProperty("children")||!e.selection.isEmpty)return;let i=this.findEnclosingSymbol(r,e.selection.active);if(i?.length===1){let o=i[0];e.selection=new qc(o.range.start,o.range.end)}else if(i&&i.length>1){let o=i.reverse().map(a=>({label:`$(${ONe.toIcon(a.kind).id}) ${a.name}`,symbol:a}));if(!await this.accessor.get(SN).showQuickPick(o,{title:w9.t("Select an enclosing range to explain"),onDidSelectItem(a){let u=a.symbol;u&&(e.selection=new qc(u.range.start,u.range.end))}}))throw new Error(w9.t("Please specify a selection to explain."))}return e.selection}render(e,r){if(!e)return;let n=[...e.definitions];if(e.codeAtCursor){let{startIndex:s,endIndex:a}=jc(e.range,e.document);n.push({version:e.document.version,uri:e.document.uri,range:e.range,text:e.codeAtCursor,startIndex:s,endIndex:a})}let{usedContext:i,references:o}=dee(e.document,n);return vscpp(vscppf,null,vscpp("usedContext",{value:i}),vscpp("references",{value:o}),vscpp(pe,null,"I have the following code in the active editor:",vscpp("br",null),vscpp(nn,{languageId:e.document.languageId,code:e.codeAtCursor}),vscpp("br",null),!!e.definitions.length&&vscpp(vscppf,null,"Here are some relevant definitions for the symbols in my code:",vscpp("br",null)),!!e.definitions.length&&e.definitions.map(s=>vscpp(nn,{languageId:e.document.languageId,code:s.text}))))}};var ONe;(r=>{let t=new Map;t.set(0,Xr.symbolFile),t.set(1,Xr.symbolModule),t.set(2,Xr.symbolNamespace),t.set(3,Xr.symbolPackage),t.set(4,Xr.symbolClass),t.set(5,Xr.symbolMethod),t.set(6,Xr.symbolProperty),t.set(7,Xr.symbolField),t.set(8,Xr.symbolConstructor),t.set(9,Xr.symbolEnum),t.set(10,Xr.symbolInterface),t.set(11,Xr.symbolFunction),t.set(12,Xr.symbolVariable),t.set(13,Xr.symbolConstant),t.set(14,Xr.symbolString),t.set(15,Xr.symbolNumber),t.set(16,Xr.symbolBoolean),t.set(17,Xr.symbolArray),t.set(18,Xr.symbolObject),t.set(19,Xr.symbolKey),t.set(20,Xr.symbolNull),t.set(21,Xr.symbolEnumMember),t.set(22,Xr.symbolStruct),t.set(23,Xr.symbolEvent),t.set(24,Xr.symbolOperator),t.set(25,Xr.symbolTypeParameter);function e(n){let i=t.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=Xr.symbolProperty),i}r.toIcon=e})(ONe||={});var A9=class extends ue{render(e,r){let n=this.props.chatVariables.find(i=>i.name===kn.variableInfo.name);return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are a world-class coding tutor. Your code explanations perfectly balance high-level concepts and granular details. Your approach ensures that students not only understand how to write code, but also grasp the underlying principles that guide effective programming.",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(oa,null),vscpp(pi,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Examine the provided code selection and any other context like user question, related errors, project details, class definitions, etc.",vscpp("br",null),"2. If you are unsure about the code, concepts, or the user's question, ask clarifying questions.",vscpp("br",null),"3. If the user provided a specific question or error, answer it based on the selected code and additional provided context. Otherwise focus on explaining the selected code.",vscpp("br",null),"4. Provide suggestions if you see opportunities to improve code readability, performance, etc.",vscpp("br",null),vscpp("br",null),"Focus on being clear, helpful, and thorough without assuming extensive prior knowledge.",vscpp("br",null),"Use developer-friendly terms and analogies in your explanations.",vscpp("br",null),"Identify 'gotchas' or less obvious parts of the code that might trip up someone new.",vscpp("br",null),"Provide clear and relevant examples aligned with any provided context."),this.props.history&&vscpp(vscppf,null,vscpp(Vn,{priority:600,history:this.props.history})),vscpp(Ru,{priority:700}),!n&&vscpp(kn,{priority:900}),vscpp(a0,{priority:800}),vscpp(R9,{priority:800}),vscpp(Au,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var hte="Write an explanation for the active selection as paragraphs of text.",P9=class{constructor(e){this.accessor=e}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn(),u=a.request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=new qt(this.accessor,r,A9,{query:u,history:c,chatVariables:n}),d=await l.render(i,s),p=l.getReferences();for(let f of p)i.report(new vo(f.anchor));return a.addReferences(p),d}},N9=class{constructor(){this.id="explain";this.locations=[2,1];this.description=MNe.t("Explain how the selected code works");this.intentDetectionInput={sampleQuestion:"Write an explanation for the code above as paragraphs of text."}}static{this.ID="explain"}async invoke(e,r,n){let i=(a,u,c,l,d)=>new VT(a,u,c,d),o=r.location,s=await e.get(tt).getUserRequestEndpoint(o,this.id);if(o===1){let a=r.documentContext,u=new class extends P9{async buildPrompt(l,d,p,f,m,h){let g=l.getLatestTurn();return g?.request.message===""&&(g.request={message:hte,type:"user"}),super.buildPrompt(l,d,p,f,m,h)}}(e),c=a&&HM.createFactory();return{intent:this,location:o,endpoint:s,promptCrafter:u,createReplyInterpreter:c,responseProcessor:i}}return{intent:this,location:o,endpoint:s,promptCrafter:new P9(e),responseProcessor:i}}async asSlashCommand(e,r){return{command:this.id,detail:this.description,refer:e.get(ke).getConfig(Le.ExplainIntentRefer)}}};var on=we(require("vscode"));var Hy=class extends on.CodeAction{constructor(){super(...arguments);this.isAI=!0}},jy=class t{constructor(e){this.accessor=e}static{this.providedCodeActionKinds=[on.CodeActionKind.QuickFix]}static getSevereDiagnostics(e){let r=e.filter(n=>n.severity<=on.DiagnosticSeverity.Warning);return r.length===0?[]:r}static getDiagnosticsAsText(e){return e.map(r=>r.message).join(", ")}async provideCodeActions(e,r,n){if(!on.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions"))return;let o=[];if(!on.window.activeTextEditor)return o;let a=t.getSevereDiagnostics(n.diagnostics);if(a.length===0)return o;let u=a.map(m=>m.range).reduce((m,h)=>m.union(h)),c=new on.Selection(u.start,u.end),l=t.getDiagnosticsAsText(a),d=new Hy(on.l10n.t("Fix using Copilot"),on.CodeActionKind.QuickFix);d.diagnostics=a,d.command={title:d.title,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${l}`,position:u.start,initialSelection:c,initialRange:u}]};let p=new Hy(on.l10n.t("Explain using Copilot"),on.CodeActionKind.QuickFix);p.diagnostics=a;let f=`/explain ${l}`;return this.accessor.get(ke).getConfig(Le.ExplainIntentRefer)&&(f=`@${ky} ${f}`),p.command={title:p.title,command:"github.copilot.interactiveEditor.explain",arguments:[f]},o.push(d,p),o}},IA=class{static{this.providedCodeActionKinds=[on.CodeActionKind.RefactorRewrite]}constructor(e){this.logger=e.get(Ee).getLogger("RefactorsProvider"),this.telemetryService=e.get(Ue),this.parserService=e.get(Sn)}async provideCodeActions(e,r,n){if(!on.workspace.getConfiguration("github.copilot.editor").get("enableCodeActions"))return;let o=this.provideGenerateUsingCopilotCodeAction(e,r),s=await this.provideDocumentUsingCopilotCodeAction(e,r),a=await this.provideTestUsingCopilotCodeAction(e,r);return Br([s,o,a])}provideGenerateUsingCopilotCodeAction(e,r){let n;if(r.isEmpty){let o=e.lineAt(r.start.line).text;r.end.character===o.length&&/^\s*$/g.test(o)&&(n=on.l10n.t("Generate using Copilot"))}else{let o=e.getText(r);/^\s*$/g.test(o)||(n=on.l10n.t("Modify using Copilot"))}if(n===void 0)return;let i=new Hy(n,on.CodeActionKind.RefactorRewrite);return i.command={title:i.title,command:"vscode.editorChat.start",arguments:[{position:r.start,initialSelection:new on.Selection(r.start,r.end),initialRange:r}]},i}async provideDocumentUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getDocumentableNodeIfOnIdentifier(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getDocumentableNodeIfOnIdentifier failed")}if(s===void 0)return;let u=on.l10n.t("Document using Copilot: {0}",s.identifier),c=new Hy(u,on.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Ge(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return c.command={title:u,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/doc",initialRange:l}]},c}async provideTestUsingCopilotCodeAction(e,r){let n=e.offsetAt(r.start),i=e.offsetAt(r.end),o={startIndex:n,endIndex:i},s,a=this.parserService.getTreeSitterAST(e);if(a)try{s=await a.getTestableNode(o)}catch(d){this.logger.exception(d,"RefactorsProvider: getTestableNode failed"),this.telemetryService.sendGHTelemetryException(d,"RefactorsProvider: getTestableNode failed")}if(s===void 0)return;let u=on.l10n.t("Test using Copilot: {0}",s.identifier),c=new Hy(u,on.CodeActionKind.RefactorRewrite),l=s.nodeRange===void 0?void 0:new Ge(e.positionAt(s.nodeRange.startIndex),e.positionAt(s.nodeRange.endIndex));return c.command={title:u,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:"/tests",initialRange:l}]},c}};var FNe=require("util"),Vy=we(require("vscode"));var iat="application/vnd.code.notebook.error",D9=class{constructor(e){this.accessor=e}async provideCellStatusBarItems(e,r){if(e.kind===Vy.NotebookCellKind.Markup){let o=Vy.workspace.getConfiguration("notebook.experimental").get("cellChat");if(!o)return[];let s=e.document.getText().trim();if(!o||s.length===0)return[];let a="Generate code from markdown content",u=s;return[{text:"$(sparkle)",alignment:Vy.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:a,command:{title:a,command:"notebook.cell.insertCodeCellWithChat",arguments:[{index:e.index+1,input:u,autoSend:!0}]}}]}let n=e.outputs.flatMap(o=>o.items).find(o=>o.mime===iat);if(!n)return[];let i;try{let o=new FNe.TextDecoder;if(i=JSON.parse(o.decode(n.data)),!i.name&&!i.message)return[];let s="Fix using Copilot",a=[i.name,i.message].filter(Boolean).join(": ").replace(/\s*\(\S+,\s*line\s*\d+\)/,"");return[{text:"$(sparkle)",alignment:Vy.NotebookCellStatusBarAlignment.Left,priority:Number.MAX_SAFE_INTEGER-1,tooltip:s,command:{title:s,command:"vscode.editorChat.start",arguments:[{autoSend:!0,message:`/fix ${a}`}]}}]}catch(o){this.accessor.get(Ee).defaultLogger.error(`Failed to parse error output ${o}`)}return[]}};function UNe(t){let e=new $r,r=a=>{let u=`@${ky} /explain `;if(typeof a=="string"&&a)u=a;else{let c=kn.getCurrentSelection(t.get(ir));if(c){let l=zn.languages.getDiagnostics(c.activeDocument.uri),d=l.filter(f=>!!f.range.intersection(c.range));jy.getSevereDiagnostics(d).length?u+=jy.getDiagnosticsAsText(l):(u+=hte,u+=eA.formatSelection({languageId:c.languageId,selectedText:c.selectedText}))}}zn.interactive.sendInteractiveRequestToProvider("copilot",{message:u})},n=()=>zn.commands.executeCommand("vscode.editorChat.start",{message:"/generate "}),i=()=>zn.commands.executeCommand("vscode.editorChat.start",{message:`/${Gy.ID} `,autoSend:!0,initialRange:zn.window.activeTextEditor?.selection}),o=()=>zn.commands.executeCommand("vscode.editorChat.start",{message:"/tests ",autoSend:!0,initialRange:zn.window.activeTextEditor?.selection}),s=()=>{let a=zn.window.activeTextEditor;if(!a)return;let u=a.selection,c=zn.languages.getDiagnostics(a.document.uri).filter(l=>!!u.intersection(l.range)).map(l=>l.message).join(", ");return zn.commands.executeCommand("vscode.editorChat.start",{message:`/fix ${c}`,autoSend:!0,initialRange:zn.window.activeTextEditor?.selection})};return e.add(zn.commands.registerCommand("github.copilot.interactiveEditor.explain",r)),e.add(zn.commands.registerCommand("github.copilot.interactiveEditor.generate",n)),e.add(zn.commands.registerCommand("github.copilot.interactiveEditor.generateDocs",i)),e.add(zn.commands.registerCommand("github.copilot.interactiveEditor.generateTests",o)),e.add(zn.commands.registerCommand("github.copilot.interactiveEditor.fix",s)),e.add(zn.languages.registerCodeActionsProvider("*",new jy(t),{providedCodeActionKinds:jy.providedCodeActionKinds})),e.add(zn.languages.registerCodeActionsProvider("*",new IA(t),{providedCodeActionKinds:IA.providedCodeActionKinds})),e.add(zn.notebooks.registerNotebookCellStatusBarItemProvider("jupyter-notebook",new D9(t))),e}var k9=class extends ue{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are an AI that creates a detailed content outline for a Jupyter notebook on a given topic.",vscpp("br",null),Al(),vscpp(Mt,null),vscpp("br",null),Fee(),Fy(this.accessor),vscpp("br",null),"Additional Rules",vscpp("br",null),"DO NOT include Introduction or Conclusion section in the outline!",vscpp("br",null),"Focus only on sections that will need code!",vscpp("br",null),["","Generate the outline as two parts:","- First part is markdown bullet list of section titles","- Second part is the JSON data that will validate against this JSON schema, wrap the response in code block. We assume that a code block begins with ```[optionally the language] and ends with ```","","The JSON schema is:","{",'  "$schema": "http://json-schema.org/draft-07/schema#",','  "type": "object",','  "properties": {','	"description": {','	  "type": "string"',"	},",'	"sections": {','	  "type": "array",','	  "items": {','		"type": "object",','		"properties": {','		  "title": {','			"type": "string"',"		  },",'		  "content": {','			"type": "string"',"		  }","		},",'		"required": ["title", "content"]',"	  }","	}","  },",'  "required": ["sections"]',"}"].join(`
`),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid notebook creation question","","user: Creating Random Arrays with Numpy","","assistant: Here's an outline for a Jupyter notebook that creates Random Arrays with Numpy:","","* **Import Required Libraries**","* **Create Random Arrays**","* **Seed the Random Number Generator**","* **Generate Random Integers**","","```json","{",'  "description": "A Jupyter notebook that creates Random Arrays with Numpy.",','  "sections": [',"    {",'      "title": "Import Required Libraries",','      "content": "Import the necessary libraries, including NumPy."',"    },","    {",'      "title": "Create Random Arrays",','      "content": "Use NumPy to create random arrays of various shapes and sizes, including 1D, 2D, and 3D arrays."',"    },","    {",'      "title": "Seed the Random Number Generator",','      "content": "Use the seed() function to seed the random number generator for reproducibility."',"    },","	{",'	  "title": "Generate Random Integers",','	  "content": "Use the randint() function to generate random integers within a specified range."',"	}","  ]","}","```"].join(`
`))),this.props.chatVariables&&Object.keys(this.props.chatVariables).length>0?vscpp(Au,{priority:900,chatVariables:this.props.chatVariables,query:`Create notebook: ${this.props.query}`}):vscpp(pe,{priority:900},"Create notebook: ",this.props.query))}},L9=class extends ue{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,this.props.history&&vscpp(gte,{messages:this.props.history.chatMessages??[]}),vscpp(rt,{priority:1e3},"You are an AI that writes Python code for a single section of a Jupyter notebook.",vscpp("br",null),Al(),vscpp(Mt,null),vscpp("br",null),Fy(this.accessor),"Your output should be valid Python code with inline comments.",vscpp("br",null),"You should return the code directly without any explantion.",vscpp("br",null),"You should not print message to explain the code or purpose of the code.",vscpp("br",null),"You should return the code directly, without wrapping it inside \\`\\`\\`.",vscpp("br",null),"Please make sure that the new code is syntactically valid Python code. It can be validated by running it in a Python interpreter.",vscpp("br",null),"For example, it should pass the validation through builtin module codeop \\`codeop.compile_command(statement)\\`.",vscpp("br",null)),vscpp(pe,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebok section: ",this.props.section.content,vscpp("br",null),"Given this information, write all the code for this section and this section only.",vscpp("br",null),"The request to generate the outline of the notebook is already completed.",vscpp("br",null),"Here is the request details for the outline generation:",vscpp("br",null),vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Please make sure the new code you generate works fine with the code above.",vscpp("br",null))))}},gte=class extends ue{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(pe,{priority:800},i.content));break;case"assistant":n.push(vscpp(wl,{priority:800},i.content));break;case"system":n.push(vscpp(rt,{priority:100},i.content));break;default:break}return vscpp(vscppf,null,n)}},O9=class extends ue{async prepare(){return{}}render(e,r){return vscpp(vscppf,null,vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are an AI that improves Python code with respect to readability and performance for a single section of a Jupyter notebook.",vscpp("br",null),Al(),vscpp(Mt,null),vscpp("br",null),Fy(this.accessor),"You MUST return Python code as your answer.",vscpp("br",null),"DO NOT explain in inline comments for your the improvements.",vscpp("br",null),"You should not print messages to explain the code or purpose of the code.",vscpp("br",null),"Make sure the new code you generate works fine with the code above.",vscpp("br",null),"Make sure if a module is already imported in the code above, it can be used in the new code directly without importing it again. For the same reason, if a variable is defined above, it can be used in new code as well. ",vscpp("br",null),"Make sure to return the code only - don't give an explanation of the improvements.",vscpp("br",null)),vscpp(pe,{priority:900},"Overall topic of the notebook: ",this.props.description,vscpp("br",null),"Title of the notebook section: ",this.props.section.title,vscpp("br",null),"Description of the notebook section: ",this.props.section.content,vscpp("br",null),"Code in the notebook so far:",vscpp("br",null),vscpp("br",null),this.props.existingCode,vscpp("br",null),vscpp("br",null),"Given this information, suggest improvements for the following code:",vscpp("br",null),vscpp("br",null),this.props.code,vscpp("br",null),vscpp("br",null))))}};var M9=class{constructor(e,r,n){this.turn=r;this.progress=n;this.stagedTextToApply="";this.reporting=!0;this._appliedText="";this._resolvedContentDeferredPromise=new ec;this._incodeblock=!1;this.conversationCallback=new cm(i=>this.applyDelta(i))}get appliedText(){return Promise.resolve(this._appliedText)}apply(e){this.conversationCallback.apply(e)}applyDeltaToTurn(e){this.turn.response||(this.turn.response={message:e,type:"model"}),this._appliedText+=e,this.turn.response.message+=e}applyDeltaToProgress(e){this.progress.markdown(e)}applyDelta(e){if(!this.reporting){this.applyDeltaToTurn(e);return}if(e=this.stagedTextToApply+e,this._incodeblock){let n=e.indexOf("```");if(n===-1){this.stagedTextToApply=e,this.applyDeltaToProgress(""),this.applyDeltaToTurn("");return}else{this._incodeblock=!1,e=e.substring(0,n)+"```";try{this.applyDeltaToTurn(e)}catch{}finally{this.reporting=!1,this.stagedTextToApply="",this._resolvedContentDeferredPromise.complete(new Ob(""))}return}}let r=e.indexOf("```");if(r!==-1){this._incodeblock=!0;let n=e.indexOf("```",r+3);if(n!==-1){this._incodeblock=!1,this.applyDeltaToProgress(e.substring(0,r)),this.applyDeltaToProgress(e.substring(n+3)),this.applyDeltaToTurn(e),this.reporting=!1,this.stagedTextToApply="";return}else{let i=e.substring(0,r);this.applyDeltaToProgress(i),this.applyDeltaToTurn(e),this.stagedTextToApply="",this.progress.progress("Thinking ..."),this._resolvedContentDeferredPromise.p.then(o=>this.progress.push(o));return}}this.applyDeltaToProgress(e),this.applyDeltaToTurn(e),this.stagedTextToApply=""}};async function BNe(t,e,r,n,i,o,s,a){let u={messageSource:"slash.newNotebook"},{messages:c}=await us(t,e,L9,{history:n,description:i,section:o,existingCode:s}),d=await t.get(wr).fetchOne(c,void 0,a,2,e,{temperature:r.temperature,top_p:r.topP},u);if(d.type!=="success")return;let p=Su(d.value);return p.length>0?p[0].code:d.value}async function qNe(t,e,r,n,i,o,s,a){let u={messageSource:"slash.newNotebook"},{messages:c}=await us(t,e,O9,{description:n,section:i,existingCode:o,code:s}),d=await t.get(wr).fetchOne(c,void 0,a,2,e,{temperature:r.temperature,top_p:r.topP},u);if(d.type==="success")return d.value}var F9=class extends ue{render(){return vscpp(vscppf,null,vscpp(rt,null,vscpp(vte,null),vscpp(Mt,null)),vscpp(pe,null,vscpp(yte,{diff:this.props.diff}),vscpp(_te,null)))}},vte=class extends ue{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to commit some changes to a Git repository.")}},_te=class extends ue{render(){let e=this.accessor.get(gt),n=this.accessor.get(ke).getConfig(Le.LocaleOverride),i=n!=="auto"?n:e.language,o=oA.find(s=>i===s);return vscpp(vscppf,null,"The commit message should be short and concise that describes the changes in the code.",vscpp("br",null),"The commit message should start with *** and end with ***.",vscpp("br",null),o&&i!=="en"&&vscpp(vscppf,null,"The commit message should be translated into the following locale: ",i))}},yte=class extends ue{render(){return vscpp(vscppf,null,"Below is a git diff that contains the changes that the developer has made:",vscpp("br",null),this.props.diff.join(`

`),vscpp("br",null),"Based on the git diff, please suggest a commit message for the developer to use.")}};var yS=class{constructor(e){this.accessor=e;this.telemetryService=e.get(Ue),this.logger=e.get(Ee).getPromptResponseLogger("git commit message generator"),this.options=e.get(bs)}async generateGitCommitMessage(e,r,n){let i=Date.now(),o=await this.accessor.get(tt).getUserRequestEndpoint(3),s=Math.floor(o.modelMaxPromptTokens*4/3),a=this.processDiff(e,s),c=await new qt(this.accessor,o,F9,{diff:a}).render(void 0,void 0),l=Math.min(this.options.temperature*(1+r),2),d=Date.now(),p=await this.accessor.get(wr).fetchOne(c.messages,void 0,n,3,o,{temperature:l,top_p:this.options.topP},{messageSource:"command.generateGitCommitMessagePrompt"});if(this.logger.logResponse(p),this.telemetryService.sendMSFTTelemetryEvent("git.generateCommitMessage",{model:o.model,requestId:p.requestId,responseType:p.type},{attemptCount:r,originalDiffFileCount:e.length,originalDiffLength:e.join("").length,processedDiffFileCount:a.length,processedDiffLength:a.join("").length,timeToRequest:d-i,timeToComplete:Date.now()-i}),p.type==="success")return this.processGeneratedCommitMessage(p.value)}processDiff(e,r){let n=[...e],i=r-Math.floor(r*.1),o=n.join(`

`).length;if(o>i)for(n.sort((s,a)=>s.length-a.length);o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedCommitMessage(e){let r=Array.from(e.matchAll(/\*{3}/gm),o=>o.index);if(r.length<2)return e;let n=r[0],i=r[r.length-1];return n!==void 0&&i!==void 0?e.substring(n+3,i):e}};var Ste=we(require("path"));function bte(t){let e=t.trim();if(e.length>2&&e[0]==="/"&&e[e.length-1]==="/")try{return new RegExp(e.substring(1,e.length-1),"i")}catch{console.error(`Malformed grep regex: ${t}`)}return new RegExp(Toe(t),"i")}var GNe=we(require("crypto"));function HNe(t){let e=GNe.createHash("sha256");return e.update(t),e.digest("hex")}var pEr=Ste.default.join(__dirname,".."),xte=class{constructor(e,r){this._opts=e;this._suiteOpts=r;this._cachedMySkip=void 0}get optional(){return this._suiteOpts.optional?!0:this._opts.optional??!1}get skip(){return this._suiteOpts.skip?!0:this.mySkip}get mySkip(){return this._cachedMySkip===void 0&&(this._cachedMySkip=this._opts.skip?.()??!1),this._cachedMySkip}get location(){return this._opts.location}get conversationPath(){return this._opts.conversationPath}},Ete=class{constructor(e,r,n,i){this.suite=n;this._runner=i;this.description=e.description,this.language=e.language,this.model=e.model,this.options=new xte(r,n.options)}get fullName(){return`${this.suite.fullName} ${this.language?`[${this.language}] `:""}- ${this.description}${this.model?` - (${this.model})`:""}`}get outcomeCategory(){return this.suite.outcomeCategory}get outcomeFileName(){return oat(this.fullName)}run(e){return this._runner(e)}toString(){return`SimulationTest: ${this.fullName}`}};function oat(t){let e="";return t.endsWith(" - (gpt-4)")?(t=t.substring(0,t.length-10),e="-gpt-4"):t.endsWith(" - (gpt-3.5-turbo)")&&(t=t.substring(0,t.length-18),e="-gpt-3.5-turbo"),`${sat(t).substring(0,60)}${e}.json`.replace(/-+/g,"-")}var Tte=class{constructor(e){this._opts=e;this._cachedSkip=void 0}get optional(){return this._opts.optional??!1}get skip(){return this._cachedSkip===void 0&&(this._cachedSkip=this._opts.skip?.()??!1),this._cachedSkip}get location(){return this._opts.location}},U9=class{constructor(e,r={},n=[]){this.tests=n;this.title=e.title??"generic",this.subtitle=e.subtitle,this.location=e.location,this.options=new Tte(r)}get fullName(){return`${this.title} ${this.subtitle?`(${this.subtitle}) `:""}[${this.location}]`}get outcomeCategory(){return`${this.title}${this.subtitle?`-${this.subtitle}`:""}-${this.location}`}},bS=new class{constructor(){this.defaultSuite=new U9({location:"inline"});this.suites=[this.defaultSuite];this.currentSuite=this.defaultSuite;this.testNames=new Set;this._filter=()=>!0}setInputPath(t){this._inputPath=t}setFilters(t,e,r){this._testPath=t;let n=[];if(e){let i=typeof e=="string"?bte(e):void 0;if(i)n.push(o=>i.test(o.fullName));else{let o=Array.isArray(e)?e:[e];for(let s of o){let a=String(s).toLowerCase(),u=c=>c.toLowerCase().indexOf(a)>=0;n.push(c=>u(c.fullName))}}}if(r){let i=bte(r);n.push(o=>!i.test(o.fullName))}this._filter=i=>n.every(o=>o(i))}getAllSuites(){return this.suites}getAllTests(){return this.suites.reduce((r,n)=>r.concat(n.tests),[]).filter(this._filter).sort((r,n)=>r.fullName.localeCompare(n.fullName))}registerTest(t,e,r){let n=new Ete(t,e,this.currentSuite,r);if(this.testNames.has(n.fullName))throw new Error(`Cannot have two tests with the same name: ${n.fullName}`);this.testNames.add(n.fullName),this.currentSuite.tests.push(n)}registerSuite(t,e,r){if(this._testPath&&e.location!==void 0){let i=Ste.default.basename(e.location.path),o=i.replace(/\.[^/.]+$/,"");if(this._testPath!==i&&this._testPath!==o)return}let n=new U9(t,e);this.suites.push(n),this.invokeSuiteFactory(n,r)}invokeSuiteFactory(t,e){try{this.currentSuite=t,e(this._inputPath)}finally{this.currentSuite=this.defaultSuite}}};function xS(t){try{let e=new Error;throw Error.captureStackTrace(e,t),e}catch(e){let r=e.stack.split(`
`).at(1);if(!r){console.log(e.stack);return}let n=/\((.+):(\d+):(\d+)\)/,i=/at (.+):(\d+):(\d+)/,o=r.match(n)??r.match(i);if(!o){console.log(r);return}return{path:o[1],position:{line:Number(o[2])-1,character:Number(o[3])-1}}}}function CA(t,e){bS.registerSuite(t,{optional:!1,location:xS(CA)},e)}CA.optional=function(t,e,r){bS.registerSuite(e,{optional:!0,skip:t,location:xS(CA.optional)},r)};CA.skip=function(t,e){bS.registerSuite(t,{optional:!0,skip:()=>!0,location:xS(CA.skip)},e)};function wA(t,e,r){t=typeof t=="string"?{description:t}:t,bS.registerTest(t,{optional:!1,location:xS(wA),...r},e)}wA.optional=function(t,e,r,n){bS.registerTest(e,{optional:!0,skip:t,location:xS(wA.optional),...n},r)};wA.skip=function(t,e,r){bS.registerTest(t,{optional:!0,skip:()=>!0,location:xS(wA.skip),...r},e)};var VNe=se("ISimulationTestRuntime");var jNe=125;function sat(t){let e=t.replace(/[^a-zA-Z0-9]/g,"-").replace(/-+/g,"-").toLowerCase();return e.length>jNe?`${e.substring(0,jNe)}-${HNe(e).substring(0,8)}`:e}var B9=class t extends ue{constructor(){super(...arguments);this._logger=this.accessor.get(Ee).getLogger("DefinitionAtPosition")}static{this.DEFAULT_TIMEOUT_MS=200}async prepare(){let r=this.accessor.get(Jr).extensionMode===_a.Test?0:this.props.timeoutMs===void 0?t.DEFAULT_TIMEOUT_MS:this.props.timeoutMs,n=await this.findDefinition(r);return this._logger.debug(`Found ${n.length} definition(s)`),n.length>0&&this._logger.debug("Definitions found",JSON.stringify(n,null,"	")),{definitions:n}}render(r,n){if(r===void 0)return;let{definitions:i}=r;return vscpp(pe,null,"Relevant definition",i.length>1?"s":"",": ",vscpp("br",null),vscpp("br",null),i.length===0?this.props.document.lineAt(this.props.position.line).text:i.map(o=>{let s=M8(o.languageId),u=`${o.filePath?`${Dc(o.languageId).lineCommentToken} FILEPATH: ${o.filePath}
`:""}${o.code}`;return vscpp(nn,{code:u,languageId:s})}))}async findDefinition(r){let{document:n}=this.props,i=this.accessor.get(ya);async function o(u){try{let c=await i.getImplementations(n.uri,u);return c.length>0?c:await i.getDefinitions(n.uri,u)}catch{return[]}}let s=this.props.position,a=await wu(this.accessor,n,r*3,()=>o(s),[]);return Promise.all(a.map(async u=>{let{uri:c,range:l}=rv(u)?{uri:u.targetUri,range:u.targetRange}:u,d=await this.accessor.get(st).openTextDocument(c),p=Ub(d.languageId),f;if(p===void 0)f=d.lineAt(l.start.line).text;else{let m=await _S(this.accessor,{document:d,language:Dc(n.languageId),wholeRange:l,selection:new qc(l.start,l.end),fileIndentInfo:void 0});f=d.getText(m.range)}return{languageId:d.languageId,filePath:d.uri.path,code:f}}))}};var q9=class t{constructor(e){this.accessor=e;this.promptLogger=this.accessor.get(Ee).getPromptResponseLogger("NewSymbolNamesProvider")}async isEnabled(){return this.accessor.safeGet(VNe)||this.accessor.get(ke).getConfig(Le.RenameSuggestionsEnabled)||await this.accessor.get(kr).getTreatmentVariableAsync("vscode","copilotchat.renameSuggestionsEnabled",!0)}async provideNewSymbolNames(e,r,n){if(!await this.isEnabled())return null;let i=await this.accessor.get(tt).getNonUserRequestEndpoint(),o=await this.computePrompt(e,r,i,n);this.promptLogger.logPrompt(o.messages);let s=this.accessor.get(wr),a=new Cm(!1),u=await s.fetchOne(o.messages,void 0,n,3,i),c=a.elapsed();this.promptLogger.logResponse(u);let l=e.languageId;switch(u.type){case"success":{let d=u.value,p=[],f=/\[.*?\]/gs,m=!1,h=d.match(f);if(h)try{let g=JSON.parse(h[0]);Array.isArray(g)&&(p=g.filter(v=>typeof v=="string"),p.length>0&&(m=!0))}catch(g){this.promptLogger.exception(g,"NewSymbolNamesProvider: Failed to parse from the model response")}return m||this._sendInternalTelemetry({languageId:l,reply:d}),this._sendPublicTelemetry({languageId:l,fetchResultType:u.type,fetchTime:c,didModelRespectFormat:m,symbolNamesCount:p.length}),p.map(g=>new Cse(g,[wse.AIGenerated]))}default:return this._sendPublicTelemetry({languageId:l,fetchResultType:u.type,fetchTime:c}),null}}computePrompt(e,r,n,i){class o extends ue{render(u,c){let l={document:e,fileIndentInfo:void 0,language:Dc(e),selection:new qc(r.start,r.end),wholeRange:r},d=e.getText(r),p=t._determinePrefix(d),f=p?` keeping prefix '${p}'`:"";return vscpp(vscppf,null,vscpp(rt,null,"You are a distinguished software engineer.",vscpp("br",null),"Each code block starts with ``` and ",l.language.lineCommentToken," FILEPATH.",vscpp("br",null)),vscpp(a0,{range:r,timeoutMs:350}),vscpp(B9,{document:e,position:r.start}),vscpp(pe,null,"Think of the purpose of `",d,"` in the given code. Think of several names that reflect what `",d,"` is and what it does",f,". Follow existing naming conventions. Reply with a JSON string array of new names for `",d,"`."))}}return new qt(this.accessor,n,o,{}).render(void 0,i)}static _determinePrefix(e){return e.match(/^([\.\$\_]+)/)?.[0]}_sendPublicTelemetry({languageId:e,fetchResultType:r,fetchTime:n,didModelRespectFormat:i,symbolNamesCount:o}){this.accessor.safeGet(Ue)?.sendMSFTTelemetryEvent("provideRenameSuggestions",{languageId:e,fetchResultType:r},{fetchTime:n,didModelRespectFormat:i?1:0,symbolNamesCount:o??-1})}_sendInternalTelemetry({languageId:e,reply:r}){this.accessor.safeGet(Ue)?.sendInternalMSFTTelemetryEvent("provideRenameSuggestionsIncorrectFormatResponse",{languageId:e,reply:r})}};var RA=we(require("vscode"));var G9=class t{constructor(e){this.accessor=e;this.disposables=new $r;this.lastContext={commitMessages:[],patches:[]};this.internalLogger=e.get(Ee).getPromptResponseLogger("GitHub pull request title and description generator"),this.logger=e.get(Ee).getLogger("githubTitleAndDescriptionProvider"),this.logger.info("Initializing GitHub PR title and description provider provider."),this.options=e.get(bs)}dispose(){this.disposables.dispose()}isRegenerate(e,r){if(e.length!==this.lastContext.commitMessages.length||r.length!==this.lastContext.patches.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==this.lastContext.commitMessages[n])return!1;for(let n=0;n<r.length;n++)if(r[n]!==this.lastContext.patches[n])return!1;return!0}async provideTitleAndDescription(e,r,n){let i,o,s,a;if(LP(e))i=e,o=r,a=n;else{let f=e;i=f.commitMessages,o=f.patches,s=f.issues,a=r}let u=await this.accessor.get(tt).getUserRequestEndpoint(3),c=Math.floor(u.modelMaxPromptTokens*4/3),l=this.createPRTitleAndDescriptionPrompt(i,o,s,c),d=[{role:"system",content:l}];this.internalLogger.logPrompt(d);let p=await this.accessor.get(wr).fetchOne(d,void 0,a,3,u,{temperature:this.isRegenerate(i,o)?this.options.temperature+.1:this.options.temperature,top_p:this.options.topP},{messageSource:"extension.providePullRequestTitleAndDescription"});if(this.internalLogger.logResponse(p),this.lastContext={commitMessages:i,patches:o},p.type==="success")return t.parseFetchResult(p.value)}static parseFetchResult(e,r=!0){e=e.trim();let n=e,i=n.indexOf("+++");if(i===-1)return;let o=n.lastIndexOf("+++");n=n.substring(i+3,o>i+3?o:void 0).trim().replace(/\+\+\+?(\n)\+\+\+/,"+++");let s=n.split("+++").filter(l=>l.trim().length>0),a;if(s.length===1)a=s[0].split(`
`);else if(s.length>1){let l=s.slice(1).map(d=>d.split(`
`)).flat().filter(d=>d.trim().length>0);a=[s[0],...l]}else return;let u,c;if(a.length===1){if(u=a[0].trim(),r&&e.includes(`
`)&&e.split("+++").length===3)return this.parseFetchResult(e+"+++",!1)}else if(a.length>1){u=a[0].trim(),c="";let l=a.slice(1);for(let d of l)d.includes("commit message")||(c+=`${d.trim()}

`)}if(u)return u=u.replace(/Title\:\s/,"").trim(),c&&(c=c.replace(/Description\:\s/,"").trim()),{title:u,description:c}}createPRTitleAndDescriptionPrompt(e,r,n,i){let o=e.map(l=>`* ${l}`).join(`
`),s=i-Math.floor(i*.1)-o.length,a=r.join(`

`).length;if(a>s)for(r.sort((l,d)=>l.length-d.length);a>s&&r.length>0;){let l=r.pop();a-=l.length}let u;n&&n.length>0?u=`You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository to fix the following issues:
${n.map(d=>`
-------
Issue ${d.reference}:
${d.content}`).join()}
-------
`:u=`You are an AI assistant for a software developer who is about to make a pull request to a GitHub repository.
`;let c;return n&&n.length>0?c=`Example One:
	+++Batch mark/unmark files as viewed
	+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.
	Fixes #4520+++
Example two:
	+++Fallback to hybrid after 20 process ports
	+++Additionally the \`remote.autoForwardPortsSource\` setting has been updated to remove the \`markdownDescription\` reference to a reload being required for changes to take effect.
	Fixes microsoft/vscode-internalbacklog#4533+++`:c=`Example One:
	+++Batch mark/unmark files as viewed
	+++Previously, when marking/unmarking a folder as viewed, a request was sent for every single file. This PR ensures that only one request is sent when marking/unmarking a folder as viewed.+++
Example two:
	+++Fallback to hybrid after 20 process ports
	+++Additionally the \`remote.autoForwardPortsSource\` setting has been updated to remove the \`markdownDescription\` reference to a reload being required for changes to take effect.+++`,`
${Al()}
${lA()}

${u}
Pull requests have a short and concise title that describes the changes in the code and a slightly longer description.
The description can be more detailed but should still be concise. Do not list commits, files or patches. Do not make up an issue reference if the pull request isn't fixing an issue.
The title and description of a pull request should be markdown and start with +++ and end with +++. Here are two good examples.
--------
${c}
--------
These are the commits that will be included in the pull request you are about to make:
${o}
Below is a list of git patches that contain the file changes for all the files that will be included in the pull request:
${r.join(`

`)}

Based on the git patches and on the git commit messages above, the title and description of the pull request should be:
`}};var H9=class extends G9{constructor(r){super(r);this.initializeGitHubPRExtensionApi()}getExtension(){return RA.extensions.getExtension("github.vscode-pull-request-github")}initializeGitHubPRExtensionApi(){let r=this.getExtension(),n=async()=>{if(r){let i=await r.activate();this.logger.info("Successfully activated the GitHub.vscode-pull-request-github extension."),this.gitHubExtensionApi=i,this.registerTitleAndDescriptionProvider()}};if(r)n();else{this.logger.info("GitHub.vscode-pull-request-github extension is not yet activated.");let i=RA.extensions.onDidChange(()=>{r=this.getExtension(),r&&(n(),i.dispose())});this.disposables.add(i)}}async registerTitleAndDescriptionProvider(){if(this.gitHubExtensionApi)try{this.disposables.add(this.gitHubExtensionApi.registerTitleAndDescriptionProvider(RA.l10n.t("Generate with Copilot"),this)),this.logger.info("Successfully registered GitHub PR title and description provider.")}catch{}}};var Pl=we(require("vscode"));var j9=class{provideMappedEdits(e,r,n,i){if(n.documents.length===0)return null;let o=n.documents[0],s=e.uri.toString(),a=o.find(_=>_.uri.toString()===s);if(!a)return null;let u=a.ranges;if(u.length!==1||r.length!==1)return null;let c=u[0],l=r[0];if(!e.getText(new Pl.Range(new Pl.Position(c.start.line,0),new Pl.Position(c.start.line,c.start.character))).match(/^\s*$/))return null;let p=Pl.window.activeTextEditor,f;if(p&&p.options&&e.languageId===p.document.languageId){let _=p.options,y=typeof _.tabSize=="number"?_.tabSize:4,E=typeof _.insertSpaces=="boolean"?_.insertSpaces:!0;f={tabSize:y,insertSpaces:E}}let m=new Pl.Range(new Pl.Position(c.start.line,0),c.end),h=e.getText(m),g=m0(l.split(`
`),{whichLine:"topMost",lines:h.split(`
`)},f).join(`
`),v=new Pl.WorkspaceEdit;return v.replace(e.uri,m,g),v}};var JNe=we(require("path")),ZNe=require("util"),Et=require("vscode");var aat=["dockerfile","license","makefile","readme","procfile","gemfile","rakefile","jenkinsfile","vagrantfile"];function zNe(t){return/\.[^/.]+$/.test(t)&&aat.indexOf(t.toLowerCase())===-1}var R0=we(xn()),Z9=we(require("path"));var Ite=we(xn()),YNe=we(require("path"));var V9=class extends ue{async prepare(r,n,i){if(!this.props.useTemplates)return{};if(!n)throw new Error("Progress is required");this._embeddingCompute??=this.accessor.get(vi);let o=await this._embeddingCompute?.computeEmbeddings([this.props.query],void 0);if(!o)return{};let s=this.accessor.get(AN);n.report(new Hc(Ite.t("Searching project template index...")));let a=await s.nClosestValues(o[0],1,.75);if(a.length===0)return{};{let u=a[0]?.split(":"),c=u[0].trim(),l=u[1].trim(),d=u[2].trim()===""?".":u[2].trim();if(!c||!l||!d)return{};let p=this.accessor.get(Gm),f=await iA(n,new Hc(Ite.t("Fetching project contents...")),p.getRepositoryItems(c,l,d),500),m;return d==="."?m=`httpx://github.com/${c}/${l}`:m=YNe.default.dirname(f[0]?.html_url),this._metadata=new w0(c,l,d,f),{url:m}}}render(r){return vscpp(vscppf,null,!this.props.useTemplates&&vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are a VS Code assistant. Your job is to suggest a filetree directory structure for a project that a user wants to create. If a step does not relate to filetree directory structures, do not respond. Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(oa,null),vscpp(pi,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You should generate a markdown file tree structure for the same project and include it in your response.",vscpp("br",null),"You should only list common files for the user's desired project type.",vscpp("br",null),"You should always include a README.md file which describes the project.",vscpp("br",null),"Do not include folders and files generated after compiling, building or running the project such as node_modules, dist, build, out",vscpp("br",null),"Do not include image files such as png, jpg, ico, etc",vscpp("br",null),"Do not include any descriptions or explanations in your response.",vscpp("br",null),"Always start your response for valid questions with [COPILOT]",vscpp("br",null),["","Examples:","","Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.","","## Valid setup question","","User: Create a TypeScript express app","Assistant:","","[COPILOT]","Sure, here's a proposed directory structure for a TypeScript Express app:","","```filetree","my-express-app","\u251C\u2500\u2500 src","\u2502   \u251C\u2500\u2500 app.ts","\u2502   \u251C\u2500\u2500 controllers","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u251C\u2500\u2500 routes","\u2502   \u2502   \u2514\u2500\u2500 index.ts","\u2502   \u2514\u2500\u2500 types","\u2502       \u2514\u2500\u2500 index.ts","\u251C\u2500\u2500 package.json","\u251C\u2500\u2500 tsconfig.json","\u2514\u2500\u2500 README.md","```","","## Invalid setup question","","User: Create a horse project","Assistant: Sorry, I don't know how to set up a horse project."].join(`
`))),this.props.history&&vscpp(vscppf,null,vscpp(Vn,{priority:600,history:this.props.history.filter(n=>n.intentInvocation?.intent.id===$Ne||n.request.type!=="user"&&n.request.type!=="follow-up")})),this.props.useTemplates&&vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are a VS Code assistant. Your job is to format the given information as shown in the example below.",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(oa,null),vscpp(pi,null),"The current question is related to sample GitHub repositories.",vscpp("br",null),"The user cannot see the context you are given, so you must not mention it.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the given context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"Always start your response for valid questions with [TEMPLATES]",vscpp("br",null),"Use the URL provided to create the markdown link in your response",vscpp("br",null),"Please respond as shown below only if URL is provided in the context.",vscpp("br",null),"[Valid Example]:",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample",vscpp("br",null),"[Output]",vscpp("br",null),"[TEMPLATES]",vscpp("br",null),"Sure, here's a GitHub sample project to help you get started on creating a VSCode extension with a walkthrough contribution: [Walkthrough Sample](https://github.com/microsoft/vscode-extension-samples/tree/main/getting-started-sample)",vscpp("br",null),vscpp("br",null),"Please respond with NA as shown below if no URL is provided in the context.",vscpp("br",null),"[Invalid Example Input]: ",vscpp("br",null),"User: Create a vscode extension with a walkthrough contribution.",vscpp("br",null),"URL: ",vscpp("br",null),"[Output] NA ",vscpp("br",null),vscpp("br",null),r.url&&vscpp(vscppf,null,"Below is the URL you should use as input",vscpp("br",null),"URL: ",r.url,vscpp("br",null)))),vscpp(pe,{priority:900},this.props.query),this._metadata&&vscpp(vscppf,null,vscpp("meta",{value:this._metadata})))}},w0=class extends im{constructor(r,n,i,o){super();this.org=r;this.repo=n;this.path=i;this.githubRepoItems=o}};(e=>{function t(r){return r instanceof e}e.is=t})(w0||={});var z9=class extends ue{render(){return vscpp(vscppf,null,this.props.history&&vscpp($9,{messages:this.props.history}),vscpp(rt,{priority:1e3},"You are a VS Code assistant. Your job is to generate the contents of a file in a project when given the user description, specification and tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(pi,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and give me contents for just the file ",this.props.filePath," within this project. The code should not contain bugs.",vscpp("br",null),"If the file is supposed to be empty, please respond with a code comment saying that this file is intentionally left blank.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null)),vscpp(pe,{priority:900},"Generate the contents of the file: ",this.props.filePath," ",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"The project should adhere to the following specification:",vscpp("br",null),this.props.projectSpecification,vscpp("br",null)))}},Y9=class extends ue{render(){return vscpp(vscppf,null,this.props.history&&vscpp($9,{messages:this.props.history}),vscpp(rt,{priority:1e3},"You are a VS Code assistant. Your job is to generate the project specification when given the user description and file tree structure of the project that a user wants to create. ",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(pi,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Think step by step and respond with a text description that lists and summarizes each file inside this project.",vscpp("br",null),"List the classes, types, interfaces, functions, and constants it exports and imports if it is a code file.",vscpp("br",null),"Consider filenames and file extensions when determining the programming languages used in the project. List any special configurations or settings required for configuration files such as package.json or tsconfig.json to help compile the project successfully",vscpp("br",null),"You should be as specific as possible when listing the public properties and methods for each exported class.",vscpp("br",null),"Do not use code blocks or backticks. Do not include any text before or after the file contents.",vscpp("br",null),"Do not include comments in json files.",vscpp("br",null),"Do not use code blocks or backticks.",vscpp("br",null),"Do not include product names such as Visual Studio in the comments.",vscpp("br",null),"Below you will find a set of examples of what you should respond with. Please follow these examples as closely as possible.",vscpp("br",null),vscpp("br",null),"## Valid question",vscpp("br",null),"User: I want to set up the following project: Create a TypeScript Express app",vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown ",vscpp("br",null),"my-express-app",vscpp("br",null),"\u251C\u2500\u2500 src",vscpp("br",null),"\u2502   \u251C\u2500\u2500 app.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 controllers",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u251C\u2500\u2500 routes",vscpp("br",null),"\u2502   \u2502   \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u2502   \u2514\u2500\u2500 types",vscpp("br",null),"\u2502       \u2514\u2500\u2500 index.ts",vscpp("br",null),"\u251C\u2500\u2500 package.json",vscpp("br",null),"\u251C\u2500\u2500 tsconfig.json",vscpp("br",null),"\u2514\u2500\u2500 README.md",vscpp("br",null),"\\`\\`\\`",vscpp("br",null),"## Valid response",vscpp("br",null),"Assistant: The project has the following files:",vscpp("br",null),"\\`src/app.ts\\`: This file is the entry point of the application. It creates an instance of the express app and sets up middleware and routes.",vscpp("br",null),"\\`src/controllers/index.ts\\`: This file exports a class \\`IndexController\\` which has a method \\`getIndex\\` that handles the root route of the application.",vscpp("br",null),"\\`src/routes/index.ts\\`: This file exports a function \\`setRoutes\\` which sets up the routes for the application. It uses the \\`IndexController\\` to handle the root route.",vscpp("br",null),"\\`src/types/index.ts\\`: This file exports interfaces \\`Request\\` and \\`Response\\` which extend the interfaces from the \\`express\\` library.",vscpp("br",null),"\\`tsconfig.json\\`: This file is the configuration file for TypeScript. It specifies the compiler options and the files to include in the compilation.",vscpp("br",null),"\\`package.json\\`: This file is the configuration file for npm. It lists the dependencies and scripts for the project.",vscpp("br",null),"\\`README.md\\`: This file contains the documentation for the project.",vscpp("br",null)),vscpp(pe,{priority:900},"I want to set up the following project: ",this.props.query,vscpp("br",null),"This is the project tree structure:",vscpp("br",null),"\\`\\`\\`markdown' ",vscpp("br",null),this.props.fileTreeStr,vscpp("br",null),"\\`\\`\\`",vscpp("br",null)))}},$9=class extends ue{render(e,r){let n=[];for(let i of this.props.messages)switch(i.role){case"user":n.push(vscpp(pe,{priority:600},i.content));break;case"assistant":n.push(vscpp(wl,{priority:800},i.content));break;default:break}return vscpp(vscppf,null,n)}};var W9=class{constructor(e,r){this.accessor=e;this.promptType=r;this.logger=e.get(Ee).getPromptResponseLogger(this.constructor.name),this.options=e.get(bs)}async generate(e,r){let n=await this.accessor.get(tt).getUserRequestEndpoint(3),o=await new qt(this.accessor,n,this.promptType,e).render(),s=await this.accessor.get(wr).fetchOne(o.messages,void 0,r,3,n,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:typeof this.promptType});return this.logger.logResponse(s),s.type==="success"?e.filePath?this.parseContents(e.filePath,s.value):s.value:""}},K9=class extends W9{constructor(e){super(e,Y9)}parseContents(e,r){throw new Error("Method not implemented.")}},X9=class extends W9{constructor(e){super(e,z9)}parseContents(e,r){function n(i,o){try{let s=o.exec(i.trim());if(s&&s.length>2)return s[2]}catch(s){console.error(s)}return i}if(e.endsWith(".md")){let i=n(r,/^```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/),[o,...s]=i.split("#");return o.length?["",...s].join("#"):i}else return n(r,/```([^\n]+)?\s*\n([\s\S]+?)\s*```/g)}};var fp=se("INewWorkspacePreviewContentManager"),Q9=class{constructor(e){this.responseScopedData=new Map;this.copilotContentManager=new Cte(e),this.githubContentManager=new wte(e)}set(e,r,n,i){this.responseScopedData.set(e,n),Pte(n.baseUri)?this.githubContentManager.set(e,r,n,i):this.copilotContentManager.set(e,r,n,i)}get(e){return Pte(e)?this.githubContentManager.get(e.authority,e.path):this.copilotContentManager.get(e.authority,e.path)}getFileTree(e){return this.responseScopedData.get(e)}},Cte=class{constructor(e){this.accessor=e;this.promises=[];this.responseScopedData=new Map;this.generatePlanPrompt=new K9(this.accessor);this.generateFilePrompt=new X9(this.accessor)}set(e,r,n,i){let{userPrompt:o,projectStructure:s,chatMessages:a}=i,u={query:o,fileTreeStr:s,history:a},c=this.generatePlanPrompt.generate(u,new tv().token);this.promises.push(c);let l=this._getResponseScopedData(e),d={userPrompt:o,projectSpecification:c,projectStructure:s,fileTree:n,chatMessages:a};l.set(r,d)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,u=WNe(a,i);if(u&&!u?.content){let c=u;c.content=this._getFileContent(s.userPrompt,s.projectStructure,s.projectSpecification,r,s.chatMessages).catch(()=>c.content=void 0)}return u}_prefetch(e,r,n,i,o){let s=Date.now();return i.children?{...i,type:2,children:i.children.map(a=>this._prefetch(e,r,n,a,o)),ctime:s}:{...i,type:1,content:void 0,ctime:s}}async _getFileContent(e,r,n,i,o){let s={query:e,fileTreeStr:r,filePath:i,projectSpecification:await n,history:o};return this.generateFilePrompt.generate(s,new tv().token).then(a=>Buffer.from(a))}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}},wte=class{constructor(e){this.responseScopedData=new Map;this.repositoryService=e.get(Gm)}set(e,r,n,i){let o=i,s=this._getResponseScopedData(e),a={...o,fileTree:n};s.set(r,a)}get(e,r){let{projectName:n,path:i}=this._getProjectMetadata(r),s=this._getResponseScopedData(e).get(n);if(!s)return;let a=s.fileTree.value,u=WNe(a,i);if(u&&!u?.content&&!u?.children){let c=u,l=s.path==="."?Z9.relative(s.repo,r):Z9.join(s.path,"..",r);c.content=this.repositoryService.getRepositoryItemContent(s.org,s.repo,l).catch(()=>c.content=void 0)}return u}_getProjectMetadata(e){let[,r,...n]=e.split("/");return{projectName:r,path:n}}_getResponseScopedData(e){let r=this.responseScopedData.get(e);return r||(r=new Map,this.responseScopedData.set(e,r)),r}};function WNe(t,e){let r;for(let n of e)r?r.children&&(r=r.children.find(i=>i.name===n)??r):r=t.find(i=>i.name===n);return r}var $Ne="new",J9=class{constructor(){this.id="new";this.locations=[2];this.description=R0.t("Scaffold code for a new workspace");this.intentDetectionInput={modelDescription:"Scaffolds a new project from scratch based on requirements from the user.",sampleQuestion:"Create a RESTful API server using typescript"};this.commandInfo={followupPlaceholder:"Provide additional instructions to refine the proposed workspace",shouldRepopulate:!0,allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:R0.t("Create a RESTful API server using typescript")}}static{this.ID="new"}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return new Rte(e,this,o,i)}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}},Rte=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.responseProcessor=(e,r,n,i,o)=>new Ate(e,r,n,i,this.githubContentMetadata,o);this.commands=async(e,r)=>{let n=e.get(Ee).getPromptResponseLogger("new");if(!r.response?.message||!r.requestId)return[];let i=e.get(fp).getFileTree(r.requestId);return i?[{command:"github.copilot.createProject",arguments:[i],title:R0.t("Create Workspace")}]:(n.info("[workspaceIntent] Failed to fetch project items."),[])};this.followUps=async(e,r)=>{let n=e.get(Ee).getPromptResponseLogger("new");if(!r.response?.message||!r.requestId)return[];let i=e.get(fp).getFileTree(r.requestId);if(!i)return n.info("[workspaceIntent] Failed to fetch project items."),[];let o=[];if(Pte(i.baseUri)){let s={prompt:r.request.message,label:R0.t("Generate workspace with Copilot")};o.push(s)}return o};let o=this;this.githubContentMetadata=new w0("","","",[]),this.promptCrafter=new class{async getShouldUseProjectTemplate(a){let u=a.get(ke).getConfig(Le.UseProjectTemplates);return u!==void 0?u:await a.get(kr).getTreatmentVariableAsync("vscode","copilotchat.useProjectTemplates",!0)?(await a.get(Dt).getCopilotToken(a)).public_suggestions!=="enabled":!1}async buildPrompt(a,u,c,l,d,p){let f=a.getLatestTurn(),m=f.request.message,h=a.turns.length>1?a.turns.slice(0,-1):[],g=h[h.length-1]?.request?.message!==f.request.message&&await this.getShouldUseProjectTemplate(e),v=new qt(e,u,V9,{useTemplates:g,query:m,history:h}),_=await v.render(l,p),y=v.getMeta(w0);return y&&(o.githubContentMetadata=y),_}}}};function cat(t){let e=(t.match(/   /g)||[]).length;return e+=(t.match(/    /g)||[]).length,e+=(t.match(/ /g)||[]).length,e+=(t.match(/ /g)||[]).length,e}var uat=["node_modules","out","bin","debug","obj","lib",".dll",".pdb",".lib",".jpg",".png",".ico",".gif",".svg",".jpeg",".tiff",".bmp",".webp",".jpeg",".gitignore","LICENSE.txt","yarn.lock","package-lock.json"];function KNe(t){let e=[];for(let r of t){let n={...r};XNe(r)||(r.children&&(n.children=KNe(r.children)),e.push(n))}return e}function XNe(t){if(uat.includes(t.name))return!0;if(t.children){for(let e of t.children)if(XNe(e))return!0}return!1}function lat(t,e){let r=e.trim().split(`
`),n=[],i,o={name:"",children:[]};n[0]=o;for(let a of r){let u=cat(a),c=a.lastIndexOf("\u2500\u2500 "),l=c>=0?a.substring(c+3):a,d={name:l};if(u===0){i=QNe(t,l),o.name=l;continue}else{for(;u>0&&n[u-1]===void 0;)u--;n[u-1].children===void 0?n[u-1].children=[d]:n[u-1].children?.push(d),n[u]=d}}if(i===void 0)throw new Error("Base URI is undefined");let s=KNe(o.children);return s=s.sort((a,u)=>a.children&&!u.children?-1:1),{chatResponseTree:new PB(s,i),projectName:o.name}}function dat(t,e){let r=t[0].path.split("/")[0],n={name:r,children:[]},i={rootName:n};for(let s of t.map(a=>a.path)){let a=s.split("/"),u=r,c=n;for(let l=1;l<a.length;l++){let d=a[l];if(u+=`/${d}`,!i[u]){let p={name:d};c.children===void 0&&(c.children=[]),c.children.push(p),i[u]=p}c=i[u]}}let o=n.children?.sort((s,a)=>s.children&&!a.children?-1:1)??[];return new PB(o,e)}var Nte="vscode-copilot-workspace",Dte="vscode-copilot-github-workspace";function QNe(t,e,r=!1){return Gc.from({scheme:r?Dte:Nte,authority:t??"",path:e?`/${e}`:void 0})}var Ate=class{constructor(e,r,n,i,o,s){this.accessor=e;this.turn=r;this.progress=n;this.githubContentMetadata=o;this._appliedText="";this._p=Promise.resolve("");let a=!1,u="",c=/```filetree\n/,l=i.filter(p=>p.role!=="system"),d;this._appliesTextPromise=new ec,s.onCancellationRequested(()=>this._appliesTextPromise.complete(this._appliedText)),this._deltaCallback=new cm(p=>{this._p=this._p.then(async()=>{let f=r.requestId??"";if(r.response||(r.response={message:this._appliedText,type:"model"}),!p)return this._appliedText;r.response.message+=p,this._appliedText+=p;let m=/\[(COPILOT|TEMPLATES)]\n/,h=this._appliedText.match(m);switch(d=d??(h?h[1]:void 0),d){case"COPILOT":{let g=r.request.message,v=this._appliedText.match(/```filetree\n([\s\S]+?)\n```/);if(v){let[_,y]=this._appliedText.split(v[0]);u=v[1];let{chatResponseTree:E,projectName:x}=lat(f,u);n.progress(R0.t("Generating workspace preview...")),n.push(E),n.markdown(y),e.get(fp).set(f,x,E,{userPrompt:g,projectStructure:u,chatMessages:l})}else if(this._appliedText.match(c)&&!a){a=!0;let[_,y]=this._appliedText.split(c);u+=y,n.progress(R0.t("Generating workspace preview..."))}else a?u+=p:!a&&!this._appliedText.match(/```/)&&this._appliedText!==`[COPILOT]
`&&n.markdown(p);break}case"TEMPLATES":{this._appliedText!==`[TEMPLATES]
`&&this._appliedText.split(`
`).length<3&&n.markdown(p);break}default:break}return this._appliedText})})}get appliedText(){return this._appliesTextPromise.p}apply(e){this._deltaCallback.apply(e)}finish(){if(this._p.then(e=>this._appliesTextPromise.complete(e),e=>this._appliesTextPromise.error(e)),this.turn.requestId&&this.githubContentMetadata.org&&this.githubContentMetadata.repo&&this.githubContentMetadata.path&&this.githubContentMetadata.githubRepoItems&&!this.accessor.get(fp).getFileTree(this.turn.requestId)){this.progress.progress(R0.t("Generating workspace preview..."));let e=this.githubContentMetadata.path==="."?this.githubContentMetadata.repo:this.githubContentMetadata.path,r=dat(this.githubContentMetadata.githubRepoItems,QNe(this.turn.requestId,e,!0));this.progress.push(r),this.accessor.get(fp).set(this.turn.requestId,e,r,this.githubContentMetadata)}}};function Pte(t){return t.scheme==="vscode-copilot-github-workspace"}var Uo=require("vscode"),AA=class{constructor(e){this.contentManager=e;this._onDidChangeFile=new Uo.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event}async stat(e){let r=this.contentManager.get(e);if(!r)throw Uo.FileSystemError.FileNotFound(e);let n=await r.content?.then(i=>i?.length)??0;return{ctime:r.ctime??0,mtime:r.ctime??0,size:n,type:r.children?Uo.FileType.Directory:Uo.FileType.File,permissions:Uo.FilePermission.Readonly}}readDirectory(e){let r=this.contentManager.get(e);if(!r)throw Uo.FileSystemError.FileNotFound(e);return r.children?.map(n=>[n.name,n.children?Uo.FileType.Directory:Uo.FileType.File])??[]}async readFile(e){let r=this.contentManager.get(e);if(!r)throw Uo.FileSystemError.FileNotFound(e);let n;try{n=await r.content}catch{}return n??new Uint8Array}watch(e,r){return{dispose(){}}}createDirectory(e){throw Uo.FileSystemError.NoPermissions(e)}writeFile(e,r,n){throw Uo.FileSystemError.NoPermissions(e)}delete(e,r){throw Uo.FileSystemError.NoPermissions(e)}rename(e,r,n){throw Uo.FileSystemError.NoPermissions(r)}copy(e,r,n){throw Uo.FileSystemError.NoPermissions(r)}};function eDe(t,e){return Et.Disposable.from(Et.workspace.registerFileSystemProvider(Nte,new AA(t.get(fp)),{isReadonly:new Et.MarkdownString(Et.l10n.t(`This file preview was generated by Copilot and may contain surprises or mistakes.

Ask followup questions to refine it, then press Create Workspace.`))}),Et.workspace.registerFileSystemProvider(Dte,new AA(t.get(fp)),{isReadonly:!0}),Et.commands.registerCommand("github.copilot.createProject",async r=>{let n=t.get(e7).getLastInteractiveSession(),i=(await Et.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,openLabel:"Select as Parent Folder"}))?.[0];if(!i)return;let o=r.baseUri.path,s=await pat(i,o),a=[];Et.window.tabGroups.all.forEach(c=>{c.tabs.forEach(l=>{l.input instanceof Et.TabInputText&&l.input.uri.scheme==="vscode-copilot-workspace"&&a.push(l)})}),Et.window.tabGroups.close(a,!0);let u=Et.Uri.joinPath(i,s);await Et.window.withProgress({location:Et.ProgressLocation.Notification,cancellable:!0},async(c,l)=>{await Et.workspace.fs.createDirectory(u);async function d(p,f,m){let h=Et.Uri.joinPath(u,p,f.name);if(f.children?.length||!zNe(f.name)){c.report({message:Et.l10n.t("Creating folder {0}...",h.path)}),await Et.workspace.fs.createDirectory(h);for(let g of f.children??[])await d(JNe.join(p,f.name),g,m)}else{c.report({message:Et.l10n.t("Creating file {0}...",h.path)});let g=await Et.workspace.fs.readFile(Et.Uri.joinPath(m,p,f.name));await Et.workspace.fs.writeFile(h,Buffer.from(g))}}for(let p of r.value)await d("",p,r.baseUri);n!==void 0&&Et.interactive.transferChatSession(n,u),t.get(Ee).getLogger("newIntent").info("Opening folder: "+u.fsPath);try{await mat(u)}catch{}await Et.commands.executeCommand("vscode.openFolder",u)})}))}async function pat(t,e){let r=0,n=!0,i=e;for(;n;)try{await Et.workspace.fs.stat(Et.Uri.joinPath(t,i)),i=e+"-"+ ++r}catch{n=!1}return i}async function fat(t){try{return await Et.workspace.fs.stat(t),!0}catch{return!1}}async function mat(t){let e=hat();if(e)if(await fat(e)){let r=await Et.workspace.fs.readFile(e).then(i=>new ZNe.TextDecoder().decode(i)),n=JSON.parse(r);n.push(t.toString()),await Et.workspace.fs.writeFile(e,Buffer.from(JSON.stringify(n,null,2)))}else await Et.workspace.fs.writeFile(e,Buffer.from(JSON.stringify([t.toString()],null,2)))}function hat(){let t=Et.env.appName.indexOf("Insider")>0||Et.env.appName.indexOf("Code - OSS Dev")>=0?"Code - Insiders":"Code",e=Et.Uri.file(process.env.HOME||(process.env.USERPROFILE?process.env.USERPROFILE:""));switch(process.platform){case"darwin":return Et.Uri.joinPath(e,"Library","Application Support",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"linux":return Et.Uri.joinPath(e,".config",t,"User","workspaceStorage","aiGeneratedWorkspaces.json");case"win32":return process.env.APPDATA?Et.Uri.joinPath(Et.Uri.file(process.env.APPDATA),t,"User","workspaceStorage","aiGeneratedWorkspaces.json"):void 0;default:return}}async function tDe(t,e){let r=t.get(ir),n=t.get(Yo),i=t.get(ya),o=t.get(st),s=t.get(Eu),a=t.get(Rb),u=t.get(xs),c=o.getWorkspaceFolders().map(v=>v.fsPath+"/"),l=o.notebookDocuments.map(v=>v.uri.fsPath),p=(await Promise.all(e.map(v=>i.getWorkspaceSymbols(v)))).flat().map(v=>({name:v.name,kind:v.kind,containerName:v.containerName,filePath:v.location.uri.fsPath,start:v.location.range.start,end:v.location.range.end})),f=r.activeTextEditor?n.getDiagnostics(r.activeTextEditor.document.uri).map(v=>({start:v.range.start,end:v.range.end,message:v.message,severity:v.severity,relatedInformation:v.relatedInformation?.map(gat)})):[],m=r.activeTextEditor?{selections:r.activeTextEditor?.selections.map(v=>({anchor:v.anchor,active:v.active,isReversed:v.isReversed}))??[],documentFilePath:r.activeTextEditor?.document.uri.fsPath??"",visibleRanges:r.activeTextEditor?.visibleRanges.map(v=>({start:v.start,end:v.end}))??[],languageId:r.activeTextEditor?.document.languageId??"javascript"}:void 0,h=s.terminalLastCommand?{commandLine:s.terminalLastCommand.commandLine,cwd:typeof s.terminalLastCommand.cwd=="object"?s.terminalLastCommand.cwd.toString():s.terminalLastCommand.cwd,exitCode:s.terminalLastCommand.exitCode,output:s.terminalLastCommand.output}:void 0;return{workspaceFoldersFilePaths:c,symbols:p,activeFileDiagnostics:f,activeTextEditor:m,debugConsoleOutput:a.consoleOutput,terminalBuffer:s.terminalBuffer,terminalLastCommand:h,terminalSelection:s.terminalSelection,terminalShellType:s.terminalShellType,repoContexts:u.repositories,notebookDocumentFilePaths:l}}function gat(t){return{filePath:t.location.uri.fsPath,start:t.location.range.start,end:t.location.range.end,message:t.message}}var e7=se("IConversationFeature"),t7=class{constructor(e){this.accessor=e;this._disposables=new $r;this._activatedDisposables=new $r;if(this.logger=e.get(Ee).getLogger("chat"),this._enabled=!1,this._activated=!1,ge.interactive?._version!==1){this.logger.warn("Not activating ConversationFeature- api version mismatch");return}this.registerCopilotTokenListener(e),this._disposables.add(ge.authentication.onDidChangeSessions(async r=>{if(!gI(r,this.accessor.get(ke)))return;let i=await gN(r,this.accessor);this.logger.debug("onDidChangeSessionsHandler",i),i?this.activated=!0:this.activated=!1}))}get enabled(){return this._enabled}set enabled(e){e&&!this.activated&&(this.activated=!0),this._enabled=e,ge.commands.executeCommand("setContext","github.copilot.interactiveSession.disabled",!e)}get activated(){return this._activated}set activated(e){if(this._activated!==e)if(this._activated=e,ge.commands.executeCommand("setContext","github.copilot.activated",e),!e)this._activatedDisposables.clear();else{let r=this.accessor.get(bs);this._activatedDisposables.add(this.registerProviders(r)),this._activatedDisposables.add(this.registerCommands(r)),this._activatedDisposables.add(this.registerRelatedInformationProviders()),this.checkVSCodeVersion()&&(this._activatedDisposables.add(this.registerChatVariables()),this._activatedDisposables.add(this.registerParticipants(r)))}}checkVSCodeVersion(){return!ge.chat.createChatParticipant||!ge.chat.registerChatVariableResolver?(ge.window.showErrorMessage("VS Code MUST be updated to use Copilot Chat!"),!1):!0}getLastInteractiveSession(){return this.interactiveSessionProvider?.getLastSession()}dispose(){this._activated=!1,this._activatedDisposables.dispose(),this._disposables?.dispose()}[Symbol.dispose](){this.dispose()}registerParticipants(e){return this.accessor.get(_N).register(e)}registerProviders(e){let r=new $r;try{this.interactiveSessionProvider=new c9(this.accessor,e),r.add(ge.interactive.registerInteractiveSessionProvider("copilot",this.interactiveSessionProvider)),this.interactiveEditorSessionProvider=new I9(this.accessor,e.rejectionMessage),r.add(ge.interactive.registerInteractiveEditorSessionProvider(this.interactiveEditorSessionProvider,{supportReportIssue:this.accessor.get(ke).getConfig(Le.DebugReportFeedback)})),r.add({dispose:()=>{this.interactiveEditorSessionProvider=void 0,this.interactiveSessionProvider=void 0}}),"registerMappedEditsProvider"in ge.chat&&r.add(ge.chat.registerMappedEditsProvider("*",new j9)),"registerNewSymbolNamesProvider"in ge.languages&&r.add(ge.languages.registerNewSymbolNamesProvider({language:"*"},new q9(this.accessor)))}catch(n){this.logger.error("Registration of interactive providers failed:",n.toString())}return r}registerCommands(e){let r=new $r,n=o=>"body"in o&&(o.body instanceof ge.MarkdownString||typeof o.body=="string"),i=o=>"range"in o&&o.range instanceof ge.Range;return[ge.commands.registerCommand("github.copilot.interactiveSession.feedback",async()=>ge.env.openExternal(ge.Uri.parse(u9()))),ge.commands.registerCommand("github.copilot.ghpr.applySuggestion",async(o,s)=>{if(!n(o)||!i(s))return;let a=o.body instanceof ge.MarkdownString?o.body.value:o.body;await ge.commands.executeCommand("vscode.editorChat.start",{initialRange:s.range,message:a,autoSend:!0})}),ge.commands.registerCommand("github.copilot.debug.workbenchState",async()=>{let o=await ge.window.showInputBox({prompt:"Enter a comma-separated list of symbol queries. Can be left blank if not using WorkspaceSymbols"}),s=await ge.window.showInputBox({prompt:"Enter a file name - .state.json will be appended as the extension",value:"workspaceState"});if(!s)return;let a=await tDe(this.accessor,o?.split(",")??[]),u=ge.workspace.workspaceFolders?.[0].uri;if(!u)return;let c=ge.Uri.joinPath(u,`${s}.state.json`),l=JSON.stringify(a,null,2);l=l.replace(new RegExp(`${u.fsPath}/`,"g"),"./"),ge.workspace.fs.writeFile(c,Buffer.from(l))}),ge.commands.registerCommand("github.copilot.terminal.explainTerminalSelection",async()=>this.triggerTerminalChat({query:"#terminalSelection"})),ge.commands.registerCommand("github.copilot.terminal.explainTerminalSelectionContextMenu",()=>ge.commands.executeCommand("github.copilot.terminal.explainTerminalSelection")),ge.commands.registerCommand("github.copilot.terminal.explainTerminalLastCommand",async()=>this.triggerTerminalChat({query:"#terminalLastCommand"})),ge.commands.registerCommand("github.copilot.terminal.suggestCommand",async()=>this.triggerTerminalChat({query:"",isPartialQuery:!0})),ge.commands.registerCommand("github.copilot.terminal.generateCommitMessage",async()=>{let o=this.accessor.get(Q8),s=ge.workspace.workspaceFolders;if(!s?.length)return;let a=s.length===1?s[0].uri:await ge.window.showWorkspaceFolderPick().then(m=>m?.uri);if(!a)return;let u=await o.getRepositoryDiff(a);if(!u?.length){ge.window.showInformationMessage("No changes to commit.");return}let c=new gb,d=await new yS(this.accessor).generateGitCommitMessage(u,3,c.token);if(!d||c.token.isCancellationRequested)return;let f=`git commit -m "${d.replace(/"/g,'\\"').replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}"`;ge.window.activeTerminal?.sendText(f,!1)}),ge.commands.registerCommand("github.copilot.git.generateCommitMessage",async(o,s,a)=>{await this.accessor.get(BN).generateCommitMessage(o,a)}),ge.commands.registerCommand("github.copilot.devcontainer.generateDevContainerConfig",async(o,s=new ge.CancellationTokenSource().token)=>this.accessor.get(TN).generateConfiguration(o,s)),ge.commands.registerCommand(sA,async o=>{let s=ge.workspace.workspaceFolders?.[0].uri;if(!s)return;let a=ge.Uri.joinPath(s,o);if(this.accessor.get(Ue).sendMSFTTelemetryEvent("panel.action.filelink"),await u(a))await ge.commands.executeCommand("revealInExplorer",a);else return ge.commands.executeCommand("vscode.open",a);async function u(c){if(a.path.endsWith("/"))return!0;try{return(await ge.workspace.fs.stat(c)).type===ge.FileType.Directory}catch{return!1}}}),ge.commands.registerCommand(aA,async(o,s,a)=>{if(a??=ge.workspace.workspaceFolders?.[0].uri,!a)return;let u=ge.Uri.joinPath(a,o),c=await ge.commands.executeCommand("vscode.executeDocumentSymbolProvider",u);if(c){let l=rDe(c,s);if(this.accessor.get(Ue).sendMSFTTelemetryEvent("panel.action.symbollink",{},{hadMatch:l?1:0}),l){let d=l instanceof ge.SymbolInformation?l.location.range:l.selectionRange;return ge.commands.executeCommand("vscode.open",u,{selection:new ge.Range(d.start,d.start)})}}return ge.commands.executeCommand("vscode.open",u)}),gPe((o,s,a)=>{let u=/(?<!\[)`([^`\s]+)`(?!\])/g;return new class{constructor(){this.fileSymbols=new ga(async()=>{let l=new bP;for(let p of o)l.add(Ct.isUri(p.anchor)?p.anchor:p.anchor.uri);let d=new hi;return await Promise.all(Array.from(l,async p=>{let f=await Pp(Promise.resolve(ge.commands.executeCommand("vscode.executeDocumentSymbolProvider",p)),5e3);f&&d.set(p,f)})),d});this.resolvedSymbols=new Map}async linkify(l,d){if(!s.length)return l;let p=new Set;for(let[f,m]of l.matchAll(u))this.resolvedSymbols.has(m)||p.add(m);if(p.size){let f=await this.fileSymbols.value;if(d?.isCancellationRequested)return l;for(let m of p){let h;for(let[g,v]of f){let _=v&&rDe(v,m);if(_){h=_ instanceof ge.SymbolInformation?_.location:new ge.Location(g,_.range);break}}this.resolvedSymbols.set(m,h)}}return l.replace(u,(f,m)=>{let h=this.resolvedSymbols.get(m);if(h){let g=Uoe(s[0],h.uri);if(g)return wee(m,g)}return f})}}}),UNe(this.accessor),this.registerTerminalQuickFixProviders(),vat(this.accessor,e),eDe(this.accessor,e),yat(this.accessor),wNe(this.accessor),_at()].forEach(o=>r.add(o)),r}async triggerTerminalChat(e){let i=this.accessor.get(ke).getConfig(Le.TerminalChatLocation)==="quickChat"?"workbench.action.quickchat.toggle":"workbench.action.chat.open";e.query=`@${yN} `+e.query,await ge.commands.executeCommand(i,e)}registerRelatedInformationProviders(){let e=new $r;return[ge.ai.registerRelatedInformationProvider(ge.RelatedInformationType.CommandInformation,this.accessor.get(Mp).commandIdIndex),ge.ai.registerRelatedInformationProvider(ge.RelatedInformationType.SettingInformation,this.accessor.get(Mp).settingsIndex)].forEach(r=>e.add(r)),e}registerChatVariables(){let e=new $r;return this.accessor.get(hS).getVariables().forEach(r=>{e.add(ge.chat.registerChatVariableResolver(r.name,r.description??"",{resolve:async(n,i,o)=>[],resolve2:async(n,i,o,s)=>{let a={endpoint:await this.accessor.get(tt).getUserRequestEndpoint(3),message:i.prompt},u={report(l){o.push(l)}},c=await r.resolve(this.accessor,a,s,u);return c?(c.references?.forEach(l=>o.reference(l.anchor)),[{level:ge.ChatVariableLevel.Full,value:c.userMessages.join(`

`),description:""}]):[]}}))}),e}registerCopilotTokenListener(e){this._disposables.add(e.get(ys).onCopilotToken(r=>{this.logger.info(`copilot token chat_enabled: ${r.envelope.chat_enabled}`),this.enabled=r.envelope.chat_enabled??!1}))}registerTerminalQuickFixProviders(){let e=new $r;return e.add(ge.window.registerTerminalQuickFixProvider("copilot-chat.fixWithCopilot",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.explainTerminalLastCommand",title:ge.l10n.t("Explain using Copilot")}]:[]})),e.add(ge.window.registerTerminalQuickFixProvider("copilot-chat.generateCommitMessage",{provideTerminalQuickFixes:(r,n)=>this.enabled?[{command:"github.copilot.terminal.generateCommitMessage",title:ge.l10n.t("Generate Commit Message")}]:[]})),e}};function vat(t,e){let r=t.get(ke);return ge.commands.registerCommand("github.copilot.newNotebook",async n=>{let i=r.getConfig(Le.NotebookIterativeImproving);await ge.window.withProgress({location:ge.ProgressLocation.Notification},async o=>{let s=new ge.NotebookData([]);s.metadata={custom:{cells:[],metadata:{orig_nbformat:4},nbformat:4,nbformat_minor:2}};let a=await ge.workspace.openNotebookDocument("jupyter-notebook",s),u=await ge.window.showNotebookDocument(a);o.report({message:ge.l10n.t("Generating notebook...")});let c=n.outline.description,l=n.outline.sections,d=await t.get(tt).getUserRequestEndpoint(2);for(let p of l){let f=u.notebook.getCells().filter(x=>x.kind===ge.NotebookCellKind.Code).map(x=>x.document.getText()).join(`
`),m=new ge.CancellationTokenSource;o.report({message:ge.l10n.t('Generating section "{0}"...',p.title)});let h=await BNe(t,d,e,n.turn,c,p,f,m.token);if(!h)return;h=h.trim();let g=/```([a-zA-Z]+)?\s*([\s\S]+?)\s*```$/.exec(h);if(g&&g.length>2&&(h=g[2]),i){o.report({message:ge.l10n.t('Improving code for section "{0}"...',p.title)});let x=await qNe(t,d,e,c,p,f,h,m.token);if(!x)return;h=x}let v=new ge.NotebookCellData(ge.NotebookCellKind.Markup,`# ${p.title}
${p.content}`,"markdown"),_=new ge.NotebookCellData(ge.NotebookCellKind.Code,h,"python"),y=ge.NotebookEdit.insertCells(a.cellCount,[v,_]),E=new ge.WorkspaceEdit;E.set(a.uri,[y]),await ge.workspace.applyEdit(E),u.revealRange(new ge.NotebookRange(a.cellCount-1,a.cellCount),ge.NotebookEditorRevealType.Default),u.selection=new ge.NotebookRange(a.cellCount-1,a.cellCount)}o.report({increment:100})})})}function _at(){return ge.commands.registerCommand("github.copilot.executeSearch",async t=>{let e=t.filesToExclude.length>0||t.filesToInclude.length>0;ge.commands.executeCommand("workbench.view.search.focus").then(()=>ge.commands.executeCommand("workbench.action.search.toggleQueryDetails",{show:e})),ge.commands.executeCommand("workbench.action.findInFiles",t)})}function yat(t){return new H9(t)}function r7(t,e){if(!e.length)return;let r;for(let n of t)if(n.children){let i=n.name===e[0]?{symbol:n,matchCount:1}:void 0;if(i){let a=r7(n.children,e.slice(1));a&&(i={symbol:a.symbol,matchCount:i.matchCount+a.matchCount})}let o=r7(n.children,e),s;i&&o?s=i.matchCount>=o.matchCount?i:o:s=i??o,s&&(!r||s.matchCount>r?.matchCount)&&(r=s)}else n.name===e[0]&&(r??={symbol:n,matchCount:1});return r}function rDe(t,e){function r(n){return Array.from(n.matchAll(/[\w$][\w\d$]*/g),i=>i[0])}return(r7(t,[e])??r7(t,r(e)))?.symbol}var Nl=we(require("vscode"));var kte="---------------------------------",n7=class{constructor(e){this.accessor=e}async _canReport(){return!(!this.accessor.get(ke).getConfig(Le.DebugReportFeedback)||!(await this.accessor.get(Dt).getCopilotToken(this.accessor))?.isInternal)}async reportInline(e,r,n){if(!await this._canReport())return;let i=e.getLatestTurn();if(!i)return;let o=r.intent?this._embedCodeblock("INTENT",JSON.stringify(r.intent,null,"	")):"",s=this._embedCodeblock("CONTEXT",JSON.stringify({document:r.document.uri.toString(),fileIndentInfo:r.fileIndentInfo,language:r.language,wholeRange:r.wholeRange,selection:r.selection},null,"	")),a="",u=i.chatMessages;if(u&&u.length>0){let f=u.map(m=>this._embedCodeblock(m.role.toUpperCase(),m.content)).join(`
`);a=`	${kte}
${this._headerSeparator()}PROMPT MESSAGES:
${f}`}else a=this._embedCodeblock(i.request.type.toUpperCase(),i.request.message);let c=this._embedCodeblock("ASSISTANT",i.response?.message||""),l=this._embedCodeblock("Parsed response",JSON.stringify(n,null,"	")),d=`${o}
${s}
${a}
${c}
${l}
`,p=`
* VS Code version: ${Nl.version}
* Language: ${Nl.env.language}

<details><summary>Details</summary>
<p>

${d}

</p>
</details>
`;await this._reportIssue("Feedback for inline chat",p)}async reportChat(e){if(!await this._canReport())return;let r="",n=e.chatMessages;if(n&&n.length>0){let u=n.map(c=>this._embedCodeblock(c.role.toUpperCase(),c.content)).join(`
`);r=`	${kte}
${this._headerSeparator()}PROMPT MESSAGES:
${u}`}else r=this._embedCodeblock(e.request.type.toUpperCase(),e.request.message);let i=e.intentInvocation?.intent?this._embedCodeblock("INTENT",`[${e.intentInvocation.intent.id}] ${e.intentInvocation.intent.description}`):"",o=this._embedCodeblock("ASSISTANT",e.response?.message||""),s=`${i}
${r}
${o}
`,a=`
* VS Code version: ${Nl.version}
* Language: ${Nl.env.language}

<details><summary>Details</summary>
<p>

${s}

</p>
</details>`;await this._reportIssue("Feedback for sidebar chat",a)}_embedCodeblock(e,r){let n=this._bodySeparator()+r.split(`
`).join(`
${this._bodySeparator()}`);return`	${kte}
${this._headerSeparator()}${e}:
${n}`}_headerSeparator(){return"	"}_bodySeparator(){return"		"}async _reportIssue(e,r){let n=encodeURIComponent(e);await Nl.env.clipboard.writeText(r);let i=encodeURIComponent("We have written the needed data into your clipboard because it was too large to send. Please paste."),o=`https://github.com/microsoft/vscode-copilot/issues/new?title=${n}&body=${i}`;Nl.env.clipboard.writeText(r),Nl.env.openExternal(Nl.Uri.parse(o))}};var PA=we(require("vscode")),i7=class{constructor(){this._disposables=[];this._disposables.push(...this.initializeGitExtensionApi())}initializeGitExtensionApi(){let e=[],r=PA.extensions.getExtension("vscode.git"),n=async()=>{let i=await r.activate(),o=s=>{this._gitExtensionApi=s?i.getAPI(1):void 0};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(r)n();else{let i=PA.extensions.onDidChange(()=>{!r&&PA.extensions.getExtension("vscode.git")&&(r=PA.extensions.getExtension("vscode.git"),n(),i.dispose())})}return e}async getRepositoryDiff(e){let r=await this._getRepository(e);if(!r)return;let n=[];if(r.state.indexChanges.length!==0)for(let i of r.state.indexChanges.map(o=>o.uri.fsPath))n.push(await r.diffIndexWithHEAD(i));else for(let i of r.state.workingTreeChanges.map(o=>o.uri.fsPath))n.push(await r.diffWithHEAD(i));return n}async _getRepository(e){return await this._gitExtensionApi?.openRepository(e)??void 0}dispose(){this._disposables.forEach(e=>e.dispose())}};var nDe=we(require("vscode"));var ES=we(require("vscode"));var o7=class extends ue{render(){let e=[],r=[];for(let n of this.props.messages)n instanceof ES.LanguageModelSystemMessage?e.push(n.content):n instanceof ES.LanguageModelAssistantMessage?r.push(vscpp(Cl,{role:"assistant"},n.content)):n instanceof ES.LanguageModelUserMessage&&r.push(vscpp(Cl,{role:"user",name:n.name},n.content));return vscpp(vscppf,null,this.props.noSafety?e.join("<br />"):vscpp(rt,null," // our and custom system message",vscpp(u0,null),vscpp(oa,null),vscpp("br",null),e.join("<br />")),r)}};async function iDe(t){let e=t.get(ke),r=t.get(tt),n=t.get(Ee).getLogger("registerChatResponseProvider"),{extensionMode:i,subscriptions:o}=t.get(Jr),s=new $r;if(o.push(s),i===_a.Test){n.warn("Chat response providers are not available in test mode");return}let a=["gpt-3.5-turbo","gpt-4"];function u(c){return`copilot-${c}`}await Bc(e).then(c=>{if(!c){n.error("Auth token not present when we expected it to be");return}for(let l of a)r.getUserRequestEndpoint(3,void 0,l).then(d=>{if(s.isDisposed)return;let p=u(l),f=t.createInstance(NA,d,t);s.add(nDe.chat.registerChatResponseProvider(p,f,{name:l,auth:{label:c.account.label}}))})})}var NA=class{constructor(e,r,n,i,o){this._endpoint=e;this._accessor=r;this._expService=n;this._telemetryService=i;this._chatMLFetcher=o}async provideLanguageModelResponse2(e,r,n,i,o){let s=await this._expService.getTreatmentVariableAsync("vscode","copilotchat.languageModelControlList"),a=oDe.extractCustomTokenLimit(s??"",n),{messages:u,tokenCount:c}=await new qt(this._accessor,this._endpoint,o7,{noSafety:!1,messages:e}).render();if(this._telemetryService.sendMSFTTelemetryEvent("languagemodelrequest",{extension:n,model:this._endpoint.model},{tokenCount:c,tokenLimit:a}),c>Math.min(this._endpoint.modelMaxPromptTokens,a))throw new Error("Message exceeds token limit.");let l={...this._endpoint,getExtraHeaders:()=>({...this._endpoint.getExtraHeaders?.()??{},"x-onbehalf-extension-id":n})},d=async(f,m,h)=>{i.report({part:h.text,index:m})},p=Lte.options[this._endpoint.model].convert(r);await this._chatMLFetcher.fetchMany(u,d,o,3,l,p)}};NA=Bl([aP(2,kr),aP(3,Ue),aP(4,wr)],NA);var oDe;(r=>{function e(n,i){let o=n.indexOf(i);if(o<0)return 4e3;let s=o+i.length,a=n.indexOf(",",s);a<0&&(a=n.length);let u=Number(n.substring(s,a));return isNaN(u)?4e3:u*1e3}r.extractCustomTokenLimit=e})(oDe||={});function bat(...t){return e=>t.some(r=>r(e))}var Lte=class t{constructor(e){this._description=e}static{this._defaultDesc={stop:bat(LP,sI),temperature:bb,max_tokens:bb,frequency_penalty:bb,presence_penalty:bb}}static{this.options={"gpt-3.5-turbo":new t({...this._defaultDesc}),"gpt-4":new t({...this._defaultDesc}),"gpt-3.5-turbo-1106":new t({...this._defaultDesc}),"gpt-3.5-turbo-nc":new t({...this._defaultDesc}),"gpt4-turbo":new t({...this._defaultDesc}),"code-llama":new t({})}}convert(e){let r={};for(let n in this._description){let i=this._description[n],o=e[n];o!=null&&i(o)&&(r[n]=o)}return r}};var a7=we(xn());var s7=class extends ue{render(e,r){let n=this.props.chatVariables.find(i=>i.name===kn.variableInfo.name);return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are an expert in VS Code extension development. You know how to use the VS Code API to extend the editor. Your task is to help the Developer with their VS Code extension development.",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(oa,null),vscpp(pi,null),vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"Assume the question is about VS Code extension development.",vscpp("br",null),"Politely decline to answer if the question is not about VS Code extension development.",vscpp("br",null),"Please do not guess a response and instead just respond with a polite apology if you are unsure.",vscpp("br",null),"If you believe the API related context given to you is incorrect or not relevant you may ignore it.",vscpp("br",null),"The user cannot see the API context you are given, so you must not mention it. If you want to refer to it, you must include it in your reply.",vscpp("br",null),"Do not talk about initial setup of creating an extension unless the user asks about it.",vscpp("br",null),"Only provide information to related VS Code extension development."),this.props.history&&vscpp(vscppf,null,vscpp(Vn,{priority:600,history:this.props.history})),vscpp(Ru,{priority:700}),!n&&vscpp(kn,{priority:900}),vscpp(kn,{priority:800}),vscpp(Au,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}),vscpp(Ote,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}},Ote=class extends ue{async prepare(e,r,n){let i=this.accessor.get(vi),o=this.accessor.get(_M);if(await o.updateIndex(),n.isCancellationRequested)return;let s=await i.computeEmbeddings([this.props.query],n);if(!n.isCancellationRequested&&s&&s.length>0){let a=o.nClosestValues(s[0],5,.7);if(a.length)return{snippets:a}}}render(e,r){return vscpp(vscppf,null,e&&e.snippets.length>0&&vscpp(pe,{priority:900},"Below are some potentially relevant code samples related to VS Code extension development. You may use information from these samples to help you answer the question if you believe it is relevant."),e&&e.snippets.map(n=>vscpp(pe,{priority:900},n,vscpp("br",null))))}};var sDe=a7.t("How do I add text to the status bar?"),Mte=class{constructor(e){this.accessor=e}async buildPrompt(e,r,n,i,o,s){let a=e.getLatestTurn(),u=a.request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=new qt(this.accessor,r,s7,{chatVariables:n,query:u,history:c}),d=await l.render(i,s),p=l.getReferences();for(let f of p)i.report(new vo(f.anchor));return a.addReferences(p),d}},c7=class{constructor(){this.id="api";this.locations=[2];this.description=a7.t("Ask about VS Code extension development");this.intentDetectionInput={sampleQuestion:sDe,modelDescription:a7.t("Ask about VS Code extension development")};this.commandInfo={sampleRequest:sDe,defaultEnablement:!0,allowsEmptyArgs:!1}}static{this.ID="api"}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new Mte(e)}}};var qte=we(xn());var u7=class t{constructor(e,r,n){this.accessor=e;this.prompt=r;this.documentContext=n}static async createIntentInvocation(e,r,n,i,o){let{location:s,documentContext:a}=n;if(!a)throw new Error("Open a file to add code.");let u=new t(r,i,a);return{intent:e,location:s,endpoint:o,promptCrafter:u,createReplyInterpreter:u.createReplyInterpreter.bind(u)}}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns[e.turns.length-2].request.message:void 0,l=new qt(this.accessor,r,this.prompt,{documentContext:this.documentContext,query:u,history:c}),d=await l.render();return this.replyInterpreterFactory=l.getMeta(pp),d}createReplyInterpreter(e,r){if(!this.replyInterpreterFactory)throw new Error("No reply interpreter factory available.");return this.replyInterpreterFactory.create(e,r)}};function aDe(t,e){let r=t;for(let n of e){let i=n.range.start,o=n.range.end,s=r.start,a=r.end,u=n.newText.split(`
`).length,c=u-(o.line-i.line)-1,l=s.line,d=s.line;o.isBefore(s)?(l=s.line+c,d=a.line+c):i.isBefore(s)&&o.isAfterOrEqual(s)&&o.isBeforeOrEqual(a)?(l=i.line,d=a.line+c):i.isAfterOrEqual(s)&&i.isBeforeOrEqual(a)&&o.isAfter(a)?(l=s.line,d=o.line+c):i.isAfter(a)?(l=s.line,d=a.line):r.contains(n.range)?(l=s.line,d=a.line+c):n.range.contains(r)&&(l=i.line,d=i.line+u-1),r=new Ge(l,0,d,0)}return r}var xat=15,l7=class extends ue{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=up(this.accessor.get(Yo),e.uri,r,this.props.query),i=n.length>0?YN(n):r,o=this.accessor.get(Sn).getTreeSitterAST(e),s=o?await gM(o,i,xat):i;return{range:i,rangeOfInterest:s,diagnostics:n}}render({range:e,rangeOfInterest:r,diagnostics:n},i){let o=this.props.documentContext;if(Vr(this.props.documentContext.document.uri))throw Vo("InlineFix4Prompt should not be used with a notebook!");let{contextInfo:s}=hM(i.endpoint,o,e,r),a=o.document,u=[{uri:a.uri,version:a.version,ranges:Br([s.range.toRange(),s.above.toRange(),s.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{value:new pp(c=>new DA(this.accessor,e,s,o,c))}),vscpp(rt,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),"First think step-by-step how you would fix the issue.",vscpp("br",null),"You are expected to either edit the selected code or propose a bash command to install missing packages.",vscpp("br",null),"If you propose a code change, use a single code block that starts with ``` and ",wi.forLanguage(o.language),".",vscpp("br",null),"If you propose to run a bash command, use a code block that starts with ```bash.",vscpp("br",null),"When adding missing imports, always insert them inside of the selected code at the top, do not replace the rest of the selected code.",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),s.above.hasContent&&vscpp(pe,null,"I have the following code above the selection:",vscpp("br",null),vscpp(ls,{codeRegion:s.above,useMarkers:!0})),s.below.hasContent&&vscpp(pe,null,"I have the following code below the selection:",vscpp("br",null),vscpp(ls,{codeRegion:s.below,useMarkers:!0})),s.range.hasContent&&vscpp(pe,null,"I have the following code in the selection:",vscpp("br",null),vscpp(ls,{codeRegion:s.range,useMarkers:!0}))||vscpp(pe,null,"There is no code in the selection.",vscpp("br",null)),vscpp(pe,null,"Only change the code inside of the selection, delimited by markers '",s.range.startMarker,"' and '",s.range.endMarker,"'. The code block with the suggested changes should also contain the markers."),vscpp(cp,{documentContext:o,diagnostics:n}),vscpp(pe,null,"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},DA=class{constructor(e,r,n,i,o){this.accessor=e;this.wholeRange=r;this.contextInfo=n;this.documentContext=i;this.progress=o;this._lastText=void 0}update(e){return this._lastText=e,{shouldFinish:am(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=lm(this.contextInfo,this._lastText,this.documentContext.language);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText};let r=e.contentBeforeCode.match(/^.+/)?.[0],n=this.generateEdits(e.code),i=this.documentContext.document.version,o=s=>this.generateFollowUps(n,this.wholeRange,i,s);return um(n,this.wholeRange,r,o)}generateEdits(e){return My(this.accessor,this.contextInfo,e,2,this.documentContext.fileIndentInfo,Oy.fromDocumentContext(this.documentContext))}async generateFollowUps(e,r,n,i){let s=await this.accessor.get(Yo).waitForNewDiagnostics(this.documentContext.document.uri,i);if(!i.isCancellationRequested&&s.length&&this.documentContext.document.version!==n){let a=aDe(r,e),u=s.filter(c=>Rse(c)&&c.range.intersection(a));if(u.length)return u.length===1?[{title:Mb.t("An error remains after applying the change, click here to iterate."),message:`/fix ${u[0].message}`}]:[{title:Mb.t("{0} errors remain after applying the change, click here to iterate.",u.length),message:"/fix Fix the remaining errors"}]}}};function cDe(t,e,r){let n=Cat(e),i=Ly(t,4,!1),o=Rat(n),s;function a(f,m){let h=f.content,g=Tat(m),v=f.indentLength,_=g,y=0;for(;v<h.length&&_<m.length&&h.charCodeAt(v)===m.charCodeAt(_);)v++,_++,y++;if(v<h.length||_<m.length)return(m.length-g)*3/4<y&&(h.length-f.indentLength)*3/4<y?2:0;if(s===void 0){let E=p0(h,o);E>=0&&(s=p0(m,i.tabSize)-E)}return 1}function u(f,m,h){for(let g=h;g<m.length;g++)if(a(f,m[g])===1)return r?.recovery(h,g),g;return r?.warning("Unable to find a matching line for the diff line: "+f.content),-1}function c(f,m){for(let h=0;h<m.length;h++)if(a(f,m[h])===1)return h;return 0}let l=[],d=0,p=0;for(n.length>0&&(p=c(n[0],t));d<n.length&&p<t.length;){let f=n[d];switch(f.op){case 1:{let m=Fte(f,o,s??0,i);l.push(new Xi(p,p,[m]));break}case-1:{let m=t[p];if(a(f,m)===0){let v=u(f,t,p);if(v!==-1)p=v;else break}let g=n[d+1];if(g?.op===1&&g.indentLength===f.indentLength){let v=Sat(m)+g.content.substring(g.indentLength);l.push(new Xi(p,p+1,[v])),d++,p++;break}l.push(new Xi(p,p+1,[])),p++;break}default:{let m=a(f,t[p]);if(m===0){let h=u(f,t,p);h!==-1&&(p=h);break}else if(m===2){let h=Fte(f,o,s??0,i);l.push(new Xi(p,p+1,[h]))}p++;break}}d++}if(p===t.length&&d<n.length)for(;d<n.length;d++){let f=n[d];if(f.op===1){let m=Fte(f,o,s??0,i);l.push(new Xi(p,p,[m],`
`,""))}}return l}function d7(t){return t===32||t===9}function Eat(t){return t===45||t===43}function Tat(t){let e=0;for(;e<t.length&&d7(t.charCodeAt(e));)e++;return e}function Sat(t){let e=0;for(;e<t.length&&d7(t.charCodeAt(e));)e++;return t.substring(0,e)}function Fte(t,e,r,n){if(r===0&&(!n.insertSpaces&&t.indentKind===1||n.insertSpaces&&t.indentKind===2))return t.content;let i=p0(t.content,e);return(n.insertSpaces?" ".repeat(n.tabSize*(i+r)):"	".repeat(i+r))+t.content.substring(t.indentLength)}function Iat(t){let e=0,r=0,n=t.content;if(n.length>0){let i=n.charCodeAt(0);if(d7(i))for(r++,e=i===32?2:1;r<n.length;){let o=n.charCodeAt(r);if(!d7(o))break;r++,o!==i&&(e=3)}}t.indentKind=e,t.indentLength=r}function Cat(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r],i={content:n,op:0,indentKind:0,indentLength:0};n.length>0&&(Eat(n.charCodeAt(0))&&(i.op=n.charCodeAt(0)===45?-1:1,n.length>1&&n.charCodeAt(1)===32?i.content=" "+n.substring(1):i.content=n.substring(1)),Iat(i)),e.push(i)}return wat(e),e}function wat(t){let e=Number.MAX_VALUE;for(let r of t){if(r.indentKind!==2||r.indentLength===0)return;r.indentLength<e&&(e=r.indentLength)}if(e>0)for(let r of t)r.indentLength-=e,r.content=r.content.substring(e)}function Rat(t){return 4}var p7=class extends ue{async prepare(){let{document:e,wholeRange:r}=this.props.documentContext,{wholeRange:n}=await ap(this.accessor,e,r),i=await Aat(this.accessor);return{wholeRange:n,treatments:i}}render(e,r){let{document:n,language:i,selection:o}=this.props.documentContext;if(Vr(this.props.documentContext.document.uri))throw Vo("InlineFix4Prompt should not be used with a notebook!");let s=e.wholeRange,a=Pat(r.endpoint.modelMaxPromptTokens/3,this.props.documentContext,s),u=[{uri:n.uri,version:n.version,ranges:Br([a.toRange()])}],c=up(this.accessor.get(Yo),n.uri,o,this.props.query);return vscpp(vscppf,null,vscpp("usedContext",{value:u}),vscpp("meta",{value:new pp(l=>new Ute(s,n,a,l))}),vscpp(rt,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"The user has a ",i.languageId," file opened in a code editor.",vscpp("br",null),"The user expects you to propose a fix for one or more problems in that file.",vscpp("br",null),"For the response always follow these instructions:",vscpp("br",null),"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),"When proposing a change in the code, use a single code block that starts with ```diff and that describes the changes in the diff format. In the diff, always use tab to indent, never spaces. Make sure that the diff format is valid and contains all changes: Removed and unchanged lines must match exactly the original code line. Keep the changes minimal and the diff short.",vscpp("br",null),"When proposing to fix the problem by running a terminal command, provide the terminal script in a code block that starts with ```bash.",vscpp("br",null),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),vscpp(pe,{priority:100},"I have the following code open in the editor.",vscpp("br",null),"```csharp",vscpp("br",null),"// This is my class",vscpp("br",null),"class C { }",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```"),vscpp(wl,{priority:100},"The problem is that the class 'C' does not have a field or property named 'Field'. To fix this, you need to add a 'Field' property to the 'C' class.",vscpp("br",null),vscpp("br",null),"```diff",vscpp("br",null),"// This is my class",vscpp("br",null),"-class C { }",vscpp("br",null),"+class C {",vscpp("br",null),"+   public int Field { get; set; }",vscpp("br",null),"+}",vscpp("br",null),vscpp("br",null),"new C().Field = 9;",vscpp("br",null),"```",vscpp("br",null)),vscpp(pe,{priority:600},a.hasContent&&vscpp(vscppf,null,"I have the following code open in the editor, starting from line ",a.firstLineIndex+1," to line ",a.lastLineIndex+1,":",vscpp(Gs,{language:i,code:a.lines.join(`
`)}),vscpp("br",null),"The user has currently selected from line ",s.start.line+1,", column ",s.start.character+1," to line ",s.end.line+1," column ",s.end.character+1,".",vscpp("br",null)),!a.hasContent&&vscpp(vscppf,null,"I am in an empty file:",vscpp(Gs,{language:i,code:""}))),vscpp(pe,{priority:500},c.length>0&&vscpp(vscppf,null,"We have ",c.length," ",c[0].source," ",c.length===1?"problem":"problems"," in this file:",vscpp("br",null),c.map(l=>vscpp(vscppf,null,"At line ",l.range.start.line+1," column ",l.range.start.character+1,": ",vscpp("br",null),l.message," ",vscpp("br",null),vscpp(tA,{diagnostic:l}))))),e.treatments.useWorkspaceChunksFromSelection&&vscpp(Dy,{priority:200,...this.getChuckSearchPropsForSelection(s)}),e.treatments.useWorkspaceChunksFromDiagnostics&&vscpp(Dy,{priority:200,...this.getChuckSearchPropsForDiagnostics(c)}),vscpp(pe,{priority:700},"Please find a fix for my code so that the result is without any errors.",vscpp("br",null),this.props.query))}getChuckSearchPropsForSelection(e){let r=this.props.documentContext.document,n=r.getText(e);return{fullQuestionText:[`Please find code that is similar to the following code block:
`,"```",n,"```"].join(`
`),keywords:uDe(n),resultFilter:i=>i.filter(o=>!uI(o.file,r.uri)).slice(0,3)}}getChuckSearchPropsForDiagnostics(e){let r=this.props.documentContext.document,n=e.map(i=>i.message).join(" ");return{fullQuestionText:`Please find code that can help me fix the following problems: ${n}`,keywords:uDe(n),resultFilter:i=>i.filter(o=>!uI(o.file,r.uri)).slice(0,3)}}};function uDe(t){return[...new Set(...t.matchAll(/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g)).values()].map(r=>({keyword:r,variations:[]}))}async function Aat(t){let e=t.get(kr),r=t.get(ke),n=async(i,o)=>r.getConfig(i)||!!await e.getTreatmentVariableAsync("vscode",o,!0);return{useWorkspaceChunksFromSelection:await n(Le.FixUseWorkspaceChunksFromSelection,"copilotchat.useWorkspaceChunksFromSelection"),useWorkspaceChunksFromDiagnostics:await n(Le.FixUseWorkspaceChunksFromDiagnostics,"copilotchat.useWorkspaceChunksFromDiagnostics")}}function Pat(t,e,r){let n=t*4,i=new ia(n),o=new Oo(i,e.document,e.language,"ed8c6549bwf9"),s=!1,a=p=>{o.prependLine(p)||(s=!0)},u=p=>{o.appendLine(p)||(s=!0)},c=e.document.lineCount,l=r.end.line;for(l=r.end.line;!s&&l>=r.start.line;l--)a(l);let d=r.end.line+1;for(;!s&&(l>=0||d<c);)l>=0&&a(l--),l>=0&&a(l--),d<c&&u(d++);return o.trim(e.selection),o}var Ute=class{constructor(e,r,n,i){this.wholeRange=e;this.document=r;this.contextInfo=n;this._lastText=void 0}update(e){return this._lastText=e,{shouldFinish:am(e)}}async finish(){if(!this._lastText)throw new Error("No text");let e=Nat(this._lastText);if(!e||e.language==="bash"||e.language==="ps1")return{type:"conversational",content:this._lastText};let r=e.contentBeforeCode.match(/^.+/)?.[0],n=[];if(e.language==="diff"){let o=f0.fromDocument(this.document),s=f0.fromString(e.code);n=cDe(o,s)}else n=[new Xi(this.contextInfo.firstLineIndex,this.contextInfo.lastLineIndex+1,f0.fromString(e.code))];let i=n.map(o=>o.toTextEdit());return um(i,this.wholeRange,r)}};function Nat(t){let r=Su(t).at(0);if(r){let n=yb(t);return{code:r.code,contentBeforeCode:n.slice(0,r.startLine).join(`
`).trimEnd(),language:r.language}}}var Dat=15,f7=class extends ue{async prepare(){let{document:e,selection:r}=this.props.documentContext,n=up(this.accessor.get(Yo),e.uri,r,this.props.query),i=n.length>0?YN(n):r,o=this.accessor.get(Sn).getTreeSitterAST(e),s=o?await gM(o,i,Dat):i;return{range:i,rangeOfInterest:s,diagnostics:n}}render({range:e,rangeOfInterest:r,diagnostics:n},i){let o=this.props.documentContext;if(!Vr(this.props.documentContext.document.uri))throw Vo("InlineFix4Prompt should not be used with a non-notebook!");let s=hM(i.endpoint,o,e,r),a=fM(this.accessor.get(ir),this.accessor.get(st),o,s.contextInfo,s.tracker),u=o.document,c=[{uri:u.uri,version:u.version,ranges:Br([a.range.toRange(),a.above.toRange(),a.below.toRange()])}];return vscpp(vscppf,null,vscpp("usedContext",{value:c}),vscpp("meta",{value:new pp(l=>new Bte(this.accessor,e,a,o,l))}),vscpp(rt,null,vscpp(y0,{language:o.language}),vscpp("br",null),"When dealing with Jupyter Notebook, if a module is already imported in a cell, it can be used in other cells directly without importing it again. For the same reason, if a variable is defined in a cell, it can be used in other cells as well",vscpp("br",null),"When dealing with Jupyter Notebook, cells below the current cell can be executed before the current cell, you must use the variables defined in the cells below, unless you want to overwrite them.",vscpp("br",null),"When dealing with Jupyter Notebook, do not generate CELL INDEX in the code blocks in your answer, it is only used to help you understand the context.",vscpp("br",null),"If you suggest to run a terminal command, use a code block that starts with ```bash.",vscpp("br",null),'When fixing "ModuleNotFoundError" or "Import could not be resolved" errors, always use magic command "%pip install" to add the missing packages. The imports MUST be inserted at the top of the code block and it should not replace existing code.',vscpp("br",null),"You should not import the same module twice.",vscpp("br",null),vscpp(Mt,null)),this.props.history&&vscpp(pe,null,this.props.history),vscpp(JR,{documentContext:o,above:a.above,range:a.range,below:a.below,aboveCells:a.aboveCells,belowCells:a.belowCells,includeDelimeters:!0}),vscpp(cp,{documentContext:o,diagnostics:n}),vscpp(pe,null,"Describe in a single sentence how you would solve the problem. After that sentence, add an empty line. Then add a code block with the fix.",vscpp("br",null),this.props.query,vscpp("br",null)))}},Bte=class extends DA{generateEdits(e){let r=e.split(`
`),n=[],i=[];for(let a of r)a.match(/^[%\!]pip/)?n.push(a):i.push(a);if(!n.length)return super.generateEdits(e);let o=[],s=m0(n,{whichLine:"topMost",lines:this.contextInfo.range.lines},this.documentContext.fileIndentInfo).join(`
`)+`
`;return o.push(new eo(new Ge(this.wholeRange.start,this.wholeRange.start),s)),i.length&&o.push(...super.generateEdits(i.join(`
`))),o}};var m7=class extends ue{render(e,r){let n=this.props.documentContext,i=({document:o,selection:s})=>up(this.accessor.get(Yo),o.uri,s,this.props.query);return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),vscpp(Mt,null),vscpp("br",null),vscpp("br",null),vscpp(x0,{location:2,endpoint:this.props.endpoint}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.",vscpp("br",null),vscpp("br",null),"Additional Rules",vscpp("br",null),"You specialize in being a highly skilled code generator. Your task is to help the Developer fix an issue.",vscpp("br",null),"If context is provided, try to match the style of the provided code as best as possible.",vscpp("br",null),"Generated code is readable and properly indented.",vscpp("br",null),"Markdown blocks are used to denote code.",vscpp("br",null),"Preserve user's code comment blocks, do not exclude them when refactoring code.",vscpp("br",null),"Pay especially close attention to the selection or exception context.",vscpp("br",null),"Given a description of what to do you can refactor, fix or enhance the existing code.",vscpp(pi,null)),this.props.history&&vscpp(Vn,{priority:700,history:this.props.history}),vscpp(kn,{priority:800}),n&&vscpp(cp,{priority:800,documentContext:n,diagnostics:i(n)}),vscpp(Au,{priority:900,chatVariables:this.props.chatVariables,query:this.props.query}))}};var kat={3:"gpt-3.5-turbo",4:"gpt-4",cl:"code-llama"},TS=class{constructor(){this.id="fix";this.locations=[1,2];this.description=qte.t("Propose a fix for the problems in the selected code");this.intentDetectionInput={sampleQuestion:"There is a problem in this code. Rewrite the code to show it with the bug fixed."};this.commandInfo={sampleRequest:qte.t("There is a problem in this code. Rewrite the code to show it with the bug fixed.")}}static{this.ID="fix"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to fix an issue");let i=r.location;if(i===2)return iS.createIntentInvocation(this,e,r,m7);let o=r.intentArgument?kat[r.intentArgument]:void 0,s=await e.get(tt).getUserRequestEndpoint(i,this.id,o),a=l7;return Vr(n.document.uri)&&n.document.languageId==="python"?a=f7:(s.model==="gpt-4"||s.model==="gpt4-turbo")&&(a=p7),u7.createIntentInvocation(this,e,r,a,s)}};var Gte=we(xn());var h7=class{constructor(){this.id="newNotebook";this.description=Gte.t("Create a new Jupyter Notebook");this.locations=[2];this.intentDetectionInput={modelDescription:"Creates a new Jupyter Notebook for tasks such as data analysis, scientific computing, and machine learning.",sampleQuestion:"How do I create a notebook to load data from a csv file?"};this.commandInfo={allowsEmptyArgs:!1,yieldsTo:[{command:"fix"},{command:"explain"},{command:"workspace"},{command:"tests"}],defaultEnablement:!0,sampleRequest:Gte.t("How do I create a notebook to load data from a csv file?")}}static{this.ID="newNotebook"}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return new Hte(e,this,o,i)}async asSlashCommand(e,r){return{command:this.id,detail:this.description}}},Hte=class{constructor(e,r,n,i){this.accessor=e;this.intent=r;this.endpoint=n;this.location=i;this.commands=async(e,r)=>{let n=(r.response?.message??"").replace(/\n/g,""),o=/```(?:json)?(.+)/g.exec(n);if(o)try{let s=o[1],a=s.indexOf("```"),u=a===-1?s:s.substring(0,a),c=JSON.parse(u);return Promise.resolve([{command:"github.copilot.newNotebook",arguments:[{turn:r,outline:c}],title:"Create Notebook"}])}catch{}return[]};this.responseProcessor=(e,r,n)=>new M9(e,r,n);this.promptCrafter=new class{async buildPrompt(s,a,u,c,l,d){let f=s.getLatestTurn().request.message,m=s.turns.length>1?s.turns.slice(0,-1):[];return await new qt(e,a,k9,{query:f,history:m,chatVariables:u}).render(c,d)}}}};var pDe=we(xn());var g7=class extends ue{render(e,r){return vscpp(vscppf,null,vscpp(rt,{priority:1e3},"You are a VS Code search expert who helps to write search queries for text in a workspace. Users want to search across a whole workspace. Your response will contain parameters to use in the search that targets what the user wants.",vscpp("br",null),vscpp(Mo,null),vscpp(Mt,null),vscpp(oa,null),vscpp(pi,null),vscpp("br",null),"Additional Rules",vscpp("br",null),"The user's question is ALWAYS related to search or replace. When the user's question does not seem to be related to searching or replacing, you MUST assume that they're searching for or replacing what they are describing.",vscpp("br",null),`For example, if the user says "emojis", try appending "I'm looking for _____" to the beginning (e.g. I'm looking for emojis) to make more sense of it.`,vscpp("br",null),vscpp("br",null),"For all valid questions, you MUST respond with a JSON object with search parameters to use.",vscpp("br",null),'- Your answer MUST wrap the JSON object in "[ARGS START]" and "[ARGS END]". "[ARGS START]" must be on a new line.',vscpp("br",null),'- Your answer MUST have an explanation in full, human-readable sentences. This goes before the "[ARGS START]" line.',vscpp("br",null),vscpp("br",null),'If you put a regex in the "query" parameter, make sure to set "isRegex" to true.',vscpp("br",null),'If you put a regex in the "query" parameter, do not start and/or end with forward slashes to denote a regex literal.',vscpp("br",null),"You MUST NOT give an answer with an empty-string query parameter.",vscpp("br",null),vscpp("br",null),'The "replace" string will be used to replace the query-matched search results.',vscpp("br",null),vscpp("br",null),'If you want to target certain files, set "filesToInclude" to a glob pattern. DO NOT assume the "filesToInclude" and "filesToExclude" without being very sure that the user wants to target these files!',vscpp("br",null),vscpp("br",null),'If the query is case sensitive, set "isCaseSensitive" to true.',vscpp("br",null),vscpp("br",null),"By default, all string fields are the empty string, and all boolean fields are false. Only list the fields you want to change.",vscpp("br",null),vscpp("br",null),"You should write the JSON object of the search parameters in the following format:",vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": ...,',vscpp("br",null),'	"replace": ...,',vscpp("br",null),'	"filesToInclude": ...,',vscpp("br",null),'	"filesToExclude": ...,',vscpp("br",null),'	"isRegex": ...,',vscpp("br",null),'	"isCaseSensitive": ...,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"Examples:",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Search for 'foo' in all files under my 'src' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Populate the query field with 'foo' and specify the files to include as 'src/'.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "foo",',vscpp("br",null),'	"filesToInclude": "src" ,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all CamelCase words in all files under the 'src/extensions' directory.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a regex search for camelCase variables by checking for any word that has a lowercase letter followed by an uppercase letter, followed by any number of lowercase letters. You can use `\\b[a-z]+[A-Z][a-z]+\\b` to acheive this.",vscpp("br",null),"This must be case-sensitive since the capitalization of the letters in our regex matters.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "\\\\b[a-z]+[A-Z][a-z]+\\\\b",',vscpp("br",null),'	"filesToInclude": "src/extensions" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all hex color codes in css files",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Perform a search for 6-digit or 3-digit hex color codes using the regex `#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\b`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})\\\\b",',vscpp("br",null),'	"filesToInclude": "*.css" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Find all HTTPS links in markdown.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"Search all URLs that have the HTTPS protocol in a markdown file. Make sure to include all valid URL characters in their respective places. This regex should achieve this: `https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#()?&//=]*)`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#()?&//=]*)",',vscpp("br",null),'	"filesToInclude": "*.md" ,',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all YYYY-MM-DD dates with MM/DD/YYYY dates. Don't do this in typescript files.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"You will need to use the regex `\\b(\\d{4})-(\\d{2})-(\\d{2})\\b` to match the YYYY-MM-DD date format. Then, you will need to use the replace string `$2/$3/$1` to replace the date with the MM/DD/YYYY format.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "\\\\b(\\\\d{4})-(\\\\d{2})-(\\\\d{2})\\\\b",',vscpp("br",null),'	"replace: "$2/$3/$1",',vscpp("br",null),'	"filesToExclude": "*.ts",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"Replace all camel case variable names with snake case variable names.",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To replace all camel case variables with snake case, we will need to:",vscpp("br",null),"1. Find all sequences of lowercase letters succeeded by uppercase letters. Use `([a-z]+)([A-Z])` to capture these sequences.",vscpp("br",null),"2. Separate them with an underscore character. `$1_$2` does this.",vscpp("br",null),"3. Convert both characters to lowercase. Adjust the previous replace text to be `\\l$1_\\l$2`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "([a-z]+)([A-Z])",',vscpp("br",null),'	"replace: "\\\\l$1_\\\\l$2",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"alphanumeric",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all alphanumeric characters, you can use the regex `[a-zA-Z0-9]`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "[a-zA-Z0-9]",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),'	"isCaseSensitive": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"link",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To find all web links, use the regex `https?:\\/\\/\\S+`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "https?:\\\\/\\\\/\\\\S+",',vscpp("br",null),'	"isRegex": true,',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),'Search for actionbar files outside of my "extensions" directoy',vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),"To do this, use the query `actionbar` in all files except the ones in `extensions`.",vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "actionbar",',vscpp("br",null),'	"filesToExclude": "extensions",',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null),vscpp("br",null),"### Question:",vscpp("br",null),"typescript for loop",vscpp("br",null),vscpp("br",null),"### Answer:",vscpp("br",null),'To look for "for" loops in most languages, use the query `for\\s*\\(`.',vscpp("br",null),vscpp("br",null),"[ARGS START]",vscpp("br",null),"```json",vscpp("br",null),"{",vscpp("br",null),'	"query": "for\\s*\\(",',vscpp("br",null),'	"isRegex: true,',vscpp("br",null),'	"filesToInclude: "*.ts"',vscpp("br",null),"}",vscpp("br",null),"```",vscpp("br",null),"[ARGS END]",vscpp("br",null)),this.props.history&&vscpp(vscppf,null,vscpp(Vn,{priority:600,history:this.props.history})),vscpp(Ru,{priority:700}),vscpp(kn,{priority:800}),vscpp(pe,{priority:900},this.props.query))}};function Lat(t){if(!t)return[];let e=[],r={query:t.query??"",replace:t.replace??"",filesToInclude:t.filesToInclude??"",filesToExclude:t.filesToExclude??"",isRegex:t.isRegex??!1,isCaseSensitive:t.isRegex??!1};return e.push({command:"github.copilot.executeSearch",arguments:[r],title:"Search"}),e}function lDe(t){let e=Su(t).at(0),r;if(e){let n;try{n=nA(e.code)}catch{}n&&(r=n)}return r}function Oat(t){if(!t)return[];let e=[`| Parameter  | Value |
`,`| ------ | ----- |
`];for(let[r,n]of Object.entries(t)){if(n==="")continue;let i=n;(typeof n=="string"||n instanceof String)&&(i=n.replace(/\|/g,"\\|")),e.push(`| ${r} | \`${i}\` |
`)}return e.push(`
`),e}var dDe="Search for 'foo' in all files under my 'src' directory",jte=class{constructor(e){this.accessor=e}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=new qt(this.accessor,r,g7,{query:u,history:c}),d=await l.render(i,s);for(let p of l.getReferences())i.report(new vo(p.anchor));return d}},v7=class{constructor(){this.id="search";this.locations=[2];this.description=pDe.t("Generate query parameters for workspace search");this.intentDetectionInput={sampleQuestion:dDe};this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:Dp,sampleRequest:dDe}}static{this.ID="search"}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new jte(e),responseProcessor:(s,a,u)=>new aS([{start:"[ARGS END]",stop:"[ARGS START]"}],u,c=>Oat(lDe(c.join("")))),commands:async(s,a)=>{let u=lDe(a.response?.message??"");return Lat(u)}}}};var kA=we(xn()),mDe=we(require("fs"));var _7=class extends ue{render(e,r){return vscpp(vscppf,null,this.props.history&&vscpp(Vn,{priority:600,history:this.props.history}),vscpp(rt,{priority:1e3},vscpp("br",null),"You are a coding assistant who helps the user find relevant code in their workspace by providing a list of relevant keywords they can search for.",vscpp("br",null),"The user will provide you with potentially relevant information from the workspace. This information may be incomplete.",vscpp("br",null),"DO NOT ask the user for additional information or clarification.",vscpp("br",null),"DO NOT try to answer the user's question directly.",vscpp("br",null),vscpp("br",null),"# Additional Rules",vscpp("br",null),vscpp("br",null),"Think step by step:",vscpp("br",null),"1. Read the user's question to understand what they are asking about their workspace.",vscpp("br",null),vscpp("br",null),"2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.",vscpp("br",null),vscpp("br",null),"3. Output a precise version of question that resolves all pronouns to the nouns they stand for. Be sure to preserve the exact meaning of the question by only changing ambiguous pronouns.",vscpp("br",null),vscpp("br",null),"4. Then output a short markdown list of up to 8 relevant keywords that user could try searching for to answer their question. These keywords could used as file name, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.",vscpp("br",null),vscpp("br",null),"5. For each keyword in the markdown list of related keywords, if applicable add a comma separated list of variations after it. For example: for 'encode' possible variations include 'encoding', 'encoded', 'encoder', 'encoders'. Consider synonyms and plural forms. Do not repeat variations.",vscpp("br",null),vscpp("br",null),"# Examples",vscpp("br",null),vscpp("br",null),"User: base64 encoding",vscpp("br",null),vscpp("br",null),"Response:",vscpp("br",null),vscpp("br",null),"Where's the code for base64 encoding?",vscpp("br",null),vscpp("br",null),"- base64 encoding, base64 encoder, base64 encode",vscpp("br",null),"- base64, base 64",vscpp("br",null),"- encode, encoded, encoder, encoders",vscpp("br",null)),this.props.fileTree&&vscpp(pe,{priority:700},this.props.fileTree),vscpp(pe,{priority:1e3},this.props.query))}};var Vte=class{constructor(e){this.accessor=e}async buildPrompt(e,r,n,i,o,s){let u=e.getLatestTurn().request.message,c=e.turns.length>1?e.turns.slice(0,-1):[],l=await GZ(this.accessor,1e3,s),d=new qt(this.accessor,r,_7,{query:u,history:c,fileTree:l}),p=await d.render();for(let f of d.getReferences())i.report(new vo(f.anchor));return p}},fDe="Where is the toolbar code?",y7=class{constructor(){this.id="semanticSearch";this.locations=[2];this.description=kA.t("Find relevant code to your query");this.commandInfo={allowsEmptyArgs:!1,defaultEnablement:!1,sampleRequest:fDe};this.intentDetectionInput={sampleQuestion:fDe}}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return{intent:this,location:i,endpoint:o,promptCrafter:new Vte(e),responseProcessor:(s,a,u,c,l)=>new zte(s,u,c,l,o)}}},zte=class{constructor(e,r,n,i,o){this.accessor=e;this.stream=r;this.token=i;this.endpoint=o;this._appliedLength=0;this._appliedText="";this._userMessage=n[n.length-1].content,this._appliesTextPromise=new ec}get appliedText(){return this._appliesTextPromise.p}apply(e){let r=e.substring(this._appliedLength,e.length);this.append(r)}async append(e){this._appliedLength+=e.length,this._appliedText+=e}finish(){this.stream?.markdown(kA.t("Looking for relevant code"));let e=oM(this._userMessage,this._appliedText);Mat(this.accessor,this.endpoint,e,this.token).then(r=>Fat(this.accessor,r,this.stream)).then(r=>this._appliesTextPromise.complete(r),r=>this._appliesTextPromise.error(r))}};async function Mat(t,e,r,n){let i=t.get(LT),o={fullText:r.rephrasedQuestion,keywords:r.keywords.flatMap(u=>[u.keyword,...u.variations])},s=await Ay(t,{valueFor4096:8,maxMultiplier:4}),a=(await i.searchFileChunks(e,[o],s,n)).slice(0,s);return n.isCancellationRequested||!a.length?[]:await qat(a)}function Fat(t,e,r){if(e.length===0){let o=kA.t(`No relevant code found. Please be more specific.
`);return r.markdown(o),o}r.markdown(kA.t(`Here is some relevant code:

`));let n=t.get(st),i="";for(let o of e)i+=Uat(o,r,n);return i}function Uat(t,e,r){let n=[],o=`## ${$g(r,t.file)}

`;return e.markdown(o),n.push(o),t.locations.forEach(s=>{let a={uri:t.file,range:s.range},u=s.range.start.line,c=s.range.end.line,l=u+1===c?`Line ${u+1}`:`Lines ${u+1}-${c}`;e.markdown("- "),e.anchor(a,l),e.markdown(`

`),n.push(l+`

`),e.markdown(s.code+`
`),n.push(s.code+`
`)}),n.join("")}function Bat(t,e,r){let n=[],i=0;for(;i<t.length&&n.join(`
`).length<e&&n.length<r;)n.push(t[i]),i++;return n}async function qat(t){let e=[],r=new hi;for(let[n,i]of t.entries()){let o=r.get(i.file),s=o?o.rank:n,a=o?[...o.ranges,i.range]:[i.range];r.set(i.file,{ranges:a,rank:s})}for(let[n,i]of r.entries()){let o=i.ranges.filter((d,p)=>{for(let[f,m]of i.ranges.entries())if(p!==f&&(d===m||d.contains(m)))return!1;return!0}),s=[],a;o.sort((d,p)=>d.start.line-p.start.line);for(let d of o)a&&a.end.line>=d.start.line-1?a=a.with(void 0,d.end):(a&&s.push(a),a=d);a&&s.push(a);let c=(await mDe.promises.readFile(n.fsPath,"utf8")).split(`
`),l=[];for(let d of s){let p=d.start.line,f=d.end.line,m=c.slice(p,f);if(!Gat(m,5))continue;let{trimmedLines:h}=IZ(Bat(m,1e3,15));h.length<m.length&&h.push("...");let g=fo(js(n).replace(/\./g,""),h.join(`
`).replace(/^\n*|\n*$/g,""),!1);l.push({range:d,code:g})}l.length>0&&e.push({result:{file:n,locations:l},rank:i.rank})}return e.sort((n,i)=>n.rank-i.rank).map(n=>n.result)}function Gat(t,e){let r=0;for(let n of t)if(r+=n.trim().length,r>=e)return!0;return!1}var Yte=we(xn());var Hat=`
User: How do I revert a specific commit?
Assistant:
\`\`\`sh
git revert {commit_id}
\`\`\`

User: How do I print all files recursively within a directory?
Assistant:
\`\`\`sh
ls -lR
\`\`\`

User: How do I delete a directory?
Assistant:
\`\`\`pwsh
rmdir {dir_name}
\`\`\`

User: Print all files starting with "pre"
\`\`\`bash
find . -type f -name 'pre*'
\`\`\`
`.trim(),jat=`
Think step by step:

1. Read the provided relevant workspace information (file names, project files in the project root) to understand the user's workspace.

2. Generate a response that clearly and accurately answers the user's question. In your response, follow the following:
    - Prefer single line commands.
    - Omit an explanation unless the suggestion is complex, if an explanation is included then be concise.
    - Provide the command suggestions using the active terminal's shell type for the {OS_NAME} operating system.
    - Only use a tool like python or perl when it is not possible with the shell.
    - When there is text that needs to be replaced in the suggestion, prefix the text with '{', suffix the text with '}' and use underscores instead of whitespace.
    - Say "I'm not quite sure how to do that." when you aren't confident in your explanation

3. At the end of the response, list all text that needs to be replaced with associated descriptions in the form of a markdown list
`.trim(),Vat={terminalSelection:{location:2,id:"explainTerminal",description:"Explain the terminal selection if it exists, otherwise explain what is happening in the terminal buffer",modelSampleQuestion:"Can you explain what is happening in the terminal selection",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. You are an expert at explaining code to anyone. Your task is to help the Developer understand what is happening in the terminal."},rules:`
Provide well thought out examples
Utilize provided context in examples
Match the style of provided context when using examples
Say "I'm not quite sure how to explain that." when you aren't confident in your explanation`.trim(),contextResolvers:[JAe,XAe],commandInfo:{executeImmediately:!0}},terminalLastCommand:{location:2,id:"explainTerminalLastCommand",description:"Explain the command that was last run in the terminal",modelSampleQuestion:"Can you explain what is happening in the last terminal command",systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. You are an expert at explaining code to anyone. Your task is to help the Developer understand what is happening in the terminal.",examples:'\nBelow you will find a set of examples of how to suggest to fix the command. Please follow these examples as closely as possible.\n```sh\necho "hello world"\n```'},rules:`
Provide well thought out examples
Utilize provided context in examples
Match the style of provided context when using examples
Say "I'm not quite sure how to explain that." when you aren't confident in your explanation
If the command can be fixed, make a suggestion wrapped in a markdown codefenced block`.trim(),contextResolvers:[QAe]}},hDe={systemPromptOptions:{includeCodeGenerationRules:!1,roleplay:"You are a programmer who specializes in using the command line. Your task is to help the Developer craft a command to run on the command line.",examples:Hat},rules:jat,contextResolvers:[cPe,ZAe]},$te=class{constructor(e){this.accessor=e;let r=e.get(gt);hDe.rules.replaceAll("{OS_NAME}",r.OS),this.defaultPanelPromptCrafter=new h0(e,hDe,2,void 0)}async buildPrompt(e,r,n,i,o,s){let a;for(let c of Object.keys(n))if(a=Vat[c],a)break;return a?new h0(this.accessor,a,2,void 0).buildPrompt(e,r,n,i,o,s):this.defaultPanelPromptCrafter.buildPrompt(e,r,n,i,o,s)}};async function zat(t,e){let r="Explain the suggested command",n=!1,i=e.response?.message;if(i){let s=Su(i);if(s.length===0)return[];s.length===1?r=`Explain this command:

${o(s[0])}`:(n=!0,r=`Explain these commands:${s.map(a=>`

${o(a)}`).join("")}`)}return[{prompt:r,label:n?"Explain the suggested commands":"Explain the suggested command"}];function o(s){return`${s.startMarkup}${s.language}
${s.code.trim()}
${s.startMarkup}`}}var b7=class{constructor(){this.locations=[2];this.id="terminal";this.description=Yte.t("Ask how to do something in the terminal");this.intentDetectionInput={sampleQuestion:"How do I view all files within a directory including sub-directories"};this.commandInfo={sampleRequest:Yte.t("How do I view all files within a directory including sub-directories")}}async invoke(e,r,n){let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return{intent:this,location:2,endpoint:o,promptCrafter:new $te(e),followUps:zat}}};var gDe=we(xn());var x7=class extends ue{async prepare(e,r,n){return{capabilitiesPromptPiece:await Mee(this.accessor,this.props.chatLocation,this.props.endpointInfo)}}render(e,r){return vscpp(vscppf,null,e.capabilitiesPromptPiece)}};var E7=class{constructor(){this.id="tests";this.locations=[2,1];this.description=gDe.t("Generate unit tests for the selected code");this.intentDetectionInput={sampleQuestion:"Write a set of detailed unit test functions for the code above."};this.commandInfo=void 0}static{this.ID="tests"}async invoke(e,r){let n=r.documentContext;if(!n)throw new Error("Open a file to generate tests.");let i=r.location,o=await e.get(tt).getUserRequestEndpoint(i,this.id);return QR(n.document)?new Wte(this,o,i,e,n):new Kte(this,o,i,e,n)}},Wte=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.context=o;this.promptCrafter=new h0(this.accessor,{queryPrefix:"Please generate tests for my code.",contextResolvers:[jAe,VAe]},this.location,this.context);this.createReplyInterpreter=Uy.createFactory(this.accessor,this.promptCrafter,this.context);this.responseProcessor=(e,r,n)=>{let i=new AM;return(async()=>{let o=[Ki.begin(this.context.language),Ki.end(this.context.language),wi.forLanguage(this.context.language)];for await(let s of qee(i.asyncIterable))s.kind===1&&o.some(a=>s.value.startsWith(a))||n.markdown(s.value)})().catch(o=>console.error(o)),i}}},Kte=class{constructor(e,r,n,i,o){this.intent=e;this.endpoint=r;this.location=n;this.accessor=i;this.documentContext=o;this.createReplyInterpreter=tS.createFactory(async(e,r)=>{Aoe(this.promptCrafter.selectionContextMetadata,"FileInvocation#createReplyInterpreter: Non-test file prompt crafter must have selection context metadata after prompt is built.");let n=lm(this.promptCrafter.selectionContextMetadata.contextInfo,e,this.documentContext.language);if(!n)return{type:"conversational",content:e};r.report({content:n.contentBeforeCode});let i=n.code,o=this.documentContext.document;if(this.existingTestFile){let c=await this.accessor.get(st).openTextDocument(this.existingTestFile),l=new AB;return l.set(this.existingTestFile,[eo.insert(new Rr(c.lineCount,0),i)]),{type:"workspaceEdit",workspaceEdit:l}}let s=LAe(o),a=Gc.joinPath(o.uri,`../${s}`).with({scheme:$n.untitled}),u=new AB;return u.createFile(a,{ignoreIfExists:!0}),u.replace(a,new Ge(0,0,0,0),i),{type:"workspaceEdit",workspaceEdit:u}});let s=this;this.promptCrafter=new class{async buildPrompt(a,u,c,l,d,p){let f=a.getLatestTurn()?.request.message,m=a.turns.at(-2)?.request.message,h=class extends ue{render(g,v){let _=s.documentContext.language.languageId,y=s.documentContext.language.lineCommentToken;return vscpp(vscppf,null,vscpp(rt,null,"You are an AI programming assistant.",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.",vscpp("br",null),s.location===1&&vscpp(vscppf,null,"The user has a ",_," file opened in a code editor.",vscpp("br",null),"The user includes some code snippets from the file.",vscpp("br",null),"Each code block starts with ``` and ",y," FILEPATH.",vscpp("br",null),"Answer with a single ",_," code block.",vscpp("br",null),"If you modify existing code, you will use the ",y," BEGIN: and ",y," END: markers.",vscpp("br",null)),"Your expertise is strictly limited to software development topics.",vscpp("br",null),"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),"For questions not related to software development, simply give a reminder that you are an AI programming assistant.",vscpp("br",null),"Keep your answers short and impersonal.",s.location===2&&vscpp(vscppf,null,vscpp(x7,{chatLocation:s.location,endpointInfo:u}),vscpp("br",null),"First think step-by-step - describe your plan for what to build in pseudocode, written out in great detail.",vscpp("br",null),"Then output the code in a single code block.",vscpp("br",null),"Minimize any other prose.",vscpp("br",null),"Use Markdown formatting in your answers.",vscpp("br",null),"Make sure to include the programming language name at the start of the Markdown code blocks.",vscpp("br",null),"Avoid wrapping the whole response in triple backticks.",vscpp("br",null),"The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.",vscpp("br",null),"The active document is the source code the user is looking at right now.",vscpp("br",null),"You can only give one reply for each conversation turn.")),m&&vscpp(pe,null,m),vscpp(mM,{documentContext:s.documentContext,endpointInfo:u,onDidFindCandidate:E=>s.existingTestFile=E,onReference:E=>l.report(new vo(E.anchor))}),vscpp(vS,{documentContext:s.documentContext,endpointInfo:u,onSelectionMetadataComputed:E=>s.promptCrafter.selectionContextMetadata=E}),vscpp(pe,null,`Please generate tests for my code. ${f}`.trim()))}};return await new qt(s.accessor,s.endpoint,h,{}).render(l,p)}}}};mo.registerIntent(new I0);mo.registerIntent(new Gy);mo.registerIntent(new S0);mo.registerIntent(new E7);mo.registerIntent(new TS);mo.registerIntent(new N9);mo.registerIntent(new v7);mo.registerIntent(new y7);mo.registerIntent(new b7);mo.registerIntent(Wa.Instance);mo.registerIntent(new c7);mo.registerIntent(new J9);mo.registerIntent(new wM);mo.registerIntent(new NM);mo.registerIntent(new h7);var Yat=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function _De(t,e="client"){if(e==="proxy")return!1;let r=t.slice();return r.reverse(),vDe(r)||vDe(r.filter(n=>n.trim().length>0))}function vDe(t){let e=$at(t);for(let r of Yat){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function $at(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}var Xte=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.newText=[];this.tokens=[];this.text_offset=[]}append(e){e.text&&(this.text.push(e.text),this.newText.push(e.text)),e.delta?.content&&(this.text.push(e.delta.content),this.newText.push(e.delta.content)),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[]))}flush(){let e=this.newText.join("");return this.newText=[],e}};function Kat(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var T7=class t{constructor(e,r,n,i,o,s,a,u,c){this.expectedNumChoices=r;this.ourRequestId=n;this.response=i;this.body=o;this.telemetryData=s;this.dropCompletionReasons=a;this.fastCancellation=u;this.cancellationToken=c;this.requestId=cA(this.response);this.stats=new Qte(this.expectedNumChoices);this.solutions={};this.logger=e.get(Ee).getLogger("streamChoices"),this.telemetryService=e.get(Ue)}static async create(e,r,n,i,o,s,a){let u=await i.body();u.setEncoding("utf8");let c=await e.get(Uc).fastCancellation();return new t(e,r,n,i,u,o,s??["content_filter"],c,a)}async*processSSE(e=async()=>{}){try{yield*this.processSSEInner(e)}finally{this.fastCancellation&&this.cancel(),this.logger.info(`request done: requestId: [${this.ourRequestId}] responseId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),this.logger.debug(`request stats: ${this.stats}`)}}async*processSSEInner(e){let r="",n=!1;e:for await(let i of this.body){if(this.maybeCancel("after awaiting body chunk"))return;this.logger.debug("chunk",i.toString());let[o,s]=Kat(r+i.toString());r=s;for(let a of o){let u=a.slice(5).trim();if(u==="[DONE]"){yield*this.finishSolutions();return}let c;try{c=JSON.parse(u)}catch{this.logger.error(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a),pm(this.telemetryService,`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,a);continue}if(!c.choices){c.copilot_references||(c.error!==void 0?(this.logger.error(`Error in response for request id ${this.requestId.headerRequestId}:`,c.error.message),pm(this.telemetryService,`Error in response for request id ${this.requestId.headerRequestId}:`,c.error.message)):(this.logger.error(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`),pm(this.telemetryService,`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`)));continue}if(this.requestId.created===0&&(this.requestId=cA(this.response,c),this.requestId.created===0&&c.choices?.length&&(this.logger.error(`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId),pm(this.telemetryService,`Request id invalid, should have "completionId" and "created": ${JSON.stringify(this.requestId)}`,this.requestId))),this.allSolutionsDone()&&this.fastCancellation)break e;for(let l=0;l<c.choices.length;l++){let d=c.choices[l];this.logger.debug("choice",d),this.stats.add(d.index),d.index in this.solutions||(this.solutions[d.index]=new Xte);let p=this.solutions[d.index];if(p===null)continue;let f,m=async _=>(_&&(!Array.isArray(_)||!_.every(y=>yPe(y)))&&(_=void 0),f=await e(p.text.join(""),d.index,{text:p.flush(),codeVulnAnnotations:_}),f!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb"));if(d.delta?.annotations?.CodeVulnerability){if(await m()||!n&&(p.append(d),await m(d.delta.annotations.CodeVulnerability)))continue}else if(p.append(d),await m())continue;if(!(!!d.finish_reason||f!==void 0))continue;let g=d.finish_reason??"client-trimmed",v=this.telemetryData.extendedBy({completionChoiceFinishReason:g});if(this.telemetryService.sendGHTelemetryEvent("completion.finishReason",v.properties,v.measurements),this.dropCompletionReasons.includes(d.finish_reason)?this.solutions[d.index]=null:(this.stats.markYielded(d.index),yield{solution:p,finishOffset:f,reason:d.finish_reason??"client-trimmed",filterReason:Xat(d),requestId:this.requestId,index:d.index}),this.maybeCancel("after yielding finished choice"))return;this.solutions[d.index]=null}}}for(let[i,o]of Object.entries(this.solutions)){let s=Number(i);if(o!==null&&(this.stats.markYielded(s),yield{solution:o,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let i=JSON.parse(r);i.error!==void 0&&(this.logger.error(`Error in response: ${i.error.message}`,i.error),pm(this.telemetryService,`Error in response: ${i.error.message}`,i.error))}catch{this.logger.error(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`),pm(this.telemetryService,`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null&&(this.stats.markYielded(n),yield{solution:r,finishOffset:void 0,reason:"DONE",requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logger.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};function yDe(t,e){let n={text:e.text.join(""),tokens:e.text};if(e.logprobs.length===0)return n;let i=e.logprobs.reduce((u,c)=>u.concat(c),[]),o=e.top_logprobs.reduce((u,c)=>u.concat(c),[]),s=e.text_offset.reduce((u,c)=>u.concat(c),[]),a=e.tokens.reduce((u,c)=>u.concat(c),[]);return{...n,logprobs:{token_logprobs:i,top_logprobs:o,text_offset:s,tokens:a}}}function Xat(t){if(t.finish_reason!=="content_filter")return;if(!!t.delta?.annotations?.TextCopyright)return"snippy";if(t.content_filter_results){for(let r of Object.keys(t.content_filter_results))if(t.content_filter_results[r]?.filtered)return r}}var Qte=class{constructor(e){this.choices=new Map;for(let r=0;r<e;r++)this.choices.set(r,new Jte)}add(e){this.choices.get(e).increment()}markYielded(e){this.choices.get(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},Jte=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};function pm(t,e,r){let n=[e,r],i=n.length>0?JSON.stringify(n):"no msg",o=Tr.createAndMarkAsIssued({context:"fetch",level:fI[3],message:i});t.sendRestrictedGHTelemetryErrorEvent("log",o.properties,o.measurements);let s=Tr.createAndMarkAsIssued({context:"fetch",level:fI[3],message:"[redacted]"});t.sendGHTelemetryErrorEvent("log",s.properties,s.measurements)}function bDe(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}function Qat(t,e,r,n,i,o,s,a,u){return s9(t,[e],u),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:s,filterReason:a,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:u}}function xDe(t,e,r){let n=t.get(Ee).getLogger("streamMessages"),i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(n.debug(`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),n.info(`message ${e.index} returned. finish reason: [${e.reason}]`),n.debug(`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let s=yDe(t,e.solution),a={role:"assistant",content:i};return Qat(t,a,s,e.index,e.requestId,o,e.reason,e.filterReason,r)}async function EDe(t,e,r,n,i,o,s){let a=t.get(Ee).getLogger("chat fetch"),u=Zat(t,r);if(o?.isCancellationRequested)return{type:"canceled",reason:"before fetch request"};a.info(`url ${e.url}`),a.info(`modelMaxPromptTokens ${e.modelMaxPromptTokens}`),a.info(`modelMaxResponseTokens ${u.max_tokens??1024}`),a.info(`chat model ${r.model}`),r.intent_model&&a.info(`intent model ${r.intent_model}`),r.intent_tokenizer&&a.info(`intent tokenizer ${r.intent_tokenizer}`),r.intent_threshold&&a.info(`intent threshold ${r.intent_threshold}`);let c=r.secretKey??(await t.get(Dt).getCopilotToken(t)).token;if(!c)return a.error(`Failed to send request to ${e.url} due to missing key`),pm(t.get(Ue),`Failed to send request to ${e.url} due to missing key`),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:"key is missing"};let l=await tct(t,e,r.ourRequestId,u,c,r.location,o,s);if(o?.isCancellationRequested){let h=await l.body();try{h.destroy()}catch(g){a.exception(g,"Error destroying stream"),t.get(Ue).sendGHTelemetryException(g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(l.status!==200){let h=Jat(e,t,r.location,r.ourRequestId);return a.info("Request ID for failed request: ",r.ourRequestId),ect(t,h,l)}let d=r.postOptions?.n??1,f=(await T7.create(t,d,r.ourRequestId,l,n,[],o)).processSSE(i);return{type:"success",chatCompletions:Ap.map(f,h=>xDe(t,h,n)),getProcessingTime:()=>_Pe(l)}}function Jat(t,e,r,n){return Tr.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:Pt.toString(r),headerRequestId:n})}function Zat(t,e){let r={messages:e.messages,model:e.model};e.postOptions&&Object.assign(r,e.postOptions);let n=bDe(e.repoInfo);return n!==void 0&&(r.nwo=n),e.intent&&(r.intent=e.intent,e.intent_model&&(r.intent_model=e.intent_model),e.intent_tokenizer&&(r.intent_tokenizer=e.intent_tokenizer),e.intent_threshold&&(r.intent_threshold=e.intent_threshold)),r}async function ect(t,e,r){let n=t.get(Ee).getLogger("chat fetch"),i=t.get(Ue);if(e.properties.error=`Response status was ${r.status}`,e.properties.status=String(r.status),i.sendGHTelemetryEvent("request.shownWarning",e.properties,e.measurements),r.status===401||r.status===403)return t.get(Dt).resetCopilotToken(t,r.status),{type:"failed",failKind:"tokenExpiredOrInvalid",reason:`token expired or invalid: ${r.status}`};if(r.status===499)return n.info("Cancelled by server"),{type:"failed",failKind:"serverCanceled",reason:"canceled by server"};let o=await r.text();return r.status===466?(n.info(o),{type:"failed",failKind:"clientNotSupported",reason:`client not supported: ${o}`}):r.status===400&&o.includes("off_topic")?{type:"failed",failKind:"offTopic",reason:"filtered as off_topic by intent classifier: message was not programming related"}:r.status===429?{type:"failed",failKind:"rateLimited",reason:o}:r.status>=500&&r.status<600?{type:"failed",failKind:"serverError",reason:`${r.status} ${o}`}:r.status===422?{type:"failed",failKind:"contentFilter",reason:"Filtered by Responsible AI Service"}:(n.error("Unhandled status from server:",r.status,o),pm(t.get(Ue),"Unhandled status from server: "+r.status,o),{type:"failed",failKind:"unknown",reason:`unhandled status from server: ${r.status} ${o}`})}function tct(t,e,r,n,i,o,s,a){let u=t.get(Ee).getLogger("chat fetch"),c=t.get(Ue),l=Tr.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:Pt.toString(o),...a},{maxTokenWindow:e.modelMaxPromptTokens});for(let[f,m]of Object.entries(n))f!=="messages"&&(l.properties[`request.option.${f}`]=JSON.stringify(m)??"undefined");l.properties.headerRequestId=r,c.sendGHTelemetryEvent("request.sent",l.properties,l.measurements);let d=Date.now(),p=rct(o);return qm(t,e,i,p,r,n,s).then(f=>{let m=cA(f,void 0);l.extendWithRequestId(m);let h=Date.now()-d;return l.measurements.totalTimeMs=h,u.info(`request.response: [${e.url}], took ${h} ms`),u.debug("request.response properties",l.properties),u.debug("request.response measurements",l.measurements),u.debug(`messages: ${JSON.stringify(n.messages)}`),c.sendGHTelemetryEvent("request.response",l.properties,l.measurements),f}).catch(f=>{if(t.get(an).isAbortError(f))throw f;let h=l.extendedBy({error:"Network exception"});c.sendGHTelemetryEvent("request.shownWarning",h.properties,h.measurements),l.properties.code=String(f.code??""),l.properties.errno=String(f.errno??""),l.properties.message=String(f.message??""),l.properties.type=String(f.type??"");let g=Date.now()-d;throw l.measurements.totalTimeMs=g,u.debug(`request.response: [${e.url}] took ${g} ms`),u.debug("request.error properties",l.properties),u.debug("request.error measurements",l.measurements),c.sendGHTelemetryEvent("request.error",l.properties,l.measurements),f}).finally(()=>{s9(t,n.messages,l)})}function rct(t){switch(t){case 2:return"conversation-panel";case 1:return"conversation-inline"}}var Zte=class{async fetchOne(e,r,n,i,o,s,a,u){let c=await this.fetchMany(e,r,n,i,o,{...s,n:1},a,u);return c.type==="success"?{...c,value:c.value[0]}:c}},S7=class t extends Zte{constructor(r){super();this.accessor=r;this.logger=r.get(Ee).getPromptResponseLogger("ChatMLFetcher")}async fetchMany(r,n,i,o,s,a,u,c){let l=u?.messageId??gi(),d=Cu(this.accessor,r),p=await this.accessor.get(kr).getTreatmentVariableAsync("vscode","copilotchat.maxResponseTokens",!0),f=Math.min(s.modelMaxPromptTokens-d+(p??1024),4096);a={max_tokens:f,...a};let m=t.preparePostOptions(a),h=s.model;c&&(c.intent_model=await this.getOffTopicModelName(),c.intent_tokenizer=await this.getOffTopicModelTokenizer(),c.intent_threshold=await this.getOffTopicModelThreshold());let g={messages:r.filter(_=>_.content&&_.content!==""),model:h,repoInfo:void 0,ourRequestId:l,location:o,postOptions:m,secretKey:a.secretKey,...c},v=Tr.createAndMarkAsIssued({...u,uiKind:Pt.toString(o)});try{let _=await EDe(this.accessor,s,g,v,n||(async()=>{}),i,u),y=Date.now()-v.issuedTime,E;switch(_.type){case"success":return await this.processSuccessfulResponse(_,g.ourRequestId,f,d,y,v,s);case"canceled":return this.accessor.get(Ue).sendMSFTTelemetryEvent("response.cancelled",{source:u?.messageSource??"unknown",requestId:g.ourRequestId,model:s.model},{totalTokenMax:s.modelMaxPromptTokens??-1,promptTokenCount:d,tokenCountMax:f,timeToFirstToken:y,timeToCancelled:v?Date.now()-v.issuedTime:-1}),this.processCanceledResponse(_,g.ourRequestId);case"failed":return E=this.processFailedResponse(_,g.ourRequestId),this.accessor.get(Ue).sendMSFTTelemetryEvent("response.error",{type:E.type,source:u?.messageSource??"unknown",requestId:g.ourRequestId,model:s.model},{totalTokenMax:s.modelMaxPromptTokens??-1,promptTokenCount:d,tokenCountMax:f,timeToFirstToken:y}),E}}catch(_){return this.processError(_,g.ourRequestId)}}static preparePostOptions(r){return{...r,stream:!0}}async processSuccessfulResponse(r,n,i,o,s,a,u){let c=[];for await(let p of r.chatCompletions)this.accessor.get(Ue).sendMSFTTelemetryEvent("response.success",{reason:p.finishReason,filterReason:p.filterReason,source:a?.properties.messageSource??"unknown",model:u?.model,requestId:n},{totalTokenMax:u?.modelMaxPromptTokens??-1,tokenCountMax:i,promptTokenCount:o,tokenCount:p.numTokens,timeToFirstToken:s,timeToComplete:a?Date.now()-a.issuedTime:-1}),this.isRepetitive(p,a?.properties)||c.push(p);this.logger.debug(`Received choices: ${JSON.stringify(c,null,2)}`);let l=c.filter(p=>p.finishReason==="stop"||p.finishReason==="client-trimmed");if(l.length>=1)return{type:"success",value:l.map(p=>p.message.content),requestId:n};let d=c[0];switch(d?.finishReason){case"content_filter":return{type:"filtered",category:d.filterReason??"snippy",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n}}return{type:"unknown",reason:"Response contained no choices.",requestId:n}}async getOffTopicModelName(){let r=this.accessor.get(ke).getConfig(Le.DebugOverrideChatOffTopicModel);if(r)return r;let n=await this.accessor.get(Uc).chatOffTopicModel();return n||""}async getOffTopicModelTokenizer(){let r=this.accessor.get(ke).getConfig(Le.DebugOverrideChatOffTopicModelTokenizer);if(r)return r;let n=await this.accessor.get(Uc).chatOffTopicModelTokenizer();return n||""}async getOffTopicModelThreshold(){let r=this.accessor.get(ke).getConfig(Le.DebugOverrideChatOffTopicModelThreshold);if(r!==0)return r;let n=await this.accessor.get(Uc).chatOffTopicModelThreshold();return n!==0?n:0}isRepetitive(r,n){let i=_De(r.tokens);if(i){let o=Tr.createAndMarkAsIssued();o.extendWithRequestId(r.requestId);let s=o.extendedBy(n);this.accessor.get(Ue).sendRestrictedGHTelemetryEvent("conversation.repetition.detected",s.properties,s.measurements),this.logger.info("Filtered out repetitive conversation result")}return i}processCanceledResponse(r,n){return this.logger.debug("Cancelled after awaiting fetchConversation"),{type:"canceled",reason:r.reason,requestId:n}}processFailedResponse(r,n){return r.failKind==="rateLimited"?{type:"rateLimited",reason:r.reason,requestId:n}:r.failKind==="offTopic"?{type:"offTopic",reason:r.reason,requestId:n}:r.failKind==="tokenExpiredOrInvalid"||r.failKind==="clientNotSupported"||r.reason.includes("Bad request: ")?{type:"badRequest",reason:r.reason,requestId:n}:r.failKind==="serverError"?{type:"failed",reason:r.reason,requestId:n}:r.failKind==="contentFilter"?{type:"filtered",reason:r.reason,category:"prompt",requestId:n}:{type:"failed",reason:r.reason,requestId:n}}processError(r,n){let i=this.accessor.get(an);return i.isAbortError(r)?{type:"canceled",reason:"network request aborted",requestId:n}:r instanceof Gl?{type:"canceled",reason:"Got a cancellation error",requestId:n}:(this.accessor.get(Ee).defaultLogger.exception(r,"Error on conversation request"),this.accessor.get(Ue).sendGHTelemetryException(r,"Error on conversation request"),i.isDNSLookupFailedError(r)?{type:"failed",reason:"It appears you're not connected to the internet, please check your network connection and try again.",requestId:n}:i.isFetcherError(r)?{type:"failed",reason:`Please check your firewall rules and network connection then try again. Error Code: ${r.code}.`,requestId:n}:{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};var R7=we(require("vscode")),TDe=we(require("path"));var I7=class extends ue{render(){return vscpp(vscppf,null,vscpp(rt,null,vscpp(ere,null),vscpp(Mt,null)),vscpp(pe,null,vscpp(tre,{templates:this.props.templates,features:this.props.features,filenames:this.props.filenames})))}},ere=class extends ue{render(){return vscpp(vscppf,null,"You are an AI programming assistant.",vscpp("br",null),"You are helping a software developer to configure a Dev Container by picking a configuration template and features.")}},tre=class extends ue{render(){return vscpp(vscppf,null,"This is a partial list of workspace files:",vscpp("br",null),this.props.filenames.map(e=>`- ${e}
`).join(""),vscpp("br",null),"Based on the workspace files, please suggest the best template from the list of templates below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick the best template and reply with the best template's id.",vscpp("br",null),"This is the list of available templates:",vscpp("br",null),this.props.templates.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null),"Also based on the workspace files, please suggest all relevant features from the list of features below.",vscpp("br",null),"First identify the relevant files ignoring common files, then pick all relevant features and reply with the relevant features' ids.",vscpp("br",null),"This is the list of available features:",vscpp("br",null),this.props.features.map(e=>`- ${e.id}: ${e.name||e.id}: ${e.description||e.name||e.id}
`).join(""),vscpp("br",null))}};var nct=["alpine","debian","docker-existing-docker-compose","docker-existing-dockerfile","docker-in-docker","docker-outside-of-docker","docker-outside-of-docker-compose","ubuntu","universal"].map(t=>`ghcr.io/devcontainers/templates/${t}`),ict=["common-utils","git"].map(t=>`ghcr.io/devcontainers/features/${t}`),C7=class{constructor(e){this.accessor=e;this.telemetryService=e.get(Ue),this.logger=e.get(Ee).getPromptResponseLogger("Dev Container Configuration Generator"),this.options=e.get(bs)}async generate(e,r,n){if(!r.length)return{type:"success",template:void 0,features:[]};let i=Date.now(),o=await this.accessor.get(tt).getUserRequestEndpoint(3),s=Math.floor(o.modelMaxPromptTokens*4/3),a=this.processFilenames(r,s),u=e.templates.filter(h=>!nct.includes(h.id)),c=(e.features||[]).filter(h=>!ict.includes(h.id)),d=await new qt(this.accessor,o,I7,{filenames:a,templates:u,features:c}).render(),p=Date.now(),f=await this.accessor.get(wr).fetchOne(d.messages,void 0,n,3,o,{temperature:this.options.temperature,top_p:this.options.topP},{messageSource:"command.generateDevContainerConfigPrompt"});this.logger.logResponse(f);let m=f.type==="success"?this.processGeneratedConfig(f.value,u,c):void 0;return this.telemetryService.sendMSFTTelemetryEvent("devcontainer.generateConfig",{model:o.model,requestId:f.requestId,responseType:f.type,templateId:m?.template,featureIds:m?.features.join(",")},{originalFilenameCount:r.length,originalFilenameLength:r.join("").length,processedFilenameCount:a.length,processedFilenameLength:a.join("").length,timeToRequest:p-i,timeToComplete:Date.now()-i}),{type:"success",template:m?.template,features:m?.features||[]}}processFilenames(e,r){let n=[...e],i=Math.floor(r*.9),o=n.join(`
`).length;if(o>i)for(;o>i&&n.length>0;){let s=n.pop();o-=s.length}return n}processGeneratedConfig(e,r,n){let i=r.find(o=>new RegExp(`\\b${jU(o.id)}\\b`).test(e))?.id;return i==="ghcr.io/devcontainers/templates/javascript-node"&&(i="ghcr.io/devcontainers/templates/typescript-node"),{template:i,features:n.filter(o=>new RegExp(`\\b${jU(o.id)}\\b`).test(e)).map(o=>o.id)}}};var w7=class{constructor(e){this.accessor=e}async generateConfiguration(e,r){if(r.isCancellationRequested)return{type:"cancelled"};let n=(await Promise.all(["*","*/*","*/*/*"].map(o=>R7.workspace.findFiles(new R7.RelativePattern(e.rootUri,o),void 0,1e3,r)))).flat().map(o=>TDe.posix.relative(e.rootUri.path,o.path));return new C7(this.accessor).generate(e.index,n,r)}};var LA=require("vscode");var A7=class{constructor(e){this.accessor=e;this._commitMessages=new Map;this._disposables=new $r;this._repositoryDisposables=new pb;let r=()=>{this._disposables.add(this._gitExtensionApi.onDidOpenRepository(this._onDidOpenRepository,this)),this._disposables.add(this._gitExtensionApi.onDidCloseRepository(this._onDidCloseRepository,this));for(let i of this._gitExtensionApi.repositories)this._onDidOpenRepository(i)},n=this.accessor.get(qN);this._gitExtensionApi=n.getExtensionApi(),this._gitExtensionApi?r():this._disposables.add(n.onDidChange(()=>{this._gitExtensionApi=n.getExtensionApi(),r()}))}async generateCommitMessage(e,r=zo.None){if(r.isCancellationRequested)return;let n=this._getRepository(e);n&&await LA.window.withProgress({location:LA.ProgressLocation.SourceControl},async()=>{let i=await n.getDiff(),o=this._getAttemptCount(n,i),a=await new yS(this.accessor).generateGitCommitMessage(i,o,r);if(a&&(n.inputBox.value=a,n.state.HEAD&&n.state.HEAD.commit)){let u=this._commitMessages.get(n.rootUri.toString())??new Map;u.set(n.state.HEAD.commit,{attemptCount:o,changes:i,message:a}),this._commitMessages.set(n.rootUri.toString(),u)}})}_getAttemptCount(e,r){let i=this._commitMessages.get(e.rootUri.toString())?.get(e.state.HEAD?.commit??"");if(!i||i.changes.length!==r.length)return 1;for(let o=0;o<r.length;o++)if(i.changes[o]!==r[o])return 1;return i.attemptCount+1}_getRepository(e){return this._gitExtensionApi?this._gitExtensionApi.repositories.length===1?this._gitExtensionApi.repositories[0]:(e=e??LA.window.activeTextEditor?.document.uri,e?this._gitExtensionApi.getRepository(e):null):null}_onDidOpenRepository(e){typeof e.onDidCommit!==void 0&&this._repositoryDisposables.set(e,e.onDidCommit(()=>this._onDidCommit(e),this))}_onDidCloseRepository(e){this._repositoryDisposables.deleteAndDispose(e),this._commitMessages.delete(e.rootUri.toString())}async _onDidCommit(e){let r=e.state.HEAD;if(!r?.commit)return;let n=this._commitMessages.get(e.rootUri.toString());if(!n)return;let i=await e.getCommit(r.commit),o=i.parents.length>0?i.parents[0]:"",s=n.get(o);if(!s)return;let a=TA(i.message,s.message);this.accessor.get(Ue).sendMSFTTelemetryEvent("git.generateCommitMessageSurvival",void 0,{attemptCount:s.attemptCount,survivalRateFourGram:a}),n.delete(o),this._commitMessages.set(e.rootUri.toString(),n)}dispose(){this._repositoryDisposables.dispose(),this._disposables.dispose()}};var N7=require("vscode");var P7=class{constructor(e){this._chatVariableService=e.get(hS),this._fsService=e.get(Zi)}async resolveVariablesInPrompt(e,r){let n=[];for(let i of r){let o=i.values.find(s=>s.level===N7.ChatVariableLevel.Full)??i.values[0];if(o.value instanceof N7.Uri){let s=(await this._fsService.readFile(o.value)).toString().replace(/\r/g,"");o={...o,value:fo("",s)}}if(o.kind==="github.docset")e=e.slice(0,i.range[0])+o.value+e.slice(i.range[1]);else{let s=this._chatVariableService.getVariable(i.name);n.push({kind:s?.kind??"variable",userMessages:[oct(i.name)+o.value]}),e=e.slice(0,i.range[0])+`[#${i.name}](#${i.name}-context)`+e.slice(i.range[1])}}return{parts:n,message:e}}};function oct(t){return`# ${t.toUpperCase()} CONTEXT
`}var sct=[],SDe=sct;var rre={};Fn(rre,{create:()=>act});async function act(t){await t.get(st).ensureWorkspaceIsFullyLoaded()}var cct=[...SDe,rre],IDe=cct;var nre={};Fn(nre,{create:()=>uct});var wDe=require("vscode");async function CDe(t,e){let r=t.get(Dt),n=t.get(Gm),i=t.safeGet(xs)?.repositories;if(!i){e.debug("No git repositories found");return}let o=i.map(GN).filter(a=>a);if((await Promise.all(o.map(a=>{let[u,c]=a.split("/");return n.isAvailable(u,c)}))).some(a=>!a)){let a=await r.getAnyGitHubToken(),u=await r.getPermissiveGitHubToken({silent:!0});if(!a||u)return;try{let c=t.get(Jr).globalState,l=c.get("copilot.shownPermissiveTokenModal",!1),d={};l||(d.forceNewSession={detail:wDe.l10n.t("We need more permissions to work with this type of repository")},c.update("copilot.shownPermissiveTokenModal",!0)),await t.get(Dt).getPermissiveGitHubToken(d)&&e.debug("Got permissive GitHub token")}catch(c){e.debug("Failed to get permissive GitHub token",c),await r.getPermissiveGitHubToken({})}}}async function RDe(t){let e=t.get(Dt),r=t.get(Ee).getLogger("auth");try{if((await e.getCopilotToken(t)).getTokenValue("chat")==="1"){await CDe(t,r);return}}catch(i){r.debug("Failed to get copilot token",i)}return t.get(ys).onCopilotToken(async i=>{i.envelope.chat_enabled!==!1&&await CDe(t,r)})}function uct(t){return RDe(t)}var lct=[...IDe,nre],ADe=lct;var PDe=we(require("path"));var A0=class t{constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,s;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,s=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,s=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new t(n,i,o,s)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=r.startLineNumber,u=r.startColumn,c=r.endLineNumber,l=r.endColumn;return n<a?(n=a,i=u):n===a&&(i=Math.max(i,u)),o>c?(o=c,s=l):o===c&&(s=Math.min(s,l)),n>o||n===o&&i>s?null:new t(n,i,o,s)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new qy(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new qy(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,s=r.startLineNumber|0;if(o===s){let a=e.startColumn|0,u=r.startColumn|0;if(a===u){let c=e.endLineNumber|0,l=r.endLineNumber|0;if(c===l){let d=e.endColumn|0,p=r.endColumn|0;return d-p}return c-l}return a-u}return o-s}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var aa=class t{static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new D7(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new D7(e[n].slice()));return r.ranges}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new ju(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new A0(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new A0(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Or(this.startLineNumber-1,this.endLineNumberExclusive-1)}},D7=class t{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=_P(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=tI(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=AU(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=AU(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],u=e._normalizedRanges[i];a.startLineNumber<u.startLineNumber?(s=a,n++):(s=u,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new aa(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(r.push(o),o=s)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=_P(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=tI(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let s=r;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new aa(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new aa(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&r.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var k7=class t{constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};var OA=class t{static inverse(e,r,n){let i=[],o=1,s=1;for(let u of e){let c=new t(new aa(o,u.original.startLineNumber),new aa(s,u.modified.startLineNumber));c.modified.isEmpty||i.push(c),o=u.original.endLineNumberExclusive,s=u.modified.endLineNumberExclusive}let a=new t(new aa(o,r+1),new aa(s,n+1));return a.modified.isEmpty||i.push(a),i}static clip(e,r,n){let i=[];for(let o of e){let s=o.original.intersect(r),a=o.modified.intersect(n);s&&!s.isEmpty&&a&&!a.isEmpty&&i.push(new t(s,a))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}},L7=class t extends OA{constructor(r,n,i){super(r,n);this.innerChanges=i}flip(){return new t(this.modified,this.original,this.innerChanges?.map(r=>r.flip()))}},O7=class t{constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}};var dct=PDe.join(__dirname,"diffWorker.js"),M7=class{constructor(){this._worker=new ga(()=>new Hm(dct))}dispose(){this._worker.hasValue&&this._worker.value.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:s(i.changes),moves:i.moves.map(a=>new k7(new OA(new aa(a[0],a[1]),new aa(a[2],a[3])),s(a[4])))};function s(a){return a.map(u=>new L7(new aa(u[0],u[1]),new aa(u[2],u[3]),u[4]?.map(c=>new O7(new A0(c[0],c[1],c[2],c[3]),new A0(c[4],c[5],c[6],c[7])))))}}};var Dl=we(require("vscode"));var F7=class{get sessionId(){return Dl.env.sessionId}get machineId(){return Dl.env.machineId}get OS(){switch(doe){case 3:return"Windows";case 1:return"Mac";case 2:return"Linux";default:return"Linux"}}get language(){return Dl.env.language}getAllExtensions(){return Dl.extensions.all}async getAllCommands(){return Dl.commands.executeCommand("_getAllCommands")}async getAllSettings(){return Dl.commands.executeCommand("_getAllSettings")}isProduction(){return zP}isPreRelease(){return Dp}getBuildType(){return tc.buildType}getVersion(){return tc.version}getBuild(){return tc.build}getName(){return tc.name}getEditorInfo(){return new pI("vscode",Dl.version)}getEditorPluginInfo(){return new pI("copilot-chat",tc.version)}getEditorVersionHeaders(){return{"Editor-Version":this.getEditorInfo().format(),"Editor-Plugin-Version":this.getEditorPluginInfo().format()}}};var kl=we(require("vscode")),SS=class{async stat(e){return kl.workspace.fs.stat(e)}async readDirectory(e){return kl.workspace.fs.readDirectory(e)}async createDirectory(e){return kl.workspace.fs.createDirectory(e)}async readFile(e){return kl.workspace.fs.readFile(e)}async writeFile(e,r){return kl.workspace.fs.writeFile(e,r)}async delete(e,r){return kl.workspace.fs.delete(e,r)}async rename(e,r,n){return kl.workspace.fs.rename(e,r,n)}async copy(e,r,n){return kl.workspace.fs.copy(e,r,n)}isWritableFileSystem(e){return!!kl.workspace.fs.isWritableFileSystem(e)}createFileSystemWatcher(e){return kl.workspace.createFileSystemWatcher(e)}};var U7=class extends SS{constructor(r){super();this._accessor=r}async readFile(r){return this._accessor.get(Wt).isCopilotIgnored(r)?new Uint8Array:super.readFile(r)}};var MA=se("ICertificateReaderCache"),B7=class{constructor(){this.cache=new Map}get(e){return this.cache.get(e)}set(e,r){this.cache.set(e,r)}};var J4e=we(require("fs"));var bF=se("IRootCertificateReader"),Z4e=(t,e=process.platform)=>new lne(t.get(ys),Jdt(e,t),new _ne),lne=class{constructor(e,r,n){this.realReader=r;this.noopReader=n;this.delegate=r,e.onCopilotToken(i=>{this.delegate=i.token.getTokenValue("ssc")==="1"?this.realReader:this.noopReader})}getAllRootCAs(){return this.delegate.getAllRootCAs()}},Jdt=(t,e)=>{let r=e.get(MA).get(t);if(r)return r;let n=Zdt(t,e),i=new fne(n),o=new pne(i),s=new dne(e,o);return e.get(MA).set(t,s),s},Zdt=(t,e)=>{switch(t){case"linux":return new mne;case"darwin":return new hne;case"win32":return new gne(e);default:return new vne}},dne=class{constructor(e,r){this.accessor=e;this.delegate=r}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(e){return this.accessor.get(Ee).getLogger("certificates").warn(`Failed to read root certificates: ${e}`),[]}}},pne=class{constructor(e){this.delegate=e}async getAllRootCAs(){return this.certificates||(this.certificates=await this.delegate.getAllRootCAs()),this.certificates}},fne=class{constructor(e){this.delegate=e}async getAllRootCAs(){let e=await this.delegate.getAllRootCAs(),r=process.env.NODE_EXTRA_CA_CERTS;if(!r)return e;let n=await eLe(r);return e.concat(n)}},mne=class{async getAllRootCAs(){let e=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let n=await eLe(r);e=e.concat(n)}return e}},hne=class{async getAllRootCAs(){let e=Q4e();return e.all(e.der2.pem).filter(r=>r!==void 0)}},gne=class{constructor(e){this.accessor=e}async getAllRootCAs(){return await this.accessor.get(XN).loadCaCerts()||[]}},vne=class{async getAllRootCAs(){throw new Error("No certificate reader available for unsupported platform")}},_ne=class{async getAllRootCAs(){return[]}};async function eLe(t){try{let n=(await J4e.promises.readFile(t,{encoding:"utf8"})).split(/(?=-----BEGIN CERTIFICATE-----)/g).filter(o=>o.length>0),i=new Set(n);return Array.from(i)}catch(e){if(e?.code!=="ENOENT")throw e}return[]}var tLe=we(require("http"));var ept=407,xF=se("IProxySocketFactory"),vm=class extends Error{constructor(r,n,i){super(r);this.cause=n;this.responseStatus=i}};function rLe(t){return new yne(t,new bne(t))}var yne=class{constructor(e,r,n=process.platform){this.accessor=e;this.delegate=r;this.platform=n;this.successfullyAuthorized=new lb(20);this.logger=e.get(Ee).getLogger("proxy-socket-factory")}async createSocket(e,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(this.logger.debug("Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(e,r));try{return await this.delegate.createSocket(e,r)}catch(n){if(n instanceof vm&&n.responseStatus===ept){this.logger.debug("Proxy authorization required, trying to authorize first time");let i=await this.authorizeAndCreateSocket(e,r);if(i)return this.logger.debug("Proxy authorization successful, caching result"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),i}throw n}}async reauthorize(e,r){let n=await this.authorize(r);n&&(this.logger.debug("Proxy re-authorization successful, received token"),e.headers["Proxy-Authorization"]="Negotiate "+n)}async authorizeAndCreateSocket(e,r){let n=await this.authorize(r);if(this.logger.debug("Proxy authorization successful, received token"),n)return this.logger.debug("Trying to create socket with proxy authorization"),e.headers["Proxy-Authorization"]="Negotiate "+n,await this.delegate.createSocket(e,r)}async authorize(e){this.logger.debug("Loading kerberos module");let r=await tpt(this.accessor);if(!r){this.logger.debug("Could not load kerberos module");return}let n=this.computeSpn(e);this.logger.debug("Initializing kerberos client using spn",n);let i=await r.initializeClient(n);this.logger.debug("Perform client side kerberos step");let o=await i.step("");return this.logger.debug("Received kerberos server response"),o}computeSpn(e){let r=this.accessor.get(ke),n=r.isDefaultSettingOverwritten(Le.KerberosServicePrincipal)?r.getConfig(Le.KerberosServicePrincipal):e.kerberosServicePrincipal;if(n)return this.logger.debug("Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${e.host}`:`HTTP@${e.host}`;return this.logger.debug("Using default kerberos spn",i),i}getProxyCacheKey(e){return e.host+":"+e.port}},bne=class{constructor(e){this.logger=e.get(Ee).getLogger("proxy-socket-factory")}async createSocket(e,r){let n=this.createConnectRequestOptions(e,r);return new Promise((i,o)=>{this.logger.debug("Attempting to establish connection to proxy");let s=tLe.request(n);s.useChunkedEncodingByDefault=!1,s.once("connect",(a,u,c)=>{this.logger.debug("Socket Connect returned status code",a.statusCode),s.removeAllListeners(),u.removeAllListeners(),a.statusCode!==200?(u.destroy(),o(new vm("tunneling socket could not be established",void 0,a.statusCode))):c.length>0?(u.destroy(),o(new vm("got illegal response body from proxy"))):(this.logger.debug("Successfully established tunneling connection to proxy"),i(u))}),s.once("error",a=>{this.logger.debug("Proxy socket connection error",a.message),s.removeAllListeners(),o(new vm("tunneling socket could not be established",a))}),s.on("timeout",()=>{this.logger.debug("Proxy socket connection timeout"),o(new vm(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${n.host}:${n.port}`))}),s.end()})}createConnectRequestOptions(e,r){let n={...r,method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port,"Proxy-Connection":"keep-alive"},timeout:e.timeout};return e.localAddress&&(n.localAddress=e.localAddress),this.configureProxyAuthorization(n,e),n}configureProxyAuthorization(e,r){e.headers["Proxy-Authorization"]=[],e.proxyAuth&&e.headers["Proxy-Authorization"].push("Basic "+Buffer.from(e.proxyAuth).toString("base64")),r.headers&&r.headers["Proxy-Authorization"]&&e.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}};async function tpt(t){try{return t.get(KN).loadKerberos()}catch{return}}var rpt=we(require("http")),npt=we(require("https"));var EF=class extends Bm{constructor(r){super();this._envService=r}fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}_fetch(r,n,i,o,s){return new Promise((a,u)=>{let l=(r.startsWith("https:")?npt:rpt).request(r,{method:n,headers:i},d=>{if(s.aborted){d.destroy(),l.destroy(),u(xne(s));return}let p=new Ene(l,d,s);a(new Lm(d.statusCode||0,d.statusMessage||"",p.headers,async()=>p.text(),async()=>p.json(),async()=>p.body()))});l.setTimeout(60*1e3),l.on("error",u),o&&l.write(o),l.end()})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return ipt(r)}isDNSLookupFailedError(r){return r&&r.code==="ENOTFOUND"}isFetcherError(r){return r&&["EADDRINUSE","ECONNREFUSED","ECONNRESET","ENOTFOUND","EPIPE","ETIMEDOUT"].includes(r.code)}};function xne(t){return t.reason}function ipt(t){return t&&t.name==="AbortError"}var Ene=class{constructor(e,r,n){this.req=e;this.res=r;this.signal=n;this.headers=new class{get(i){let o=r.headers[i];return Array.isArray(o)?o[0]:o??null}[Symbol.iterator](){let i=Object.keys(r.headers),o=0;return{next:()=>{if(o>=i.length)return{done:!0,value:void 0};let s=i[o++];return{done:!1,value:[s,this.get(s)]}}}}}}text(){return new Promise((e,r)=>{let n=[];this.res.on("data",i=>n.push(i)),this.res.on("end",()=>e(Buffer.concat(n).toString())),this.res.on("error",r),this.signal.addEventListener("abort",()=>{this.res.destroy(),this.req.destroy(),r(xne(this.signal))})})}async json(){let e=await this.text();return JSON.parse(e)}async body(){return this.signal.addEventListener("abort",()=>{this.res.emit("error",xne(this.signal)),this.res.destroy(),this.req.destroy()}),this.res}};var Tne=require("stream");var TF=class t extends Bm{constructor(r,n){super();this._net=r;this._envService=n}static create(r){let n=opt();return n?new t(n,r):null}async fetch(r,n){let i=n.headers||{};i["User-Agent"]=`GitHubCopilotChat/${this._envService.getVersion()}`;let o=n.body;if(n.json){if(n.body)throw new Error("Illegal arguments! Cannot pass in both 'body' and 'json'!");i["Content-Type"]="application/json",o=JSON.stringify(n.json)}let s=n.method||"GET";if(s!=="GET"&&s!=="POST")throw new Error("Illegal arguments! 'method' must be either 'GET' or 'POST'!");let a=n.signal??new AbortController().signal;if(a&&!(a instanceof AbortSignal))throw new Error("Illegal arguments! 'signal' must be an instance of AbortSignal!");return this._fetch(r,s,i,o,a)}async _fetch(r,n,i,o,s){let a=await this._net.fetch(r,{method:n,headers:i,body:o,signal:s});return new Lm(a.status,a.statusText,a.headers,()=>a.text(),()=>a.json(),async()=>{if(!a.body)return Tne.Readable.from([]);let u=a.body[Symbol.asyncIterator]();return Tne.Readable.from(u)})}async disconnectAll(){}makeAbortController(){return new AbortController}isAbortError(r){return r&&r.name==="AbortError"}isDNSLookupFailedError(r){return r.message==="net::ERR_INTERNET_DISCONNECTED"}isFetcherError(r){return r&&r.message&&r.message.startsWith("net::")}};function opt(){try{return require("electron").net}catch{}}var YS=we(s3e(),1),K4r={ALPN_HTTP2:YS.default.ALPN_HTTP2,ALPN_HTTP2C:YS.default.ALPN_HTTP2C,ALPN_HTTP1_1:YS.default.ALPN_HTTP1_1,ALPN_HTTP1_0:YS.default.ALPN_HTTP1_0},{fetch:X4r,context:a3e,reset:Q4r,noCache:J4r,h1:Z4r,keepAlive:eLr,h1NoCache:tLr,keepAliveNoCache:rLr,cacheStats:nLr,clearCache:iLr,offPush:oLr,onPush:sLr,createUrl:aLr,timeoutSignal:cLr,Body:uLr,Headers:lLr,Request:dLr,Response:pLr,AbortController:c3e,AbortError:u3e,AbortSignal:fLr,FetchBaseError:mLr,FetchError:Jne,ALPN_HTTP2:hLr,ALPN_HTTP2C:gLr,ALPN_HTTP1_1:vLr,ALPN_HTTP1_0:_Lr}=YS.default;var l3e=we(require("tls"));var qF=class{constructor(e){this._certificateReader=e.get(bF)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async applyToRequestOptions(e){let r=await this._certificateReader.getAllRootCAs(),n={_vscodeAdditionalCaCerts:r};e.secureContext=l3e.createSecureContext(n),e.ca=r,e.cert=r,r.map(i=>{e.secureContext.context.addCACert(i)})}};var GF=class extends Bm{constructor(r){super();this.accessor=r;this.createSocketFactory=(r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);try{return await this.proxySocketFactory.createSocket(i,o)}catch(s){throw s instanceof vm&&s.cause?new Error(`${s.message}, cause=${s.cause.message}`):new Error(s.message)}};this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new qF(r),this.proxySocketFactory=r.get(xF)}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.accessor)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){this._rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.accessor)}get rejectUnauthorized(){return this._rejectUnauthorized}createFetchApi(r){let n=r.get(gt);return a3e({userAgent:`GitHubCopilotChat/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,this.rejectUnauthorized):void 0,rejectUnauthorized:this.rejectUnauthorized})}async fetch(r,n){let i={...n,body:n.body?n.body:n.json,signal:n.signal};await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(o);let s=await this.fetchApi.fetch(r,i);return new Lm(s.status,s.statusText,s.headers,()=>s.text(),()=>s.json(),async()=>s.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new c3e}isAbortError(r){return r instanceof u3e}isDNSLookupFailedError(r){return r instanceof Jne&&r.code==="ENOTFOUND"}isFetcherError(r){return r instanceof Jne}};var p3e=require("net"),f3e=require("url"),$S=require("vscode");function Amt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy||null}function m3e(t,e){$S.workspace.onDidChangeConfiguration(r=>{let n=r.affectsConfiguration("http.proxy");(r.affectsConfiguration("http.proxyStrictSSL")||r.affectsConfiguration("http.proxyAuthorization")||r.affectsConfiguration("http.proxyKerberosServicePrincipal")||n)&&d3e(t,e,n)}),d3e(t,e)}var d3e=(t,e,r)=>{let i=$S.workspace.getConfiguration("http").get("proxy")||Amt(e);if(i){let o={},s=$S.workspace.getConfiguration("http").get("proxyAuthorization"),a=$S.workspace.getConfiguration("http").get("proxyStrictSSL",!0);s&&(o["Proxy-Authorization"]=s);let u=i,c=i.split(":");if(c.length>2){if(i.includes("[")){let v=i.indexOf("["),_=i.indexOf("]");u=i.substring(v+1,_)}}else u=c[0];let l=(0,p3e.isIP)(u);l===4?i=`https://${i}`:l===6&&(i.includes("[")?i.startsWith("https://")||(i=`https://${i}`):i=`https://[${i}]`);let{hostname:d,port:p,username:f,password:m}=Pmt(i),h=f&&m&&`${decodeURIComponent(f)}:${decodeURIComponent(m)}`;t.proxySettings={host:d,port:parseInt(p),proxyAuth:h,headers:o};let g=$S.workspace.getConfiguration("http").get("proxyKerberosServicePrincipal");g&&(t.proxySettings.kerberosServicePrincipal=g),t.rejectUnauthorized=a}else r&&!i&&(t.proxySettings=void 0)};function Pmt(t){try{return new f3e.URL(t)}catch{throw new Error(`Invalid proxy URL: '${t}'`)}}var HF=class extends GF{constructor(e){super(e),m3e(this,process.env)}};var jF=class{get fetchStrategy(){return this._fetchStrategy}set fetchStrategy(e){e===2&&!this._electronFetcher&&(this._logger.warn("Cannot use Electron fetcher: Electron net module is not available!"),e=0),this._logger.info(`Using ${JP[e]} fetcher`),this._fetchStrategy=e}get _fetcher(){switch(this.fetchStrategy){case 1:return this._nodeFetcher;case 0:return this._helixFetcher;case 2:return this._electronFetcher??this._helixFetcher}}constructor(e){this._logger=e.get(Ee).getLogger("FetcherService"),this._nodeFetcher=new EF(e.get(gt)),this._helixFetcher=new HF(e),this._electronFetcher=TF.create(e.get(gt)),this._fetchStrategy=0;let r=e.get(ke).getConfig(Le.DebugUseElectronFetcher),n=e.get(ke).getConfig(Le.DebugUseNodeFetcher);this.fetchStrategy=r?2:n?1:0}fetch(e,r){return this._fetcher.fetch(e,r)}disconnectAll(){return this._fetcher.disconnectAll()}makeAbortController(){return this._fetcher.makeAbortController()}isAbortError(e){return this._fetcher.isAbortError(e)}isDNSLookupFailedError(e){return this._fetcher.isDNSLookupFailedError(e)}isFetcherError(e){return this._fetcher.isFetcherError(e)}};var zF=we(require("vscode")),VF=class{async open(e){await zF.commands.executeCommand("vscode.open",zF.Uri.parse(e))}};function h3e(t){let r=[`(repo:${(Array.isArray(t.repo)?t.repo:[t.repo]).join(" OR repo:")})`];return t.lang&&r.push(`(lang:${t.lang.join(" OR lang:")})`),t.notLang&&r.push(`NOT (lang:${t.notLang.join(" OR lang:")})`),t.path&&r.push(`(path:${t.path.join(" OR path:")})`),t.notPath&&r.push(`NOT (path:${t.notPath.join(" OR path:")})`),r.join(" ")}var YF=class extends Error{constructor(r,n){super(n);this.status=r}},$F=class{constructor(e){this._accessor=e;this._logger=this._accessor.get(Ee).getLogger("CodeOrDocsSearchClient");this._configurationService=this._accessor.get(ke)}async isAvailable(){try{return this._logger.debug("Trying to use API to see if it is available"),await this.search("the",{repo:"microsoft/vscode"},1,.1,void 0),!0}catch{return!1}}async search(e,r,n=6,i=.766,o){let s;try{s=await this.postCodeOrDocsSearchRequestWithRetry(e,r,i,n,o)}catch(u){throw this._accessor.get(Ue).sendGHTelemetryException(u,`${this.slug} search failed`),u}let a=s.errors?.map(JRe)??[];if(!Array.isArray(r.repo)){if(a.length)throw a.length>1?new AggregateError(a):a[0];return s.results}return{results:s.results,errors:a}}async postCodeOrDocsSearchRequestWithRetry(e,r,n,i,o){let s=this._accessor.get(Dt),a=await s.getPermissiveGitHubToken({silent:!0})??await s.getAnyGitHubToken(),u=`${this._configurationService.getConfig(Le.AgentsEndpointUrl)}/search/${this.slug}`,c=5,l=0,d=new Set,p;for(;l<c;)try{let f;try{return f=await this.postCodeOrDocsSearchRequest(u,a,e,r,n,i,o),f}catch(m){if(m instanceof YF)throw m;p=m;break}}catch(f){l++;let m=l*1e3;d.add(`Error fetching ${this.slug} search. ${f.message??f}`),this._logger.warn(`[repo:${r.repo}] Error fetching ${this.slug} search. Retrying in ${l} seconds. Query: ${e}`),await new Promise(h=>setTimeout(h,m))}throw l>=c&&(this._logger.warn(`[repo:${r.repo}] Max Retry Error thrown while querying '${e}'`),p=DZ({error:"ERROR_TYPE_MAX_RETRIES_EXCEEDED",message:`${this.slug} search timed out after ${c} retries. ${Array.from(d).join(`
`)}`})),p}async postCodeOrDocsSearchRequest(e,r,n,i,o,s,a){let u={url:e,modelMaxPromptTokens:0,getExtraHeaders(){return{Accept:"application/json","X-GitHub-Api-Version":"2023-12-12-preview"}}},c=await qm(this._accessor,u,r??"",void 0,gi(),{query:n,scopingQuery:h3e(i),similarity:o,limit:s},a),l=await c.text();if(c.status===404||c.status===400&&l.includes("unknown integration"))throw this._logger.debug(`${this.slug} search endpoint not available for this user.`),DZ({error:"ERROR_TYPE_NO_ACCESS_TO_ENDPOINT",message:`${this.slug}: ${l}`});let d;try{d=JSON.parse(l)}catch{throw new YF(c.status,l)}return d}},WF=class extends $F{constructor(){super(...arguments);this.slug="code"}},KF=class extends $F{constructor(){super(...arguments);this.slug="docs"}};var XF=class{sendEventData(e,r){throw new Error("Telemetry disabled")}sendErrorData(e,r){throw new Error("Telemetry disabled")}flush(){return Promise.resolve()}};var Zne=class{getReporter(e,r){if(!r)return this.reporter;if(QF(e))return this.reporterSecure;if(e.get(Jr).extensionMode===_a.Test)return new XF}setReporter(e){this.reporter=e}setSecureReporter(e){this.reporterSecure=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.flush?this.reporter.flush():void 0,this.reporter=void 0);let r=Promise.resolve();this.reporterSecure&&(r=this.reporterSecure.flush?this.reporterSecure.flush():void 0,this.reporterSecure=void 0),await Promise.all([e,r])}},JF=class{constructor(e){this.accessor=e;this.reporters=new Zne;this.openPromises=void 0}withPromise(e){return this.openPromises?(this.openPromises.add(e),e.then(r=>{this.openPromises?.delete(e)})):e}async enablePromiseTracking(e){e?this.openPromises||(this.openPromises=new Set):await this.awaitOpenPromises(void 0)}setSecureReporter(e){this.reporters.setSecureReporter(e)}setReporter(e){this.reporters.setReporter(e)}async sendTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!1))}async sendRestrictedTelemetry(e,r){await this.withPromise(this._sendTelemetry(e,r,!0))}async sendErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!1))}async sendRestrictedErrorTelemetry(e,r){await this.withPromise(this._sendErrorTelemetry(e,r,!0))}async sendExpProblemTelemetry(e){await this.withPromise(this._sendExpProblemTelemetry(e))}async sendExceptionTelemetry(e,r){await this.withPromise(this._sendExceptionTelemetry(e,r))}async deactivate(){await this.awaitOpenPromises(new Set),await this.reporters.deactivate()}async awaitOpenPromises(e){if(this.openPromises){let r=[...this.openPromises.values()];this.openPromises=e,await Promise.all(r)}}async _sendTelemetry(e,r,n){if(n&&!QF(this.accessor))return;let i=r||Tr.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor,n??!1,"IncludeExp"),this.sendTelemetryEvent(n??!1,e,i)}async _sendExpProblemTelemetry(e){let r="expProblem",n=Tr.createAndMarkAsIssued(e,{});await n.makeReadyForSending(this.accessor,!1,"SkipExp"),this.sendTelemetryEvent(!1,r,n)}async _sendExceptionTelemetry(e,r){let n=e instanceof Error?e:new Error("Non-error thrown: "+e),i=QF(this.accessor),o=Tr.createAndMarkAsIssued({origin:GL(r),reason:i?"Exception logged to restricted telemetry":"Exception, not logged due to opt-out"});if(await o.makeReadyForSending(this.accessor,!1,"IncludeExp"),this.sendTelemetryEvent(!1,"exception",o),!i)return;let s=Tr.createAndMarkAsIssued({origin:r});await s.makeReadyForSending(this.accessor,!0,"IncludeExp"),this.sendTelemetryException(!0,n,s)}async _sendErrorTelemetry(e,r,n){if(n&&!QF(this.accessor))return;let i=r||Tr.createAndMarkAsIssued({},{});await i.makeReadyForSending(this.accessor,n??!1,"IncludeExp"),this.sendTelemetryErrorEvent(n??!1,e,i)}sendTelemetryEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Tr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}sendTelemetryException(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Tr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendErrorData(r,{...o,...n.measurements})}}sendTelemetryErrorEvent(e,r,n){let i=this.reporters.getReporter(this.accessor,e);if(i){let o=Tr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties);i.sendEventData(r,{...o,...n.measurements})}}};function QF(t){return t.get(Tb).optedIn}function Dmt(t){switch(t){case"text-embedding-ada-002":return{maxBatchSize:16,maxTokens:8192};default:throw new Error(`Unknown model ${t}`)}}var ZF=class{constructor(e){this.model=e;this.url="https://api.githubcopilot.com/embeddings";let r=Dmt(e);this.maxBatchSize=r.maxBatchSize,this.modelMaxPromptTokens=r.maxTokens}};var eU=class{constructor(e){this.accessor=e;this._chatEndpoints=new Map;this._defaultUserRequestModel=void 0}async defaultUserRequestModel(){if(!this._defaultUserRequestModel){let e=(await this.accessor.get(Dt).getCopilotToken(this.accessor)).isInternal;this._defaultUserRequestModel??=e?this.accessor.get(ke).getConfig(Le.DebugOverrideChatEngine):"gpt-3.5-turbo"}return this._defaultUserRequestModel}async getChatEndpointInfo(e){let r=this._chatEndpoints.get(e);if(!r){let n=await MPe(this.accessor),i=await FPe(this.accessor,e),o=await this.shouldDisableSnippy();r=new pS(n,e,i,o),this._chatEndpoints.set(e,r)}return r}async shouldDisableSnippy(){let e=await this.accessor.get(Dt).getCopilotToken(this.accessor),r=this.accessor.get(Jr).extensionMode===_a.Development;return e.isInternal&&r}async getEmbeddingsEndpointInfo(){return this._embeddingsEndpoint??=new ZF("text-embedding-ada-002"),this._embeddingsEndpoint}async getNonUserRequestEndpoint(){return this.getChatEndpointInfo("gpt-3.5-turbo")}async getUserRequestEndpoint(e,r,n){if(n)return this.getChatEndpointInfo(n);let i=this.accessor.get(kr),o=this.accessor.get(ke),s;if(e===2)await i.getTreatmentVariableAsync("vscode","copilotchat.panelGpt4",!0)!==!1&&(s="gpt-4");else if(e===1)switch(r){case TS.ID:{let a=o.getConfig(Le.FixUseGPT4InInlineChat);(await i.getTreatmentVariableAsync("vscode","copilotchat.fixInlineGpt4",!0)||a)&&(s="gpt-4");break}case I0.ID:case S0.ID:case Wa.ID:{o.isDefaultSettingOverwritten(Le.DebugOverrideChatEngine)?s=o.getConfig(Le.DebugOverrideChatEngine):await this.accessor.get(kr).getTreatmentVariableAsync("vscode","copilotchat.inlineChatGpt4",!0)&&(s="gpt-4");break}}return s||(s=await this.defaultUserRequestModel()),this.getChatEndpointInfo(s)}};function g3e(t){t.define(tt,new eU(t)),t.define(gt,new F7),t.define(gS,new M7),t.define(Om,new JF(t)),t.define(ys,new nN),t.define(MA,new B7),t.define(bF,Z4e(t)),t.define(xF,rLe(t)),t.define(an,new jF(t));let e=new EA(t,new Bb,new SS);t.define(Wt,e),t.define(Tb,new iN(t)),t.define(sN,new oN),t.define(IB,new FN),t.define(rN,new tN(t)),t.define(Eb,new VF),t.define(Sb,new cN),t.define(Zi,new U7(t)),t.define(vi,new kb(t)),t.define(ip,new j8(t)),t.define(jT,new TM(t)),t.define(hS,new y9(t)),t.define(z8,new WF(t)),t.define(Y8,new KF(t))}var kmt=Fr.window.createOutputChannel("GitHub Copilot Chat",{log:!0});async function Lmt(t,e){if(t.extensionMode===Fr.ExtensionMode.Test&&!e)return t;Fr.l10n.bundle&&tU.config({contents:Fr.l10n.bundle});let r=await _3e(t);t.subscriptions.push(y3e(r));let n=r.get(Om),i=r.get(Ue);if(await(async()=>{let s=a=>{let u=a.message||a,c=Tr.createAndMarkAsIssued({reason:u});i.sendGHTelemetryErrorEvent("activationFailed",c.properties,c.measurements),n.deactivate();let l=u==="GitHubLoginFailed"?sB:`GitHub Copilot could not connect to server. Extension activation failed: "${u}"`;r.get(Ee).defaultLogger.error(l),Fr.commands.executeCommand("setContext","github.copilot.activated",!1);let d=Fr.authentication.onDidChangeSessions(async p=>{try{gI(p,r.get(ke))&&await gN(p,r)&&(Fr.commands.executeCommand("setContext","github.copilot.activated",!0),sP(r),d.dispose())}catch(f){sP(r,f),s(f)}})};try{await r.get(Dt).getCopilotToken(r),Fr.commands.executeCommand("setContext","github.copilot.activated",!0),await iDe(r)}catch(a){r.get(an).isDNSLookupFailedError(a)&&t.subscriptions.push(Mmt(r,s)),sP(r,a),s(a)}t.subscriptions.push(Fr.workspace.onDidChangeConfiguration(a=>kse(a,r))),BPe(r),Fmt(r,t),i.sendGHTelemetryEvent("extension.activate")})(),Fr.ExtensionMode.Test===t.extensionMode)return r}async function _3e(t){let e=new VP;e.define(ke,new xN),e.define(Ee,new WP([new KP,new XP(kmt)],e.get(ke))),e.define(mD,new fD),e.define(Sn,new dD(e.get(Ee),!0)),g3e(e),e.define(Jr,t),e.define(i0,new V8(e)),e.define(Up,new gD(e)),e.define(ir,new vD(e.get(Wt))),e.define(qN,new HN(e)),e.define(BN,new A7(e)),e.define(xs,new jN),e.define(Gm,new VN(e)),e.define(TN,new w7(e)),e.define(Yo,new $N(e.get(Wt))),e.define(ya,new WN(e.get(Wt))),e.define(SN,new IN),e.define(KN,new QN),e.define(XN,new ZN),e.define(Eu,new m8),e.define(Rb,new EN),e.define(Uc,new fN(e)),e.define(_N,new d9(e)),e.define(c0,new SM);let r=t.extension.packageJSON.internalAIKey??"",n=t.extension.packageJSON.ariaKey??"";if(t.extensionMode===Fr.ExtensionMode.Test)e.define(Dt,Fwe()),e.define(Eb,new g8),await v3e(e,t,r,n,"copilot-test",!0);else{let s=new vN(e.get(ke));t.subscriptions.push(s),e.define(Dt,s),e.define(Sb,new aN),await v3e(e,t,r,n,t.extension.packageJSON.name,Fr.env.isTelemetryEnabled),await e.get(kr).getTreatmentVariableAsync("vscode","copilotchat.useElectronFetcher",!0)?e.get(an).fetchStrategy=2:await e.get(kr).getTreatmentVariableAsync("vscode","copilotchat.useNodeFetcher",!0)&&(e.get(an).fetchStrategy=1)}e.define(wr,new S7(e)),e.define(qr,new MN),e.define(vi,new kb(e)),e.define(dS,new n7(e)),e.define(eN,new rD),e.define(CB,new UN),e.define(xb,new JN(e.get(ke))),e.define(bs,{_serviceBrand:void 0,maxResponseTokens:void 0,temperature:.1,topP:1,additionalPromptContext:e.get(ke).getConfig(Le.ConversationAdditionalPromptContext),rejectionMessage:tU.t("Sorry, but I can only assist with programming related questions.")}),e.define(eD,new tD),Ese(e);let i=new _8(e);e.define(st,i),e.define(Mp,new NN(e)),e.define(_M,new vM(e)),e.define(LT,new X8(e)),e.define(fp,new Q9(e));let o=new t7(e);return e.define(e7,o),t.subscriptions.push(o),e.define(Q8,new i7),e.define(WT,new P7(e)),e.define(EM,new xM),e.define(AN,new wN(e)),t.subscriptions.push(e.get(Wt)),e.get(Wt).init(),e.seal(),e}async function Omt(t,e){if(Fr.ExtensionMode.Production===e.extensionMode){let r=t.get(Ue),n=await Obe(e,r,t.get(gt).isPreRelease());t.define(kr,n)}else t.define(kr,new _D)}async function v3e(t,e,r,n,i,o){let s=await Jz(t,i,o),a=Fr.env.onDidChangeTelemetryEnabled(async u=>{s?.dispose(),s=await Jz(t,e.extension.packageJSON.name,u&&Fr.env.isTelemetryEnabled)});if(e.subscriptions.push(a),e.subscriptions.push(new Fr.Disposable(()=>s?.dispose())),Fr.ExtensionMode.Production===e.extensionMode){let u=new p8(e.extension.packageJSON.name,t,r,n,Xz,Qz);t.define(Ue,u),e.subscriptions.push(u)}else t.define(Ue,new yD);Omt(t,e)}function y3e(t){return{dispose:async()=>{t.get(Ue).sendGHTelemetryEvent("extension.deactivate")}}}var oP={Offline:"github.copilot.offline",IndividualDisabled:"github.copilot.interactiveSession.individual.disabled",IndividualExpired:"github.copilot.interactiveSession.individual.expired",EnterpriseDisabled:"github.copilot.interactiveSession.enterprise.disabled"};function sP(t,e){let r=Object.values(oP),n;t.get(an).isDNSLookupFailedError(e)?n=oP.Offline:e instanceof vI?n=oP.IndividualDisabled:e instanceof _I?n=oP.IndividualExpired:e instanceof yI&&(n=oP.EnterpriseDisabled),n&&Fr.commands.executeCommand("setContext",n,!0);for(let o of r)o!==n&&Fr.commands.executeCommand("setContext",o,!1)}function Mmt(t,e){return Fr.commands.registerCommand("github.copilot.offline",async()=>{try{await t.get(Dt).getCopilotToken(t),Fr.commands.executeCommand("setContext","github.copilot.activated",!0),sP(t)}catch(r){if(t.get(an).isDNSLookupFailedError(r))return;sP(t,r),e(r)}})}async function Fmt(t,e){let r=t.get(Ee).getLogger("contributions"),n=o=>{r.error(`Error while loading contribution: ${o} ${o.stack}`)},i=o=>{o instanceof Fr.Disposable&&e.subscriptions.push(o)};for(let o of ADe){let s;try{s=o.create(t)}catch(a){n(a)}i(s),s instanceof Promise&&s.then(i).catch(n)}}0&&(module.exports={activate,createExtensionContext,onDeactivate});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
