"use strict";var Kc=Object.create;var ps=Object.defineProperty;var Xc=Object.getOwnPropertyDescriptor;var Qc=Object.getOwnPropertyNames;var Yc=Object.getPrototypeOf,Zc=Object.prototype.hasOwnProperty;var F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var eu=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Qc(e))!Zc.call(t,i)&&i!==n&&ps(t,i,{get:()=>e[i],enumerable:!(r=Xc(e,i))||r.enumerable});return t};var yn=(t,e,n)=>(n=t!=null?Kc(Yc(t)):{},eu(e||!t||!t.__esModule?ps(n,"default",{value:t,enumerable:!0}):n,t));var li=F(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.Logger=Jt.LogLevel=void 0;var K;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARNING=2]="WARNING",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG"})(K||(Jt.LogLevel=K={}));var tu=[[K[K.NONE],K.NONE],[K[K.ERROR],K.ERROR],[K[K.WARNING],K.WARNING],[K[K.INFO],K.INFO],[K[K.DEBUG],K.DEBUG],["INFORMATION",K.INFO]],nu=new Map(tu),vt=()=>{},ui=class{constructor(e=K.DEBUG,n){this.logLevel=e,this.seq=0,this.logs=[],this.loggers={[K.NONE]:vt,[K.ERROR]:vt,[K.WARNING]:vt,[K.INFO]:vt,[K.DEBUG]:vt},n&&this.setConnection(n)}writeLog(e){if(!this._connection)this.logs.push(e);else{if(e.level>this.logLevel)return;let n=`${e.seq}	${e.ts.toISOString()}	${e.msg}`,r=this.loggers[e.level];r?r(n):console.error(`Unknown log level: ${e.level}; msg: ${e.msg}`)}}get connection(){return this._connection}logMessage(e,n){let i={seq:++this.seq,level:e,ts:new Date,msg:n};this.writeLog(i)}set level(e){this.logLevel=ru(e)}get level(){return this.logLevel}setConnection(e){this._connection=e,this._connection.onExit(()=>{this._connection=void 0,this.loggers[K.ERROR]=vt,this.loggers[K.WARNING]=vt,this.loggers[K.INFO]=vt,this.loggers[K.DEBUG]=vt}),this.loggers[K.ERROR]=n=>{e.console.error(n)},this.loggers[K.WARNING]=n=>{e.console.warn(n)},this.loggers[K.INFO]=n=>{e.console.info(n)},this.loggers[K.DEBUG]=n=>{e.console.log(n)},this.logs.forEach(n=>this.writeLog(n)),this.logs.length=0}error(e){this.logMessage(K.ERROR,e)}warn(e){this.logMessage(K.WARNING,e)}info(e){this.logMessage(K.INFO,e)}debug(e){this.logMessage(K.DEBUG,e)}log(e){this.debug(e)}getPendingEntries(){return this.logs}};Jt.Logger=ui;function ru(t){let e=typeof t=="string"?nu.get(t.toUpperCase())||K.NONE:t;return typeof e!="number"||e<K.NONE||e>K.DEBUG?K.DEBUG:e}});var fi=F(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.setWorkspaceFolders=Re.setWorkspaceBase=Re.logDebug=Re.logInfo=Re.logError=Re.log=Re.logger=Re.LogLevel=void 0;var iu=li(),ou=li();Object.defineProperty(Re,"LogLevel",{enumerable:!0,get:function(){return ou.LogLevel}});var ys="",ms=[];Re.logger=new iu.Logger;function di(t,e){Re.logger.log(Jn(t,e))}Re.log=di;function su(t,e){Re.logger.error(Jn(t,e))}Re.logError=su;function au(t,e){Re.logger.info(Jn(t,e))}Re.logInfo=au;function cu(t,e){Re.logger.debug(Jn(t,e))}Re.logDebug=cu;function vs(t){di(`setWorkspaceBase URI: ${t}`),ys=t}Re.setWorkspaceBase=vs;function uu(t){di(`setWorkspaceFolders folders URI: [${t.join(`
`)}]`),ms=t,vs(du(ms))}Re.setWorkspaceFolders=uu;function Jn(t,e){let n=Array.isArray(e)?e:[e];return t+"	"+n.map(lu).join(`
			`)}function lu(t){if(!t)return"";let e=bs(t,ys);return e?t.replace(e,"..."):t}function du(t){return t.reduce((e,n)=>bs(e||n,n),"")}function bs(t,e){let n=fu(t,e);return t.slice(0,n)}function fu(t,e){let n="/",r=t.split(n),i=e.split(n),u=Math.min(r.length,i.length),R=0;for(;R<u&&r[R]===i[R];)++R;return r.slice(0,R).join(n).length}});var Kn=F(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.thenable=Pe.typedArray=Pe.stringArray=Pe.array=Pe.func=Pe.error=Pe.number=Pe.string=Pe.boolean=void 0;function hu(t){return t===!0||t===!1}Pe.boolean=hu;function Rs(t){return typeof t=="string"||t instanceof String}Pe.string=Rs;function gu(t){return typeof t=="number"||t instanceof Number}Pe.number=gu;function pu(t){return t instanceof Error}Pe.error=pu;function _s(t){return typeof t=="function"}Pe.func=_s;function Ds(t){return Array.isArray(t)}Pe.array=Ds;function mu(t){return Ds(t)&&t.every(e=>Rs(e))}Pe.stringArray=mu;function yu(t,e){return Array.isArray(t)&&t.every(e)}Pe.typedArray=yu;function vu(t){return t&&_s(t.then)}Pe.thenable=vu});var Kt=F(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.stringArray=Fe.array=Fe.func=Fe.error=Fe.number=Fe.string=Fe.boolean=void 0;function bu(t){return t===!0||t===!1}Fe.boolean=bu;function Ps(t){return typeof t=="string"||t instanceof String}Fe.string=Ps;function Ru(t){return typeof t=="number"||t instanceof Number}Fe.number=Ru;function _u(t){return t instanceof Error}Fe.error=_u;function Du(t){return typeof t=="function"}Fe.func=Du;function ws(t){return Array.isArray(t)}Fe.array=ws;function Pu(t){return ws(t)&&t.every(e=>Ps(e))}Fe.stringArray=Pu});var Ii=F(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.Message=z.NotificationType9=z.NotificationType8=z.NotificationType7=z.NotificationType6=z.NotificationType5=z.NotificationType4=z.NotificationType3=z.NotificationType2=z.NotificationType1=z.NotificationType0=z.NotificationType=z.RequestType9=z.RequestType8=z.RequestType7=z.RequestType6=z.RequestType5=z.RequestType4=z.RequestType3=z.RequestType2=z.RequestType1=z.RequestType=z.RequestType0=z.AbstractMessageSignature=z.ParameterStructures=z.ResponseError=z.ErrorCodes=void 0;var It=Kt(),Ts;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Ts=z.ErrorCodes||(z.ErrorCodes={}));var hi=class t extends Error{constructor(e,n,r){super(n),this.code=It.number(e)?e:Ts.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};z.ResponseError=hi;var Ue=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};z.ParameterStructures=Ue;Ue.auto=new Ue("auto");Ue.byPosition=new Ue("byPosition");Ue.byName=new Ue("byName");var fe=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ue.auto}};z.AbstractMessageSignature=fe;var gi=class extends fe{constructor(e){super(e,0)}};z.RequestType0=gi;var pi=class extends fe{constructor(e,n=Ue.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};z.RequestType=pi;var mi=class extends fe{constructor(e,n=Ue.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};z.RequestType1=mi;var yi=class extends fe{constructor(e){super(e,2)}};z.RequestType2=yi;var vi=class extends fe{constructor(e){super(e,3)}};z.RequestType3=vi;var bi=class extends fe{constructor(e){super(e,4)}};z.RequestType4=bi;var Ri=class extends fe{constructor(e){super(e,5)}};z.RequestType5=Ri;var _i=class extends fe{constructor(e){super(e,6)}};z.RequestType6=_i;var Di=class extends fe{constructor(e){super(e,7)}};z.RequestType7=Di;var Pi=class extends fe{constructor(e){super(e,8)}};z.RequestType8=Pi;var wi=class extends fe{constructor(e){super(e,9)}};z.RequestType9=wi;var Ti=class extends fe{constructor(e,n=Ue.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};z.NotificationType=Ti;var Ci=class extends fe{constructor(e){super(e,0)}};z.NotificationType0=Ci;var qi=class extends fe{constructor(e,n=Ue.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};z.NotificationType1=qi;var ki=class extends fe{constructor(e){super(e,2)}};z.NotificationType2=ki;var Si=class extends fe{constructor(e){super(e,3)}};z.NotificationType3=Si;var Ei=class extends fe{constructor(e){super(e,4)}};z.NotificationType4=Ei;var Mi=class extends fe{constructor(e){super(e,5)}};z.NotificationType5=Mi;var Ni=class extends fe{constructor(e){super(e,6)}};z.NotificationType6=Ni;var Oi=class extends fe{constructor(e){super(e,7)}};z.NotificationType7=Oi;var xi=class extends fe{constructor(e){super(e,8)}};z.NotificationType8=xi;var ji=class extends fe{constructor(e){super(e,9)}};z.NotificationType9=ji;var wu;(function(t){function e(i){let u=i;return u&&It.string(u.method)&&(It.string(u.id)||It.number(u.id))}t.isRequest=e;function n(i){let u=i;return u&&It.string(u.method)&&i.id===void 0}t.isNotification=n;function r(i){let u=i;return u&&(u.result!==void 0||!!u.error)&&(It.string(u.id)||It.number(u.id)||u.id===null)}t.isResponse=r})(wu=z.Message||(z.Message={}))});var Ai=F(bt=>{"use strict";var Cs;Object.defineProperty(bt,"__esModule",{value:!0});bt.LRUCache=bt.LinkedMap=bt.Touch=void 0;var Ae;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ae=bt.Touch||(bt.Touch={}));var Xn=class{constructor(){this[Cs]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Ae.None){let r=this._map.get(e);if(r)return n!==Ae.None&&this.touch(r,n),r.value}set(e,n,r=Ae.None){let i=this._map.get(e);if(i)i.value=n,r!==Ae.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Ae.None:this.addItemLast(i);break;case Ae.First:this.addItemFirst(i);break;case Ae.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Cs=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ae.First&&n!==Ae.Last)){if(n===Ae.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ae.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};bt.LinkedMap=Xn;var Fi=class extends Xn{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ae.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ae.None)}set(e,n){return super.set(e,n,Ae.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};bt.LRUCache=Fi});var qs=F(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.Disposable=void 0;var Tu;(function(t){function e(n){return{dispose:n}}t.create=e})(Tu=vn.Disposable||(vn.Disposable={}))});var qt=F(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var Li;function Wi(){if(Li===void 0)throw new Error("No runtime abstraction layer installed");return Li}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Li=n}t.install=e})(Wi||(Wi={}));Hi.default=Wi});var Xt=F(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.Emitter=Ft.Event=void 0;var Cu=qt(),qu;(function(t){let e={dispose(){}};t.None=function(){return e}})(qu=Ft.Event||(Ft.Event={}));var Ui=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,u=this._callbacks.length;i<u;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let u=0,R=r.length;u<R;u++)try{n.push(r[u].apply(i[u],e))}catch(w){(0,Cu.default)().console.error(w)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Qn=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Ui),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ft.Emitter=Qn;Qn._noop=function(){}});var Zn=F(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.CancellationTokenSource=At.CancellationToken=void 0;var ku=qt(),Su=Kt(),$i=Xt(),zi;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:$i.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:$i.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Su.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(zi=At.CancellationToken||(At.CancellationToken={}));var Eu=Object.freeze(function(t,e){let n=(0,ku.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Yn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Eu:(this._emitter||(this._emitter=new $i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Bi=class{get token(){return this._token||(this._token=new Yn),this._token}cancel(){this._token?this._token.cancel():this._token=zi.Cancelled}dispose(){this._token?this._token instanceof Yn&&this._token.dispose():this._token=zi.None}};At.CancellationTokenSource=Bi});var ks=F(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.SharedArrayReceiverStrategy=Qt.SharedArraySenderStrategy=void 0;var Mu=Zn(),bn;(function(t){t.Continue=0,t.Cancelled=1})(bn||(bn={}));var Vi=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=bn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,bn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Qt.SharedArraySenderStrategy=Vi;var Gi=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===bn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Ji=class{constructor(e){this.token=new Gi(e)}cancel(){}dispose(){}},Ki=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new Mu.CancellationTokenSource:new Ji(n)}};Qt.SharedArrayReceiverStrategy=Ki});var Qi=F(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.Semaphore=void 0;var Nu=qt(),Xi=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Nu.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};er.Semaphore=Xi});var Ss=F(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.ReadableStreamMessageReader=Rt.AbstractMessageReader=Rt.MessageReader=void 0;var Zi=qt(),Yt=Kt(),Yi=Xt(),Ou=Qi(),xu;(function(t){function e(n){let r=n;return r&&Yt.func(r.listen)&&Yt.func(r.dispose)&&Yt.func(r.onError)&&Yt.func(r.onClose)&&Yt.func(r.onPartialMessage)}t.is=e})(xu=Rt.MessageReader||(Rt.MessageReader={}));var tr=class{constructor(){this.errorEmitter=new Yi.Emitter,this.closeEmitter=new Yi.Emitter,this.partialMessageEmitter=new Yi.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Yt.string(e.message)?e.message:"unknown"}`)}};Rt.AbstractMessageReader=tr;var eo;(function(t){function e(n){let r,i,u,R=new Map,w,d=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(u=n.contentDecoder,R.set(u.name,u)),n.contentDecoders!==void 0)for(let p of n.contentDecoders)R.set(p.name,p);if(n.contentTypeDecoder!==void 0&&(w=n.contentTypeDecoder,d.set(w.name,w)),n.contentTypeDecoders!==void 0)for(let p of n.contentTypeDecoders)d.set(p.name,p)}return w===void 0&&(w=(0,Zi.default)().applicationJson.decoder,d.set(w.name,w)),{charset:r,contentDecoder:u,contentDecoders:R,contentTypeDecoder:w,contentTypeDecoders:d}}t.fromOptions=e})(eo||(eo={}));var to=class extends tr{constructor(e,n){super(),this.readable=e,this.options=eo.fromOptions(n),this.buffer=(0,Zi.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Ou.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let u=parseInt(i);if(isNaN(u)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=u}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Zi.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Rt.ReadableStreamMessageReader=to});var Os=F(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.WriteableStreamMessageWriter=_t.AbstractMessageWriter=_t.MessageWriter=void 0;var Es=qt(),Rn=Kt(),ju=Qi(),Ms=Xt(),Iu="Content-Length: ",Ns=`\r
`,Fu;(function(t){function e(n){let r=n;return r&&Rn.func(r.dispose)&&Rn.func(r.onClose)&&Rn.func(r.onError)&&Rn.func(r.write)}t.is=e})(Fu=_t.MessageWriter||(_t.MessageWriter={}));var nr=class{constructor(){this.errorEmitter=new Ms.Emitter,this.closeEmitter=new Ms.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Rn.string(e.message)?e.message:"unknown"}`)}};_t.AbstractMessageWriter=nr;var no;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Es.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Es.default)().applicationJson.encoder}}t.fromOptions=e})(no||(no={}));var ro=class extends nr{constructor(e,n){super(),this.writable=e,this.options=no.fromOptions(n),this.errorCount=0,this.writeSemaphore=new ju.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Iu,r.byteLength.toString(),Ns),i.push(Ns),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};_t.WriteableStreamMessageWriter=ro});var xs=F(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.AbstractMessageBuffer=void 0;var Au=13,Lu=10,Wu=`\r
`,io=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,u=0;e:for(;r<this._chunks.length;){let p=this._chunks[r];for(i=0;i<p.length;){switch(p[i]){case Au:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Lu:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}u+=p.byteLength,r++}if(n!==4)return;let R=this._read(u+i),w=new Map,d=this.toString(R,"ascii").split(Wu);if(d.length<2)return w;for(let p=0;p<d.length-2;p++){let y=d[p],D=y.indexOf(":");if(D===-1)throw new Error("Message header must separate key and value using :");let _=y.substr(0,D),T=y.substr(D+1).trim();w.set(e?_.toLowerCase():_,T)}return w}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let u=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(u)}if(this._chunks[0].byteLength>e){let u=this._chunks[0],R=this.asNative(u,e);return this._chunks[0]=u.slice(e),this._totalLength-=e,R}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let u=this._chunks[i];if(u.byteLength>e){let R=u.slice(0,e);n.set(R,r),r+=e,this._chunks[i]=u.slice(e),this._totalLength-=e,e-=e}else n.set(u,r),r+=u.byteLength,this._chunks.shift(),this._totalLength-=u.byteLength,e-=u.byteLength}return n}};rr.AbstractMessageBuffer=io});var Hs=F(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.createMessageConnection=U.ConnectionOptions=U.MessageStrategy=U.CancellationStrategy=U.CancellationSenderStrategy=U.CancellationReceiverStrategy=U.RequestCancellationReceiverStrategy=U.IdCancellationReceiverStrategy=U.ConnectionStrategy=U.ConnectionError=U.ConnectionErrors=U.LogTraceNotification=U.SetTraceNotification=U.TraceFormat=U.TraceValues=U.Trace=U.NullLogger=U.ProgressType=U.ProgressToken=void 0;var js=qt(),me=Kt(),B=Ii(),Is=Ai(),_n=Xt(),oo=Zn(),Pn;(function(t){t.type=new B.NotificationType("$/cancelRequest")})(Pn||(Pn={}));var Fs;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Fs=U.ProgressToken||(U.ProgressToken={}));var Dn;(function(t){t.type=new B.NotificationType("$/progress")})(Dn||(Dn={}));var so=class{constructor(){}};U.ProgressType=so;var ao;(function(t){function e(n){return me.func(n)}t.is=e})(ao||(ao={}));U.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var ae;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(ae=U.Trace||(U.Trace={}));var Hu;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Hu=U.TraceValues||(U.TraceValues={}));(function(t){function e(r){if(!me.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(ae=U.Trace||(U.Trace={}));var Ze;(function(t){t.Text="text",t.JSON="json"})(Ze=U.TraceFormat||(U.TraceFormat={}));(function(t){function e(n){return me.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Ze=U.TraceFormat||(U.TraceFormat={}));var As;(function(t){t.type=new B.NotificationType("$/setTrace")})(As=U.SetTraceNotification||(U.SetTraceNotification={}));var co;(function(t){t.type=new B.NotificationType("$/logTrace")})(co=U.LogTraceNotification||(U.LogTraceNotification={}));var ir;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(ir=U.ConnectionErrors||(U.ConnectionErrors={}));var Zt=class t extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};U.ConnectionError=Zt;var Ls;(function(t){function e(n){let r=n;return r&&me.func(r.cancelUndispatched)}t.is=e})(Ls=U.ConnectionStrategy||(U.ConnectionStrategy={}));var fo;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&me.func(r.createCancellationTokenSource)&&(r.dispose===void 0||me.func(r.dispose))}t.is=e})(fo=U.IdCancellationReceiverStrategy||(U.IdCancellationReceiverStrategy={}));var Ws;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&me.func(r.createCancellationTokenSource)&&(r.dispose===void 0||me.func(r.dispose))}t.is=e})(Ws=U.RequestCancellationReceiverStrategy||(U.RequestCancellationReceiverStrategy={}));var uo;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new oo.CancellationTokenSource}});function e(n){return fo.is(n)||Ws.is(n)}t.is=e})(uo=U.CancellationReceiverStrategy||(U.CancellationReceiverStrategy={}));var lo;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Pn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&me.func(r.sendCancellation)&&me.func(r.cleanup)}t.is=e})(lo=U.CancellationSenderStrategy||(U.CancellationSenderStrategy={}));var ho;(function(t){t.Message=Object.freeze({receiver:uo.Message,sender:lo.Message});function e(n){let r=n;return r&&uo.is(r.receiver)&&lo.is(r.sender)}t.is=e})(ho=U.CancellationStrategy||(U.CancellationStrategy={}));var go;(function(t){function e(n){let r=n;return r&&me.func(r.handleMessage)}t.is=e})(go=U.MessageStrategy||(U.MessageStrategy={}));var Uu;(function(t){function e(n){let r=n;return r&&(ho.is(r.cancellationStrategy)||Ls.is(r.connectionStrategy)||go.is(r.messageStrategy))}t.is=e})(Uu=U.ConnectionOptions||(U.ConnectionOptions={}));var et;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(et||(et={}));function $u(t,e,n,r){let i=n!==void 0?n:U.NullLogger,u=0,R=0,w=0,d="2.0",p,y=new Map,D,_=new Map,T=new Map,M,k=new Is.LinkedMap,L=new Map,j=new Set,m=new Map,g=ae.Off,S=Ze.Text,$,X=et.New,oe=new _n.Emitter,Ee=new _n.Emitter,ut=new _n.Emitter,lt=new _n.Emitter,dt=new _n.Emitter,ke=r&&r.cancellationStrategy?r.cancellationStrategy:ho.Message;function N(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function E(l){return l===null?"res-unknown-"+(++w).toString():"res-"+l.toString()}function I(){return"not-"+(++R).toString()}function W(l,C){B.Message.isRequest(C)?l.set(N(C.id),C):B.Message.isResponse(C)?l.set(E(C.id),C):l.set(I(),C)}function re(l){}function ee(){return X===et.Listening}function V(){return X===et.Closed}function Ce(){return X===et.Disposed}function Se(){(X===et.New||X===et.Listening)&&(X=et.Closed,Ee.fire(void 0))}function Ie(l){oe.fire([l,void 0,void 0])}function wt(l){oe.fire(l)}t.onClose(Se),t.onError(Ie),e.onClose(Se),e.onError(wt);function Xe(){M||k.size===0||(M=(0,js.default)().timer.setImmediate(()=>{M=void 0,Yr()}))}function $n(l){B.Message.isRequest(l)?ei(l):B.Message.isNotification(l)?ni(l):B.Message.isResponse(l)?ti(l):gn(l)}function Yr(){if(k.size===0)return;let l=k.shift();try{let C=r?.messageStrategy;go.is(C)?C.handleMessage(l,$n):$n(l)}finally{Xe()}}let Zr=l=>{try{if(B.Message.isNotification(l)&&l.method===Pn.type.method){let C=l.params.id,x=N(C),H=k.get(x);if(B.Message.isRequest(H)){let se=r?.connectionStrategy,he=se&&se.cancelUndispatched?se.cancelUndispatched(H,re):void 0;if(he&&(he.error!==void 0||he.result!==void 0)){k.delete(x),m.delete(C),he.id=H.id,Vt(he,l.method,Date.now()),e.write(he).catch(()=>i.error("Sending response for canceled message failed."));return}}let ce=m.get(C);if(ce!==void 0){ce.cancel(),pn(l);return}else j.add(C)}W(k,l)}finally{Xe()}};function ei(l){if(Ce())return;function C(Q,ue,ie){let De={jsonrpc:d,id:l.id};Q instanceof B.ResponseError?De.error=Q.toJson():De.result=Q===void 0?null:Q,Vt(De,ue,ie),e.write(De).catch(()=>i.error("Sending response failed."))}function x(Q,ue,ie){let De={jsonrpc:d,id:l.id,error:Q.toJson()};Vt(De,ue,ie),e.write(De).catch(()=>i.error("Sending response failed."))}function H(Q,ue,ie){Q===void 0&&(Q=null);let De={jsonrpc:d,id:l.id,result:Q};Vt(De,ue,ie),e.write(De).catch(()=>i.error("Sending response failed."))}oi(l);let ce=y.get(l.method),se,he;ce&&(se=ce.type,he=ce.handler);let pe=Date.now();if(he||p){let Q=l.id??String(Date.now()),ue=fo.is(ke.receiver)?ke.receiver.createCancellationTokenSource(Q):ke.receiver.createCancellationTokenSource(l);l.id!==null&&j.has(l.id)&&ue.cancel(),l.id!==null&&m.set(Q,ue);try{let ie;if(he)if(l.params===void 0){if(se!==void 0&&se.numberOfParams!==0){x(new B.ResponseError(B.ErrorCodes.InvalidParams,`Request ${l.method} defines ${se.numberOfParams} params but received none.`),l.method,pe);return}ie=he(ue.token)}else if(Array.isArray(l.params)){if(se!==void 0&&se.parameterStructures===B.ParameterStructures.byName){x(new B.ResponseError(B.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,pe);return}ie=he(...l.params,ue.token)}else{if(se!==void 0&&se.parameterStructures===B.ParameterStructures.byPosition){x(new B.ResponseError(B.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,pe);return}ie=he(l.params,ue.token)}else p&&(ie=p(l.method,l.params,ue.token));let De=ie;ie?De.then?De.then(Me=>{m.delete(Q),C(Me,l.method,pe)},Me=>{m.delete(Q),Me instanceof B.ResponseError?x(Me,l.method,pe):Me&&me.string(Me.message)?x(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${Me.message}`),l.method,pe):x(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,pe)}):(m.delete(Q),C(ie,l.method,pe)):(m.delete(Q),H(ie,l.method,pe))}catch(ie){m.delete(Q),ie instanceof B.ResponseError?C(ie,l.method,pe):ie&&me.string(ie.message)?x(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${ie.message}`),l.method,pe):x(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,pe)}}else x(new B.ResponseError(B.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,pe)}function ti(l){if(!Ce())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let C=l.id,x=L.get(C);if(si(l,x),x!==void 0){L.delete(C);try{if(l.error){let H=l.error;x.reject(new B.ResponseError(H.code,H.message,H.data))}else if(l.result!==void 0)x.resolve(l.result);else throw new Error("Should never happen.")}catch(H){H.message?i.error(`Response handler '${x.method}' failed with message: ${H.message}`):i.error(`Response handler '${x.method}' failed unexpectedly.`)}}}}function ni(l){if(Ce())return;let C,x;if(l.method===Pn.type.method){let H=l.params.id;j.delete(H),pn(l);return}else{let H=_.get(l.method);H&&(x=H.handler,C=H.type)}if(x||D)try{if(pn(l),x)if(l.params===void 0)C!==void 0&&C.numberOfParams!==0&&C.parameterStructures!==B.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${C.numberOfParams} params but received none.`),x();else if(Array.isArray(l.params)){let H=l.params;l.method===Dn.type.method&&H.length===2&&Fs.is(H[0])?x({token:H[0],value:H[1]}):(C!==void 0&&(C.parameterStructures===B.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),C.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${C.numberOfParams} params but received ${H.length} arguments`)),x(...H))}else C!==void 0&&C.parameterStructures===B.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),x(l.params);else D&&D(l.method,l.params)}catch(H){H.message?i.error(`Notification handler '${l.method}' failed with message: ${H.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else ut.fire(l)}function gn(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let C=l;if(me.string(C.id)||me.number(C.id)){let x=C.id,H=L.get(x);H&&H.reject(new Error("The received response has neither a result nor an error property."))}}function ft(l){if(l!=null)switch(g){case ae.Verbose:return JSON.stringify(l,null,4);case ae.Compact:return JSON.stringify(l);default:return}}function ri(l){if(!(g===ae.Off||!$))if(S===Ze.Text){let C;(g===ae.Verbose||g===ae.Compact)&&l.params&&(C=`Params: ${ft(l.params)}

`),$.log(`Sending request '${l.method} - (${l.id})'.`,C)}else Tt("send-request",l)}function ii(l){if(!(g===ae.Off||!$))if(S===Ze.Text){let C;(g===ae.Verbose||g===ae.Compact)&&(l.params?C=`Params: ${ft(l.params)}

`:C=`No parameters provided.

`),$.log(`Sending notification '${l.method}'.`,C)}else Tt("send-notification",l)}function Vt(l,C,x){if(!(g===ae.Off||!$))if(S===Ze.Text){let H;(g===ae.Verbose||g===ae.Compact)&&(l.error&&l.error.data?H=`Error data: ${ft(l.error.data)}

`:l.result?H=`Result: ${ft(l.result)}

`:l.error===void 0&&(H=`No result returned.

`)),$.log(`Sending response '${C} - (${l.id})'. Processing request took ${Date.now()-x}ms`,H)}else Tt("send-response",l)}function oi(l){if(!(g===ae.Off||!$))if(S===Ze.Text){let C;(g===ae.Verbose||g===ae.Compact)&&l.params&&(C=`Params: ${ft(l.params)}

`),$.log(`Received request '${l.method} - (${l.id})'.`,C)}else Tt("receive-request",l)}function pn(l){if(!(g===ae.Off||!$||l.method===co.type.method))if(S===Ze.Text){let C;(g===ae.Verbose||g===ae.Compact)&&(l.params?C=`Params: ${ft(l.params)}

`:C=`No parameters provided.

`),$.log(`Received notification '${l.method}'.`,C)}else Tt("receive-notification",l)}function si(l,C){if(!(g===ae.Off||!$))if(S===Ze.Text){let x;if((g===ae.Verbose||g===ae.Compact)&&(l.error&&l.error.data?x=`Error data: ${ft(l.error.data)}

`:l.result?x=`Result: ${ft(l.result)}

`:l.error===void 0&&(x=`No result returned.

`)),C){let H=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";$.log(`Received response '${C.method} - (${l.id})' in ${Date.now()-C.timerStart}ms.${H}`,x)}else $.log(`Received response ${l.id} without active response promise.`,x)}else Tt("receive-response",l)}function Tt(l,C){if(!$||g===ae.Off)return;let x={isLSPMessage:!0,type:l,message:C,timestamp:Date.now()};$.log(x)}function jt(){if(V())throw new Zt(ir.Closed,"Connection is closed.");if(Ce())throw new Zt(ir.Disposed,"Connection is disposed.")}function ai(){if(ee())throw new Zt(ir.AlreadyListening,"Connection is already listening")}function ci(){if(!ee())throw new Error("Call listen() first.")}function mt(l){return l===void 0?null:l}function zn(l){if(l!==null)return l}function Bn(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function mn(l,C){switch(l){case B.ParameterStructures.auto:return Bn(C)?zn(C):[mt(C)];case B.ParameterStructures.byName:if(!Bn(C))throw new Error("Received parameters by name but param is not an object literal.");return zn(C);case B.ParameterStructures.byPosition:return[mt(C)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function Vn(l,C){let x,H=l.numberOfParams;switch(H){case 0:x=void 0;break;case 1:x=mn(l.parameterStructures,C[0]);break;default:x=[];for(let ce=0;ce<C.length&&ce<H;ce++)x.push(mt(C[ce]));if(C.length<H)for(let ce=C.length;ce<H;ce++)x.push(null);break}return x}let Ct={sendNotification:(l,...C)=>{jt();let x,H;if(me.string(l)){x=l;let se=C[0],he=0,pe=B.ParameterStructures.auto;B.ParameterStructures.is(se)&&(he=1,pe=se);let Q=C.length,ue=Q-he;switch(ue){case 0:H=void 0;break;case 1:H=mn(pe,C[he]);break;default:if(pe===B.ParameterStructures.byName)throw new Error(`Received ${ue} parameters for 'by Name' notification parameter structure.`);H=C.slice(he,Q).map(ie=>mt(ie));break}}else{let se=C;x=l.method,H=Vn(l,se)}let ce={jsonrpc:d,method:x,params:H};return ii(ce),e.write(ce).catch(se=>{throw i.error("Sending notification failed."),se})},onNotification:(l,C)=>{jt();let x;return me.func(l)?D=l:C&&(me.string(l)?(x=l,_.set(l,{type:void 0,handler:C})):(x=l.method,_.set(l.method,{type:l,handler:C}))),{dispose:()=>{x!==void 0?_.delete(x):D=void 0}}},onProgress:(l,C,x)=>{if(T.has(C))throw new Error(`Progress handler for token ${C} already registered`);return T.set(C,x),{dispose:()=>{T.delete(C)}}},sendProgress:(l,C,x)=>Ct.sendNotification(Dn.type,{token:C,value:x}),onUnhandledProgress:lt.event,sendRequest:(l,...C)=>{jt(),ci();let x,H,ce;if(me.string(l)){x=l;let Q=C[0],ue=C[C.length-1],ie=0,De=B.ParameterStructures.auto;B.ParameterStructures.is(Q)&&(ie=1,De=Q);let Me=C.length;oo.CancellationToken.is(ue)&&(Me=Me-1,ce=ue);let Be=Me-ie;switch(Be){case 0:H=void 0;break;case 1:H=mn(De,C[ie]);break;default:if(De===B.ParameterStructures.byName)throw new Error(`Received ${Be} parameters for 'by Name' request parameter structure.`);H=C.slice(ie,Me).map(v=>mt(v));break}}else{let Q=C;x=l.method,H=Vn(l,Q);let ue=l.numberOfParams;ce=oo.CancellationToken.is(Q[ue])?Q[ue]:void 0}let se=u++,he;ce&&(he=ce.onCancellationRequested(()=>{let Q=ke.sender.sendCancellation(Ct,se);return Q===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${se}`),Promise.resolve()):Q.catch(()=>{i.log(`Sending cancellation messages for id ${se} failed`)})}));let pe={jsonrpc:d,id:se,method:x,params:H};return ri(pe),typeof ke.sender.enableCancellation=="function"&&ke.sender.enableCancellation(pe),new Promise(async(Q,ue)=>{let ie=Be=>{Q(Be),ke.sender.cleanup(se),he?.dispose()},De=Be=>{ue(Be),ke.sender.cleanup(se),he?.dispose()},Me={method:x,timerStart:Date.now(),resolve:ie,reject:De};try{await e.write(pe),L.set(se,Me)}catch(Be){throw i.error("Sending request failed."),Me.reject(new B.ResponseError(B.ErrorCodes.MessageWriteError,Be.message?Be.message:"Unknown reason")),Be}})},onRequest:(l,C)=>{jt();let x=null;return ao.is(l)?(x=void 0,p=l):me.string(l)?(x=null,C!==void 0&&(x=l,y.set(l,{handler:C,type:void 0}))):C!==void 0&&(x=l.method,y.set(l.method,{type:l,handler:C})),{dispose:()=>{x!==null&&(x!==void 0?y.delete(x):p=void 0)}}},hasPendingResponse:()=>L.size>0,trace:async(l,C,x)=>{let H=!1,ce=Ze.Text;x!==void 0&&(me.boolean(x)?H=x:(H=x.sendNotification||!1,ce=x.traceFormat||Ze.Text)),g=l,S=ce,g===ae.Off?$=void 0:$=C,H&&!V()&&!Ce()&&await Ct.sendNotification(As.type,{value:ae.toString(l)})},onError:oe.event,onClose:Ee.event,onUnhandledNotification:ut.event,onDispose:dt.event,end:()=>{e.end()},dispose:()=>{if(Ce())return;X=et.Disposed,dt.fire(void 0);let l=new B.ResponseError(B.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let C of L.values())C.reject(l);L=new Map,m=new Map,j=new Set,k=new Is.LinkedMap,me.func(e.dispose)&&e.dispose(),me.func(t.dispose)&&t.dispose()},listen:()=>{jt(),ai(),X=et.Listening,t.listen(Zr)},inspect:()=>{(0,js.default)().console.log("inspect")}};return Ct.onNotification(co.type,l=>{if(g===ae.Off||!$)return;let C=g===ae.Verbose||g===ae.Compact;$.log(l.message,C?l.verbose:void 0)}),Ct.onNotification(Dn.type,l=>{let C=T.get(l.token);C?C(l.value):lt.fire(l)}),Ct}U.createMessageConnection=$u});var or=F(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.ProgressType=P.ProgressToken=P.createMessageConnection=P.NullLogger=P.ConnectionOptions=P.ConnectionStrategy=P.AbstractMessageBuffer=P.WriteableStreamMessageWriter=P.AbstractMessageWriter=P.MessageWriter=P.ReadableStreamMessageReader=P.AbstractMessageReader=P.MessageReader=P.SharedArrayReceiverStrategy=P.SharedArraySenderStrategy=P.CancellationToken=P.CancellationTokenSource=P.Emitter=P.Event=P.Disposable=P.LRUCache=P.Touch=P.LinkedMap=P.ParameterStructures=P.NotificationType9=P.NotificationType8=P.NotificationType7=P.NotificationType6=P.NotificationType5=P.NotificationType4=P.NotificationType3=P.NotificationType2=P.NotificationType1=P.NotificationType0=P.NotificationType=P.ErrorCodes=P.ResponseError=P.RequestType9=P.RequestType8=P.RequestType7=P.RequestType6=P.RequestType5=P.RequestType4=P.RequestType3=P.RequestType2=P.RequestType1=P.RequestType0=P.RequestType=P.Message=P.RAL=void 0;P.MessageStrategy=P.CancellationStrategy=P.CancellationSenderStrategy=P.CancellationReceiverStrategy=P.ConnectionError=P.ConnectionErrors=P.LogTraceNotification=P.SetTraceNotification=P.TraceFormat=P.TraceValues=P.Trace=void 0;var de=Ii();Object.defineProperty(P,"Message",{enumerable:!0,get:function(){return de.Message}});Object.defineProperty(P,"RequestType",{enumerable:!0,get:function(){return de.RequestType}});Object.defineProperty(P,"RequestType0",{enumerable:!0,get:function(){return de.RequestType0}});Object.defineProperty(P,"RequestType1",{enumerable:!0,get:function(){return de.RequestType1}});Object.defineProperty(P,"RequestType2",{enumerable:!0,get:function(){return de.RequestType2}});Object.defineProperty(P,"RequestType3",{enumerable:!0,get:function(){return de.RequestType3}});Object.defineProperty(P,"RequestType4",{enumerable:!0,get:function(){return de.RequestType4}});Object.defineProperty(P,"RequestType5",{enumerable:!0,get:function(){return de.RequestType5}});Object.defineProperty(P,"RequestType6",{enumerable:!0,get:function(){return de.RequestType6}});Object.defineProperty(P,"RequestType7",{enumerable:!0,get:function(){return de.RequestType7}});Object.defineProperty(P,"RequestType8",{enumerable:!0,get:function(){return de.RequestType8}});Object.defineProperty(P,"RequestType9",{enumerable:!0,get:function(){return de.RequestType9}});Object.defineProperty(P,"ResponseError",{enumerable:!0,get:function(){return de.ResponseError}});Object.defineProperty(P,"ErrorCodes",{enumerable:!0,get:function(){return de.ErrorCodes}});Object.defineProperty(P,"NotificationType",{enumerable:!0,get:function(){return de.NotificationType}});Object.defineProperty(P,"NotificationType0",{enumerable:!0,get:function(){return de.NotificationType0}});Object.defineProperty(P,"NotificationType1",{enumerable:!0,get:function(){return de.NotificationType1}});Object.defineProperty(P,"NotificationType2",{enumerable:!0,get:function(){return de.NotificationType2}});Object.defineProperty(P,"NotificationType3",{enumerable:!0,get:function(){return de.NotificationType3}});Object.defineProperty(P,"NotificationType4",{enumerable:!0,get:function(){return de.NotificationType4}});Object.defineProperty(P,"NotificationType5",{enumerable:!0,get:function(){return de.NotificationType5}});Object.defineProperty(P,"NotificationType6",{enumerable:!0,get:function(){return de.NotificationType6}});Object.defineProperty(P,"NotificationType7",{enumerable:!0,get:function(){return de.NotificationType7}});Object.defineProperty(P,"NotificationType8",{enumerable:!0,get:function(){return de.NotificationType8}});Object.defineProperty(P,"NotificationType9",{enumerable:!0,get:function(){return de.NotificationType9}});Object.defineProperty(P,"ParameterStructures",{enumerable:!0,get:function(){return de.ParameterStructures}});var po=Ai();Object.defineProperty(P,"LinkedMap",{enumerable:!0,get:function(){return po.LinkedMap}});Object.defineProperty(P,"LRUCache",{enumerable:!0,get:function(){return po.LRUCache}});Object.defineProperty(P,"Touch",{enumerable:!0,get:function(){return po.Touch}});var zu=qs();Object.defineProperty(P,"Disposable",{enumerable:!0,get:function(){return zu.Disposable}});var Us=Xt();Object.defineProperty(P,"Event",{enumerable:!0,get:function(){return Us.Event}});Object.defineProperty(P,"Emitter",{enumerable:!0,get:function(){return Us.Emitter}});var $s=Zn();Object.defineProperty(P,"CancellationTokenSource",{enumerable:!0,get:function(){return $s.CancellationTokenSource}});Object.defineProperty(P,"CancellationToken",{enumerable:!0,get:function(){return $s.CancellationToken}});var zs=ks();Object.defineProperty(P,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return zs.SharedArraySenderStrategy}});Object.defineProperty(P,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return zs.SharedArrayReceiverStrategy}});var mo=Ss();Object.defineProperty(P,"MessageReader",{enumerable:!0,get:function(){return mo.MessageReader}});Object.defineProperty(P,"AbstractMessageReader",{enumerable:!0,get:function(){return mo.AbstractMessageReader}});Object.defineProperty(P,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return mo.ReadableStreamMessageReader}});var yo=Os();Object.defineProperty(P,"MessageWriter",{enumerable:!0,get:function(){return yo.MessageWriter}});Object.defineProperty(P,"AbstractMessageWriter",{enumerable:!0,get:function(){return yo.AbstractMessageWriter}});Object.defineProperty(P,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return yo.WriteableStreamMessageWriter}});var Bu=xs();Object.defineProperty(P,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Bu.AbstractMessageBuffer}});var Ne=Hs();Object.defineProperty(P,"ConnectionStrategy",{enumerable:!0,get:function(){return Ne.ConnectionStrategy}});Object.defineProperty(P,"ConnectionOptions",{enumerable:!0,get:function(){return Ne.ConnectionOptions}});Object.defineProperty(P,"NullLogger",{enumerable:!0,get:function(){return Ne.NullLogger}});Object.defineProperty(P,"createMessageConnection",{enumerable:!0,get:function(){return Ne.createMessageConnection}});Object.defineProperty(P,"ProgressToken",{enumerable:!0,get:function(){return Ne.ProgressToken}});Object.defineProperty(P,"ProgressType",{enumerable:!0,get:function(){return Ne.ProgressType}});Object.defineProperty(P,"Trace",{enumerable:!0,get:function(){return Ne.Trace}});Object.defineProperty(P,"TraceValues",{enumerable:!0,get:function(){return Ne.TraceValues}});Object.defineProperty(P,"TraceFormat",{enumerable:!0,get:function(){return Ne.TraceFormat}});Object.defineProperty(P,"SetTraceNotification",{enumerable:!0,get:function(){return Ne.SetTraceNotification}});Object.defineProperty(P,"LogTraceNotification",{enumerable:!0,get:function(){return Ne.LogTraceNotification}});Object.defineProperty(P,"ConnectionErrors",{enumerable:!0,get:function(){return Ne.ConnectionErrors}});Object.defineProperty(P,"ConnectionError",{enumerable:!0,get:function(){return Ne.ConnectionError}});Object.defineProperty(P,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Ne.CancellationReceiverStrategy}});Object.defineProperty(P,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Ne.CancellationSenderStrategy}});Object.defineProperty(P,"CancellationStrategy",{enumerable:!0,get:function(){return Ne.CancellationStrategy}});Object.defineProperty(P,"MessageStrategy",{enumerable:!0,get:function(){return Ne.MessageStrategy}});var Vu=qt();P.RAL=Vu.default});var Gs=F(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var Bs=require("util"),Dt=or(),sr=class t extends Dt.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Bs.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};sr.emptyBuffer=Buffer.allocUnsafe(0);var vo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Dt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Dt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Dt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Dt.Disposable.create(()=>this.stream.off("data",e))}},bo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Dt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Dt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Dt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let u=R=>{R==null?r():i(R)};typeof e=="string"?this.stream.write(e,n,u):this.stream.write(e,u)})}end(){this.stream.end()}},Vs=Object.freeze({messageBuffer:Object.freeze({create:t=>new sr(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Bs.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new vo(t),asWritableStream:t=>new bo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Ro(){return Vs}(function(t){function e(){Dt.RAL.install(Vs)}t.install=e})(Ro||(Ro={}));_o.default=Ro});var Ht=F(Z=>{"use strict";var Gu=Z&&Z.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ju=Z&&Z.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Gu(e,t,n)};Object.defineProperty(Z,"__esModule",{value:!0});Z.createMessageConnection=Z.createServerSocketTransport=Z.createClientSocketTransport=Z.createServerPipeTransport=Z.createClientPipeTransport=Z.generateRandomPipeName=Z.StreamMessageWriter=Z.StreamMessageReader=Z.SocketMessageWriter=Z.SocketMessageReader=Z.PortMessageWriter=Z.PortMessageReader=Z.IPCMessageWriter=Z.IPCMessageReader=void 0;var en=Gs();en.default.install();var Js=require("path"),Ku=require("os"),Xu=require("crypto"),ur=require("net"),$e=or();Ju(or(),Z);var Do=class extends $e.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),$e.Disposable.create(()=>this.process.off("message",e))}};Z.IPCMessageReader=Do;var Po=class extends $e.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Z.IPCMessageWriter=Po;var wo=class extends $e.AbstractMessageReader{constructor(e){super(),this.onData=new $e.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};Z.PortMessageReader=wo;var To=class extends $e.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Z.PortMessageWriter=To;var Lt=class extends $e.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,en.default)().stream.asReadableStream(e),n)}};Z.SocketMessageReader=Lt;var Wt=class extends $e.WriteableStreamMessageWriter{constructor(e,n){super((0,en.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Z.SocketMessageWriter=Wt;var ar=class extends $e.ReadableStreamMessageReader{constructor(e,n){super((0,en.default)().stream.asReadableStream(e),n)}};Z.StreamMessageReader=ar;var cr=class extends $e.WriteableStreamMessageWriter{constructor(e,n){super((0,en.default)().stream.asWritableStream(e),n)}};Z.StreamMessageWriter=cr;var Ks=process.env.XDG_RUNTIME_DIR,Qu=new Map([["linux",107],["darwin",103]]);function Yu(){let t=(0,Xu.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Ks?e=Js.join(Ks,`vscode-ipc-${t}.sock`):e=Js.join(Ku.tmpdir(),`vscode-${t}.sock`);let n=Qu.get(process.platform);return n!==void 0&&e.length>n&&(0,en.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}Z.generateRandomPipeName=Yu;function Zu(t,e="utf-8"){let n,r=new Promise((i,u)=>{n=i});return new Promise((i,u)=>{let R=(0,ur.createServer)(w=>{R.close(),n([new Lt(w,e),new Wt(w,e)])});R.on("error",u),R.listen(t,()=>{R.removeListener("error",u),i({onConnected:()=>r})})})}Z.createClientPipeTransport=Zu;function el(t,e="utf-8"){let n=(0,ur.createConnection)(t);return[new Lt(n,e),new Wt(n,e)]}Z.createServerPipeTransport=el;function tl(t,e="utf-8"){let n,r=new Promise((i,u)=>{n=i});return new Promise((i,u)=>{let R=(0,ur.createServer)(w=>{R.close(),n([new Lt(w,e),new Wt(w,e)])});R.on("error",u),R.listen(t,"127.0.0.1",()=>{R.removeListener("error",u),i({onConnected:()=>r})})})}Z.createClientSocketTransport=tl;function nl(t,e="utf-8"){let n=(0,ur.createConnection)(t,"127.0.0.1");return[new Lt(n,e),new Wt(n,e)]}Z.createServerSocketTransport=nl;function rl(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function il(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function ol(t,e,n,r){n||(n=$e.NullLogger);let i=rl(t)?new ar(t):t,u=il(e)?new cr(e):e;return $e.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,$e.createMessageConnection)(i,u,n,r)}Z.createMessageConnection=ol});var Co=F((Ug,Xs)=>{"use strict";Xs.exports=Ht()});var dr=F((Qs,lr)=>{(function(t){if(typeof lr=="object"&&typeof lr.exports=="object"){var e=t(require,Qs);e!==void 0&&(lr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(s){function f(h){return typeof h=="string"}s.is=f})(n=e.DocumentUri||(e.DocumentUri={}));var r;(function(s){function f(h){return typeof h=="string"}s.is=f})(r=e.URI||(e.URI={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function f(h){return typeof h=="number"&&s.MIN_VALUE<=h&&h<=s.MAX_VALUE}s.is=f})(i=e.integer||(e.integer={}));var u;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function f(h){return typeof h=="number"&&s.MIN_VALUE<=h&&h<=s.MAX_VALUE}s.is=f})(u=e.uinteger||(e.uinteger={}));var R;(function(s){function f(c,o){return c===Number.MAX_VALUE&&(c=u.MAX_VALUE),o===Number.MAX_VALUE&&(o=u.MAX_VALUE),{line:c,character:o}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&v.uinteger(o.line)&&v.uinteger(o.character)}s.is=h})(R=e.Position||(e.Position={}));var w;(function(s){function f(c,o,b,q){if(v.uinteger(c)&&v.uinteger(o)&&v.uinteger(b)&&v.uinteger(q))return{start:R.create(c,o),end:R.create(b,q)};if(R.is(c)&&R.is(o))return{start:c,end:o};throw new Error("Range#create called with invalid arguments[".concat(c,", ").concat(o,", ").concat(b,", ").concat(q,"]"))}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&R.is(o.start)&&R.is(o.end)}s.is=h})(w=e.Range||(e.Range={}));var d;(function(s){function f(c,o){return{uri:c,range:o}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&w.is(o.range)&&(v.string(o.uri)||v.undefined(o.uri))}s.is=h})(d=e.Location||(e.Location={}));var p;(function(s){function f(c,o,b,q){return{targetUri:c,targetRange:o,targetSelectionRange:b,originSelectionRange:q}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&w.is(o.targetRange)&&v.string(o.targetUri)&&w.is(o.targetSelectionRange)&&(w.is(o.originSelectionRange)||v.undefined(o.originSelectionRange))}s.is=h})(p=e.LocationLink||(e.LocationLink={}));var y;(function(s){function f(c,o,b,q){return{red:c,green:o,blue:b,alpha:q}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&v.numberRange(o.red,0,1)&&v.numberRange(o.green,0,1)&&v.numberRange(o.blue,0,1)&&v.numberRange(o.alpha,0,1)}s.is=h})(y=e.Color||(e.Color={}));var D;(function(s){function f(c,o){return{range:c,color:o}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&w.is(o.range)&&y.is(o.color)}s.is=h})(D=e.ColorInformation||(e.ColorInformation={}));var _;(function(s){function f(c,o,b){return{label:c,textEdit:o,additionalTextEdits:b}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&v.string(o.label)&&(v.undefined(o.textEdit)||$.is(o))&&(v.undefined(o.additionalTextEdits)||v.typedArray(o.additionalTextEdits,$.is))}s.is=h})(_=e.ColorPresentation||(e.ColorPresentation={}));var T;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(T=e.FoldingRangeKind||(e.FoldingRangeKind={}));var M;(function(s){function f(c,o,b,q,J,be){var le={startLine:c,endLine:o};return v.defined(b)&&(le.startCharacter=b),v.defined(q)&&(le.endCharacter=q),v.defined(J)&&(le.kind=J),v.defined(be)&&(le.collapsedText=be),le}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&v.uinteger(o.startLine)&&v.uinteger(o.startLine)&&(v.undefined(o.startCharacter)||v.uinteger(o.startCharacter))&&(v.undefined(o.endCharacter)||v.uinteger(o.endCharacter))&&(v.undefined(o.kind)||v.string(o.kind))}s.is=h})(M=e.FoldingRange||(e.FoldingRange={}));var k;(function(s){function f(c,o){return{location:c,message:o}}s.create=f;function h(c){var o=c;return v.defined(o)&&d.is(o.location)&&v.string(o.message)}s.is=h})(k=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var L;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(L=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var j;(function(s){s.Unnecessary=1,s.Deprecated=2})(j=e.DiagnosticTag||(e.DiagnosticTag={}));var m;(function(s){function f(h){var c=h;return v.objectLiteral(c)&&v.string(c.href)}s.is=f})(m=e.CodeDescription||(e.CodeDescription={}));var g;(function(s){function f(c,o,b,q,J,be){var le={range:c,message:o};return v.defined(b)&&(le.severity=b),v.defined(q)&&(le.code=q),v.defined(J)&&(le.source=J),v.defined(be)&&(le.relatedInformation=be),le}s.create=f;function h(c){var o,b=c;return v.defined(b)&&w.is(b.range)&&v.string(b.message)&&(v.number(b.severity)||v.undefined(b.severity))&&(v.integer(b.code)||v.string(b.code)||v.undefined(b.code))&&(v.undefined(b.codeDescription)||v.string((o=b.codeDescription)===null||o===void 0?void 0:o.href))&&(v.string(b.source)||v.undefined(b.source))&&(v.undefined(b.relatedInformation)||v.typedArray(b.relatedInformation,k.is))}s.is=h})(g=e.Diagnostic||(e.Diagnostic={}));var S;(function(s){function f(c,o){for(var b=[],q=2;q<arguments.length;q++)b[q-2]=arguments[q];var J={title:c,command:o};return v.defined(b)&&b.length>0&&(J.arguments=b),J}s.create=f;function h(c){var o=c;return v.defined(o)&&v.string(o.title)&&v.string(o.command)}s.is=h})(S=e.Command||(e.Command={}));var $;(function(s){function f(b,q){return{range:b,newText:q}}s.replace=f;function h(b,q){return{range:{start:b,end:b},newText:q}}s.insert=h;function c(b){return{range:b,newText:""}}s.del=c;function o(b){var q=b;return v.objectLiteral(q)&&v.string(q.newText)&&w.is(q.range)}s.is=o})($=e.TextEdit||(e.TextEdit={}));var X;(function(s){function f(c,o,b){var q={label:c};return o!==void 0&&(q.needsConfirmation=o),b!==void 0&&(q.description=b),q}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&v.string(o.label)&&(v.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(v.string(o.description)||o.description===void 0)}s.is=h})(X=e.ChangeAnnotation||(e.ChangeAnnotation={}));var oe;(function(s){function f(h){var c=h;return v.string(c)}s.is=f})(oe=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var Ee;(function(s){function f(b,q,J){return{range:b,newText:q,annotationId:J}}s.replace=f;function h(b,q,J){return{range:{start:b,end:b},newText:q,annotationId:J}}s.insert=h;function c(b,q){return{range:b,newText:"",annotationId:q}}s.del=c;function o(b){var q=b;return $.is(q)&&(X.is(q.annotationId)||oe.is(q.annotationId))}s.is=o})(Ee=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var ut;(function(s){function f(c,o){return{textDocument:c,edits:o}}s.create=f;function h(c){var o=c;return v.defined(o)&&V.is(o.textDocument)&&Array.isArray(o.edits)}s.is=h})(ut=e.TextDocumentEdit||(e.TextDocumentEdit={}));var lt;(function(s){function f(c,o,b){var q={kind:"create",uri:c};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(q.options=o),b!==void 0&&(q.annotationId=b),q}s.create=f;function h(c){var o=c;return o&&o.kind==="create"&&v.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||v.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||v.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=h})(lt=e.CreateFile||(e.CreateFile={}));var dt;(function(s){function f(c,o,b,q){var J={kind:"rename",oldUri:c,newUri:o};return b!==void 0&&(b.overwrite!==void 0||b.ignoreIfExists!==void 0)&&(J.options=b),q!==void 0&&(J.annotationId=q),J}s.create=f;function h(c){var o=c;return o&&o.kind==="rename"&&v.string(o.oldUri)&&v.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||v.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||v.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=h})(dt=e.RenameFile||(e.RenameFile={}));var ke;(function(s){function f(c,o,b){var q={kind:"delete",uri:c};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(q.options=o),b!==void 0&&(q.annotationId=b),q}s.create=f;function h(c){var o=c;return o&&o.kind==="delete"&&v.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||v.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||v.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||oe.is(o.annotationId))}s.is=h})(ke=e.DeleteFile||(e.DeleteFile={}));var N;(function(s){function f(h){var c=h;return c&&(c.changes!==void 0||c.documentChanges!==void 0)&&(c.documentChanges===void 0||c.documentChanges.every(function(o){return v.string(o.kind)?lt.is(o)||dt.is(o)||ke.is(o):ut.is(o)}))}s.is=f})(N=e.WorkspaceEdit||(e.WorkspaceEdit={}));var E=function(){function s(f,h){this.edits=f,this.changeAnnotations=h}return s.prototype.insert=function(f,h,c){var o,b;if(c===void 0?o=$.insert(f,h):oe.is(c)?(b=c,o=Ee.insert(f,h,c)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(c),o=Ee.insert(f,h,b)),this.edits.push(o),b!==void 0)return b},s.prototype.replace=function(f,h,c){var o,b;if(c===void 0?o=$.replace(f,h):oe.is(c)?(b=c,o=Ee.replace(f,h,c)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(c),o=Ee.replace(f,h,b)),this.edits.push(o),b!==void 0)return b},s.prototype.delete=function(f,h){var c,o;if(h===void 0?c=$.del(f):oe.is(h)?(o=h,c=Ee.del(f,h)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(h),c=Ee.del(f,o)),this.edits.push(c),o!==void 0)return o},s.prototype.add=function(f){this.edits.push(f)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(f){if(f===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),I=function(){function s(f){this._annotations=f===void 0?Object.create(null):f,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(f,h){var c;if(oe.is(f)?c=f:(c=this.nextId(),h=f),this._annotations[c]!==void 0)throw new Error("Id ".concat(c," is already in use."));if(h===void 0)throw new Error("No annotation provided for id ".concat(c));return this._annotations[c]=h,this._size++,c},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),W=function(){function s(f){var h=this;this._textEditChanges=Object.create(null),f!==void 0?(this._workspaceEdit=f,f.documentChanges?(this._changeAnnotations=new I(f.changeAnnotations),f.changeAnnotations=this._changeAnnotations.all(),f.documentChanges.forEach(function(c){if(ut.is(c)){var o=new E(c.edits,h._changeAnnotations);h._textEditChanges[c.textDocument.uri]=o}})):f.changes&&Object.keys(f.changes).forEach(function(c){var o=new E(f.changes[c]);h._textEditChanges[c]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(f){if(V.is(f)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h={uri:f.uri,version:f.version},c=this._textEditChanges[h.uri];if(!c){var o=[],b={textDocument:h,edits:o};this._workspaceEdit.documentChanges.push(b),c=new E(o,this._changeAnnotations),this._textEditChanges[h.uri]=c}return c}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var c=this._textEditChanges[f];if(!c){var o=[];this._workspaceEdit.changes[f]=o,c=new E(o),this._textEditChanges[f]=c}return c}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new I,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(f,h,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;X.is(h)||oe.is(h)?o=h:c=h;var b,q;if(o===void 0?b=lt.create(f,c):(q=oe.is(o)?o:this._changeAnnotations.manage(o),b=lt.create(f,c,q)),this._workspaceEdit.documentChanges.push(b),q!==void 0)return q},s.prototype.renameFile=function(f,h,c,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;X.is(c)||oe.is(c)?b=c:o=c;var q,J;if(b===void 0?q=dt.create(f,h,o):(J=oe.is(b)?b:this._changeAnnotations.manage(b),q=dt.create(f,h,o,J)),this._workspaceEdit.documentChanges.push(q),J!==void 0)return J},s.prototype.deleteFile=function(f,h,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;X.is(h)||oe.is(h)?o=h:c=h;var b,q;if(o===void 0?b=ke.create(f,c):(q=oe.is(o)?o:this._changeAnnotations.manage(o),b=ke.create(f,c,q)),this._workspaceEdit.documentChanges.push(b),q!==void 0)return q},s}();e.WorkspaceChange=W;var re;(function(s){function f(c){return{uri:c}}s.create=f;function h(c){var o=c;return v.defined(o)&&v.string(o.uri)}s.is=h})(re=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var ee;(function(s){function f(c,o){return{uri:c,version:o}}s.create=f;function h(c){var o=c;return v.defined(o)&&v.string(o.uri)&&v.integer(o.version)}s.is=h})(ee=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var V;(function(s){function f(c,o){return{uri:c,version:o}}s.create=f;function h(c){var o=c;return v.defined(o)&&v.string(o.uri)&&(o.version===null||v.integer(o.version))}s.is=h})(V=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Ce;(function(s){function f(c,o,b,q){return{uri:c,languageId:o,version:b,text:q}}s.create=f;function h(c){var o=c;return v.defined(o)&&v.string(o.uri)&&v.string(o.languageId)&&v.integer(o.version)&&v.string(o.text)}s.is=h})(Ce=e.TextDocumentItem||(e.TextDocumentItem={}));var Se;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function f(h){var c=h;return c===s.PlainText||c===s.Markdown}s.is=f})(Se=e.MarkupKind||(e.MarkupKind={}));var Ie;(function(s){function f(h){var c=h;return v.objectLiteral(h)&&Se.is(c.kind)&&v.string(c.value)}s.is=f})(Ie=e.MarkupContent||(e.MarkupContent={}));var wt;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(wt=e.CompletionItemKind||(e.CompletionItemKind={}));var Xe;(function(s){s.PlainText=1,s.Snippet=2})(Xe=e.InsertTextFormat||(e.InsertTextFormat={}));var $n;(function(s){s.Deprecated=1})($n=e.CompletionItemTag||(e.CompletionItemTag={}));var Yr;(function(s){function f(c,o,b){return{newText:c,insert:o,replace:b}}s.create=f;function h(c){var o=c;return o&&v.string(o.newText)&&w.is(o.insert)&&w.is(o.replace)}s.is=h})(Yr=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Zr;(function(s){s.asIs=1,s.adjustIndentation=2})(Zr=e.InsertTextMode||(e.InsertTextMode={}));var ei;(function(s){function f(h){var c=h;return c&&(v.string(c.detail)||c.detail===void 0)&&(v.string(c.description)||c.description===void 0)}s.is=f})(ei=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var ti;(function(s){function f(h){return{label:h}}s.create=f})(ti=e.CompletionItem||(e.CompletionItem={}));var ni;(function(s){function f(h,c){return{items:h||[],isIncomplete:!!c}}s.create=f})(ni=e.CompletionList||(e.CompletionList={}));var gn;(function(s){function f(c){return c.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=f;function h(c){var o=c;return v.string(o)||v.objectLiteral(o)&&v.string(o.language)&&v.string(o.value)}s.is=h})(gn=e.MarkedString||(e.MarkedString={}));var ft;(function(s){function f(h){var c=h;return!!c&&v.objectLiteral(c)&&(Ie.is(c.contents)||gn.is(c.contents)||v.typedArray(c.contents,gn.is))&&(h.range===void 0||w.is(h.range))}s.is=f})(ft=e.Hover||(e.Hover={}));var ri;(function(s){function f(h,c){return c?{label:h,documentation:c}:{label:h}}s.create=f})(ri=e.ParameterInformation||(e.ParameterInformation={}));var ii;(function(s){function f(h,c){for(var o=[],b=2;b<arguments.length;b++)o[b-2]=arguments[b];var q={label:h};return v.defined(c)&&(q.documentation=c),v.defined(o)?q.parameters=o:q.parameters=[],q}s.create=f})(ii=e.SignatureInformation||(e.SignatureInformation={}));var Vt;(function(s){s.Text=1,s.Read=2,s.Write=3})(Vt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var oi;(function(s){function f(h,c){var o={range:h};return v.number(c)&&(o.kind=c),o}s.create=f})(oi=e.DocumentHighlight||(e.DocumentHighlight={}));var pn;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(pn=e.SymbolKind||(e.SymbolKind={}));var si;(function(s){s.Deprecated=1})(si=e.SymbolTag||(e.SymbolTag={}));var Tt;(function(s){function f(h,c,o,b,q){var J={name:h,kind:c,location:{uri:b,range:o}};return q&&(J.containerName=q),J}s.create=f})(Tt=e.SymbolInformation||(e.SymbolInformation={}));var jt;(function(s){function f(h,c,o,b){return b!==void 0?{name:h,kind:c,location:{uri:o,range:b}}:{name:h,kind:c,location:{uri:o}}}s.create=f})(jt=e.WorkspaceSymbol||(e.WorkspaceSymbol={}));var ai;(function(s){function f(c,o,b,q,J,be){var le={name:c,detail:o,kind:b,range:q,selectionRange:J};return be!==void 0&&(le.children=be),le}s.create=f;function h(c){var o=c;return o&&v.string(o.name)&&v.number(o.kind)&&w.is(o.range)&&w.is(o.selectionRange)&&(o.detail===void 0||v.string(o.detail))&&(o.deprecated===void 0||v.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=h})(ai=e.DocumentSymbol||(e.DocumentSymbol={}));var ci;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(ci=e.CodeActionKind||(e.CodeActionKind={}));var mt;(function(s){s.Invoked=1,s.Automatic=2})(mt=e.CodeActionTriggerKind||(e.CodeActionTriggerKind={}));var zn;(function(s){function f(c,o,b){var q={diagnostics:c};return o!=null&&(q.only=o),b!=null&&(q.triggerKind=b),q}s.create=f;function h(c){var o=c;return v.defined(o)&&v.typedArray(o.diagnostics,g.is)&&(o.only===void 0||v.typedArray(o.only,v.string))&&(o.triggerKind===void 0||o.triggerKind===mt.Invoked||o.triggerKind===mt.Automatic)}s.is=h})(zn=e.CodeActionContext||(e.CodeActionContext={}));var Bn;(function(s){function f(c,o,b){var q={title:c},J=!0;return typeof o=="string"?(J=!1,q.kind=o):S.is(o)?q.command=o:q.edit=o,J&&b!==void 0&&(q.kind=b),q}s.create=f;function h(c){var o=c;return o&&v.string(o.title)&&(o.diagnostics===void 0||v.typedArray(o.diagnostics,g.is))&&(o.kind===void 0||v.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||S.is(o.command))&&(o.isPreferred===void 0||v.boolean(o.isPreferred))&&(o.edit===void 0||N.is(o.edit))}s.is=h})(Bn=e.CodeAction||(e.CodeAction={}));var mn;(function(s){function f(c,o){var b={range:c};return v.defined(o)&&(b.data=o),b}s.create=f;function h(c){var o=c;return v.defined(o)&&w.is(o.range)&&(v.undefined(o.command)||S.is(o.command))}s.is=h})(mn=e.CodeLens||(e.CodeLens={}));var Vn;(function(s){function f(c,o){return{tabSize:c,insertSpaces:o}}s.create=f;function h(c){var o=c;return v.defined(o)&&v.uinteger(o.tabSize)&&v.boolean(o.insertSpaces)}s.is=h})(Vn=e.FormattingOptions||(e.FormattingOptions={}));var Ct;(function(s){function f(c,o,b){return{range:c,target:o,data:b}}s.create=f;function h(c){var o=c;return v.defined(o)&&w.is(o.range)&&(v.undefined(o.target)||v.string(o.target))}s.is=h})(Ct=e.DocumentLink||(e.DocumentLink={}));var l;(function(s){function f(c,o){return{range:c,parent:o}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&w.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=h})(l=e.SelectionRange||(e.SelectionRange={}));var C;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(C=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var x;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(x=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var H;(function(s){function f(h){var c=h;return v.objectLiteral(c)&&(c.resultId===void 0||typeof c.resultId=="string")&&Array.isArray(c.data)&&(c.data.length===0||typeof c.data[0]=="number")}s.is=f})(H=e.SemanticTokens||(e.SemanticTokens={}));var ce;(function(s){function f(c,o){return{range:c,text:o}}s.create=f;function h(c){var o=c;return o!=null&&w.is(o.range)&&v.string(o.text)}s.is=h})(ce=e.InlineValueText||(e.InlineValueText={}));var se;(function(s){function f(c,o,b){return{range:c,variableName:o,caseSensitiveLookup:b}}s.create=f;function h(c){var o=c;return o!=null&&w.is(o.range)&&v.boolean(o.caseSensitiveLookup)&&(v.string(o.variableName)||o.variableName===void 0)}s.is=h})(se=e.InlineValueVariableLookup||(e.InlineValueVariableLookup={}));var he;(function(s){function f(c,o){return{range:c,expression:o}}s.create=f;function h(c){var o=c;return o!=null&&w.is(o.range)&&(v.string(o.expression)||o.expression===void 0)}s.is=h})(he=e.InlineValueEvaluatableExpression||(e.InlineValueEvaluatableExpression={}));var pe;(function(s){function f(c,o){return{frameId:c,stoppedLocation:o}}s.create=f;function h(c){var o=c;return v.defined(o)&&w.is(c.stoppedLocation)}s.is=h})(pe=e.InlineValueContext||(e.InlineValueContext={}));var Q;(function(s){s.Type=1,s.Parameter=2;function f(h){return h===1||h===2}s.is=f})(Q=e.InlayHintKind||(e.InlayHintKind={}));var ue;(function(s){function f(c){return{value:c}}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&(o.tooltip===void 0||v.string(o.tooltip)||Ie.is(o.tooltip))&&(o.location===void 0||d.is(o.location))&&(o.command===void 0||S.is(o.command))}s.is=h})(ue=e.InlayHintLabelPart||(e.InlayHintLabelPart={}));var ie;(function(s){function f(c,o,b){var q={position:c,label:o};return b!==void 0&&(q.kind=b),q}s.create=f;function h(c){var o=c;return v.objectLiteral(o)&&R.is(o.position)&&(v.string(o.label)||v.typedArray(o.label,ue.is))&&(o.kind===void 0||Q.is(o.kind))&&o.textEdits===void 0||v.typedArray(o.textEdits,$.is)&&(o.tooltip===void 0||v.string(o.tooltip)||Ie.is(o.tooltip))&&(o.paddingLeft===void 0||v.boolean(o.paddingLeft))&&(o.paddingRight===void 0||v.boolean(o.paddingRight))}s.is=h})(ie=e.InlayHint||(e.InlayHint={}));var De;(function(s){function f(h){var c=h;return v.objectLiteral(c)&&r.is(c.uri)&&v.string(c.name)}s.is=f})(De=e.WorkspaceFolder||(e.WorkspaceFolder={})),e.EOL=[`
`,`\r
`,"\r"];var Me;(function(s){function f(b,q,J,be){return new Be(b,q,J,be)}s.create=f;function h(b){var q=b;return!!(v.defined(q)&&v.string(q.uri)&&(v.undefined(q.languageId)||v.string(q.languageId))&&v.uinteger(q.lineCount)&&v.func(q.getText)&&v.func(q.positionAt)&&v.func(q.offsetAt))}s.is=h;function c(b,q){for(var J=b.getText(),be=o(q,function(Gt,Gn){var gs=Gt.range.start.line-Gn.range.start.line;return gs===0?Gt.range.start.character-Gn.range.start.character:gs}),le=J.length,Qe=be.length-1;Qe>=0;Qe--){var Ye=be[Qe],yt=b.offsetAt(Ye.range.start),Y=b.offsetAt(Ye.range.end);if(Y<=le)J=J.substring(0,yt)+Ye.newText+J.substring(Y,J.length);else throw new Error("Overlapping edit");le=yt}return J}s.applyEdits=c;function o(b,q){if(b.length<=1)return b;var J=b.length/2|0,be=b.slice(0,J),le=b.slice(J);o(be,q),o(le,q);for(var Qe=0,Ye=0,yt=0;Qe<be.length&&Ye<le.length;){var Y=q(be[Qe],le[Ye]);Y<=0?b[yt++]=be[Qe++]:b[yt++]=le[Ye++]}for(;Qe<be.length;)b[yt++]=be[Qe++];for(;Ye<le.length;)b[yt++]=le[Ye++];return b}})(Me=e.TextDocument||(e.TextDocument={}));var Be=function(){function s(f,h,c,o){this._uri=f,this._languageId=h,this._version=c,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(f){if(f){var h=this.offsetAt(f.start),c=this.offsetAt(f.end);return this._content.substring(h,c)}return this._content},s.prototype.update=function(f,h){this._content=f.text,this._version=h,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var f=[],h=this._content,c=!0,o=0;o<h.length;o++){c&&(f.push(o),c=!1);var b=h.charAt(o);c=b==="\r"||b===`
`,b==="\r"&&o+1<h.length&&h.charAt(o+1)===`
`&&o++}c&&h.length>0&&f.push(h.length),this._lineOffsets=f}return this._lineOffsets},s.prototype.positionAt=function(f){f=Math.max(Math.min(f,this._content.length),0);var h=this.getLineOffsets(),c=0,o=h.length;if(o===0)return R.create(0,f);for(;c<o;){var b=Math.floor((c+o)/2);h[b]>f?o=b:c=b+1}var q=c-1;return R.create(q,f-h[q])},s.prototype.offsetAt=function(f){var h=this.getLineOffsets();if(f.line>=h.length)return this._content.length;if(f.line<0)return 0;var c=h[f.line],o=f.line+1<h.length?h[f.line+1]:this._content.length;return Math.max(Math.min(c+f.character,o),c)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),v;(function(s){var f=Object.prototype.toString;function h(Y){return typeof Y<"u"}s.defined=h;function c(Y){return typeof Y>"u"}s.undefined=c;function o(Y){return Y===!0||Y===!1}s.boolean=o;function b(Y){return f.call(Y)==="[object String]"}s.string=b;function q(Y){return f.call(Y)==="[object Number]"}s.number=q;function J(Y,Gt,Gn){return f.call(Y)==="[object Number]"&&Gt<=Y&&Y<=Gn}s.numberRange=J;function be(Y){return f.call(Y)==="[object Number]"&&-2147483648<=Y&&Y<=2147483647}s.integer=be;function le(Y){return f.call(Y)==="[object Number]"&&0<=Y&&Y<=2147483647}s.uinteger=le;function Qe(Y){return f.call(Y)==="[object Function]"}s.func=Qe;function Ye(Y){return Y!==null&&typeof Y=="object"}s.objectLiteral=Ye;function yt(Y,Gt){return Array.isArray(Y)&&Y.every(Gt)}s.typedArray=yt})(v||(v={}))})});var ye=F(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.ProtocolNotificationType=Le.ProtocolNotificationType0=Le.ProtocolRequestType=Le.ProtocolRequestType0=Le.RegistrationType=Le.MessageDirection=void 0;var tn=Ht(),sl;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(sl=Le.MessageDirection||(Le.MessageDirection={}));var qo=class{constructor(e){this.method=e}};Le.RegistrationType=qo;var ko=class extends tn.RequestType0{constructor(e){super(e)}};Le.ProtocolRequestType0=ko;var So=class extends tn.RequestType{constructor(e){super(e,tn.ParameterStructures.byName)}};Le.ProtocolRequestType=So;var Eo=class extends tn.NotificationType0{constructor(e){super(e)}};Le.ProtocolNotificationType0=Eo;var Mo=class extends tn.NotificationType{constructor(e){super(e,tn.ParameterStructures.byName)}};Le.ProtocolNotificationType=Mo});var fr=F(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.objectLiteral=we.typedArray=we.stringArray=we.array=we.func=we.error=we.number=we.string=we.boolean=void 0;function al(t){return t===!0||t===!1}we.boolean=al;function Ys(t){return typeof t=="string"||t instanceof String}we.string=Ys;function cl(t){return typeof t=="number"||t instanceof Number}we.number=cl;function ul(t){return t instanceof Error}we.error=ul;function ll(t){return typeof t=="function"}we.func=ll;function Zs(t){return Array.isArray(t)}we.array=Zs;function dl(t){return Zs(t)&&t.every(e=>Ys(e))}we.stringArray=dl;function fl(t,e){return Array.isArray(t)&&t.every(e)}we.typedArray=fl;function hl(t){return t!==null&&typeof t=="object"}we.objectLiteral=hl});var ta=F(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.ImplementationRequest=void 0;var ea=ye(),gl;(function(t){t.method="textDocument/implementation",t.messageDirection=ea.MessageDirection.clientToServer,t.type=new ea.ProtocolRequestType(t.method)})(gl=wn.ImplementationRequest||(wn.ImplementationRequest={}))});var ra=F(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.TypeDefinitionRequest=void 0;var na=ye(),pl;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=na.MessageDirection.clientToServer,t.type=new na.ProtocolRequestType(t.method)})(pl=Tn.TypeDefinitionRequest||(Tn.TypeDefinitionRequest={}))});var ia=F(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.DidChangeWorkspaceFoldersNotification=kt.WorkspaceFoldersRequest=void 0;var hr=ye(),ml;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=hr.MessageDirection.serverToClient,t.type=new hr.ProtocolRequestType0(t.method)})(ml=kt.WorkspaceFoldersRequest||(kt.WorkspaceFoldersRequest={}));var yl;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=hr.MessageDirection.clientToServer,t.type=new hr.ProtocolNotificationType(t.method)})(yl=kt.DidChangeWorkspaceFoldersNotification||(kt.DidChangeWorkspaceFoldersNotification={}))});var sa=F(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ConfigurationRequest=void 0;var oa=ye(),vl;(function(t){t.method="workspace/configuration",t.messageDirection=oa.MessageDirection.serverToClient,t.type=new oa.ProtocolRequestType(t.method)})(vl=Cn.ConfigurationRequest||(Cn.ConfigurationRequest={}))});var aa=F(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.ColorPresentationRequest=St.DocumentColorRequest=void 0;var gr=ye(),bl;(function(t){t.method="textDocument/documentColor",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(bl=St.DocumentColorRequest||(St.DocumentColorRequest={}));var Rl;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method)})(Rl=St.ColorPresentationRequest||(St.ColorPresentationRequest={}))});var ua=F(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.FoldingRangeRequest=void 0;var ca=ye(),_l;(function(t){t.method="textDocument/foldingRange",t.messageDirection=ca.MessageDirection.clientToServer,t.type=new ca.ProtocolRequestType(t.method)})(_l=qn.FoldingRangeRequest||(qn.FoldingRangeRequest={}))});var da=F(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.DeclarationRequest=void 0;var la=ye(),Dl;(function(t){t.method="textDocument/declaration",t.messageDirection=la.MessageDirection.clientToServer,t.type=new la.ProtocolRequestType(t.method)})(Dl=kn.DeclarationRequest||(kn.DeclarationRequest={}))});var ha=F(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.SelectionRangeRequest=void 0;var fa=ye(),Pl;(function(t){t.method="textDocument/selectionRange",t.messageDirection=fa.MessageDirection.clientToServer,t.type=new fa.ProtocolRequestType(t.method)})(Pl=Sn.SelectionRangeRequest||(Sn.SelectionRangeRequest={}))});var ga=F(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.WorkDoneProgressCancelNotification=tt.WorkDoneProgressCreateRequest=tt.WorkDoneProgress=void 0;var wl=Ht(),pr=ye(),Tl;(function(t){t.type=new wl.ProgressType;function e(n){return n===t.type}t.is=e})(Tl=tt.WorkDoneProgress||(tt.WorkDoneProgress={}));var Cl;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=pr.MessageDirection.serverToClient,t.type=new pr.ProtocolRequestType(t.method)})(Cl=tt.WorkDoneProgressCreateRequest||(tt.WorkDoneProgressCreateRequest={}));var ql;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=pr.MessageDirection.clientToServer,t.type=new pr.ProtocolNotificationType(t.method)})(ql=tt.WorkDoneProgressCancelNotification||(tt.WorkDoneProgressCancelNotification={}))});var pa=F(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.CallHierarchyOutgoingCallsRequest=nt.CallHierarchyIncomingCallsRequest=nt.CallHierarchyPrepareRequest=void 0;var nn=ye(),kl;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(kl=nt.CallHierarchyPrepareRequest||(nt.CallHierarchyPrepareRequest={}));var Sl;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(Sl=nt.CallHierarchyIncomingCallsRequest||(nt.CallHierarchyIncomingCallsRequest={}));var El;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=nn.MessageDirection.clientToServer,t.type=new nn.ProtocolRequestType(t.method)})(El=nt.CallHierarchyOutgoingCallsRequest||(nt.CallHierarchyOutgoingCallsRequest={}))});var ma=F(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.SemanticTokensRefreshRequest=Te.SemanticTokensRangeRequest=Te.SemanticTokensDeltaRequest=Te.SemanticTokensRequest=Te.SemanticTokensRegistrationType=Te.TokenFormat=void 0;var Pt=ye(),Ml;(function(t){t.Relative="relative"})(Ml=Te.TokenFormat||(Te.TokenFormat={}));var mr;(function(t){t.method="textDocument/semanticTokens",t.type=new Pt.RegistrationType(t.method)})(mr=Te.SemanticTokensRegistrationType||(Te.SemanticTokensRegistrationType={}));var Nl;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Pt.MessageDirection.clientToServer,t.type=new Pt.ProtocolRequestType(t.method),t.registrationMethod=mr.method})(Nl=Te.SemanticTokensRequest||(Te.SemanticTokensRequest={}));var Ol;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Pt.MessageDirection.clientToServer,t.type=new Pt.ProtocolRequestType(t.method),t.registrationMethod=mr.method})(Ol=Te.SemanticTokensDeltaRequest||(Te.SemanticTokensDeltaRequest={}));var xl;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Pt.MessageDirection.clientToServer,t.type=new Pt.ProtocolRequestType(t.method),t.registrationMethod=mr.method})(xl=Te.SemanticTokensRangeRequest||(Te.SemanticTokensRangeRequest={}));var jl;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Pt.MessageDirection.serverToClient,t.type=new Pt.ProtocolRequestType0(t.method)})(jl=Te.SemanticTokensRefreshRequest||(Te.SemanticTokensRefreshRequest={}))});var va=F(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ShowDocumentRequest=void 0;var ya=ye(),Il;(function(t){t.method="window/showDocument",t.messageDirection=ya.MessageDirection.serverToClient,t.type=new ya.ProtocolRequestType(t.method)})(Il=En.ShowDocumentRequest||(En.ShowDocumentRequest={}))});var Ra=F(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.LinkedEditingRangeRequest=void 0;var ba=ye(),Fl;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=ba.MessageDirection.clientToServer,t.type=new ba.ProtocolRequestType(t.method)})(Fl=Mn.LinkedEditingRangeRequest||(Mn.LinkedEditingRangeRequest={}))});var _a=F(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.WillDeleteFilesRequest=ve.DidDeleteFilesNotification=ve.DidRenameFilesNotification=ve.WillRenameFilesRequest=ve.DidCreateFilesNotification=ve.WillCreateFilesRequest=ve.FileOperationPatternKind=void 0;var Ve=ye(),Al;(function(t){t.file="file",t.folder="folder"})(Al=ve.FileOperationPatternKind||(ve.FileOperationPatternKind={}));var Ll;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Ve.MessageDirection.clientToServer,t.type=new Ve.ProtocolRequestType(t.method)})(Ll=ve.WillCreateFilesRequest||(ve.WillCreateFilesRequest={}));var Wl;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Ve.MessageDirection.clientToServer,t.type=new Ve.ProtocolNotificationType(t.method)})(Wl=ve.DidCreateFilesNotification||(ve.DidCreateFilesNotification={}));var Hl;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Ve.MessageDirection.clientToServer,t.type=new Ve.ProtocolRequestType(t.method)})(Hl=ve.WillRenameFilesRequest||(ve.WillRenameFilesRequest={}));var Ul;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Ve.MessageDirection.clientToServer,t.type=new Ve.ProtocolNotificationType(t.method)})(Ul=ve.DidRenameFilesNotification||(ve.DidRenameFilesNotification={}));var $l;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Ve.MessageDirection.clientToServer,t.type=new Ve.ProtocolNotificationType(t.method)})($l=ve.DidDeleteFilesNotification||(ve.DidDeleteFilesNotification={}));var zl;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Ve.MessageDirection.clientToServer,t.type=new Ve.ProtocolRequestType(t.method)})(zl=ve.WillDeleteFilesRequest||(ve.WillDeleteFilesRequest={}))});var Pa=F(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.MonikerRequest=rt.MonikerKind=rt.UniquenessLevel=void 0;var Da=ye(),Bl;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Bl=rt.UniquenessLevel||(rt.UniquenessLevel={}));var Vl;(function(t){t.$import="import",t.$export="export",t.local="local"})(Vl=rt.MonikerKind||(rt.MonikerKind={}));var Gl;(function(t){t.method="textDocument/moniker",t.messageDirection=Da.MessageDirection.clientToServer,t.type=new Da.ProtocolRequestType(t.method)})(Gl=rt.MonikerRequest||(rt.MonikerRequest={}))});var wa=F(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.TypeHierarchySubtypesRequest=it.TypeHierarchySupertypesRequest=it.TypeHierarchyPrepareRequest=void 0;var rn=ye(),Jl;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(Jl=it.TypeHierarchyPrepareRequest||(it.TypeHierarchyPrepareRequest={}));var Kl;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(Kl=it.TypeHierarchySupertypesRequest||(it.TypeHierarchySupertypesRequest={}));var Xl;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=rn.MessageDirection.clientToServer,t.type=new rn.ProtocolRequestType(t.method)})(Xl=it.TypeHierarchySubtypesRequest||(it.TypeHierarchySubtypesRequest={}))});var Ta=F(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.InlineValueRefreshRequest=Et.InlineValueRequest=void 0;var yr=ye(),Ql;(function(t){t.method="textDocument/inlineValue",t.messageDirection=yr.MessageDirection.clientToServer,t.type=new yr.ProtocolRequestType(t.method)})(Ql=Et.InlineValueRequest||(Et.InlineValueRequest={}));var Yl;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=yr.MessageDirection.serverToClient,t.type=new yr.ProtocolRequestType0(t.method)})(Yl=Et.InlineValueRefreshRequest||(Et.InlineValueRefreshRequest={}))});var Ca=F(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.InlayHintRefreshRequest=ot.InlayHintResolveRequest=ot.InlayHintRequest=void 0;var on=ye(),Zl;(function(t){t.method="textDocument/inlayHint",t.messageDirection=on.MessageDirection.clientToServer,t.type=new on.ProtocolRequestType(t.method)})(Zl=ot.InlayHintRequest||(ot.InlayHintRequest={}));var ed;(function(t){t.method="inlayHint/resolve",t.messageDirection=on.MessageDirection.clientToServer,t.type=new on.ProtocolRequestType(t.method)})(ed=ot.InlayHintResolveRequest||(ot.InlayHintResolveRequest={}));var td;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=on.MessageDirection.serverToClient,t.type=new on.ProtocolRequestType0(t.method)})(td=ot.InlayHintRefreshRequest||(ot.InlayHintRefreshRequest={}))});var ka=F(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.DiagnosticRefreshRequest=Oe.WorkspaceDiagnosticRequest=Oe.DocumentDiagnosticRequest=Oe.DocumentDiagnosticReportKind=Oe.DiagnosticServerCancellationData=void 0;var qa=Ht(),nd=fr(),sn=ye(),rd;(function(t){function e(n){let r=n;return r&&nd.boolean(r.retriggerRequest)}t.is=e})(rd=Oe.DiagnosticServerCancellationData||(Oe.DiagnosticServerCancellationData={}));var id;(function(t){t.Full="full",t.Unchanged="unchanged"})(id=Oe.DocumentDiagnosticReportKind||(Oe.DocumentDiagnosticReportKind={}));var od;(function(t){t.method="textDocument/diagnostic",t.messageDirection=sn.MessageDirection.clientToServer,t.type=new sn.ProtocolRequestType(t.method),t.partialResult=new qa.ProgressType})(od=Oe.DocumentDiagnosticRequest||(Oe.DocumentDiagnosticRequest={}));var sd;(function(t){t.method="workspace/diagnostic",t.messageDirection=sn.MessageDirection.clientToServer,t.type=new sn.ProtocolRequestType(t.method),t.partialResult=new qa.ProgressType})(sd=Oe.WorkspaceDiagnosticRequest||(Oe.WorkspaceDiagnosticRequest={}));var ad;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=sn.MessageDirection.serverToClient,t.type=new sn.ProtocolRequestType0(t.method)})(ad=Oe.DiagnosticRefreshRequest||(Oe.DiagnosticRefreshRequest={}))});var Ma=F(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.DidCloseNotebookDocumentNotification=ne.DidSaveNotebookDocumentNotification=ne.DidChangeNotebookDocumentNotification=ne.NotebookCellArrayChange=ne.DidOpenNotebookDocumentNotification=ne.NotebookDocumentSyncRegistrationType=ne.NotebookDocument=ne.NotebookCell=ne.ExecutionSummary=ne.NotebookCellKind=void 0;var Nn=dr(),st=fr(),ht=ye(),Sa;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Sa=ne.NotebookCellKind||(ne.NotebookCellKind={}));var Ea;(function(t){function e(i,u){let R={executionOrder:i};return(u===!0||u===!1)&&(R.success=u),R}t.create=e;function n(i){let u=i;return st.objectLiteral(u)&&Nn.uinteger.is(u.executionOrder)&&(u.success===void 0||st.boolean(u.success))}t.is=n;function r(i,u){return i===u?!0:i==null||u===null||u===void 0?!1:i.executionOrder===u.executionOrder&&i.success===u.success}t.equals=r})(Ea=ne.ExecutionSummary||(ne.ExecutionSummary={}));var No;(function(t){function e(u,R){return{kind:u,document:R}}t.create=e;function n(u){let R=u;return st.objectLiteral(R)&&Sa.is(R.kind)&&Nn.DocumentUri.is(R.document)&&(R.metadata===void 0||st.objectLiteral(R.metadata))}t.is=n;function r(u,R){let w=new Set;return u.document!==R.document&&w.add("document"),u.kind!==R.kind&&w.add("kind"),u.executionSummary!==R.executionSummary&&w.add("executionSummary"),(u.metadata!==void 0||R.metadata!==void 0)&&!i(u.metadata,R.metadata)&&w.add("metadata"),(u.executionSummary!==void 0||R.executionSummary!==void 0)&&!Ea.equals(u.executionSummary,R.executionSummary)&&w.add("executionSummary"),w}t.diff=r;function i(u,R){if(u===R)return!0;if(u==null||R===null||R===void 0||typeof u!=typeof R||typeof u!="object")return!1;let w=Array.isArray(u),d=Array.isArray(R);if(w!==d)return!1;if(w&&d){if(u.length!==R.length)return!1;for(let p=0;p<u.length;p++)if(!i(u[p],R[p]))return!1}if(st.objectLiteral(u)&&st.objectLiteral(R)){let p=Object.keys(u),y=Object.keys(R);if(p.length!==y.length||(p.sort(),y.sort(),!i(p,y)))return!1;for(let D=0;D<p.length;D++){let _=p[D];if(!i(u[_],R[_]))return!1}}return!0}})(No=ne.NotebookCell||(ne.NotebookCell={}));var cd;(function(t){function e(r,i,u,R){return{uri:r,notebookType:i,version:u,cells:R}}t.create=e;function n(r){let i=r;return st.objectLiteral(i)&&st.string(i.uri)&&Nn.integer.is(i.version)&&st.typedArray(i.cells,No.is)}t.is=n})(cd=ne.NotebookDocument||(ne.NotebookDocument={}));var On;(function(t){t.method="notebookDocument/sync",t.messageDirection=ht.MessageDirection.clientToServer,t.type=new ht.RegistrationType(t.method)})(On=ne.NotebookDocumentSyncRegistrationType||(ne.NotebookDocumentSyncRegistrationType={}));var ud;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=ht.MessageDirection.clientToServer,t.type=new ht.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(ud=ne.DidOpenNotebookDocumentNotification||(ne.DidOpenNotebookDocumentNotification={}));var ld;(function(t){function e(r){let i=r;return st.objectLiteral(i)&&Nn.uinteger.is(i.start)&&Nn.uinteger.is(i.deleteCount)&&(i.cells===void 0||st.typedArray(i.cells,No.is))}t.is=e;function n(r,i,u){let R={start:r,deleteCount:i};return u!==void 0&&(R.cells=u),R}t.create=n})(ld=ne.NotebookCellArrayChange||(ne.NotebookCellArrayChange={}));var dd;(function(t){t.method="notebookDocument/didChange",t.messageDirection=ht.MessageDirection.clientToServer,t.type=new ht.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(dd=ne.DidChangeNotebookDocumentNotification||(ne.DidChangeNotebookDocumentNotification={}));var fd;(function(t){t.method="notebookDocument/didSave",t.messageDirection=ht.MessageDirection.clientToServer,t.type=new ht.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(fd=ne.DidSaveNotebookDocumentNotification||(ne.DidSaveNotebookDocumentNotification={}));var hd;(function(t){t.method="notebookDocument/didClose",t.messageDirection=ht.MessageDirection.clientToServer,t.type=new ht.ProtocolNotificationType(t.method),t.registrationMethod=On.method})(hd=ne.DidCloseNotebookDocumentNotification||(ne.DidCloseNotebookDocumentNotification={}))});var Wa=F(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.WorkspaceSymbolRequest=a.CodeActionResolveRequest=a.CodeActionRequest=a.DocumentSymbolRequest=a.DocumentHighlightRequest=a.ReferencesRequest=a.DefinitionRequest=a.SignatureHelpRequest=a.SignatureHelpTriggerKind=a.HoverRequest=a.CompletionResolveRequest=a.CompletionRequest=a.CompletionTriggerKind=a.PublishDiagnosticsNotification=a.WatchKind=a.RelativePattern=a.FileChangeType=a.DidChangeWatchedFilesNotification=a.WillSaveTextDocumentWaitUntilRequest=a.WillSaveTextDocumentNotification=a.TextDocumentSaveReason=a.DidSaveTextDocumentNotification=a.DidCloseTextDocumentNotification=a.DidChangeTextDocumentNotification=a.TextDocumentContentChangeEvent=a.DidOpenTextDocumentNotification=a.TextDocumentSyncKind=a.TelemetryEventNotification=a.LogMessageNotification=a.ShowMessageRequest=a.ShowMessageNotification=a.MessageType=a.DidChangeConfigurationNotification=a.ExitNotification=a.ShutdownRequest=a.InitializedNotification=a.InitializeErrorCodes=a.InitializeRequest=a.WorkDoneProgressOptions=a.TextDocumentRegistrationOptions=a.StaticRegistrationOptions=a.PositionEncodingKind=a.FailureHandlingKind=a.ResourceOperationKind=a.UnregistrationRequest=a.RegistrationRequest=a.DocumentSelector=a.NotebookCellTextDocumentFilter=a.NotebookDocumentFilter=a.TextDocumentFilter=void 0;a.TypeHierarchySubtypesRequest=a.TypeHierarchyPrepareRequest=a.MonikerRequest=a.MonikerKind=a.UniquenessLevel=a.WillDeleteFilesRequest=a.DidDeleteFilesNotification=a.WillRenameFilesRequest=a.DidRenameFilesNotification=a.WillCreateFilesRequest=a.DidCreateFilesNotification=a.FileOperationPatternKind=a.LinkedEditingRangeRequest=a.ShowDocumentRequest=a.SemanticTokensRegistrationType=a.SemanticTokensRefreshRequest=a.SemanticTokensRangeRequest=a.SemanticTokensDeltaRequest=a.SemanticTokensRequest=a.TokenFormat=a.CallHierarchyPrepareRequest=a.CallHierarchyOutgoingCallsRequest=a.CallHierarchyIncomingCallsRequest=a.WorkDoneProgressCancelNotification=a.WorkDoneProgressCreateRequest=a.WorkDoneProgress=a.SelectionRangeRequest=a.DeclarationRequest=a.FoldingRangeRequest=a.ColorPresentationRequest=a.DocumentColorRequest=a.ConfigurationRequest=a.DidChangeWorkspaceFoldersNotification=a.WorkspaceFoldersRequest=a.TypeDefinitionRequest=a.ImplementationRequest=a.ApplyWorkspaceEditRequest=a.ExecuteCommandRequest=a.PrepareRenameRequest=a.RenameRequest=a.PrepareSupportDefaultBehavior=a.DocumentOnTypeFormattingRequest=a.DocumentRangeFormattingRequest=a.DocumentFormattingRequest=a.DocumentLinkResolveRequest=a.DocumentLinkRequest=a.CodeLensRefreshRequest=a.CodeLensResolveRequest=a.CodeLensRequest=a.WorkspaceSymbolResolveRequest=void 0;a.DidCloseNotebookDocumentNotification=a.DidSaveNotebookDocumentNotification=a.DidChangeNotebookDocumentNotification=a.NotebookCellArrayChange=a.DidOpenNotebookDocumentNotification=a.NotebookDocumentSyncRegistrationType=a.NotebookDocument=a.NotebookCell=a.ExecutionSummary=a.NotebookCellKind=a.DiagnosticRefreshRequest=a.WorkspaceDiagnosticRequest=a.DocumentDiagnosticRequest=a.DocumentDiagnosticReportKind=a.DiagnosticServerCancellationData=a.InlayHintRefreshRequest=a.InlayHintResolveRequest=a.InlayHintRequest=a.InlineValueRefreshRequest=a.InlineValueRequest=a.TypeHierarchySupertypesRequest=void 0;var O=ye(),Na=dr(),xe=fr(),gd=ta();Object.defineProperty(a,"ImplementationRequest",{enumerable:!0,get:function(){return gd.ImplementationRequest}});var pd=ra();Object.defineProperty(a,"TypeDefinitionRequest",{enumerable:!0,get:function(){return pd.TypeDefinitionRequest}});var Oa=ia();Object.defineProperty(a,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Oa.WorkspaceFoldersRequest}});Object.defineProperty(a,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Oa.DidChangeWorkspaceFoldersNotification}});var md=sa();Object.defineProperty(a,"ConfigurationRequest",{enumerable:!0,get:function(){return md.ConfigurationRequest}});var xa=aa();Object.defineProperty(a,"DocumentColorRequest",{enumerable:!0,get:function(){return xa.DocumentColorRequest}});Object.defineProperty(a,"ColorPresentationRequest",{enumerable:!0,get:function(){return xa.ColorPresentationRequest}});var yd=ua();Object.defineProperty(a,"FoldingRangeRequest",{enumerable:!0,get:function(){return yd.FoldingRangeRequest}});var vd=da();Object.defineProperty(a,"DeclarationRequest",{enumerable:!0,get:function(){return vd.DeclarationRequest}});var bd=ha();Object.defineProperty(a,"SelectionRangeRequest",{enumerable:!0,get:function(){return bd.SelectionRangeRequest}});var Oo=ga();Object.defineProperty(a,"WorkDoneProgress",{enumerable:!0,get:function(){return Oo.WorkDoneProgress}});Object.defineProperty(a,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Oo.WorkDoneProgressCreateRequest}});Object.defineProperty(a,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Oo.WorkDoneProgressCancelNotification}});var xo=pa();Object.defineProperty(a,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return xo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(a,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return xo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(a,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return xo.CallHierarchyPrepareRequest}});var an=ma();Object.defineProperty(a,"TokenFormat",{enumerable:!0,get:function(){return an.TokenFormat}});Object.defineProperty(a,"SemanticTokensRequest",{enumerable:!0,get:function(){return an.SemanticTokensRequest}});Object.defineProperty(a,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return an.SemanticTokensDeltaRequest}});Object.defineProperty(a,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return an.SemanticTokensRangeRequest}});Object.defineProperty(a,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return an.SemanticTokensRefreshRequest}});Object.defineProperty(a,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return an.SemanticTokensRegistrationType}});var Rd=va();Object.defineProperty(a,"ShowDocumentRequest",{enumerable:!0,get:function(){return Rd.ShowDocumentRequest}});var _d=Ra();Object.defineProperty(a,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return _d.LinkedEditingRangeRequest}});var Ut=_a();Object.defineProperty(a,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ut.FileOperationPatternKind}});Object.defineProperty(a,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ut.DidCreateFilesNotification}});Object.defineProperty(a,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ut.WillCreateFilesRequest}});Object.defineProperty(a,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ut.DidRenameFilesNotification}});Object.defineProperty(a,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ut.WillRenameFilesRequest}});Object.defineProperty(a,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ut.DidDeleteFilesNotification}});Object.defineProperty(a,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ut.WillDeleteFilesRequest}});var jo=Pa();Object.defineProperty(a,"UniquenessLevel",{enumerable:!0,get:function(){return jo.UniquenessLevel}});Object.defineProperty(a,"MonikerKind",{enumerable:!0,get:function(){return jo.MonikerKind}});Object.defineProperty(a,"MonikerRequest",{enumerable:!0,get:function(){return jo.MonikerRequest}});var Io=wa();Object.defineProperty(a,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Io.TypeHierarchyPrepareRequest}});Object.defineProperty(a,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Io.TypeHierarchySubtypesRequest}});Object.defineProperty(a,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Io.TypeHierarchySupertypesRequest}});var ja=Ta();Object.defineProperty(a,"InlineValueRequest",{enumerable:!0,get:function(){return ja.InlineValueRequest}});Object.defineProperty(a,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return ja.InlineValueRefreshRequest}});var Fo=Ca();Object.defineProperty(a,"InlayHintRequest",{enumerable:!0,get:function(){return Fo.InlayHintRequest}});Object.defineProperty(a,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Fo.InlayHintResolveRequest}});Object.defineProperty(a,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Fo.InlayHintRefreshRequest}});var xn=ka();Object.defineProperty(a,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return xn.DiagnosticServerCancellationData}});Object.defineProperty(a,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return xn.DocumentDiagnosticReportKind}});Object.defineProperty(a,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return xn.DocumentDiagnosticRequest}});Object.defineProperty(a,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return xn.WorkspaceDiagnosticRequest}});Object.defineProperty(a,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return xn.DiagnosticRefreshRequest}});var gt=Ma();Object.defineProperty(a,"NotebookCellKind",{enumerable:!0,get:function(){return gt.NotebookCellKind}});Object.defineProperty(a,"ExecutionSummary",{enumerable:!0,get:function(){return gt.ExecutionSummary}});Object.defineProperty(a,"NotebookCell",{enumerable:!0,get:function(){return gt.NotebookCell}});Object.defineProperty(a,"NotebookDocument",{enumerable:!0,get:function(){return gt.NotebookDocument}});Object.defineProperty(a,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return gt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(a,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return gt.DidOpenNotebookDocumentNotification}});Object.defineProperty(a,"NotebookCellArrayChange",{enumerable:!0,get:function(){return gt.NotebookCellArrayChange}});Object.defineProperty(a,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return gt.DidChangeNotebookDocumentNotification}});Object.defineProperty(a,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return gt.DidSaveNotebookDocumentNotification}});Object.defineProperty(a,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return gt.DidCloseNotebookDocumentNotification}});var Ia;(function(t){function e(n){let r=n;return xe.string(r.language)||xe.string(r.scheme)||xe.string(r.pattern)}t.is=e})(Ia=a.TextDocumentFilter||(a.TextDocumentFilter={}));var Fa;(function(t){function e(n){let r=n;return xe.objectLiteral(r)&&(xe.string(r.notebookType)||xe.string(r.scheme)||xe.string(r.pattern))}t.is=e})(Fa=a.NotebookDocumentFilter||(a.NotebookDocumentFilter={}));var Aa;(function(t){function e(n){let r=n;return xe.objectLiteral(r)&&(xe.string(r.notebook)||Fa.is(r.notebook))&&(r.language===void 0||xe.string(r.language))}t.is=e})(Aa=a.NotebookCellTextDocumentFilter||(a.NotebookCellTextDocumentFilter={}));var La;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!xe.string(r)&&!Ia.is(r)&&!Aa.is(r))return!1;return!0}t.is=e})(La=a.DocumentSelector||(a.DocumentSelector={}));var Dd;(function(t){t.method="client/registerCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(Dd=a.RegistrationRequest||(a.RegistrationRequest={}));var Pd;(function(t){t.method="client/unregisterCapability",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(Pd=a.UnregistrationRequest||(a.UnregistrationRequest={}));var wd;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(wd=a.ResourceOperationKind||(a.ResourceOperationKind={}));var Td;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Td=a.FailureHandlingKind||(a.FailureHandlingKind={}));var Cd;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Cd=a.PositionEncodingKind||(a.PositionEncodingKind={}));var qd;(function(t){function e(n){let r=n;return r&&xe.string(r.id)&&r.id.length>0}t.hasId=e})(qd=a.StaticRegistrationOptions||(a.StaticRegistrationOptions={}));var kd;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||La.is(r.documentSelector))}t.is=e})(kd=a.TextDocumentRegistrationOptions||(a.TextDocumentRegistrationOptions={}));var Sd;(function(t){function e(r){let i=r;return xe.objectLiteral(i)&&(i.workDoneProgress===void 0||xe.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&xe.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(Sd=a.WorkDoneProgressOptions||(a.WorkDoneProgressOptions={}));var Ed;(function(t){t.method="initialize",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Ed=a.InitializeRequest||(a.InitializeRequest={}));var Md;(function(t){t.unknownProtocolVersion=1})(Md=a.InitializeErrorCodes||(a.InitializeErrorCodes={}));var Nd;(function(t){t.method="initialized",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Nd=a.InitializedNotification||(a.InitializedNotification={}));var Od;(function(t){t.method="shutdown",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType0(t.method)})(Od=a.ShutdownRequest||(a.ShutdownRequest={}));var xd;(function(t){t.method="exit",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType0(t.method)})(xd=a.ExitNotification||(a.ExitNotification={}));var jd;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(jd=a.DidChangeConfigurationNotification||(a.DidChangeConfigurationNotification={}));var Id;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Id=a.MessageType||(a.MessageType={}));var Fd;(function(t){t.method="window/showMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Fd=a.ShowMessageNotification||(a.ShowMessageNotification={}));var Ad;(function(t){t.method="window/showMessageRequest",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType(t.method)})(Ad=a.ShowMessageRequest||(a.ShowMessageRequest={}));var Ld;(function(t){t.method="window/logMessage",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Ld=a.LogMessageNotification||(a.LogMessageNotification={}));var Wd;(function(t){t.method="telemetry/event",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(Wd=a.TelemetryEventNotification||(a.TelemetryEventNotification={}));var Hd;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Hd=a.TextDocumentSyncKind||(a.TextDocumentSyncKind={}));var Ud;(function(t){t.method="textDocument/didOpen",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Ud=a.DidOpenTextDocumentNotification||(a.DidOpenTextDocumentNotification={}));var $d;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})($d=a.TextDocumentContentChangeEvent||(a.TextDocumentContentChangeEvent={}));var zd;(function(t){t.method="textDocument/didChange",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(zd=a.DidChangeTextDocumentNotification||(a.DidChangeTextDocumentNotification={}));var Bd;(function(t){t.method="textDocument/didClose",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Bd=a.DidCloseTextDocumentNotification||(a.DidCloseTextDocumentNotification={}));var Vd;(function(t){t.method="textDocument/didSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Vd=a.DidSaveTextDocumentNotification||(a.DidSaveTextDocumentNotification={}));var Gd;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Gd=a.TextDocumentSaveReason||(a.TextDocumentSaveReason={}));var Jd;(function(t){t.method="textDocument/willSave",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Jd=a.WillSaveTextDocumentNotification||(a.WillSaveTextDocumentNotification={}));var Kd;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Kd=a.WillSaveTextDocumentWaitUntilRequest||(a.WillSaveTextDocumentWaitUntilRequest={}));var Xd;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolNotificationType(t.method)})(Xd=a.DidChangeWatchedFilesNotification||(a.DidChangeWatchedFilesNotification={}));var Qd;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Qd=a.FileChangeType||(a.FileChangeType={}));var Yd;(function(t){function e(n){let r=n;return xe.objectLiteral(r)&&(Na.URI.is(r.baseUri)||Na.WorkspaceFolder.is(r.baseUri))&&xe.string(r.pattern)}t.is=e})(Yd=a.RelativePattern||(a.RelativePattern={}));var Zd;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Zd=a.WatchKind||(a.WatchKind={}));var ef;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolNotificationType(t.method)})(ef=a.PublishDiagnosticsNotification||(a.PublishDiagnosticsNotification={}));var tf;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(tf=a.CompletionTriggerKind||(a.CompletionTriggerKind={}));var nf;(function(t){t.method="textDocument/completion",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(nf=a.CompletionRequest||(a.CompletionRequest={}));var rf;(function(t){t.method="completionItem/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(rf=a.CompletionResolveRequest||(a.CompletionResolveRequest={}));var of;(function(t){t.method="textDocument/hover",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(of=a.HoverRequest||(a.HoverRequest={}));var sf;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(sf=a.SignatureHelpTriggerKind||(a.SignatureHelpTriggerKind={}));var af;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(af=a.SignatureHelpRequest||(a.SignatureHelpRequest={}));var cf;(function(t){t.method="textDocument/definition",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(cf=a.DefinitionRequest||(a.DefinitionRequest={}));var uf;(function(t){t.method="textDocument/references",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(uf=a.ReferencesRequest||(a.ReferencesRequest={}));var lf;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(lf=a.DocumentHighlightRequest||(a.DocumentHighlightRequest={}));var df;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(df=a.DocumentSymbolRequest||(a.DocumentSymbolRequest={}));var ff;(function(t){t.method="textDocument/codeAction",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(ff=a.CodeActionRequest||(a.CodeActionRequest={}));var hf;(function(t){t.method="codeAction/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(hf=a.CodeActionResolveRequest||(a.CodeActionResolveRequest={}));var gf;(function(t){t.method="workspace/symbol",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(gf=a.WorkspaceSymbolRequest||(a.WorkspaceSymbolRequest={}));var pf;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(pf=a.WorkspaceSymbolResolveRequest||(a.WorkspaceSymbolResolveRequest={}));var mf;(function(t){t.method="textDocument/codeLens",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(mf=a.CodeLensRequest||(a.CodeLensRequest={}));var yf;(function(t){t.method="codeLens/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(yf=a.CodeLensResolveRequest||(a.CodeLensResolveRequest={}));var vf;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType0(t.method)})(vf=a.CodeLensRefreshRequest||(a.CodeLensRefreshRequest={}));var bf;(function(t){t.method="textDocument/documentLink",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(bf=a.DocumentLinkRequest||(a.DocumentLinkRequest={}));var Rf;(function(t){t.method="documentLink/resolve",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Rf=a.DocumentLinkResolveRequest||(a.DocumentLinkResolveRequest={}));var _f;(function(t){t.method="textDocument/formatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(_f=a.DocumentFormattingRequest||(a.DocumentFormattingRequest={}));var Df;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Df=a.DocumentRangeFormattingRequest||(a.DocumentRangeFormattingRequest={}));var Pf;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Pf=a.DocumentOnTypeFormattingRequest||(a.DocumentOnTypeFormattingRequest={}));var wf;(function(t){t.Identifier=1})(wf=a.PrepareSupportDefaultBehavior||(a.PrepareSupportDefaultBehavior={}));var Tf;(function(t){t.method="textDocument/rename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Tf=a.RenameRequest||(a.RenameRequest={}));var Cf;(function(t){t.method="textDocument/prepareRename",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(Cf=a.PrepareRenameRequest||(a.PrepareRenameRequest={}));var qf;(function(t){t.method="workspace/executeCommand",t.messageDirection=O.MessageDirection.clientToServer,t.type=new O.ProtocolRequestType(t.method)})(qf=a.ExecuteCommandRequest||(a.ExecuteCommandRequest={}));var kf;(function(t){t.method="workspace/applyEdit",t.messageDirection=O.MessageDirection.serverToClient,t.type=new O.ProtocolRequestType("workspace/applyEdit")})(kf=a.ApplyWorkspaceEditRequest||(a.ApplyWorkspaceEditRequest={}))});var Ua=F(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.createProtocolConnection=void 0;var Ha=Ht();function Sf(t,e,n,r){return Ha.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ha.createMessageConnection)(t,e,n,r)}vr.createProtocolConnection=Sf});var $a=F(We=>{"use strict";var Ef=We&&We.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),br=We&&We.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ef(e,t,n)};Object.defineProperty(We,"__esModule",{value:!0});We.LSPErrorCodes=We.createProtocolConnection=void 0;br(Ht(),We);br(dr(),We);br(ye(),We);br(Wa(),We);var Mf=Ua();Object.defineProperty(We,"createProtocolConnection",{enumerable:!0,get:function(){return Mf.createProtocolConnection}});var Nf;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Nf=We.LSPErrorCodes||(We.LSPErrorCodes={}))});var qe=F(pt=>{"use strict";var Of=pt&&pt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),za=pt&&pt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Of(e,t,n)};Object.defineProperty(pt,"__esModule",{value:!0});pt.createProtocolConnection=void 0;var xf=Co();za(Co(),pt);za($a(),pt);function jf(t,e,n,r){return(0,xf.createMessageConnection)(t,e,n,r)}pt.createProtocolConnection=jf});var Ao=F(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.generateUuid=Ge.parse=Ge.isUUID=Ge.v4=Ge.empty=void 0;var jn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},In=class t extends jn{constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}};In._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];In._timeHighBits=["8","9","a","b"];Ge.empty=new jn("00000000-0000-0000-0000-000000000000");function Ba(){return new In}Ge.v4=Ba;var If=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Va(t){return If.test(t)}Ge.isUUID=Va;function Ff(t){if(!Va(t))throw new Error("invalid uuid");return new jn(t)}Ge.parse=Ff;function Af(){return Ba().asHex()}Ge.generateUuid=Af});var Ga=F(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.attachPartialResult=Nt.ProgressFeature=Nt.attachWorkDone=void 0;var Mt=qe(),Lf=Ao(),$t=class t{constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let u={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Mt.WorkDoneProgress.type,this._token,u)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(Mt.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(Mt.WorkDoneProgress.type,this._token,{kind:"end"})}};$t.Instances=new Map;var Rr=class extends $t{constructor(e,n){super(e,n),this._source=new Mt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Fn=class{constructor(){}begin(){}report(){}done(){}},_r=class extends Fn{constructor(){super(),this._source=new Mt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Wf(t,e){if(e===void 0||e.workDoneToken===void 0)return new Fn;let n=e.workDoneToken;return delete e.workDoneToken,new $t(t,n)}Nt.attachWorkDone=Wf;var Hf=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Mt.WorkDoneProgressCancelNotification.type,n=>{let r=$t.Instances.get(n.token);(r instanceof Rr||r instanceof _r)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Fn:new $t(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Lf.generateUuid)();return this.connection.sendRequest(Mt.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Rr(this.connection,e))}else return Promise.resolve(new _r)}};Nt.ProgressFeature=Hf;var Lo;(function(t){t.type=new Mt.ProgressType})(Lo||(Lo={}));var Wo=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Lo.type,this._token,e)}};function Uf(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Wo(t,n)}Nt.attachPartialResult=Uf});var Ja=F(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ConfigurationFeature=void 0;var $f=qe(),zf=Kn(),Bf=t=>class extends t{getConfiguration(e){return e?zf.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest($f.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Dr.ConfigurationFeature=Bf});var Ka=F(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.WorkspaceFoldersFeature=void 0;var Pr=qe(),Vf=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Pr.Emitter,this.connection.onNotification(Pr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Pr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Pr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};wr.WorkspaceFoldersFeature=Vf});var Xa=F(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.CallHierarchyFeature=void 0;var Ho=qe(),Gf=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Ho.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:e=>{let n=Ho.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Ho.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Tr.CallHierarchyFeature=Gf});var $o=F(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.SemanticTokensBuilder=Ot.SemanticTokensDiff=Ot.SemanticTokensFeature=void 0;var Cr=qe(),Jf=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Cr.SemanticTokensRefreshRequest.type),on:e=>{let n=Cr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=Cr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=Cr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ot.SemanticTokensFeature=Jf;var qr=class{constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,u=n-1;for(;i>=r&&u>=r&&this.originalSequence[i]===this.modifiedSequence[u];)i--,u--;(i<r||u<r)&&(i++,u++);let R=i-r+1,w=this.modifiedSequence.slice(r,u+1);return w.length===1&&w[0]===this.originalSequence[i]?[{start:r,deleteCount:R-1}]:[{start:r,deleteCount:R,data:w}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};Ot.SemanticTokensDiff=qr;var Uo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,u){let R=e,w=n;this._dataLen>0&&(R-=this._prevLine,R===0&&(w-=this._prevChar)),this._data[this._dataLen++]=R,this._data[this._dataLen++]=w,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=u,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new qr(this._prevData,this._data).computeDiff()}:this.build()}};Ot.SemanticTokensBuilder=Uo});var Qa=F(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.ShowDocumentFeature=void 0;var Kf=qe(),Xf=t=>class extends t{showDocument(e){return this.connection.sendRequest(Kf.ShowDocumentRequest.type,e)}};kr.ShowDocumentFeature=Xf});var Ya=F(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.FileOperationsFeature=void 0;var cn=qe(),Qf=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(cn.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(cn.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(cn.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(cn.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(cn.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(cn.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Sr.FileOperationsFeature=Qf});var Za=F(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.LinkedEditingRangeFeature=void 0;var Yf=qe(),Zf=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Yf.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};Er.LinkedEditingRangeFeature=Zf});var ec=F(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.TypeHierarchyFeature=void 0;var zo=qe(),eh=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(zo.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:e=>{let n=zo.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:e=>{let n=zo.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Mr.TypeHierarchyFeature=eh});var nc=F(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.InlineValueFeature=void 0;var tc=qe(),th=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(tc.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(tc.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n)))}}};Nr.InlineValueFeature=th});var rc=F(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.InlayHintFeature=void 0;var Bo=qe(),nh=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Bo.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(Bo.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),resolve:e=>this.connection.onRequest(Bo.InlayHintResolveRequest.type,(n,r)=>e(n,r))}}};Or.InlayHintFeature=nh});var ic=F(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.DiagnosticFeature=void 0;var An=qe(),rh=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(An.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(An.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(An.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(An.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(An.WorkspaceDiagnosticRequest.partialResult,n)))}}};xr.DiagnosticFeature=rh});var Go=F(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.TextDocuments=void 0;var zt=qe(),Vo=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new zt.Emitter,this._onDidOpen=new zt.Emitter,this._onDidClose=new zt.Emitter,this._onDidSave=new zt.Emitter,this._onWillSave=new zt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=zt.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,u=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,u);let R=Object.freeze({document:u});this._onDidOpen.fire(R),this._onDidChangeContent.fire(R)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,u=r.contentChanges;if(u.length===0)return;let{version:R}=i;if(R==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let w=this._syncedDocuments.get(i.uri);w!==void 0&&(w=this._configuration.update(w,u,R),this._syncedDocuments.set(i.uri,w),this._onDidChangeContent.fire(Object.freeze({document:w})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let u=this._syncedDocuments.get(r.textDocument.uri);return u!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:u,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),zt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};jr.TextDocuments=Vo});var Ko=F(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.NotebookDocuments=un.NotebookSyncFeature=void 0;var Je=qe(),oc=Go(),ih=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(Je.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(Je.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(Je.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(Je.DidCloseNotebookDocumentNotification.type,n=>{e(n)})}}};un.NotebookSyncFeature=ih;var Ir=class t{onDidOpenTextDocument(e){return this.openHandler=e,Je.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Je.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Je.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};Ir.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var Jo=class{constructor(e){e instanceof oc.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new oc.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Je.Emitter,this._onDidChange=new Je.Emitter,this._onDidSave=new Je.Emitter,this._onDidClose=new Je.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new Ir,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let u of i.cellTextDocuments)n.openTextDocument({textDocument:u});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let u=this.notebookDocuments.get(i.notebookDocument.uri);if(u===void 0)return;u.version=i.notebookDocument.version;let R=u.metadata,w=!1,d=i.change;d.metadata!==void 0&&(w=!0,u.metadata=d.metadata);let p=[],y=[],D=[],_=[];if(d.cells!==void 0){let j=d.cells;if(j.structure!==void 0){let m=j.structure.array;if(u.cells.splice(m.start,m.deleteCount,...m.cells!==void 0?m.cells:[]),j.structure.didOpen!==void 0)for(let g of j.structure.didOpen)n.openTextDocument({textDocument:g}),p.push(g.uri);if(j.structure.didClose)for(let g of j.structure.didClose)n.closeTextDocument({textDocument:g}),y.push(g.uri)}if(j.data!==void 0){let m=new Map(j.data.map(g=>[g.document,g]));for(let g=0;g<=u.cells.length;g++){let S=m.get(u.cells[g].document);if(S!==void 0){let $=u.cells.splice(g,1,S);if(D.push({old:$[0],new:S}),m.delete(S.document),m.size===0)break}}}if(j.textContent!==void 0)for(let m of j.textContent)n.changeTextDocument({textDocument:m.document,contentChanges:m.changes}),_.push(m.document.uri)}this.updateCellMap(u);let T={notebookDocument:u};w&&(T.metadata={old:R,new:u.metadata});let M=[];for(let j of p)M.push(this.getNotebookCell(j));let k=[];for(let j of y)k.push(this.getNotebookCell(j));let L=[];for(let j of _)L.push(this.getNotebookCell(j));(M.length>0||k.length>0||D.length>0||L.length>0)&&(T.cells={added:M,removed:k,changed:{data:D,textContent:L}}),(T.metadata!==void 0||T.cells!==void 0)&&this._onDidChange.fire(T)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let u=this.notebookDocuments.get(i.notebookDocument.uri);u!==void 0&&this._onDidSave.fire(u)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let u=this.notebookDocuments.get(i.notebookDocument.uri);if(u!==void 0){this._onDidClose.fire(u);for(let R of i.cellTextDocuments)n.closeTextDocument({textDocument:R});this.notebookDocuments.delete(i.notebookDocument.uri);for(let R of u.cells)this.notebookCellMap.delete(R.document)}})),Je.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};un.NotebookDocuments=Jo});var sc=F(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.MonikerFeature=void 0;var oh=qe(),sh=t=>class extends t{get moniker(){return{on:e=>{let n=oh.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Fr.MonikerFeature=sh});var ts=F(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.createConnection=te.combineFeatures=te.combineNotebooksFeatures=te.combineLanguagesFeatures=te.combineWorkspaceFeatures=te.combineWindowFeatures=te.combineClientFeatures=te.combineTracerFeatures=te.combineTelemetryFeatures=te.combineConsoleFeatures=te._NotebooksImpl=te._LanguagesImpl=te.BulkUnregistration=te.BulkRegistration=te.ErrorMessageTracker=void 0;var A=qe(),Ke=Kn(),Qo=Ao(),G=Ga(),ah=Ja(),ch=Ka(),uh=Xa(),lh=$o(),dh=Qa(),fh=Ya(),hh=Za(),gh=ec(),ph=nc(),mh=rc(),yh=ic(),vh=Ko(),bh=sc();function Xo(t){if(t!==null)return t}var Yo=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};te.ErrorMessageTracker=Yo;var Ar=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(A.MessageType.Error,e)}warn(e){this.send(A.MessageType.Warning,e)}info(e){this.send(A.MessageType.Info,e)}log(e){this.send(A.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(A.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,A.RAL)().console.error("Sending log message failed")})}},Zo=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:A.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(A.ShowMessageRequest.type,r).then(Xo)}showWarningMessage(e,...n){let r={type:A.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(A.ShowMessageRequest.type,r).then(Xo)}showInformationMessage(e,...n){let r={type:A.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(A.ShowMessageRequest.type,r).then(Xo)}},ac=(0,dh.ShowDocumentFeature)((0,G.ProgressFeature)(Zo)),Rh;(function(t){function e(){return new Lr}t.create=e})(Rh=te.BulkRegistration||(te.BulkRegistration={}));var Lr=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=Ke.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Qo.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},_h;(function(t){function e(){return new Ln(void 0,[])}t.create=e})(_h=te.BulkUnregistration||(te.BulkUnregistration={}));var Ln=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(A.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=Ke.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(A.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},u=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Wr=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof Lr?this.registerMany(e):e instanceof Ln?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=Ke.string(n)?n:n.method,u=Qo.generateUuid(),R={registrations:[{id:u,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(A.RegistrationRequest.type,R).then(w=>(e.add({id:u,method:i}),e),w=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(w)))}registerSingle2(e,n){let r=Ke.string(e)?e:e.method,i=Qo.generateUuid(),u={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(A.RegistrationRequest.type,u).then(R=>A.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),R=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(R)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(A.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(A.RegistrationRequest.type,n).then(()=>new Ln(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},es=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(A.ApplyWorkspaceEditRequest.type,r)}},cc=(0,fh.FileOperationsFeature)((0,ch.WorkspaceFoldersFeature)((0,ah.ConfigurationFeature)(es))),Hr=class{constructor(){this._trace=A.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==A.Trace.Off&&this.connection.sendNotification(A.LogTraceNotification.type,{message:e,verbose:this._trace===A.Trace.Verbose?n:void 0}).catch(()=>{})}},Ur=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(A.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},$r=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,G.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,G.attachPartialResult)(this.connection,n)}};te._LanguagesImpl=$r;var uc=(0,bh.MonikerFeature)((0,yh.DiagnosticFeature)((0,mh.InlayHintFeature)((0,ph.InlineValueFeature)((0,gh.TypeHierarchyFeature)((0,hh.LinkedEditingRangeFeature)((0,lh.SemanticTokensFeature)((0,uh.CallHierarchyFeature)($r)))))))),zr=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,G.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,G.attachPartialResult)(this.connection,n)}};te._NotebooksImpl=zr;var lc=(0,vh.NotebookSyncFeature)(zr);function dc(t,e){return function(n){return e(t(n))}}te.combineConsoleFeatures=dc;function fc(t,e){return function(n){return e(t(n))}}te.combineTelemetryFeatures=fc;function hc(t,e){return function(n){return e(t(n))}}te.combineTracerFeatures=hc;function gc(t,e){return function(n){return e(t(n))}}te.combineClientFeatures=gc;function pc(t,e){return function(n){return e(t(n))}}te.combineWindowFeatures=pc;function mc(t,e){return function(n){return e(t(n))}}te.combineWorkspaceFeatures=mc;function yc(t,e){return function(n){return e(t(n))}}te.combineLanguagesFeatures=yc;function vc(t,e){return function(n){return e(t(n))}}te.combineNotebooksFeatures=vc;function Dh(t,e){function n(i,u,R){return i&&u?R(i,u):i||u}return{__brand:"features",console:n(t.console,e.console,dc),tracer:n(t.tracer,e.tracer,hc),telemetry:n(t.telemetry,e.telemetry,fc),client:n(t.client,e.client,gc),window:n(t.window,e.window,pc),workspace:n(t.workspace,e.workspace,mc),languages:n(t.languages,e.languages,yc),notebooks:n(t.notebooks,e.notebooks,vc)}}te.combineFeatures=Dh;function Ph(t,e,n){let r=n&&n.console?new(n.console(Ar)):new Ar,i=t(r);r.rawAttach(i);let u=n&&n.tracer?new(n.tracer(Hr)):new Hr,R=n&&n.telemetry?new(n.telemetry(Ur)):new Ur,w=n&&n.client?new(n.client(Wr)):new Wr,d=n&&n.window?new(n.window(ac)):new ac,p=n&&n.workspace?new(n.workspace(cc)):new cc,y=n&&n.languages?new(n.languages(uc)):new uc,D=n&&n.notebooks?new(n.notebooks(lc)):new lc,_=[r,u,R,w,d,p,y,D];function T(m){return m instanceof Promise?m:Ke.thenable(m)?new Promise((g,S)=>{m.then($=>g($),$=>S($))}):Promise.resolve(m)}let M,k,L,j={listen:()=>i.listen(),sendRequest:(m,...g)=>i.sendRequest(Ke.string(m)?m:m.method,...g),onRequest:(m,g)=>i.onRequest(m,g),sendNotification:(m,g)=>{let S=Ke.string(m)?m:m.method;return arguments.length===1?i.sendNotification(S):i.sendNotification(S,g)},onNotification:(m,g)=>i.onNotification(m,g),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:m=>(k=m,{dispose:()=>{k=void 0}}),onInitialized:m=>i.onNotification(A.InitializedNotification.type,m),onShutdown:m=>(M=m,{dispose:()=>{M=void 0}}),onExit:m=>(L=m,{dispose:()=>{L=void 0}}),get console(){return r},get telemetry(){return R},get tracer(){return u},get client(){return w},get window(){return d},get workspace(){return p},get languages(){return y},get notebooks(){return D},onDidChangeConfiguration:m=>i.onNotification(A.DidChangeConfigurationNotification.type,m),onDidChangeWatchedFiles:m=>i.onNotification(A.DidChangeWatchedFilesNotification.type,m),__textDocumentSync:void 0,onDidOpenTextDocument:m=>i.onNotification(A.DidOpenTextDocumentNotification.type,m),onDidChangeTextDocument:m=>i.onNotification(A.DidChangeTextDocumentNotification.type,m),onDidCloseTextDocument:m=>i.onNotification(A.DidCloseTextDocumentNotification.type,m),onWillSaveTextDocument:m=>i.onNotification(A.WillSaveTextDocumentNotification.type,m),onWillSaveTextDocumentWaitUntil:m=>i.onRequest(A.WillSaveTextDocumentWaitUntilRequest.type,m),onDidSaveTextDocument:m=>i.onNotification(A.DidSaveTextDocumentNotification.type,m),sendDiagnostics:m=>i.sendNotification(A.PublishDiagnosticsNotification.type,m),onHover:m=>i.onRequest(A.HoverRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),void 0)),onCompletion:m=>i.onRequest(A.CompletionRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onCompletionResolve:m=>i.onRequest(A.CompletionResolveRequest.type,m),onSignatureHelp:m=>i.onRequest(A.SignatureHelpRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),void 0)),onDeclaration:m=>i.onRequest(A.DeclarationRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onDefinition:m=>i.onRequest(A.DefinitionRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onTypeDefinition:m=>i.onRequest(A.TypeDefinitionRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onImplementation:m=>i.onRequest(A.ImplementationRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onReferences:m=>i.onRequest(A.ReferencesRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onDocumentHighlight:m=>i.onRequest(A.DocumentHighlightRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onDocumentSymbol:m=>i.onRequest(A.DocumentSymbolRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onWorkspaceSymbol:m=>i.onRequest(A.WorkspaceSymbolRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onWorkspaceSymbolResolve:m=>i.onRequest(A.WorkspaceSymbolResolveRequest.type,m),onCodeAction:m=>i.onRequest(A.CodeActionRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onCodeActionResolve:m=>i.onRequest(A.CodeActionResolveRequest.type,(g,S)=>m(g,S)),onCodeLens:m=>i.onRequest(A.CodeLensRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onCodeLensResolve:m=>i.onRequest(A.CodeLensResolveRequest.type,(g,S)=>m(g,S)),onDocumentFormatting:m=>i.onRequest(A.DocumentFormattingRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),void 0)),onDocumentRangeFormatting:m=>i.onRequest(A.DocumentRangeFormattingRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),void 0)),onDocumentOnTypeFormatting:m=>i.onRequest(A.DocumentOnTypeFormattingRequest.type,(g,S)=>m(g,S)),onRenameRequest:m=>i.onRequest(A.RenameRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),void 0)),onPrepareRename:m=>i.onRequest(A.PrepareRenameRequest.type,(g,S)=>m(g,S)),onDocumentLinks:m=>i.onRequest(A.DocumentLinkRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onDocumentLinkResolve:m=>i.onRequest(A.DocumentLinkResolveRequest.type,(g,S)=>m(g,S)),onDocumentColor:m=>i.onRequest(A.DocumentColorRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onColorPresentation:m=>i.onRequest(A.ColorPresentationRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onFoldingRanges:m=>i.onRequest(A.FoldingRangeRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onSelectionRanges:m=>i.onRequest(A.SelectionRangeRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),(0,G.attachPartialResult)(i,g))),onExecuteCommand:m=>i.onRequest(A.ExecuteCommandRequest.type,(g,S)=>m(g,S,(0,G.attachWorkDone)(i,g),void 0)),dispose:()=>i.dispose()};for(let m of _)m.attach(j);return i.onRequest(A.InitializeRequest.type,m=>{e.initialize(m),Ke.string(m.trace)&&(u.trace=A.Trace.fromString(m.trace));for(let g of _)g.initialize(m.capabilities);if(k){let g=k(m,new A.CancellationTokenSource().token,(0,G.attachWorkDone)(i,m),void 0);return T(g).then(S=>{if(S instanceof A.ResponseError)return S;let $=S;$||($={capabilities:{}});let X=$.capabilities;X||(X={},$.capabilities=X),X.textDocumentSync===void 0||X.textDocumentSync===null?X.textDocumentSync=Ke.number(j.__textDocumentSync)?j.__textDocumentSync:A.TextDocumentSyncKind.None:!Ke.number(X.textDocumentSync)&&!Ke.number(X.textDocumentSync.change)&&(X.textDocumentSync.change=Ke.number(j.__textDocumentSync)?j.__textDocumentSync:A.TextDocumentSyncKind.None);for(let oe of _)oe.fillServerCapabilities(X);return $})}else{let g={capabilities:{textDocumentSync:A.TextDocumentSyncKind.None}};for(let S of _)S.fillServerCapabilities(g.capabilities);return g}}),i.onRequest(A.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,M)return M(new A.CancellationTokenSource().token)}),i.onNotification(A.ExitNotification.type,()=>{try{L&&L()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(A.SetTraceNotification.type,m=>{u.trace=A.Trace.fromString(m.value)}),j}te.createConnection=Ph});var Rc=F(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.resolveModulePath=He.FileSystem=He.resolveGlobalYarnPath=He.resolveGlobalNodePath=He.resolve=He.uriToFilePath=void 0;var wh=require("url"),at=require("path"),ns=require("fs"),os=require("child_process");function Th(t){let e=wh.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let u=n[0],R=n[1];u.length===0&&R.length>1&&R[1]===":"&&n.shift()}return at.normalize(n.join("/"))}He.uriToFilePath=Th;function rs(){return process.platform==="win32"}function Br(t,e,n,r){let i="NODE_PATH",u=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((R,w)=>{let d=process.env,p=Object.create(null);Object.keys(d).forEach(y=>p[y]=d[y]),e&&ns.existsSync(e)&&(p[i]?p[i]=e+at.delimiter+p[i]:p[i]=e,r&&r(`NODE_PATH value is: ${p[i]}`)),p.ELECTRON_RUN_AS_NODE="1";try{let y=(0,os.fork)("",[],{cwd:n,env:p,execArgv:["-e",u]});if(y.pid===void 0){w(new Error(`Starting process to resolve node module  ${t} failed`));return}y.on("error",_=>{w(_)}),y.on("message",_=>{_.c==="r"&&(y.send({c:"e"}),_.s?R(_.r):w(new Error(`Failed to resolve module: ${t}`)))});let D={c:"rs",a:t};y.send(D)}catch(y){w(y)}})}He.resolve=Br;function is(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(u=>n[u]=process.env[u]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};rs()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let u=(0,os.spawnSync)(e,["config","get","prefix"],r).stdout;if(!u){t&&t("'npm config get prefix' didn't return a value.");return}let R=u.trim();return t&&t(`'npm config get prefix' value is: ${R}`),R.length>0?rs()?at.join(R,"node_modules"):at.join(R,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}He.resolveGlobalNodePath=is;function Ch(t){let e="yarn",n={encoding:"utf8"};rs()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,os.spawnSync)(e,["global","dir","--json"],n),u=i.stdout;if(!u){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let R=u.trim().split(/\r?\n/);for(let w of R)try{let d=JSON.parse(w);if(d.type==="log")return at.join(d.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}He.resolveGlobalYarnPath=Ch;var bc;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!ns.existsSync(__filename.toUpperCase())||!ns.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,u){return n()?at.normalize(u).indexOf(at.normalize(i))===0:at.normalize(u).toLowerCase().indexOf(at.normalize(i).toLowerCase())===0}t.isParent=r})(bc=He.FileSystem||(He.FileSystem={}));function qh(t,e,n,r){return n?(at.isAbsolute(n)||(n=at.join(t,n)),Br(e,n,n,r).then(i=>bc.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Br(e,is(r),t,r))):Br(e,is(r),t,r)}He.resolveModulePath=qh});var ss=F((Gp,_c)=>{"use strict";_c.exports=qe()});var Pc=F(je=>{"use strict";var kh=je&&je.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Dc=je&&je.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&kh(e,t,n)};Object.defineProperty(je,"__esModule",{value:!0});je.ProposedFeatures=je.NotebookDocuments=je.TextDocuments=je.SemanticTokensBuilder=void 0;var Sh=$o();Object.defineProperty(je,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Sh.SemanticTokensBuilder}});Dc(qe(),je);var Eh=Go();Object.defineProperty(je,"TextDocuments",{enumerable:!0,get:function(){return Eh.TextDocuments}});var Mh=Ko();Object.defineProperty(je,"NotebookDocuments",{enumerable:!0,get:function(){return Mh.NotebookDocuments}});Dc(ts(),je);var Nh;(function(t){t.all={__brand:"features"}})(Nh=je.ProposedFeatures||(je.ProposedFeatures={}))});var qc=F(ze=>{"use strict";var Oh=ze&&ze.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Tc=ze&&ze.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Oh(e,t,n)};Object.defineProperty(ze,"__esModule",{value:!0});ze.createConnection=ze.Files=void 0;var as=Kn(),xh=ts(),Wn=Rc(),Bt=ss();Tc(ss(),ze);Tc(Pc(),ze);var jh;(function(t){t.uriToFilePath=Wn.uriToFilePath,t.resolveGlobalNodePath=Wn.resolveGlobalNodePath,t.resolveGlobalYarnPath=Wn.resolveGlobalYarnPath,t.resolve=Wn.resolve,t.resolveModulePath=Wn.resolveModulePath})(jh=ze.Files||(ze.Files={}));var wc;function Vr(){if(wc!==void 0)try{wc.end()}catch{}}var ln=!1,Cc;function Ih(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(Cc=setInterval(()=>{try{process.kill(r,0)}catch{Vr(),process.exit(ln?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}Ih();var Fh={initialize:t=>{let e=t.processId;as.number(e)&&Cc===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(ln?0:1)}},3e3)},get shutdownReceived(){return ln},set shutdownReceived(t){ln=t},exit:t=>{Vr(),process.exit(t)}};function Ah(t,e,n,r){let i,u,R,w;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),Bt.ConnectionStrategy.is(t)||Bt.ConnectionOptions.is(t)?w=t:(u=t,R=e,w=n),Lh(u,R,w,i)}ze.createConnection=Ah;function Lh(t,e,n,r){if(!t&&!e&&process.argv.length>2){let w,d,p=process.argv.slice(2);for(let y=0;y<p.length;y++){let D=p[y];if(D==="--node-ipc"){t=new Bt.IPCMessageReader(process),e=new Bt.IPCMessageWriter(process);break}else if(D==="--stdio"){t=process.stdin,e=process.stdout;break}else if(D==="--socket"){w=parseInt(p[y+1]);break}else if(D==="--pipe"){d=p[y+1];break}else{var i=D.split("=");if(i[0]==="--socket"){w=parseInt(i[1]);break}else if(i[0]==="--pipe"){d=i[1];break}}}if(w){let y=(0,Bt.createServerSocketTransport)(w);t=y[0],e=y[1]}else if(d){let y=(0,Bt.createServerPipeTransport)(d);t=y[0],e=y[1]}}var u="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+u);if(!e)throw new Error("Connection output stream is not set. "+u);if(as.func(t.read)&&as.func(t.on)){let w=t;w.on("end",()=>{Vr(),process.exit(ln?0:1)}),w.on("close",()=>{Vr(),process.exit(ln?0:1)})}let R=w=>(0,Bt.createProtocolConnection)(t,e,w,n);return(0,xh.createConnection)(R,Fh,r)}});var Sc=F((Xp,kc)=>{"use strict";kc.exports=qc()});var Ec=F((Jr,Gr)=>{var Wh=Jr&&Jr.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,u;r<i;r++)(u||!(r in e))&&(u||(u=Array.prototype.slice.call(e,0,r)),u[r]=e[r]);return t.concat(u||Array.prototype.slice.call(e))};(function(t){if(typeof Gr=="object"&&typeof Gr.exports=="object"){var e=t(require,Jr);e!==void 0&&(Gr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function d(p,y,D,_){this._uri=p,this._languageId=y,this._version=D,this._content=_,this._lineOffsets=void 0}return Object.defineProperty(d.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),d.prototype.getText=function(p){if(p){var y=this.offsetAt(p.start),D=this.offsetAt(p.end);return this._content.substring(y,D)}return this._content},d.prototype.update=function(p,y){for(var D=0,_=p;D<_.length;D++){var T=_[D];if(d.isIncremental(T)){var M=R(T.range),k=this.offsetAt(M.start),L=this.offsetAt(M.end);this._content=this._content.substring(0,k)+T.text+this._content.substring(L,this._content.length);var j=Math.max(M.start.line,0),m=Math.max(M.end.line,0),g=this._lineOffsets,S=u(T.text,!1,k);if(m-j===S.length)for(var $=0,X=S.length;$<X;$++)g[$+j+1]=S[$];else S.length<1e4?g.splice.apply(g,Wh([j+1,m-j],S,!1)):this._lineOffsets=g=g.slice(0,j+1).concat(S,g.slice(m+1));var oe=T.text.length-(L-k);if(oe!==0)for(var $=j+1+S.length,X=g.length;$<X;$++)g[$]=g[$]+oe}else if(d.isFull(T))this._content=T.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=y},d.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=u(this._content,!0)),this._lineOffsets},d.prototype.positionAt=function(p){p=Math.max(Math.min(p,this._content.length),0);var y=this.getLineOffsets(),D=0,_=y.length;if(_===0)return{line:0,character:p};for(;D<_;){var T=Math.floor((D+_)/2);y[T]>p?_=T:D=T+1}var M=D-1;return{line:M,character:p-y[M]}},d.prototype.offsetAt=function(p){var y=this.getLineOffsets();if(p.line>=y.length)return this._content.length;if(p.line<0)return 0;var D=y[p.line],_=p.line+1<y.length?y[p.line+1]:this._content.length;return Math.max(Math.min(D+p.character,_),D)},Object.defineProperty(d.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),d.isIncremental=function(p){var y=p;return y!=null&&typeof y.text=="string"&&y.range!==void 0&&(y.rangeLength===void 0||typeof y.rangeLength=="number")},d.isFull=function(p){var y=p;return y!=null&&typeof y.text=="string"&&y.range===void 0&&y.rangeLength===void 0},d}(),r;(function(d){function p(_,T,M,k){return new n(_,T,M,k)}d.create=p;function y(_,T,M){if(_ instanceof n)return _.update(T,M),_;throw new Error("TextDocument.update: document must be created by TextDocument.create")}d.update=y;function D(_,T){for(var M=_.getText(),k=i(T.map(w),function(X,oe){var Ee=X.range.start.line-oe.range.start.line;return Ee===0?X.range.start.character-oe.range.start.character:Ee}),L=0,j=[],m=0,g=k;m<g.length;m++){var S=g[m],$=_.offsetAt(S.range.start);if($<L)throw new Error("Overlapping edit");$>L&&j.push(M.substring(L,$)),S.newText.length&&j.push(S.newText),L=_.offsetAt(S.range.end)}return j.push(M.substr(L)),j.join("")}d.applyEdits=D})(r=e.TextDocument||(e.TextDocument={}));function i(d,p){if(d.length<=1)return d;var y=d.length/2|0,D=d.slice(0,y),_=d.slice(y);i(D,p),i(_,p);for(var T=0,M=0,k=0;T<D.length&&M<_.length;){var L=p(D[T],_[M]);L<=0?d[k++]=D[T++]:d[k++]=_[M++]}for(;T<D.length;)d[k++]=D[T++];for(;M<_.length;)d[k++]=_[M++];return d}function u(d,p,y){y===void 0&&(y=0);for(var D=p?[y]:[],_=0;_<d.length;_++){var T=d.charCodeAt(_);(T===13||T===10)&&(T===13&&_+1<d.length&&d.charCodeAt(_+1)===10&&_++,D.push(y+_+1))}return D}function R(d){var p=d.start,y=d.end;return p.line>y.line||p.line===y.line&&p.character>y.character?{start:y,end:p}:d}function w(d){var p=R(d.range);return p!==d.range?{newText:d.newText,range:p}:d}})});var Mc=F(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.isErrnoException=dn.isErrorCodeException=void 0;var cs={string:!0,undefined:!0},Hh={number:!0,undefined:!0};function Uh(t){return!t||typeof t!="object"?!1:typeof t.code=="string"}dn.isErrorCodeException=Uh;function $h(t){if(!t||typeof t!="object")return!1;let e=t;return typeof e.name=="string"&&typeof e.message=="string"&&typeof e.errno in Hh&&typeof e.code in cs&&typeof e.path in cs&&typeof e.stack in cs}dn.isErrnoException=$h});var Nc=F(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.LogFileConnection=fn.LogFile=void 0;var zh=require("fs"),Kr=class{constructor(e){this.filename=e,this._buffer=[],this.pfh=zh.promises.open(e,"a").then(n=>this.fh=n).catch(n=>(console.error(this._error=n),void 0))}onReady(){return this.pfh.then(e=>!!(e&&this.fh)).catch(()=>!1)}getError(){return this._error}isReady(){return!!this.fh}log(e){return this._log("LOG",e),this}info(e){return this._log("INF",e),this}warn(e){return this._log("WRN",e),this}error(e){return this._log("ERR",e),this}close(){return this.fh=void 0,this.pfh.then(e=>e?.close()).catch(e=>console.error(e))}_log(e,n){let r=`${new Date().toISOString()} ${e}: `,i=" ".repeat(r.length),u=n.split(`
`).join(`
`+i);this._buffer.push(`${r}${u}
`),this.process()}process(){this._pending||(this._pending=this._processAsync())}async _processAsync(){let e=await this.pfh;for(let n=this._buffer;n.length;n=this._buffer){this._buffer=[];try{await e?.writeFile(n.join(""))}catch(r){this._error=r}}this._pending=void 0}};fn.LogFile=Kr;var us=class{constructor(e){this.filename=e,this.onExitHandlers=[],this.console=new Kr(e)}onExit(e){this.onExitHandlers.push(e)}async close(){this.notifyOnExit(),await this.console.close()}notifyOnExit(){for(let e of this.onExitHandlers)try{e()}catch(n){console.error(n)}}};fn.LogFileConnection=us});var Oc=F((Hn,ls)=>{(function(t,e){if(typeof Hn=="object"&&typeof ls=="object")ls.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof Hn=="object"?Hn:t)[r]=n[r]}})(Hn,()=>(()=>{"use strict";var t={470:i=>{function u(d){if(typeof d!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(d))}function R(d,p){for(var y,D="",_=0,T=-1,M=0,k=0;k<=d.length;++k){if(k<d.length)y=d.charCodeAt(k);else{if(y===47)break;y=47}if(y===47){if(!(T===k-1||M===1))if(T!==k-1&&M===2){if(D.length<2||_!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var L=D.lastIndexOf("/");if(L!==D.length-1){L===-1?(D="",_=0):_=(D=D.slice(0,L)).length-1-D.lastIndexOf("/"),T=k,M=0;continue}}else if(D.length===2||D.length===1){D="",_=0,T=k,M=0;continue}}p&&(D.length>0?D+="/..":D="..",_=2)}else D.length>0?D+="/"+d.slice(T+1,k):D=d.slice(T+1,k),_=k-T-1;T=k,M=0}else y===46&&M!==-1?++M:M=-1}return D}var w={resolve:function(){for(var d,p="",y=!1,D=arguments.length-1;D>=-1&&!y;D--){var _;D>=0?_=arguments[D]:(d===void 0&&(d=process.cwd()),_=d),u(_),_.length!==0&&(p=_+"/"+p,y=_.charCodeAt(0)===47)}return p=R(p,!y),y?p.length>0?"/"+p:"/":p.length>0?p:"."},normalize:function(d){if(u(d),d.length===0)return".";var p=d.charCodeAt(0)===47,y=d.charCodeAt(d.length-1)===47;return(d=R(d,!p)).length!==0||p||(d="."),d.length>0&&y&&(d+="/"),p?"/"+d:d},isAbsolute:function(d){return u(d),d.length>0&&d.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var d,p=0;p<arguments.length;++p){var y=arguments[p];u(y),y.length>0&&(d===void 0?d=y:d+="/"+y)}return d===void 0?".":w.normalize(d)},relative:function(d,p){if(u(d),u(p),d===p||(d=w.resolve(d))===(p=w.resolve(p)))return"";for(var y=1;y<d.length&&d.charCodeAt(y)===47;++y);for(var D=d.length,_=D-y,T=1;T<p.length&&p.charCodeAt(T)===47;++T);for(var M=p.length-T,k=_<M?_:M,L=-1,j=0;j<=k;++j){if(j===k){if(M>k){if(p.charCodeAt(T+j)===47)return p.slice(T+j+1);if(j===0)return p.slice(T+j)}else _>k&&(d.charCodeAt(y+j)===47?L=j:j===0&&(L=0));break}var m=d.charCodeAt(y+j);if(m!==p.charCodeAt(T+j))break;m===47&&(L=j)}var g="";for(j=y+L+1;j<=D;++j)j!==D&&d.charCodeAt(j)!==47||(g.length===0?g+="..":g+="/..");return g.length>0?g+p.slice(T+L):(T+=L,p.charCodeAt(T)===47&&++T,p.slice(T))},_makeLong:function(d){return d},dirname:function(d){if(u(d),d.length===0)return".";for(var p=d.charCodeAt(0),y=p===47,D=-1,_=!0,T=d.length-1;T>=1;--T)if((p=d.charCodeAt(T))===47){if(!_){D=T;break}}else _=!1;return D===-1?y?"/":".":y&&D===1?"//":d.slice(0,D)},basename:function(d,p){if(p!==void 0&&typeof p!="string")throw new TypeError('"ext" argument must be a string');u(d);var y,D=0,_=-1,T=!0;if(p!==void 0&&p.length>0&&p.length<=d.length){if(p.length===d.length&&p===d)return"";var M=p.length-1,k=-1;for(y=d.length-1;y>=0;--y){var L=d.charCodeAt(y);if(L===47){if(!T){D=y+1;break}}else k===-1&&(T=!1,k=y+1),M>=0&&(L===p.charCodeAt(M)?--M==-1&&(_=y):(M=-1,_=k))}return D===_?_=k:_===-1&&(_=d.length),d.slice(D,_)}for(y=d.length-1;y>=0;--y)if(d.charCodeAt(y)===47){if(!T){D=y+1;break}}else _===-1&&(T=!1,_=y+1);return _===-1?"":d.slice(D,_)},extname:function(d){u(d);for(var p=-1,y=0,D=-1,_=!0,T=0,M=d.length-1;M>=0;--M){var k=d.charCodeAt(M);if(k!==47)D===-1&&(_=!1,D=M+1),k===46?p===-1?p=M:T!==1&&(T=1):p!==-1&&(T=-1);else if(!_){y=M+1;break}}return p===-1||D===-1||T===0||T===1&&p===D-1&&p===y+1?"":d.slice(p,D)},format:function(d){if(d===null||typeof d!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof d);return function(p,y){var D=y.dir||y.root,_=y.base||(y.name||"")+(y.ext||"");return D?D===y.root?D+_:D+"/"+_:_}(0,d)},parse:function(d){u(d);var p={root:"",dir:"",base:"",ext:"",name:""};if(d.length===0)return p;var y,D=d.charCodeAt(0),_=D===47;_?(p.root="/",y=1):y=0;for(var T=-1,M=0,k=-1,L=!0,j=d.length-1,m=0;j>=y;--j)if((D=d.charCodeAt(j))!==47)k===-1&&(L=!1,k=j+1),D===46?T===-1?T=j:m!==1&&(m=1):T!==-1&&(m=-1);else if(!L){M=j+1;break}return T===-1||k===-1||m===0||m===1&&T===k-1&&T===M+1?k!==-1&&(p.base=p.name=M===0&&_?d.slice(1,k):d.slice(M,k)):(M===0&&_?(p.name=d.slice(1,T),p.base=d.slice(1,k)):(p.name=d.slice(M,T),p.base=d.slice(M,k)),p.ext=d.slice(T,k)),M>0?p.dir=d.slice(0,M-1):_&&(p.dir="/"),p},sep:"/",delimiter:":",win32:null,posix:null};w.posix=w,i.exports=w},674:(i,u)=>{if(Object.defineProperty(u,"__esModule",{value:!0}),u.isWindows=void 0,typeof process=="object")u.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var R=navigator.userAgent;u.isWindows=R.indexOf("Windows")>=0}},796:function(i,u,R){var w,d,p=this&&this.__extends||(w=function(N,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,W){I.__proto__=W}||function(I,W){for(var re in W)Object.prototype.hasOwnProperty.call(W,re)&&(I[re]=W[re])},w(N,E)},function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function I(){this.constructor=N}w(N,E),N.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)});Object.defineProperty(u,"__esModule",{value:!0}),u.uriToFsPath=u.URI=void 0;var y=R(674),D=/^\w[\w\d+.-]*$/,_=/^\//,T=/^\/\//;function M(N,E){if(!N.scheme&&E)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(N.authority,'", path: "').concat(N.path,'", query: "').concat(N.query,'", fragment: "').concat(N.fragment,'"}'));if(N.scheme&&!D.test(N.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(N.path){if(N.authority){if(!_.test(N.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(T.test(N.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var k="",L="/",j=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,m=function(){function N(E,I,W,re,ee,V){V===void 0&&(V=!1),typeof E=="object"?(this.scheme=E.scheme||k,this.authority=E.authority||k,this.path=E.path||k,this.query=E.query||k,this.fragment=E.fragment||k):(this.scheme=function(Ce,Se){return Ce||Se?Ce:"file"}(E,V),this.authority=I||k,this.path=function(Ce,Se){switch(Ce){case"https":case"http":case"file":Se?Se[0]!==L&&(Se=L+Se):Se=L}return Se}(this.scheme,W||k),this.query=re||k,this.fragment=ee||k,M(this,V))}return N.isUri=function(E){return E instanceof N||!!E&&typeof E.authority=="string"&&typeof E.fragment=="string"&&typeof E.path=="string"&&typeof E.query=="string"&&typeof E.scheme=="string"&&typeof E.fsPath=="string"&&typeof E.with=="function"&&typeof E.toString=="function"},Object.defineProperty(N.prototype,"fsPath",{get:function(){return Ee(this,!1)},enumerable:!1,configurable:!0}),N.prototype.with=function(E){if(!E)return this;var I=E.scheme,W=E.authority,re=E.path,ee=E.query,V=E.fragment;return I===void 0?I=this.scheme:I===null&&(I=k),W===void 0?W=this.authority:W===null&&(W=k),re===void 0?re=this.path:re===null&&(re=k),ee===void 0?ee=this.query:ee===null&&(ee=k),V===void 0?V=this.fragment:V===null&&(V=k),I===this.scheme&&W===this.authority&&re===this.path&&ee===this.query&&V===this.fragment?this:new S(I,W,re,ee,V)},N.parse=function(E,I){I===void 0&&(I=!1);var W=j.exec(E);return W?new S(W[2]||k,ke(W[4]||k),ke(W[5]||k),ke(W[7]||k),ke(W[9]||k),I):new S(k,k,k,k,k)},N.file=function(E){var I=k;if(y.isWindows&&(E=E.replace(/\\/g,L)),E[0]===L&&E[1]===L){var W=E.indexOf(L,2);W===-1?(I=E.substring(2),E=L):(I=E.substring(2,W),E=E.substring(W)||L)}return new S("file",I,E,k,k)},N.from=function(E){var I=new S(E.scheme,E.authority,E.path,E.query,E.fragment);return M(I,!0),I},N.prototype.toString=function(E){return E===void 0&&(E=!1),ut(this,E)},N.prototype.toJSON=function(){return this},N.revive=function(E){if(E){if(E instanceof N)return E;var I=new S(E);return I._formatted=E.external,I._fsPath=E._sep===g?E.fsPath:null,I}return E},N}();u.URI=m;var g=y.isWindows?1:void 0,S=function(N){function E(){var I=N!==null&&N.apply(this,arguments)||this;return I._formatted=null,I._fsPath=null,I}return p(E,N),Object.defineProperty(E.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=Ee(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),E.prototype.toString=function(I){return I===void 0&&(I=!1),I?ut(this,!0):(this._formatted||(this._formatted=ut(this,!1)),this._formatted)},E.prototype.toJSON=function(){var I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=g),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I},E}(m),$=((d={})[58]="%3A",d[47]="%2F",d[63]="%3F",d[35]="%23",d[91]="%5B",d[93]="%5D",d[64]="%40",d[33]="%21",d[36]="%24",d[38]="%26",d[39]="%27",d[40]="%28",d[41]="%29",d[42]="%2A",d[43]="%2B",d[44]="%2C",d[59]="%3B",d[61]="%3D",d[32]="%20",d);function X(N,E,I){for(var W=void 0,re=-1,ee=0;ee<N.length;ee++){var V=N.charCodeAt(ee);if(V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===45||V===46||V===95||V===126||E&&V===47||I&&V===91||I&&V===93||I&&V===58)re!==-1&&(W+=encodeURIComponent(N.substring(re,ee)),re=-1),W!==void 0&&(W+=N.charAt(ee));else{W===void 0&&(W=N.substr(0,ee));var Ce=$[V];Ce!==void 0?(re!==-1&&(W+=encodeURIComponent(N.substring(re,ee)),re=-1),W+=Ce):re===-1&&(re=ee)}}return re!==-1&&(W+=encodeURIComponent(N.substring(re))),W!==void 0?W:N}function oe(N){for(var E=void 0,I=0;I<N.length;I++){var W=N.charCodeAt(I);W===35||W===63?(E===void 0&&(E=N.substr(0,I)),E+=$[W]):E!==void 0&&(E+=N[I])}return E!==void 0?E:N}function Ee(N,E){var I;return I=N.authority&&N.path.length>1&&N.scheme==="file"?"//".concat(N.authority).concat(N.path):N.path.charCodeAt(0)===47&&(N.path.charCodeAt(1)>=65&&N.path.charCodeAt(1)<=90||N.path.charCodeAt(1)>=97&&N.path.charCodeAt(1)<=122)&&N.path.charCodeAt(2)===58?E?N.path.substr(1):N.path[1].toLowerCase()+N.path.substr(2):N.path,y.isWindows&&(I=I.replace(/\//g,"\\")),I}function ut(N,E){var I=E?oe:X,W="",re=N.scheme,ee=N.authority,V=N.path,Ce=N.query,Se=N.fragment;if(re&&(W+=re,W+=":"),(ee||re==="file")&&(W+=L,W+=L),ee){var Ie=ee.indexOf("@");if(Ie!==-1){var wt=ee.substr(0,Ie);ee=ee.substr(Ie+1),(Ie=wt.lastIndexOf(":"))===-1?W+=I(wt,!1,!1):(W+=I(wt.substr(0,Ie),!1,!1),W+=":",W+=I(wt.substr(Ie+1),!1,!0)),W+="@"}(Ie=(ee=ee.toLowerCase()).lastIndexOf(":"))===-1?W+=I(ee,!1,!0):(W+=I(ee.substr(0,Ie),!1,!0),W+=ee.substr(Ie))}if(V){if(V.length>=3&&V.charCodeAt(0)===47&&V.charCodeAt(2)===58)(Xe=V.charCodeAt(1))>=65&&Xe<=90&&(V="/".concat(String.fromCharCode(Xe+32),":").concat(V.substr(3)));else if(V.length>=2&&V.charCodeAt(1)===58){var Xe;(Xe=V.charCodeAt(0))>=65&&Xe<=90&&(V="".concat(String.fromCharCode(Xe+32),":").concat(V.substr(2)))}W+=I(V,!0,!1)}return Ce&&(W+="?",W+=I(Ce,!1,!1)),Se&&(W+="#",W+=E?Se:X(Se,!1,!1)),W}function lt(N){try{return decodeURIComponent(N)}catch{return N.length>3?N.substr(0,3)+lt(N.substr(3)):N}}u.uriToFsPath=Ee;var dt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ke(N){return N.match(dt)?N.replace(dt,function(E){return lt(E)}):N}},679:function(i,u,R){var w=this&&this.__spreadArray||function(_,T,M){if(M||arguments.length===2)for(var k,L=0,j=T.length;L<j;L++)!k&&L in T||(k||(k=Array.prototype.slice.call(T,0,L)),k[L]=T[L]);return _.concat(k||Array.prototype.slice.call(T))};Object.defineProperty(u,"__esModule",{value:!0}),u.Utils=void 0;var d,p=R(470),y=p.posix||p,D="/";(d=u.Utils||(u.Utils={})).joinPath=function(_){for(var T=[],M=1;M<arguments.length;M++)T[M-1]=arguments[M];return _.with({path:y.join.apply(y,w([_.path],T,!1))})},d.resolvePath=function(_){for(var T=[],M=1;M<arguments.length;M++)T[M-1]=arguments[M];var k=_.path,L=!1;k[0]!==D&&(k=D+k,L=!0);var j=y.resolve.apply(y,w([k],T,!1));return L&&j[0]===D&&!_.authority&&(j=j.substring(1)),_.with({path:j})},d.dirname=function(_){if(_.path.length===0||_.path===D)return _;var T=y.dirname(_.path);return T.length===1&&T.charCodeAt(0)===46&&(T=""),_.with({path:T})},d.basename=function(_){return y.basename(_.path)},d.extname=function(_){return y.extname(_.path)}}},e={};function n(i){var u=e[i];if(u!==void 0)return u.exports;var R=e[i]={exports:{}};return t[i].call(R.exports,R,R.exports,n),R.exports}var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=i.URI=void 0;var u=n(796);Object.defineProperty(i,"URI",{enumerable:!0,get:function(){return u.URI}});var R=n(679);Object.defineProperty(i,"Utils",{enumerable:!0,get:function(){return R.Utils}})})(),r})())});var Ac=F(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.uriToName=ge.cleanUri=ge.relativeToFile=ge.relativeTo=ge.toFileUri=ge.toUri=ge.isSupportedDoc=ge.isSupportedUri=ge.setOfSupportedSchemes=ge.supportedSchemes=void 0;var ds=Oc();ge.supportedSchemes=["gist","repo","file","sftp","untitled"];ge.setOfSupportedSchemes=new Set(ge.supportedSchemes);function xc(t){return!!t&&ge.setOfSupportedSchemes.has(t.scheme)}ge.isSupportedUri=xc;function Bh(t){return!!t&&!t.isClosed&&xc(t.uri)}ge.isSupportedDoc=Bh;var Vh=/^[\w.-]{2,}:/;function Gh(t){return jc(t||void 0)}ge.toUri=Gh;function jc(t){return typeof t=="string"?Vh.test(t)?ds.URI.parse(t):ds.URI.file(t):t}ge.toFileUri=jc;function Ic(t,e){let n=fs(t),r=fs(e),i=0;for(i=0;i<n.length&&i<r.length&&n[i]===r[i];++i);return("../".repeat(n.length-i)+r.slice(i).join("/")).replace(/\/$/,"")}ge.relativeTo=Ic;function Jh(t,e){return Ic(ds.Utils.dirname(t),e)}ge.relativeToFile=Jh;function Fc(t){return t.with({fragment:"",query:""})}ge.cleanUri=Fc;function Kh(t,e=2){return fs(t).slice(-e).join("/")}ge.uriToName=Kh;function fs(t){return Fc(t).toString().split("/").filter(e=>!!e)}});var Wc=F(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.setIfDefined=_e.pick=_e.capitalize=_e.textToWords=_e.escapeRegExp=_e.mustBeDefined=_e.isDefined=_e.freqCount=_e.uniqueFilter=_e.unique=void 0;function Xh(t){return[...new Set(t)]}_e.unique=Xh;function Qh(t){let e=new Set;return t?n=>{let r=t(n);return!e.has(r)&&(e.add(r),!0)}:n=>!e.has(n)&&(e.add(n),!0)}_e.uniqueFilter=Qh;function Yh(t){let e=new Map;return t.forEach(n=>e.set(n,(e.get(n)||0)+1)),[...e.entries()]}_e.freqCount=Yh;function Lc(t){return t!=null}_e.isDefined=Lc;function Zh(t){if(Lc(t))return t;throw new Error("Value must be defined.")}_e.mustBeDefined=Zh;function eg(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}_e.escapeRegExp=eg;function tg(t){let e=/^[\p{L}\w'-]+$/u,n=/(?<![\p{L}\w'-])(?=[\p{L}\w'-])|(?<=[\p{L}\w'-])(?![\p{L}\w'-])/gu;return t.normalize("NFC").split(n).filter(u=>e.test(u))}_e.textToWords=tg;function ng(t){return t.slice(0,1).toUpperCase()+t.slice(1)}_e.capitalize=ng;function rg(t,e){let n={};for(let r of e)n[r]=t[r];return n}_e.pick=rg;function ig(t,e,n){return n!==void 0&&(t[e]=n),t}_e.setIfDefined=ig});var Hc=F(ct=>{"use strict";var og=ct&&ct.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hs=ct&&ct.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&og(e,t,n)};Object.defineProperty(ct,"__esModule",{value:!0});ct.LogFileConnection=void 0;hs(Mc(),ct);var sg=Nc();Object.defineProperty(ct,"LogFileConnection",{enumerable:!0,get:function(){return sg.LogFileConnection}});hs(Ac(),ct);hs(Wc(),ct)});var hn=yn(fi()),xt=yn(Sc()),Gc=yn(Ec());var Qr=yn(Hc()),Uc=yn(fi()),$c=require("regexp-worker"),zc=require("util"),Xr=class{constructor(e=2e3){this.dispose=()=>this.worker.dispose();this.worker=new $c.RegExpWorker(e)}async matchPatternsInText(e,n,r){let i=hg(e,r),u=_g(i);return cg(this.worker,n,u).then(R=>ag(R,i))}};function ag(t,e){let n=new Map(t.map(u=>[u.regexp.toString(),u]));function r(u){return n.get(u.toString())||{regexp:u,message:"not found",elapsedTimeMs:0}}return e.map(u=>({name:u.name,matches:u.regexp.map(r)}))}function cg(t,e,n){return ug(t,e,n).catch(r=>Vc(r)?lg(t,e,n):Promise.reject(r))}function ug(t,e,n){return t.matchRegExpArray(e,n).then(r=>r.results.map((i,u)=>Bc(i,n[u])))}function lg(t,e,n){let r=n.map(i=>dg(t,e,i));return Promise.all(r)}function Bc(t,e){return{regexp:e,ranges:[...t.ranges],elapsedTimeMs:t.elapsedTimeMs}}function dg(t,e,n){return t.matchRegExp(e,n).then(r=>Bc(r,n)).catch(r=>fg(n,r))}function fg(t,e){return Vc(e)?{...e,regexp:t}:Promise.reject(e)}function Vc(t){return!!t&&typeof t=="object"&&"message"in t&&typeof t.message=="string"&&"elapsedTimeMs"in t&&typeof t.elapsedTimeMs=="number"}function hg(t,e){let n=yg(e);return t.map(i=>gg(i,n))}function gg(t,e){return pg(t)?mg(t):e.get(t)||e.get(t.toLowerCase())||{name:t,regexp:[Un(t,"g")].filter(Qr.isDefined)}}function pg(t){return typeof t!="string"}function mg(t){let{name:e,pattern:n}=t,r=(typeof n=="string"?[Un(n)]:n.map(i=>Un(i))).filter(Qr.isDefined);return{name:e,regexp:r}}function yg(t){let e=t.patterns?.map(vg)||[],n=e.map(i=>[i.name.toLowerCase(),i]),r=e.map(i=>[i.regexp.map(u=>u.toString()).join(","),i]);return new Map(n.concat(r))}function vg(t){let{name:e,pattern:n}=t,r=(Array.isArray(n)?n.map(i=>Un(i)):[Un(n)]).filter(Qr.isDefined);return{name:e,regexp:r}}function Un(t,e){try{if(bg(t))return t;let n=t.match(/^\/(.*)\/([gimsuy]*)$/);return n?new RegExp(n[1],n[2]||void 0):new RegExp(t,e)}catch(n){(0,Uc.logError)((0,zc.format)(n))}}function bg(t){return t instanceof RegExp}function*Rg(t){for(let e of t)yield*e}function _g(t){let e=t.map(r=>r.regexp.map(i=>[i.toString(),i]));return[...new Map(Rg(e)).values()]}(0,hn.log)("Starting Pattern Matcher Server");function Jc(){let t=[],e={matchPatternsInDocument:u};(0,hn.log)("Create Connection");let n=(0,xt.createConnection)(xt.ProposedFeatures.all),r=new xt.TextDocuments(Gc.TextDocument),i=new Xr;n.onInitialize(R=>((0,hn.log)("onInitialize"),(0,hn.setWorkspaceBase)(R.workspaceFolders?.[0].uri??""),{capabilities:{textDocumentSync:{openClose:!0,change:xt.TextDocumentSyncKind.Incremental,willSave:!0,save:{includeText:!0}}}}));async function u(R){let{uri:w,patterns:d,settings:p}=R,y=w&&r.get(w);if(!y)return{uri:w,version:-1,patternMatches:[],message:"Document not found."};let D=y.getText(),_=y.version,T=await i.matchPatternsInText(d,D,p),M={ranges:[],message:void 0};function k(m){let{elapsedTimeMs:g,message:S,regexp:$,ranges:X}={...M,...m};return{regexp:$.toString(),elapsedTime:g,matches:X,errorMessage:S}}function L(m){return{name:m.name,defs:m.matches.map(k)}}let j=T.map(L);return{uri:w,version:_,patternMatches:j}}Object.entries(e).forEach(([R,w])=>{n.onRequest(R,w)}),r.listen(n),t.push(i),n.onShutdown(()=>{t.forEach(R=>R.dispose()),t.length=0}),n.listen()}process.on("unhandledRejection",t=>{console.log("unhandledRejection",t)});process.on("uncaughtException",t=>{console.log("uncaughtException",t)});Jc();
//# sourceMappingURL=main.cjs.map
