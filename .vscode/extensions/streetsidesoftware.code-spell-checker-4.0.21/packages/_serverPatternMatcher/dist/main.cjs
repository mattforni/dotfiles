"use strict";var id=Object.create;var vs=Object.defineProperty;var od=Object.getOwnPropertyDescriptor;var sd=Object.getOwnPropertyNames;var ad=Object.getPrototypeOf,cd=Object.prototype.hasOwnProperty;var k=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ud=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of sd(t))!cd.call(e,i)&&i!==n&&vs(e,i,{get:()=>t[i],enumerable:!(r=od(t,i))||r.enumerable});return e};var ld=(e,t,n)=>(n=e!=null?id(ad(e)):{},ud(t||!e||!e.__esModule?vs(n,"default",{value:e,enumerable:!0}):n,e));var zn=k(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.thenable=fe.typedArray=fe.stringArray=fe.array=fe.func=fe.error=fe.number=fe.string=fe.boolean=void 0;function yd(e){return e===!0||e===!1}fe.boolean=yd;function ws(e){return typeof e=="string"||e instanceof String}fe.string=ws;function vd(e){return typeof e=="number"||e instanceof Number}fe.number=vd;function bd(e){return e instanceof Error}fe.error=bd;function Ts(e){return typeof e=="function"}fe.func=Ts;function Cs(e){return Array.isArray(e)}fe.array=Cs;function _d(e){return Cs(e)&&e.every(t=>ws(t))}fe.stringArray=_d;function Rd(e,t){return Array.isArray(e)&&e.every(t)}fe.typedArray=Rd;function Dd(e){return e&&Ts(e.then)}fe.thenable=Dd});var It=k(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function Pd(e){return e===!0||e===!1}ve.boolean=Pd;function ks(e){return typeof e=="string"||e instanceof String}ve.string=ks;function wd(e){return typeof e=="number"||e instanceof Number}ve.number=wd;function Td(e){return e instanceof Error}ve.error=Td;function Cd(e){return typeof e=="function"}ve.func=Cd;function qs(e){return Array.isArray(e)}ve.array=qs;function kd(e){return qs(e)&&e.every(t=>ks(t))}ve.stringArray=kd});var Ii=k(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var Rt=It(),fi;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(fi||(M.ErrorCodes=fi={}));var hi=class e extends Error{constructor(t,n,r){super(n),this.code=Rt.number(t)?t:fi.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};M.ResponseError=hi;var Pe=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};M.ParameterStructures=Pe;Pe.auto=new Pe("auto");Pe.byPosition=new Pe("byPosition");Pe.byName=new Pe("byName");var ee=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return Pe.auto}};M.AbstractMessageSignature=ee;var gi=class extends ee{constructor(t){super(t,0)}};M.RequestType0=gi;var pi=class extends ee{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=pi;var mi=class extends ee{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=mi;var yi=class extends ee{constructor(t){super(t,2)}};M.RequestType2=yi;var vi=class extends ee{constructor(t){super(t,3)}};M.RequestType3=vi;var bi=class extends ee{constructor(t){super(t,4)}};M.RequestType4=bi;var _i=class extends ee{constructor(t){super(t,5)}};M.RequestType5=_i;var Ri=class extends ee{constructor(t){super(t,6)}};M.RequestType6=Ri;var Di=class extends ee{constructor(t){super(t,7)}};M.RequestType7=Di;var Pi=class extends ee{constructor(t){super(t,8)}};M.RequestType8=Pi;var wi=class extends ee{constructor(t){super(t,9)}};M.RequestType9=wi;var Ti=class extends ee{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Ti;var Ci=class extends ee{constructor(t){super(t,0)}};M.NotificationType0=Ci;var ki=class extends ee{constructor(t,n=Pe.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=ki;var qi=class extends ee{constructor(t){super(t,2)}};M.NotificationType2=qi;var Si=class extends ee{constructor(t){super(t,3)}};M.NotificationType3=Si;var Ei=class extends ee{constructor(t){super(t,4)}};M.NotificationType4=Ei;var Mi=class extends ee{constructor(t){super(t,5)}};M.NotificationType5=Mi;var xi=class extends ee{constructor(t){super(t,6)}};M.NotificationType6=xi;var Oi=class extends ee{constructor(t){super(t,7)}};M.NotificationType7=Oi;var Ni=class extends ee{constructor(t){super(t,8)}};M.NotificationType8=Ni;var ji=class extends ee{constructor(t){super(t,9)}};M.NotificationType9=ji;var Ss;(function(e){function t(i){let c=i;return c&&Rt.string(c.method)&&(Rt.string(c.id)||Rt.number(c.id))}e.isRequest=t;function n(i){let c=i;return c&&Rt.string(c.method)&&i.id===void 0}e.isNotification=n;function r(i){let c=i;return c&&(c.result!==void 0||!!c.error)&&(Rt.string(c.id)||Rt.number(c.id)||c.id===null)}e.isResponse=r})(Ss||(M.Message=Ss={}))});var Li=k(it=>{"use strict";var Es;Object.defineProperty(it,"__esModule",{value:!0});it.LRUCache=it.LinkedMap=it.Touch=void 0;var be;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(be||(it.Touch=be={}));var Bn=class{constructor(){this[Es]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=be.None){let r=this._map.get(t);if(r)return n!==be.None&&this.touch(r,n),r.value}set(t,n,r=be.None){let i=this._map.get(t);if(i)i.value=n,r!==be.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case be.None:this.addItemLast(i);break;case be.First:this.addItemFirst(i);break;case be.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Es=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==be.First&&n!==be.Last)){if(n===be.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===be.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};it.LinkedMap=Bn;var Fi=class extends Bn{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=be.AsNew){return super.get(t,n)}peek(t){return super.get(t,be.None)}set(t,n){return super.set(t,n,be.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};it.LRUCache=Fi});var xs=k(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.Disposable=void 0;var Ms;(function(e){function t(n){return{dispose:n}}e.create=t})(Ms||(Vn.Disposable=Ms={}))});var ot=k(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var Ai;function Wi(){if(Ai===void 0)throw new Error("No runtime abstraction layer installed");return Ai}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ai=n}e.install=t})(Wi||(Wi={}));Hi.default=Wi});var Lt=k(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.Emitter=Ft.Event=void 0;var qd=ot(),Os;(function(e){let t={dispose(){}};e.None=function(){return t}})(Os||(Ft.Event=Os={}));var Ui=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,c=this._callbacks.length;i<c;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let c=0,h=r.length;c<h;c++)try{n.push(r[c].apply(i[c],t))}catch(b){(0,qd.default)().console.error(b)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Gn=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new Ui),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ft.Emitter=Gn;Gn._noop=function(){}});var Qn=k(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.CancellationTokenSource=At.CancellationToken=void 0;var Sd=ot(),Ed=It(),$i=Lt(),Jn;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:$i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:$i.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||Ed.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(Jn||(At.CancellationToken=Jn={}));var Md=Object.freeze(function(e,t){let n=(0,Sd.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),Xn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Md:(this._emitter||(this._emitter=new $i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},zi=class{get token(){return this._token||(this._token=new Xn),this._token}cancel(){this._token?this._token.cancel():this._token=Jn.Cancelled}dispose(){this._token?this._token instanceof Xn&&this._token.dispose():this._token=Jn.None}};At.CancellationTokenSource=zi});var Ns=k(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.SharedArrayReceiverStrategy=Wt.SharedArraySenderStrategy=void 0;var xd=Qn(),fn;(function(e){e.Continue=0,e.Cancelled=1})(fn||(fn={}));var Bi=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=fn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,fn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};Wt.SharedArraySenderStrategy=Bi;var Vi=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===fn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Gi=class{constructor(t){this.token=new Vi(t)}cancel(){}dispose(){}},Ji=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new xd.CancellationTokenSource:new Gi(n)}};Wt.SharedArrayReceiverStrategy=Ji});var Qi=k(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Semaphore=void 0;var Od=ot(),Xi=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Od.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};Yn.Semaphore=Xi});var Is=k(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.ReadableStreamMessageReader=st.AbstractMessageReader=st.MessageReader=void 0;var Ki=ot(),Ht=It(),Yi=Lt(),Nd=Qi(),js;(function(e){function t(n){let r=n;return r&&Ht.func(r.listen)&&Ht.func(r.dispose)&&Ht.func(r.onError)&&Ht.func(r.onClose)&&Ht.func(r.onPartialMessage)}e.is=t})(js||(st.MessageReader=js={}));var Kn=class{constructor(){this.errorEmitter=new Yi.Emitter,this.closeEmitter=new Yi.Emitter,this.partialMessageEmitter=new Yi.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Ht.string(t.message)?t.message:"unknown"}`)}};st.AbstractMessageReader=Kn;var Zi;(function(e){function t(n){let r,i,c,h=new Map,b,S=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,h.set(c.name,c)),n.contentDecoders!==void 0)for(let C of n.contentDecoders)h.set(C.name,C);if(n.contentTypeDecoder!==void 0&&(b=n.contentTypeDecoder,S.set(b.name,b)),n.contentTypeDecoders!==void 0)for(let C of n.contentTypeDecoders)S.set(C.name,C)}return b===void 0&&(b=(0,Ki.default)().applicationJson.decoder,S.set(b.name,b)),{charset:r,contentDecoder:c,contentDecoders:h,contentTypeDecoder:b,contentTypeDecoders:S}}e.fromOptions=t})(Zi||(Zi={}));var eo=class extends Kn{constructor(t,n){super(),this.readable=t,this.options=Zi.fromOptions(n),this.buffer=(0,Ki.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Nd.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let c=parseInt(i);if(isNaN(c)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Ki.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};st.ReadableStreamMessageReader=eo});var Hs=k(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.WriteableStreamMessageWriter=at.AbstractMessageWriter=at.MessageWriter=void 0;var Fs=ot(),hn=It(),jd=Qi(),Ls=Lt(),Id="Content-Length: ",As=`\r
`,Ws;(function(e){function t(n){let r=n;return r&&hn.func(r.dispose)&&hn.func(r.onClose)&&hn.func(r.onError)&&hn.func(r.write)}e.is=t})(Ws||(at.MessageWriter=Ws={}));var Zn=class{constructor(){this.errorEmitter=new Ls.Emitter,this.closeEmitter=new Ls.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${hn.string(t.message)?t.message:"unknown"}`)}};at.AbstractMessageWriter=Zn;var to;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Fs.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Fs.default)().applicationJson.encoder}}e.fromOptions=t})(to||(to={}));var no=class extends Zn{constructor(t,n){super(),this.writable=t,this.options=to.fromOptions(n),this.errorCount=0,this.writeSemaphore=new jd.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Id,r.byteLength.toString(),As),i.push(As),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};at.WriteableStreamMessageWriter=no});var Us=k(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.AbstractMessageBuffer=void 0;var Fd=13,Ld=10,Ad=`\r
`,ro=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,c=0;e:for(;r<this._chunks.length;){let C=this._chunks[r];for(i=0;i<C.length;){switch(C[i]){case Fd:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Ld:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}c+=C.byteLength,r++}if(n!==4)return;let h=this._read(c+i),b=new Map,S=this.toString(h,"ascii").split(Ad);if(S.length<2)return b;for(let C=0;C<S.length-2;C++){let E=S[C],x=E.indexOf(":");if(x===-1)throw new Error(`Message header must separate key and value using ':'
${E}`);let N=E.substr(0,x),re=E.substr(x+1).trim();b.set(t?N.toLowerCase():N,re)}return b}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let c=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(c)}if(this._chunks[0].byteLength>t){let c=this._chunks[0],h=this.asNative(c,t);return this._chunks[0]=c.slice(t),this._totalLength-=t,h}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let c=this._chunks[i];if(c.byteLength>t){let h=c.slice(0,t);n.set(h,r),r+=t,this._chunks[i]=c.slice(t),this._totalLength-=t,t-=t}else n.set(c,r),r+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,t-=c.byteLength}return n}};er.AbstractMessageBuffer=ro});var Gs=k(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.createMessageConnection=L.ConnectionOptions=L.MessageStrategy=L.CancellationStrategy=L.CancellationSenderStrategy=L.CancellationReceiverStrategy=L.RequestCancellationReceiverStrategy=L.IdCancellationReceiverStrategy=L.ConnectionStrategy=L.ConnectionError=L.ConnectionErrors=L.LogTraceNotification=L.SetTraceNotification=L.TraceFormat=L.TraceValues=L.Trace=L.NullLogger=L.ProgressType=L.ProgressToken=void 0;var $s=ot(),ie=It(),O=Ii(),zs=Li(),gn=Lt(),io=Qn(),yn;(function(e){e.type=new O.NotificationType("$/cancelRequest")})(yn||(yn={}));var oo;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(oo||(L.ProgressToken=oo={}));var pn;(function(e){e.type=new O.NotificationType("$/progress")})(pn||(pn={}));var so=class{constructor(){}};L.ProgressType=so;var ao;(function(e){function t(n){return ie.func(n)}e.is=t})(ao||(ao={}));L.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var V;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(V||(L.Trace=V={}));var Bs;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(Bs||(L.TraceValues=Bs={}));(function(e){function t(r){if(!ie.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(V||(L.Trace=V={}));var Se;(function(e){e.Text="text",e.JSON="json"})(Se||(L.TraceFormat=Se={}));(function(e){function t(n){return ie.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Se||(L.TraceFormat=Se={}));var co;(function(e){e.type=new O.NotificationType("$/setTrace")})(co||(L.SetTraceNotification=co={}));var tr;(function(e){e.type=new O.NotificationType("$/logTrace")})(tr||(L.LogTraceNotification=tr={}));var mn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(mn||(L.ConnectionErrors=mn={}));var Ut=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};L.ConnectionError=Ut;var uo;(function(e){function t(n){let r=n;return r&&ie.func(r.cancelUndispatched)}e.is=t})(uo||(L.ConnectionStrategy=uo={}));var nr;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&ie.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ie.func(r.dispose))}e.is=t})(nr||(L.IdCancellationReceiverStrategy=nr={}));var lo;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&ie.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ie.func(r.dispose))}e.is=t})(lo||(L.RequestCancellationReceiverStrategy=lo={}));var rr;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new io.CancellationTokenSource}});function t(n){return nr.is(n)||lo.is(n)}e.is=t})(rr||(L.CancellationReceiverStrategy=rr={}));var ir;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(yn.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ie.func(r.sendCancellation)&&ie.func(r.cleanup)}e.is=t})(ir||(L.CancellationSenderStrategy=ir={}));var or;(function(e){e.Message=Object.freeze({receiver:rr.Message,sender:ir.Message});function t(n){let r=n;return r&&rr.is(r.receiver)&&ir.is(r.sender)}e.is=t})(or||(L.CancellationStrategy=or={}));var sr;(function(e){function t(n){let r=n;return r&&ie.func(r.handleMessage)}e.is=t})(sr||(L.MessageStrategy=sr={}));var Vs;(function(e){function t(n){let r=n;return r&&(or.is(r.cancellationStrategy)||uo.is(r.connectionStrategy)||sr.is(r.messageStrategy))}e.is=t})(Vs||(L.ConnectionOptions=Vs={}));var He;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(He||(He={}));function Wd(e,t,n,r){let i=n!==void 0?n:L.NullLogger,c=0,h=0,b=0,S="2.0",C,E=new Map,x,N=new Map,re=new Map,me,oe=new zs.LinkedMap,le=new Map,$=new Set,y=new Map,m=V.Off,P=Se.Text,I,J=He.New,se=new gn.Emitter,Fe=new gn.Emitter,yt=new gn.Emitter,tt=new gn.Emitter,nt=new gn.Emitter,De=r&&r.cancellationStrategy?r.cancellationStrategy:or.Message;function St(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function Et(l){return l===null?"res-unknown-"+(++b).toString():"res-"+l.toString()}function kn(){return"not-"+(++h).toString()}function di(l,_){O.Message.isRequest(_)?l.set(St(_.id),_):O.Message.isResponse(_)?l.set(Et(_.id),_):l.set(kn(),_)}function qn(l){}function on(){return J===He.Listening}function vt(){return J===He.Closed}function Je(){return J===He.Disposed}function Mt(){(J===He.New||J===He.Listening)&&(J=He.Closed,Fe.fire(void 0))}function bt(l){se.fire([l,void 0,void 0])}function Sn(l){se.fire(l)}e.onClose(Mt),e.onError(bt),t.onClose(Mt),t.onError(Sn);function sn(){me||oe.size===0||(me=(0,$s.default)().timer.setImmediate(()=>{me=void 0,En()}))}function an(l){O.Message.isRequest(l)?xn(l):O.Message.isNotification(l)?Nn(l):O.Message.isResponse(l)?On(l):xt(l)}function En(){if(oe.size===0)return;let l=oe.shift();try{let _=r?.messageStrategy;sr.is(_)?_.handleMessage(l,an):an(l)}finally{sn()}}let Mn=l=>{try{if(O.Message.isNotification(l)&&l.method===yn.type.method){let _=l.params.id,w=St(_),q=oe.get(w);if(O.Message.isRequest(q)){let G=r?.connectionStrategy,Z=G&&G.cancelUndispatched?G.cancelUndispatched(q,qn):void 0;if(Z&&(Z.error!==void 0||Z.result!==void 0)){oe.delete(w),y.delete(_),Z.id=q.id,_t(Z,l.method,Date.now()),t.write(Z).catch(()=>i.error("Sending response for canceled message failed."));return}}let X=y.get(_);if(X!==void 0){X.cancel(),Ot(l);return}else $.add(_)}di(oe,l)}finally{sn()}};function xn(l){if(Je())return;function _(W,Q,z){let ae={jsonrpc:S,id:l.id};W instanceof O.ResponseError?ae.error=W.toJson():ae.result=W===void 0?null:W,_t(ae,Q,z),t.write(ae).catch(()=>i.error("Sending response failed."))}function w(W,Q,z){let ae={jsonrpc:S,id:l.id,error:W.toJson()};_t(ae,Q,z),t.write(ae).catch(()=>i.error("Sending response failed."))}function q(W,Q,z){W===void 0&&(W=null);let ae={jsonrpc:S,id:l.id,result:W};_t(ae,Q,z),t.write(ae).catch(()=>i.error("Sending response failed."))}Fn(l);let X=E.get(l.method),G,Z;X&&(G=X.type,Z=X.handler);let te=Date.now();if(Z||C){let W=l.id??String(Date.now()),Q=nr.is(De.receiver)?De.receiver.createCancellationTokenSource(W):De.receiver.createCancellationTokenSource(l);l.id!==null&&$.has(l.id)&&Q.cancel(),l.id!==null&&y.set(W,Q);try{let z;if(Z)if(l.params===void 0){if(G!==void 0&&G.numberOfParams!==0){w(new O.ResponseError(O.ErrorCodes.InvalidParams,`Request ${l.method} defines ${G.numberOfParams} params but received none.`),l.method,te);return}z=Z(Q.token)}else if(Array.isArray(l.params)){if(G!==void 0&&G.parameterStructures===O.ParameterStructures.byName){w(new O.ResponseError(O.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,te);return}z=Z(...l.params,Q.token)}else{if(G!==void 0&&G.parameterStructures===O.ParameterStructures.byPosition){w(new O.ResponseError(O.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,te);return}z=Z(l.params,Q.token)}else C&&(z=C(l.method,l.params,Q.token));let ae=z;z?ae.then?ae.then(ge=>{y.delete(W),_(ge,l.method,te)},ge=>{y.delete(W),ge instanceof O.ResponseError?w(ge,l.method,te):ge&&ie.string(ge.message)?w(new O.ResponseError(O.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${ge.message}`),l.method,te):w(new O.ResponseError(O.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,te)}):(y.delete(W),_(z,l.method,te)):(y.delete(W),q(z,l.method,te))}catch(z){y.delete(W),z instanceof O.ResponseError?_(z,l.method,te):z&&ie.string(z.message)?w(new O.ResponseError(O.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${z.message}`),l.method,te):w(new O.ResponseError(O.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,te)}}else w(new O.ResponseError(O.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,te)}function On(l){if(!Je())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=l.id,w=le.get(_);if(Ln(l,w),w!==void 0){le.delete(_);try{if(l.error){let q=l.error;w.reject(new O.ResponseError(q.code,q.message,q.data))}else if(l.result!==void 0)w.resolve(l.result);else throw new Error("Should never happen.")}catch(q){q.message?i.error(`Response handler '${w.method}' failed with message: ${q.message}`):i.error(`Response handler '${w.method}' failed unexpectedly.`)}}}}function Nn(l){if(Je())return;let _,w;if(l.method===yn.type.method){let q=l.params.id;$.delete(q),Ot(l);return}else{let q=N.get(l.method);q&&(w=q.handler,_=q.type)}if(w||x)try{if(Ot(l),w)if(l.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==O.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received none.`),w();else if(Array.isArray(l.params)){let q=l.params;l.method===pn.type.method&&q.length===2&&oo.is(q[0])?w({token:q[0],value:q[1]}):(_!==void 0&&(_.parameterStructures===O.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),_.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received ${q.length} arguments`)),w(...q))}else _!==void 0&&_.parameterStructures===O.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),w(l.params);else x&&x(l.method,l.params)}catch(q){q.message?i.error(`Notification handler '${l.method}' failed with message: ${q.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else yt.fire(l)}function xt(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let _=l;if(ie.string(_.id)||ie.number(_.id)){let w=_.id,q=le.get(w);q&&q.reject(new Error("The received response has neither a result nor an error property."))}}function Le(l){if(l!=null)switch(m){case V.Verbose:return JSON.stringify(l,null,4);case V.Compact:return JSON.stringify(l);default:return}}function jn(l){if(!(m===V.Off||!I))if(P===Se.Text){let _;(m===V.Verbose||m===V.Compact)&&l.params&&(_=`Params: ${Le(l.params)}

`),I.log(`Sending request '${l.method} - (${l.id})'.`,_)}else Xe("send-request",l)}function In(l){if(!(m===V.Off||!I))if(P===Se.Text){let _;(m===V.Verbose||m===V.Compact)&&(l.params?_=`Params: ${Le(l.params)}

`:_=`No parameters provided.

`),I.log(`Sending notification '${l.method}'.`,_)}else Xe("send-notification",l)}function _t(l,_,w){if(!(m===V.Off||!I))if(P===Se.Text){let q;(m===V.Verbose||m===V.Compact)&&(l.error&&l.error.data?q=`Error data: ${Le(l.error.data)}

`:l.result?q=`Result: ${Le(l.result)}

`:l.error===void 0&&(q=`No result returned.

`)),I.log(`Sending response '${_} - (${l.id})'. Processing request took ${Date.now()-w}ms`,q)}else Xe("send-response",l)}function Fn(l){if(!(m===V.Off||!I))if(P===Se.Text){let _;(m===V.Verbose||m===V.Compact)&&l.params&&(_=`Params: ${Le(l.params)}

`),I.log(`Received request '${l.method} - (${l.id})'.`,_)}else Xe("receive-request",l)}function Ot(l){if(!(m===V.Off||!I||l.method===tr.type.method))if(P===Se.Text){let _;(m===V.Verbose||m===V.Compact)&&(l.params?_=`Params: ${Le(l.params)}

`:_=`No parameters provided.

`),I.log(`Received notification '${l.method}'.`,_)}else Xe("receive-notification",l)}function Ln(l,_){if(!(m===V.Off||!I))if(P===Se.Text){let w;if((m===V.Verbose||m===V.Compact)&&(l.error&&l.error.data?w=`Error data: ${Le(l.error.data)}

`:l.result?w=`Result: ${Le(l.result)}

`:l.error===void 0&&(w=`No result returned.

`)),_){let q=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";I.log(`Received response '${_.method} - (${l.id})' in ${Date.now()-_.timerStart}ms.${q}`,w)}else I.log(`Received response ${l.id} without active response promise.`,w)}else Xe("receive-response",l)}function Xe(l,_){if(!I||m===V.Off)return;let w={isLSPMessage:!0,type:l,message:_,timestamp:Date.now()};I.log(w)}function rt(){if(vt())throw new Ut(mn.Closed,"Connection is closed.");if(Je())throw new Ut(mn.Disposed,"Connection is disposed.")}function An(){if(on())throw new Ut(mn.AlreadyListening,"Connection is already listening")}function Wn(){if(!on())throw new Error("Call listen() first.")}function ze(l){return l===void 0?null:l}function cn(l){if(l!==null)return l}function un(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function Nt(l,_){switch(l){case O.ParameterStructures.auto:return un(_)?cn(_):[ze(_)];case O.ParameterStructures.byName:if(!un(_))throw new Error("Received parameters by name but param is not an object literal.");return cn(_);case O.ParameterStructures.byPosition:return[ze(_)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function ln(l,_){let w,q=l.numberOfParams;switch(q){case 0:w=void 0;break;case 1:w=Nt(l.parameterStructures,_[0]);break;default:w=[];for(let X=0;X<_.length&&X<q;X++)w.push(ze(_[X]));if(_.length<q)for(let X=_.length;X<q;X++)w.push(null);break}return w}let Qe={sendNotification:(l,..._)=>{rt();let w,q;if(ie.string(l)){w=l;let G=_[0],Z=0,te=O.ParameterStructures.auto;O.ParameterStructures.is(G)&&(Z=1,te=G);let W=_.length,Q=W-Z;switch(Q){case 0:q=void 0;break;case 1:q=Nt(te,_[Z]);break;default:if(te===O.ParameterStructures.byName)throw new Error(`Received ${Q} parameters for 'by Name' notification parameter structure.`);q=_.slice(Z,W).map(z=>ze(z));break}}else{let G=_;w=l.method,q=ln(l,G)}let X={jsonrpc:S,method:w,params:q};return In(X),t.write(X).catch(G=>{throw i.error("Sending notification failed."),G})},onNotification:(l,_)=>{rt();let w;return ie.func(l)?x=l:_&&(ie.string(l)?(w=l,N.set(l,{type:void 0,handler:_})):(w=l.method,N.set(l.method,{type:l,handler:_}))),{dispose:()=>{w!==void 0?N.delete(w):x=void 0}}},onProgress:(l,_,w)=>{if(re.has(_))throw new Error(`Progress handler for token ${_} already registered`);return re.set(_,w),{dispose:()=>{re.delete(_)}}},sendProgress:(l,_,w)=>Qe.sendNotification(pn.type,{token:_,value:w}),onUnhandledProgress:tt.event,sendRequest:(l,..._)=>{rt(),Wn();let w,q,X;if(ie.string(l)){w=l;let W=_[0],Q=_[_.length-1],z=0,ae=O.ParameterStructures.auto;O.ParameterStructures.is(W)&&(z=1,ae=W);let ge=_.length;io.CancellationToken.is(Q)&&(ge=ge-1,X=Q);let qe=ge-z;switch(qe){case 0:q=void 0;break;case 1:q=Nt(ae,_[z]);break;default:if(ae===O.ParameterStructures.byName)throw new Error(`Received ${qe} parameters for 'by Name' request parameter structure.`);q=_.slice(z,ge).map(Hn=>ze(Hn));break}}else{let W=_;w=l.method,q=ln(l,W);let Q=l.numberOfParams;X=io.CancellationToken.is(W[Q])?W[Q]:void 0}let G=c++,Z;X&&(Z=X.onCancellationRequested(()=>{let W=De.sender.sendCancellation(Qe,G);return W===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${G}`),Promise.resolve()):W.catch(()=>{i.log(`Sending cancellation messages for id ${G} failed`)})}));let te={jsonrpc:S,id:G,method:w,params:q};return jn(te),typeof De.sender.enableCancellation=="function"&&De.sender.enableCancellation(te),new Promise(async(W,Q)=>{let z=qe=>{W(qe),De.sender.cleanup(G),Z?.dispose()},ae=qe=>{Q(qe),De.sender.cleanup(G),Z?.dispose()},ge={method:w,timerStart:Date.now(),resolve:z,reject:ae};try{await t.write(te),le.set(G,ge)}catch(qe){throw i.error("Sending request failed."),ge.reject(new O.ResponseError(O.ErrorCodes.MessageWriteError,qe.message?qe.message:"Unknown reason")),qe}})},onRequest:(l,_)=>{rt();let w=null;return ao.is(l)?(w=void 0,C=l):ie.string(l)?(w=null,_!==void 0&&(w=l,E.set(l,{handler:_,type:void 0}))):_!==void 0&&(w=l.method,E.set(l.method,{type:l,handler:_})),{dispose:()=>{w!==null&&(w!==void 0?E.delete(w):C=void 0)}}},hasPendingResponse:()=>le.size>0,trace:async(l,_,w)=>{let q=!1,X=Se.Text;w!==void 0&&(ie.boolean(w)?q=w:(q=w.sendNotification||!1,X=w.traceFormat||Se.Text)),m=l,P=X,m===V.Off?I=void 0:I=_,q&&!vt()&&!Je()&&await Qe.sendNotification(co.type,{value:V.toString(l)})},onError:se.event,onClose:Fe.event,onUnhandledNotification:yt.event,onDispose:nt.event,end:()=>{t.end()},dispose:()=>{if(Je())return;J=He.Disposed,nt.fire(void 0);let l=new O.ResponseError(O.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of le.values())_.reject(l);le=new Map,y=new Map,$=new Set,oe=new zs.LinkedMap,ie.func(t.dispose)&&t.dispose(),ie.func(e.dispose)&&e.dispose()},listen:()=>{rt(),An(),J=He.Listening,e.listen(Mn)},inspect:()=>{(0,$s.default)().console.log("inspect")}};return Qe.onNotification(tr.type,l=>{if(m===V.Off||!I)return;let _=m===V.Verbose||m===V.Compact;I.log(l.message,_?l.verbose:void 0)}),Qe.onNotification(pn.type,l=>{let _=re.get(l.token);_?_(l.value):tt.fire(l)}),Qe}L.createMessageConnection=Wd});var ar=k(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.ProgressType=v.ProgressToken=v.createMessageConnection=v.NullLogger=v.ConnectionOptions=v.ConnectionStrategy=v.AbstractMessageBuffer=v.WriteableStreamMessageWriter=v.AbstractMessageWriter=v.MessageWriter=v.ReadableStreamMessageReader=v.AbstractMessageReader=v.MessageReader=v.SharedArrayReceiverStrategy=v.SharedArraySenderStrategy=v.CancellationToken=v.CancellationTokenSource=v.Emitter=v.Event=v.Disposable=v.LRUCache=v.Touch=v.LinkedMap=v.ParameterStructures=v.NotificationType9=v.NotificationType8=v.NotificationType7=v.NotificationType6=v.NotificationType5=v.NotificationType4=v.NotificationType3=v.NotificationType2=v.NotificationType1=v.NotificationType0=v.NotificationType=v.ErrorCodes=v.ResponseError=v.RequestType9=v.RequestType8=v.RequestType7=v.RequestType6=v.RequestType5=v.RequestType4=v.RequestType3=v.RequestType2=v.RequestType1=v.RequestType0=v.RequestType=v.Message=v.RAL=void 0;v.MessageStrategy=v.CancellationStrategy=v.CancellationSenderStrategy=v.CancellationReceiverStrategy=v.ConnectionError=v.ConnectionErrors=v.LogTraceNotification=v.SetTraceNotification=v.TraceFormat=v.TraceValues=v.Trace=void 0;var K=Ii();Object.defineProperty(v,"Message",{enumerable:!0,get:function(){return K.Message}});Object.defineProperty(v,"RequestType",{enumerable:!0,get:function(){return K.RequestType}});Object.defineProperty(v,"RequestType0",{enumerable:!0,get:function(){return K.RequestType0}});Object.defineProperty(v,"RequestType1",{enumerable:!0,get:function(){return K.RequestType1}});Object.defineProperty(v,"RequestType2",{enumerable:!0,get:function(){return K.RequestType2}});Object.defineProperty(v,"RequestType3",{enumerable:!0,get:function(){return K.RequestType3}});Object.defineProperty(v,"RequestType4",{enumerable:!0,get:function(){return K.RequestType4}});Object.defineProperty(v,"RequestType5",{enumerable:!0,get:function(){return K.RequestType5}});Object.defineProperty(v,"RequestType6",{enumerable:!0,get:function(){return K.RequestType6}});Object.defineProperty(v,"RequestType7",{enumerable:!0,get:function(){return K.RequestType7}});Object.defineProperty(v,"RequestType8",{enumerable:!0,get:function(){return K.RequestType8}});Object.defineProperty(v,"RequestType9",{enumerable:!0,get:function(){return K.RequestType9}});Object.defineProperty(v,"ResponseError",{enumerable:!0,get:function(){return K.ResponseError}});Object.defineProperty(v,"ErrorCodes",{enumerable:!0,get:function(){return K.ErrorCodes}});Object.defineProperty(v,"NotificationType",{enumerable:!0,get:function(){return K.NotificationType}});Object.defineProperty(v,"NotificationType0",{enumerable:!0,get:function(){return K.NotificationType0}});Object.defineProperty(v,"NotificationType1",{enumerable:!0,get:function(){return K.NotificationType1}});Object.defineProperty(v,"NotificationType2",{enumerable:!0,get:function(){return K.NotificationType2}});Object.defineProperty(v,"NotificationType3",{enumerable:!0,get:function(){return K.NotificationType3}});Object.defineProperty(v,"NotificationType4",{enumerable:!0,get:function(){return K.NotificationType4}});Object.defineProperty(v,"NotificationType5",{enumerable:!0,get:function(){return K.NotificationType5}});Object.defineProperty(v,"NotificationType6",{enumerable:!0,get:function(){return K.NotificationType6}});Object.defineProperty(v,"NotificationType7",{enumerable:!0,get:function(){return K.NotificationType7}});Object.defineProperty(v,"NotificationType8",{enumerable:!0,get:function(){return K.NotificationType8}});Object.defineProperty(v,"NotificationType9",{enumerable:!0,get:function(){return K.NotificationType9}});Object.defineProperty(v,"ParameterStructures",{enumerable:!0,get:function(){return K.ParameterStructures}});var fo=Li();Object.defineProperty(v,"LinkedMap",{enumerable:!0,get:function(){return fo.LinkedMap}});Object.defineProperty(v,"LRUCache",{enumerable:!0,get:function(){return fo.LRUCache}});Object.defineProperty(v,"Touch",{enumerable:!0,get:function(){return fo.Touch}});var Hd=xs();Object.defineProperty(v,"Disposable",{enumerable:!0,get:function(){return Hd.Disposable}});var Js=Lt();Object.defineProperty(v,"Event",{enumerable:!0,get:function(){return Js.Event}});Object.defineProperty(v,"Emitter",{enumerable:!0,get:function(){return Js.Emitter}});var Xs=Qn();Object.defineProperty(v,"CancellationTokenSource",{enumerable:!0,get:function(){return Xs.CancellationTokenSource}});Object.defineProperty(v,"CancellationToken",{enumerable:!0,get:function(){return Xs.CancellationToken}});var Qs=Ns();Object.defineProperty(v,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Qs.SharedArraySenderStrategy}});Object.defineProperty(v,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Qs.SharedArrayReceiverStrategy}});var ho=Is();Object.defineProperty(v,"MessageReader",{enumerable:!0,get:function(){return ho.MessageReader}});Object.defineProperty(v,"AbstractMessageReader",{enumerable:!0,get:function(){return ho.AbstractMessageReader}});Object.defineProperty(v,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return ho.ReadableStreamMessageReader}});var go=Hs();Object.defineProperty(v,"MessageWriter",{enumerable:!0,get:function(){return go.MessageWriter}});Object.defineProperty(v,"AbstractMessageWriter",{enumerable:!0,get:function(){return go.AbstractMessageWriter}});Object.defineProperty(v,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return go.WriteableStreamMessageWriter}});var Ud=Us();Object.defineProperty(v,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Ud.AbstractMessageBuffer}});var ye=Gs();Object.defineProperty(v,"ConnectionStrategy",{enumerable:!0,get:function(){return ye.ConnectionStrategy}});Object.defineProperty(v,"ConnectionOptions",{enumerable:!0,get:function(){return ye.ConnectionOptions}});Object.defineProperty(v,"NullLogger",{enumerable:!0,get:function(){return ye.NullLogger}});Object.defineProperty(v,"createMessageConnection",{enumerable:!0,get:function(){return ye.createMessageConnection}});Object.defineProperty(v,"ProgressToken",{enumerable:!0,get:function(){return ye.ProgressToken}});Object.defineProperty(v,"ProgressType",{enumerable:!0,get:function(){return ye.ProgressType}});Object.defineProperty(v,"Trace",{enumerable:!0,get:function(){return ye.Trace}});Object.defineProperty(v,"TraceValues",{enumerable:!0,get:function(){return ye.TraceValues}});Object.defineProperty(v,"TraceFormat",{enumerable:!0,get:function(){return ye.TraceFormat}});Object.defineProperty(v,"SetTraceNotification",{enumerable:!0,get:function(){return ye.SetTraceNotification}});Object.defineProperty(v,"LogTraceNotification",{enumerable:!0,get:function(){return ye.LogTraceNotification}});Object.defineProperty(v,"ConnectionErrors",{enumerable:!0,get:function(){return ye.ConnectionErrors}});Object.defineProperty(v,"ConnectionError",{enumerable:!0,get:function(){return ye.ConnectionError}});Object.defineProperty(v,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ye.CancellationReceiverStrategy}});Object.defineProperty(v,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ye.CancellationSenderStrategy}});Object.defineProperty(v,"CancellationStrategy",{enumerable:!0,get:function(){return ye.CancellationStrategy}});Object.defineProperty(v,"MessageStrategy",{enumerable:!0,get:function(){return ye.MessageStrategy}});var $d=ot();v.RAL=$d.default});var Zs=k(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});var Ys=require("util"),Ze=ar(),cr=class e extends Ze.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new Ys.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};cr.emptyBuffer=Buffer.allocUnsafe(0);var po=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ze.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ze.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ze.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Ze.Disposable.create(()=>this.stream.off("data",t))}},mo=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ze.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ze.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ze.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let c=h=>{h==null?r():i(h)};typeof t=="string"?this.stream.write(t,n,c):this.stream.write(t,c)})}end(){this.stream.end()}},Ks=Object.freeze({messageBuffer:Object.freeze({create:e=>new cr(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new Ys.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new po(e),asWritableStream:e=>new mo(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function yo(){return Ks}(function(e){function t(){Ze.RAL.install(Ks)}e.install=t})(yo||(yo={}));vo.default=yo});var wt=k(U=>{"use strict";var zd=U&&U.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Bd=U&&U.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&zd(t,e,n)};Object.defineProperty(U,"__esModule",{value:!0});U.createMessageConnection=U.createServerSocketTransport=U.createClientSocketTransport=U.createServerPipeTransport=U.createClientPipeTransport=U.generateRandomPipeName=U.StreamMessageWriter=U.StreamMessageReader=U.SocketMessageWriter=U.SocketMessageReader=U.PortMessageWriter=U.PortMessageReader=U.IPCMessageWriter=U.IPCMessageReader=void 0;var $t=Zs();$t.default.install();var ea=require("path"),Vd=require("os"),Gd=require("crypto"),dr=require("net"),Ee=ar();Bd(ar(),U);var bo=class extends Ee.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Ee.Disposable.create(()=>this.process.off("message",t))}};U.IPCMessageReader=bo;var _o=class extends Ee.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};U.IPCMessageWriter=_o;var Ro=class extends Ee.AbstractMessageReader{constructor(t){super(),this.onData=new Ee.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};U.PortMessageReader=Ro;var Do=class extends Ee.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};U.PortMessageWriter=Do;var Dt=class extends Ee.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,$t.default)().stream.asReadableStream(t),n)}};U.SocketMessageReader=Dt;var Pt=class extends Ee.WriteableStreamMessageWriter{constructor(t,n){super((0,$t.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};U.SocketMessageWriter=Pt;var ur=class extends Ee.ReadableStreamMessageReader{constructor(t,n){super((0,$t.default)().stream.asReadableStream(t),n)}};U.StreamMessageReader=ur;var lr=class extends Ee.WriteableStreamMessageWriter{constructor(t,n){super((0,$t.default)().stream.asWritableStream(t),n)}};U.StreamMessageWriter=lr;var ta=process.env.XDG_RUNTIME_DIR,Jd=new Map([["linux",107],["darwin",103]]);function Xd(){let e=(0,Gd.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;ta?t=ea.join(ta,`vscode-ipc-${e}.sock`):t=ea.join(Vd.tmpdir(),`vscode-${e}.sock`);let n=Jd.get(process.platform);return n!==void 0&&t.length>n&&(0,$t.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}U.generateRandomPipeName=Xd;function Qd(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,dr.createServer)(b=>{h.close(),n([new Dt(b,t),new Pt(b,t)])});h.on("error",c),h.listen(e,()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}U.createClientPipeTransport=Qd;function Yd(e,t="utf-8"){let n=(0,dr.createConnection)(e);return[new Dt(n,t),new Pt(n,t)]}U.createServerPipeTransport=Yd;function Kd(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,dr.createServer)(b=>{h.close(),n([new Dt(b,t),new Pt(b,t)])});h.on("error",c),h.listen(e,"127.0.0.1",()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}U.createClientSocketTransport=Kd;function Zd(e,t="utf-8"){let n=(0,dr.createConnection)(e,"127.0.0.1");return[new Dt(n,t),new Pt(n,t)]}U.createServerSocketTransport=Zd;function ef(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function tf(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function nf(e,t,n,r){n||(n=Ee.NullLogger);let i=ef(e)?new ur(e):e,c=tf(t)?new lr(t):t;return Ee.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ee.createMessageConnection)(i,c,n,r)}U.createMessageConnection=nf});var Po=k((pg,na)=>{"use strict";na.exports=wt()});var hr=k((ra,fr)=>{(function(e){if(typeof fr=="object"&&typeof fr.exports=="object"){var t=e(require,ra);t!==void 0&&(fr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function d(f){return typeof f=="string"}s.is=d})(n||(t.DocumentUri=n={}));var r;(function(s){function d(f){return typeof f=="string"}s.is=d})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(i||(t.integer=i={}));var c;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(c||(t.uinteger=c={}));var h;(function(s){function d(a,o){return a===Number.MAX_VALUE&&(a=c.MAX_VALUE),o===Number.MAX_VALUE&&(o=c.MAX_VALUE),{line:a,character:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.uinteger(o.line)&&p.uinteger(o.character)}s.is=f})(h||(t.Position=h={}));var b;(function(s){function d(a,o,g,R){if(p.uinteger(a)&&p.uinteger(o)&&p.uinteger(g)&&p.uinteger(R))return{start:h.create(a,o),end:h.create(g,R)};if(h.is(a)&&h.is(o))return{start:a,end:o};throw new Error("Range#create called with invalid arguments[".concat(a,", ").concat(o,", ").concat(g,", ").concat(R,"]"))}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&h.is(o.start)&&h.is(o.end)}s.is=f})(b||(t.Range=b={}));var S;(function(s){function d(a,o){return{uri:a,range:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&b.is(o.range)&&(p.string(o.uri)||p.undefined(o.uri))}s.is=f})(S||(t.Location=S={}));var C;(function(s){function d(a,o,g,R){return{targetUri:a,targetRange:o,targetSelectionRange:g,originSelectionRange:R}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&b.is(o.targetRange)&&p.string(o.targetUri)&&b.is(o.targetSelectionRange)&&(b.is(o.originSelectionRange)||p.undefined(o.originSelectionRange))}s.is=f})(C||(t.LocationLink=C={}));var E;(function(s){function d(a,o,g,R){return{red:a,green:o,blue:g,alpha:R}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.numberRange(o.red,0,1)&&p.numberRange(o.green,0,1)&&p.numberRange(o.blue,0,1)&&p.numberRange(o.alpha,0,1)}s.is=f})(E||(t.Color=E={}));var x;(function(s){function d(a,o){return{range:a,color:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&b.is(o.range)&&E.is(o.color)}s.is=f})(x||(t.ColorInformation=x={}));var N;(function(s){function d(a,o,g){return{label:a,textEdit:o,additionalTextEdits:g}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.string(o.label)&&(p.undefined(o.textEdit)||I.is(o))&&(p.undefined(o.additionalTextEdits)||p.typedArray(o.additionalTextEdits,I.is))}s.is=f})(N||(t.ColorPresentation=N={}));var re;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(re||(t.FoldingRangeKind=re={}));var me;(function(s){function d(a,o,g,R,F,ce){var Y={startLine:a,endLine:o};return p.defined(g)&&(Y.startCharacter=g),p.defined(R)&&(Y.endCharacter=R),p.defined(F)&&(Y.kind=F),p.defined(ce)&&(Y.collapsedText=ce),Y}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.uinteger(o.startLine)&&p.uinteger(o.startLine)&&(p.undefined(o.startCharacter)||p.uinteger(o.startCharacter))&&(p.undefined(o.endCharacter)||p.uinteger(o.endCharacter))&&(p.undefined(o.kind)||p.string(o.kind))}s.is=f})(me||(t.FoldingRange=me={}));var oe;(function(s){function d(a,o){return{location:a,message:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&S.is(o.location)&&p.string(o.message)}s.is=f})(oe||(t.DiagnosticRelatedInformation=oe={}));var le;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(le||(t.DiagnosticSeverity=le={}));var $;(function(s){s.Unnecessary=1,s.Deprecated=2})($||(t.DiagnosticTag=$={}));var y;(function(s){function d(f){var a=f;return p.objectLiteral(a)&&p.string(a.href)}s.is=d})(y||(t.CodeDescription=y={}));var m;(function(s){function d(a,o,g,R,F,ce){var Y={range:a,message:o};return p.defined(g)&&(Y.severity=g),p.defined(R)&&(Y.code=R),p.defined(F)&&(Y.source=F),p.defined(ce)&&(Y.relatedInformation=ce),Y}s.create=d;function f(a){var o,g=a;return p.defined(g)&&b.is(g.range)&&p.string(g.message)&&(p.number(g.severity)||p.undefined(g.severity))&&(p.integer(g.code)||p.string(g.code)||p.undefined(g.code))&&(p.undefined(g.codeDescription)||p.string((o=g.codeDescription)===null||o===void 0?void 0:o.href))&&(p.string(g.source)||p.undefined(g.source))&&(p.undefined(g.relatedInformation)||p.typedArray(g.relatedInformation,oe.is))}s.is=f})(m||(t.Diagnostic=m={}));var P;(function(s){function d(a,o){for(var g=[],R=2;R<arguments.length;R++)g[R-2]=arguments[R];var F={title:a,command:o};return p.defined(g)&&g.length>0&&(F.arguments=g),F}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.title)&&p.string(o.command)}s.is=f})(P||(t.Command=P={}));var I;(function(s){function d(g,R){return{range:g,newText:R}}s.replace=d;function f(g,R){return{range:{start:g,end:g},newText:R}}s.insert=f;function a(g){return{range:g,newText:""}}s.del=a;function o(g){var R=g;return p.objectLiteral(R)&&p.string(R.newText)&&b.is(R.range)}s.is=o})(I||(t.TextEdit=I={}));var J;(function(s){function d(a,o,g){var R={label:a};return o!==void 0&&(R.needsConfirmation=o),g!==void 0&&(R.description=g),R}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&p.string(o.label)&&(p.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(p.string(o.description)||o.description===void 0)}s.is=f})(J||(t.ChangeAnnotation=J={}));var se;(function(s){function d(f){var a=f;return p.string(a)}s.is=d})(se||(t.ChangeAnnotationIdentifier=se={}));var Fe;(function(s){function d(g,R,F){return{range:g,newText:R,annotationId:F}}s.replace=d;function f(g,R,F){return{range:{start:g,end:g},newText:R,annotationId:F}}s.insert=f;function a(g,R){return{range:g,newText:"",annotationId:R}}s.del=a;function o(g){var R=g;return I.is(R)&&(J.is(R.annotationId)||se.is(R.annotationId))}s.is=o})(Fe||(t.AnnotatedTextEdit=Fe={}));var yt;(function(s){function d(a,o){return{textDocument:a,edits:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&vt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(yt||(t.TextDocumentEdit=yt={}));var tt;(function(s){function d(a,o,g){var R={kind:"create",uri:a};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(R.options=o),g!==void 0&&(R.annotationId=g),R}s.create=d;function f(a){var o=a;return o&&o.kind==="create"&&p.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||se.is(o.annotationId))}s.is=f})(tt||(t.CreateFile=tt={}));var nt;(function(s){function d(a,o,g,R){var F={kind:"rename",oldUri:a,newUri:o};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(F.options=g),R!==void 0&&(F.annotationId=R),F}s.create=d;function f(a){var o=a;return o&&o.kind==="rename"&&p.string(o.oldUri)&&p.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||p.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||p.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||se.is(o.annotationId))}s.is=f})(nt||(t.RenameFile=nt={}));var De;(function(s){function d(a,o,g){var R={kind:"delete",uri:a};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(R.options=o),g!==void 0&&(R.annotationId=g),R}s.create=d;function f(a){var o=a;return o&&o.kind==="delete"&&p.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||p.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||p.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||se.is(o.annotationId))}s.is=f})(De||(t.DeleteFile=De={}));var St;(function(s){function d(f){var a=f;return a&&(a.changes!==void 0||a.documentChanges!==void 0)&&(a.documentChanges===void 0||a.documentChanges.every(function(o){return p.string(o.kind)?tt.is(o)||nt.is(o)||De.is(o):yt.is(o)}))}s.is=d})(St||(t.WorkspaceEdit=St={}));var Et=function(){function s(d,f){this.edits=d,this.changeAnnotations=f}return s.prototype.insert=function(d,f,a){var o,g;if(a===void 0?o=I.insert(d,f):se.is(a)?(g=a,o=Fe.insert(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=Fe.insert(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.replace=function(d,f,a){var o,g;if(a===void 0?o=I.replace(d,f):se.is(a)?(g=a,o=Fe.replace(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=Fe.replace(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.delete=function(d,f){var a,o;if(f===void 0?a=I.del(d):se.is(f)?(o=f,a=Fe.del(d,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),a=Fe.del(d,o)),this.edits.push(a),o!==void 0)return o},s.prototype.add=function(d){this.edits.push(d)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(d){if(d===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s}(),kn=function(){function s(d){this._annotations=d===void 0?Object.create(null):d,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(d,f){var a;if(se.is(d)?a=d:(a=this.nextId(),f=d),this._annotations[a]!==void 0)throw new Error("Id ".concat(a," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(a));return this._annotations[a]=f,this._size++,a},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s}(),di=function(){function s(d){var f=this;this._textEditChanges=Object.create(null),d!==void 0?(this._workspaceEdit=d,d.documentChanges?(this._changeAnnotations=new kn(d.changeAnnotations),d.changeAnnotations=this._changeAnnotations.all(),d.documentChanges.forEach(function(a){if(yt.is(a)){var o=new Et(a.edits,f._changeAnnotations);f._textEditChanges[a.textDocument.uri]=o}})):d.changes&&Object.keys(d.changes).forEach(function(a){var o=new Et(d.changes[a]);f._textEditChanges[a]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(d){if(vt.is(d)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:d.uri,version:d.version},a=this._textEditChanges[f.uri];if(!a){var o=[],g={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(g),a=new Et(o,this._changeAnnotations),this._textEditChanges[f.uri]=a}return a}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var a=this._textEditChanges[d];if(!a){var o=[];this._workspaceEdit.changes[d]=o,a=new Et(o),this._textEditChanges[d]=a}return a}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new kn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;J.is(f)||se.is(f)?o=f:a=f;var g,R;if(o===void 0?g=tt.create(d,a):(R=se.is(o)?o:this._changeAnnotations.manage(o),g=tt.create(d,a,R)),this._workspaceEdit.documentChanges.push(g),R!==void 0)return R},s.prototype.renameFile=function(d,f,a,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;J.is(a)||se.is(a)?g=a:o=a;var R,F;if(g===void 0?R=nt.create(d,f,o):(F=se.is(g)?g:this._changeAnnotations.manage(g),R=nt.create(d,f,o,F)),this._workspaceEdit.documentChanges.push(R),F!==void 0)return F},s.prototype.deleteFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;J.is(f)||se.is(f)?o=f:a=f;var g,R;if(o===void 0?g=De.create(d,a):(R=se.is(o)?o:this._changeAnnotations.manage(o),g=De.create(d,a,R)),this._workspaceEdit.documentChanges.push(g),R!==void 0)return R},s}();t.WorkspaceChange=di;var qn;(function(s){function d(a){return{uri:a}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)}s.is=f})(qn||(t.TextDocumentIdentifier=qn={}));var on;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)&&p.integer(o.version)}s.is=f})(on||(t.VersionedTextDocumentIdentifier=on={}));var vt;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)&&(o.version===null||p.integer(o.version))}s.is=f})(vt||(t.OptionalVersionedTextDocumentIdentifier=vt={}));var Je;(function(s){function d(a,o,g,R){return{uri:a,languageId:o,version:g,text:R}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.string(o.uri)&&p.string(o.languageId)&&p.integer(o.version)&&p.string(o.text)}s.is=f})(Je||(t.TextDocumentItem=Je={}));var Mt;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function d(f){var a=f;return a===s.PlainText||a===s.Markdown}s.is=d})(Mt||(t.MarkupKind=Mt={}));var bt;(function(s){function d(f){var a=f;return p.objectLiteral(f)&&Mt.is(a.kind)&&p.string(a.value)}s.is=d})(bt||(t.MarkupContent=bt={}));var Sn;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(Sn||(t.CompletionItemKind=Sn={}));var sn;(function(s){s.PlainText=1,s.Snippet=2})(sn||(t.InsertTextFormat=sn={}));var an;(function(s){s.Deprecated=1})(an||(t.CompletionItemTag=an={}));var En;(function(s){function d(a,o,g){return{newText:a,insert:o,replace:g}}s.create=d;function f(a){var o=a;return o&&p.string(o.newText)&&b.is(o.insert)&&b.is(o.replace)}s.is=f})(En||(t.InsertReplaceEdit=En={}));var Mn;(function(s){s.asIs=1,s.adjustIndentation=2})(Mn||(t.InsertTextMode=Mn={}));var xn;(function(s){function d(f){var a=f;return a&&(p.string(a.detail)||a.detail===void 0)&&(p.string(a.description)||a.description===void 0)}s.is=d})(xn||(t.CompletionItemLabelDetails=xn={}));var On;(function(s){function d(f){return{label:f}}s.create=d})(On||(t.CompletionItem=On={}));var Nn;(function(s){function d(f,a){return{items:f||[],isIncomplete:!!a}}s.create=d})(Nn||(t.CompletionList=Nn={}));var xt;(function(s){function d(a){return a.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=d;function f(a){var o=a;return p.string(o)||p.objectLiteral(o)&&p.string(o.language)&&p.string(o.value)}s.is=f})(xt||(t.MarkedString=xt={}));var Le;(function(s){function d(f){var a=f;return!!a&&p.objectLiteral(a)&&(bt.is(a.contents)||xt.is(a.contents)||p.typedArray(a.contents,xt.is))&&(f.range===void 0||b.is(f.range))}s.is=d})(Le||(t.Hover=Le={}));var jn;(function(s){function d(f,a){return a?{label:f,documentation:a}:{label:f}}s.create=d})(jn||(t.ParameterInformation=jn={}));var In;(function(s){function d(f,a){for(var o=[],g=2;g<arguments.length;g++)o[g-2]=arguments[g];var R={label:f};return p.defined(a)&&(R.documentation=a),p.defined(o)?R.parameters=o:R.parameters=[],R}s.create=d})(In||(t.SignatureInformation=In={}));var _t;(function(s){s.Text=1,s.Read=2,s.Write=3})(_t||(t.DocumentHighlightKind=_t={}));var Fn;(function(s){function d(f,a){var o={range:f};return p.number(a)&&(o.kind=a),o}s.create=d})(Fn||(t.DocumentHighlight=Fn={}));var Ot;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(Ot||(t.SymbolKind=Ot={}));var Ln;(function(s){s.Deprecated=1})(Ln||(t.SymbolTag=Ln={}));var Xe;(function(s){function d(f,a,o,g,R){var F={name:f,kind:a,location:{uri:g,range:o}};return R&&(F.containerName=R),F}s.create=d})(Xe||(t.SymbolInformation=Xe={}));var rt;(function(s){function d(f,a,o,g){return g!==void 0?{name:f,kind:a,location:{uri:o,range:g}}:{name:f,kind:a,location:{uri:o}}}s.create=d})(rt||(t.WorkspaceSymbol=rt={}));var An;(function(s){function d(a,o,g,R,F,ce){var Y={name:a,detail:o,kind:g,range:R,selectionRange:F};return ce!==void 0&&(Y.children=ce),Y}s.create=d;function f(a){var o=a;return o&&p.string(o.name)&&p.number(o.kind)&&b.is(o.range)&&b.is(o.selectionRange)&&(o.detail===void 0||p.string(o.detail))&&(o.deprecated===void 0||p.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(An||(t.DocumentSymbol=An={}));var Wn;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})(Wn||(t.CodeActionKind=Wn={}));var ze;(function(s){s.Invoked=1,s.Automatic=2})(ze||(t.CodeActionTriggerKind=ze={}));var cn;(function(s){function d(a,o,g){var R={diagnostics:a};return o!=null&&(R.only=o),g!=null&&(R.triggerKind=g),R}s.create=d;function f(a){var o=a;return p.defined(o)&&p.typedArray(o.diagnostics,m.is)&&(o.only===void 0||p.typedArray(o.only,p.string))&&(o.triggerKind===void 0||o.triggerKind===ze.Invoked||o.triggerKind===ze.Automatic)}s.is=f})(cn||(t.CodeActionContext=cn={}));var un;(function(s){function d(a,o,g){var R={title:a},F=!0;return typeof o=="string"?(F=!1,R.kind=o):P.is(o)?R.command=o:R.edit=o,F&&g!==void 0&&(R.kind=g),R}s.create=d;function f(a){var o=a;return o&&p.string(o.title)&&(o.diagnostics===void 0||p.typedArray(o.diagnostics,m.is))&&(o.kind===void 0||p.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||P.is(o.command))&&(o.isPreferred===void 0||p.boolean(o.isPreferred))&&(o.edit===void 0||St.is(o.edit))}s.is=f})(un||(t.CodeAction=un={}));var Nt;(function(s){function d(a,o){var g={range:a};return p.defined(o)&&(g.data=o),g}s.create=d;function f(a){var o=a;return p.defined(o)&&b.is(o.range)&&(p.undefined(o.command)||P.is(o.command))}s.is=f})(Nt||(t.CodeLens=Nt={}));var ln;(function(s){function d(a,o){return{tabSize:a,insertSpaces:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&p.uinteger(o.tabSize)&&p.boolean(o.insertSpaces)}s.is=f})(ln||(t.FormattingOptions=ln={}));var Qe;(function(s){function d(a,o,g){return{range:a,target:o,data:g}}s.create=d;function f(a){var o=a;return p.defined(o)&&b.is(o.range)&&(p.undefined(o.target)||p.string(o.target))}s.is=f})(Qe||(t.DocumentLink=Qe={}));var l;(function(s){function d(a,o){return{range:a,parent:o}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&b.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(l||(t.SelectionRange=l={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_||(t.SemanticTokenTypes=_={}));var w;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(w||(t.SemanticTokenModifiers=w={}));var q;(function(s){function d(f){var a=f;return p.objectLiteral(a)&&(a.resultId===void 0||typeof a.resultId=="string")&&Array.isArray(a.data)&&(a.data.length===0||typeof a.data[0]=="number")}s.is=d})(q||(t.SemanticTokens=q={}));var X;(function(s){function d(a,o){return{range:a,text:o}}s.create=d;function f(a){var o=a;return o!=null&&b.is(o.range)&&p.string(o.text)}s.is=f})(X||(t.InlineValueText=X={}));var G;(function(s){function d(a,o,g){return{range:a,variableName:o,caseSensitiveLookup:g}}s.create=d;function f(a){var o=a;return o!=null&&b.is(o.range)&&p.boolean(o.caseSensitiveLookup)&&(p.string(o.variableName)||o.variableName===void 0)}s.is=f})(G||(t.InlineValueVariableLookup=G={}));var Z;(function(s){function d(a,o){return{range:a,expression:o}}s.create=d;function f(a){var o=a;return o!=null&&b.is(o.range)&&(p.string(o.expression)||o.expression===void 0)}s.is=f})(Z||(t.InlineValueEvaluatableExpression=Z={}));var te;(function(s){function d(a,o){return{frameId:a,stoppedLocation:o}}s.create=d;function f(a){var o=a;return p.defined(o)&&b.is(a.stoppedLocation)}s.is=f})(te||(t.InlineValueContext=te={}));var W;(function(s){s.Type=1,s.Parameter=2;function d(f){return f===1||f===2}s.is=d})(W||(t.InlayHintKind=W={}));var Q;(function(s){function d(a){return{value:a}}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&(o.tooltip===void 0||p.string(o.tooltip)||bt.is(o.tooltip))&&(o.location===void 0||S.is(o.location))&&(o.command===void 0||P.is(o.command))}s.is=f})(Q||(t.InlayHintLabelPart=Q={}));var z;(function(s){function d(a,o,g){var R={position:a,label:o};return g!==void 0&&(R.kind=g),R}s.create=d;function f(a){var o=a;return p.objectLiteral(o)&&h.is(o.position)&&(p.string(o.label)||p.typedArray(o.label,Q.is))&&(o.kind===void 0||W.is(o.kind))&&o.textEdits===void 0||p.typedArray(o.textEdits,I.is)&&(o.tooltip===void 0||p.string(o.tooltip)||bt.is(o.tooltip))&&(o.paddingLeft===void 0||p.boolean(o.paddingLeft))&&(o.paddingRight===void 0||p.boolean(o.paddingRight))}s.is=f})(z||(t.InlayHint=z={}));var ae;(function(s){function d(f){return{kind:"snippet",value:f}}s.createSnippet=d})(ae||(t.StringValue=ae={}));var ge;(function(s){function d(f,a,o,g){return{insertText:f,filterText:a,range:o,command:g}}s.create=d})(ge||(t.InlineCompletionItem=ge={}));var qe;(function(s){function d(f){return{items:f}}s.create=d})(qe||(t.InlineCompletionList=qe={}));var Hn;(function(s){s.Invoked=0,s.Automatic=1})(Hn||(t.InlineCompletionTriggerKind=Hn={}));var hs;(function(s){function d(f,a){return{range:f,text:a}}s.create=d})(hs||(t.SelectedCompletionInfo=hs={}));var gs;(function(s){function d(f,a){return{triggerKind:f,selectedCompletionInfo:a}}s.create=d})(gs||(t.InlineCompletionContext=gs={}));var ps;(function(s){function d(f){var a=f;return p.objectLiteral(a)&&r.is(a.uri)&&p.string(a.name)}s.is=d})(ps||(t.WorkspaceFolder=ps={})),t.EOL=[`
`,`\r
`,"\r"];var ms;(function(s){function d(g,R,F,ce){return new rd(g,R,F,ce)}s.create=d;function f(g){var R=g;return!!(p.defined(R)&&p.string(R.uri)&&(p.undefined(R.languageId)||p.string(R.languageId))&&p.uinteger(R.lineCount)&&p.func(R.getText)&&p.func(R.positionAt)&&p.func(R.offsetAt))}s.is=f;function a(g,R){for(var F=g.getText(),ce=o(R,function(jt,Un){var ys=jt.range.start.line-Un.range.start.line;return ys===0?jt.range.start.character-Un.range.start.character:ys}),Y=F.length,Ae=ce.length-1;Ae>=0;Ae--){var We=ce[Ae],Ye=g.offsetAt(We.range.start),H=g.offsetAt(We.range.end);if(H<=Y)F=F.substring(0,Ye)+We.newText+F.substring(H,F.length);else throw new Error("Overlapping edit");Y=Ye}return F}s.applyEdits=a;function o(g,R){if(g.length<=1)return g;var F=g.length/2|0,ce=g.slice(0,F),Y=g.slice(F);o(ce,R),o(Y,R);for(var Ae=0,We=0,Ye=0;Ae<ce.length&&We<Y.length;){var H=R(ce[Ae],Y[We]);H<=0?g[Ye++]=ce[Ae++]:g[Ye++]=Y[We++]}for(;Ae<ce.length;)g[Ye++]=ce[Ae++];for(;We<Y.length;)g[Ye++]=Y[We++];return g}})(ms||(t.TextDocument=ms={}));var rd=function(){function s(d,f,a,o){this._uri=d,this._languageId=f,this._version=a,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(d){if(d){var f=this.offsetAt(d.start),a=this.offsetAt(d.end);return this._content.substring(f,a)}return this._content},s.prototype.update=function(d,f){this._content=d.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var d=[],f=this._content,a=!0,o=0;o<f.length;o++){a&&(d.push(o),a=!1);var g=f.charAt(o);a=g==="\r"||g===`
`,g==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}a&&f.length>0&&d.push(f.length),this._lineOffsets=d}return this._lineOffsets},s.prototype.positionAt=function(d){d=Math.max(Math.min(d,this._content.length),0);var f=this.getLineOffsets(),a=0,o=f.length;if(o===0)return h.create(0,d);for(;a<o;){var g=Math.floor((a+o)/2);f[g]>d?o=g:a=g+1}var R=a-1;return h.create(R,d-f[R])},s.prototype.offsetAt=function(d){var f=this.getLineOffsets();if(d.line>=f.length)return this._content.length;if(d.line<0)return 0;var a=f[d.line],o=d.line+1<f.length?f[d.line+1]:this._content.length;return Math.max(Math.min(a+d.character,o),a)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s}(),p;(function(s){var d=Object.prototype.toString;function f(H){return typeof H<"u"}s.defined=f;function a(H){return typeof H>"u"}s.undefined=a;function o(H){return H===!0||H===!1}s.boolean=o;function g(H){return d.call(H)==="[object String]"}s.string=g;function R(H){return d.call(H)==="[object Number]"}s.number=R;function F(H,jt,Un){return d.call(H)==="[object Number]"&&jt<=H&&H<=Un}s.numberRange=F;function ce(H){return d.call(H)==="[object Number]"&&-2147483648<=H&&H<=2147483647}s.integer=ce;function Y(H){return d.call(H)==="[object Number]"&&0<=H&&H<=2147483647}s.uinteger=Y;function Ae(H){return d.call(H)==="[object Function]"}s.func=Ae;function We(H){return H!==null&&typeof H=="object"}s.objectLiteral=We;function Ye(H,jt){return Array.isArray(H)&&H.every(jt)}s.typedArray=Ye})(p||(p={}))})});var ne=k(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.ProtocolNotificationType=we.ProtocolNotificationType0=we.ProtocolRequestType=we.ProtocolRequestType0=we.RegistrationType=we.MessageDirection=void 0;var zt=wt(),ia;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(ia||(we.MessageDirection=ia={}));var wo=class{constructor(t){this.method=t}};we.RegistrationType=wo;var To=class extends zt.RequestType0{constructor(t){super(t)}};we.ProtocolRequestType0=To;var Co=class extends zt.RequestType{constructor(t){super(t,zt.ParameterStructures.byName)}};we.ProtocolRequestType=Co;var ko=class extends zt.NotificationType0{constructor(t){super(t)}};we.ProtocolNotificationType0=ko;var qo=class extends zt.NotificationType{constructor(t){super(t,zt.ParameterStructures.byName)}};we.ProtocolNotificationType=qo});var gr=k(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.objectLiteral=he.typedArray=he.stringArray=he.array=he.func=he.error=he.number=he.string=he.boolean=void 0;function rf(e){return e===!0||e===!1}he.boolean=rf;function oa(e){return typeof e=="string"||e instanceof String}he.string=oa;function of(e){return typeof e=="number"||e instanceof Number}he.number=of;function sf(e){return e instanceof Error}he.error=sf;function af(e){return typeof e=="function"}he.func=af;function sa(e){return Array.isArray(e)}he.array=sa;function cf(e){return sa(e)&&e.every(t=>oa(t))}he.stringArray=cf;function uf(e,t){return Array.isArray(e)&&e.every(t)}he.typedArray=uf;function lf(e){return e!==null&&typeof e=="object"}he.objectLiteral=lf});var ua=k(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.ImplementationRequest=void 0;var aa=ne(),ca;(function(e){e.method="textDocument/implementation",e.messageDirection=aa.MessageDirection.clientToServer,e.type=new aa.ProtocolRequestType(e.method)})(ca||(pr.ImplementationRequest=ca={}))});var fa=k(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.TypeDefinitionRequest=void 0;var la=ne(),da;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=la.MessageDirection.clientToServer,e.type=new la.ProtocolRequestType(e.method)})(da||(mr.TypeDefinitionRequest=da={}))});var pa=k(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.DidChangeWorkspaceFoldersNotification=Bt.WorkspaceFoldersRequest=void 0;var yr=ne(),ha;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=yr.MessageDirection.serverToClient,e.type=new yr.ProtocolRequestType0(e.method)})(ha||(Bt.WorkspaceFoldersRequest=ha={}));var ga;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=yr.MessageDirection.clientToServer,e.type=new yr.ProtocolNotificationType(e.method)})(ga||(Bt.DidChangeWorkspaceFoldersNotification=ga={}))});var va=k(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.ConfigurationRequest=void 0;var ma=ne(),ya;(function(e){e.method="workspace/configuration",e.messageDirection=ma.MessageDirection.serverToClient,e.type=new ma.ProtocolRequestType(e.method)})(ya||(vr.ConfigurationRequest=ya={}))});var Ra=k(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.ColorPresentationRequest=Vt.DocumentColorRequest=void 0;var br=ne(),ba;(function(e){e.method="textDocument/documentColor",e.messageDirection=br.MessageDirection.clientToServer,e.type=new br.ProtocolRequestType(e.method)})(ba||(Vt.DocumentColorRequest=ba={}));var _a;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=br.MessageDirection.clientToServer,e.type=new br.ProtocolRequestType(e.method)})(_a||(Vt.ColorPresentationRequest=_a={}))});var wa=k(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.FoldingRangeRefreshRequest=Gt.FoldingRangeRequest=void 0;var _r=ne(),Da;(function(e){e.method="textDocument/foldingRange",e.messageDirection=_r.MessageDirection.clientToServer,e.type=new _r.ProtocolRequestType(e.method)})(Da||(Gt.FoldingRangeRequest=Da={}));var Pa;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=_r.MessageDirection.serverToClient,e.type=new _r.ProtocolRequestType0(e.method)})(Pa||(Gt.FoldingRangeRefreshRequest=Pa={}))});var ka=k(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.DeclarationRequest=void 0;var Ta=ne(),Ca;(function(e){e.method="textDocument/declaration",e.messageDirection=Ta.MessageDirection.clientToServer,e.type=new Ta.ProtocolRequestType(e.method)})(Ca||(Rr.DeclarationRequest=Ca={}))});var Ea=k(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.SelectionRangeRequest=void 0;var qa=ne(),Sa;(function(e){e.method="textDocument/selectionRange",e.messageDirection=qa.MessageDirection.clientToServer,e.type=new qa.ProtocolRequestType(e.method)})(Sa||(Dr.SelectionRangeRequest=Sa={}))});var Na=k(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.WorkDoneProgressCancelNotification=ct.WorkDoneProgressCreateRequest=ct.WorkDoneProgress=void 0;var df=wt(),Pr=ne(),Ma;(function(e){e.type=new df.ProgressType;function t(n){return n===e.type}e.is=t})(Ma||(ct.WorkDoneProgress=Ma={}));var xa;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Pr.MessageDirection.serverToClient,e.type=new Pr.ProtocolRequestType(e.method)})(xa||(ct.WorkDoneProgressCreateRequest=xa={}));var Oa;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Pr.MessageDirection.clientToServer,e.type=new Pr.ProtocolNotificationType(e.method)})(Oa||(ct.WorkDoneProgressCancelNotification=Oa={}))});var La=k(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.CallHierarchyOutgoingCallsRequest=ut.CallHierarchyIncomingCallsRequest=ut.CallHierarchyPrepareRequest=void 0;var Jt=ne(),ja;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Jt.MessageDirection.clientToServer,e.type=new Jt.ProtocolRequestType(e.method)})(ja||(ut.CallHierarchyPrepareRequest=ja={}));var Ia;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Jt.MessageDirection.clientToServer,e.type=new Jt.ProtocolRequestType(e.method)})(Ia||(ut.CallHierarchyIncomingCallsRequest=Ia={}));var Fa;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Jt.MessageDirection.clientToServer,e.type=new Jt.ProtocolRequestType(e.method)})(Fa||(ut.CallHierarchyOutgoingCallsRequest=Fa={}))});var za=k(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.SemanticTokensRefreshRequest=Te.SemanticTokensRangeRequest=Te.SemanticTokensDeltaRequest=Te.SemanticTokensRequest=Te.SemanticTokensRegistrationType=Te.TokenFormat=void 0;var et=ne(),Aa;(function(e){e.Relative="relative"})(Aa||(Te.TokenFormat=Aa={}));var vn;(function(e){e.method="textDocument/semanticTokens",e.type=new et.RegistrationType(e.method)})(vn||(Te.SemanticTokensRegistrationType=vn={}));var Wa;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=et.MessageDirection.clientToServer,e.type=new et.ProtocolRequestType(e.method),e.registrationMethod=vn.method})(Wa||(Te.SemanticTokensRequest=Wa={}));var Ha;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=et.MessageDirection.clientToServer,e.type=new et.ProtocolRequestType(e.method),e.registrationMethod=vn.method})(Ha||(Te.SemanticTokensDeltaRequest=Ha={}));var Ua;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=et.MessageDirection.clientToServer,e.type=new et.ProtocolRequestType(e.method),e.registrationMethod=vn.method})(Ua||(Te.SemanticTokensRangeRequest=Ua={}));var $a;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=et.MessageDirection.serverToClient,e.type=new et.ProtocolRequestType0(e.method)})($a||(Te.SemanticTokensRefreshRequest=$a={}))});var Ga=k(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.ShowDocumentRequest=void 0;var Ba=ne(),Va;(function(e){e.method="window/showDocument",e.messageDirection=Ba.MessageDirection.serverToClient,e.type=new Ba.ProtocolRequestType(e.method)})(Va||(wr.ShowDocumentRequest=Va={}))});var Qa=k(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.LinkedEditingRangeRequest=void 0;var Ja=ne(),Xa;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=Ja.MessageDirection.clientToServer,e.type=new Ja.ProtocolRequestType(e.method)})(Xa||(Tr.LinkedEditingRangeRequest=Xa={}))});var ic=k(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.WillDeleteFilesRequest=_e.DidDeleteFilesNotification=_e.DidRenameFilesNotification=_e.WillRenameFilesRequest=_e.DidCreateFilesNotification=_e.WillCreateFilesRequest=_e.FileOperationPatternKind=void 0;var Me=ne(),Ya;(function(e){e.file="file",e.folder="folder"})(Ya||(_e.FileOperationPatternKind=Ya={}));var Ka;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolRequestType(e.method)})(Ka||(_e.WillCreateFilesRequest=Ka={}));var Za;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolNotificationType(e.method)})(Za||(_e.DidCreateFilesNotification=Za={}));var ec;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolRequestType(e.method)})(ec||(_e.WillRenameFilesRequest=ec={}));var tc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolNotificationType(e.method)})(tc||(_e.DidRenameFilesNotification=tc={}));var nc;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolNotificationType(e.method)})(nc||(_e.DidDeleteFilesNotification=nc={}));var rc;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Me.MessageDirection.clientToServer,e.type=new Me.ProtocolRequestType(e.method)})(rc||(_e.WillDeleteFilesRequest=rc={}))});var uc=k(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.MonikerRequest=lt.MonikerKind=lt.UniquenessLevel=void 0;var oc=ne(),sc;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(sc||(lt.UniquenessLevel=sc={}));var ac;(function(e){e.$import="import",e.$export="export",e.local="local"})(ac||(lt.MonikerKind=ac={}));var cc;(function(e){e.method="textDocument/moniker",e.messageDirection=oc.MessageDirection.clientToServer,e.type=new oc.ProtocolRequestType(e.method)})(cc||(lt.MonikerRequest=cc={}))});var hc=k(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.TypeHierarchySubtypesRequest=dt.TypeHierarchySupertypesRequest=dt.TypeHierarchyPrepareRequest=void 0;var Xt=ne(),lc;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Xt.MessageDirection.clientToServer,e.type=new Xt.ProtocolRequestType(e.method)})(lc||(dt.TypeHierarchyPrepareRequest=lc={}));var dc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Xt.MessageDirection.clientToServer,e.type=new Xt.ProtocolRequestType(e.method)})(dc||(dt.TypeHierarchySupertypesRequest=dc={}));var fc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Xt.MessageDirection.clientToServer,e.type=new Xt.ProtocolRequestType(e.method)})(fc||(dt.TypeHierarchySubtypesRequest=fc={}))});var mc=k(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.InlineValueRefreshRequest=Qt.InlineValueRequest=void 0;var Cr=ne(),gc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=Cr.MessageDirection.clientToServer,e.type=new Cr.ProtocolRequestType(e.method)})(gc||(Qt.InlineValueRequest=gc={}));var pc;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=Cr.MessageDirection.serverToClient,e.type=new Cr.ProtocolRequestType0(e.method)})(pc||(Qt.InlineValueRefreshRequest=pc={}))});var _c=k(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.InlayHintRefreshRequest=ft.InlayHintResolveRequest=ft.InlayHintRequest=void 0;var Yt=ne(),yc;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(yc||(ft.InlayHintRequest=yc={}));var vc;(function(e){e.method="inlayHint/resolve",e.messageDirection=Yt.MessageDirection.clientToServer,e.type=new Yt.ProtocolRequestType(e.method)})(vc||(ft.InlayHintResolveRequest=vc={}));var bc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Yt.MessageDirection.serverToClient,e.type=new Yt.ProtocolRequestType0(e.method)})(bc||(ft.InlayHintRefreshRequest=bc={}))});var kc=k(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=void 0;var Cc=wt(),ff=gr(),Kt=ne(),Rc;(function(e){function t(n){let r=n;return r&&ff.boolean(r.retriggerRequest)}e.is=t})(Rc||(xe.DiagnosticServerCancellationData=Rc={}));var Dc;(function(e){e.Full="full",e.Unchanged="unchanged"})(Dc||(xe.DocumentDiagnosticReportKind=Dc={}));var Pc;(function(e){e.method="textDocument/diagnostic",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method),e.partialResult=new Cc.ProgressType})(Pc||(xe.DocumentDiagnosticRequest=Pc={}));var wc;(function(e){e.method="workspace/diagnostic",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method),e.partialResult=new Cc.ProgressType})(wc||(xe.WorkspaceDiagnosticRequest=wc={}));var Tc;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=Kt.MessageDirection.serverToClient,e.type=new Kt.ProtocolRequestType0(e.method)})(Tc||(xe.DiagnosticRefreshRequest=Tc={}))});var Nc=k(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.DidCloseNotebookDocumentNotification=ue.DidSaveNotebookDocumentNotification=ue.DidChangeNotebookDocumentNotification=ue.NotebookCellArrayChange=ue.DidOpenNotebookDocumentNotification=ue.NotebookDocumentSyncRegistrationType=ue.NotebookDocument=ue.NotebookCell=ue.ExecutionSummary=ue.NotebookCellKind=void 0;var bn=hr(),Ue=gr(),Be=ne(),So;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(So||(ue.NotebookCellKind=So={}));var Eo;(function(e){function t(i,c){let h={executionOrder:i};return(c===!0||c===!1)&&(h.success=c),h}e.create=t;function n(i){let c=i;return Ue.objectLiteral(c)&&bn.uinteger.is(c.executionOrder)&&(c.success===void 0||Ue.boolean(c.success))}e.is=n;function r(i,c){return i===c?!0:i==null||c===null||c===void 0?!1:i.executionOrder===c.executionOrder&&i.success===c.success}e.equals=r})(Eo||(ue.ExecutionSummary=Eo={}));var kr;(function(e){function t(c,h){return{kind:c,document:h}}e.create=t;function n(c){let h=c;return Ue.objectLiteral(h)&&So.is(h.kind)&&bn.DocumentUri.is(h.document)&&(h.metadata===void 0||Ue.objectLiteral(h.metadata))}e.is=n;function r(c,h){let b=new Set;return c.document!==h.document&&b.add("document"),c.kind!==h.kind&&b.add("kind"),c.executionSummary!==h.executionSummary&&b.add("executionSummary"),(c.metadata!==void 0||h.metadata!==void 0)&&!i(c.metadata,h.metadata)&&b.add("metadata"),(c.executionSummary!==void 0||h.executionSummary!==void 0)&&!Eo.equals(c.executionSummary,h.executionSummary)&&b.add("executionSummary"),b}e.diff=r;function i(c,h){if(c===h)return!0;if(c==null||h===null||h===void 0||typeof c!=typeof h||typeof c!="object")return!1;let b=Array.isArray(c),S=Array.isArray(h);if(b!==S)return!1;if(b&&S){if(c.length!==h.length)return!1;for(let C=0;C<c.length;C++)if(!i(c[C],h[C]))return!1}if(Ue.objectLiteral(c)&&Ue.objectLiteral(h)){let C=Object.keys(c),E=Object.keys(h);if(C.length!==E.length||(C.sort(),E.sort(),!i(C,E)))return!1;for(let x=0;x<C.length;x++){let N=C[x];if(!i(c[N],h[N]))return!1}}return!0}})(kr||(ue.NotebookCell=kr={}));var qc;(function(e){function t(r,i,c,h){return{uri:r,notebookType:i,version:c,cells:h}}e.create=t;function n(r){let i=r;return Ue.objectLiteral(i)&&Ue.string(i.uri)&&bn.integer.is(i.version)&&Ue.typedArray(i.cells,kr.is)}e.is=n})(qc||(ue.NotebookDocument=qc={}));var Zt;(function(e){e.method="notebookDocument/sync",e.messageDirection=Be.MessageDirection.clientToServer,e.type=new Be.RegistrationType(e.method)})(Zt||(ue.NotebookDocumentSyncRegistrationType=Zt={}));var Sc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Be.MessageDirection.clientToServer,e.type=new Be.ProtocolNotificationType(e.method),e.registrationMethod=Zt.method})(Sc||(ue.DidOpenNotebookDocumentNotification=Sc={}));var Ec;(function(e){function t(r){let i=r;return Ue.objectLiteral(i)&&bn.uinteger.is(i.start)&&bn.uinteger.is(i.deleteCount)&&(i.cells===void 0||Ue.typedArray(i.cells,kr.is))}e.is=t;function n(r,i,c){let h={start:r,deleteCount:i};return c!==void 0&&(h.cells=c),h}e.create=n})(Ec||(ue.NotebookCellArrayChange=Ec={}));var Mc;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Be.MessageDirection.clientToServer,e.type=new Be.ProtocolNotificationType(e.method),e.registrationMethod=Zt.method})(Mc||(ue.DidChangeNotebookDocumentNotification=Mc={}));var xc;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Be.MessageDirection.clientToServer,e.type=new Be.ProtocolNotificationType(e.method),e.registrationMethod=Zt.method})(xc||(ue.DidSaveNotebookDocumentNotification=xc={}));var Oc;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Be.MessageDirection.clientToServer,e.type=new Be.ProtocolNotificationType(e.method),e.registrationMethod=Zt.method})(Oc||(ue.DidCloseNotebookDocumentNotification=Oc={}))});var Fc=k(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.InlineCompletionRequest=void 0;var jc=ne(),Ic;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=jc.MessageDirection.clientToServer,e.type=new jc.ProtocolRequestType(e.method)})(Ic||(qr.InlineCompletionRequest=Ic={}))});var Qu=k(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.RelativePattern=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeErrorCodes=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.PositionEncodingKind=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.NotebookCellTextDocumentFilter=u.NotebookDocumentFilter=u.TextDocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRefreshRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangesFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolResolveRequest=void 0;u.InlineCompletionRequest=u.DidCloseNotebookDocumentNotification=u.DidSaveNotebookDocumentNotification=u.DidChangeNotebookDocumentNotification=u.NotebookCellArrayChange=u.DidOpenNotebookDocumentNotification=u.NotebookDocumentSyncRegistrationType=u.NotebookDocument=u.NotebookCell=u.ExecutionSummary=u.NotebookCellKind=u.DiagnosticRefreshRequest=u.WorkspaceDiagnosticRequest=u.DocumentDiagnosticRequest=u.DocumentDiagnosticReportKind=u.DiagnosticServerCancellationData=u.InlayHintRefreshRequest=u.InlayHintResolveRequest=u.InlayHintRequest=u.InlineValueRefreshRequest=u.InlineValueRequest=u.TypeHierarchySupertypesRequest=u.TypeHierarchySubtypesRequest=u.TypeHierarchyPrepareRequest=void 0;var D=ne(),Lc=hr(),pe=gr(),hf=ua();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return hf.ImplementationRequest}});var gf=fa();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return gf.TypeDefinitionRequest}});var Vu=pa();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Vu.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Vu.DidChangeWorkspaceFoldersNotification}});var pf=va();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return pf.ConfigurationRequest}});var Gu=Ra();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return Gu.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return Gu.ColorPresentationRequest}});var Ju=wa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return Ju.FoldingRangeRequest}});Object.defineProperty(u,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Ju.FoldingRangeRefreshRequest}});var mf=ka();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return mf.DeclarationRequest}});var yf=Ea();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return yf.SelectionRangeRequest}});var jo=Na();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return jo.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return jo.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return jo.WorkDoneProgressCancelNotification}});var Io=La();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Io.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Io.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Io.CallHierarchyPrepareRequest}});var en=za();Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return en.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return en.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return en.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return en.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return en.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return en.SemanticTokensRegistrationType}});var vf=Ga();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return vf.ShowDocumentRequest}});var bf=Qa();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return bf.LinkedEditingRangeRequest}});var Tt=ic();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return Tt.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Tt.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Tt.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Tt.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Tt.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Tt.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Tt.WillDeleteFilesRequest}});var Fo=uc();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return Fo.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return Fo.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return Fo.MonikerRequest}});var Lo=hc();Object.defineProperty(u,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Lo.TypeHierarchyPrepareRequest}});Object.defineProperty(u,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Lo.TypeHierarchySubtypesRequest}});Object.defineProperty(u,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Lo.TypeHierarchySupertypesRequest}});var Xu=mc();Object.defineProperty(u,"InlineValueRequest",{enumerable:!0,get:function(){return Xu.InlineValueRequest}});Object.defineProperty(u,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Xu.InlineValueRefreshRequest}});var Ao=_c();Object.defineProperty(u,"InlayHintRequest",{enumerable:!0,get:function(){return Ao.InlayHintRequest}});Object.defineProperty(u,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Ao.InlayHintResolveRequest}});Object.defineProperty(u,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Ao.InlayHintRefreshRequest}});var _n=kc();Object.defineProperty(u,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return _n.DiagnosticServerCancellationData}});Object.defineProperty(u,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return _n.DocumentDiagnosticReportKind}});Object.defineProperty(u,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return _n.DocumentDiagnosticRequest}});Object.defineProperty(u,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return _n.WorkspaceDiagnosticRequest}});Object.defineProperty(u,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return _n.DiagnosticRefreshRequest}});var Ve=Nc();Object.defineProperty(u,"NotebookCellKind",{enumerable:!0,get:function(){return Ve.NotebookCellKind}});Object.defineProperty(u,"ExecutionSummary",{enumerable:!0,get:function(){return Ve.ExecutionSummary}});Object.defineProperty(u,"NotebookCell",{enumerable:!0,get:function(){return Ve.NotebookCell}});Object.defineProperty(u,"NotebookDocument",{enumerable:!0,get:function(){return Ve.NotebookDocument}});Object.defineProperty(u,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ve.NotebookDocumentSyncRegistrationType}});Object.defineProperty(u,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ve.DidOpenNotebookDocumentNotification}});Object.defineProperty(u,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ve.NotebookCellArrayChange}});Object.defineProperty(u,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ve.DidChangeNotebookDocumentNotification}});Object.defineProperty(u,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ve.DidSaveNotebookDocumentNotification}});Object.defineProperty(u,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ve.DidCloseNotebookDocumentNotification}});var _f=Fc();Object.defineProperty(u,"InlineCompletionRequest",{enumerable:!0,get:function(){return _f.InlineCompletionRequest}});var Mo;(function(e){function t(n){let r=n;return pe.string(r)||pe.string(r.language)||pe.string(r.scheme)||pe.string(r.pattern)}e.is=t})(Mo||(u.TextDocumentFilter=Mo={}));var xo;(function(e){function t(n){let r=n;return pe.objectLiteral(r)&&(pe.string(r.notebookType)||pe.string(r.scheme)||pe.string(r.pattern))}e.is=t})(xo||(u.NotebookDocumentFilter=xo={}));var Oo;(function(e){function t(n){let r=n;return pe.objectLiteral(r)&&(pe.string(r.notebook)||xo.is(r.notebook))&&(r.language===void 0||pe.string(r.language))}e.is=t})(Oo||(u.NotebookCellTextDocumentFilter=Oo={}));var No;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!pe.string(r)&&!Mo.is(r)&&!Oo.is(r))return!1;return!0}e.is=t})(No||(u.DocumentSelector=No={}));var Ac;(function(e){e.method="client/registerCapability",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolRequestType(e.method)})(Ac||(u.RegistrationRequest=Ac={}));var Wc;(function(e){e.method="client/unregisterCapability",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolRequestType(e.method)})(Wc||(u.UnregistrationRequest=Wc={}));var Hc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Hc||(u.ResourceOperationKind=Hc={}));var Uc;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(Uc||(u.FailureHandlingKind=Uc={}));var $c;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})($c||(u.PositionEncodingKind=$c={}));var zc;(function(e){function t(n){let r=n;return r&&pe.string(r.id)&&r.id.length>0}e.hasId=t})(zc||(u.StaticRegistrationOptions=zc={}));var Bc;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||No.is(r.documentSelector))}e.is=t})(Bc||(u.TextDocumentRegistrationOptions=Bc={}));var Vc;(function(e){function t(r){let i=r;return pe.objectLiteral(i)&&(i.workDoneProgress===void 0||pe.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&pe.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(Vc||(u.WorkDoneProgressOptions=Vc={}));var Gc;(function(e){e.method="initialize",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Gc||(u.InitializeRequest=Gc={}));var Jc;(function(e){e.unknownProtocolVersion=1})(Jc||(u.InitializeErrorCodes=Jc={}));var Xc;(function(e){e.method="initialized",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(Xc||(u.InitializedNotification=Xc={}));var Qc;(function(e){e.method="shutdown",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType0(e.method)})(Qc||(u.ShutdownRequest=Qc={}));var Yc;(function(e){e.method="exit",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType0(e.method)})(Yc||(u.ExitNotification=Yc={}));var Kc;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(Kc||(u.DidChangeConfigurationNotification=Kc={}));var Zc;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(Zc||(u.MessageType=Zc={}));var eu;(function(e){e.method="window/showMessage",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolNotificationType(e.method)})(eu||(u.ShowMessageNotification=eu={}));var tu;(function(e){e.method="window/showMessageRequest",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolRequestType(e.method)})(tu||(u.ShowMessageRequest=tu={}));var nu;(function(e){e.method="window/logMessage",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolNotificationType(e.method)})(nu||(u.LogMessageNotification=nu={}));var ru;(function(e){e.method="telemetry/event",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolNotificationType(e.method)})(ru||(u.TelemetryEventNotification=ru={}));var iu;(function(e){e.None=0,e.Full=1,e.Incremental=2})(iu||(u.TextDocumentSyncKind=iu={}));var ou;(function(e){e.method="textDocument/didOpen",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(ou||(u.DidOpenTextDocumentNotification=ou={}));var su;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(su||(u.TextDocumentContentChangeEvent=su={}));var au;(function(e){e.method="textDocument/didChange",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(au||(u.DidChangeTextDocumentNotification=au={}));var cu;(function(e){e.method="textDocument/didClose",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(cu||(u.DidCloseTextDocumentNotification=cu={}));var uu;(function(e){e.method="textDocument/didSave",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(uu||(u.DidSaveTextDocumentNotification=uu={}));var lu;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(lu||(u.TextDocumentSaveReason=lu={}));var du;(function(e){e.method="textDocument/willSave",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(du||(u.WillSaveTextDocumentNotification=du={}));var fu;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(fu||(u.WillSaveTextDocumentWaitUntilRequest=fu={}));var hu;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolNotificationType(e.method)})(hu||(u.DidChangeWatchedFilesNotification=hu={}));var gu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(gu||(u.FileChangeType=gu={}));var pu;(function(e){function t(n){let r=n;return pe.objectLiteral(r)&&(Lc.URI.is(r.baseUri)||Lc.WorkspaceFolder.is(r.baseUri))&&pe.string(r.pattern)}e.is=t})(pu||(u.RelativePattern=pu={}));var mu;(function(e){e.Create=1,e.Change=2,e.Delete=4})(mu||(u.WatchKind=mu={}));var yu;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolNotificationType(e.method)})(yu||(u.PublishDiagnosticsNotification=yu={}));var vu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(vu||(u.CompletionTriggerKind=vu={}));var bu;(function(e){e.method="textDocument/completion",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(bu||(u.CompletionRequest=bu={}));var _u;(function(e){e.method="completionItem/resolve",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(_u||(u.CompletionResolveRequest=_u={}));var Ru;(function(e){e.method="textDocument/hover",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Ru||(u.HoverRequest=Ru={}));var Du;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(Du||(u.SignatureHelpTriggerKind=Du={}));var Pu;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Pu||(u.SignatureHelpRequest=Pu={}));var wu;(function(e){e.method="textDocument/definition",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(wu||(u.DefinitionRequest=wu={}));var Tu;(function(e){e.method="textDocument/references",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Tu||(u.ReferencesRequest=Tu={}));var Cu;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Cu||(u.DocumentHighlightRequest=Cu={}));var ku;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(ku||(u.DocumentSymbolRequest=ku={}));var qu;(function(e){e.method="textDocument/codeAction",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(qu||(u.CodeActionRequest=qu={}));var Su;(function(e){e.method="codeAction/resolve",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Su||(u.CodeActionResolveRequest=Su={}));var Eu;(function(e){e.method="workspace/symbol",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Eu||(u.WorkspaceSymbolRequest=Eu={}));var Mu;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Mu||(u.WorkspaceSymbolResolveRequest=Mu={}));var xu;(function(e){e.method="textDocument/codeLens",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(xu||(u.CodeLensRequest=xu={}));var Ou;(function(e){e.method="codeLens/resolve",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Ou||(u.CodeLensResolveRequest=Ou={}));var Nu;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolRequestType0(e.method)})(Nu||(u.CodeLensRefreshRequest=Nu={}));var ju;(function(e){e.method="textDocument/documentLink",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(ju||(u.DocumentLinkRequest=ju={}));var Iu;(function(e){e.method="documentLink/resolve",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Iu||(u.DocumentLinkResolveRequest=Iu={}));var Fu;(function(e){e.method="textDocument/formatting",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Fu||(u.DocumentFormattingRequest=Fu={}));var Lu;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Lu||(u.DocumentRangeFormattingRequest=Lu={}));var Au;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Au||(u.DocumentRangesFormattingRequest=Au={}));var Wu;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Wu||(u.DocumentOnTypeFormattingRequest=Wu={}));var Hu;(function(e){e.Identifier=1})(Hu||(u.PrepareSupportDefaultBehavior=Hu={}));var Uu;(function(e){e.method="textDocument/rename",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(Uu||(u.RenameRequest=Uu={}));var $u;(function(e){e.method="textDocument/prepareRename",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})($u||(u.PrepareRenameRequest=$u={}));var zu;(function(e){e.method="workspace/executeCommand",e.messageDirection=D.MessageDirection.clientToServer,e.type=new D.ProtocolRequestType(e.method)})(zu||(u.ExecuteCommandRequest=zu={}));var Bu;(function(e){e.method="workspace/applyEdit",e.messageDirection=D.MessageDirection.serverToClient,e.type=new D.ProtocolRequestType("workspace/applyEdit")})(Bu||(u.ApplyWorkspaceEditRequest=Bu={}))});var Ku=k(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.createProtocolConnection=void 0;var Yu=wt();function Rf(e,t,n,r){return Yu.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Yu.createMessageConnection)(e,t,n,r)}Sr.createProtocolConnection=Rf});var el=k(Ce=>{"use strict";var Df=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Er=Ce&&Ce.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Df(t,e,n)};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.LSPErrorCodes=Ce.createProtocolConnection=void 0;Er(wt(),Ce);Er(hr(),Ce);Er(ne(),Ce);Er(Qu(),Ce);var Pf=Ku();Object.defineProperty(Ce,"createProtocolConnection",{enumerable:!0,get:function(){return Pf.createProtocolConnection}});var Zu;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(Zu||(Ce.LSPErrorCodes=Zu={}))});var de=k(Ge=>{"use strict";var wf=Ge&&Ge.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),tl=Ge&&Ge.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&wf(t,e,n)};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.createProtocolConnection=void 0;var Tf=Po();tl(Po(),Ge);tl(el(),Ge);function Cf(e,t,n,r){return(0,Tf.createMessageConnection)(e,t,n,r)}Ge.createProtocolConnection=Cf});var Wo=k(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.generateUuid=Oe.parse=Oe.isUUID=Oe.v4=Oe.empty=void 0;var Rn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Dn=class e extends Rn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};Dn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Dn._timeHighBits=["8","9","a","b"];Oe.empty=new Rn("00000000-0000-0000-0000-000000000000");function nl(){return new Dn}Oe.v4=nl;var kf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function rl(e){return kf.test(e)}Oe.isUUID=rl;function qf(e){if(!rl(e))throw new Error("invalid uuid");return new Rn(e)}Oe.parse=qf;function Sf(){return nl().asHex()}Oe.generateUuid=Sf});var il=k(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.attachPartialResult=gt.ProgressFeature=gt.attachWorkDone=void 0;var ht=de(),Ef=Wo(),Ct=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let c={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(ht.WorkDoneProgress.type,this._token,c)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(ht.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(ht.WorkDoneProgress.type,this._token,{kind:"end"})}};Ct.Instances=new Map;var Mr=class extends Ct{constructor(t,n){super(t,n),this._source=new ht.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Pn=class{constructor(){}begin(){}report(){}done(){}},xr=class extends Pn{constructor(){super(),this._source=new ht.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Mf(e,t){if(t===void 0||t.workDoneToken===void 0)return new Pn;let n=t.workDoneToken;return delete t.workDoneToken,new Ct(e,n)}gt.attachWorkDone=Mf;var xf=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(ht.WorkDoneProgressCancelNotification.type,n=>{let r=Ct.Instances.get(n.token);(r instanceof Mr||r instanceof xr)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Pn:new Ct(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,Ef.generateUuid)();return this.connection.sendRequest(ht.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Mr(this.connection,t))}else return Promise.resolve(new xr)}};gt.ProgressFeature=xf;var Ho;(function(e){e.type=new ht.ProgressType})(Ho||(Ho={}));var Uo=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Ho.type,this._token,t)}};function Of(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new Uo(e,n)}gt.attachPartialResult=Of});var ol=k(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.ConfigurationFeature=void 0;var Nf=de(),jf=zn(),If=e=>class extends e{getConfiguration(t){return t?jf.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(Nf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};Or.ConfigurationFeature=If});var sl=k(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.WorkspaceFoldersFeature=void 0;var Nr=de(),Ff=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Nr.Emitter,this.connection.onNotification(Nr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Nr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Nr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};jr.WorkspaceFoldersFeature=Ff});var al=k(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.CallHierarchyFeature=void 0;var $o=de(),Lf=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest($o.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=$o.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=$o.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ir.CallHierarchyFeature=Lf});var Bo=k(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.SemanticTokensBuilder=pt.SemanticTokensDiff=pt.SemanticTokensFeature=void 0;var Fr=de(),Af=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Fr.SemanticTokensRefreshRequest.type),on:t=>{let n=Fr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=Fr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=Fr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};pt.SemanticTokensFeature=Af;var Lr=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,c=n-1;for(;i>=r&&c>=r&&this.originalSequence[i]===this.modifiedSequence[c];)i--,c--;(i<r||c<r)&&(i++,c++);let h=i-r+1,b=this.modifiedSequence.slice(r,c+1);return b.length===1&&b[0]===this.originalSequence[i]?[{start:r,deleteCount:h-1}]:[{start:r,deleteCount:h,data:b}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};pt.SemanticTokensDiff=Lr;var zo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,c){let h=t,b=n;this._dataLen>0&&(h-=this._prevLine,h===0&&(b-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=b,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=c,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Lr(this._prevData,this._data).computeDiff()}:this.build()}};pt.SemanticTokensBuilder=zo});var cl=k(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.ShowDocumentFeature=void 0;var Wf=de(),Hf=e=>class extends e{showDocument(t){return this.connection.sendRequest(Wf.ShowDocumentRequest.type,t)}};Ar.ShowDocumentFeature=Hf});var ul=k(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.FileOperationsFeature=void 0;var tn=de(),Uf=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(tn.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(tn.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(tn.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(tn.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(tn.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(tn.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Wr.FileOperationsFeature=Uf});var ll=k(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.LinkedEditingRangeFeature=void 0;var $f=de(),zf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest($f.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Hr.LinkedEditingRangeFeature=zf});var dl=k(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.TypeHierarchyFeature=void 0;var Vo=de(),Bf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(Vo.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=Vo.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=Vo.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ur.TypeHierarchyFeature=Bf});var hl=k($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.InlineValueFeature=void 0;var fl=de(),Vf=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(fl.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(fl.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};$r.InlineValueFeature=Vf});var pl=k(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.FoldingRangeFeature=void 0;var gl=de(),Gf=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(gl.FoldingRangeRefreshRequest.type),on:t=>{let n=gl.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};zr.FoldingRangeFeature=Gf});var ml=k(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.InlayHintFeature=void 0;var Go=de(),Jf=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Go.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Go.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Go.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Br.InlayHintFeature=Jf});var yl=k(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.DiagnosticFeature=void 0;var wn=de(),Xf=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(wn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(wn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(wn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(wn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(wn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Vr.DiagnosticFeature=Xf});var Xo=k(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.TextDocuments=void 0;var kt=de(),Jo=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new kt.Emitter,this._onDidOpen=new kt.Emitter,this._onDidClose=new kt.Emitter,this._onDidSave=new kt.Emitter,this._onWillSave=new kt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=kt.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,c=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,c);let h=Object.freeze({document:c});this._onDidOpen.fire(h),this._onDidChangeContent.fire(h)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,c=r.contentChanges;if(c.length===0)return;let{version:h}=i;if(h==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let b=this._syncedDocuments.get(i.uri);b!==void 0&&(b=this._configuration.update(b,c,h),this._syncedDocuments.set(i.uri,b),this._onDidChangeContent.fire(Object.freeze({document:b})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let c=this._syncedDocuments.get(r.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),kt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Gr.TextDocuments=Jo});var Yo=k(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.NotebookDocuments=nn.NotebookSyncFeature=void 0;var Ne=de(),vl=Xo(),Qf=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Ne.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Ne.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Ne.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Ne.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};nn.NotebookSyncFeature=Qf;var Jr=class e{onDidOpenTextDocument(t){return this.openHandler=t,Ne.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Ne.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Ne.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Jr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var Qo=class{constructor(t){t instanceof vl.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new vl.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Ne.Emitter,this._onDidChange=new Ne.Emitter,this._onDidSave=new Ne.Emitter,this._onDidClose=new Ne.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new Jr,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let c of i.cellTextDocuments)n.openTextDocument({textDocument:c});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c===void 0)return;c.version=i.notebookDocument.version;let h=c.metadata,b=!1,S=i.change;S.metadata!==void 0&&(b=!0,c.metadata=S.metadata);let C=[],E=[],x=[],N=[];if(S.cells!==void 0){let $=S.cells;if($.structure!==void 0){let y=$.structure.array;if(c.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),$.structure.didOpen!==void 0)for(let m of $.structure.didOpen)n.openTextDocument({textDocument:m}),C.push(m.uri);if($.structure.didClose)for(let m of $.structure.didClose)n.closeTextDocument({textDocument:m}),E.push(m.uri)}if($.data!==void 0){let y=new Map($.data.map(m=>[m.document,m]));for(let m=0;m<=c.cells.length;m++){let P=y.get(c.cells[m].document);if(P!==void 0){let I=c.cells.splice(m,1,P);if(x.push({old:I[0],new:P}),y.delete(P.document),y.size===0)break}}}if($.textContent!==void 0)for(let y of $.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),N.push(y.document.uri)}this.updateCellMap(c);let re={notebookDocument:c};b&&(re.metadata={old:h,new:c.metadata});let me=[];for(let $ of C)me.push(this.getNotebookCell($));let oe=[];for(let $ of E)oe.push(this.getNotebookCell($));let le=[];for(let $ of N)le.push(this.getNotebookCell($));(me.length>0||oe.length>0||x.length>0||le.length>0)&&(re.cells={added:me,removed:oe,changed:{data:x,textContent:le}}),(re.metadata!==void 0||re.cells!==void 0)&&this._onDidChange.fire(re)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);c!==void 0&&this._onDidSave.fire(c)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c!==void 0){this._onDidClose.fire(c);for(let h of i.cellTextDocuments)n.closeTextDocument({textDocument:h});this.notebookDocuments.delete(i.notebookDocument.uri);for(let h of c.cells)this.notebookCellMap.delete(h.document)}})),Ne.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};nn.NotebookDocuments=Qo});var bl=k(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.MonikerFeature=void 0;var Yf=de(),Kf=e=>class extends e{get moniker(){return{on:t=>{let n=Yf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Xr.MonikerFeature=Kf});var rs=k(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.createConnection=B.combineFeatures=B.combineNotebooksFeatures=B.combineLanguagesFeatures=B.combineWorkspaceFeatures=B.combineWindowFeatures=B.combineClientFeatures=B.combineTracerFeatures=B.combineTelemetryFeatures=B.combineConsoleFeatures=B._NotebooksImpl=B._LanguagesImpl=B.BulkUnregistration=B.BulkRegistration=B.ErrorMessageTracker=void 0;var T=de(),je=zn(),Zo=Wo(),j=il(),Zf=ol(),eh=sl(),th=al(),nh=Bo(),rh=cl(),ih=ul(),oh=ll(),sh=dl(),ah=hl(),ch=pl(),uh=ml(),lh=yl(),dh=Yo(),fh=bl();function Ko(e){if(e!==null)return e}var es=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};B.ErrorMessageTracker=es;var Qr=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(T.MessageType.Error,t)}warn(t){this.send(T.MessageType.Warning,t)}info(t){this.send(T.MessageType.Info,t)}log(t){this.send(T.MessageType.Log,t)}debug(t){this.send(T.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(T.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,T.RAL)().console.error("Sending log message failed")})}},ts=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:T.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(T.ShowMessageRequest.type,r).then(Ko)}showWarningMessage(t,...n){let r={type:T.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(T.ShowMessageRequest.type,r).then(Ko)}showInformationMessage(t,...n){let r={type:T.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(T.ShowMessageRequest.type,r).then(Ko)}},_l=(0,rh.ShowDocumentFeature)((0,j.ProgressFeature)(ts)),Rl;(function(e){function t(){return new Yr}e.create=t})(Rl||(B.BulkRegistration=Rl={}));var Yr=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=je.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Zo.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Dl;(function(e){function t(){return new Tn(void 0,[])}e.create=t})(Dl||(B.BulkUnregistration=Dl={}));var Tn=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(T.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=je.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(T.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},c=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Kr=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof Yr?this.registerMany(t):t instanceof Tn?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=je.string(n)?n:n.method,c=Zo.generateUuid(),h={registrations:[{id:c,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(T.RegistrationRequest.type,h).then(b=>(t.add({id:c,method:i}),t),b=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(b)))}registerSingle2(t,n){let r=je.string(t)?t:t.method,i=Zo.generateUuid(),c={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(T.RegistrationRequest.type,c).then(h=>T.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),h=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(h)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(T.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(T.RegistrationRequest.type,n).then(()=>new Tn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ns=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(T.ApplyWorkspaceEditRequest.type,r)}},Pl=(0,ih.FileOperationsFeature)((0,eh.WorkspaceFoldersFeature)((0,Zf.ConfigurationFeature)(ns))),Zr=class{constructor(){this._trace=T.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==T.Trace.Off&&this.connection.sendNotification(T.LogTraceNotification.type,{message:t,verbose:this._trace===T.Trace.Verbose?n:void 0}).catch(()=>{})}},ei=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(T.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},ti=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,j.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,j.attachPartialResult)(this.connection,n)}};B._LanguagesImpl=ti;var wl=(0,ch.FoldingRangeFeature)((0,fh.MonikerFeature)((0,lh.DiagnosticFeature)((0,uh.InlayHintFeature)((0,ah.InlineValueFeature)((0,sh.TypeHierarchyFeature)((0,oh.LinkedEditingRangeFeature)((0,nh.SemanticTokensFeature)((0,th.CallHierarchyFeature)(ti))))))))),ni=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,j.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,j.attachPartialResult)(this.connection,n)}};B._NotebooksImpl=ni;var Tl=(0,dh.NotebookSyncFeature)(ni);function Cl(e,t){return function(n){return t(e(n))}}B.combineConsoleFeatures=Cl;function kl(e,t){return function(n){return t(e(n))}}B.combineTelemetryFeatures=kl;function ql(e,t){return function(n){return t(e(n))}}B.combineTracerFeatures=ql;function Sl(e,t){return function(n){return t(e(n))}}B.combineClientFeatures=Sl;function El(e,t){return function(n){return t(e(n))}}B.combineWindowFeatures=El;function Ml(e,t){return function(n){return t(e(n))}}B.combineWorkspaceFeatures=Ml;function xl(e,t){return function(n){return t(e(n))}}B.combineLanguagesFeatures=xl;function Ol(e,t){return function(n){return t(e(n))}}B.combineNotebooksFeatures=Ol;function hh(e,t){function n(i,c,h){return i&&c?h(i,c):i||c}return{__brand:"features",console:n(e.console,t.console,Cl),tracer:n(e.tracer,t.tracer,ql),telemetry:n(e.telemetry,t.telemetry,kl),client:n(e.client,t.client,Sl),window:n(e.window,t.window,El),workspace:n(e.workspace,t.workspace,Ml),languages:n(e.languages,t.languages,xl),notebooks:n(e.notebooks,t.notebooks,Ol)}}B.combineFeatures=hh;function gh(e,t,n){let r=n&&n.console?new(n.console(Qr)):new Qr,i=e(r);r.rawAttach(i);let c=n&&n.tracer?new(n.tracer(Zr)):new Zr,h=n&&n.telemetry?new(n.telemetry(ei)):new ei,b=n&&n.client?new(n.client(Kr)):new Kr,S=n&&n.window?new(n.window(_l)):new _l,C=n&&n.workspace?new(n.workspace(Pl)):new Pl,E=n&&n.languages?new(n.languages(wl)):new wl,x=n&&n.notebooks?new(n.notebooks(Tl)):new Tl,N=[r,c,h,b,S,C,E,x];function re(y){return y instanceof Promise?y:je.thenable(y)?new Promise((m,P)=>{y.then(I=>m(I),I=>P(I))}):Promise.resolve(y)}let me,oe,le,$={listen:()=>i.listen(),sendRequest:(y,...m)=>i.sendRequest(je.string(y)?y:y.method,...m),onRequest:(y,m)=>i.onRequest(y,m),sendNotification:(y,m)=>{let P=je.string(y)?y:y.method;return i.sendNotification(P,m)},onNotification:(y,m)=>i.onNotification(y,m),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(oe=y,{dispose:()=>{oe=void 0}}),onInitialized:y=>i.onNotification(T.InitializedNotification.type,y),onShutdown:y=>(me=y,{dispose:()=>{me=void 0}}),onExit:y=>(le=y,{dispose:()=>{le=void 0}}),get console(){return r},get telemetry(){return h},get tracer(){return c},get client(){return b},get window(){return S},get workspace(){return C},get languages(){return E},get notebooks(){return x},onDidChangeConfiguration:y=>i.onNotification(T.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(T.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(T.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(T.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(T.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(T.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(T.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(T.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(T.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(T.HoverRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),void 0)),onCompletion:y=>i.onRequest(T.CompletionRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onCompletionResolve:y=>i.onRequest(T.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(T.SignatureHelpRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),void 0)),onDeclaration:y=>i.onRequest(T.DeclarationRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onDefinition:y=>i.onRequest(T.DefinitionRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onTypeDefinition:y=>i.onRequest(T.TypeDefinitionRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onImplementation:y=>i.onRequest(T.ImplementationRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onReferences:y=>i.onRequest(T.ReferencesRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onDocumentHighlight:y=>i.onRequest(T.DocumentHighlightRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onDocumentSymbol:y=>i.onRequest(T.DocumentSymbolRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onWorkspaceSymbol:y=>i.onRequest(T.WorkspaceSymbolRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onWorkspaceSymbolResolve:y=>i.onRequest(T.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(T.CodeActionRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onCodeActionResolve:y=>i.onRequest(T.CodeActionResolveRequest.type,(m,P)=>y(m,P)),onCodeLens:y=>i.onRequest(T.CodeLensRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onCodeLensResolve:y=>i.onRequest(T.CodeLensResolveRequest.type,(m,P)=>y(m,P)),onDocumentFormatting:y=>i.onRequest(T.DocumentFormattingRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),void 0)),onDocumentRangeFormatting:y=>i.onRequest(T.DocumentRangeFormattingRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(T.DocumentOnTypeFormattingRequest.type,(m,P)=>y(m,P)),onRenameRequest:y=>i.onRequest(T.RenameRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),void 0)),onPrepareRename:y=>i.onRequest(T.PrepareRenameRequest.type,(m,P)=>y(m,P)),onDocumentLinks:y=>i.onRequest(T.DocumentLinkRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onDocumentLinkResolve:y=>i.onRequest(T.DocumentLinkResolveRequest.type,(m,P)=>y(m,P)),onDocumentColor:y=>i.onRequest(T.DocumentColorRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onColorPresentation:y=>i.onRequest(T.ColorPresentationRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onFoldingRanges:y=>i.onRequest(T.FoldingRangeRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onSelectionRanges:y=>i.onRequest(T.SelectionRangeRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),(0,j.attachPartialResult)(i,m))),onExecuteCommand:y=>i.onRequest(T.ExecuteCommandRequest.type,(m,P)=>y(m,P,(0,j.attachWorkDone)(i,m),void 0)),dispose:()=>i.dispose()};for(let y of N)y.attach($);return i.onRequest(T.InitializeRequest.type,y=>{t.initialize(y),je.string(y.trace)&&(c.trace=T.Trace.fromString(y.trace));for(let m of N)m.initialize(y.capabilities);if(oe){let m=oe(y,new T.CancellationTokenSource().token,(0,j.attachWorkDone)(i,y),void 0);return re(m).then(P=>{if(P instanceof T.ResponseError)return P;let I=P;I||(I={capabilities:{}});let J=I.capabilities;J||(J={},I.capabilities=J),J.textDocumentSync===void 0||J.textDocumentSync===null?J.textDocumentSync=je.number($.__textDocumentSync)?$.__textDocumentSync:T.TextDocumentSyncKind.None:!je.number(J.textDocumentSync)&&!je.number(J.textDocumentSync.change)&&(J.textDocumentSync.change=je.number($.__textDocumentSync)?$.__textDocumentSync:T.TextDocumentSyncKind.None);for(let se of N)se.fillServerCapabilities(J);return I})}else{let m={capabilities:{textDocumentSync:T.TextDocumentSyncKind.None}};for(let P of N)P.fillServerCapabilities(m.capabilities);return m}}),i.onRequest(T.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,me)return me(new T.CancellationTokenSource().token)}),i.onNotification(T.ExitNotification.type,()=>{try{le&&le()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(T.SetTraceNotification.type,y=>{c.trace=T.Trace.fromString(y.value)}),$}B.createConnection=gh});var Nl=k(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.resolveModulePath=ke.FileSystem=ke.resolveGlobalYarnPath=ke.resolveGlobalNodePath=ke.resolve=ke.uriToFilePath=void 0;var ph=require("url"),$e=require("path"),is=require("fs"),cs=require("child_process");function mh(e){let t=ph.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let c=n[0],h=n[1];c.length===0&&h.length>1&&h[1]===":"&&n.shift()}return $e.normalize(n.join("/"))}ke.uriToFilePath=mh;function os(){return process.platform==="win32"}function ri(e,t,n,r){let i="NODE_PATH",c=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((h,b)=>{let S=process.env,C=Object.create(null);Object.keys(S).forEach(E=>C[E]=S[E]),t&&is.existsSync(t)&&(C[i]?C[i]=t+$e.delimiter+C[i]:C[i]=t,r&&r(`NODE_PATH value is: ${C[i]}`)),C.ELECTRON_RUN_AS_NODE="1";try{let E=(0,cs.fork)("",[],{cwd:n,env:C,execArgv:["-e",c]});if(E.pid===void 0){b(new Error(`Starting process to resolve node module  ${e} failed`));return}E.on("error",N=>{b(N)}),E.on("message",N=>{N.c==="r"&&(E.send({c:"e"}),N.s?h(N.r):b(new Error(`Failed to resolve module: ${e}`)))});let x={c:"rs",a:e};E.send(x)}catch(E){b(E)}})}ke.resolve=ri;function ss(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(c=>n[c]=process.env[c]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};os()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let c=(0,cs.spawnSync)(t,["config","get","prefix"],r).stdout;if(!c){e&&e("'npm config get prefix' didn't return a value.");return}let h=c.trim();return e&&e(`'npm config get prefix' value is: ${h}`),h.length>0?os()?$e.join(h,"node_modules"):$e.join(h,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}ke.resolveGlobalNodePath=ss;function yh(e){let t="yarn",n={encoding:"utf8"};os()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,cs.spawnSync)(t,["global","dir","--json"],n),c=i.stdout;if(!c){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let h=c.trim().split(/\r?\n/);for(let b of h)try{let S=JSON.parse(b);if(S.type==="log")return $e.join(S.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}ke.resolveGlobalYarnPath=yh;var as;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!is.existsSync(__filename.toUpperCase())||!is.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,c){return n()?$e.normalize(c).indexOf($e.normalize(i))===0:$e.normalize(c).toLowerCase().indexOf($e.normalize(i).toLowerCase())===0}e.isParent=r})(as||(ke.FileSystem=as={}));function vh(e,t,n,r){return n?($e.isAbsolute(n)||(n=$e.join(e,n)),ri(t,n,n,r).then(i=>as.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>ri(t,ss(r),e,r))):ri(t,ss(r),e,r)}ke.resolveModulePath=vh});var us=k((Pp,jl)=>{"use strict";jl.exports=de()});var Il=k(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.InlineCompletionFeature=void 0;var bh=de(),_h=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(bh.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};ii.InlineCompletionFeature=_h});var Al=k(Re=>{"use strict";var Rh=Re&&Re.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ll=Re&&Re.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rh(t,e,n)};Object.defineProperty(Re,"__esModule",{value:!0});Re.ProposedFeatures=Re.NotebookDocuments=Re.TextDocuments=Re.SemanticTokensBuilder=void 0;var Dh=Bo();Object.defineProperty(Re,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Dh.SemanticTokensBuilder}});var Ph=Il();Ll(de(),Re);var wh=Xo();Object.defineProperty(Re,"TextDocuments",{enumerable:!0,get:function(){return wh.TextDocuments}});var Th=Yo();Object.defineProperty(Re,"NotebookDocuments",{enumerable:!0,get:function(){return Th.NotebookDocuments}});Ll(rs(),Re);var Fl;(function(e){e.all={__brand:"features",languages:Ph.InlineCompletionFeature}})(Fl||(Re.ProposedFeatures=Fl={}))});var Bl=k(Ie=>{"use strict";var Ch=Ie&&Ie.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),$l=Ie&&Ie.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Ch(t,e,n)};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.createConnection=Ie.Files=void 0;var Wl=require("node:util"),ls=zn(),kh=rs(),Cn=Nl(),qt=us();$l(us(),Ie);$l(Al(),Ie);var Hl;(function(e){e.uriToFilePath=Cn.uriToFilePath,e.resolveGlobalNodePath=Cn.resolveGlobalNodePath,e.resolveGlobalYarnPath=Cn.resolveGlobalYarnPath,e.resolve=Cn.resolve,e.resolveModulePath=Cn.resolveModulePath})(Hl||(Ie.Files=Hl={}));var Ul;function oi(){if(Ul!==void 0)try{Ul.end()}catch{}}var rn=!1,zl;function qh(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(zl=setInterval(()=>{try{process.kill(r,0)}catch{oi(),process.exit(rn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}qh();var Sh={initialize:e=>{let t=e.processId;ls.number(t)&&zl===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(rn?0:1)}},3e3)},get shutdownReceived(){return rn},set shutdownReceived(e){rn=e},exit:e=>{oi(),process.exit(e)}};function Eh(e,t,n,r){let i,c,h,b;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),qt.ConnectionStrategy.is(e)||qt.ConnectionOptions.is(e)?b=e:(c=e,h=t,b=n),Mh(c,h,b,i)}Ie.createConnection=Eh;function Mh(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let S,C,E=process.argv.slice(2);for(let x=0;x<E.length;x++){let N=E[x];if(N==="--node-ipc"){e=new qt.IPCMessageReader(process),t=new qt.IPCMessageWriter(process);break}else if(N==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(N==="--socket"){S=parseInt(E[x+1]);break}else if(N==="--pipe"){C=E[x+1];break}else{var c=N.split("=");if(c[0]==="--socket"){S=parseInt(c[1]);break}else if(c[0]==="--pipe"){C=c[1];break}}}if(S){let x=(0,qt.createServerSocketTransport)(S);e=x[0],t=x[1]}else if(C){let x=(0,qt.createServerPipeTransport)(C);e=x[0],t=x[1]}}var h="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+h);if(!t)throw new Error("Connection output stream is not set. "+h);if(ls.func(e.read)&&ls.func(e.on)){let S=e;S.on("end",()=>{oi(),process.exit(rn?0:1)}),S.on("close",()=>{oi(),process.exit(rn?0:1)})}let b=S=>{let C=(0,qt.createProtocolConnection)(e,t,S,n);return i&&xh(S),C};return(0,kh.createConnection)(b,Sh,r)}function xh(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Wl.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...c){if(!i)if(c.length===0)e.error("Assertion failed");else{let[h,...b]=c;e.error(`Assertion failed: ${h} ${t(b)}`)}},console.count=function(i="default"){let c=String(i),h=n.get(c)??0;h+=1,n.set(c,h),e.log(`${c}: ${c}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,c){e.log((0,Wl.inspect)(i,c))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let c=new Error().stack.replace(/(.+\n){2}/,""),h="Trace";i.length!==0&&(h+=`: ${t(i)}`),e.log(`${h}
${c}`)},console.warn=function(...i){e.warn(t(i))}}});var Gl=k((qp,Vl)=>{"use strict";Vl.exports=Bl()});var A;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG"})(A||(A={}));var dd=[[A[A.NONE],A.NONE],[A[A.ERROR],A.ERROR],[A[A.WARNING],A.WARNING],[A[A.INFO],A.INFO],[A[A.DEBUG],A.DEBUG],["INFORMATION",A.INFO]],fd=new Map(dd),Ke=()=>{},$n=class{logLevel;_connection;seq=0;logs=[];loggers={[A.NONE]:Ke,[A.ERROR]:Ke,[A.WARNING]:Ke,[A.INFO]:Ke,[A.DEBUG]:Ke};logTime=!0;logSequence=!0;constructor(t=A.DEBUG,n){this.logLevel=t,n&&this.setConnection(n)}writeLog(t){if(!this._connection)this.logs.push(t);else{if(t.level>this.logLevel)return;let n=this.logSequence?`${t.seq}	`:"",r=this.logTime?`${t.ts.toISOString()}	`:"",i=`${n}${r}${t.msg}`,c=this.loggers[t.level];c?c(i):console.error(`Unknown log level: ${t.level}; msg: ${t.msg}`)}}get connection(){return this._connection}logMessage(t,n){let i={seq:++this.seq,level:t,ts:new Date,msg:n};this.writeLog(i)}set level(t){this.logLevel=hd(t)}get level(){return this.logLevel}setConnection(t){this._connection=t,this._connection.onExit(()=>{this._connection=void 0,this.loggers[A.ERROR]=Ke,this.loggers[A.WARNING]=Ke,this.loggers[A.INFO]=Ke,this.loggers[A.DEBUG]=Ke}),this.loggers[A.ERROR]=n=>{t.console.error(n)},this.loggers[A.WARNING]=n=>{t.console.warn(n)},this.loggers[A.INFO]=n=>{t.console.info(n)},this.loggers[A.DEBUG]=n=>{t.console.log(n)},this.logs.forEach(n=>this.writeLog(n)),this.logs.length=0}error(t){this.logMessage(A.ERROR,t)}warn(t){this.logMessage(A.WARNING,t)}info(t){this.logMessage(A.INFO,t)}debug(t){this.logMessage(A.DEBUG,t)}log(t){this.debug(t)}getPendingEntries(){return this.logs}clearPendingEntries(){this.logs=[]}};function hd(e){let t=typeof e=="string"?fd.get(e.toUpperCase())||A.NONE:e;return typeof t!="number"||t<A.NONE||t>A.DEBUG?A.DEBUG:t}var bs="";var _s=new $n;function dn(e,t){_s.log(Ps(e,t))}function Rs(e,t){_s.error(Ps(e,t))}function Ds(e){dn(`setWorkspaceBase URI: ${e}`),bs=e}function Ps(e,t){let n=Array.isArray(t)?t:[t];return e+"	"+n.map(gd).join(`
			`)}function gd(e){if(!e)return"";let t=pd(e,bs);return t?e.replace(t,"..."):e}function pd(e,t){let n=md(e,t);return e.slice(0,n)}function md(e,t){let n="/",r=e.split(n),i=t.split(n),c=Math.min(r.length,i.length),h=0;for(;h<c&&r[h]===i[h];)++h;return r.slice(0,h).join(n).length}var mt=ld(Gl(),1);var si=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=Ql(r.range),c=this.offsetAt(i.start),h=this.offsetAt(i.end);this._content=this._content.substring(0,c)+r.text+this._content.substring(h,this._content.length);let b=Math.max(i.start.line,0),S=Math.max(i.end.line,0),C=this._lineOffsets,E=Jl(r.text,!1,c);if(S-b===E.length)for(let N=0,re=E.length;N<re;N++)C[N+b+1]=E[N];else E.length<1e4?C.splice(b+1,S-b,...E):this._lineOffsets=C=C.slice(0,b+1).concat(E,C.slice(S+1));let x=r.text.length-(h-c);if(x!==0)for(let N=b+1+E.length,re=C.length;N<re;N++)C[N]=C[N]+x}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Jl(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let h=Math.floor((r+i)/2);n[h]>t?i=h:r=h+1}let c=r-1;return t=this.ensureBeforeEOL(t,n[c]),{line:c,character:t-n[c]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line];if(t.character<=0)return r;let i=t.line+1<n.length?n[t.line+1]:this._content.length,c=Math.min(r+t.character,i);return this.ensureBeforeEOL(c,r)}ensureBeforeEOL(t,n){for(;t>n&&Xl(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},ai;(function(e){function t(i,c,h,b){return new si(i,c,h,b)}e.create=t;function n(i,c,h){if(i instanceof si)return i.update(c,h),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,c){let h=i.getText(),b=ds(c.map(Oh),(E,x)=>{let N=E.range.start.line-x.range.start.line;return N===0?E.range.start.character-x.range.start.character:N}),S=0,C=[];for(let E of b){let x=i.offsetAt(E.range.start);if(x<S)throw new Error("Overlapping edit");x>S&&C.push(h.substring(S,x)),E.newText.length&&C.push(E.newText),S=i.offsetAt(E.range.end)}return C.push(h.substr(S)),C.join("")}e.applyEdits=r})(ai||(ai={}));function ds(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);ds(r,t),ds(i,t);let c=0,h=0,b=0;for(;c<r.length&&h<i.length;)t(r[c],i[h])<=0?e[b++]=r[c++]:e[b++]=i[h++];for(;c<r.length;)e[b++]=r[c++];for(;h<i.length;)e[b++]=i[h++];return e}function Jl(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let c=e.charCodeAt(i);Xl(c)&&(c===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Xl(e){return e===13||e===10}function Ql(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function Oh(e){let t=Ql(e.range);return t!==e.range?{newText:e.newText,range:t}:e}function ci(e){return e!=null}var Yl=require("regexp-worker"),Kl=require("util"),fs="gim",ui=class{worker;dispose=()=>this.worker.dispose();constructor(t=2e3){this.worker=new Yl.RegExpWorker(t)}async matchPatternsInText(t,n,r){let i=Wh(t,r),c=Gh(i);return jh(this.worker,n,c).then(h=>Nh(h,i))}};function Nh(e,t){let n=new Map(e.map(c=>[c.regexp.toString(),c]));function r(c){return n.get(c.toString())||{regexp:c,message:"not found",elapsedTimeMs:0}}return t.map(c=>({name:c.name,matches:c.regexp.map(r)}))}function jh(e,t,n){return Ih(e,t,n).catch(r=>ed(r)?Fh(e,t,n):Promise.reject(r))}function Ih(e,t,n){return e.matchRegExpArray(t,n).then(r=>r.results.map((i,c)=>Zl(i,n[c])))}function Fh(e,t,n){let r=n.map(i=>Lh(e,t,i));return Promise.all(r)}function Zl(e,t){return{regexp:t,ranges:[...e.ranges],elapsedTimeMs:e.elapsedTimeMs}}function Lh(e,t,n){return e.matchRegExp(t,n).then(r=>Zl(r,n)).catch(r=>Ah(n,r))}function Ah(e,t){return ed(t)?{...t,regexp:e}:Promise.reject(t)}function ed(e){return!!e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"&&"elapsedTimeMs"in e&&typeof e.elapsedTimeMs=="number"}function Wh(e,t){let n=zh(t);return e.map(i=>Hh(i,n))}function Hh(e,t){if(Uh(e))return $h(e);let n=typeof e=="string"?li(e,fs)?.toString():void 0;return t.get(e)||t.get(e.toLowerCase())||n&&t.get(n)||{name:e,altPatternNames:[],regexp:[li(e,fs)].filter(ci)}}function Uh(e){return typeof e!="string"}function $h(e){return td(e)}function zh(e){let t=e.patterns?.map(td)||[],n=t.map(c=>[c.name.toLowerCase(),c]),r=t.flatMap(c=>c.altPatternNames.map(h=>[h,c])),i=t.map(c=>[c.regexp.map(h=>h.toString()).join(","),c]);return new Map([...n,...r,...i])}function td(e){let{name:t,pattern:n}=e,r=Array.isArray(n)?n:[n],i=new Set([...r.map(h=>li(h)?.toString()).filter(ci),...r.map(h=>h.toString())]),c=r.map(h=>li(h,fs)).filter(ci);return{name:t,altPatternNames:[...i],regexp:c}}function li(e,t){try{if(Bh(e))return e;let n=e.match(/^\/(.*)\/([gimsuy]*)$/);return n?new RegExp(n[1],n[2]||void 0):new RegExp(e,t)}catch(n){Rs((0,Kl.format)(n))}}function Bh(e){return e instanceof RegExp}function*Vh(e){for(let t of e)yield*t}function Gh(e){let t=e.map(r=>r.regexp.map(i=>[i.toString(),i]));return[...new Map(Vh(t)).values()]}dn("Starting Pattern Matcher Server");function nd(){let e=[],t={matchPatternsInDocument:c};dn("Create Connection");let n=(0,mt.createConnection)(mt.ProposedFeatures.all),r=new mt.TextDocuments(ai),i=new ui;n.onInitialize(h=>(dn("onInitialize"),Ds(h.workspaceFolders?.[0].uri??""),{capabilities:{textDocumentSync:{openClose:!0,change:mt.TextDocumentSyncKind.Incremental,willSave:!0,save:{includeText:!0}}}}));async function c(h){let{uri:b,patterns:S,settings:C}=h,E=b&&r.get(b);if(!E)return{uri:b,version:-1,patternMatches:[],message:"Document not found."};let x=E.getText(),N=E.version,re=await i.matchPatternsInText(S,x,C),me={ranges:[],message:void 0};function oe(y){let{elapsedTimeMs:m,message:P,regexp:I,ranges:J}={...me,...y};return{regexp:I.toString(),elapsedTime:m,matches:J,errorMessage:P}}function le(y){return{name:y.name,defs:y.matches.map(oe)}}let $=re.map(le);return{uri:b,version:N,patternMatches:$}}Object.entries(t).forEach(([h,b])=>{n.onRequest(h,b)}),r.listen(n),e.push(i),n.onShutdown(()=>{e.forEach(h=>h.dispose()),e.length=0}),n.listen()}process.on("unhandledRejection",e=>{console.log("unhandledRejection",e)});process.on("uncaughtException",e=>{console.log("uncaughtException",e)});nd();
//# sourceMappingURL=main.cjs.map
